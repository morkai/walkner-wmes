// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

'use strict';

const lastModifiedPaths = require('h5-mongoose/plugins/lastModifiedPaths');

exports.name = 'ProductNote';

exports.setUp = (app, mongoose) =>
{
  const productNoteSchema = new mongoose.Schema({
    codes: [String],
    target: String,
    priority: {
      type: String,
      enum: ['default', 'info', 'warning', 'success', 'danger'],
      default: 'default'
    },
    text: String
  }, {
    id: false
  });

  productNoteSchema.index({codes: 1});
  productNoteSchema.index({target: 1});

  productNoteSchema.statics.TOPIC_PREFIX = 'orders.productNotes';

  productNoteSchema.plugin(lastModifiedPaths);

  mongoose.model(exports.name, productNoteSchema);
};
