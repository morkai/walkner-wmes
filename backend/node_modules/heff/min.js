// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

'use strict';

exports.prodShiftOrder = pso =>
{
  return exports.psoOperations({
    _id: pso._id,
    startedAt: pso.startedAt,
    finishedAt: pso.finishedAt,
    orderId: pso.orderId,
    operationNo: pso.operationNo,
    sapTaktTime: pso.sapTaktTime,
    quantityDone: pso.quantityDone,
    workDuration: pso.workDuration,
    workerCount: pso.workerCount,
    laborTime: pso.laborTime,
    orderData: {
      operations: pso.orderData.operations,
      taktTimeCoeff: pso.orderData.taktTimeCoeff
    }
  });
};

exports.psoOperations = pso =>
{
  const operations = {};

  if (pso.orderData.operations && pso.orderData.operations[pso.operationNo])
  {
    operations[pso.operationNo] = pso.orderData.operations[pso.operationNo];
  }

  pso.orderData.operations = operations;

  return pso;
};
