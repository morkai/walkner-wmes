// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

'use strict';

module.exports = (app, module, req, res) =>
{
  let url = '/';

  switch (req.params.r)
  {
    case 'catalog':
    {
      url += '#orderDocuments/tree';

      if (req.query.folder)
      {
        url += `?folder=${req.query.folder}`;

        if (req.query.file)
        {
          url += `&file=${req.query.file}`;
        }
      }

      break;
    }

    case 'preview':
    {
      url += `orderDocuments/${req.query.file}?hash=${req.query.hash}`;

      if (req.query.pdf === '1')
      {
        url += '&pdf=1';
      }

      break;
    }

    case 'unsub':
      url += `subscriptions/orderDocumentTree/${req.query.file}?unsub=1`;
      break;
  }

  res.redirect(url);
};
