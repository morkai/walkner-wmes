// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

'use strict';

module.exports = (app, module, socket, prodShiftId, reply) =>
{
  if (typeof reply !== 'function')
  {
    return;
  }

  module.getProdData('shift', prodShiftId, (err, prodShift) =>
  {
    if (err)
    {
      return reply(err);
    }

    if (!prodShift)
    {
      return reply(new Error('UNKNOWN_PROD_SHIFT'));
    }

    const plannedQuantities = prodShift.quantitiesDone.map(quantityDone => quantityDone.planned);

    reply(null, plannedQuantities);
  });
};
