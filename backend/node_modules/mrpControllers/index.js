// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

'use strict';

Object.assign(exports, require('util/createDictionaryModule')(
  require('./models/mrpController'),
  'mrpControllers'
));

exports.modelPlugins = {
  User: (app, module, userSchema) =>
  {
    userSchema.path('mrps', {
      type: [String],
      default: [],
      ref: 'MrpController'
    });
    userSchema.statics.dataAnonymizers.push(user =>
    {
      user.mrps = [];
    });

    userSchema.statics.EDITABLE_PROPERTIES.mrps = true;
    userSchema.statics.SELF_EDITABLE_PROPERTIES.mrps = true;
  }
};
