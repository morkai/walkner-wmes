// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

'use strict';

module.exports = (app, module) =>
{
  const {express, settings, user, FactoryLayout} = module;

  const canView = user.auth('LOCAL', 'USER');
  const canManage = user.auth('FACTORY_LAYOUT:MANAGE');

  express.get(
    '/factoryLayout/settings',
    canView,
    settings.browseRoute('^(factoryLayout|production)\\.')
  );

  express.put('/factoryLayout/settings/:id', canManage, settings.updateRoute);

  express.get('/factoryLayout/:id', canManage, express.crud.readRoute.bind(null, app, FactoryLayout));
};
