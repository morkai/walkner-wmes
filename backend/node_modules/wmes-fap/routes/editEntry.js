// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

'use strict';

module.exports = (app, {user, editEntry}, req, res, next) =>
{
  const sessionUser = req.session.user || {};
  const input = {
    entryId: req.params.id,
    socketId: req.body.socketId,
    data: req.body.data,
    sessionUser,
    updater: user.createUserInfo(sessionUser, req)
  };

  editEntry(input, err =>
  {
    if (err)
    {
      return next(err);
    }

    res.sendStatus(204);
  });
};
