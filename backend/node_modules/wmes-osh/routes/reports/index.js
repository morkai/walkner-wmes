// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

'use strict';

const countRoute = require('./count');
const observersRoute = require('./observers');

module.exports = (app, module) =>
{
  const {
    express,
    user,
    reports
  } = module;

  const canView = user.auth('USER');

  express.get(
    '/osh/reports/count/:type',
    canView,
    reports.helpers.sendCachedReport.bind(null, 'wmes-osh/count'),
    countRoute.bind(null, app, module)
  );

  express.get(
    '/osh/reports/observers',
    canView,
    reports.helpers.sendCachedReport.bind(null, 'wmes-osh/observers'),
    observersRoute.bind(null, app, module)
  );
};
