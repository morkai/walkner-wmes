// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

'use strict';

module.exports = (app, module, req, res) =>
{
  const {
    user
  } = module;

  const uploader = req.body.anonymous === '1'
    ? module.config.anonymousUserInfo
    : user.createUserInfo(req.session.user, req);

  res.json(module.attachments.addPendingUploads(req.files, uploader));
};
