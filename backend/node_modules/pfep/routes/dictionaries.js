// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

'use strict';

const step = require('h5.step');

module.exports = (app, {PfepEntry}, req, res, next) =>
{
  step(
    function()
    {
      PfepEntry.distinct('packType').exec(this.parallel());
      PfepEntry.distinct('unit').exec(this.parallel());
      PfepEntry.distinct('vendor').exec(this.parallel());
    },
    function(err, packTypes, units, vendors)
    {
      if (err)
      {
        return next(err);
      }

      res.json({
        packTypes,
        units,
        vendors
      });
    }
  );
};
