// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

'use strict';

exports.name = 'SnfTest';

exports.setUp = (app, mongoose) =>
{
  const testSchema = new mongoose.Schema({
    startedAt: Date,
    finishedAt: Date,
    program: {},
    result: Boolean,
    currentPassed: Boolean,
    lightPassed: Boolean,
    timePassed: Boolean,
    bulbHolderPassed: Boolean,
    tags: {},
    extremes: {},
    prodLine: String,
    orderNo: String,
    serialNo: {
      type: Number,
      default: 0
    }
  }, {
    id: false
  });

  testSchema.statics.TOPIC_PREFIX = 'snf.tests';

  testSchema.index({startedAt: -1});
  testSchema.index({orderNo: 1});

  mongoose.model(exports.name, testSchema);
};
