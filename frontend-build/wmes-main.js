/**
 * @license RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/domReady for details
 */

/*!
 * jQuery JavaScript Library v2.1.3
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-18T15:11Z
 */

/*!
 * Sizzle CSS Selector Engine v2.2.0-pre
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-16
 */

//     Underscore.js 1.8.2
//     http://underscorejs.org
//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

//     (c) 2010-2013 Jeremy Ashkenas, DocumentCloud Inc.
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

/*!
 * backbone.layoutmanager.js v0.9.4
 * Copyright 2013, Tim Branyen (@tbranyen)
 * backbone.layoutmanager.js may be freely distributed under the MIT license.
 */

//! moment.js
//! version : 2.8.3
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/*!
 * Bootstrap v3.3.2 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

/*!
 * Generated using the Bootstrap Customizer (http://getbootstrap.com/customize/?id=3fc4d804a53dbaac22c8)
 * Config saved to config.json and https://gist.github.com/3fc4d804a53dbaac22c8
 */

/* ========================================================================
 * Bootstrap: button.js v3.3.2
 * http://getbootstrap.com/javascript/#buttons
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: dropdown.js v3.3.2
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: modal.js v3.3.2
 * http://getbootstrap.com/javascript/#modals
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: tooltip.js v3.3.2
 * http://getbootstrap.com/javascript/#tooltip
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: popover.js v3.3.2
 * http://getbootstrap.com/javascript/#popovers
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: tab.js v3.3.2
 * http://getbootstrap.com/javascript/#tabs
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: collapse.js v3.3.2
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: transition.js v3.3.2
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/*
Copyright 2012 Igor Vaynberg

Version: 3.5.2 Timestamp: Sat Nov  1 14:43:36 EDT 2014

This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
General Public License version 2 (the "GPL License"). You may choose either license to govern your
use of this software only upon the condition that you accept all of the terms of either the Apache
License or the GPL License.

You may obtain a copy of the Apache License and the GPL License at:

    http://www.apache.org/licenses/LICENSE-2.0
    http://www.gnu.org/licenses/gpl-2.0.html

Unless required by applicable law or agreed to in writing, software distributed under the
Apache License or the GPL License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
the specific language governing permissions and limitations under the Apache License and the GPL License.
*/

// Copyright (c) 2014, ≈Åukasz Walukiewicz <lukasz@walukiewicz.eu>. Some Rights Reserved.
// Licensed under CC BY-NC-SA 4.0 <http://creativecommons.org/licenses/by-nc-sa/4.0/>.
// Part of the walkner-wmes project <http://lukasz.walukiewicz.eu/p/walkner-wmes>

/*
 * base64-arraybuffer
 * https://github.com/niklasvh/base64-arraybuffer
 *
 * Copyright (c) 2012 Niklas von Hertzen
 * Licensed under the MIT license.
 */

/*! http://mths.be/utf8js v2.0.0 by @mathias */

/**
 * Parses an URI
 *
 * @author Steven Levithan <stevenlevithan.com> (MIT license)
 * @api private
 */

//! moment-timezone.js
//! version : 0.2.4
//! author : Tim Wood
//! license : MIT
//! github.com/moment/moment-timezone

/**
 * @license RequireJS i18n 2.0.4 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/i18n for details
 */

/**
 * Copyright (c) 2010 Maxim Vasiliev
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * @author Maxim Vasiliev
 * Date: 09.09.2010
 * Time: 19:02:33
 */

/**
 * Copyright (c) 2010 Maxim Vasiliev
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * @author Maxim Vasiliev
 * Date: 19.09.11
 * Time: 23:40
 */

/*!
 * Bootstrap Colorpicker
 * (c) 2012 Stefan Petre
 * http://mjaalnir.github.io/bootstrap-colorpicker/
 * http://www.apache.org/licenses/LICENSE-2.0.txt
 */

/*! Copyright (c) 2011 by Jonas Mosbech - https://github.com/jmosbech/StickyTableHeaders
	MIT license info: https://github.com/jmosbech/StickyTableHeaders/blob/master/license.txt */

/*
 Highcharts JS v4.0.4 (2014-09-02)

 (c) 2009-2014 Torstein Honsi

 License: www.highcharts.com/license
*/

/*
 Highcharts JS v4.0.4 (2014-09-02)
 Exporting module

 (c) 2010-2014 Torstein Honsi

 License: www.highcharts.com/license
*/

/*
 Highcharts JS v4.0.4 (2014-09-02)
 Plugin for displaying a message when there is no data visible in chart.

 (c) 2010-2014 Highsoft AS
 Author: Oystein Moseng

 License: www.highcharts.com/license
*/

/*!
 * visibly - v0.6 Aug 2011 - Page Visibility API Polyfill
 * http://github.com/addyosmani
 * Copyright (c) 2011 Addy Osmani
 * Dual licensed under the MIT and GPL licenses.
 *
 * Methods supported:
 * visibly.onVisible(callback)
 * visibly.onHidden(callback)
 * visibly.hidden()
 * visibly.visibilityState()
 * visibly.visibilitychange(callback(state));
 */

if(define("domReady",[],function(){"use strict";function t(t){var e;for(e=0;e<t.length;e+=1)t[e](c)}function e(){var e=l;u&&e.length&&(l=[],t(e))}function n(){u||(u=!0,s&&clearInterval(s),e())}function r(t){return u?t(c):l.push(t),r}var i,o,s,a="undefined"!=typeof window&&window.document,u=!a,c=a?document:null,l=[];if(a){if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1);else if(window.attachEvent){window.attachEvent("onload",n),o=document.createElement("div");try{i=null===window.frameElement}catch(p){}o.doScroll&&i&&window.external&&(s=setInterval(function(){try{o.doScroll(),n()}catch(t){}},30))}"complete"===document.readyState&&n()}return r.version="2.0.1",r.load=function(t,e,n,i){i.isBuild?n(null):r(n)},r}),function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=t.length,n=J.type(t);return"function"===n||J.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function r(t,e,n){if(J.isFunction(e))return J.grep(t,function(t,r){return!!e.call(t,r,t)!==n});if(e.nodeType)return J.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(ae.test(e))return J.filter(e,t,n);e=J.filter(e,t)}return J.grep(t,function(t){return q.call(e,t)>=0!==n})}function i(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function o(t){var e=fe[t]={};return J.each(t.match(he)||[],function(t,n){e[n]=!0}),e}function s(){Q.removeEventListener("DOMContentLoaded",s,!1),t.removeEventListener("load",s,!1),J.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=J.expando+a.uid++}function u(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(we,"-$1").toLowerCase(),n=t.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:ye.test(n)?J.parseJSON(n):n}catch(i){}ve.set(t,e,n)}else n=void 0;return n}function c(){return!0}function l(){return!1}function p(){try{return Q.activeElement}catch(t){}}function d(t,e){return J.nodeName(t,"table")&&J.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function h(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function f(t){var e=ze.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function m(t,e){for(var n=0,r=t.length;r>n;n++)ge.set(t[n],"globalEval",!e||ge.get(e[n],"globalEval"))}function _(t,e){var n,r,i,o,s,a,u,c;if(1===e.nodeType){if(ge.hasData(t)&&(o=ge.access(t),s=ge.set(e,o),c=o.events)){delete s.handle,s.events={};for(i in c)for(n=0,r=c[i].length;r>n;n++)J.event.add(e,i,c[i][n])}ve.hasData(t)&&(a=ve.access(t),u=J.extend({},a),ve.set(e,u))}}function g(t,e){var n=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&J.nodeName(t,e)?J.merge([t],n):n}function v(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Re.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}function y(e,n){var r,i=J(n.createElement(e)).appendTo(n.body),o=t.getDefaultComputedStyle&&(r=t.getDefaultComputedStyle(i[0]))?r.display:J.css(i[0],"display");return i.detach(),o}function w(t){var e=Q,n=Ge[t];return n||(n=y(t,e),"none"!==n&&n||(Ue=(Ue||J("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Ue[0].contentDocument,e.write(),e.close(),n=y(t,e),Ue.detach()),Ge[t]=n),n}function E(t,e,n){var r,i,o,s,a=t.style;return n=n||Be(t),n&&(s=n.getPropertyValue(e)||n[e]),n&&(""!==s||J.contains(t.ownerDocument,t)||(s=J.style(t,e)),Ye.test(s)&&je.test(e)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o)),void 0!==s?s+"":s}function b(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function T(t,e){if(e in t)return e;for(var n=e[0].toUpperCase()+e.slice(1),r=e,i=Xe.length;i--;)if(e=Xe[i]+n,e in t)return e;return r}function R(t,e,n){var r=We.exec(e);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):e}function A(t,e,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===e?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=J.css(t,n+be[o],!0,i)),r?("content"===n&&(s-=J.css(t,"padding"+be[o],!0,i)),"margin"!==n&&(s-=J.css(t,"border"+be[o]+"Width",!0,i))):(s+=J.css(t,"padding"+be[o],!0,i),"padding"!==n&&(s+=J.css(t,"border"+be[o]+"Width",!0,i)));return s}function P(t,e,n){var r=!0,i="width"===e?t.offsetWidth:t.offsetHeight,o=Be(t),s="border-box"===J.css(t,"boxSizing",!1,o);if(0>=i||null==i){if(i=E(t,e,o),(0>i||null==i)&&(i=t.style[e]),Ye.test(i))return i;r=s&&(K.boxSizingReliable()||i===t.style[e]),i=parseFloat(i)||0}return i+A(t,e,n||(s?"border":"content"),r,o)+"px"}function O(t,e){for(var n,r,i,o=[],s=0,a=t.length;a>s;s++)r=t[s],r.style&&(o[s]=ge.get(r,"olddisplay"),n=r.style.display,e?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&Te(r)&&(o[s]=ge.access(r,"olddisplay",w(r.nodeName)))):(i=Te(r),"none"===n&&i||ge.set(r,"olddisplay",i?n:J.css(r,"display"))));for(s=0;a>s;s++)r=t[s],r.style&&(e&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=e?o[s]||"":"none"));return t}function S(t,e,n,r,i){return new S.prototype.init(t,e,n,r,i)}function C(){return setTimeout(function(){Ke=void 0}),Ke=J.now()}function k(t,e){var n,r=0,i={height:t};for(e=e?1:0;4>r;r+=2-e)n=be[r],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function M(t,e,n){for(var r,i=(nn[e]||[]).concat(nn["*"]),o=0,s=i.length;s>o;o++)if(r=i[o].call(n,e,t))return r}function I(t,e,n){var r,i,o,s,a,u,c,l,p=this,d={},h=t.style,f=t.nodeType&&Te(t),m=ge.get(t,"fxshow");n.queue||(a=J._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,J.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],c=J.css(t,"display"),l="none"===c?ge.get(t,"olddisplay")||w(t.nodeName):c,"inline"===l&&"none"===J.css(t,"float")&&(h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(r in e)if(i=e[r],Ze.exec(i)){if(delete e[r],o=o||"toggle"===i,i===(f?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;f=!0}d[r]=m&&m[r]||J.style(t,r)}else c=void 0;if(J.isEmptyObject(d))"inline"===("none"===c?w(t.nodeName):c)&&(h.display=c);else{m?"hidden"in m&&(f=m.hidden):m=ge.access(t,"fxshow",{}),o&&(m.hidden=!f),f?J(t).show():p.done(function(){J(t).hide()}),p.done(function(){var e;ge.remove(t,"fxshow");for(e in d)J.style(t,e,d[e])});for(r in d)s=M(f?m[r]:0,r,p),r in m||(m[r]=s.start,f&&(s.end=s.start,s.start="width"===r||"height"===r?1:0))}}function D(t,e){var n,r,i,o,s;for(n in t)if(r=J.camelCase(n),i=e[r],o=t[n],J.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),s=J.cssHooks[r],s&&"expand"in s){o=s.expand(o),delete t[r];for(n in o)n in t||(t[n]=o[n],e[n]=i)}else e[r]=i}function L(t,e,n){var r,i,o=0,s=en.length,a=J.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var e=Ke||C(),n=Math.max(0,c.startTime+c.duration-e),r=n/c.duration||0,o=1-r,s=0,u=c.tweens.length;u>s;s++)c.tweens[s].run(o);return a.notifyWith(t,[c,o,n]),1>o&&u?n:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:J.extend({},e),opts:J.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Ke||C(),duration:n.duration,tweens:[],createTween:function(e,n){var r=J.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(r),r},stop:function(e){var n=0,r=e?c.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)c.tweens[n].run(1);return e?a.resolveWith(t,[c,e]):a.rejectWith(t,[c,e]),this}}),l=c.props;for(D(l,c.opts.specialEasing);s>o;o++)if(r=en[o].call(c,t,l,c.opts))return r;return J.map(l,M,c),J.isFunction(c.opts.start)&&c.opts.start.call(t,c),J.fx.timer(J.extend(u,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function N(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(he)||[];if(J.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function z(t,e,n,r){function i(a){var u;return o[a]=!0,J.each(t[a]||[],function(t,a){var c=a(e,n,r);return"string"!=typeof c||s||o[c]?s?!(u=c):void 0:(e.dataTypes.unshift(c),i(c),!1)}),u}var o={},s=t===wn;return i(e.dataTypes[0])||!o["*"]&&i("*")}function x(t,e){var n,r,i=J.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&J.extend(!0,t,r),t}function F(t,e,n){for(var r,i,o,s,a=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||t.converters[i+" "+u[0]]){o=i;break}s||(s=i)}o=o||s}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function U(t,e,n,r){var i,o,s,a,u,c={},l=t.dataTypes.slice();if(l[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(o=l.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(s=c[u+" "+o]||c["* "+o],!s)for(i in c)if(a=i.split(" "),a[1]===o&&(s=c[u+" "+a[0]]||c["* "+a[0]])){s===!0?s=c[i]:c[i]!==!0&&(o=a[0],l.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(p){return{state:"parsererror",error:s?p:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}function G(t,e,n,r){var i;if(J.isArray(e))J.each(e,function(e,i){n||An.test(t)?r(t,i):G(t+"["+("object"==typeof i?e:"")+"]",i,n,r)});else if(n||"object"!==J.type(e))r(t,e);else for(i in e)G(t+"["+i+"]",e[i],n,r)}function j(t){return J.isWindow(t)?t:9===t.nodeType&&t.defaultView}var Y=[],B=Y.slice,V=Y.concat,W=Y.push,q=Y.indexOf,H={},$=H.toString,X=H.hasOwnProperty,K={},Q=t.document,Z="2.1.3",J=function(t,e){return new J.fn.init(t,e)},te=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ee=/^-ms-/,ne=/-([\da-z])/gi,re=function(t,e){return e.toUpperCase()};J.fn=J.prototype={jquery:Z,constructor:J,selector:"",length:0,toArray:function(){return B.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:B.call(this)},pushStack:function(t){var e=J.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return J.each(this,t,e)},map:function(t){return this.pushStack(J.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(B.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:W,sort:Y.sort,splice:Y.splice},J.extend=J.fn.extend=function(){var t,e,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||J.isFunction(s)||(s={}),a===u&&(s=this,a--);u>a;a++)if(null!=(t=arguments[a]))for(e in t)n=s[e],r=t[e],s!==r&&(c&&r&&(J.isPlainObject(r)||(i=J.isArray(r)))?(i?(i=!1,o=n&&J.isArray(n)?n:[]):o=n&&J.isPlainObject(n)?n:{},s[e]=J.extend(c,o,r)):void 0!==r&&(s[e]=r));return s},J.extend({expando:"jQuery"+(Z+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===J.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!J.isArray(t)&&t-parseFloat(t)+1>=0},isPlainObject:function(t){return"object"!==J.type(t)||t.nodeType||J.isWindow(t)?!1:t.constructor&&!X.call(t.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?H[$.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;t=J.trim(t),t&&(1===t.indexOf("use strict")?(e=Q.createElement("script"),e.text=t,Q.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(ee,"ms-").replace(ne,re)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,r){var i,o=0,s=t.length,a=n(t);if(r){if(a)for(;s>o&&(i=e.apply(t[o],r),i!==!1);o++);else for(o in t)if(i=e.apply(t[o],r),i===!1)break}else if(a)for(;s>o&&(i=e.call(t[o],o,t[o]),i!==!1);o++);else for(o in t)if(i=e.call(t[o],o,t[o]),i===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(te,"")},makeArray:function(t,e){var r=e||[];return null!=t&&(n(Object(t))?J.merge(r,"string"==typeof t?[t]:t):W.call(r,t)),r},inArray:function(t,e,n){return null==e?-1:q.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;n>r;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r,i=[],o=0,s=t.length,a=!n;s>o;o++)r=!e(t[o],o),r!==a&&i.push(t[o]);return i},map:function(t,e,r){var i,o=0,s=t.length,a=n(t),u=[];if(a)for(;s>o;o++)i=e(t[o],o,r),null!=i&&u.push(i);else for(o in t)i=e(t[o],o,r),null!=i&&u.push(i);return V.apply([],u)},guid:1,proxy:function(t,e){var n,r,i;return"string"==typeof e&&(n=t[e],e=t,t=n),J.isFunction(t)?(r=B.call(arguments,2),i=function(){return t.apply(e||this,r.concat(B.call(arguments)))},i.guid=t.guid=t.guid||J.guid++,i):void 0},now:Date.now,support:K}),J.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){H["[object "+e+"]"]=e.toLowerCase()});var ie=function(t){function e(t,e,n,r){var i,o,s,a,u,c,p,h,f,m;if((e?e.ownerDocument||e:G)!==I&&M(e),e=e||I,n=n||[],a=e.nodeType,"string"!=typeof t||!t||1!==a&&9!==a&&11!==a)return n;if(!r&&L){if(11!==a&&(i=ve.exec(t)))if(s=i[1]){if(9===a){if(o=e.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(s))&&F(e,o)&&o.id===s)return n.push(o),n}else{if(i[2])return Z.apply(n,e.getElementsByTagName(t)),n;if((s=i[3])&&E.getElementsByClassName)return Z.apply(n,e.getElementsByClassName(s)),n}if(E.qsa&&(!N||!N.test(t))){if(h=p=U,f=e,m=1!==a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=A(t),(p=e.getAttribute("id"))?h=p.replace(we,"\\$&"):e.setAttribute("id",h),h="[id='"+h+"'] ",u=c.length;u--;)c[u]=h+d(c[u]);f=ye.test(t)&&l(e.parentNode)||e,m=c.join(",")}if(m)try{return Z.apply(n,f.querySelectorAll(m)),n}catch(_){}finally{p||e.removeAttribute("id")}}}return O(t.replace(ue,"$1"),e,n,r)}function n(){function t(n,r){return e.push(n+" ")>b.cacheLength&&delete t[e.shift()],t[n+" "]=r}var e=[];return t}function r(t){return t[U]=!0,t}function i(t){var e=I.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var n=t.split("|"),r=t.length;r--;)b.attrHandle[n[r]]=e}function s(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||H)-(~t.sourceIndex||H);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function a(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function u(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function c(t){return r(function(e){return e=+e,r(function(n,r){for(var i,o=t([],n.length,e),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}function l(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function p(){}function d(t){for(var e=0,n=t.length,r="";n>e;e++)r+=t[e].value;return r}function h(t,e,n){var r=e.dir,i=n&&"parentNode"===r,o=Y++;return e.first?function(e,n,o){for(;e=e[r];)if(1===e.nodeType||i)return t(e,n,o)}:function(e,n,s){var a,u,c=[j,o];if(s){for(;e=e[r];)if((1===e.nodeType||i)&&t(e,n,s))return!0}else for(;e=e[r];)if(1===e.nodeType||i){if(u=e[U]||(e[U]={}),(a=u[r])&&a[0]===j&&a[1]===o)return c[2]=a[2];if(u[r]=c,c[2]=t(e,n,s))return!0}}}function f(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function m(t,n,r){for(var i=0,o=n.length;o>i;i++)e(t,n[i],r);return r}function _(t,e,n,r,i){for(var o,s=[],a=0,u=t.length,c=null!=e;u>a;a++)(o=t[a])&&(!n||n(o,r,i))&&(s.push(o),c&&e.push(a));return s}function g(t,e,n,i,o,s){return i&&!i[U]&&(i=g(i)),o&&!o[U]&&(o=g(o,s)),r(function(r,s,a,u){var c,l,p,d=[],h=[],f=s.length,g=r||m(e||"*",a.nodeType?[a]:a,[]),v=!t||!r&&e?g:_(g,d,t,a,u),y=n?o||(r?t:f||i)?[]:s:v;if(n&&n(v,y,a,u),i)for(c=_(y,h),i(c,[],a,u),l=c.length;l--;)(p=c[l])&&(y[h[l]]=!(v[h[l]]=p));if(r){if(o||t){if(o){for(c=[],l=y.length;l--;)(p=y[l])&&c.push(v[l]=p);o(null,y=[],c,u)}for(l=y.length;l--;)(p=y[l])&&(c=o?te(r,p):d[l])>-1&&(r[c]=!(s[c]=p))}}else y=_(y===s?y.splice(f,y.length):y),o?o(null,s,y,u):Z.apply(s,y)})}function v(t){for(var e,n,r,i=t.length,o=b.relative[t[0].type],s=o||b.relative[" "],a=o?1:0,u=h(function(t){return t===e},s,!0),c=h(function(t){return te(e,t)>-1},s,!0),l=[function(t,n,r){var i=!o&&(r||n!==S)||((e=n).nodeType?u(t,n,r):c(t,n,r));return e=null,i}];i>a;a++)if(n=b.relative[t[a].type])l=[h(f(l),n)];else{if(n=b.filter[t[a].type].apply(null,t[a].matches),n[U]){for(r=++a;i>r&&!b.relative[t[r].type];r++);return g(a>1&&f(l),a>1&&d(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(ue,"$1"),n,r>a&&v(t.slice(a,r)),i>r&&v(t=t.slice(r)),i>r&&d(t))}l.push(n)}return f(l)}function y(t,n){var i=n.length>0,o=t.length>0,s=function(r,s,a,u,c){var l,p,d,h=0,f="0",m=r&&[],g=[],v=S,y=r||o&&b.find.TAG("*",c),w=j+=null==v?1:Math.random()||.1,E=y.length;for(c&&(S=s!==I&&s);f!==E&&null!=(l=y[f]);f++){if(o&&l){for(p=0;d=t[p++];)if(d(l,s,a)){u.push(l);break}c&&(j=w)}i&&((l=!d&&l)&&h--,r&&m.push(l))}if(h+=f,i&&f!==h){for(p=0;d=n[p++];)d(m,g,s,a);if(r){if(h>0)for(;f--;)m[f]||g[f]||(g[f]=K.call(u));g=_(g)}Z.apply(u,g),c&&!r&&g.length>0&&h+n.length>1&&e.uniqueSort(u)}return c&&(j=w,S=v),m};return i?r(s):s}var w,E,b,T,R,A,P,O,S,C,k,M,I,D,L,N,z,x,F,U="sizzle"+1*new Date,G=t.document,j=0,Y=0,B=n(),V=n(),W=n(),q=function(t,e){return t===e&&(k=!0),0},H=1<<31,$={}.hasOwnProperty,X=[],K=X.pop,Q=X.push,Z=X.push,J=X.slice,te=function(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1},ee="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie=re.replace("w","w#"),oe="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",se=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",ae=new RegExp(ne+"+","g"),ue=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ce=new RegExp("^"+ne+"*,"+ne+"*"),le=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),pe=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(se),he=new RegExp("^"+ie+"$"),fe={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+ee+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,_e=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,we=/'|\\/g,Ee=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),be=function(t,e,n){var r="0x"+e-65536;return r!==r||n?e:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},Te=function(){M()};try{Z.apply(X=J.call(G.childNodes),G.childNodes),X[G.childNodes.length].nodeType}catch(Re){Z={apply:X.length?function(t,e){Q.apply(t,J.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}E=e.support={},R=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},M=e.setDocument=function(t){var e,n,r=t?t.ownerDocument||t:G;return r!==I&&9===r.nodeType&&r.documentElement?(I=r,D=r.documentElement,n=r.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",Te,!1):n.attachEvent&&n.attachEvent("onunload",Te)),L=!R(r),E.attributes=i(function(t){return t.className="i",!t.getAttribute("className")}),E.getElementsByTagName=i(function(t){return t.appendChild(r.createComment("")),!t.getElementsByTagName("*").length}),E.getElementsByClassName=ge.test(r.getElementsByClassName),E.getById=i(function(t){return D.appendChild(t).id=U,!r.getElementsByName||!r.getElementsByName(U).length}),E.getById?(b.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&L){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},b.filter.ID=function(t){var e=t.replace(Ee,be);return function(t){return t.getAttribute("id")===e}}):(delete b.find.ID,b.filter.ID=function(t){var e=t.replace(Ee,be);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),b.find.TAG=E.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):E.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=E.getElementsByClassName&&function(t,e){return L?e.getElementsByClassName(t):void 0},z=[],N=[],(E.qsa=ge.test(r.querySelectorAll))&&(i(function(t){D.appendChild(t).innerHTML="<a id='"+U+"'></a><select id='"+U+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&N.push("[*^$]="+ne+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||N.push("\\["+ne+"*(?:value|"+ee+")"),t.querySelectorAll("[id~="+U+"-]").length||N.push("~="),t.querySelectorAll(":checked").length||N.push(":checked"),t.querySelectorAll("a#"+U+"+*").length||N.push(".#.+[+~]")}),i(function(t){var e=r.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&N.push("name"+ne+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||N.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),N.push(",.*:")})),(E.matchesSelector=ge.test(x=D.matches||D.webkitMatchesSelector||D.mozMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&i(function(t){E.disconnectedMatch=x.call(t,"div"),x.call(t,"[s!='']:x"),z.push("!=",se)}),N=N.length&&new RegExp(N.join("|")),z=z.length&&new RegExp(z.join("|")),e=ge.test(D.compareDocumentPosition),F=e||ge.test(D.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},q=e?function(t,e){if(t===e)return k=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!E.sortDetached&&e.compareDocumentPosition(t)===n?t===r||t.ownerDocument===G&&F(G,t)?-1:e===r||e.ownerDocument===G&&F(G,e)?1:C?te(C,t)-te(C,e):0:4&n?-1:1)}:function(t,e){if(t===e)return k=!0,0;var n,i=0,o=t.parentNode,a=e.parentNode,u=[t],c=[e];if(!o||!a)return t===r?-1:e===r?1:o?-1:a?1:C?te(C,t)-te(C,e):0;if(o===a)return s(t,e);for(n=t;n=n.parentNode;)u.unshift(n);for(n=e;n=n.parentNode;)c.unshift(n);for(;u[i]===c[i];)i++;return i?s(u[i],c[i]):u[i]===G?-1:c[i]===G?1:0},r):I},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==I&&M(t),n=n.replace(pe,"='$1']"),!(!E.matchesSelector||!L||z&&z.test(n)||N&&N.test(n)))try{var r=x.call(t,n);if(r||E.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(i){}return e(n,I,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==I&&M(t),F(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==I&&M(t);var n=b.attrHandle[e.toLowerCase()],r=n&&$.call(b.attrHandle,e.toLowerCase())?n(t,e,!L):void 0;return void 0!==r?r:E.attributes||!L?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],r=0,i=0;if(k=!E.detectDuplicates,C=!E.sortStable&&t.slice(0),t.sort(q),k){for(;e=t[i++];)e===t[i]&&(r=n.push(i));for(;r--;)t.splice(n[r],1)}return C=null,t},T=e.getText=function(t){var e,n="",r=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=T(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[r++];)n+=T(e);return n},b=e.selectors={cacheLength:50,createPseudo:r,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Ee,be),t[3]=(t[3]||t[4]||t[5]||"").replace(Ee,be),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return fe.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&de.test(n)&&(e=A(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Ee,be).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=B[t+" "];return e||(e=new RegExp("(^|"+ne+")"+t+"("+ne+"|$)"))&&B(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(i){var o=e.attr(i,t);return null==o?"!="===n:n?(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(ae," ")+" ").indexOf(r)>-1:"|="===n?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,u){var c,l,p,d,h,f,m=o!==s?"nextSibling":"previousSibling",_=e.parentNode,g=a&&e.nodeName.toLowerCase(),v=!u&&!a;if(_){if(o){for(;m;){for(p=e;p=p[m];)if(a?p.nodeName.toLowerCase()===g:1===p.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?_.firstChild:_.lastChild],s&&v){for(l=_[U]||(_[U]={}),c=l[t]||[],h=c[0]===j&&c[1],d=c[0]===j&&c[2],p=h&&_.childNodes[h];p=++h&&p&&p[m]||(d=h=0)||f.pop();)if(1===p.nodeType&&++d&&p===e){l[t]=[j,h,d];break}}else if(v&&(c=(e[U]||(e[U]={}))[t])&&c[0]===j)d=c[1];else for(;(p=++h&&p&&p[m]||(d=h=0)||f.pop())&&((a?p.nodeName.toLowerCase()!==g:1!==p.nodeType)||!++d||(v&&((p[U]||(p[U]={}))[t]=[j,d]),p!==e)););return d-=i,d===r||d%r===0&&d/r>=0}}},PSEUDO:function(t,n){var i,o=b.pseudos[t]||b.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[U]?o(n):o.length>1?(i=[t,t,"",n],b.setFilters.hasOwnProperty(t.toLowerCase())?r(function(t,e){for(var r,i=o(t,n),s=i.length;s--;)r=te(t,i[s]),t[r]=!(e[r]=i[s])}):function(t){return o(t,0,i)}):o}},pseudos:{not:r(function(t){var e=[],n=[],i=P(t.replace(ue,"$1"));return i[U]?r(function(t,e,n,r){for(var o,s=i(t,null,r,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,r,o){return e[0]=t,i(e,null,o,n),e[0]=null,!n.pop()}}),has:r(function(t){return function(n){return e(t,n).length>0}}),contains:r(function(t){return t=t.replace(Ee,be),function(e){return(e.textContent||e.innerText||T(e)).indexOf(t)>-1}}),lang:r(function(t){return he.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(Ee,be).toLowerCase(),function(e){var n;do if(n=L?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===D},focus:function(t){return t===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!b.pseudos.empty(t)},header:function(t){return _e.test(t.nodeName)},input:function(t){return me.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,n){return[0>n?n+e:n]}),even:c(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:c(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:c(function(t,e,n){for(var r=0>n?n+e:n;--r>=0;)t.push(r);return t}),gt:c(function(t,e,n){for(var r=0>n?n+e:n;++r<e;)t.push(r);return t})}},b.pseudos.nth=b.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[w]=a(w);for(w in{submit:!0,reset:!0})b.pseudos[w]=u(w);return p.prototype=b.filters=b.pseudos,b.setFilters=new p,A=e.tokenize=function(t,n){var r,i,o,s,a,u,c,l=V[t+" "];if(l)return n?0:l.slice(0);for(a=t,u=[],c=b.preFilter;a;){(!r||(i=ce.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),u.push(o=[])),r=!1,(i=le.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ue," ")}),a=a.slice(r.length));for(s in b.filter)!(i=fe[s].exec(a))||c[s]&&!(i=c[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return n?a.length:a?e.error(t):V(t,u).slice(0)},P=e.compile=function(t,e){var n,r=[],i=[],o=W[t+" "];if(!o){for(e||(e=A(t)),n=e.length;n--;)o=v(e[n]),o[U]?r.push(o):i.push(o);o=W(t,y(i,r)),o.selector=t}return o},O=e.select=function(t,e,n,r){var i,o,s,a,u,c="function"==typeof t&&t,p=!r&&A(t=c.selector||t);if(n=n||[],1===p.length){if(o=p[0]=p[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&E.getById&&9===e.nodeType&&L&&b.relative[o[1].type]){if(e=(b.find.ID(s.matches[0].replace(Ee,be),e)||[])[0],!e)return n;c&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(i=fe.needsContext.test(t)?0:o.length;i--&&(s=o[i],!b.relative[a=s.type]);)if((u=b.find[a])&&(r=u(s.matches[0].replace(Ee,be),ye.test(o[0].type)&&l(e.parentNode)||e))){if(o.splice(i,1),t=r.length&&d(o),!t)return Z.apply(n,r),n;break}}return(c||P(t,p))(r,e,!L,n,ye.test(t)&&l(e.parentNode)||e),n},E.sortStable=U.split("").sort(q).join("")===U,E.detectDuplicates=!!k,M(),E.sortDetached=i(function(t){return 1&t.compareDocumentPosition(I.createElement("div"))}),i(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),E.attributes&&i(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")
})||o("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),i(function(t){return null==t.getAttribute("disabled")})||o(ee,function(t,e,n){var r;return n?void 0:t[e]===!0?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),e}(t);J.find=ie,J.expr=ie.selectors,J.expr[":"]=J.expr.pseudos,J.unique=ie.uniqueSort,J.text=ie.getText,J.isXMLDoc=ie.isXML,J.contains=ie.contains;var oe=J.expr.match.needsContext,se=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ae=/^.[^:#\[\.,]*$/;J.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?J.find.matchesSelector(r,t)?[r]:[]:J.find.matches(t,J.grep(e,function(t){return 1===t.nodeType}))},J.fn.extend({find:function(t){var e,n=this.length,r=[],i=this;if("string"!=typeof t)return this.pushStack(J(t).filter(function(){for(e=0;n>e;e++)if(J.contains(i[e],this))return!0}));for(e=0;n>e;e++)J.find(t,i[e],r);return r=this.pushStack(n>1?J.unique(r):r),r.selector=this.selector?this.selector+" "+t:t,r},filter:function(t){return this.pushStack(r(this,t||[],!1))},not:function(t){return this.pushStack(r(this,t||[],!0))},is:function(t){return!!r(this,"string"==typeof t&&oe.test(t)?J(t):t||[],!1).length}});var ue,ce=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,le=J.fn.init=function(t,e){var n,r;if(!t)return this;if("string"==typeof t){if(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:ce.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||ue).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof J?e[0]:e,J.merge(this,J.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:Q,!0)),se.test(n[1])&&J.isPlainObject(e))for(n in e)J.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return r=Q.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=Q,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):J.isFunction(t)?"undefined"!=typeof ue.ready?ue.ready(t):t(J):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),J.makeArray(t,this))};le.prototype=J.fn,ue=J(Q);var pe=/^(?:parents|prev(?:Until|All))/,de={children:!0,contents:!0,next:!0,prev:!0};J.extend({dir:function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&J(t).is(n))break;r.push(t)}return r},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),J.fn.extend({has:function(t){var e=J(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(J.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,r=0,i=this.length,o=[],s=oe.test(t)||"string"!=typeof t?J(t,e||this.context):0;i>r;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&J.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?J.unique(o):o)},index:function(t){return t?"string"==typeof t?q.call(J(t),this[0]):q.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(J.unique(J.merge(this.get(),J(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),J.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return J.dir(t,"parentNode")},parentsUntil:function(t,e,n){return J.dir(t,"parentNode",n)},next:function(t){return i(t,"nextSibling")},prev:function(t){return i(t,"previousSibling")},nextAll:function(t){return J.dir(t,"nextSibling")},prevAll:function(t){return J.dir(t,"previousSibling")},nextUntil:function(t,e,n){return J.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return J.dir(t,"previousSibling",n)},siblings:function(t){return J.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return J.sibling(t.firstChild)},contents:function(t){return t.contentDocument||J.merge([],t.childNodes)}},function(t,e){J.fn[t]=function(n,r){var i=J.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=J.filter(r,i)),this.length>1&&(de[t]||J.unique(i),pe.test(t)&&i.reverse()),this.pushStack(i)}});var he=/\S+/g,fe={};J.Callbacks=function(t){t="string"==typeof t?fe[t]||o(t):J.extend({},t);var e,n,r,i,s,a,u=[],c=!t.once&&[],l=function(o){for(e=t.memory&&o,n=!0,a=i||0,i=0,s=u.length,r=!0;u&&s>a;a++)if(u[a].apply(o[0],o[1])===!1&&t.stopOnFalse){e=!1;break}r=!1,u&&(c?c.length&&l(c.shift()):e?u=[]:p.disable())},p={add:function(){if(u){var n=u.length;!function o(e){J.each(e,function(e,n){var r=J.type(n);"function"===r?t.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==r&&o(n)})}(arguments),r?s=u.length:e&&(i=n,l(e))}return this},remove:function(){return u&&J.each(arguments,function(t,e){for(var n;(n=J.inArray(e,u,n))>-1;)u.splice(n,1),r&&(s>=n&&s--,a>=n&&a--)}),this},has:function(t){return t?J.inArray(t,u)>-1:!(!u||!u.length)},empty:function(){return u=[],s=0,this},disable:function(){return u=c=e=void 0,this},disabled:function(){return!u},lock:function(){return c=void 0,e||p.disable(),this},locked:function(){return!c},fireWith:function(t,e){return!u||n&&!c||(e=e||[],e=[t,e.slice?e.slice():e],r?c.push(e):l(e)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!n}};return p},J.extend({Deferred:function(t){var e=[["resolve","done",J.Callbacks("once memory"),"resolved"],["reject","fail",J.Callbacks("once memory"),"rejected"],["notify","progress",J.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return J.Deferred(function(n){J.each(e,function(e,o){var s=J.isFunction(t[e])&&t[e];i[o[1]](function(){var t=s&&s.apply(this,arguments);t&&J.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?J.extend(t,r):r}},i={};return r.pipe=r.then,J.each(e,function(t,o){var s=o[2],a=o[3];r[o[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=s.fireWith}),r.promise(i),t&&t.call(i,i),i},when:function(t){var e,n,r,i=0,o=B.call(arguments),s=o.length,a=1!==s||t&&J.isFunction(t.promise)?s:0,u=1===a?t:J.Deferred(),c=function(t,n,r){return function(i){n[t]=this,r[t]=arguments.length>1?B.call(arguments):i,r===e?u.notifyWith(n,r):--a||u.resolveWith(n,r)}};if(s>1)for(e=new Array(s),n=new Array(s),r=new Array(s);s>i;i++)o[i]&&J.isFunction(o[i].promise)?o[i].promise().done(c(i,r,o)).fail(u.reject).progress(c(i,n,e)):--a;return a||u.resolveWith(r,o),u.promise()}});var me;J.fn.ready=function(t){return J.ready.promise().done(t),this},J.extend({isReady:!1,readyWait:1,holdReady:function(t){t?J.readyWait++:J.ready(!0)},ready:function(t){(t===!0?--J.readyWait:J.isReady)||(J.isReady=!0,t!==!0&&--J.readyWait>0||(me.resolveWith(Q,[J]),J.fn.triggerHandler&&(J(Q).triggerHandler("ready"),J(Q).off("ready"))))}}),J.ready.promise=function(e){return me||(me=J.Deferred(),"complete"===Q.readyState?setTimeout(J.ready):(Q.addEventListener("DOMContentLoaded",s,!1),t.addEventListener("load",s,!1))),me.promise(e)},J.ready.promise();var _e=J.access=function(t,e,n,r,i,o,s){var a=0,u=t.length,c=null==n;if("object"===J.type(n)){i=!0;for(a in n)J.access(t,e,a,n[a],!0,o,s)}else if(void 0!==r&&(i=!0,J.isFunction(r)||(s=!0),c&&(s?(e.call(t,r),e=null):(c=e,e=function(t,e,n){return c.call(J(t),n)})),e))for(;u>a;a++)e(t[a],n,s?r:r.call(t[a],a,e(t[a],n)));return i?t:c?e.call(t):u?e(t[0],n):o};J.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},a.uid=1,a.accepts=J.acceptData,a.prototype={key:function(t){if(!a.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=a.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(r){e[this.expando]=n,J.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var r,i=this.key(t),o=this.cache[i];if("string"==typeof e)o[e]=n;else if(J.isEmptyObject(o))J.extend(this.cache[i],e);else for(r in e)o[r]=e[r];return o},get:function(t,e){var n=this.cache[this.key(t)];return void 0===e?n:n[e]},access:function(t,e,n){var r;return void 0===e||e&&"string"==typeof e&&void 0===n?(r=this.get(t,e),void 0!==r?r:this.get(t,J.camelCase(e))):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r,i,o=this.key(t),s=this.cache[o];if(void 0===e)this.cache[o]={};else{J.isArray(e)?r=e.concat(e.map(J.camelCase)):(i=J.camelCase(e),e in s?r=[e,i]:(r=i,r=r in s?[r]:r.match(he)||[])),n=r.length;for(;n--;)delete s[r[n]]}},hasData:function(t){return!J.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var ge=new a,ve=new a,ye=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,we=/([A-Z])/g;J.extend({hasData:function(t){return ve.hasData(t)||ge.hasData(t)},data:function(t,e,n){return ve.access(t,e,n)},removeData:function(t,e){ve.remove(t,e)},_data:function(t,e,n){return ge.access(t,e,n)},_removeData:function(t,e){ge.remove(t,e)}}),J.fn.extend({data:function(t,e){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(i=ve.get(o),1===o.nodeType&&!ge.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(r=s[n].name,0===r.indexOf("data-")&&(r=J.camelCase(r.slice(5)),u(o,r,i[r])));ge.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){ve.set(this,t)}):_e(this,function(e){var n,r=J.camelCase(t);if(o&&void 0===e){if(n=ve.get(o,t),void 0!==n)return n;if(n=ve.get(o,r),void 0!==n)return n;if(n=u(o,r,void 0),void 0!==n)return n}else this.each(function(){var n=ve.get(this,r);ve.set(this,r,e),-1!==t.indexOf("-")&&void 0!==n&&ve.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){ve.remove(this,t)})}}),J.extend({queue:function(t,e,n){var r;return t?(e=(e||"fx")+"queue",r=ge.get(t,e),n&&(!r||J.isArray(n)?r=ge.access(t,e,J.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=J.queue(t,e),r=n.length,i=n.shift(),o=J._queueHooks(t,e),s=function(){J.dequeue(t,e)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,s,o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return ge.get(t,n)||ge.access(t,n,{empty:J.Callbacks("once memory").add(function(){ge.remove(t,[e+"queue",n])})})}}),J.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?J.queue(this[0],t):void 0===e?this:this.each(function(){var n=J.queue(this,t,e);J._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&J.dequeue(this,t)})},dequeue:function(t){return this.each(function(){J.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=J.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)n=ge.get(o[s],t+"queueHooks"),n&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(e)}});var Ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,be=["Top","Right","Bottom","Left"],Te=function(t,e){return t=e||t,"none"===J.css(t,"display")||!J.contains(t.ownerDocument,t)},Re=/^(?:checkbox|radio)$/i;!function(){var t=Q.createDocumentFragment(),e=t.appendChild(Q.createElement("div")),n=Q.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),K.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",K.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Ae="undefined";K.focusinBubbles="onfocusin"in t;var Pe=/^key/,Oe=/^(?:mouse|pointer|contextmenu)|click/,Se=/^(?:focusinfocus|focusoutblur)$/,Ce=/^([^.]*)(?:\.(.+)|)$/;J.event={global:{},add:function(t,e,n,r,i){var o,s,a,u,c,l,p,d,h,f,m,_=ge.get(t);if(_)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=J.guid++),(u=_.events)||(u=_.events={}),(s=_.handle)||(s=_.handle=function(e){return typeof J!==Ae&&J.event.triggered!==e.type?J.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(he)||[""],c=e.length;c--;)a=Ce.exec(e[c])||[],h=m=a[1],f=(a[2]||"").split(".").sort(),h&&(p=J.event.special[h]||{},h=(i?p.delegateType:p.bindType)||h,p=J.event.special[h]||{},l=J.extend({type:h,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&J.expr.match.needsContext.test(i),namespace:f.join(".")},o),(d=u[h])||(d=u[h]=[],d.delegateCount=0,p.setup&&p.setup.call(t,r,f,s)!==!1||t.addEventListener&&t.addEventListener(h,s,!1)),p.add&&(p.add.call(t,l),l.handler.guid||(l.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,l):d.push(l),J.event.global[h]=!0)},remove:function(t,e,n,r,i){var o,s,a,u,c,l,p,d,h,f,m,_=ge.hasData(t)&&ge.get(t);if(_&&(u=_.events)){for(e=(e||"").match(he)||[""],c=e.length;c--;)if(a=Ce.exec(e[c])||[],h=m=a[1],f=(a[2]||"").split(".").sort(),h){for(p=J.event.special[h]||{},h=(r?p.delegateType:p.bindType)||h,d=u[h]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=d.length;o--;)l=d[o],!i&&m!==l.origType||n&&n.guid!==l.guid||a&&!a.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(d.splice(o,1),l.selector&&d.delegateCount--,p.remove&&p.remove.call(t,l));s&&!d.length&&(p.teardown&&p.teardown.call(t,f,_.handle)!==!1||J.removeEvent(t,h,_.handle),delete u[h])}else for(h in u)J.event.remove(t,h+e[c],n,r,!0);J.isEmptyObject(u)&&(delete _.handle,ge.remove(t,"events"))}},trigger:function(e,n,r,i){var o,s,a,u,c,l,p,d=[r||Q],h=X.call(e,"type")?e.type:e,f=X.call(e,"namespace")?e.namespace.split("."):[];if(s=a=r=r||Q,3!==r.nodeType&&8!==r.nodeType&&!Se.test(h+J.event.triggered)&&(h.indexOf(".")>=0&&(f=h.split("."),h=f.shift(),f.sort()),c=h.indexOf(":")<0&&"on"+h,e=e[J.expando]?e:new J.Event(h,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),n=null==n?[e]:J.makeArray(n,[e]),p=J.event.special[h]||{},i||!p.trigger||p.trigger.apply(r,n)!==!1)){if(!i&&!p.noBubble&&!J.isWindow(r)){for(u=p.delegateType||h,Se.test(u+h)||(s=s.parentNode);s;s=s.parentNode)d.push(s),a=s;a===(r.ownerDocument||Q)&&d.push(a.defaultView||a.parentWindow||t)}for(o=0;(s=d[o++])&&!e.isPropagationStopped();)e.type=o>1?u:p.bindType||h,l=(ge.get(s,"events")||{})[e.type]&&ge.get(s,"handle"),l&&l.apply(s,n),l=c&&s[c],l&&l.apply&&J.acceptData(s)&&(e.result=l.apply(s,n),e.result===!1&&e.preventDefault());return e.type=h,i||e.isDefaultPrevented()||p._default&&p._default.apply(d.pop(),n)!==!1||!J.acceptData(r)||c&&J.isFunction(r[h])&&!J.isWindow(r)&&(a=r[c],a&&(r[c]=null),J.event.triggered=h,r[h](),J.event.triggered=void 0,a&&(r[c]=a)),e.result}},dispatch:function(t){t=J.event.fix(t);var e,n,r,i,o,s=[],a=B.call(arguments),u=(ge.get(this,"events")||{})[t.type]||[],c=J.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(s=J.event.handlers.call(this,t,u),e=0;(i=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(o.namespace))&&(t.handleObj=o,t.data=o.data,r=((J.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a),void 0!==r&&(t.result=r)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,r,i,o,s=[],a=e.delegateCount,u=t.target;if(a&&u.nodeType&&(!t.button||"click"!==t.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==t.type){for(r=[],n=0;a>n;n++)o=e[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?J(i,this).index(u)>=0:J.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&s.push({elem:u,handlers:r})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,r,i,o=e.button;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||Q,r=n.documentElement,i=n.body,t.pageX=e.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[J.expando])return t;var e,n,r,i=t.type,o=t,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=Oe.test(i)?this.mouseHooks:Pe.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,t=new J.Event(o),e=r.length;e--;)n=r[e],t[n]=o[n];return t.target||(t.target=Q),3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==p()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===p()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&J.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return J.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,r){var i=J.extend(new J.Event,n,{type:t,isSimulated:!0,originalEvent:{}});r?J.event.trigger(i,null,e):J.event.dispatch.call(e,i),i.isDefaultPrevented()&&n.preventDefault()}},J.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},J.Event=function(t,e){return this instanceof J.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?c:l):this.type=t,e&&J.extend(this,e),this.timeStamp=t&&t.timeStamp||J.now(),void(this[J.expando]=!0)):new J.Event(t,e)},J.Event.prototype={isDefaultPrevented:l,isPropagationStopped:l,isImmediatePropagationStopped:l,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=c,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=c,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=c,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},J.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){J.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,i=t.relatedTarget,o=t.handleObj;return(!i||i!==r&&!J.contains(r,i))&&(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),K.focusinBubbles||J.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){J.event.simulate(e,t.target,J.event.fix(t),!0)};J.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=ge.access(r,e);i||r.addEventListener(t,n,!0),ge.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=ge.access(r,e)-1;i?ge.access(r,e,i):(r.removeEventListener(t,n,!0),ge.remove(r,e))}}}),J.fn.extend({on:function(t,e,n,r,i){var o,s;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(s in t)this.on(s,e,n,t[s],i);return this}if(null==n&&null==r?(r=e,n=e=void 0):null==r&&("string"==typeof e?(r=n,n=void 0):(r=n,n=e,e=void 0)),r===!1)r=l;else if(!r)return this;return 1===i&&(o=r,r=function(t){return J().off(t),o.apply(this,arguments)},r.guid=o.guid||(o.guid=J.guid++)),this.each(function(){J.event.add(this,t,r,n,e)})},one:function(t,e,n,r){return this.on(t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,J(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=l),this.each(function(){J.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){J.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?J.event.trigger(t,e,n,!0):void 0}});var ke=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Me=/<([\w:]+)/,Ie=/<|&#?\w+;/,De=/<(?:script|style|link)/i,Le=/checked\s*(?:[^=]|=\s*.checked.)/i,Ne=/^$|\/(?:java|ecma)script/i,ze=/^true\/(.*)/,xe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Fe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Fe.optgroup=Fe.option,Fe.tbody=Fe.tfoot=Fe.colgroup=Fe.caption=Fe.thead,Fe.th=Fe.td,J.extend({clone:function(t,e,n){var r,i,o,s,a=t.cloneNode(!0),u=J.contains(t.ownerDocument,t);if(!(K.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||J.isXMLDoc(t)))for(s=g(a),o=g(t),r=0,i=o.length;i>r;r++)v(o[r],s[r]);if(e)if(n)for(o=o||g(t),s=s||g(a),r=0,i=o.length;i>r;r++)_(o[r],s[r]);else _(t,a);return s=g(a,"script"),s.length>0&&m(s,!u&&g(t,"script")),a},buildFragment:function(t,e,n,r){for(var i,o,s,a,u,c,l=e.createDocumentFragment(),p=[],d=0,h=t.length;h>d;d++)if(i=t[d],i||0===i)if("object"===J.type(i))J.merge(p,i.nodeType?[i]:i);else if(Ie.test(i)){for(o=o||l.appendChild(e.createElement("div")),s=(Me.exec(i)||["",""])[1].toLowerCase(),a=Fe[s]||Fe._default,o.innerHTML=a[1]+i.replace(ke,"<$1></$2>")+a[2],c=a[0];c--;)o=o.lastChild;J.merge(p,o.childNodes),o=l.firstChild,o.textContent=""}else p.push(e.createTextNode(i));for(l.textContent="",d=0;i=p[d++];)if((!r||-1===J.inArray(i,r))&&(u=J.contains(i.ownerDocument,i),o=g(l.appendChild(i),"script"),u&&m(o),n))for(c=0;i=o[c++];)Ne.test(i.type||"")&&n.push(i);return l},cleanData:function(t){for(var e,n,r,i,o=J.event.special,s=0;void 0!==(n=t[s]);s++){if(J.acceptData(n)&&(i=n[ge.expando],i&&(e=ge.cache[i]))){if(e.events)for(r in e.events)o[r]?J.event.remove(n,r):J.removeEvent(n,r,e.handle);ge.cache[i]&&delete ge.cache[i]}delete ve.cache[n[ve.expando]]}}}),J.fn.extend({text:function(t){return _e(this,function(t){return void 0===t?J.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,r=t?J.filter(t,this):this,i=0;null!=(n=r[i]);i++)e||1!==n.nodeType||J.cleanData(g(n)),n.parentNode&&(e&&J.contains(n.ownerDocument,n)&&m(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(J.cleanData(g(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return J.clone(this,t,e)})},html:function(t){return _e(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!De.test(t)&&!Fe[(Me.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(ke,"<$1></$2>");try{for(;r>n;n++)e=this[n]||{},1===e.nodeType&&(J.cleanData(g(e,!1)),e.innerHTML=t);e=0}catch(i){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,J.cleanData(g(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=V.apply([],t);var n,r,i,o,s,a,u=0,c=this.length,l=this,p=c-1,d=t[0],m=J.isFunction(d);if(m||c>1&&"string"==typeof d&&!K.checkClone&&Le.test(d))return this.each(function(n){var r=l.eq(n);m&&(t[0]=d.call(this,n,r.html())),r.domManip(t,e)});if(c&&(n=J.buildFragment(t,this[0].ownerDocument,!1,this),r=n.firstChild,1===n.childNodes.length&&(n=r),r)){for(i=J.map(g(n,"script"),h),o=i.length;c>u;u++)s=n,u!==p&&(s=J.clone(s,!0,!0),o&&J.merge(i,g(s,"script"))),e.call(this[u],s,u);if(o)for(a=i[i.length-1].ownerDocument,J.map(i,f),u=0;o>u;u++)s=i[u],Ne.test(s.type||"")&&!ge.access(s,"globalEval")&&J.contains(a,s)&&(s.src?J._evalUrl&&J._evalUrl(s.src):J.globalEval(s.textContent.replace(xe,"")))}return this}}),J.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){J.fn[t]=function(t){for(var n,r=[],i=J(t),o=i.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),J(i[s])[e](n),W.apply(r,n.get());return this.pushStack(r)}});var Ue,Ge={},je=/^margin/,Ye=new RegExp("^("+Ee+")(?!px)[a-z%]+$","i"),Be=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):t.getComputedStyle(e,null)};!function(){function e(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",i.appendChild(o);var e=t.getComputedStyle(s,null);n="1%"!==e.top,r="4px"===e.width,i.removeChild(o)}var n,r,i=Q.documentElement,o=Q.createElement("div"),s=Q.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",K.clearCloneStyle="content-box"===s.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(s),t.getComputedStyle&&J.extend(K,{pixelPosition:function(){return e(),n},boxSizingReliable:function(){return null==r&&e(),r},reliableMarginRight:function(){var e,n=s.appendChild(Q.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",i.appendChild(o),e=!parseFloat(t.getComputedStyle(n,null).marginRight),i.removeChild(o),s.removeChild(n),e}}))}(),J.swap=function(t,e,n,r){var i,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];i=n.apply(t,r||[]);for(o in e)t.style[o]=s[o];return i};var Ve=/^(none|table(?!-c[ea]).+)/,We=new RegExp("^("+Ee+")(.*)$","i"),qe=new RegExp("^([+-])=("+Ee+")","i"),He={position:"absolute",visibility:"hidden",display:"block"},$e={letterSpacing:"0",fontWeight:"400"},Xe=["Webkit","O","Moz","ms"];J.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=E(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,s,a=J.camelCase(e),u=t.style;return e=J.cssProps[a]||(J.cssProps[a]=T(u,a)),s=J.cssHooks[e]||J.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(i=s.get(t,!1,r))?i:u[e]:(o=typeof n,"string"===o&&(i=qe.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(J.css(t,e)),o="number"),null!=n&&n===n&&("number"!==o||J.cssNumber[a]||(n+="px"),K.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,r))||(u[e]=n)),void 0)}},css:function(t,e,n,r){var i,o,s,a=J.camelCase(e);return e=J.cssProps[a]||(J.cssProps[a]=T(t.style,a)),s=J.cssHooks[e]||J.cssHooks[a],s&&"get"in s&&(i=s.get(t,!0,n)),void 0===i&&(i=E(t,e,r)),"normal"===i&&e in $e&&(i=$e[e]),""===n||n?(o=parseFloat(i),n===!0||J.isNumeric(o)?o||0:i):i}}),J.each(["height","width"],function(t,e){J.cssHooks[e]={get:function(t,n,r){return n?Ve.test(J.css(t,"display"))&&0===t.offsetWidth?J.swap(t,He,function(){return P(t,e,r)}):P(t,e,r):void 0},set:function(t,n,r){var i=r&&Be(t);return R(t,n,r?A(t,e,r,"border-box"===J.css(t,"boxSizing",!1,i),i):0)}}}),J.cssHooks.marginRight=b(K.reliableMarginRight,function(t,e){return e?J.swap(t,{display:"inline-block"},E,[t,"marginRight"]):void 0}),J.each({margin:"",padding:"",border:"Width"},function(t,e){J.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[t+be[r]+e]=o[r]||o[r-2]||o[0];return i}},je.test(t)||(J.cssHooks[t+e].set=R)}),J.fn.extend({css:function(t,e){return _e(this,function(t,e,n){var r,i,o={},s=0;if(J.isArray(e)){for(r=Be(t),i=e.length;i>s;s++)o[e[s]]=J.css(t,e[s],!1,r);return o}return void 0!==n?J.style(t,e,n):J.css(t,e)},t,e,arguments.length>1)},show:function(){return O(this,!0)},hide:function(){return O(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Te(this)?J(this).show():J(this).hide()})}}),J.Tween=S,S.prototype={constructor:S,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||"swing",this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(J.cssNumber[n]?"":"px")},cur:function(){var t=S.propHooks[this.prop];return t&&t.get?t.get(this):S.propHooks._default.get(this)},run:function(t){var e,n=S.propHooks[this.prop];return this.pos=e=this.options.duration?J.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):S.propHooks._default.set(this),this}},S.prototype.init.prototype=S.prototype,S.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=J.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){J.fx.step[t.prop]?J.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[J.cssProps[t.prop]]||J.cssHooks[t.prop])?J.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},S.propHooks.scrollTop=S.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},J.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},J.fx=S.prototype.init,J.fx.step={};var Ke,Qe,Ze=/^(?:toggle|show|hide)$/,Je=new RegExp("^(?:([+-])=|)("+Ee+")([a-z%]*)$","i"),tn=/queueHooks$/,en=[I],nn={"*":[function(t,e){var n=this.createTween(t,e),r=n.cur(),i=Je.exec(e),o=i&&i[3]||(J.cssNumber[t]?"":"px"),s=(J.cssNumber[t]||"px"!==o&&+r)&&Je.exec(J.css(n.elem,t)),a=1,u=20;if(s&&s[3]!==o){o=o||s[3],i=i||[],s=+r||1;do a=a||".5",s/=a,J.style(n.elem,t,s+o);while(a!==(a=n.cur()/r)&&1!==a&&--u)}return i&&(s=n.start=+s||+r||0,n.unit=o,n.end=i[1]?s+(i[1]+1)*i[2]:+i[2]),n}]};J.Animation=J.extend(L,{tweener:function(t,e){J.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,r=0,i=t.length;i>r;r++)n=t[r],nn[n]=nn[n]||[],nn[n].unshift(e)},prefilter:function(t,e){e?en.unshift(t):en.push(t)}}),J.speed=function(t,e,n){var r=t&&"object"==typeof t?J.extend({},t):{complete:n||!n&&e||J.isFunction(t)&&t,duration:t,easing:n&&e||e&&!J.isFunction(e)&&e};return r.duration=J.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in J.fx.speeds?J.fx.speeds[r.duration]:J.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){J.isFunction(r.old)&&r.old.call(this),r.queue&&J.dequeue(this,r.queue)},r},J.fn.extend({fadeTo:function(t,e,n,r){return this.filter(Te).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=J.isEmptyObject(t),o=J.speed(e,n,r),s=function(){var e=L(this,J.extend({},t),o);
(i||ge.get(this,"finish"))&&e.stop(!0)};return s.finish=s,i||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=J.timers,s=ge.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&tn.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));(e||!n)&&J.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=ge.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=J.timers,s=r?r.length:0;for(n.finish=!0,J.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;s>e;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),J.each(["toggle","show","hide"],function(t,e){var n=J.fn[e];J.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(k(e,!0),t,r,i)}}),J.each({slideDown:k("show"),slideUp:k("hide"),slideToggle:k("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){J.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),J.timers=[],J.fx.tick=function(){var t,e=0,n=J.timers;for(Ke=J.now();e<n.length;e++)t=n[e],t()||n[e]!==t||n.splice(e--,1);n.length||J.fx.stop(),Ke=void 0},J.fx.timer=function(t){J.timers.push(t),t()?J.fx.start():J.timers.pop()},J.fx.interval=13,J.fx.start=function(){Qe||(Qe=setInterval(J.fx.tick,J.fx.interval))},J.fx.stop=function(){clearInterval(Qe),Qe=null},J.fx.speeds={slow:600,fast:200,_default:400},J.fn.delay=function(t,e){return t=J.fx?J.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var r=setTimeout(e,t);n.stop=function(){clearTimeout(r)}})},function(){var t=Q.createElement("input"),e=Q.createElement("select"),n=e.appendChild(Q.createElement("option"));t.type="checkbox",K.checkOn=""!==t.value,K.optSelected=n.selected,e.disabled=!0,K.optDisabled=!n.disabled,t=Q.createElement("input"),t.value="t",t.type="radio",K.radioValue="t"===t.value}();var rn,on,sn=J.expr.attrHandle;J.fn.extend({attr:function(t,e){return _e(this,J.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){J.removeAttr(this,t)})}}),J.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===Ae?J.prop(t,e,n):(1===o&&J.isXMLDoc(t)||(e=e.toLowerCase(),r=J.attrHooks[e]||(J.expr.match.bool.test(e)?on:rn)),void 0===n?r&&"get"in r&&null!==(i=r.get(t,e))?i:(i=J.find.attr(t,e),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):void J.removeAttr(t,e))},removeAttr:function(t,e){var n,r,i=0,o=e&&e.match(he);if(o&&1===t.nodeType)for(;n=o[i++];)r=J.propFix[n]||n,J.expr.match.bool.test(n)&&(t[r]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!K.radioValue&&"radio"===e&&J.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),on={set:function(t,e,n){return e===!1?J.removeAttr(t,n):t.setAttribute(n,n),n}},J.each(J.expr.match.bool.source.match(/\w+/g),function(t,e){var n=sn[e]||J.find.attr;sn[e]=function(t,e,r){var i,o;return r||(o=sn[e],sn[e]=i,i=null!=n(t,e,r)?e.toLowerCase():null,sn[e]=o),i}});var an=/^(?:input|select|textarea|button)$/i;J.fn.extend({prop:function(t,e){return _e(this,J.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[J.propFix[t]||t]})}}),J.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var r,i,o,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return o=1!==s||!J.isXMLDoc(t),o&&(e=J.propFix[e]||e,i=J.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||an.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),K.optSelected||(J.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),J.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){J.propFix[this.toLowerCase()]=this});var un=/[\t\r\n\f]/g;J.fn.extend({addClass:function(t){var e,n,r,i,o,s,a="string"==typeof t&&t,u=0,c=this.length;if(J.isFunction(t))return this.each(function(e){J(this).addClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(he)||[];c>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(un," "):" ")){for(o=0;i=e[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");s=J.trim(r),n.className!==s&&(n.className=s)}return this},removeClass:function(t){var e,n,r,i,o,s,a=0===arguments.length||"string"==typeof t&&t,u=0,c=this.length;if(J.isFunction(t))return this.each(function(e){J(this).removeClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(he)||[];c>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(un," "):"")){for(o=0;i=e[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");s=t?J.trim(r):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):this.each(J.isFunction(t)?function(n){J(this).toggleClass(t.call(this,n,this.className,e),e)}:function(){if("string"===n)for(var e,r=0,i=J(this),o=t.match(he)||[];e=o[r++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else(n===Ae||"boolean"===n)&&(this.className&&ge.set(this,"__className__",this.className),this.className=this.className||t===!1?"":ge.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(un," ").indexOf(e)>=0)return!0;return!1}});var cn=/\r/g;J.fn.extend({val:function(t){var e,n,r,i=this[0];{if(arguments.length)return r=J.isFunction(t),this.each(function(n){var i;1===this.nodeType&&(i=r?t.call(this,n,J(this).val()):t,null==i?i="":"number"==typeof i?i+="":J.isArray(i)&&(i=J.map(i,function(t){return null==t?"":t+""})),e=J.valHooks[this.type]||J.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))});if(i)return e=J.valHooks[i.type]||J.valHooks[i.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(cn,""):null==n?"":n)}}}),J.extend({valHooks:{option:{get:function(t){var e=J.find.attr(t,"value");return null!=e?e:J.trim(J.text(t))}},select:{get:function(t){for(var e,n,r=t.options,i=t.selectedIndex,o="select-one"===t.type||0>i,s=o?null:[],a=o?i+1:r.length,u=0>i?a:o?i:0;a>u;u++)if(n=r[u],!(!n.selected&&u!==i||(K.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&J.nodeName(n.parentNode,"optgroup"))){if(e=J(n).val(),o)return e;s.push(e)}return s},set:function(t,e){for(var n,r,i=t.options,o=J.makeArray(e),s=i.length;s--;)r=i[s],(r.selected=J.inArray(r.value,o)>=0)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),J.each(["radio","checkbox"],function(){J.valHooks[this]={set:function(t,e){return J.isArray(e)?t.checked=J.inArray(J(t).val(),e)>=0:void 0}},K.checkOn||(J.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),J.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){J.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),J.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var ln=J.now(),pn=/\?/;J.parseJSON=function(t){return JSON.parse(t+"")},J.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{n=new DOMParser,e=n.parseFromString(t,"text/xml")}catch(r){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&J.error("Invalid XML: "+t),e};var dn=/#.*$/,hn=/([?&])_=[^&]*/,fn=/^(.*?):[ \t]*([^\r\n]*)$/gm,mn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,_n=/^(?:GET|HEAD)$/,gn=/^\/\//,vn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,yn={},wn={},En="*/".concat("*"),bn=t.location.href,Tn=vn.exec(bn.toLowerCase())||[];J.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:bn,type:"GET",isLocal:mn.test(Tn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":En,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":J.parseJSON,"text xml":J.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?x(x(t,J.ajaxSettings),e):x(J.ajaxSettings,t)},ajaxPrefilter:N(yn),ajaxTransport:N(wn),ajax:function(t,e){function n(t,e,n,s){var u,l,g,v,w,b=e;2!==y&&(y=2,a&&clearTimeout(a),r=void 0,o=s||"",E.readyState=t>0?4:0,u=t>=200&&300>t||304===t,n&&(v=F(p,E,n)),v=U(p,v,E,u),u?(p.ifModified&&(w=E.getResponseHeader("Last-Modified"),w&&(J.lastModified[i]=w),w=E.getResponseHeader("etag"),w&&(J.etag[i]=w)),204===t||"HEAD"===p.type?b="nocontent":304===t?b="notmodified":(b=v.state,l=v.data,g=v.error,u=!g)):(g=b,(t||!b)&&(b="error",0>t&&(t=0))),E.status=t,E.statusText=(e||b)+"",u?f.resolveWith(d,[l,b,E]):f.rejectWith(d,[E,b,g]),E.statusCode(_),_=void 0,c&&h.trigger(u?"ajaxSuccess":"ajaxError",[E,p,u?l:g]),m.fireWith(d,[E,b]),c&&(h.trigger("ajaxComplete",[E,p]),--J.active||J.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var r,i,o,s,a,u,c,l,p=J.ajaxSetup({},e),d=p.context||p,h=p.context&&(d.nodeType||d.jquery)?J(d):J.event,f=J.Deferred(),m=J.Callbacks("once memory"),_=p.statusCode||{},g={},v={},y=0,w="canceled",E={readyState:0,getResponseHeader:function(t){var e;if(2===y){if(!s)for(s={};e=fn.exec(o);)s[e[1].toLowerCase()]=e[2];e=s[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===y?o:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return y||(t=v[n]=v[n]||t,g[t]=e),this},overrideMimeType:function(t){return y||(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>y)for(e in t)_[e]=[_[e],t[e]];else E.always(t[E.status]);return this},abort:function(t){var e=t||w;return r&&r.abort(e),n(0,e),this}};if(f.promise(E).complete=m.add,E.success=E.done,E.error=E.fail,p.url=((t||p.url||bn)+"").replace(dn,"").replace(gn,Tn[1]+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=J.trim(p.dataType||"*").toLowerCase().match(he)||[""],null==p.crossDomain&&(u=vn.exec(p.url.toLowerCase()),p.crossDomain=!(!u||u[1]===Tn[1]&&u[2]===Tn[2]&&(u[3]||("http:"===u[1]?"80":"443"))===(Tn[3]||("http:"===Tn[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=J.param(p.data,p.traditional)),z(yn,p,e,E),2===y)return E;c=J.event&&p.global,c&&0===J.active++&&J.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!_n.test(p.type),i=p.url,p.hasContent||(p.data&&(i=p.url+=(pn.test(i)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=hn.test(i)?i.replace(hn,"$1_="+ln++):i+(pn.test(i)?"&":"?")+"_="+ln++)),p.ifModified&&(J.lastModified[i]&&E.setRequestHeader("If-Modified-Since",J.lastModified[i]),J.etag[i]&&E.setRequestHeader("If-None-Match",J.etag[i])),(p.data&&p.hasContent&&p.contentType!==!1||e.contentType)&&E.setRequestHeader("Content-Type",p.contentType),E.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+En+"; q=0.01":""):p.accepts["*"]);for(l in p.headers)E.setRequestHeader(l,p.headers[l]);if(p.beforeSend&&(p.beforeSend.call(d,E,p)===!1||2===y))return E.abort();w="abort";for(l in{success:1,error:1,complete:1})E[l](p[l]);if(r=z(wn,p,e,E)){E.readyState=1,c&&h.trigger("ajaxSend",[E,p]),p.async&&p.timeout>0&&(a=setTimeout(function(){E.abort("timeout")},p.timeout));try{y=1,r.send(g,n)}catch(b){if(!(2>y))throw b;n(-1,b)}}else n(-1,"No Transport");return E},getJSON:function(t,e,n){return J.get(t,e,n,"json")},getScript:function(t,e){return J.get(t,void 0,e,"script")}}),J.each(["get","post"],function(t,e){J[e]=function(t,n,r,i){return J.isFunction(n)&&(i=i||r,r=n,n=void 0),J.ajax({url:t,type:e,dataType:i,data:n,success:r})}}),J._evalUrl=function(t){return J.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},J.fn.extend({wrapAll:function(t){var e;return J.isFunction(t)?this.each(function(e){J(this).wrapAll(t.call(this,e))}):(this[0]&&(e=J(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return this.each(J.isFunction(t)?function(e){J(this).wrapInner(t.call(this,e))}:function(){var e=J(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=J.isFunction(t);return this.each(function(n){J(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){J.nodeName(this,"body")||J(this).replaceWith(this.childNodes)}).end()}}),J.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},J.expr.filters.visible=function(t){return!J.expr.filters.hidden(t)};var Rn=/%20/g,An=/\[\]$/,Pn=/\r?\n/g,On=/^(?:submit|button|image|reset|file)$/i,Sn=/^(?:input|select|textarea|keygen)/i;J.param=function(t,e){var n,r=[],i=function(t,e){e=J.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=J.ajaxSettings&&J.ajaxSettings.traditional),J.isArray(t)||t.jquery&&!J.isPlainObject(t))J.each(t,function(){i(this.name,this.value)});else for(n in t)G(n,t[n],e,i);return r.join("&").replace(Rn,"+")},J.fn.extend({serialize:function(){return J.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=J.prop(this,"elements");return t?J.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!J(this).is(":disabled")&&Sn.test(this.nodeName)&&!On.test(t)&&(this.checked||!Re.test(t))}).map(function(t,e){var n=J(this).val();return null==n?null:J.isArray(n)?J.map(n,function(t){return{name:e.name,value:t.replace(Pn,"\r\n")}}):{name:e.name,value:n.replace(Pn,"\r\n")}}).get()}}),J.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Cn=0,kn={},Mn={0:200,1223:204},In=J.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",function(){for(var t in kn)kn[t]()}),K.cors=!!In&&"withCredentials"in In,K.ajax=In=!!In,J.ajaxTransport(function(t){var e;return K.cors||In&&!t.crossDomain?{send:function(n,r){var i,o=t.xhr(),s=++Cn;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(i in t.xhrFields)o[i]=t.xhrFields[i];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)o.setRequestHeader(i,n[i]);e=function(t){return function(){e&&(delete kn[s],e=o.onload=o.onerror=null,"abort"===t?o.abort():"error"===t?r(o.status,o.statusText):r(Mn[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=e(),o.onerror=e("error"),e=kn[s]=e("abort");try{o.send(t.hasContent&&t.data||null)}catch(a){if(e)throw a}},abort:function(){e&&e()}}:void 0}),J.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return J.globalEval(t),t}}}),J.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),J.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(r,i){e=J("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),Q.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Dn=[],Ln=/(=)\?(?=&|$)|\?\?/;J.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Dn.pop()||J.expando+"_"+ln++;return this[t]=!0,t}}),J.ajaxPrefilter("json jsonp",function(e,n,r){var i,o,s,a=e.jsonp!==!1&&(Ln.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ln.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(i=e.jsonpCallback=J.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Ln,"$1"+i):e.jsonp!==!1&&(e.url+=(pn.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return s||J.error(i+" was not called"),s[0]},e.dataTypes[0]="json",o=t[i],t[i]=function(){s=arguments},r.always(function(){t[i]=o,e[i]&&(e.jsonpCallback=n.jsonpCallback,Dn.push(i)),s&&J.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),J.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||Q;var r=se.exec(t),i=!n&&[];return r?[e.createElement(r[1])]:(r=J.buildFragment([t],e,i),i&&i.length&&J(i).remove(),J.merge([],r.childNodes))};var Nn=J.fn.load;J.fn.load=function(t,e,n){if("string"!=typeof t&&Nn)return Nn.apply(this,arguments);var r,i,o,s=this,a=t.indexOf(" ");return a>=0&&(r=J.trim(t.slice(a)),t=t.slice(0,a)),J.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),s.length>0&&J.ajax({url:t,type:i,dataType:"html",data:e}).done(function(t){o=arguments,s.html(r?J("<div>").append(J.parseHTML(t)).find(r):t)}).complete(n&&function(t,e){s.each(n,o||[t.responseText,e,t])}),this},J.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){J.fn[e]=function(t){return this.on(e,t)}}),J.expr.filters.animated=function(t){return J.grep(J.timers,function(e){return t===e.elem}).length};var zn=t.document.documentElement;J.offset={setOffset:function(t,e,n){var r,i,o,s,a,u,c,l=J.css(t,"position"),p=J(t),d={};"static"===l&&(t.style.position="relative"),a=p.offset(),o=J.css(t,"top"),u=J.css(t,"left"),c=("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1,c?(r=p.position(),s=r.top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(u)||0),J.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(d.top=e.top-a.top+s),null!=e.left&&(d.left=e.left-a.left+i),"using"in e?e.using.call(t,d):p.css(d)}},J.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){J.offset.setOffset(this,t,e)});var e,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;if(o)return e=o.documentElement,J.contains(e,r)?(typeof r.getBoundingClientRect!==Ae&&(i=r.getBoundingClientRect()),n=j(o),{top:i.top+n.pageYOffset-e.clientTop,left:i.left+n.pageXOffset-e.clientLeft}):i},position:function(){if(this[0]){var t,e,n=this[0],r={top:0,left:0};return"fixed"===J.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),J.nodeName(t[0],"html")||(r=t.offset()),r.top+=J.css(t[0],"borderTopWidth",!0),r.left+=J.css(t[0],"borderLeftWidth",!0)),{top:e.top-r.top-J.css(n,"marginTop",!0),left:e.left-r.left-J.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||zn;t&&!J.nodeName(t,"html")&&"static"===J.css(t,"position");)t=t.offsetParent;return t||zn})}}),J.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r="pageYOffset"===n;J.fn[e]=function(i){return _e(this,function(e,i,o){var s=j(e);return void 0===o?s?s[n]:e[i]:void(s?s.scrollTo(r?t.pageXOffset:o,r?o:t.pageYOffset):e[i]=o)},e,i,arguments.length,null)}}),J.each(["top","left"],function(t,e){J.cssHooks[e]=b(K.pixelPosition,function(t,n){return n?(n=E(t,e),Ye.test(n)?J(t).position()[e]+"px":n):void 0})}),J.each({Height:"height",Width:"width"},function(t,e){J.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,r){J.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),s=n||(r===!0||i===!0?"margin":"border");return _e(this,function(e,n,r){var i;return J.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+t],i["scroll"+t],e.body["offset"+t],i["offset"+t],i["client"+t])):void 0===r?J.css(e,n,s):J.style(e,n,r,s)},e,o?r:void 0,o,null)}})}),J.fn.size=function(){return this.length},J.fn.andSelf=J.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return J});var xn=t.jQuery,Fn=t.$;return J.noConflict=function(e){return t.$===J&&(t.$=Fn),e&&t.jQuery===J&&(t.jQuery=xn),J},typeof e===Ae&&(t.jQuery=t.$=J),J}),function(){function t(t){function e(e,n,r,i,o,s){for(;o>=0&&s>o;o+=t){var a=i?i[o]:o;r=n(r,e[a],a,e)}return r}return function(n,r,i,o){r=v(r,o,4);var s=!T(n)&&g.keys(n),a=(s||n).length,u=t>0?0:a-1;return arguments.length<3&&(i=n[s?s[u]:u],u+=t),e(n,r,i,s,u,a)}}function e(t){return function(e,n,r){n=y(n,r);for(var i=null!=e&&e.length,o=t>0?0:i-1;o>=0&&i>o;o+=t)if(n(e[o],o,e))return o;return-1}}function n(t,e){var n=S.length,r=t.constructor,i=g.isFunction(r)&&r.prototype||s,o="constructor";for(g.has(t,o)&&!g.contains(e,o)&&e.push(o);n--;)o=S[n],o in t&&t[o]!==i[o]&&!g.contains(e,o)&&e.push(o)}var r=this,i=r._,o=Array.prototype,s=Object.prototype,a=Function.prototype,u=o.push,c=o.slice,l=s.toString,p=s.hasOwnProperty,d=Array.isArray,h=Object.keys,f=a.bind,m=Object.create,_=function(){},g=function(t){return t instanceof g?t:this instanceof g?void(this._wrapped=t):new g(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=g),exports._=g):r._=g,g.VERSION="1.8.2";var v=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},y=function(t,e,n){return null==t?g.identity:g.isFunction(t)?v(t,e,n):g.isObject(t)?g.matcher(t):g.property(t)};g.iteratee=function(t,e){return y(t,e,1/0)};var w=function(t,e){return function(n){var r=arguments.length;if(2>r||null==n)return n;for(var i=1;r>i;i++)for(var o=arguments[i],s=t(o),a=s.length,u=0;a>u;u++){var c=s[u];e&&void 0!==n[c]||(n[c]=o[c])}return n}},E=function(t){if(!g.isObject(t))return{};if(m)return m(t);_.prototype=t;var e=new _;return _.prototype=null,e},b=Math.pow(2,53)-1,T=function(t){var e=t&&t.length;return"number"==typeof e&&e>=0&&b>=e};g.each=g.forEach=function(t,e,n){e=v(e,n);var r,i;if(T(t))for(r=0,i=t.length;i>r;r++)e(t[r],r,t);else{var o=g.keys(t);for(r=0,i=o.length;i>r;r++)e(t[o[r]],o[r],t)}return t},g.map=g.collect=function(t,e,n){e=y(e,n);for(var r=!T(t)&&g.keys(t),i=(r||t).length,o=Array(i),s=0;i>s;s++){var a=r?r[s]:s;o[s]=e(t[a],a,t)}return o},g.reduce=g.foldl=g.inject=t(1),g.reduceRight=g.foldr=t(-1),g.find=g.detect=function(t,e,n){var r;return r=T(t)?g.findIndex(t,e,n):g.findKey(t,e,n),void 0!==r&&-1!==r?t[r]:void 0},g.filter=g.select=function(t,e,n){var r=[];return e=y(e,n),g.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r},g.reject=function(t,e,n){return g.filter(t,g.negate(y(e)),n)},g.every=g.all=function(t,e,n){e=y(e,n);for(var r=!T(t)&&g.keys(t),i=(r||t).length,o=0;i>o;o++){var s=r?r[o]:o;if(!e(t[s],s,t))return!1}return!0},g.some=g.any=function(t,e,n){e=y(e,n);for(var r=!T(t)&&g.keys(t),i=(r||t).length,o=0;i>o;o++){var s=r?r[o]:o;if(e(t[s],s,t))return!0}return!1},g.contains=g.includes=g.include=function(t,e,n){return T(t)||(t=g.values(t)),g.indexOf(t,e,"number"==typeof n&&n)>=0},g.invoke=function(t,e){var n=c.call(arguments,2),r=g.isFunction(e);return g.map(t,function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)})},g.pluck=function(t,e){return g.map(t,g.property(e))},g.where=function(t,e){return g.filter(t,g.matcher(e))},g.findWhere=function(t,e){return g.find(t,g.matcher(e))},g.max=function(t,e,n){var r,i,o=-1/0,s=-1/0;if(null==e&&null!=t){t=T(t)?t:g.values(t);for(var a=0,u=t.length;u>a;a++)r=t[a],r>o&&(o=r)}else e=y(e,n),g.each(t,function(t,n,r){i=e(t,n,r),(i>s||i===-1/0&&o===-1/0)&&(o=t,s=i)});return o},g.min=function(t,e,n){var r,i,o=1/0,s=1/0;if(null==e&&null!=t){t=T(t)?t:g.values(t);for(var a=0,u=t.length;u>a;a++)r=t[a],o>r&&(o=r)}else e=y(e,n),g.each(t,function(t,n,r){i=e(t,n,r),(s>i||1/0===i&&1/0===o)&&(o=t,s=i)});return o},g.shuffle=function(t){for(var e,n=T(t)?t:g.values(t),r=n.length,i=Array(r),o=0;r>o;o++)e=g.random(0,o),e!==o&&(i[o]=i[e]),i[e]=n[o];return i},g.sample=function(t,e,n){return null==e||n?(T(t)||(t=g.values(t)),t[g.random(t.length-1)]):g.shuffle(t).slice(0,Math.max(0,e))},g.sortBy=function(t,e,n){return e=y(e,n),g.pluck(g.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}),"value")};var R=function(t){return function(e,n,r){var i={};return n=y(n,r),g.each(e,function(r,o){var s=n(r,o,e);t(i,r,s)}),i}};g.groupBy=R(function(t,e,n){g.has(t,n)?t[n].push(e):t[n]=[e]}),g.indexBy=R(function(t,e,n){t[n]=e}),g.countBy=R(function(t,e,n){g.has(t,n)?t[n]++:t[n]=1}),g.toArray=function(t){return t?g.isArray(t)?c.call(t):T(t)?g.map(t,g.identity):g.values(t):[]},g.size=function(t){return null==t?0:T(t)?t.length:g.keys(t).length},g.partition=function(t,e,n){e=y(e,n);var r=[],i=[];return g.each(t,function(t,n,o){(e(t,n,o)?r:i).push(t)}),[r,i]},g.first=g.head=g.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:g.initial(t,t.length-e)},g.initial=function(t,e,n){return c.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},g.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:g.rest(t,Math.max(0,t.length-e))},g.rest=g.tail=g.drop=function(t,e,n){return c.call(t,null==e||n?1:e)},g.compact=function(t){return g.filter(t,g.identity)};var A=function(t,e,n,r){for(var i=[],o=0,s=r||0,a=t&&t.length;a>s;s++){var u=t[s];if(T(u)&&(g.isArray(u)||g.isArguments(u))){e||(u=A(u,e,n));var c=0,l=u.length;for(i.length+=l;l>c;)i[o++]=u[c++]}else n||(i[o++]=u)}return i};g.flatten=function(t,e){return A(t,e,!1)},g.without=function(t){return g.difference(t,c.call(arguments,1))},g.uniq=g.unique=function(t,e,n,r){if(null==t)return[];g.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=y(n,r));for(var i=[],o=[],s=0,a=t.length;a>s;s++){var u=t[s],c=n?n(u,s,t):u;e?(s&&o===c||i.push(u),o=c):n?g.contains(o,c)||(o.push(c),i.push(u)):g.contains(i,u)||i.push(u)}return i},g.union=function(){return g.uniq(A(arguments,!0,!0))},g.intersection=function(t){if(null==t)return[];for(var e=[],n=arguments.length,r=0,i=t.length;i>r;r++){var o=t[r];if(!g.contains(e,o)){for(var s=1;n>s&&g.contains(arguments[s],o);s++);s===n&&e.push(o)}}return e},g.difference=function(t){var e=A(arguments,!0,!0,1);return g.filter(t,function(t){return!g.contains(e,t)})},g.zip=function(){return g.unzip(arguments)},g.unzip=function(t){for(var e=t&&g.max(t,"length").length||0,n=Array(e),r=0;e>r;r++)n[r]=g.pluck(t,r);return n},g.object=function(t,e){for(var n={},r=0,i=t&&t.length;i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},g.indexOf=function(t,e,n){var r=0,i=t&&t.length;if("number"==typeof n)r=0>n?Math.max(0,i+n):n;else if(n&&i)return r=g.sortedIndex(t,e),t[r]===e?r:-1;if(e!==e)return g.findIndex(c.call(t,r),g.isNaN);for(;i>r;r++)if(t[r]===e)return r;return-1},g.lastIndexOf=function(t,e,n){var r=t?t.length:0;if("number"==typeof n&&(r=0>n?r+n+1:Math.min(r,n+1)),e!==e)return g.findLastIndex(c.call(t,0,r),g.isNaN);for(;--r>=0;)if(t[r]===e)return r;return-1},g.findIndex=e(1),g.findLastIndex=e(-1),g.sortedIndex=function(t,e,n,r){n=y(n,r,1);for(var i=n(e),o=0,s=t.length;s>o;){var a=Math.floor((o+s)/2);n(t[a])<i?o=a+1:s=a}return o},g.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;r>o;o++,t+=n)i[o]=t;return i};var P=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=E(t.prototype),s=t.apply(o,i);return g.isObject(s)?s:o};g.bind=function(t,e){if(f&&t.bind===f)return f.apply(t,c.call(arguments,1));if(!g.isFunction(t))throw new TypeError("Bind must be called on a function");var n=c.call(arguments,2),r=function(){return P(t,r,e,this,n.concat(c.call(arguments)))};return r},g.partial=function(t){var e=c.call(arguments,1),n=function(){for(var r=0,i=e.length,o=Array(i),s=0;i>s;s++)o[s]=e[s]===g?arguments[r++]:e[s];for(;r<arguments.length;)o.push(arguments[r++]);return P(t,n,this,this,o)};return n},g.bindAll=function(t){var e,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(e=1;r>e;e++)n=arguments[e],t[n]=g.bind(t[n],t);return t},g.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return g.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},g.delay=function(t,e){var n=c.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},g.defer=g.partial(g.delay,g,1),g.throttle=function(t,e,n){var r,i,o,s=null,a=0;n||(n={});var u=function(){a=n.leading===!1?0:g.now(),s=null,o=t.apply(r,i),s||(r=i=null)};return function(){var c=g.now();a||n.leading!==!1||(a=c);var l=e-(c-a);return r=this,i=arguments,0>=l||l>e?(s&&(clearTimeout(s),s=null),a=c,o=t.apply(r,i),s||(r=i=null)):s||n.trailing===!1||(s=setTimeout(u,l)),o}},g.debounce=function(t,e,n){var r,i,o,s,a,u=function(){var c=g.now()-s;e>c&&c>=0?r=setTimeout(u,e-c):(r=null,n||(a=t.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,s=g.now();var c=n&&!r;return r||(r=setTimeout(u,e)),c&&(a=t.apply(o,i),o=i=null),a}},g.wrap=function(t,e){return g.partial(e,t)},g.negate=function(t){return function(){return!t.apply(this,arguments)}},g.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},g.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},g.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=null),n}},g.once=g.partial(g.before,2);var O=!{toString:null}.propertyIsEnumerable("toString"),S=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];g.keys=function(t){if(!g.isObject(t))return[];if(h)return h(t);var e=[];for(var r in t)g.has(t,r)&&e.push(r);return O&&n(t,e),e},g.allKeys=function(t){if(!g.isObject(t))return[];var e=[];for(var r in t)e.push(r);return O&&n(t,e),e},g.values=function(t){for(var e=g.keys(t),n=e.length,r=Array(n),i=0;n>i;i++)r[i]=t[e[i]];return r},g.mapObject=function(t,e,n){e=y(e,n);for(var r,i=g.keys(t),o=i.length,s={},a=0;o>a;a++)r=i[a],s[r]=e(t[r],r,t);return s},g.pairs=function(t){for(var e=g.keys(t),n=e.length,r=Array(n),i=0;n>i;i++)r[i]=[e[i],t[e[i]]];return r},g.invert=function(t){for(var e={},n=g.keys(t),r=0,i=n.length;i>r;r++)e[t[n[r]]]=n[r];return e},g.functions=g.methods=function(t){var e=[];for(var n in t)g.isFunction(t[n])&&e.push(n);return e.sort()},g.extend=w(g.allKeys),g.extendOwn=g.assign=w(g.keys),g.findKey=function(t,e,n){e=y(e,n);for(var r,i=g.keys(t),o=0,s=i.length;s>o;o++)if(r=i[o],e(t[r],r,t))return r},g.pick=function(t,e,n){var r,i,o={},s=t;if(null==s)return o;g.isFunction(e)?(i=g.allKeys(s),r=v(e,n)):(i=A(arguments,!1,!1,1),r=function(t,e,n){return e in n},s=Object(s));for(var a=0,u=i.length;u>a;a++){var c=i[a],l=s[c];r(l,c,s)&&(o[c]=l)}return o},g.omit=function(t,e,n){if(g.isFunction(e))e=g.negate(e);else{var r=g.map(A(arguments,!1,!1,1),String);e=function(t,e){return!g.contains(r,e)}}return g.pick(t,e,n)},g.defaults=w(g.allKeys,!0),g.clone=function(t){return g.isObject(t)?g.isArray(t)?t.slice():g.extend({},t):t
},g.tap=function(t,e){return e(t),t},g.isMatch=function(t,e){var n=g.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;r>o;o++){var s=n[o];if(e[s]!==i[s]||!(s in i))return!1}return!0};var C=function(t,e,n,r){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof g&&(t=t._wrapped),e instanceof g&&(e=e._wrapped);var i=l.call(t);if(i!==l.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(g.isFunction(s)&&s instanceof s&&g.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===t)return r[u]===e;if(n.push(t),r.push(e),o){if(u=t.length,u!==e.length)return!1;for(;u--;)if(!C(t[u],e[u],n,r))return!1}else{var c,p=g.keys(t);if(u=p.length,g.keys(e).length!==u)return!1;for(;u--;)if(c=p[u],!g.has(e,c)||!C(t[c],e[c],n,r))return!1}return n.pop(),r.pop(),!0};g.isEqual=function(t,e){return C(t,e)},g.isEmpty=function(t){return null==t?!0:T(t)&&(g.isArray(t)||g.isString(t)||g.isArguments(t))?0===t.length:0===g.keys(t).length},g.isElement=function(t){return!(!t||1!==t.nodeType)},g.isArray=d||function(t){return"[object Array]"===l.call(t)},g.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},g.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){g["is"+t]=function(e){return l.call(e)==="[object "+t+"]"}}),g.isArguments(arguments)||(g.isArguments=function(t){return g.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(g.isFunction=function(t){return"function"==typeof t||!1}),g.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},g.isNaN=function(t){return g.isNumber(t)&&t!==+t},g.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===l.call(t)},g.isNull=function(t){return null===t},g.isUndefined=function(t){return void 0===t},g.has=function(t,e){return null!=t&&p.call(t,e)},g.noConflict=function(){return r._=i,this},g.identity=function(t){return t},g.constant=function(t){return function(){return t}},g.noop=function(){},g.property=function(t){return function(e){return null==e?void 0:e[t]}},g.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},g.matcher=g.matches=function(t){return t=g.extendOwn({},t),function(e){return g.isMatch(e,t)}},g.times=function(t,e,n){var r=Array(Math.max(0,t));e=v(e,n,1);for(var i=0;t>i;i++)r[i]=e(i);return r},g.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},g.now=Date.now||function(){return(new Date).getTime()};var k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},M=g.invert(k),I=function(t){var e=function(e){return t[e]},n="(?:"+g.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};g.escape=I(k),g.unescape=I(M),g.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),g.isFunction(r)?r.call(t):r};var D=0;g.uniqueId=function(t){var e=++D+"";return t?t+e:e},g.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},z=/\\|'|\r|\n|\u2028|\u2029/g,x=function(t){return"\\"+N[t]};g.template=function(t,e,n){!e&&n&&(e=n),e=g.defaults({},e,g.templateSettings);var r=RegExp([(e.escape||L).source,(e.interpolate||L).source,(e.evaluate||L).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,r,s,a){return o+=t.slice(i,a).replace(z,x),i=a+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(e.variable||"obj","_",o)}catch(a){throw a.source=o,a}var u=function(t){return s.call(this,t,g)},c=e.variable||"obj";return u.source="function("+c+"){\n"+o+"}",u},g.chain=function(t){var e=g(t);return e._chain=!0,e};var F=function(t,e){return t._chain?g(e).chain():e};g.mixin=function(t){g.each(g.functions(t),function(e){var n=g[e]=t[e];g.prototype[e]=function(){var t=[this._wrapped];return u.apply(t,arguments),F(this,n.apply(g,t))}})},g.mixin(g),g.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];g.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],F(this,n)}}),g.each(["concat","join","slice"],function(t){var e=o[t];g.prototype[t]=function(){return F(this,e.apply(this._wrapped,arguments))}}),g.prototype.value=function(){return this._wrapped},g.prototype.valueOf=g.prototype.toJSON=g.prototype.value,g.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return g})}.call(this),function(){var t,e=this,n=e.Backbone,r=[],i=r.push,o=r.slice,s=r.splice;t="undefined"!=typeof exports?exports:e.Backbone={},t.VERSION="1.0.0";var a=e._;a||"undefined"==typeof require||(a=require("underscore")),t.$=e.jQuery||e.Zepto||e.ender||e.$,t.noConflict=function(){return e.Backbone=n,this},t.emulateHTTP=!1,t.emulateJSON=!1;var u=t.Events={on:function(t,e,n){if(!l(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!l(this,"once",t,[e,n])||!e)return this;var r=this,i=a.once(function(){r.off(t,i),e.apply(this,arguments)});return i._callback=e,this.on(t,i,n)},off:function(t,e,n){var r,i,o,s,u,c,p,d;if(!this._events||!l(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(s=t?[t]:a.keys(this._events),u=0,c=s.length;c>u;u++)if(t=s[u],o=this._events[t]){if(this._events[t]=r=[],e||n)for(p=0,d=o.length;d>p;p++)i=o[p],(e&&e!==i.callback&&e!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!l(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&p(n,e),r&&p(r,arguments),this},stopListening:function(t,e,n){var r=this._listeners;if(!r)return this;var i=!e&&!n;"object"==typeof e&&(n=this),t&&((r={})[t._listenerId]=t);for(var o in r)r[o].off(e,n,this),i&&delete this._listeners[o];return this}},c=/\s+/,l=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(c.test(n)){for(var o=n.split(c),s=0,a=o.length;a>s;s++)t[e].apply(t,[o[s]].concat(r));return!1}return!0},p=function(t,e){var n,r=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e)}},d={listenTo:"on",listenToOnce:"once"};a.each(d,function(t,e){u[e]=function(e,n,r){var i=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=a.uniqueId("l"));return i[o]=e,"object"==typeof n&&(r=this),e[t](n,r,this),this}}),u.bind=u.on,u.unbind=u.off,a.extend(t,u);var h=t.Model=function(t,e){var n,r=t||{};e||(e={}),this.cid=a.uniqueId("c"),this.attributes={},a.extend(this,a.pick(e,f)),e.parse&&(r=this.parse(r,e)||{}),(n=a.result(this,"defaults"))&&(r=a.defaults({},r,n)),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)},f=["url","urlRoot","collection"];a.extend(h.prototype,u,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return a.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return a.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var r,i,o,s,u,c,l,p;if(null==t)return this;if("object"==typeof t?(i=t,n=e):(i={})[t]=e,n||(n={}),!this._validate(i,n))return!1;o=n.unset,u=n.silent,s=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=a.clone(this.attributes),this.changed={}),p=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)e=i[r],a.isEqual(p[r],e)||s.push(r),a.isEqual(l[r],e)?delete this.changed[r]:this.changed[r]=e,o?delete p[r]:p[r]=e;if(!u){s.length&&(this._pending=!0);for(var d=0,h=s.length;h>d;d++)this.trigger("change:"+s[d],this,p[s[d]],n)}if(c)return this;if(!u)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,a.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,a.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!a.isEmpty(this.changed):a.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?a.clone(this.changed):!1;var e,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in t)a.isEqual(r[i],e=t[i])||((n||(n={}))[i]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return a.clone(this._previousAttributes)},fetch:function(t){t=t?a.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(r){return e.set(e.parse(r,t),t)?(n&&n(e,r,t),void e.trigger("sync",e,r,t)):!1},x(this,t),this.sync("read",this,t)},save:function(t,e,n){var r,i,o,s=this.attributes;if(null==t||"object"==typeof t?(r=t,n=e):(r={})[t]=e,!(!r||n&&n.wait||this.set(r,n)))return!1;if(n=a.extend({validate:!0},n),!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=a.extend({},s,r)),void 0===n.parse&&(n.parse=!0);var u=this,c=n.success;return n.success=function(t){u.attributes=s;var e=u.parse(t,n);return n.wait&&(e=a.extend(r||{},e)),a.isObject(e)&&!u.set(e,n)?!1:(c&&c(u,t,n),void u.trigger("sync",u,t,n))},x(this,n),i=this.isNew()?"create":n.patch?"patch":"update","patch"===i&&(n.attrs=r),o=this.sync(i,this,n),r&&n.wait&&(this.attributes=s),o},destroy:function(t){t=t?a.clone(t):{};var e=this,n=t.success,r=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&r(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;x(this,t);var i=this.sync("delete",this,t);return t.wait||r(),i},url:function(){var t=a.result(this,"urlRoot")||a.result(this.collection,"url")||z();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},a.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=a.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,a.extend(e||{},{validationError:n})),!1):!0}});var m=["keys","values","pairs","invert","pick","omit"];a.each(m,function(t){h.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.attributes),a[t].apply(a,e)}});var _=t.Collection=function(t,e){e||(e={}),e.url&&(this.url=e.url),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,a.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},v={add:!0,merge:!1,remove:!1};a.extend(_.prototype,u,{model:h,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return t.sync.apply(this,arguments)},add:function(t,e){return this.set(t,a.defaults(e||{},v))},remove:function(t,e){t=a.isArray(t)?t.slice():[t],e||(e={});var n,r,i,o;for(n=0,r=t.length;r>n;n++)o=this.get(t[n]),o&&(delete this._byId[o.id],delete this._byId[o.cid],i=this.indexOf(o),this.models.splice(i,1),this.length--,e.silent||(e.index=i,o.trigger("remove",o,this,e)),this._removeReference(o));return this},set:function(t,e){e=a.defaults(e||{},g),e.parse&&(t=this.parse(t,e)),a.isArray(t)||(t=t?[t]:[]);var n,r,o,u,c,l=e.at,p=this.comparator&&null==l&&e.sort!==!1,d=a.isString(this.comparator)?this.comparator:null,h=[],f=[],m={};for(n=0,r=t.length;r>n;n++)(o=this._prepareModel(t[n],e))&&((u=this.get(o))?(e.remove&&(m[u.cid]=!0),e.merge&&(u.set(o.attributes,e),p&&!c&&u.hasChanged(d)&&(c=!0))):e.add&&(h.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,null!=o.id&&(this._byId[o.id]=o)));if(e.remove){for(n=0,r=this.length;r>n;++n)m[(o=this.models[n]).cid]||f.push(o);f.length&&this.remove(f,e)}if(h.length&&(p&&(c=!0),this.length+=h.length,null!=l?s.apply(this.models,[l,0].concat(h)):i.apply(this.models,h)),c&&this.sort({silent:!0}),e.silent)return this;for(n=0,r=h.length;r>n;n++)(o=h[n]).trigger("add",o,this,e);return c&&this.trigger("sort",this,e),this},reset:function(t,e){e||(e={});for(var n=0,r=this.models.length;r>n;n++)this._removeReference(this.models[n]);return e.previousModels=this.models,this._reset(),this.add(t,a.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,a.extend({at:this.length},e)),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,a.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(t,e){return this.models.slice(t,e)},get:function(t){return null==t?void 0:this._byId[null!=t.id?t.id:t.cid||t]},at:function(t){return this.models[t]},where:function(t,e){return a.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),a.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(a.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},sortedIndex:function(t,e,n){e||(e=this.comparator);var r=a.isFunction(e)?e:function(t){return t.get(e)};return a.sortedIndex(this.models,t,r,n)},pluck:function(t){return a.invoke(this.models,"get",t)},fetch:function(t){t=t?a.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(r){var i=t.reset?"reset":"set";n[i](r,t),e&&e(n,r,t),n.trigger("sync",n,r,t)},x(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?a.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,r=e.success;return e.success=function(i){e.wait&&n.add(t,e),r&&r(t,i,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof h)return t.collection||(t.collection=this),t;e||(e={}),e.collection=this;var n=new this.model(t,e);return n._validate(t,e)?n:(this.trigger("invalid",this,t,e),!1)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,r),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];a.each(y,function(t){_.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.models),a[t].apply(a,e)}});var w=["groupBy","countBy","sortBy"];a.each(w,function(t){_.prototype[t]=function(e,n){var r=a.isFunction(e)?e:function(t){return t.get(e)};return a[t](this.models,r,n)}});var E=t.View=function(t){this.cid=a.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,T=["model","collection","el","id","attributes","className","tagName","events"];a.extend(E.prototype,u,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=a.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(a.isFunction(n)||(n=this[t[e]]),n){var r=e.match(b),i=r[1],o=r[2];n=a.bind(n,this),i+=".delegateEvents"+this.cid,""===o?this.$el.on(i,n):this.$el.on(i,o,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(t){this.options&&(t=a.extend({},a.result(this,"options"),t)),a.extend(this,a.pick(t,T)),this.options=t},_ensureElement:function(){if(this.el)this.setElement(a.result(this,"el"),!1);else{var e=a.extend({},a.result(this,"attributes"));this.id&&(e.id=a.result(this,"id")),this.className&&(e["class"]=a.result(this,"className"));var n=t.$("<"+a.result(this,"tagName")+">").attr(e);this.setElement(n,!1)}}}),t.sync=function(e,n,r){var i=R[e];a.defaults(r||(r={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:i,dataType:"json"};if(r.url||(o.url=a.result(n,"url")||z()),null!=r.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(o.contentType="application/json",o.data=JSON.stringify(r.attrs||n.toJSON(r))),r.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),r.emulateHTTP&&("PUT"===i||"DELETE"===i||"PATCH"===i)){o.type="POST",r.emulateJSON&&(o.data._method=i);var s=r.beforeSend;r.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",i),s?s.apply(this,arguments):void 0}}"GET"===o.type||r.emulateJSON||(o.processData=!1),"PATCH"!==o.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var u=r.xhr=t.ajax(a.extend(o,r));return n.trigger("request",n,u,r),u};var R={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var A=t.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},P=/\((.*?)\)/g,O=/(\(\?)?:\w+/g,S=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;a.extend(A.prototype,u,{initialize:function(){},route:function(e,n,r){a.isRegExp(e)||(e=this._routeToRegExp(e)),a.isFunction(n)&&(r=n,n=""),r||(r=this[n]);var i=this;return t.history.route(e,function(o){var s=i._extractParameters(e,o);r&&r.apply(i,s),i.trigger.apply(i,["route:"+n].concat(s)),i.trigger("route",n,s),t.history.trigger("route",i,n,s)}),this},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=a.result(this,"routes");for(var t,e=a.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(C,"\\$&").replace(P,"(?:$1)?").replace(O,function(t,e){return e?t:"([^/]+)"}).replace(S,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return a.map(n,function(t){return t?decodeURIComponent(t):null})}});var k=t.History=function(){this.handlers=[],a.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,I=/^\/+|\/+$/g,D=/msie [\w.]+/,L=/\/$/;k.started=!1,a.extend(k.prototype,u,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var n=this.root.replace(L,"");t.indexOf(n)||(t=t.substr(n.length))}else t=this.getHash();return t.replace(M,"")},start:function(e){if(k.started)throw new Error("Backbone.history has already been started");k.started=!0,this.options=a.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),r=document.documentMode,i=D.exec(navigator.userAgent.toLowerCase())&&(!r||7>=r);this.root=("/"+this.root+"/").replace(I,"/"),i&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!i?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var o=this.location,s=o.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&s&&o.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+o.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),k.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(t){var e=this.fragment=this.getFragment(t),n=a.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0});return n},navigate:function(t,e){if(!k.started)return!1;if(e&&e!==!0||(e={trigger:e}),t=this.getFragment(t||""),this.fragment!==t){this.fragment=t;var n=this.root+t;if(this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}e.trigger&&this.loadUrl(t)}},_updateHash:function(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}}),t.history=new k;var N=function(t,e){var n,r=this;n=t&&a.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},a.extend(n,r,e);var i=function(){this.constructor=n};return i.prototype=r.prototype,n.prototype=new i,t&&a.extend(n.prototype,t),n.__super__=r.prototype,n};h.extend=_.extend=A.extend=E.extend=k.extend=N;var z=function(){throw new Error('A "url" property or function must be specified')},x=function(t,e){var n=e.error;e.error=function(r){n&&n(t,r,e),t.trigger("error",t,r,e)}}}.call(this),define("backbone",["underscore","jquery"],function(t){return function(){var e;return e||t.Backbone}}(this)),function(t,e){"use strict";var n=t.Backbone;return"function"==typeof define&&define.amd?define("backbone.layout",["backbone","underscore","jquery"],function(){return e.apply(t,arguments)}):void(n.Layout=e.call(t,n,t._,n.$))}("object"==typeof global?global:this,function(t,e,n){"use strict";var r=this,i=t.View,o=Array.prototype.push,s=Array.prototype.concat,a=Array.prototype.splice,u=String.prototype.trim?e.bind(String.prototype.trim.call,String.prototype.trim):n.trim,c=t.View.extend({_render:function(){var t=this,e=t.__manager__,n=t.beforeRender,r=t.deferred();return t.hasRendered&&t._removeViews(),e.callback=function(){delete e.isAsync,delete e.callback,t.trigger("beforeRender",t),t._viewRender(e).render().then(function(){r.resolve()})},n&&n.call(t,t),e.isAsync||e.callback(),r.promise()},_applyTemplate:function(t,r,i){e.isString(t)&&(r.noel?(t=n.parseHTML(t,!0),this.$el.slice(1).remove(),this.$el.replaceWith(t),this.setElement(t,!1)):this.html(this.$el,t)),i.resolveWith(this,[this])},_viewRender:function(t){function n(e,n){var i;t.callback=function(e){delete t.isAsync,delete t.callback,s._applyTemplate(e,t,o)},c.cache(r,n),n&&(i=s.renderTemplate.call(s,n,e)),t.isAsync||s._applyTemplate(i,t,o)}var r,i,o,s=this;return{render:function(){var a=s.serialize,u=s.template;return o=s.deferred(),e.isFunction(a)&&(a=a.call(s)),t.callback=function(e){delete t.isAsync,delete t.callback,n(a,e)},"string"==typeof u&&(r=s.prefix+u),(i=c.cache(r))?(n(a,i,r),o):("string"==typeof u?i=s.fetchTemplate.call(s,s.prefix+u):"function"==typeof u?i=u:null!=u&&(i=s.fetchTemplate.call(s,u)),t.isAsync||n(a,i),o)}}},constructor:function(n){this.manage=!0,e.extend(this,n),t.View.apply(this,arguments)},async:function(){var t=this.__manager__;return t.isAsync=!0,t.callback},promise:function(){return this.__manager__.renderDeferred.promise()},renderViews:function(){var t=this,e=t.__manager__,n=t.deferred(),r=t.getViews().map(function(t){return t.render().__manager__.renderDeferred}).value();return e.renderDeferred=n.promise(),t.when(r).then(function(){n.resolveWith(t,[t])}),t},insertView:function(e,n,r){return n instanceof t.View?this.setView(e,n,!0,r):this.setView(e,!0,n)},insertViews:function(t){return e.isArray(t)?this.setViews({"":t}):(e.each(t,function(n,r){t[r]=e.isArray(n)?n:[n]}),this.setViews(t))},getView:function(t){return null==t&&(t=arguments[1]),this.getViews(t).first().value()},getViews:function(t){var n;return"string"==typeof t?(t=this.sections[t]||t,n=this.views[t]||[],e.chain([].concat(n))):(n=e.chain(this.views).map(function(t){return e.isArray(t)?t:[t]},this).flatten(),"object"==typeof t?n.where(t):"function"==typeof t?n.filter(t):n)},removeView:function(t){return this.getViews(t).each(function(t){t.remove()})},setView:function(t,n,r,i){var o,a,u,c=this;if("string"!=typeof t&&(i=r,r=n,n=t,t=""),o=n.__manager__,!o)throw new Error("The argument associated with selector '"+t+"' is defined and a View.  Set `manage` property to true for Backbone.View instances.");return o.parent=c,a=o.selector=c.sections[t]||t,u=c.views[a],r?(c.views[a]=s.call([],c.views[t]||[],n),i&&e.isNumber(i.insertAt)&&u?(u.splice(i.insertAt,0,n),c.views[a]=u,o.insertAt=i.insertAt):c.views[a]=s.call([],u||[],n),c.__manager__.insert=!0,n):(n.hasRendered&&n.partial(c.$el,n.$el,c.__manager__,o),c.removeView(t),c.views[a]=n)},setViews:function(t){return e.each(t,function(t,n){return e.isArray(t)?e.each(t,function(t){this.insertView(n,t)},this):void this.setView(n,t)},this),this},render:function(){function t(){function t(){var t=r.console,n=i.afterRender;n&&n.call(i,i),i.trigger("afterRender",i),s.noel&&i.$el.length>1&&e.isFunction(t.warn)&&!i.suppressWarnings&&(t.warn("`el: false` with multiple top level elements is not supported."),e.isFunction(t.trace)&&t.trace())}var n;return e.each(i.views,function(t,n){e.isArray(t)&&i.htmlBatch(i,t,n)}),a&&!s.insertedViaFragment&&(i.contains(a.el,i.el)||a.partial(a.$el,i.$el,u,s)),i.delegateEvents(),i.hasRendered=!0,(n=s.queue.shift())?n():delete s.queue,u&&u.queue?a.once("afterRender",t):t(),c.resolveWith(i,[i])}function n(){i._render().done(function(){if(!e.keys(i.views).length)return t();var n=e.map(i.views,function(t){var n=e.isArray(t);return n&&t.length?i.when(e.map(t,function(t){return t.__manager__.insertedViaFragment=!0,t.render().__manager__.renderDeferred})):n?t:t.render().__manager__.renderDeferred});i.when(n).done(t)})}var i=this,s=i.__manager__,a=s.parent,u=a&&a.__manager__,c=i.deferred();return s.queue?o.call(s.queue,n):(s.queue=[],n(i,c)),i.__manager__.renderDeferred=c,i},remove:function(){return c._removeView(this,!0),this._remove.apply(this,arguments)}},{_cache:{},_removeViews:function(t,e){"boolean"==typeof t&&(e=t,t=this),t=t||this,t.getViews().each(function(t){(t.hasRendered||e)&&c._removeView(t,e)})},_removeView:function(t,n){var r,i=t.__manager__,o=i.parent&&i.parent.__manager__,s="boolean"==typeof t.keep?t.keep:t.options.keep;if(!s&&o&&o.insert===!0||n){if(c.cleanViews(t),t._removeViews(!0),t.$el.remove(),!i.parent)return;if(r=i.parent.views[i.selector],e.isArray(r))return e.each(e.clone(r),function(t,e){t&&t.__manager__===i&&a.call(r,e,1)});delete i.parent.views[i.selector]}},cache:function(t,e){return t in this._cache&&null==e?this._cache[t]:null!=t&&null!=e?this._cache[t]=e:void 0},cleanViews:function(n){e.each(s.call([],n),function(n){n.unbind(),n.model instanceof t.Model&&n.model.off(null,null,n),n.collection instanceof t.Collection&&n.collection.off(null,null,n),n.stopListening(),e.isFunction(n.cleanup)&&n.cleanup()})},configure:function(n){e.extend(c.prototype,n),n.manage&&(t.View.prototype.manage=!0),n.el===!1&&(t.View.prototype.el=!1),n.suppressWarnings===!0&&(t.View.prototype.suppressWarnings=!0)},setupView:function(n,r){r=r||{},e.each(s.call([],n),function(n){if(!n.__manager__){var i,o,s=c.prototype;e.defaults(n,{views:{},sections:{},__manager__:{},_removeViews:c._removeViews,_removeView:c._removeView},c.prototype),n.options=r,e.extend(n,r),n._remove=t.View.prototype.remove,n.render=c.prototype.render,n.remove!==s.remove&&(n._remove=n.remove,n.remove=s.remove),i=r.views||n.views,e.keys(i).length&&(o=i,n.views={},e.each(o,function(t,e){"function"==typeof t&&(o[e]=t.call(n,n))}),n.setViews(o))}})}});c.VERSION="0.9.4",t.Layout=c,t.View=function(t){var e;t=t||{},("el"in t?t.el===!1:this.el===!1)&&(e=!0),(t.manage||this.manage)&&c.setupView(this,t),this.__manager__&&(this.__manager__.noel=e,this.__manager__.suppressWarnings=t.suppressWarnings),i.apply(this,arguments)},t.View.extend=i.extend,t.View.prototype=i.prototype;var l={prefix:"",deferred:function(){return n.Deferred()},fetchTemplate:function(t){return e.template(n(t).html())},renderTemplate:function(t,e){return u(t(e))},serialize:function(){return this.model?e.clone(this.model.attributes):{}},partial:function(t,e,n,r){var i;r.selector&&(n.noel?(i=t.filter(r.selector),t=i.length?i:t.find(r.selector)):t=t.find(r.selector)),n.insert?this.insert(t,e,r.insertAt,r.selector):this.html(t,e)},html:function(t,e){t.html(e)},htmlBatch:function(t,r,i){var o=t.__manager__,s={selector:i},a=e.reduce(r,function(e,r){var i="boolean"==typeof r.keep?r.keep:r.options.keep,o=i&&n.contains(t.el,r.el);return r.el&&!o&&e.push(r.el),e},[]);return this.partial(t.$el,n(a),o,s)},insert:function(t,n,r,i){e.isNumber(r)?this.insertAtIndex(t,n,r,i):t.append(n)},insertAtIndex:function(t,e,n,r){var i,o=t.children();i=o.eq(0>n?Math.max(0,o.length+n):n);var s=this.views[r];0>n?n=Math.max(0,s.length-1+n):n+=1;var a=s[n];a?a.el.parentNode?e.insertBefore(a.$el):i.length?i.before(e):t.append(e):t.append(e)},when:function(t){return n.when.apply(null,t)},contains:function(t,e){return n.contains(t,e)}};return e.extend(c.prototype,l),c}),function(t){function e(t,e,n){switch(arguments.length){case 2:return null!=t?t:e;case 3:return null!=t?t:null!=e?e:n;default:throw new Error("Implement me")}}function n(t,e){return Ae.call(t,e)}function r(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}
}function i(t){ye.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn}function o(t,e){var n=!0;return d(function(){return n&&(i(t),n=!1),e.apply(this,arguments)},e)}function s(t,e){gn[t]||(i(e),gn[t]=!0)}function a(t,e){return function(n){return m(t.call(this,n),e)}}function u(t,e){return function(n){return this.localeData().ordinal(t.call(this,n),e)}}function c(){}function l(t,e){e!==!1&&M(t),h(this,t),this._d=new Date(+t._d)}function p(t){var e=R(t),n=e.year||0,r=e.quarter||0,i=e.month||0,o=e.week||0,s=e.day||0,a=e.hour||0,u=e.minute||0,c=e.second||0,l=e.millisecond||0;this._milliseconds=+l+1e3*c+6e4*u+36e5*a,this._days=+s+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=ye.localeData(),this._bubble()}function d(t,e){for(var r in e)n(e,r)&&(t[r]=e[r]);return n(e,"toString")&&(t.toString=e.toString),n(e,"valueOf")&&(t.valueOf=e.valueOf),t}function h(t,e){var n,r,i;if("undefined"!=typeof e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),"undefined"!=typeof e._i&&(t._i=e._i),"undefined"!=typeof e._f&&(t._f=e._f),"undefined"!=typeof e._l&&(t._l=e._l),"undefined"!=typeof e._strict&&(t._strict=e._strict),"undefined"!=typeof e._tzm&&(t._tzm=e._tzm),"undefined"!=typeof e._isUTC&&(t._isUTC=e._isUTC),"undefined"!=typeof e._offset&&(t._offset=e._offset),"undefined"!=typeof e._pf&&(t._pf=e._pf),"undefined"!=typeof e._locale&&(t._locale=e._locale),Le.length>0)for(n in Le)r=Le[n],i=e[r],"undefined"!=typeof i&&(t[r]=i);return t}function f(t){return 0>t?Math.ceil(t):Math.floor(t)}function m(t,e,n){for(var r=""+Math.abs(t),i=t>=0;r.length<e;)r="0"+r;return(i?n?"+":"":"-")+r}function _(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function g(t,e){var n;return e=z(e,t),t.isBefore(e)?n=_(t,e):(n=_(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function v(t,e){return function(n,r){var i,o;return null===r||isNaN(+r)||(s(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),o=n,n=r,r=o),n="string"==typeof n?+n:n,i=ye.duration(n,r),y(this,i,t),this}}function y(t,e,n,r){var i=e._milliseconds,o=e._days,s=e._months;r=null==r?!0:r,i&&t._d.setTime(+t._d+i*n),o&&he(t,"Date",de(t,"Date")+o*n),s&&pe(t,de(t,"Month")+s*n),r&&ye.updateOffset(t,o||s)}function w(t){return"[object Array]"===Object.prototype.toString.call(t)}function E(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function b(t,e,n){var r,i=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),s=0;for(r=0;i>r;r++)(n&&t[r]!==e[r]||!n&&P(t[r])!==P(e[r]))&&s++;return s+o}function T(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=ln[t]||pn[e]||e}return t}function R(t){var e,r,i={};for(r in t)n(t,r)&&(e=T(r),e&&(i[e]=t[r]));return i}function A(e){var n,r;if(0===e.indexOf("week"))n=7,r="day";else{if(0!==e.indexOf("month"))return;n=12,r="month"}ye[e]=function(i,o){var s,a,u=ye._locale[e],c=[];if("number"==typeof i&&(o=i,i=t),a=function(t){var e=ye().utc().set(r,t);return u.call(ye._locale,e,i||"")},null!=o)return a(o);for(s=0;n>s;s++)c.push(a(s));return c}}function P(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=e>=0?Math.floor(e):Math.ceil(e)),n}function O(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function S(t,e,n){return ae(ye([t,11,31+e-n]),e,n).week}function C(t){return k(t)?366:365}function k(t){return t%4===0&&t%100!==0||t%400===0}function M(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[Oe]<0||t._a[Oe]>11?Oe:t._a[Se]<1||t._a[Se]>O(t._a[Pe],t._a[Oe])?Se:t._a[Ce]<0||t._a[Ce]>23?Ce:t._a[ke]<0||t._a[ke]>59?ke:t._a[Me]<0||t._a[Me]>59?Me:t._a[Ie]<0||t._a[Ie]>999?Ie:-1,t._pf._overflowDayOfYear&&(Pe>e||e>Se)&&(e=Se),t._pf.overflow=e)}function I(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length)),t._isValid}function D(t){return t?t.toLowerCase().replace("_","-"):t}function L(t){for(var e,n,r,i,o=0;o<t.length;){for(i=D(t[o]).split("-"),e=i.length,n=D(t[o+1]),n=n?n.split("-"):null;e>0;){if(r=N(i.slice(0,e).join("-")))return r;if(n&&n.length>=e&&b(i,n,!0)>=e-1)break;e--}o++}return null}function N(t){var e=null;if(!De[t]&&Ne)try{e=ye.locale(),require("./locale/"+t),ye.locale(e)}catch(n){}return De[t]}function z(t,e){return e._isUTC?ye(t).zone(e._offset||0):ye(t).local()}function x(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function F(t){var e,n,r=t.match(Ue);for(e=0,n=r.length;n>e;e++)r[e]=_n[r[e]]?_n[r[e]]:x(r[e]);return function(i){var o="";for(e=0;n>e;e++)o+=r[e]instanceof Function?r[e].call(i,t):r[e];return o}}function U(t,e){return t.isValid()?(e=G(e,t.localeData()),dn[e]||(dn[e]=F(e)),dn[e](t)):t.localeData().invalidDate()}function G(t,e){function n(t){return e.longDateFormat(t)||t}var r=5;for(Ge.lastIndex=0;r>=0&&Ge.test(t);)t=t.replace(Ge,n),Ge.lastIndex=0,r-=1;return t}function j(t,e){var n,r=e._strict;switch(t){case"Q":return Qe;case"DDDD":return Je;case"YYYY":case"GGGG":case"gggg":return r?tn:Be;case"Y":case"G":case"g":return nn;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return r?en:Ve;case"S":if(r)return Qe;case"SS":if(r)return Ze;case"SSS":if(r)return Je;case"DDD":return Ye;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return qe;case"a":case"A":return e._locale._meridiemParse;case"X":return Xe;case"Z":case"ZZ":return He;case"T":return $e;case"SSSS":return We;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return r?Ze:je;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return je;case"Do":return Ke;default:return n=new RegExp(K(X(t.replace("\\","")),"i"))}}function Y(t){t=t||"";var e=t.match(He)||[],n=e[e.length-1]||[],r=(n+"").match(un)||["-",0,0],i=+(60*r[1])+P(r[2]);return"+"===r[0]?-i:i}function B(t,e,n){var r,i=n._a;switch(t){case"Q":null!=e&&(i[Oe]=3*(P(e)-1));break;case"M":case"MM":null!=e&&(i[Oe]=P(e)-1);break;case"MMM":case"MMMM":r=n._locale.monthsParse(e),null!=r?i[Oe]=r:n._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(i[Se]=P(e));break;case"Do":null!=e&&(i[Se]=P(parseInt(e,10)));break;case"DDD":case"DDDD":null!=e&&(n._dayOfYear=P(e));break;case"YY":i[Pe]=ye.parseTwoDigitYear(e);break;case"YYYY":case"YYYYY":case"YYYYYY":i[Pe]=P(e);break;case"a":case"A":n._isPm=n._locale.isPM(e);break;case"H":case"HH":case"h":case"hh":i[Ce]=P(e);break;case"m":case"mm":i[ke]=P(e);break;case"s":case"ss":i[Me]=P(e);break;case"S":case"SS":case"SSS":case"SSSS":i[Ie]=P(1e3*("0."+e));break;case"X":n._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=Y(e);break;case"dd":case"ddd":case"dddd":r=n._locale.weekdaysParse(e),null!=r?(n._w=n._w||{},n._w.d=r):n._pf.invalidWeekday=e;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":t=t.substr(0,1);case"gggg":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(n._w=n._w||{},n._w[t]=P(e));break;case"gg":case"GG":n._w=n._w||{},n._w[t]=ye.parseTwoDigitYear(e)}}function V(t){var n,r,i,o,s,a,u;n=t._w,null!=n.GG||null!=n.W||null!=n.E?(s=1,a=4,r=e(n.GG,t._a[Pe],ae(ye(),1,4).year),i=e(n.W,1),o=e(n.E,1)):(s=t._locale._week.dow,a=t._locale._week.doy,r=e(n.gg,t._a[Pe],ae(ye(),s,a).year),i=e(n.w,1),null!=n.d?(o=n.d,s>o&&++i):o=null!=n.e?n.e+s:s),u=ue(r,i,o,a,s),t._a[Pe]=u.year,t._dayOfYear=u.dayOfYear}function W(t){var n,r,i,o,s=[];if(!t._d){for(i=H(t),t._w&&null==t._a[Se]&&null==t._a[Oe]&&V(t),t._dayOfYear&&(o=e(t._a[Pe],i[Pe]),t._dayOfYear>C(o)&&(t._pf._overflowDayOfYear=!0),r=re(o,0,t._dayOfYear),t._a[Oe]=r.getUTCMonth(),t._a[Se]=r.getUTCDate()),n=0;3>n&&null==t._a[n];++n)t._a[n]=s[n]=i[n];for(;7>n;n++)t._a[n]=s[n]=null==t._a[n]?2===n?1:0:t._a[n];t._d=(t._useUTC?re:ne).apply(null,s),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()+t._tzm)}}function q(t){var e;t._d||(e=R(t._i),t._a=[e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond],W(t))}function H(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function $(t){if(t._f===ye.ISO_8601)return void Z(t);t._a=[],t._pf.empty=!0;var e,n,r,i,o,s=""+t._i,a=s.length,u=0;for(r=G(t._f,t._locale).match(Ue)||[],e=0;e<r.length;e++)i=r[e],n=(s.match(j(i,t))||[])[0],n&&(o=s.substr(0,s.indexOf(n)),o.length>0&&t._pf.unusedInput.push(o),s=s.slice(s.indexOf(n)+n.length),u+=n.length),_n[i]?(n?t._pf.empty=!1:t._pf.unusedTokens.push(i),B(i,n,t)):t._strict&&!n&&t._pf.unusedTokens.push(i);t._pf.charsLeftOver=a-u,s.length>0&&t._pf.unusedInput.push(s),t._isPm&&t._a[Ce]<12&&(t._a[Ce]+=12),t._isPm===!1&&12===t._a[Ce]&&(t._a[Ce]=0),W(t),M(t)}function X(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,r,i){return e||n||r||i})}function K(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(t){var e,n,i,o,s;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(0/0));for(o=0;o<t._f.length;o++)s=0,e=h({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._pf=r(),e._f=t._f[o],$(e),I(e)&&(s+=e._pf.charsLeftOver,s+=10*e._pf.unusedTokens.length,e._pf.score=s,(null==i||i>s)&&(i=s,n=e));d(t,n||e)}function Z(t){var e,n,r=t._i,i=rn.exec(r);if(i){for(t._pf.iso=!0,e=0,n=sn.length;n>e;e++)if(sn[e][1].exec(r)){t._f=sn[e][0]+(i[6]||" ");break}for(e=0,n=an.length;n>e;e++)if(an[e][1].exec(r)){t._f+=an[e][0];break}r.match(He)&&(t._f+="Z"),$(t)}else t._isValid=!1}function J(t){Z(t),t._isValid===!1&&(delete t._isValid,ye.createFromInputFallback(t))}function te(t,e){var n,r=[];for(n=0;n<t.length;++n)r.push(e(t[n],n));return r}function ee(e){var n,r=e._i;r===t?e._d=new Date:E(r)?e._d=new Date(+r):null!==(n=ze.exec(r))?e._d=new Date(+n[1]):"string"==typeof r?J(e):w(r)?(e._a=te(r.slice(0),function(t){return parseInt(t,10)}),W(e)):"object"==typeof r?q(e):"number"==typeof r?e._d=new Date(r):ye.createFromInputFallback(e)}function ne(t,e,n,r,i,o,s){var a=new Date(t,e,n,r,i,o,s);return 1970>t&&a.setFullYear(t),a}function re(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function ie(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function oe(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}function se(t,e,n){var r=ye.duration(t).abs(),i=Re(r.as("s")),o=Re(r.as("m")),s=Re(r.as("h")),a=Re(r.as("d")),u=Re(r.as("M")),c=Re(r.as("y")),l=i<hn.s&&["s",i]||1===o&&["m"]||o<hn.m&&["mm",o]||1===s&&["h"]||s<hn.h&&["hh",s]||1===a&&["d"]||a<hn.d&&["dd",a]||1===u&&["M"]||u<hn.M&&["MM",u]||1===c&&["y"]||["yy",c];return l[2]=e,l[3]=+t>0,l[4]=n,oe.apply({},l)}function ae(t,e,n){var r,i=n-e,o=n-t.day();return o>i&&(o-=7),i-7>o&&(o+=7),r=ye(t).add(o,"d"),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function ue(t,e,n,r,i){var o,s,a=re(t,0,1).getUTCDay();return a=0===a?7:a,n=null!=n?n:i,o=i-a+(a>r?7:0)-(i>a?7:0),s=7*(e-1)+(n-i)+o+1,{year:s>0?t:t-1,dayOfYear:s>0?s:C(t-1)+s}}function ce(e){var n=e._i,r=e._f;return e._locale=e._locale||ye.localeData(e._l),null===n||r===t&&""===n?ye.invalid({nullInput:!0}):("string"==typeof n&&(e._i=n=e._locale.preparse(n)),ye.isMoment(n)?new l(n,!0):(r?w(r)?Q(e):$(e):ee(e),new l(e)))}function le(t,e){var n,r;if(1===e.length&&w(e[0])&&(e=e[0]),!e.length)return ye();for(n=e[0],r=1;r<e.length;++r)e[r][t](n)&&(n=e[r]);return n}function pe(t,e){var n;return"string"==typeof e&&(e=t.localeData().monthsParse(e),"number"!=typeof e)?t:(n=Math.min(t.date(),O(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t)}function de(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function he(t,e,n){return"Month"===e?pe(t,n):t._d["set"+(t._isUTC?"UTC":"")+e](n)}function fe(t,e){return function(n){return null!=n?(he(this,t,n),ye.updateOffset(this,e),this):de(this,t)}}function me(t){return 400*t/146097}function _e(t){return 146097*t/400}function ge(t){ye.duration.fn[t]=function(){return this._data[t]}}function ve(t){"undefined"==typeof ender&&(we=Te.moment,Te.moment=t?o("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",ye):ye)}for(var ye,we,Ee,be="2.8.3",Te="undefined"!=typeof global?global:this,Re=Math.round,Ae=Object.prototype.hasOwnProperty,Pe=0,Oe=1,Se=2,Ce=3,ke=4,Me=5,Ie=6,De={},Le=[],Ne="undefined"!=typeof module&&module.exports,ze=/^\/?Date\((\-?\d+)/i,xe=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Fe=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Ue=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Ge=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,je=/\d\d?/,Ye=/\d{1,3}/,Be=/\d{1,4}/,Ve=/[+\-]?\d{1,6}/,We=/\d+/,qe=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,He=/Z|[\+\-]\d\d:?\d\d/gi,$e=/T/i,Xe=/[\+\-]?\d+(\.\d{1,3})?/,Ke=/\d{1,2}/,Qe=/\d/,Ze=/\d\d/,Je=/\d{3}/,tn=/\d{4}/,en=/[+-]?\d{6}/,nn=/[+-]?\d+/,rn=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,on="YYYY-MM-DDTHH:mm:ssZ",sn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],an=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],un=/([\+\-]|\d\d)/gi,cn=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),ln={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},pn={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},dn={},hn={s:45,m:45,h:22,d:26,M:11},fn="DDD w W M D d".split(" "),mn="M D H h m s w W".split(" "),_n={M:function(){return this.month()+1},MMM:function(t){return this.localeData().monthsShort(this,t)},MMMM:function(t){return this.localeData().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.localeData().weekdaysMin(this,t)},ddd:function(t){return this.localeData().weekdaysShort(this,t)},dddd:function(t){return this.localeData().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return m(this.year()%100,2)},YYYY:function(){return m(this.year(),4)},YYYYY:function(){return m(this.year(),5)},YYYYYY:function(){var t=this.year(),e=t>=0?"+":"-";return e+m(Math.abs(t),6)},gg:function(){return m(this.weekYear()%100,2)},gggg:function(){return m(this.weekYear(),4)},ggggg:function(){return m(this.weekYear(),5)},GG:function(){return m(this.isoWeekYear()%100,2)},GGGG:function(){return m(this.isoWeekYear(),4)},GGGGG:function(){return m(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return P(this.milliseconds()/100)},SS:function(){return m(P(this.milliseconds()/10),2)},SSS:function(){return m(this.milliseconds(),3)},SSSS:function(){return m(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+m(P(t/60),2)+":"+m(P(t)%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+m(P(t/60),2)+m(P(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},gn={},vn=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];fn.length;)Ee=fn.pop(),_n[Ee+"o"]=u(_n[Ee],Ee);for(;mn.length;)Ee=mn.pop(),_n[Ee+Ee]=a(_n[Ee],2);_n.DDDD=a(_n.DDD,3),d(c.prototype,{set:function(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,n,r;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(n=ye.utc([2e3,e]),r="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[e]=new RegExp(r.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,n,r;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(n=ye([2e3,1]).day(e),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var n=this._calendar[t];return"function"==typeof n?n.apply(e):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,n,r){var i=this._relativeTime[n];return"function"==typeof i?i(t,e,n,r):i.replace(/%d/i,t)},pastFuture:function(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return ae(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),ye=function(e,n,i,o){var s;return"boolean"==typeof i&&(o=i,i=t),s={},s._isAMomentObject=!0,s._i=e,s._f=n,s._l=i,s._strict=o,s._isUTC=!1,s._pf=r(),ce(s)},ye.suppressDeprecationWarnings=!1,ye.createFromInputFallback=o("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i)}),ye.min=function(){var t=[].slice.call(arguments,0);return le("isBefore",t)},ye.max=function(){var t=[].slice.call(arguments,0);return le("isAfter",t)},ye.utc=function(e,n,i,o){var s;return"boolean"==typeof i&&(o=i,i=t),s={},s._isAMomentObject=!0,s._useUTC=!0,s._isUTC=!0,s._l=i,s._i=e,s._f=n,s._strict=o,s._pf=r(),ce(s).utc()},ye.unix=function(t){return ye(1e3*t)},ye.duration=function(t,e){var r,i,o,s,a=t,u=null;return ye.isDuration(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(a={},e?a[e]=t:a.milliseconds=t):(u=xe.exec(t))?(r="-"===u[1]?-1:1,a={y:0,d:P(u[Se])*r,h:P(u[Ce])*r,m:P(u[ke])*r,s:P(u[Me])*r,ms:P(u[Ie])*r}):(u=Fe.exec(t))?(r="-"===u[1]?-1:1,o=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*r},a={y:o(u[2]),M:o(u[3]),d:o(u[4]),h:o(u[5]),m:o(u[6]),s:o(u[7]),w:o(u[8])}):"object"==typeof a&&("from"in a||"to"in a)&&(s=g(ye(a.from),ye(a.to)),a={},a.ms=s.milliseconds,a.M=s.months),i=new p(a),ye.isDuration(t)&&n(t,"_locale")&&(i._locale=t._locale),i},ye.version=be,ye.defaultFormat=on,ye.ISO_8601=function(){},ye.momentProperties=Le,ye.updateOffset=function(){},ye.relativeTimeThreshold=function(e,n){return hn[e]===t?!1:n===t?hn[e]:(hn[e]=n,!0)},ye.lang=o("moment.lang is deprecated. Use moment.locale instead.",function(t,e){return ye.locale(t,e)}),ye.locale=function(t,e){var n;return t&&(n="undefined"!=typeof e?ye.defineLocale(t,e):ye.localeData(t),n&&(ye.duration._locale=ye._locale=n)),ye._locale._abbr},ye.defineLocale=function(t,e){return null!==e?(e.abbr=t,De[t]||(De[t]=new c),De[t].set(e),ye.locale(t),De[t]):(delete De[t],null)},ye.langData=o("moment.langData is deprecated. Use moment.localeData instead.",function(t){return ye.localeData(t)}),ye.localeData=function(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return ye._locale;if(!w(t)){if(e=N(t))return e;t=[t]}return L(t)},ye.isMoment=function(t){return t instanceof l||null!=t&&n(t,"_isAMomentObject")},ye.isDuration=function(t){return t instanceof p};for(Ee=vn.length-1;Ee>=0;--Ee)A(vn[Ee]);ye.normalizeUnits=function(t){return T(t)},ye.invalid=function(t){var e=ye.utc(0/0);return null!=t?d(e._pf,t):e._pf.userInvalidated=!0,e},ye.parseZone=function(){return ye.apply(null,arguments).parseZone()},ye.parseTwoDigitYear=function(t){return P(t)+(P(t)>68?1900:2e3)},d(ye.fn=l.prototype,{clone:function(){return ye(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var t=ye(this).utc();return 0<t.year()&&t.year()<=9999?U(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):U(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return I(this)},isDSTShifted:function(){return this._a?this.isValid()&&b(this._a,(this._isUTC?ye.utc(this._a):ye(this._a)).toArray())>0:!1},parsingFlags:function(){return d({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(t){return this.zone(0,t)},local:function(t){return this._isUTC&&(this.zone(0,t),this._isUTC=!1,t&&this.add(this._dateTzOffset(),"m")),this},format:function(t){var e=U(this,t||ye.defaultFormat);return this.localeData().postformat(e)},add:v(1,"add"),subtract:v(-1,"subtract"),diff:function(t,e,n){var r,i,o,s=z(t,this),a=6e4*(this.zone()-s.zone());return e=T(e),"year"===e||"month"===e?(r=432e5*(this.daysInMonth()+s.daysInMonth()),i=12*(this.year()-s.year())+(this.month()-s.month()),o=this-ye(this).startOf("month")-(s-ye(s).startOf("month")),o-=6e4*(this.zone()-ye(this).startOf("month").zone()-(s.zone()-ye(s).startOf("month").zone())),i+=o/r,"year"===e&&(i/=12)):(r=this-s,i="second"===e?r/1e3:"minute"===e?r/6e4:"hour"===e?r/36e5:"day"===e?(r-a)/864e5:"week"===e?(r-a)/6048e5:r),n?i:f(i)},from:function(t,e){return ye.duration({to:this,from:t}).locale(this.locale()).humanize(!e)},fromNow:function(t){return this.from(ye(),t)},calendar:function(t){var e=t||ye(),n=z(e,this).startOf("day"),r=this.diff(n,"days",!0),i=-6>r?"sameElse":-1>r?"lastWeek":0>r?"lastDay":1>r?"sameDay":2>r?"nextDay":7>r?"nextWeek":"sameElse";return this.format(this.localeData().calendar(i,this))},isLeapYear:function(){return k(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=ie(t,this.localeData()),this.add(t-e,"d")):e},month:fe("Month",!0),startOf:function(t){switch(t=T(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=T(t),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},isAfter:function(t,e){return e=T("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=ye.isMoment(t)?t:ye(t),+this>+t):+this.clone().startOf(e)>+ye(t).startOf(e)},isBefore:function(t,e){return e=T("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=ye.isMoment(t)?t:ye(t),+t>+this):+this.clone().startOf(e)<+ye(t).startOf(e)},isSame:function(t,e){return e=T(e||"millisecond"),"millisecond"===e?(t=ye.isMoment(t)?t:ye(t),+this===+t):+this.clone().startOf(e)===+z(t,this).startOf(e)},min:o("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(t){return t=ye.apply(null,arguments),this>t?this:t}),max:o("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(t){return t=ye.apply(null,arguments),t>this?this:t}),zone:function(t,e){var n,r=this._offset||0;return null==t?this._isUTC?r:this._dateTzOffset():("string"==typeof t&&(t=Y(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&e&&(n=this._dateTzOffset()),this._offset=t,this._isUTC=!0,null!=n&&this.subtract(n,"m"),r!==t&&(!e||this._changeInProgress?y(this,ye.duration(r-t,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,ye.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?ye(t).zone():0,(this.zone()-t)%60===0},daysInMonth:function(){return O(this.year(),this.month())},dayOfYear:function(t){var e=Re((ye(this).startOf("day")-ye(this).startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},quarter:function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},weekYear:function(t){var e=ae(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")},isoWeekYear:function(t){var e=ae(this,1,4).year;return null==t?e:this.add(t-e,"y")},week:function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},isoWeek:function(t){var e=ae(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},weekday:function(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},isoWeeksInYear:function(){return S(this.year(),1,4)},weeksInYear:function(){var t=this.localeData()._week;return S(this.year(),t.dow,t.doy)},get:function(t){return t=T(t),this[t]()},set:function(t,e){return t=T(t),"function"==typeof this[t]&&this[t](e),this},locale:function(e){var n;return e===t?this._locale._abbr:(n=ye.localeData(e),null!=n&&(this._locale=n),this)},lang:o("moment().lang() is deprecated. Use moment().localeData() instead.",function(e){return e===t?this.localeData():this.locale(e)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),ye.fn.millisecond=ye.fn.milliseconds=fe("Milliseconds",!1),ye.fn.second=ye.fn.seconds=fe("Seconds",!1),ye.fn.minute=ye.fn.minutes=fe("Minutes",!1),ye.fn.hour=ye.fn.hours=fe("Hours",!0),ye.fn.date=fe("Date",!0),ye.fn.dates=o("dates accessor is deprecated. Use date instead.",fe("Date",!0)),ye.fn.year=fe("FullYear",!0),ye.fn.years=o("years accessor is deprecated. Use year instead.",fe("FullYear",!0)),ye.fn.days=ye.fn.day,ye.fn.months=ye.fn.month,ye.fn.weeks=ye.fn.week,ye.fn.isoWeeks=ye.fn.isoWeek,ye.fn.quarters=ye.fn.quarter,ye.fn.toJSON=ye.fn.toISOString,d(ye.duration.fn=p.prototype,{_bubble:function(){var t,e,n,r=this._milliseconds,i=this._days,o=this._months,s=this._data,a=0;s.milliseconds=r%1e3,t=f(r/1e3),s.seconds=t%60,e=f(t/60),s.minutes=e%60,n=f(e/60),s.hours=n%24,i+=f(n/24),a=f(me(i)),i-=f(_e(a)),o+=f(i/30),i%=30,a+=f(o/12),o%=12,s.days=i,s.months=o,s.years=a},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return f(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*P(this._months/12)},humanize:function(t){var e=se(this,!t,this.localeData());return t&&(e=this.localeData().pastFuture(+this,e)),this.localeData().postformat(e)},add:function(t,e){var n=ye.duration(t,e);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(t,e){var n=ye.duration(t,e);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(t){return t=T(t),this[t.toLowerCase()+"s"]()},as:function(t){var e,n;if(t=T(t),"month"===t||"year"===t)return e=this._days+this._milliseconds/864e5,n=this._months+12*me(e),"month"===t?n:n/12;switch(e=this._days+_e(this._months/12),t){case"week":return e/7+this._milliseconds/6048e5;case"day":return e+this._milliseconds/864e5;case"hour":return 24*e+this._milliseconds/36e5;case"minute":return 24*e*60+this._milliseconds/6e4;case"second":return 24*e*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*e*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+t)}},lang:ye.fn.lang,locale:ye.fn.locale,toIsoString:o("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),n=Math.abs(this.days()),r=Math.abs(this.hours()),i=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(n?n+"D":"")+(r||i||o?"T":"")+(r?r+"H":"")+(i?i+"M":"")+(o?o+"S":""):"P0D"},localeData:function(){return this._locale}}),ye.duration.fn.toString=ye.duration.fn.toISOString;for(Ee in cn)n(cn,Ee)&&ge(Ee.toLowerCase());ye.duration.fn.asMilliseconds=function(){return this.as("ms")},ye.duration.fn.asSeconds=function(){return this.as("s")},ye.duration.fn.asMinutes=function(){return this.as("m")},ye.duration.fn.asHours=function(){return this.as("h")},ye.duration.fn.asDays=function(){return this.as("d")},ye.duration.fn.asWeeks=function(){return this.as("weeks")},ye.duration.fn.asMonths=function(){return this.as("M")},ye.duration.fn.asYears=function(){return this.as("y")},ye.locale("en",{ordinal:function(t){var e=t%10,n=1===P(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),Ne?module.exports=ye:"function"==typeof define&&define.amd?(define("moment",["require","exports","module"],function(t,e,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(Te.moment=we),ye}),ve(!0)):ve()}.call(this),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");
if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var r=t(this),i=r.data("bs.button"),o="object"==typeof e&&e;i||r.data("bs.button",i=new n(this,o)),"toggle"==e?i.toggle():e&&i.setState(e)})}var n=function(e,r){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,r),this.isLoading=!1};n.VERSION="3.3.2",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(e){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",o=r.data();e+="Text",null==o.resetText&&r.data("resetText",r[i]()),setTimeout(t.proxy(function(){r[i](null==o[e]?this.options[e]:o[e]),"loadingText"==e?(this.isLoading=!0,r.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};var r=t.fn.button;t.fn.button=e,t.fn.button.Constructor=n,t.fn.button.noConflict=function(){return t.fn.button=r,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var r=t(n.target);r.hasClass("btn")||(r=r.closest(".btn")),e.call(r,"toggle"),n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){e&&3===e.which||(t(i).remove(),t(o).each(function(){var r=t(this),i=n(r),o={relatedTarget:this};i.hasClass("open")&&(i.trigger(e=t.Event("hide.bs.dropdown",o)),e.isDefaultPrevented()||(r.attr("aria-expanded","false"),i.removeClass("open").trigger("hidden.bs.dropdown",o)))}))}function n(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&t(n);return r&&r.length?r:e.parent()}function r(e){return this.each(function(){var n=t(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new s(this)),"string"==typeof e&&r[e].call(n)})}var i=".dropdown-backdrop",o='[data-toggle="dropdown"]',s=function(e){t(e).on("click.bs.dropdown",this.toggle)};s.VERSION="3.3.2",s.prototype.toggle=function(r){var i=t(this);if(!i.is(".disabled, :disabled")){var o=n(i),s=o.hasClass("open");if(e(),!s){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var a={relatedTarget:this};if(o.trigger(r=t.Event("show.bs.dropdown",a)),r.isDefaultPrevented())return;i.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger("shown.bs.dropdown",a)}return!1}},s.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var r=t(this);if(e.preventDefault(),e.stopPropagation(),!r.is(".disabled, :disabled")){var i=n(r),s=i.hasClass("open");if(!s&&27!=e.which||s&&27==e.which)return 27==e.which&&i.find(o).trigger("focus"),r.trigger("click");var a=" li:not(.divider):visible a",u=i.find('[role="menu"]'+a+', [role="listbox"]'+a);if(u.length){var c=u.index(e.target);38==e.which&&c>0&&c--,40==e.which&&c<u.length-1&&c++,~c||(c=0),u.eq(c).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=r,t.fn.dropdown.Constructor=s,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",o,s.prototype.toggle).on("keydown.bs.dropdown.data-api",o,s.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',s.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',s.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,r){return this.each(function(){var i=t(this),o=i.data("bs.modal"),s=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);o||i.data("bs.modal",o=new n(this,s)),"string"==typeof e?o[e](r):s.show&&o.show(r)})}var n=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.2",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var r=this,i=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var i=t.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.options.backdrop&&r.adjustBackdrop(),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in").attr("aria-hidden",!1),r.enforceFocus();var o=t.Event("shown.bs.modal",{relatedTarget:e});i?r.$element.find(".modal-dialog").one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(n.TRANSITION_DURATION):r.$element.trigger("focus").trigger(o)}))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=t.support.transition&&i;if(this.$backdrop=t('<div class="modal-backdrop '+i+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;o?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){r.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):s()}else e&&e()},n.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog()},n.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)},n.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},n.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var r=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=r,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var r=t(this),i=r.attr("href"),o=t(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),s=o.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},o.data(),r.data());r.is("a")&&n.preventDefault(),o.one("show.bs.modal",function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),e.call(o,s,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var r=t(this),i=r.data("bs.tooltip"),o="object"==typeof e&&e;(i||"destroy"!=e)&&(i||r.data("bs.tooltip",i=new n(this,o)),"string"==typeof e&&i[e]())})}var n=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};n.VERSION="3.3.2",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,n,r){this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var i=this.options.trigger.split(" "),o=i.length;o--;){var s=i[o];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",u="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(u+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,r){n[t]!=r&&(e[t]=r)}),e},n.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n&&n.$tip&&n.$tip.is(":visible")?void(n.hoverState="in"):(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var r=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!r)return;var i=this,o=this.tip(),s=this.getUID(this.type);this.setContent(),o.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&o.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,u=/\s?auto?\s?/i,c=u.test(a);c&&(a=a.replace(u,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element);var l=this.getPosition(),p=o[0].offsetWidth,d=o[0].offsetHeight;if(c){var h=a,f=this.options.container?t(this.options.container):this.$element.parent(),m=this.getPosition(f);a="bottom"==a&&l.bottom+d>m.bottom?"top":"top"==a&&l.top-d<m.top?"bottom":"right"==a&&l.right+p>m.width?"left":"left"==a&&l.left-p<m.left?"right":a,o.removeClass(h).addClass(a)}var _=this.getCalculatedOffset(a,l,p,d);this.applyPlacement(_,a);var g=function(){var t=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==t&&i.leave(i)};t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",g).emulateTransitionEnd(n.TRANSITION_DURATION):g()}},n.prototype.applyPlacement=function(e,n){var r=this.tip(),i=r[0].offsetWidth,o=r[0].offsetHeight,s=parseInt(r.css("margin-top"),10),a=parseInt(r.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),e.top=e.top+s,e.left=e.left+a,t.offset.setOffset(r[0],t.extend({using:function(t){r.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),r.addClass("in");var u=r[0].offsetWidth,c=r[0].offsetHeight;"top"==n&&c!=o&&(e.top=e.top+o-c);var l=this.getViewportAdjustedDelta(n,e,u,c);l.left?e.left+=l.left:e.top+=l.top;var p=/top|bottom/.test(n),d=p?2*l.left-i+u:2*l.top-o+c,h=p?"offsetWidth":"offsetHeight";r.offset(e),this.replaceArrow(d,r[0][h],p)},n.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},n.prototype.hide=function(e){function r(){"in"!=i.hoverState&&o.detach(),i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),e&&e()}var i=this,o=this.tip(),s=t.Event("hide.bs."+this.type);return this.$element.trigger(s),s.isDefaultPrevented()?void 0:(o.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(e){e=e||this.$element;var n=e[0],r="BODY"==n.tagName,i=n.getBoundingClientRect();null==i.width&&(i=t.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var o=r?{top:0,left:0}:e.offset(),s={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},a=r?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},i,s,a,o)},n.prototype.getCalculatedOffset=function(t,e,n,r){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-r,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-r/2,left:e.left-n}:{top:e.top+e.height/2-r/2,left:e.left+e.width}},n.prototype.getViewportAdjustedDelta=function(t,e,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var o=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-o-s.scroll,u=e.top+o-s.scroll+r;a<s.top?i.top=s.top-a:u>s.top+s.height&&(i.top=s.top+s.height-u)}else{var c=e.left-o,l=e.left+o+n;c<s.left?i.left=s.left-c:l>s.width&&(i.left=s.left+s.width-l)}return i},n.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},n.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},n.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var n=this;e&&(n=t(e.currentTarget).data("bs."+this.type),n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var r=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=n,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=r,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var r=t(this),i=r.data("bs.popover"),o="object"==typeof e&&e;(i||"destroy"!=e)&&(i||r.data("bs.popover",i=new n(this,o)),"string"==typeof e&&i[e]())})}var n=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.2",n.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},n.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var r=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=n,t.fn.popover.noConflict=function(){return t.fn.popover=r,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var r=t(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new n(this)),"string"==typeof e&&i[e]()})}var n=function(e){this.element=t(e)};n.VERSION="3.3.2",n.TRANSITION_DURATION=150,n.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),r=e.data("target");if(r||(r=e.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var i=n.find(".active:last a"),o=t.Event("hide.bs.tab",{relatedTarget:e[0]}),s=t.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(o),e.trigger(s),!s.isDefaultPrevented()&&!o.isDefaultPrevented()){var a=t(r);this.activate(e.closest("li"),n),this.activate(a,a.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},n.prototype.activate=function(e,r,i){function o(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}var s=r.find("> .active"),a=i&&t.support.transition&&(s.length&&s.hasClass("fade")||!!r.find("> .fade").length);s.length&&a?s.one("bsTransitionEnd",o).emulateTransitionEnd(n.TRANSITION_DURATION):o(),s.removeClass("in")};var r=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=n,t.fn.tab.noConflict=function(){return t.fn.tab=r,this};var i=function(n){n.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),+function(t){"use strict";function e(e){var n,r=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(r)}function n(e){return this.each(function(){var n=t(this),i=n.data("bs.collapse"),o=t.extend({},r.DEFAULTS,n.data(),"object"==typeof e&&e);!i&&o.toggle&&"show"==e&&(o.toggle=!1),i||n.data("bs.collapse",i=new r(this,o)),"string"==typeof e&&i[e]()})}var r=function(e,n){this.$element=t(e),this.options=t.extend({},r.DEFAULTS,n),this.$trigger=t(this.options.trigger).filter('[href="#'+e.id+'"], [data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};r.VERSION="3.3.2",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},r.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(i&&i.length&&(e=i.data("bs.collapse"),e&&e.transitioning))){var o=t.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){i&&i.length&&(n.call(i,"hide"),e||i.data("bs.collapse",null));var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var u=t.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[s](this.$element[0][u])}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[n](0).one("bsTransitionEnd",t.proxy(i,this)).emulateTransitionEnd(r.TRANSITION_DURATION):i.call(this)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(n,r){var i=t(r);this.addAriaAndCollapsedClass(e(i),i)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=t.fn.collapse;t.fn.collapse=n,t.fn.collapse.Constructor=r,t.fn.collapse.noConflict=function(){return t.fn.collapse=i,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(r){var i=t(this);i.attr("data-target")||r.preventDefault();var o=e(i),s=o.data("bs.collapse"),a=s?"toggle":t.extend({},i.data(),{trigger:this});n.call(o,a)})}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}t.fn.emulateTransitionEnd=function(e){var n=!1,r=this;t(this).one("bsTransitionEnd",function(){n=!0});var i=function(){n||t(r).trigger(t.support.transition.end)};return setTimeout(i,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),define("bootstrap",function(){}),function(t){"undefined"==typeof t.fn.each2&&t.extend(t.fn,{each2:function(e){for(var n=t([0]),r=-1,i=this.length;++r<i&&(n.context=n[0]=this[r])&&e.call(n[0],r,n)!==!1;);return this}})}(jQuery),function(t,e){"use strict";function n(e){var n=t(document.createTextNode(""));e.before(n),n.before(e),n.remove()}function r(t){function e(t){return G[t]||t}return t.replace(/[^\u0000-\u007E]/g,e)}function i(t,e){for(var n=0,r=e.length;r>n;n+=1)if(s(t,e[n]))return n;return-1}function o(){var e=t(U);e.appendTo(document.body);var n={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),n}function s(t,n){return t===n?!0:t===e||n===e?!1:null===t||null===n?!1:t.constructor===String?t+""==n+"":n.constructor===String?n+""==t+"":!1}function a(t,e,n){var r,i,o;if(null===t||t.length<1)return[];for(r=t.split(e),i=0,o=r.length;o>i;i+=1)r[i]=n(r[i]);return r}function u(t){return t.outerWidth(!1)-t.width()}function c(n){var r="keyup-change-value";n.on("keydown",function(){t.data(n,r)===e&&t.data(n,r,n.val())}),n.on("keyup",function(){var i=t.data(n,r);i!==e&&n.val()!==i&&(t.removeData(n,r),n.trigger("keyup-change"))})}function l(n){n.on("mousemove",function(n){var r=x;(r===e||r.x!==n.pageX||r.y!==n.pageY)&&t(n.target).trigger("mousemove-filtered",n)})}function p(t,n,r){r=r||e;var i;return function(){var e=arguments;window.clearTimeout(i),i=window.setTimeout(function(){n.apply(r,e)},t)}}function d(t,e){var n=p(t,function(t){e.trigger("scroll-debounced",t)});e.on("scroll",function(t){i(t.target,e.get())>=0&&n(t)})}function h(t){t[0]!==document.activeElement&&window.setTimeout(function(){var e,n=t[0],r=t.val().length;t.focus();var i=n.offsetWidth>0||n.offsetHeight>0;i&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(r,r):n.createTextRange&&(e=n.createTextRange(),e.collapse(!1),e.select()))},0)}function f(e){e=t(e)[0];var n=0,r=0;if("selectionStart"in e)n=e.selectionStart,r=e.selectionEnd-n;else if("selection"in document){e.focus();var i=document.selection.createRange();r=document.selection.createRange().text.length,i.moveStart("character",-e.value.length),n=i.text.length-r}return{offset:n,length:r}}function m(t){t.preventDefault(),t.stopPropagation()}function _(t){t.preventDefault(),t.stopImmediatePropagation()}function g(e){if(!L){var n=e[0].currentStyle||window.getComputedStyle(e[0],null);L=t(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),L.attr("class","select2-sizer"),t(document.body).append(L)}return L.text(e.val()),L.width()}function v(e,n,r){var i,o,s=[];i=t.trim(e.attr("class")),i&&(i=""+i,t(i.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&s.push(this)})),i=t.trim(n.attr("class")),i&&(i=""+i,t(i.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(o=r(this),o&&s.push(o))})),e.attr("class",s.join(" "))}function y(t,e,n,i){var o=r(t.toUpperCase()).indexOf(r(e.toUpperCase())),s=e.length;return 0>o?void n.push(i(t)):(n.push(i(t.substring(0,o))),n.push("<span class='select2-match'>"),n.push(i(t.substring(o,o+s))),n.push("</span>"),void n.push(i(t.substring(o+s,t.length))))}function w(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t]})}function E(n){var r,i=null,o=n.quietMillis||100,s=n.url,a=this;return function(u){window.clearTimeout(r),r=window.setTimeout(function(){var r=n.data,o=s,c=n.transport||t.fn.select2.ajaxDefaults.transport,l={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||e,dataType:n.dataType||"json"},p=t.extend({},t.fn.select2.ajaxDefaults.params,l);r=r?r.call(a,u.term,u.page,u.context):null,o="function"==typeof o?o.call(a,u.term,u.page,u.context):o,i&&"function"==typeof i.abort&&i.abort(),n.params&&(t.isFunction(n.params)?t.extend(p,n.params.call(a)):t.extend(p,n.params)),t.extend(p,{url:o,dataType:n.dataType,data:r,success:function(t){var e=n.results(t,u.page,u);u.callback(e)},error:function(t,e,n){var r={hasError:!0,jqXHR:t,textStatus:e,errorThrown:n};u.callback(r)}}),i=c.call(a,p)},o)}}function b(e){var n,r,i=e,o=function(t){return""+t.text};t.isArray(i)&&(r=i,i={results:r}),t.isFunction(i)===!1&&(r=i,i=function(){return r});var s=i();return s.text&&(o=s.text,t.isFunction(o)||(n=s.text,o=function(t){return t[n]})),function(e){var n,r=e.term,s={results:[]};return""===r?void e.callback(i()):(n=function(i,s){var a,u;if(i=i[0],i.children){a={};for(u in i)i.hasOwnProperty(u)&&(a[u]=i[u]);a.children=[],t(i.children).each2(function(t,e){n(e,a.children)}),(a.children.length||e.matcher(r,o(a),i))&&s.push(a)}else e.matcher(r,o(i),i)&&s.push(i)},t(i().results).each2(function(t,e){n(e,s.results)}),void e.callback(s))}}function T(n){var r=t.isFunction(n);return function(i){var o=i.term,s={results:[]},a=r?n(i):n;t.isArray(a)&&(t(a).each(function(){var t=this.text!==e,n=t?this.text:this;(""===o||i.matcher(o,n))&&s.results.push(t?this:{id:this,text:this})}),i.callback(s))}}function R(e,n){if(t.isFunction(e))return!0;if(!e)return!1;if("string"==typeof e)return!0;throw new Error(n+" must be a string, function, or falsy value")}function A(e,n){if(t.isFunction(e)){var r=Array.prototype.slice.call(arguments,2);return e.apply(n,r)}return e}function P(e){var n=0;return t.each(e,function(t,e){e.children?n+=P(e.children):n++}),n}function O(t,n,r,i){var o,a,u,c,l,p=t,d=!1;if(!i.createSearchChoice||!i.tokenSeparators||i.tokenSeparators.length<1)return e;for(;;){for(a=-1,u=0,c=i.tokenSeparators.length;c>u&&(l=i.tokenSeparators[u],a=t.indexOf(l),!(a>=0));u++);if(0>a)break;if(o=t.substring(0,a),t=t.substring(a+l.length),o.length>0&&(o=i.createSearchChoice.call(this,o,n),o!==e&&null!==o&&i.id(o)!==e&&null!==i.id(o))){for(d=!1,u=0,c=n.length;c>u;u++)if(s(i.id(o),i.id(n[u]))){d=!0;break}d||r(o)}}return p!==t?t:void 0}function S(){var e=this;t.each(arguments,function(t,n){e[n].remove(),e[n]=null})}function C(e,n){var r=function(){};return r.prototype=new e,r.prototype.constructor=r,r.prototype.parent=e.prototype,r.prototype=t.extend(r.prototype,n),r}if(window.Select2===e){var k,M,I,D,L,N,z,x={x:0,y:0},F={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(t){switch(t=t.which?t.which:t){case F.LEFT:case F.RIGHT:case F.UP:case F.DOWN:return!0}return!1},isControl:function(t){var e=t.which;
switch(e){case F.SHIFT:case F.CTRL:case F.ALT:return!0}return t.metaKey?!0:!1},isFunctionKey:function(t){return t=t.which?t.which:t,t>=112&&123>=t}},U="<div class='select2-measure-scrollbar'></div>",G={"‚í∂":"A","Ôº°":"A","√Ä":"A","√Å":"A","√Ç":"A","·∫¶":"A","·∫§":"A","·∫™":"A","·∫®":"A","√É":"A","ƒÄ":"A","ƒÇ":"A","·∫∞":"A","·∫Æ":"A","·∫¥":"A","·∫≤":"A","»¶":"A","«†":"A","√Ñ":"A","«û":"A","·∫¢":"A","√Ö":"A","«∫":"A","«ç":"A","»Ä":"A","»Ç":"A","·∫†":"A","·∫¨":"A","·∫∂":"A","·∏Ä":"A","ƒÑ":"A","»∫":"A","‚±Ø":"A","Íú≤":"AA","√Ü":"AE","«º":"AE","«¢":"AE","Íú¥":"AO","Íú∂":"AU","Íú∏":"AV","Íú∫":"AV","Íúº":"AY","‚í∑":"B","Ôº¢":"B","·∏Ç":"B","·∏Ñ":"B","·∏Ü":"B","…É":"B","∆Ç":"B","∆Å":"B","‚í∏":"C","Ôº£":"C","ƒÜ":"C","ƒà":"C","ƒä":"C","ƒå":"C","√á":"C","·∏à":"C","∆á":"C","»ª":"C","Íúæ":"C","‚íπ":"D","Ôº§":"D","·∏ä":"D","ƒé":"D","·∏å":"D","·∏ê":"D","·∏í":"D","·∏é":"D","ƒê":"D","∆ã":"D","∆ä":"D","∆â":"D","Íùπ":"D","«±":"DZ","«Ñ":"DZ","«≤":"Dz","«Ö":"Dz","‚í∫":"E","Ôº•":"E","√à":"E","√â":"E","√ä":"E","·ªÄ":"E","·∫æ":"E","·ªÑ":"E","·ªÇ":"E","·∫º":"E","ƒí":"E","·∏î":"E","·∏ñ":"E","ƒî":"E","ƒñ":"E","√ã":"E","·∫∫":"E","ƒö":"E","»Ñ":"E","»Ü":"E","·∫∏":"E","·ªÜ":"E","»®":"E","·∏ú":"E","ƒò":"E","·∏ò":"E","·∏ö":"E","∆ê":"E","∆é":"E","‚íª":"F","Ôº¶":"F","·∏û":"F","∆ë":"F","Íùª":"F","‚íº":"G","Ôºß":"G","«¥":"G","ƒú":"G","·∏†":"G","ƒû":"G","ƒ†":"G","«¶":"G","ƒ¢":"G","«§":"G","∆ì":"G","Íû†":"G","ÍùΩ":"G","Íùæ":"G","‚íΩ":"H","Ôº®":"H","ƒ§":"H","·∏¢":"H","·∏¶":"H","»û":"H","·∏§":"H","·∏®":"H","·∏™":"H","ƒ¶":"H","‚±ß":"H","‚±µ":"H","Íûç":"H","‚íæ":"I","Ôº©":"I","√å":"I","√ç":"I","√é":"I","ƒ®":"I","ƒ™":"I","ƒ¨":"I","ƒ∞":"I","√è":"I","·∏Æ":"I","·ªà":"I","«è":"I","»à":"I","»ä":"I","·ªä":"I","ƒÆ":"I","·∏¨":"I","∆ó":"I","‚íø":"J","Ôº™":"J","ƒ¥":"J","…à":"J","‚ìÄ":"K","Ôº´":"K","·∏∞":"K","«®":"K","·∏≤":"K","ƒ∂":"K","·∏¥":"K","∆ò":"K","‚±©":"K","ÍùÄ":"K","ÍùÇ":"K","ÍùÑ":"K","Íû¢":"K","‚ìÅ":"L","Ôº¨":"L","ƒø":"L","ƒπ":"L","ƒΩ":"L","·∏∂":"L","·∏∏":"L","ƒª":"L","·∏º":"L","·∏∫":"L","≈Å":"L","»Ω":"L","‚±¢":"L","‚±†":"L","Íùà":"L","ÍùÜ":"L","ÍûÄ":"L","«á":"LJ","«à":"Lj","‚ìÇ":"M","Ôº≠":"M","·∏æ":"M","·πÄ":"M","·πÇ":"M","‚±Æ":"M","∆ú":"M","‚ìÉ":"N","ÔºÆ":"N","«∏":"N","≈É":"N","√ë":"N","·πÑ":"N","≈á":"N","·πÜ":"N","≈Ö":"N","·πä":"N","·πà":"N","»†":"N","∆ù":"N","Íûê":"N","Íû§":"N","«ä":"NJ","«ã":"Nj","‚ìÑ":"O","ÔºØ":"O","√í":"O","√ì":"O","√î":"O","·ªí":"O","·ªê":"O","·ªñ":"O","·ªî":"O","√ï":"O","·πå":"O","»¨":"O","·πé":"O","≈å":"O","·πê":"O","·πí":"O","≈é":"O","»Æ":"O","»∞":"O","√ñ":"O","»™":"O","·ªé":"O","≈ê":"O","«ë":"O","»å":"O","»é":"O","∆†":"O","·ªú":"O","·ªö":"O","·ª†":"O","·ªû":"O","·ª¢":"O","·ªå":"O","·ªò":"O","«™":"O","«¨":"O","√ò":"O","«æ":"O","∆Ü":"O","∆ü":"O","Íùä":"O","Íùå":"O","∆¢":"OI","Íùé":"OO","»¢":"OU","‚ìÖ":"P","Ôº∞":"P","·πî":"P","·πñ":"P","∆§":"P","‚±£":"P","Íùê":"P","Íùí":"P","Íùî":"P","‚ìÜ":"Q","Ôº±":"Q","Íùñ":"Q","Íùò":"Q","…ä":"Q","‚ìá":"R","Ôº≤":"R","≈î":"R","·πò":"R","≈ò":"R","»ê":"R","»í":"R","·πö":"R","·πú":"R","≈ñ":"R","·πû":"R","…å":"R","‚±§":"R","Íùö":"R","Íû¶":"R","ÍûÇ":"R","‚ìà":"S","Ôº≥":"S","·∫û":"S","≈ö":"S","·π§":"S","≈ú":"S","·π†":"S","≈†":"S","·π¶":"S","·π¢":"S","·π®":"S","»ò":"S","≈û":"S","‚±æ":"S","Íû®":"S","ÍûÑ":"S","‚ìâ":"T","Ôº¥":"T","·π™":"T","≈§":"T","·π¨":"T","»ö":"T","≈¢":"T","·π∞":"T","·πÆ":"T","≈¶":"T","∆¨":"T","∆Æ":"T","»æ":"T","ÍûÜ":"T","Íú®":"TZ","‚ìä":"U","Ôºµ":"U","√ô":"U","√ö":"U","√õ":"U","≈®":"U","·π∏":"U","≈™":"U","·π∫":"U","≈¨":"U","√ú":"U","«õ":"U","«ó":"U","«ï":"U","«ô":"U","·ª¶":"U","≈Æ":"U","≈∞":"U","«ì":"U","»î":"U","»ñ":"U","∆Ø":"U","·ª™":"U","·ª®":"U","·ªÆ":"U","·ª¨":"U","·ª∞":"U","·ª§":"U","·π≤":"U","≈≤":"U","·π∂":"U","·π¥":"U","…Ñ":"U","‚ìã":"V","Ôº∂":"V","·πº":"V","·πæ":"V","∆≤":"V","Íùû":"V","…Ö":"V","Íù†":"VY","‚ìå":"W","Ôº∑":"W","·∫Ä":"W","·∫Ç":"W","≈¥":"W","·∫Ü":"W","·∫Ñ":"W","·∫à":"W","‚±≤":"W","‚ìç":"X","Ôº∏":"X","·∫ä":"X","·∫å":"X","‚ìé":"Y","Ôºπ":"Y","·ª≤":"Y","√ù":"Y","≈∂":"Y","·ª∏":"Y","»≤":"Y","·∫é":"Y","≈∏":"Y","·ª∂":"Y","·ª¥":"Y","∆≥":"Y","…é":"Y","·ªæ":"Y","‚ìè":"Z","Ôº∫":"Z","≈π":"Z","·∫ê":"Z","≈ª":"Z","≈Ω":"Z","·∫í":"Z","·∫î":"Z","∆µ":"Z","»§":"Z","‚±ø":"Z","‚±´":"Z","Íù¢":"Z","‚ìê":"a","ÔΩÅ":"a","·∫ö":"a","√†":"a","√°":"a","√¢":"a","·∫ß":"a","·∫•":"a","·∫´":"a","·∫©":"a","√£":"a","ƒÅ":"a","ƒÉ":"a","·∫±":"a","·∫Ø":"a","·∫µ":"a","·∫≥":"a","»ß":"a","«°":"a","√§":"a","«ü":"a","·∫£":"a","√•":"a","«ª":"a","«é":"a","»Å":"a","»É":"a","·∫°":"a","·∫≠":"a","·∫∑":"a","·∏Å":"a","ƒÖ":"a","‚±•":"a","…ê":"a","Íú≥":"aa","√¶":"ae","«Ω":"ae","«£":"ae","Íúµ":"ao","Íú∑":"au","Íúπ":"av","Íúª":"av","ÍúΩ":"ay","‚ìë":"b","ÔΩÇ":"b","·∏É":"b","·∏Ö":"b","·∏á":"b","∆Ä":"b","∆É":"b","…ì":"b","‚ìí":"c","ÔΩÉ":"c","ƒá":"c","ƒâ":"c","ƒã":"c","ƒç":"c","√ß":"c","·∏â":"c","∆à":"c","»º":"c","Íúø":"c","‚ÜÑ":"c","‚ìì":"d","ÔΩÑ":"d","·∏ã":"d","ƒè":"d","·∏ç":"d","·∏ë":"d","·∏ì":"d","·∏è":"d","ƒë":"d","∆å":"d","…ñ":"d","…ó":"d","Íù∫":"d","«≥":"dz","«Ü":"dz","‚ìî":"e","ÔΩÖ":"e","√®":"e","√©":"e","√™":"e","·ªÅ":"e","·∫ø":"e","·ªÖ":"e","·ªÉ":"e","·∫Ω":"e","ƒì":"e","·∏ï":"e","·∏ó":"e","ƒï":"e","ƒó":"e","√´":"e","·∫ª":"e","ƒõ":"e","»Ö":"e","»á":"e","·∫π":"e","·ªá":"e","»©":"e","·∏ù":"e","ƒô":"e","·∏ô":"e","·∏õ":"e","…á":"e","…õ":"e","«ù":"e","‚ìï":"f","ÔΩÜ":"f","·∏ü":"f","∆í":"f","Íùº":"f","‚ìñ":"g","ÔΩá":"g","«µ":"g","ƒù":"g","·∏°":"g","ƒü":"g","ƒ°":"g","«ß":"g","ƒ£":"g","«•":"g","…†":"g","Íû°":"g","·µπ":"g","Íùø":"g","‚ìó":"h","ÔΩà":"h","ƒ•":"h","·∏£":"h","·∏ß":"h","»ü":"h","·∏•":"h","·∏©":"h","·∏´":"h","·∫ñ":"h","ƒß":"h","‚±®":"h","‚±∂":"h","…•":"h","∆ï":"hv","‚ìò":"i","ÔΩâ":"i","√¨":"i","√≠":"i","√Æ":"i","ƒ©":"i","ƒ´":"i","ƒ≠":"i","√Ø":"i","·∏Ø":"i","·ªâ":"i","«ê":"i","»â":"i","»ã":"i","·ªã":"i","ƒØ":"i","·∏≠":"i","…®":"i","ƒ±":"i","‚ìô":"j","ÔΩä":"j","ƒµ":"j","«∞":"j","…â":"j","‚ìö":"k","ÔΩã":"k","·∏±":"k","«©":"k","·∏≥":"k","ƒ∑":"k","·∏µ":"k","∆ô":"k","‚±™":"k","ÍùÅ":"k","ÍùÉ":"k","ÍùÖ":"k","Íû£":"k","‚ìõ":"l","ÔΩå":"l","≈Ä":"l","ƒ∫":"l","ƒæ":"l","·∏∑":"l","·∏π":"l","ƒº":"l","·∏Ω":"l","·∏ª":"l","≈ø":"l","≈Ç":"l","∆ö":"l","…´":"l","‚±°":"l","Íùâ":"l","ÍûÅ":"l","Íùá":"l","«â":"lj","‚ìú":"m","ÔΩç":"m","·∏ø":"m","·πÅ":"m","·πÉ":"m","…±":"m","…Ø":"m","‚ìù":"n","ÔΩé":"n","«π":"n","≈Ñ":"n","√±":"n","·πÖ":"n","≈à":"n","·πá":"n","≈Ü":"n","·πã":"n","·πâ":"n","∆û":"n","…≤":"n","≈â":"n","Íûë":"n","Íû•":"n","«å":"nj","‚ìû":"o","ÔΩè":"o","√≤":"o","√≥":"o","√¥":"o","·ªì":"o","·ªë":"o","·ªó":"o","·ªï":"o","√µ":"o","·πç":"o","»≠":"o","·πè":"o","≈ç":"o","·πë":"o","·πì":"o","≈è":"o","»Ø":"o","»±":"o","√∂":"o","»´":"o","·ªè":"o","≈ë":"o","«í":"o","»ç":"o","»è":"o","∆°":"o","·ªù":"o","·ªõ":"o","·ª°":"o","·ªü":"o","·ª£":"o","·ªç":"o","·ªô":"o","«´":"o","«≠":"o","√∏":"o","«ø":"o","…î":"o","Íùã":"o","Íùç":"o","…µ":"o","∆£":"oi","»£":"ou","Íùè":"oo","‚ìü":"p","ÔΩê":"p","·πï":"p","·πó":"p","∆•":"p","·µΩ":"p","Íùë":"p","Íùì":"p","Íùï":"p","‚ì†":"q","ÔΩë":"q","…ã":"q","Íùó":"q","Íùô":"q","‚ì°":"r","ÔΩí":"r","≈ï":"r","·πô":"r","≈ô":"r","»ë":"r","»ì":"r","·πõ":"r","·πù":"r","≈ó":"r","·πü":"r","…ç":"r","…Ω":"r","Íùõ":"r","Íûß":"r","ÍûÉ":"r","‚ì¢":"s","ÔΩì":"s","√ü":"s","≈õ":"s","·π•":"s","≈ù":"s","·π°":"s","≈°":"s","·πß":"s","·π£":"s","·π©":"s","»ô":"s","≈ü":"s","»ø":"s","Íû©":"s","ÍûÖ":"s","·∫õ":"s","‚ì£":"t","ÔΩî":"t","·π´":"t","·∫ó":"t","≈•":"t","·π≠":"t","»õ":"t","≈£":"t","·π±":"t","·πØ":"t","≈ß":"t","∆≠":"t"," à":"t","‚±¶":"t","Íûá":"t","Íú©":"tz","‚ì§":"u","ÔΩï":"u","√π":"u","√∫":"u","√ª":"u","≈©":"u","·ππ":"u","≈´":"u","·πª":"u","≈≠":"u","√º":"u","«ú":"u","«ò":"u","«ñ":"u","«ö":"u","·ªß":"u","≈Ø":"u","≈±":"u","«î":"u","»ï":"u","»ó":"u","∆∞":"u","·ª´":"u","·ª©":"u","·ªØ":"u","·ª≠":"u","·ª±":"u","·ª•":"u","·π≥":"u","≈≥":"u","·π∑":"u","·πµ":"u"," â":"u","‚ì•":"v","ÔΩñ":"v","·πΩ":"v","·πø":"v"," ã":"v","Íùü":"v"," å":"v","Íù°":"vy","‚ì¶":"w","ÔΩó":"w","·∫Å":"w","·∫É":"w","≈µ":"w","·∫á":"w","·∫Ö":"w","·∫ò":"w","·∫â":"w","‚±≥":"w","‚ìß":"x","ÔΩò":"x","·∫ã":"x","·∫ç":"x","‚ì®":"y","ÔΩô":"y","·ª≥":"y","√Ω":"y","≈∑":"y","·ªπ":"y","»≥":"y","·∫è":"y","√ø":"y","·ª∑":"y","·∫ô":"y","·ªµ":"y","∆¥":"y","…è":"y","·ªø":"y","‚ì©":"z","ÔΩö":"z","≈∫":"z","·∫ë":"z","≈º":"z","≈æ":"z","·∫ì":"z","·∫ï":"z","∆∂":"z","»•":"z","…Ä":"z","‚±¨":"z","Íù£":"z","ŒÜ":"Œë","Œà":"Œï","Œâ":"Œó","Œä":"Œô","Œ™":"Œô","Œå":"Œü","Œé":"Œ•","Œ´":"Œ•","Œè":"Œ©","Œ¨":"Œ±","Œ≠":"Œµ","ŒÆ":"Œ∑","ŒØ":"Œπ","œä":"Œπ","Œê":"Œπ","œå":"Œø","œç":"œÖ","œã":"œÖ","Œ∞":"œÖ","œâ":"œâ","œÇ":"œÉ"};N=t(document),D=function(){var t=1;return function(){return t++}}(),k=C(Object,{bind:function(t){var e=this;return function(){t.apply(e,arguments)}},init:function(n){var r,i,s=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==e&&null!==n.element.data("select2")&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=t(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+D()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",n.element.attr("title")),this.body=t(document.body),v(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(A(n.containerCss,this.opts.element)),this.container.addClass(A(n.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",m),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),v(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(A(n.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",m),this.results=r=this.container.find(s),this.search=i=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",m),l(this.results),this.dropdown.on("mousemove-filtered",s,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",s,this.bind(function(t){this._touchEvent=!0,this.highlightUnderEvent(t)})),this.dropdown.on("touchmove",s,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",s,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),d(80,this.results),this.dropdown.on("scroll-debounced",s,this.bind(this.loadMoreIfNeeded)),t(this.container).on("change",".select2-input",function(t){t.stopPropagation()}),t(this.dropdown).on("change",".select2-input",function(t){t.stopPropagation()}),t.fn.mousewheel&&r.mousewheel(function(t,e,n,i){var o=r.scrollTop();i>0&&0>=o-i?(r.scrollTop(0),m(t)):0>i&&r.get(0).scrollHeight-r.scrollTop()+i<=r.height()&&(r.scrollTop(r.get(0).scrollHeight-r.height()),m(t))}),c(i),i.on("keyup-change input paste",this.bind(this.updateResults)),i.on("focus",function(){i.addClass("select2-focused")}),i.on("blur",function(){i.removeClass("select2-focused")}),this.dropdown.on("mouseup",s,this.bind(function(e){t(e.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(e),this.selectHighlighted(e))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(t){t.stopPropagation()}),this.nextSearchTerm=e,t.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var a=n.element.prop("disabled");a===e&&(a=!1),this.enable(!a);var u=n.element.prop("readonly");u===e&&(u=!1),this.readonly(u),z=z||o(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",n.searchInputPlaceholder)},destroy:function(){var t=this.opts.element,n=t.data("select2"),r=this;this.close(),t.length&&t[0].detachEvent&&r._sync&&t.each(function(){r._sync&&this.detachEvent("onpropertychange",r._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,n!==e&&(n.container.remove(),n.liveRegion.remove(),n.dropdown.remove(),t.show().removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?t.attr({tabindex:this.elementTabIndex}):t.removeAttr("tabindex"),t.css("display","")),S.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(t){return t.is("option")?{id:t.prop("value"),text:t.text(),element:t.get(),css:t.attr("class"),disabled:t.prop("disabled"),locked:s(t.attr("locked"),"locked")||s(t.data("locked"),!0)}:t.is("optgroup")?{text:t.attr("label"),children:[],element:t.get(),css:t.attr("class")}:void 0},prepareOpts:function(n){var r,i,o,u,c=this;if(r=n.element,"select"===r.get(0).tagName.toLowerCase()&&(this.select=i=n.element),i&&t.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n=t.extend({},{populateResults:function(r,i,o){var s,a=this.opts.id,u=this.liveRegion;(s=function(r,i,l){var p,d,h,f,m,_,g,v,y,w;r=n.sortResults(r,i,o);var E=[];for(p=0,d=r.length;d>p;p+=1)h=r[p],m=h.disabled===!0,f=!m&&a(h)!==e,_=h.children&&h.children.length>0,g=t("<li></li>"),g.addClass("select2-results-dept-"+l),g.addClass("select2-result"),g.addClass(f?"select2-result-selectable":"select2-result-unselectable"),m&&g.addClass("select2-disabled"),_&&g.addClass("select2-result-with-children"),g.addClass(c.opts.formatResultCssClass(h)),g.attr("role","presentation"),v=t(document.createElement("div")),v.addClass("select2-result-label"),v.attr("id","select2-result-label-"+D()),v.attr("role","option"),w=n.formatResult(h,v,o,c.opts.escapeMarkup),w!==e&&(v.html(w),g.append(v)),_&&(y=t("<ul></ul>"),y.addClass("select2-result-sub"),s(h.children,y,l+1),g.append(y)),g.data("select2-data",h),E.push(g[0]);i.append(E),u.text(n.formatMatches(r.length))})(i,r,0)}},t.fn.select2.defaults,n),"function"!=typeof n.id&&(o=n.id,n.id=function(t){return t[o]}),t.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(i?(n.query=this.bind(function(t){var n,i,o,s={results:[],more:!1},a=t.term;o=function(e,n){var r;e.is("option")?t.matcher(a,e.text(),e)&&n.push(c.optionToData(e)):e.is("optgroup")&&(r=c.optionToData(e),e.children().each2(function(t,e){o(e,r.children)}),r.children.length>0&&n.push(r))},n=r.children(),this.getPlaceholder()!==e&&n.length>0&&(i=this.getPlaceholderOption(),i&&(n=n.not(i))),n.each2(function(t,e){o(e,s.results)}),t.callback(s)}),n.id=function(t){return t.id}):"query"in n||("ajax"in n?(u=n.element.data("ajax-url"),u&&u.length>0&&(n.ajax.url=u),n.query=E.call(n.element,n.ajax)):"data"in n?n.query=b(n.data):"tags"in n&&(n.query=T(n.tags),n.createSearchChoice===e&&(n.createSearchChoice=function(e){return{id:t.trim(e),text:t.trim(e)}}),n.initSelection===e&&(n.initSelection=function(e,r){var i=[];t(a(e.val(),n.separator,n.transformVal)).each(function(){var e={id:this,text:this},r=n.tags;t.isFunction(r)&&(r=r()),t(r).each(function(){return s(this.id,e.id)?(e=this,!1):void 0}),i.push(e)}),r(i)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");if("top"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(t,e){t.unshift(e)};else if("bottom"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(t,e){t.push(e)};else if("function"!=typeof n.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return n},monitorSource:function(){var n,r=this.opts.element,i=this;r.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var t=r.prop("disabled");t===e&&(t=!1),this.enable(!t);var n=r.prop("readonly");n===e&&(n=!1),this.readonly(n),this.container&&(v(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(A(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(v(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(A(this.opts.dropdownCssClass,this.opts.element)))}),r.length&&r[0].attachEvent&&r.each(function(){this.attachEvent("onpropertychange",i._sync)}),n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,n!==e&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new n(function(e){t.each(e,i._sync)}),this.propertyObserver.observe(r.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(e){var n=t.Event("select2-selecting",{val:this.id(e),object:e,choice:e});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(e){e=e||{},e=t.extend({},e,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var t=this._enabled&&!this._readonly,e=!t;return t===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",e),this.close(),this.enabledInterface=t,!0)},enable:function(t){t===e&&(t=!0),this._enabled!==t&&(this._enabled=t,this.opts.element.prop("disabled",!t),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(t){t===e&&(t=!1),this._readonly!==t&&(this._readonly=t,this.opts.element.prop("readonly",t),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var e,n,r,i,o,s=this.dropdown,a=this.container,u=a.offset(),c=a.outerHeight(!1),l=a.outerWidth(!1),p=s.outerHeight(!1),d=t(window),h=d.width(),f=d.height(),m=d.scrollLeft()+h,_=d.scrollTop()+f,g=u.top+c,v=u.left,y=_>=g+p,w=u.top-p>=d.scrollTop(),E=s.outerWidth(!1),b=function(){return m>=v+E},T=function(){return u.left+m+a.outerWidth(!1)>E},R=s.hasClass("select2-drop-above");R?(n=!0,!w&&y&&(r=!0,n=!1)):(n=!1,!y&&w&&(r=!0,n=!0)),r&&(s.hide(),u=this.container.offset(),c=this.container.outerHeight(!1),l=this.container.outerWidth(!1),p=s.outerHeight(!1),m=d.scrollLeft()+h,_=d.scrollTop()+f,g=u.top+c,v=u.left,E=s.outerWidth(!1),s.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(o=t(".select2-results",s)[0],s.addClass("select2-drop-auto-width"),s.css("width",""),E=s.outerWidth(!1)+(o.scrollHeight===o.clientHeight?0:z.width),E>l?l=E:E=l,p=s.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(e=this.body.offset(),g-=e.top,v-=e.left),!b()&&T()&&(v=u.left+this.container.outerWidth(!1)-E),i={left:v,width:l},n?(i.top=u.top-p,i.bottom="auto",this.container.addClass("select2-drop-above"),s.addClass("select2-drop-above")):(i.top=g,i.bottom="auto",this.container.removeClass("select2-drop-above"),s.removeClass("select2-drop-above")),i=t.extend(i,A(this.opts.dropdownCss,this.opts.element)),s.css(i)},shouldOpen:function(){var e;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(e=t.Event("select2-opening"),this.opts.element.trigger(e),!e.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),N.on("mousemove.select2Event",function(t){x.x=t.pageX,x.y=t.pageY}),!0):!1},opening:function(){var e,r=this.containerEventName,i="scroll."+r,o="resize."+r,s="orientationchange."+r;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),e=t("#select2-drop-mask"),0===e.length&&(e=t(document.createElement("div")),e.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),e.hide(),e.appendTo(this.body),e.on("mousedown touchstart click",function(r){n(e);var i,o=t("#select2-drop");o.length>0&&(i=o.data("select2"),i.opts.selectOnBlur&&i.selectHighlighted({noFocus:!0}),i.close(),r.preventDefault(),r.stopPropagation())})),this.dropdown.prev()[0]!==e[0]&&this.dropdown.before(e),t("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),e.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var a=this;this.container.parents().add(window).each(function(){t(this).on(o+" "+i+" "+s,function(){a.opened()&&a.positionDropdown()})})},close:function(){if(this.opened()){var e=this.containerEventName,n="scroll."+e,r="resize."+e,i="orientationchange."+e;this.container.parents().add(window).each(function(){t(this).off(n).off(r).off(i)}),this.clearDropdownAlignmentPreference(),t("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),N.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(t.Event("select2-close"))}},externalSearch:function(t){this.open(),this.search.val(t),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return A(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var e,n,r,i,o,s,a,u,c=this.results;if(n=this.highlight(),!(0>n)){if(0==n)return void c.scrollTop(0);e=this.findHighlightableChoices().find(".select2-result-label"),r=t(e[n]),u=(r.offset()||{}).top||0,i=u+r.outerHeight(!0),n===e.length-1&&(a=c.find("li.select2-more-results"),a.length>0&&(i=a.offset().top+a.outerHeight(!0))),o=c.offset().top+c.outerHeight(!1),i>o&&c.scrollTop(c.scrollTop()+(i-o)),s=u-c.offset().top,0>s&&"none"!=r.css("display")&&c.scrollTop(c.scrollTop()+s)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(e){for(var n=this.findHighlightableChoices(),r=this.highlight();r>-1&&r<n.length;){r+=e;var i=t(n[r]);if(i.hasClass("select2-result-selectable")&&!i.hasClass("select2-disabled")&&!i.hasClass("select2-selected")){this.highlight(r);break}}},highlight:function(e){var n,r,o=this.findHighlightableChoices();return 0===arguments.length?i(o.filter(".select2-highlighted")[0],o.get()):(e>=o.length&&(e=o.length-1),0>e&&(e=0),this.removeHighlight(),n=t(o[e]),n.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",n.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(n.text()),r=n.data("select2-data"),void(r&&this.opts.element.trigger({type:"select2-highlight",val:this.id(r),choice:r})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(e){var n=t(e.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var r=this.findHighlightableChoices();this.highlight(r.index(n))}else 0==n.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var t,e=this.results,n=e.find("li.select2-more-results"),r=this.resultsPage+1,i=this,o=this.search.val(),s=this.context;0!==n.length&&(t=n.offset().top-e.offset().top-e.height(),t<=this.opts.loadMorePadding&&(n.addClass("select2-active"),this.opts.query({element:this.opts.element,term:o,page:r,context:s,matcher:this.opts.matcher,callback:this.bind(function(t){i.opened()&&(i.opts.populateResults.call(this,e,t.results,{term:o,page:r,context:s}),i.postprocessResults(t,!1,!1),t.more===!0?(n.detach().appendTo(e).html(i.opts.escapeMarkup(A(i.opts.formatLoadMore,i.opts.element,r+1))),window.setTimeout(function(){i.loadMoreIfNeeded()},10)):n.remove(),i.positionDropdown(),i.resultsPage=r,i.context=t.context,this.opts.element.trigger({type:"select2-loaded",items:t}))})})))},tokenize:function(){},updateResults:function(n){function r(){c.removeClass("select2-active"),d.positionDropdown(),d.liveRegion.text(l.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?l.text():d.opts.formatMatches(l.find('.select2-result-selectable:not(".select2-selected")').length))}function i(t){l.html(t),r()}var o,a,u,c=this.search,l=this.results,p=this.opts,d=this,h=c.val(),f=t.data(this.container,"select2-last-term");if((n===!0||!f||!s(h,f))&&(t.data(this.container,"select2-last-term",h),n===!0||this.showSearchInput!==!1&&this.opened())){u=++this.queryCount;var m=this.getMaximumSelectionSize();if(m>=1&&(o=this.data(),t.isArray(o)&&o.length>=m&&R(p.formatSelectionTooBig,"formatSelectionTooBig")))return void i("<li class='select2-selection-limit'>"+A(p.formatSelectionTooBig,p.element,m)+"</li>");if(c.val().length<p.minimumInputLength)return i(R(p.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+A(p.formatInputTooShort,p.element,c.val(),p.minimumInputLength)+"</li>":""),void(n&&this.showSearch&&this.showSearch(!0));if(p.maximumInputLength&&c.val().length>p.maximumInputLength)return void i(R(p.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+A(p.formatInputTooLong,p.element,c.val(),p.maximumInputLength)+"</li>":"");p.formatSearching&&0===this.findHighlightableChoices().length&&i("<li class='select2-searching'>"+A(p.formatSearching,p.element)+"</li>"),c.addClass("select2-active"),this.removeHighlight(),a=this.tokenize(),a!=e&&null!=a&&c.val(a),this.resultsPage=1,p.query({element:p.element,term:c.val(),page:this.resultsPage,context:null,matcher:p.matcher,callback:this.bind(function(o){var a;if(u==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(o.hasError!==e&&R(p.formatAjaxError,"formatAjaxError"))return void i("<li class='select2-ajax-error'>"+A(p.formatAjaxError,p.element,o.jqXHR,o.textStatus,o.errorThrown)+"</li>");if(this.context=o.context===e?null:o.context,this.opts.createSearchChoice&&""!==c.val()&&(a=this.opts.createSearchChoice.call(d,c.val(),o.results),a!==e&&null!==a&&d.id(a)!==e&&null!==d.id(a)&&0===t(o.results).filter(function(){return s(d.id(this),d.id(a))}).length&&this.opts.createSearchChoicePosition(o.results,a)),0===o.results.length&&R(p.formatNoMatches,"formatNoMatches"))return void i("<li class='select2-no-results'>"+A(p.formatNoMatches,p.element,c.val())+"</li>");l.empty(),d.opts.populateResults.call(this,l,o.results,{term:c.val(),page:this.resultsPage,context:null}),o.more===!0&&R(p.formatLoadMore,"formatLoadMore")&&(l.append("<li class='select2-more-results'>"+p.escapeMarkup(A(p.formatLoadMore,p.element,this.resultsPage))+"</li>"),window.setTimeout(function(){d.loadMoreIfNeeded()},10)),this.postprocessResults(o,n),r(),this.opts.element.trigger({type:"select2-loaded",items:o})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){h(this.search)},selectHighlighted:function(t){if(this._touchMoved)return void this.clearTouchMoved();var e=this.highlight(),n=this.results.find(".select2-highlighted"),r=n.closest(".select2-result").data("select2-data");r?(this.highlight(e),this.onSelect(r,t)):t&&t.noFocus&&this.close()},getPlaceholder:function(){var t;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((t=this.getPlaceholderOption())!==e?t.text():e)},getPlaceholderOption:function(){if(this.select){var n=this.select.children("option").first();if(this.opts.placeholderOption!==e)return"first"===this.opts.placeholderOption&&n||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===t.trim(n.text())&&""===n.val())return n}},initContainerWidth:function(){function n(){var n,r,i,o,s,a;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(n=this.opts.element.attr("style"),n!==e)for(r=n.split(";"),o=0,s=r.length;s>o;o+=1)if(a=r[o].replace(/\s/g,""),i=a.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==i&&i.length>=1)return i[1];return"resolve"===this.opts.width?(n=this.opts.element.css("width"),n.indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return t.isFunction(this.opts.width)?this.opts.width():this.opts.width}var r=n.call(this);null!==r&&this.container.css("width",r)}}),M=C(k,{createContainer:function(){var e=t(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return e},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var n,r,i;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),n=this.search.get(0),n.createTextRange?(r=n.createTextRange(),r.collapse(!1),r.select()):n.setSelectionRange&&(i=this.search.val().length,n.setSelectionRange(i,i))),""===this.search.val()&&this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():this.focusser&&(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){t("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),S.call(this,"selection","focusser")},initContainer:function(){var e,r,i=this.container,o=this.dropdown,s=D();this.showSearch(this.opts.minimumResultsForSearch<0?!1:!0),this.selection=e=i.find(".select2-choice"),this.focusser=i.find(".select2-focusser"),e.find(".select2-chosen").attr("id","select2-chosen-"+s),this.focusser.attr("aria-labelledby","select2-chosen-"+s),this.results.attr("id","select2-results-"+s),this.search.attr("aria-owns","select2-results-"+s),this.focusser.attr("id","s2id_autogen"+s),r=t("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.focus(this.bind(function(){this.focus()})),this.focusser.prev().text(r.text()).attr("for",this.focusser.attr("id"));var a=this.opts.element.attr("title");this.opts.element.attr("title",a||r.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(t("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()&&229!=t.keyCode){if(t.which===F.PAGE_UP||t.which===F.PAGE_DOWN)return void m(t);switch(t.which){case F.UP:case F.DOWN:return this.moveHighlight(t.which===F.UP?-1:1),void m(t);case F.ENTER:return this.selectHighlighted(),void m(t);case F.TAB:return void this.selectHighlighted({noFocus:!0});case F.ESC:return this.cancel(t),void m(t)
}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()&&t.which!==F.TAB&&!F.isControl(t)&&!F.isFunctionKey(t)&&t.which!==F.ESC){if(this.opts.openOnEnter===!1&&t.which===F.ENTER)return void m(t);if(t.which==F.DOWN||t.which==F.UP||t.which==F.ENTER&&this.opts.openOnEnter){if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return;return this.open(),void m(t)}return t.which==F.DELETE||t.which==F.BACKSPACE?(this.opts.allowClear&&this.clear(),void m(t)):void 0}})),c(this.focusser),this.focusser.on("keyup-change input",this.bind(function(t){if(this.opts.minimumResultsForSearch>=0){if(t.stopPropagation(),this.opened())return;this.open()}})),e.on("mousedown touchstart","abbr",this.bind(function(t){this.isInterfaceEnabled()&&(this.clear(),_(t),this.close(),this.selection&&this.selection.focus())})),e.on("mousedown touchstart",this.bind(function(r){n(e),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),m(r)})),o.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),e.on("focus",this.bind(function(t){m(t)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(t.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(e){var n=this.selection.data("select2-data");if(n){var r=t.Event("select2-clearing");if(this.opts.element.trigger(r),r.isDefaultPrevented())return;var i=this.getPlaceholderOption();this.opts.element.val(i?i.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),e!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var t=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==e&&null!==n&&(t.updateSelection(n),t.close(),t.setPlaceholder(),t.nextSearchTerm=t.opts.nextSearchTerm(n,t.search.val()))})}},isPlaceholderOptionSelected:function(){var t;return this.getPlaceholder()===e?!1:(t=this.getPlaceholderOption())!==e&&t.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===e||null===this.opts.element.val()},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var r=t.find("option").filter(function(){return this.selected&&!this.disabled});e(n.optionToData(r))}:"data"in e&&(e.initSelection=e.initSelection||function(n,r){var i=n.val(),o=null;e.query({matcher:function(t,n,r){var a=s(i,e.id(r));return a&&(o=r),a},callback:t.isFunction(r)?function(){r(o)}:t.noop})}),e},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===e?e:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var t=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&t!==e){if(this.select&&this.getPlaceholderOption()===e)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(t)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(t,e,n){var r=0,i=this;if(this.findHighlightableChoices().each2(function(t,e){return s(i.id(e.data("select2-data")),i.opts.element.val())?(r=t,!1):void 0}),n!==!1&&this.highlight(e===!0&&r>=0?r:0),e===!0){var o=this.opts.minimumResultsForSearch;o>=0&&this.showSearch(P(t.results)>=o)}},showSearch:function(e){this.showSearchInput!==e&&(this.showSearchInput=e,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!e),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!e),t(this.dropdown,this.container).toggleClass("select2-with-searchbox",e))},onSelect:function(t,e){if(this.triggerSelect(t)){var n=this.opts.element.val(),r=this.data();this.opts.element.val(this.id(t)),this.updateSelection(t),this.opts.element.trigger({type:"select2-selected",val:this.id(t),choice:t}),this.nextSearchTerm=this.opts.nextSearchTerm(t,this.search.val()),this.close(),e&&e.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),s(n,this.id(t))||this.triggerChange({added:t,removed:r})}},updateSelection:function(t){var n,r,i=this.selection.find(".select2-chosen");this.selection.data("select2-data",t),i.empty(),null!==t&&(n=this.opts.formatSelection(t,i,this.opts.escapeMarkup)),n!==e&&i.append(n),r=this.opts.formatSelectionCssClass(t,i),r!==e&&i.addClass(r),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==e&&this.container.addClass("select2-allowclear")},val:function(){var t,n=!1,r=null,i=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(t=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(t).find("option").filter(function(){return this.selected}).each2(function(t,e){return r=i.optionToData(e),!1}),this.updateSelection(r),this.setPlaceholder(),n&&this.triggerChange({added:r,removed:o});else{if(!t&&0!==t)return void this.clear(n);if(this.opts.initSelection===e)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(t),this.opts.initSelection(this.opts.element,function(t){i.opts.element.val(t?i.id(t):""),i.updateSelection(t),i.setPlaceholder(),n&&i.triggerChange({added:t,removed:o})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(t){var n,r=!1;return 0===arguments.length?(n=this.selection.data("select2-data"),n==e&&(n=null),n):(arguments.length>1&&(r=arguments[1]),void(t?(n=this.data(),this.opts.element.val(t?this.id(t):""),this.updateSelection(t),r&&this.triggerChange({added:t,removed:n})):this.clear(r)))}}),I=C(k,{createContainer:function(){var e=t(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return e},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var r=[];t.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(t,e){r.push(n.optionToData(e))}),e(r)}:"data"in e&&(e.initSelection=e.initSelection||function(n,r){var i=a(n.val(),e.separator,e.transformVal),o=[];e.query({matcher:function(n,r,a){var u=t.grep(i,function(t){return s(t,e.id(a))}).length;return u&&o.push(a),u},callback:t.isFunction(r)?function(){for(var t=[],n=0;n<i.length;n++)for(var a=i[n],u=0;u<o.length;u++){var c=o[u];if(s(a,e.id(c))){t.push(c),o.splice(u,1);break}}r(t)}:t.noop})}),e},selectChoice:function(t){var e=this.container.find(".select2-search-choice-focus");e.length&&t&&t[0]==e[0]||(e.length&&this.opts.element.trigger("choice-deselected",e),e.removeClass("select2-search-choice-focus"),t&&t.length&&(this.close(),t.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",t)))},destroy:function(){t("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),S.call(this,"searchContainer","selection")},initContainer:function(){var e,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=e=this.container.find(n);var r=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(){r.search[0].focus(),r.selectChoice(t(this))}),this.search.attr("id","s2id_autogen"+D()),this.search.prev().text(t("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.focus(this.bind(function(){this.focus()})),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()){++this.keydowns;var n=e.find(".select2-search-choice-focus"),r=n.prev(".select2-search-choice:not(.select2-locked)"),i=n.next(".select2-search-choice:not(.select2-locked)"),o=f(this.search);if(n.length&&(t.which==F.LEFT||t.which==F.RIGHT||t.which==F.BACKSPACE||t.which==F.DELETE||t.which==F.ENTER)){var s=n;return t.which==F.LEFT&&r.length?s=r:t.which==F.RIGHT?s=i.length?i:null:t.which===F.BACKSPACE?this.unselect(n.first())&&(this.search.width(10),s=r.length?r:i):t.which==F.DELETE?this.unselect(n.first())&&(this.search.width(10),s=i.length?i:null):t.which==F.ENTER&&(s=null),this.selectChoice(s),m(t),void(s&&s.length||this.open())}if((t.which===F.BACKSPACE&&1==this.keydowns||t.which==F.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(e.find(".select2-search-choice:not(.select2-locked)").last()),void m(t);if(this.selectChoice(null),this.opened())switch(t.which){case F.UP:case F.DOWN:return this.moveHighlight(t.which===F.UP?-1:1),void m(t);case F.ENTER:return this.selectHighlighted(),void m(t);case F.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case F.ESC:return this.cancel(t),void m(t)}if(t.which!==F.TAB&&!F.isControl(t)&&!F.isFunctionKey(t)&&t.which!==F.BACKSPACE&&t.which!==F.ESC){if(t.which===F.ENTER){if(this.opts.openOnEnter===!1)return;if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return}this.open(),(t.which===F.PAGE_UP||t.which===F.PAGE_DOWN)&&m(t),t.which===F.ENTER&&m(t)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger(t.Event("select2-blur"))})),this.container.on("click",n,this.bind(function(e){this.isInterfaceEnabled()&&(t(e.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault()))})),this.container.on("focus",n,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var t=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==e&&null!==n&&(t.updateSelection(n),t.close(),t.clearSearch())})}},clearSearch:function(){var t=this.getPlaceholder(),n=this.getMaxSearchWidth();t!==e&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(t).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var n=[],r=[],o=this;t(e).each(function(){i(o.id(this),n)<0&&(n.push(o.id(this)),r.push(this))}),e=r,this.selection.find(".select2-search-choice").remove(),t(e).each(function(){o.addSelectedChoice(this)}),o.postprocessResults()},tokenize:function(){var t=this.search.val();t=this.opts.tokenizer.call(this,t,this.data(),this.bind(this.onSelect),this.opts),null!=t&&t!=e&&(this.search.val(t),t.length>0&&this.open())},onSelect:function(t,n){this.triggerSelect(t)&&""!==t.text&&(this.addSelectedChoice(t),this.opts.element.trigger({type:"selected",val:this.id(t),choice:t}),this.nextSearchTerm=this.opts.nextSearchTerm(t,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(t,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:t}),n&&n.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var r,i,o=!n.locked,s=t("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),a=t("<li class='select2-search-choice select2-locked'><div></div></li>"),u=o?s:a,c=this.id(n),l=this.getVal();r=this.opts.formatSelection(n,u.find("div"),this.opts.escapeMarkup),r!=e&&u.find("div").replaceWith(t("<div></div>").html(r)),i=this.opts.formatSelectionCssClass(n,u.find("div")),i!=e&&u.addClass(i),o&&u.find(".select2-search-choice-close").on("mousedown",m).on("click dblclick",this.bind(function(e){this.isInterfaceEnabled()&&(this.unselect(t(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),m(e),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),u.data("select2-data",n),u.insertBefore(this.searchContainer),l.push(c),this.setVal(l)},unselect:function(e){var n,r,o=this.getVal();if(e=e.closest(".select2-search-choice"),0===e.length)throw"Invalid argument: "+e+". Must be .select2-search-choice";if(n=e.data("select2-data")){var s=t.Event("select2-removing");if(s.val=this.id(n),s.choice=n,this.opts.element.trigger(s),s.isDefaultPrevented())return!1;for(;(r=i(this.id(n),o))>=0;)o.splice(r,1),this.setVal(o),this.select&&this.postprocessResults();return e.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}),!0}},postprocessResults:function(t,e,n){var r=this.getVal(),o=this.results.find(".select2-result"),s=this.results.find(".select2-result-with-children"),a=this;o.each2(function(t,e){var n=a.id(e.data("select2-data"));i(n,r)>=0&&(e.addClass("select2-selected"),e.find(".select2-result-selectable").addClass("select2-selected"))}),s.each2(function(t,e){e.is(".select2-result-selectable")||0!==e.find(".select2-result-selectable:not(.select2-selected)").length||e.addClass("select2-selected")}),-1==this.highlight()&&n!==!1&&this.opts.closeOnSelect===!0&&a.highlight(0),!this.opts.createSearchChoice&&!o.filter(".select2-result:not(.select2-selected)").length>0&&(!t||t&&!t.more&&0===this.results.find(".select2-no-results").length)&&R(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+A(a.opts.formatNoMatches,a.opts.element,a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-u(this.search)},resizeSearch:function(){var t,e,n,r,i,o=u(this.search);t=g(this.search)+10,e=this.search.offset().left,n=this.selection.width(),r=this.selection.offset().left,i=n-(e-r)-o,t>i&&(i=n-o),40>i&&(i=n-o),0>=i&&(i=t),this.search.width(Math.floor(i))},getVal:function(){var t;return this.select?(t=this.select.val(),null===t?[]:t):(t=this.opts.element.val(),a(t,this.opts.separator,this.opts.transformVal))},setVal:function(e){var n;this.select?this.select.val(e):(n=[],t(e).each(function(){i(this,n)<0&&n.push(this)}),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},buildChangeDetails:function(t,e){for(var e=e.slice(0),t=t.slice(0),n=0;n<e.length;n++)for(var r=0;r<t.length;r++)s(this.opts.id(e[n]),this.opts.id(t[r]))&&(e.splice(n,1),n>0&&n--,t.splice(r,1),r--);return{added:e,removed:t}},val:function(n,r){var i,o=this;if(0===arguments.length)return this.getVal();if(i=this.data(),i.length||(i=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(r&&this.triggerChange({added:this.data(),removed:i}));if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),r&&this.triggerChange(this.buildChangeDetails(i,this.data()));else{if(this.opts.initSelection===e)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(e){var n=t.map(e,o.id);o.setVal(n),o.updateSelection(e),o.clearSearch(),r&&o.triggerChange(o.buildChangeDetails(i,o.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){e.push(n.opts.id(t(this).data("select2-data")))}),this.setVal(e),this.triggerChange()},data:function(e,n){var r,i,o=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return t(this).data("select2-data")}).get():(i=this.data(),e||(e=[]),r=t.map(e,function(t){return o.opts.id(t)}),this.setVal(r),this.updateSelection(e),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(i,this.data())),void 0)}}),t.fn.select2=function(){var n,r,o,s,a,u=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],l=["opened","isFocused","container","dropdown"],p=["val","data"],d={search:"externalSearch"};return this.each(function(){if(0===u.length||"object"==typeof u[0])n=0===u.length?{}:t.extend({},u[0]),n.element=t(this),"select"===n.element.get(0).tagName.toLowerCase()?a=n.element.prop("multiple"):(a=n.multiple||!1,"tags"in n&&(n.multiple=a=!0)),r=a?new window.Select2["class"].multi:new window.Select2["class"].single,r.init(n);else{if("string"!=typeof u[0])throw"Invalid arguments to select2 plugin: "+u;if(i(u[0],c)<0)throw"Unknown method: "+u[0];if(s=e,r=t(this).data("select2"),r===e)return;if(o=u[0],"container"===o?s=r.container:"dropdown"===o?s=r.dropdown:(d[o]&&(o=d[o]),s=r[o].apply(r,u.slice(1))),i(u[0],l)>=0||i(u[0],p)>=0&&1==u.length)return!1}}),s===e?this:s},t.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(t,e,n,r){var i=[];return y(this.text(t),n.term,i,r),i.join("")},transformVal:function(e){return t.trim(e)},formatSelection:function(t,n,r){return t?r(this.text(t)):e},sortResults:function(t){return t},formatResultCssClass:function(t){return t.css},formatSelectionCssClass:function(){return e},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(t){return t==e?null:t.id},text:function(e){return e&&this.data&&this.data.text?t.isFunction(this.data.text)?this.data.text(e):e[this.data.text]:e.text},matcher:function(t,e){return r(""+e).toUpperCase().indexOf(r(""+t).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:O,escapeMarkup:w,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(t){return t},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return e},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(t){var e="ontouchstart"in window||navigator.msMaxTouchPoints>0;return e&&t.opts.minimumResultsForSearch<0?!1:!0}},t.fn.select2.locales=[],t.fn.select2.locales.en={formatMatches:function(t){return 1===t?"One result is available, press enter to select it.":t+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(){return"Loading failed"},formatInputTooShort:function(t,e){var n=e-t.length;return"Please enter "+n+" or more character"+(1==n?"":"s")},formatInputTooLong:function(t,e){var n=t.length-e;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(t){return"You can only select "+t+" item"+(1==t?"":"s")},formatLoadMore:function(){return"Loading more results‚Ä¶"},formatSearching:function(){return"Searching‚Ä¶"}},t.extend(t.fn.select2.defaults,t.fn.select2.locales.en),t.fn.select2.ajaxDefaults={transport:t.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:E,local:b,tags:T},util:{debounce:p,markMatch:y,escapeMarkup:w,stripDiacritics:r},"class":{"abstract":k,single:M,multi:I}}}}(jQuery),define("select2",["jquery"],function(t){return function(){var e;return e||t.Select2}}(this)),define("app/monkeyPatch",["jquery","backbone","bootstrap","select2"],function(t,e){"use strict";var n=e.sync;e.sync=function(t,e,r){return r.syncMethod=t,n.call(this,t,e,r)},t.fn.modal.Constructor.prototype.enforceFocus=function(){},t.fn.modal.Constructor.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27===t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")};var r=t(document.body);return t.fn.select2.defaults.dropdownContainer=function(t){var e=t.container.closest(".modal-body");if(0===e.length)return r;var n=e.closest(".modal-dialog");return 0===n.length?r:n},r.on("click","label[for]",function(e){var n=t("#"+e.target.htmlFor);n.data("select2")&&!n.parent().hasClass("has-required-select2")&&n.select2("focus")}),{}}),define("h5.pubsub/Subscriptions",["require","exports","module"],function(t,e,n){"use strict";function r(t){this.messageBroker=t,this.children={},this.subscriptions=[],this.subscriptionsPendingRemoval=[],this.sendingMessagesCount=0,this.removeSubscription=this.removeSubscription.bind(this)}n.exports=r;var i=[];r.TOKEN={SEPARATOR:".",ANY:"*",ALL:"**"},r.prototype.destroy=function(){for(var t=this.children,e=Object.keys(t),n=0,r=e.length;r>n;++n)t[e[n]].destroy();this.children=null,this.removeSubscriptions(),this.subscriptionsPendingRemoval=null,this.messageBroker=null},r.prototype.count=function(t,e){this.subscriptions.length&&(e[t]=this.subscriptions.length);var n=Object.keys(this.children),i=n.length;if(i){0!==t.length&&(t+=r.TOKEN.SEPARATOR);for(var o=0;i>o;++o){var s=n[o];this.children[s].count(t+s,e)}}},r.prototype.add=function(t){var e=this.splitTopic(t.getTopic());this.addSubscription(e,t)},r.prototype.remove=function(t){this.removeSubscriptions(this.splitTopic(t))},r.prototype.send=function(t,e,n){var r=this.splitTopic(t);this.sendMessage(r,t,e,n)},r.prototype.addSubscription=function(t,e){if(0===t.length)return this.subscriptions.push(e),e.on("cancel",this.removeSubscription),void(1===this.subscriptions.length&&this.messageBroker.emit("new topic",e.getTopic()));var n=this.children,i=t.shift();"undefined"==typeof n[i]&&(n[i]=new r(this.messageBroker)),n[i].addSubscription(t,e)},r.prototype.removeSubscriptions=function(t){var e,n;if("undefined"==typeof t||0===t.length){var r=this.subscriptions;if(!r.length)return;this.subscriptions=[];var i=r[0].getTopic();for(e=0,n=r.length;n>e;++e)r[e].cancel();return void this.messageBroker.emit("empty topic",i)}var o=t.shift();"undefined"!=typeof this.children[o]&&this.children[o].removeSubscriptions(t)},r.prototype.sendMessage=function(t,e,n,o){if(++this.sendingMessagesCount,"undefined"!=typeof this.children[r.TOKEN.ALL]&&this.children[r.TOKEN.ALL].sendMessage(i,e,n,o),0===t.length)for(var s=0,a=this.subscriptions.length;a>s;++s)this.subscriptions[s].send(e,n,o);else{var u=t.shift();"undefined"!=typeof this.children[r.TOKEN.ANY]&&this.children[r.TOKEN.ANY].sendMessage([].concat(t),e,n,o),"undefined"!=typeof this.children[u]&&this.children[u].sendMessage(t,e,n,o)}--this.sendingMessagesCount,this.removePendingSubscriptions()},r.prototype.splitTopic=function(t){var e=t.split(r.TOKEN.SEPARATOR).filter(function(t){return 0!==t.length});if(0===e.length)throw new Error("Invalid subscription topic: "+t);return e},r.prototype.removeSubscription=function(t){return this.messageBroker.emit("cancel",t),0!==this.subscriptions.length?1===this.subscriptions.length&&this.subscriptions[0]===t?(this.subscriptions.length=0,void this.messageBroker.emit("empty topic",t.getTopic())):void this.removeOrQueueRemoval(t):void 0},r.prototype.removeOrQueueRemoval=function(t){0===this.sendingMessagesCount?this.subscriptions.splice(this.subscriptions.indexOf(t),1):this.subscriptionsPendingRemoval.push(t)},r.prototype.removePendingSubscriptions=function(){var t=this.subscriptionsPendingRemoval,e=t.length;if(e&&!this.sendingMessagesCount){var n=this.subscriptions;if(e===n.length)return t.length=0,void(n.length=0);var r,i,o=[];for(r=0;e>r;++r)o.push(n.indexOf(t[r]));for(o.sort(function(t,e){return e-t}),r=0,i=o.length;i>r;++r)n.splice(o[r],1);t.length=0}}}),define("h5.pubsub/Subscription",["require","exports","module"],function(t,e,n){"use strict";function r(t,e){this.cancelled=!1,this.id=t,this.topic=e,this.messageFilter=null,this.messageLimit=0,this.messageCount=0,this.doFilter=null,this.listeners={cancel:null,message:null}}n.exports=r,r.compileFilter=function(){throw new Error("Subscription.compileFilter() is not implemented!")},r.prototype.toJSON=function(){var t=this.getFilter();return"function"==typeof t&&(t=t.toString()),{id:this.getId(),topic:this.getTopic(),limit:this.getLimit(),filter:t}},r.prototype.getId=function(){return this.id},r.prototype.getTopic=function(){return this.topic},r.prototype.getFilter=function(){return this.messageFilter},r.prototype.setFilter=function(t){if(this.messageFilter=t,"function"==typeof t)this.doFilter=t;else if(this.doFilter=r.compileFilter(t),"function"!=typeof this.doFilter)throw new Error("Subscription.compileFilter() must return a function.");return this},r.prototype.getLimit=function(){return this.messageLimit},r.prototype.setLimit=function(t){if(1>t)throw new Error("Subscription limit must be greater than 0.");return this.messageLimit=t,this},r.prototype.getMessageCount=function(){return this.messageCount},r.prototype.on=function(t,e){if(this.cancelled)return this;var n=this.listeners[t],r=typeof n;if("undefined"===r)throw new Error("Unknown event: "+t);return"function"===r?this.listeners[t]=[n,e]:null===n?this.listeners[t]=e:this.listeners[t].push(e),this},r.prototype.off=function(t,e){if(this.cancelled)return this;var n=this.listeners[t],r=typeof n;if("undefined"===r)throw new Error("Unknown event: "+t);if("function"===r&&n===e)this.listeners[t]=null;else if("object"===r&&null!==n){for(var i=-1,o=n.length,s=0;o>s;++s)if(n[s]===e){i=s;break}-1!==i&&(n.splice(i,1),2===o&&(this.listeners[t]=n[0]))}return this},r.prototype.cancel=function(){this.cancelled||(this.cancelled=!0,this.emit("cancel",this),this.listeners=null,this.doFilter=null)},r.prototype.send=function(t,e,n){this.cancelled||null!==this.doFilter&&!this.doFilter(e,t,n,this)||(++this.messageCount,this.emit("message",e,t,n,this),this.messageCount===this.messageLimit&&this.cancel())},r.prototype.emit=function(t){var e=this.listeners[t];if(null!==e){var n=arguments.length;if("function"==typeof e)return void(5===n?e(arguments[1],arguments[2],arguments[3],arguments[4]):e(arguments[1]));for(var r=0,i=e.length;i>r;++r)5===n?e[r](arguments[1],arguments[2],arguments[3],arguments[4]):e[r](arguments[1])}}}),define("h5.pubsub/Sandbox",["require","exports","module"],function(t,e,n){"use strict";function r(t){this.broker=t,this.subscriptions={},this.removeSubscription=this.removeSubscription.bind(this)}n.exports=r,r.prototype.destroy=function(){var t=this.subscriptions;null!==t&&Object.keys(t).forEach(function(e){t[e].cancel()}),this.subscriptions=null,this.broker=null},r.prototype.sandbox=function(){return new r(this)},r.prototype.publish=function(t,e,n){return this.broker.publish(t,e,n),this},r.prototype.subscribe=function(t,e){var n=this.broker.subscribe(t,e);return n.on("cancel",this.removeSubscription),this.subscriptions[n.getId()]=n,n},r.prototype.unsubscribe=function(t){var e=[],n=this.subscriptions;for(var r in n)n.hasOwnProperty(r)&&n[r].getTopic()===t&&e.push(r);for(var i=0,o=e.length;o>i;++i)n[e[i]].cancel();return this},r.prototype.removeSubscription=function(t){delete this.subscriptions[t.getId()]}}),define("h5.pubsub/MessageBroker",["require","exports","module","./Subscriptions","./Subscription","./Sandbox"],function(t,e,n){"use strict";function r(){this.subscriptions=new i(this),this.nextSubscriptionId=0,this.listeners={subscribe:[],cancel:[],"new topic":[],"empty topic":[],message:[]}}var i=t("./Subscriptions"),o=t("./Subscription"),s=t("./Sandbox");n.exports=r,r.prototype.destroy=function(){this.subscriptions.destroy(),this.subscriptions=null,this.listeners=null},r.prototype.sandbox=function(){return new s(this)},r.prototype.publish=function(t,e,n){return"undefined"==typeof n&&(n={}),this.emit("message",t,e,n),this.subscriptions.send(t,e,n),this},r.prototype.subscribe=function(t,e){var n=new o(this.getNextSubscriptionId(),t);return"function"==typeof e&&n.on("message",e),this.subscriptions.add(n),this.emit("subscribe",n),n},r.prototype.unsubscribe=function(t){return this.subscriptions.remove(t),this},r.prototype.count=function(){var t={};if(null===this.subscriptions)return t;var e="";return this.subscriptions.count(e,t),t},r.prototype.on=function(t,e){var n=this.listeners[t],r=typeof n;if("undefined"===r)throw new Error("Unknown event: "+t);return n.push(e),this},r.prototype.off=function(t,e){var n=this.listeners[t],r=typeof n;if("undefined"===r)throw new Error("Unknown event: "+t);var i=n.indexOf(e);return-1!==i&&n.splice(i,1),this},r.prototype.emit=function(t,e){var n=this.listeners[t],r=typeof n;if("undefined"===r)throw new Error("Unknown event: "+t);if(!n.length)return this;var i=arguments.length;i>4&&(e=Array.prototype.slice.call(arguments),e.shift());for(var o=0,s=n.length;s>o;++o){var a=n[o];
switch(i){case 4:a(arguments[1],arguments[2],arguments[3]);break;case 3:a(arguments[1],arguments[2]);break;case 2:a(arguments[1]);break;default:a.apply(null,e)}}return this},r.prototype.getNextSubscriptionId=function(){return(this.nextSubscriptionId++).toString(36)}}),define("app/broker",["h5.pubsub/MessageBroker"],function(t){"use strict";var e=new t;return e.on("message",function(t,e){}),window.broker=e,e}),define("app/i18n",["underscore","moment","select2","app/broker"],function(t,e,n,r){"use strict";function i(t,e,n){try{return c[t][e](n)}catch(i){if(c[t]&&c[t][e])throw i;return r.publish("i18n.missingKey",{domain:t,key:e}),e}}function o(t,e,n){c[t]=e,"string"==typeof n&&l.push(n),r.publish("i18n.registered",{domain:t,keys:e,moduleId:n})}function s(o,s){var a="en";t.isObject(i.config)&&(a=i.config.locale,i.config.locale=o),l.forEach(require.undef);var u=[].concat(l);"en"!==o&&u.unshift("moment-lang/"+o),u.unshift("select2-lang/"+o),require(u,function(){e.locale(o),n.lang(o),r.publish("i18n.reloaded",{oldLocale:a,newLocale:o}),t.isFunction(s)&&s()})}function a(t,e,n){function r(){return i(t,e,n)}return r.toString=r,r}function u(t,e){return"undefined"!=typeof c[t]&&"function"==typeof c[t][e]}var c={},l=[];return i.config=null,i.translate=i,i.register=o,i.reload=s,i.bound=a,i.has=u,window.i18n=i,i}),!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define("socket.io",[],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.io=t()}}(function(){var t;return function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e){e.exports=t("./lib/")},{"./lib/":2}],2:[function(t,e,n){function r(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,r=i(t),o=r.source,u=r.id;return e.forceNew||e["force new connection"]||!1===e.multiplex?n=s(o,e):(a[u]||(a[u]=s(o,e)),n=a[u]),n.socket(r.path)}var i=t("./url"),o=t("socket.io-parser"),s=t("./manager");e.exports=n=r;var a=n.managers={};n.protocol=o.protocol,n.connect=r,n.Manager=t("./manager"),n.Socket=t("./socket")},{"./manager":3,"./socket":5,"./url":6,debug:10,"socket.io-parser":46}],3:[function(t,e){function n(t,e){return this instanceof n?(t&&"object"==typeof t&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new l({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connected=[],this.encoding=!1,this.packetBuffer=[],this.encoder=new s.Encoder,this.decoder=new s.Decoder,this.autoConnect=e.autoConnect!==!1,void(this.autoConnect&&this.open())):new n(t,e)}var r=(t("./url"),t("engine.io-client")),i=t("./socket"),o=t("component-emitter"),s=t("socket.io-parser"),a=t("./on"),u=t("component-bind"),c=(t("object-component"),t("indexof")),l=t("backo2");e.exports=n,n.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)this.nsps[t].emit.apply(this.nsps[t],arguments)},n.prototype.updateSocketIds=function(){for(var t in this.nsps)this.nsps[t].id=this.engine.id},o(n.prototype),n.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},n.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},n.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},n.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},n.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},n.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},n.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},n.prototype.open=n.prototype.connect=function(t){if(~this.readyState.indexOf("open"))return this;this.engine=r(this.uri,this.opts);var e=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var i=a(e,"open",function(){n.onopen(),t&&t()}),o=a(e,"error",function(e){if(n.cleanup(),n.readyState="closed",n.emitAll("connect_error",e),t){var r=new Error("Connection error");r.data=e,t(r)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout,u=setTimeout(function(){i.destroy(),e.close(),e.emit("error","timeout"),n.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(u)}})}return this.subs.push(i),this.subs.push(o),this},n.prototype.onopen=function(){this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(a(t,"data",u(this,"ondata"))),this.subs.push(a(this.decoder,"decoded",u(this,"ondecoded"))),this.subs.push(a(t,"error",u(this,"onerror"))),this.subs.push(a(t,"close",u(this,"onclose")))},n.prototype.ondata=function(t){this.decoder.add(t)},n.prototype.ondecoded=function(t){this.emit("packet",t)},n.prototype.onerror=function(t){this.emitAll("error",t)},n.prototype.socket=function(t){var e=this.nsps[t];if(!e){e=new i(this,t),this.nsps[t]=e;var n=this;e.on("connect",function(){e.id=n.engine.id,~c(n.connected,e)||n.connected.push(e)})}return e},n.prototype.destroy=function(t){var e=c(this.connected,t);~e&&this.connected.splice(e,1),this.connected.length||this.close()},n.prototype.packet=function(t){var e=this;e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(t){for(var n=0;n<t.length;n++)e.engine.write(t[n]);e.encoding=!1,e.processPacketQueue()}))},n.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},n.prototype.cleanup=function(){for(var t;t=this.subs.shift();)t.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},n.prototype.close=n.prototype.disconnect=function(){this.skipReconnect=!0,this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},n.prototype.onclose=function(t){this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},n.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();this.reconnecting=!0;var n=setTimeout(function(){t.skipReconnect||(t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):t.onreconnect()}))},e);this.subs.push({destroy:function(){clearTimeout(n)}})}},n.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},{"./on":4,"./socket":5,"./url":6,backo2:7,"component-bind":8,"component-emitter":9,debug:10,"engine.io-client":11,indexof:42,"object-component":43,"socket.io-parser":46}],4:[function(t,e){function n(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}e.exports=n},{}],5:[function(t,e,n){function r(t,e){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}var i=t("socket.io-parser"),o=t("component-emitter"),s=t("to-array"),a=t("./on"),u=t("component-bind"),c=t("has-binary");e.exports=n=r;var l={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},p=o.prototype.emit;o(r.prototype),r.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[a(t,"open",u(this,"onopen")),a(t,"packet",u(this,"onpacket")),a(t,"close",u(this,"onclose"))]}},r.prototype.open=r.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},r.prototype.send=function(){var t=s(arguments);return t.unshift("message"),this.emit.apply(this,t),this},r.prototype.emit=function(t){if(l.hasOwnProperty(t))return p.apply(this,arguments),this;var e=s(arguments),n=i.EVENT;c(e)&&(n=i.BINARY_EVENT);var r={type:n,data:e};return"function"==typeof e[e.length-1]&&(this.acks[this.ids]=e.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),this},r.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},r.prototype.onopen=function(){"/"!=this.nsp&&this.packet({type:i.CONNECT})},r.prototype.onclose=function(t){this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},r.prototype.onpacket=function(t){if(t.nsp==this.nsp)switch(t.type){case i.CONNECT:this.onconnect();break;case i.EVENT:this.onevent(t);break;case i.BINARY_EVENT:this.onevent(t);break;case i.ACK:this.onack(t);break;case i.BINARY_ACK:this.onack(t);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",t.data)}},r.prototype.onevent=function(t){var e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?p.apply(this,e):this.receiveBuffer.push(e)},r.prototype.ack=function(t){var e=this,n=!1;return function(){if(!n){n=!0;var r=s(arguments),o=c(r)?i.BINARY_ACK:i.ACK;e.packet({type:o,id:t,data:r})}}},r.prototype.onack=function(t){var e=this.acks[t.id];e.apply(this,t.data),delete this.acks[t.id]},r.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},r.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)p.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},r.prototype.ondisconnect=function(){this.destroy(),this.onclose("io server disconnect")},r.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},r.prototype.close=r.prototype.disconnect=function(){return this.connected&&this.packet({type:i.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{"./on":4,"component-bind":8,"component-emitter":9,debug:10,"has-binary":38,"socket.io-parser":46,"to-array":50}],6:[function(t,e){(function(n){function r(t,e){var r=t,e=e||n.location;return null==t&&(t=e.protocol+"//"+e.host),"string"==typeof t&&("/"==t.charAt(0)&&(t="/"==t.charAt(1)?e.protocol+t:e.hostname+t),/^(https?|wss?):\/\//.test(t)||(t="undefined"!=typeof e?e.protocol+"//"+t:"https://"+t),r=i(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/",r.id=r.protocol+"://"+r.host+":"+r.port,r.href=r.protocol+"://"+r.host+(e&&e.port==r.port?"":":"+r.port),r}var i=t("parseuri");e.exports=r}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:10,parseuri:44}],7:[function(t,e){function n(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}},{}],8:[function(t,e){var n=[].slice;e.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return e.apply(t,r.concat(n.call(arguments)))}}},{}],9:[function(t,e){function n(t){return t?r(t):void 0}function r(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},n.prototype.once=function(t,e){function n(){r.off(t,n),e.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=e,this.on(t,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks[t];if(n){n=n.slice(0);for(var r=0,i=n.length;i>r;++r)n[r].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],10:[function(t,e){e.exports=function(){}},{}],11:[function(t,e){e.exports=t("./lib/")},{"./lib/":12}],12:[function(t,e){e.exports=t("./socket"),e.exports.parser=t("engine.io-parser")},{"./socket":13,"engine.io-parser":25}],13:[function(t,e){(function(n){function r(t,e){if(!(this instanceof r))return new r(t,e);if(e=e||{},t&&"object"==typeof t&&(e=t,t=null),t&&(t=c(t),e.host=t.host,e.secure="https"==t.protocol||"wss"==t.protocol,e.port=t.port,t.query&&(e.query=t.query)),this.secure=null!=e.secure?e.secure:n.location&&"https:"==location.protocol,e.host){var i=e.host.split(":");e.hostname=i.shift(),i.length?e.port=i.pop():e.port||(e.port=this.secure?"443":"80")}this.agent=e.agent||!1,this.hostname=e.hostname||(n.location?location.hostname:"localhost"),this.port=e.port||(n.location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},"string"==typeof this.query&&(this.query=p.decode(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.pfx=e.pfx||null,this.key=e.key||null,this.passphrase=e.passphrase||null,this.cert=e.cert||null,this.ca=e.ca||null,this.ciphers=e.ciphers||null,this.rejectUnauthorized=e.rejectUnauthorized||null,this.open()}function i(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var o=t("./transports"),s=t("component-emitter"),a=t("indexof"),u=t("engine.io-parser"),c=t("parseuri"),l=t("parsejson"),p=t("parseqs");e.exports=r,r.priorWebsocketSuccess=!1,s(r.prototype),r.protocol=u.protocol,r.Socket=r,r.Transport=t("./transport"),r.transports=t("./transports"),r.parser=t("engine.io-parser"),r.prototype.createTransport=function(t){var e=i(this.query);e.EIO=u.protocol,e.transport=t,this.id&&(e.sid=this.id);var n=new o[t]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:e,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized});return n},r.prototype.open=function(){var t;if(this.rememberUpgrade&&r.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))t="websocket";else{if(0==this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";var t;try{t=this.createTransport(t)}catch(n){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},r.prototype.setTransport=function(t){var e=this;this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},r.prototype.probe=function(t){function e(){if(p.onlyBinaryUpgrades){var t=!this.supportsBinary&&p.transport.supportsBinary;l=l||t}l||(c.send([{type:"ping",data:"probe"}]),c.once("packet",function(t){if(!l)if("pong"==t.type&&"probe"==t.data){if(p.upgrading=!0,p.emit("upgrading",c),!c)return;r.priorWebsocketSuccess="websocket"==c.name,p.transport.pause(function(){l||"closed"!=p.readyState&&(u(),p.setTransport(c),c.send([{type:"upgrade"}]),p.emit("upgrade",c),c=null,p.upgrading=!1,p.flush())})}else{var e=new Error("probe error");e.transport=c.name,p.emit("upgradeError",e)}}))}function n(){l||(l=!0,u(),c.close(),c=null)}function i(t){var e=new Error("probe error: "+t);e.transport=c.name,n(),p.emit("upgradeError",e)}function o(){i("transport closed")}function s(){i("socket closed")}function a(t){c&&t.name!=c.name&&n()}function u(){c.removeListener("open",e),c.removeListener("error",i),c.removeListener("close",o),p.removeListener("close",s),p.removeListener("upgrading",a)}var c=this.createTransport(t,{probe:1}),l=!1,p=this;r.priorWebsocketSuccess=!1,c.once("open",e),c.once("error",i),c.once("close",o),this.once("close",s),this.once("upgrading",a),c.open()},r.prototype.onOpen=function(){if(this.readyState="open",r.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause)for(var t=0,e=this.upgrades.length;e>t;t++)this.probe(this.upgrades[t])},r.prototype.onPacket=function(t){if("opening"==this.readyState||"open"==this.readyState)switch(this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(l(t.data));break;case"pong":this.setPing();break;case"error":var e=new Error("server error");e.code=t.data,this.emit("error",e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}},r.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},r.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!=e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},r.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},r.prototype.ping=function(){this.sendPacket("ping")},r.prototype.onDrain=function(){for(var t=0;t<this.prevBufferLen;t++)this.callbackBuffer[t]&&this.callbackBuffer[t]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},r.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},r.prototype.write=r.prototype.send=function(t,e){return this.sendPacket("message",t,e),this},r.prototype.sendPacket=function(t,e,n){if("closing"!=this.readyState&&"closed"!=this.readyState){var r={type:t,data:e};this.emit("packetCreate",r),this.writeBuffer.push(r),this.callbackBuffer.push(n),this.flush()}},r.prototype.close=function(){function t(){r.onClose("forced close"),r.transport.close()}function e(){r.removeListener("upgrade",e),r.removeListener("upgradeError",e),t()}function n(){r.once("upgrade",e),r.once("upgradeError",e)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var r=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():t()}):this.upgrading?n():t()}return this},r.prototype.onError=function(t){r.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},r.prototype.onClose=function(t,e){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){n.writeBuffer=[],n.callbackBuffer=[],n.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e)}},r.prototype.filterUpgrades=function(t){for(var e=[],n=0,r=t.length;r>n;n++)~a(this.transports,t[n])&&e.push(t[n]);return e}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":14,"./transports":15,"component-emitter":9,debug:22,"engine.io-parser":25,indexof:42,parsejson:34,parseqs:35,parseuri:36}],14:[function(t,e){function n(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized}var r=t("engine.io-parser"),i=t("component-emitter");e.exports=n,i(n.prototype),n.timestamps=0,n.prototype.onError=function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this},n.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},n.prototype.send=function(t){if("open"!=this.readyState)throw new Error("Transport not open");this.write(t)},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(t){var e=r.decodePacket(t,this.socket.binaryType);this.onPacket(e)},n.prototype.onPacket=function(t){this.emit("packet",t)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":9,"engine.io-parser":25}],15:[function(t,e,n){(function(e){function r(t){var n,r=!1,a=!1,u=!1!==t.jsonp;if(e.location){var c="https:"==location.protocol,l=location.port;l||(l=c?443:80),r=t.hostname!=location.hostname||l!=t.port,a=t.secure!=c}if(t.xdomain=r,t.xscheme=a,n=new i(t),"open"in n&&!t.forceJSONP)return new o(t);if(!u)throw new Error("JSONP disabled");return new s(t)}var i=t("xmlhttprequest"),o=t("./polling-xhr"),s=t("./polling-jsonp"),a=t("./websocket");n.polling=r,n.websocket=a}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":16,"./polling-xhr":17,"./websocket":19,xmlhttprequest:20}],16:[function(t,e){(function(n){function r(){}function i(t){o.call(this,t),this.query=this.query||{},a||(n.___eio||(n.___eio=[]),a=n.___eio),this.index=a.length;var e=this;a.push(function(t){e.onData(t)}),this.query.j=this.index,n.document&&n.addEventListener&&n.addEventListener("beforeunload",function(){e.script&&(e.script.onerror=r)},!1)}var o=t("./polling"),s=t("component-inherit");e.exports=i;var a,u=/\n/g,c=/\\n/g;s(i,o),i.prototype.supportsBinary=!1,i.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},i.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n),this.script=e;var r="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);r&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},i.prototype.doWrite=function(t,e){function n(){r(),e()}function r(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(t){i.onError("jsonp polling iframe removal error",t)}try{var e='<iframe src="javascript:0" name="'+i.iframeId+'">';o=document.createElement(e)}catch(t){o=document.createElement("iframe"),o.name=i.iframeId,o.src="javascript:0"}o.id=i.iframeId,i.form.appendChild(o),i.iframe=o}var i=this;if(!this.form){var o,s=document.createElement("form"),a=document.createElement("textarea"),l=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=l,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),r(),t=t.replace(c,"\\\n"),this.area.value=t.replace(u,"\\n");try{this.form.submit()}catch(p){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==i.iframe.readyState&&n()}:this.iframe.onload=n}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":18,"component-inherit":21}],17:[function(t,e){(function(n){function r(){}function i(t){if(u.call(this,t),n.location){var e="https:"==location.protocol,r=location.port;r||(r=e?443:80),this.xd=t.hostname!=n.location.hostname||r!=t.port,this.xs=t.secure!=e}}function o(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!=t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.create()}function s(){for(var t in o.requests)o.requests.hasOwnProperty(t)&&o.requests[t].abort()}var a=t("xmlhttprequest"),u=t("./polling"),c=t("component-emitter"),l=t("component-inherit");e.exports=i,e.exports.Request=o,l(i,u),i.prototype.supportsBinary=!0,i.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,new o(t)},i.prototype.doWrite=function(t,e){var n="string"!=typeof t&&void 0!==t,r=this.request({method:"POST",data:t,isBinary:n}),i=this;r.on("success",e),r.on("error",function(t){i.onError("xhr post error",t)}),this.sendXhr=r},i.prototype.doPoll=function(){var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},c(o.prototype),o.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new a(t),r=this;try{if(e.open(this.method,this.uri,this.async),this.supportsBinary&&(e.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(i){}"withCredentials"in e&&(e.withCredentials=!0),this.hasXDR()?(e.onload=function(){r.onLoad()},e.onerror=function(){r.onError(e.responseText)}):e.onreadystatechange=function(){4==e.readyState&&(200==e.status||1223==e.status?r.onLoad():setTimeout(function(){r.onError(e.status)},0))},e.send(this.data)}catch(i){return void setTimeout(function(){r.onError(i)},0)}n.document&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},o.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},o.prototype.cleanup=function(t){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=r:this.xhr.onreadystatechange=r,t)try{this.xhr.abort()}catch(e){}n.document&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(n){}t="application/octet-stream"===e?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(n){this.onError(n)}null!=t&&this.onData(t)},o.prototype.hasXDR=function(){return"undefined"!=typeof n.XDomainRequest&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},n.document&&(o.requestsCount=0,o.requests={},n.attachEvent?n.attachEvent("onunload",s):n.addEventListener&&n.addEventListener("beforeunload",s,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":18,"component-emitter":9,"component-inherit":21,debug:22,xmlhttprequest:20}],18:[function(t,e){function n(t){var e=t&&t.forceBase64;(!a||e)&&(this.supportsBinary=!1),r.call(this,t)}var r=t("../transport"),i=t("parseqs"),o=t("engine.io-parser"),s=t("component-inherit");e.exports=n;var a=function(){var e=t("xmlhttprequest"),n=new e({xdomain:!1});return null!=n.responseType}();s(n,r),n.prototype.name="polling",n.prototype.doOpen=function(){this.poll()},n.prototype.pause=function(t){function e(){n.readyState="paused",t()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||e()})),this.writable||(r++,this.once("drain",function(){--r||e()}))}else e()},n.prototype.poll=function(){this.polling=!0,this.doPoll(),this.emit("poll")},n.prototype.onData=function(t){var e=this,n=function(t){return"opening"==e.readyState&&e.onOpen(),"close"==t.type?(e.onClose(),!1):void e.onPacket(t)};o.decodePayload(t,this.socket.binaryType,n),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState&&this.poll())},n.prototype.doClose=function(){function t(){e.write([{type:"close"}])}var e=this;"open"==this.readyState?t():this.once("open",t)},n.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit("drain")},e=this;o.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,n)})},n.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(t[this.timestampParam]=+new Date+"-"+r.timestamps++),this.supportsBinary||t.sid||(t.b64=1),t=i.encode(t),this.port&&("https"==e&&443!=this.port||"http"==e&&80!=this.port)&&(n=":"+this.port),t.length&&(t="?"+t),e+"://"+this.hostname+n+this.path+t
}},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:35,xmlhttprequest:20}],19:[function(t,e){function n(t){var e=t&&t.forceBase64;e&&(this.supportsBinary=!1),r.call(this,t)}var r=t("../transport"),i=t("engine.io-parser"),o=t("parseqs"),s=t("component-inherit"),a=t("ws");e.exports=n,s(n,r),n.prototype.name="websocket",n.prototype.supportsBinary=!0,n.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=void 0,n={agent:this.agent};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.ws=new a(t,e,n),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},n.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(n.prototype.onData=function(t){var e=this;setTimeout(function(){r.prototype.onData.call(e,t)},0)}),n.prototype.write=function(t){function e(){n.writable=!0,n.emit("drain")}var n=this;this.writable=!1;for(var r=0,o=t.length;o>r;r++)i.encodePacket(t[r],this.supportsBinary,function(t){try{n.ws.send(t)}catch(e){}});setTimeout(e,0)},n.prototype.onClose=function(){r.prototype.onClose.call(this)},n.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},n.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";return this.port&&("wss"==e&&443!=this.port||"ws"==e&&80!=this.port)&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=+new Date),this.supportsBinary||(t.b64=1),t=o.encode(t),t.length&&(t="?"+t),e+"://"+this.hostname+n+this.path+t},n.prototype.check=function(){return!(!a||"__initialize"in a&&this.name===n.prototype.name)}},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:35,ws:37}],20:[function(t,e){var n=t("has-cors");e.exports=function(t){var e=t.xdomain,r=t.xscheme,i=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||n))return new XMLHttpRequest}catch(o){}try{if("undefined"!=typeof XDomainRequest&&!r&&i)return new XDomainRequest}catch(o){}if(!e)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(o){}}},{"has-cors":40}],21:[function(t,e){e.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],22:[function(t,e,n){n=e.exports=t("./debug")},{"./debug":23}],23:[function(t,e,n){n=e.exports=function(){}},{ms:24}],24:[function(t,e){e.exports=function(){}},{}],25:[function(t,e,n){(function(e){function r(t,e){var r="b"+n.packets[t.type]+t.data.data;return e(r)}function i(t,e,r){if(!e)return n.encodeBase64Packet(t,r);var i=t.data,o=new Uint8Array(i),s=new Uint8Array(1+i.byteLength);s[0]=g[t.type];for(var a=0;a<o.length;a++)s[a+1]=o[a];return r(s.buffer)}function o(t,e,r){if(!e)return n.encodeBase64Packet(t,r);var i=new FileReader;return i.onload=function(){t.data=i.result,n.encodePacket(t,e,!0,r)},i.readAsArrayBuffer(t.data)}function s(t,e,r){if(!e)return n.encodeBase64Packet(t,r);if(_)return o(t,e,r);var i=new Uint8Array(1);i[0]=g[t.type];var s=new w([i.buffer,t.data]);return r(s)}function a(t,e,n){for(var r=new Array(t.length),i=d(t.length,n),o=function(t,n,i){e(n,function(e,n){r[t]=n,i(e,r)})},s=0;s<t.length;s++)o(s,t[s],i)}var u=t("./keys"),c=t("has-binary"),l=t("arraybuffer.slice"),p=t("base64-arraybuffer"),d=t("after"),h=t("utf8"),f=navigator.userAgent.match(/Android/i),m=/PhantomJS/i.test(navigator.userAgent),_=f||m;n.protocol=3;var g=n.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},v=u(g),y={type:"error",data:"parser error"},w=t("blob");n.encodePacket=function(t,n,o,a){"function"==typeof n&&(a=n,n=!1),"function"==typeof o&&(a=o,o=null);var u=void 0===t.data?void 0:t.data.buffer||t.data;if(e.ArrayBuffer&&u instanceof ArrayBuffer)return i(t,n,a);if(w&&u instanceof e.Blob)return s(t,n,a);if(u&&u.base64)return r(t,a);var c=g[t.type];return void 0!==t.data&&(c+=o?h.encode(String(t.data)):String(t.data)),a(""+c)},n.encodeBase64Packet=function(t,r){var i="b"+n.packets[t.type];if(w&&t.data instanceof w){var o=new FileReader;return o.onload=function(){var t=o.result.split(",")[1];r(i+t)},o.readAsDataURL(t.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(a){for(var u=new Uint8Array(t.data),c=new Array(u.length),l=0;l<u.length;l++)c[l]=u[l];s=String.fromCharCode.apply(null,c)}return i+=e.btoa(s),r(i)},n.decodePacket=function(t,e,r){if("string"==typeof t||void 0===t){if("b"==t.charAt(0))return n.decodeBase64Packet(t.substr(1),e);if(r)try{t=h.decode(t)}catch(i){return y}var o=t.charAt(0);return Number(o)==o&&v[o]?t.length>1?{type:v[o],data:t.substring(1)}:{type:v[o]}:y}var s=new Uint8Array(t),o=s[0],a=l(t,1);return w&&"blob"===e&&(a=new w([a])),{type:v[o],data:a}},n.decodeBase64Packet=function(t,n){var r=v[t.charAt(0)];if(!e.ArrayBuffer)return{type:r,data:{base64:!0,data:t.substr(1)}};var i=p.decode(t.substr(1));return"blob"===n&&w&&(i=new w([i])),{type:r,data:i}},n.encodePayload=function(t,e,r){function i(t){return t.length+":"+t}function o(t,r){n.encodePacket(t,s?e:!1,!0,function(t){r(null,i(t))})}"function"==typeof e&&(r=e,e=null);var s=c(t);return e&&s?w&&!_?n.encodePayloadAsBlob(t,r):n.encodePayloadAsArrayBuffer(t,r):t.length?void a(t,o,function(t,e){return r(e.join(""))}):r("0:")},n.decodePayload=function(t,e,r){if("string"!=typeof t)return n.decodePayloadAsBinary(t,e,r);"function"==typeof e&&(r=e,e=null);var i;if(""==t)return r(y,0,1);for(var o,s,a="",u=0,c=t.length;c>u;u++){var l=t.charAt(u);if(":"!=l)a+=l;else{if(""==a||a!=(o=Number(a)))return r(y,0,1);if(s=t.substr(u+1,o),a!=s.length)return r(y,0,1);if(s.length){if(i=n.decodePacket(s,e,!0),y.type==i.type&&y.data==i.data)return r(y,0,1);var p=r(i,u+o,c);if(!1===p)return}u+=o,a=""}}return""!=a?r(y,0,1):void 0},n.encodePayloadAsArrayBuffer=function(t,e){function r(t,e){n.encodePacket(t,!0,!0,function(t){return e(null,t)})}return t.length?void a(t,r,function(t,n){var r=n.reduce(function(t,e){var n;return n="string"==typeof e?e.length:e.byteLength,t+n.toString().length+n+2},0),i=new Uint8Array(r),o=0;return n.forEach(function(t){var e="string"==typeof t,n=t;if(e){for(var r=new Uint8Array(t.length),s=0;s<t.length;s++)r[s]=t.charCodeAt(s);n=r.buffer}i[o++]=e?0:1;for(var a=n.byteLength.toString(),s=0;s<a.length;s++)i[o++]=parseInt(a[s]);i[o++]=255;for(var r=new Uint8Array(n),s=0;s<r.length;s++)i[o++]=r[s]}),e(i.buffer)}):e(new ArrayBuffer(0))},n.encodePayloadAsBlob=function(t,e){function r(t,e){n.encodePacket(t,!0,!0,function(t){var n=new Uint8Array(1);if(n[0]=1,"string"==typeof t){for(var r=new Uint8Array(t.length),i=0;i<t.length;i++)r[i]=t.charCodeAt(i);t=r.buffer,n[0]=0}for(var o=t instanceof ArrayBuffer?t.byteLength:t.size,s=o.toString(),a=new Uint8Array(s.length+1),i=0;i<s.length;i++)a[i]=parseInt(s[i]);if(a[s.length]=255,w){var u=new w([n.buffer,a.buffer,t]);e(null,u)}})}a(t,r,function(t,n){return e(new w(n))})},n.decodePayloadAsBinary=function(t,e,r){"function"==typeof e&&(r=e,e=null);for(var i=t,o=[],s=!1;i.byteLength>0;){for(var a=new Uint8Array(i),u=0===a[0],c="",p=1;255!=a[p];p++){if(c.length>310){s=!0;break}c+=a[p]}if(s)return r(y,0,1);i=l(i,2+c.length),c=parseInt(c);var d=l(i,0,c);if(u)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(h){var f=new Uint8Array(d);d="";for(var p=0;p<f.length;p++)d+=String.fromCharCode(f[p])}o.push(d),i=l(i,c)}var m=o.length;o.forEach(function(t,i){r(n.decodePacket(t,e,!0),i,m)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":26,after:27,"arraybuffer.slice":28,"base64-arraybuffer":29,blob:30,"has-binary":31,utf8:33}],26:[function(t,e){e.exports=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var r in t)n.call(t,r)&&e.push(r);return e}},{}],27:[function(t,e){function n(t,e,n){function i(t,r){if(i.count<=0)throw new Error("after called too many times");--i.count,t?(o=!0,e(t),e=n):0!==i.count||o||e(null,r)}var o=!1;return n=n||r,i.count=t,0===t?e():i}function r(){}e.exports=n},{}],28:[function(t,e){e.exports=function(t,e,n){var r=t.byteLength;if(e=e||0,n=n||r,t.slice)return t.slice(e,n);if(0>e&&(e+=r),0>n&&(n+=r),n>r&&(n=r),e>=r||e>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(t),o=new Uint8Array(n-e),s=e,a=0;n>s;s++,a++)o[a]=i[s];return o.buffer}},{}],29:[function(t,e,n){!function(t){"use strict";n.encode=function(e){var n,r=new Uint8Array(e),i=r.length,o="";for(n=0;i>n;n+=3)o+=t[r[n]>>2],o+=t[(3&r[n])<<4|r[n+1]>>4],o+=t[(15&r[n+1])<<2|r[n+2]>>6],o+=t[63&r[n+2]];return i%3===2?o=o.substring(0,o.length-1)+"=":i%3===1&&(o=o.substring(0,o.length-2)+"=="),o},n.decode=function(e){var n,r,i,o,s,a=.75*e.length,u=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l=new ArrayBuffer(a),p=new Uint8Array(l);for(n=0;u>n;n+=4)r=t.indexOf(e[n]),i=t.indexOf(e[n+1]),o=t.indexOf(e[n+2]),s=t.indexOf(e[n+3]),p[c++]=r<<2|i>>4,p[c++]=(15&i)<<4|o>>2,p[c++]=(3&o)<<6|63&s;return l}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],30:[function(t,e){(function(t){function n(t,e){e=e||{};for(var n=new r,i=0;i<t.length;i++)n.append(t[i]);return e.type?n.getBlob(e.type):n.getBlob()}var r=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,i=function(){try{var t=new Blob(["hi"]);return 2==t.size}catch(e){return!1}}(),o=r&&r.prototype.append&&r.prototype.getBlob;e.exports=function(){return i?t.Blob:o?n:void 0}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],31:[function(t,e){(function(n){function r(t){function e(t){if(!t)return!1;if(n.Buffer&&n.Buffer.isBuffer(t)||n.ArrayBuffer&&t instanceof ArrayBuffer||n.Blob&&t instanceof Blob||n.File&&t instanceof File)return!0;if(i(t)){for(var r=0;r<t.length;r++)if(e(t[r]))return!0}else if(t&&"object"==typeof t){t.toJSON&&(t=t.toJSON());for(var o in t)if(t.hasOwnProperty(o)&&e(t[o]))return!0}return!1}return e(t)}var i=t("isarray");e.exports=r}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:32}],32:[function(t,e){e.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},{}],33:[function(e,n,r){(function(e){!function(i){function o(t){for(var e,n,r=[],i=0,o=t.length;o>i;)e=t.charCodeAt(i++),e>=55296&&56319>=e&&o>i?(n=t.charCodeAt(i++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--)):r.push(e);return r}function s(t){for(var e,n=t.length,r=-1,i="";++r<n;)e=t[r],e>65535&&(e-=65536,i+=y(e>>>10&1023|55296),e=56320|1023&e),i+=y(e);return i}function a(t,e){return y(t>>e&63|128)}function u(t){if(0==(4294967168&t))return y(t);var e="";return 0==(4294965248&t)?e=y(t>>6&31|192):0==(4294901760&t)?(e=y(t>>12&15|224),e+=a(t,6)):0==(4292870144&t)&&(e=y(t>>18&7|240),e+=a(t,12),e+=a(t,6)),e+=y(63&t|128)}function c(t){for(var e,n=o(t),r=n.length,i=-1,s="";++i<r;)e=n[i],s+=u(e);return s}function l(){if(v>=g)throw Error("Invalid byte index");var t=255&_[v];if(v++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function p(){var t,e,n,r,i;if(v>g)throw Error("Invalid byte index");if(v==g)return!1;if(t=255&_[v],v++,0==(128&t))return t;if(192==(224&t)){var e=l();if(i=(31&t)<<6|e,i>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&t)){if(e=l(),n=l(),i=(15&t)<<12|e<<6|n,i>=2048)return i;throw Error("Invalid continuation byte")}if(240==(248&t)&&(e=l(),n=l(),r=l(),i=(15&t)<<18|e<<12|n<<6|r,i>=65536&&1114111>=i))return i;throw Error("Invalid UTF-8 detected")}function d(t){_=o(t),g=_.length,v=0;for(var e,n=[];(e=p())!==!1;)n.push(e);return s(n)}var h="object"==typeof r&&r,f="object"==typeof n&&n&&n.exports==h&&n,m="object"==typeof e&&e;(m.global===m||m.window===m)&&(i=m);var _,g,v,y=String.fromCharCode,w={version:"2.0.0",encode:c,decode:d};if("function"==typeof t&&"object"==typeof t.amd&&t.amd)t(function(){return w});else if(h&&!h.nodeType)if(f)f.exports=w;else{var E={},b=E.hasOwnProperty;for(var T in w)b.call(w,T)&&(h[T]=w[T])}else i.utf8=w}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],34:[function(t,e){(function(t){var n=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,i=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;e.exports=function(e){return"string"==typeof e&&e?(e=e.replace(s,"").replace(a,""),t.JSON&&JSON.parse?JSON.parse(e):n.test(e.replace(r,"@").replace(i,"]").replace(o,""))?new Function("return "+e)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],35:[function(t,e,n){n.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},n.decode=function(t){for(var e={},n=t.split("&"),r=0,i=n.length;i>r;r++){var o=n[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}},{}],36:[function(t,e){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(t){var e=t,i=t.indexOf("["),o=t.indexOf("]");-1!=i&&-1!=o&&(t=t.substring(0,i)+t.substring(i,o).replace(/:/g,";")+t.substring(o,t.length));for(var s=n.exec(t||""),a={},u=14;u--;)a[r[u]]=s[u]||"";return-1!=i&&-1!=o&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},{}],37:[function(t,e){function n(t,e){var n;return n=e?new i(t,e):new i(t)}var r=function(){return this}(),i=r.WebSocket||r.MozWebSocket;e.exports=i?n:null,i&&(n.prototype=i.prototype)},{}],38:[function(t,e){(function(n){function r(t){function e(t){if(!t)return!1;if(n.Buffer&&n.Buffer.isBuffer(t)||n.ArrayBuffer&&t instanceof ArrayBuffer||n.Blob&&t instanceof Blob||n.File&&t instanceof File)return!0;if(i(t)){for(var r=0;r<t.length;r++)if(e(t[r]))return!0}else if(t&&"object"==typeof t){t.toJSON&&(t=t.toJSON());for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&e(t[o]))return!0}return!1}return e(t)}var i=t("isarray");e.exports=r}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:39}],39:[function(t,e){e.exports=t(32)},{}],40:[function(t,e){var n=t("global");try{e.exports="XMLHttpRequest"in n&&"withCredentials"in new n.XMLHttpRequest}catch(r){e.exports=!1}},{global:41}],41:[function(t,e){e.exports=function(){return this}()},{}],42:[function(t,e){var n=[].indexOf;e.exports=function(t,e){if(n)return t.indexOf(e);for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}},{}],43:[function(t,e,n){var r=Object.prototype.hasOwnProperty;n.keys=Object.keys||function(t){var e=[];for(var n in t)r.call(t,n)&&e.push(n);return e},n.values=function(t){var e=[];for(var n in t)r.call(t,n)&&e.push(t[n]);return e},n.merge=function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);return t},n.length=function(t){return n.keys(t).length},n.isEmpty=function(t){return 0==n.length(t)}},{}],44:[function(t,e){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(t){for(var e=n.exec(t||""),i={},o=14;o--;)i[r[o]]=e[o]||"";return i}},{}],45:[function(t,e,n){(function(e){var r=t("isarray"),i=t("./is-buffer");n.deconstructPacket=function(t){function e(t){if(!t)return t;if(i(t)){var o={_placeholder:!0,num:n.length};return n.push(t),o}if(r(t)){for(var s=new Array(t.length),a=0;a<t.length;a++)s[a]=e(t[a]);return s}if("object"==typeof t&&!(t instanceof Date)){var s={};for(var u in t)s[u]=e(t[u]);return s}return t}var n=[],o=t.data,s=t;return s.data=e(o),s.attachments=n.length,{packet:s,buffers:n}},n.reconstructPacket=function(t,e){function n(t){if(t&&t._placeholder){var i=e[t.num];return i}if(r(t)){for(var o=0;o<t.length;o++)t[o]=n(t[o]);return t}if(t&&"object"==typeof t){for(var s in t)t[s]=n(t[s]);return t}return t}return t.data=n(t.data),t.attachments=void 0,t},n.removeBlobs=function(t,n){function o(t,u,c){if(!t)return t;if(e.Blob&&t instanceof Blob||e.File&&t instanceof File){s++;var l=new FileReader;l.onload=function(){c?c[u]=this.result:a=this.result,--s||n(a)},l.readAsArrayBuffer(t)}else if(r(t))for(var p=0;p<t.length;p++)o(t[p],p,t);else if(t&&"object"==typeof t&&!i(t))for(var d in t)o(t[d],d,t)}var s=0,a=t;o(a),s||n(a)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":47,isarray:48}],46:[function(t,e,n){function r(){}function i(t){var e="",r=!1;return e+=t.type,(n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type)&&(e+=t.attachments,e+="-"),t.nsp&&"/"!=t.nsp&&(r=!0,e+=t.nsp),null!=t.id&&(r&&(e+=",",r=!1),e+=t.id),null!=t.data&&(r&&(e+=","),e+=l.stringify(t.data)),e}function o(t,e){function n(t){var n=d.deconstructPacket(t),r=i(n.packet),o=n.buffers;o.unshift(r),e(o)}d.removeBlobs(t,n)}function s(){this.reconstructor=null}function a(t){var e={},r=0;if(e.type=Number(t.charAt(0)),null==n.types[e.type])return c();if(n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type){for(var i="";"-"!=t.charAt(++r)&&(i+=t.charAt(r),r!=t.length););if(i!=Number(i)||"-"!=t.charAt(r))throw new Error("Illegal attachments");e.attachments=Number(i)}if("/"==t.charAt(r+1))for(e.nsp="";++r;){var o=t.charAt(r);if(","==o)break;if(e.nsp+=o,r==t.length)break}else e.nsp="/";var s=t.charAt(r+1);if(""!==s&&Number(s)==s){for(e.id="";++r;){var o=t.charAt(r);if(null==o||Number(o)!=o){--r;break}if(e.id+=t.charAt(r),r==t.length)break}e.id=Number(e.id)}if(t.charAt(++r))try{e.data=l.parse(t.substr(r))}catch(a){return c()}return e}function u(t){this.reconPack=t,this.buffers=[]}function c(){return{type:n.ERROR,data:"parser error"}}var l=t("json3"),p=(t("isarray"),t("component-emitter")),d=t("./binary"),h=t("./is-buffer");n.protocol=4,n.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],n.CONNECT=0,n.DISCONNECT=1,n.EVENT=2,n.ACK=3,n.ERROR=4,n.BINARY_EVENT=5,n.BINARY_ACK=6,n.Encoder=r,n.Decoder=s,r.prototype.encode=function(t,e){if(n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type)o(t,e);else{var r=i(t);e([r])}},p(s.prototype),s.prototype.add=function(t){var e;if("string"==typeof t)e=a(t),n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type?(this.reconstructor=new u(e),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",e)):this.emit("decoded",e);else{if(!h(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,this.emit("decoded",e))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},u.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length==this.reconPack.attachments){var e=d.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},u.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":45,"./is-buffer":47,"component-emitter":9,debug:10,isarray:48,json3:49}],47:[function(t,e){(function(t){function n(e){return t.Buffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer}e.exports=n}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],48:[function(t,e){e.exports=t(32)},{}],49:[function(t,e){e.exports=JSON},{}],50:[function(t,e){function n(t,e){var n=[];e=e||0;for(var r=e||0;r<t.length;r++)n[r-e]=t[r];return n}e.exports=n},{}]},{},[1])(1)}),define("app/core/SocketSandbox",["underscore"],function(t){"use strict";function e(t){if(this.socket=t,this.listeners={destroy:[]},t instanceof e){var n=this;this.socket.on("destroy",function(){n.destroy()})}}return e.prototype.destroy=function(){var e=this.listeners;if(null!=e){var n=e.destroy;if(t.isArray(n))for(var r=0,i=n.length;i>r;++r)n[r].call(this);delete this.listeners.destroy;for(var o=Object.keys(e),s=0,a=o.length;a>s;++s)for(var u=o[s],c=e[u],l=0,p=c.length;p>l;++l)this.socket.off(u,c[l]);this.listeners=null,this.socket=null}},e.prototype.sandbox=function(){return new e(this)},e.prototype.getId=function(){return this.socket.getId()},e.prototype.isConnected=function(){return this.socket.isConnected()},e.prototype.on=function(e,n){var r=this.listeners[e];return t.isUndefined(r)&&(r=this.listeners[e]=[]),r.push(n),"destroy"!==e&&this.socket.on(e,n),this},e.prototype.off=function(e,n){var r=this.listeners[e];if(t.isUndefined(r))return this;if(t.isUndefined(n))delete this.listeners[e];else{var i=t.indexOf(r,n);if(-1===i)return this;r.splice(i,1),0===r.length&&delete this.listeners[e]}return"destroy"!==e&&this.socket.off(e,n),this},e.prototype.emit=function(){var t=Array.prototype.slice.call(arguments),e=t.length-1;return t[e]=this.wrapCallback(t[e]),this.socket.emit.apply(this.socket,t),this},e.prototype.send=function(t,e){return this.socket.send(t,this.wrapCallback(e)),this},e.prototype.wrapCallback=function(e){if(!t.isFunction(e))return e;var n=this;return function(){null!==n.socket&&e.apply(this,arguments)}},e}),define("app/core/Socket",["app/core/SocketSandbox"],function(t){"use strict";function e(t){this.sio=t}return e.prototype.sandbox=function(){return new t(this)},e.prototype.getId=function(){return this.sio.id||null},e.prototype.isConnected=function(){return"open"===this.sio.io.readyState},e.prototype.isConnecting=function(){return"opening"===this.sio.io.readyState},e.prototype.connect=function(){this.sio.open()},e.prototype.reconnect=function(){this.connect()},e.prototype.on=function(t,e){return this.sio.on(t,e),this},e.prototype.off=function(t,e){return"undefined"==typeof e?this.sio.removeAllListeners(t):this.sio.off(t,e),this},e.prototype.emit=function(){return this.sio.json.emit.apply(this.sio.json,arguments),this},e.prototype.send=function(t,e){return this.sio.json.send(t,e),this},e}),define("app/socket",["underscore","socket.io","app/broker","app/core/Socket"],function(t,e,n,r){"use strict";var i=new r(e({path:"/sio",transports:["websocket"],timeout:1e4,reconnectionDelay:500,autoConnect:!1})),o=!1,s=!1;return i.on("connecting",function(){n.publish("socket.connecting",!1)}),i.on("connect",function(){o||(o=!0,n.publish("socket.connected",!1))}),i.on("connect_error",function(){o||n.publish("socket.connectFailed",!1)}),i.on("message",function(t){n.publish("socket.message",t)}),i.on("disconnect",function(){n.publish("socket.disconnected")}),i.on("reconnecting",function(){s=!0,n.publish("socket.connecting",!0)}),i.on("reconnect",function(){s=!1,n.publish("socket.connected",!0)}),i.on("reconnect_error",function(){s&&(s=!1,n.publish("socket.connectFailed",!0))}),i.on("error",function(){s&&n.publish("socket.connectFailed",!0)}),window.socket=i,i}),define("app/pubsub",["underscore","h5.pubsub/MessageBroker","app/broker","app/socket"],function(t,e,n,r){"use strict";function i(e,r,i){if(r)return void n.publish("pubsub.subscribeFailed",{err:r,topics:e});i.length>0&&n.publish("pubsub.subscribeNotAllowed",{topics:i});var o=t.difference(e,i);o.length>0&&n.publish("pubsub.subscribed",{topics:o})}function o(){r.isConnected()&&r.emit("pubsub.subscribe",c,i.bind(null,c)),c=[],l=null}function s(){var t=Object.keys(u);r.isConnected()&&r.emit("pubsub.unsubscribe",t),u={},p=null,n.publish("pubsub.unsubscribed",{topics:t})}var a=new e,u={},c=[],l=null,p=null;return a.on("new topic",function(t){"undefined"!=typeof u[t]&&delete u[t],r.isConnected()&&(c.push(t),null===l&&(l=setTimeout(o,0)))}),a.on("empty topic",function(t){r.isConnected()&&(u[t]=!0,null===p&&(p=setTimeout(s,0)))}),a.on("message",function(t,e,i){i.remote!==!0&&r.emit("pubsub.publish",t,e,i,function(r){r?n.publish("pubsub.publishFailed",{err:r,topic:t,message:e,meta:i}):n.publish("pubsub.published",{topic:t,message:e,meta:i})})}),r.on("connect",function(){var t=Object.keys(a.count());t.length&&r.emit("pubsub.subscribe",t,i.bind(null,t))}),r.on("pubsub.message",function(t,e,n){n.remote=!0,n.json&&"string"==typeof e&&(e=JSON.parse(e)),a.publish(t,e,n)}),window.pubsub=a,a}),define("app/core/util",["underscore"],function(t){"use strict";var e={};return e.inherits=function(e,n){t.extend(e,n);var r=function(){this.constructor=e};return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,e},e.decodeUriComponent=function(t){return decodeURIComponent(t.replace(/\+/g," "))},e.defineSandboxedProperty=function(e,n,r){t.isObject(e._sandboxedProperties)||(e._sandboxedProperties={});var i=e._sandboxedProperties,o=e.options[n];return t.isObject(o)?(i[n]=o,e[n]=o,void delete e.options[n]):(i[n]=null,void Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:function(){return null===i[n]&&(i[n]=r.sandbox()),i[n]},set:function(t){this[n]=t}}))},e.cleanupSandboxedProperties=function(e){var n=e._sandboxedProperties;if(t.isObject(n)){var r=Object.keys(n);r.forEach(function(e){var r=n[e];r&&t.isFunction(r.destroy)&&r.destroy()}),e._sandboxedProperties=null}},e.subscribeTopics=function(e,n,r,i){if(t.isFunction(r)&&(r=r.call(e)),t.isObject(r)&&t.size(r)){var o=e[n];t.each(r,function(n,r){t.isString(n)&&(n=e[n]),i&&(n=n.bind(e)),o.subscribe(r,n)})}},e.escapeRegExp=function(t){return t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},e}),define("app/core/View",["underscore","jquery","backbone.layout","app/broker","app/socket","app/pubsub","./util"],function(t,e,n,r,i,o,s){"use strict";function a(e){this.idPrefix=t.uniqueId("v"),this.options=e||{},this.timers={},this.promises=[],s.defineSandboxedProperty(this,"broker",r),s.defineSandboxedProperty(this,"pubsub",o),s.defineSandboxedProperty(this,"socket",i),n.call(this,e),s.subscribeTopics(this,"broker",this.localTopics,!0),s.subscribeTopics(this,"pubsub",this.remoteTopics,!0)}return s.inherits(a,n),a.prototype.delegateEvents=function(e){return e||(e=t.result(this,"events")),e?(this.undelegateEvents(),void Object.keys(e).forEach(function(n){var r=e[n];if(t.isFunction(r)||(r=this[r]),t.isFunction(r)){var i=n.match(/^(\S+)\s*(.*)$/),o=i[1]+".delegateEvents"+this.cid,s=i[2];""===s?this.$el.on(o,r.bind(this)):(t.isString(this.idPrefix)&&(s=s.replace(/#-/g,"#"+this.idPrefix+"-")),this.$el.on(o,s,r.bind(this)))}},this)):this},a.prototype.cleanup=function(){this.destroy(),this.cleanupSelect2(),s.cleanupSandboxedProperties(this),t.isObject(this.timers)&&(t.each(this.timers,clearTimeout),this.timers=null),this.cancelRequests()},a.prototype.destroy=function(){},a.prototype.cleanupSelect2=function(){var t=this;this.$(".select2-container").each(function(){t.$("#"+this.id.replace("s2id_","")).select2("destroy")})},a.prototype.beforeRender=function(){},a.prototype.serialize=function(){return{idPrefix:this.idPrefix}},a.prototype.afterRender=function(){},a.prototype.isRendered=function(){return this.hasRendered===!0},a.prototype.isDetached=function(){return!e.contains(document.documentElement,this.el)},a.prototype.ajax=function(t){return this.promised(e.ajax(t))},a.prototype.promised=function(e){if(!e||!t.isFunction(e.abort))return e;this.promises.push(e);var n=this;return e.always(function(){Array.isArray(n.promises)&&n.promises.splice(n.promises.indexOf(e),1)}),e},a.prototype.cancelRequests=function(){this.promises.forEach(function(t){t.abort()}),this.promises=[]},a.prototype.cancelAnimations=function(t,e){this.$(":animated").stop(t!==!1,e!==!1)},a.prototype.$id=function(e){var n="#";return t.isString(this.idPrefix)&&(n+=this.idPrefix+"-"),this.$(n+e)},a}),define("app/core/templates/messages",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<ol class="messages"></ol>\n');return __output.join("")}}),define("app/core/templates/message",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="message message-'),__output.push(type),__output.push('">'),__output.push(text),__output.push("</div>\n");return __output.join("")}}),define("app/core/views/MessagesView",["underscore","jquery","app/i18n","../View","app/core/templates/messages","app/core/templates/message"],function(t,e,n,r,i,o){"use strict";var s=0,a=r.extend({template:i,events:{"click .message":function(t){t.currentTarget.parentNode===this.el&&t.currentTarget.getAttribute("data-view")===this.idPrefix&&this.hide(e(t.currentTarget))}},localTopics:{"router.executing":function(){this.hide()}}});return a.prototype.initialize=function(){this.$loadingMessage=null,this.loadingTimer=null,this.loadingCounter=0,this.hideTimers=[],this.loading=this.loading.bind(this),this.loaded=this.loaded.bind(this)},a.prototype.destroy=function(){this.$loadingMessage=null,null!==this.loadingTimer&&(clearTimeout(this.loadingTimer),this.loadingTimer=null),this.hideTimers.length>0&&(this.hideTimers.forEach(clearTimeout),this.hideTimers=null),this.$('.message[data-view="'+this.idPrefix+'"]').remove()},a.prototype.show=function(t){var n=e(o({type:t.type||"info",text:t.text}));return this.$el.append(n.attr("data-view",this.idPrefix)),this.moveDown(n),n.attr("data-top",n.position().top).css("margin-left",-(n.width()/2)+"px"),t.immediate?n.css("opacity",1):n.animate({opacity:1}),this.scheduleHiding(n,t.time),n},a.prototype.hide=function(t,e){if(t){if(t.hasClass("message-hiding"))return;t.addClass("message-hiding")}else t=this.$('.message[data-view="'+this.idPrefix+'"]'),this.$loadingMessage=null;1===t.length&&(this.moveUp(t),this.removeHideTimer(t)),e?t.remove():t.animate({opacity:0},function(){t.remove()})},a.prototype.loading=function(){this.loadingCounter+=1,null===this.loadingTimer&&(this.loadingTimer=setTimeout(this.showLoadingMessage.bind(this),s))},a.prototype.loaded=function(){this.hideLoadingMessage()},a.prototype.loadingFailed=function(e){this.hideLoadingMessage(),this.show({type:"error",text:t.isString(e)?e:n("core","MSG:LOADING_FAILURE")})},a.prototype.showLoadingMessage=function(){this.loadingTimer=null,null===this.$loadingMessage&&(this.$loadingMessage=this.show({type:"warning",text:'<i class="fa fa-spinner fa-spin"></i><span>'+n("core","MSG:LOADING")+"</span>",immediate:!0}))},a.prototype.hideLoadingMessage=function(){this.loadingCounter>0&&--this.loadingCounter,0===this.loadingCounter&&(null!==this.loadingTimer&&(clearTimeout(this.loadingTimer),this.loadingTimer=null),null!==this.$loadingMessage&&(this.hide(this.$loadingMessage),this.$loadingMessage=null))},a.prototype.moveDown=function(t){this.moveTopBy(this.$('.message[data-view="'+this.idPrefix+'"]'),t,this.getMoveOffset(t))},a.prototype.moveUp=function(t){this.moveTopBy(t.prevAll(".message"),t,-this.getMoveOffset(t))},a.prototype.moveTopBy=function(t,n,r){t.each(function(){if(this!==n[0]){var t=e(this),i=parseInt(t.attr("data-top"),10)+r;t.attr("data-top",i),t.animate({top:i+"px"})}})},a.prototype.getMoveOffset=function(t){return t.outerHeight()+8},a.prototype.scheduleHiding=function(e,n){if(t.isNumber(n)){1e3>n&&(n=1e3);
var r=setTimeout(this.hide.bind(this,e),n);e.data("hideTimer",r),this.hideTimers.push(r)}},a.prototype.removeHideTimer=function(e){var n=e.data("hideTimer");t.isUndefined(n)||(clearTimeout(n),e.data("hideTimer",void 0),this.hideTimers.splice(this.hideTimers.indexOf(n),1))},a}),define("app/core/templates/dialogContainer",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="modal fade viewport-dialog" tabindex="-1">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close cancel">√ó</button>\n        <h3 class="modal-title"></h3>\n      </div>\n      <div class="modal-body"></div>\n    </div>\n  </div>\n</div>\n');return __output.join("")}}),define("app/core/Viewport",["require","underscore","jquery","./View","./util","./views/MessagesView","app/core/templates/dialogContainer"],function(t,e,n,r,i,o,s){"use strict";function a(t){r.call(this,t),this.msg=t.messagesView?t.messagesView:new o({el:this.el}),this.document=t.document||window.document,this.layouts={},this.currentLayout=null,this.currentLayoutName=null,this.currentPage=null,this.$dialog=null,this.dialogQueue=[],this.currentDialog=null,this.closeDialog=this.closeDialog.bind(this),this.$el.on("click",".viewport-dialog .cancel",this.closeDialog)}var u=function(t){return new t};return i.inherits(a,r),a.prototype.cleanup=function(){this.broker.destroy(),this.msg.remove(),this.$dialog.remove(),this.currentPage&&this.currentPage.remove(),this.currentLayout&&this.currentLayout.remove(),this.currentDialog&&this.currentDialog.remove(),e.invoke(this.dialogQueue.filter(e.isObject),"remove"),this.$el.off("click",".viewport-dialog .cancel",this.closeDialog),this.broker=null,this.msg=null,this.$dialog=null,this.currentLayout=null,this.currentDialog=null,this.dialogQueue=null,this.layouts=null},a.prototype.afterRender=function(){return null!==this.$dialog?this.closeDialog():(this.$dialog=n(s()).appendTo(this.el).modal({show:!1,backdrop:!0}),this.$dialog.on("shown.bs.modal",this.onDialogShown.bind(this)),void this.$dialog.on("hidden.bs.modal",this.onDialogHidden.bind(this)))},a.prototype.registerLayout=function(t,e){return this.layouts[t]=e,this},a.prototype.loadPage=function(n,r){this.msg.loading(),e.isFunction(r)||(r=u);var i=this;t([].concat(n),function(){i.showPage(r.apply(null,arguments)),i.msg.loaded()})},a.prototype.showPage=function(t){function r(){for(var r=[],i=0;i<arguments.length;++i){var o=arguments[i];Array.isArray(o)?r.push.apply(r,o):r.push(o)}return n.when.apply(n,e.map(r,t.promised,t))}function i(){a.broker.publish("viewport.page.loaded",t),null!==a.currentPage&&a.currentPage.remove(),a.currentPage=t;var n=a.setLayout(s);e.isFunction(n.setUpPage)&&n.setUpPage(t),e.isFunction(t.setUpLayout)&&t.setUpLayout(n),e.isObject(t.view)&&t.setView(t.view),n.setView(n.pageContainerSelector,t),a.isRendered()?n.isRendered()?t.render():n.render():a.render(),a.broker.publish("viewport.page.shown",t)}function o(){a.broker.publish("viewport.page.loadingFailed",t),t.remove()}var s=e.result(t,"layoutName");if(!e.isObject(this.layouts[s]))throw new Error("Unknown layout: `"+s+"`");var a=this;this.broker.publish("viewport.page.loading",t),e.isFunction(t.load)?t.load(r).then(i,o):i()},a.prototype.showDialog=function(t,n){if(null!==this.currentDialog)return this.dialogQueue.push(t,n),this;var r=t.afterRender,i=this;t.afterRender=function(){var n=i.$dialog.find(".modal-body");n.children()[0]!==t.el&&n.empty().append(t.el),i.$dialog.modal("show"),e.isFunction(r)&&r.apply(t,arguments)},this.currentDialog=t;var o=this.$dialog.find(".modal-header");return n?(o.find(".modal-title").text(n),o.show()):o.hide(),t.dialogClassName&&this.$dialog.addClass(e.result(t,"dialogClassName")),t.render(),this},a.prototype.closeDialog=function(t){return null===this.currentDialog?this:(this.$dialog.modal("hide"),t&&t.preventDefault(),this)},a.prototype.closeAllDialogs=function(){this.dialogQueue=[],this.closeDialog()},a.prototype.setLayout=function(t){if(t===this.currentLayoutName)return e.isFunction(this.currentLayout.reset)&&this.currentLayout.reset(),this.currentLayout;var n=this.layouts[t],r=this.options.selector||"";return e.isObject(this.currentLayout)&&this.removeView(r),this.currentLayoutName=t,this.currentLayout=n(),this.setView(r,this.currentLayout),this.currentLayout},a.prototype.onDialogShown=function(){this.currentDialog.$("[autofocus]").focus(),e.isFunction(this.currentDialog.onDialogShown)&&this.currentDialog.onDialogShown(this),this.broker.publish("viewport.dialog.shown",this.currentDialog)},a.prototype.onDialogHidden=function(){this.currentDialog.dialogClassName&&this.$dialog.removeClass(e.result(this.currentDialog,"dialogClassName")),e.isFunction(this.currentDialog.remove)&&(this.currentDialog.remove(),this.broker.publish("viewport.dialog.hidden",this.currentDialog)),this.currentDialog=null,this.dialogQueue.length&&this.showDialog(this.dialogQueue.shift(),this.dialogQueue.shift())},a}),define("app/viewport",["app/broker","app/core/Viewport"],function(t,e){"use strict";var n=new e({el:document.body,selector:"#app-viewport"});return t.subscribe("router.executing",function(){window.scrollTo(0,0)}),window.viewport=n,n}),define("h5.rql/Term",["require","exports","module"],function(t,e,n){"use strict";function r(t,e){this.name=t||null,this.args=e||[]}n.exports=r}),define("h5.rql/specialTerms",["require","exports","module"],function(t,e,n){"use strict";function r(t,e,n){t.fields={};for(var r="select"===e,i=0,o=n.length;o>i;++i){var s=n[i];Array.isArray(s)&&(s=s.join(".")),t.fields[s]=r}}function i(t,e,n){t.sort={};for(var r=0,i=n.length;i>r;++r){var o=n[r];Array.isArray(o)&&(o=o.join(".")),"-"===o[0]?t.sort[o.substr(1)]=-1:"+"===o[0]?t.sort[o.substr(1)]=1:t.sort[o]=1}}function o(t,e,n){var r=parseInt(n[0],10),i=0;n.length>1&&(i=parseInt(n[1],10)),t.limit=isNaN(r)||1>r?-1:r,t.skip=isNaN(i)||0>i?0:i}n.exports={select:r,exclude:r,sort:i,limit:o}}),define("h5.rql/autoConvertedMap",["require","exports","module"],function(t,e,n){"use strict";n.exports={"true":!0,"false":!1,"null":null,undefined:void 0,Infinity:1/0,"-Infinity":-1/0}}),define("h5.rql/serializers/stringSerializer",["require","exports","module","../specialTerms","../autoConvertedMap"],function(t,e){function n(t,e){var n=[],a=e&&e.doubleEncode?h:d;return r(n,t.fields),i(n,t.sort),o(n,t.limit,t.skip),s(n,a,t.selector),n.join("").substr(1)}function r(t,e){var n=Object.keys(e);0!==n.length&&t.push(e[n[0]]?"&select(":"&exclude(",n.join(","),")")}function i(t,e){var n=Object.keys(e),r=n.length;if(0!==r){t.push("&sort(");for(var i=0;r>i;++i){var o=n[i];-1===e[o]&&t.push("-"),t.push(o),r-1>i&&t.push(",")}t.push(")")}}function o(t,e,n){-1!==e&&(t.push("&limit(",e),0!==n&&t.push(",",n),t.push(")"))}function s(t,e,n){var r=n.args.length;if(0!==r)if("and"===n.name)for(var i=0;r>i;++i){var o=n.args[i];f.hasOwnProperty(o.name)||(t.push("&"),a(t,e,o,r))}else t.push("&"),a(t,e,n,r,!0)}function a(t,e,n,r,i){if(Array.isArray(n))return void c(t,e,n);if(null===n||"object"!=typeof n||"string"!=typeof n.name||!Array.isArray(n.args))return void l(t,e,n);if(_.hasOwnProperty(n.name)&&n.args.length>1)return a(t,e,n.args[0],0),t.push(_[n.name]),void a(t,e,n.args[1],0);var o=",";"and"===n.name?o="&":"or"===n.name&&i!==!0&&(o="|"),u(t,e,o,n,r)}function u(t,e,n,r,i){var o=r.args.length;","===n?t.push(r.name,"("):1!==i&&t.push("(");for(var s=0;o>s;++s)a(t,e,r.args[s],o),o-1>s&&t.push(n);(","===n||-1!==i)&&t.push(")")}function c(t,e,n){t.push("(");for(var r=0,i=n.length;i>r;++r)a(t,e,n[r],i),i-1>r&&t.push(",");t.push(")")}function l(t,e,n){switch(typeof n){case"undefined":t.push("undefined");break;case"boolean":t.push(n?"true":"false");break;case"number":t.push(n.toString(10));break;case"object":p(t,e,n);break;default:0===n.length?t.push("string:"):isNaN(+n)?m.hasOwnProperty(n)?t.push("string:",n):t.push(e(n)):t.push("string:",n.toString())}}function p(t,e,n){if(null===n)t.push("null");else if(n instanceof Date)t.push("epoch:",n.getTime().toString());else if(n instanceof RegExp){var r=n.toString(),i=r.lastIndexOf("/");""===r.substr(i+1)&&(r=r.substr(1,i-1)),t.push("re:",e(r))}else t.push("function"==typeof n.convertToRqlValue?n.convertToRqlValue(e):e(n.toString()))}function d(t){return t=encodeURIComponent(t),/[\(\)]/.test(t)&&(t=t.replace(/\(/g,"%28").replace(/\)/g,"%29")),t}function h(t){return d(d(t))}var f=t("../specialTerms"),m=t("../autoConvertedMap");e.fromQuery=n;var _={eq:"=",ne:"!=",le:"<=",ge:">=",lt:"<",gt:">","in":"=in=",nin:"=nin="}}),define("h5.rql/Query",["require","exports","module","./Term","./serializers/stringSerializer"],function(t,e,n){"use strict";function r(){this.selector=new i("and"),this.fields={},this.skip=0,this.limit=-1,this.sort={}}var i=t("./Term"),o=t("./serializers/stringSerializer");n.exports=r,r.fromObject=function(t){if(t instanceof r)return t;var e=new r;return t?(t.selector&&(e.selector=t.selector),t.fields&&(e.fields=t.fields),t.skip&&(e.skip=t.skip),t.limit&&(e.limit=t.limit),t.sort&&(e.sort=t.sort),e):e},r.prototype.toString=function(t){return o.fromQuery(this,t)},r.prototype.isEmpty=function(){return 0===this.skip&&-1===this.limit&&0===Object.keys(this.fields).length&&0===Object.keys(this.sort).length&&0===this.selector.args.length}}),define("h5.rql/valueConverters",["require","exports","module","./autoConvertedMap"],function(t,e,n){"use strict";function r(t,e){if(d.hasOwnProperty(t))return d[t];var n=+t;return isNaN(n)||n.toString()!==t?(t=decodeURIComponent(t),e.options.jsonQueryCompatible&&"'"===t[0]&&"'"===t[t.length-1]?JSON.parse('"'+t.substring(1,t.length-1)+'"'):t):n}function i(t){var e=+t;if(isNaN(e))throw new Error("Invalid number: "+t);return e}function o(t){var e=new Date(+t);if(isNaN(e.getTime()))throw new Error("Invalid date: "+t);return e}function s(t){return t=decodeURIComponent(t),t="0000".substr(0,4-t.length)+t,t+="0000-01-01T00:00:00Z".substring(t.length),a(t)}function a(t){t=decodeURIComponent(t);var e,n=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(t);if(e=new Date(null!==n?Date.UTC(+n[1],+n[2]-1,+n[3],+n[4],+n[5],+n[6]):t),isNaN(e.getTime()))throw new Error("Invalid date: "+t);return e}function u(t){return t?!0:!1}function c(t){return decodeURIComponent(t)}function l(t){t=decodeURIComponent(t);var e=t,n="";if("/"===t[0]){var r=t.lastIndexOf("/");e=t.substr(1,r-1),n=t.substr(r+1)}return new RegExp(e,n)}function p(t){return t=decodeURIComponent(t).replace(/([\\\|\(\)\[\]\{\}\^\$\*\+\?\.<>])/g,"\\$1").replace(/\\\*/g,".*").replace(/\\\?/g,".?"),t=".*"===t.substr(0,2)?t.substr(2):"^"+t,t=".*"===t.substr(t.length-2)?t.substr(0,t.length-2):t+"$",new RegExp(t,"i")}var d=t("./autoConvertedMap");n.exports={"default":r,auto:r,number:i,epoch:o,isodate:s,date:a,"boolean":u,string:c,re:l,glob:p}}),define("h5.rql/Parser",["require","exports","module","./Term","./valueConverters"],function(t,e,n){"use strict";function r(t){this.options=t instanceof r.Options?t:new r.Options(t)}var i=t("./Term"),o=t("./valueConverters");n.exports=r;var s=/^[\+\*\$\-:\w%\._!'~]$/,a=/[\+\*\$\-:\w%\._!'~]*\/[\+\*\$\-:\w%\._!'~\/]*/g,u=new RegExp("(\\([\\+\\*\\$\\-:\\w%\\._,]+\\)|[\\+\\*\\$\\-:\\w%\\._]*|)([<>!]?=(?:[\\w]*=)?|>|<)(\\([\\+\\*\\$\\-:\\w%\\._,!'~]*\\)|[\\+\\*\\$\\-:\\w%\\._!'~]*|)","g"),c={"=":"eq","==":"eq",">":"gt",">=":"ge","<":"lt","<=":"le","!=":"ne"};r.Options=function(t){("object"!=typeof t||null===t)&&(t={}),this.jsonQueryCompatible=t.jsonQueryCompatible===!0,this.fiqlCompatible=!t.hasOwnProperty("fiqlCompatible")||t.fiqlCompatible===!0,this.allowSlashedArrays=t.allowSlashedArrays===!0,this.allowEmptyValues=t.allowEmptyValues===!0,this.defaultValueConverter="function"==typeof t.defaultValueConverter?t.defaultValueConverter:o["default"],this.specialTerms=Array.isArray(t.specialTerms)?t.specialTerms:[],this.emptyValue=t.hasOwnProperty("emptyValue")?t.emptyValue:""},r.prototype.parse=function(t,e){var n="object"==typeof e&&null!==e,r=this.options.specialTerms,o=null,a=new i,u=[],c=!0;this.options.jsonQueryCompatible&&(t=this.makeJsonQueryCompatible(t)),this.options.allowSlashedArrays&&(t=this.convertSlashedArrays(t)),this.options.fiqlCompatible&&(t=this.convertFiql(t));for(var l=0,p=t.length;p>l;++l){var d=t[l];switch(d){case"(":u.push(a),a=new i(o),n&&null!==o&&-1!==r.indexOf(o)&&(delete e[o],e[o]=a.args),o=null,c=!0;break;case",":if(c===!1){if(!this.options.allowEmptyValues)throw new Error("Empty value at position "+l+" is not allowed.");o=this.options.emptyValue}null!==o&&(a.args.push(this.convertStringToValue(o)),o=null),c=!1;break;case")":null!==o&&(a.args.push(this.convertStringToValue(o)),o=null);var h=null===a.name?a.args:a;a=u.pop(),a.args.push(h),c=!0;break;case"&":case"|":var f="&"===d?"and":"or";if(null!==a.name&&a.name!==f)throw new Error("Can not mix conjunctions within a group at position "+l+", use parenthesises around each set of the same conjunctions (& and |)");a.name="&"===d?"and":"or",null!==o&&(a.args.push(this.convertStringToValue(o)),o=null);break;default:if(!s.test(d))throw new Error("Invalid character at position "+l+": '"+d+"' ("+d.charCodeAt(0)+")");null===o?o=d:o+=d,c=!0}}return null!==o&&a.args.push(this.convertStringToValue(o)),null===a.name&&(a.name="and"),"and"===a.name&&1===a.args.length&&a.args[0]instanceof i&&"and"===a.args[0].name&&(a=a.args[0]),a},r.prototype.makeJsonQueryCompatible=function(t){return this.options.jsonQueryCompatible&&(t=t.replace(/%3C=/g,"=le=").replace(/%3E=/g,"=ge=").replace(/%3C/g,"=lt=").replace(/%3E/g,"=gt=")),t},r.prototype.convertSlashedArrays=function(t){return-1!==t.indexOf("/")?t.replace(a,function(t){return"("+t.replace(/\//g,",")+")"}):t},r.prototype.convertFiql=function(t){return t.replace(u,function(t,e,n,r){return n=n.length<3?c[n]:n.substring(1,n.length-1),n+"("+e+","+r+")"})},r.prototype.convertStringToValue=function(t){var e,n=t.indexOf(":");if(-1!==n){var r=t.substr(0,n);if(e=o[r],"undefined"==typeof e)throw new Error("Unknown value converter: "+r);t=t.substr(n+1)}else e=this.options.defaultValueConverter;return e(t,this)}}),define("h5.rql/index",["require","exports","module","./Term","./Query","./Parser","./specialTerms","./valueConverters"],function(t,e){"use strict";var n=t("./Term"),r=t("./Query"),i=t("./Parser"),o=t("./specialTerms"),s=t("./valueConverters");e.Term=n,e.Query=r,e.Parser=i,e.specialTerms=o,e.valueConverters=s,e.parser=null,e.parse=function(t){null===e.parser&&(e.parser=new i({jsonQueryCompatible:!0,fiqlCompatible:!0,allowEmptyValues:!1,allowSlashedArrays:!0,specialTerms:Object.keys(o)}));var n=new r,s={};n.selector=e.parser.parse(t,s);for(var a in s)s.hasOwnProperty(a)&&o.hasOwnProperty(a)&&o[a](n,a,s[a]);return n}}),define("app/core/Request",["h5.rql/index","./util"],function(t,e){"use strict";function n(t){"/"!==t[0]&&(t="/"+t);var e=t.match(r);this.url=t,this.path=("/"===e[1][0]?"":"/")+e[1],this.queryString=e[2]||"",this.fragment=e[3]||"",this.params={},this.query={},this.rql={},""!==this.queryString&&this.defineGetters()}var r=/^\/(.*?)(?:\?(.*?))?(?:#(.*?))?$/;return n.prototype.defineGetters=function(){Object.defineProperty(this,"query",{enumerable:!0,configurable:!0,get:function(){return this.parseQueryString()},set:function(t){this.query=t}}),Object.defineProperty(this,"rql",{enumerable:!0,configurable:!0,get:function(){return this.parseRqlString()},set:function(t){this.rql=t}})},n.prototype.parseQueryString=function(){delete this.query;for(var t=this.queryString.split("&"),n={},r=0,i=t.length;i>r;++r){var o=t[r],s=o.indexOf("=");if(-1!==s){var a=e.decodeUriComponent(o.substr(0,s)),u=e.decodeUriComponent(o.substr(s+1));n[a]=u}}return this.query=n,n},n.prototype.parseRqlString=function(){return delete this.rql,this.rql=t.parse(this.queryString),this.rql},n}),define("app/core/Router",["underscore","./util","./Request"],function(t,e,n){"use strict";function r(t){this.broker=t,this.routes=[],this.dispatching=!1,this.dispatchQueue=[],this.currentRequest=null,this.previousUrl=null}function i(n,r){return function(i){var o=n.exec(i.path);if(null===o)return!1;var s=o.length;if(1===s)return!0;var a,u=t.isArray(r)?r.length:0;if(s===u+1)for(a=0;u>a;++a)i.params[r[a]]=e.decodeUriComponent(o[a+1]);else for(a=0;s>a;++a)i.params[a]=e.decodeUriComponent(o[a]);return!0}}var o=/([:*])([\w\-]+)?/g,s=/[\-\[\]{}()+?.,\\\^$|#\s]/g;return r.prototype.getCurrentRequest=function(){return this.currentRequest},r.prototype.map=function(t){var e=Array.prototype.slice.call(arguments);e.shift(),this.routes.unshift(this.createMatcher(t),e)},r.prototype.navigate=function(e,n){this.broker.publish("router.navigate",t.extend({url:e},n))},r.prototype.replace=function(t){this.broker.publish("router.navigate",{url:t,trigger:!0,replace:!0})},r.prototype.update=function(t){this.broker.publish("router.navigate",{url:t,trigger:!1,replace:!0})},r.prototype.dispatch=function(e){if(!t.isUndefined(e)){if(null===e&&(e="/"),this.dispatching)return void this.dispatchQueue.push(e);this.dispatching=!0;var r=new n(e);this.broker.publish("router.dispatching",r);var i=this.match(r);if(null===i){this.dispatching=!1;var o=this.dispatchQueue.shift();t.isUndefined(o)?this.broker.publish("router.404",r):this.dispatch(o)}else this.broker.publish("router.matched",{handlers:i,req:r}),t.defer(this.execute.bind(this,i,r))}},r.prototype.match=function(t){for(var e=this.routes,n=0,r=e.length;r>n;n+=2){var i=e[n];if(i(t))return e[n+1]}return null},r.prototype.execute=function(t,e){function n(i){i+1<t.length?t[i](e,r,n.bind(null,i+1)):t[i](e,r)}this.currentRequest=e,this.broker.publish("router.executing",{handlers:t,req:e});var r=this.previousUrl;n(0),this.previousUrl=e.url,this.dispatching=!1,this.dispatch(this.dispatchQueue.shift())},r.prototype.createMatcher=function(e){if(e instanceof RegExp)return i(e);if(e=e.trim(),""===e||"/"===e)return function(t){return""===t.path||"/"===t.path};var n=[],r=!1,a=e.replace(s,"\\$&");return a=a.replace(o,function(e,i,o){return r=!0,t.isUndefined(o)?"*"===i?".*":e:(n.push(o),"*"===i?"(.*?)":"([^/#?;]*)")}),r?i(new RegExp("^"+a+"$"),n):function(t){return t.path===e}},r}),define("app/core/templates/error400",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<p class="well">'),__output.push(t("core","ERROR:400")),__output.push("</p>\n");return __output.join("")}}),define("app/core/templates/error401",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<p class="well">'),__output.push(t("core","ERROR:401")),__output.push("</p>\n");return __output.join("")}}),define("app/core/templates/error404",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<p class="well">'),__output.push(t("core","ERROR:404")),__output.push("</p>\n");return __output.join("")}}),define("app/core/pages/ErrorPage",["app/i18n","../View","app/core/templates/error400","app/core/templates/error401","app/core/templates/error404"],function(t,e,n,r,i){"use strict";return e.extend({layoutName:"page",pageId:"error",breadcrumbs:function(){return[t.bound("core","BREADCRUMBS:error",{code:this.options.code,codeStr:"e"+this.options.code})]},initialize:function(){var t;switch(this.options.code){case 401:t=r;break;case 404:t=i;break;default:t=n}this.view=new e({template:t})}})}),define("app/router",["backbone","app/broker","app/viewport","app/core/Router","app/core/pages/ErrorPage"],function(t,e,n,r,i){"use strict";t.Router.prototype._extractParameters=function(t,e){return t.exec(e).slice(1)};var o=new r(e),s=new t.Router;s.route("*catchall","catchall",function(t){o.dispatch(t)}),e.subscribe("router.navigate",function(t){var e=t.url,n=e.charAt(0);("#"===n||"/"===n)&&(e=e.substr(1)),s.navigate(e,{trigger:t.trigger===!0,replace:t.replace===!0})});var a="/404";return e.subscribe("router.404",function(t){t.path===a?n.showPage(new i({code:404,req:t})):o.dispatch(a)}),window.router=o,o}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("moment-timezone",["moment"],e):"object"==typeof exports?module.exports=e(require("moment")):e(t.moment)}(this,function(t){"use strict";function e(t){return t>96?t-87:t>64?t-29:t-48}function n(t){var n,r=0,i=t.split("."),o=i[0],s=i[1]||"",a=1,u=0,c=1;for(45===t.charCodeAt(0)&&(r=1,c=-1),r;r<o.length;r++)n=e(o.charCodeAt(r)),u=60*u+n;for(r=0;r<s.length;r++)a/=60,n=e(s.charCodeAt(r)),u+=n*a;return u*c}function r(t){for(var e=0;e<t.length;e++)t[e]=n(t[e])}function i(t,e){for(var n=0;e>n;n++)t[n]=Math.round((t[n-1]||0)+6e4*t[n]);t[e-1]=1/0}function o(t,e){var n,r=[];for(n=0;n<e.length;n++)r[n]=t[e[n]];return r}function s(t){var e=t.split("|"),n=e[2].split(" "),s=e[3].split(""),a=e[4].split(" ");return r(n),r(s),r(a),i(a,s.length),{name:e[0],abbrs:o(e[1].split(" "),s),offsets:o(n,s),untils:a}}function a(t){t&&this._set(s(t))}function u(t){return(t||"").toLowerCase().replace(/\//g,"_")}function c(t){var e,n,r;for("string"==typeof t&&(t=[t]),e=0;e<t.length;e++)n=new a(t[e]),r=u(n.name),R[r]=n,h(r)}function l(t){return R[u(t)]||null}function p(){var t,e=[];for(t in R)R.hasOwnProperty(t)&&R[t]&&e.push(R[t].name);return e.sort()}function d(t){var e,n;for("string"==typeof t&&(t=[t]),e=0;e<t.length;e++)n=t[e].split("|"),m(n[0],n[1]),m(n[1],n[0])}function h(t){if(A[t]){var e,n=R[t],r=A[t];for(e=0;e<r.length;e++)f(n,r[e]);A[t]=null}}function f(t,e){var n=R[u(e)]=new a;n._set(t),n.name=e}function m(t,e){t=u(t),R[t]?f(R[t],e):(A[t]=A[t]||[],A[t].push(e))}function _(t){c(t.zones),d(t.links),w.dataVersion=t.version}function g(t){return g.didShowError||(g.didShowError=!0,y("moment.tz.zoneExists('"+t+"') has been deprecated in favor of !moment.tz.zone('"+t+"')")),!!l(t)}function v(t){return!(!t._a||void 0!==t._tzm)}function y(t){"undefined"!=typeof console&&"function"==typeof console.error}function w(){var e=Array.prototype.slice.call(arguments,0,-1),n=arguments[arguments.length-1],r=l(n),i=t.utc.apply(null,e);return r&&v(i)&&i.add(r.parse(i),"minutes"),i.tz(n),i}function E(t){return function(){return this._z?this._z.abbr(this):t.call(this)}}function b(t){return function(){return this._z=null,t.apply(this,arguments)}}if(void 0!==t.tz)return t;var T="0.2.4",R={},A={},P=t.version.split("."),O=+P[0],S=+P[1];(2>O||2===O&&6>S)&&y("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+t.version+". See momentjs.com"),a.prototype={_set:function(t){this.name=t.name,this.abbrs=t.abbrs,this.untils=t.untils,this.offsets=t.offsets},_index:function(t){var e,n=+t,r=this.untils;for(e=0;e<r.length;e++)if(n<r[e])return e},parse:function(t){var e,n,r,i,o=+t,s=this.offsets,a=this.untils,u=a.length-1;for(i=0;u>i;i++)if(e=s[i],n=s[i+1],r=s[i?i-1:i],n>e&&w.moveAmbiguousForward?e=n:e>r&&w.moveInvalidForward&&(e=r),o<a[i]-6e4*e)return s[i];return s[u]},abbr:function(t){return this.abbrs[this._index(t)]},offset:function(t){return this.offsets[this._index(t)]}},w.version=T,w.dataVersion="",w._zones=R,w._links=A,w.add=c,w.link=d,w.load=_,w.zone=l,w.zoneExists=g,w.names=p,w.Zone=a,w.unpack=s,w.unpackBase60=n,w.needsOffset=v,w.moveInvalidForward=!0,w.moveAmbiguousForward=!1;var C=t.fn;t.tz=w,t.updateOffset=function(t,e){var n;t._z&&(n=t._z.offset(t),Math.abs(n)<16&&(n/=60),t.zone(n,e))},C.tz=function(e){return e?(this._z=l(e),this._z?t.updateOffset(this):y("Moment Timezone has no data for "+e+". See http://momentjs.com/timezone/docs/#/data-loading/."),this):this._z?this._z.name:void 0},C.zoneName=E(C.zoneName),C.zoneAbbr=E(C.zoneAbbr),C.utc=b(C.utc);var k=t.momentProperties;return"[object Array]"===Object.prototype.toString.call(k)?(k.push("_z"),k.push("_a")):k&&(k._z=null),_({version:"2014i",zones:["Africa/Abidjan|GMT|0|0|","Africa/Addis_Ababa|EAT|-30|0|","Africa/Algiers|CET|-10|0|","Africa/Bangui|WAT|-10|0|","Africa/Blantyre|CAT|-20|0|","Africa/Cairo|EET EEST|-20 -30|0101010101010101010101010101010|1Cby0 Fb0 c10 8n0 8Nd0 gL0 e10 mn0 1o10 jz0 gN0 pb0 1qN0 dX0 e10 xz0 1o10 bb0 e10 An0 1o10 5z0 e10 FX0 1o10 2L0 e10 IL0 1C10 Lz0","Africa/Casablanca|WET WEST|0 -10|01010101010101010101010101010101010101010|1Cco0 Db0 1zd0 Lz0 1Nf0 wM0 co0 go0 1o00 s00 dA0 vc0 11A0 A00 e00 y00 11A0 uo0 e00 DA0 11A0 rA0 e00 Jc0 WM0 m00 gM0 M00 WM0 jc0 e00 RA0 11A0 dA0 e00 Uo0 11A0 800 gM0 Xc0","Africa/Ceuta|CET CEST|-10 -20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Africa/Johannesburg|SAST|-20|0|","Africa/Tripoli|EET CET CEST|-20 -10 -20|0120|1IlA0 TA0 1o00","Africa/Windhoek|WAST WAT|-20 -10|01010101010101010101010|1C1c0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0","America/Adak|HAST HADT|a0 90|01010101010101010101010|1BR00 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Anchorage|AKST AKDT|90 80|01010101010101010101010|1BQX0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Anguilla|AST|40|0|","America/Araguaina|BRT BRST|30 20|010|1IdD0 Lz0","America/Argentina/Buenos_Aires|ART|30|0|","America/Asuncion|PYST PYT|30 40|01010101010101010101010|1C430 1a10 1fz0 1a10 1fz0 1cN0 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0","America/Atikokan|EST|50|0|","America/Bahia|BRT BRST|30 20|010|1FJf0 Rb0","America/Bahia_Banderas|MST CDT CST|70 50 60|01212121212121212121212|1C1l0 1nW0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Belem|BRT|30|0|","America/Belize|CST|60|0|","America/Boa_Vista|AMT|40|0|","America/Bogota|COT|50|0|","America/Boise|MST MDT|70 60|01010101010101010101010|1BQV0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Campo_Grande|AMST AMT|30 40|01010101010101010101010|1BIr0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10","America/Cancun|CST CDT|60 50|01010101010101010101010|1C1k0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Caracas|VET|4u|0|","America/Cayenne|GFT|30|0|","America/Chicago|CST CDT|60 50|01010101010101010101010|1BQU0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Chihuahua|MST MDT|70 60|01010101010101010101010|1C1l0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Creston|MST|70|0|","America/Dawson|PST PDT|80 70|01010101010101010101010|1BQW0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Detroit|EST EDT|50 40|01010101010101010101010|1BQT0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Eirunepe|AMT ACT|40 50|01|1KLE0","America/Glace_Bay|AST ADT|40 30|01010101010101010101010|1BQS0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Godthab|WGT WGST|30 20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","America/Goose_Bay|AST ADT|40 30|01010101010101010101010|1BQQ1 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Grand_Turk|EST EDT AST|50 40 40|01010101012|1BQT0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Guayaquil|ECT|50|0|","America/Guyana|GYT|40|0|","America/Havana|CST CDT|50 40|01010101010101010101010|1BQR0 1wo0 U00 1zc0 U00 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0","America/La_Paz|BOT|40|0|","America/Lima|PET|50|0|","America/Metlakatla|PST|80|0|","America/Miquelon|PMST PMDT|30 20|01010101010101010101010|1BQR0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Montevideo|UYST UYT|20 30|01010101010101010101010|1BQQ0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10","America/Noronha|FNT|20|0|","America/North_Dakota/Beulah|MST MDT CST CDT|70 60 60 50|01232323232323232323232|1BQV0 1zb0 Oo0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Paramaribo|SRT|30|0|","America/Port-au-Prince|EST EDT|50 40|0101010101010101010|1GI70 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Santa_Isabel|PST PDT|80 70|01010101010101010101010|1C1m0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Santiago|CLST CLT|30 40|01010101010101010101010|1C1f0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1zb0 Op0 1zb0 Rd0 1wn0 Rd0","America/Sao_Paulo|BRST BRT|20 30|01010101010101010101010|1BIq0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10","America/Scoresbysund|EGT EGST|10 0|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","America/St_Johns|NST NDT|3u 2u|01010101010101010101010|1BQPv 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","Antarctica/Casey|CAST AWST|-b0 -80|0101|1BN30 40P0 KL0","Antarctica/Davis|DAVT DAVT|-50 -70|0101|1BPw0 3Wn0 KN0","Antarctica/DumontDUrville|DDUT|-a0|0|","Antarctica/Macquarie|AEDT MIST|-b0 -b0|01|1C140","Antarctica/Mawson|MAWT|-50|0|","Antarctica/McMurdo|NZDT NZST|-d0 -c0|01010101010101010101010|1C120 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00","Antarctica/Rothera|ROTT|30|0|","Antarctica/Syowa|SYOT|-30|0|","Antarctica/Troll|UTC CEST|0 -20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Antarctica/Vostok|VOST|-60|0|","Asia/Aden|AST|-30|0|","Asia/Almaty|ALMT|-60|0|","Asia/Amman|EET EEST|-20 -30|010101010101010101010|1BVy0 1qM0 11A0 1o00 11A0 4bX0 Dd0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0","Asia/Anadyr|ANAT ANAST ANAT|-c0 -c0 -b0|0120|1BWe0 1qN0 WM0","Asia/Aqtau|AQTT|-50|0|","Asia/Ashgabat|TMT|-50|0|","Asia/Baku|AZT AZST|-40 -50|01010101010101010101010|1BWo0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Bangkok|ICT|-70|0|","Asia/Beirut|EET EEST|-20 -30|01010101010101010101010|1BWm0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0","Asia/Bishkek|KGT|-60|0|","Asia/Brunei|BNT|-80|0|","Asia/Calcutta|IST|-5u|0|","Asia/Chita|YAKT YAKST YAKT IRKT|-90 -a0 -a0 -80|01023|1BWh0 1qM0 WM0 8Hz0","Asia/Choibalsan|CHOT|-80|0|","Asia/Chongqing|CST|-80|0|","Asia/Dacca|BDT|-60|0|","Asia/Damascus|EET EEST|-20 -30|01010101010101010101010|1C0m0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0","Asia/Dili|TLT|-90|0|","Asia/Dubai|GST|-40|0|","Asia/Dushanbe|TJT|-50|0|","Asia/Gaza|EET EEST|-20 -30|01010101010101010101010|1BVW1 SKX 1xd1 MKX 1AN0 1a00 1fA0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1fB0 1cL0 1cN0 1cL0","Asia/Hebron|EET EEST|-20 -30|0101010101010101010101010|1BVy0 Tb0 1xd1 MKX bB0 cn0 1cN0 1a00 1fA0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1fB0 1cL0 1cN0 1cL0","Asia/Hong_Kong|HKT|-80|0|","Asia/Hovd|HOVT|-70|0|","Asia/Irkutsk|IRKT IRKST IRKT|-80 -90 -90|01020|1BWi0 1qM0 WM0 8Hz0","Asia/Istanbul|EET EEST|-20 -30|01010101010101010101010|1BWp0 1qM0 Xc0 1qo0 WM0 1qM0 11A0 1o00 1200 1nA0 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Jakarta|WIB|-70|0|","Asia/Jayapura|WIT|-90|0|","Asia/Jerusalem|IST IDT|-20 -30|01010101010101010101010|1BVA0 17X0 1kp0 1dz0 1c10 1aL0 1eN0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0","Asia/Kabul|AFT|-4u|0|","Asia/Kamchatka|PETT PETST PETT|-c0 -c0 -b0|0120|1BWe0 1qN0 WM0","Asia/Karachi|PKT|-50|0|","Asia/Kashgar|XJT|-60|0|","Asia/Kathmandu|NPT|-5J|0|","Asia/Khandyga|VLAT VLAST VLAT YAKT YAKT|-a0 -b0 -b0 -a0 -90|010234|1BWg0 1qM0 WM0 17V0 7zD0","Asia/Krasnoyarsk|KRAT KRAST KRAT|-70 -80 -80|01020|1BWj0 1qM0 WM0 8Hz0","Asia/Kuala_Lumpur|MYT|-80|0|","Asia/Magadan|MAGT MAGST MAGT MAGT|-b0 -c0 -c0 -a0|01023|1BWf0 1qM0 WM0 8Hz0","Asia/Makassar|WITA|-80|0|","Asia/Manila|PHT|-80|0|","Asia/Nicosia|EET EEST|-20 -30|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Novokuznetsk|KRAT NOVST NOVT NOVT|-70 -70 -60 -70|01230|1BWj0 1qN0 WM0 8Hz0","Asia/Novosibirsk|NOVT NOVST NOVT|-60 -70 -70|01020|1BWk0 1qM0 WM0 8Hz0","Asia/Omsk|OMST OMSST OMST|-60 -70 -70|01020|1BWk0 1qM0 WM0 8Hz0","Asia/Oral|ORAT|-50|0|","Asia/Pyongyang|KST|-90|0|","Asia/Qyzylorda|QYZT|-60|0|","Asia/Rangoon|MMT|-6u|0|","Asia/Sakhalin|SAKT SAKST SAKT|-a0 -b0 -b0|01020|1BWg0 1qM0 WM0 8Hz0","Asia/Samarkand|UZT|-50|0|","Asia/Singapore|SGT|-80|0|","Asia/Srednekolymsk|MAGT MAGST MAGT SRET|-b0 -c0 -c0 -b0|01023|1BWf0 1qM0 WM0 8Hz0","Asia/Tbilisi|GET|-40|0|","Asia/Tehran|IRST IRDT|-3u -4u|01010101010101010101010|1BTUu 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0","Asia/Thimbu|BTT|-60|0|","Asia/Tokyo|JST|-90|0|","Asia/Ulaanbaatar|ULAT|-80|0|","Asia/Ust-Nera|MAGT MAGST MAGT VLAT VLAT|-b0 -c0 -c0 -b0 -a0|010234|1BWf0 1qM0 WM0 17V0 7zD0","Asia/Vladivostok|VLAT VLAST VLAT|-a0 -b0 -b0|01020|1BWg0 1qM0 WM0 8Hz0","Asia/Yakutsk|YAKT YAKST YAKT|-90 -a0 -a0|01020|1BWh0 1qM0 WM0 8Hz0","Asia/Yekaterinburg|YEKT YEKST YEKT|-50 -60 -60|01020|1BWl0 1qM0 WM0 8Hz0","Asia/Yerevan|AMT AMST|-40 -50|01010|1BWm0 1qM0 WM0 1qM0","Atlantic/Azores|AZOT AZOST|10 0|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Atlantic/Canary|WET WEST|0 -10|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Atlantic/Cape_Verde|CVT|10|0|","Atlantic/South_Georgia|GST|20|0|","Atlantic/Stanley|FKST FKT|30 40|010|1C6R0 U10","Australia/ACT|AEDT AEST|-b0 -a0|01010101010101010101010|1C140 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0","Australia/Adelaide|ACDT ACST|-au -9u|01010101010101010101010|1C14u 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0","Australia/Brisbane|AEST|-a0|0|","Australia/Darwin|ACST|-9u|0|","Australia/Eucla|ACWST|-8J|0|","Australia/LHI|LHDT LHST|-b0 -au|01010101010101010101010|1C130 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu","Australia/Perth|AWST|-80|0|","Chile/EasterIsland|EASST EAST|50 60|01010101010101010101010|1C1f0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1zb0 Op0 1zb0 Rd0 1wn0 Rd0","Eire|GMT IST|0 -10|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Etc/GMT+1|GMT+1|10|0|","Etc/GMT+10|GMT+10|a0|0|","Etc/GMT+11|GMT+11|b0|0|","Etc/GMT+12|GMT+12|c0|0|","Etc/GMT+2|GMT+2|20|0|","Etc/GMT+3|GMT+3|30|0|","Etc/GMT+4|GMT+4|40|0|","Etc/GMT+5|GMT+5|50|0|","Etc/GMT+6|GMT+6|60|0|","Etc/GMT+7|GMT+7|70|0|","Etc/GMT+8|GMT+8|80|0|","Etc/GMT+9|GMT+9|90|0|","Etc/GMT-1|GMT-1|-10|0|","Etc/GMT-10|GMT-10|-a0|0|","Etc/GMT-11|GMT-11|-b0|0|","Etc/GMT-12|GMT-12|-c0|0|","Etc/GMT-13|GMT-13|-d0|0|","Etc/GMT-14|GMT-14|-e0|0|","Etc/GMT-2|GMT-2|-20|0|","Etc/GMT-3|GMT-3|-30|0|","Etc/GMT-4|GMT-4|-40|0|","Etc/GMT-5|GMT-5|-50|0|","Etc/GMT-6|GMT-6|-60|0|","Etc/GMT-7|GMT-7|-70|0|","Etc/GMT-8|GMT-8|-80|0|","Etc/GMT-9|GMT-9|-90|0|","Etc/UCT|UCT|0|0|","Etc/UTC|UTC|0|0|","Europe/Belfast|GMT BST|0 -10|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Kaliningrad|EET EEST FET|-20 -30 -30|01020|1BWo0 1qM0 WM0 8Hz0","Europe/Minsk|EET EEST FET MSK|-20 -30 -30 -30|01023|1BWo0 1qM0 WM0 8Hy0","Europe/Moscow|MSK MSD MSK|-30 -40 -40|01020|1BWn0 1qM0 WM0 8Hz0","Europe/Samara|SAMT SAMST SAMT|-40 -40 -30|0120|1BWm0 1qN0 WM0","Europe/Simferopol|EET EEST MSK MSK|-20 -30 -40 -30|01010101023|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11z0 1nW0","Europe/Volgograd|MSK MSK|-30 -40|01010|1BWn0 1qM0 WM0 8Hz0","HST|HST|a0|0|","Indian/Chagos|IOT|-60|0|","Indian/Christmas|CXT|-70|0|","Indian/Cocos|CCT|-6u|0|","Indian/Kerguelen|TFT|-50|0|","Indian/Mahe|SCT|-40|0|","Indian/Maldives|MVT|-50|0|","Indian/Mauritius|MUT|-40|0|","Indian/Reunion|RET|-40|0|","Kwajalein|MHT|-c0|0|","MET|MET MEST|-10 -20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","NZ-CHAT|CHADT CHAST|-dJ -cJ|01010101010101010101010|1C120 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00","Pacific/Apia|SST SDT WSDT WSST|b0 a0 -e0 -d0|01012323232323232323232|1Dbn0 1ff0 1a00 CI0 AQ0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00","Pacific/Bougainville|PGT BST|-a0 -b0|01|1NwE0","Pacific/Chuuk|CHUT|-a0|0|","Pacific/Efate|VUT|-b0|0|","Pacific/Enderbury|PHOT|-d0|0|","Pacific/Fakaofo|TKT TKT|b0 -d0|01|1Gfn0","Pacific/Fiji|FJST FJT|-d0 -c0|01010101010101010101010|1BWe0 1o00 Rc0 1wo0 Ao0 1Nc0 Ao0 1Q00 xz0 1SN0 uM0 1SM0 xA0 1SM0 uM0 1SM0 uM0 1SM0 uM0 1SM0 uM0 1SM0","Pacific/Funafuti|TVT|-c0|0|","Pacific/Galapagos|GALT|60|0|","Pacific/Gambier|GAMT|90|0|","Pacific/Guadalcanal|SBT|-b0|0|","Pacific/Guam|ChST|-a0|0|","Pacific/Kiritimati|LINT|-e0|0|","Pacific/Kosrae|KOST|-b0|0|","Pacific/Marquesas|MART|9u|0|","Pacific/Midway|SST|b0|0|","Pacific/Nauru|NRT|-c0|0|","Pacific/Niue|NUT|b0|0|","Pacific/Norfolk|NFT|-bu|0|","Pacific/Noumea|NCT|-b0|0|","Pacific/Palau|PWT|-90|0|","Pacific/Pohnpei|PONT|-b0|0|","Pacific/Port_Moresby|PGT|-a0|0|","Pacific/Rarotonga|CKT|a0|0|","Pacific/Tahiti|TAHT|a0|0|","Pacific/Tarawa|GILT|-c0|0|","Pacific/Tongatapu|TOT|-d0|0|","Pacific/Wake|WAKT|-c0|0|","Pacific/Wallis|WFT|-c0|0|"],links:["Africa/Abidjan|Africa/Accra","Africa/Abidjan|Africa/Bamako","Africa/Abidjan|Africa/Banjul","Africa/Abidjan|Africa/Bissau","Africa/Abidjan|Africa/Conakry","Africa/Abidjan|Africa/Dakar","Africa/Abidjan|Africa/Freetown","Africa/Abidjan|Africa/Lome","Africa/Abidjan|Africa/Monrovia","Africa/Abidjan|Africa/Nouakchott","Africa/Abidjan|Africa/Ouagadougou","Africa/Abidjan|Africa/Sao_Tome","Africa/Abidjan|Africa/Timbuktu","Africa/Abidjan|America/Danmarkshavn","Africa/Abidjan|Atlantic/Reykjavik","Africa/Abidjan|Atlantic/St_Helena","Africa/Abidjan|Etc/GMT","Africa/Abidjan|Etc/GMT+0","Africa/Abidjan|Etc/GMT-0","Africa/Abidjan|Etc/GMT0","Africa/Abidjan|Etc/Greenwich","Africa/Abidjan|GMT","Africa/Abidjan|GMT+0","Africa/Abidjan|GMT-0","Africa/Abidjan|GMT0","Africa/Abidjan|Greenwich","Africa/Abidjan|Iceland","Africa/Addis_Ababa|Africa/Asmara","Africa/Addis_Ababa|Africa/Asmera","Africa/Addis_Ababa|Africa/Dar_es_Salaam","Africa/Addis_Ababa|Africa/Djibouti","Africa/Addis_Ababa|Africa/Juba","Africa/Addis_Ababa|Africa/Kampala","Africa/Addis_Ababa|Africa/Khartoum","Africa/Addis_Ababa|Africa/Mogadishu","Africa/Addis_Ababa|Africa/Nairobi","Africa/Addis_Ababa|Indian/Antananarivo","Africa/Addis_Ababa|Indian/Comoro","Africa/Addis_Ababa|Indian/Mayotte","Africa/Algiers|Africa/Tunis","Africa/Bangui|Africa/Brazzaville","Africa/Bangui|Africa/Douala","Africa/Bangui|Africa/Kinshasa","Africa/Bangui|Africa/Lagos","Africa/Bangui|Africa/Libreville","Africa/Bangui|Africa/Luanda","Africa/Bangui|Africa/Malabo","Africa/Bangui|Africa/Ndjamena","Africa/Bangui|Africa/Niamey","Africa/Bangui|Africa/Porto-Novo","Africa/Blantyre|Africa/Bujumbura","Africa/Blantyre|Africa/Gaborone","Africa/Blantyre|Africa/Harare","Africa/Blantyre|Africa/Kigali","Africa/Blantyre|Africa/Lubumbashi","Africa/Blantyre|Africa/Lusaka","Africa/Blantyre|Africa/Maputo","Africa/Cairo|Egypt","Africa/Casablanca|Africa/El_Aaiun","Africa/Ceuta|Arctic/Longyearbyen","Africa/Ceuta|Atlantic/Jan_Mayen","Africa/Ceuta|CET","Africa/Ceuta|Europe/Amsterdam","Africa/Ceuta|Europe/Andorra","Africa/Ceuta|Europe/Belgrade","Africa/Ceuta|Europe/Berlin","Africa/Ceuta|Europe/Bratislava","Africa/Ceuta|Europe/Brussels","Africa/Ceuta|Europe/Budapest","Africa/Ceuta|Europe/Busingen","Africa/Ceuta|Europe/Copenhagen","Africa/Ceuta|Europe/Gibraltar","Africa/Ceuta|Europe/Ljubljana","Africa/Ceuta|Europe/Luxembourg","Africa/Ceuta|Europe/Madrid","Africa/Ceuta|Europe/Malta","Africa/Ceuta|Europe/Monaco","Africa/Ceuta|Europe/Oslo","Africa/Ceuta|Europe/Paris","Africa/Ceuta|Europe/Podgorica","Africa/Ceuta|Europe/Prague","Africa/Ceuta|Europe/Rome","Africa/Ceuta|Europe/San_Marino","Africa/Ceuta|Europe/Sarajevo","Africa/Ceuta|Europe/Skopje","Africa/Ceuta|Europe/Stockholm","Africa/Ceuta|Europe/Tirane","Africa/Ceuta|Europe/Vaduz","Africa/Ceuta|Europe/Vatican","Africa/Ceuta|Europe/Vienna","Africa/Ceuta|Europe/Warsaw","Africa/Ceuta|Europe/Zagreb","Africa/Ceuta|Europe/Zurich","Africa/Ceuta|Poland","Africa/Johannesburg|Africa/Maseru","Africa/Johannesburg|Africa/Mbabane","Africa/Tripoli|Libya","America/Adak|America/Atka","America/Adak|US/Aleutian","America/Anchorage|America/Juneau","America/Anchorage|America/Nome","America/Anchorage|America/Sitka","America/Anchorage|America/Yakutat","America/Anchorage|US/Alaska","America/Anguilla|America/Antigua","America/Anguilla|America/Aruba","America/Anguilla|America/Barbados","America/Anguilla|America/Blanc-Sablon","America/Anguilla|America/Curacao","America/Anguilla|America/Dominica","America/Anguilla|America/Grenada","America/Anguilla|America/Guadeloupe","America/Anguilla|America/Kralendijk","America/Anguilla|America/Lower_Princes","America/Anguilla|America/Marigot","America/Anguilla|America/Martinique","America/Anguilla|America/Montserrat","America/Anguilla|America/Port_of_Spain","America/Anguilla|America/Puerto_Rico","America/Anguilla|America/Santo_Domingo","America/Anguilla|America/St_Barthelemy","America/Anguilla|America/St_Kitts","America/Anguilla|America/St_Lucia","America/Anguilla|America/St_Thomas","America/Anguilla|America/St_Vincent","America/Anguilla|America/Tortola","America/Anguilla|America/Virgin","America/Argentina/Buenos_Aires|America/Argentina/Catamarca","America/Argentina/Buenos_Aires|America/Argentina/ComodRivadavia","America/Argentina/Buenos_Aires|America/Argentina/Cordoba","America/Argentina/Buenos_Aires|America/Argentina/Jujuy","America/Argentina/Buenos_Aires|America/Argentina/La_Rioja","America/Argentina/Buenos_Aires|America/Argentina/Mendoza","America/Argentina/Buenos_Aires|America/Argentina/Rio_Gallegos","America/Argentina/Buenos_Aires|America/Argentina/Salta","America/Argentina/Buenos_Aires|America/Argentina/San_Juan","America/Argentina/Buenos_Aires|America/Argentina/San_Luis","America/Argentina/Buenos_Aires|America/Argentina/Tucuman","America/Argentina/Buenos_Aires|America/Argentina/Ushuaia","America/Argentina/Buenos_Aires|America/Buenos_Aires","America/Argentina/Buenos_Aires|America/Catamarca","America/Argentina/Buenos_Aires|America/Cordoba","America/Argentina/Buenos_Aires|America/Jujuy","America/Argentina/Buenos_Aires|America/Mendoza","America/Argentina/Buenos_Aires|America/Rosario","America/Atikokan|America/Cayman","America/Atikokan|America/Coral_Harbour","America/Atikokan|America/Jamaica","America/Atikokan|America/Panama","America/Atikokan|EST","America/Atikokan|Jamaica","America/Belem|America/Fortaleza","America/Belem|America/Maceio","America/Belem|America/Recife","America/Belem|America/Santarem","America/Belize|America/Costa_Rica","America/Belize|America/El_Salvador","America/Belize|America/Guatemala","America/Belize|America/Managua","America/Belize|America/Regina","America/Belize|America/Swift_Current","America/Belize|America/Tegucigalpa","America/Belize|Canada/East-Saskatchewan","America/Belize|Canada/Saskatchewan","America/Boa_Vista|America/Manaus","America/Boa_Vista|America/Porto_Velho","America/Boa_Vista|Brazil/West","America/Boise|America/Cambridge_Bay","America/Boise|America/Denver","America/Boise|America/Edmonton","America/Boise|America/Inuvik","America/Boise|America/Ojinaga","America/Boise|America/Shiprock","America/Boise|America/Yellowknife","America/Boise|Canada/Mountain","America/Boise|MST7MDT","America/Boise|Navajo","America/Boise|US/Mountain","America/Campo_Grande|America/Cuiaba","America/Cancun|America/Merida","America/Cancun|America/Mexico_City","America/Cancun|America/Monterrey","America/Cancun|Mexico/General","America/Chicago|America/Indiana/Knox","America/Chicago|America/Indiana/Tell_City","America/Chicago|America/Knox_IN","America/Chicago|America/Matamoros","America/Chicago|America/Menominee","America/Chicago|America/North_Dakota/Center","America/Chicago|America/North_Dakota/New_Salem","America/Chicago|America/Rainy_River","America/Chicago|America/Rankin_Inlet","America/Chicago|America/Resolute","America/Chicago|America/Winnipeg","America/Chicago|CST6CDT","America/Chicago|Canada/Central","America/Chicago|US/Central","America/Chicago|US/Indiana-Starke","America/Chihuahua|America/Mazatlan","America/Chihuahua|Mexico/BajaSur","America/Creston|America/Dawson_Creek","America/Creston|America/Hermosillo","America/Creston|America/Phoenix","America/Creston|MST","America/Creston|US/Arizona","America/Dawson|America/Ensenada","America/Dawson|America/Los_Angeles","America/Dawson|America/Tijuana","America/Dawson|America/Vancouver","America/Dawson|America/Whitehorse","America/Dawson|Canada/Pacific","America/Dawson|Canada/Yukon","America/Dawson|Mexico/BajaNorte","America/Dawson|PST8PDT","America/Dawson|US/Pacific","America/Dawson|US/Pacific-New","America/Detroit|America/Fort_Wayne","America/Detroit|America/Indiana/Indianapolis","America/Detroit|America/Indiana/Marengo","America/Detroit|America/Indiana/Petersburg","America/Detroit|America/Indiana/Vevay","America/Detroit|America/Indiana/Vincennes","America/Detroit|America/Indiana/Winamac","America/Detroit|America/Indianapolis","America/Detroit|America/Iqaluit","America/Detroit|America/Kentucky/Louisville","America/Detroit|America/Kentucky/Monticello","America/Detroit|America/Louisville","America/Detroit|America/Montreal","America/Detroit|America/Nassau","America/Detroit|America/New_York","America/Detroit|America/Nipigon","America/Detroit|America/Pangnirtung","America/Detroit|America/Thunder_Bay","America/Detroit|America/Toronto","America/Detroit|Canada/Eastern","America/Detroit|EST5EDT","America/Detroit|US/East-Indiana","America/Detroit|US/Eastern","America/Detroit|US/Michigan","America/Eirunepe|America/Porto_Acre","America/Eirunepe|America/Rio_Branco","America/Eirunepe|Brazil/Acre","America/Glace_Bay|America/Halifax","America/Glace_Bay|America/Moncton","America/Glace_Bay|America/Thule","America/Glace_Bay|Atlantic/Bermuda","America/Glace_Bay|Canada/Atlantic","America/Havana|Cuba","America/Metlakatla|Pacific/Pitcairn","America/Noronha|Brazil/DeNoronha","America/Santiago|Antarctica/Palmer","America/Santiago|Chile/Continental","America/Sao_Paulo|Brazil/East","America/St_Johns|Canada/Newfoundland","Antarctica/McMurdo|Antarctica/South_Pole","Antarctica/McMurdo|NZ","Antarctica/McMurdo|Pacific/Auckland","Asia/Aden|Asia/Baghdad","Asia/Aden|Asia/Bahrain","Asia/Aden|Asia/Kuwait","Asia/Aden|Asia/Qatar","Asia/Aden|Asia/Riyadh","Asia/Aqtau|Asia/Aqtobe","Asia/Ashgabat|Asia/Ashkhabad","Asia/Bangkok|Asia/Ho_Chi_Minh","Asia/Bangkok|Asia/Phnom_Penh","Asia/Bangkok|Asia/Saigon","Asia/Bangkok|Asia/Vientiane","Asia/Calcutta|Asia/Colombo","Asia/Calcutta|Asia/Kolkata","Asia/Chongqing|Asia/Chungking","Asia/Chongqing|Asia/Harbin","Asia/Chongqing|Asia/Macao","Asia/Chongqing|Asia/Macau","Asia/Chongqing|Asia/Shanghai","Asia/Chongqing|Asia/Taipei","Asia/Chongqing|PRC","Asia/Chongqing|ROC","Asia/Dacca|Asia/Dhaka","Asia/Dubai|Asia/Muscat","Asia/Hong_Kong|Hongkong","Asia/Istanbul|Europe/Istanbul","Asia/Istanbul|Turkey","Asia/Jakarta|Asia/Pontianak","Asia/Jerusalem|Asia/Tel_Aviv","Asia/Jerusalem|Israel","Asia/Kashgar|Asia/Urumqi","Asia/Kathmandu|Asia/Katmandu","Asia/Kuala_Lumpur|Asia/Kuching","Asia/Makassar|Asia/Ujung_Pandang","Asia/Nicosia|EET","Asia/Nicosia|Europe/Athens","Asia/Nicosia|Europe/Bucharest","Asia/Nicosia|Europe/Chisinau","Asia/Nicosia|Europe/Helsinki","Asia/Nicosia|Europe/Kiev","Asia/Nicosia|Europe/Mariehamn","Asia/Nicosia|Europe/Nicosia","Asia/Nicosia|Europe/Riga","Asia/Nicosia|Europe/Sofia","Asia/Nicosia|Europe/Tallinn","Asia/Nicosia|Europe/Tiraspol","Asia/Nicosia|Europe/Uzhgorod","Asia/Nicosia|Europe/Vilnius","Asia/Nicosia|Europe/Zaporozhye","Asia/Pyongyang|Asia/Seoul","Asia/Pyongyang|ROK","Asia/Samarkand|Asia/Tashkent","Asia/Singapore|Singapore","Asia/Tehran|Iran","Asia/Thimbu|Asia/Thimphu","Asia/Tokyo|Japan","Asia/Ulaanbaatar|Asia/Ulan_Bator","Atlantic/Canary|Atlantic/Faeroe","Atlantic/Canary|Atlantic/Faroe","Atlantic/Canary|Atlantic/Madeira","Atlantic/Canary|Europe/Lisbon","Atlantic/Canary|Portugal","Atlantic/Canary|WET","Australia/ACT|Australia/Canberra","Australia/ACT|Australia/Currie","Australia/ACT|Australia/Hobart","Australia/ACT|Australia/Melbourne","Australia/ACT|Australia/NSW","Australia/ACT|Australia/Sydney","Australia/ACT|Australia/Tasmania","Australia/ACT|Australia/Victoria","Australia/Adelaide|Australia/Broken_Hill","Australia/Adelaide|Australia/South","Australia/Adelaide|Australia/Yancowinna","Australia/Brisbane|Australia/Lindeman","Australia/Brisbane|Australia/Queensland","Australia/Darwin|Australia/North","Australia/LHI|Australia/Lord_Howe","Australia/Perth|Australia/West","Chile/EasterIsland|Pacific/Easter","Eire|Europe/Dublin","Etc/UCT|UCT","Etc/UTC|Etc/Universal","Etc/UTC|Etc/Zulu","Etc/UTC|UTC","Etc/UTC|Universal","Etc/UTC|Zulu","Europe/Belfast|Europe/Guernsey","Europe/Belfast|Europe/Isle_of_Man","Europe/Belfast|Europe/Jersey","Europe/Belfast|Europe/London","Europe/Belfast|GB","Europe/Belfast|GB-Eire","Europe/Moscow|W-SU","HST|Pacific/Honolulu","HST|Pacific/Johnston","HST|US/Hawaii","Kwajalein|Pacific/Kwajalein","Kwajalein|Pacific/Majuro","NZ-CHAT|Pacific/Chatham","Pacific/Chuuk|Pacific/Truk","Pacific/Chuuk|Pacific/Yap","Pacific/Guam|Pacific/Saipan","Pacific/Midway|Pacific/Pago_Pago","Pacific/Midway|Pacific/Samoa","Pacific/Midway|US/Samoa","Pacific/Pohnpei|Pacific/Ponape"]}),t
}),define("app/time",["moment-timezone","app/socket"],function(t,e){"use strict";function n(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}var r="TIME:OFFSET",i="TIME:ZONE",o={synced:!1,offset:parseFloat(localStorage.getItem(r))||0,zone:localStorage.getItem(i)||"Europe/Warsaw",appData:window.TIME||0};return delete window.TIME,o.sync=function(){var t=Date.now();e.emit("time",function(e,n){o.offset=(e-t+(e-Date.now()))/2,o.zone=n,o.synced=!0,localStorage.setItem(r,o.offset.toString()),localStorage.setItem(i,o.zone)})},o.getServerMoment=function(){return t(Date.now()+o.offset).tz(o.zone)},o.getMoment=function(e,n){return t(e,n).tz(o.zone)},o.format=function(t,e){var n=o.getMoment(t);return n.isValid()?n.format(e):null},o.toTagData=function(t){var e=o.getMoment(t);return{iso:e.toISOString(),"long":e.format("LLLL"),human:e.fromNow(),daysAgo:-e.diff(Date.now(),"days")}},o.toSeconds=function(t){if("number"==typeof t)return t;if("string"!=typeof t)return 0;var e={g:3600,h:3600,m:60,s:1,ms:.001},n=t.trim(),r=parseInt(n,10);if(/^[0-9]+\.?[0-9]*$/.test(n)===!1){var i,o=/([0-9\.]+)\s*(h|ms|m|s)[a-z]*/gi;for(r=0;i=o.exec(n);)r+=parseFloat(i[1])*e[i[2].toLowerCase()]}return r},o.toString=function(t,e,r){if("number"!=typeof t||0>=t)return e?"00:00:00":"0s";var i="",o=Math.floor(t/3600);o>0?(i+=e?n(o,2)+":":" "+o+"h",t%=3600):e&&(i+="00:");var s=Math.floor(t/60);s>0?(i+=e?n(s,2)+":":" "+s+"min",t%=60):e&&(i+="00:");var a=t;return a>=1?(i+=e?n(Math[r?"floor":"round"](a),2):" "+Math[r?"floor":"round"](a)+"s",r&&a%1!==0&&(i+=e?"."+n(Math.round(a%1*1e3),3):" "+(Math.round(a%1*1e3)+"ms"))):a>0&&""===i?i+=" "+1e3*a+"ms":e&&(i+="00"),e?i:i.substr(1)},e.on("connect",function(){o.sync()}),e.isConnected()&&o.sync(),window.time=o,o}),define("app/updater/views/RestartMessageView",["app/core/View"],function(t){"use strict";return t.extend({destroy:function(){this.el.ownerDocument.body.style.marginBottom=""},afterRender:function(){this.el.ownerDocument.body.style.marginBottom=this.$el.outerHeight()+15+"px"}})}),define("app/updater/templates/backendRestart",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="updater-restart updater-restart-backend">\n  <i class="fa fa-exclamation-triangle updater-restart-icon"></i><span class="updater-restart-message">'),__output.push(t("updater","restart:backend")),__output.push("</span>\n</div>\n");return __output.join("")}}),define("app/updater/templates/frontendRestart",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="updater-restart updater-restart-frontend">\n  <i class="fa fa-exclamation-circle updater-restart-icon"></i><span class="updater-restart-message">'),__output.push(t("updater","restart:frontend")),__output.push("</span>\n</div>\n");return __output.join("")}}),function(){"use strict";function t(t,e,n,r,i,o){e[t]&&(n.push(t),(e[t]===!0||1===e[t])&&r.push(i+t+"/"+o))}function e(t,e,n,r,i){var o=r+e+"/"+i;require._fileExists(t.toUrl(o+".js"))&&n.push(o)}function n(t,e,r){var i;for(i in e)!e.hasOwnProperty(i)||t.hasOwnProperty(i)&&!r?"object"==typeof e[i]&&(!t[i]&&e[i]&&(t[i]={}),n(t[i],e[i],r)):t[i]=e[i]}var r=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(i){var o=i.config?i.config():{};return{version:"2.0.4",load:function(i,s,a,u){u=u||{},u.locale&&(o.locale=u.locale);var c,l,p,d=r.exec(i),h=d[1],f=d[4],m=d[5],_=f.split("-"),g=[],v={},y="";if(d[5]?(h=d[1],c=h+m):(c=i,m=d[4],f=o.locale,f||(f=o.locale="undefined"==typeof navigator?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),_=f.split("-")),u.isBuild){for(g.push(c),e(s,"root",g,h,m),l=0;l<_.length;l++)p=_[l],y+=(y?"-":"")+p,e(s,y,g,h,m);s(g,function(){a()})}else s([c],function(e){var r,i=[];for(t("root",e,i,g,h,m),l=0;l<_.length;l++)r=_[l],y+=(y?"-":"")+r,t(y,e,i,g,h,m);s(g,function(){var t,r,o;for(t=i.length-1;t>-1&&i[t];t--)o=i[t],r=e[o],(r===!0||1===r)&&(r=s(h+o+"/"+m)),n(v,r);a(v)})})}}})}(),define("app/nls/locale/en",[],function(){var t={locale:{}};return t.locale.en=function(t){return 1===t?"one":"other"}}),define("app/nls/updater",["app/nls/locale/en"],function(t){return{root:{"restart:backend":function(){return"Application server is being restarted! Communication with the server might not work for a short while..."},"restart:frontend":function(){return"A new version of the application is available! <a href='javascript:window.location.reload()'>Click here to reload the browser</a>..."}},pl:!0}}),define("app/nls/locale/pl",[],function(){var t={locale:{}};return t.locale.pl=function(t){return 1==t?"one":t%10>=2&&4>=t%10&&(12>t%100||t%100>14)&&t==Math.floor(t)?"few":t%10===0||1!=t&&t%10==1||(t%10>=5&&9>=t%10||t%100>=12&&14>=t%100)&&t==Math.floor(t)?"many":"other"}}),define("app/nls/pl/updater",["app/nls/locale/pl"],function(t){return{"restart:backend":function(){return"Serwer aplikacji jest restartowany! Komunikacja z serwerem mo≈ºe przez chwilƒô nie dzia≈Çaƒá..."},"restart:frontend":function(){return"Dostƒôpna jest nowa wersja aplikacji! <a href='javascript:window.location.reload()'>Kliknij tutaj aby prze≈Çadowaƒá przeglƒÖdarkƒô</a>..."}}}),define("app/updater/index",["../broker","../pubsub","../socket","../viewport","../time","./views/RestartMessageView","app/updater/templates/backendRestart","app/updater/templates/frontendRestart","i18n!app/nls/updater"],function(t,e,n,r,i,o,s,a){"use strict";function u(){f.versions.time=Date.now(),localStorage.setItem(h,JSON.stringify(f.versions))}function c(){g||(g=!0,w&&(null!==_&&_.remove(),_=new o({template:s,type:"backend"}),r.insertView(_).render(),_.$el.slideDown()),t.subscribe("socket.connected").setLimit(1).on("message",function(){g=!1,null!==_&&_.$el.slideUp(function(){"backend"===_.options.type&&(_.remove(),_=null)}),t.publish("updater.backendRestarted")}),t.publish("updater.backendRestarting"))}function l(){v||(v=!0,window.addEventListener("mousemove",p),window.addEventListener("keypress",p),w&&(null!==_&&_.remove(),_=new o({template:a,type:"frontend"}),r.insertView(_).render(),_.$el.slideDown()),t.publish("updater.frontendRestarting"),p())}function p(){clearTimeout(m),m=setTimeout(d,6e4)}function d(){n.isConnected()&&(y=!0,t.publish("updater.frontendReloading"),window.location.reload())}var h="VERSIONS",f={},m=null,_=null,g=!1,v=!1,y=!1,w=!0,E=window[h],b=JSON.parse(localStorage.getItem(h)||"null");return delete window[h],f.versions=b&&b.time>i.appData?b:E,f.isRestarting=function(){return g||v},f.isBackendRestarting=function(){return g},f.isFrontendRestarting=function(){return v},f.isFrontendReloading=function(){return y},f.enableViews=function(){w=!0},f.disableViews=function(){w=!1},f.pull=function(t){n.emit("updater.pull",t)},f.getCurrentVersionString=function(){return f.versions["package"]},u(),n.on("updater.versions",function(t){var e=f.versions;f.versions=t,u(),t.frontend!==e.frontend&&l()}),e.subscribe("updater.newVersion",function(e){t.publish("updater.newVersion",e),"backend"===e.service?c():"frontend"===e.service&&l()}),window.updater=f,f}),define("app/data/loadedModules",[],function(){"use strict";for(var t=window.MODULES||[],e={},n=0;n<t.length;++n)e[t[n]]=!0;return{list:t,map:e,isLoaded:function(t){return e[t]===!0}}}),define("app/core/PaginationData",["underscore","backbone"],function(t,e){"use strict";return e.Model.extend({defaults:{totalCount:-1,urlTemplate:"?page=${page}&limit=${limit}",page:1,skip:0,limit:10},initialize:function(){this.on("change",this.recalcAttrs,this);var t=this.attributes;t.page<1&&(t.page=1),t.skip<0&&(t.skip=0),t.limit<1&&(t.limit=1),0!==t.skip?this.recalcPage():1!==t.page?this.recalcSkip():this.adjustSkipToLimit()},sync:function(){throw new Error("Not supported!")},recalcAttrs:function(){var e=this.changedAttributes();t.has(e,"total")||t.has(e,"skip")||t.has(e,"limit")?this.recalcPage():t.has(e,"page")&&this.recalcSkip()},recalcPage:function(){this.adjustSkipToLimit();var t=this.attributes;t.page=t.skip/t.limit+1},recalcSkip:function(){var t=this.attributes;t.skip=(t.page-1)*t.limit},adjustSkipToLimit:function(){var t=this.attributes;t.skip>=t.total&&(t.skip=t.total<2?1:t.total-1);var e=t.skip%t.limit;0!==e&&(t.skip-=e)}})}),define("app/core/Collection",["underscore","backbone","h5.rql/index","./util","./PaginationData"],function(t,e,n,r,i){"use strict";function o(n,r){t.isObject(r)||(r={}),this.rqlQuery=this.createRqlQuery(r.rqlQuery||this.rqlQuery),this.paginationData=r.paginate!==!1?new i:null,this.url||(this.url=this.model.prototype.urlRoot),e.Collection.call(this,n,r),this.paginationData&&this.listenTo(this.paginationData,"change:page",this.onPageChanged)}return r.inherits(o,e.Collection),o.prototype.parse=function(t){return this.paginationData&&this.paginationData.set(this.getPaginationData(t)),Array.isArray(t.collection)?t.collection:[]},o.prototype.sync=function(t,n,r){return"read"!==t||r.data||(r.data=this.rqlQuery.toString()),e.Collection.prototype.sync.call(this,t,n,r)},o.prototype.genClientUrl=function(t){if(null===this.model.prototype.clientUrlRoot)throw new Error("Model's `clientUrlRoot` was not specified");var e=this.model.prototype.clientUrlRoot;return"string"==typeof t&&(e+=";"+t),e},o.prototype.getTopicPrefix=function(){return this.topicPrefix||this.model.prototype.topicPrefix},o.prototype.getPrivilegePrefix=function(){return this.privilegePrefix||this.model.prototype.privilegePrefix},o.prototype.getNlsDomain=function(){return this.nlsDomain||this.model.prototype.nlsDomain},o.prototype.getLabel=function(t){var e=this.get(t);return e?e.getLabel():null},o.prototype.createRqlQuery=function(e){return t.isString(e)?e=n.parse(e):t.isFunction(e)?e=e.call(this,n):t.isObject(e)&&(e=n.Query.fromObject(e)),e&&!e.isEmpty()?e:t.isString(this.rqlQuery)?n.parse(this.rqlQuery):t.isFunction(this.rqlQuery)?this.rqlQuery.call(this,n):t.isObject(this.rqlQuery)?n.Query.fromObject(this.rqlQuery):new n.Query},o.prototype.getPaginationData=function(t){return{totalCount:t.totalCount,urlTemplate:this.genPaginationUrlTemplate(),skip:this.rqlQuery.skip,limit:this.rqlQuery.limit}},o.prototype.genPaginationUrlTemplate=function(){var t=this.rqlQuery,e=t.skip,n=t.limit;t.skip="${skip}",t.limit="${limit}";var r=this.genClientUrl()+"?"+t.toString();return t.skip=e,t.limit=n,r},o.prototype.onPageChanged=function(t,e){this.rqlQuery.skip=(e-1)*this.rqlQuery.limit,this.fetch({reset:!0})},o}),define("app/core/Model",["backbone"],function(t){"use strict";return t.Model.extend({idAttribute:"_id",urlRoot:"/",clientUrlRoot:null,topicPrefix:null,privilegePrefix:null,nlsDomain:null,labelAttribute:null,genClientUrl:function(t){if(null===this.clientUrlRoot)throw new Error("`clientUrlRoot` was not specified");var e=this.clientUrlRoot;return"base"===t?e:(e+="/",e+=encodeURIComponent(this.isNew()?this.cid:this.id),"string"==typeof t&&(e+=";"+t),e)},getTopicPrefix:function(){return this.topicPrefix},getPrivilegePrefix:function(){return this.privilegePrefix},getNlsDomain:function(){return this.nlsDomain||"core"},getLabelAttribute:function(){return this.labelAttribute||this.idAttribute},getLabel:function(){return String(this.get(this.getLabelAttribute()))},sync:function(e,n,r){var i="read"===e;i&&this.cancelCurrentReadRequest(n);var o=t.Model.prototype.sync.call(this,e,n,r);return i&&this.setUpCurrentReadRequest(n,o),o},cancelCurrentReadRequest:function(t){t.currentReadRequest&&(t.currentReadRequest.abort(),t.currentReadRequest=null)},setUpCurrentReadRequest:function(t,e){e.always(function(){t.currentReadRequest===e&&(t.currentReadRequest=null)}),t.currentReadRequest=e}})}),define("app/divisions/Division",["../core/Model"],function(t){"use strict";return t.extend({urlRoot:"/divisions",clientUrlRoot:"#divisions",topicPrefix:"divisions",privilegePrefix:"DICTIONARIES",nlsDomain:"divisions",labelAttribute:"_id",defaults:{type:"prod",description:null}})}),define("app/divisions/DivisionCollection",["../core/Collection","./Division"],function(t,e){"use strict";return t.extend({model:e,rqlQuery:"select(type,description)&sort(_id)",comparator:"_id"})}),define("app/data/createStorage",["app/time","app/broker","app/pubsub"],function(t,e,n){"use strict";return function(r,i,o){function s(){localStorage.setItem(r,JSON.stringify({time:Date.now(),data:l.models})),e.publish(i+".synced")}var a={time:t.appData,data:window[r]||[]},u=JSON.parse(localStorage.getItem(r)||"null"),c=u&&u.time>a.time?u:a,l=new o(c.data);return c===a&&s(),l.on("add",s),l.on("remove",s),l.on("destroy",s),l.on("change",s),l.on("sync",s),n.subscribe(i+".added",function(t){l.add(t.model)}),n.subscribe(i+".edited",function(t){var e=l.get(t.model._id);e?e.set(t.model):l.add(t.model)}),n.subscribe(i+".deleted",function(t){l.remove(t.model._id)}),l}}),define("app/data/divisions",["app/divisions/DivisionCollection","./createStorage"],function(t,e){"use strict";return e("DIVISIONS","divisions",t)}),define("app/subdivisions/Subdivision",["../core/Model"],function(t){"use strict";return t.extend({urlRoot:"/subdivisions",clientUrlRoot:"#subdivisions",topicPrefix:"subdivisions",privilegePrefix:"DICTIONARIES",nlsDomain:"subdivisions",labelAttribute:"name",defaults:{division:null,type:"assembly",name:null,prodTaskTags:null,aor:null,autoDowntime:null}})}),define("app/subdivisions/SubdivisionCollection",["../core/Collection","./Subdivision"],function(t,e){"use strict";return t.extend({model:e,rqlQuery:"sort(division,name)",comparator:"type"})}),define("app/data/subdivisions",["app/subdivisions/SubdivisionCollection","./createStorage"],function(t,e){"use strict";return e("SUBDIVISIONS","subdivisions",t)}),define("app/user",["underscore","app/i18n","app/broker","app/socket","app/viewport","app/data/divisions","app/data/subdivisions","app/core/pages/ErrorPage"],function(t,e,n,r,i,o,s,a){"use strict";var u=null;-1!==window.location.search.indexOf("COMPUTERNAME=")&&window.location.search.substr(1).split("&").forEach(function(t){t=t.split("="),"COMPUTERNAME"===t[0]&&t[1]&&(u=t[1])});var c={};return r.on("user.reload",function(t){c.reload(t)}),c.data=t.extend(window.GUEST_USER||{},{name:e.bound("core","GUEST_USER_NAME")}),delete window.GUEST_USER,c.reload=function(r){if(!t.isEqual(r,c.data)){var i=c.isLoggedIn();t.isObject(r)&&Object.keys(r).length>0&&(r.loggedIn===!1&&(r.name=e.bound("core","GUEST_USER_NAME")),"unspecified"===r.orgUnitType&&(r.orgUnitType=null,r.orgUnitId=null),c.data=r),n.publish("user.reloaded"),i&&!c.isLoggedIn()?n.publish("user.loggedOut"):!i&&c.isLoggedIn()&&n.publish("user.loggedIn")}},c.isLoggedIn=function(){return c.data.loggedIn===!0},c.getLabel=function(){return c.data.name?String(c.data.name):c.data.lastName&&c.data.firstName?c.data.firstName+" "+c.data.lastName:c.data.login},c.getInfo=function(){return{id:c.data._id,ip:c.data.ip||c.data.ipAddress||"0.0.0.0",cname:u,label:c.getLabel()}},c.isAllowedTo=function(t){if(c.data["super"])return!0;var e=c.data.privileges,n=(1===arguments.length?[t]:Array.prototype.slice.call(arguments)).map(function(t){return Array.isArray(t)?t:[t]});if(n.length&&c.data.local&&n[0].some(function(t){return"LOCAL"===t}))return!0;if(!e)return!1;if(!n.length)return c.isLoggedIn();for(var r=0,i=n.length;i>r;++r){for(var o=n[r],s=0,a=o.length,u=0;a>u;++u){var l=o[u];s+=/^FN:/.test(l)?c.data.prodFunction===l.substring(3)?1:0:c.hasPrivilege(o[u])?1:0}if(s===a)return!0}return!1},c.hasAccessToAor=function(t){return!t||c.data["super"]||!c.data.aors||!c.data.aors.length||-1!==c.data.aors.indexOf(t)},c.hasAccessToSubdivision=function(t){if(!t)return!0;if("division"===c.data.orgUnitType){var e=s.get(t);return e&&c.data.orgUnitId===e.get("division")}return"subdivision"===c.data.orgUnitType?c.data.orgUnitId===t:!0},c.auth=function(){var t=Array.prototype.slice.call(arguments);return function(e,r,o){c.isAllowedTo.apply(c,t)?o():c.isLoggedIn()?i.showPage(new a({code:401,req:e,referer:r})):n.publish("router.navigate",{url:"/login",trigger:!0,replace:!0})}},c.getDivision=function(){var t=null;switch(c.data.orgUnitType){case"division":t=c.data.orgUnitId;break;case"subdivision":var e=s.get(c.data.orgUnitId);e&&(t=e.get("division"))}return o.get(t)||null},c.getSubdivision=function(){return"subdivision"!==c.data.orgUnitType?null:s.get(c.data.orgUnitId)||null},c.hasPrivilege=function(e){return c.data.privilegesMap||(Array.isArray(c.data.privileges)||(c.data.privileges=[]),c.data.privilegesString="|"+c.data.privileges.join("|"),c.data.privilegesMap={},t.forEach(c.data.privileges,function(t){c.data.privilegesMap[t]=!0})),"*"===e.charAt(e.length-1)?-1!==c.data.privilegesString.indexOf("|"+e.substr(0,e.length-1)):c.data.privilegesMap[e]===!0},c.getGuestUserData=function(){return window.GUEST_USER||{id:null,login:"guest",name:e.bound("core","GUEST_USER_NAME"),loggedIn:!1,"super":!1,privileges:[]}},c.getRootUserData=function(){return window.ROOT_USER||{id:null,login:"root",name:"root",loggedIn:!0,"super":!0,privileges:[]}},window.user=c,c}),define("app/core/templates/pageLayout",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="page">\n  <div class="hd">\n    <nav class="navbar navbar-default"></nav>\n    <div class="page-alerts"></div>\n    <div class="page-header">\n      <ul class="page-actions"></ul>\n      <ul class="page-breadcrumbs"></ul>\n    </div>\n  </div>\n  <div class="bd"></div>\n  <div class="ft">\n    <p>\n      WMES v'),__output.push(version),__output.push('<br>\n      <a href="http://miracle.systems/">miracle.systems</a>\n    </p>\n  </div>\n</div>\n');return __output.join("")}}),define("app/core/layouts/PageLayout",["underscore","jquery","app/user","../View","app/core/templates/pageLayout"],function(t,e,n,r,i){"use strict";var o=r.extend({pageContainerSelector:".bd",template:i});return o.prototype.initialize=function(){this.model={id:null,actions:[],breadcrumbs:[],title:null},this.$header=null,this.$breadcrumbs=null,this.$actions=null,this.onWindowResize=t.debounce(this.onWindowResize.bind(this),1e3/15),e(window).on("resize",this.onWindowResize)},o.prototype.destroy=function(){e(window).off("resize",this.onWindowResize),this.el.ownerDocument&&this.el.ownerDocument.body.classList.remove("page"),this.$breadcrumbs=null,this.$actions=null},o.prototype.serialize=function(){return t.extend(r.prototype.serialize.call(this),{version:this.options.version})},o.prototype.afterRender=function(){this.el.ownerDocument&&this.el.ownerDocument.body.classList.add("page"),this.$header=this.$(".page-header").first(),this.$breadcrumbs=this.$(".page-breadcrumbs").first(),this.$actions=this.$(".page-actions").first(),this.changeTitle(),this.renderBreadcrumbs(),this.renderActions(),null!==this.model.id&&this.setId(this.model.id)},o.prototype.reset=function(){this.setId(null),this.model.title=null,this.$header&&this.$header.hide(),this.$breadcrumbs&&(this.model.breadcrumbs=[],this.$breadcrumbs.empty()),this.$actions&&(this.model.actions=[],this.$actions.empty()),this.removeView(this.pageContainerSelector)},o.prototype.setUpPage=function(t){t.pageId&&this.setId(t.pageId),t.breadcrumbs?this.setBreadcrumbs(t.breadcrumbs,t):t.title?this.setTitle(t.title,t):this.changeTitle(),t.actions&&this.setActions(t.actions,t)},o.prototype.setId=function(t){return this.isRendered()&&this.$el.attr("data-id",t),this.model.id=t,this},o.prototype.setBreadcrumbs=function(t,e){return null==t?this:("function"==typeof t&&(t=t.call(e,this)),Array.isArray(t)||(t=[t]),this.model.breadcrumbs=t.map(function(t){var e=typeof t;return("string"===e||"function"===e)&&(t={label:t,href:null}),"string"==typeof t.href&&"#"!==t.href[0]&&(t.href="#"+t.href),t}),this.$breadcrumbs&&this.renderBreadcrumbs(),this.changeTitle(),this)},o.prototype.setTitle=function(t,e){return null==t?this:("function"==typeof t&&(t=t.call(e,this)),Array.isArray(t)||(t=[t]),this.model.title=t,this.changeTitle(),this)},o.prototype.setActions=function(t,e){return null==t?this:("function"==typeof t&&(t=t.call(e,this)),t?(Array.isArray(t)||(t=[t]),this.model.actions=t.map(this.prepareAction.bind(this)),this.$actions&&this.renderActions(),this):this)},o.prototype.onWindowResize=function(){this.adjustBreadcrumbsPosition()},o.prototype.prepareAction=function(t){if(t.prepared)return t;if("string"==typeof t.href){var e=t.href.charAt(0);"#"!==e&&"/"!==e&&(t.href="#"+t.href)}else t.href=null;return"string"==typeof t.icon&&(t.icon="fa-"+t.icon.split(" ").join(" fa-")),"string"!=typeof t.className&&(t.className=""),t.className="btn btn-"+(t.type||"default")+" "+t.className,t.prepared=!0,t},o.prototype.renderBreadcrumbs=function(){for(var t=this.model.breadcrumbs,e="",n=0,r=t.length;r>n;++n){var i=t[n];e+="<li>",e+=n!==r-1&&i.href?'<a href="'+i.href+'">'+i.label+"</a>":i.label}this.$breadcrumbs.html(e),this.$header.show(),this.adjustBreadcrumbsPosition()},o.prototype.adjustBreadcrumbsPosition=function(){if(window.innerWidth<768){var t=(this.$(".navbar-header").outerHeight()-this.$breadcrumbs.outerHeight())/2;this.$breadcrumbs.css("top",t+"px")}},o.prototype.renderActions=function(){for(var e=this.model.actions,r={},i={},o="",s=0,a=e.length;a>s;++s){var u=e[s],c=u.privileges;if(c)if(t.isFunction(c)){if(!c())continue}else if(!n.isAllowedTo(c))continue;"function"==typeof u.callback&&(r[s]=u.callback.bind(this)),"function"==typeof u.afterRender&&(i[s]=u.afterRender.bind(this)),o+='<li data-index="'+s+'">',"function"==typeof u.template?o+=u.template(u):(o+=null===u.href?'<button class="'+u.className+'">':'<a class="'+u.className+'" href="'+u.href+'">',"string"==typeof u.icon&&(o+='<i class="fa '+u.icon+'"></i>'),o+="<span>"+u.label+"</span>"+(u.href?"</a>":"</button>"))}this.$actions.html(o);var l=this.$actions.find("li");Object.keys(r).forEach(function(t){l.filter('li[data-index="'+t+'"]').click(e[t].callback)}),Object.keys(i).forEach(function(t){i[t](l.filter('li[data-index="'+t+'"]'),e[t])}),this.$header.show()},o.prototype.changeTitle=function(){if(this.isRendered()){var e=Array.isArray(this.model.title)?[].concat(this.model.title):t.pluck(this.model.breadcrumbs,"label");this.broker.publish("page.titleChanged",e)}},o}),define("app/core/templates/printLayout",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="printLayout">\n  <div class="print-pages">\n    <div class="print-page">\n      <div class="print-page-hd">\n        <p class="print-page-hd-right"></p>\n        <p class="print-page-hd-left"></p>\n      </div>\n      <div class="print-page-bd"></div>\n      <div class="print-page-ft">\n        <p class="print-page-ft-right">'),__output.push(t("emptyOrders","PRINT_PAGE:FT:PAGE_NO")),__output.push('</p>\n        <p class="print-page-ft-left">'),__output.push(t("emptyOrders","PRINT_PAGE:FT:INFO")),__output.push("</p>\n      </div>\n    </div>\n  </div>\n</div>\n");return __output.join("")}}),define("app/core/layouts/PrintLayout",["underscore","jquery","app/time","app/user","../View","app/core/templates/printLayout"],function(t,e,n,r,i,o){"use strict";var s=i.extend({pageContainerSelector:".print-page-bd",template:o});return s.prototype.initialize=function(){this.model={id:null,actions:[],breadcrumbs:[]}},s.prototype.destroy=function(){this.el.ownerDocument&&this.el.ownerDocument.body.classList.remove("print")},s.prototype.afterRender=function(){this.changeTitle(),null!==this.model.id&&this.setId(this.model.id),this.el.ownerDocument&&this.el.ownerDocument.body.classList.add("print")},s.prototype.reset=function(){this.setId(null),this.model.breadcrumbs=[],this.removeView(this.pageContainerSelector)},s.prototype.setUpPage=function(t){t.pageId&&this.setId(t.pageId),t.breadcrumbs?this.setBreadcrumbs(t.breadcrumbs,t):this.changeTitle(),this.listenTo(t,"afterRender",this.fitToPrintablePage)},s.prototype.setId=function(t){return this.isRendered()&&this.$el.attr("data-id",t),this.model.id=t,this},s.prototype.setBreadcrumbs=function(t,e){return null==t?this:("function"==typeof t&&(t=t.call(e)),Array.isArray(t)||(t=[t]),this.model.breadcrumbs=t.map(function(t){var e=typeof t;return("string"===e||"function"===e)&&(t={label:t}),t}),this.changeTitle(),this)},s.prototype.changeTitle=function(){this.isRendered()&&this.broker.publish("page.titleChanged",t.pluck(this.model.breadcrumbs,"label"))},s.prototype.fitToPrintablePage=function(i){var o=this.$(".print-pages"),s=o.find(".print-page"),a=s.find(".print-page-hd"),u=s.find(".print-page-ft"),c=s.find(".print-page-bd"),l=e('<div class="print-page-bd-container"></div>');s.toggleClass("is-landscape",!!i.landscape),t.isFunction(i.hdLeft)&&a.find(".print-page-hd-left").text(i.hdLeft.call(i)),t.isFunction(i.hdRight)&&a.find(".print-page-hd-right").text(i.hdRight.call(i));var p,d=i.landscape?792:1122,h={top:parseFloat(s.css("padding-top"))||0,left:parseFloat(s.css("padding-left"))||0,right:parseFloat(s.css("padding-right"))||0,bottom:parseFloat(s.css("padding-bottom"))||0},f=a.outerHeight(!0),m=u.outerHeight(!0),_=d-h.top-h.bottom-f-m;p=t.isFunction(i.fitToPrintablePage)?i.fitToPrintablePage.call(i,_):t.isObject(i.view)&&t.isFunction(i.view.fitToPrintablePage)?i.view.fitToPrintablePage.call(i,_):[i.$el.detach()],l.height(_),c.wrap(l),s.detach(),p.forEach(function(t,e){var n=s.clone();n.find(".print-page-bd").append(t),n.find(".print-page-no").text(e+1),n.addClass("print-page-fit"),o.append(n)}),s.remove(),this.$(".print-page-count").text(p.length),this.$(".print-page-date").text(n.format(Date.now(),"LLL")),this.$(".print-page-user").text(r.data.name||r.data.login)},s}),define("app/core/templates/blankLayout",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="blankLayout">\n  <div class="blank-page-bd"></div>\n</div>\n');return __output.join("")}}),define("app/core/layouts/BlankLayout",["underscore","jquery","app/user","../View","app/core/templates/blankLayout"],function(t,e,n,r,i){"use strict";var o=r.extend({pageContainerSelector:".blank-page-bd",template:i});return o.prototype.initialize=function(){this.model={breadcrumbs:[]}},o.prototype.afterRender=function(){this.changeTitle()},o.prototype.reset=function(){this.removeView(this.pageContainerSelector)},o.prototype.setUpPage=function(t){t.breadcrumbs?this.setBreadcrumbs(t.breadcrumbs,t):this.changeTitle()},o.prototype.setBreadcrumbs=function(t,e){return null==t?this:("function"==typeof t&&(t=t.call(e)),Array.isArray(t)||(t=[t]),this.model.breadcrumbs=t.map(function(t){var e=typeof t;return("string"===e||"function"===e)&&(t={label:t}),t}),this.changeTitle(),this)},o.prototype.changeTitle=function(){this.isRendered()&&this.broker.publish("page.titleChanged",t.pluck(this.model.breadcrumbs,"label"))},o}),define("app/core/templates/navbar",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="navbar-inner">\n  '),function(){__output.push('<div class="navbar-header">\n  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">\n    <span class="sr-only">'),__output.push(t("core","NAVBAR:TOGGLE")),__output.push('</span>\n    <span class="icon-bar"></span>\n    <span class="icon-bar"></span>\n    <span class="icon-bar"></span>\n  </button>\n  <a class="navbar-brand fa fa-cogs" href="#"></a>\n</div>\n')}(),__output.push('\n  <div class="collapse navbar-collapse">\n    <ul class="nav navbar-nav">\n      <li><a href="#">'),__output.push(t("core","NAVBAR:DASHBOARD")),__output.push('</a>\n      <li data-online data-privilege="EVENTS:VIEW" data-module><a href="#events">'),__output.push(t("core","NAVBAR:EVENTS")),__output.push("</a>\n      "),function(){__output.push('<li data-online data-module="fte" class="dropdown">\n  <a class="dropdown-toggle" data-toggle="dropdown">\n    '),__output.push(t("core","NAVBAR:FTE")),__output.push('\n    <b class="caret"></b>\n  </a>\n  <ul class="dropdown-menu">\n    <li class="dropdown-header">'),__output.push(t("core","NAVBAR:FTE:MASTER")),__output.push('\n    <li data-privilege="FTE:MASTER:VIEW"><a href="#fte/master">'),__output.push(t("core","NAVBAR:FTE:MASTER:LIST")),__output.push('</a>\n    <li data-privilege="FTE:MASTER:MANAGE"><a href="#fte/master;add">'),__output.push(t("core","NAVBAR:FTE:MASTER:CURRENT")),__output.push('</a>\n    <li class="divider">\n    <li class="dropdown-header">'),__output.push(t("core","NAVBAR:FTE:LEADER")),__output.push('\n    <li data-privilege="FTE:LEADER:VIEW"><a href="#fte/leader">'),__output.push(t("core","NAVBAR:FTE:LEADER:LIST")),__output.push('</a>\n    <li data-privilege="FTE:LEADER:MANAGE"><a href="#fte/leader;add">'),__output.push(t("core","NAVBAR:FTE:LEADER:CURRENT")),__output.push("</a>\n  </ul>\n")}(),__output.push('\n      <li data-online data-privilege="HOURLY_PLANS:VIEW" data-module><a href="#hourlyPlans">'),__output.push(t("core","NAVBAR:HOURLY_PLANS")),__output.push("</a>\n      "),function(){__output.push('<li data-online class="dropdown">\n  <a class="dropdown-toggle" data-toggle="dropdown">\n    '),__output.push(t("core","NAVBAR:PROD")),__output.push('\n    <b class="caret"></b>\n  </a>\n  <ul class="dropdown-menu">\n    <li class="dropdown-header">'),__output.push(t("core","NAVBAR:MONITORING")),__output.push('\n    <li data-privilege="LOCAL PROD_DATA:VIEW" data-module><a href="#factoryLayout/default">'),__output.push(t("core","NAVBAR:MONITORING:LAYOUT")),__output.push('</a>\n    <li data-privilege="LOCAL PROD_DATA:VIEW" data-module><a href="#factoryLayout;list">'),__output.push(t("core","NAVBAR:MONITORING:LIST")),__output.push('</a>\n    <li class="divider">\n    <li class="dropdown-header">'),__output.push(t("core","NAVBAR:PROD:DATA")),__output.push('\n    <li data-privilege="LOCAL PROD_DATA:VIEW PRESS_WORKSHEETS:VIEW" data-module><a href="#pressWorksheets">'),__output.push(t("core","NAVBAR:PRESS_WORKSHEETS")),__output.push('</a>\n    <li data-privilege="LOCAL PROD_DATA:VIEW" data-module><a href="#prodLogEntries">'),__output.push(t("core","NAVBAR:PROD:LOG_ENTRIES")),__output.push('</a>\n    <li data-privilege="LOCAL PROD_DATA:VIEW" data-module><a href="#prodShifts">'),__output.push(t("core","NAVBAR:PROD:SHIFTS")),__output.push('</a>\n    <li data-privilege="LOCAL PROD_DATA:VIEW" data-module><a href="#prodShiftOrders">'),__output.push(t("core","NAVBAR:PROD:SHIFT_ORDERS")),__output.push('</a>\n    <li data-privilege="LOCAL PROD_DATA:VIEW PROD_DOWNTIMES:VIEW" data-module><a href="#prodDowntimes">'),__output.push(t("core","NAVBAR:PROD:DOWNTIMES")),__output.push('</a>\n    <li data-privilege="LOCAL PROD_DATA:VIEW" data-module><a href="#prodChangeRequests">'),__output.push(t("core","NAVBAR:PROD:CHANGE_REQUESTS")),__output.push('</a>\n    <li class="divider">\n    <li class="dropdown-header">'),__output.push(t("core","NAVBAR:DOCUMENTS")),__output.push('\n    <li data-privilege="DOCUMENTS:VIEW" data-module><a href="#orderDocuments/clients">'),__output.push(t("core","NAVBAR:DOCUMENTS:CLIENTS")),__output.push('</a>\n    <li data-privilege="ORDERS:MANAGE" data-module><a href="#orders;settings?tab=documents">'),__output.push(t("core","NAVBAR:DOCUMENTS:SETTINGS")),__output.push("</a>\n  </ul>\n")
}(),__output.push("\n      "),function(){__output.push('<li data-online class="dropdown">\n  <a class="dropdown-toggle" data-toggle="dropdown">\n    '),__output.push(t("core","NAVBAR:PROGRAMMING")),__output.push('\n    <b class="caret"></b>\n  </a>\n  <ul class="dropdown-menu">\n    <li data-privilege="XICONF:VIEW" data-module><a href="#xiconf/clients">'),__output.push(t("core","NAVBAR:XICONF:CLIENTS")),__output.push('</a>\n    <li data-privilege="XICONF:VIEW" data-module><a href="#xiconf/programs">'),__output.push(t("core","NAVBAR:XICONF:PROGRAMS")),__output.push('</a>\n    <li data-privilege="XICONF:VIEW" data-module><a href="#xiconf/orders">'),__output.push(t("core","NAVBAR:XICONF:ORDERS")),__output.push('</a>\n    <li data-privilege="XICONF:VIEW" data-module><a href="#xiconf/results">'),__output.push(t("core","NAVBAR:XICONF:RESULTS")),__output.push("</a>\n  </ul>\n")}(),__output.push("\n      "),function(){__output.push('<li class="dropdown" data-online data-module="reports">\n  <a class="dropdown-toggle" data-toggle="dropdown">\n    '),__output.push(t("core","NAVBAR:REPORTS")),__output.push('\n    <b class="caret"></b>\n  </a>\n  <ul class="dropdown-menu">\n    <li data-privilege="REPORTS:VIEW REPORTS:1:VIEW"><a href="#reports/1">'),__output.push(t("core","NAVBAR:REPORTS:1")),__output.push('</a>\n    <li data-privilege="REPORTS:VIEW REPORTS:2:VIEW"><a href="#reports/2">'),__output.push(t("core","NAVBAR:REPORTS:2")),__output.push('</a>\n    <li data-privilege="REPORTS:VIEW REPORTS:3:VIEW"><a href="#reports/3">'),__output.push(t("core","NAVBAR:REPORTS:3")),__output.push('</a>\n    <li data-privilege="REPORTS:VIEW REPORTS:4:VIEW"><a href="#reports/4">'),__output.push(t("core","NAVBAR:REPORTS:4")),__output.push('</a>\n    <li data-privilege="REPORTS:VIEW REPORTS:5:VIEW"><a href="#reports/5">'),__output.push(t("core","NAVBAR:REPORTS:5")),__output.push('</a>\n    <li data-privilege="REPORTS:VIEW REPORTS:6:VIEW"><a href="#reports/6">'),__output.push(t("core","NAVBAR:REPORTS:6")),__output.push('</a>\n    <li data-privilege="REPORTS:VIEW REPORTS:7:VIEW"><a href="#reports/7">'),__output.push(t("core","NAVBAR:REPORTS:7")),__output.push('</a>\n    <li class="divider">\n    <li data-privilege="REPORTS:VIEW"><a href="#vis/structure">'),__output.push(t("core","NAVBAR:VIS:STRUCTURE")),__output.push("</a>\n  </ul>\n")}(),__output.push("\n      "),function(){__output.push('<li data-online data-loggedin class="dropdown">\n  <a class="dropdown-toggle" data-toggle="dropdown">\n    '),__output.push(t("kaizenOrders","navbar:kaizen")),__output.push('\n    <b class="caret"></b>\n  </a>\n  <ul class="dropdown-menu">\n    <li class="dropdown-header">'),__output.push(t("kaizenOrders","navbar:orders")),__output.push('\n    <li data-module="kaizen"><a href="#kaizenOrders">'),__output.push(t("kaizenOrders","navbar:all")),__output.push('</a>\n    <li data-module="kaizen"><a href="#kaizenOrders?status=in=(new,accepted,todo,inProgress,paused)&sort(-eventDate)&limit(15)">'),__output.push(t("kaizenOrders","navbar:open")),__output.push('</a>\n    <li data-module="kaizen"><a href="#kaizenOrders?observers.user.id=mine&sort(-eventDate)&limit(15)">'),__output.push(t("kaizenOrders","navbar:mine")),__output.push('</a>\n    <li data-module="kaizen"><a href="#kaizenOrders?observers.user.id=unseen&sort(-eventDate)&limit(15)">'),__output.push(t("kaizenOrders","navbar:unseen")),__output.push('</a>\n    <li class="divider">\n    <li class="dropdown-header">'),__output.push(t("kaizenOrders","navbar:reports")),__output.push('\n    <li data-module="kaizen"><a href="#kaizenReport">'),__output.push(t("kaizenOrders","navbar:reports:qty")),__output.push('</a>\n    <li class="divider">\n    <li class="dropdown-header">'),__output.push(t("kaizenOrders","navbar:dictionaries")),__output.push('\n    <li data-privilege="KAIZEN:DICTIONARIES:VIEW" data-module="kaizen"><a href="#kaizenSections">'),__output.push(t("kaizenOrders","navbar:sections")),__output.push('</a>\n    <li data-privilege="KAIZEN:DICTIONARIES:VIEW" data-module="kaizen"><a href="#kaizenAreas">'),__output.push(t("kaizenOrders","navbar:areas")),__output.push('</a>\n    <li data-privilege="KAIZEN:DICTIONARIES:VIEW" data-module="kaizen"><a href="#kaizenCategories">'),__output.push(t("kaizenOrders","navbar:categories")),__output.push('</a>\n    <li data-privilege="KAIZEN:DICTIONARIES:VIEW" data-module="kaizen"><a href="#kaizenCauses">'),__output.push(t("kaizenOrders","navbar:causes")),__output.push('</a>\n    <li data-privilege="KAIZEN:DICTIONARIES:VIEW" data-module="kaizen"><a href="#kaizenRisks">'),__output.push(t("kaizenOrders","navbar:risks")),__output.push('</a>\n    <li class="divider">\n    <li data-module="kaizen"><a href="#kaizenHelp">'),__output.push(t("kaizenOrders","navbar:help")),__output.push("</a>\n  </ul>\n")}(),__output.push("\n      "),function(){__output.push('<li data-online data-loggedin class="dropdown">\n  <a class="dropdown-toggle" data-toggle="dropdown">\n    '),__output.push(t("opinionSurveys","navbar:main")),__output.push('\n    <b class="caret"></b>\n  </a>\n  <ul class="dropdown-menu">\n    <li data-module="opinionSurveys"><a href="/opinion" target="_blank">'),__output.push(t("opinionSurveys","navbar:current")),__output.push('</a>\n    <li data-module="opinionSurveys"><a href="#opinionSurveyReport">'),__output.push(t("opinionSurveys","navbar:report")),__output.push('</a>\n    <li data-module="opinionSurveys"><a href="#opinionSurveyActions">'),__output.push(t("opinionSurveys","navbar:actions")),__output.push('</a>\n    <li data-module="opinionSurveys"><a href="#opinionSurveyResponses">'),__output.push(t("opinionSurveys","navbar:responses")),__output.push('</a>\n    <li class="divider">\n    <li class="dropdown-header">'),__output.push(t("opinionSurveys","navbar:dictionaries")),__output.push('\n    <li data-privilege="OPINION_SURVEYS:MANAGE" data-module="opinionSurveys"><a href="#opinionSurveys">'),__output.push(t("opinionSurveys","navbar:surveys")),__output.push('</a>\n    <li data-privilege="OPINION_SURVEYS:MANAGE" data-module="opinionSurveys"><a href="#opinionSurveyEmployers">'),__output.push(t("opinionSurveys","navbar:employers")),__output.push('</a>\n    <li data-privilege="OPINION_SURVEYS:MANAGE" data-module="opinionSurveys"><a href="#opinionSurveyDivisions">'),__output.push(t("opinionSurveys","navbar:divisions")),__output.push('</a>\n    <li data-privilege="OPINION_SURVEYS:MANAGE" data-module="opinionSurveys"><a href="#opinionSurveyQuestions">'),__output.push(t("opinionSurveys","navbar:questions")),__output.push("</a>\n  </ul>\n")}(),__output.push("\n      "),function(){__output.push('<li data-online class="dropdown">\n  <a class="dropdown-toggle" data-toggle="dropdown">\n    '),__output.push(t("core","NAVBAR:DICTIONARIES")),__output.push('\n    <b class="caret"></b>\n  </a>\n  <ul class="dropdown-menu">\n    <li data-privilege="ORDERS:VIEW" data-module="orders"><a href="#mechOrders">'),__output.push(t("core","NAVBAR:MECH_ORDERS")),__output.push('</a>\n    <li data-privilege="ORDERS:VIEW" data-module><a href="#orders">'),__output.push(t("core","NAVBAR:OTHER_ORDERS")),__output.push('</a>\n    <li data-privilege="ORDERS:VIEW" data-module="orders"><a href="#emptyOrders">'),__output.push(t("core","NAVBAR:EMPTY_ORDERS")),__output.push('</a>\n    <li class="divider">\n    <li data-privilege="USERS:VIEW" data-module><a href="#users">'),__output.push(t("core","NAVBAR:USERS")),__output.push('</a>\n    <li class="divider">\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#divisions">'),__output.push(t("core","NAVBAR:DIVISIONS")),__output.push('</a>\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#subdivisions">'),__output.push(t("core","NAVBAR:SUBDIVISIONS")),__output.push('</a>\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#mrpControllers">'),__output.push(t("core","NAVBAR:MRP_CONTROLLERS")),__output.push('</a>\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#prodFlows">'),__output.push(t("core","NAVBAR:PROD_FLOWS")),__output.push('</a>\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#workCenters">'),__output.push(t("core","NAVBAR:WORK_CENTERS")),__output.push('</a>\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#prodLines">'),__output.push(t("core","NAVBAR:PROD_LINES")),__output.push('</a>\n    <li class="divider">\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#companies">'),__output.push(t("core","NAVBAR:COMPANIES")),__output.push('</a>\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#prodFunctions">'),__output.push(t("core","NAVBAR:PROD_FUNCTIONS")),__output.push('</a>\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#prodTasks">'),__output.push(t("core","NAVBAR:PROD_TASKS")),__output.push('</a>\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#orderStatuses">'),__output.push(t("core","NAVBAR:ORDER_STATUSES")),__output.push('</a>\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#delayReasons">'),__output.push(t("core","NAVBAR:DELAY_REASONS")),__output.push('</a>\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#downtimeReasons">'),__output.push(t("core","NAVBAR:DOWNTIME_REASONS")),__output.push('</a>\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#lossReasons">'),__output.push(t("core","NAVBAR:LOSS_REASONS")),__output.push('</a>\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#aors">'),__output.push(t("core","NAVBAR:AORS")),__output.push('</a>\n    <li class="divider">\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#licenses">'),__output.push(t("core","NAVBAR:LICENSES")),__output.push("</a>\n  </ul>\n")}(),__output.push("\n    </ul>\n    "),function(){__output.push('<ul class="nav navbar-nav navbar-right">\n  <li class="dropdown navbar-account-dropdown">\n    <a href="#account" class="dropdown-toggle" data-toggle="dropdown">\n      <i class="fa fa-user fa-lg navbar-account-status"></i>\n      '),__output.push(user.getLabel()),__output.push('\n      <b class="caret"></b>\n    </a>\n    <ul class="dropdown-menu">\n      <li data-online data-loggedin><a href="#users/'),__output.push(user.data._id),__output.push('">'),__output.push(t("core","NAVBAR:MY_ACCOUNT")),__output.push('</a>\n      <li class="divider">\n      <li class="dropdown-header">'),__output.push(t("core","NAVBAR:UI_LOCALE")),__output.push('\n      <li><a class="navbar-account-locale" href="#" data-locale="pl">'),__output.push(t("core","NAVBAR:LOCALE_PL")),__output.push('</a>\n      <li><a class="navbar-account-locale" href="#" data-locale="en">'),__output.push(t("core","NAVBAR:LOCALE_US")),__output.push('</a>\n      <li class="divider">\n      <li data-online data-loggedin=0><a class="navbar-account-logIn" href="#login">'),__output.push(t("core","NAVBAR:LOG_IN")),__output.push('</a>\n      <li data-online data-loggedin><a class="navbar-account-logOut" href="/logout">'),__output.push(t("core","NAVBAR:LOG_OUT")),__output.push('</a>\n    </ul>\n  </li>\n</ul>\n<!--\n<button class="btn btn-warning navbar-btn navbar-right navbar-feedback" type="button" title="'),__output.push(t("core","feedback:button:tooltip")),__output.push('">'),__output.push(t("core","feedback:button:text")),__output.push("</button>\n//-->\n")}(),__output.push("\n  </div>\n</div>\n");return __output.join("")}}),define("app/core/views/NavbarView",["underscore","app/i18n","app/user","../View","app/core/templates/navbar"],function(t,e,n,r,i){"use strict";var o=r.extend({template:i,localTopics:{"router.executing":function(t){this.activateNavItem(this.getModuleNameFromPath(t.req.path))},"socket.connected":function(){this.setConnectionStatus("online")},"socket.connecting":function(){this.setConnectionStatus("connecting")},"socket.connectFailed":function(){this.setConnectionStatus("offline")},"socket.disconnected":function(){this.setConnectionStatus("offline")}},events:{"click .disabled a":function(t){t.preventDefault()},"click .navbar-account-locale":function(t){t.preventDefault(),this.changeLocale(t.currentTarget.getAttribute("data-locale"))},"click .navbar-account-logIn":function(t){t.preventDefault(),this.trigger("logIn")},"click .navbar-account-logOut":function(t){t.preventDefault(),this.trigger("logOut")},"click .navbar-feedback":function(t){t.preventDefault(),t.target.disabled=!0,this.trigger("feedback",function(){t.target.disabled=!1})}}});return o.DEFAULT_OPTIONS={currentPath:"/",activeItemClassName:"active",offlineStatusClassName:"navbar-status-offline",onlineStatusClassName:"navbar-status-online",connectingStatusClassName:"navbar-status-connecting",loadedModules:{}},o.prototype.initialize=function(){t.defaults(this.options,o.DEFAULT_OPTIONS),this.activeModuleName="",this.navItems=null,this.$activeNavItem=null,this.activateNavItem(this.getModuleNameFromPath(this.options.currentPath))},o.prototype.beforeRender=function(){this.navItems=null,this.$activeNavItem=null},o.prototype.afterRender=function(){this.selectActiveNavItem(),this.setConnectionStatus(this.socket.isConnected()?"online":"offline"),this.hideNotAllowedEntries(),this.hideEmptyEntries()},o.prototype.serialize=function(){return{idPrefix:this.idPrefix,user:n}},o.prototype.activateNavItem=function(t){t!==this.activeModuleName&&(this.activeModuleName=t,this.selectActiveNavItem())},o.prototype.changeLocale=function(t){e.reload(t)},o.prototype.setConnectionStatus=function(t){if(this.isRendered()){var e=this.$(".navbar-account-status");e.removeClass(this.options.offlineStatusClassName).removeClass(this.options.onlineStatusClassName).removeClass(this.options.connectingStatusClassName),e.addClass(this.options[t+"StatusClassName"]),this.toggleConnectionStatusEntries("online"===t)}},o.prototype.getModuleNameFromLi=function(t,e,n){var r=t.dataset[n?"clientModule":"module"];if(void 0===r&&!e)return null;if(r)return r;var i=t.querySelector("a");if(!i)return null;var o=i.getAttribute("href");return o?this.getModuleNameFromPath(o):null},o.prototype.getModuleNameFromPath=function(t){if(("/"===t[0]||"#"===t[0])&&(t=t.substr(1)),""===t)return"";var e=t.match(/^([a-z0-9][a-z0-9\-]*[a-z0-9]*)/i);return e?e[1]:null},o.prototype.selectActiveNavItem=function(){if(this.isRendered()){null===this.navItems&&this.cacheNavItems();var e=this.options.activeItemClassName;null!==this.$activeNavItem&&this.$activeNavItem.removeClass(e);var n=this.navItems[this.activeModuleName];t.isUndefined(n)?this.$activeNavItem=null:(n.addClass(e),this.$activeNavItem=n)}},o.prototype.cacheNavItems=function(){this.navItems={},this.$(".nav > li").each(this.cacheNavItem.bind(this))},o.prototype.cacheNavItem=function(t,e){var n=this.$(e);n.hasClass(this.options.activeItemClassName)&&(this.$activeNavItem=n);var r=n.find("a").attr("href");if(r&&"#"===r[0]){var i=this.getModuleNameFromLi(n[0],!0,!0);this.navItems[i]=n}else if(n.hasClass("dropdown")){var o=this;n.find(".dropdown-menu > li").each(function(){var t=o.getModuleNameFromLi(this,!0,!0);o.navItems[t]=n})}},o.prototype.hideNotAllowedEntries=function(){function t(n){if(!n.hasClass("dropdown"))return!0;var i=!0;return n.find("> .dropdown-menu > li").each(function(){var o=n.find(this);if(!e(o)){var s=r(o)&&t(o);o.toggle(s),i=i||s}}),i}function e(t){return t.hasClass("divider")?(a.push(t),!0):t.hasClass("dropdown-header")?(s.push(t),!0):!1}function r(t){var e=t.attr("data-loggedin");if("string"==typeof e&&(e="0"!==e,e!==o))return!1;var r=i.getModuleNameFromLi(t[0],!1);if(null!==r&&void 0===t.attr("data-no-module")&&!i.options.loadedModules[r])return!1;var s=t.attr("data-privilege");return void 0===s||n.isAllowedTo.apply(n,s.split(" "))}var i=this,o=n.isLoggedIn(),s=[],a=[];this.$(".navbar-nav > li").each(function(){var n=i.$(this);e(n)||n.toggle(r(n)&&t(n))}),s.forEach(function(t){t.toggle(this.hasVisibleSiblings(t,"next"))},this),a.forEach(function(t){t.toggle(this.hasVisibleSiblings(t,"prev")&&this.hasVisibleSiblings(t,"next"))},this)},o.prototype.hasVisibleSiblings=function(t,e){var n=t[e+"All"]().filter(function(){return"none"!==this.style.display});if(!n.length)return!1;var r=n.first();return!r.hasClass("divider")},o.prototype.hideEmptyEntries=function(){var t=this;this.$(".dropdown > .dropdown-menu").each(function(){var e=t.$(this),n=!1;e.children().each(function(){n=n||"none"!==this.style.display}),n||e.parent().hide()})},o.prototype.toggleConnectionStatusEntries=function(t){var e=this;this.$("li[data-online]").each(function(){var n=e.$(this);if("undefined"!=typeof n.attr("data-disabled"))return n.addClass("disabled");switch(n.attr("data-online")){case"show":n[t?"show":"hide"]();break;case"hide":n[t?"hide":"show"]();break;default:n[t?"removeClass":"addClass"]("disabled")}})},o}),define("app/core/templates/logInForm",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="logInForm" method="post" action="/login">\n  <div class="form-group">\n    <input id="'),__output.push(idPrefix),__output.push('-login" name="login" type="text" class="form-control input-lg" placeholder="'),__output.push(t("core","LOG_IN_FORM:LABEL:LOGIN")),__output.push('" autofocus>\n  </div>\n  <div class="form-group">\n    <input id="'),__output.push(idPrefix),__output.push('-password" name="password" type="password" class="form-control input-lg" placeholder="'),__output.push(t("core","LOG_IN_FORM:LABEL:PASSWORD")),__output.push('">\n  </div>\n  <button class="btn btn-block btn-lg btn-primary logInForm-submit" type="submit">\n    <i class="fa fa-spinner fa-spin logInForm-submit-spinner"></i>\n    <span class="logInForm-submit-label">'),__output.push(t("core","LOG_IN_FORM:SUBMIT:LOG_IN")),__output.push('</span>\n  </button>\n  <p class="logInForm-links">\n    <button id="'),__output.push(idPrefix),__output.push('-loginLink" class="btn btn-link" type="button">'),__output.push(t("core","LOG_IN_FORM:LINK:LOG_IN")),__output.push('</button>\n    <button id="'),__output.push(idPrefix),__output.push('-resetLink" class="btn btn-link" type="button">'),__output.push(t("core","LOG_IN_FORM:LINK:RESET")),__output.push("</button>\n  </p>\n</form>\n");return __output.join("")}}),define("app/core/views/LogInFormView",["app/user","app/i18n","app/viewport","../View","app/core/templates/logInForm"],function(t,e,n,r,i){"use strict";return r.extend({template:i,events:{submit:"submitForm","keypress input":function(){this.$submit.removeClass("btn-danger").addClass("btn-primary")},"click #-loginLink":function(){this.$el.attr("action","/login"),this.$id("loginLink").hide(),this.$id("resetLink").show(),this.$id("login").select(),this.$id("password").attr("placeholder",e("core","LOG_IN_FORM:LABEL:PASSWORD")),this.$(".logInForm-submit-label").text(e("core","LOG_IN_FORM:SUBMIT:LOG_IN")),this.resetting=!1,this.onModeSwitch()},"click #-resetLink":function(){this.$el.attr("action","/resetPassword/request"),this.$id("resetLink").hide(),this.$id("loginLink").show(),this.$id("login").select(),this.$id("password").val("").attr("placeholder",e("core","LOG_IN_FORM:LABEL:NEW_PASSWORD")),this.$(".logInForm-submit-label").text(e("core","LOG_IN_FORM:SUBMIT:RESET")),this.resetting=!0,this.onModeSwitch()}},initialize:function(){this.resetting=!1,this.originalTitle=null,this.$title=null,this.$submit=null},destroy:function(){this.$title=null,this.$submit=null},afterRender:function(){this.$id("login").focus(),this.$id("loginLink").hide(),this.$title=this.getTitleEl(),this.$submit=this.$(".logInForm-submit"),this.originalTitle=this.$title.text()},submitForm:function(){if(!this.$submit.hasClass("btn-primary"))return!1;var r={login:this.$id("login").val(),password:this.$id("password").val(),socketId:this.socket.getId()};if(!r.login.length||!r.password.length)return!1;this.resetting&&(r.subject=e("core","LOG_IN_FORM:RESET:SUBJECT"),r.text=e("core","LOG_IN_FORM:RESET:TEXT",{appUrl:window.location.origin,resetUrl:window.location.origin+"/resetPassword/{REQUEST_ID}"})),this.$el.addClass("logInForm-loading"),this.$submit.prop("disabled",!0),this.$(".btn-link").prop("disabled",!0);var i=this.ajax({type:"POST",url:this.el.action,data:JSON.stringify(r)}),o=this;return i.done(function(r){o.resetting?n.msg.show({type:"info",time:5e3,text:e("core","LOG_IN_FORM:RESET:MSG:SUCCESS")}):(o.$submit.removeClass("btn-primary").addClass("btn-success"),t.reload(r))}),i.fail(function(t){if(o.$submit.removeClass("btn-primary").addClass("btn-danger"),o.resetting){var r=t.responseJSON&&t.responseJSON.error?t.responseJSON.error:{};n.msg.show({type:"error",time:5e3,text:e.has("core","LOG_IN_FORM:RESET:MSG:"+r.message)?e("core","LOG_IN_FORM:RESET:MSG:"+r.message):e("core","LOG_IN_FORM:RESET:MSG:FAILURE")})}}),i.always(function(){o.$submit&&(o.$submit.attr("disabled",!1),o.$(".btn-link").prop("disabled",!1),o.$el.removeClass("logInForm-loading"),o.$("[autofocus]").focus()),o.resetting&&o.$id("loginLink").click()}),!1},getTitleEl:function(){var t=this.$el.closest(".modal-content");return t.length?t.find(".modal-title"):this.$el.closest(".page").find(".page-breadcrumbs > :last-child")},onModeSwitch:function(){this.$title.text(this.resetting?e("core","LOG_IN_FORM:TITLE:RESET"):this.originalTitle),this.$submit.removeClass("btn-danger").addClass("btn-primary")}})}),define("app/core/util/showDeleteFormPage",["underscore","app/viewport"],function(t,e){"use strict";return function(n,r,i,o){var s=new n({_id:r.params.id});e.loadPage("app/core/pages/ActionFormPage",function(e){return new e(t.extend({model:s,actionKey:"delete",successUrl:s.genClientUrl("base"),cancelUrl:i||s.genClientUrl("base"),formMethod:"DELETE",formAction:s.url(),formActionSeverity:"danger"},o))})}}),define("app/core/templates/colorLabel",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<span class="label '),__output.push("string"==typeof className?className:""),__output.push('" style="background-color: '),__output.push(color),__output.push('" title="'),__output.push(escape("string"==typeof title?title:"")),__output.push('">'),__output.push(escape("string"==typeof label?label:color)),__output.push("</span>\n");return __output.join("")}}),define("app/aors/Aor",["../core/Model","app/core/templates/colorLabel"],function(t,e){"use strict";return t.extend({urlRoot:"/aors",clientUrlRoot:"#aors",topicPrefix:"aors",privilegePrefix:"DICTIONARIES",nlsDomain:"aors",labelAttribute:"name",defaults:{name:null,description:null,color:"#f08f44",refColor:"#ffa85c",refValue:0},serialize:function(){var t=this.toJSON();return t.color=e({color:t.color}),t.refColor=e({color:t.refColor}),t.refValue=t.refValue&&t.refValue.toLocaleString?t.refValue.toLocaleString():"0",t}})}),define("app/aors/AorCollection",["../core/Collection","./Aor"],function(t,e){"use strict";return t.extend({model:e,rqlQuery:"sort(name)",comparator:"name"})}),define("app/data/aors",["app/aors/AorCollection","./createStorage"],function(t,e){"use strict";return e("AORS","aors",t)}),define("app/nls/aors",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Areas of responsibility"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the areas of responsibility :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the area of resposibility :("},"MSG:DELETED":function(t){return"Area of resposibility <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add AOR"},"PAGE_ACTION:edit":function(){return"Edit AOR"},"PAGE_ACTION:delete":function(){return"Delete AOR"},"PANEL:TITLE:details":function(){return"AOR's details"},"PANEL:TITLE:addForm":function(){return"Add AOR form"},"PANEL:TITLE:editForm":function(){return"Edit AOR form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:name":function(){return"Name"},"PROPERTY:description":function(){return"Description"},"PROPERTY:color":function(){return"Value color"},"PROPERTY:refValue":function(){return"Reference [FTE]"},"PROPERTY:refColor":function(){return"Reference color"},"FORM:ACTION:add":function(){return"Add AOR"},"FORM:ACTION:edit":function(){return"Edit AOR"},"FORM:ERROR:addFailure":function(){return"Failed to add the new AOR :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the new AOR :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"AOR deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete AOR"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen AOR?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> AOR?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the AOR :-("}},pl:!0}}),define("app/nls/pl/aors",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Obszary odpowiedzialno≈õci"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie obszar√≥w odpowiedzialno≈õci nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie obszaru odpowiedzialno≈õci nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Obszar odpowiedzialno≈õci <em>"+e.v(t,"label")+"</em> zosta≈Ç usuniƒôty."},"PAGE_ACTION:add":function(){return"Dodaj obszar odpowiedzialno≈õci"},"PAGE_ACTION:edit":function(){return"Edytuj obszar odpowiedzialno≈õci"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ obszar odpowiedzialno≈õci"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy obszaru odpowiedzialno≈õci"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania obszaru odpowiedzialno≈õci"},"PANEL:TITLE:editForm":function(){return"Formularz edycji obszaru odpowiedzialno≈õci"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:name":function(){return"Nazwa"},"PROPERTY:description":function(){return"Opis"},"PROPERTY:color":function(){return"Kolor warto≈õci"},"PROPERTY:refValue":function(){return"Referencja [FTE]"},"PROPERTY:refColor":function(){return"Kolor referencji"},"FORM:ACTION:add":function(){return"Dodaj obszar odpowiedzialno≈õci"},"FORM:ACTION:edit":function(){return"Edytuj obszar odpowiedzialno≈õci"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá obszaru odpowiedzialno≈õci :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá obszaru odpowiedzialno≈õci :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia obszaru odpowiedzialno≈õci"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ obszar odpowiedzialno≈õci"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany obszar odpowiedzialno≈õci?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá obszar odpowiedzialno≈õci <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá obszaru odpowiedzialno≈õci :-("}}}),define("app/aors/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","../data/aors","./Aor","i18n!app/nls/aors"],function(t,e,n,r,i,o){"use strict";var s=n.auth("DICTIONARIES:VIEW"),a=n.auth("DICTIONARIES:MANAGE");t.map("/aors",s,function(){e.loadPage(["app/core/pages/ListPage"],function(t){return new t({collection:i,columns:[{id:"name",className:"is-min"},"description",{id:"color",className:"is-min"},{id:"refColor",className:"is-min"},{id:"refValue",className:"is-min"}]})})}),t.map("/aors/:id",function(t){e.loadPage(["app/core/pages/DetailsPage","app/aors/templates/details"],function(e,n){return new e({model:new o({_id:t.params.id}),detailsTemplate:n})})}),t.map("/aors;add",a,function(){e.loadPage(["app/core/pages/AddFormPage","app/aors/views/AorFormView"],function(t,e){return new t({FormView:e,model:new o})})}),t.map("/aors/:id;edit",a,function(t){e.loadPage(["app/core/pages/EditFormPage","app/aors/views/AorFormView"],function(e,n){return new e({FormView:n,model:new o({_id:t.params.id})})})}),t.map("/aors/:id;delete",a,r.bind(null,o))}),define("app/companies/Company",["../core/Model","app/core/templates/colorLabel"],function(t,e){"use strict";return t.extend({urlRoot:"/companies",clientUrlRoot:"#companies",topicPrefix:"companies",privilegePrefix:"DICTIONARIES",nlsDomain:"companies",labelAttribute:"name",defaults:{name:null,fteMasterPosition:-1,fteLeaderPosition:-1,color:"#000000"},serialize:function(){var t=this.toJSON();return t.name||(t.name=t._id),t.color=e({color:t.color}),t}})}),define("app/companies/CompanyCollection",["../core/Collection","./Company"],function(t,e){"use strict";return t.extend({model:e,rqlQuery:"select(name,fteMasterPosition,fteLeaderPosition,color)&sort(_id)"})}),define("app/data/companies",["app/companies/CompanyCollection","./createStorage"],function(t,e){"use strict";return e("COMPANIES","companies",t)}),define("app/nls/companies",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Companies"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the companies :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the company :("},"MSG:DELETED":function(t){return"Company <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add company"},"PAGE_ACTION:edit":function(){return"Edit company"},"PAGE_ACTION:delete":function(){return"Delete company"},"PANEL:TITLE:details":function(){return"Company's details"},"PANEL:TITLE:addForm":function(){return"Add company form"},"PANEL:TITLE:editForm":function(){return"Edit company form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:name":function(){return"Name"},"PROPERTY:fteMasterPosition":function(){return"Position in FTE (production)"},"PROPERTY:fteLeaderPosition":function(){return"Position in FTE (distribution)"
},"PROPERTY:color":function(){return"Color"},"FORM:ACTION:add":function(){return"Add company"},"FORM:ACTION:edit":function(){return"Edit company"},"FORM:ERROR:addFailure":function(){return"Failed to add the new company :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the company :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Company deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete company"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen company?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> company?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the company :-("}},pl:!0}}),define("app/nls/pl/companies",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Firmy"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie firm nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie firmy nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Firma <em>"+e.v(t,"label")+"</em> zosta≈Ça usuniƒôta."},"PAGE_ACTION:add":function(){return"Dodaj firmƒô"},"PAGE_ACTION:edit":function(){return"Edytuj firmƒô"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ firmƒô"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy firmy"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania firmy"},"PANEL:TITLE:editForm":function(){return"Formularz edycji firmy"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:name":function(){return"Nazwa"},"PROPERTY:fteMasterPosition":function(){return"Pozycja w FTE (produkcja)"},"PROPERTY:fteLeaderPosition":function(){return"Pozycja w FTE (magazyn)"},"PROPERTY:color":function(){return"Kolor"},"FORM:ACTION:add":function(){return"Dodaj firmƒô"},"FORM:ACTION:edit":function(){return"Edytuj firmƒô"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá firmy :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá firmy :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia firmy"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ firmƒô"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybranƒÖ firmƒô?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá firmƒô <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá firmy :-("}}}),define("app/companies/routes",["../router","../viewport","../user","../data/companies","./Company","i18n!app/nls/companies"],function(t,e,n,r,i){"use strict";var o=n.auth("DICTIONARIES:VIEW"),s=n.auth("DICTIONARIES:MANAGE");t.map("/companies",o,function(){e.loadPage(["app/core/pages/ListPage"],function(t){return new t({collection:r,columns:[{id:"_id",className:"is-min"},{id:"name",className:"is-min"},{id:"fteMasterPosition",className:"is-min"},{id:"fteLeaderPosition",className:"is-min"},"color"]})})}),t.map("/companies/:id",function(t){e.loadPage(["app/core/pages/DetailsPage","app/companies/templates/details"],function(e,n){return new e({model:new i({_id:t.params.id}),detailsTemplate:n})})}),t.map("/companies;add",s,function(){e.loadPage(["app/core/pages/AddFormPage","app/companies/views/CompanyFormView"],function(t,e){return new t({FormView:e,model:new i})})}),t.map("/companies/:id;edit",s,function(t){e.loadPage(["app/core/pages/EditFormPage","app/companies/views/CompanyFormView"],function(e,n){return new e({FormView:n,model:new i({_id:t.params.id})})})}),t.map("/companies/:id;delete",s,function(t,n){var r=new i({_id:t.params.id});e.loadPage(["app/core/pages/ActionFormPage"],function(t){return new t({model:r,actionKey:"delete",successUrl:r.genClientUrl("base"),cancelUrl:n||r.genClientUrl("base"),formMethod:"DELETE",formAction:r.url(),formActionSeverity:"danger"})})})}),define("app/dashboard/templates/dashboard",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push("<div>\n  <h1>WIP</h1>\n</div>\n");return __output.join("")}}),define("app/dashboard/views/DashboardView",["app/core/View","app/dashboard/templates/dashboard"],function(t,e){"use strict";return t.extend({template:e})}),define("app/dashboard/pages/DashboardPage",["app/i18n","app/user","app/core/View","app/core/views/LogInFormView","../views/DashboardView"],function(t,e,n,r,i){"use strict";return n.extend({layoutName:"page",pageId:"dashboard",localTopics:{"user.reloaded":function(){this.view.remove(),this.view=e.isLoggedIn()?new i:new r,this.view.render()}},breadcrumbs:function(){return e.isLoggedIn()?[]:[t.bound("dashboard","breadcrumbs:logIn")]},initialize:function(){this.view=e.isLoggedIn()?new i:new r},afterRender:function(){this.$('input[name="login"]').focus()}})}),define("app/nls/dashboard",["app/nls/locale/en"],function(t){return{root:{"breadcrumbs:logIn":function(){return"Log in form"}},pl:!0}}),define("app/nls/pl/dashboard",["app/nls/locale/pl"],function(t){return{"breadcrumbs:logIn":function(){return"Logowanie do systemu"}}}),define("app/dashboard/routes",["underscore","app/broker","app/user","app/router","app/viewport","./pages/DashboardPage","i18n!app/nls/dashboard"],function(t,e,n,r,i,o){"use strict";r.map("/",function(){t.isEmpty(n.data.privileges)?e.publish("router.navigate",{url:"/kaizenOrders",trigger:!0,replace:!1}):i.showPage(new o)})}),define("app/nls/divisions",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Divisions"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the divisions :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the division :("},"MSG:DELETED":function(t){return"Division <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add division"},"PAGE_ACTION:edit":function(){return"Edit division"},"PAGE_ACTION:delete":function(){return"Delete division"},"PANEL:TITLE:details":function(){return"Division's details"},"PANEL:TITLE:addForm":function(){return"Add division form"},"PANEL:TITLE:editForm":function(){return"Edit division form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:description":function(){return"Description"},"PROPERTY:type":function(){return"Type"},"TYPE:prod":function(){return"Production"},"TYPE:dist":function(){return"Distribution"},"TYPE:other":function(){return"Other"},"FORM:ACTION:add":function(){return"Add division"},"FORM:ACTION:edit":function(){return"Edit division"},"FORM:ERROR:addFailure":function(){return"Failed to add the new division :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the division :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Division deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete division"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen division?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> division?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the division :-("}},pl:!0}}),define("app/nls/pl/divisions",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Wydzia≈Çy"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie wydzia≈Ç√≥w nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie wydzia≈Çu nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Wydzia≈Ç <em>"+e.v(t,"label")+"</em> zosta≈Ço usuniƒôte."},"PAGE_ACTION:add":function(){return"Dodaj wydzia≈Ç"},"PAGE_ACTION:edit":function(){return"Edytuj wydzia≈Ç"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ wydzia≈Ç"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy wydzia≈Çu"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania wydzia≈Çu"},"PANEL:TITLE:editForm":function(){return"Formularz edycji wydzia≈Çu"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:description":function(){return"Opis"},"PROPERTY:type":function(){return"Typ"},"TYPE:prod":function(){return"Produkcja"},"TYPE:dist":function(){return"Dystrybucja"},"TYPE:other":function(){return"Inny"},"FORM:ACTION:add":function(){return"Dodaj wydzia≈Ç"},"FORM:ACTION:edit":function(){return"Edytuj wydzia≈Ç"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá wydzia≈Çu :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá wydzia≈Çu :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia wydzia≈Çu"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ wydzia≈Ç"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany wydzia≈Ç?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wydzia≈Ç <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá wydzia≈Çu :-("}}}),define("app/divisions/routes",["../router","../viewport","../i18n","../user","../core/util/showDeleteFormPage","../data/divisions","./Division","i18n!app/nls/divisions"],function(t,e,n,r,i,o,s){"use strict";var a=r.auth("DICTIONARIES:VIEW"),u=r.auth("DICTIONARIES:MANAGE");t.map("/divisions",a,function(){e.loadPage(["app/core/pages/ListPage"],function(t){return new t({collection:o,columns:[{id:"_id",className:"is-min"},{id:"type",className:"is-min"},"description"],serializeRow:function(t){var e=t.toJSON();return e.type=n("divisions","TYPE:"+e.type),e}})})}),t.map("/divisions/:id",function(t){e.loadPage(["app/core/pages/DetailsPage","app/divisions/templates/details"],function(e,n){return new e({model:new s({_id:t.params.id}),detailsTemplate:n})})}),t.map("/divisions;add",u,function(){e.loadPage(["app/core/pages/AddFormPage","app/divisions/views/DivisionFormView"],function(t,e){return new t({FormView:e,model:new s})})}),t.map("/divisions/:id;edit",u,function(t){e.loadPage(["app/core/pages/EditFormPage","app/divisions/views/DivisionFormView"],function(e,n){return new e({FormView:n,model:new s({_id:t.params.id})})})}),t.map("/divisions/:id;delete",u,i.bind(null,s))}),define("app/delayReasons/DelayReason",["../core/Model"],function(t){"use strict";return t.extend({urlRoot:"/delayReasons",clientUrlRoot:"#delayReasons",topicPrefix:"delayReasons",privilegePrefix:"DICTIONARIES",nlsDomain:"delayReasons",labelAttribute:"name",defaults:{name:null}})}),define("app/delayReasons/DelayReasonCollection",["../core/Collection","./DelayReason"],function(t,e){"use strict";return t.extend({model:e,rqlQuery:"select(name)&sort(name)",comparator:"name"})}),define("app/nls/delayReasons",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Delay reasons"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the delay reasons :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the delay reason :("},"MSG:DELETED":function(t){return"Delay reason <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add delay reason"},"PAGE_ACTION:edit":function(){return"Edit delay reason"},"PAGE_ACTION:delete":function(){return"Delete delay reason"},"PANEL:TITLE:details":function(){return"Delay reason's details"},"PANEL:TITLE:addForm":function(){return"Add delay reason form"},"PANEL:TITLE:editForm":function(){return"Edit delay reason form"},"PROPERTY:name":function(){return"Name"},"FORM:ACTION:add":function(){return"Add delay reason"},"FORM:ACTION:edit":function(){return"Edit delay reason"},"FORM:ERROR:addFailure":function(){return"Failed to add the new delay reason :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the delay reason :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Delay reason deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete delay reason"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen delay reason?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> delay reason?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the delay reason :-("}},pl:!0}}),define("app/nls/pl/delayReasons",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Powody op√≥≈∫nie≈Ñ"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie powod√≥w op√≥≈∫nie≈Ñ nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie powodu op√≥≈∫nie≈Ñ nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Pow√≥d op√≥≈∫nie≈Ñ <em>"+e.v(t,"label")+"</em> zosta≈Ç usuniƒôty."},"PAGE_ACTION:add":function(){return"Dodaj powod op√≥≈∫nie≈Ñ"},"PAGE_ACTION:edit":function(){return"Edytuj powod op√≥≈∫nie≈Ñ"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ powod op√≥≈∫nie≈Ñ"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy powodu op√≥≈∫nie≈Ñ"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania powodu op√≥≈∫nie≈Ñ"},"PANEL:TITLE:editForm":function(){return"Formularz edycji powodu op√≥≈∫nie≈Ñ"},"PROPERTY:name":function(){return"Nazwa"},"FORM:ACTION:add":function(){return"Dodaj powod op√≥≈∫nie≈Ñ"},"FORM:ACTION:edit":function(){return"Edytuj powod op√≥≈∫nie≈Ñ"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá powodu op√≥≈∫nie≈Ñ :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá powodu op√≥≈∫nie≈Ñ :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia powodu op√≥≈∫nie≈Ñ"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ pow√≥d op√≥≈∫nie≈Ñ"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybranƒÖ powod op√≥≈∫nie≈Ñ?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá powod op√≥≈∫nie≈Ñ <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá powodu op√≥≈∫nie≈Ñ :-("}}}),define("app/delayReasons/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","./DelayReasonCollection","./DelayReason","i18n!app/nls/delayReasons"],function(t,e,n,r,i,o){"use strict";var s=n.auth("DICTIONARIES:VIEW"),a=n.auth("DICTIONARIES:MANAGE");t.map("/delayReasons",s,function(t){e.loadPage(["app/core/pages/ListPage"],function(e){return new e({collection:new i(null,{rqlQuery:t.rql}),columns:["name"]})})}),t.map("/delayReasons/:id",function(t){e.loadPage(["app/core/pages/DetailsPage","app/delayReasons/templates/details"],function(e,n){return new e({model:new o({_id:t.params.id}),detailsTemplate:n})})}),t.map("/delayReasons;add",a,function(){e.loadPage(["app/core/pages/AddFormPage","app/delayReasons/views/DelayReasonFormView"],function(t,e){return new t({FormView:e,model:new o})})}),t.map("/delayReasons/:id;edit",a,function(t){e.loadPage(["app/core/pages/EditFormPage","app/delayReasons/views/DelayReasonFormView"],function(e,n){return new e({FormView:n,model:new o({_id:t.params.id})})})}),t.map("/delayReasons/:id;delete",a,r.bind(null,o))}),define("app/downtimeReasons/DowntimeReason",["../i18n","../core/Model","../data/aors","app/core/templates/colorLabel"],function(t,e,n,r){"use strict";return e.extend({urlRoot:"/downtimeReasons",clientUrlRoot:"#downtimeReasons",topicPrefix:"downtimeReasons",privilegePrefix:"DICTIONARIES",nlsDomain:"downtimeReasons",labelAttribute:"label",defaults:function(){return{label:null,type:"other",subdivisionTypes:["assembly","press"],opticsPosition:-1,pressPosition:-1,auto:!1,scheduled:!1,color:"#ff0000",refColor:"#aa0000",refValue:0,aors:[],defaultAor:!1}},serialize:function(){var e=this.toJSON();return e.scheduled=t("core","BOOL:"+e.scheduled),e.auto=t("core","BOOL:"+e.auto),e.type=t("downtimeReasons","type:"+e.type),e.color=r({color:e.color}),e.refColor=r({color:e.refColor}),e.refValue=e.refValue&&e.refValue.toLocaleString?e.refValue.toLocaleString():"0",e.subdivisionTypes=e.subdivisionTypes&&e.subdivisionTypes.length?e.subdivisionTypes.map(function(e){return t("downtimeReasons","subdivisionType:"+e)}).join("; "):t("downtimeReasons","subdivisionType:none"),e.aors=e.aors.map(function(t){var e=n.get(t);return e?e.getLabel():t}),e.defaultAor=t("core","BOOL:"+e.defaultAor),e},serializeRow:function(){var e=this.serialize();return e.aors=e.aors.length?e.aors.join("; "):t("downtimeReasons","aors:all"),e}})}),define("app/downtimeReasons/DowntimeReasonCollection",["../core/Collection","./DowntimeReason"],function(t,e){"use strict";return t.extend({model:e,rqlQuery:"sort(_id)",comparator:"_id",findBySubdivisionType:function(t){return this.filter(function(e){return-1!==e.get("subdivisionTypes").indexOf(t)})},findFirstBreakIdBySubdivisionType:function(t){var e=this.find(function(e){return"break"!==e.get("type")?!1:-1!==e.get("subdivisionTypes").indexOf(t)});return e?e.id:null}})}),define("app/data/downtimeReasons",["app/downtimeReasons/DowntimeReasonCollection","./createStorage"],function(t,e){"use strict";return e("DOWNTIME_REASONS","downtimeReasons",t)}),define("app/core/util/bindLoadingMessage",["app/i18n","app/viewport"],function(t,e){"use strict";return function(n,r,i,o){function s(){e.msg.loaded()}function a(n){var r=n.statusText;if("abort"===r)return e.msg.loaded();var s=n.responseJSON;s&&s.error&&(s.error.code?r=s.error.code:s.error.message&&(r=s.error.message)),e.msg.loadingFailed(t(o,i,{code:r}))}return o||(o=n.nlsDomain?n.nlsDomain:n.model&&n.model.prototype.nlsDomain?n.model.prototype.nlsDomain:"core"),i||(i=n.model?"MSG:LOADING_FAILURE":"MSG:LOADING_SINGLE_FAILURE"),r.listenTo(n,"request",function(t,n,r){"read"===r.syncMethod&&(e.msg.loading(),n.done(s),n.fail(a))}),n}}),define("app/core/templates/actionForm",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="action-form" method="post" action="'),__output.push(formAction),__output.push('">\n  <input type="hidden" name="_method" value="'),__output.push(formMethod),__output.push('">\n  <p>'),__output.push("function"==typeof messageText?messageText():messageText),__output.push('</p>\n  <div class="form-actions">\n    <button type="submit" class="btn btn-'),__output.push(formActionSeverity),__output.push('">'),__output.push("function"==typeof formActionText?formActionText():formActionText),__output.push("</button>\n    "),"#"===cancelUrl?(__output.push('\n    <button type="button" class="cancel btn btn-link">'),__output.push(t("core","ACTION_FORM:BUTTON:cancel")),__output.push("</button>\n    ")):(__output.push('\n    <a class="cancel" href="'),__output.push(cancelUrl),__output.push('">'),__output.push(t("core","ACTION_FORM:BUTTON:cancel")),__output.push("</a>\n    ")),__output.push("\n  </div>\n</form>\n");return __output.join("")}}),define("app/core/views/ActionFormView",["underscore","app/i18n","app/viewport","app/router","../View","app/core/templates/actionForm"],function(t,e,n,r,i,o){"use strict";var s={formMethod:"POST",formAction:"/",formActionText:e.bound("core","ACTION_FORM:BUTTON"),formActionSeverity:"primary",messageText:e.bound("core","ACTION_FORM:MESSAGE"),successUrl:null,cancelUrl:"#",failureText:e.bound("core","ACTION_FORM:MESSAGE_FAILURE"),requestData:null},a=i.extend({template:o,events:{submit:"submitForm"},$errorMessage:null,initialize:function(){t.defaults(this.options,s),this.$errorMessage=null},destroy:function(){this.hideErrorMessage()},serialize:function(){return{formMethod:this.options.formMethod,formAction:this.options.formAction,formActionText:this.options.formActionText,formActionSeverity:this.options.formActionSeverity,messageText:this.options.messageText,cancelUrl:this.options.cancelUrl,model:this.model}},afterRender:function(){this.model&&this.listenToOnce(this.model,"change",this.render)},submitForm:function(){this.hideErrorMessage();var e=this.$('[type="submit"]').attr("disabled",!0),r=this.options,i=r.requestData;i=null==i?void 0:t.isFunction(i)?i.call(this):JSON.stringify(i);var o=this.ajax({type:r.formMethod,url:r.formAction,data:i}),s=this;return o.done(function(e){s.trigger("success",e),t.isString(r.successUrl)&&s.broker.publish("router.navigate",{url:r.successUrl,trigger:!0,replace:!0})}),o.fail(function(t){s.trigger("failure",t),r.failureText&&(s.$errorMessage=n.msg.show({type:"error",time:5e3,text:r.failureText}))}),o.always(function(){e.attr("disabled",!1)}),!1},hideErrorMessage:function(){null!==this.$errorMessage&&(n.msg.hide(this.$errorMessage),this.$errorMessage=null)}},{showDialog:function(r){var i=null;if(r.nlsDomain||(r.nlsDomain=r.model.getNlsDomain()),r.nlsDomain){i=e.bound(r.nlsDomain,"ACTION_FORM:DIALOG_TITLE:"+r.actionKey);var o=r.labelAttribute?r.model.get(r.labelAttribute):r.model.getLabel();r.messageText||(r.messageText=o?e.bound(r.nlsDomain,"ACTION_FORM:MESSAGE_SPECIFIC:"+r.actionKey,{label:o}):e.bound(r.nlsDomain,"ACTION_FORM:MESSAGE:"+r.actionKey)),r.formActionText||(r.formActionText=e.bound(r.nlsDomain,"ACTION_FORM:BUTTON:"+r.actionKey)),r.failureText||(r.failureText=e.bound(r.nlsDomain,"ACTION_FORM:MESSAGE_FAILURE:"+r.actionKey))}!r.formAction&&t.isFunction(r.model.url)&&(r.formAction=r.model.url()),t.isObject(r.requestData)||(r.requestData={}),t.isString(r.requestData.action)||(r.requestData.action=r.actionKey);var s=new a(r);return s.on("success",function(){n.closeDialog()}),n.showDialog(s,i),s},showDeleteDialog:function(t){return t.actionKey="delete",t.formMethod="DELETE",t.formActionSeverity="danger",a.showDialog(t)}});return a}),define("app/core/templates/jumpAction",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="page-actions-jump" title="'),__output.push(t(nlsDomain,"PAGE_ACTION:jump:title")),__output.push('">\n  <div class="input-group">\n    <input name="rid" type="text" class="form-control" placeholder="'),__output.push(t(nlsDomain,"PAGE_ACTION:jump:placeholder")),__output.push('" required autofocus pattern="^ *[0-9]+ *$">\n    <span class="input-group-btn">\n      <button class="btn btn-default" type="submit"><i class="fa fa-search"></i></button>\n    </span>\n  </div>\n</form>\n');return __output.join("")}}),define("app/core/util/pageActions",["underscore","app/i18n","app/viewport","../views/ActionFormView","app/core/templates/jumpAction"],function(t,e,n,r,i){"use strict";function o(t,e,n){return e===!1?null:e||t.getPrivilegePrefix()+":"+(n||"MANAGE")}function s(t){return t.paginationData?t.paginationData.get("totalCount"):t.length}function a(r,i,o){var s=o[0].rid;if(s.readOnly)return!1;var a=parseInt(s.value,10);if(isNaN(a)||0>=a)return s.value="",!1;s.readOnly=!0,s.value=a;var u=o.find(".fa").removeClass("fa-search").addClass("fa-spinner fa-spin"),c=r.ajax({url:t.result(i,"url")+";rid",data:{rid:a}});return c.done(function(t){r.broker.publish("router.navigate",{url:i.genClientUrl()+"/"+t,trigger:!0})}),c.fail(function(){n.msg.show({type:"error",time:2e3,text:e(i.getNlsDomain(),"MSG:jump:404",{rid:a})}),u.removeClass("fa-spinner fa-spin").addClass("fa-search"),s.readOnly=!1,s.select()}),!1}return{add:function(t,n){return{label:e.bound(t.getNlsDomain(),"PAGE_ACTION:add"),icon:"plus",href:t.genClientUrl("add"),privileges:o(t,n)}},edit:function(t,n){return{label:e.bound(t.getNlsDomain(),"PAGE_ACTION:edit"),icon:"edit",href:t.genClientUrl("edit"),privileges:o(t,n)}},"delete":function(n,i,s){return s||(s={}),{label:e.bound(n.getNlsDomain(),"PAGE_ACTION:delete"),icon:"times",href:n.genClientUrl("delete"),privileges:o(n,i),callback:function(e){e&&0!==e.button||(e&&e.preventDefault(),r.showDeleteDialog(t.defaults({model:n},s)))}}},"export":function(n,r,i,a){return r.listenTo(i,"sync",function(){var e=s(i),r=n.$(".page-actions .export").attr("href",t.result(i,"url")+";export?"+i.rqlQuery).toggleClass("disabled",!e).removeClass("btn-default btn-warning");e>=1e4?r.removeClass("btn-default").addClass("btn-warning"):r.removeClass("btn-warning").addClass("btn-default")}),{label:e.bound(i.getNlsDomain(),"PAGE_ACTION:export"),icon:"download",type:s(i)>=1e4?"warning":"default",href:t.result(i,"url")+";export?"+i.rqlQuery,privileges:o(i,a,"VIEW"),className:"export"+(i.length?"":" disabled")}},jump:function(t,e){return{template:function(){return i({nlsDomain:e.getNlsDomain()})},afterRender:function(n){var r=n.find("form");r.submit(a.bind(null,t,e,r))}}}}}),define("app/core/templates/pagination",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<ul class="pagination">\n\n  '),firstLastLinksVisible&&(__output.push("\n    "),firstPageLinkAvailable?(__output.push('\n    <li><a href="'),__output.push(firstPageHref),__output.push('" title="'),__output.push(t("core","PAGINATION:FIRST_PAGE")),__output.push('" data-page="1">&laquo;</a>\n    ')):__output.push('\n    <li class="disabled"><span>&laquo;</span>\n    '),__output.push("\n  ")),__output.push("\n\n  "),prevNextLinksVisible&&(__output.push("\n    "),prevPageLinkAvailable?(__output.push('\n    <li><a href="'),__output.push(prevPageHref),__output.push('" title="'),__output.push(t("core","PAGINATION:PREV_PAGE")),__output.push('" data-page="'),__output.push(page-1),__output.push('">&lsaquo;</a>\n    ')):__output.push('\n    <li class="disabled"><span>&lsaquo;</span>\n    '),__output.push("\n  ")),__output.push("\n\n  "),leftDotsVisible&&__output.push('\n  <li class="disabled"><span class="pagination-dots">...</span>\n  '),__output.push("\n\n  "),pages.forEach(function(t){__output.push('\n  <li class="'),__output.push(t.active?"active":""),__output.push('"><a href="'),__output.push(t.href),__output.push('" data-page="'),__output.push(t.no),__output.push('">'),__output.push(t.no),__output.push("</a>\n  ")}),__output.push("\n\n  "),rightDotsVisible&&__output.push('\n  <li class="disabled"><span class="pagination-dots">...</span>\n  '),__output.push("\n\n  "),prevNextLinksVisible&&(__output.push("\n    "),nextPageLinkAvailable?(__output.push('\n    <li><a href="'),__output.push(nextPageHref),__output.push('" title="'),__output.push(t("core","PAGINATION:NEXT_PAGE")),__output.push('" data-page="'),__output.push(page+1),__output.push('">&rsaquo;</a>\n    ')):__output.push('\n    <li class="disabled"><span>&rsaquo;</span>\n    '),__output.push("\n  ")),__output.push("\n\n  "),firstLastLinksVisible&&(__output.push("\n    "),lastPageLinkAvailable?(__output.push('\n    <li><a href="'),__output.push(lastPageHref),__output.push('" title="'),__output.push(t("core","PAGINATION:LAST_PAGE")),__output.push('" data-page="'),__output.push(pageCount),__output.push('">&raquo;</a>\n    ')):__output.push('\n    <li class="disabled"><span>&raquo;</span>\n    '),__output.push("\n  ")),__output.push("\n\n</ul>\n");return __output.join("")}}),define("app/core/views/PaginationView",["underscore","../View","app/core/templates/pagination"],function(t,e,n){"use strict";var r={pageNumbers:3,firstLastLinksVisible:!0,prevNextLinksVisible:!0,dotsVisible:!0,replaceUrl:!1},i=e.extend({template:n,events:{"click a":function(t){if(0===t.button){t.preventDefault();var e=t.currentTarget;this.changePage(+e.getAttribute("data-page"),e.getAttribute("href"))}}}});return i.prototype.initialize=function(){t.defaults(this.options,r),this.listenTo(this.model,"change:urlTemplate",this.render)},i.prototype.afterRender=function(){var t=this.model.get("limit");(-1===t||this.model.get("totalCount")<=t)&&this.$el.hide()},i.prototype.changePage=function(t,e){this.model.set({page:t}),e&&this.broker.publish("router.navigate",{url:e,replace:this.options.replaceUrl})},i.prototype.serialize=function(){var t=this.options,e=this.model,n=e.get("page"),r=Math.ceil(e.get("totalCount")/e.get("limit")),i=(t.pageNumbers-1)/2;t.dotsVisible&&(i+=1);var o=n,s=o+i,a=!0,u=!1;1>o-i?o=1:(o-=i,u=t.dotsVisible&&1!==o),u&&(o+=1),s>r&&(s=r,a=!1),i+1>n?(s+=i+1-n,s>r&&(s=r)):n>r-i&&(o-=i-(r-n),1>o&&(o=1));var c=t.dotsVisible&&a&&s!==r;return c&&(s-=1),1===o&&(u=!1),{pageCount:r,page:n,skip:e.get("skip"),limit:e.get("limit"),visible:r>1,firstLastLinksVisible:t.firstLastLinksVisible,prevNextLinksVisible:t.prevNextLinksVisible,leftDotsVisible:u,rightDotsVisible:c,firstPageLinkAvailable:n>1,lastPageLinkAvailable:r>n,prevPageLinkAvailable:n>1,nextPageLinkAvailable:r>n,firstPageHref:this.genPageHref(1),lastPageHref:this.genPageHref(r),prevPageHref:this.genPageHref(n-1),nextPageHref:this.genPageHref(n+1),pages:this.genPages(o,s)}
},i.prototype.genPageHref=function(t){var e=this.model.get("urlTemplate"),n=this.model.get("limit");return e.replace("${page}",t).replace("${skip}",(t-1)*n).replace("${limit}",n)},i.prototype.genPages=function(t,e){for(var n=[],r=this.model.get("page"),i=t;e>=i;++i)n.push({no:i,active:i===r,href:this.genPageHref(i)});return n},i}),define("app/core/templates/list",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="list '),__output.push("undefined"==typeof className?"":className),__output.push('">\n  <div class="table-responsive"><table class="table '),__output.push(tableClassName),__output.push('">\n      <thead>\n      <tr>\n        '),columns.forEach(function(t){__output.push("\n        <th "),__output.push("function"==typeof t.thAttrs?t.thAttrs(t):t.thAttrs||""),__output.push(">"),__output.push(t.label),__output.push("</th>\n        ")}),__output.push("\n        "),"function"==typeof actions&&(__output.push('\n        <th class="actions">'),__output.push(t("core","LIST:COLUMN:actions")),__output.push("</th>\n        ")),__output.push("\n      </tr>\n      </thead>\n      <tbody>\n        "),rows.length||(__output.push('\n        <tr>\n          <td colspan="'),__output.push(columns.length+1),__output.push('">'),__output.push(t("core","LIST:NO_DATA")),__output.push("</td>\n        </tr>\n        ")),__output.push("\n        "),rows.forEach(function(e){__output.push('\n        <tr class="list-item '),__output.push(e.className?e.className:""),__output.push('"\n          '),e.dataAttrs&&(__output.push("\n          "),Object.keys(e.dataAttrs).forEach(function(t){__output.push("\n          data-"),__output.push(t),__output.push('="'),__output.push(escape(e.dataAttrs[t])),__output.push('"\n          ')}),__output.push("\n          ")),__output.push("\n          "),e._id&&(__output.push('data-id="'),__output.push(e._id),__output.push('"')),__output.push("\n        >\n          "),columns.forEach(function(n){__output.push("\n          <td "),__output.push("function"==typeof n.tdAttrs?n.tdAttrs(e):n.tdAttrs||""),__output.push(' data-id="'),__output.push(n.id),__output.push('">\n          '),null==e[n.id]?(__output.push("\n            "),null==n.noData?(__output.push("\n            <em>"),__output.push(t("core","LIST:NO_DATA:cell")),__output.push("</em>\n            ")):(__output.push("\n            "),__output.push(n.noData),__output.push("\n            ")),__output.push("\n            ")):(__output.push("\n            "),__output.push(e[n.id]),__output.push("\n            ")),__output.push("\n          </td>\n          ")}),__output.push("\n          "),"function"==typeof actions&&(__output.push('\n          <td class="actions">\n            '),actions(e).forEach(function(t){__output.push("\n            "),t.href?(__output.push('\n            <a href="'),__output.push(t.href),__output.push('" class="btn btn-'),__output.push(t.type||"default"),__output.push(" "),__output.push(t.id?"action-"+t.id:""),__output.push(" "),__output.push(t.className||""),__output.push('" title="'),__output.push(escape(t.label)),__output.push('"><i class="fa fa-'),__output.push(t.icon),__output.push('"></i>'),__output.push(t.text||""),__output.push("</a>\n            ")):(__output.push('\n            <button type="button" class="btn btn-'),__output.push(t.type||"default"),__output.push(" "),__output.push(t.id?"action-"+t.id:""),__output.push(" "),__output.push(t.className||""),__output.push('" title="'),__output.push(escape(t.label)),__output.push('"><i class="fa fa-'),__output.push(t.icon),__output.push('"></i>'),__output.push(t.text||""),__output.push("</button>\n            ")),__output.push("\n            ")}),__output.push("\n          </td>\n          ")),__output.push("\n        </tr>\n        ")}),__output.push('\n      </tbody>\n    </table></div>\n  <div class="pagination-container"></div>\n</div>\n');return __output.join("")}}),define("app/core/views/ListView",["underscore","jquery","app/i18n","app/user","../View","./ActionFormView","./PaginationView","app/core/templates/list"],function(t,e,n,r,i,o,s,a){"use strict";function u(t,e,r){return e||(e=t.getNlsDomain()),n.has(e,r)?n(e,r):n("core",r)}var c=i.extend({template:a,tableClassName:"table-bordered table-hover table-condensed",remoteTopics:function(){var t={},e=this.collection.getTopicPrefix();return e&&(t[e+".added"]="refreshCollection",t[e+".edited"]="refreshCollection",t[e+".deleted"]="onModelDeleted"),t},events:{"click .list-item[data-id]":function(t){if(!this.isNotClickable(t)){var e=this.collection.get(t.currentTarget.dataset.id).genClientUrl();t.ctrlKey?window.open(e):t.altKey||this.broker.publish("router.navigate",{url:e,trigger:!0,replace:!1})}},"mousedown .list-item[data-id]":function(t){this.isNotClickable(t)||1!==t.button||t.preventDefault()},"mouseup .list-item[data-id]":function(t){return this.isNotClickable(t)||1!==t.button?void 0:(window.open(this.collection.get(t.currentTarget.dataset.id).genClientUrl()),!1)},"click .action-delete":function(t){t.preventDefault(),o.showDeleteDialog({model:this.getModelFromEvent(t)})}},initialize:function(){this.refreshReq=null,this.lastRefreshAt=0,this.listenTo(this.collection,"sync",function(){this.lastRefreshAt=Date.now()}),this.collection.paginationData&&(this.paginationView=new s({model:this.collection.paginationData,replaceUrl:!!this.options.replaceUrl}),this.setView(".pagination-container",this.paginationView),this.listenTo(this.collection.paginationData,"change:page",this.scrollTop))},destroy:function(){this.paginationView=null},serialize:function(){return{columns:this.decorateColumns(this.serializeColumns()),actions:this.serializeActions(),rows:this.serializeRows(),className:t.result(this,"className"),tableClassName:t.result(this,"tableClassName")}},serializeColumns:function(){var t;return t=Array.isArray(this.options.columns)?this.options.columns:Array.isArray(this.columns)?this.columns:[]},decorateColumns:function(t){var e=this.collection.getNlsDomain();return t.map(function(t){return"string"==typeof t&&(t={id:t,label:n.bound(e,"PROPERTY:"+t)}),t.label||(t.label=n.bound(e,"PROPERTY:"+t.id)),t.thAttrs||(t.thAttrs=""),t.tdAttrs||(t.tdAttrs=""),(t.className||t.thClassName||t.tdClassName)&&(t.thAttrs+=' class="'+(t.className||"")+" "+(t.thClassName||"")+'"',t.tdAttrs+=' class="'+(t.className||"")+" "+(t.tdClassName||"")+'"'),t})},serializeActions:function(){return c.actions.viewEditDelete(this.collection)},serializeRows:function(){return this.collection.map(this.options.serializeRow||this.serializeRow,this)},serializeRow:function(t){return"function"==typeof t.serializeRow?t.serializeRow():"function"==typeof t.serialize?t.serialize():t.toJSON()},beforeRender:function(){this.stopListening(this.collection,"reset",this.render)},afterRender:function(){this.listenToOnce(this.collection,"reset",this.render)},onModelDeleted:function(t){if(t){var e=t.model||t;e._id&&(this.$('.list-item[data-id="'+e._id+'"]').addClass("is-deleted"),this.refreshCollection(e))}},refreshCollection:function(t){if(!t||!this.timers.refreshCollection){var e=Date.now();e-this.lastRefreshAt>3e3?(this.lastRefreshAt=e,this.refreshCollectionNow()):this.timers.refreshCollection=setTimeout(this.refreshCollectionNow.bind(this),3e3)}},refreshCollectionNow:function(e){if(this.timers){this.timers.refreshCollection&&clearTimeout(this.timers.refreshCollection),delete this.timers.refreshCollection,this.refreshReq&&this.refreshReq.abort();var n=this,r=this.promised(this.collection.fetch(t.isObject(e)?e:{reset:!0}));r.always(function(){n.refreshReq===r&&(n.refreshReq.abort(),n.refreshReq=null)}),this.refreshReq=r}},scrollTop:function(){var t=this.$el.offset().top-14,n=e(".navbar-fixed-top");n.length&&(t-=n.outerHeight()),window.scrollY>t&&e("html, body").stop(!0,!1).animate({scrollTop:t})},getModelFromEvent:function(t){return this.collection.get(this.$(t.target).closest(".list-item").attr("data-id"))},isNotClickable:function(t){return!this.el.classList.contains("is-clickable")||"A"===t.target.tagName||"INPUT"===t.target.tagName||"BUTTON"===t.target.tagName||t.target.classList.contains("actions")||""!==window.getSelection().toString()||"TD"!==t.target.tagName&&this.$(t.target).closest("a, input, button").length}});return c.actions={viewDetails:function(t,e){return{id:"viewDetails",icon:"file-text-o",label:u(t,e,"LIST:ACTION:viewDetails"),href:t.genClientUrl()}},edit:function(t,e){return{id:"edit",icon:"edit",label:u(t,e,"LIST:ACTION:edit"),href:t.genClientUrl("edit")}},"delete":function(t,e){return{id:"delete",icon:"times",label:u(t,e,"LIST:ACTION:delete"),href:t.genClientUrl("delete")}},viewEditDelete:function(t,e,n){return function(i){var o=t.get(i._id),s=[c.actions.viewDetails(o,n)];return r.isAllowedTo((e||o.getPrivilegePrefix())+":MANAGE")&&s.push(c.actions.edit(o,n),c.actions["delete"](o,n)),s}}},c}),define("app/core/pages/createPageBreadcrumbs",["app/i18n"],function(t){"use strict";return function(e,n){var r=e.modelProperty?e[e.modelProperty]:e.model||e.collection,i=r.getNlsDomain();return n=Array.isArray(n)?n.map(function(e){return"string"==typeof e?{label:":"===e[0]?t.bound(i,"BREADCRUMBS"+e):e}:("string"==typeof e.label&&":"===e.label[0]&&(e.label=t.bound(i,"BREADCRUMBS"+e.label)),e)}):[],n.unshift({label:t.bound(i,"BREADCRUMBS:browse"),href:n.length?r.genClientUrl("base"):null}),e.baseBreadcrumb===!0?n.unshift(t.bound(i,"BREADCRUMBS:base")):e.baseBreadcrumb&&n.unshift({label:t.bound(i,"BREADCRUMBS:base"),href:e.baseBreadcrumb.toString()}),n}}),define("app/core/pages/ListPage",["app/i18n","../util/bindLoadingMessage","../util/pageActions","../View","../views/ListView","./createPageBreadcrumbs"],function(t,e,n,r,i,o){"use strict";return r.extend({layoutName:"page",pageId:"list",baseBreadcrumb:!1,breadcrumbs:function(){return o(this)},actions:function(){return[n.add(this.collection,this.collection.getPrivilegePrefix()+":MANAGE")]},initialize:function(){this.collection=e(this.options.collection,this);var t=this.ListView||i;this.view=new t({collection:this.collection,columns:this.options.columns||t.prototype.columns,serializeRow:this.options.serializeRow||t.prototype.serializeRow,className:this.options.listClassName||t.prototype.className||"is-clickable"})},load:function(t){return t(this.collection.fetch({reset:!0}))}})}),define("app/core/util/onModelDeleted",["app/i18n","app/viewport"],function(t,e){"use strict";return function(n,r,i,o){var s=i?i.model:null;(o||s&&s._id===r.id)&&(n.subscribe("router.executing").setLimit(1).on("message",function(){e.msg.show({type:"warning",time:5e3,text:t(r.getNlsDomain()||"core","MSG:DELETED",{label:r.getLabel()})})}),n.publish("router.navigate",{url:r.genClientUrl("base"),trigger:!0,replace:!0}))}}),define("app/core/views/DetailsView",["../View","../util/onModelDeleted"],function(t,e){"use strict";return t.extend({remoteTopics:function(){var t={},e=this.model.getTopicPrefix();return t[e+".edited"]="onModelEdited",t[e+".deleted"]="onModelDeleted",t},serialize:function(){return{idPrefix:this.idPrefix,model:this.serializeDetails(this.model)}},serializeDetails:function(t){return"function"==typeof t.serializeDetails?t.serializeDetails():"function"==typeof t.serialize?t.serialize():t.toJSON()},beforeRender:function(){this.stopListening(this.model,"change",this.render)},afterRender:function(){this.listenToOnce(this.model,"change",this.render)},onModelEdited:function(t){var e=t.model;e&&e._id===this.model.id&&this.model.set(e)},onModelDeleted:function(t){e(this.broker,this.model,t)}})}),define("app/core/pages/DetailsPage",["app/i18n","../util/bindLoadingMessage","../util/pageActions","../View","../views/DetailsView","./createPageBreadcrumbs"],function(t,e,n,r,i,o){"use strict";return r.extend({layoutName:"page",pageId:"details",modelProperty:"model",baseBreadcrumb:!1,breadcrumbs:function(){var e=this[this.modelProperty];return o(this,[e.getLabel()||t.bound(e.getNlsDomain(),"BREADCRUMBS:details")])},actions:function(){var t=this[this.modelProperty];return[n.edit(t,t.privilegePrefix+":MANAGE"),n["delete"](t,t.privilegePrefix+":MANAGE")]},initialize:function(){this.defineModels(),this.defineViews()},defineModels:function(){this[this.modelProperty]=e(this.options.model,this)},defineViews:function(){var t=this.DetailsView||i,e={model:this[this.modelProperty]};"function"==typeof this.detailsTemplate&&(e.template=this.detailsTemplate),"function"==typeof this.serializeDetails&&(e.serializeDetails=this.serializeDetails),this.view=new t(e)},load:function(t){return t(this[this.modelProperty].fetch(this.fetchOptions))}})}),function(t,e){"function"==typeof define&&define.amd?define("form2js",e):t.form2js=e()}(this,function(){"use strict";function t(t,r,i,o,s){("undefined"==typeof i||null==i)&&(i=!0),("undefined"==typeof r||null==r)&&(r="."),arguments.length<5&&(s=!1),t="string"==typeof t?document.getElementById(t):t;var a,u=[],c=0;if(t.constructor==Array||"undefined"!=typeof NodeList&&t.constructor==NodeList)for(;a=t[c++];)u=u.concat(n(a,o,s));else u=n(t,o,s);return e(u,i,r)}function e(t,e,n){var r,i,o,s,a,u,c,l,p,d,h,f,m,_={},g={};for(r=0;r<t.length;r++)if(a=t[r].value,!e||""!==a&&null!==a){for(f=t[r].name,m=f.split(n),u=[],c=_,l="",i=0;i<m.length;i++)if(h=m[i].split("]["),h.length>1)for(o=0;o<h.length;o++)if(h[o]=0==o?h[o]+"]":o==h.length-1?"["+h[o]:"["+h[o]+"]",d=h[o].match(/([a-z_]+)?\[([a-z_][a-z0-9_]+?)\]/i))for(s=1;s<d.length;s++)d[s]&&u.push(d[s]);else u.push(h[o]);else u=u.concat(h);for(i=0;i<u.length;i++)h=u[i],h.indexOf("[]")>-1&&i==u.length-1?(p=h.substr(0,h.indexOf("[")),l+=p,c[p]||(c[p]=[]),c[p].push(a)):h.indexOf("[")>-1?(p=h.substr(0,h.indexOf("[")),d=h.replace(/(^([a-z_]+)?\[)|(\]$)/gi,""),l+="_"+p+"_"+d,g[l]||(g[l]={}),""==p||c[p]||(c[p]=[]),i==u.length-1?""==p?(c.push(a),g[l][d]=c[c.length-1]):(c[p].push(a),g[l][d]=c[p][c[p].length-1]):g[l][d]||(c[p].push(/^[a-z_]+\[?/i.test(u[i+1])?{}:[]),g[l][d]=c[p][c[p].length-1]),c=g[l][d]):(l+=h,i<u.length-1?(c[h]||(c[h]={}),c=c[h]):c[h]=a)}return _}function n(t,e,n){var o=i(t,e,n);return o.length>0?o:r(t,e,n)}function r(t,e,n){for(var r=[],o=t.firstChild;o;)r=r.concat(i(o,e,n)),o=o.nextSibling;return r}function i(t,e,n){var i,a,u,c=o(t,n);return i=e&&e(t),i&&i.name?u=[i]:""!=c&&t.nodeName.match(/INPUT|TEXTAREA/i)?(a=s(t),u=[{name:c,value:a}]):""!=c&&t.nodeName.match(/SELECT/i)?(a=s(t),u=[{name:c.replace(/\[\]$/,""),value:a}]):u=r(t,e,n),u}function o(t,e){return t.name&&""!=t.name?t.name:e&&t.id&&""!=t.id?t.id:""}function s(t){if(t.disabled)return null;switch(t.nodeName){case"INPUT":case"TEXTAREA":switch(t.type.toLowerCase()){case"radio":if(t.checked&&"false"===t.value)return!1;case"checkbox":if(t.checked&&"true"===t.value)return!0;if(!t.checked&&"true"===t.value)return!1;if(t.checked)return t.value;break;case"button":case"reset":case"submit":case"image":return"";default:return t.value}break;case"SELECT":return a(t)}return null}function a(t){var e,n,r,i=t.multiple,o=[];if(!i)return t.value;for(e=t.getElementsByTagName("option"),n=0,r=e.length;r>n;n++)e[n].selected&&o.push(e[n].value);return o}return t}),function(t,e){"function"==typeof define&&define.amd?define("js2form",e):t.js2form=e()}(this,function(){"use strict";function t(t,r,o,s,a){arguments.length<3&&(o="."),arguments.length<4&&(s=null),arguments.length<5&&(a=!1);var c,l;c=i(r),l=n(t,a,o,{},!0);for(var p=0;p<c.length;p++){var d=c[p].name,h=c[p].value;"undefined"!=typeof l[d]?e(l[d],h):"undefined"!=typeof l[d.replace(u,"[]")]&&e(l[d.replace(u,"[]")],h)}}function e(t,e){var n,r,i;if(t instanceof Array)for(r=0;r<t.length;r++)(String(t[r].value)==String(e)||e===!0)&&(t[r].checked=!0);else if(p.test(t.nodeName))t.value=e;else if(/SELECT/i.test(t.nodeName))for(n=t.getElementsByTagName("option"),r=0,i=n.length;i>r;r++)if(n[r].value==e){if(n[r].selected=!0,t.multiple)break}else t.multiple||(n[r].selected=!1)}function n(t,e,i,o,s){arguments.length<4&&(o={});for(var a,c,l,p,d,h,f,m={},_=t.firstChild;_;){if(a="",_.name&&""!=_.name?a=_.name:e&&_.id&&""!=_.id&&(a=_.id),""==a){var g=n(_,e,i,o,s);for(l in g)if("undefined"==typeof m[l])m[l]=g[l];else for(p=0;p<g[l].length;p++)m[l].push(g[l][p])}else if(/SELECT/i.test(_.nodeName))for(d=0,f=_.getElementsByTagName("option"),h=f.length;h>d;d++)s&&(f[d].selected=!1),c=r(a,i,o),c=c.replace(u,"[]"),m[c]=_;else/INPUT/i.test(_.nodeName)&&/CHECKBOX|RADIO/i.test(_.type)?(s&&(_.checked=!1),c=r(a,i,o),c=c.replace(u,"[]"),m[c]||(m[c]=[]),m[c].push(_)):(s&&(_.value=""),c=r(a,i,o),m[c]=_);_=_.nextSibling}return m}function r(t,e,n){var r,i,o,s,a,u,p=[],d=t.split(e);for(t=t.replace(l,"[$1].[$2]"),u=0;u<d.length;u++)r=d[u],p.push(r),i=r.match(c),null!=i&&(o=p.join(e),s=o.replace(c,"$3"),o=o.replace(c,"$1"),"undefined"==typeof n[o]&&(n[o]={lastIndex:-1,indexes:{}}),(""==s||"undefined"==typeof n[o].indexes[s])&&(n[o].lastIndex++,n[o].indexes[s]=n[o].lastIndex),a=n[o].indexes[s],p[p.length-1]=r.replace(c,"$1$2"+a+"$4"));return o=p.join(e),o=o.replace("].[","][")}function i(t,e){var n,r,i=[];if(1==arguments.length&&(e=0),null==t)i=[{name:"",value:null}];else if("string"==typeof t||"number"==typeof t||"date"==typeof t||"boolean"==typeof t)i=[{name:"",value:t}];else if(t instanceof Array)for(n=0;n<t.length;n++)r="["+n+"]",i=i.concat(o(t[n],r,e+1));else for(n in t)r=n,i=i.concat(o(t[n],r,e+1));return i}function o(t,e,n){var r,o,u,c=[],l=i(t,n+1);for(o=0;o<l.length;o++)r=e,s.test(l[o].name)?r+=l[o].name:a.test(l[o].name)&&(r+="."+l[o].name),u={name:r,value:l[o].value},c.push(u);return c}var s=/^\[\d+?\]/,a=/^[a-zA-Z_][a-zA-Z_0-9]*/,u=/\[[0-9]+?\]$/,c=/(.*)(\[)([0-9]*)(\])$/,l=/\[([0-9]+)\]\[([0-9]+)\]/g,p=/INPUT|TEXTAREA/i;return t}),define("app/core/views/FormView",["underscore","form2js","js2form","app/viewport","../View"],function(t,e,n,r,i){"use strict";return i.extend({events:{submit:"submitForm"},$errorMessage:null,initialize:function(){this.$errorMessage=null,this.listenTo(this.model,"change",function(){this.isRendered()&&n(this.el,this.serializeToForm(!0),".",null,!1,!1)})},destroy:function(){this.hideErrorMessage()},serialize:function(){return{editMode:!!this.options.editMode,idPrefix:this.idPrefix,formMethod:this.options.formMethod,formAction:this.options.formAction,formActionText:this.options.formActionText,panelTitleText:this.options.panelTitleText,model:this.model.toJSON()}},afterRender:function(){n(this.el,this.serializeToForm(!1))},serializeToForm:function(){return this.model.toJSON()},serializeForm:function(t){return t},submitForm:function(){if(this.hideErrorMessage(),!this.el.checkValidity())return!1;var t=this.serializeForm(e(this.el));if(!this.checkValidity(t))return!1;var n=this.$('[type="submit"]').attr("disabled",!0);return this.submitRequest(n,t),!1},submitRequest:function(t,e){var n=this.request(e);n.done(this.handleSuccess.bind(this)),n.fail(this.handleFailure.bind(this)),n.always(function(){t.attr("disabled",!1)})},request:function(t){return this.promised(this.model.save(t,this.getSaveOptions()))},checkValidity:function(t){return!!t},handleSuccess:function(){"function"==typeof this.options.done?this.options.done(!0):this.broker.publish("router.navigate",{url:this.model.genClientUrl(),trigger:!0})},handleFailure:function(){this.showErrorMessage(this.options.failureText)},showErrorMessage:function(t){return this.hideErrorMessage(),this.$errorMessage=r.msg.show({type:"error",time:3e3,text:t}),!1},hideErrorMessage:function(){null!==this.$errorMessage&&(r.msg.hide(this.$errorMessage),this.$errorMessage=null)},getSaveOptions:function(){return{wait:!0}}})}),define("app/core/pages/AddFormPage",["app/i18n","../View","../views/FormView","./createPageBreadcrumbs"],function(t,e,n,r){"use strict";return e.extend({layoutName:"page",pageId:"addForm",baseBreadcrumb:!1,breadcrumbs:function(){return r(this,[":addForm"])},initialize:function(){this.defineModels(),this.defineViews()},defineModels:function(){},defineViews:function(){var t=this.getFormViewClass();this.view=new t(this.getFormViewOptions())},getFormViewClass:function(){return this.options.FormView||this.FormView||n},getFormViewOptions:function(){var e=this.model,n={editMode:!1,model:e,formMethod:"POST",formAction:e.url(),formActionText:t(e.getNlsDomain(),"FORM:ACTION:add"),failureText:t(e.getNlsDomain(),"FORM:ERROR:addFailure"),panelTitleText:t(e.getNlsDomain(),"PANEL:TITLE:addForm")};return"function"==typeof this.options.formTemplate&&(n.template=this.options.formTemplate),n}})}),define("app/core/pages/EditFormPage",["app/i18n","../util/bindLoadingMessage","../View","../views/FormView","./createPageBreadcrumbs"],function(t,e,n,r,i){"use strict";return n.extend({layoutName:"page",pageId:"editForm",baseBreadcrumb:!1,breadcrumbs:function(){return i(this,[{label:this.model.getLabel()||t.bound(this.model.getNlsDomain(),"BREADCRUMBS:details"),href:this.model.genClientUrl()},":editForm"])},initialize:function(){this.defineModels(),this.defineViews()},load:function(t){return t(this.model.fetch(this.options.fetchOptions))},defineModels:function(){this.model=e(this.options.model,this)},defineViews:function(){var t=this.getFormViewClass();this.view=new t(this.getFormViewOptions())},getFormViewClass:function(){return this.options.FormView||this.FormView||r},getFormViewOptions:function(){var e=this.model,n={editMode:!0,model:e,formMethod:"PUT",formAction:e.url(),formActionText:t(e.getNlsDomain(),"FORM:ACTION:edit"),failureText:t(e.getNlsDomain(),"FORM:ERROR:editFailure"),panelTitleText:t(e.getNlsDomain(),"PANEL:TITLE:editForm")};return"function"==typeof this.options.formTemplate&&(n.template=this.options.formTemplate),n}})}),define("app/core/pages/ActionFormPage",["underscore","app/i18n","../util/bindLoadingMessage","../View","../views/ActionFormView","./createPageBreadcrumbs"],function(t,e,n,r,i,o){"use strict";return r.extend({layoutName:"page",baseBreadcrumb:!1,breadcrumbs:function(){return o(this,[{label:this.model.getLabel(),href:this.model.genClientUrl()},":ACTION_FORM:"+this.options.actionKey])},initialize:function(){this.model=n(this.options.model,this);var r=this.options.actionKey;this.view=new i(t.defaults({model:this.model},this.options,{formActionText:e.bound(this.model.getNlsDomain(),"ACTION_FORM:BUTTON:"+r),messageText:e.bound(this.model.getNlsDomain(),"ACTION_FORM:MESSAGE:"+r),failureText:e.bound(this.model.getNlsDomain(),"ACTION_FORM:MESSAGE_FAILURE:"+r),requestData:{action:r}}))},load:function(t){return t(this.model.fetch())}})}),define("app/core/util/idAndLabel",["underscore"],function(t){"use strict";return function(e,n){var r={id:e.id,text:e.getLabel()};return n&&t.extend(r,n),r}}),define("app/core/templates/colorPicker",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="form-group">\n  <label for="'),__output.push(idPrefix),__output.push("-"),__output.push(property),__output.push('" class="control-label">'),__output.push("string"==typeof label?label:t("core","colorPicker:label")),__output.push('</label>\n  <div class="input-group colorpicker-component" data-color="'),__output.push(value),__output.push('" data-color-format="hex">\n    <input id="'),__output.push(idPrefix),__output.push("-"),__output.push(property),__output.push('" class="form-control" name="'),__output.push(property),__output.push('" type="text" value="'),__output.push(value),__output.push('">\n    <span class="input-group-addon"><i style="background-color: '),__output.push(value),__output.push('"></i></span>\n  </div>\n</div>\n');return __output.join("")}}),define("app/downtimeReasons/templates/form",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="downtimeReasons-form" method="post" action="'),__output.push(formAction),__output.push('">\n  <input type="hidden" name="_method" value="'),__output.push(formMethod),__output.push('">\n  <div class="panel panel-primary">\n    <div class="panel-heading">'),__output.push(panelTitleText),__output.push('</div>\n    <div class="panel-body">\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-id" class="control-label is-required">'),__output.push(t("downtimeReasons","PROPERTY:_id")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-id" class="form-control" type="text" name="_id" autofocus required maxlength="50" pattern="^[a-zA-Z][a-zA-Z_-]*$">\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-label" class="control-label is-required">'),__output.push(t("downtimeReasons","PROPERTY:label")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-label" class="form-control" type="text" name="label" required maxlength="100">\n      </div>\n      <div class="row">\n        <div class="col-md-2 form-group">\n          <label for="'),__output.push(idPrefix),__output.push('-type-maintenance" class="control-label is-required">'),__output.push(t("downtimeReasons","PROPERTY:type")),__output.push("</label>\n          "),["maintenance","renovation","malfunction","adjusting","break","otherWorks","other"].forEach(function(e){__output.push('\n          <div class="radio">\n            <label>\n              <input id="'),__output.push(idPrefix),__output.push("-type-"),__output.push(e),__output.push('" type="radio" name="type" value="'),__output.push(e),__output.push('" required>\n              '),__output.push(t("downtimeReasons","type:"+e)),__output.push("\n            </label>\n          </div>\n          ")}),__output.push('\n        </div>\n        <div class="col-md-2 form-group">\n          <label for="'),__output.push(idPrefix),__output.push('-subdivisions-assembly" class="control-label">'),__output.push(t("downtimeReasons","PROPERTY:subdivisionTypes")),__output.push('</label>\n          <div class="checkbox">\n            <label>\n              <input id="'),__output.push(idPrefix),__output.push('-subdivisions-assembly" type="checkbox" name="subdivisionTypes[]" value="assembly">\n              '),__output.push(t("downtimeReasons","subdivisionType:assembly")),__output.push('\n            </label>\n          </div>\n          <div class="checkbox">\n            <label>\n              <input type="checkbox" name="subdivisionTypes[]" value="press">\n              '),__output.push(t("downtimeReasons","subdivisionType:press")),__output.push('\n            </label>\n          </div>\n        </div>\n        <div class="col-md-2 form-group">\n          <label for="'),__output.push(idPrefix),__output.push('-scheduled-true" class="control-label is-required">'),__output.push(t("downtimeReasons","PROPERTY:scheduled")),__output.push("</label>\n          "),["true","false","null"].forEach(function(e){__output.push('\n          <div class="radio">\n            <label>\n              <input id="'),__output.push(idPrefix),__output.push("-scheduled-"),__output.push(e),__output.push('" type="radio" name="scheduled" value="'),__output.push(e),__output.push('" required>\n              '),__output.push(t("core","BOOL:"+e)),__output.push("\n            </label>\n          </div>\n          ")}),__output.push('\n        </div>\n      </div>\n      <div class="form-group">\n        <div class="checkbox">\n          <label class="control-label">\n            <input id="'),__output.push(idPrefix),__output.push('-defaultAor" type="checkbox" name="defaultAor" value="true">\n            '),__output.push(t("downtimeReasons","PROPERTY:defaultAor")),__output.push('\n          </label>\n        </div>\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-aors" class="control-label">'),__output.push(t("downtimeReasons","PROPERTY:aors")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-aors" type="text" name="aors">\n      </div>\n      <div class="row">\n        <div class="col-md-2 form-group">\n          <label for="'),__output.push(idPrefix),__output.push('-opticsPosition" class="control-label">'),__output.push(t("downtimeReasons","PROPERTY:opticsPosition")),__output.push('</label>\n          <input id="'),__output.push(idPrefix),__output.push('-opticsPosition" class="form-control" type="number" name="opticsPosition">\n        </div>\n        <div class="col-md-2 form-group">\n          <label for="'),__output.push(idPrefix),__output.push('-pressPosition" class="control-label">'),__output.push(t("downtimeReasons","PROPERTY:pressPosition")),__output.push('</label>\n          <input id="'),__output.push(idPrefix),__output.push('-pressPosition" class="form-control" type="number" name="pressPosition">\n        </div>\n      </div>\n      '),__output.push(renderColorPicker({idPrefix:idPrefix,property:"color",label:t("downtimeReasons","PROPERTY:color"),value:model.color})),__output.push('\n      <div class="form-group-horizontal">\n        '),__output.push(renderColorPicker({idPrefix:idPrefix,property:"refColor",label:t("downtimeReasons","PROPERTY:refColor"),value:model.refColor})),__output.push('\n        <div class="form-group">\n          <label for="'),__output.push(idPrefix),__output.push('-refValue" class="control-label">'),__output.push(t("downtimeReasons","PROPERTY:refValue")),__output.push('</label>\n          <input id="'),__output.push(idPrefix),__output.push('-refValue" class="form-control small" type="number" name="refValue" step="0.01">\n        </div>\n      </div>\n      <div class="form-group">\n        <div class="checkbox">\n          <label class="control-label">\n            <input id="'),__output.push(idPrefix),__output.push('-auto" type="checkbox" name="auto" value="true">\n            '),__output.push(t("downtimeReasons","PROPERTY:auto")),__output.push('\n          </label>\n        </div>\n      </div>\n    </div>\n    <div class="panel-footer">\n      <button type="submit" class="btn btn-primary">'),__output.push(formActionText),__output.push("</button>\n    </div>\n  </div>\n</form>\n");return __output.join("")}}),function(t){var e=function(t){this.value={h:1,s:1,b:1,a:1},this.setColor(t)};e.prototype={constructor:e,setColor:function(e){e=e.toLowerCase();var n=this;t.each(i.stringParsers,function(t,r){var o=r.re.exec(e),s=o&&r.parse(o),a=r.space||"rgba";return s?(n.value="hsla"===a?i.RGBtoHSB.apply(null,i.HSLtoRGB.apply(null,s)):i.RGBtoHSB.apply(null,s),!1):!0})},setHue:function(t){this.value.h=1-t},setSaturation:function(t){this.value.s=t},setLightness:function(t){this.value.b=1-t},setAlpha:function(t){this.value.a=parseInt(100*(1-t),10)/100},toRGB:function(t,e,n,r){t||(t=this.value.h,e=this.value.s,n=this.value.b),t*=360;var i,o,s,a,u;return t=t%360/60,u=n*e,a=u*(1-Math.abs(t%2-1)),i=o=s=n-u,t=~~t,i+=[u,a,0,0,a,u][t],o+=[a,u,u,a,0,0][t],s+=[0,0,a,u,u,a][t],{r:Math.round(255*i),g:Math.round(255*o),b:Math.round(255*s),a:r||this.value.a}},toHex:function(t,e,n,r){var i=this.toRGB(t,e,n,r);return"#"+(1<<24|parseInt(i.r)<<16|parseInt(i.g)<<8|parseInt(i.b)).toString(16).substr(1)},toHSL:function(t,e,n,r){t||(t=this.value.h,e=this.value.s,n=this.value.b);var i=t,o=(2-e)*n,s=e*n;return s/=o>0&&1>=o?o:2-o,o/=2,s>1&&(s=1),{h:i,s:s,l:o,a:r||this.value.a}}};var n=0,r=function(e,r){n++,this.element=t(e).attr("data-colorpicker-guid",n);var o=r.format||this.element.data("color-format")||"hex";
this.format=i.translateFormats[o],this.isInput=this.element.is("input"),this.component=this.element.is(".colorpicker-component")?this.element.find(".add-on, .input-group-addon"):!1,this.picker=t(i.template).attr("data-colorpicker-guid",n).appendTo("body").on("mousedown.colorpicker",t.proxy(this.mousedown,this)),this.isInput?this.element.on({"focus.colorpicker":t.proxy(this.show,this),"keyup.colorpicker":t.proxy(this.update,this)}):this.component?this.component.on({"click.colorpicker":t.proxy(this.show,this)}):this.element.on({"click.colorpicker":t.proxy(this.show,this)}),("rgba"===o||"hsla"===o)&&(this.picker.addClass("alpha"),this.alpha=this.picker.find(".colorpicker-alpha")[0].style),this.component?(this.picker.find(".colorpicker-color").hide(),this.preview=this.element.find("i")[0].style):this.preview=this.picker.find("div:last")[0].style,this.base=this.picker.find("div:first")[0].style,this.update(),t(t.proxy(function(){this.element.trigger("create",[this])},this))};r.prototype={constructor:r,show:function(e){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),t(window).on("resize.colorpicker",t.proxy(this.place,this)),this.isInput||e&&(e.stopPropagation(),e.preventDefault()),t(document).on({"mousedown.colorpicker":t.proxy(this.hide,this)}),this.element.trigger({type:"showPicker",color:this.color})},update:function(){var t=this.isInput?this.element.prop("value"):this.element.data("color");("undefined"==typeof t||null===t)&&(t="#ffffff"),this.color=new e(t),this.picker.find("i").eq(0).css({left:100*this.color.value.s,top:100-100*this.color.value.b}).end().eq(1).css("top",100*(1-this.color.value.h)).end().eq(2).css("top",100*(1-this.color.value.a)),this.previewColor()},hide:function(){this.picker.hide(),t(window).off("resize",this.place),t(document).off({mousedown:this.hide}),this.isInput?""!==this.element.val()&&this.element.prop("value",this.format.call(this)).trigger("change"):(this.component&&""!==this.element.find("input").val()&&this.element.find("input").prop("value",this.format.call(this)).trigger("change"),this.element.data("color",this.format.call(this))),this.element.trigger({type:"hidePicker",color:this.color})},place:function(){var t=this.component?this.component.offset():this.element.offset();this.picker.css({top:t.top+this.height,left:t.left})},destroy:function(){t(".colorpicker[data-colorpicker-guid="+this.element.attr("data-colorpicker-guid")+"]").remove(),this.element.removeData("colorpicker").removeAttr("data-colorpicker-guid").off(".colorpicker"),this.component!==!1&&this.component.off(".colorpicker"),this.element.trigger("destroy",[this])},setValue:function(t){this.isInput?this.element.prop("value",t):(this.element.find("input").val(t),this.element.data("color",t)),this.update(),this.element.trigger({type:"changeColor",color:this.color})},previewColor:function(){try{this.preview.backgroundColor=this.format.call(this)}catch(t){this.preview.backgroundColor=this.color.toHex()}this.base.backgroundColor=this.color.toHex(this.color.value.h,1,1,1),this.alpha&&(this.alpha.backgroundColor=this.color.toHex())},pointer:null,slider:null,mousedown:function(e){e.stopPropagation(),e.preventDefault();var n=t(e.target),r=n.closest("div");if(!r.is(".colorpicker")){if(r.is(".colorpicker-saturation"))this.slider=t.extend({},i.sliders.saturation);else if(r.is(".colorpicker-hue"))this.slider=t.extend({},i.sliders.hue);else{if(!r.is(".colorpicker-alpha"))return!1;this.slider=t.extend({},i.sliders.alpha)}var o=r.offset();this.slider.knob=r.find("i")[0].style,this.slider.left=e.pageX-o.left,this.slider.top=e.pageY-o.top,this.pointer={left:e.pageX,top:e.pageY},t(document).on({"mousemove.colorpicker":t.proxy(this.mousemove,this),"mouseup.colorpicker":t.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(t){t.stopPropagation(),t.preventDefault();var e=Math.max(0,Math.min(this.slider.maxLeft,this.slider.left+((t.pageX||this.pointer.left)-this.pointer.left))),n=Math.max(0,Math.min(this.slider.maxTop,this.slider.top+((t.pageY||this.pointer.top)-this.pointer.top)));if(this.slider.knob.left=e+"px",this.slider.knob.top=n+"px",this.slider.callLeft&&this.color[this.slider.callLeft].call(this.color,e/100),this.slider.callTop&&this.color[this.slider.callTop].call(this.color,n/100),this.previewColor(),this.isInput)try{this.element.val(this.format.call(this)).trigger("change")}catch(t){this.element.val(this.color.toHex()).trigger("change")}else try{this.element.find("input").val(this.format.call(this)).trigger("change")}catch(t){this.element.find("input").val(this.color.toHex()).trigger("change")}return this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(e){return e.stopPropagation(),e.preventDefault(),t(document).off({mousemove:this.mousemove,mouseup:this.mouseup}),!1}},t.fn.colorpicker=function(e,n){return this.each(function(){var i=t(this),o=i.data("colorpicker"),s="object"==typeof e&&e;o?"string"==typeof e&&o[e](n):"destroy"!==e&&i.data("colorpicker",o=new r(this,t.extend({},t.fn.colorpicker.defaults,s)))})},t.fn.colorpicker.defaults={},t.fn.colorpicker.Constructor=r;var i={translateFormats:{rgb:function(){var t=this.color.toRGB();return"rgb("+t.r+","+t.g+","+t.b+")"},rgba:function(){var t=this.color.toRGB();return"rgba("+t.r+","+t.g+","+t.b+","+t.a+")"},hsl:function(){var t=this.color.toHSL();return"hsl("+Math.round(360*t.h)+","+Math.round(100*t.s)+"%,"+Math.round(100*t.l)+"%)"},hsla:function(){var t=this.color.toHSL();return"hsla("+Math.round(360*t.h)+","+Math.round(100*t.s)+"%,"+Math.round(100*t.l)+"%,"+t.a+")"},hex:function(){return this.color.toHex()}},sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setLightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},RGBtoHSB:function(t,e,n,r){t/=255,e/=255,n/=255;var i,o,s,a;return s=Math.max(t,e,n),a=s-Math.min(t,e,n),i=0===a?null:s===t?(e-n)/a:s===e?(n-t)/a+2:(t-e)/a+4,i=(i+360)%6*60/360,o=0===a?0:a/s,{h:i||1,s:o,b:s,a:r||1}},HueToRGB:function(t,e,n){return 0>n?n+=1:n>1&&(n-=1),1>6*n?t+(e-t)*n*6:1>2*n?e:2>3*n?t+(e-t)*(2/3-n)*6:t},HSLtoRGB:function(t,e,n,r){0>e&&(e=0);var o;o=.5>=n?n*(1+e):n+e-n*e;var s=2*n-o,a=t+1/3,u=t,c=t-1/3,l=Math.round(255*i.HueToRGB(s,o,a)),p=Math.round(255*i.HueToRGB(s,o,u)),d=Math.round(255*i.HueToRGB(s,o,c));return[l,p,d,r||1]},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1]/360,t[2]/100,t[3]/100,t[4]]}}],template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div></div>'}}(window.jQuery),define("bootstrap-colorpicker",function(){}),define("app/downtimeReasons/views/DowntimeReasonFormView",["underscore","app/i18n","app/data/aors","app/core/views/FormView","app/core/util/idAndLabel","app/core/templates/colorPicker","app/downtimeReasons/templates/form","bootstrap-colorpicker"],function(t,e,n,r,i,o,s){"use strict";return r.extend({template:s,events:t.extend({},r.prototype.events,{"change #-color":"updateColorPicker","change #-refColor":"updateColorPicker"}),destroy:function(){r.prototype.destroy.call(this),this.$(".colorpicker-component").colorpicker("destroy")},serialize:function(){return t.extend(r.prototype.serialize.call(this),{renderColorPicker:o})},afterRender:function(){r.prototype.afterRender.call(this),this.$id("color").parent().colorpicker(),this.$id("refColor").parent().colorpicker(),this.options.editMode&&(this.$(".form-control[name=_id]").attr("readonly",!0),this.$(".form-control[name=label]").focus()),this.$id("aors").select2({placeholder:e("downtimeReasons","aors:all"),multiple:!0,data:n.map(i)})},serializeToForm:function(){var t=this.model.toJSON();return t.scheduled=String(t.scheduled),t.aors=t.aors.join(","),t},serializeForm:function(t){var e=parseFloat(t.refValue);return t.refValue=isNaN(e)?0:e,"null"===t.scheduled&&(t.scheduled=null),t.aors=t.aors?t.aors.split(","):[],t},updateColorPicker:function(t){t.originalEvent&&this.$(t.target).closest(".colorpicker-component").colorpicker("setValue",t.target.value)}})}),define("app/downtimeReasons/templates/details",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="panel panel-primary">\n  <div class="panel-heading">'),__output.push(t("downtimeReasons","PANEL:TITLE:details")),__output.push('</div>\n  <div class="panel-details">\n    <div class="props first">\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("downtimeReasons","PROPERTY:_id")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model._id)),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("downtimeReasons","PROPERTY:label")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model.label)),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("downtimeReasons","PROPERTY:type")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model.type)),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("downtimeReasons","PROPERTY:subdivisionTypes")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model.subdivisionTypes)),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("downtimeReasons","PROPERTY:defaultAor")),__output.push('</div>\n        <div class="prop-value">'),__output.push(model.defaultAor),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("downtimeReasons","PROPERTY:aors")),__output.push('</div>\n        <div class="prop-value">\n          '),model.aors.length?1===model.aors.length?(__output.push("\n          "),__output.push(escape(model.aors[0])),__output.push("\n          ")):(__output.push("\n          <ul>\n            "),model.aors.forEach(function(t){__output.push("\n            <li>"),__output.push(escape(t)),__output.push("</li>\n            ")}),__output.push("\n          </ul>\n          ")):(__output.push("\n          "),__output.push(t("downtimeReasons","aors:all")),__output.push("\n          ")),__output.push('\n        </div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("downtimeReasons","PROPERTY:opticsPosition")),__output.push('</div>\n        <div class="prop-value">'),__output.push(model.opticsPosition),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("downtimeReasons","PROPERTY:pressPosition")),__output.push('</div>\n        <div class="prop-value">'),__output.push(model.pressPosition),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("downtimeReasons","PROPERTY:auto")),__output.push('</div>\n        <div class="prop-value">'),__output.push(model.auto),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("downtimeReasons","PROPERTY:scheduled")),__output.push('</div>\n        <div class="prop-value">'),__output.push(model.scheduled),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("downtimeReasons","PROPERTY:color")),__output.push('</div>\n        <div class="prop-value">'),__output.push(model.color),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("downtimeReasons","PROPERTY:refColor")),__output.push('</div>\n        <div class="prop-value">'),__output.push(model.refColor),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("downtimeReasons","PROPERTY:refValue")),__output.push('</div>\n        <div class="prop-value">'),__output.push(model.refValue),__output.push("</div>\n      </div>\n    </div>\n  </div>\n</div>\n");return __output.join("")}}),define("app/nls/downtimeReasons",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Downtime reasons"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load thedowntime reasons :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the downtime reason :("},"MSG:DELETED":function(t){return"Downtime reason <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add downtime reason"},"PAGE_ACTION:edit":function(){return"Edit downtime reason"},"PAGE_ACTION:delete":function(){return"Delete downtime reason"},"PANEL:TITLE:details":function(){return"Downtime reason's details"},"PANEL:TITLE:addForm":function(){return"Add downtime reason form"},"PANEL:TITLE:editForm":function(){return"Edit downtime reason form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:label":function(){return"Label"},"PROPERTY:type":function(){return"Type"},"PROPERTY:subdivisionTypes":function(){return"Subdivision types"},"PROPERTY:opticsPosition":function(){return"Position in Worksheet (optics)"},"PROPERTY:pressPosition":function(){return"Position in Worksheet (other)"},"PROPERTY:scheduled":function(){return"Scheduled?"},"PROPERTY:auto":function(){return"Auto confirmation?"},"PROPERTY:color":function(){return"Value color"},"PROPERTY:refValue":function(){return"Reference [FTE]"},"PROPERTY:refColor":function(){return"Reference color"},"PROPERTY:aors":function(){return"Areas of responsibility"},"PROPERTY:defaultAor":function(){return"Default subdivision AOR only"},"aors:all":function(){return"All"},"type:other":function(){return"Other"},"type:malfunction":function(){return"Malfunction"},"type:renovation":function(){return"Inspection/renovation"},"type:maintenance":function(){return"Maintenance"},"type:adjusting":function(){return"Adjusting/rearmament"},"type:break":function(){return"Break"},"type:otherWorks":function(){return"Other works"},"subdivisionType:none":function(){return"None"},"subdivisionType:assembly":function(){return"Assembly"},"subdivisionType:press":function(){return"Press"},"FORM:ACTION:add":function(){return"Add downtime reason"},"FORM:ACTION:edit":function(){return"Edit downtime reason"},"FORM:ERROR:addFailure":function(){return"Failed to add the new downtime reason :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the downtime reason :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Downtime reason deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete downtime reason"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen downtime reason?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> downtime reason?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the downtime reason :-("}},pl:!0}}),define("app/nls/pl/downtimeReasons",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Powody przestoj√≥w"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie powod√≥w przestoj√≥w nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie powodu przestoj√≥w nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Pow√≥d przestoj√≥w <em>"+e.v(t,"label")+"</em> zosta≈Ç usuniƒôty."},"PAGE_ACTION:add":function(){return"Dodaj pow√≥d przestoj√≥w"},"PAGE_ACTION:edit":function(){return"Edytuj pow√≥d przestoj√≥w"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ pow√≥d przestoj√≥w"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy powodu przestoj√≥w"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania powodu przestoj√≥w"},"PANEL:TITLE:editForm":function(){return"Formularz edycji powodu przestoj√≥w"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:label":function(){return"Opis"},"PROPERTY:type":function(){return"Typ"},"PROPERTY:subdivisionTypes":function(){return"Typy dzia≈Ç√≥w"},"PROPERTY:opticsPosition":function(){return"Pozycja na karcie pracy (monta≈º optyki)"},"PROPERTY:pressPosition":function(){return"Pozycja na karcie pracy (inne)"},"PROPERTY:scheduled":function(){return"Planowany?"},"PROPERTY:auto":function(){return"Automatyczne potwierdzanie?"},"PROPERTY:color":function(){return"Kolor warto≈õci"},"PROPERTY:refValue":function(){return"Referencja [FTE]"},"PROPERTY:refColor":function(){return"Kolor referencji"},"PROPERTY:aors":function(){return"Obszary odpowiedzialno≈õci"},"PROPERTY:defaultAor":function(){return"Tylko domy≈õlny obszar dzia≈Çu"},"aors:all":function(){return"Wszystkie"},"type:other":function(){return"Inny"},"type:malfunction":function(){return"Awaria"},"type:renovation":function(){return"PrzeglƒÖd/remont"},"type:maintenance":function(){return"Konserwacja"},"type:adjusting":function(){return"Ustawianie/przezbrojenie"},"type:break":function(){return"Przerwa"},"type:otherWorks":function(){return"Inne prace"},"subdivisionType:none":function(){return"≈ªadne"},"subdivisionType:assembly":function(){return"Monta≈º"},"subdivisionType:press":function(){return"T≈Çocznia"},"FORM:ACTION:add":function(){return"Dodaj pow√≥d przestoj√≥w"},"FORM:ACTION:edit":function(){return"Edytuj pow√≥d przestoj√≥w"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá powodu przestoj√≥w :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá powodu przestoj√≥w :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia powodu przestoj√≥w"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ pow√≥d przestoj√≥w"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany pow√≥d przestoj√≥w?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá pow√≥d przestoj√≥w <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá powodu przestoj√≥w :-("}}}),define("app/downtimeReasons/routes",["../router","../viewport","../user","../data/downtimeReasons","./DowntimeReason","../core/pages/ListPage","../core/pages/DetailsPage","../core/pages/AddFormPage","../core/pages/EditFormPage","../core/pages/ActionFormPage","./views/DowntimeReasonFormView","app/downtimeReasons/templates/details","i18n!app/nls/downtimeReasons"],function(t,e,n,r,i,o,s,a,u,c,l,p){"use strict";var d=n.auth("DICTIONARIES:VIEW"),h=n.auth("DICTIONARIES:MANAGE");t.map("/downtimeReasons",d,function(){e.showPage(new o({collection:r,columns:["_id","label","type","defaultAor","subdivisionTypes","aors","opticsPosition","pressPosition","auto","scheduled","color","refColor","refValue"]}))}),t.map("/downtimeReasons/:id",function(t){e.showPage(new s({model:new i({_id:t.params.id}),detailsTemplate:p}))}),t.map("/downtimeReasons;add",h,function(){e.showPage(new a({FormView:l,model:new i}))}),t.map("/downtimeReasons/:id;edit",h,function(t){e.showPage(new u({FormView:l,model:new i({_id:t.params.id})}))}),t.map("/downtimeReasons/:id;delete",h,function(t,n){var r=new i({_id:t.params.id});e.showPage(new c({model:r,actionKey:"delete",successUrl:r.genClientUrl("base"),cancelUrl:n||r.genClientUrl("base"),formMethod:"DELETE",formAction:r.url(),formActionSeverity:"danger"}))})}),define("app/lossReasons/LossReason",["../core/Model"],function(t){"use strict";return t.extend({urlRoot:"/lossReasons",clientUrlRoot:"#lossReasons",topicPrefix:"lossReasons",privilegePrefix:"DICTIONARIES",nlsDomain:"lossReasons",labelAttribute:"label",defaults:{label:null,position:0},toJSON:function(){var e=t.prototype.toJSON.call(this);return e.label||(e.label=e._id),e}})}),define("app/lossReasons/LossReasonCollection",["../core/Collection","./LossReason"],function(t,e){"use strict";return t.extend({model:e,rqlQuery:"select(label,position)&sort(position)"})}),define("app/lossReasons/templates/form",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="lossReasons-form" method="post" action="'),__output.push(formAction),__output.push('">\n  <input type="hidden" name="_method" value="'),__output.push(formMethod),__output.push('">\n  <div class="panel panel-primary">\n    <div class="panel-heading">'),__output.push(panelTitleText),__output.push('</div>\n    <div class="panel-body">\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-id" class="control-label is-required">'),__output.push(t("lossReasons","PROPERTY:_id")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-id" class="form-control" type="text" name="_id" autofocus required maxlength="50">\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-label" class="control-label is-required">'),__output.push(t("lossReasons","PROPERTY:label")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-label" class="form-control" type="text" name="label" required maxlength="100">\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-position" class="control-label is-required">'),__output.push(t("lossReasons","PROPERTY:position")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-position" class="form-control small" type="number" name="position" min="0" required>\n      </div>\n    </div>\n    <div class="panel-footer">\n      <button type="submit" class="btn btn-primary">'),__output.push(formActionText),__output.push("</button>\n    </div>\n  </div>\n</form>\n");return __output.join("")}}),define("app/lossReasons/views/LossReasonFormView",["app/core/views/FormView","app/lossReasons/templates/form"],function(t,e){"use strict";return t.extend({template:e,afterRender:function(){t.prototype.afterRender.call(this),this.options.editMode&&(this.$(".form-control[name=_id]").attr("readonly",!0),this.$(".form-control[name=label]").focus())}})}),define("app/lossReasons/templates/details",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="panel panel-primary">\n  <div class="panel-heading">'),__output.push(t("lossReasons","PANEL:TITLE:details")),__output.push('</div>\n  <div class="panel-details">\n    <div class="props first">\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("lossReasons","PROPERTY:_id")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model._id)),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("lossReasons","PROPERTY:label")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model.label||"-")),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("lossReasons","PROPERTY:position")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model.position)),__output.push("</div>\n      </div>\n    </div>\n  </div>\n</div>\n");return __output.join("")}}),define("app/nls/lossReasons",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Loss reasons"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the loss reasons :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the loss reason :("},"MSG:DELETED":function(t){return"Loss reason <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add loss reason"},"PAGE_ACTION:edit":function(){return"Edit loss reason"},"PAGE_ACTION:delete":function(){return"Delete loss reason"},"PANEL:TITLE:details":function(){return"Loss reason's details"},"PANEL:TITLE:addForm":function(){return"Add loss reason form"},"PANEL:TITLE:editForm":function(){return"Edit loss reason form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:label":function(){return"Label"},"PROPERTY:position":function(){return"Position in Worksheet"},"FORM:ACTION:add":function(){return"Add loss reason"},"FORM:ACTION:edit":function(){return"Edit loss reason"},"FORM:ERROR:addFailure":function(){return"Failed to add the new loss reason :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the loss reason :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Loss reason deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete loss reason"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen loss reason?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> loss reason?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the loss reason :-("}},pl:!0}}),define("app/nls/pl/lossReasons",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Powody strat materia≈Çowych"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie powod√≥w strat materia≈Çowych nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie powodu strat materia≈Çowych nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Pow√≥d strat materia≈Çowych <em>"+e.v(t,"label")+"</em> zosta≈Ç usuniƒôty."},"PAGE_ACTION:add":function(){return"Dodaj powod strat materia≈Çowych"},"PAGE_ACTION:edit":function(){return"Edytuj powod strat materia≈Çowych"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ powod strat materia≈Çowych"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy powodu strat materia≈Çowych"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania powodu strat materia≈Çowych"},"PANEL:TITLE:editForm":function(){return"Formularz edycji powodu strat materia≈Çowych"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:label":function(){return"Opis"},"PROPERTY:position":function(){return"Pozycja na karcie pracy"},"FORM:ACTION:add":function(){return"Dodaj powod strat materia≈Çowych"},"FORM:ACTION:edit":function(){return"Edytuj powod strat materia≈Çowych"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá powodu strat materia≈Çowych :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá powodu strat materia≈Çowych :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia powodu strat materia≈Çowych"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ powod strat materia≈Çowych"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany powod strat materia≈Çowych?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá powod strat materia≈Çowych <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá powodu strat materia≈Çowych :-("}}}),define("app/lossReasons/routes",["../router","../viewport","../user","./LossReasonCollection","./LossReason","../core/pages/ListPage","../core/pages/DetailsPage","../core/pages/AddFormPage","../core/pages/EditFormPage","../core/pages/ActionFormPage","./views/LossReasonFormView","app/lossReasons/templates/details","i18n!app/nls/lossReasons"],function(t,e,n,r,i,o,s,a,u,c,l,p){"use strict";var d=n.auth("DICTIONARIES:VIEW"),h=n.auth("DICTIONARIES:MANAGE");t.map("/lossReasons",d,function(t){e.showPage(new o({collection:new r(null,{rqlQuery:t.rql}),columns:[{id:"_id",className:"is-min"},"label",{id:"position",className:"is-min"}]}))}),t.map("/lossReasons/:id",function(t){e.showPage(new s({model:new i({_id:t.params.id}),detailsTemplate:p}))}),t.map("/lossReasons;add",h,function(){e.showPage(new a({FormView:l,model:new i}))}),t.map("/lossReasons/:id;edit",h,function(t){e.showPage(new u({FormView:l,model:new i({_id:t.params.id})}))}),t.map("/lossReasons/:id;delete",h,function(t,n){var r=new i({_id:t.params.id});e.showPage(new c({model:r,actionKey:"delete",successUrl:r.genClientUrl("base"),cancelUrl:n||r.genClientUrl("base"),formMethod:"DELETE",formAction:r.url(),formActionSeverity:"danger"}))
})}),define("app/nls/events",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"MSG:LOADING_FAILURE":function(){return"Failed to load the events :("},"MSG:LOADING_TYPES_FAILURE":function(){return"Failed to load the event types :("},"BREADCRUMBS:browse":function(){return"Events"},"filter:placeholder:type":function(){return"Any type"},"filter:submit":function(){return"Filter events"},"PROPERTY:time":function(){return"Time of occurrence"},"PROPERTY:user":function(){return"User"},"PROPERTY:type":function(){return"Type"},"PROPERTY:text":function(){return"Description"},"PROPERTY:severity":function(){return"Severity"},"TYPE:app.started":function(){return"System start"},"TEXT:app.started":function(t){return"Server <em>"+e.v(t,"id")+"</em> started in the <em>"+e.v(t,"env")+"</em> environment in <em>"+e.v(t,"time")+"</em> ms."},"TYPE:users.login":function(){return"Users: log in"},"TEXT:users.login":function(){return"-"},"TYPE:users.loginFailure":function(){return"Users: log in failure"},"TEXT:users.loginFailure":function(t){return"Failed log in to account: <em>"+e.v(t,"login")+"</em>"},"TYPE:users.logout":function(){return"Users: log out"},"TEXT:users.logout":function(){return"-"},"TYPE:users.added":function(){return"Users: added"},"TEXT:users.added":function(t){return"Added user: <a href='#users/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->login")+"</a>"},"TYPE:users.edited":function(){return"Users: edited"},"TEXT:users.edited":function(t){return"Edited user: <a href='#users/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->login")+"</a>"},"TYPE:users.deleted":function(){return"Users: deleted"},"TEXT:users.deleted":function(t){return"Deleted user: <em>"+e.v(t,"model->login")+"</em>"},"TYPE:users.synced":function(){return"Users: synchronization"},"TEXT:users.synced":function(t){return"Added "+e.p(t,"created",0,"en",{one:"1 new user",other:e.n(t,"created")+" new users"})+" and modified "+e.p(t,"updated",0,"en",{one:"1 existing user",other:e.n(t,"updated")+" existing users"})+" during synchronization with the AC database."},"TYPE:users.syncFailed":function(){return"Users: synchronization failure"},"TEXT:users.syncFailed":function(t){return"Failed to synchronize users with the AC database: <em>"+e.v(t,"error")+"</em>"},"TYPE:mechOrders.edited":function(){return"Mechanical orders: edited"},"TEXT:mechOrders.edited":function(t){return"Edited mechanical order: <a href='#mechOrders/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:mechOrders.synced":function(){return"Mechanical orders: import"},"TEXT:mechOrders.synced":function(t){return"Imported "+e.p(t,"count",0,"en",{one:"1 mechanical order",other:e.n(t,"count")+" mechanical orders"})+"."},"TYPE:emptyOrders.synced":function(){return"Empty orders: synchronization"},"TEXT:emptyOrders.synced":function(t){return"Added "+e.p(t,"count",0,"en",{one:"1 new empty order",other:e.n(t,"count")+" new empty orders"})+"."},"TYPE:orders.synced":function(){return"Production orders: synchronization"},"TEXT:orders.synced":function(t){return"Added "+e.v(t,"created")+" new and edited "+e.p(t,"updated",0,"en",{one:"1 existing order",other:e.n(t,"updated")+" existing orders"})+e.s(t,"moduleName",{currentDayOrderImporter:"&nbsp;from the current day",nextDayOrderImporter:"&nbsp;from the next day",prevDayOrderImporter:"&nbsp;from the previous day",other:""})+"."},"TYPE:purchaseOrders.synced":function(){return"Purchase orders: synchronization"},"TEXT:purchaseOrders.synced":function(t){return"Added "+e.p(t,"created",0,"en",{one:"1 new order",other:e.n(t,"created")+" new orders"})+", edited "+e.p(t,"updated",0,"en",{one:"1 existing order",other:e.n(t,"updated")+" existing orders"})+" and closed "+e.p(t,"closed",0,"en",{one:"1 order",other:e.n(t,"closed")+" orders"})+" from "+e.v(t,"importedAt")+"."},"TYPE:orderStatuses.added":function(){return"Order statuses: added"},"TEXT:orderStatuses.added":function(t){return"Added order status: <a href='#orderStatuses/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:orderStatuses.edited":function(){return"Order statuses: edited"},"TEXT:orderStatuses.edited":function(t){return"Edited order status: <a href='#orderStatuses/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:orderStatuses.deleted":function(){return"Order statuses: deleted"},"TEXT:orderStatuses.deleted":function(t){return"Deleted order status: <em>"+e.v(t,"model->_id")+"</em>"},"TYPE:delayReasons.added":function(){return"Delay reasons: added"},"TEXT:delayReasons.added":function(t){return"Added delay reason: <a href='#delayReasons/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:delayReasons.edited":function(){return"Delay reasons: edited"},"TEXT:delayReasons.edited":function(t){return"Edited delay reason: <a href='#delayReasons/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:delayReasons.deleted":function(){return"Delay reasons: deleted"},"TEXT:delayReasons.deleted":function(t){return"Deleted delay reason: <em>"+e.v(t,"model->name")+"</em>"},"TYPE:downtimeReasons.added":function(){return"Downtime reasons: added"},"TEXT:downtimeReasons.added":function(t){return"Added downtime reason: <a href='#downtimeReasons/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:downtimeReasons.edited":function(){return"Downtime reasons: edited"},"TEXT:downtimeReasons.edited":function(t){return"Edited downtime reason: <a href='#downtimeReasons/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:downtimeReasons.deleted":function(){return"Downtime reasons: deleted"},"TEXT:downtimeReasons.deleted":function(t){return"Deleted downtime reason: <em>"+e.v(t,"model->_id")+"</em>"},"TYPE:lossReasons.added":function(){return"Loss reasons: added"},"TEXT:lossReasons.added":function(t){return"Added loss reason: <a href='#lossReasons/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:lossReasons.edited":function(){return"Loss reasons: edited"},"TEXT:lossReasons.edited":function(t){return"Edited loss reason: <a href='#lossReasons/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:lossReasons.deleted":function(){return"Loss reasons: deleted"},"TEXT:lossReasons.deleted":function(t){return"Deleted loss reason: <em>"+e.v(t,"model->_id")+"</em>"},"TYPE:aors.added":function(){return"Areas of responsibility: added"},"TEXT:aors.added":function(t){return"Added area of responsibility: <a href='#aors/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:aors.edited":function(){return"Areas of responsibility: edited"},"TEXT:aors.edited":function(t){return"Edited area of responsibility: <a href='#aors/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:aors.deleted":function(){return"Areas of responsibility: deleted"},"TEXT:aors.deleted":function(t){return"Deleted area of responsibility: <em>"+e.v(t,"model->name")+"</em>"},"TYPE:vendors.added":function(){return"Vendors: added"},"TEXT:vendors.added":function(t){return"Added vendor: <a href='#vendors/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:vendors.edited":function(){return"Vendors: edited"},"TEXT:vendors.edited":function(t){return"Edited vendor: <a href='#vendors/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:vendors.deleted":function(){return"Vendors: deleted"},"TEXT:vendors.deleted":function(t){return"Deleted vendor: <em>"+e.v(t,"model->_id")+"</em>"},"TYPE:vendorNc12s.added":function(){return"12NC database: added"},"TEXT:vendorNc12s.added":function(t){return"Added 12NC: <a href='#vendorNc12s/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->nc12")+"</a>"},"TYPE:vendorNc12s.edited":function(){return"12NC database: edited"},"TEXT:vendorNc12s.edited":function(t){return"Edited 12NC: <a href='#vendorNc12s/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->nc12")+"</a>"},"TYPE:vendorNc12s.deleted":function(){return"12NC database: deleted"},"TEXT:vendorNc12s.deleted":function(t){return"Deleted 12NC: <em>"+e.v(t,"model->nc12")+"</em>"},"TYPE:workCenters.added":function(){return"WorkCenters: added"},"TEXT:workCenters.added":function(t){return"Added WorkCenter: <a href='#workCenters/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:workCenters.edited":function(){return"WorkCenters: edited"},"TEXT:workCenters.edited":function(t){return"Edited WorkCenter: <a href='#workCenters/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:workCenters.deleted":function(){return"WorkCenters: deleted"},"TEXT:workCenters.deleted":function(t){return"Deleted WorkCenter: <em>"+e.v(t,"model->_id")+"</em>"},"TYPE:divisions.added":function(){return"Divisions: added"},"TEXT:divisions.added":function(t){return"Added division: <a href='#divisions/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:divisions.edited":function(){return"Divisions: edited"},"TEXT:divisions.edited":function(t){return"Edited division: <a href='#divisions/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:divisions.deleted":function(){return"Divisions: deleted"},"TEXT:divisions.deleted":function(t){return"Deleted division: <em>"+e.v(t,"model->_id")+"</em>"},"TYPE:subdivisions.added":function(){return"Subdivisions: added"},"TEXT:subdivisions.added":function(t){return"Added subdivision: <a href='#subdivisions/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:subdivisions.edited":function(){return"Subdivisions: edited"},"TEXT:subdivisions.edited":function(t){return"Edited subdivision: <a href='#subdivisions/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:subdivisions.deleted":function(){return"Subdivisions: deleted"},"TEXT:subdivisions.deleted":function(t){return"Deleted subdivision: <em>"+e.v(t,"model->name")+"</em>"},"TYPE:companies.added":function(){return"Companies: added"},"TEXT:companies.added":function(t){return"Added company: <a href='#companies/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:companies.edited":function(){return"Companies: edited"},"TEXT:companies.edited":function(t){return"Edited company: <a href='#companies/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:companies.deleted":function(){return"Companies: deleted"},"TEXT:companies.deleted":function(t){return"Deleted company: <em>"+e.v(t,"model->name")+"</em>"},"TYPE:mrpControllers.added":function(){return"MRP Controllers: added"},"TEXT:mrpControllers.added":function(t){return"Added MRP Controller: <a href='#mrpControllers/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:mrpControllers.edited":function(){return"MRP Controllers: edited"},"TEXT:mrpControllers.edited":function(t){return"Edited MRP Controller: <a href='#mrpControllers/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:mrpControllers.deleted":function(){return"MRP Controllers: deleted"},"TEXT:mrpControllers.deleted":function(t){return"Deleted MRP Controller: <em>"+e.v(t,"model->_id")+"</em>"},"TYPE:prodLines.added":function(){return"Production line: added"},"TEXT:prodLines.added":function(t){return"Added production line: <a href='#prodLines/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:prodLines.edited":function(){return"Production line: edited"},"TEXT:prodLines.edited":function(t){return"Edited production line: <a href='#prodLines/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:prodLines.deleted":function(){return"Production line: deleted"},"TEXT:prodLines.deleted":function(t){return"Deleted production line: <em>"+e.v(t,"model->_id")+"</em>"},"TYPE:prodTasks.added":function(){return"Production tasks: added"},"TEXT:prodTasks.added":function(t){return"Added production task: <a href='#prodTasks/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:prodTasks.edited":function(){return"Production tasks: edited"},"TEXT:prodTasks.edited":function(t){return"Edited production task: <a href='#prodTasks/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:prodTasks.deleted":function(){return"Production tasks: deleted"},"TEXT:prodTasks.deleted":function(t){return"Deleted production task: <em>"+e.v(t,"model->name")+"</em>"},"TYPE:prodFlows.added":function(){return"Production flows: added"},"TEXT:prodFlows.added":function(t){return"Added production flow: <a href='#prodFlows/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:prodFlows.edited":function(){return"Production flows: edited"},"TEXT:prodFlows.edited":function(t){return"Edited production flow: <a href='#prodFlows/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:prodFlows.deleted":function(){return"Production flows: deleted"},"TEXT:prodFlows.deleted":function(t){return"Deleted production flow: <em>"+e.v(t,"model->name")+"</em>"},"TYPE:prodFunctions.added":function(){return"Production functions: added"},"TEXT:prodFunctions.added":function(t){return"Added production function: <a href='#prodFunctions/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->label")+"</a>"},"TYPE:prodFunctions.edited":function(){return"Production functions: edited"},"TEXT:prodFunctions.edited":function(t){return"Edited production function: <a href='#prodFunctions/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->label")+"</a>"},"TYPE:prodFunctions.deleted":function(){return"Production functions: deleted"},"TEXT:prodFunctions.deleted":function(t){return"Deleted production function: <em>"+e.v(t,"model->label")+"</em>"},"TYPE:fte.leader.created":function(){return"FTE (warehouse): added"},"TEXT:fte.leader.created":function(t){return"Created <a href='#fte/leader/"+e.v(t,"model->_id")+"'>a new FTE (warehouse) entry</a> for <em>"+e.v(t,"model->shift")+"</em> shift of <em>"+e.v(t,"model->date")+"</em> for subdivision <em>"+e.v(t,"model->subdivision")+"</em>."},"TYPE:fte.leader.locked":function(){return"FTE (warehouse): locked"},"TEXT:fte.leader.locked":function(t){return"Locked <a href='#fte/leader/"+e.v(t,"model->_id")+"'>an FTE (warehouse) entry</a> for <em>"+e.v(t,"model->shift")+"</em> shift of <em>"+e.v(t,"model->date")+"</em> for subdivision <em>"+e.v(t,"model->subdivision")+"</em>."},"TYPE:fte.leader.deleted":function(){return"FTE (warehouse): deleted"},"TEXT:fte.leader.deleted":function(t){return"Deleted an FTE (warehouse) entry for <em>"+e.v(t,"model->shift")+"</em> shift of <em>"+e.v(t,"model->date")+"</em> for subdivision <em>"+e.v(t,"model->subdivision")+"</em>."},"TYPE:fte.master.created":function(){return"FTE (production): added"},"TEXT:fte.master.created":function(t){return"Created <a href='#fte/master/"+e.v(t,"model->_id")+"'>a new FTE (production) entry</a> for <em>"+e.v(t,"model->shift")+"</em> shift of <em>"+e.v(t,"model->date")+"</em> for subdivision <em>"+e.v(t,"model->subdivision")+"</em>."},"TYPE:fte.master.locked":function(){return"FTE (production): locked"},"TEXT:fte.master.locked":function(t){return"Locked <a href='#fte/master/"+e.v(t,"model->_id")+"'>an FTE (production) entry</a> for <em>"+e.v(t,"model->shift")+"</em> shift of <em>"+e.v(t,"model->date")+"</em> for subdivision <em>"+e.v(t,"model->subdivision")+"</em>."},"TYPE:fte.master.deleted":function(){return"FTE (production): deleted"},"TEXT:fte.master.deleted":function(t){return"Deleted an FTE (production) entry for <em>"+e.v(t,"model->shift")+"</em> shift of <em>"+e.v(t,"model->date")+"</em> for subdivision <em>"+e.v(t,"model->subdivision")+"</em>."},"TYPE:hourlyPlans.created":function(){return"Hourly plans: added"},"TEXT:hourlyPlans.created":function(t){return"Created <a href='#hourlyPlans/"+e.v(t,"model->_id")+"'>a new hourly plan</a> for <em>"+e.v(t,"model->shift")+"</em> shift of <em>"+e.v(t,"model->date")+"</em> for division <em>"+e.v(t,"model->division")+"</em>."},"TYPE:hourlyPlans.locked":function(){return"Hourly plans: locked"},"TEXT:hourlyPlans.locked":function(t){return"Locked <a href='#hourlyPlans/"+e.v(t,"model->_id")+"'>an hourly plan</a> for <em>"+e.v(t,"model->shift")+"</em> shift of <em>"+e.v(t,"model->date")+"</em> for division <em>"+e.v(t,"model->division")+"</em>."},"TYPE:hourlyPlans.deleted":function(){return"Hourly plans: deleted"},"TEXT:hourlyPlans.deleted":function(t){return"Locked an hourly plan for <em>"+e.v(t,"model->shift")+"</em> shift of <em>"+e.v(t,"model->date")+"</em> for division <em>"+e.v(t,"model->division")+"</em>."},"TYPE:pressWorksheets.added":function(){return"Worksheets: added"},"TEXT:pressWorksheets.added":function(t){return"Added <a href='#pressWorksheets/"+e.v(t,"model->_id")+"'>a new worksheet</a>."},"TYPE:pressWorksheets.edited":function(){return"Worksheets: edycja"},"TEXT:pressWorksheets.edited":function(t){return"Edited worksheet: <a href='#pressWorksheets/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->rid")+"</a>"},"TYPE:pressWorksheets.deleted":function(){return"Worksheets: deleted"},"TEXT:pressWorksheets.deleted":function(t){return"Deleted worksheet: <em>"+e.v(t,"model->rid")+"</em>"},"TYPE:feedback.added":function(){return"Feedback: added"},"TEXT:feedback.added":function(){return"Added new feedback."},"TYPE:clipOrderCount.created":function(){return"CLIP: created"},"TEXT:clipOrderCount.created":function(t){return"Calculated CLIP for "+e.v(t,"date")+" ("+e.p(t,"total",0,"en",{one:"1 MRP",other:e.v(t,"total")+" different MRPs"})+")."},"TYPE:production.unlocked":function(){return"Production: line activation"},"TEXT:production.unlocked":function(t){return"Activated production line: <em>"+e.v(t,"prodLine")+"</em>"},"TYPE:production.locked":function(){return"Production: line deactivation"},"TEXT:production.locked":function(t){return"Deactivated production line: <em>"+e.v(t,"prodLine")+"</em>"},"TYPE:warehouse.controlCycles.synced":function(){return"Warehouse: control cycles sync"},"TEXT:warehouse.controlCycles.synced":function(t){return"Imported <em>"+e.v(t,"count")+"</em> "+e.p(t,"count",0,"en",{one:"control cycle",other:"control cycles"})+" from data downloaded at <em>"+e.v(t,"timestamp")+"</em>."},"TYPE:warehouse.controlCycles.syncFailed":function(){return"Warehouse: control cycles sync failure"},"TEXT:warehouse.controlCycles.syncFailed":function(t){return"Failed to import control cycles from data downloaded at <em>"+e.v(t,"timestamp")+"</em>: <em>"+e.v(t,"error")+"</em>"},"TYPE:warehouse.transferOrders.synced":function(){return"Warehouse: transfer orders sync"},"TEXT:warehouse.transferOrders.synced":function(t){return"Imported <em>"+e.v(t,"count")+"</em> "+e.p(t,"count",0,"en",{one:"transfer order",other:"transfer orders"})+" from data downloaded at <em>"+e.v(t,"timestamp")+"</em>."},"TYPE:warehouse.transferOrders.syncFailed":function(){return"Warehouse: transfer orders sync failure"},"TEXT:warehouse.transferOrders.syncFailed":function(t){return"Failed to import transfer orders from data downloaded at <em>"+e.v(t,"timestamp")+"</em>: <em>"+e.v(t,"error")+"</em>"},"TYPE:warehouse.shiftMetrics.synced":function(){return"Warehouse: metrics calc"},"TEXT:warehouse.shiftMetrics.synced":function(t){return"Calculated warehouse shift metrics for <em>"+e.v(t,"date")+"</em>."},"TYPE:warehouse.shiftMetrics.syncFailed":function(){return"Warehouse: metrics calc failure"},"TEXT:warehouse.shiftMetrics.syncFailed":function(t){return"Failed to calculate warehouse shift metrics for <em>"+e.v(t,"date")+"</em>: <em>"+e.v(t,"error")+"</em>"},"TYPE:xiconfPrograms.added":function(){return"Xiconf programs: added"},"TEXT:xiconfPrograms.added":function(t){return"Added program: <a href='#xiconf/programs/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:xiconfPrograms.edited":function(){return"Xiconf programs: edited"},"TEXT:xiconfPrograms.edited":function(t){return"Edited program: <a href='#xiconf/programs/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:xiconfPrograms.deleted":function(){return"Xiconf programs: deleted"},"TEXT:xiconfPrograms.deleted":function(t){return"Deleted program: <em>"+e.v(t,"model->name")+"</em>"},"TYPE:xiconf.orders.synced":function(){return"Xiconf: order sync"},"TEXT:xiconf.orders.synced":function(t){return"Added <em>"+e.v(t,"insertCount")+"</em> and modified <em>"+e.v(t,"updateCount")+"</em> "+e.p(t,"updateCount",0,"en",{one:"order",other:"orders"})+" from data downloaded at <em>"+e.v(t,"timestamp")+"</em>."},"TYPE:xiconf.orders.syncFailed":function(){return"Xiconf: order sync failure"},"TEXT:xiconf.orders.syncFailed":function(t){return"Failed to import orders from data downloaded at <em>"+e.v(t,"timestamp")+"</em>: "+e.v(t,"error")},"TYPE:licenses.added":function(){return"Licenses: added"},"TEXT:licenses.added":function(t){return"Added license: <a href='#licenses/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>."},"TYPE:licenses.edited":function(){return"Licenses: edycja"},"TEXT:licenses.edited":function(t){return"Edited license: <a href='#licenses/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:licenses.deleted":function(){return"Licenses: deleted"},"TEXT:licenses.deleted":function(t){return"Deleted license: <em>"+e.v(t,"model->_id")+"</em>"},"TYPE:prodDowntimes.confirmedEdited":function(){return"Downtimes: confirmed edited"},"TEXT:prodDowntimes.confirmedEdited":function(t){return"Edited a confirmed downtime: <a href='#prodDowntimes/"+e.v(t,"_id")+"'>"+e.v(t,"rid")+"</a>"},"TYPE:orderDocuments.synced":function(){return"Production orders: document sync"},"TEXT:orderDocuments.synced":function(t){return"Updated <em>"+e.v(t,"updateCount")+"</em> "+e.p(t,"updateCount",0,"en",{one:"order",other:"orders"})+" from data downloaded at <em>"+e.v(t,"timestamp")+"</em>."},"TYPE:orderDocuments.syncFailed":function(){return"Production orders: document sync failure"},"TEXT:orderDocuments.syncFailed":function(t){return"Failed to import documents from data downloaded at <em>"+e.v(t,"timestamp")+"</em>: "+e.v(t,"error")}},pl:!0}}),define("app/nls/pl/events",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"MSG:LOADING_FAILURE":function(){return"≈Åadowanie zdarze≈Ñ nie powiod≈Ço siƒô :("},"MSG:LOADING_TYPES_FAILURE":function(){return"≈Åadowanie typ√≥w zdarze≈Ñ nie powiod≈Ço siƒô :("},"BREADCRUMBS:browse":function(){return"Zdarzenia"},"filter:placeholder:type":function(){return"Dowolny typ"},"filter:submit":function(){return"Filtruj zdarzenia"},"PROPERTY:time":function(){return"Czas wystƒÖpienia"},"PROPERTY:user":function(){return"U≈ºytkownik"},"PROPERTY:type":function(){return"Typ"},"PROPERTY:text":function(){return"Opis"},"PROPERTY:severity":function(){return"Poziom wa≈ºno≈õci"},"TYPE:app.started":function(){return"Start systemu"},"TEXT:app.started":function(t){return"Serwer <em>"+e.v(t,"id")+"</em> wystartowa≈Ç w ≈õrodowisku <em>"+e.s(t,"env",{development:"rozwojowym",testing:"testowym",production:"produkcyjnym",other:e.v(t,"env")})+"</em> w ciƒÖgu <em>"+e.v(t,"time")+"</em> ms."},"TYPE:users.login":function(){return"U≈ºytkownicy: zalogowanie"},"TEXT:users.login":function(){return"-"},"TYPE:users.loginFailure":function(){return"U≈ºytkownicy: nieudane logowanie"},"TEXT:users.loginFailure":function(t){return"Nieudane logowanie na konto: <em>"+e.v(t,"login")+"</em>"},"TYPE:users.logout":function(){return"U≈ºytkownicy: wylogowanie"},"TEXT:users.logout":function(){return"-"},"TYPE:users.added":function(){return"U≈ºytkownicy: dodanie"},"TEXT:users.added":function(t){return"Dodano u≈ºytkownika: <a href='#users/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->login")+"</a>"},"TYPE:users.edited":function(){return"U≈ºytkownicy: edycja"},"TEXT:users.edited":function(t){return"Zmodyfikowano u≈ºytkownika: <a href='#users/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->login")+"</a>"},"TYPE:users.deleted":function(){return"U≈ºytkownicy: usuniƒôcie"},"TEXT:users.deleted":function(t){return"Usuniƒôto u≈ºytkownika: <em>"+e.v(t,"model->login")+"</em>"},"TYPE:users.synced":function(){return"U≈ºytkownicy: synchronizacja"},"TEXT:users.synced":function(t){return"Dodano "+e.p(t,"created",0,"pl",{one:"1 nowego u≈ºytkownika",other:e.n(t,"created")+" nowych u≈ºytkownik√≥w"})+" i zmodyfikowano "+e.p(t,"updated",0,"pl",{one:"1 istniejƒÖcego u≈ºytkownika",other:e.n(t,"updated")+" istniejƒÖcych u≈ºytkownik√≥w"})+" podczas synchronizacji z bazƒÖ KD."},"TYPE:users.syncFailed":function(){return"U≈ºytkownicy: b≈ÇƒÖd synchronizacji"},"TEXT:users.syncFailed":function(t){return"Nie uda≈Ço siƒô zsynchronizowaƒá u≈ºytkownik√≥w z bazƒÖ KD: <em>"+e.v(t,"error")+"</em>"},"TYPE:mechOrders.edited":function(){return"Zlecenia dzia≈Çu mechanicznego: edycja"},"TEXT:mechOrders.edited":function(t){return"Zmodyfikowano zlecenie dzia≈Çu mechanicznego: <a href='#mechOrders/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:mechOrders.synced":function(){return"Zlecenia dzia≈Çu mechanicznego: import"},"TEXT:mechOrders.synced":function(t){return"Zaimportowano "+e.p(t,"count",0,"pl",{one:"1 zlecenie",few:e.n(t,"count")+" zlecenia",other:e.n(t,"count")+" zlece≈Ñ"})+" dzia≈Çu mechanicznego."},"TYPE:emptyOrders.synced":function(){return"Puste zlecenia: synchronizacja"},"TEXT:emptyOrders.synced":function(t){return"Dodano "+e.p(t,"count",0,"pl",{one:"1 nowe puste zlecenie",few:e.n(t,"count")+" nowe puste zlecenia",other:e.n(t,"count")+" nowych pustych zlece≈Ñ"})+"."},"TYPE:orders.synced":function(){return"Zlecenia reszty dzia≈Ç√≥w: synchronizacja"},"TEXT:orders.synced":function(t){return"Dodano "+e.p(t,"created",0,"pl",{one:"1 nowe",few:e.n(t,"created")+" nowe",other:e.n(t,"created")+" nowych"})+" i zmodyfikowano "+e.p(t,"updated",0,"pl",{one:"1 istniejƒÖce zlecenie",few:e.n(t,"updated")+" istniejƒÖce zlecenia",other:e.n(t,"updated")+" istniejƒÖcych zlece≈Ñ"})+e.s(t,"moduleName",{currentDayOrderImporter:"&nbsp;z aktualnego dnia",nextDayOrderImporter:"&nbsp;z nastƒôpnego dnia",prevDayOrderImporter:"&nbsp;z poprzedniego dnia",other:""})+"."},"TYPE:purchaseOrders.synced":function(){return"Zam√≥wienia: synchronizacja"},"TEXT:purchaseOrders.synced":function(t){return"Dodano "+e.p(t,"created",0,"pl",{one:"1 nowe zam√≥wienie",few:e.n(t,"created")+" nowe zam√≥wienia",other:e.n(t,"created")+" nowych zam√≥wie≈Ñ"})+", zmodyfikowano "+e.p(t,"updated",0,"pl",{one:"1 istniejƒÖce zam√≥wienie",few:e.n(t,"updated")+" istniejƒÖce zam√≥wienia",other:e.n(t,"updated")+" istniejƒÖcych zam√≥wie≈Ñ"})+" i zamkniƒôto "+e.p(t,"closed",0,"pl",{one:"1 zam√≥wienie",few:e.n(t,"closed")+" zam√≥wienia",other:e.n(t,"closed")+" zam√≥wie≈Ñ"})+" z danych otrzymanych "+e.v(t,"importedAt")+"."},"TYPE:orderStatuses.added":function(){return"Statusy zlece≈Ñ: dodanie"},"TEXT:orderStatuses.added":function(t){return"Dodano status zlece≈Ñ: <a href='#orderStatuses/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:orderStatuses.edited":function(){return"Statusy zlece≈Ñ: edycja"},"TEXT:orderStatuses.edited":function(t){return"Zmodyfikowano status zlece≈Ñ: <a href='#orderStatuses/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:orderStatuses.deleted":function(){return"Statusy zlece≈Ñ: usuniƒôcie"},"TEXT:orderStatuses.deleted":function(t){return"Usuniƒôto status zlece≈Ñ: <em>"+e.v(t,"model->_id")+"</em>"},"TYPE:delayReasons.added":function(){return"Powody op√≥≈∫nie≈Ñ: dodanie"},"TEXT:delayReasons.added":function(t){return"Dodano pow√≥d op√≥≈∫nie≈Ñ: <a href='#delayReasons/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:delayReasons.edited":function(){return"Powody op√≥≈∫nie≈Ñ: edycja"},"TEXT:delayReasons.edited":function(t){return"Zmodyfikowano pow√≥d op√≥≈∫nie≈Ñ: <a href='#delayReasons/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:delayReasons.deleted":function(){return"Powody op√≥≈∫nie≈Ñ: usuniƒôcie"},"TEXT:delayReasons.deleted":function(t){return"Usuniƒôto pow√≥d op√≥≈∫nie≈Ñ: <em>"+e.v(t,"model->name")+"</em>"},"TYPE:downtimeReasons.added":function(){return"Powody przestoj√≥w: dodanie"},"TEXT:downtimeReasons.added":function(t){return"Dodano pow√≥d przestoj√≥w: <a href='#downtimeReasons/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:downtimeReasons.edited":function(){return"Powody przestoj√≥w: edycja"},"TEXT:downtimeReasons.edited":function(t){return"Zmodyfikowano pow√≥d przestoj√≥w: <a href='#downtimeReasons/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:downtimeReasons.deleted":function(){return"Powody przestoj√≥w: usuniƒôcie"},"TEXT:downtimeReasons.deleted":function(t){return"Usuniƒôto pow√≥d przestoj√≥w: <em>"+e.v(t,"model->_id")+"</em>"},"TYPE:lossReasons.added":function(){return"Powody strat materia≈Çowych: dodanie"},"TEXT:lossReasons.added":function(t){return"Dodano pow√≥d strat materia≈Çowych: <a href='#lossReasons/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:lossReasons.edited":function(){return"Powody strat materia≈Çowych: edycja"},"TEXT:lossReasons.edited":function(t){return"Zmodyfikowano pow√≥d strat materia≈Çowych: <a href='#lossReasons/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:lossReasons.deleted":function(){return"Powody strat materia≈Çowych: usuniƒôcie"},"TEXT:lossReasons.deleted":function(t){return"Usuniƒôto pow√≥d strat materia≈Çowych: <em>"+e.v(t,"model->_id")+"</em>"},"TYPE:aors.added":function(){return"Obszary odpowiedzialno≈õci: dodanie"},"TEXT:aors.added":function(t){return"Dodano obszar odpowiedzialno≈õci: <a href='#aors/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:aors.edited":function(){return"Obszary odpowiedzialno≈õci: edycja"},"TEXT:aors.edited":function(t){return"Zmodyfikowano obszar odpowiedzialno≈õci: <a href='#aors/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:aors.deleted":function(){return"Obszary odpowiedzialno≈õci: usuniƒôcie"},"TEXT:aors.deleted":function(t){return"Usuniƒôto obszar odpowiedzialno≈õci: <em>"+e.v(t,"model->name")+"</em>"},"TYPE:vendors.added":function(){return"Dostawcy: dodanie"},"TEXT:vendors.added":function(t){return"Dodano dostawcƒô: <a href='#vendors/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:vendors.edited":function(){return"Dostawcy: edycja"},"TEXT:vendors.edited":function(t){return"Zmodyfikowano dostawcƒô: <a href='#vendors/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:vendors.deleted":function(){return"Dostawcy: usuniƒôcie"},"TEXT:vendors.deleted":function(t){return"Usuniƒôto dostawcƒô: <em>"+e.v(t,"model->_id")+"</em>"},"TYPE:vendorNc12s.added":function(){return"Baza 12NC: dodanie"},"TEXT:vendorNc12s.added":function(t){return"Dodano 12NC: <a href='#vendorNc12s/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->nc12")+"</a>"},"TYPE:vendorNc12s.edited":function(){return"Baza 12NC: edycja"},"TEXT:vendorNc12s.edited":function(t){return"Zmodyfikowano 12NC: <a href='#vendorNc12s/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->nc12")+"</a>"},"TYPE:vendorNc12s.deleted":function(){return"Baza 12NC: usuniƒôcie"},"TEXT:vendorNc12s.deleted":function(t){return"Usuniƒôto 12NC: <em>"+e.v(t,"model->nc12")+"</em>"},"TYPE:workCenters.added":function(){return"WorkCentera: dodanie"},"TEXT:workCenters.added":function(t){return"Dodano WorkCenter: <a href='#workCenters/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:workCenters.edited":function(){return"WorkCentera: edycja"},"TEXT:workCenters.edited":function(t){return"Zmodyfikowano WorkCenter: <a href='#workCenters/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:workCenters.deleted":function(){return"WorkCentera: usuniƒôcie"},"TEXT:workCenters.deleted":function(t){return"Usuniƒôto WorkCenter: <em>"+e.v(t,"model->_id")+"</em>"},"TYPE:divisions.added":function(){return"Wydzia≈Çy: dodanie"},"TEXT:divisions.added":function(t){return"Dodano wydzia≈Ç: <a href='#divisions/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"
},"TYPE:divisions.edited":function(){return"Wydzia≈Çy: edycja"},"TEXT:divisions.edited":function(t){return"Zmodyfikowano wydzia≈Ç: <a href='#divisions/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:divisions.deleted":function(){return"Wydzia≈Çy: usuniƒôcie"},"TEXT:divisions.deleted":function(t){return"Usuniƒôto wydzia≈Ç: <em>"+e.v(t,"model->_id")+"</em>"},"TYPE:subdivisions.added":function(){return"Dzia≈Çy: dodanie"},"TEXT:subdivisions.added":function(t){return"Dodano dzia≈Ç: <a href='#subdivisions/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:subdivisions.edited":function(){return"Dzia≈Çy: edycja"},"TEXT:subdivisions.edited":function(t){return"Zmodyfikowano dzia≈Ç: <a href='#subdivisions/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:subdivisions.deleted":function(){return"Dzia≈Çy: usuniƒôcie"},"TEXT:subdivisions.deleted":function(t){return"Usuniƒôto dzia≈Ç: <em>"+e.v(t,"model->name")+"</em>"},"TYPE:companies.added":function(){return"Firmy: dodanie"},"TEXT:companies.added":function(t){return"Dodano firmƒô: <a href='#companies/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:companies.edited":function(){return"Firmy: edycja"},"TEXT:companies.edited":function(t){return"Zmodyfikowano firmƒô: <a href='#companies/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:companies.deleted":function(){return"Firmy: usuniƒôcie"},"TEXT:companies.deleted":function(t){return"Usuniƒôto firmƒô: <em>"+e.v(t,"model->name")+"</em>"},"TYPE:mrpControllers.added":function(){return"Kontrolery MRP: dodanie"},"TEXT:mrpControllers.added":function(t){return"Dodano kontroler MRP: <a href='#mrpControllers/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:mrpControllers.edited":function(){return"Kontrolery MRP: edycja"},"TEXT:mrpControllers.edited":function(t){return"Zmodyfikowano kontroler MRP: <a href='#mrpControllers/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:mrpControllers.deleted":function(){return"Kontrolery MRP: usuniƒôcie"},"TEXT:mrpControllers.deleted":function(t){return"Usuniƒôto kontroler MRP: <em>"+e.v(t,"model->_id")+"</em>"},"TYPE:prodLines.added":function(){return"Linie produkcyjne: dodanie"},"TEXT:prodLines.added":function(t){return"Dodano liniƒô produkcyjnƒÖ: <a href='#prodLines/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:prodLines.edited":function(){return"Linie produkcyjne: edycja"},"TEXT:prodLines.edited":function(t){return"Zmodyfikowano liniƒô produkcyjnƒÖ: <a href='#prodLines/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:prodLines.deleted":function(){return"Linie produkcyjne: usuniƒôcie"},"TEXT:prodLines.deleted":function(t){return"Usuniƒôto liniƒô produkcyjnƒÖ: <em>"+e.v(t,"model->_id")+"</em>"},"TYPE:prodTasks.added":function(){return"Zadania produkcyjne: dodanie"},"TEXT:prodTasks.added":function(t){return"Dodano zadanie produkcyjne: <a href='#prodTasks/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:prodTasks.edited":function(){return"Zadania produkcyjne: edycja"},"TEXT:prodTasks.edited":function(t){return"Zmodyfikowano zadanie produkcyjne: <a href='#prodTasks/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:prodTasks.deleted":function(){return"Zadania produkcyjne: usuniƒôcie"},"TEXT:prodTasks.deleted":function(t){return"Usuniƒôto zadanie produkcyjne: <em>"+e.v(t,"model->name")+"</em>"},"TYPE:prodFlows.added":function(){return"Przep≈Çywy: dodanie"},"TEXT:prodFlows.added":function(t){return"Dodano przep≈Çyw: <a href='#prodFlows/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:prodFlows.edited":function(){return"Przep≈Çywy: edycja"},"TEXT:prodFlows.edited":function(t){return"Zmodyfikowano przep≈Çyw: <a href='#prodFlows/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:prodFlows.deleted":function(){return"Przep≈Çywy: usuniƒôcie"},"TEXT:prodFlows.deleted":function(t){return"Usuniƒôto przep≈Çyw: <em>"+e.v(t,"model->name")+"</em>"},"TYPE:prodFunctions.added":function(){return"Funkcje na produkcji: dodanie"},"TEXT:prodFunctions.added":function(t){return"Dodano funkcjƒô na produkcji: <a href='#prodFunctions/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->label")+"</a>"},"TYPE:prodFunctions.edited":function(){return"Funkcje na produkcji: edycja"},"TEXT:prodFunctions.edited":function(t){return"Zmodyfikowano funkcjƒô na produkcji: <a href='#prodFunctions/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->label")+"</a>"},"TYPE:prodFunctions.deleted":function(){return"Funkcje na produkcji: usuniƒôcie"},"TEXT:prodFunctions.deleted":function(t){return"Usuniƒôto funkcjƒô na produkcji: <em>"+e.v(t,"model->label")+"</em>"},"TYPE:fte.leader.created":function(){return"FTE (magazyn): dodanie"},"TEXT:fte.leader.created":function(t){return"Utworzono <a href='#fte/leader/"+e.v(t,"model->_id")+"'>nowy wpis FTE (magazyn)</a> dla <em>"+e.v(t,"model->shift")+"</em> zmiany dnia <em>"+e.v(t,"model->date")+"</em> dla dzia≈Çu <em>"+e.v(t,"model->subdivision")+"</em>."},"TYPE:fte.leader.locked":function(){return"FTE (magazyn): zamkniƒôcie"},"TEXT:fte.leader.locked":function(t){return"Zamkniƒôto <a href='#fte/leader/"+e.v(t,"model->_id")+"'>wpis FTE (magazyn)</a> dla <em>"+e.v(t,"model->shift")+"</em> zmiany dnia <em>"+e.v(t,"model->date")+"</em> dla dzia≈Çu <em>"+e.v(t,"model->subdivision")+"</em>."},"TYPE:fte.leader.deleted":function(){return"FTE (magazyn): usuniƒôcie"},"TEXT:fte.leader.deleted":function(t){return"Usuniƒôto wpis FTE (magazyn) dla <em>"+e.v(t,"model->shift")+"</em> zmiany dnia <em>"+e.v(t,"model->date")+"</em> dla dzia≈Çu <em>"+e.v(t,"model->subdivision")+"</em>."},"TYPE:fte.master.created":function(){return"FTE (produkcja): dodanie"},"TEXT:fte.master.created":function(t){return"Utworzono <a href='#fte/master/"+e.v(t,"model->_id")+"'>nowy wpis FTE (produkcja)</a> dla <em>"+e.v(t,"model->shift")+"</em> zmiany dnia <em>"+e.v(t,"model->date")+"</em> dla dzia≈Çu <em>"+e.v(t,"model->subdivision")+"</em>."},"TYPE:fte.master.locked":function(){return"FTE (produkcja): zamkniƒôcie"},"TEXT:fte.master.locked":function(t){return"Zamkniƒôto <a href='#fte/master/"+e.v(t,"model->_id")+"'>wpis FTE (produkcja)</a> dla <em>"+e.v(t,"model->shift")+"</em> zmiany dnia <em>"+e.v(t,"model->date")+"</em> dla dzia≈Çu <em>"+e.v(t,"model->subdivision")+"</em>."},"TYPE:fte.master.deleted":function(){return"FTE (produkcja): usuniƒôcie"},"TEXT:fte.master.deleted":function(t){return"Usuniƒôto wpis FTE (produkcja) dla <em>"+e.v(t,"model->shift")+"</em> zmiany dnia <em>"+e.v(t,"model->date")+"</em> dla dzia≈Çu <em>"+e.v(t,"model->subdivision")+"</em>."},"TYPE:hourlyPlans.created":function(){return"Plany godzinowe: dodanie"},"TEXT:hourlyPlans.created":function(t){return"Utworzono <a href='#hourlyPlans/"+e.v(t,"model->_id")+"'>nowy plan godzinowy</a> dla <em>"+e.v(t,"model->shift")+"</em> zmiany dnia <em>"+e.v(t,"model->date")+"</em> dla wydzia≈Çu <em>"+e.v(t,"model->division")+"</em>."},"TYPE:hourlyPlans.locked":function(){return"Plany godzinowe: zamkniƒôcie"},"TEXT:hourlyPlans.locked":function(t){return"Zamkniƒôto <a href='#hourlyPlans/"+e.v(t,"model->_id")+"'>plan godzinowy</a> dla <em>"+e.v(t,"model->shift")+"</em> zmiany dnia <em>"+e.v(t,"model->date")+"</em> dla wydzia≈Çu <em>"+e.v(t,"model->division")+"</em>."},"TYPE:hourlyPlans.deleted":function(){return"Plany godzinowe: usuniƒôcie"},"TEXT:hourlyPlans.deleted":function(t){return"Usuniƒôto plan godzinowy dla <em>"+e.v(t,"model->shift")+"</em> zmiany dnia <em>"+e.v(t,"model->date")+"</em> dla wydzia≈Çu <em>"+e.v(t,"model->division")+"</em>."},"TYPE:pressWorksheets.added":function(){return"Karty pracy: dodanie"},"TEXT:pressWorksheets.added":function(t){return"Dodano nowƒÖ <a href='#pressWorksheets/"+e.v(t,"model->_id")+"'>kartƒô pracy</a>."},"TYPE:pressWorksheets.edited":function(){return"Karty pracy: edycja"},"TEXT:pressWorksheets.edited":function(t){return"Zmodyfikowano kartƒô pracy: <a href='#pressWorksheets/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->rid")+"</a>"},"TYPE:pressWorksheets.deleted":function(){return"Karty pracy: usuniƒôcie"},"TEXT:pressWorksheets.deleted":function(t){return"Usuniƒôto kartƒô pracy: <em>"+e.v(t,"model->rid")+"</em>"},"TYPE:feedback.added":function(){return"Feedback: dodanie"},"TEXT:feedback.added":function(){return"Dodano nowy feedback."},"TYPE:clipOrderCount.created":function(){return"CLIP: utworzenie"},"TEXT:clipOrderCount.created":function(t){return"Obliczono CLIP z dnia "+e.v(t,"date")+" ("+e.v(t,"total")+" MRP)."},"TYPE:production.unlocked":function(){return"Produkcja: aktywacja linii"},"TEXT:production.unlocked":function(t){return"Aktywowano liniƒô produkcyjnƒÖ: <em>"+e.v(t,"prodLine")+"</em>"},"TYPE:production.locked":function(){return"Produkcja: dezaktywacja linii"},"TEXT:production.locked":function(t){return"Dezaktywowano liniƒô produkcyjnƒÖ: <em>"+e.v(t,"prodLine")+"</em>"},"TYPE:warehouse.controlCycles.synced":function(){return"Magazyn: synchronizacja cykli kontrolnych"},"TEXT:warehouse.controlCycles.synced":function(t){return"Zaimportowano <em>"+e.v(t,"count")+"</em> "+e.p(t,"count",0,"pl",{one:"cykl kontrolny",few:"cykle kontrolne",other:"cylki kontrolnych"})+" z danych pobranych <em>"+e.v(t,"timestamp")+"</em>."},"TYPE:warehouse.controlCycles.syncFailed":function(){return"Magazyn: nieudana synchronizacja cykli kontrolnych"},"TEXT:warehouse.controlCycles.syncFailed":function(t){return"Nie uda≈Ço siƒô zaimportowaƒá cykli kontrolnych z danych pobranych <em>"+e.v(t,"timestamp")+"</em>: <em>"+e.v(t,"error")+"</em>"},"TYPE:warehouse.transferOrders.synced":function(){return"Magazyn: synchronizacja zam√≥wie≈Ñ przeniesienia"},"TEXT:warehouse.transferOrders.synced":function(t){return"Zaimportowano <em>"+e.v(t,"count")+"</em> "+e.p(t,"count",0,"pl",{one:"zam√≥wienie przeniesienia",few:"zam√≥wienia przeniesienia",other:"zam√≥wie≈Ñ przeniesienia"})+" z danych pobranych <em>"+e.v(t,"timestamp")+"</em>."},"TYPE:warehouse.transferOrders.syncFailed":function(){return"Magazyn: nieudana synchronizacja zam√≥wie≈Ñ przeniesienia"},"TEXT:warehouse.transferOrders.syncFailed":function(t){return"Nie uda≈Ço siƒô zaimportowaƒá zam√≥wie≈Ñ przeniesienia z danych pobranych <em>"+e.v(t,"timestamp")+"</em>: <em>"+e.v(t,"error")+"</em>"},"TYPE:warehouse.shiftMetrics.synced":function(){return"Magazyn: obliczenie wska≈∫nik√≥w"},"TEXT:warehouse.shiftMetrics.synced":function(t){return"Obliczono wska≈∫niki magazynu dla dnia <em>"+e.v(t,"date")+"</em>."},"TYPE:warehouse.shiftMetrics.syncFailed":function(){return"Magazyn: nieudane obliczenie wska≈∫nik√≥w"},"TEXT:warehouse.shiftMetrics.syncFailed":function(t){return"Nie uda≈Ço siƒô obliczyƒá wska≈∫nik√≥w magazynu dla dnia <em>"+e.v(t,"date")+"</em>: <em>"+e.v(t,"error")+"</em>"},"TYPE:xiconfPrograms.added":function(){return"Programy Xiconf: dodanie"},"TEXT:xiconfPrograms.added":function(t){return"Dodano program: <a href='#xiconf/programs/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:xiconfPrograms.edited":function(){return"Programy Xiconf: edycja"},"TEXT:xiconfPrograms.edited":function(t){return"Zmodyfikowano program: <a href='#xiconf/programs/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:xiconfPrograms.deleted":function(){return"Programy Xiconf: usuniƒôcie"},"TEXT:xiconfPrograms.deleted":function(t){return"Usuniƒôto program: <em>"+e.v(t,"model->name")+"</em>"},"TYPE:xiconf.orders.synced":function(){return"Xiconf: synchronizacja zlece≈Ñ"},"TEXT:xiconf.orders.synced":function(t){return"Dodano <em>"+e.v(t,"insertCount")+"</em> i zmodyfikowano <em>"+e.v(t,"updateCount")+"</em> "+e.p(t,"updateCount",0,"pl",{one:"zlecenie",few:"zlecenia",other:"zlece≈Ñ"})+" z danych pobranych <em>"+e.v(t,"timestamp")+"</em>."},"TYPE:xiconf.orders.syncFailed":function(){return"Xiconf: nieudana synchronizacja zlece≈Ñ"},"TEXT:xiconf.orders.syncFailed":function(t){return"Nie uda≈Ço siƒô zaimportowaƒá danych z <em>"+e.v(t,"timestamp")+"</em>: "+e.v(t,"error")},"TYPE:licenses.added":function(){return"Licencje: dodanie"},"TEXT:licenses.added":function(t){return"Dodano licencjƒô: <a href='#licenses/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:licenses.edited":function(){return"Licencje: edycja"},"TEXT:licenses.edited":function(t){return"Zmodyfikowano licencjƒô: <a href='#licenses/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:licenses.deleted":function(){return"Licencje: usuniƒôcie"},"TEXT:licenses.deleted":function(t){return"Usuniƒôto licencjƒô: <em>"+e.v(t,"model->_id")+"</em>"},"TYPE:prodDowntimes.confirmedEdited":function(){return"Przestoje: edycja potwierdzonego"},"TEXT:prodDowntimes.confirmedEdited":function(t){return"Zmodyfikowano potwierdzony przest√≥j: <a href='#prodDowntimes/"+e.v(t,"_id")+"'>"+e.v(t,"rid")+"</a>"},"TYPE:orderDocuments.synced":function(){return"Zlecenia reszty dzia≈Ç√≥w: synchronizacja dokument√≥w"},"TEXT:orderDocuments.synced":function(t){return"Zmodyfikowano <em>"+e.v(t,"updateCount")+"</em> "+e.p(t,"updateCount",0,"pl",{one:"zlecenie",few:"zlecenia",other:"zlece≈Ñ"})+" z danych pobranych <em>"+e.v(t,"timestamp")+"</em>."},"TYPE:orderDocuments.syncFailed":function(){return"Zlecenia reszty dzia≈Ç√≥w: nieudana synchronizacja dokument√≥w"},"TEXT:orderDocuments.syncFailed":function(t){return"Nie uda≈Ço siƒô zaimportowaƒá danych z <em>"+e.v(t,"timestamp")+"</em>: "+e.v(t,"error")},"TYPE:kaizen.orders.deleted":function(){return"Usprawnienia > Zg≈Çoszenia: usuniƒôcie"},"TEXT:kaizen.orders.deleted":function(t){return"Usuniƒôto zg≈Çoszenie usprawnie≈Ñ: <em>"+e.v(t,"model->subject")+"</em>"},"TYPE:kaizen.sections.added":function(){return"Usprawnienia > Dzia≈Çy: dodanie"},"TEXT:kaizen.sections.added":function(t){return"Dodano dzia≈Ç usprawnie≈Ñ: <a href='#kaizenSections/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:kaizen.sections.edited":function(){return"Usprawnienia > Dzia≈Çy: edycja"},"TEXT:kaizen.sections.edited":function(t){return"Zmodyfikowano dzia≈Ç usprawnie≈Ñ: <a href='#kaizenSections/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:kaizen.sections.deleted":function(){return"Usprawnienia > Dzia≈Çy: usuniƒôcie"},"TEXT:kaizen.sections.deleted":function(t){return"Usuniƒôto dzia≈Ç usprawnie≈Ñ: <em>"+e.v(t,"model->name")+"</em>"},"TYPE:kaizen.areas.added":function(){return"Usprawnienia > Miejsca zdarze≈Ñ: dodanie"},"TEXT:kaizen.areas.added":function(t){return"Dodano miejsce zdarze≈Ñ: <a href='#kaizenAreas/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:kaizen.areas.edited":function(){return"Usprawnienia > Miejsca zdarze≈Ñ: edycja"},"TEXT:kaizen.areas.edited":function(t){return"Zmodyfikowano miejsce zdarze≈Ñ: <a href='#kaizenAreas/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:kaizen.areas.deleted":function(){return"Usprawnienia > Miejsca zdarze≈Ñ: usuniƒôcie"},"TEXT:kaizen.areas.deleted":function(t){return"Usuniƒôto miejsce zdarze≈Ñ: <em>"+e.v(t,"model->name")+"</em>"},"TYPE:kaizen.categories.added":function(){return"Usprawnienia > Kategorie: dodanie"},"TEXT:kaizen.categories.added":function(t){return"Dodano kategoriƒô usprawnie≈Ñ: <a href='#kaizenCategories/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:kaizen.categories.edited":function(){return"Usprawnienia > Kategorie: edycja"},"TEXT:kaizen.categories.edited":function(t){return"Zmodyfikowano kategoriƒô usprawnie≈Ñ: <a href='#kaizenCategories/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:kaizen.categories.deleted":function(){return"Usprawnienia > Kategorie: usuniƒôcie"},"TEXT:kaizen.categories.deleted":function(t){return"Usuniƒôto kategoriƒô usprawnie≈Ñ: <em>"+e.v(t,"model->name")+"</em>"},"TYPE:kaizen.causes.added":function(){return"Usprawnienia > Przyczyny: dodanie"},"TEXT:kaizen.causes.added":function(t){return"Dodano przyczynƒô: <a href='#kaizenCauses/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:kaizen.causes.edited":function(){return"Usprawnienia > Przyczyny: edycja"},"TEXT:kaizen.causes.edited":function(t){return"Zmodyfikowano przyczynƒô: <a href='#kaizenCauses/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:kaizen.causes.deleted":function(){return"Usprawnienia > Przyczyny: usuniƒôcie"},"TEXT:kaizen.causes.deleted":function(t){return"Usuniƒôto przyczynƒô: <em>"+e.v(t,"model->name")+"</em>"},"TYPE:kaizen.risks.added":function(){return"Usprawnienia > Rodzaje ryzyka: dodanie"},"TEXT:kaizen.risks.added":function(t){return"Dodano rodzaj ryzyka: <a href='#kaizenRisks/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:kaizen.risks.edited":function(){return"Usprawnienia > Rodzaje ryzyka: edycja"},"TEXT:kaizen.risks.edited":function(t){return"Zmodyfikowano rodzaj ryzyka: <a href='#kaizenRisks/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->name")+"</a>"},"TYPE:kaizen.risks.deleted":function(){return"Usprawnienia > Rodzaje ryzyka: usuniƒôcie"},"TEXT:kaizen.risks.deleted":function(t){return"Usuniƒôto rodzaj ryzyka: <em>"+e.v(t,"model->name")+"</em>"},"TYPE:opinionSurveys.surveys.added":function(){return"Badanie Opinia > Badania: dodanie"},"TEXT:opinionSurveys.surveys.added":function(t){return"Dodano badanie: <a href='#opinionSurveys/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->label")+"</a>"},"TYPE:opinionSurveys.surveys.edited":function(){return"Badanie Opinia > Badania: edycja"},"TEXT:opinionSurveys.surveys.edited":function(t){return"Zmodyfikowano badanie: <a href='#opinionSurveys/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->label")+"</a>"},"TYPE:opinionSurveys.surveys.deleted":function(){return"Badanie Opinia > Badania: usuniƒôcie"},"TEXT:opinionSurveys.surveys.deleted":function(t){return"Usuniƒôto badanie: <em>"+e.v(t,"model->label")+"</em>"},"TYPE:opinionSurveys.employers.added":function(){return"Badanie Opinia > Pracodawcy: dodanie"},"TEXT:opinionSurveys.employers.added":function(t){return"Dodano pracodawcƒô: <a href='#opinionSurveyEmployers/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->full")+"</a>"},"TYPE:opinionSurveys.employers.edited":function(){return"Badanie Opinia > Pracodawcy: edycja"},"TEXT:opinionSurveys.employers.edited":function(t){return"Zmodyfikowano pracodawcƒô: <a href='#opinionSurveyEmployers/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->full")+"</a>"},"TYPE:opinionSurveys.employers.deleted":function(){return"Badanie Opinia > Pracodawcy: usuniƒôcie"},"TEXT:opinionSurveys.employers.deleted":function(t){return"Usuniƒôto pracodawcƒô: <em>"+e.v(t,"model->full")+"</em>"},"TYPE:opinionSurveys.divisions.added":function(){return"Badanie Opinia > Wydzia≈Çy: dodanie"},"TEXT:opinionSurveys.divisions.added":function(t){return"Dodano wydzia≈Ç: <a href='#opinionSurveyDivisions/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->full")+"</a>"},"TYPE:opinionSurveys.divisions.edited":function(){return"Badanie Opinia > Wydzia≈Çy: edycja"},"TEXT:opinionSurveys.divisions.edited":function(t){return"Zmodyfikowano wydzia≈Ç: <a href='#opinionSurveyDivisions/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->full")+"</a>"},"TYPE:opinionSurveys.divisions.deleted":function(){return"Badanie Opinia > Wydzia≈Çy: usuniƒôcie"},"TEXT:opinionSurveys.divisions.deleted":function(t){return"Usuniƒôto wydzia≈Ç: <em>"+e.v(t,"model->full")+"</em>"},"TYPE:opinionSurveys.questions.added":function(){return"Badanie Opinia > Pytania: dodanie"},"TEXT:opinionSurveys.questions.added":function(t){return"Dodano pytanie: <a href='#opinionSurveyQuestions/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->short")+"</a>"},"TYPE:opinionSurveys.questions.edited":function(){return"Badanie Opinia > Pytania: edycja"},"TEXT:opinionSurveys.questions.edited":function(t){return"Zmodyfikowano pytanie: <a href='#opinionSurveyQuestions/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->short")+"</a>"},"TYPE:opinionSurveys.questions.deleted":function(){return"Badanie Opinia > Pytania: usuniƒôcie"},"TEXT:opinionSurveys.questions.deleted":function(t){return"Usuniƒôto pytanie: <em>"+e.v(t,"model->full")+"</em>"},"TYPE:opinionSurveys.responses.edited":function(){return"Badanie Opinia > Odpowiedzi: edycja"},"TEXT:opinionSurveys.responses.edited":function(t){return"Zmodyfikowano odpowied≈∫: <a href='#opinionSurveyQuestions/"+e.v(t,"model->_id")+"'>"+e.v(t,"model->_id")+"</a>"},"TYPE:opinionSurveys.responses.deleted":function(){return"Badanie Opinia > Odpowiedzi: usuniƒôcie"},"TEXT:opinionSurveys.responses.deleted":function(t){return"Usuniƒôto odpowied≈∫: <em>"+e.v(t,"model->_id")+"</em>"},"TYPE:opinionSurveys.actions.deleted":function(){return"Badanie Opinia > Akcje naprawcze: usuniƒôcie"},"TEXT:opinionSurveys.actions.deleted":function(t){return"Usuniƒôto akcjƒô naprawczƒÖ: <em>"+e.v(t,"model->rid")+"</em>"}}}),define("app/events/routes",["../router","../viewport","../user","i18n!app/nls/events"],function(t,e,n){"use strict";t.map("/events",n.auth("EVENTS:VIEW"),function(t){e.loadPage("app/events/pages/EventListPage",function(e){return new e({rql:t.rql})})})}),define("app/emptyOrders/EmptyOrder",["app/time","../core/Model"],function(t,e){"use strict";return e.extend({urlRoot:"/emptyOrders",clientUrlRoot:"#emptyOrders",topicPrefix:"emptyOrders",privilegePrefix:"ORDERS",nlsDomain:"emptyOrders",labelAttribute:"_id",defaults:{nc12:null,mrp:null,startDate:null,finishDate:null,statuses:null,createdAt:null},toJSON:function(n){n||(n={});var r=e.prototype.toJSON.call(this);return r.startDate&&(r.startDateText=t.format(r.startDate,n.startFinishDateFormat||"LL")),r.finishDate&&(r.finishDateText=t.format(r.finishDate,n.startFinishDateFormat||"LL")),r.createdAt&&(r.createdAtText=t.format(r.createdAt,"LLLL")),r}})}),define("app/emptyOrders/EmptyOrderCollection",["../time","../core/Collection","./EmptyOrder"],function(t,e,n){"use strict";return e.extend({model:n,rqlQuery:function(e){var n=t.getMoment().hours(0).minutes(0).seconds(0).milliseconds(0);return e.Query.fromObject({fields:{nc12:1,mrp:1,startDate:1,finishDate:1},sort:{startDate:-1,finishDate:-1},limit:15,selector:{name:"and",args:[{name:"ge",args:["startDate",n.valueOf()]},{name:"le",args:["startDate",n.valueOf()]}]}})}})}),define("app/emptyOrders/views/EmptyOrderListView",["app/i18n","app/core/views/ListView"],function(t,e){"use strict";return e.extend({remoteTopics:{"emptyOrders.synced":"refreshCollection"},columns:[{id:"_id",className:"is-min"},{id:"nc12",className:"is-min"},{id:"mrp",className:"is-min"},{id:"startDateText",label:t.bound("emptyOrders","PROPERTY:startDate"),className:"is-min"},{id:"finishDateText",label:t.bound("emptyOrders","PROPERTY:finishDate")}],serializeActions:function(){return[]}})}),define("app/core/util/buttonGroup",[],function(){"use strict";return{toggle:function(t){t.find("input:checked").parent().addClass("active")},getValue:function(t){var e=t.find("input");return e.length?"radio"===e[0].type||1===e.length?e.filter(":checked").val():e.filter(":checked").map(function(){return this.value}).get():null}}}),define("app/core/templates/filterLimit",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="form-group">\n  <label for="'),__output.push(idPrefix),__output.push('-limit">'),__output.push(t("core","filter:limit")),__output.push('</label>\n  <input id="'),__output.push(idPrefix),__output.push('-limit" class="form-control" name="limit" type="number" min="'),__output.push(min),__output.push('" max="'),__output.push(max),__output.push('" step="1">\n</div>\n');return __output.join("")}}),define("app/core/views/FilterView",["underscore","jquery","js2form","h5.rql/specialTerms","app/i18n","app/core/View","app/core/util/buttonGroup","app/core/templates/filterLimit","select2"],function(t,e,n,r,i,o,s,a){"use strict";return o.extend({minLimit:5,maxLimit:100,termToForm:{},defaultFormData:{},formData:null,events:{submit:function(){return this.changeFilter(),!1},"click .filter-toggle":"toggle"},collapsed:!1,serialize:function(){var t=this;return{idPrefix:this.idPrefix,renderLimit:function(){return a({idPrefix:t.idPrefix,min:t.minLimit,max:t.maxLimit})}}},toggleButtonGroup:function(t){return s.toggle(this.$id(t))},getButtonGroupValue:function(t){return s.getValue(this.$id(t))},afterRender:function(){this.formData=this.serializeQueryToForm(),n(this.el,this.formData),this.$toggleFilter=e('<button class="btn btn-default btn-block filter-toggle" type="button"></button>').append('<i class="fa"></i>').append("<span></span>"),this.$el.append(this.$toggleFilter),this.toggle()},toggle:function(){window.innerWidth<768&&(this.collapsed=!this.collapsed,this.$el.toggleClass("is-collapsed",this.collapsed)),this.$toggleFilter.find("span").text(i("core","filter:"+(this.collapsed?"show":"hide"))),this.$toggleFilter.find(".fa").removeClass("fa-caret-up fa-caret-down").addClass("fa-caret-"+(this.collapsed?"down":"up"))},serializeQueryToForm:function(){var e=this.model.rqlQuery,n=t.extend({},t.result(this,"defaultFormData"),{limit:e.limit<5?5:e.limit>100?100:e.limit});return e.selector.args.forEach(function(t){r[t.name]||this.serializeTermToForm(t,n)},this),n},serializeTermToForm:function(t,e){var n="string"==typeof t.args[0]?t.args[0]:null,r=this.termToForm[n];r&&("string"==typeof r&&(r=this.termToForm[r]),"function"==typeof r&&r.call(this,n,t,e))},changeFilter:function(){var t=this.model.rqlQuery,e=[];this.copyPopulateTerms(e),this.serializeFormToQuery(e,t),t.selector={name:"and",args:e},t.skip=0,t.limit=Math.min(Math.max(parseInt(this.$id("limit").val(),10)||15,this.minLimit),this.maxLimit),this.trigger("filterChanged",t)},copyPopulateTerms:function(t){this.model.rqlQuery.selector.args.forEach(function(e){"populate"===e.name&&t.push(e)})},serializeFormToQuery:function(){},serializeRegexTerm:function(t,e,n,r){var i=this.$id(e.replace(/\./g,"-")),o=i.val().trim();"-"!==o&&null!==r&&(o=o.replace(void 0===r?/[^0-9]/g:r,"")),i.val(o),"-"===o&&(o=null),null===o||o.length===n?t.push({name:"eq",args:[e,o]}):o.length>0&&t.push({name:"regex",args:[e,o]})}})}),define("app/core/util/fixTimeRange",["underscore","moment","app/time"],function(t,e,n){"use strict";function r(t,r,i){var o;if(t.hasClass("form-group-datetime")){var s=t.find("input[type=date]"),a=t.find("input[type=time]"),u=s.val().trim(),c=a.val().trim();0===c.length&&(c=r),o=(i?e.utc:n.getMoment)(u+" "+c,"YYYY-MM-DD HH:mm:ss")}else o=(i?e.utc:n.getMoment)(t.val(),"YYYY-MM-DD HH:mm:ss");var l=o.isValid();if(t.hasClass("form-group-datetime"))t.find("input[type=date]").val(l?o.format("YYYY-MM-DD"):""),t.find("input[type=time]").val(l?o.format("HH:mm"):"");else if(l){var p="";switch(t.attr("type")){case"datetime-local":case"datetime":p=o.toISOString();break;case"date":p=o.format("YYYY-MM-DD");break;case"time":p=o.format("HH:mm");break;default:p=o.format("YYYY-MM-DD HH:mm")}t.val(p)}else t.val("");return o}var i=document.createElement("input");i.setAttribute("type","datetime-local"),i="text"!==i.type;var o={};return o.fromView=function(e,n){n=t.defaults(n||{},{fromId:"from",toId:"to",defaultTime:"00:00",utc:!1});var i={from:null,to:null},o=r(e.$id(n.fromId),n.defaultTime,n.utc),s=r(e.$id(n.toId),n.defaultTime,n.utc);return o.isValid()&&(i.from=o.valueOf()),s.isValid()&&(i.to=s.valueOf()),i},o.toFormData=function(r,o,s,a){if("select"!==o.name&&"sort"!==o.name){a=t.defaults(a||{},{utc:!1});var u="ge"===o.name?"from":"to",c=(a.utc?e.utc:n.getMoment)(o.args[1]);"date+time"===s?(r[u+"-date"]=c.format("YYYY-MM-DD"),r[u+"-time"]=c.format("HH:mm")):r[u]="datetime"===s?i?c.toISOString():c.format("YYYY-MM-DD HH:mm:ss"):c.format("time"===s?"HH:mm:ss":"YYYY-MM-DD")}},o}),define("app/emptyOrders/templates/filter",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form id="'),__output.push(idPrefix),__output.push('-form" class="well filter-form">\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-_id">'),__output.push(t("emptyOrders","PROPERTY:_id")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-_id" class="form-control orders-filter-_id" name="_id" type="text" minlength="4" maxlength="10" placeholder="'),__output.push(t("emptyOrders","filter:placeholder:_id")),__output.push('">\n  </div>\n  <div class="form-group form-group-dateRange">\n    <div>\n      <label class="radio-inline">\n        <input name="date" type="radio" value="startDate">\n        '),__output.push(t("emptyOrders","PROPERTY:startDate")),__output.push('\n      </label><label class="radio-inline">\n        <input name="date" type="radio" value="finishDate">\n        '),__output.push(t("emptyOrders","PROPERTY:finishDate")),__output.push('\n      </label>\n    </div>\n    <div>\n      <label for="'),__output.push(idPrefix),__output.push('-from">'),__output.push(t("core","filter:date:from")),__output.push('</label>\n      <input id="'),__output.push(idPrefix),__output.push('-from" class="form-control" name="from" type="date" placeholder="YYYY-MM-DD">\n      <label for="'),__output.push(idPrefix),__output.push('-to" class="control-label">'),__output.push(t("core","filter:date:to")),__output.push('</label>\n      <input id="'),__output.push(idPrefix),__output.push('-to" class="form-control" name="to" type="date" placeholder="YYYY-MM-DD">\n    </div>\n  </div>\n  '),__output.push(renderLimit()),__output.push('\n  <div class="form-group filter-actions">\n    <button type="submit" class="btn btn-default"><i class="fa fa-filter"></i><span>'),__output.push(t("emptyOrders","filter:submit")),__output.push("</span></button>\n  </div>\n</form>");return __output.join("")}}),define("app/emptyOrders/views/EmptyOrderFilterView",["underscore","app/core/views/FilterView","app/core/util/fixTimeRange","app/emptyOrders/templates/filter"],function(t,e,n,r){"use strict";return e.extend({template:r,events:t.extend({},e.prototype.events,{"change #-from":function(t){var e=this.$id("to");"true"!==e.attr("data-changed")&&e.val(t.target.value)},"change #-to":function(t){t.target.setAttribute("data-changed","true")}}),defaultFormData:{_id:"",date:"startDate",from:"",to:""},termToForm:{startDate:function(t,e,r){r.date=t,n.toFormData(r,e,"date")},_id:function(t,e,n){var r=e.args[1];n[t]="string"==typeof r?r.replace(/[^0-9]/g,""):"-"},finishDate:"startDate"},serializeFormToQuery:function(t){var e=n.fromView(this),r=this.$("[name=date]:checked").val();this.serializeRegexTerm(t,"_id",9),e.from&&t.push({name:"ge",args:[r,e.from]}),e.to&&t.push({name:"le",args:[r,e.to]})}})}),define("app/core/templates/listPage",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div>\n  <div class="filter-container"></div>\n  <div class="list-container"></div>\n</div>\n');return __output.join("")}}),define("app/emptyOrders/pages/EmptyOrderListPage",["app/i18n","app/core/util/bindLoadingMessage","app/core/View","../EmptyOrderCollection","../views/EmptyOrderListView","../views/EmptyOrderFilterView","app/core/templates/listPage"],function(t,e,n,r,i,o,s){"use strict";return n.extend({template:s,layoutName:"page",pageId:"emptyOrderList",breadcrumbs:[t.bound("emptyOrders","BREADCRUMBS:browse")],actions:[{className:"emptyOrders-pageAction-print",label:t.bound("emptyOrders","PAGE_ACTION:print"),icon:"print",href:"#emptyOrders;print",privileges:"ORDERS:VIEW"}],initialize:function(){this.defineModels(),this.defineViews(),this.setView(".filter-container",this.filterView),this.setView(".list-container",this.listView)},destroy:function(){this.layout=null},setUpLayout:function(t){this.layout=t},defineModels:function(){this.collection=e(new r(null,{rqlQuery:this.options.rql}),this)},defineViews:function(){this.filterView=new o({model:{rqlQuery:this.collection.rqlQuery}}),this.listView=new i({collection:this.collection}),this.listenTo(this.filterView,"filterChanged",this.refreshList)
},load:function(t){return t(this.collection.fetch({reset:!0}))},refreshList:function(t){this.collection.rqlQuery=t,this.listView.refreshCollectionNow();var e=t.toString();this.broker.publish("router.navigate",{url:this.collection.genClientUrl()+"?"+e,trigger:!1,replace:!0}),this.layout&&(this.actions[0].href="#emptyOrders;print?"+e,this.layout.setActions(this.actions,this))}})}),define("app/core/templates/printableList",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<table class="table table-bordered table-condensed '),__output.push(className),__output.push('">\n  <thead>\n    <tr>\n      '),columns.forEach(function(t){__output.push("\n      <th>"),__output.push(t.label),__output.push("</th>\n      ")}),__output.push("\n    </tr>\n  </thead>\n  <tbody>\n    "),rows.length||(__output.push('\n    <tr>\n      <td colspan="'),__output.push(columns.length+1),__output.push('">'),__output.push(t("core","LIST:NO_DATA")),__output.push("</td>\n    </tr>\n    ")),__output.push("\n    "),rows.forEach(function(e){__output.push('\n    <tr class="list-item '),__output.push(e.className?e.className:""),__output.push('">\n      '),columns.forEach(function(n){__output.push("\n      <td>\n        "),null==e[n.id]?(__output.push("\n        <em>"),__output.push(t("core","LIST:NO_DATA:cell")),__output.push("</em>\n        ")):(__output.push("\n        "),__output.push(e[n.id]),__output.push("\n        ")),__output.push("\n      </td>\n      ")}),__output.push("\n    </tr>\n    ")}),__output.push("\n  </tbody>\n</table>\n");return __output.join("")}}),define("app/core/views/PrintableListView",["app/i18n","app/user","../View","./ActionFormView","./PaginationView","app/core/templates/printableList"],function(t,e,n,r,i,o){"use strict";return n.extend({template:o,serialize:function(){return{className:this.className||"",columns:this.serializeColumns(),rows:this.serializeRows()}},serializeColumns:function(){var e,n=this.collection.getNlsDomain();return e=Array.isArray(this.options.columns)?this.options.columns:Array.isArray(this.columns)?this.columns:[],e.map(function(e){return{id:e,label:t(n,"PROPERTY:"+e)}})},serializeRows:function(){return this.collection.toJSON()},afterRender:function(){this.listenToOnce(this.collection,"reset",this.render)},fitToPrintablePage:function(t){var e=this.$("table"),n=e.find("thead").outerHeight(),r=[[]],i=n,o=this;this.$("tbody > tr").each(function(){var e=o.$(this),s=e.height();i+s>t&&(i=n,r[r.length-1].forEach(function(t){t.detach()}),r.push([])),i+=s,r[r.length-1].push(e)}),e.find("tbody").empty();var s=r.map(function(t){var n=e.clone(),r=n.find("tbody");return t.forEach(function(t){r.append(t.detach())}),n});return e.remove(),s}})}),define("app/emptyOrders/views/EmptyOrderPrintableListView",["app/i18n","app/core/views/PrintableListView"],function(t,e){"use strict";return e.extend({serializeColumns:function(){return[{id:"_id",label:t("emptyOrders","PROPERTY:_id")},{id:"nc12",label:t("emptyOrders","PROPERTY:nc12")},{id:"mrp",label:t("emptyOrders","PROPERTY:mrp")},{id:"startDateText",label:t("emptyOrders","PROPERTY:startDate")},{id:"finishDateText",label:t("emptyOrders","PROPERTY:finishDate")}]},serializeRows:function(){return this.collection.toJSON({startFinishDateFormat:"YYYY-MM-DD"})}})}),define("app/emptyOrders/pages/EmptyOrderPrintableListPage",["underscore","app/time","app/i18n","app/core/util/bindLoadingMessage","app/core/View","../EmptyOrderCollection","../views/EmptyOrderPrintableListView"],function(t,e,n,r,i,o,s){"use strict";return i.extend({layoutName:"print",pageId:"emptyOrderPrintableList",hdLeft:function(){var r=t.find(this.collection.rqlQuery.selector.args,function(t){return"eq"===t.name&&("startDate"===t.args[0]||"finishDate"===t.args[0])});return r?n("emptyOrders","PRINT_PAGE:HD:LEFT:"+r.args[0],{date:e.format(r.args[1],"LL")}):n("emptyOrders","PRINT_PAGE:HD:LEFT:all")},breadcrumbs:[n.bound("emptyOrders","BREADCRUMBS:browse")],initialize:function(){this.collection=r(new o(null,{rqlQuery:this.options.rql}),this),this.collection.rqlQuery.limit=-1,this.view=new s({collection:this.collection})},load:function(t){return t(this.collection.fetch({reset:!0}))}})}),define("app/nls/emptyOrders",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Empty orders"},"MSG:LOADING_FAILURE":function(){return"Failed to load the empty orders :("},"PAGE_ACTION:print":function(){return"Show printable version"},"PRINT_PAGE:HD:LEFT:all":function(){return"All orders without any operations"},"PRINT_PAGE:HD:LEFT:startDate":function(t){return"Orders without any operations starting at "+e.v(t,"date")},"PRINT_PAGE:HD:LEFT:finishDate":function(t){return"Orders without any operations finishing at "+e.v(t,"date")},"PRINT_PAGE:FT:PAGE_NO":function(){return"Page <span class=print-page-no>?</span> of <span class=print-page-count>?</span>"},"PRINT_PAGE:FT:INFO":function(){return"Printout generated at <span class=print-page-date>?</span> by <span class=print-page-user>?</span>."},"PROPERTY:_id":function(){return"Order no"},"PROPERTY:createdAt":function(){return"Created at"},"PROPERTY:nc12":function(){return"12NC"},"PROPERTY:mrp":function(){return"MRP"},"PROPERTY:startDate":function(){return"Start date"},"PROPERTY:finishDate":function(){return"Finish date"},"PROPERTY:statuses":function(){return"Status"},"filter:placeholder:_id":function(){return"Any order"},"filter:submit":function(){return"Filter empty orders"}},pl:!0}}),define("app/nls/pl/emptyOrders",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Puste zlecenia"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie pustych zlece≈Ñ nie powiod≈Ço siƒô :("},"PAGE_ACTION:print":function(){return"Poka≈º wersjƒô do druku"},"PRINT_PAGE:HD:LEFT:all":function(){return"Wszystkie zlecenia bez ≈ºadnych operacji"},"PRINT_PAGE:HD:LEFT:startDate":function(t){return"Zlecenia bez ≈ºadnych operacji rozpoczynajƒÖce siƒô "+e.v(t,"date")},"PRINT_PAGE:HD:LEFT:finishDate":function(t){return"Zlecenia bez ≈ºadnych operacji ko≈ÑczƒÖce siƒô "+e.v(t,"date")},"PRINT_PAGE:FT:PAGE_NO":function(){return"Strona <span class=print-page-no>?</span> z <span class=print-page-count>?</span>"},"PRINT_PAGE:FT:INFO":function(){return"Wydruk wygenerowany <span class=print-page-date>?</span> przez u≈ºytkownika <span class=print-page-user>?</span>."},"PROPERTY:_id":function(){return"Nr zlecenia"},"PROPERTY:createdAt":function(){return"Czas stworzenia"},"PROPERTY:nc12":function(){return"12NC"},"PROPERTY:mrp":function(){return"MRP"},"PROPERTY:startDate":function(){return"Data startu"},"PROPERTY:finishDate":function(){return"Data uko≈Ñczenia"},"PROPERTY:statuses":function(){return"Status"},"filter:placeholder:_id":function(){return"Dowolny nr"},"filter:submit":function(){return"Filtruj puste zlecenia"}}}),define("app/emptyOrders/routes",["../router","../viewport","../user","./pages/EmptyOrderListPage","./pages/EmptyOrderPrintableListPage","i18n!app/nls/emptyOrders"],function(t,e,n,r,i){"use strict";var o=n.auth("ORDERS:VIEW");t.map("/emptyOrders",o,function(t){e.showPage(new r({rql:t.rql}))}),t.map("/emptyOrders;print",o,function(t){e.showPage(new i({rql:t.rql}))})}),define("app/prodFunctions/ProdFunction",["../i18n","../data/companies","../core/Model","app/core/templates/colorLabel"],function(t,e,n,r){"use strict";return n.extend({urlRoot:"/prodFunctions",clientUrlRoot:"#prodFunctions",topicPrefix:"prodFunctions",privilegePrefix:"DICTIONARIES",nlsDomain:"prodFunctions",labelAttribute:"label",defaults:function(){return{label:"",fteMasterPosition:-1,fteLeaderPosition:-1,direct:!1,dirIndirRatio:100,companies:[],color:"#000000"}},serialize:function(){var n=this.toJSON();return n.label||(n.label=n._id),n.dirIndirRatio=n.direct?n.dirIndirRatio.toLocaleString()+" / "+(100-n.dirIndirRatio).toLocaleString():"-",n.direct=t("prodFunctions","direct:"+n.direct),n.companies=(n.companies||[]).map(function(t){var n=e.get(t);return n?n.getLabel():null}).filter(function(t){return!!t}).join("; "),n.companies.length||(n.companies="-"),n.color=r({color:n.color}),-1===n.fteMasterPosition&&(n.fteMasterPosition="-"),-1===n.fteLeaderPosition&&(n.fteLeaderPosition="-"),n}})}),define("app/prodFunctions/ProdFunctionCollection",["../core/Collection","./ProdFunction"],function(t,e){"use strict";return t.extend({model:e,rqlQuery:"sort(label)",comparator:"label"})}),define("app/data/prodFunctions",["app/prodFunctions/ProdFunctionCollection","./createStorage"],function(t,e){"use strict";return e("PROD_FUNCTIONS","prodFunctions",t)}),define("app/mrpControllers/MrpController",["../core/Model","app/data/subdivisions"],function(t,e){"use strict";return t.extend({urlRoot:"/mrpControllers",clientUrlRoot:"#mrpControllers",topicPrefix:"mrpControllers",privilegePrefix:"DICTIONARIES",nlsDomain:"mrpControllers",labelAttribute:"_id",defaults:{subdivision:null,description:null,deactivatedAt:null,replacedBy:null,inout:0},getSubdivision:function(){return e.get(this.get("subdivision"))||null}})}),define("app/mrpControllers/MrpControllerCollection",["../core/Collection","./MrpController"],function(t,e){"use strict";return t.extend({model:e,rqlQuery:"sort(_id)",comparator:"_id"})}),define("app/data/mrpControllers",["app/mrpControllers/MrpControllerCollection","./createStorage"],function(t,e){"use strict";return e("MRP_CONTROLLERS","mrpControllers",t)}),define("app/prodFlows/ProdFlow",["../core/Model","app/data/mrpControllers"],function(t,e){"use strict";return t.extend({urlRoot:"/prodFlows",clientUrlRoot:"#prodFlows",topicPrefix:"prodFlows",privilegePrefix:"DICTIONARIES",nlsDomain:"prodFlows",labelAttribute:"name",defaults:{mrpController:null,name:null,deactivatedAt:null},parse:function(t){return"string"==typeof t.mrpController?t.mrpController=[t.mrpController]:Array.isArray(t.mrpController)||(t.mrpController=[]),t},getSubdivision:function(){var t=this.get("mrpController");if(!Array.isArray(t)||!t.length)return null;var n=e.get(t[0]);return n?n.getSubdivision():null}})}),define("app/prodFlows/ProdFlowCollection",["../core/Collection","./ProdFlow"],function(t,e){"use strict";return t.extend({model:e,rqlQuery:"select(mrpController,name,deactivatedAt)&sort(name)",comparator:"name"})}),define("app/data/prodFlows",["app/prodFlows/ProdFlowCollection","./createStorage"],function(t,e){"use strict";return e("PROD_FLOWS","prodFlows",t)}),define("app/workCenters/WorkCenter",["../core/Model","app/data/mrpControllers","app/data/prodFlows"],function(t,e,n){"use strict";return t.extend({urlRoot:"/workCenters",clientUrlRoot:"#workCenters",topicPrefix:"workCenters",privilegePrefix:"DICTIONARIES",nlsDomain:"workCenters",labelAttribute:"_id",defaults:{mrpController:null,prodFlow:null,description:null,deactivatedAt:null},getSubdivision:function(){var t;if(this.get("mrpController"))t=e.get(this.get("mrpController"));else{var r=n.get(this.get("prodFlow"));r&&(t=e.get((r.get("mrpController")||[])[0]))}return t?t.getSubdivision():null}})}),define("app/workCenters/WorkCenterCollection",["../core/Collection","./WorkCenter"],function(t,e){"use strict";return t.extend({model:e,rqlQuery:"select(mrpController,prodFlow,description,deactivatedAt)&sort(_id)",comparator:"_id"})}),define("app/data/workCenters",["app/workCenters/WorkCenterCollection","./createStorage"],function(t,e){"use strict";return e("WORK_CENTERS","workCenters",t)}),define("app/prodLines/ProdLine",["../core/Model","../data/workCenters"],function(t,e){"use strict";return t.extend({urlRoot:"/prodLines",clientUrlRoot:"#prodLines",topicPrefix:"prodLines",privilegePrefix:"DICTIONARIES",nlsDomain:"prodLines",labelAttribute:"_id",defaults:{workCenter:null,description:null,inventoryNo:null,deactivatedAt:null},getSubdivision:function(){var t=e.get(this.get("workCenter"));return t?t.getSubdivision():null}})}),define("app/prodLines/ProdLineCollection",["../user","../core/Collection","./ProdLine"],function(t,e,n){"use strict";return e.extend({model:n,rqlQuery:"select(workCenter,description,inventoryNo,deactivatedAt)&sort(workCenter,_id)",getForCurrentUser:function(){var e=t.getDivision(),n=t.getSubdivision();return this.filter(function(r){if(t.data["super"]||!e)return!0;var i=r.getSubdivision();if(!i)return!0;if(n)return i.id===n.id;var o=i.get("division");return o?o===e.id:!0})}})}),define("app/data/prodLines",["app/prodLines/ProdLineCollection","./createStorage"],function(t,e){"use strict";return e("PROD_LINES","prodLines",t)}),define("app/data/views/renderOrgUnitPath",["underscore","../divisions","../subdivisions","../mrpControllers","../workCenters","../prodFlows","../prodLines"],function(t,e,n,r,i,o,s){"use strict";return function(a,u,c){if(!a)return null;var l=[];return(a.constructor!==s.model||(l.unshift(a),a=i.get(a.get("workCenter"))))&&(a.constructor!==i.model||(l.unshift(a),a=a.get("prodFlow")?o.get(a.get("prodFlow")):r.get(a.get("mrpController"))))&&(a.constructor!==o.model||(l.unshift(a),a=r.get((a.get("mrpController")||[])[0])))&&(a.constructor!==r.model||(l.unshift(a),a=n.get(a.get("subdivision"))))&&(a.constructor!==n.model||(l.unshift(a),a=e.get(a.get("division"))))?(a.constructor===e.model&&l.unshift(a),c!==!1&&l.pop(),0===l.length?null:l.map(function(e){var n=t.escape(e.getLabel());return u?'<a href="'+e.genClientUrl()+'">'+n+"</a>":n}).join(" \\ ")):null}}),define("app/core/util/getShiftEndDate",["app/time"],function(t){"use strict";return function(e,n){var r=t.getMoment(e);return r.hours(1===n?6:2===n?14:22),r.add(8,"hours").subtract(1,"seconds"),r.toDate()}}),define("app/fte/util/isEditable",["app/core/util/getShiftEndDate","app/data/subdivisions"],function(t,e){"use strict";return function(n,r){if(r.isAllowedTo("PROD_DATA:MANAGE"))return!0;if(!r.isAllowedTo(n.getPrivilegePrefix()+":MANAGE"))return!1;var i=Date.parse(n.get("createdAt")),o=Date.now();if(o>=i+288e5&&o>=t(n.get("date")).getTime())return!1;var s=r.getDivision();if(!s||r.isAllowedTo(n.getPrivilegePrefix()+":ALL"))return!0;var a=e.get(n.get("subdivision"));if(!a)return!1;var u=a.get("division");if(!u||s.id!==u)return!1;var c=r.getSubdivision();return c?c.id===a.id:!0}}),define("app/fte/FteMasterEntry",["underscore","../i18n","../time","../data/subdivisions","../data/prodFunctions","../data/views/renderOrgUnitPath","../core/Model","./util/isEditable"],function(t,e,n,r,i,o,s,a){"use strict";return s.extend({urlRoot:"/fte/master",clientUrlRoot:"#fte/master",topicPrefix:"fte.master",privilegePrefix:"FTE:MASTER",nlsDomain:"fte",defaults:{subdivision:null,date:null,shift:null,flows:null,tasks:null,createdAt:null,creator:null,updatedAt:null,updater:null,absentUsers:null},getLabel:function(){return e(this.nlsDomain,"label",{subdivision:this.getSubdivisionPath(),date:n.format(this.get("date"),"LL"),shift:e("core","SHIFT:"+this.get("shift"))})},getSubdivisionPath:function(){var t=r.get(this.get("subdivision"));return t?o(t,!1,!1):"?"},serializeWithTotals:function(){var t={},r={};this.get("tasks").length&&this.get("tasks")[0].functions.forEach(function(e){var n=i.get(e.id);r[e.id]={prodFunction:n?n.getLabel():e.id,total:0,companies:{}},e.companies.forEach(function(n){r[e.id].companies[n.id]=0,t[n.id]={name:n.name,total:0}})});var o=this.serializeTasks(t,r),s=0;return Object.keys(t).forEach(function(e){s+=t[e].total}),{subdivision:this.getSubdivisionPath(),date:n.format(this.get("date"),"LL"),shift:e("core","SHIFT:"+this.get("shift")),companyCount:Object.keys(t).length,totalByCompany:t,totalByProdFunction:r,total:s,tasks:o,absentUsers:(this.get("absentUsers")||[]).filter(function(t){return!!t})}},serializeTasks:function(t,e){return this.get("tasks").map(function(n){return n.totalByCompany={},n.functions.forEach(function(r){r.companies.forEach(function(i){"number"!=typeof n.totalByCompany[i.id]&&(n.totalByCompany[i.id]=0),n.totalByCompany[i.id]+=i.count,t&&(t[i.id].total+=i.count),e&&(e[r.id].total+=i.count,e[r.id].companies[i.id]+=i.count)})}),n})},isEditable:function(t){return a(this,t)},handleUpdateMessage:function(t,e){"count"===t.type?this.handleCountMessage(t,e):"plan"===t.type?this.handlePlanMessage(t,e):"addAbsentUser"===t.type?this.handleAddAbsentUserMessage(t,e):"removeAbsentUser"===t.type&&this.handleRemoveAbsentUserMessage(t,e)},handleCountMessage:function(t,e){var n=this.get("tasks");if(n){var r=n[t.taskIndex];if(r){var i=r.functions[t.functionIndex];if(i){var o=i.companies[t.companyIndex];o&&(o.count=t.newCount,e||(this.trigger("change:tasks"),this.trigger("change")))}}}},handlePlanMessage:function(e,n){var r=t.find(this.get("tasks"),function(t){return t.id===e.taskId});r&&(r.noPlan=e.newValue,r.noPlan&&r.functions.forEach(function(t){t.companies.forEach(function(t){t.count=0})}),n||(this.trigger("change:tasks"),this.trigger("change")))},handleAddAbsentUserMessage:function(t,e){var n=this.get("absentUsers")||[];n.push(t.user),e||(this.trigger("change:absentUsers"),this.trigger("change"))},handleRemoveAbsentUserMessage:function(t,e){for(var n=this.get("absentUsers")||[],r=-1,i=0,o=n.length;o>i;++i)if(n[i].id===t.userId){r=i;break}-1!==r&&(n.splice(r,1),e||(this.trigger("change:absentUsers"),this.trigger("change")))}})}),define("app/fte/FteLeaderEntry",["underscore","../i18n","../time","../data/subdivisions","../data/prodFunctions","../data/views/renderOrgUnitPath","../core/Model","./util/isEditable"],function(t,e,n,r,i,o,s,a){"use strict";function u(t,e){var n=1-e;return[Math.round(t[0]*n),Math.round(t[1]*n),Math.round(t[2]*n)]}function c(t){return"rgb("+t+")"}var l=[[242,222,222],[217,237,247],[223,240,216],[252,248,227],[238,238,238],[254,229,254]];return s.extend({urlRoot:"/fte/leader",clientUrlRoot:"#fte/leader",topicPrefix:"fte.leader",privilegePrefix:"FTE:LEADER",nlsDomain:"fte",defaults:{subdivision:null,date:null,shift:null,fteDiv:null,tasks:null,createdAt:null,creator:null,updatedAt:null,updater:null},getLabel:function(){return e(this.nlsDomain,"label",{subdivision:this.getSubdivisionPath(),date:n.format(this.get("date"),"LL"),shift:e("core","SHIFT:"+this.get("shift"))})},getSubdivisionPath:function(){var t=r.get(this.get("subdivision"));return t?o(t,!1,!1):"?"},isWithFunctions:function(){var t=this.get("tasks"),e=t[0];return Array.isArray(e.functions)&&e.functions.length>0},isWithDivisions:function(){var t=this.get("fteDiv");return Array.isArray(t)&&t.length>0},serializeWithTotals:function(){return this.isWithFunctions()?this.serializeWithFunctions():this.serializeWithoutFunctions()},serializeWithFunctions:function(){var r={},i={};this.prepareTotalsWithFunctions(r,i);var o=this.serializeTasksWithFunctions(r,i),s=0;return t.forEach(r,function(t){s+=t.total}),{subdivision:this.getSubdivisionPath(),date:n.format(this.get("date"),"LL"),shift:e("core","SHIFT:"+this.get("shift")),divisions:this.get("fteDiv")||[],companyCount:Object.keys(r).length,total:s,totalByCompany:r,totalByProdFunction:i,tasks:o}},prepareTotalsWithFunctions:function(e,n){var r=this.get("tasks");if(this.get("tasks").length){var o={},s=this.get("fteDiv")||[];t.forEach(r[0].functions,function(e){t.forEach(e.companies,function(t){void 0===o[t.id]&&(o[t.id]=Object.keys(o).length)})}),t.forEach(r[0].functions,function(r){var a=i.get(r.id);n[r.id]={prodFunction:a?a.getLabel():r.id,total:0,companies:{}},t.forEach(r.companies,function(i){var a=o[i.id];n[r.id].companies[i.id]={index:a,total:0,divisions:{}},e[i.id]={index:a,name:i.name,total:0,divisions:{}},t.forEach(s,function(t){n[r.id].companies[i.id].divisions[t]=0,e[i.id].divisions[t]=0})})})}},serializeTasksWithFunctions:function(e,n){function r(t,e){d.push(t),t.level=e,t.children=p[t.id]||[],t.hasChildren=t.children.length>0,0===e&&++h,h===l.length&&(h=0),t.backgroundColor=c(u(l[h],.1*e)),t.hasChildren&&(t.children[t.children.length-1].lastChild=!0,t.children.forEach(function(t){r(t,e+1)}))}var i=Object.keys(e),o=this.get("fteDiv")||[],s=[],a={},p={};t.forEach(this.get("tasks"),function(r,u){r.index=u,r.fteDiv=!1,r.totalByCompany={},r.backgroundColor=null,r.level=0,r.last=!1;var c=0===r.childCount;return t.forEach(r.functions,function(s){t.forEach(s.companies,function(a){a.index=i.indexOf(a.id),void 0===r.totalByCompany[a.id]&&(r.totalByCompany[a.id]={index:a.index,total:0,divisions:{}});var u=0,l=r.totalByCompany[a.id].divisions;if(Array.isArray(a.count))r.fteDiv=!0,t.forEach(a.count,function(t){u+=t.value,void 0===l[t.division]&&(l[t.division]=0),l[t.division]+=t.value,c&&(e[a.id].divisions[t.division]+=t.value,n[s.id].companies[a.id].divisions[t.division]+=t.value)});else{u=a.count;var p=a.count/o.length;t.forEach(o,function(t){void 0===l[t]&&(l[t]=0),l[t]+=p,c&&(e[a.id].divisions[t]+=p,n[s.id].companies[a.id].divisions[t]+=p)})}r.totalByCompany[a.id].total+=u,c&&(e[a.id].total+=u,n[s.id].total+=u,n[s.id].companies[a.id].total+=u)})}),a[r.id]=r,r.parent?void(p[r.parent]?p[r.parent].push(r):p[r.parent]=[r]):void s.push(r)});var d=[],h=-1;return s.forEach(function(t){r(t,0)}),d.length&&(d[d.length-1].last=!0),d},serializeWithoutFunctions:function(){var t=this.serializeCompanies();return{subdivision:this.getSubdivisionPath(),date:n.format(this.get("date"),"LL"),shift:e("core","SHIFT:"+this.get("shift")),total:t.reduce(function(t,e){return t+e.total},0),totalByCompany:null,totalByProdFunction:null,companies:t,divisions:this.get("fteDiv")||[],tasks:this.serializeTasksWithoutFunctions()}},serializeCompanies:function(){var e=this.get("tasks");return e.length?t.map(e[0].companies,function(t,n){return t.total=e.reduce(function(t,e){return Array.isArray(e.companies[n].count)?e.companies[n].count.forEach(function(e){t+=e.value}):t+=e.companies[n].count,t},0),t}):[]},serializeTasksWithoutFunctions:function(){return t.map(this.get("tasks"),function(t){return t.total=t.companies.reduce(function(t,e){return Array.isArray(e.count)?e.count.forEach(function(e){t+=e.value}):t+=e.count,t},0),t})},isEditable:function(t){return a(this,t)},handleUpdateMessage:function(t,e){var n=this.get("tasks");if(n){var r=n[t.taskIndex];if(r){if(void 0===t.comment){var i;if(this.isWithFunctions()){var o=r.functions[t.functionIndex];if(!o)return;i=o.companies[t.companyIndex]}else i=r.companies[t.companyIndex];if(!i)return;if("number"==typeof t.divisionIndex){var s=i.count[t.divisionIndex];if(!s)return;s.value=t.newCount}else i.count=t.newCount}else r.comment=t.comment;e||(this.trigger("change:tasks"),this.trigger("change"))}}}})}),define("app/fte/FteMasterEntryCollection",["app/user","../core/Collection","./FteMasterEntry"],function(t,e,n){"use strict";return e.extend({model:n,rqlQuery:function(e){var n,r=t.getDivision();return r&&"prod"===r.get("type")&&(n={name:"and",args:[{name:"eq",args:[t.data.orgUnitType,t.data.orgUnitId]}]}),e.Query.fromObject({fields:{subdivision:1,date:1,shift:1,createdAt:1,creator:1},sort:{date:-1},limit:15,selector:n})}})}),define("app/fte/views/FteLeaderEntryListView",["app/time","app/i18n","app/user","app/data/subdivisions","app/data/views/renderOrgUnitPath","app/core/views/ListView"],function(t,e,n,r,i,o){"use strict";return o.extend({className:"is-clickable",remoteTopics:{"fte.leader.created":"refreshCollection","fte.leader.deleted":"onModelDeleted"},serializeColumns:function(){return[{id:"subdivision",className:"is-min",label:e("core","ORG_UNIT:subdivision")},{id:"date",className:"is-min",label:e(this.collection.getNlsDomain(),"property:date")},{id:"shift",label:e(this.collection.getNlsDomain(),"property:shift")}]},serializeActions:function(){var t=this.collection;return function(r){var i=t.get(r._id),s=[o.actions.viewDetails(i),{icon:"print",label:e("core","LIST:ACTION:print"),href:i.genClientUrl("print")}];return i.isEditable(n)&&s.push(o.actions.edit(i),o.actions["delete"](i)),s}},serializeRows:function(){return this.collection.map(function(n){var r=n.toJSON();return r.subdivision=n.getSubdivisionPath(),r.date=t.format(r.date,"LL"),r.shift=e("core","SHIFT:"+r.shift),r})}})}),define("app/fte/views/FteMasterEntryListView",["./FteLeaderEntryListView"],function(t){"use strict";return t.extend({remoteTopics:{"fte.master.created":"refreshCollection","fte.master.deleted":"onModelDeleted"}})}),define("app/data/views/OrgUnitDropdownsView",["underscore","jquery","app/i18n","app/core/View","app/core/util/idAndLabel","../divisions","../subdivisions","../mrpControllers","../prodFlows","../workCenters","../prodLines"],function(t,e,n,r,i,o,s,a,u,c,l){"use strict";var p={DIVISION:1,SUBDIVISION:2,MRP_CONTROLLER:3,PROD_FLOW:4,WORK_CENTER:5,PROD_LINE:6},d={1:"division",2:"subdivision",3:"mrpController",4:"prodFlow",5:"workCenter",6:"prodLine"},h=function(){return!0};return r.extend({tagName:"div",className:"orgUnitDropdowns",afterRender:function(){0!==this.$el.children().length&&this.$el.empty(),this.options.noGrid!==!0&&this.$el.addClass("row");var t=this.options.orgUnit||p.DIVISION;t>=p.DIVISION&&this.renderDivisionDropdown(),t>=p.SUBDIVISION&&this.renderSubdivisionDropdown(),t>=p.MRP_CONTROLLER&&this.renderMrpControllerDropdown(),t>=p.PROD_FLOW&&this.renderProdFlowDropdown(),t>=p.WORK_CENTER&&this.renderWorkCenterDropdown(),t>=p.PROD_LINE&&this.renderProdLineDropdown()},focus:function(){return this.$id("division").select2("focus"),this},selectValue:function(t,e){var n=!e;switch(e||this.options.orgUnit){case p.DIVISION:this.selectDivision(t,n);break;case p.SUBDIVISION:this.selectSubdivision(t,n);break;case p.MRP_CONTROLLER:this.selectMrpController(t,n);break;case p.PROD_FLOW:this.selectProdFlow(t,n);break;case p.WORK_CENTER:this.selectWorkCenter(t,n);break;case p.PROD_LINE:this.selectProdLine(t,n)}return this},selectDivision:function(t,e){return this.selectModel(t,null,o,"division",e)},selectSubdivision:function(t,e){return this.selectModel(t,"selectDivision",s,"subdivision",e)},selectMrpController:function(t,e){return this.selectModel(t,"selectSubdivision",a,"mrpController",e)},selectProdFlow:function(t,e){return t?t.get("prodFlow")?this.selectModel(t,"selectMrpController",u,"prodFlow",e):t.get("mrpController")?(t=this.selectMrpController(t,e),t&&this.$id("prodFlow").select2("val",null),t):null:null},selectWorkCenter:function(t,e){return this.selectModel(t,"selectProdFlow",c,"workCenter",e)},selectProdLine:function(){throw new Error("TODO")},selectModel:function(t,e,n,r,i){if(!t)return null;var o=t.get(r),s=n.get(Array.isArray(o)?o[0]:o);return null!==e&&(s=this[e](s,i)),s?(this.$id(r).select2("val",o).trigger({type:"change",val:o,selectFirst:i}),t):null},createDropdownElement:function(t,r){var i=this.idPrefix+"-"+t,o=this.options,s=e('<div class="form-group"><label for="'+i+'" class="control-label">'+n("core","ORG_UNIT:"+t)+'</label><input id="'+i+'" name="'+t+'" type="text"></div>');return o.noGrid!==!0&&s.addClass("col-lg-"+Math.floor(12/o.orgUnit)),(o.required===!0||o.required&&o.required[t])&&(s.addClass("has-required-select2"),s.find("label").addClass("is-required"),s.find("input").addClass("is-required").prop("required",!0)),s.appendTo(this.el).find("input").select2({data:r||[],placeholder:" ",allowClear:o.allowClear||o.orgUnit===p.PROD_FLOW,multiple:o.multiple&&t===d[o.orgUnit]})},onChange:function(e,n,r,o){var s=[];null!==o.val&&(s=n.filter(function(e){var n=e.get(r);return Array.isArray(n)?Array.isArray(o.val)?t.intersection(n,o.val).length>0:-1!==n.indexOf(o.val):Array.isArray(o.val)?-1!==o.val.indexOf(n):n===o.val}).map(i));var a={data:s,placeholder:" ",allowClear:!!this.options.allowClear||"mrpController"===r&&this.options.orgUnit===p.PROD_FLOW,multiple:this.options.multiple&&e.attr("name")===d[this.options.orgUnit]};e.select2("val",null),e.select2(a),s.length&&o.selectFirst!==!1&&e.select2("val",s[0].id),e.trigger({type:"change",val:s.length?s[0].id:null})},renderDivisionDropdown:function(){this.createDropdownElement("division",o.filter(this.options.divisionFilter||h).map(i))},renderSubdivisionDropdown:function(){var t=this.createDropdownElement("subdivision");this.$id("division").on("change",this.onChange.bind(this,t,s,"division"))},renderMrpControllerDropdown:function(){var t=this.createDropdownElement("mrpController");this.$id("subdivision").on("change",this.onChange.bind(this,t,a,"subdivision"))},renderProdFlowDropdown:function(){var t=this.createDropdownElement("prodFlow");this.$id("mrpController").on("change",this.onChange.bind(this,t,u,"mrpController"))},renderWorkCenterDropdown:function(){var t=this.createDropdownElement("workCenter");this.$id("prodFlow").on("change",this.onChange.bind(this,t,c,"prodFlow"))},renderProdLineDropdown:function(){var t=this.createDropdownElement("prodLine");this.$id("workCenter").on("change",this.onChange.bind(this,t,l,"prodLine"))}},{ORG_UNIT:p})}),define("app/fte/templates/filter",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="well filter-form">\n  <div class="orgUnitDropdowns-container"></div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-from">'),__output.push(t("core","filter:date:from")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-from" class="form-control" name="from" type="date">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-to">'),__output.push(t("core","filter:date:to")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-to" class="form-control" name="to" type="date">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-shift-0">'),__output.push(t("fte","filter:shift")),__output.push('</label>\n    <div class="filter-radio-group">\n      '),[0,1,2,3].forEach(function(e){__output.push('\n      <label class="radio-inline">\n        <input id="'),__output.push(idPrefix),__output.push("-shift-"),__output.push(e),__output.push('" name="shift" type="radio" value="'),__output.push(e),__output.push('">\n        '),__output.push(t("core","SHIFT:"+e)),__output.push("\n      </label>\n      ")}),__output.push("\n    </div>\n  </div>\n  "),__output.push(renderLimit()),__output.push('\n  <div class="form-group filter-actions">\n    <button type="submit" class="btn btn-default"><i class="fa fa-filter"></i><span>'),__output.push(escape(t("fte","filter:submit"))),__output.push("</span></button>\n  </div>\n</form>\n");return __output.join("")}}),define("app/fte/views/FteEntryFilterView",["underscore","js2form","app/time","app/data/divisions","app/data/subdivisions","app/data/views/OrgUnitDropdownsView","app/core/Model","app/core/views/FilterView","app/fte/templates/filter"],function(t,e,n,r,i,o,s,a,u){"use strict";var c=o.ORG_UNIT;return a.extend({template:u,defaultFormData:{division:"",subdivision:"",from:"",to:"",shift:0},termToForm:{division:function(t,e,n){n[t]=e.args[1],("division"===t?r:i).get(n[t])||(n[t]="")
},date:function(t,e,r){r["ge"===e.name?"from":"to"]=n.format(e.args[1],"YYYY-MM-DD")},shift:function(t,e,n){n.shift=e.args[1]},subdivision:"division"},initialize:function(){this.orgUnitDropdownsView=new o({orgUnit:this.options.divisionOnly?c.DIVISION:c.SUBDIVISION,divisionFilter:this.options.divisionFilter||null,allowClear:!0,noGrid:!0}),this.setView(".orgUnitDropdowns-container",this.orgUnitDropdownsView)},afterRender:function(){a.prototype.afterRender.call(this),this.listenToOnce(this.orgUnitDropdownsView,"afterRender",function(){var t=null,e=null,n=this.formData;""!==n.subdivision?(e=c.SUBDIVISION,t=new s({subdivision:n.subdivision})):""!==n.division&&(e=c.DIVISION,t=new s({division:n.division})),this.orgUnitDropdownsView.selectValue(t,e)})},serializeFormToQuery:function(e){var r=this.orgUnitDropdownsView.$id("division").val(),i=this.orgUnitDropdownsView.$id("subdivision").val(),o=n.getMoment(this.$id("from").val(),"YYYY-MM-DD"),s=n.getMoment(this.$id("to").val(),"YYYY-MM-DD"),a=parseInt(this.$("input[name=shift]:checked").val(),10);t.isEmpty(i)?t.isEmpty(r)||e.push({name:"eq",args:["division",r]}):e.push({name:"eq",args:["subdivision",i]}),o.isValid()&&e.push({name:"ge",args:["date",o.hours(6).valueOf()]}),s.isValid()&&(s.hours(6),s.valueOf()===o.valueOf()&&this.$id("to").val(s.add(1,"days").format("YYYY-MM-DD")),e.push({name:"lt",args:["date",s.valueOf()]})),0!==a&&e.push({name:"eq",args:["shift",a]})},getShiftNoFromMoment:function(t){var e=t.hours();return 6===e?1:14===e?2:22===e?3:0},setHoursByShiftNo:function(t,e){t.hours(1===e?6:2===e?14:3===e?22:0)}})}),define("app/fte/pages/FteMasterEntryListPage",["app/i18n","app/user","app/core/util/bindLoadingMessage","app/core/util/pageActions","app/core/View","../FteMasterEntryCollection","../views/FteMasterEntryListView","../views/FteEntryFilterView","app/core/templates/listPage"],function(t,e,n,r,i,o,s,a,u){"use strict";return i.extend({template:u,layoutName:"page",pageId:"fteMasterEntryList",breadcrumbs:[t.bound("fte","BREADCRUMBS:master:browse")],actions:function(n){return[{label:t.bound("fte","PAGE_ACTION:add"),href:"#fte/master;add",icon:"plus",privileges:function(){return e.isAllowedTo("FTE:MASTER:MANAGE","PROD_DATA:MANAGE")}},r["export"](n,this,this.collection)]},initialize:function(){this.defineModels(),this.defineViews(),this.setView(".filter-container",this.filterView),this.setView(".list-container",this.listView)},defineModels:function(){this.collection=n(new o(null,{rqlQuery:this.options.rql}),this)},defineViews:function(){this.filterView=new a({model:{rqlQuery:this.collection.rqlQuery},divisionFilter:function(t){return"prod"===t.get("type")}}),this.listView=new s({collection:this.collection}),this.listenTo(this.filterView,"filterChanged",this.refreshList)},load:function(t){return t(this.collection.fetch({reset:!0}))},refreshList:function(t){this.collection.rqlQuery=t,this.listView.refreshCollectionNow();var e=t.toString();this.broker.publish("router.navigate",{url:this.collection.genClientUrl()+"?"+e,trigger:!1,replace:!0})}})}),define("app/core/util/getShiftStartInfo",["app/time"],function(t){"use strict";return function(e){var n=t.getMoment(e),r=n.hour(),i=-1;return r>=6&&14>r?(n.hours(6),i=1):r>=14&&22>r?(n.hours(14),i=2):(n.hours(22),6>r&&n.subtract(1,"days"),i=3),{moment:n.minutes(0).seconds(0).milliseconds(0),shift:i}}}),define("app/fte/templates/addForm",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="panel panel-primary fte-addForm">\n  <div class="panel-heading">\n    '),__output.push(t("fte","addForm:panel:title")),__output.push('\n  </div>\n  <div class="panel-body">\n    <div class="form-group orgUnitDropdowns-container"></div>\n    <div class="form-group">\n      <label for="'),__output.push(idPrefix),__output.push('-date" class="control-label is-required">'),__output.push(t("fte","property:date")),__output.push('</label>\n      <input id="'),__output.push(idPrefix),__output.push('-date" class="form-control" type="date" value="'),__output.push(date),__output.push('" max="'),__output.push(date),__output.push('" min="2013-12-01" required>\n    </div>\n    <div class="form-group">\n      <label for="'),__output.push(idPrefix),__output.push('-shift-any" class="control-label is-required">'),__output.push(t("fte","property:shift")),__output.push('</label>\n      <div class="filter-radio-group">\n        '),[1,2,3].forEach(function(e){__output.push('\n        <label class="radio-inline">\n          <input name="shift" type="radio" value="'),__output.push(e),__output.push('" '),__output.push(shift===e?"checked":""),__output.push("> "),__output.push(t("core","SHIFT:"+e)),__output.push("\n        </label>\n        ")}),__output.push('\n      </div>\n    </div>\n    <div class="checkbox">\n      <label class="control-label">\n        <input id="'),__output.push(idPrefix),__output.push('-copy" type="checkbox" name="copy" value="1" checked>\n        '),__output.push(t("fte","addForm:copy")),__output.push('\n      </label>\n    </div>\n  </div>\n  <div class="panel-footer">\n    <button class="btn btn-primary">\n      <i class="fa fa-plus"></i>\n      <span>'),__output.push(escape(t("fte","addForm:submit"))),__output.push("</span>\n    </button>\n  </div>\n</form>\n");return __output.join("")}}),define("app/fte/views/FteEntryAddFormView",["app/i18n","app/viewport","app/user","app/data/divisions","app/data/subdivisions","app/data/views/OrgUnitDropdownsView","app/core/Model","app/core/View","app/core/util/getShiftStartInfo","app/fte/templates/addForm"],function(t,e,n,r,i,o,s,a,u,c){"use strict";var l=o.ORG_UNIT;return a.extend({template:c,events:{submit:"submitForm"},initialize:function(){this.readonlyDivision=!1,this.$submit=null,this.oudView=new o({orgUnit:l.SUBDIVISION,divisionFilter:this.options.divisionFilter,allowClear:!0,noGrid:!0,required:!0}),this.setView(".orgUnitDropdowns-container",this.oudView)},destroy:function(){null!==this.$submit&&(this.$submit.remove(),this.$submit=null)},serialize:function(){var t=u(new Date);return{idPrefix:this.idPrefix,date:t.moment.format("YYYY-MM-DD"),shift:t.shift}},afterRender:function(){var t=this,e=n.getDivision(),r=n.getSubdivision();this.$submit=this.$(".btn-primary").attr("disabled",!0),this.listenToOnce(this.oudView,"afterRender",function(){t.oudView.$id("subdivision").on("change",function(e){t.$submit.attr("disabled",""===e.val||null===e.val)});var i=null,o=null;null!==r?(o=l.SUBDIVISION,i=new s({subdivision:r.id})):null!==e&&(o=l.DIVISION,i=new s({division:e.id})),t.oudView.selectValue(i,o),t.readonlyDivision=!n.isAllowedTo(t.model.getPrivilegePrefix()+":ALL")&&e,t.oudView.$id("division").select2("readonly",t.readonlyDivision),t.oudView.$id(t.readonlyDivision?"subdivision":"division").select2("focus"),t.readonlyDivision&&!t.options.divisionFilter(e)&&t.oudView.$id("subdivision").select2("readonly",!0)})},submitForm:function(n){if(n.preventDefault(),!this.socket.isConnected())return e.msg.show({type:"error",time:5e3,text:t("fte","addForm:msg:offline")});var r=this,i=this.oudView.$id("division"),o=this.oudView.$id("subdivision"),s=this.$submit.find("i").removeClass("fa-edit").addClass("fa-spinner fa-spin");i.select2("readonly",!0),o.select2("readonly",!0),this.$submit.attr("disabled",!0);var a=this.model.getTopicPrefix()+".findOrCreate",u={subdivision:o.select2("val"),date:new Date(this.$id("date").val()+" 00:00:00"),shift:parseInt(this.$("input[name=shift]:checked").val(),10),copy:this.$id("copy").prop("checked")};this.socket.emit(a,u,function(n,a){return a&&r.model.set("_id",a),n?"AUTH"===n.message&&a?r.trigger("uneditable",r.model):(s.removeClass("fa-spinner fa-spin").addClass("fa-edit"),i.select2("readonly",r.readonlyDivision),o.select2("readonly",!1),r.$submit.attr("disabled",!1).focus(),e.msg.show({type:"error",time:5e3,text:t("fte","addForm:msg:failure",{error:n.message})})):void r.trigger("editable",r.model)})}})}),define("app/fte/pages/FteMasterEntryAddFormPage",["app/i18n","app/core/View","../FteMasterEntry","../views/FteEntryAddFormView"],function(t,e,n,r){"use strict";return e.extend({layoutName:"page",pageId:"fteMasterEntryAddForm",breadcrumbs:[{label:t.bound("fte","BREADCRUMBS:master:browse"),href:"#fte/master"},t.bound("fte","BREADCRUMBS:addForm")],initialize:function(){this.view=new r({model:new n,divisionFilter:function(t){return t&&"prod"===t.get("type")}}),this.listenTo(this.view,"editable",function(t){this.broker.publish("router.navigate",{url:t.genClientUrl("edit"),trigger:!0})}),this.listenTo(this.view,"uneditable",function(t){this.broker.publish("router.navigate",{url:t.genClientUrl(),trigger:!0})})}})}),define("app/users/util/setUpUserSelect2",["underscore","h5.rql/index","app/i18n","app/user"],function(t,e,n,r){"use strict";function i(t,e){return t.personellId&&(e+=" ("+t.personellId+")"),e}function o(t,e,n){if(t.id&&t.text)return t;var r=t.lastName&&t.firstName?t.lastName+" "+t.firstName:t.name||t.login||t._id;return{id:t._id,text:(e||i)(t,r,n),user:t}}function s(){return{id:"$SYSTEM",text:n("users","select2:users:system"),user:null}}function a(){var t=r.getRootUserData();return{id:t._id,text:t.name||t.login,user:t}}function u(t,e){e=e.trim();var n=/^[0-9]+$/.test(e)?"personellId":"lastName",r={fields:{},sort:{},limit:20,skip:0,selector:{name:"and",args:[{name:"regex",args:[n,"^"+e,"i"]}]}};return r.sort[n]=1,t.Query.fromObject(r)}function c(r,i){i||(i={});var c=i.rqlQueryProvider?i.rqlQueryProvider:u,l=i.userFilter?i.userFilter:null;r.select2(t.extend({openOnEnter:null,allowClear:!0,minimumInputLength:3,placeholder:n("users","select2:placeholder"),ajax:{cache:!0,quietMillis:300,url:function(t){return"/users?"+c(e,t)},results:function(t,e,n){var r=[s(),a()].filter(function(t){return-1!==t.text.toLowerCase().indexOf(n.term.toLowerCase())}),u=r.concat(t.collection||[]);return l&&(u=u.filter(l)),{results:u.map(function(t){return o(t,i.textFormatter,n)}).sort(function(t,e){return t.text.localeCompare(e.text)})}}}},i));var p=r.val(),d=a();if(p===d.id)r.select2("data",d);else if("$SYSTEM"===p)r.select2("data",s());else if(p&&i.view){var h=i.view.ajax({type:"GET",url:"/users?_id=in=("+p+")"});h.done(function(t){if(t.collection&&t.collection.length){var e=t.collection.map(function(t){return o(t,i.textFormatter)});r.select2("data",i.multiple?e:e[0]),i.onDataLoaded&&i.onDataLoaded()}})}return r}return c.defaultRqlQueryProvider=u,c}),define("app/fte/templates/masterEntry",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div>\n  <div class="well">\n    <div class="fte-property">\n      <span class="fte-property-name">'),__output.push(t("core","ORG_UNIT:subdivision")),__output.push('</span>\n      <span class="fte-property-value">'),__output.push(subdivision),__output.push('</span>\n    </div>\n    <div class="fte-property">\n      <span class="fte-property-name">'),__output.push(t("fte","property:date")),__output.push('</span>\n      <span class="fte-property-value">'),__output.push(date),__output.push('</span>\n    </div>\n    <div class="fte-property">\n      <span class="fte-property-name">'),__output.push(t("fte","property:shift")),__output.push('</span>\n      <span class="fte-property-value">'),__output.push(shift),__output.push('</span>\n    </div>\n  </div>\n  <div class="panel panel-primary">\n    <div class="panel-heading">'),__output.push(t("fte","masterEntry:tasksPanel:title"+(editable?":editable":""))),__output.push("</div>\n    "),editable&&(__output.push('\n    <div class="message message-inline message-info">'),__output.push(t("fte","panel:info")),__output.push("</div>\n    ")),__output.push('\n    <table class="table table-bordered table-condensed table-hover fte-masterEntry">\n      <thead>\n      <tr>\n        <th class="fte-masterEntry-column-task" rowspan="4">'),__output.push(t("fte","masterEntry:column:task")),__output.push('\n        <th class="fte-masterEntry-column-noPlan even" rowspan="4">'),__output.push(t("fte","masterEntry:column:noPlan")),__output.push('\n        <th colspan="'),__output.push(companyCount),__output.push('">'),__output.push(t("fte","masterEntry:column:total")),__output.push("</th>\n        "),Object.keys(totalByProdFunction).forEach(function(t,e){__output.push('\n        <th class="fte-masterEntry-column-prodFunction '),__output.push(e%2?"":"even"),__output.push('" colspan="'),__output.push(Object.keys(totalByProdFunction[t].companies).length),__output.push('" data-column="'),__output.push(e),__output.push('">'),__output.push(totalByProdFunction[t].prodFunction),__output.push("</th>\n        ")}),__output.push('\n      </tr>\n      <tr>\n        <th colspan="'),__output.push(companyCount),__output.push('" class="fte-masterEntry-total">'),__output.push(round(total)),__output.push("\n        "),Object.keys(totalByProdFunction).forEach(function(t,e){__output.push('\n        <th class="fte-masterEntry-total-prodFunction '),__output.push(e%2?"":"even"),__output.push('" colspan="'),__output.push(Object.keys(totalByProdFunction[t].companies).length),__output.push('" class="fte-masterEntry-total-prodFunction" data-column="'),__output.push(e),__output.push('" data-functionId="'),__output.push(t),__output.push('">'),__output.push(round(totalByProdFunction[t].total)),__output.push("\n        ")}),__output.push("\n      </tr>\n      <tr>\n        "),Object.keys(totalByCompany).forEach(function(t){__output.push('\n        <th class="fte-masterEntry-column-company" >'),__output.push(totalByCompany[t].name),__output.push("\n        ")}),__output.push("\n        "),Object.keys(totalByProdFunction).forEach(function(t,e){__output.push("\n        "),Object.keys(totalByProdFunction[t].companies).forEach(function(t,n){__output.push('\n        <th class="fte-masterEntry-column-company '),__output.push(e%2?"":"even"),__output.push('" data-column="'),__output.push(e),__output.push(":"),__output.push(n),__output.push('">'),__output.push(escape(totalByCompany[t].name)),__output.push("\n        ")}),__output.push("\n        ")}),__output.push("\n      </tr>\n      <tr>\n        "),Object.keys(totalByCompany).forEach(function(t){__output.push('\n        <th class="fte-masterEntry-total-company" data-companyId="'),__output.push(t),__output.push('">'),__output.push(round(totalByCompany[t].total)),__output.push("\n        ")}),__output.push("\n        "),Object.keys(totalByProdFunction).forEach(function(t,e){__output.push("\n        "),Object.keys(totalByProdFunction[t].companies).forEach(function(n,r){__output.push('\n        <th class="fte-masterEntry-total-prodFunction-company '),__output.push(e%2?"":"even"),__output.push('" data-functionId="'),__output.push(t),__output.push('" data-companyId="'),__output.push(n),__output.push('" data-column="'),__output.push(e),__output.push(":"),__output.push(r),__output.push('">'),__output.push(round(totalByProdFunction[t].companies[n])),__output.push("\n        ")}),__output.push("\n        ")}),__output.push("\n      </tr>\n      </thead>\n      <tbody>\n      "),tasks.forEach(function(t,e){__output.push('\n      <tr>\n        <td class="fte-masterEntry-cell-task">\n          '),"prodFlow"===t.type?(__output.push("\n          "),__output.push(escape(t.name)),__output.push("\n          ")):(__output.push("\n          <em>"),__output.push(escape(t.name)),__output.push("</em>\n          ")),__output.push('\n        <td class="even '),editable&&__output.push("fte-masterEntry-noPlan-container"),__output.push('">\n          '),editable?(__output.push('\n          <input class="fte-masterEntry-noPlan" type="checkbox" data-taskId="'),__output.push(t.id),__output.push('" data-task="'),__output.push(e),__output.push('" '),__output.push(t.noPlan?"checked":""),__output.push(">\n          ")):(__output.push('\n          <i class="fa fa-'),__output.push(t.noPlan?"check":"times"),__output.push('"></i>\n          ')),__output.push("\n        </td>\n        "),Object.keys(t.totalByCompany).forEach(function(e,n){__output.push('\n        <td class="fte-masterEntry-total-company-task" data-companyId="'),__output.push(e),__output.push('" data-companyIndex="'),__output.push(n),__output.push('">'),__output.push(round(t.totalByCompany[e])),__output.push("</td>\n        ")}),__output.push("\n        "),t.functions.forEach(function(n,r){__output.push("\n        "),n.companies.forEach(function(i,o){__output.push('\n        <td class="'),__output.push(r%2?"":"even"),__output.push('">\n          '),editable?(__output.push('\n          <input\n            class="form-control no-controls fte-masterEntry-count"\n            type="number"\n            min="0"\n            max="9999"\n            value="'),__output.push(i.count),__output.push('"\n            data-value="'),__output.push(i.count),__output.push('"\n            data-task="'),__output.push(e),__output.push('"\n            data-function="'),__output.push(r),__output.push('"\n            data-company="'),__output.push(o),__output.push('"\n            data-functionId="'),__output.push(n.id),__output.push('"\n            data-companyId="'),__output.push(i.id),__output.push('"\n            '),__output.push(t.noPlan?"disabled":""),__output.push(">\n          ")):(__output.push("\n          "),__output.push(round(i.count)),__output.push("\n          ")),__output.push("\n        </td>\n        ")}),__output.push("\n        ")}),__output.push("\n      </tr>\n      ")}),__output.push('\n      </tbody>\n    </table>\n  </div>\n  <div class="panel panel-primary fte-masterEntry-absence">\n    <div class="panel-heading">'),__output.push(t("fte","masterEntry:absencePanel:title"+(editable?":editable":""))),__output.push("</div>\n    "),editable&&__output.push('\n    <div class="fte-masterEntry-absence-userFinder-container">\n      <input class="fte-masterEntry-absence-userFinder" type="text">\n    </div>\n    '),__output.push('\n    <table class="table table-bordered table-condensed table-hover fte-masterEntry-absence">\n      <thead>\n      <tr>\n        <th>'),__output.push(t("users","PROPERTY:personellId")),__output.push("\n        <th>"),__output.push(t("users","PROPERTY:name")),__output.push("\n        "),editable&&(__output.push('\n        <th class="actions">'),__output.push(t("core","LIST:COLUMN:actions")),__output.push("</th>\n        ")),__output.push('\n      </tr>\n      </thead>\n      <tbody class="fte-masterEntry-absence-noEntries">\n      <tr>\n        <td colspan="3">'),__output.push(t("core","LIST:NO_DATA")),__output.push('\n      <tbody class="fte-masterEntry-absence-entries">\n      '),absentUsers.forEach(function(t){__output.push("\n      "),__output.push(renderAbsentUserRow({absentUser:t,editable:editable})),__output.push("\n      ")}),__output.push("\n    </table>\n  </div>\n</div>\n");return __output.join("")}}),define("app/fte/templates/absentUserRow",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push("<tr>\n  <td>"),__output.push(escape(absentUser.personellId)),__output.push("\n  <td>"),__output.push(escape(absentUser.name)),__output.push("\n  "),editable&&(__output.push('\n  <td>\n    <button class="btn btn-danger fte-masterEntry-absence-remove" data-userId="'),__output.push(absentUser.id),__output.push('">\n      <i class="fa fa-times"></i>\n    </button>\n  ')),__output.push("\n");return __output.join("")}}),define("app/fte/util/fractions",[],function(){"use strict";var t="function"==typeof Number.prototype.toLocaleString?"toLocaleString":"toString";return{parse:function(t){var e=parseFloat(t.replace(",",".").replace(/[^0-9\.]+/g,""));return isNaN(e)||0>e?0:e},round:function(e){return(Math.round(1e4*e)/1e4)[t]()}}}),function(t,e){"use strict";function n(n,s){var a=this;a.$el=t(n),a.el=n,a.id=i++,a.$el.bind("destroyed",t.proxy(a.teardown,a)),a.$clonedHeader=null,a.$originalHeader=null,a.isSticky=!1,a.hasBeenSticky=!1,a.leftOffset=null,a.topOffset=null,a.init=function(){a.options=t.extend({},o,s),a.$el.each(function(){var e=t(this);e.css("padding",0),a.$scrollableArea=t(a.options.scrollableArea),a.$originalHeader=t("thead:first",this),a.$clonedHeader=a.$originalHeader.clone(),e.trigger("clonedHeader."+r,[a.$clonedHeader]),a.$clonedHeader.addClass("tableFloatingHeader"),a.$clonedHeader.css("display","none"),a.$originalHeader.addClass("tableFloatingHeaderOriginal"),a.$originalHeader.after(a.$clonedHeader),a.$printStyle=t('<style type="text/css" media="print">.tableFloatingHeader{display:none !important;}.tableFloatingHeaderOriginal{position:static !important;}</style>'),t("head").append(a.$printStyle)}),a.updateWidth(),a.toggleHeaders(),a.bind()},a.destroy=function(){a.$el.unbind("destroyed",a.teardown),a.teardown()},a.teardown=function(){a.isSticky&&a.$originalHeader.css("position","static"),t.removeData(a.el,"plugin_"+r),a.unbind(),a.$clonedHeader.remove(),a.$originalHeader.removeClass("tableFloatingHeaderOriginal"),a.$originalHeader.css("visibility","visible"),a.$printStyle.remove(),a.el=null,a.$el=null},a.bind=function(){a.$scrollableArea.on("scroll."+r,a.toggleHeaders),a.isWindowScrolling()||(t(e).on("scroll."+r+a.id,a.setPositionValues),t(e).on("resize."+r+a.id,a.toggleHeaders)),a.$scrollableArea.on("resize."+r,a.toggleHeaders),a.$scrollableArea.on("resize."+r,a.updateWidth)},a.unbind=function(){a.$scrollableArea.off("."+r,a.toggleHeaders),a.isWindowScrolling()||(t(e).off("."+r+a.id,a.setPositionValues),t(e).off("."+r+a.id,a.toggleHeaders)),a.$scrollableArea.off("."+r,a.updateWidth),a.$el.off("."+r),a.$el.find("*").off("."+r)},a.toggleHeaders=function(){a.$el&&a.$el.each(function(){var e,n=t(this),r=a.isWindowScrolling()?isNaN(a.options.fixedOffset)?a.options.fixedOffset.outerHeight():a.options.fixedOffset:a.$scrollableArea.offset().top+(isNaN(a.options.fixedOffset)?0:a.options.fixedOffset),i=n.offset(),o=a.$scrollableArea.scrollTop()+r,s=a.$scrollableArea.scrollLeft(),u=a.isWindowScrolling()?o>i.top:r>i.top,c=(a.isWindowScrolling()?o:0)<i.top+n.height()-a.$clonedHeader.height()-(a.isWindowScrolling()?0:r);u&&c?(e=i.left-s+a.options.leftOffset,a.$originalHeader.css({position:"fixed","margin-top":0,left:e,"z-index":1}),a.isSticky=!0,a.leftOffset=e,a.topOffset=r,a.$clonedHeader.css("display",""),a.setPositionValues(),a.updateWidth()):a.isSticky&&(a.$originalHeader.css("position","static"),a.$clonedHeader.css("display","none"),a.isSticky=!1,a.resetWidth(t("td,th",a.$clonedHeader),t("td,th",a.$originalHeader)))})},a.isWindowScrolling=function(){return a.$scrollableArea[0]===e},a.setPositionValues=function(){var n=t(e).scrollTop(),r=t(e).scrollLeft();!a.isSticky||0>n||n+t(e).height()>t(document).height()||0>r||r+t(e).width()>t(document).width()||a.$originalHeader.css({top:a.topOffset-(a.isWindowScrolling()?0:n),left:a.leftOffset-(a.isWindowScrolling()?0:r)})},a.updateWidth=function(){if(a.isSticky){a.$originalHeaderCells||(a.$originalHeaderCells=t("th,td",a.$originalHeader)),a.$clonedHeaderCells||(a.$clonedHeaderCells=t("th,td",a.$clonedHeader));var e=a.getWidth(a.$clonedHeaderCells);a.setWidth(e,a.$clonedHeaderCells,a.$originalHeaderCells),a.$originalHeader.css("width",a.$clonedHeader.width())}},a.getWidth=function(e){var n=[];return e.each(function(e){var r,i=t(this);r="border-box"===i.css("box-sizing")?i.outerWidth():i.width(),n[e]=r}),n},a.setWidth=function(t,e,n){e.each(function(e){var r=t[e];n.eq(e).css({"min-width":r,"max-width":r})})},a.resetWidth=function(e,n){e.each(function(e){var r=t(this);n.eq(e).css({"min-width":r.css("min-width"),"max-width":r.css("max-width")})})},a.updateOptions=function(e){a.options=t.extend({},o,e),a.updateWidth(),a.toggleHeaders()},a.init()}var r="stickyTableHeaders",i=0,o={fixedOffset:0,leftOffset:0,scrollableArea:e};t.fn[r]=function(e){return this.each(function(){var i=t.data(this,"plugin_"+r);i?"string"==typeof e?i[e].apply(i):i.updateOptions(e):"destroy"!==e&&t.data(this,"plugin_"+r,new n(this,e))})}}(jQuery,window),define("jquery.stickytableheaders",function(){}),define("app/fte/views/FteMasterEntryEditFormView",["underscore","jquery","app/core/View","app/core/util/onModelDeleted","app/users/util/setUpUserSelect2","app/fte/templates/masterEntry","app/fte/templates/absentUserRow","../util/fractions","jquery.stickytableheaders"],function(t,e,n,r,i,o,s,a){"use strict";return n.extend({template:o,events:{"change .fte-masterEntry-count":"updateCount","keyup .fte-masterEntry-count":"updateCount","change .fte-masterEntry-noPlan":"updatePlan","click .fte-masterEntry-noPlan-container":function(t){t.target.classList.contains("fte-masterEntry-noPlan-container")&&this.$(t.target).find(".fte-masterEntry-noPlan").click()},"click .fte-masterEntry-absence-remove":"removeAbsentUser","focus .fte-masterEntry-count, .fte-masterEntry-noPlan":function(t){var e=t.target,n=e.parentNode.parentNode,r=e.dataset,i=this.cachedColumns;if(this.focused=[e.parentNode,n.children[0]],e.classList.contains("fte-masterEntry-noPlan"))this.focused.push(this.el.querySelector(".fte-masterEntry-column-noPlan"));else{var o=r["function"]+":"+r.company;this.focused.push(i.prodFunctions[r["function"]],i.prodFunctionTotals[r["function"]],i.companies[o],i.companyTotals[o],n.querySelector('.fte-masterEntry-total-company-task[data-companyindex="'+r.company+'"]'))}this.$(this.focused).addClass("is-focused")},"blur .fte-masterEntry-count, .fte-masterEntry-noPlan":function(){this.$(this.focused).removeClass("is-focused")}},remoteTopics:function(){var t={};return t["fte.master.updated."+this.model.id]="onRemoteEdit",t["fte.master.deleted"]="onModelDeleted",t},initialize:function(){this.focused=null,this.cachedColumns={prodFunctions:null,prodFunctionTotals:null,companies:null,companyTotals:null}},destroy:function(){this.$(".fte-masterEntry").stickyTableHeaders("destroy"),this.focused=null,this.cachedColumns=null},beforeRender:function(){this.stopListening(this.model,"change",this.render)},afterRender:function(){this.listenToOnce(this.model,"change",this.render),this.setUpUserFinder(),this.setUpStickyHeaders(),this.cacheColumns(),this.focusFirstEnabledInput()},serialize:function(){return t.extend(this.model.serializeWithTotals(),{editable:!0,renderAbsentUserRow:s,round:a.round})},setUpUserFinder:function(){var t=this,e=this.$(".fte-masterEntry-absence-entries"),n=this.$(".fte-masterEntry-absence-noEntries"),r=i(this.$(".fte-masterEntry-absence-userFinder"),{userFilter:function(t){var n='.fte-masterEntry-absence-remove[data-userId="'+t._id+'"]';return 0===e.find(n).length}});e.children().length?n.hide():e.hide(),r.on("change",function(e){r.select2("val","");var n={type:"addAbsentUser",socketId:t.socket.getId(),_id:t.model.id,user:e.added};t.socket.emit("fte.master.addAbsentUser",n,function(e){e?t.trigger("remoteError",e):t.handleAddAbsentUserChange(n)})})},setUpStickyHeaders:function(){this.$(".fte-masterEntry").stickyTableHeaders({fixedOffset:e(".navbar-fixed-top")})},cacheColumns:function(){function t(t,r){n.find(".fte-masterEntry-"+t).each(function(){e[r][this.dataset.column]=this})}var e={prodFunctions:{},prodFunctionTotals:{},companies:{},companyTotals:{}},n=this.$(".tableFloatingHeaderOriginal");t("column-prodFunction","prodFunctions"),t("total-prodFunction","prodFunctionTotals"),t("column-company","companies"),t("total-prodFunction-company","companyTotals"),this.cachedColumns=e},focusNextInput:function(t){var e=t.closest("td").next("td");if(e.length)return e.find("input").select();var n=t.closest("tr").next();return n.length?void this.focusNextEnabledInput(n):this.focusFirstEnabledInput()},focusFirstEnabledInput:function(){var t=this.el.querySelector(".fte-masterEntry-noPlan:not(:checked)");t&&this.$(t).closest("tr").find(".fte-masterEntry-count").first().select()},focusNextEnabledInput:function(t){return t.length?t.find(".fte-masterEntry-noPlan:checked").length?this.focusNextEnabledInput(t.next()):void t.find(".fte-masterEntry-count").first().select():this.focusFirstEnabledInput()},toggleCountsInRow:function(t,e){var n=this.$(this.el.ownerDocument.activeElement).closest("tr"),r=this.$(".fte-masterEntry > tbody > :last-child"),i=t.closest("tr");return i.find(".fte-masterEntry-count").attr("disabled",t[0].checked),t[0].checked||e||i.find(".fte-masterEntry-count").first().select(),this.recountAll(i),e?i[0]===n[0]?i[0]===r[0]?this.focusFirstEnabledInput():this.focusNextEnabledInput(i):void 0:i[0]===r[0]?this.focusFirstEnabledInput():this.focusNextEnabledInput(i)},updatePlan:function(t){var e={type:"plan",socketId:this.socket.getId(),_id:this.model.id,taskId:t.target.getAttribute("data-taskId"),taskIndex:parseInt(t.target.getAttribute("data-task"),10),newValue:t.target.checked},n=this.$(t.target),r=this;this.toggleCountsInRow(n),this.socket.emit("fte.master.updatePlan",e,function(e){e&&(t.target.checked=!t.target.checked,r.toggleCountsInRow(n),r.trigger("remoteError",e))})},updateCount:function(t){if(13===t.which)return this.focusNextInput(this.$(t.target));var e=a.parse(t.target.getAttribute("data-value")),n=a.parse(t.target.value);if(e!==n){var r=t.target.getAttribute("data-task")+":"+t.target.getAttribute("data-function")+":"+t.target.getAttribute("data-company");this.timers[r]&&clearTimeout(this.timers[r]),this.timers[r]=setTimeout(this.doUpdateCount.bind(this),250,t.target,r,e,n)}},doUpdateCount:function(t,e,n,r){delete this.timers[e];var i=t.getAttribute("data-remote"),o={type:"count",socketId:this.socket.getId(),_id:this.model.id,newCount:r,taskIndex:parseInt(t.getAttribute("data-task"),10),functionIndex:parseInt(t.getAttribute("data-function"),10),companyIndex:parseInt(t.getAttribute("data-company"),10)};t.setAttribute("data-value",o.newCount),t.setAttribute("data-remote","false");var s=this;this.socket.emit("fte.master.updateCount",o,function(e){e&&("true"!==t.getAttribute("data-remote")&&(t.value=n,t.setAttribute("data-value",n),t.setAttribute("data-remote",i),s.recount(t)),s.trigger("remoteError",e))}),this.recount(t)},recount:function(t){var e,n,r,i=this.$(t).closest("tr"),o=this.$(".tableFloatingHeaderOriginal"),s=t.getAttribute("data-functionId"),u=t.getAttribute("data-companyId");r=0,e='.fte-masterEntry-count[data-companyId="'+u+'"]',n='.fte-masterEntry-total-company-task[data-companyId="'+u+'"]',i.find(e).each(function(){r+=a.parse(this.value)}),i.find(n).text(a.round(r)),r=0,e=".fte-masterEntry-count[data-functionId="+s+"][data-companyId="+u+"]",n=".fte-masterEntry-total-prodFunction-company[data-functionId="+s+"][data-companyId="+u+"]",this.$(e).each(function(){this.disabled||(r+=a.parse(this.value))}),o.find(n).text(a.round(r)),r=0,e='.fte-masterEntry-total-prodFunction-company[data-companyId="'+u+'"]',n='.fte-masterEntry-total-company[data-companyId="'+u+'"]',o.find(e).each(function(){r+=a.parse(this.innerHTML)}),o.find(n).text(a.round(r)),r=0,e='.fte-masterEntry-total-prodFunction-company[data-functionId="'+s+'"]',n='.fte-masterEntry-total-prodFunction[data-functionId="'+s+'"]',o.find(e).each(function(){r+=a.parse(this.innerHTML)}),o.find(n).text(a.round(r)),r=0,e=".fte-masterEntry-total-company",n=".fte-masterEntry-total",o.find(e).each(function(){r+=a.parse(this.innerHTML)}),o.find(n).text(a.round(r))},recountAll:function(t){var e=this;t.find(".fte-masterEntry-count").each(function(){this.value="0",this.setAttribute("data-value","0"),e.recount(this)
})},removeAbsentUser:function(t){var e=this.$(t.target).closest("button").attr("disabled",!0),n={type:"removeAbsentUser",socketId:this.socket.getId(),_id:this.model.id,userId:e.attr("data-userId")},r=this;this.socket.emit("fte.master.removeAbsentUser",n,function(t){t?(e.attr("disabled",!1),r.trigger("remoteError",t)):r.handleRemoveAbsentUserChange(n)})},onRemoteEdit:function(t){if(t.socketId!==this.socket.getId())switch(this.model.handleUpdateMessage(t,!0),t.type){case"plan":return this.handlePlanChange(t);case"count":return this.handleCountChange(t);case"addAbsentUser":return this.handleAddAbsentUserChange(t);case"removeAbsentUser":return this.handleRemoveAbsentUserChange(t)}},handleAddAbsentUserChange:function(t){var n=t.user;this.$('.fte-masterEntry-absence-remove[data-userId="'+n.id+'"]').length||(e(s({absentUser:n,editable:!0})).hide().appendTo(this.$(".fte-masterEntry-absence-entries").show()).fadeIn("fast"),this.$(".fte-masterEntry-absence-noEntries").hide())},handleRemoveAbsentUserChange:function(t){var n=this.$('.fte-masterEntry-absence-remove[data-userId="'+t.userId+'"]');if(n.length){var r=this;n.closest("tr").fadeOut(function(){e(this).remove();var t=r.$(".fte-masterEntry-absence-entries");t.length||(t.hide(),r.$(".fte-masterEntry-absence-noEntries").show())})}},handlePlanChange:function(t){var e='.fte-masterEntry-noPlan[data-task="'+t.taskIndex+'"]',n=this.$(e);n.length&&(n.prop("checked",t.newValue),this.toggleCountsInRow(n,!0))},handleCountChange:function(t){var e=".fte-masterEntry-count[data-task="+t.taskIndex+"][data-function="+t.functionIndex+"][data-company="+t.companyIndex+"]",n=this.$(e);n.length&&(n.val(t.newCount),n.attr({"data-value":t.newCount,"data-remote":"true"}),this.recount(n[0],t.taskIndex,t.companyIndex))},onModelDeleted:function(t){r(this.broker,this.model,t)}})}),define("app/fte/pages/FteMasterEntryEditFormPage",["app/i18n","app/core/util/bindLoadingMessage","app/core/View","../FteMasterEntry","../views/FteMasterEntryEditFormView"],function(t,e,n,r,i){"use strict";return n.extend({layoutName:"page",pageId:"fteMasterEntryForm",breadcrumbs:function(){return[{label:t.bound("fte","BREADCRUMBS:master:browse"),href:this.model.genClientUrl("base")},{label:t.bound("fte","BREADCRUMBS:details"),href:this.model.genClientUrl()},t.bound("fte","BREADCRUMBS:editForm")]},initialize:function(){this.model=e(new r({_id:this.options.modelId}),this),this.view=new i({model:this.model}),this.listenTo(this.view,"remoteError",function(t){"AUTH"===t.message&&this.broker.publish("router.navigate",{url:this.model.genClientUrl(),trigger:!0,replace:!0})})},load:function(t){return t(this.model.fetch())}})}),define("app/fte/views/FteMasterEntryDetailsView",["underscore","app/core/View","app/core/util/onModelDeleted","app/fte/templates/masterEntry","app/fte/templates/absentUserRow","../util/fractions"],function(t,e,n,r,i,o){"use strict";return e.extend({template:r,remoteTopics:function(){var t={};return t["fte.master.updated."+this.model.id]="onModelUpdated",t["fte.master.deleted"]="onModelDeleted",t},serialize:function(){return t.extend(this.model.serializeWithTotals(),{editable:!1,renderAbsentUserRow:i,round:o.round})},beforeRender:function(){this.stopListening(this.model,"change",this.render)},afterRender:function(){this.listenToOnce(this.model,"change",this.render);var t=this.$(".fte-masterEntry-absence-entries"),e=this.$(".fte-masterEntry-absence-noEntries");t.children().length?e.hide():t.hide()},onModelUpdated:function(t){this.model.handleUpdateMessage(t)},onModelDeleted:function(t){n(this.broker,this.model,t)}})}),define("app/fte/pages/FteMasterEntryDetailsPage",["app/i18n","app/user","app/core/util/bindLoadingMessage","app/core/util/pageActions","app/core/View","../FteMasterEntry","../views/FteMasterEntryDetailsView"],function(t,e,n,r,i,o,s){"use strict";return i.extend({layoutName:"page",pageId:"fteMasterEntryDetails",breadcrumbs:[{label:t.bound("fte","BREADCRUMBS:master:browse"),href:"#fte/master"},t.bound("fte","BREADCRUMBS:details")],actions:function(){var n=[{label:t.bound("fte","PAGE_ACTION:print"),icon:"print",href:this.model.genClientUrl("print")}];return this.model.isEditable(e)&&n.push(r.edit(this.model),r["delete"](this.model)),n},initialize:function(){this.model=n(new o({_id:this.options.modelId}),this),this.view=new s({model:this.model})},load:function(t){return t(this.model.fetch())}})}),define("app/fte/templates/printableMasterEntryList",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<table class="table table-bordered table-condensed fte-masterEntry fte-masterEntry-print">\n  <thead>\n  <tr>\n    <th class="fte-masterEntry-column-task">'),__output.push(t("fte","masterEntry:column:task")),__output.push('\n    <th class="fte-masterEntry-column-noPlan">'),__output.push(t("fte","masterEntry:column:noPlan")),__output.push('\n    <th colspan="2">'),__output.push(t("fte","masterEntry:column:total")),__output.push("</th>\n    "),Object.keys(totalByProdFunction).forEach(function(t){__output.push('\n    <th colspan="'),__output.push(Object.keys(totalByProdFunction[t].companies).length),__output.push('">'),__output.push(totalByProdFunction[t].prodFunction),__output.push("</th>\n    ")}),__output.push("\n  <tr>\n    <th>\n    <th>\n    "),Object.keys(totalByCompany).forEach(function(t){__output.push("\n    <th>"),__output.push(totalByCompany[t].name),__output.push("\n    ")}),__output.push("\n    "),Object.keys(totalByProdFunction).forEach(function(t){__output.push("\n    "),Object.keys(totalByProdFunction[t].companies).forEach(function(t){__output.push("\n    <th>"),__output.push(escape(totalByCompany[t].name)),__output.push("\n    ")}),__output.push("\n    ")}),__output.push('\n  </thead>\n  <tbody>\n  <tr>\n    <th>\n    <th>\n    <th colspan="'),__output.push(companyCount),__output.push('">'),__output.push(round(total)),__output.push("\n    "),Object.keys(totalByProdFunction).forEach(function(t){__output.push('\n    <th colspan="'),__output.push(Object.keys(totalByProdFunction[t].companies).length),__output.push('">'),__output.push(round(totalByProdFunction[t].total)),__output.push("\n    ")}),__output.push("\n  <tr>\n    <th>\n    <th>\n    "),Object.keys(totalByCompany).forEach(function(t){__output.push("\n    <th>"),__output.push(round(totalByCompany[t].total)),__output.push("\n    ")}),__output.push("\n    "),Object.keys(totalByProdFunction).forEach(function(t){__output.push("\n    "),Object.keys(totalByProdFunction[t].companies).forEach(function(e){__output.push("\n    <th>"),__output.push(round(totalByProdFunction[t].companies[e])),__output.push("\n    ")}),__output.push("\n    ")}),__output.push("\n  "),tasks.forEach(function(t){__output.push('\n  <tr>\n    <td class="fte-masterEntry-cell-task">\n      '),"prodFlow"===t.type?(__output.push("\n      "),__output.push(escape(t.name)),__output.push("\n      ")):(__output.push("\n      <em>"),__output.push(escape(t.name)),__output.push("</em>\n      ")),__output.push('\n    <td><i class="fa fa-'),__output.push(t.noPlan?"check":"times"),__output.push('"></i>\n    '),Object.keys(t.totalByCompany).forEach(function(e){__output.push("\n    <td>"),__output.push(round(t.totalByCompany[e])),__output.push("</td>\n    ")}),__output.push("\n    "),t.functions.forEach(function(t){__output.push("\n    "),t.companies.forEach(function(t){__output.push("\n    <td>"),__output.push(round(t.count)),__output.push("\n    ")}),__output.push("\n    ")}),__output.push("\n  ")}),__output.push('\n  <!--\n  <tr class="fte-masterEntry-print-absence-separator">\n    <td colspan="999">&nbsp;\n  <tr class="fte-masterEntry-print-absence-header">\n    <th colspan="999">Absencja personalna\n  <tr class="fte-masterEntry-print-absence-columns">\n    <th>'),__output.push(t("users","PROPERTY:personellId")),__output.push('\n    <th colspan="999">'),__output.push(t("users","PROPERTY:name")),__output.push("\n  "),absentUsers.forEach(function(t){__output.push('\n  <tr class="fte-masterEntry-print-absence-row">\n    <td>'),__output.push(t.personellId),__output.push('\n    <td colspan="999">'),__output.push(t.name),__output.push("\n  ")}),__output.push("\n  //-->\n</table>\n");return __output.join("")}}),define("app/fte/views/FteMasterEntryDetailsPrintableView",["underscore","app/core/views/PrintableListView","app/fte/templates/printableMasterEntryList","../util/fractions"],function(t,e,n,r){"use strict";return e.extend({template:n,serialize:function(){return t.extend(this.model.serializeWithTotals(),{round:r.round})},afterRender:function(){}})}),define("app/fte/pages/FteMasterEntryDetailsPrintablePage",["app/time","app/i18n","app/data/subdivisions","app/data/views/renderOrgUnitPath","app/core/util/bindLoadingMessage","app/core/View","../FteMasterEntry","../views/FteMasterEntryDetailsPrintableView"],function(t,e,n,r,i,o,s,a){"use strict";return o.extend({layoutName:"print",pageId:"fteMasterEntryDetailsPrintable",hdLeft:function(){var t=n.get(this.model.get("subdivision"));return e("fte","print:hdLeft",{subdivision:t?r(t,!1,!1):"?"})},hdRight:function(){return e("fte","print:hdRight",{date:t.format(this.model.get("date"),"YYYY-MM-DD"),shift:e("core","SHIFT:"+this.model.get("shift"))})},initialize:function(){this.model=i(new s({_id:this.options.modelId}),this),this.view=new a({model:this.model})},load:function(t){return t(this.model.fetch())}})}),define("app/fte/FteLeaderEntryCollection",["app/user","../core/Collection","./FteLeaderEntry"],function(t,e,n){"use strict";return e.extend({model:n,rqlQuery:function(e){var n,r=t.getDivision();return r&&"prod"===r.get("type")&&(n={name:"and",args:[{name:"eq",args:[t.data.orgUnitType,t.data.orgUnitId]}]}),e.Query.fromObject({fields:{subdivision:1,date:1,shift:1,createdAt:1,creator:1},sort:{date:-1},limit:15,selector:n})}})}),define("app/fte/pages/FteLeaderEntryListPage",["app/i18n","app/user","app/core/util/bindLoadingMessage","app/core/util/pageActions","app/core/View","../FteLeaderEntryCollection","../views/FteLeaderEntryListView","../views/FteEntryFilterView","app/core/templates/listPage"],function(t,e,n,r,i,o,s,a,u){"use strict";return i.extend({template:u,layoutName:"page",pageId:"fteLeaderEntryList",breadcrumbs:[t.bound("fte","BREADCRUMBS:leader:browse")],actions:function(n){return[{label:t.bound("fte","PAGE_ACTION:add"),href:"#fte/leader;add",icon:"plus",privileges:function(){return e.isAllowedTo("FTE:LEADER:MANAGE","PROD_DATA:MANAGE")}},r["export"](n,this,this.collection)]},initialize:function(){this.defineModels(),this.defineViews(),this.setView(".filter-container",this.filterView),this.setView(".list-container",this.listView)},defineModels:function(){this.collection=n(new o(null,{rqlQuery:this.options.rql}),this)},defineViews:function(){this.filterView=new a({model:{rqlQuery:this.collection.rqlQuery},divisionFilter:function(t){return"dist"===t.get("type")}}),this.listView=new s({collection:this.collection}),this.listenTo(this.filterView,"filterChanged",this.refreshList)},load:function(t){return t(this.collection.fetch({reset:!0}))},refreshList:function(t){this.collection.rqlQuery=t,this.listView.refreshCollectionNow();var e=t.toString();this.broker.publish("router.navigate",{url:this.collection.genClientUrl()+"?"+e,trigger:!1,replace:!0})}})}),define("app/fte/pages/FteLeaderEntryAddFormPage",["app/i18n","app/core/View","../FteLeaderEntry","../views/FteEntryAddFormView"],function(t,e,n,r){"use strict";return e.extend({layoutName:"page",pageId:"fteLeaderEntryAddForm",breadcrumbs:[{label:t.bound("fte","BREADCRUMBS:leader:browse"),href:"#fte/leader"},t.bound("fte","BREADCRUMBS:addForm")],initialize:function(){this.view=new r({model:new n,divisionFilter:function(t){return t&&"dist"===t.get("type")}}),this.listenTo(this.view,"editable",function(t){this.broker.publish("router.navigate",{url:t.genClientUrl("edit"),trigger:!0})}),this.listenTo(this.view,"uneditable",function(t){this.broker.publish("router.navigate",{url:t.genClientUrl(),trigger:!0})})}})}),define("app/fte/templates/leaderEntry",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div>\n  <div class="well">\n    <div class="fte-property">\n      <span class="fte-property-name">'),__output.push(t("core","ORG_UNIT:subdivision")),__output.push('</span>\n      <span class="fte-property-value">'),__output.push(subdivision),__output.push('</span>\n    </div>\n    <div class="fte-property">\n      <span class="fte-property-name">'),__output.push(t("fte","property:date")),__output.push('</span>\n      <span class="fte-property-value">'),__output.push(date),__output.push('</span>\n    </div>\n    <div class="fte-property">\n      <span class="fte-property-name">'),__output.push(t("fte","property:shift")),__output.push('</span>\n      <span class="fte-property-value">'),__output.push(shift),__output.push('</span>\n    </div>\n  </div>\n  <div class="panel panel-primary">\n    <div class="panel-heading">'),__output.push(t("fte","leaderEntry:panel:title"+(editable?":editable":""))),__output.push("</div>\n    "),editable&&(__output.push('\n    <div class="message message-inline message-info">'),__output.push(t("fte","panel:info")),__output.push("</div>\n    ")),__output.push("\n    "),totalByProdFunction?(__output.push("\n    "),function(){__output.push('<div class="table-responsive">\n<table class="table table-bordered table-condensed table-hover fte-leaderEntry '),__output.push(editable?"is-editable":""),__output.push('">\n  <thead>\n    <tr>\n      <th class="fte-leaderEntry-column-task" rowspan="'),__output.push(divisions.length?6:4),__output.push('">'),__output.push(t("fte","leaderEntry:column:task")),__output.push('\n      <th class="fte-leaderEntry-column-total even" colspan="'),__output.push(companyCount*(divisions.length||1)),__output.push('">'),__output.push(t("fte","leaderEntry:column:taskTotal")),__output.push("</th>\n      "),Object.keys(totalByProdFunction).forEach(function(t,e){__output.push('\n      <th class="fte-leaderEntry-column-prodFunction '),__output.push(e%2?"even":""),__output.push('" colspan="'),__output.push(Object.keys(totalByProdFunction[t].companies).length*(divisions.length||1)),__output.push('" data-column="'),__output.push(e),__output.push('">'),__output.push(totalByProdFunction[t].prodFunction),__output.push("</th>\n      ")}),__output.push("\n      "),editable&&(__output.push('\n      <th rowspan="'),__output.push(divisions.length?6:4),__output.push('"></th>\n      ')),__output.push('\n    </tr>\n    <tr>\n      <th class="fte-leaderEntry-total even" colspan="'),__output.push(companyCount*(divisions.length||1)),__output.push('">'),__output.push(round(total)),__output.push("\n      "),Object.keys(totalByProdFunction).forEach(function(t,e){__output.push('\n      <th class="fte-leaderEntry-total-prodFunction '),__output.push(e%2?"even":""),__output.push('" colspan="'),__output.push(Object.keys(totalByProdFunction[t].companies).length*(divisions.length||1)),__output.push('" data-column="'),__output.push(e),__output.push('">'),__output.push(round(totalByProdFunction[t].total)),__output.push("\n      ")}),__output.push("\n    </tr>\n    <tr>\n      "),Object.keys(totalByCompany).forEach(function(t){__output.push('\n      <th class="fte-leaderEntry-column-company even" colspan="'),__output.push(divisions.length),__output.push('">'),__output.push(totalByCompany[t].name),__output.push("\n      ")}),__output.push("\n      "),Object.keys(totalByProdFunction).forEach(function(t,e){__output.push("\n      "),Object.keys(totalByProdFunction[t].companies).forEach(function(n){__output.push('\n      <th class="fte-leaderEntry-column-company '),__output.push(e%2?"even":""),__output.push('" colspan="'),__output.push(divisions.length),__output.push('" data-column="'),__output.push(e),__output.push(":"),__output.push(totalByProdFunction[t].companies[n].index),__output.push('">'),__output.push(escape(totalByCompany[n].name)),__output.push("\n      ")}),__output.push("\n      ")}),__output.push("\n    </tr>\n    <tr>\n      "),Object.keys(totalByCompany).forEach(function(t){__output.push('\n      <th class="fte-leaderEntry-total-company even" colspan="'),__output.push(divisions.length),__output.push('" data-company="'),__output.push(totalByCompany[t].index),__output.push('">'),__output.push(round(totalByCompany[t].total)),__output.push("\n      ")}),__output.push("\n      "),Object.keys(totalByProdFunction).forEach(function(t,e){__output.push("\n      "),Object.keys(totalByProdFunction[t].companies).forEach(function(n){__output.push('\n      <th class="fte-leaderEntry-total-prodFunction-company '),__output.push(e%2?"even":""),__output.push('" colspan="'),__output.push(divisions.length),__output.push('" data-function="'),__output.push(e),__output.push('" data-company="'),__output.push(totalByProdFunction[t].companies[n].index),__output.push('" data-column="'),__output.push(e),__output.push(":"),__output.push(totalByProdFunction[t].companies[n].index),__output.push('">'),__output.push(round(totalByProdFunction[t].companies[n].total)),__output.push("\n      ")}),__output.push("\n      ")}),__output.push("\n    </tr>\n    "),divisions.length&&(__output.push("\n    <tr>\n      "),Object.keys(totalByCompany).forEach(function(){__output.push("\n      "),divisions.forEach(function(t){__output.push('\n      <th class="fte-leaderEntry-column-division even">'),__output.push(t),__output.push("\n      ")}),__output.push("\n      ")}),__output.push("\n      "),Object.keys(totalByProdFunction).forEach(function(t,e){__output.push("\n      "),Object.keys(totalByProdFunction[t].companies).forEach(function(n){__output.push("\n      "),divisions.forEach(function(r,i){__output.push('\n      <th class="fte-leaderEntry-column-division '),__output.push(e%2?"even":""),__output.push('" data-column="'),__output.push(e),__output.push(":"),__output.push(totalByProdFunction[t].companies[n].index),__output.push(":"),__output.push(i),__output.push('">'),__output.push(r),__output.push("\n      ")}),__output.push("\n      ")}),__output.push("\n      ")}),__output.push("\n    </tr>\n    <tr>\n      "),Object.keys(totalByCompany).forEach(function(t){__output.push("\n      "),divisions.forEach(function(e,n){__output.push('\n      <th class="fte-leaderEntry-total-division even" data-column="'),__output.push(totalByCompany[t].index),__output.push(":"),__output.push(n),__output.push('" data-company="'),__output.push(totalByCompany[t].index),__output.push('" data-division="'),__output.push(n),__output.push('">'),__output.push(round(totalByCompany[t].divisions[e])),__output.push("\n      ")}),__output.push("\n      ")}),__output.push("\n      "),Object.keys(totalByProdFunction).forEach(function(t,e){__output.push("\n      "),Object.keys(totalByProdFunction[t].companies).forEach(function(n){__output.push("\n      "),divisions.forEach(function(r,i){__output.push('\n      <th class="fte-leaderEntry-total-prodFunction-division '),__output.push(e%2?"even":""),__output.push('" data-column="'),__output.push(e),__output.push(":"),__output.push(totalByProdFunction[t].companies[n].index),__output.push(":"),__output.push(i),__output.push('" data-company="'),__output.push(totalByProdFunction[t].companies[n].index),__output.push('" data-division="'),__output.push(i),__output.push('">'),__output.push(round(totalByProdFunction[t].companies[n].divisions[r])),__output.push("\n      ")}),__output.push("\n      ")}),__output.push("\n      ")}),__output.push("\n    </tr>\n    ")),__output.push("\n  </thead>\n  <tbody>\n    "),tasks.forEach(function(t){__output.push('\n    <tr class="'),__output.push(t.parent?"is-child":""),__output.push(" "),__output.push(t.hasChildren?"is-parent":""),__output.push(" "),__output.push(t.parent||t.hasChildren?"":"is-single"),__output.push(" "),__output.push(t.last?"is-last":""),__output.push(" "),__output.push(t.lastChild?"is-last-child":""),__output.push(" "),__output.push(t.comment?"has-visible-comment":"has-invisible-comment"),__output.push('"\n        data-id="'),__output.push(t.id),__output.push('"\n        data-parent="'),__output.push(t.parent),__output.push('"\n        data-level="'),__output.push(t.level),__output.push('"\n        '),t.backgroundColor&&(__output.push('style="background-color: '),__output.push(t.backgroundColor),__output.push('"')),__output.push('>\n      <td class="fte-leaderEntry-cell-task" '),t.level&&(__output.push('style="padding-left: '),__output.push(30*t.level),__output.push('px;"')),__output.push(">\n        "),__output.push(escape(t.name)),__output.push("\n        "),!editable&&t.comment&&(__output.push('\n        <span class="fte-leaderEntry-comment"><i class="fa fa-comment"></i> '),__output.push(escape(t.comment)),__output.push("</span>\n        ")),__output.push("\n      </td>\n      "),Object.keys(t.totalByCompany).forEach(function(e){__output.push("\n      "),t.fteDiv?(__output.push("\n      "),divisions.forEach(function(n,r){__output.push('\n      <td class="fte-leaderEntry-total-company-task even" data-companyId="'),__output.push(t.totalByCompany[e].index),__output.push('" data-company="'),__output.push(t.totalByCompany[e].index),__output.push('" data-divisionId="'),__output.push(n),__output.push('" data-division="'),__output.push(r),__output.push('">'),__output.push(round(t.totalByCompany[e].divisions[n])),__output.push("</td>\n      ")}),__output.push("\n      ")):(__output.push('\n      <td class="fte-leaderEntry-total-company-task even" colspan="'),__output.push(divisions.length),__output.push('" data-company="'),__output.push(t.totalByCompany[e].index),__output.push('">'),__output.push(round(t.totalByCompany[e].total)),__output.push("</td>\n      ")),__output.push("\n      ")}),__output.push("\n      "),t.functions.forEach(function(e,n){__output.push("\n      "),e.companies.forEach(function(e,r){__output.push("\n      "),t.fteDiv?(__output.push("\n      "),e.count.forEach(function(i,o){__output.push('\n      <td class="'),__output.push(t.hasChildren?"fte-leaderEntry-parent-count":"fte-leaderEntry-count-container"),__output.push(" "),__output.push(n%2?"even":""),__output.push('" data-function="'),__output.push(n),__output.push('" data-company="'),__output.push(e.index),__output.push('" data-division="'),__output.push(o),__output.push('" data-level="'),__output.push(t.level),__output.push('">\n        '),editable&&!t.hasChildren?(__output.push('\n        <input\n          class="form-control no-controls fte-leaderEntry-count"\n          type="number"\n          min="0"\n          max="9999"\n          value="'),__output.push(i.value),__output.push('"\n          data-value="'),__output.push(i.value),__output.push('"\n          data-task="'),__output.push(t.index),__output.push('"\n          data-function="'),__output.push(n),__output.push('"\n          data-company="'),__output.push(e.index),__output.push('"\n          data-company-server="'),__output.push(r),__output.push('"\n          data-division="'),__output.push(o),__output.push('">\n        ')):(__output.push("\n        "),__output.push(round(i.value)),__output.push("\n        ")),__output.push("\n      </td>\n      ")}),__output.push("\n      ")):(__output.push('\n      <td class="'),__output.push(t.hasChildren?"fte-leaderEntry-parent-count":"fte-leaderEntry-count-container"),__output.push(" "),__output.push(n%2?"even":""),__output.push('" colspan="'),__output.push(divisions.length),__output.push('" data-function="'),__output.push(n),__output.push('" data-company="'),__output.push(e.index),__output.push('" data-level="'),__output.push(t.level),__output.push('">\n        '),editable&&!t.hasChildren?(__output.push('\n        <input\n          class="form-control no-controls fte-leaderEntry-count"\n          type="number"\n          min="0"\n          max="9999"\n          value="'),__output.push(e.count),__output.push('"\n          data-value="'),__output.push(e.count),__output.push('"\n          data-task="'),__output.push(t.index),__output.push('"\n          data-function="'),__output.push(n),__output.push('"\n          data-company="'),__output.push(e.index),__output.push('"\n          data-company-server="'),__output.push(r),__output.push('">\n        ')):(__output.push("\n        "),__output.push(round(e.count)),__output.push("\n        ")),__output.push("\n      </td>\n      ")),__output.push("\n      ")}),__output.push("\n      ")}),__output.push("\n      "),editable&&__output.push('\n      <td class="fte-leaderEntry-actions"><button class="btn btn-default fte-leaderEntry-toggleComment" tabindex="-1"><i class="fa fa-comment"></i></button></td>\n      '),__output.push("\n    </tr>\n    "),editable&&(__output.push('\n    <tr class="fte-leaderEntry-comment '),__output.push(t.comment?"":"hidden"),__output.push('">\n      <td colspan="999">\n        <textarea class="form-control fte-leaderEntry-comment" rows="2" data-task="'),__output.push(t.index),__output.push('">'),__output.push(escape(t.comment||"")),__output.push("</textarea>\n      </td>\n    </tr>\n    ")),__output.push("\n    ")}),__output.push("\n  </tbody>\n</table>\n</div>\n")}(),__output.push("\n    ")):(__output.push("\n    "),function(){__output.push('<table class="table table-bordered table-condensed table-hover fte-leaderEntry">\n  <thead>\n    <tr>\n      <th class="fte-leaderEntry-column-task" rowspan="3">'),__output.push(t("fte","leaderEntry:column:task")),__output.push("\n      <th>"),__output.push(t("fte","leaderEntry:column:taskTotal")),__output.push("\n      "),companies.forEach(function(t,e){__output.push('\n      <th class="fte-leaderEntry-column-company" colspan="'),__output.push(divisions.length),__output.push('" data-column="'),__output.push(e),__output.push('">'),__output.push(escape(t.name)),__output.push("\n      ")}),__output.push('\n    </tr>\n    <tr>\n      <th class="fte-leaderEntry-total-overall" rowspan="2">'),__output.push(round(total)),__output.push("\n      "),companies.forEach(function(t,e){__output.push('\n      <th class="fte-leaderEntry-total-company" colspan="'),__output.push(divisions.length),__output.push('" data-column="'),__output.push(escape(e)),__output.push('">'),__output.push(round(t.total)),__output.push("\n      ")}),__output.push("\n    </tr>\n    "),divisions.length&&(__output.push("\n    <tr>\n      "),companies.forEach(function(t,e){__output.push("\n      "),divisions.forEach(function(t,n){__output.push('\n      <th class="fte-leaderEntry-column-division" data-column="'),__output.push(e),__output.push(":"),__output.push(n),__output.push('">'),__output.push(t),__output.push("\n      ")}),__output.push("\n      ")}),__output.push("\n    </tr>\n    ")),__output.push("\n  </thead>\n  <tbody>\n    "),tasks.forEach(function(t,e){__output.push('\n    <tr>\n      <td class="fte-leaderEntry-cell-task">'),__output.push(escape(t.name)),__output.push('\n      <td class="fte-leaderEntry-total-task">'),__output.push(round(t.total)),__output.push("\n      "),t.companies.forEach(function(t,n){__output.push("\n      "),Array.isArray(t.count)?(__output.push("\n      "),t.count.forEach(function(t,r){__output.push("\n      <td "),__output.push(editable?"":'class="fte-leaderEntry-count"'),__output.push(">\n        "),editable?(__output.push('\n        <input\n          class="form-control no-controls fte-leaderEntry-count"\n          type="number"\n          min="0"\n          max="9999"\n          value="'),__output.push(t.value),__output.push('"\n          data-value="'),__output.push(t.value),__output.push('"\n          data-task="'),__output.push(e),__output.push('"\n          data-company="'),__output.push(n),__output.push('"\n          data-division="'),__output.push(r),__output.push('">\n        ')):(__output.push("\n        "),__output.push(round(t.value)),__output.push("\n        ")),__output.push("\n      </td>\n      ")}),__output.push("\n      ")):(__output.push("\n      <td "),__output.push(editable?"":'class="fte-leaderEntry-count"'),__output.push(' colspan="'),__output.push(divisions.length),__output.push('">\n        '),editable?(__output.push('\n        <input\n          class="form-control no-controls fte-leaderEntry-count"\n          type="number"\n          min="0"\n          max="9999"\n          value="'),__output.push(t.count),__output.push('"\n          data-value="'),__output.push(t.count),__output.push('"\n          data-task="'),__output.push(e),__output.push('"\n          data-company="'),__output.push(n),__output.push('">\n        ')):(__output.push("\n        "),__output.push(round(t.count)),__output.push("\n        ")),__output.push("\n      </td>\n      ")),__output.push("\n      ")}),__output.push("\n    </tr>\n    ")}),__output.push("\n  </tbody>\n</table>\n")}(),__output.push("\n    ")),__output.push("\n  </div>\n</div>\n");return __output.join("")}}),define("app/fte/templates/focusInfoBar",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="fte-focusInfoBar-prop">'),__output.push(escape(prodTask)),__output.push("</div>"),prodFunction&&(__output.push('<div class="fte-focusInfoBar-prop">'),__output.push(escape(prodFunction)),__output.push("</div>")),company&&(__output.push('<div class="fte-focusInfoBar-prop">'),__output.push(escape(company)),__output.push("</div>")),division&&(__output.push('<div class="fte-focusInfoBar-prop">'),__output.push(escape(division)),__output.push("</div>")),__output.push("\n");return __output.join("")}}),define("app/fte/views/FteLeaderEntryEditFormView",["underscore","jquery","app/user","app/core/View","app/core/util/onModelDeleted","app/fte/templates/leaderEntry","app/fte/templates/focusInfoBar","../util/fractions"],function(t,e,n,r,i,o,s,a){"use strict";return r.extend({template:o,events:{"change .fte-leaderEntry-count":"updateCount","keyup .fte-leaderEntry-count":"updateCount","keydown .fte-leaderEntry-count":function(t){return 13===t.which?(this.focusNextInput(this.$(t.target)),!1):void 0},"focus .fte-leaderEntry-count":function(t){var e=t.target,n=e.parentNode.parentNode,r=this.theadEl,i=e.dataset,o=i["function"]+":"+i.company;this.focused=[e.parentNode,n.children[0]],this.withFunctions?this.focused.push(r.querySelector('.fte-leaderEntry-column-prodFunction[data-column="'+i["function"]+'"]'),r.querySelector('.fte-leaderEntry-total-prodFunction[data-column="'+i["function"]+'"]'),r.querySelector('.fte-leaderEntry-column-company[data-column="'+o+'"]'),r.querySelector('.fte-leaderEntry-total-prodFunction-company[data-column="'+o+'"]')):this.focused.push(r.querySelector('.fte-leaderEntry-column-company[data-column="'+i.company+'"]'),r.querySelector('.fte-leaderEntry-total-company[data-column="'+i.company+'"]')),void 0===e.dataset.division?this.withFunctions?(this.focused.push(n.querySelector('.fte-leaderEntry-total-company-task[data-company="'+i.company+'"]')),this.focused.push.apply(this.focused,r.querySelectorAll('.fte-leaderEntry-column-division[data-column^="'+o+'"]')),this.focused.push.apply(this.focused,r.querySelectorAll('.fte-leaderEntry-total-prodFunction-division[data-column^="'+o+'"]'))):this.focused.push.apply(this.focused,r.querySelectorAll('.fte-leaderEntry-column-division[data-column^="'+i.company+'"]')):this.withFunctions?this.focused.push(n.querySelector('.fte-leaderEntry-total-company-task[data-company="'+i.company+'"][data-division="'+i.division+'"]'),r.querySelector('.fte-leaderEntry-column-division[data-column="'+o+":"+i.division+'"]'),r.querySelector('.fte-leaderEntry-total-prodFunction-division[data-column="'+o+":"+i.division+'"]')):this.focused.push(r.querySelector('.fte-leaderEntry-column-division[data-column="'+i.company+":"+i.division+'"]')),this.$(this.focused).addClass("is-focused"),this.showFocusInfoBar(e)
},"focus textarea.fte-leaderEntry-comment":function(t){var e=t.target,n=e.parentNode,r=n.parentNode.previousElementSibling.firstElementChild;this.focused=[n,r],this.$(this.focused).addClass("is-focused"),this.showFocusInfoBar(e)},"blur .fte-leaderEntry-count, textarea.fte-leaderEntry-comment":function(){this.$(this.focused).removeClass("is-focused"),this.hideFocusInfoBar()},"click .fte-leaderEntry-toggleComment":function(t){var e=this.$(t.currentTarget),n=e.closest("tr"),r=n.next();r.toggleClass("hidden"),n.toggleClass("has-visible-comment").toggleClass("has-invisible-comment"),r.hasClass("hidden")?e.find(".fa").removeClass("fa-comment-o").addClass("fa-comment"):(e.find(".fa").removeClass("fa-comment").addClass("fa-comment-o"),r.find("textarea").focus())},"keyup textarea.fte-leaderEntry-comment":function(t){this.updateComment(t.target)},"change textarea.fte-leaderEntry-comment":function(t){this.doUpdateComment(t.target)},"click .fte-leaderEntry-count-container":function(t){"TD"===t.target.tagName&&t.target.querySelector("input").select()}},remoteTopics:function(){var t={};return t["fte.leader.updated."+this.model.id]="onRemoteEdit",t["fte.leader.deleted"]="onModelDeleted",t},initialize:function(){this.focused=null,this.theadEl=null,this.withFunctions=!1},destroy:function(){e("body").removeClass("is-with-fte-focusInfoBar"),this.focused=null,this.theadEl=null},beforeRender:function(){this.stopListening(this.model,"change",this.render)},afterRender:function(){this.listenToOnce(this.model,"change",this.render),this.theadEl=this.el.getElementsByTagName("thead")[0],this.withFunctions=this.model.isWithFunctions(),this.withDivisions=this.model.isWithDivisions(),this.$focusInfoBar=e('<div class="fte-focusInfoBar"></div>').hide().appendTo(this.$el),this.$(".fte-leaderEntry-count").first().select()},serialize:function(){return t.extend(this.model.serializeWithTotals(),{editable:!0,round:a.round})},focusNextInput:function(t){var e=t.closest("td").next("td");if(e.length&&!e.hasClass("fte-leaderEntry-actions"))return this.scrollIntoView(e.find("input").select()[0]);for(var n=t.closest("tr").next();n.length;){if(!n.hasClass("is-parent")&&!n.hasClass("fte-leaderEntry-comment"))return this.scrollIntoView(n.find(".fte-leaderEntry-count").first().select()[0]);n=n.next()}var r=this.el.querySelector(".fte-leaderEntry-count");r.select(),this.scrollIntoView(r)},scrollIntoView:function(t){t.scrollIntoViewIfNeeded?t.scrollIntoViewIfNeeded():t.scrollIntoView(!0)},updateCount:function(t){var e=t.target.dataset,n=a.parse(e.value)||0,r=a.parse(t.target.value)||0;if(n!==r){var i=e.task+":"+e["function"]+":"+e.company+":"+e.division;this.timers[i]&&clearTimeout(this.timers[i]),this.timers[i]=setTimeout(this.doUpdateCount.bind(this),250,t.target,i,n,r)}},doUpdateCount:function(t,e,n,r){delete this.timers[e];var i=t.dataset,o=i.remote,s={socketId:this.socket.getId(),_id:this.model.id,newCount:r,taskIndex:parseInt(i.task,10),functionIndex:parseInt(i["function"],10)||0,companyIndex:parseInt(i.company,10),companyIndexServer:parseInt(i.companyServer,10)},a=parseInt(i.division,10);isNaN(a)||(s.divisionIndex=a),i.value=s.newCount,i.remote="false";var u=this;this.socket.emit("fte.leader.updateCount",s,function(e){e&&("true"!==i.remote&&(t.value=n,i.value=n,i.remote=o,u.recount(t,s.taskIndex,s.functionIndex,s.companyIndex),s.newCount=n,u.model.handleUpdateMessage(s,!0)),u.trigger("remoteError",e))}),this.recount(t,s.taskIndex,s.functionIndex,s.companyIndex),this.model.handleUpdateMessage(s,!0)},recount:function(t,e,n,r){if(this.withFunctions)return this.recountWithFunctions(t,e,n,r);var i=0,o=0,s=0,u=this.$(t).closest("tr");u.find(".fte-leaderEntry-count").each(function(){i+=a.parse(this.value)}),u.find(".fte-leaderEntry-total-task").text(a.round(i)),this.$(".fte-leaderEntry-count[data-company="+r+"]").each(function(){o+=a.parse(this.value)}),this.$(".fte-leaderEntry-total-company[data-column="+r+"]").text(a.round(o)),this.$(".fte-leaderEntry-total-company").each(function(){s+=a.parse(this.innerHTML)}),this.$(".fte-leaderEntry-total-overall").text(a.round(s))},recountWithFunctions:function(t,e,n,r){var i=this.$(t).closest("tr"),o=i.hasClass("is-child"),s=null,a=[],u=parseInt(t.dataset.division,10);if(isNaN(u)&&(u=-1),o){var c=i.attr("data-parent");s=this.$('.is-parent[data-id="'+c+'"]'),a=this.$('.is-child[data-parent="'+c+'"]')}var l=this.recalcTaskCompanyTotals(r,u,i);o&&this.recalcParentTotals(l,n,s,a),this.withDivisions&&this.recalcDivisionTotals(n,r),this.recalcCompanyTotals(n,r),this.recalcFunctionTotals(n)},recalcTaskCompanyTotals:function(t,e,n){var r=0,i='[data-company="'+t+'"]';return-1!==e&&(i+='[data-division="'+e+'"]'),n.find(".fte-leaderEntry-count"+i).each(function(){r+=a.parse(this.value)}),n.find(".fte-leaderEntry-total-company-task"+i).text(a.round(r)),i},recalcParentTotals:function(t,e,n,r){t=t.replace(/\[data-division="[0-9]+"\]/,"");var i=t+'[data-function="'+e+'"]',o=".fte-leaderEntry-count"+i+", .fte-leaderEntry-parent-count"+i,s=n.find(".fte-leaderEntry-parent-count"+i),u=s.length,c=[];if(s.each(function(){c.push(0)}),r.find(o).each(function(){var t=a.parse("TD"===this.tagName?this.textContent:this.value);if(void 0===this.dataset.division){t/=u;for(var e=0;u>e;++e)c[e]+=t}else c[this.dataset.division]+=t}),c.forEach(function(t,e){s[e].textContent=a.round(t),c[e]=0}),n.find(".fte-leaderEntry-parent-count"+t).each(function(){var t=a.parse(this.textContent);if(void 0===this.dataset.division){t/=u;for(var e=0;u>e;++e)c[e]+=t}else c[this.dataset.division]+=t}),s=n.find(".fte-leaderEntry-total-company-task"+t),c.forEach(function(t,e){s[e].textContent=a.round(t)}),"0"!==n.attr("data-level")){var l=n.attr("data-parent");n=this.$('.is-parent[data-id="'+l+'"]'),r=this.$('.is-child[data-parent="'+l+'"]'),this.recalcParentTotals(t,e,n,r)}},recalcDivisionTotals:function(t,n){var r=this,i=this.model.get("fteDiv"),o='[data-function="'+t+'"][data-company="'+n+'"]',s={};i.forEach(function(t){s[t]=0}),this.$('.fte-leaderEntry-parent-count[data-level="0"]'+o).each(function(){var t=a.parse(this.textContent);void 0===this.dataset.division?(t/=i.length,i.forEach(function(e){s[e]+=t})):s[i[this.dataset.division]]+=t}),this.$(".is-single .fte-leaderEntry-count"+o).each(function(){var t=a.parse(this.value);void 0===this.dataset.division?(t/=i.length,i.forEach(function(e){s[e]+=t})):s[i[this.dataset.division]]+=t}),i.forEach(function(e,i){var o=t+":"+n+":"+i,u='.fte-leaderEntry-total-prodFunction-division[data-column="'+o+'"]';r.$(u).text(a.round(s[e]))});var u={};e(this.theadEl).find(".fte-leaderEntry-total-prodFunction-division").each(function(){var t=this.dataset.company+":"+this.dataset.division;void 0===u[t]&&(u[t]=0),u[t]+=a.parse(this.textContent)}),Object.keys(u).forEach(function(t){r.$('.fte-leaderEntry-total-division[data-column="'+t+'"]').text(a.round(u[t]))})},recalcCompanyTotals:function(t,e){var n,r=0,i=t+":"+e,o=this.$(this.theadEl);this.withDivisions?(n='[data-column^="'+i+'"]',o.find(".fte-leaderEntry-total-prodFunction-division"+n).each(function(){r+=a.parse(this.textContent)})):(n='[data-function="'+t+'"][data-company="'+e+'"]',this.$(".fte-leaderEntry-count"+n).each(function(){r+=a.parse(this.value)})),this.$('.fte-leaderEntry-total-prodFunction-company[data-column="'+i+'"]').text(a.round(r));var s=0;o.find('.fte-leaderEntry-total-prodFunction-company[data-company="'+e+'"]').each(function(){s+=a.parse(this.textContent)}),this.$('.fte-leaderEntry-total-company[data-company="'+e+'"]').text(a.round(s))},recalcFunctionTotals:function(t){var e=0,n=this.$(this.theadEl);n.find('.fte-leaderEntry-total-prodFunction-company[data-function="'+t+'"]').each(function(){e+=a.parse(this.textContent)}),this.$('.fte-leaderEntry-total-prodFunction[data-column="'+t+'"]').text(a.round(e));var r=0;n.find(".fte-leaderEntry-total-prodFunction").each(function(){r+=a.parse(this.textContent)}),this.$(".fte-leaderEntry-total").text(a.round(r))},onRemoteEdit:function(t){if(t.socketId!==this.socket.getId()){if(void 0!==t.comment)return this.onRemoteCommentEdit(t);var e=".fte-leaderEntry-count[data-company="+t.companyIndex+"][data-task="+t.taskIndex+"]";this.withFunctions&&(e+='[data-function="'+t.functionIndex+'"]'),"number"==typeof t.divisionIndex&&(e+='[data-division="'+t.divisionIndex+'"]');var n=this.$(e);0!==n.length&&(n.val(t.newCount),n.attr({"data-value":t.newCount,"data-remote":"true"}),this.recount(n[0],t.taskIndex,t.functionIndex,t.companyIndex),this.model.handleUpdateMessage(t,!0))}},onRemoteCommentEdit:function(t){var e=this.$('textarea.fte-leaderEntry-comment[data-task="'+t.taskIndex+'"]');if(e.length){e.val(t.comment);var n=e.closest("tr"),r=n.prev(),i=r.find(".fte-leaderEntry-toggleComment > .fa");e.comment?(n.addClass("hidden"),r.removeClass("has-visible-comment").addClass("has-invisible-comment"),i.removeClass("fa-comment-o").addClass("fa-comment")):(n.removeClass("hidden"),r.removeClass("has-invisible-comment").addClass("has-visible-comment"),i.removeClass("fa-comment").addClass("fa-comment-o")),this.model.handleUpdateMessage(t,!0)}},onModelDeleted:function(t){i(this.broker,this.model,t)},showFocusInfoBar:function(t){null!==this.timers.hideFocusInfoBar&&(clearTimeout(this.timers.hideFocusInfoBar),this.timers.hideFocusInfoBar=null);var n=t.parentNode.parentNode;t.classList.contains("fte-leaderEntry-comment")&&(n=n.previousElementSibling);var r=n.children[0].textContent;if(n.classList.contains("is-child"))for(var i=n,o=+i.dataset.level;i&&o;){i=i.previousElementSibling.previousElementSibling;var a=+i.dataset.level;o>a&&(o=a,r=i.children[0].textContent+" \\ "+r)}var u=t.dataset["function"],c=t.dataset.company,l=t.dataset.division,p=u+":"+c,d=void 0===u?null:'.fte-leaderEntry-column-prodFunction[data-column="'+u+'"]',h=void 0===c?null:'.fte-leaderEntry-column-company[data-column="'+p+'"]',f=void 0===l?null:'.fte-leaderEntry-column-division[data-column="'+p+":"+l+'"]';this.$focusInfoBar.html(s({prodTask:r,prodFunction:d?this.theadEl.querySelector(d).textContent:null,company:h?this.theadEl.querySelector(h).textContent:null,division:f?this.theadEl.querySelector(f).textContent:null})),e("body").addClass("is-with-fte-focusInfoBar"),this.$focusInfoBar.fadeIn("fast")},hideFocusInfoBar:function(){var t=this;this.timers.hideFocusInfoBar=setTimeout(function(){t.timers&&(t.timers.hideFocusInfoBar=null,t.$focusInfoBar.fadeOut("fast",function(){e("body").removeClass("is-with-fte-focusInfoBar")}))},1)},updateComment:function(t){var e=parseInt(t.dataset.task,10),n="updateComment"+e;this.timers[n]&&clearTimeout(this.timers[n]),this.timers[n]=setTimeout(this.doUpdateComment.bind(this),5e3,t)},doUpdateComment:function(t){var e=parseInt(t.dataset.task,10),n="updateComment"+e;this.timers[n]&&(clearTimeout(this.timers[n]),delete this.timers[n]),this.socket.emit("fte.leader.updateComment",{socketId:this.socket.getId(),_id:this.model.id,taskIndex:e,comment:t.value})}})}),define("app/fte/pages/FteLeaderEntryEditFormPage",["app/i18n","app/core/util/bindLoadingMessage","app/core/View","../FteLeaderEntry","../views/FteLeaderEntryEditFormView"],function(t,e,n,r,i){"use strict";return n.extend({layoutName:"page",pageId:"fteLeaderEntryForm",breadcrumbs:function(){return[{label:t.bound("fte","BREADCRUMBS:leader:browse"),href:this.model.genClientUrl("base")},{label:t.bound("fte","BREADCRUMBS:details"),href:this.model.genClientUrl()},t.bound("fte","BREADCRUMBS:editForm")]},initialize:function(){this.model=e(new r({_id:this.options.modelId}),this),this.view=new i({model:this.model}),this.listenTo(this.view,"remoteError",function(t){"AUTH"===t.message&&this.broker.publish("router.navigate",{url:this.model.genClientUrl(),trigger:!0,replace:!0})})},load:function(t){return t(this.model.fetch())}})}),define("app/fte/views/FteLeaderEntryDetailsView",["underscore","app/core/View","app/core/util/onModelDeleted","app/fte/templates/leaderEntry","../util/fractions"],function(t,e,n,r,i){"use strict";return e.extend({template:r,initialize:function(){this.scheduleModelReload=t.throttle(this.model.fetch.bind(this.model),3e3,!0)},remoteTopics:function(){var t={};return t["fte.leader.updated."+this.model.id]="onModelUpdated",t["fte.leader.deleted"]="onModelDeleted",t},serialize:function(){return t.extend(this.model.serializeWithTotals(),{editable:!1,round:i.round})},beforeRender:function(){this.stopListening(this.model,"change",this.render)},afterRender:function(){this.listenToOnce(this.model,"change",this.render)},onModelUpdated:function(t){this.scheduleModelReload(t)},onModelDeleted:function(t){n(this.broker,this.model,t)}})}),define("app/fte/pages/FteLeaderEntryDetailsPage",["app/i18n","app/user","app/core/util/bindLoadingMessage","app/core/util/pageActions","app/core/View","../FteLeaderEntry","../views/FteLeaderEntryDetailsView"],function(t,e,n,r,i,o,s){"use strict";return i.extend({layoutName:"page",pageId:"fteLeaderEntryDetails",breadcrumbs:[{label:t.bound("fte","BREADCRUMBS:leader:browse"),href:"#fte/leader"},t.bound("fte","BREADCRUMBS:details")],actions:function(){var n=[{label:t.bound("fte","PAGE_ACTION:print"),icon:"print",href:this.model.genClientUrl("print")}];return this.model.isEditable(e)&&n.push(r.edit(this.model),r["delete"](this.model)),n},initialize:function(){this.model=n(new o({_id:this.options.modelId}),this),this.view=new s({model:this.model})},load:function(t){return t(this.model.fetch())}})}),define("app/fte/templates/printableLeaderEntryListWoFunctions",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<table class="table table-bordered table-condensed fte-leaderEntry-print">\n  <thead>\n    <tr>\n      <th>'),__output.push(t("fte","leaderEntry:column:task")),__output.push("</th>\n      <th>"),__output.push(t("fte","leaderEntry:column:taskTotal")),__output.push("</th>\n      "),companies.forEach(function(t){__output.push('\n      <th colspan="'),__output.push(divisions.length),__output.push('">'),__output.push(escape(t.name)),__output.push("</th>\n      ")}),__output.push('\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th class="fte-ntb fte-nbb"></th>\n      <th class="fte-nbb">'),__output.push(round(total)),__output.push("</th>\n      "),companies.forEach(function(t){__output.push('\n      <th class="fte-nbb" colspan="'),__output.push(divisions.length),__output.push('">'),__output.push(round(t.total)),__output.push("</th>\n      ")}),__output.push("\n    </tr>\n    "),divisions.length&&(__output.push('\n    <tr>\n      <th class="fte-ntb"></th>\n      <th class="fte-ntb"></th>\n      '),companies.forEach(function(){__output.push("\n      "),divisions.forEach(function(t){__output.push("\n      <th>"),__output.push(t),__output.push("</th>\n      ")}),__output.push("\n      ")}),__output.push("\n    </tr>\n    ")),__output.push("\n    "),tasks.forEach(function(t){__output.push("\n    <tr>\n      <td>"),__output.push(escape(t.name)),__output.push("\n      <td>"),__output.push(round(t.total)),__output.push("\n      "),t.companies.forEach(function(t){__output.push("\n      "),Array.isArray(t.count)?(__output.push("\n      "),t.count.forEach(function(t){__output.push("\n      <td>"),__output.push(round(t.value)),__output.push("</td>\n      ")}),__output.push("\n      ")):(__output.push('\n      <td colspan="'),__output.push(divisions.length),__output.push('">'),__output.push(round(t.count)),__output.push("</td>\n      ")),__output.push("\n      ")}),__output.push("\n    </tr>\n    ")}),__output.push("\n  </tbody>\n</table>\n");return __output.join("")}}),define("app/fte/templates/printableLeaderEntryListWFunctions",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<table class="table table-bordered table-condensed table-hover fte-leaderEntry-print">\n  <thead>\n    <tr>\n      <th class="fte-leaderEntry-column-task" rowspan="'),__output.push(divisions.length?6:4),__output.push('">'),__output.push(t("fte","leaderEntry:column:task")),__output.push('\n      <th class="fte-leaderEntry-column-total even" colspan="'),__output.push(companyCount*(divisions.length||1)),__output.push('">'),__output.push(t("fte","leaderEntry:column:taskTotal")),__output.push("</th>\n      "),Object.keys(totalByProdFunction).forEach(function(t){__output.push('\n      <th class="fte-leaderEntry-column-prodFunction" colspan="'),__output.push(Object.keys(totalByProdFunction[t].companies).length*(divisions.length||1)),__output.push('">'),__output.push(totalByProdFunction[t].prodFunction),__output.push("</th>\n      ")}),__output.push('\n    </tr>\n    <tr>\n      <th class="fte-leaderEntry-total even" colspan="'),__output.push(companyCount*(divisions.length||1)),__output.push('">'),__output.push(round(total)),__output.push("\n      "),Object.keys(totalByProdFunction).forEach(function(t){__output.push('\n      <th class="fte-leaderEntry-total-prodFunction" colspan="'),__output.push(Object.keys(totalByProdFunction[t].companies).length*(divisions.length||1)),__output.push('">'),__output.push(round(totalByProdFunction[t].total)),__output.push("\n      ")}),__output.push("\n    </tr>\n    <tr>\n      "),Object.keys(totalByCompany).forEach(function(t){__output.push('\n      <th class="fte-leaderEntry-column-company even" colspan="'),__output.push(divisions.length),__output.push('">'),__output.push(totalByCompany[t].name),__output.push("\n      ")}),__output.push("\n      "),Object.keys(totalByProdFunction).forEach(function(t){__output.push("\n      "),Object.keys(totalByProdFunction[t].companies).forEach(function(t){__output.push('\n      <th class="fte-leaderEntry-column-company" colspan="'),__output.push(divisions.length),__output.push('">'),__output.push(escape(totalByCompany[t].name)),__output.push("\n      ")}),__output.push("\n      ")}),__output.push("\n    </tr>\n    <tr>\n      "),Object.keys(totalByCompany).forEach(function(t){__output.push('\n      <th class="fte-leaderEntry-total-company" colspan="'),__output.push(divisions.length),__output.push('">'),__output.push(round(totalByCompany[t].total)),__output.push("\n      ")}),__output.push("\n      "),Object.keys(totalByProdFunction).forEach(function(t){__output.push("\n      "),Object.keys(totalByProdFunction[t].companies).forEach(function(e){__output.push('\n      <th class="fte-leaderEntry-total-prodFunction-company" colspan="'),__output.push(divisions.length),__output.push('">'),__output.push(round(totalByProdFunction[t].companies[e].total)),__output.push("\n      ")}),__output.push("\n      ")}),__output.push("\n    </tr>\n    "),divisions.length&&(__output.push("\n    <tr>\n      "),Object.keys(totalByCompany).forEach(function(){__output.push("\n      "),divisions.forEach(function(t){__output.push('\n      <th class="fte-leaderEntry-column-division">'),__output.push(t),__output.push("\n      ")}),__output.push("\n      ")}),__output.push("\n      "),Object.keys(totalByProdFunction).forEach(function(t){__output.push("\n      "),Object.keys(totalByProdFunction[t].companies).forEach(function(){__output.push("\n      "),divisions.forEach(function(t){__output.push('\n      <th class="fte-leaderEntry-column-division">'),__output.push(t),__output.push("\n      ")}),__output.push("\n      ")}),__output.push("\n      ")}),__output.push("\n    </tr>\n    <tr>\n      "),Object.keys(totalByCompany).forEach(function(t){__output.push("\n      "),divisions.forEach(function(e){__output.push('\n      <th class="fte-leaderEntry-total-division">'),__output.push(round(totalByCompany[t].divisions[e])),__output.push("\n      ")}),__output.push("\n      ")}),__output.push("\n      "),Object.keys(totalByProdFunction).forEach(function(t){__output.push("\n      "),Object.keys(totalByProdFunction[t].companies).forEach(function(e){__output.push("\n      "),divisions.forEach(function(n){__output.push('\n      <th class="fte-leaderEntry-total-prodFunction-division">'),__output.push(round(totalByProdFunction[t].companies[e].divisions[n])),__output.push("\n      ")}),__output.push("\n      ")}),__output.push("\n      ")}),__output.push("\n    </tr>\n    ")),__output.push("\n  </thead>\n  <tbody>\n    "),tasks.forEach(function(t){__output.push('\n    <tr class="'),__output.push(t.parent?"is-child":t.hasChildren?"is-parent":"is-single"),__output.push(" "),__output.push(t.lastChild?"is-last-child":""),__output.push('">\n      <td class="fte-leaderEntry-cell-task">\n        '),t.parent&&(__output.push("\n        "),__output.push(t.lastChild?"‚îó":"‚î£"),__output.push("\n        ")),__output.push("\n        "),__output.push(escape(t.name)),__output.push("\n      </td>\n      "),Object.keys(t.totalByCompany).forEach(function(e){__output.push("\n      "),t.fteDiv?(__output.push("\n      "),divisions.forEach(function(n){__output.push("\n      <td>"),__output.push(round(t.totalByCompany[e].divisions[n])),__output.push("</td>\n      ")}),__output.push("\n      ")):(__output.push('\n      <td colspan="'),__output.push(divisions.length),__output.push('">'),__output.push(round(t.totalByCompany[e].total)),__output.push("</td>\n      ")),__output.push("\n      ")}),__output.push("\n      "),t.functions.forEach(function(e){__output.push("\n      "),e.companies.forEach(function(e){__output.push("\n      "),t.fteDiv?(__output.push("\n      "),e.count.forEach(function(t){__output.push("\n      <td>"),__output.push(round(t.value)),__output.push("</td>\n      ")}),__output.push("\n      ")):(__output.push('\n      <td colspan="'),__output.push(divisions.length),__output.push('">'),__output.push(round(e.count)),__output.push("</td>\n      ")),__output.push("\n      ")}),__output.push("\n      ")}),__output.push("\n    </tr>\n    ")}),__output.push("\n  </tbody>\n</table>\n");return __output.join("")}}),define("app/fte/views/FteLeaderEntryDetailsPrintableView",["underscore","app/core/views/PrintableListView","app/fte/templates/printableLeaderEntryListWoFunctions","app/fte/templates/printableLeaderEntryListWFunctions","../util/fractions"],function(t,e,n,r,i){"use strict";return e.extend({template:function(t){return null===t.totalByProdFunction?n(t):r(t)},serialize:function(){return t.extend(this.model.serializeWithTotals(),{round:i.round})},afterRender:function(){}})}),define("app/fte/pages/FteLeaderEntryDetailsPrintablePage",["app/time","app/i18n","app/data/subdivisions","app/data/views/renderOrgUnitPath","app/core/util/bindLoadingMessage","app/core/View","../FteLeaderEntry","../views/FteLeaderEntryDetailsPrintableView"],function(t,e,n,r,i,o,s,a){"use strict";return o.extend({layoutName:"print",pageId:"fteLeaderEntryDetailsPrintable",landscape:!0,hdLeft:function(){var t=n.get(this.model.get("subdivision"));return e("fte","print:hdLeft",{subdivision:t?r(t,!1,!1):"?"})},hdRight:function(){return e("fte","print:hdRight",{date:t.format(this.model.get("date"),"YYYY-MM-DD"),shift:e("core","SHIFT:"+this.model.get("shift"))})},initialize:function(){this.model=i(new s({_id:this.options.modelId}),this),this.view=new a({model:this.model})},load:function(t){return t(this.model.fetch())}})}),define("app/nls/fte",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:leader:browse":function(){return"FTE (warehouse)"},"BREADCRUMBS:master:browse":function(){return"FTE (production)"},"BREADCRUMBS:addForm":function(){return"Choosing"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:details":function(){return"Resources"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the FTE data :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the specific FTE data :("},"MSG:DELETED":function(t){return"FTE entry <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:print":function(){return"Show printable version"},"PAGE_ACTION:add":function(){return"Allocate resources"},"PAGE_ACTION:edit":function(){return"Edit entry"},"PAGE_ACTION:delete":function(){return"Delete entry"},"PAGE_ACTION:export":function(){return"Export entries"},"filter:date":function(){return"Date"},"filter:shift":function(){return"Shift"},"filter:submit":function(){return"Filter entries"},"addForm:panel:title":function(){return"FTE entry find/create form"},"addForm:copy":function(){return"Copy the values from the previous entry for the specified shift."},"addForm:submit":function(){return"Allocate resources"},"addForm:msg:offline":function(){return"Cannot allocate FTE: no connection with the server :("},"addForm:msg:failure":function(t){return"Failed to find/create the FTE entry for editing: "+e.s(t,"error",{AUTH:"no privileges!",INPUT:"invalid input data!",other:e.v(t,"error")})},"property:date":function(){return"Date"},"property:shift":function(){return"Shift"},label:function(t){return e.v(t,"subdivision")+", "+e.v(t,"date")+", "+e.v(t,"shift")+" shift"},"panel:info":function(){return"All changes are saved on-the-fly."},"leaderEntry:panel:title":function(){return"Resource allocation"},"leaderEntry:panel:title:editable":function(){return"Resource allocation form"},"leaderEntry:column:task":function(){return"Production task"},"leaderEntry:column:taskTotal":function(){return"Total"},"leaderEntry:column:companyTotal":function(){return"Total"},"masterEntry:tasksPanel:title":function(){return"Resource allocation"},"masterEntry:tasksPanel:title:editable":function(){return"Resource allocation form"},"masterEntry:absencePanel:title":function(){return"Personnel absence"},"masterEntry:absencePanel:title:editable":function(){return"Personnel absence form"},"masterEntry:column:task":function(){return"Production flow/<em>Production task</em>"},"masterEntry:column:noPlan":function(){return"No plan?"},"masterEntry:column:total":function(){return"Total"},"print:hdLeft":function(t){return"FTE allocated to "+e.v(t,"subdivision")},"print:hdRight":function(t){return e.v(t,"date")+", "+e.v(t,"shift")+" shift"},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"FTE entry deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete FTE entry"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen FTE entry?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> FTE entry?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the FTE entry :-("}},pl:!0}}),define("app/nls/pl/fte",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"FTE"},"BREADCRUMBS:leader:browse":function(){return"FTE (magazyn)"},"BREADCRUMBS:master:browse":function(){return"FTE (produkcja)"},"BREADCRUMBS:addForm":function(){return"Wybieranie wpisu"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:details":function(){return"Zasoby"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie danych FTE nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie danych FTE nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Wpis FTE <em>"+e.v(t,"label")+"</em> zosta≈Ç usuniƒôty."},"PAGE_ACTION:print":function(){return"Poka≈º wersjƒô do druku"},"PAGE_ACTION:add":function(){return"Przydzielaj zasoby"},"PAGE_ACTION:edit":function(){return"Edytuj wpis"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ wpis"},"PAGE_ACTION:export":function(){return"Eksportuj wpisy"},"filter:date":function(){return"Data"},"filter:shift":function(){return"Zmiana"},"filter:submit":function(){return"Filtruj wpisy"},"addForm:panel:title":function(){return"Formularz wyszukiwania/tworzenia wpisu FTE"},"addForm:copy":function(){return"Kopiuj warto≈õci z poprzedniego wpisu wybranej zmiany"},"addForm:submit":function(){return"Przydzielaj zasoby"},"addForm:msg:offline":function(){return"Nie mo≈ºna przydzielaƒá zasob√≥w: brak po≈ÇƒÖczenia z serwerem :("},"addForm:msg:failure":function(t){return"Nie uda≈Ço siƒô znale≈∫ƒá/utworzyƒá wpisu do edycji: "+e.s(t,"error",{AUTH:"brak uprawnie≈Ñ!",INPUT:"nieprawid≈Çowe dane wej≈õciowe!",other:e.v(t,"error")})},"property:date":function(){return"Data"},"property:shift":function(){return"Zmiana"},label:function(t){return e.v(t,"subdivision")+", "+e.v(t,"date")+", "+e.v(t,"shift")+" zmiana"},"panel:info":function(){return"Wszystkie zmiany w formularzu zapisywane sƒÖ na bie≈ºƒÖco."},"leaderEntry:panel:title":function(){return"Podzia≈Ç zasob√≥w"},"leaderEntry:panel:title:editable":function(){return"Formularz przydzielania zasob√≥w"},"leaderEntry:column:task":function(){return"Zadanie produkcyjne"},"leaderEntry:column:taskTotal":function(){return"Suma"},"leaderEntry:column:companyTotal":function(){return"Suma"},"masterEntry:tasksPanel:title":function(){return"Podzia≈Ç zasob√≥w"},"masterEntry:tasksPanel:title:editable":function(){return"Formularz przydzielania zasob√≥w"},"masterEntry:absencePanel:title":function(){return"Absencja personalna"},"masterEntry:absencePanel:title:editable":function(){return"Formularz absencji personalnej"},"masterEntry:column:task":function(){return"Przep≈Çyw/<em>Zadanie produkcyjne</em>"},"masterEntry:column:noPlan":function(){return"Brak planu?"},"masterEntry:column:total":function(){return"Suma"},"print:hdLeft":function(t){return"Zasoby przydzielone do "+e.v(t,"subdivision")},"print:hdRight":function(t){return e.v(t,"date")+", "+e.v(t,"shift")+" zmiana"},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia wpisu FTE"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ wpis FTE"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany wpis FTE?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wpis FTE <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá wpisu FTE :-("}}}),define("app/fte/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","./FteMasterEntry","./FteLeaderEntry","./pages/FteMasterEntryListPage","./pages/FteMasterEntryAddFormPage","./pages/FteMasterEntryEditFormPage","./pages/FteMasterEntryDetailsPage","./pages/FteMasterEntryDetailsPrintablePage","./pages/FteLeaderEntryListPage","./pages/FteLeaderEntryAddFormPage","./pages/FteLeaderEntryEditFormPage","./pages/FteLeaderEntryDetailsPage","./pages/FteLeaderEntryDetailsPrintablePage","i18n!app/nls/fte"],function(t,e,n,r,i,o,s,a,u,c,l,p,d,h,f,m){"use strict";var _=n.auth("FTE:MASTER:VIEW"),g=n.auth("FTE:MASTER:MANAGE","PROD_DATA:MANAGE"),v=n.auth("FTE:LEADER:VIEW"),y=n.auth("FTE:LEADER:MANAGE","PROD_DATA:MANAGE");t.map("/fte/master",_,function(t){e.showPage(new s({rql:t.rql}))}),t.map("/fte/master;add",g,function(){e.showPage(new a)
}),t.map("/fte/master/:id",_,function(t){e.showPage(new c({modelId:t.params.id}))}),t.map("/fte/master/:id;edit",g,function(t){e.showPage(new u({modelId:t.params.id}))}),t.map("/fte/master/:id;print",_,function(t){e.showPage(new l({modelId:t.params.id}))}),t.map("/fte/master/:id;delete",g,r.bind(null,i)),t.map("/fte/leader",v,function(t){e.showPage(new p({rql:t.rql}))}),t.map("/fte/leader;add",y,function(){e.showPage(new d)}),t.map("/fte/leader/:id",v,function(t){e.showPage(new f({modelId:t.params.id}))}),t.map("/fte/leader/:id;edit",y,function(t){e.showPage(new h({modelId:t.params.id}))}),t.map("/fte/leader/:id;print",v,function(t){e.showPage(new m({modelId:t.params.id}))}),t.map("/fte/leader/:id;delete",y,r.bind(null,o))}),define("app/hourlyPlans/HourlyPlan",["../i18n","../time","../data/divisions","../data/views/renderOrgUnitPath","../core/Model"],function(t,e,n,r,i){"use strict";return i.extend({urlRoot:"/hourlyPlans",clientUrlRoot:"#hourlyPlans",topicPrefix:"hourlyPlans",privilegePrefix:"HOURLY_PLANS",nlsDomain:"hourlyPlans",defaults:{division:null,date:null,shift:null,flows:null,createdAt:null,creator:null,updatedAt:null,updater:null},getLabel:function(){return this.get("division")+", "+e.format(this.get("date"),"LL")},serialize:function(){var i=n.get(this.get("division"));return{division:i?r(i,!1,!1):"?",date:e.format(this.get("date"),"LL"),shift:t("core","SHIFT:"+this.get("shift")),flows:this.get("flows")}},isEditable:function(t){if(t.isAllowedTo("PROD_DATA:MANAGE"))return!0;if(!t.isAllowedTo(this.getPrivilegePrefix()+":MANAGE"))return!1;var e=Date.parse(this.get("createdAt"));if(Date.now()>=e+288e5)return!1;var n=t.getDivision();if(!n||t.isAllowedTo(this.getPrivilegePrefix()+":ALL"))return!0;var r=this.get("division");return r===n.id},handleUpdateMessage:function(t){var e=this.get("flows");if(e){var n=e[t.flowIndex];if(n){if("plan"===t.type)n.noPlan=t.newValue,n.level=0,n.hours=n.hours.map(function(){return 0});else{if("count"!==t.type)return;"number"==typeof t.hourIndex?n.hours[t.hourIndex]=t.newValue:n.level=t.newValue}this.trigger("change:flows"),this.trigger("change")}}}})}),define("app/hourlyPlans/HourlyPlanCollection",["app/user","../core/Collection","./HourlyPlan"],function(t,e,n){"use strict";return e.extend({model:n,rqlQuery:function(e){var n,r=t.getDivision();return r&&"prod"===r.get("type")&&(n={name:"and",args:[{name:"eq",args:["division",r.id]}]}),e.Query.fromObject({fields:{division:1,date:1,shift:1,createdAt:1,creator:1},sort:{date:-1},limit:15,selector:n})}})}),define("app/hourlyPlans/views/HourlyPlanListView",["app/time","app/i18n","app/user","app/data/divisions","app/data/views/renderOrgUnitPath","app/core/views/ListView"],function(t,e,n,r,i,o){"use strict";return o.extend({className:"is-clickable",remoteTopics:{"hourlyPlans.created":"refreshCollection","hourlyPlans.deleted":"onModelDeleted"},serializeColumns:function(){return[{id:"division",className:"is-min",label:e("core","ORG_UNIT:division")},{id:"date",className:"is-min",label:e("hourlyPlans","property:date")},{id:"shift",label:e("hourlyPlans","property:shift")}]},serializeActions:function(){var t=this.collection;return function(r){var i=t.get(r._id),s=[o.actions.viewDetails(i),{icon:"print",label:e("core","LIST:ACTION:print"),href:i.genClientUrl("print")}];return i.isEditable(n)&&s.push(o.actions.edit(i),o.actions["delete"](i)),s}},serializeRows:function(){return this.collection.map(function(n){var o=r.get(n.get("division")),s=n.toJSON();return s.division=o?i(o,!1,!1):"?",s.date=t.format(s.date,"LL"),s.shift=e("core","SHIFT:"+s.shift),s})}})}),define("app/hourlyPlans/pages/HourlyPlanListPage",["app/i18n","app/user","app/core/util/bindLoadingMessage","app/core/util/pageActions","app/core/View","../HourlyPlanCollection","../views/HourlyPlanListView","app/fte/views/FteEntryFilterView","app/core/templates/listPage"],function(t,e,n,r,i,o,s,a,u){"use strict";return i.extend({template:u,layoutName:"page",pageId:"hourlyPlanList",breadcrumbs:[t.bound("hourlyPlans","BREADCRUMBS:browse")],actions:function(n){return[{label:t.bound("hourlyPlans","PAGE_ACTION:add"),href:"#hourlyPlans;add",icon:"plus",privileges:function(){return e.isAllowedTo("HOURLY_PLANS:MANAGE","PROD_DATA:MANAGE")}},r["export"](n,this,this.collection)]},initialize:function(){this.defineModels(),this.defineViews(),this.setView(".filter-container",this.filterView),this.setView(".list-container",this.listView)},defineModels:function(){this.collection=n(new o(null,{rqlQuery:this.options.rql}),this)},defineViews:function(){this.filterView=new a({model:{rqlQuery:this.collection.rqlQuery},divisionOnly:!0,divisionFilter:function(t){return"prod"===t.get("type")}}),this.listView=new s({collection:this.collection}),this.listenTo(this.filterView,"filterChanged",this.refreshList)},load:function(t){return t(this.collection.fetch({reset:!0}))},refreshList:function(t){this.collection.rqlQuery=t,this.listView.refreshCollectionNow();var e=t.toString();this.broker.publish("router.navigate",{url:this.collection.genClientUrl()+"?"+e,trigger:!1,replace:!0})}})}),define("app/hourlyPlans/templates/addForm",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="panel panel-primary">\n  <div class="panel-heading">\n    '),__output.push(t("hourlyPlans","addForm:panel:title")),__output.push('\n  </div>\n  <div class="panel-body">\n    <div class="form-group orgUnitDropdowns-container"></div>\n    <div class="form-group">\n      <label for="'),__output.push(idPrefix),__output.push('-date" class="control-label is-required">'),__output.push(t("hourlyPlans","property:date")),__output.push('</label>\n      <input id="'),__output.push(idPrefix),__output.push('-date" class="form-control" type="date" value="'),__output.push(date),__output.push('" max="'),__output.push(date),__output.push('" min="2013-12-01" required>\n    </div>\n  </div>\n  <div class="panel-footer">\n    <button class="btn btn-primary">\n      <i class="fa fa-plus"></i>\n      <span>'),__output.push(t("hourlyPlans","addForm:submit")),__output.push("</span>\n    </button>\n  </div>\n</form>\n");return __output.join("")}}),define("app/hourlyPlans/views/HourlyPlanAddFormView",["app/i18n","app/time","app/viewport","app/user","app/data/divisions","app/data/views/OrgUnitDropdownsView","app/core/Model","app/core/View","app/core/util/getShiftStartInfo","app/hourlyPlans/templates/addForm"],function(t,e,n,r,i,o,s,a,u,c){"use strict";var l=o.ORG_UNIT;return a.extend({template:c,events:{submit:"submitForm"},initialize:function(){this.readonlyDivision=!1,this.$submit=null,this.oudView=new o({orgUnit:l.DIVISION,divisionFilter:function(t){return"prod"===t.get("type")},allowClear:!0,noGrid:!0,required:!0}),this.setView(".orgUnitDropdowns-container",this.oudView)},destroy:function(){null!==this.$submit&&(this.$submit.remove(),this.$submit=null)},serialize:function(){return{idPrefix:this.idPrefix,date:u(new Date).moment.format("YYYY-MM-DD")}},afterRender:function(){var t=this,e=r.getDivision();this.$submit=this.$(".btn-primary").attr("disabled",!0),this.listenToOnce(this.oudView,"afterRender",function(){t.oudView.$id("division").on("change",function(e){t.$submit.attr("disabled",""===e.val||null===e.val)});var n=null,i=null;null!==e&&(i=l.DIVISION,n=new s({division:e.id})),t.oudView.selectValue(n,i),t.readonlyDivision=!r.isAllowedTo("HOURLY_PLANS:ALL")&&e,t.oudView.$id("division").select2("readonly",t.readonlyDivision),t.readonlyDivision?t.$submit.focus():t.oudView.$id("division").select2("focus")})},submitForm:function(e){if(e.preventDefault(),!this.socket.isConnected())return n.msg.show({type:"error",time:5e3,text:t("hourlyPlans","addForm:msg:offline")});var r=this,i=this.oudView.$id("division"),o=this.$submit.find("i").removeClass("fa-edit").addClass("fa-spinner fa-spin");i.select2("readonly",!0),this.$submit.attr("disabled",!0);var s={division:i.select2("val"),date:new Date(this.$id("date").val()+" 00:00:00"),shift:1};this.socket.emit("hourlyPlans.findOrCreate",s,function(e,s){return s&&r.model.set("_id",s),e?"AUTH"===e.message&&s?r.trigger("uneditable",r.model):(o.removeClass("fa-spinner fa-spin").addClass("fa-edit"),i.select2("readonly",r.readonlyDivision),r.$submit.attr("disabled",!1).focus(),n.msg.show({type:"error",time:5e3,text:t("hourlyPlans","addForm:msg:failure",{error:e.message})})):void r.trigger("editable",r.model)})}})}),define("app/hourlyPlans/pages/HourlyPlanAddFormPage",["app/i18n","app/core/View","../HourlyPlan","../views/HourlyPlanAddFormView"],function(t,e,n,r){"use strict";return e.extend({layoutName:"page",pageId:"hourlyPlanAddForm",breadcrumbs:function(){return[{label:t.bound("hourlyPlans","BREADCRUMBS:browse"),href:this.model.genClientUrl("base")},t.bound("hourlyPlans","BREADCRUMBS:addForm")]},initialize:function(){this.model=new n,this.view=new r({model:this.model}),this.listenTo(this.view,"editable",function(t){this.broker.publish("router.navigate",{url:t.genClientUrl("edit"),trigger:!0})}),this.listenTo(this.view,"uneditable",function(t){this.broker.publish("router.navigate",{url:t.genClientUrl(),trigger:!0})})}})}),define("app/hourlyPlans/templates/entry",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div>\n  <div class="well">\n    <div class="fte-property">\n      <span class="fte-property-name">'),__output.push(t("core","ORG_UNIT:division")),__output.push('</span>\n      <span class="fte-property-value">'),__output.push(division),__output.push('</span>\n    </div>\n    <div class="fte-property">\n      <span class="fte-property-name">'),__output.push(t("hourlyPlans","property:date")),__output.push('</span>\n      <span class="fte-property-value">'),__output.push(date),__output.push('</span>\n    </div>\n    <div class="fte-property">\n      <span class="fte-property-name">'),__output.push(t("hourlyPlans","property:shift")),__output.push('</span>\n      <span class="fte-property-value">'),__output.push(shift),__output.push('</span>\n    </div>\n  </div>\n  <div class="panel panel-primary">\n    <div class="panel-heading">'),__output.push(t("hourlyPlans","panel:title"+(editable?":editable":""))),__output.push("</div>\n    "),editable&&(__output.push('\n    <div class="message message-inline message-info">'),__output.push(t("hourlyPlans","panel:info")),__output.push("</div>\n    ")),__output.push('\n    <table class="table table-bordered table-condensed table-hover hourlyPlan">\n      <thead>\n      <tr>\n        <th>'),__output.push(t("hourlyPlans","column:flow")),__output.push('\n        <th class="hourlyPlan-column-noPlan even">'),__output.push(t("hourlyPlans","column:noPlan")),__output.push('\n        <th class="hourlyPlan-column-level">'),__output.push(t("hourlyPlans","column:level")),__output.push("\n        "),[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,0,1,2,3,4,5].forEach(function(t,e){__output.push('\n        <th class="hourlyPlan-column-'),__output.push(e),__output.push(" "),__output.push(e%2?"":"even"),__output.push('">\n          <span>'),__output.push(10>t?"0":""),__output.push(t),__output.push("<!--:00-"),__output.push(23===t?"00":(10>t+1?"0":"")+(t+1)),__output.push(":00//--></span>\n        ")}),__output.push("\n      <tbody>\n      "),flows.forEach(function(t,e){__output.push("\n      <tr>\n        <td>"),__output.push(escape(t.name)),__output.push('\n        <td class="even '),editable&&__output.push("hourlyPlan-noPlan-container"),__output.push('" data-column="noPlan">\n          '),editable?(__output.push('\n          <input class="hourlyPlan-noPlan" type="checkbox" data-flow="'),__output.push(e),__output.push('" '),__output.push(t.noPlan?"checked":""),__output.push(">\n          ")):(__output.push('\n          <i class="fa fa-'),__output.push(t.noPlan?"check":"times"),__output.push('"></i>\n          ')),__output.push('\n        <td data-column="level">\n          '),editable?(__output.push('\n          <input\n            class="form-control hourlyPlan-count"\n            name="level"\n            type="text"\n            min="0"\n            max="9999"\n            value="'),__output.push(t.level),__output.push('"\n            data-value="'),__output.push(t.level),__output.push('"\n            data-flow="'),__output.push(e),__output.push('"\n            '),__output.push(t.noPlan?"disabled":""),__output.push(">\n          ")):(__output.push("\n          "),__output.push(t.level),__output.push("\n          ")),__output.push("\n        "),t.hours.forEach(function(n,r){__output.push('\n        <td class="hourlyPlan-cell-count '),__output.push(r%2?"":"even"),__output.push('" data-column="'),__output.push(r),__output.push('">\n          '),editable?(__output.push('\n          <input\n            class="form-control hourlyPlan-count"\n            name="hour"\n            type="text"\n            min="0"\n            max="9999"\n            value="'),__output.push(n),__output.push('"\n            data-value="'),__output.push(n),__output.push('"\n            data-flow="'),__output.push(e),__output.push('"\n            data-hour="'),__output.push(r),__output.push('"\n            '),__output.push(t.noPlan?"disabled":""),__output.push(">\n          ")):(__output.push("\n          "),__output.push(n),__output.push("\n          ")),__output.push("\n        ")}),__output.push("\n      ")}),__output.push("\n    </table>\n  </div>\n</div>\n");return __output.join("")}}),define("app/hourlyPlans/views/HourlyPlanEditFormView",["underscore","app/user","app/core/View","app/core/util/onModelDeleted","app/hourlyPlans/templates/entry"],function(t,e,n,r,i){"use strict";return n.extend({template:i,events:{"change .hourlyPlan-count":"updateCount","keyup .hourlyPlan-count":"updateCount","change .hourlyPlan-noPlan":"updatePlan","click .hourlyPlan-noPlan-container":function(t){t.target.classList.contains("hourlyPlan-noPlan-container")&&this.$(t.target).find(".hourlyPlan-noPlan").click()},"focus .hourlyPlan-count, .hourlyPlan-noPlan":function(t){this.focused=[t.target.parentNode,t.target.parentNode.parentNode.children[0],this.el.querySelector(".hourlyPlan-column-"+t.target.parentNode.dataset.column)],this.$(this.focused).addClass("is-focused")},"blur .hourlyPlan-count, .hourlyPlan-noPlan":function(){this.$(this.focused).removeClass("is-focused")}},remoteTopics:function(){var t={};return t["hourlyPlans.updated."+this.model.id]="onRemoteEdit",t["hourlyPlans.deleted"]="onModelDeleted",t},initialize:function(){this.focused=[]},destroy:function(){this.focused=null},afterRender:function(){this.listenToOnce(this.model,"change",this.render),this.focusFirstEnabledInput()},serialize:function(){return t.extend(this.model.serialize(),{editable:!0})},focusNextInput:function(t){var e=t.closest("td").next("td");if(e.length)return e.find("input").select();var n=t.closest("tr").next();return n.length?void this.focusNextEnabledInput(n):this.focusFirstEnabledInput()},focusFirstEnabledInput:function(){var t=this.el.querySelector(".hourlyPlan-noPlan:not(:checked)");t&&this.$(t).closest("tr").find(".hourlyPlan-count").first().select()},focusNextEnabledInput:function(t){return t.length?t.find(".hourlyPlan-noPlan:checked").length?this.focusNextEnabledInput(t.next()):void t.find(".hourlyPlan-count").first().select():this.focusFirstEnabledInput()},toggleCountsInRow:function(t,e){var n=this.$(this.el.ownerDocument.activeElement).closest("tr"),r=this.$(".hourlyPlan > tbody > :last-child"),i=t.closest("tr"),o=i.find(".hourlyPlan-count").attr("disabled",t[0].checked);return t[0].checked?(o.val("0").attr("data-value","0"),e?i[0]===n[0]?i[0]===r[0]?this.focusFirstEnabledInput():this.focusNextEnabledInput(i):void 0:i[0]===r[0]?this.focusFirstEnabledInput():this.focusNextEnabledInput(i)):void(e||i.find(".hourlyPlan-count").first().select())},updatePlan:function(t){var e={type:"plan",socketId:this.socket.getId(),_id:this.model.id,flowIndex:parseInt(t.target.getAttribute("data-flow"),10),newValue:t.target.checked},n=this.$(t.target),r=this;this.toggleCountsInRow(n),this.socket.emit("hourlyPlans.updatePlan",e,function(e){e&&(t.target.checked=!t.target.checked,r.toggleCountsInRow(n),r.trigger("remoteError",e))})},updateCount:function(t){if(13===t.which)return this.focusNextInput(this.$(t.target));var e=parseInt(t.target.getAttribute("data-value"),10)||0,n=parseInt(t.target.value,10)||0;if(e!==n){var r=t.target.getAttribute("data-flow")+":"+t.target.getAttribute("data-hour")+":"+t.target.getAttribute("name");this.timers[r]&&clearTimeout(this.timers[r]),this.timers[r]=setTimeout(this.doUpdateCount.bind(this),250,t.target,r,e,n)}},doUpdateCount:function(t,e,n,r){delete this.timers[e];var i=t.getAttribute("data-remote"),o={type:"count",socketId:this.socket.getId(),_id:this.model.id,newValue:r,flowIndex:parseInt(t.getAttribute("data-flow"),10)};"hour"===t.name&&(o.hourIndex=parseInt(t.getAttribute("data-hour"),10)),t.setAttribute("data-value",o.newValue),t.setAttribute("data-remote","false");var s=this;this.socket.emit("hourlyPlans.updateCount",o,function(e){e&&("true"!==t.getAttribute("data-remote")&&(t.value=n,t.setAttribute("data-value",n),t.setAttribute("data-remote",i)),s.trigger("remoteError",e))})},onRemoteEdit:function(t){if(t.socketId!==this.socket.getId())switch(t.type){case"plan":return this.handlePlanChange(t);case"count":return this.handleCountChange(t)}},handlePlanChange:function(t){var e='.hourlyPlan-noPlan[data-flow="'+t.flowIndex+'"]',n=this.$(e);n.length&&(n.prop("checked",t.newValue),this.toggleCountsInRow(n,!0))},handleCountChange:function(t){var e=".hourlyPlan-count[data-flow="+t.flowIndex+"]";e+="number"==typeof t.hourIndex?"[data-hour="+t.hourIndex+"]":"[name=level]";var n=this.$(e);n.length&&(n.val(t.newValue),n.attr({"data-value":t.newValue,"data-remote":"true"}))},onModelDeleted:function(t){r(this.broker,this.model,t)}})}),define("app/hourlyPlans/pages/HourlyPlanEditFormPage",["app/i18n","app/core/util/bindLoadingMessage","app/core/View","../HourlyPlan","../views/HourlyPlanEditFormView"],function(t,e,n,r,i){"use strict";return n.extend({layoutName:"page",pageId:"hourlyPlanEditForm",breadcrumbs:function(){return[{label:t.bound("hourlyPlans","BREADCRUMBS:browse"),href:this.model.genClientUrl("base")},{label:this.model.getLabel(),href:this.model.genClientUrl()},t.bound("hourlyPlans","BREADCRUMBS:editForm")]},initialize:function(){this.model=e(new r({_id:this.options.modelId}),this),this.view=new i({model:this.model}),this.listenTo(this.view,"remoteError",function(t){"AUTH"===t.message&&this.broker.publish("router.navigate",{url:this.model.genClientUrl(),trigger:!0,replace:!0})})},load:function(t){return t(this.model.fetch())}})}),define("app/hourlyPlans/views/HourlyPlanDetailsView",["underscore","app/core/View","app/core/util/onModelDeleted","app/hourlyPlans/templates/entry"],function(t,e,n,r){"use strict";return e.extend({template:r,remoteTopics:function(){var t={};return t["hourlyPlans.updated."+this.model.id]=this.model.handleUpdateMessage.bind(this.model),t["hourlyPlans.deleted"]=this.onModelDeleted.bind(this),t},serialize:function(){return t.extend(this.model.serialize(),{editable:!1})},beforeRender:function(){this.stopListening(this.model,"change",this.render)},afterRender:function(){this.listenToOnce(this.model,"change",this.render)},onModelDeleted:function(t){n(this.broker,this.model,t)}})}),define("app/hourlyPlans/pages/HourlyPlanDetailsPage",["app/i18n","app/user","app/core/util/bindLoadingMessage","app/core/util/pageActions","app/core/View","../HourlyPlan","../views/HourlyPlanDetailsView"],function(t,e,n,r,i,o,s){"use strict";return i.extend({layoutName:"page",pageId:"hourlyPlanDetails",breadcrumbs:function(){return[{label:t.bound("hourlyPlans","BREADCRUMBS:browse"),href:this.model.genClientUrl("base")},this.model.getLabel()]},actions:function(){var n=[{label:t.bound("hourlyPlans","PAGE_ACTION:print"),icon:"print",href:this.model.genClientUrl("print")}];return this.model.isEditable(e)&&n.push(r.edit(this.model),r["delete"](this.model)),n},initialize:function(){this.model=n(new o({_id:this.options.modelId}),this),this.view=new s({model:this.model})},load:function(t){return t(this.model.fetch())}})}),define("app/hourlyPlans/templates/printableList",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<table class="table table-bordered table-condensed table-hover hourlyPlan">\n  <thead>\n  <tr>\n    <th>'),__output.push(t("hourlyPlans","column:flow")),__output.push("\n    <th>"),__output.push(t("hourlyPlans","column:noPlan")),__output.push("\n    <th>"),__output.push(t("hourlyPlans","column:level")),__output.push("\n    "),[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,0,1,2,3,4,5].forEach(function(t){__output.push("\n    <th>"),__output.push(10>t?"0":""),__output.push(t),__output.push("\n    ")}),__output.push("\n    <tbody>\n    "),flows.forEach(function(t){__output.push("\n    <tr>\n      <td>"),__output.push(escape(t.name)),__output.push('\n      <td><i class="fa fa-'),__output.push(t.noPlan?"check":"times"),__output.push('"></i>\n      <td>'),__output.push(t.level),__output.push("\n      "),t.hours.forEach(function(t){__output.push("\n      <td>"),__output.push(t),__output.push("\n      ")}),__output.push("\n    ")}),__output.push("\n</table>\n");return __output.join("")}}),define("app/hourlyPlans/views/HourlyPlanDetailsPrintableView",["app/core/views/PrintableListView","app/hourlyPlans/templates/printableList"],function(t,e){"use strict";return t.extend({template:e,serialize:function(){return this.model.serialize()},afterRender:function(){}})}),define("app/hourlyPlans/pages/HourlyPlanDetailsPrintablePage",["app/time","app/i18n","app/data/divisions","app/data/views/renderOrgUnitPath","app/core/util/bindLoadingMessage","app/core/View","../HourlyPlan","../views/HourlyPlanDetailsPrintableView"],function(t,e,n,r,i,o,s,a){"use strict";return o.extend({layoutName:"print",pageId:"hourlyPlanDetailsPrintable",hdLeft:function(){var t=n.get(this.model.get("division"));return e("hourlyPlans","print:hdLeft",{division:t?r(t,!1,!1):"?"})},hdRight:function(){return e("hourlyPlans","print:hdRight",{date:t.format(this.model.get("date"),"YYYY-MM-DD"),shift:e("core","SHIFT:"+this.model.get("shift"))})},initialize:function(){this.model=i(new s({_id:this.options.modelId}),this),this.view=new a({model:this.model})},load:function(t){return t(this.model.fetch())}})}),define("app/nls/hourlyPlans",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Hourly plans"},"BREADCRUMBS:addForm":function(){return"Choosing"},"BREADCRUMBS:editForm":function(){return"Planning"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the hourly plans :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the hourly plan :("},"MSG:DELETED":function(t){return"Hourly plan <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:print":function(){return"Show printable version"},"PAGE_ACTION:add":function(){return"Plan"},"PAGE_ACTION:edit":function(){return"Edit hourly plan"},"PAGE_ACTION:delete":function(){return"Delete hourly plan"},"PAGE_ACTION:export":function(){return"Export hourly plans"},"panel:title":function(){return"Hourly plan"},"panel:title:editable":function(){return"Hourly plan edit form"},"panel:info":function(){return"All changes are saved on-the-fly. Planned quantities will be divided among the working Production lines one minute after the last change!"},"column:flow":function(){return"Production flow"},"column:noPlan":function(){return"No<br>plan?"},"column:level":function(){return"Level"},"property:shift":function(){return"Shift"},"property:date":function(){return"Date"},"print:hdLeft":function(t){return"Hourly plan for "+e.v(t,"division")},"print:hdRight":function(t){return e.v(t,"date")+", "+e.v(t,"shift")+" shift"},"addForm:panel:title":function(){return"Hourly plan find/create form"},"addForm:submit":function(){return"Plan"},"addForm:msg:offline":function(){return"Cannot plan: no connection to the server :("},"addForm:msg:failure":function(t){return"Failed to find/create the hourly plan for editing: "+e.s(t,"error",{AUTH:"no privileges!",INPUT:"invalid input data!",other:e.v(t,"error")})},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Hourly plan deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete hourly plan"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen hourly plan?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> hourly plan?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the hourly plan :-("}},pl:!0}}),define("app/nls/pl/hourlyPlans",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Plany godzinowe"},"BREADCRUMBS:addForm":function(){return"Wybieranie planu"},"BREADCRUMBS:editForm":function(){return"Planowanie"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie plan√≥w godzinowych nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie planu godzinowego nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Plan godzinowy <em>"+e.v(t,"label")+"</em> zosta≈Ç usuniƒôty."},"PAGE_ACTION:print":function(){return"Poka≈º wersjƒô do druku"},"PAGE_ACTION:add":function(){return"Planuj"},"PAGE_ACTION:edit":function(){return"Edytuj plan"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ plan"},"PAGE_ACTION:export":function(){return"Eksportuj plany godzinowe"},"panel:title":function(){return"Plan godzinowy"},"panel:title:editable":function(){return"Formularz edycji planu godzinowego"},"panel:info":function(){return"Wszystkie zmiany w formularzu zapisywane sƒÖ na bie≈ºƒÖco. Planowane ilo≈õci rozdzielone zostanƒÖ dla pracujƒÖcych Linii produkcyjnych minutƒô po ostatniej zmianie!"},"column:flow":function(){return"Przep≈Çyw"},"column:noPlan":function(){return"Brak<br>planu?"},"column:level":function(){return"Poziom"},"property:shift":function(){return"Zmiana"},"property:date":function(){return"Data"},"print:hdLeft":function(t){return"Plan godzinowy dla "+e.v(t,"division")},"print:hdRight":function(t){return e.v(t,"date")+", "+e.v(t,"shift")+" zmiana"},"addForm:panel:title":function(){return"Formularz wyszukiwania/tworzenia planu godzinowego"},"addForm:submit":function(){return"Planuj"},"addForm:msg:offline":function(){return"Nie mo≈ºna planowaƒá: brak po≈ÇƒÖczenia z serwerem :("},"addForm:msg:failure":function(t){return"Nie uda≈Ço siƒô znale≈∫ƒá/utworzyƒá wpisu do edycji: "+e.s(t,"error",{AUTH:"brak uprawnie≈Ñ!",INPUT:"nieprawid≈Çowe dane wej≈õciowe!",other:e.v(t,"error")})},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia planu godzinowego"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ plan godzinowy"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany plan godzinowy?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá plan godzinowy <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá planu godzinowego :-("}}}),define("app/hourlyPlans/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","./HourlyPlan","./pages/HourlyPlanListPage","./pages/HourlyPlanAddFormPage","./pages/HourlyPlanEditFormPage","./pages/HourlyPlanDetailsPage","./pages/HourlyPlanDetailsPrintablePage","i18n!app/nls/hourlyPlans"],function(t,e,n,r,i,o,s,a,u,c){"use strict";var l=n.auth("HOURLY_PLANS:VIEW"),p=n.auth("HOURLY_PLANS:MANAGE","PROD_DATA:MANAGE");t.map("/hourlyPlans",l,function(t){e.showPage(new o({rql:t.rql}))}),t.map("/hourlyPlans;add",p,function(){e.showPage(new s)}),t.map("/hourlyPlans/:id",l,function(t){e.showPage(new u({modelId:t.params.id}))}),t.map("/hourlyPlans/:id;edit",p,function(t){e.showPage(new a({modelId:t.params.id}))}),t.map("/hourlyPlans/:id;print",l,function(t){e.showPage(new c({modelId:t.params.id}))}),t.map("/hourlyPlans/:id;delete",p,r.bind(null,i))}),define("app/orders/Operation",["../core/Model"],function(t){"use strict";var e=["machineSetupTime","machineTime","laborSetupTime","laborTime"];return t.extend({defaults:{no:null,workCenter:null,name:null,qty:null,unit:null,machineSetupTime:-1,machineTime:-1,laborSetupTime:-1,laborTime:-1},toJSON:function(){var n=t.prototype.toJSON.call(this);return n.qty&&(n.qtyUnit=n.qty,n.unit&&(n.qtyUnit+=" "+n.unit)),e.forEach(function(t){-1===n[t]&&(n[t]=null)}),n}})}),define("app/orders/OperationCollection",["../core/Collection","./Operation"],function(t,e){"use strict";return t.extend({model:e})}),define("app/mechOrders/MechOrder",["../time","../core/Model","app/orders/OperationCollection"],function(t,e,n){"use strict";return e.extend({urlRoot:"/mechOrders",clientUrlRoot:"#mechOrders",topicPrefix:"mechOrders",privilegePrefix:"ORDERS",nlsDomain:"mechOrders",labelAttribute:"_id",defaults:{name:null,mrp:null,materialNorm:null,operations:null,importTs:null},parse:function(t,r){return t=e.prototype.parse.call(this,t,r),t.operations=new n(t.operations),t},toJSON:function(){var n=e.prototype.toJSON.call(this);return n.importTs&&(n.importTs=t.format(n.importTs,"YYYY-MM-DD HH:mm:ss")),n.operations=null===n.operations?[]:n.operations.toJSON(),n}})}),define("app/mechOrders/MechOrderCollection",["../core/Collection","./MechOrder"],function(t,e){"use strict";return t.extend({model:e,rqlQuery:function(t){return t.Query.fromObject({fields:{name:1,mrp:1,materialNorm:1},limit:15,sort:{_id:1}})}})}),define("app/mechOrders/views/MechOrderListView",["underscore","jquery","app/i18n","app/user","app/viewport","app/data/mrpControllers","app/core/views/ListView"],function(t,e,n,r,i,o,s){"use strict";return s.extend({className:"is-clickable",localTopics:{"mrpControllers.synced":"render"},remoteTopics:{"mechOrders.synced":"refreshCollection","mechOrders.edited":function(t){var e=t.model,n=this.collection.get(e._id);n&&e.mrp!==n.get("mrp")&&(n.set("mrp",e.mrp),this.$(".list-item[data-id="+n.id+"] > td[data-id=mrp]").html(this.prepareMrpCell(e.mrp)))}},events:t.extend(s.prototype.events,{"click .mechOrders-editMrp":"showMrpEditor"}),columns:[{id:"_id",className:"is-min"},"name","mrp",{id:"materialNorm",className:"is-min"}],serializeActions:function(){var t=this.collection;
return function(e){return[s.actions.viewDetails(t.get(e._id))]}},serializeRows:function(){var t=this,e=r.isAllowedTo("ORDERS:MANAGE");return this.collection.map(function(n){var r=n.toJSON();return e&&(r.mrp=t.prepareMrpCell(r.mrp)),r})},prepareMrpCell:function(t){var e="";return t&&(e+="<span>"+t+"</span>"),e+=' <button class="btn btn-link mechOrders-editMrp">'+n("mechOrders","list:mrp:"+(t?"edit":"set"))+"</button>"},showMrpEditor:function(t){var r=this.$(t.target).closest("td"),i=this.collection.get(r.parent().attr("data-id")),s=this,a=e('<input type="text">');r.empty().append(a),a.select2({allowClear:!0,placeholder:n("mechOrders","list:mrp:placeholder"),data:o.map(function(t){return{id:t.id,text:t.getLabel()}})}),a.on("change",function(t){var e=t.val.length?t.val:null;return e===i.get("mrp")?r.html(s.prepareMrpCell(e)):(r.html('<i class="fa fa-spinner fa-spin"></i><span>'+e+"</span>"),s.updateMrp(i,e,r),void r.parent().next("tr").find(".mechOrders-editMrp").focus())}),a.select2("open")},updateMrp:function(t,e,r){var o=t.get("mrp"),s=Date.now(),a=this.promised(t.save("mrp",e,{patch:!0})),u=this;a.then(function(){u.delay(500,s,function(){r.html(u.prepareMrpCell(e))})}),a.fail(function(){t.set("mrp",o),r.html(u.prepareMrpCell(o)),i.msg.show({type:"error",time:3e3,text:n("mechOrders","list:mrp:failure",{nc12:t.id})})})},delay:function(t,e,n){var r=Date.now()-e;r>t?n():this.timers[Math.random()]=setTimeout(n,t-r)}})}),define("app/mechOrders/templates/filter",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="well filter-form">\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-_id">'),__output.push(t("mechOrders","PROPERTY:_id")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-_id" class="form-control mechOrders-filter-_id" name="_id" type="text" maxlength="12" placeholder="'),__output.push(t("mechOrders","filter:placeholder:_id")),__output.push('">\n  </div>\n  '),__output.push(renderLimit()),__output.push('\n  <div class="form-group filter-actions">\n    <button type="submit" class="btn btn-default"><i class="fa fa-filter"></i><span>'),__output.push(escape(t("mechOrders","filter:submit"))),__output.push("</span></button>\n  </div>\n</form>\n");return __output.join("")}}),define("app/mechOrders/views/MechOrderFilterView",["app/core/views/FilterView","app/mechOrders/templates/filter"],function(t,e){"use strict";return t.extend({template:e,defaultFormData:{_id:""},termToForm:{_id:function(t,e,n){var r=e.args[1];n[t]="string"==typeof r?r.replace(/[^0-9a-zA-Z]/g,""):""}},serializeFormToQuery:function(t){this.serializeRegexTerm(t,"_id",12)}})}),define("app/mechOrders/templates/import",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="mechOrders-import">\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-file">'),__output.push(t("mechOrders","import:file")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-file" name="mechOrders" class="form-control" type="file" autofocus>\n  </div>\n  <div class="form-actions">\n    <button type="submit" class="btn btn-primary">'),__output.push(t("mechOrders","import:submit")),__output.push('</button>\n    <button type="button" class="cancel btn btn-link">'),__output.push(t("mechOrders","import:cancel")),__output.push("</button>\n  </div>\n</form>\n");return __output.join("")}}),define("app/mechOrders/views/MechOrderImportView",["app/i18n","app/viewport","app/core/View","app/mechOrders/templates/import"],function(t,e,n,r){"use strict";return n.extend({template:r,events:{submit:"upload"},onDialogShown:function(t){this.closeDialog=t.closeDialog.bind(t)},closeDialog:function(){},upload:function(n){n.preventDefault();var r=this.$("[type=submit]").attr("disabled",!0),i=new FormData(this.el),o=this.ajax({type:"POST",url:"/mechOrders;import",data:i,processData:!1,contentType:!1}),s=this.closeDialog;o.then(function(){e.msg.show({type:"info",time:2500,text:t("mechOrders","import:msg:success")}),s()}),o.fail(function(){e.msg.show({type:"error",time:5e3,text:t("mechOrders","import:msg:failure")})}),o.always(function(){r.attr("disabled",!1)})}})}),define("app/mechOrders/pages/MechOrderListPage",["app/i18n","app/viewport","app/core/util/bindLoadingMessage","app/core/View","../MechOrderCollection","../views/MechOrderListView","../views/MechOrderFilterView","../views/MechOrderImportView","app/core/templates/listPage"],function(t,e,n,r,i,o,s,a,u){"use strict";return r.extend({template:u,layoutName:"page",pageId:"mechOrderList",breadcrumbs:[t.bound("mechOrders","BREADCRUMBS:browse")],actions:[{label:t.bound("mechOrders","PAGE_ACTION:import"),icon:"refresh",privileges:"ORDERS:MANAGE",callback:function(){return e.showDialog(new a,t("mechOrders","import:title")),!1}}],initialize:function(){this.defineModels(),this.defineViews(),this.setView(".filter-container",this.filterView),this.setView(".list-container",this.listView)},defineModels:function(){this.collection=n(new i(null,{rqlQuery:this.options.rql}),this)},defineViews:function(){this.filterView=new s({model:{rqlQuery:this.collection.rqlQuery}}),this.listView=new o({collection:this.collection}),this.listenTo(this.filterView,"filterChanged",this.refreshList)},load:function(t){return t(this.collection.fetch({reset:!0}))},refreshList:function(t){this.collection.rqlQuery=t,this.listView.refreshCollectionNow(),this.broker.publish("router.navigate",{url:this.collection.genClientUrl()+"?"+t,trigger:!1,replace:!0})}})}),define("app/orders/templates/operationList",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="panel panel-default orders-operations">\n  <div class="panel-heading">'),__output.push(t("orders","PANEL:TITLE:operations")),__output.push("</div>\n  "),operations.length?(__output.push('\n  <table class="table table-condensed table-hover table-bordered">\n    <thead>\n      <tr>\n        <th class="is-min">'),__output.push(t("orders","PROPERTY:operations.no")),__output.push('\n        <th class="is-min">'),__output.push(t("orders","PROPERTY:operations.workCenter")),__output.push("\n        <th>"),__output.push(t("orders","PROPERTY:operations.name")),__output.push('\n        <th class="is-min">'),__output.push(t("orders","PROPERTY:operations.qty")),__output.push('\n        <th class="is-min">'),__output.push(t("orders","PROPERTY:operations.machineSetupTime")),__output.push('\n        <th class="is-min">'),__output.push(t("orders","PROPERTY:operations.laborSetupTime")),__output.push('\n        <th class="is-min">'),__output.push(t("orders","PROPERTY:operations.machineTime")),__output.push('\n        <th class="is-min">'),__output.push(t("orders","PROPERTY:operations.laborTime")),__output.push("\n      </tr>\n    </thead>\n    <tbody>\n      "),operations.forEach(function(t){__output.push('\n      <tr class="'),__output.push(t.no===highlighted?"info":""),__output.push('">\n        <td class="is-min is-number">'),__output.push(escape(t.no||"-")),__output.push('\n        <td class="is-min">'),__output.push(escape(t.workCenter||"-")),__output.push("\n        <td>"),__output.push(escape(t.name||"-")),__output.push('\n        <td class="is-min is-number">'),__output.push(escape(t.qtyUnit||"-")),__output.push('\n        <td class="is-min is-number">'),__output.push(escape(t.machineSetupTime||"-")),__output.push('\n        <td class="is-min is-number">'),__output.push(escape(t.laborSetupTime||"-")),__output.push('\n        <td class="is-min is-number">'),__output.push(escape(t.machineTime||"-")),__output.push('\n        <td class="is-min is-number">'),__output.push(escape(t.laborTime||"-")),__output.push("\n      </tr>\n      ")}),__output.push("\n    </tbody>\n  </table>\n  ")):(__output.push('\n  <div class="panel-body">\n    '),__output.push(t("orders","OPERATIONS:NO_DATA")),__output.push("\n  </div>\n  ")),__output.push("\n</div>\n");return __output.join("")}}),define("app/orders/views/OperationListView",["app/core/View","app/orders/templates/operationList"],function(t,e){"use strict";function n(t,e){t[e]&&t[e].toLocaleString&&(t[e]=t[e].toLocaleString())}return t.extend({template:e,serialize:function(){return{operations:this.model.get("operations").toJSON().map(function(t){return n(t,"machineSetupTime"),n(t,"laborSetupTime"),n(t,"machineTime"),n(t,"laborTime"),t}).sort(function(t,e){return t.no-e.no}),highlighted:this.options.highlighted}},afterRender:function(){this.listenToOnce(this.model,"change:operations",this.render)}})}),define("app/mechOrders/templates/details",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="panel panel-'),__output.push(panelType),__output.push(' mechOrders-details">\n  <div class="panel-heading">'),__output.push(panelTitle),__output.push('</div>\n  <div class="panel-details">\n    <div class="props first">\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("mechOrders","PROPERTY:_id")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model._id||model.nc12)),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("mechOrders","PROPERTY:name")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model.name||"-")),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("mechOrders","PROPERTY:materialNorm")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model.materialNorm||"-")),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("mechOrders","PROPERTY:mrp")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model.mrp||"-")),__output.push("</div>\n      </div>\n      "),model.importTs&&(__output.push('\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("mechOrders","PROPERTY:importTs")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model.importTs)),__output.push("</div>\n      </div>\n      ")),__output.push("\n    </div>\n  </div>\n</div>\n");return __output.join("")}}),define("app/mechOrders/views/MechOrderDetailsView",["app/i18n","app/core/views/DetailsView","app/mechOrders/templates/details"],function(t,e,n){"use strict";return e.extend({template:n,serialize:function(){return{model:this.model.toJSON(),panelType:this.options.panelType||"primary",panelTitle:this.options.panelTitle||t("mechOrders","PANEL:TITLE:details")}}})}),define("app/mechOrders/templates/detailsPage",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div>\n  <div class="mechOrders-details-container"></div>\n  <div class="mechOrders-operations-container"></div>\n</div>\n');return __output.join("")}}),define("app/mechOrders/pages/MechOrderDetailsPage",["app/core/util/bindLoadingMessage","app/core/pages/DetailsPage","../MechOrder","app/orders/views/OperationListView","app/mechOrders/views/MechOrderDetailsView","app/mechOrders/templates/detailsPage"],function(t,e,n,r,i,o){"use strict";return e.extend({template:o,pageId:"mechOrderDetails",actions:[],initialize:function(){this.model=t(new n({_id:this.options.modelId}),this),this.detailsView=new i({model:this.model}),this.operationsView=new r({model:this.model}),this.setView(".mechOrders-details-container",this.detailsView),this.setView(".mechOrders-operations-container",this.operationsView)},load:function(t){return t(this.model.fetch())}})}),define("app/nls/mechOrders",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Mechanical orders"},"MSG:LOADING_FAILURE":function(){return"Failed to load the orders :("},"PAGE_ACTION:import":function(){return"Import orders"},"PANEL:TITLE:details":function(){return"Order's details"},"PANEL:TITLE:operations":function(){return"Order's operations"},"PROPERTY:_id":function(){return"12NC"},"PROPERTY:name":function(){return"Product name"},"PROPERTY:importTs":function(){return"Imported at"},"PROPERTY:mrp":function(){return"MRP Controller"},"PROPERTY:materialNorm":function(){return"Material norm [kg]"},"OPERATIONS:NO_DATA":function(){return"Order does not have any operations."},"filter:placeholder:_id":function(){return"Any 12NC"},"filter:submit":function(){return"Filter orders"},"import:title":function(){return"Import orders"},"import:file":function(){return"CSV file with the orders:"},"import:submit":function(){return"Import orders"},"import:cancel":function(){return"Cancel"},"import:msg:success":function(){return"Orders were imported successfully :)"},"import:msg:failure":function(){return"Failed to import the orders :("},"list:mrp:set":function(){return"(choose MRP Controller)"},"list:mrp:edit":function(){return"(change MRP Controller)"},"list:mrp:placeholder":function(){return"Choose MRP Controller..."},"list:mrp:failure":function(t){return"Failed to change the MRP Controller for the <em>"+e.v(t,"nc12")+"</em> order :("}},pl:!0}}),define("app/nls/pl/mechOrders",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Zlecenia dzia≈Çu mechanicznego"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie zlece≈Ñ nie powiod≈Ço siƒô :("},"PAGE_ACTION:import":function(){return"Importuj zlecenia"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy zlecenia"},"PANEL:TITLE:operations":function(){return"Lista operacji zlecenia"},"PROPERTY:_id":function(){return"12NC"},"PROPERTY:name":function(){return"Nazwa wyrobu"},"PROPERTY:importTs":function(){return"Czas zaimportowania"},"PROPERTY:mrp":function(){return"Kontroler MRP"},"PROPERTY:materialNorm":function(){return"Norma materia≈Çowa [kg]"},"OPERATIONS:NO_DATA":function(){return"Zlecenie nie ma zdefiniowanych ≈ºadnych operacji."},"filter:placeholder:_id":function(){return"Dowolny 12NC"},"filter:submit":function(){return"Filtruj zlecenia"},"import:title":function(){return"Importowanie zlece≈Ñ"},"import:file":function(){return"Plik CSV ze zleceniami:"},"import:submit":function(){return"Importuj zlecenia"},"import:cancel":function(){return"Anuluj"},"import:msg:success":function(){return"Importowanie zlece≈Ñ przebieg≈Ço pomy≈õlnie :)"},"import:msg:failure":function(){return"Nie uda≈Ço siƒô zaimportowaƒá zlece≈Ñ :("},"list:mrp:set":function(){return"(wybierz kontroler MRP)"},"list:mrp:edit":function(){return"(zmie≈Ñ kontroler MRP)"},"list:mrp:placeholder":function(){return"Wybierz kontroler MRP..."},"list:mrp:failure":function(t){return"Nie uda≈Ço siƒô zmieniƒá kontrolera MRP dla zlecenia <em>"+e.v(t,"nc12")+"</em> :("}}}),define("app/mechOrders/routes",["../router","../viewport","../user","./pages/MechOrderListPage","./pages/MechOrderDetailsPage","i18n!app/nls/mechOrders"],function(t,e,n,r,i){"use strict";var o=n.auth("ORDERS:VIEW");t.map("/mechOrders",o,function(t){e.showPage(new r({rql:t.rql}))}),t.map("/mechOrders/:id",o,function(t){e.showPage(new i({modelId:t.params.id}))})}),define("app/nls/mrpControllers",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"MRP Controllers"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the MRP Controllers :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the MRP Controller :("},"MSG:DELETED":function(t){return"MRP Controller <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add MRP Controller"},"PAGE_ACTION:edit":function(){return"Edit MRP Controller"},"PAGE_ACTION:delete":function(){return"Delete MRP Controller"},"PAGE_ACTION:toggleDeactivated":function(){return"Hide deactivated"},"PANEL:TITLE:details":function(){return"MRP Controller's details"},"PANEL:TITLE:addForm":function(){return"Add MRP Controller form"},"PANEL:TITLE:editForm":function(){return"Edit MRP Controller form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:description":function(){return"Label"},"PROPERTY:division":function(){return"Division"},"PROPERTY:subdivision":function(){return"Subdivision"},"PROPERTY:deactivatedAt":function(){return"Deactivated at"},"PROPERTY:replacedBy":function(){return"Replaced by"},"PROPERTY:inout":function(){return"Area"},"inout:-1":function(){return"Outdoor"},"inout:0":function(){return"Not applicable"},"inout:1":function(){return"Indoor"},"FORM:ACTION:add":function(){return"Add MRP Controller"},"FORM:ACTION:edit":function(){return"Edit MRP Controller"},"FORM:ERROR:addFailure":function(){return"Failed to add the new MRP Controller :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the MRP Controller :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"MRP Controller deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete MRP Controller"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen MRP Controller?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> MRP Controller?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the MRP Controller :-("}},pl:!0}}),define("app/nls/pl/mrpControllers",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Kontrolery MRP"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie kontroler√≥w MRP nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie kontrolera MRP nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Kontroler MRP <em>"+e.v(t,"label")+"</em> zosta≈Ço usuniƒôte."},"PAGE_ACTION:add":function(){return"Dodaj kontroler MRP"},"PAGE_ACTION:edit":function(){return"Edytuj kontroler MRP"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ kontroler MRP"},"PAGE_ACTION:toggleDeactivated":function(){return"Ukryj dezaktywowane"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy kontrolera MRP"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania kontrolera MRP"},"PANEL:TITLE:editForm":function(){return"Formularz edycji kontrolera MRP"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:description":function(){return"Opis"},"PROPERTY:division":function(){return"Wydzia≈Ç"},"PROPERTY:subdivision":function(){return"Dzia≈Ç"},"PROPERTY:deactivatedAt":function(){return"Data dezaktywacji"},"PROPERTY:replacedBy":function(){return"ZastƒÖpiony przez"},"PROPERTY:inout":function(){return"Obszar"},"inout:-1":function(){return"Outdoor"},"inout:0":function(){return"Nie dotyczy"},"inout:1":function(){return"Indoor"},"FORM:ACTION:add":function(){return"Dodaj kontroler MRP"},"FORM:ACTION:edit":function(){return"Edytuj kontroler MRP"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá kontrolera MRP :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá kontrolera MRP :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia kontrolera MRP"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ kontroler MRP"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany kontroler MRP?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá kontroler MRP <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá kontrolera MRP :-("}}}),define("app/mrpControllers/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","../data/mrpControllers","./MrpController","i18n!app/nls/mrpControllers"],function(t,e,n,r,i,o){"use strict";var s=n.auth("DICTIONARIES:VIEW"),a=n.auth("DICTIONARIES:MANAGE");t.map("/mrpControllers",s,function(){e.loadPage(["app/mrpControllers/pages/MrpControllerListPage"],function(t){return new t({collection:i})})}),t.map("/mrpControllers/:id",function(t){e.loadPage(["app/mrpControllers/pages/MrpControllerDetailsPage"],function(e){return new e({model:new o({_id:t.params.id})})})}),t.map("/mrpControllers;add",a,function(){e.loadPage(["app/core/pages/AddFormPage","app/mrpControllers/views/MrpControllerFormView"],function(t,e){return new t({FormView:e,model:new o})})}),t.map("/mrpControllers/:id;edit",a,function(t){e.loadPage(["app/core/pages/EditFormPage","app/mrpControllers/views/MrpControllerFormView"],function(e,n){return new e({FormView:n,model:new o({_id:t.params.id})})})}),t.map("/mrpControllers/:id;delete",a,r.bind(null,o))}),define("app/data/createOnDemandStorage",["app/time","app/broker","app/pubsub"],function(t,e,n){"use strict";return function(t){function e(){s=null,null!==o&&(i.destroy(),i=null,o=null)}function r(t,e){var n=e.getTopicPrefix();t.subscribe(n+".added",function(t){e.add(t.model)}),t.subscribe(n+".edited",function(t){var n=e.get(t.model._id);n?n.set(t.model):e.add(t.model)}),t.subscribe(n+".deleted",function(t){e.remove(t.model._id)})}var i=null,o=null,s=null;return{acquire:function(){return null!==s&&(clearTimeout(s),s=null),null===o&&(i=n.sandbox(),o=t(i),r(i,o)),o},release:function(){null!==s&&clearTimeout(s),s=setTimeout(e,3e4)}}}}),define("app/delayReasons/storage",["../data/createOnDemandStorage","./DelayReasonCollection"],function(t,e){"use strict";return t(function(){return new e(null,{paginate:!1})})}),define("app/orders/Document",["../core/Model"],function(t){"use strict";return t.extend({idAttribute:"nc15",labelAttribute:"name"})}),define("app/orders/DocumentCollection",["../core/Collection","./Document"],function(t,e){"use strict";return t.extend({model:e})}),define("app/orders/Order",["../time","../core/Model","./OperationCollection","./DocumentCollection"],function(t,e,n,r){"use strict";return e.extend({urlRoot:"/orders",clientUrlRoot:"#orders",topicPrefix:"orders",privilegePrefix:"ORDERS",nlsDomain:"orders",labelAttribute:"_id",defaults:{nc12:null,name:null,mrp:null,qty:null,unit:null,startDate:null,finishDate:null,statuses:null,operations:null,createdAt:null,updatedAt:null},parse:function(t,i){return t=e.prototype.parse.call(this,t,i),t.operations=new n(t.operations),t.documents=new r(t.documents),t},toJSON:function(){var n=e.prototype.toJSON.call(this);return n.startDate&&(n.startDateText=t.format(n.startDate,"LL")),n.finishDate&&(n.finishDateText=t.format(n.finishDate,"LL")),n.qty&&n.unit&&(n.qtyUnit=n.qty+" "+n.unit),n.createdAt&&(n.createdAtText=t.format(n.createdAt,"LLLL")),n.updatedAt&&(n.updatedAtText=t.format(n.updatedAt,"LLLL")),n.operations=n.operations?n.operations.toJSON():[],Array.isArray(n.documents)||(n.documents=n.documents&&n.documents.toJSON?n.documents.toJSON():[]),n}})}),define("app/orders/OrderCollection",["../core/Collection","./Order"],function(t,e){"use strict";return t.extend({model:e,rqlQuery:function(t){var e=new Date;return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),t.Query.fromObject({fields:{nc12:1,name:1,mrp:1,qty:1,unit:1,startDate:1,finishDate:1,statuses:1,delayReason:1},limit:15,sort:{finishDate:1},selector:{name:"and",args:[{name:"ge",args:["finishDate",e.getTime()]}]}})}})}),define("app/orderStatuses/OrderStatus",["../core/Model"],function(t){"use strict";return t.extend({urlRoot:"/orderStatuses",clientUrlRoot:"#orderStatuses",topicPrefix:"orderStatuses",privilegePrefix:"DICTIONARIES",nlsDomain:"orderStatuses",labelAttribute:"_id",defaults:{label:null,color:"#999999"},toJSON:function(){var e=t.prototype.toJSON.call(this);return e.label||(e.label=e._id),e}})}),define("app/orderStatuses/OrderStatusCollection",["../core/Collection","./OrderStatus"],function(t,e){"use strict";return t.extend({model:e,rqlQuery:"select(label,color)&sort(_id)",findAndFill:function(t){var n=this;return Array.isArray(t)?t.map(function(t){var r=n.get(t);return r||(r=new e({_id:t})),r.toJSON()}):[]}})}),define("app/data/orderStatuses",["app/orderStatuses/OrderStatusCollection","./createStorage"],function(t,e){"use strict";return e("ORDER_STATUSES","orderStatuses",t)}),define("app/orderStatuses/util/renderOrderStatusLabel",["app/core/templates/colorLabel"],function(t){"use strict";return function(e){return t({className:"orderStatus",label:e._id,title:e.label,color:e.color})}}),define("app/orders/views/OrderListView",["app/i18n","app/user","app/core/views/ListView","app/data/orderStatuses","app/orderStatuses/util/renderOrderStatusLabel"],function(t,e,n,r,i){"use strict";return n.extend({className:"is-clickable",localTopics:{"orderStatuses.synced":"render"},remoteTopics:{"orders.synced":"refreshCollection","orders.updated.*":function(t){this.collection.get(t._id)&&this.refreshCollection()}},columns:[{id:"_id",className:"is-min"},{id:"nc12",className:"is-min"},"name",{id:"mrp",className:"is-min"},{id:"qtyUnit",label:t.bound("orders","PROPERTY:qty"),className:"is-min"},{id:"startDateText",label:t.bound("orders","PROPERTY:startDate"),className:"is-min"},{id:"finishDateText",label:t.bound("orders","PROPERTY:finishDate"),className:"is-min"},{id:"delayReason",className:"is-min"},{id:"statusLabels",label:t.bound("orders","PROPERTY:statuses")}],serializeActions:function(){var t=this.collection;return function(e){return[n.actions.viewDetails(t.get(e._id))]}},serializeRows:function(){var t=this.delayReasons;return this.collection.map(function(e){var n=e.toJSON(),o=t.get(n.delayReason);return n.statusLabels=r.findAndFill(n.statuses).map(i).join(""),n.delayReason=o?o.getLabel():"-",n})}})}),define("app/orders/templates/filter",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="well filter-form">\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-_id">'),__output.push(t("orders","PROPERTY:_id")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-_id" class="form-control orders-filter-_id" name="_id" type="text" minlength="4" maxlength="10" placeholder="'),__output.push(t("orders","filter:placeholder:_id")),__output.push('">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-nc12">'),__output.push(t("orders","PROPERTY:nc12")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-nc12" class="form-control orders-filter-nc12" name="nc12" type="text" minlength="3" maxlength="12" placeholder="'),__output.push(t("orders","filter:placeholder:nc12")),__output.push('">\n  </div>\n  <div class="form-group form-group-dateRange">\n    <div>\n      <label class="radio-inline">\n        <input name="date" type="radio" value="startDate">\n        '),__output.push(t("orders","PROPERTY:startDate")),__output.push('\n      </label><label class="radio-inline">\n        <input name="date" type="radio" value="finishDate">\n        '),__output.push(t("orders","PROPERTY:finishDate")),__output.push('\n      </label>\n    </div>\n    <div>\n      <label for="'),__output.push(idPrefix),__output.push('-from">'),__output.push(t("core","filter:date:from")),__output.push('</label>\n      <input id="'),__output.push(idPrefix),__output.push('-from" class="form-control" name="from" type="date" placeholder="YYYY-MM-DD">\n      <label for="'),__output.push(idPrefix),__output.push('-to" class="control-label">'),__output.push(t("core","filter:date:to")),__output.push('</label>\n      <input id="'),__output.push(idPrefix),__output.push('-to" class="form-control" name="to" type="date" placeholder="YYYY-MM-DD">\n    </div>\n  </div>\n  '),__output.push(renderLimit()),__output.push('\n  <div class="form-group filter-actions">\n    <button type="submit" class="btn btn-default"><i class="fa fa-filter"></i><span>'),__output.push(escape(t("orders","filter:submit"))),__output.push("</span></button>\n  </div>\n</form>\n");return __output.join("")}}),define("app/orders/views/OrderFilterView",["underscore","app/core/util/fixTimeRange","app/core/views/FilterView","app/orders/templates/filter"],function(t,e,n,r){"use strict";return n.extend({template:r,events:t.extend({},n.prototype.events,{"change #-from":function(t){var e=this.$id("to");"true"!==e.attr("data-changed")&&e.val(t.target.value)},"change #-to":function(t){t.target.setAttribute("data-changed","true")}}),defaultFormData:{_id:"",nc12:"",date:"finishDate",from:"",to:""},termToForm:{startDate:function(t,n,r){r.date=t,e.toFormData(r,n,"date")
},_id:function(t,e,n){var r=e.args[1];n[t]="string"==typeof r?r.replace(/[^0-9]/g,""):"-"},nc12:"_id",finishDate:"startDate"},serializeFormToQuery:function(t,n){var r=e.fromView(this),i=this.$("input[name=date]:checked").val();this.serializeRegexTerm(t,"_id",9),this.serializeRegexTerm(t,"nc12",12),r.from&&t.push({name:"ge",args:[i,r.from]}),r.to&&t.push({name:"le",args:[i,r.to]}),n.sort="finishDate"===i?{finishDate:1}:{startDate:1}}})}),define("app/orders/pages/OrderListPage",["app/i18n","app/core/util/bindLoadingMessage","app/core/View","app/delayReasons/storage","../OrderCollection","../views/OrderListView","../views/OrderFilterView","app/core/templates/listPage"],function(t,e,n,r,i,o,s,a){"use strict";return n.extend({template:a,layoutName:"page",pageId:"orderList",breadcrumbs:[t.bound("orders","BREADCRUMBS:browse")],actions:function(){return[{label:t.bound("orders","PAGE_ACTION:settings"),icon:"cogs",privileges:"ORDERS:MANAGE",href:"#orders;settings"}]},initialize:function(){this.defineModels(),this.defineViews(),this.setView(".filter-container",this.filterView),this.setView(".list-container",this.listView)},destroy:function(){r.release()},defineModels:function(){this.collection=e(new i(null,{rqlQuery:this.options.rql}),this),this.delayReasons=e(r.acquire(),this)},defineViews:function(){this.filterView=new s({model:{rqlQuery:this.collection.rqlQuery}}),this.listView=new o({collection:this.collection,delayReasons:this.delayReasons}),this.listenTo(this.filterView,"filterChanged",this.refreshList)},load:function(t){return t(this.collection.fetch({reset:!0}),this.delayReasons.isEmpty()?this.delayReasons.fetch({reset:!0}):null)},afterRender:function(){r.acquire()},refreshList:function(t){this.collection.rqlQuery=t,this.listView.refreshCollectionNow(),this.broker.publish("router.navigate",{url:this.collection.genClientUrl()+"?"+t,trigger:!1,replace:!0})}})}),define("app/orders/templates/details",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="panel panel-'),__output.push(panelType),__output.push(' orders-details">\n  <div class="panel-heading">'),__output.push(panelTitle),__output.push('</div>\n  <div class="panel-details row">\n    <div class="col-md-4">\n      <div class="props first">\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("orders","PROPERTY:_id")),__output.push('</div>\n          <div class="prop-value">\n            '),linkOrderNo&&model._id?(__output.push('\n            <a href="#orders/'),__output.push(escape(model._id)),__output.push('" title="'),__output.push(t("orders","details:showMoreLink")),__output.push('">'),__output.push(escape(model._id)),__output.push("</a>\n            ")):(__output.push("\n            "),__output.push(escape(model._id||"-")),__output.push("\n            ")),__output.push('\n          </div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("orders","PROPERTY:nc12")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.nc12||"-")),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("orders","PROPERTY:name")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.name||"-")),__output.push('</div>\n        </div>\n      </div>\n    </div>\n    <div class="col-md-4">\n      <div class="props">\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("orders","PROPERTY:mrp")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.mrp||"-")),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("orders","PROPERTY:qty")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.qtyUnit||"-")),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("orders","PROPERTY:statuses")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model.statusLabels),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("orders","PROPERTY:delayReason")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model.delayReason||"-"),__output.push('</div>\n        </div>\n      </div>\n    </div>\n    <div class="col-md-4">\n      <div class="props">\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("orders","PROPERTY:startDate")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.startDateText||"-")),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("orders","PROPERTY:finishDate")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.finishDateText||"-")),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("orders","PROPERTY:createdAt")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.createdAtText||"-")),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("orders","PROPERTY:updatedAt")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.updatedAtText||"-")),__output.push("</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n");return __output.join("")}}),define("app/orders/views/OrderDetailsView",["app/i18n","app/core/views/DetailsView","app/data/orderStatuses","app/orders/templates/details","app/orderStatuses/util/renderOrderStatusLabel"],function(t,e,n,r,i){"use strict";return e.extend({template:r,localTopics:{"orderStatuses.synced":"render"},serialize:function(){var e=this.model.toJSON(),r=this.delayReasons.get(e.delayReason);return e.statusLabels=n.findAndFill(e.statuses).map(i).join(""),e.delayReason=r?r.getLabel():null,{model:e,panelType:this.options.panelType||"primary",panelTitle:this.options.panelTitle||t("orders","PANEL:TITLE:details"),linkOrderNo:!!this.options.linkOrderNo}}})}),define("app/orders/templates/documentList",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="panel panel-default orders-documents">\n  <div class="panel-heading">'),__output.push(t("orders","PANEL:TITLE:documents")),__output.push("</div>\n  "),documents.length?(__output.push('\n  <table class="table table-condensed table-hover table-bordered">\n    <thead>\n      <tr>\n        <th class="is-min">'),__output.push(t("orders","PROPERTY:documents.nc15")),__output.push("\n        <th>"),__output.push(t("orders","PROPERTY:documents.name")),__output.push("\n      </tr>\n    </thead>\n    <tbody>\n      "),documents.forEach(function(t){__output.push('\n      <tr>\n        <td class="is-min is-number">'),__output.push(escape(t.nc15)),__output.push("\n        <td>"),__output.push(escape(t.name)),__output.push("\n      </tr>\n      ")}),__output.push("\n    </tbody>\n  </table>\n  ")):(__output.push('\n  <div class="panel-body">\n    '),__output.push(t("orders","DOCUMENTS:NO_DATA")),__output.push("\n  </div>\n  ")),__output.push("\n</div>\n");return __output.join("")}}),define("app/orders/views/DocumentListView",["app/core/View","app/orders/templates/documentList"],function(t,e){"use strict";return t.extend({template:e,serialize:function(){return{documents:this.model.get("documents").toJSON()}},beforeRender:function(){this.stopListening(this.model,"change:documents",this.render)},afterRender:function(){this.listenToOnce(this.model,"change:documents",this.render)}})}),define("app/orders/templates/commentForm",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="orders-commentForm">\n  <div class="form-group has-required-select2">\n    <label for="'),__output.push(idPrefix),__output.push('-delayReason" class="control-label">'),__output.push(t("orders","commentForm:delayReason")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-delayReason" type="text" name="delayReason">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-comment" class="control-label is-required">'),__output.push(t("orders","commentForm:comment")),__output.push('</label>\n    <textarea id="'),__output.push(idPrefix),__output.push('-comment" class="form-control" name="comment" rows="3" required></textarea>\n  </div>\n  <button id="'),__output.push(idPrefix),__output.push('-submit-comment" type="submit" class="btn btn-primary"><i class="fa fa-comment"></i><span>'),__output.push(t("orders","commentForm:submit:comment")),__output.push('</span></button>\n  <button id="'),__output.push(idPrefix),__output.push('-submit-edit" type="submit" class="btn btn-primary hidden"><i class="fa fa-edit"></i><span>'),__output.push(t("orders","commentForm:submit:edit")),__output.push("</span></button>\n</form>\n");return __output.join("")}}),define("app/orders/views/OrderCommentFormView",["underscore","app/core/views/FormView","app/core/util/idAndLabel","app/orders/templates/commentForm"],function(t,e,n,r){"use strict";return e.extend({template:r,events:t.extend({"change #-delayReason":function(t){var e=t.target.value!==this.model.get("delayReason");this.$id("submit-comment").toggleClass("hidden",e),this.$id("submit-edit").toggleClass("hidden",!e),this.$id("comment").prop("required",!e).prev().toggleClass("is-required",!e)}},e.prototype.events),afterRender:function(){e.prototype.afterRender.call(this),this.$id("delayReason").select2({allowClear:!0,placeholder:" ",data:this.delayReasons.map(n)})},request:function(t){return this.ajax({type:"POST",url:"/orders/"+this.model.id,data:JSON.stringify(t)})},handleSuccess:function(){this.$id("comment").val("").focus()}})}),define("app/orders/templates/change",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<tbody class="'),__output.push(change.user?"is-user-change":"is-system-change"),__output.push('">\n  '),change.values.length&&(__output.push('\n  <tr>\n    <td class="is-min orders-changes-time" rowspan="'),__output.push(change.rowSpan),__output.push('">'),__output.push(change.timeText),__output.push('</td>\n    <td class="is-min orders-changes-user" rowspan="'),__output.push(change.rowSpan),__output.push('">'),__output.push(change.userText),__output.push('</td>\n    <td class="is-min orders-changes-property">'),__output.push(escape(t("orders","PROPERTY:"+change.values[0].property))),__output.push('</td>\n    <td class="is-min">'),__output.push(renderValueChange(change.values[0],i,"oldValue")),__output.push("</td>\n    <td>"),__output.push(renderValueChange(change.values[0],i,"newValue")),__output.push("</td>\n  </tr>\n  ")),__output.push("\n  "),change.values.forEach(function(e,n){__output.push("\n  "),0!==n&&(__output.push('\n  <tr class="orders-changes-noTimeAndUser">\n    <td class="is-min orders-changes-property">'),__output.push(escape(t("orders","PROPERTY:"+e.property))),__output.push('</td>\n    <td class="is-min">'),__output.push(renderValueChange(e,i,"oldValue")),__output.push("</td>\n    <td>"),__output.push(renderValueChange(e,i,"newValue")),__output.push("</td>\n  </tr>\n  "))}),__output.push("\n  "),""!==change.comment&&(__output.push('\n  <tr class="'),__output.push(change.values.length?"orders-changes-noTimeAndUser":""),__output.push('">\n    '),change.values.length||(__output.push('\n    <td class="is-min orders-changes-time">'),__output.push(change.timeText),__output.push('</td>\n    <td class="is-min orders-changes-user">'),__output.push(change.userText),__output.push("</td>\n    ")),__output.push('\n    <td class="orders-changes-comment" colspan="3">'),__output.push(escape(change.comment)),__output.push("</td>\n  </tr>\n  ")),__output.push("\n</tbody>");return __output.join("")}}),define("app/orders/templates/changes",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="'),__output.push(showPanel?"panel panel-default":""),__output.push(' orders-changes">\n  '),showPanel&&(__output.push('\n  <div class="panel-heading">\n    '),__output.push(t("orders","PANEL:TITLE:changes")),__output.push("\n  </div>\n  ")),__output.push('\n  <table id="'),__output.push(idPrefix),__output.push('-table" class="table table-condensed table-bordered table-hover">\n    <thead>\n      <tr>\n        <th class="is-min">'),__output.push(t("orders","CHANGES:time")),__output.push('\n        <th class="is-min">'),__output.push(t("orders","CHANGES:user")),__output.push('\n        <th class="is-min">'),__output.push(t("orders","CHANGES:property")),__output.push('\n        <th class="is-min">'),__output.push(t("orders","CHANGES:oldValue")),__output.push("\n        <th>"),__output.push(t("orders","CHANGES:newValue")),__output.push("\n      </tr>\n    </thead>\n    "),user.isAllowedTo("ORDERS:MANAGE")&&__output.push('\n    <tfoot>\n      <tr>\n        <td class="orders-commentForm-container" colspan="5"></td>\n      </tr>\n    </tfoot>\n    '),__output.push("\n    "),changes.length||(__output.push('\n    <tbody id="'),__output.push(idPrefix),__output.push('-empty">\n      <tr>\n        <td colspan="5">'),__output.push(t("orders","CHANGES:NO_DATA")),__output.push("</td>\n      </tr>\n    </tbody>\n    ")),__output.push("\n    "),changes.forEach(function(t,e){__output.push("\n    "),__output.push(renderChange({renderValueChange:renderValueChange,change:t,i:e})),__output.push("\n    ")}),__output.push("\n  </table>\n</div>\n");return __output.join("")}}),define("app/core/templates/userInfo",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<span class="userInfo">'),userInfo?(__output.push('<span class="userInfo-label">'),__output.push(escape(userInfo.label)),__output.push("</span>"),(userInfo.cname||userInfo.ip)&&(__output.push(' <span class="userInfo-cname">('),__output.push(escape(userInfo.cname||userInfo.ip)),__output.push(")</span>"))):__output.push("-"),__output.push("</span>");return __output.join("")}}),define("app/orders/views/OrderChangesView",["underscore","jquery","app/time","app/i18n","app/viewport","app/data/orderStatuses","app/core/View","./OrderCommentFormView","./OperationListView","./DocumentListView","../Order","../OperationCollection","../DocumentCollection","app/orders/templates/change","app/orders/templates/changes","app/orderStatuses/util/renderOrderStatusLabel","app/core/templates/userInfo"],function(t,e,n,r,i,o,s,a,u,c,l,p,d,h,f,m,_){"use strict";return s.extend({template:f,events:{"click .orders-changes-operations":"toggleOperations","click .orders-changes-documents":"toggleDocuments","mouseover .orders-changes-noTimeAndUser":function(t){var e=this.$(t.target).closest("tbody").children().first();e.find(".orders-changes-time").addClass("is-hovered"),e.find(".orders-changes-user").addClass("is-hovered")},"mouseout .orders-changes-noTimeAndUser":function(){this.$(".is-hovered").removeClass("is-hovered")}},initialize:function(){this.$lastToggle=null,this.operationListView=null,this.documentListView=null,this.renderValueChange=this.renderValueChange.bind(this),this.setView(".orders-commentForm-container",new a({model:this.model,delayReasons:this.delayReasons})),this.listenTo(this.model,"push:change",this.onChangePush)},destroy:function(){null!==this.$lastToggle&&(this.$lastToggle.click(),this.$lastToggle=null)},serialize:function(){return{idPrefix:this.idPrefix,showPanel:this.options.showPanel!==!1,changes:this.serializeChanges(),renderChange:h,renderValueChange:this.renderValueChange}},serializeChanges:function(){return(this.model.get("changes")||[]).map(this.serializeChange,this)},serializeChange:function(e){return e.timeText=n.format(e.time,"YYYY-MM-DD<br>HH:mm:ss"),e.userText=_({userInfo:e.user}),e.values=Object.keys(e.oldValues||{}).map(function(t){return{property:t,oldValue:e.oldValues[t],newValue:e.newValues[t]}}),e.comment=t.isEmpty(e.comment)?"":e.comment.trim(),e.rowSpan=e.values.length+(""===e.comment?0:1),e},beforeRender:function(){this.stopListening(this.model,"change:changes",this.render)},afterRender:function(){this.listenToOnce(this.model,"change:changes",this.render)},renderValueChange:function(e,i,s){var a=e[s];if(null==a||0===a.length)return"-";switch(e.property){case"operations":return'<a class="orders-changes-operations" data-i="'+i+'" data-property="'+s+'">'+r("orders","CHANGES:operations",{count:a.length})+"</a>";case"documents":return'<a class="orders-changes-documents" data-i="'+i+'" data-property="'+s+'">'+r("orders","CHANGES:documents",{count:a.length})+"</a>";case"statuses":return o.findAndFill(a).map(m).join("");case"delayReason":var u=this.delayReasons.get(a);return u?t.escape(u.getLabel()):a;case"startDate":case"finishDate":return n.format(a,"LL");default:return t.escape(String(a))}},hideLastToggle:function(t){return null===this.$lastToggle?!0:this.$lastToggle[0]!==t.target?(this.$lastToggle.click(),!0):(null!==this.operationListView&&(this.operationListView.remove(),this.operationListView=null),null!==this.documentListView&&(this.documentListView.remove(),this.documentListView=null),this.$lastToggle=null,!1)},toggleOperations:function(t){this.hideLastToggle(t)&&this.showLastToggle(t,p,u,"operations","operationListView")},toggleDocuments:function(t){this.hideLastToggle(t)&&this.showLastToggle(t,d,c,"documents","documentListView")},showLastToggle:function(t,e,n,r,i){var o=this.$(t.target),s=o.attr("data-i"),a=o.attr("data-property")+"s",u=new e(this.model.get("changes")[s][a][r]),c={};c[r]=u;var p=new n({model:new l(c)}),d=o.closest("tr")[0].offsetTop+o.closest("td").outerHeight()+(this.options.showPanel!==!1?this.$(".panel-heading").first().outerHeight():0);p.render(),p.$el.css("top",d),this.$el.append(p.$el),this.$lastToggle=o,this[i]=p},onChangePush:function(t){var n=e(h({renderValueChange:this.renderValueChange,change:this.serializeChange(t),i:this.model.get("changes").length}));this.$id("empty").remove(),this.$id("table").append(n),n.find("td").addClass("highlight")}})}),define("app/orders/templates/detailsPage",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div>\n  <div class="orders-details-container"></div>\n  <div class="orders-operations-container"></div>\n  <div class="orders-documents-container"></div>\n  <div class="orders-changes-container"></div>\n</div>\n');return __output.join("")}}),define("app/orders/pages/OrderDetailsPage",["app/core/util/bindLoadingMessage","app/core/pages/DetailsPage","app/delayReasons/storage","../Order","../views/OrderDetailsView","../views/OperationListView","../views/DocumentListView","../views/OrderChangesView","app/orders/templates/detailsPage"],function(t,e,n,r,i,o,s,a,u){"use strict";return e.extend({template:u,pageId:"orderDetails",actions:[],remoteTopics:{"orders.updated.*":"onOrderUpdated"},initialize:function(){this.model=t(new r({_id:this.options.modelId}),this),this.delayReasons=t(n.acquire(),this),this.detailsView=new i({model:this.model,delayReasons:this.delayReasons}),this.operationsView=new o({model:this.model}),this.documentsView=new s({model:this.model}),this.changesView=new a({model:this.model,delayReasons:this.delayReasons}),this.setView(".orders-details-container",this.detailsView),this.setView(".orders-operations-container",this.operationsView),this.setView(".orders-documents-container",this.documentsView),this.setView(".orders-changes-container",this.changesView)},destroy:function(){n.release()},load:function(t){return t(this.model.fetch(),this.delayReasons.isEmpty()?this.delayReasons.fetch({reset:!0}):null)},afterRender:function(){n.acquire()},onOrderUpdated:function(t){this.model.id===t._id&&(this.model.set("delayReason",t.delayReason),this.model.get("changes").push(t.change),this.model.trigger("push:change",t.change))}})}),define("app/nls/orders",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Production orders"},"BREADCRUMBS:settings":function(){return"Settings"},"MSG:LOADING_FAILURE":function(){return"Failed to load the orders :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the order details :("},"PAGE_ACTION:settings":function(){return"Change settings"},"PANEL:TITLE:details":function(){return"Order's details"},"PANEL:TITLE:operations":function(){return"Order's operations"},"PANEL:TITLE:documents":function(){return"Order's documents"},"PANEL:TITLE:changes":function(){return"Change log"},"PROPERTY:_id":function(){return"Order no"},"PROPERTY:createdAt":function(){return"Created at"},"PROPERTY:updatedAt":function(){return"Updated at"},"PROPERTY:nc12":function(){return"12NC"},"PROPERTY:name":function(){return"Product name"},"PROPERTY:mrp":function(){return"MRP"},"PROPERTY:qty":function(){return"Quantity"},"PROPERTY:unit":function(){return"Unit"},"PROPERTY:startDate":function(){return"Start date"},"PROPERTY:finishDate":function(){return"Finish date"},"PROPERTY:delayReason":function(){return"Delay reason"},"PROPERTY:statuses":function(){return"Status"},"PROPERTY:operations":function(){return"Operations"},"PROPERTY:operations.no":function(){return"Operation no"},"PROPERTY:operations.workCenter":function(){return"WorkCenter"},"PROPERTY:operations.name":function(){return"Name"},"PROPERTY:operations.qty":function(){return"Quantity"},"PROPERTY:operations.unit":function(){return"Unit"},"PROPERTY:operations.machineSetupTime":function(){return"<em>Machine Setup</em> Time"},"PROPERTY:operations.laborSetupTime":function(){return"<em>Labor Setup</em> Time"},"PROPERTY:operations.machineTime":function(){return"<em>Machine</em> Time"},"PROPERTY:operations.laborTime":function(){return"<em>Labor</em> Time"},"PROPERTY:documents":function(){return"Documents"},"PROPERTY:documents.nc15":function(){return"15NC"},"PROPERTY:documents.name":function(){return"Document name"},"OPERATIONS:NO_DATA":function(){return"Order does not have any operations."},"DOCUMENTS:NO_DATA":function(){return"Order does not have any linked documents."},"CHANGES:NO_DATA":function(){return"Order was not modified."},"CHANGES:operations":function(t){return e.p(t,"count",0,"en",{one:"1 operation",other:e.n(t,"count")+" operations"})},"CHANGES:documents":function(t){return e.p(t,"count",0,"en",{one:"1 document",other:e.n(t,"count")+" documents"})},"CHANGES:time":function(){return"Time"},"CHANGES:user":function(){return"User"},"CHANGES:property":function(){return"Property"},"CHANGES:oldValue":function(){return"Old value"},"CHANGES:newValue":function(){return"New value"},"filter:placeholder:_id":function(){return"Any order no"},"filter:placeholder:nc12":function(){return"Any 12NC"},"filter:submit":function(){return"Filter orders"},"details:showMoreLink":function(){return"Show more order details"},"commentForm:delayReason":function(){return"New delay reason"},"commentForm:comment":function(){return"Comment"},"commentForm:submit:comment":function(){return"Comment"},"commentForm:submit:edit":function(){return"Change delay reason"},"settings:tab:documents":function(){return"Documents"},"settings:documents:path":function(){return"Path to a directory with the document files"},"settings:documents:extra":function(){return"Extra documents"},"settings:documents:remoteServer":function(){return"Document search engine server"}},pl:!0}}),define("app/nls/pl/orders",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Zlecenia reszty dzia≈Ç√≥w"},"BREADCRUMBS:settings":function(){return"Ustawienia"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie zlece≈Ñ nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie zlecenia nie powiod≈Ço siƒô :("},"PAGE_ACTION:settings":function(){return"Zmie≈Ñ ustawienia"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy zlecenia"},"PANEL:TITLE:operations":function(){return"Lista operacji zlecenia"},"PANEL:TITLE:documents":function(){return"Lista dokument√≥w zlecenia"},"PANEL:TITLE:changes":function(){return"Historia zmian zlecenia"},"PROPERTY:_id":function(){return"Nr zlecenia"},"PROPERTY:createdAt":function(){return"Czas stworzenia"},"PROPERTY:updatedAt":function(){return"Czas aktualizacji"},"PROPERTY:nc12":function(){return"12NC"},"PROPERTY:name":function(){return"Nazwa wyrobu"},"PROPERTY:mrp":function(){return"MRP"},"PROPERTY:qty":function(){return"Ilo≈õƒá"},"PROPERTY:unit":function(){return"Jednostka"},"PROPERTY:startDate":function(){return"Data startu"},"PROPERTY:finishDate":function(){return"Data uko≈Ñczenia"},"PROPERTY:delayReason":function(){return"Pow√≥d op√≥≈∫nienia"},"PROPERTY:statuses":function(){return"Status"},"PROPERTY:operations":function(){return"Operacje"},"PROPERTY:operations.no":function(){return"Nr operacji"},"PROPERTY:operations.workCenter":function(){return"WorkCenter"},"PROPERTY:operations.name":function(){return"Nazwa operacji"},"PROPERTY:operations.qty":function(){return"Ilo≈õƒá"},"PROPERTY:operations.unit":function(){return"Jednostka"},"PROPERTY:operations.machineSetupTime":function(){return"Czas <em>Machine Setup</em>"},"PROPERTY:operations.laborSetupTime":function(){return"Czas <em>Labor Setup</em>"},"PROPERTY:operations.machineTime":function(){return"Czas <em>Machine</em>"},"PROPERTY:operations.laborTime":function(){return"Czas <em>Labor</em>"},"PROPERTY:documents":function(){return"Dokumenty"},"PROPERTY:documents.nc15":function(){return"15NC"},"PROPERTY:documents.name":function(){return"Nazwa dokumentu"},"OPERATIONS:NO_DATA":function(){return"Zlecenie nie ma zdefiniowanych ≈ºadnych operacji."},"DOCUMENTS:NO_DATA":function(){return"Zlecenie nie ma do≈ÇƒÖczonych ≈ºadnych dokument√≥w."},"CHANGES:NO_DATA":function(){return"Zlecenie nie by≈Ço modyfikowane."},"CHANGES:operations":function(t){return e.p(t,"count",0,"pl",{one:"1 operacja",few:e.n(t,"count")+" operacje",other:e.n(t,"count")+" operacji"})},"CHANGES:documents":function(t){return e.p(t,"count",0,"pl",{one:"1 dokument",few:e.n(t,"count")+" dokumenty",other:e.n(t,"count")+" dokument√≥w"})},"CHANGES:time":function(){return"Czas"},"CHANGES:user":function(){return"U≈ºytkownik"},"CHANGES:property":function(){return"Atrybut"},"CHANGES:oldValue":function(){return"Stara warto≈õƒá"},"CHANGES:newValue":function(){return"Nowa warto≈õƒá"},"filter:placeholder:_id":function(){return"Dowolny nr"},"filter:placeholder:nc12":function(){return"Dowolne 12NC"},"filter:submit":function(){return"Filtruj zlecenia"},"details:showMoreLink":function(){return"Poka≈º wiƒôcej szczego≈Ç√≥w zlecenia"},"commentForm:delayReason":function(){return"Nowy pow√≥d op√≥≈∫nienia"},"commentForm:comment":function(){return"Komentarz"},"commentForm:submit:comment":function(){return"Komentuj"},"commentForm:submit:edit":function(){return"Zmie≈Ñ pow√≥d op√≥≈∫nienia"},"settings:tab:documents":function(){return"Dokumenty"},"settings:documents:path":function(){return"≈öcie≈ºka do katalogu z plikami dokument√≥w"},"settings:documents:extra":function(){return"Dodatkowe dokumenty"},"settings:documents:remoteServer":function(){return"Serwer wyszukiwarki dokument√≥w"}}}),define("app/orders/routes",["../router","../viewport","../user","./pages/OrderListPage","./pages/OrderDetailsPage","i18n!app/nls/orders"],function(t,e,n,r,i){"use strict";var o=n.auth("ORDERS:VIEW"),s=n.auth("ORDERS:MANAGE");t.map("/orders",o,function(t){e.showPage(new r({rql:t.rql}))}),t.map("/orders/:id",function(t){e.showPage(new i({modelId:t.params.id}))}),t.map("/orders;settings",s,function(t){e.loadPage("app/orders/pages/OrderSettingsPage",function(e){return new e({initialTab:t.query.tab})})})}),define("app/nls/orderStatuses",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Order statuses"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the order statuses :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the order status :("},"MSG:DELETED":function(t){return"Order status <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add order status"},"PAGE_ACTION:edit":function(){return"Edit order status"},"PAGE_ACTION:delete":function(){return"Delete order status"},"PANEL:TITLE:details":function(){return"Order status' details"},"PANEL:TITLE:addForm":function(){return"Add order status form"},"PANEL:TITLE:editForm":function(){return"Edit order status form"},"PROPERTY:_id":function(){return"Label"},"PROPERTY:label":function(){return"Description"},"PROPERTY:color":function(){return"Color"
},"FORM:ACTION:add":function(){return"Add order status"},"FORM:ACTION:edit":function(){return"Edit order status"},"FORM:ERROR:addFailure":function(){return"Failed to add the new order status :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the order status :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Order status deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete order status"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen order status?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> order status?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the order status :-("}},pl:!0}}),define("app/nls/pl/orderStatuses",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Statusy zlece≈Ñ"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie status√≥w zlece≈Ñ nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie statusu zlece≈Ñ nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Status zlece≈Ñ <em>"+e.v(t,"label")+"</em> zosta≈Ç usuniƒôty."},"PAGE_ACTION:add":function(){return"Dodaj status zlece≈Ñ"},"PAGE_ACTION:edit":function(){return"Edytuj status zlece≈Ñ"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ status zlece≈Ñ"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy statusu zlece≈Ñ"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania statusu zlece≈Ñ"},"PANEL:TITLE:editForm":function(){return"Formularz edycji statusu zlece≈Ñ"},"PROPERTY:_id":function(){return"Etykieta"},"PROPERTY:label":function(){return"Opis"},"PROPERTY:color":function(){return"Kolor"},"FORM:ACTION:add":function(){return"Dodaj status zlece≈Ñ"},"FORM:ACTION:edit":function(){return"Edytuj status zlece≈Ñ"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá statusu zlece≈Ñ :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá statusu zlece≈Ñ :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia statusu zlece≈Ñ"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ status zlece≈Ñ"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany status zlece≈Ñ?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá status zlece≈Ñ <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá statusu zlece≈Ñ :-("}}}),define("app/orderStatuses/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","../data/orderStatuses","./OrderStatus","i18n!app/nls/orderStatuses"],function(t,e,n,r,i,o){"use strict";var s=n.auth("DICTIONARIES:VIEW"),a=n.auth("DICTIONARIES:MANAGE");t.map("/orderStatuses",s,function(){e.loadPage(["app/core/pages/ListPage","app/orderStatuses/views/OrderStatusListView"],function(t,e){return new t({ListView:e,collection:i})})}),t.map("/orderStatuses/:id",function(t){e.loadPage(["app/core/pages/DetailsPage","app/orderStatuses/templates/details"],function(e,n){return new e({model:new o({_id:t.params.id}),detailsTemplate:n})})}),t.map("/orderStatuses;add",a,function(){e.loadPage(["app/core/pages/AddFormPage","app/orderStatuses/views/OrderStatusFormView"],function(t,e){return new t({FormView:e,model:new o})})}),t.map("/orderStatuses/:id;edit",a,function(t){e.loadPage(["app/core/pages/EditFormPage","app/orderStatuses/views/OrderStatusFormView"],function(e,n){return new e({FormView:n,model:new o({_id:t.params.id})})})}),t.map("/orderStatuses/:id;delete",a,r.bind(null,o))}),define("app/nls/orderDocumentClients",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:base":function(){return"Documentation"},"BREADCRUMBS:browse":function(){return"Clients"},"MSG:LOADING_FAILURE":function(){return"Failed to load the clients :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the client :("},"page:settings":function(){return"Change settings"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:status":function(){return"Status"},"PROPERTY:prodLine":function(){return"Line"},"PROPERTY:lastSeenAt":function(){return"Last seen at"},"PROPERTY:fileSource":function(){return"File source"},"PROPERTY:orderNo":function(){return"Order no"},"PROPERTY:orderNc12":function(){return"Order 12NC"},"PROPERTY:orderName":function(){return"Order name"},"PROPERTY:documentNc15":function(){return"Document 15NC"},"PROPERTY:documentName":function(){return"Document name"},"status:online":function(){return"Online"},"status:offline":function(){return"Offline"},"fileSource:local":function(){return"Local file"},"fileSource:remote":function(){return"Remote file"},"fileSource:search":function(){return"TPD Search"},"filter:submit":function(){return"Filter clients"},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Client deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete client"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen client?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> client?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the client :-("},licensingMessage:function(t){return"The current number of clients ("+e.v(t,"clientCount")+") is greater than the number of purchased licenses ("+e.v(t,"licenseCount")+")!"}},pl:!0}}),define("app/nls/pl/orderDocumentClients",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:base":function(){return"Dokumentacja"},"BREADCRUMBS:browse":function(){return"Klienci"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie klient√≥w nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie klienta nie powiod≈Ço siƒô :("},"page:settings":function(){return"Zmie≈Ñ ustawienia"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:status":function(){return"Status"},"PROPERTY:prodLine":function(){return"Linia"},"PROPERTY:lastSeenAt":function(){return"Ostatnio widziany"},"PROPERTY:fileSource":function(){return"≈πr√≥d≈Ço pliku"},"PROPERTY:orderNo":function(){return"Nr zlecenia"},"PROPERTY:orderNc12":function(){return"12NC zlecenia"},"PROPERTY:orderName":function(){return"Nazwa zlecenia"},"PROPERTY:documentNc15":function(){return"15NC dokumentu"},"PROPERTY:documentName":function(){return"Nazwa dokumentu"},"status:online":function(){return"Online"},"status:offline":function(){return"Offline"},"fileSource:local":function(){return"Plik lokalny"},"fileSource:remote":function(){return"Plik zdalny"},"fileSource:search":function(){return"Wyszukiwarka TPD"},"filter:submit":function(){return"Filtruj klient√≥w"},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia klienta"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ klietna"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybranego klienta?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá klienta <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá klienta :-("},licensingMessage:function(t){return"Aktualna liczba dodanych klient√≥w ("+e.v(t,"clientCount")+") jest wiƒôksza od liczby wykupionych licencji ("+e.v(t,"licenseCount")+")!"}}}),define("app/orderDocumentClients/routes",["../router","../viewport","../user","i18n!app/nls/orderDocumentClients"],function(t,e,n){"use strict";var r=n.auth("DOCUMENTS:VIEW");t.map("/orderDocuments/clients",r,function(t){e.loadPage(["app/orderDocumentClients/OrderDocumentClientCollection","app/orderDocumentClients/pages/OrderDocumentClientListPage"],function(e,n){return new n({collection:new e(null,{rqlQuery:t.rql})})})})}),define("app/pressWorksheets/PressWorksheet",["../i18n","../time","../core/Model","../core/util/getShiftStartInfo"],function(t,e,n,r){"use strict";function i(t){return t&&t.label?t.label:null}return n.extend({urlRoot:"/pressWorksheets",clientUrlRoot:"#pressWorksheets",topicPrefix:"pressWorksheets",privilegePrefix:"PRESS_WORKSHEETS",nlsDomain:"pressWorksheets",labelAttribute:"rid",defaults:function(){var t=r(Date.now());return{rid:null,date:e.format(t.moment.valueOf(),"YYYY-MM-DD"),shift:t.shift,type:"mech",divisions:[],prodLines:[],startedAt:null,finishedAt:null,master:null,operator:null,operators:null,orders:null,createdAt:null,creator:null}},serialize:function(){var n=this.toJSON();return n.date=e.format(n.date,"YYYY-MM-DD"),n.shift=t("core","SHIFT:"+n.shift),n.master=i(n.master),n.operator=i(n.operator),n.operators=(n.operators||[]).map(i).filter(function(t){return!!t}),n.creator=i(n.creator),n.createdAt=n.createdAt?e.format(n.createdAt,"LLLL"):null,"paintShop"===n.type&&n.orders&&(n.orders=n.orders.map(function(t){return t.startedAt=e.getMoment(t.startedAt).format("HH:mm:ss"),t.finishedAt=e.getMoment(t.finishedAt).format("HH:mm:ss"),t})),Array.isArray(n.divisions)&&(n.divisions=n.divisions.join("; ")),Array.isArray(n.prodLines)&&(n.prodLines=n.prodLines.join("; ")),n.type=t("pressWorksheets","PROPERTY:type:"+n.type),n}})}),define("app/pressWorksheets/PressWorksheetCollection",["underscore","../user","../core/Collection","./PressWorksheet"],function(t,e,n,r){"use strict";return n.extend({model:r,rqlQuery:function(t){var n=[],r=e.getDivision();return r&&n.push({name:"eq",args:["divisions",r.id]}),t.Query.fromObject({fields:{orders:0,operators:0},sort:{date:-1},limit:15,selector:{name:"and",args:n}})},sync:function(e,r,i){if("read"===e&&!i.data){var o=t.find(this.rqlQuery.selector.args,function(t){return"eq"===t.name&&"user"===t.args[0]});o&&(this.rqlQuery.selector.args=t.without(this.rqlQuery.selector.args,o)),i.data=this.rqlQuery.toString(),o&&this.rqlQuery.selector.args.push(o)}return n.prototype.sync.call(this,e,r,i)}})}),define("app/pressWorksheets/templates/filter",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="well filter-form">\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-date">'),__output.push(t("pressWorksheets","PROPERTY:date")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-date" class="form-control" name="date" type="date">\n  </div>\n  <div class="form-group">\n    <label>'),__output.push(t("pressWorksheets","filter:shift")),__output.push('</label>\n    <div id="'),__output.push(idPrefix),__output.push('-shift" class="btn-group filter-btn-group" data-toggle="buttons">\n      '),[0,1,2,3].forEach(function(e){__output.push('\n      <label class="btn btn-default">\n        <input type="radio" name="shift" value="'),__output.push(e),__output.push('"> '),__output.push(t("core","SHIFT:"+e)),__output.push("\n      </label>\n      ")}),__output.push('\n    </div>\n  </div>\n  <div class="form-group">\n    <label>'),__output.push(t("pressWorksheets","PROPERTY:type")),__output.push('</label>\n    <div id="'),__output.push(idPrefix),__output.push('-type" class="btn-group filter-btn-group" data-toggle="buttons">\n      '),["any","mech","paintShop","optics"].forEach(function(e){__output.push('\n      <label class="btn btn-default">\n        <input type="radio" name="type" value="'),__output.push(e),__output.push('"> '),__output.push(t("pressWorksheets","filter:type:"+e)),__output.push("\n      </label>\n      ")}),__output.push('\n    </div>\n  </div>\n  <div class="form-group">\n    <label>'),__output.push(t("pressWorksheets","PROPERTY:divisions")),__output.push('</label>\n    <div id="'),__output.push(idPrefix),__output.push('-divisions" class="btn-group filter-btn-group" data-toggle="buttons">\n      '),divisions.forEach(function(t){__output.push('\n      <label class="btn btn-default" title="'),__output.push(escape(t.title)),__output.push('">\n        <input type="checkbox" name="divisions[]" value="'),__output.push(escape(t.id)),__output.push('"> '),__output.push(escape(t.label)),__output.push("\n      </label>\n      ")}),__output.push('\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="filter-radioLabels">\n      <label>\n        <input name="userType" type="radio" value="master">\n        '),__output.push(t("pressWorksheets","filter:user:master")),__output.push('\n      </label><label>\n        <input name="userType" type="radio" value="operators">\n        '),__output.push(t("pressWorksheets","filter:user:operators")),__output.push('\n      </label>\n    </div>\n    <input id="'),__output.push(idPrefix),__output.push('-user" name="user" type="hidden">\n  </div>\n  '),__output.push(renderLimit()),__output.push('\n  <div class="form-group no-label">\n    <div id="'),__output.push(idPrefix),__output.push('-mine" class="btn-group filter-btn-group" data-toggle="buttons">\n      <label class="btn btn-default" title="'),__output.push(t("pressWorksheets","filter:mine:title")),__output.push('">\n        <input type="checkbox" name="mine" value="1"> '),__output.push(t("pressWorksheets","filter:mine")),__output.push('\n      </label>\n    </div>\n  </div>\n  <div class="form-group filter-actions">\n    <button type="submit" class="btn btn-default"><i class="fa fa-filter"></i><span>'),__output.push(escape(t("pressWorksheets","filter:submit"))),__output.push("</span></button>\n  </div>\n</form>\n");return __output.join("")}}),define("app/pressWorksheets/views/PressWorksheetFilterView",["app/time","app/data/divisions","app/core/views/FilterView","app/users/util/setUpUserSelect2","app/pressWorksheets/templates/filter"],function(t,e,n,r,i){"use strict";return n.extend({template:i,defaultFormData:function(){return{date:"",shift:0,type:"any",divisions:e.filter(function(t){return"prod"===t.get("type")}).map(function(t){return t.id}),mine:!1,userType:"operators",user:{id:null,text:null}}},termToForm:{date:function(e,n,r){if("in"===n.name)r.date=t.format(n.args[1][0],"YYYY-MM-DD");else{var i=t.getMoment(n.args[1]);r.date=i.format("YYYY-MM-DD"),r.shift=this.getShiftNoFromMoment(i)}},shift:function(t,e,n){n[t]=e.args[1]},divisions:function(t,e,n){n.divisions="in"===e.name?e.args[1]:[e.args[1]]},"master.id":function(t,e,n){n.userType=t.split(".")[0],n.user.id=e.args[1],null===n.user.text&&(n.user.text=e.args[1])},user:function(t,e,n){n.user.text=e.args[1]},type:"shift",mine:"shift","operator.id":"master.id","operators.id":"master.id"},serialize:function(){var t=n.prototype.serialize.call(this);return t.divisions=e.filter(function(t){return"prod"===t.get("type")}).sort(function(t,e){return t.getLabel().localeCompare(e.getLabel())}).map(function(t){return{id:t.id,label:t.id,title:t.get("description")}}),t},afterRender:function(){n.prototype.afterRender.call(this),this.toggleButtonGroup("shift"),this.toggleButtonGroup("type"),this.toggleButtonGroup("divisions"),this.toggleButtonGroup("mine"),r(this.$id("user")).select2("data",null===this.formData.user.id?null:this.formData.user)},serializeFormToQuery:function(e,n){var r=t.getMoment(this.$id("date").val()),i=parseInt(this.$("input[name=shift]:checked").val(),10),o=this.$("input[name=type]:checked").val(),s=this.getButtonGroupValue("divisions"),a=this.$("input[name=mine]:checked").val(),u=this.$("input[name=userType]:checked").val(),c=this.$id("user").select2("data");if(this.setHoursByShiftNo(r,i),r.isValid())if(0===i){var l=r.valueOf();e.push({name:"in",args:["date",[l+216e5,l+504e5,l+792e5]]})}else e.push({name:"eq",args:["date",r.valueOf()]});else 0!==i&&e.push({name:"eq",args:["shift",i]});"any"!==o&&e.push({name:"eq",args:["type",o]}),1===s.length?e.push({name:"eq",args:["divisions",s[0]]}):s.length>1&&e.push({name:"in",args:["divisions",s]}),c&&(e.push({name:"eq",args:[u+".id",c.id]}),e.push({name:"eq",args:["user",c.text]})),a?(e.push({name:"eq",args:["mine",1]}),n.sort={createdAt:-1}):n.sort={date:-1}},getShiftNoFromMoment:function(t){var e=t.hours();return 6===e?1:14===e?2:22===e?3:0},setHoursByShiftNo:function(t,e){t.hours(1===e?6:2===e?14:3===e?22:0)}})}),define("app/pressWorksheets/views/PressWorksheetListView",["app/user","app/core/views/ListView"],function(t,e){"use strict";return e.extend({className:"is-clickable",localTopics:{"companies.synced":"render"},columns:[{id:"rid",className:"is-min"},{id:"type",className:"is-min"},{id:"divisions",className:"is-min"},{id:"date",className:"is-min"},{id:"shift",className:"is-min"},{id:"master",className:"is-min"},"operator"],serializeActions:function(){function n(e){return i?!0:t.isAllowedTo("PRESS_WORKSHEETS:MANAGE")&&t.data._id===e.get("creator").id&&Date.parse(e.get("createdAt"))+o>s}var r=this.collection,i=t.isAllowedTo("PROD_DATA:MANAGE"),o=288e5,s=Date.now();return function(t){var i=r.get(t._id),o=[e.actions.viewDetails(i)];return n(i)&&(o.push(e.actions.edit(i)),o.push(e.actions["delete"](i))),o}}})}),define("app/pressWorksheets/pages/PressWorksheetListPage",["app/i18n","app/core/util/bindLoadingMessage","app/core/util/pageActions","app/core/View","../PressWorksheetCollection","../views/PressWorksheetFilterView","../views/PressWorksheetListView","app/core/templates/listPage"],function(t,e,n,r,i,o,s,a){"use strict";return r.extend({template:a,layoutName:"page",pageId:"pressWorksheetList",breadcrumbs:[t.bound("pressWorksheets","BREADCRUMBS:browse")],actions:function(){return[n.jump(this,this.pressWorksheetList),n.add(this.pressWorksheetList)]},initialize:function(){this.defineModels(),this.defineViews(),this.setView(".filter-container",this.filterView),this.setView(".list-container",this.listView)},defineModels:function(){this.pressWorksheetList=e(new i(null,{rqlQuery:this.options.rql}),this)},defineViews:function(){this.filterView=new o({model:{rqlQuery:this.pressWorksheetList.rqlQuery}}),this.listView=new s({collection:this.pressWorksheetList}),this.listenTo(this.filterView,"filterChanged",this.refreshList)},load:function(t){return t(this.pressWorksheetList.fetch({reset:!0}))},refreshList:function(t){this.pressWorksheetList.rqlQuery=t,this.listView.refreshCollectionNow(),this.broker.publish("router.navigate",{url:this.pressWorksheetList.genClientUrl()+"?"+t,trigger:!1,replace:!0})}})}),define("app/pressWorksheets/templates/details",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div>\n  <div class="panel panel-primary pressWorksheets-details">\n    <div class="panel-heading">\n      '),__output.push(t("pressWorksheets","PANEL:TITLE:details")),__output.push('\n    </div>\n    <div class="panel-details row">\n      <div class="col-md-6">\n        <div class="props first">\n          <div class="prop">\n            <div class="prop-name">'),__output.push(t("pressWorksheets","PROPERTY:type")),__output.push('</div>\n            <div class="prop-value">'),__output.push(model.type),__output.push('</div>\n          </div>\n          <div class="prop">\n            <div class="prop-name">'),__output.push(t("pressWorksheets","PROPERTY:date")),__output.push('</div>\n            <div class="prop-value">'),__output.push(model.date),__output.push('</div>\n          </div>\n          <div class="prop">\n            <div class="prop-name">'),__output.push(t("pressWorksheets","PROPERTY:shift")),__output.push('</div>\n            <div class="prop-value">'),__output.push(model.shift),__output.push('</div>\n          </div>\n          <div class="prop">\n            <div class="prop-name">'),__output.push(t("pressWorksheets","PROPERTY:master")),__output.push('</div>\n            <div class="prop-value">'),__output.push(escape(model.master||"-")),__output.push('</div>\n          </div>\n          <div class="prop">\n            <div class="prop-name">'),__output.push(t("pressWorksheets","PROPERTY:operator")),__output.push('</div>\n            <div class="prop-value">'),__output.push(escape(model.operator||"-")),__output.push('</div>\n          </div>\n        </div>\n      </div>\n      <div class="col-md-6">\n        <div class="props">\n          <div class="prop">\n            <div class="prop-name">'),__output.push(t("pressWorksheets","PROPERTY:createdAt")),__output.push('</div>\n            <div class="prop-value">'),__output.push(escape(model.createdAt||"-")),__output.push('</div>\n          </div>\n          <div class="prop">\n            <div class="prop-name">'),__output.push(t("pressWorksheets","PROPERTY:creator")),__output.push('</div>\n            <div class="prop-value">'),__output.push(escape(model.creator||"-")),__output.push('</div>\n          </div>\n          <div class="prop">\n            <div class="prop-name">'),__output.push(t("pressWorksheets","PROPERTY:operators")),__output.push('</div>\n            <div class="prop-value">\n              '),model.operators.length?(__output.push("\n              <ol>\n                "),model.operators.forEach(function(t){__output.push("\n                <li>"),__output.push(escape(t)),__output.push("</li>\n                ")}),__output.push("\n              </ol>\n              ")):__output.push("\n              -\n              "),__output.push('\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="panel panel-default pressWorksheets-details-orders">\n    <div class="panel-heading">\n      '),__output.push(t("pressWorksheets","PANEL:TITLE:details:orders")),__output.push("\n    </div>\n    "),__output.push(renderOrdersList({orders:model.orders,extended:extended})),__output.push("\n  </div>\n</div>\n");return __output.join("")}}),define("app/pressWorksheets/templates/ordersList",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<table class="table table-bordered table-condensed table-hover pressWorksheets-orders-table">\n  <thead>\n    <tr>\n      <th class="is-min">'),__output.push(t("core","#")),__output.push("</th>\n      "),extended&&(__output.push('\n      <th class="is-min">'),__output.push(t("pressWorksheets","PROPERTY:pressWorksheet")),__output.push('</th>\n      <th class="is-min">'),__output.push(t("pressWorksheets","PROPERTY:user")),__output.push('</th>\n      <th class="is-min">'),__output.push(t("pressWorksheets","PROPERTY:shift")),__output.push("</th>\n      ")),__output.push('\n      <th class="is-min">'),__output.push(t("pressWorksheets","PROPERTY:order.nc12")),__output.push("</th>\n      <th>"),__output.push(t("pressWorksheets","PROPERTY:order.name")),__output.push("</th>\n      <th>"),__output.push(t("pressWorksheets","PROPERTY:order.operationName")),__output.push('</th>\n      <th class="is-min">'),__output.push(t("pressWorksheets","PROPERTY:order.operationNo")),__output.push('</th>\n      <th class="is-min">'),__output.push(t("pressWorksheets","PROPERTY:order.division")),__output.push('</th>\n      <th class="is-min">'),__output.push(t("pressWorksheets","PROPERTY:order.prodLine")),__output.push('</th>\n      <th class="is-min">'),__output.push(t("pressWorksheets","PROPERTY:order.quantityDone")),__output.push('</th>\n      <th class="is-min">'),__output.push(t("pressWorksheets","PROPERTY:order.startedAt")),__output.push('</th>\n      <th class="is-min">'),__output.push(t("pressWorksheets","PROPERTY:order.finishedAt")),__output.push("</th>\n      <th>"),__output.push(t("pressWorksheets","PROPERTY:order.losses")),__output.push("</th>\n      <th>"),__output.push(t("pressWorksheets","PROPERTY:order.downtimes")),__output.push("</th>\n    </tr>\n  </thead>\n  <tbody>\n    "),orders.forEach(function(e,n){__output.push('\n    <tr class="'),__output.push(n%2!==0?"":"is-odd"),__output.push('">\n      <td class="is-min is-number" rowspan="'),__output.push(e.notes?2:1),__output.push('">'),__output.push(n+1),__output.push(".</td>\n      "),extended&&(__output.push('\n      <td class="is-min is-number"><a href="#pressWorksheets/'),__output.push(e.pressWorksheet._id),__output.push('">'),__output.push(escape(e.pressWorksheet.rid)),__output.push('</a></td>\n      <td class="is-min">'),__output.push(escape(e.pressWorksheet.user)),__output.push('</td>\n      <td class="is-min">'),__output.push(t("core","SHIFT",{date:time.format(e.pressWorksheet.date,"YYYY-MM-DD"),shift:t("core","SHIFT:"+e.pressWorksheet.shift)})),__output.push("</td>\n      ")),__output.push('\n      <td class="is-min">\n        '),e.prodShiftOrder&&user.isAllowedTo("PROD_DATA:VIEW")?(__output.push('\n        <a href="#prodShiftOrders/'),__output.push(e.prodShiftOrder),__output.push('">'),__output.push(escape(e.nc12)),__output.push("</a>\n        ")):(__output.push("\n        "),__output.push(escape(e.nc12)),__output.push("\n        ")),__output.push("\n      </td>\n      <td>"),__output.push(escape(e.name)),__output.push("</td>\n      <td>"),__output.push(escape(e.operationName||"-")),__output.push('</td>\n      <td class="is-min is-number">'),__output.push(escape(e.operationNo)),__output.push('</td>\n      <td class="is-min">'),__output.push(escape(e.division)),__output.push('</td>\n      <td class="is-min">'),__output.push(escape(e.prodLine)),__output.push('</td>\n      <td class="is-min is-number">'),__output.push(escape(e.quantityDone.toLocaleString())),__output.push('</td>\n      <td class="is-min">'),__output.push(escape(e.startedAt)),__output.push('</td>\n      <td class="is-min">'),__output.push(escape(e.finishedAt)),__output.push('</td>\n      <td class="prodWorksheets-orders-lossesTable">\n        '),e.losses.length&&(__output.push('\n        <table class="table table-bordered table-condensed">\n          <thead>\n            <tr>\n              '),e.losses.forEach(function(t){__output.push("\n              <th>"),__output.push(escape(t.label)),__output.push("</th>\n              ")}),__output.push("\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              "),e.losses.forEach(function(t){__output.push("\n              <td>"),__output.push(escape(t.count)),__output.push("</td>\n              ")}),__output.push("\n            </tr>\n          </tbody>\n        </table>\n        ")),__output.push('\n      </td>\n      <td class="prodWorksheets-orders-lossesTable">\n        '),e.downtimes.length&&(__output.push('\n        <table class="table table-bordered table-condensed">\n          <thead>\n            <tr>\n              '),e.downtimes.forEach(function(t){__output.push("\n              <th>\n                "),t.prodDowntime&&user.isAllowedTo("PROD_DOWNTIMES:VIEW")?(__output.push('\n                <a href="#prodDowntimes/'),__output.push(t.prodDowntime),__output.push('">'),__output.push(escape(t.label)),__output.push("</a>\n                ")):(__output.push("\n                "),__output.push(escape(t.label)),__output.push("\n                ")),__output.push("\n              </th>\n              ")}),__output.push("\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              "),e.downtimes.forEach(function(t){__output.push("\n              <td>"),__output.push(escape(t.duration)),__output.push("</td>\n              ")}),__output.push("\n            </tr>\n          </tbody>\n        </table>\n        ")),__output.push("\n      </td>\n    </tr>\n    "),e.notes&&(__output.push('\n    <tr class="pressWorksheets-orders-notes '),__output.push(n%2!==0?"":"is-odd"),__output.push('">\n      <td colspan="'),__output.push(extended?14:11),__output.push('">'),__output.push(escape(e.notes)),__output.push("</td>\n    </tr>\n    ")),__output.push("\n    ")}),__output.push("\n  </tbody>\n</table>\n");return __output.join("")}}),define("app/pressWorksheets/views/PressWorksheetDetailsView",["underscore","app/core/views/DetailsView","app/pressWorksheets/templates/details","app/pressWorksheets/templates/ordersList"],function(t,e,n,r){"use strict";return e.extend({template:n,events:{"mouseover tbody > tr":function(t){this.toggleHovered(t.currentTarget,!0)},"mouseout tbody > tr":function(t){this.toggleHovered(t.currentTarget,!1)}},serialize:function(){return t.extend(e.prototype.serialize.call(this),{renderOrdersList:r,extended:!1})},toggleHovered:function(t,e){var n=this.$(t),r=n.hasClass("pressWorksheets-orders-notes")?n.prev():n.next(".pressWorksheets-orders-notes");n.toggleClass("is-hovered",e),r.toggleClass("is-hovered",e)}})}),define("app/pressWorksheets/pages/PressWorksheetDetailsPage",["app/user","app/core/util/pageActions","app/core/pages/DetailsPage","../views/PressWorksheetDetailsView"],function(t,e,n,r){"use strict";return n.extend({DetailsView:r,actions:function(){var n=288e5,r=Date.now(),i=[];return(t.isAllowedTo("PROD_DATA:MANAGE")||t.data._id===this.model.get("creator").id&&Date.parse(this.model.get("createdAt"))+n>r)&&i.push(e.edit(this.model),e["delete"](this.model)),i}})}),define("app/pressWorksheets/templates/form",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="pressWorksheets-form" method="post" action="'),__output.push(formAction),__output.push('" autocomplete="off">\n  <input type="hidden" name="_method" value="'),__output.push(formMethod),__output.push('">\n  <div class="panel panel-primary">\n    <div class="panel-heading">'),__output.push(panelTitleText),__output.push('</div>\n    <div class="panel-body">\n      <div id="'),__output.push(idPrefix),__output.push('-typeChangeWarning" class="message message-inline message-warning">'),__output.push(t("pressWorksheets","FORM:typeChangeWarning")),__output.push('</div>\n      <div class="form-group">\n        <label class="radio-inline">\n          <input id="'),__output.push(idPrefix),__output.push('-type" type="radio" name="type" value="mech">\n          '),__output.push(t("pressWorksheets","PROPERTY:type:mech")),__output.push('\n        </label>\n        <label class="radio-inline">\n          <input type="radio" name="type" value="optics">\n          '),__output.push(t("pressWorksheets","PROPERTY:type:optics")),__output.push('\n        </label>\n        <label class="radio-inline">\n          <input type="radio" name="type" value="paintShop">\n          '),__output.push(t("pressWorksheets","PROPERTY:type:paintShop")),__output.push('\n        </label>\n      </div>\n      <div class="row">\n        <div class="col-md-3 form-group has-required-select2">\n          <label for="'),__output.push(idPrefix),__output.push('-operators" class="control-label is-required">'),__output.push(t("pressWorksheets","PROPERTY:operators")),__output.push('</label>\n          <input id="'),__output.push(idPrefix),__output.push('-operators" type="text" name="operators" required>\n        </div>\n        <div class="col-md-3 pressWorksheets-form-dateAndShift">\n          <div class="row">\n            <div class="col-md-6 form-group">\n              <label for="'),__output.push(idPrefix),__output.push('-date" class="control-label is-required">'),__output.push(t("pressWorksheets","PROPERTY:date")),__output.push('</label>\n              <input id="'),__output.push(idPrefix),__output.push('-date" class="form-control" type="date" name="date" required>\n            </div>\n            <div class="col-md-6 form-group pressWorksheets-form-group-shift">\n              <label for="'),__output.push(idPrefix),__output.push('-shift-1" class="control-label is-required">'),__output.push(t("pressWorksheets","PROPERTY:shift")),__output.push('</label>\n              <div class="pressWorksheets-form-group-shift-checkboxes">\n                <label class="radio-inline"><input id="'),__output.push(idPrefix),__output.push('-shift-1" name="shift" type="radio" value="1" checked> '),__output.push(t("core","SHIFT:1")),__output.push('</label>\n                <label class="radio-inline"><input name="shift" type="radio" value="2"> '),__output.push(t("core","SHIFT:2")),__output.push('</label>\n                <label class="radio-inline"><input name="shift" type="radio" value="3"> '),__output.push(t("core","SHIFT:3")),__output.push('</label>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class="col-md-3 form-group has-required-select2">\n          <label for="'),__output.push(idPrefix),__output.push('-operator" class="control-label is-required">'),__output.push(t("pressWorksheets","PROPERTY:operator")),__output.push('</label>\n          <input id="'),__output.push(idPrefix),__output.push('-operator" type="text" name="operator" required>\n        </div>\n        <div class="col-md-3 form-group has-required-select2">\n          <label for="'),__output.push(idPrefix),__output.push('-master" class="control-label is-required">'),__output.push(t("pressWorksheets","PROPERTY:master")),__output.push('</label>\n          <input id="'),__output.push(idPrefix),__output.push('-master" type="text" name="master" required>\n        </div>\n      </div>\n      <div id="'),__output.push(idPrefix),__output.push('-existingWarning" class="message message-inline message-warning"></div>\n      <div class="pressWorksheets-form-group-paintShop">\n        <div class="form-group">\n          <label for="'),__output.push(idPrefix),__output.push('-startedAt" class="control-label">'),__output.push(t("pressWorksheets","PROPERTY:startedAt")),__output.push('</label>\n          <input id="'),__output.push(idPrefix),__output.push('-startedAt" class="form-control pressWorksheets-form-time" type="time" name="startedAt">\n        </div>\n        <div class="form-group">\n          <label for="'),__output.push(idPrefix),__output.push('-finishedAt" class="control-label">'),__output.push(t("pressWorksheets","PROPERTY:finishedAt")),__output.push('</label>\n          <input id="'),__output.push(idPrefix),__output.push('-finishedAt" class="form-control pressWorksheets-form-time" type="time" name="finishedAt">\n        </div>\n      </div>\n      <div id="'),__output.push(idPrefix),__output.push('-ordersTable" class="table-responsive"></div>\n    </div>\n    <div class="panel-footer">\n      <button type="submit" class="btn btn-primary">'),__output.push(formActionText),__output.push('</button>\n      <button type="submit" class="btn btn-danger">'),__output.push(t("pressWorksheets","FROM:ACTION:saveOverlapping")),__output.push("</button>\n    </div>\n  </div>\n</form>\n");
return __output.join("")}}),define("app/pressWorksheets/templates/ordersTable",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<table class="table table-bordered table-condensed pressWorksheets-form-orders">\n  <thead>\n    <tr>\n      <th rowspan="'),__output.push(rowspan),__output.push('">'),__output.push(t("core","#")),__output.push('</th>\n      <th rowspan="'),__output.push(rowspan),__output.push('" data-column="part">\n        '),__output.push(t("pressWorksheets","PROPERTY:order.part")),__output.push('\n        <span class="pressWorksheets-form-focusLastPart">'),__output.push(t("pressWorksheets","FORM:focusLastPart")),__output.push('</span>\n      </th>\n      <th rowspan="'),__output.push(rowspan),__output.push('" data-column="operation">'),__output.push(t("pressWorksheets","PROPERTY:order.operation")),__output.push('</th>\n      <th class="pressWorksheets-form-min" rowspan="'),__output.push(rowspan),__output.push('" data-column="prodLine">'),__output.push(t("pressWorksheets","PROPERTY:order.prodLine")),__output.push('</th>\n      <th class="pressWorksheets-form-min" rowspan="'),__output.push(rowspan),__output.push('" data-column="quantityDone">'),__output.push(t("pressWorksheets","PROPERTY:order.quantityDone")),__output.push('</th>\n      <th class="pressWorksheets-form-min pressWorksheets-form-timeCell" rowspan="'),__output.push(rowspan),__output.push('" data-column="startedAt">'),__output.push(t("pressWorksheets","PROPERTY:order.startedAt")),__output.push('</th>\n      <th class="pressWorksheets-form-min pressWorksheets-form-timeCell" rowspan="'),__output.push(rowspan),__output.push('" data-column="finishedAt">'),__output.push(t("pressWorksheets","PROPERTY:order.finishedAt")),__output.push("</th>\n      "),lossReasons.length&&(__output.push('\n      <th class="pressWorksheets-form-lossCell pressWorksheets-form-min pressWorksheets-form-separator" colspan="'),__output.push(lossReasons.length),__output.push('">'),__output.push(t("pressWorksheets","PROPERTY:order.losses")),__output.push("</th>\n      ")),__output.push("\n      "),downtimeReasons.length&&(__output.push('\n      <th class="pressWorksheets-form-downtimeCell pressWorksheets-form-min pressWorksheets-form-separator" colspan="'),__output.push(downtimeReasons.length),__output.push('">'),__output.push(t("pressWorksheets","PROPERTY:order.downtimes")),__output.push("</th>\n      ")),__output.push('\n      <th class="actions" rowspan="'),__output.push(rowspan),__output.push('"></th>\n    </tr>\n    '),rowspan&&(__output.push('\n    <tr class="pressWorksheets-form-losses">\n      '),lossReasons.forEach(function(t,e){__output.push('\n      <th class="pressWorksheets-form-lossCell '),__output.push(e?"":"pressWorksheets-form-separator"),__output.push('" data-column="loss.'),__output.push(e),__output.push('"><span class="pressWorksheets-form-loss">'),__output.push(t.label),__output.push("</span></th>\n      ")}),__output.push("\n      "),downtimeReasons.forEach(function(t,e){__output.push('\n      <th class="pressWorksheets-form-downtimeCell '),__output.push(e?"":"pressWorksheets-form-separator"),__output.push('" data-column="downtime.'),__output.push(e),__output.push('" data-type="'),__output.push(t.type),__output.push('"><span class="pressWorksheets-form-loss">'),__output.push(t.label),__output.push("</span></th>\n      ")}),__output.push("\n    </tr>\n    ")),__output.push("\n  </thead>\n  <tbody></tbody>\n</table>\n");return __output.join("")}}),define("app/pressWorksheets/templates/ordersTableRow",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<tr class="pressWorksheets-form-order">\n  <td class="pressWorksheets-form-no">0.</td>\n  <td><input class="pressWorksheets-form-part" type="text" name="orders['),__output.push(no),__output.push('].part" data-column="part" placeholder="'),__output.push(t("pressWorksheets","FORM:PLACEHOLDER:part")),__output.push('"></td>\n  <td><input class="form-control pressWorksheets-form-operation" type="text" name="orders['),__output.push(no),__output.push('].operation" data-column="operation" placeholder="'),__output.push(t("pressWorksheets","FORM:PLACEHOLDER:operation")),__output.push('"></td>\n  <td><input class="pressWorksheets-form-prodLine" type="text" name="orders['),__output.push(no),__output.push('].prodLine" data-column="prodLine" placeholder="'),__output.push(t("pressWorksheets","FORM:PLACEHOLDER:prodLine")),__output.push('"></td>\n  <td><input class="form-control no-controls pressWorksheets-form-quantityDone" type="number" name="orders['),__output.push(no),__output.push('].quantityDone" data-column="quantityDone"></td>\n  <td class="pressWorksheets-form-timeCell"><input class="form-control no-controls pressWorksheets-form-time pressWorksheets-form-startedAt" type="time" name="orders['),__output.push(no),__output.push('].startedAt" data-column="startedAt"></td>\n  <td class="pressWorksheets-form-timeCell"><input class="form-control no-controls pressWorksheets-form-time pressWorksheets-form-finishedAt" type="time" name="orders['),__output.push(no),__output.push('].finishedAt" data-column="finishedAt"></td>\n  '),lossReasons.forEach(function(t,e){__output.push('\n  <td class="pressWorksheets-form-lossCell '),__output.push(e?"":"pressWorksheets-form-separator"),__output.push('"><input class="form-control no-controls pressWorksheets-form-count is-loss" type="number" name="orders['),__output.push(no),__output.push("].losses."),__output.push(t._id),__output.push('" data-column="loss.'),__output.push(e),__output.push('" data-reason="'),__output.push(t._id),__output.push('"></td>\n  ')}),__output.push("\n  "),downtimeReasons.forEach(function(t,e){__output.push('\n  <td class="pressWorksheets-form-downtimeCell '),__output.push(e?"":"pressWorksheets-form-separator"),__output.push('" data-type="'),__output.push(t.type),__output.push('"><input class="form-control no-controls pressWorksheets-form-count is-downtime" type="number" name="orders['),__output.push(no),__output.push("].downtimes."),__output.push(t._id),__output.push('" data-column="downtime.'),__output.push(e),__output.push('" data-reason="'),__output.push(t._id),__output.push('"></td>\n  ')}),__output.push('\n  <td class="actions"><button type="button" class="btn btn-default pressWorksheets-form-comment"><i class="fa fa-comment"></i></button></td>\n</tr>\n');return __output.join("")}}),define("app/pressWorksheets/templates/ordersTableNotesRow",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<tr class="pressWorksheets-form-notes">\n  <td colspan="'),__output.push(colspan),__output.push('"><textarea class="form-control" name="orders['),__output.push(no),__output.push('].notes"></textarea></td>\n</tr>\n');return __output.join("")}}),define("app/pressWorksheets/views/PressWorksheetFormView",["underscore","jquery","app/time","app/i18n","app/viewport","app/data/downtimeReasons","app/data/prodLines","app/core/Model","app/core/views/FormView","app/users/util/setUpUserSelect2","../PressWorksheetCollection","app/pressWorksheets/templates/form","app/pressWorksheets/templates/ordersTable","app/pressWorksheets/templates/ordersTableRow","app/pressWorksheets/templates/ordersTableNotesRow"],function(t,e,n,r,i,o,s,a,u,c,l,p,d,h,f){"use strict";return u.extend({template:p,events:{keydown:function(t){13===t.keyCode&&"TEXTAREA"!==t.target.tagName&&t.preventDefault()},"click button[type=submit]":function(t){this.checkOverlapping=t.target.classList.contains("btn-primary")},submit:function(t){return this.removeIsOverlapping(),this.submitForm(t)},"blur .pressWorksheets-form-time":function(t){var e=t.target.value.trim().replace(/[^0-9: \-]+/g,"");if(0!==e.length){var n=e.match(/^([0-9]+)(?::| +|\-)+([0-9]+)$/),r=0,i=0;n?(r=parseInt(n[1],10),i=parseInt(n[2],10)):4===e.length?(r=parseInt(e.substr(0,2),10),i=parseInt(e.substr(2),10)):3===e.length?(r=parseInt(e[0],10),i=parseInt(e.substr(1),10)):i=parseInt(e,10);var o=isNaN(r)||r>=24,s=isNaN(i)||i>=60;o&&(r=0),s&&(i=0),t.target.value=(10>r?"0":"")+r.toString(10)+":"+(10>i?"0":"")+i.toString(10),this.validateTimes(t.target)}},"blur .pressWorksheets-form-count":function(t){var e=parseInt(t.target.value,10);t.target.value=isNaN(e)?"":e,t.target.classList.contains("is-downtime")&&this.validateTimes(t.target)},"blur .pressWorksheets-form-quantityDone":function(t){var e=parseInt(t.target.value,10);t.target.value=isNaN(e)||0>e?"":e},"focus input":function(t){t.target.classList.contains("select2-focusser")&&t.target.parentNode.classList.contains("pressWorksheets-form-part")?this.$(".table-responsive").prop("scrollLeft",0):t.target.classList.contains("pressWorksheets-form-time")&&t.target.parentNode.classList.contains("form-group")&&(this.paintShopTimeFocused=!0)},"focus .pressWorksheets-form-order input":function(t){var e=this.$(t.target);e.closest("td").addClass("is-focused"),e.hasClass("select2-focusser")&&(e=e.parent().next("input")),e.length&&e[0].dataset.column&&this.$('th[data-column="'+e[0].dataset.column+'"]').addClass("is-focused")},"blur .pressWorksheets-form-order input":function(t){this.$(t.target).closest("td").removeClass("is-focused"),this.$("th.is-focused").removeClass("is-focused")},"change input[name=shift]":function(){this.checkShiftStartTimeValidity(),this.validateTimes(null),this.checkForExistingWorksheet()},"change input[name=date]":function(){this.checkShiftStartTimeValidity(),this.checkForExistingWorksheet()},"change input[name=operator]":function(){this.checkForExistingWorksheet()},"change input[name=type]":function(){this.togglePaintShop(),this.filling||(this.renderOrdersTable(),this.addOrderRow())},"click .pressWorksheets-form-comment":function(t){var e=this.$(t.currentTarget).closest(".pressWorksheets-form-order").next(".pressWorksheets-form-notes");e[e.is(":visible")?"fadeOut":"fadeIn"]("fast",function(){e.find("textarea").focus()})}},initialize:function(){u.prototype.initialize.apply(this,arguments),this.checkOverlapping=!0,this.filling=!1,this.lastOrderNo=-1,this.lossReasons=[],this.downtimeReasons=[],this.paintShopTimeFocused=!1,this.onKeyDown=this.onKeyDown.bind(this),this.existingWorksheets=new l(null,{rqlQuery:"select(rid)"}),this.listenTo(this.existingWorksheets,"request",function(){this.$id("existingWarning").fadeOut()}),this.listenTo(this.existingWorksheets,"reset",this.toggleExistingWarning),e("body").on("keydown",this.onKeyDown)},destroy:function(){e("body").off("keydown",this.onKeyDown)},afterRender:function(){u.prototype.afterRender.call(this),this.prodLinesData=s.filter(function(t){var e=t.getSubdivision();return!t.get("deactivatedAt")&&e&&"press"===e.get("type")}).map(function(t){return{id:t.id,text:t.id}}),c(this.$id("master"));var t=c(this.$id("operator")),e=c(this.$id("operators"),{multiple:!0}),n=this;e.on("change",function(){t.select2("data")||(t.select2("data",e.select2("data")[0]),n.checkForExistingWorksheet())}),this.fillType(),this.renderOrdersTable(),this.fillModelData(),this.addOrderRow(),this.model.id||this.$id("type").focus()},renderOrdersTable:function(){var t="optics"===this.getType(),e=t?"opticsPosition":"pressPosition";this.lossReasons=t?[]:this.model.lossReasons.toJSON(),this.downtimeReasons=o.filter(function(t){return t.get(e)>=0}).map(function(t){return t.toJSON()}).sort(function(t,n){return t[e]-n[e]}),this.lastOrderNo=-1,this.$id("ordersTable").html(d({rowspan:this.lossReasons.length||this.downtimeReasons.length?2:0,lossReasons:this.lossReasons,downtimeReasons:this.downtimeReasons}))},serializeForm:function(t){function e(t){return{id:t.id,label:t.text}}var n=this.$(".pressWorksheets-form-order");t.orders=(t.orders||[]).filter(function(t){return t.part&&t.part.length&&t.operation&&t.operation.length}).map(this.serializeOrder.bind(this,n,this.model.lossReasons)),t.operators=this.$id("operators").select2("data").map(e),t.operator=e(this.$id("operator").select2("data")),t.master=e(this.$id("master").select2("data")),t.shift=parseInt(t.shift,10);var r={},i={};return t.orders.forEach(function(t){r[t.division]=1,i[t.prodLine]=1}),t.divisions=Object.keys(r),t.prodLines=Object.keys(i),t},serializeOrder:function(e,n,r,i){var a=e.eq(i),u=a.find(".pressWorksheets-form-part"),c=u.select2("data").data;c._id&&(c.nc12=c._id,delete c._id);var l=t.find(c.operations,function(t){return t.no===r.operation}),p=[];r.losses&&Object.keys(r.losses).forEach(function(t){t=n.get(t),r.losses[t.id]>0&&p.push({reason:t.id,label:t.get("label"),count:parseInt(r.losses[t.id],10)})});var d=[];r.downtimes&&Object.keys(r.downtimes).forEach(function(t){var e=parseInt(r.downtimes[t],10);if(e>0){t=o.get(t);var n=a.find('.is-downtime[data-reason="'+t.id+'"]');d.push({prodDowntime:n.attr("data-prodDowntime")||null,reason:t.id,label:t.get("label"),duration:e})}});var h=s.get(r.prodLine).getSubdivision();return{prodShiftOrder:u.attr("data-prodShiftOrder")||null,division:h?h.get("division"):null,prodLine:r.prodLine,nc12:c.nc12,name:c.name,operationNo:l.no,operationName:l.name,orderData:c,quantityDone:r.quantityDone,startedAt:r.startedAt||null,finishedAt:r.finishedAt||null,losses:p,downtimes:d,notes:r.notes||""}},checkShiftStartTimeValidity:function(){var t=this.$id("date"),e=this.getShiftMoment();if(t[0].setCustomValidity(e.valueOf()>Date.now()?r("pressWorksheets","FORM:ERROR:date"):""),this.isPaintShop()){var n=this.$id("startedAt"),i=this.$id("finishedAt");if(!e.isValid())return;this.paintShopTimeFocused||(n.val(e.format("HH:mm")),i.val(e.add(8,"hours").format("HH:mm")))}},getShiftMoment:function(){var t=this.$id("date"),e=parseInt(this.$("input[name=shift]:checked").val(),10);return n.getMoment(t.val()+" 06:00:00","YYYY-MM-DD HH:mm:ss").add(8*(e-1),"hours")},getType:function(){return this.$("input[name=type]:checked").val()},isPaintShop:function(){return"paintShop"===this.getType()},showFieldError:function(t,e){return t.hasClass("select2-offscreen")?t.select2("focus"):t.focus(),this.$errorMessage=i.msg.show({type:"error",time:3e3,text:r("pressWorksheets","FORM:ERROR:"+e)}),!1},setUpOrderSelect2:function(t){var e=this;t.removeClass("form-control"),t.select2({allowClear:!0,minimumInputLength:10,ajax:{cache:!0,quietMillis:300,url:function(t){return"/production/orders?nc12="+encodeURIComponent(t)},results:function(t){return{results:(t||[]).map(function(t){return{id:t._id,text:t._id+" - "+(t.name||"?"),data:t}})}}}}),t.on("change",function(n){var r=t.closest(".pressWorksheets-form-order"),i=r.next(),o=e.isLastOrderRow(r);if(!n.added&&!o){var s=r.next().next();return s.length||(s=r.prev().prev()),s.find(".pressWorksheets-form-part").select2("focus"),i.is(":visible")?i.fadeOut(function(){i.remove()}):i.remove(),r.fadeOut(function(){r.remove(),e.setUpPartValidation(),e.recalcOrderNoColumn()}),void(n.added||2!==e.$(".pressWorksheets-form-order").length||e.$id("typeChangeWarning").fadeOut())}var a=[];n.added&&Array.isArray(n.added.data.operations)&&n.added.data.operations.forEach(function(t){""!==t.workCenter&&-1!==t.laborTime&&a.push(t)});var u=r.find(".pressWorksheets-form-operation");e.setUpOperationSelect2(u,a.map(function(t){return{id:t.no,text:t.no+" - "+(t.name||"?")}})),a.length?u.select2("val",a[0].no).select2("focus"):(u.select2("destroy"),u.select2("destroy"),u.addClass("form-control").val(""),t.select2("focus")),o&&e.addOrderRow(r)})},setUpOperationSelect2:function(t,e){t.removeClass("form-control"),t.select2({openOnEnter:null,allowClear:!1,data:e||[]})},setUpProdLineSelect2:function(t,e){t.removeClass("form-control"),t.select2({width:"185px",openOnEnter:null,allowClear:!1,data:this.prodLinesData}),e&&t.select2("val",e.find(".pressWorksheets-form-prodLine").select2("val"))},isLastOrderRow:function(t){return this.$("tbody > tr:last-child").prev()[0]===t[0]},addOrderRow:function(t,n){n=n!==!1,++this.lastOrderNo;var r=e(h({no:this.lastOrderNo,lossReasons:this.lossReasons,downtimeReasons:this.downtimeReasons})),i=e(f({no:this.lastOrderNo,colspan:r.find("td").length}));i.hide(),this.lastOrderNo>0&&n&&r.hide(),this.$(".pressWorksheets-form-prodLine:last-child").attr("required",!0),this.$(".pressWorksheets-form-quantityDone:last-child").attr("required",!0),this.isPaintShop()||(this.$(".pressWorksheets-form-startedAt:last-child").attr("required",!0),this.$(".pressWorksheets-form-finishedAt:last-child").attr("required",!0)),this.$(".pressWorksheets-form-orders > tbody").append(r).append(i),this.lastOrderNo>0&&n&&r.fadeIn(),this.setUpOrderSelect2(r.find(".pressWorksheets-form-part")),this.setUpProdLineSelect2(r.find(".pressWorksheets-form-prodLine"),t);var o=this.$id("typeChangeWarning");return n?this.lastOrderNo>0?o.fadeIn():o.fadeOut():o.toggle(this.lastOrderNo>0),n&&(this.setUpPartValidation(),this.recalcOrderNoColumn()),t&&this.copyDataFromPrevRow(t),r},copyDataFromPrevRow:function(t){var e=t.prev();e.length&&(t.find(".pressWorksheets-form-prodLine").select2("val",e.find(".pressWorksheets-form-prodLine").select2("val")),t.find(".pressWorksheets-form-startedAt").val(e.find(".pressWorksheets-form-finishedAt").val()))},setUpPartValidation:function(){var t=this.$("input.pressWorksheets-form-part");t.last().attr("required",1===t.length)},recalcOrderNoColumn:function(){this.$(".pressWorksheets-form-order").each(function(t){var n=e(this),r=n.next();n.find(".pressWorksheets-form-no").text(t+1+".");var i=t%2!==0;n.toggleClass("is-even",i),r.toggleClass("is-even",i)})},togglePaintShop:function(){var t=this.isPaintShop();this.$el.toggleClass("pressWorksheets-form-paintShop",t),this.$(".pressWorksheets-form-group-paintShop input").attr("required",t)},validateTimes:function(t){if(this.isPaintShop())this.checkPaintShopValidity();else if(t)this.checkOrderTimesValidity(t);else{var e=this;this.$(".pressWorksheets-form-startedAt").each(function(){e.checkOrderTimesValidity(this)})}},checkPaintShopValidity:function(){var t=this.$id("startedAt"),e=this.$id("finishedAt");t[0].setCustomValidity(""),e[0].setCustomValidity(""),this.checkTimesValidity(null,t,e)},checkOrderTimesValidity:function(t){var e=this.$(t).closest(".pressWorksheets-form-order"),n=e.find(".pressWorksheets-form-startedAt"),r=e.find(".pressWorksheets-form-finishedAt");n[0].setCustomValidity(""),r[0].setCustomValidity(""),n.prop("required")&&""!==n.val()&&""!==r.val()&&this.checkTimesValidity(e,n,r)},checkTimesValidity:function(t,e,i){var o=this.$id("date").val();o||(o=n.format(new Date,"YYYY-MM-DD"));var s=this.getShiftMoment(),a=s.valueOf(),u=a+288e5,c=this.getTimeFromString(o,e.val(),!1),l=this.getTimeFromString(o,i.val(),!0);if(a>c||c>u)return e[0].setCustomValidity(r("pressWorksheets","FORM:ERROR:startedAt:boundries"));if(a>l||l>u)return i[0].setCustomValidity(r("pressWorksheets","FORM:ERROR:finishedAt:boundries"));if(c>=l)return i[0].setCustomValidity(r("pressWorksheets","FORM:ERROR:finishedAt:gt"));var p=(l-c)/36e5,d=this.countDowntimeDuration(this.isPaintShop()?null:t);return d>=p?i[0].setCustomValidity(r("pressWorksheets","FORM:ERROR:finishedAt:downtime")):void 0},checkValidity:function(){if(!this.checkOverlapping)return!0;for(var t=this.el.querySelectorAll(".pressWorksheets-form-order"),e=t.length-1,n=this.$id("date").val(),r={},i=0;e>i;++i){var o=t[i],s=o.querySelector("input.pressWorksheets-form-prodLine").value;r[s]||(r[s]=[]),r[s].push({orderRowEl:o,startedAt:this.getTimeFromString(n,o.querySelector(".pressWorksheets-form-startedAt").value,!1),finishedAt:this.getTimeFromString(n,o.querySelector(".pressWorksheets-form-finishedAt").value,!1)})}var a=!0,u=this;return Object.keys(r).forEach(function(t){if(a)for(var e=r[t];e.length;)for(var n=e.shift(),i=0,o=e.length;o>i;++i){var s=e[i];if(s.startedAt>=n.startedAt&&s.startedAt<n.finishedAt||s.finishedAt>n.startedAt&&s.finishedAt<=n.finishedAt)return void(a=u.showOverlappingError(n,s));if(n.startedAt>=s.startedAt&&n.startedAt<s.finishedAt||n.finishedAt>s.startedAt&&n.finishedAt<=s.finishedAt)return void(a=u.showOverlappingError(s,n))}}),a},showOverlappingError:function(t,e){return this.$errorMessage=i.msg.show({type:"error",time:5e3,text:r("pressWorksheets","FORM:ERROR:overlapping")}),t.orderRowEl.classList.add("is-overlapping"),e.orderRowEl.classList.add("is-overlapping"),this.timers.removeIsOverlapping=setTimeout(this.removeIsOverlapping.bind(this),5e3),this.$(".btn-danger").fadeIn(),!1},removeIsOverlapping:function(){this.timers.removeIsOverlapping&&(clearTimeout(this.timers.removeIsOverlapping),this.timers.removeIsOverlapping=null),this.$(".is-overlapping").removeClass("is-overlapping"),this.$(".btn-danger").fadeOut()},countDowntimeDuration:function(t){var e=0;return(t||this.$el).find(".pressWorksheets-form-count.is-downtime").each(function(){var t=parseInt(this.value,10);e+=isNaN(t)||0>=t?0:t}),e/60},getTimeFromString:function(t,e,r){var i=n.getMoment(t+" "+e+":00","YYYY-MM-DD HH:mm:ss");return r&&6===i.hours()&&0===i.minutes()&&i.hours(5).minutes(59).seconds(59).milliseconds(999),i.hours()<6&&i.add(1,"days"),i.valueOf()},serializeToForm:function(){return{}},fillModelData:function(){this.filling=!0,this.fillPersonnel(),this.fillDateAndTimes();var t=this.model.get("orders");Array.isArray(t)&&t.length&&t.forEach(this.fillOrder,this),this.filling=!1},fillType:function(){this.$("input[name=type][value="+this.model.get("type")+"]").trigger("click",!0)},fillPersonnel:function(){function t(t){return{id:t.id,text:t.label}}var e=this.model.get("operators"),n=this.model.get("operator"),r=this.model.get("master");Array.isArray(e)&&e.length&&this.$id("operators").select2("data",e.map(t)),n&&this.$id("operator").select2("data",t(n)),r&&this.$id("master").select2("data",t(r))},fillDateAndTimes:function(){this.$id("date").val(n.format(this.model.get("date"),"YYYY-MM-DD")),this.$("input[name=shift][value="+this.model.get("shift")+"]").click(),"paintShop"===this.model.get("type")&&(this.$id("startedAt").val(this.model.get("startedAt")),this.$id("finishedAt").val(this.model.get("finishedAt")))},fillOrder:function(e){var n=this.addOrderRow(null,!1),r=n.find(".pressWorksheets-form-part"),i=n.find(".pressWorksheets-form-operation");r.attr("data-prodShiftOrder",e.prodShiftOrder).select2("data",{id:e.nc12,text:e.nc12+" - "+(e.name||"?"),data:e.orderData}),this.setUpOperationSelect2(i,t.map(e.orderData.operations,function(t){return{id:t.no,text:t.no+" - "+(t.name||"?")}})),i.select2("val",e.operationNo),n.find(".pressWorksheets-form-prodLine").select2("val",e.prodLine),n.find(".pressWorksheets-form-quantityDone").val(e.quantityDone),Array.isArray(e.losses)&&e.losses.forEach(this.fillLoss.bind(this,n)),Array.isArray(e.downtimes)&&e.downtimes.forEach(this.fillDowntime.bind(this,n)),"paintShop"!==this.model.get("type")&&(n.find(".pressWorksheets-form-startedAt").val(e.startedAt),n.find(".pressWorksheets-form-finishedAt").val(e.finishedAt)),e.notes&&n.next().show().find("textarea").val(e.notes)},fillLoss:function(t,e){t.find('.is-loss[data-reason="'+e.reason+'"]').val(e.count)},fillDowntime:function(t,e){var n=t.find('.is-downtime[data-reason="'+e.reason+'"]');n.attr("data-prodDowntime",e.prodDowntime).val(e.duration)},toggleExistingWarning:function(){var t=this.$id("existingWarning");this.existingWorksheets.length?t.html(r("pressWorksheets","FORM:existingWarning",{count:this.existingWorksheets.length,links:this.existingWorksheets.map(function(t){return'<a href="'+t.genClientUrl()+'">'+t.getLabel()+"</a>"}).join(", ")})).fadeIn():t.fadeOut()},checkForExistingWorksheet:function(){var t=new Date(this.$id("date").val()+" 06:00:00"),e=parseInt(this.$("input[name=shift]:checked").val(),10),n=this.$id("operator").val(),r=this.$id("existingWarning");if(isNaN(t.getTime())||!e||!n.length)return r.fadeOut();2===e?t.setHours(14):3===e&&t.setHours(22);var i=this.existingWorksheets.rqlQuery.selector;i.args=[{name:"eq",args:["date",t.getTime()]},{name:"eq",args:["operators.id",n]}],this.model.id&&i.args.push({name:"ne",args:["_id",this.model.id]}),this.promised(this.existingWorksheets.fetch({reset:!0}))},onKeyDown:function(t){t.altKey&&13===t.keyCode&&this.$(".pressWorksheets-form-order:last-child").find(".pressWorksheets-form-part").select2("focus")}})}),define("app/pressWorksheets/pages/PressWorksheetAddFormPage",["app/core/pages/AddFormPage","app/lossReasons/LossReasonCollection","../views/PressWorksheetFormView"],function(t,e,n){"use strict";return t.extend({FormView:n,load:function(t){return this.model.lossReasons=new e(null,{rqlQuery:"select(label)&sort(position)&position>=0"}),t(this.model.lossReasons.fetch({reset:!0}))}})}),define("app/pressWorksheets/pages/PressWorksheetEditFormPage",["app/core/pages/EditFormPage","app/lossReasons/LossReasonCollection","../views/PressWorksheetFormView"],function(t,e,n){"use strict";return t.extend({FormView:n,load:function(t){return this.model.lossReasons=new e(null,{rqlQuery:"select(label)&sort(position)&position>=0"}),t(this.model.fetch(),this.model.lossReasons.fetch({reset:!0}))}})}),define("app/nls/pressWorksheets",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Worksheets"},"BREADCRUMBS:details":function(){return"Worksheet"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the worksheets :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the worksheet :("},"MSG:DELETED":function(t){return"Worksheet <em>"+e.v(t,"label")+"</em> was deleted."},"MSG:jump:404":function(t){return"Couldn't find a worksheet with ID <em>"+e.v(t,"rid")+"</em> :("},"PAGE_ACTION:add":function(){return"Add worksheet"},"PAGE_ACTION:edit":function(){return"Edit worksheet"},"PAGE_ACTION:delete":function(){return"Delete worksheet"},"PAGE_ACTION:jump:title":function(){return"Jump to worksheet by ID"},"PAGE_ACTION:jump:placeholder":function(){return"Worksheet ID"},"PANEL:TITLE:details":function(){return"Worksheet's details"},"PANEL:TITLE:addForm":function(){return"Add worksheet form"},"PANEL:TITLE:editForm":function(){return"Edit worksheet form"},"PANEL:TITLE:details:orders":function(){return"Parts"},"filter:submit":function(){return"Filter worksheets"},"filter:date":function(){return"Date"},"filter:shift":function(){return"Shift"},"filter:type:any":function(){return"Any"},"filter:type:mech":function(){return"Treatment"},"filter:type:paintShop":function(){return"Paint shop"},"filter:type:optics":function(){return"Optics"},"filter:mine":function(){return"Only mine"},"filter:mine:title":function(){return"Limit the worksheet to those added by you from the newest to the oldest!"},"filter:user:master":function(){return"Master"},"filter:user:operators":function(){return"Operator"},"PROPERTY:pressWorksheet":function(){return"Worksheet"},"PROPERTY:user":function(){return"User"},"PROPERTY:rid":function(){return"ID"},"PROPERTY:operators":function(){return"Operators"},"PROPERTY:operator":function(){return"Signed operator"},"PROPERTY:master":function(){return"Signed master"},"PROPERTY:date":function(){return"Date"},"PROPERTY:shift":function(){return"Shift"},"PROPERTY:type":function(){return"Type"},"PROPERTY:type:mech":function(){return"Treatment"},"PROPERTY:type:paintShop":function(){return"Paint shop"},"PROPERTY:type:optics":function(){return"Optics"},"PROPERTY:startedAt":function(){return"Started at"},"PROPERTY:finishedAt":function(){return"Finished at"},"PROPERTY:createdAt":function(){return"Created at"},"PROPERTY:creator":function(){return"Creator"},"PROPERTY:divisions":function(){return"Divisions"},"PROPERTY:order.part":function(){return"Part"},"PROPERTY:order.operation":function(){return"Operation"},"PROPERTY:order.#":function(){return"#"},"PROPERTY:order.nc12":function(){return"12NC"},"PROPERTY:order.name":function(){return"Part name"},"PROPERTY:order.operationName":function(){return"Operation name"},"PROPERTY:order.operationNo":function(){return"Operation no"},"PROPERTY:order.division":function(){return"Division"},"PROPERTY:order.prodLine":function(){return"Machine"},"PROPERTY:order.quantityDone":function(){return"Good qty"},"PROPERTY:order.startedAt":function(){return"Started at"},"PROPERTY:order.finishedAt":function(){return"Finished at"},"PROPERTY:order.losses":function(){return"Losses [items]"},"PROPERTY:order.downtimes":function(){return"Downtimes by master's instruction [minutes]"},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Worksheet deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete worksheet"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen worksheet?<br><br>Along with the worksheet, all Orders and Downtimes defined in it will be deleted."},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> worksheet? Along with the worksheet, all Orders and Downtimes defined in it will be deleted."},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the worksheet :-("},"FORM:ACTION:add":function(){return"Add worksheet"},"FORM:ACTION:edit":function(){return"Edit worksheet"},"FROM:ACTION:saveOverlapping":function(){return"Save worksheet with overlapping orders"},"FORM:ERROR:addFailure":function(){return"Failed to add the worksheet :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the worksheet :-("},"FORM:ERROR:startedAt:boundries":function(){return"Started at must be within the boundries of the selected shift."},"FORM:ERROR:finishedAt:boundries":function(){return"Finished at must be within the boundries of the selected shift."},"FORM:ERROR:finishedAt:gt":function(){return"Finished at must be later than Started at."},"FORM:ERROR:finishedAt:downtime":function(){return"Total downtime must be less than the order's duration."},"FORM:ERROR:overlapping":function(){return"Time of the orders on the same machines are overlapping!"},"FORM:ERROR:date":function(){return"Shift's time cannot be in the future."},"FORM:PLACEHOLDER:part":function(){return"Search parts by 12NC..."},"FORM:PLACEHOLDER:operation":function(){return"Choose an operation..."},"FORM:PLACEHOLDER:prodLine":function(){return"Choose a machine..."},"FORM:focusLastPart":function(){return"(ALT+Enter focuses the last search field)"},"FORM:typeChangeWarning":function(){return"<strong>WARNING!</strong> Changing of the type will erase all entered parts!"},"FORM:existingWarning":function(t){return"<strong>WARNING!</strong> "+e.p(t,"count",0,"en",{one:"Worksheet",other:"Worksheets"})+" for the specified Date, Shift and Signed operator already "+e.p(t,"count",0,"en",{one:"exists",other:"exist"})+": "+e.v(t,"links")+"."}},pl:!0}}),define("app/nls/pl/pressWorksheets",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)
}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Karty pracy"},"BREADCRUMBS:details":function(){return"Karta pracy"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie kart pracy nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie karty pracy nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Karta pracy <em>"+e.v(t,"label")+"</em> zosta≈Ça usuniƒôta."},"MSG:jump:404":function(t){return"Nie znaleziono karty pracy o ID <em>"+e.v(t,"rid")+"</em> :("},"PAGE_ACTION:add":function(){return"Dodaj kartƒô pracy"},"PAGE_ACTION:edit":function(){return"Edytuj kartƒô pracy"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ kartƒô pracy"},"PAGE_ACTION:jump:title":function(){return"Skocz do karty pracy po ID"},"PAGE_ACTION:jump:placeholder":function(){return"ID karty pracy"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy karty pracy"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania karty pracy"},"PANEL:TITLE:editForm":function(){return"Formularz edycji karty pracy"},"PANEL:TITLE:details:orders":function(){return"Lista czƒô≈õci"},"filter:submit":function(){return"Filtruj karty pracy"},"filter:shift":function(){return"Zmiana"},"filter:type:any":function(){return"Dowolny"},"filter:type:mech":function(){return"Obr. mech."},"filter:type:paintShop":function(){return"Malarnia"},"filter:type:optics":function(){return"M. optyki"},"filter:mine":function(){return"Tylko moje"},"filter:mine:title":function(){return"Ogranicz listƒô kart pracy do dodanych przez Ciebie w kolejno≈õci od najnowszej do najstarszej!"},"filter:user:master":function(){return"Mistrz"},"filter:user:operators":function(){return"Operator"},"PROPERTY:pressWorksheet":function(){return"Karta pracy"},"PROPERTY:user":function(){return"U≈ºytkownik"},"PROPERTY:rid":function(){return"ID"},"PROPERTY:operators":function(){return"Nastawiacze/operatorzy"},"PROPERTY:operator":function(){return"Podpisany nastawiacz/operator"},"PROPERTY:master":function(){return"Podpisany mistrz"},"PROPERTY:date":function(){return"Data"},"PROPERTY:shift":function(){return"Zmiana"},"PROPERTY:type":function(){return"Typ"},"PROPERTY:type:mech":function(){return"Obr√≥bka mechaniczna"},"PROPERTY:type:paintShop":function(){return"Malarnia"},"PROPERTY:type:optics":function(){return"Monta≈º optyki"},"PROPERTY:startedAt":function(){return"Godz. rozp."},"PROPERTY:finishedAt":function(){return"Godz. zak."},"PROPERTY:createdAt":function(){return"Czas dodania"},"PROPERTY:creator":function(){return"Dodana przez"},"PROPERTY:divisions":function(){return"Wydzia≈Çy"},"PROPERTY:order.part":function(){return"Czƒô≈õƒá"},"PROPERTY:order.operation":function(){return"Operacja"},"PROPERTY:order.#":function(){return"Lp."},"PROPERTY:order.nc12":function(){return"12NC czƒô≈õci"},"PROPERTY:order.name":function(){return"Nazwa czƒô≈õci"},"PROPERTY:order.operationName":function(){return"Nazwa operacji"},"PROPERTY:order.operationNo":function(){return"Numer oper."},"PROPERTY:order.division":function(){return"Wydzia≈Ç"},"PROPERTY:order.prodLine":function(){return"Maszyna"},"PROPERTY:order.quantityDone":function(){return"Ilo≈õƒá dobrych"},"PROPERTY:order.startedAt":function(){return"Godz. rozp."},"PROPERTY:order.finishedAt":function(){return"Godz. zak."},"PROPERTY:order.losses":function(){return"Straty materia≈Çowe [sztuki]"},"PROPERTY:order.downtimes":function(){return"Straty czasu z polecenia mistrza [minuty]"},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia karty pracy"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ kartƒô pracy"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybranƒÖ kartƒô pracy?<br><br>Wraz z kartƒÖ pracy usuniƒôte zostanƒÖ zdefiniowane w niej Zlecenia i Przestoje."},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá kartƒô pracy <em>"+e.v(t,"label")+"</em>?<br><br>Wraz z kartƒÖ pracy usuniƒôte zostanƒÖ zdefiniowane w niej Zlecenia i Przestoje."},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá karty pracy :-("},"FORM:ACTION:add":function(){return"Dodaj kartƒô pracy"},"FORM:ACTION:edit":function(){return"Edytuj kartƒô pracy"},"FROM:ACTION:saveOverlapping":function(){return"Zapisz kartƒô pracy z pokrywajƒÖcymi siƒô czasami zlece≈Ñ"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá karty pracy :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá karty pracy :-("},"FORM:ERROR:startedAt:boundries":function(){return"Godz. rozp. musi mie≈õciƒá siƒô w zakresie godzinowym wybranej zmiany."},"FORM:ERROR:finishedAt:boundries":function(){return"Godz. zak. musi mie≈õciƒá siƒô w zakresie godzinowym wybranej zmiany."},"FORM:ERROR:finishedAt:gt":function(){return"Godz. zak. musi byƒá p√≥≈∫niejsza ni≈º Godz. rozp."},"FORM:ERROR:finishedAt:downtime":function(){return"Suma przestoj√≥w musi byƒá kr√≥tsza ni≈º czas trwania zlecenia."},"FORM:ERROR:overlapping":function(){return"Czasy zlece≈Ñ na tych samych maszynach pokrywajƒÖ siƒô!"},"FORM:ERROR:date":function(){return"Czas zmiany nie mo≈ºe byƒá z przysz≈Ço≈õci."},"FORM:PLACEHOLDER:part":function(){return"Szukaj czƒô≈õci po 12NC..."},"FORM:PLACEHOLDER:operation":function(){return"Wybierz operacjƒô..."},"FORM:PLACEHOLDER:prodLine":function(){return"Wybierz maszynƒô..."},"FORM:focusLastPart":function(){return"(skr√≥t ALT+Enter zaznaczy ostatnie pole)"},"FORM:typeChangeWarning":function(){return"<strong>UWAGA!</strong> Zmiana typu wyczy≈õci listƒô wykonanych czƒô≈õci!"},"FORM:existingWarning":function(t){return"<strong>UWAGA!</strong> Dla wybranej Daty, Zmiany i Podpisanego nastawiacza/operatora "+e.p(t,"count",0,"pl",{one:"istnieje ju≈º karta pracy",other:"istniejƒÖ ju≈º karty pracy"})+": "+e.v(t,"links")+"."}}}),define("app/pressWorksheets/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","./PressWorksheet","./pages/PressWorksheetListPage","./pages/PressWorksheetDetailsPage","./pages/PressWorksheetAddFormPage","./pages/PressWorksheetEditFormPage","i18n!app/nls/pressWorksheets"],function(t,e,n,r,i,o,s,a,u){"use strict";var c=n.auth("LOCAL","PROD_DATA:VIEW","PRESS_WORKSHEETS:VIEW"),l=n.auth("PRESS_WORKSHEETS:MANAGE");t.map("/pressWorksheets",c,function(t){e.showPage(new o({rql:t.rql}))}),t.map("/pressWorksheets;add",l,function(){e.showPage(new a({model:new i}))}),t.map("/pressWorksheets/:id",c,function(t){e.showPage(new s({model:new i({_id:t.params.id})}))}),t.map("/pressWorksheets/:id;edit",l,function(t){e.showPage(new u({model:new i({_id:t.params.id})}))}),t.map("/pressWorksheets/:id;delete",l,r.bind(null,i))}),define("app/prodChangeRequests/util/isChangeRequest",["app/user"],function(t){"use strict";return function(){return t.isAllowedTo("PROD_DATA:CHANGES:REQUEST")&&!t.isAllowedTo("PROD_DATA:MANAGE")}}),define("app/prodChangeRequests/util/createShowDeleteFormPage",["underscore","app/broker","app/i18n","app/viewport","app/core/util/showDeleteFormPage","./isChangeRequest"],function(t,e,n,r,i,o){"use strict";return function(t){var s=t.prototype.nlsDomain;return function(a,u){var c=e.sandbox();return c.subscribe("viewport.page.loadingFailed",function(){c.destroy()}),c.subscribe("viewport.page.shown").on("message",function(t){c.destroy(),t.listenToOnce(t.view,"success",function(){e.subscribe("router.executing").setLimit(1).on("message",r.msg.show.bind(r.msg,{type:"success",time:3e3,text:n(s,"changeRequest:msg:success:delete")}))})}),i(t,a,u,o()?{formActionText:n.bound(s,"changeRequest:delete:formActionText"),messageText:n.bound(s,"changeRequest:delete:messageText"),failureText:n.bound(s,"changeRequest:msg:failure:delete")}:{})}}}),define("app/prodDowntimes/util/decorateProdDowntimeChange",["underscore","app/time","app/i18n","app/data/aors","app/data/downtimeReasons","app/core/templates/userInfo"],function(t,e,n,r,i,o){"use strict";function s(t,s){switch(t){case"startedAt":case"finishedAt":return e.format(s,"YYYY-MM-DD, HH:mm:ss");case"master":case"leader":case"operator":return o({userInfo:s});case"status":return n("prodDowntimes","PROPERTY:status:"+s);case"reason":var a=i.get(s);return a?a.getLabel():s;case"aor":var u=r.get(s);return u?u.getLabel():s;default:return s||""}}return function(r){return{time:e.toTagData(r.date),user:o({userInfo:r.user}),changes:t.map(r.data,function(t,e){return{label:n("prodDowntimes","PROPERTY:"+e),oldValue:s(e,t[0]),newValue:s(e,t[1])}}),comment:r.comment.trim()}}}),define("app/prodDowntimes/util/decorateProdDowntime",["app/time","app/i18n","app/user","app/data/aors","app/data/subdivisions","app/data/mrpControllers","app/data/prodFlows","app/data/prodLines","app/data/downtimeReasons","app/data/views/renderOrgUnitPath","app/core/templates/userInfo","./decorateProdDowntimeChange"],function(t,e,n,r,i,o,s,a,u,c,l,p){"use strict";return function(o,d){var h=d&&d.longDate?"LLLL":"YYYY-MM-DD, HH:mm:ss",f=o.toJSON();f.statusClassName=o.getCssClassName(),f.statusText=e("prodDowntimes","PROPERTY:status:"+f.status),f.className=f.statusClassName,f.reasonComment&&f.reasonComment.trim().length&&(f.className+=" is-withReasonComment");var m=r.get(f.aor);f.aor=m?m.getLabel():f.aor;var _=a.get(f.prodLine);_&&(f.prodLine=_.getLabel(),f.prodLinePath=c(_,!1,!1));var g=u.get(f.reason);if(f.reason=g?g.getLabel():f.reason,f.startedAt&&f.finishedAt){var v=Date.parse(f.startedAt),y=Date.parse(f.finishedAt),w=Math.round((y-v)/1e3);f.duration=t.toString(w)}else f.duration="-";f.startedAt=t.format(f.startedAt,h),f.finishedAt=f.finishedAt?t.format(f.finishedAt,h):e("prodDowntimes","NO_DATA:finishedAt"),f.corroboratedAt=t.format(f.corroboratedAt,h)||"-",f.order=f.prodShiftOrder?f.orderId+"; "+f.operationNo:e("prodDowntimes","NO_DATA:order"),n.isAllowedTo("PROD_DATA:VIEW")&&f.prodShiftOrder&&(f.order='<a href="#prodShiftOrders/'+f.prodShiftOrder+'">'+f.order+"</a>"),f.date=f.date?t.format(f.date,"YYYY-MM-DD"):"?",f.shift=f.shift?e("core","SHIFT:"+f.shift):"?",f.prodShiftText=f.date+", "+f.shift,n.isAllowedTo("PROD_DATA:VIEW")&&f.prodShift&&(f.prodShiftText='<a href="#prodShifts/'+f.prodShift+'">'+f.prodShiftText+"</a>"),f.masterInfo=l({userInfo:f.master}),f.leaderInfo=l({userInfo:f.leader}),f.operatorInfo=l({userInfo:f.operator}),f.creatorInfo=l({userInfo:f.creator}),f.corroboratorInfo=l({userInfo:f.corroborator});var E=i.get(f.subdivision),b=s.get(f.prodFlow);f.subdivision=E?E.getLabel():"?",f.prodFlow=b?b.getLabel():"?",f.mrpControllers=Array.isArray(f.mrpControllers)&&f.mrpControllers.length?f.mrpControllers.join("; "):"?",f.history=!Array.isArray(f.changes)||d&&d.noHistory===!0?[]:f.changes.map(p);var T=f.changesCount;return T&&d&&d.changesCount&&(T.reason&&(f.reason+=' <span title="'+e("prodDowntimes","changesCount:reason")+'" class="label label-'+(T.reason>=d.maxReasonChanges?"danger":"warning")+'">'+T.reason+"</span>"),T.aor&&(f.aor+=' <span title="'+e("prodDowntimes","changesCount:aor")+'" class="label label-'+(T.aor>=d.maxAorChanges?"danger":"warning")+'">'+T.aor+"</span>")),f}}),define("app/prodDowntimes/ProdDowntime",["../time","../user","../core/Model","../core/util/getShiftEndDate","./util/decorateProdDowntime"],function(t,e,n,r,i){"use strict";var o={undecided:"warning",confirmed:"success",rejected:"danger","null":"primary"};return n.extend({urlRoot:"/prodDowntimes",clientUrlRoot:"#prodDowntimes",topicPrefix:"prodDowntimes",privilegePrefix:"PROD_DOWNTIMES",nlsDomain:"prodDowntimes",labelAttribute:"rid",defaults:{division:null,subdivision:null,mrpControllers:null,prodFlow:null,workCenter:null,prodLine:null,prodShift:null,prodShiftOrder:null,date:null,shift:null,aor:null,reason:null,reasonComment:null,decisionComment:null,status:null,startedAt:null,finishedAt:null,corroborator:null,corroboratedAt:null,creator:null,master:null,leader:null,operator:null,operators:null,mechOrder:null,orderId:null,operationNo:null},serializeRow:function(){return i(this,{changesCount:!0})},serializeDetails:function(){return i(this,{longDate:!0})},getCssClassName:function(t){return o[void 0===t?this.get("status"):t]},finish:function(){if(null!=this.get("finishedAt"))return null;var e=t.getMoment().toDate(),n=r(this.get("date"),this.get("shift"));return e>n&&(e=n),this.set("finishedAt",e),{_id:this.id,finishedAt:e}},isEditable:function(){return null!=this.get("finishedAt")&&null===this.get("pressWorksheet")},canCorroborate:function(){return e.isLoggedIn()&&null===this.get("pressWorksheet")},canChangeStatus:function(t){if(!this.get("finishedAt"))return 0;if(t.canManageProdData)return 2;var e=this.get("status");if(!t.canManageProdDowntimes||"confirmed"===e)return 0;var n=this.get("changesCount");return!n||n.rejected>=t.maxRejectedChanges||n.reason>=t.maxReasonChanges||n.aor>=t.maxAorChanges?0:t.hasAccessToAor(this.get("aor"))?1:0}},{STATUS:{UNDECIDED:"undecided",CONFIRMED:"confirmed",REJECTED:"rejected"},parse:function(t){return["date","startedAt","finishedAt","createdAt","corroboratedAt"].forEach(function(e){"string"==typeof t[e]&&(t[e]=new Date(t[e]))}),t}})}),define("app/data/prodLog",["underscore","jquery","app/i18n","app/user","app/time","app/broker","app/socket","app/updater/index"],function(t,e,n,r,i,o,s,a){"use strict";function u(){if(null!==_){var t=localStorage.getItem(h);null===t?localStorage.setItem(h,_):localStorage.setItem(h,_+"\n"+t),_=null,localStorage.removeItem(f),o.publish("production.synced",{message:"DISCONNECT"})}}function c(t){if(g&&null===_&&!a.isRestarting()&&(_=localStorage.getItem(h),null!==_)){var n=localStorage.getItem(f);null!==n&&(_=n+"\n"+_),localStorage.setItem(f,_),localStorage.removeItem(h),o.publish("production.syncing");var r=e.ajax({method:"POST",url:"/prodLogEntries",contentType:"text/plain; charset=UTF-8",data:_,timeout:1e4});r.fail(function(e){var n=localStorage.getItem(h);n=null===n?_:_+"\n"+n,localStorage.setItem(h,n),localStorage.removeItem(f),_=null,o.publish("production.synced",{message:e.responseText}),t=t?t+1:1,setTimeout(c,Math.min(1e3*t,2e4),t)}),r.done(function(t){localStorage.removeItem(f),_=null,o.publish("production.synced",null),t&&t.lock&&o.publish("production.locked",t.lock),setTimeout(c,100)})}}function l(t){for(var e=0,n=0,r=t.length;r>n;++n)e=(e<<5)-e+t.charCodeAt(n)|0;return e}function p(t,e){return t.getTime().toString(36)+l(e).toString(36)+Math.round(1e16*Math.random()).toString(36)}var d=Math.round(Date.now()+9999999*Math.random()).toString(36).toUpperCase(),h="PRODUCTION:LOG",f="PRODUCTION:LOG:SYNCING",m="PRODUCTION:LOCK",_=null,g=!1,v=null,y=null,w=t.debounce(c,33);return o.subscribe("socket.connected",setTimeout.bind(null,c,1337)),window.addEventListener("unload",u),{generateId:p,isEnabled:function(){return g},enable:function(t){function e(e){if(e.key===m){var n=JSON.parse(e.newValue);n.instanceId!==d&&t.reject()}}return g?void(t&&(v=setTimeout(function(){v=null,t.resolve()},1))):t?(window.addEventListener("storage",e),y=setInterval(function(){localStorage.setItem(m,JSON.stringify({instanceId:d,time:Date.now()}))},333),void(v=setTimeout(function(){v=null,window.removeEventListener("storage",e),"pending"===t.state()&&(g=!0,setTimeout(c,1e3),t.resolve())},2e3))):void(g=!0)},disable:function(){g&&(null!==v&&(clearTimeout(v),v=null),null!==y&&(clearInterval(y),y=null),g=!1)},isSyncing:function(){return null!==_},record:function(t,e,n){if(!t.isLocked()){if(!g)throw new Error("Production log is disabled!");var o={instanceId:d,secretKey:t.getSecretKey(),type:e,data:n||{},createdAt:i.getMoment().toDate(),creator:r.getInfo(),division:t.get("division"),subdivision:t.get("subdivision"),mrpControllers:t.get("mrpControllers"),prodFlow:t.get("prodFlow"),workCenter:t.get("workCenter"),prodLine:t.prodLine.id,prodShift:t.id,prodShiftOrder:t.prodShiftOrder.id||null};o._id=p(o.createdAt,t.id);var s,a=localStorage.getItem(h);s=null===a?JSON.stringify(o):a+"\n"+JSON.stringify(o),localStorage.setItem(h,s),t.saveLocalData(),w()}}}}),define("app/prodDowntimes/ProdDowntimeCollection",["underscore","../time","../user","../data/prodLog","../core/Collection","./ProdDowntime"],function(t,e,n,r,i,o){"use strict";var s={eq:!0,ne:!0,"in":!0,nin:!0};return i.extend({model:o,rqlQuery:function(t){var r=[{name:"in",args:["status",["undecided","rejected"]]},{name:"ge",args:["startedAt",e.getMoment().subtract(1,"month").startOf("day").hours(6).valueOf()]}];if(!n.isAllowedTo("PROD_DOWNTIMES:ALL")){var i=n.getSubdivision();if(i)r.push({name:"eq",args:["subdivision",i.id]});else{var o=n.getDivision();o&&r.push({name:"eq",args:["division",o.id]})}}return Array.isArray(n.data.aors)&&(1===n.data.aors.length?r.push({name:"eq",args:["aor",n.data.aors[0]]}):n.data.aors.length>1&&r.push({name:"in",args:["aor",n.data.aors]})),t.Query.fromObject({fields:{rid:1,aor:1,reason:1,mrpControllers:1,prodFlow:1,prodLine:1,status:1,startedAt:1,finishedAt:1,date:1,shift:1,pressWorksheet:1,changesCount:1},sort:{startedAt:-1},limit:15,selector:{name:"and",args:r}})},findFirstUnfinished:function(){return this.find(function(t){return null==t.get("finishedAt")})},finish:function(){var t=this.findFirstUnfinished();return t?t.finish():null},addFromInfo:function(t,i){var s=new o({division:t.get("division"),subdivision:t.get("subdivision"),mrpControllers:t.get("mrpControllers"),prodFlow:t.get("prodFlow"),workCenter:t.get("workCenter"),prodLine:t.prodLine.id,prodShift:t.id,prodShiftOrder:t.prodShiftOrder.id||null,date:t.get("date"),shift:t.get("shift"),aor:i.aor,reason:i.reason,reasonComment:i.reasonComment,status:o.STATUS.UNDECIDED,startedAt:i.startedAt||e.getMoment().toDate(),creator:n.getInfo(),master:t.get("master"),leader:t.get("leader"),operator:t.get("operator"),operators:t.get("operators"),mechOrder:t.prodShiftOrder.get("mechOrder"),orderId:t.prodShiftOrder.get("orderId"),operationNo:t.prodShiftOrder.get("operationNo")});s.set("_id",r.generateId(s.get("startedAt"),t.id+i.aor));for(var a=this.rqlQuery.limit<1?1/0:this.rqlQuery.limit;this.length>=a;)this.pop({silent:!0});return this.unshift(s),s},hasOrMatches:function(t){if(t._id){var e=this.get(t._id);if(e)return!0}return this.matchStatus(t)&&this.matchAor(t)&&this.matchReason(t)&&this.matchOrgUnit(t)},matchStatus:function(e){var n=t.find(this.rqlQuery.selector.args,function(t){return("eq"===t.name||"in"===t.name)&&"status"===t.args[0]});return n?"eq"===n.name?e.status===n.args[1]:-1!==n.args[1].indexOf(e.status):!0},matchAor:function(e){var n=t.find(this.rqlQuery.selector.args,function(t){return"aor"===t.args[0]&&s[t.name]});return n?"eq"===n.name?e.aor===n.args[1]:"ne"===n.name?e.aor!==n.args[1]:"in"===n.name?-1!==n.args[1].indexOf(e.aor):"nin"===n.name?-1===n.args[1].indexOf(e.aor):!0:!0},matchReason:function(e){var n=t.find(this.rqlQuery.selector.args,function(t){return"reason"===t.args[0]&&s[t.name]});return n?"eq"===n.name?e.reason===n.args[1]:"ne"===n.name?e.reason!==n.args[1]:"in"===n.name?-1!==n.args[1].indexOf(e.reason):"nin"===n.name?-1===n.args[1].indexOf(e.reason):!0:!0},matchOrgUnit:function(){return!0}})}),define("app/data/createSettings",["../pubsub"],function(t){"use strict";return function(e){function n(){o=null,null!==i&&(r.destroy(),r=null,i=null)}var r=null,i=null,o=null;return{acquire:function(){return null!==o&&(clearTimeout(o),o=null),null===i&&(r=t.sandbox(),i=new e(null,{pubsub:r})),i},release:function(){null!==o&&clearTimeout(o),o=setTimeout(n,3e4)}}}}),define("app/settings/Setting",["../core/Model"],function(t){"use strict";return t.extend({urlRoot:"/settings",clientUrlRoot:"#settings",topicPrefix:"settings",privilegePrefix:"SETTINGS",nlsDomain:"core",defaults:{value:null},getValue:function(){return this.get("value")}})}),define("app/settings/SettingCollection",["jquery","../core/Collection","./Setting"],function(t,e,n){"use strict";return e.extend({model:n,rqlQuery:"select(value)",matchSettingId:null,topicSuffix:"**",initialize:function(t,e){e.pubsub&&this.setUpPubsub(e.pubsub)},setUpPubsub:function(t){var e=this;t.subscribe("settings.updated."+this.topicSuffix,function(t){var n=e.get(t._id);n?n.set(t):e.add(t)})},fetchIfEmpty:function(e,n){if(!this.isEmpty())return e?e.call(n):null;var r=t.Deferred(),i=this.fetch({reset:!0});return e?(i.done(function(){var i=[].concat(e.call(n));t.when.apply(t,i).then(function(){r.resolve()},function(){r.reject()})}),r.promise()):i},update:function(e,n){if(n=this.prepareValue(e,"string"==typeof n?n.trim():n),void 0===n)return t.Deferred().reject().promise();var r=this.get(e);if(r){if(r.getValue()===n)return t.Deferred().resolve().promise()}else this.add({_id:e,value:null}),r=this.get(e);return r.save({value:n})},prepareValue:function(t,e){return e}})}),define("app/prodDowntimes/ProdDowntimeSetting",["../settings/Setting"],function(t){"use strict";return t.extend({urlRoot:"/prodDowntimes/settings"})}),define("app/prodDowntimes/ProdDowntimeSettingCollection",["jquery","../user","../settings/SettingCollection","./ProdDowntimeSetting"],function(t,e,n,r){"use strict";return n.extend({model:r,topicSuffix:"prodDowntimes.**",getValue:function(t){var e=this.get("prodDowntimes."+t);return e?e.getValue():null},prepareValue:function(t,e){return/autoConfirmHours$/.test(t)?(e=Math.round(parseInt(e,10)),isNaN(e)||24>e?24:e):/max.+Changes$/.test(t)?(e=Math.round(parseInt(e,10)),isNaN(e)||0>e?0:e):void 0},getCanChangeStatusOptions:function(){return{hasAccessToAor:e.hasAccessToAor.bind(e),canManageProdData:e.isAllowedTo("PROD_DATA:MANAGE"),canManageProdDowntimes:e.isAllowedTo("PROD_DOWNTIMES:MANAGE"),maxRejectedChanges:this.getValue("maxRejectedChanges")||Number.MAX_VALUE,maxReasonChanges:this.getValue("maxReasonChanges")||Number.MAX_VALUE,maxAorChanges:this.getValue("maxAorChanges")||Number.MAX_VALUE}}})}),define("app/prodDowntimes/settings",["../data/createSettings","./ProdDowntimeSettingCollection"],function(t,e){"use strict";return t(e)}),define("app/prodDowntimes/views/ProdDowntimeListView",["underscore","app/i18n","app/user","app/core/views/ListView","../util/decorateProdDowntime"],function(t,e,n,r,i){"use strict";return r.extend({className:"is-colored is-clickable prodDowntimes-list",remoteTopics:{"prodDowntimes.created.*":"refreshIfMatches","prodDowntimes.updated.*":"refreshIfMatches","prodDowntimes.deleted.*":"refreshIfMatches"},columns:[{id:"rid",className:"is-min"},{id:"mrpControllers",tdClassName:"is-min"},"prodFlow","aor",{id:"prodLine",tdClassName:"is-min"},"reason","startedAt","finishedAt",{id:"duration",tdClassName:"is-min"}],serializeRows:function(){var t=this.options.simple?null:{changesCount:!0,maxReasonChanges:this.settings.getValue("maxReasonChanges")||Number.MAX_VALUE,maxAorChanges:this.settings.getValue("maxAorChanges")||Number.MAX_VALUE};return this.collection.map(function(e){return i(e,t)})},serializeActions:function(){if(this.options.simple)return null;var t=this.collection,n=this.settings.getCanChangeStatusOptions(),i=e("prodDowntimes","changesCount:rejected");return function(o){var s=t.get(o._id),a=[r.actions.viewDetails(s)];if(s.canCorroborate()){var u=s.canChangeStatus(n),c=e("prodDowntimes","LIST:ACTION:"+(u?"corroborate":"comment")),l=null,p=o.changesCount;p.rejected&&(l='<span title="'+i+'" class="label label-'+(p.rejected>=n.maxRejectedChanges?"danger":"warning")+'">'+p.rejected+"</span>"),a.unshift({id:"corroborate",icon:u?"gavel":"comment",label:c,href:s.genClientUrl()+"?corroborate=1",text:l})}return s.isEditable()&&n.canManageProdData&&a.push(r.actions.edit(s),r.actions["delete"](s)),a}},refreshIfMatches:function(t){this.collection.hasOrMatches(t)&&this.refreshCollection(t)}})}),define("app/data/orgUnits",["./divisions","./subdivisions","./mrpControllers","./prodFlows","./workCenters","./prodLines"],function(t,e,n,r,i,o){"use strict";function s(t,e,n){return t.filter(function(t){var r=t.get(e);return r?Array.isArray(r)?-1!==r.indexOf(n.id):r===n.id:!1})}var a={division:"subdivision",subdivision:"mrpController",mrpController:"prodFlow",prodFlow:"workCenter",workCenter:"prodLine",prodLine:null},u={prodLine:"workCenter",workCenter:"prodFlow",prodFlow:"mrpController",mrpController:"subdivision",subdivision:"division",division:null},c={division:t,subdivision:e,mrpController:n,prodFlow:r,workCenter:i,prodLine:o};return{getProdFlowsForSubdivision:function(t){return"string"==typeof t&&(t=e.get(t)),t?r.filter(function(e){return e.getSubdivision()===t}):[]},getAllByType:function(t){return c[t].models},getAllDivisions:function(){return t.models},getAllForProdLine:function(s){"string"==typeof s&&(s=o.get(s));var a={division:null,subdivision:null,mrpControllers:null,prodFlow:null,workCenter:null,prodLine:null};if(!s)return a;a.prodLine=s.id;var u=i.get(s.get("workCenter"));if(!u)return a;a.workCenter=u.id;var c=r.get(u.get("prodFlow"));if(!c)return a;a.prodFlow=c.id;var l=c.get("mrpController");if(!Array.isArray(l)||!l.length)return a;if(a.mrpControllers=l,l=n.get(l[0]),!l)return a;var p=e.get(l.get("subdivision"));if(!p)return a;a.subdivision=p.id;var d=t.get(p.get("division"));return d?(a.division=d.id,a):a},getType:function(s){if(null===s)return null;if(s.constructor===o.model)return"prodLine";if(s.constructor===i.model)return"workCenter";if(s.constructor===r.model)return"prodFlow";if(s.constructor===n.model)return"mrpController";if(s.constructor===e.model)return"subdivision";if(s.constructor===t.model)return"division";throw new Error("Unknown org unit type!")},getChildType:function(t){return a[t]||"division"},getChildren:function(t){var e=this.getType(t),n=this.getChildType(e),r=c[n];return r?s(r,e,t):[]},getByTypeAndId:function(t,e){var n=c[t];return n?n.get(e)||null:null},getParent:function(t){if(!t)return null;var e=this.getType(t),n=u[e],r=t.get(n);return!r||Array.isArray(r)&&!r.length?null:this.getByTypeAndId(n,Array.isArray(r)?r[0]:r)},RELATION_TYPES:{SIBLINGS:"siblings",TYPES:"types",CHILD:"child",DIFFERENT_CHILD:"differentChild",PARENT:"parent",DIFFERENT_PARENT:"differentParent",UNRELATED:"unrelated"},getRelationType:function(t,e,n,r){if(null===t&&"division"===n)return this.RELATION_TYPES.CHILD;if("division"===t&&null===n)return this.RELATION_TYPES.PARENT;var i=this.getByTypeAndId(t,e),o=this.getByTypeAndId(n,r);return t===n?this.getParent(i)===this.getParent(o)?this.RELATION_TYPES.SIBLINGS:this.RELATION_TYPES.TYPES:a[t]===n?this.getParent(o)===i?this.RELATION_TYPES.CHILD:this.RELATION_TYPES.DIFFERENT_PARENT:u[t]===n?this.getParent(i)===o?this.RELATION_TYPES.PARENT:this.RELATION_TYPES.DIFFERENT_CHILD:this.RELATION_TYPES.UNRELATED},getSubdivisionFor:function(n){return n&&n.constructor!==t.model?n.constructor===e.model?n:this.getSubdivisionFor(this.getParent(n)):null},containsProdLine:function(t,e,n){if("prodLine"===t)return Array.isArray(e)?-1!==e.indexOf(n):e===n;for(var r=this.getByTypeAndId("prodLine",n);;){var i=this.getParent(r);if(!i)return!1;if(this.getType(i)===t)return Array.isArray(e)?-1!==e.indexOf(i.id):e===i.id;r=i}}}}),define("app/prodDowntimes/templates/filter",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="well filter-form is-vertical">\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-from-date">'),__output.push(t("core","filter:date:from")),__output.push('</label>\n    <div id="'),__output.push(idPrefix),__output.push('-from" class="form-group-datetime">\n      <input id="'),__output.push(idPrefix),__output.push('-from-date" class="form-control" name="from-date" type="date" placeholder="YYYY-MM-DD">\n      <input id="'),__output.push(idPrefix),__output.push('-from-time" class="form-control" name="from-time" type="time" placeholder="hh:mm">\n    </div>\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-to-date">'),__output.push(t("core","filter:date:to")),__output.push('</label>\n    <div id="'),__output.push(idPrefix),__output.push('-to" class="form-group-datetime">\n      <input id="'),__output.push(idPrefix),__output.push('-to-date" class="form-control" name="to-date" type="date" placeholder="YYYY-MM-DD">\n      <input id="'),__output.push(idPrefix),__output.push('-to-time" class="form-control" name="to-time" type="time" placeholder="hh:mm">\n    </div>\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-orgUnit">'),__output.push(t("prodDowntimes","PROPERTY:orgUnit")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-orgUnit" name="orgUnit" type="text" data-placeholder="'),__output.push(t("prodDowntimes","filter:placeholder:orgUnit")),__output.push('">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-aor">\n      <input id="'),__output.push(idPrefix),__output.push('-aorIn" class="filter-inLabel" name="aorIn" type="checkbox" value="true" title="'),__output.push(t("prodDowntimes","filter:tooltip:in")),__output.push('">\n      '),__output.push(t("prodDowntimes","PROPERTY:aor")),__output.push('\n    </label>\n    <input id="'),__output.push(idPrefix),__output.push('-aor" name="aor" type="text" data-placeholder="'),__output.push(t("prodDowntimes","filter:placeholder:aor")),__output.push('">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-reason">\n      <input id="'),__output.push(idPrefix),__output.push('-reasonIn" class="filter-inLabel" name="reasonIn" type="checkbox" value="true" title="'),__output.push(t("prodDowntimes","filter:tooltip:in")),__output.push('">\n      '),__output.push(t("prodDowntimes","PROPERTY:reason")),__output.push('\n    </label>\n    <input id="'),__output.push(idPrefix),__output.push('-reason" name="reason" type="text" data-placeholder="'),__output.push(t("prodDowntimes","filter:placeholder:reason")),__output.push('">\n  </div>\n  <div class="form-group">\n    <label class="control-label">'),__output.push(t("prodDowntimes","PROPERTY:status")),__output.push("</label>\n    "),["undecided","rejected","confirmed"].forEach(function(e){__output.push('\n    <div class="checkbox">\n      <label>\n        <input type="checkbox" name="status[]" value="'),__output.push(e),__output.push('">\n        '),__output.push(t("prodDowntimes","PROPERTY:status:"+e)),__output.push("\n      </label>\n    </div>\n    ")}),__output.push("\n  </div>\n  "),__output.push(renderLimit()),__output.push('\n  <div class="form-group filter-actions">\n    <button type="submit" class="btn btn-default"><i class="fa fa-filter"></i><span>'),__output.push(escape(t("prodDowntimes","filter:submit"))),__output.push("</span></button>\n  </div>\n</form>\n");return __output.join("")}}),define("app/prodDowntimes/views/ProdDowntimeFilterView",["app/user","app/data/aors","app/data/orgUnits","app/data/downtimeReasons","app/core/views/FilterView","app/core/util/fixTimeRange","app/prodDowntimes/templates/filter"],function(t,e,n,r,i,o,s){"use strict";return i.extend({template:s,defaultFormData:function(){return{startedAt:"",aor:null,aorIn:!0,reason:null,reasonIn:!0,status:["undecided","confirmed","rejected"],orgUnit:null}},termToForm:{startedAt:function(t,e,n){o.toFormData(n,e,"date+time")},aor:function(t,e,n){"eq"===e.name||"ne"===e.name?(n[t+"In"]="eq"===e.name,n[t]=e.args[1]):("in"===e.name||"nin"===e.name)&&(n[t+"In"]="in"===e.name,n[t]=e.args[1].join(","))},status:function(t,e,n){n.status=[].concat(e.args[1])},division:function(t,e,n){n.orgUnit=e.args[1]
},reason:"aor",subdivision:"division",prodFlow:"division"},afterRender:function(){i.prototype.afterRender.call(this),this.$id("orgUnit").select2({width:"256px",allowClear:!t.getDivision()||t.isAllowedTo("PROD_DOWNTIMES:ALL"),data:this.getApplicableOrgUnits(),formatSelection:function(t){return"subdivision"===t.type?t.model.get("division")+" \\ "+t.text:t.text}}),this.$id("aor").select2({width:"256px",allowClear:!0,multiple:!0,data:e.map(function(t){return{id:t.id,text:t.getLabel()}}).sort(function(t,e){return t.text.localeCompare(e.text)})}),this.$id("reason").select2({width:"256px",allowClear:!0,multiple:!0,data:r.map(function(t){return{id:t.id,text:t.id+" - "+(t.get("label")||"?")}}).sort(function(t,e){return t.id.localeCompare(e.id)})})},getApplicableOrgUnits:function(){var e=[],r=t.getDivision(),i=t.getSubdivision(),o=t.isAllowedTo("PROD_DOWNTIMES:ALL");!o&&r&&e.push({disabled:!!i,id:r.id,text:r.getLabel(),type:"division",model:r,css:"prodDowntime-filter-division"});var s=this;return!o&&i?this.pushApplicableOrgUnitsForSubdivision(e,i):!o&&r?n.getChildren(r).forEach(function(t){s.pushApplicableOrgUnitsForSubdivision(e,t)}):n.getAllDivisions().forEach(function(t){e.push({id:t.id,text:t.getLabel(),type:"division",model:t,css:"prodDowntime-filter-division"}),n.getChildren(t).forEach(function(t){s.pushApplicableOrgUnitsForSubdivision(e,t)})}),e},pushApplicableOrgUnitsForSubdivision:function(t,e){t.push({id:e.id,text:e.getLabel(),type:"subdivision",model:e,css:"prodDowntime-filter-subdivision"}),n.getProdFlowsForSubdivision(e).forEach(function(e){t.push({id:e.id,text:e.getLabel(),type:"prodFlow",model:e,css:"prodDowntime-filter-prodFlow"})})},serializeFormToQuery:function(t){var e=o.fromView(this,{defaultTime:"06:00"}),n=this.$id("orgUnit").select2("data"),r=this.$id("aor").select2("val"),i=this.$id("aorIn").prop("checked"),s=this.$id("reason").select2("val"),a=this.$id("reasonIn").prop("checked"),u=this.fixStatus();1===u.length?t.push({name:"eq",args:["status",u[0]]}):u.length>1&&t.push({name:"in",args:["status",u]}),e.from&&t.push({name:"ge",args:["startedAt",e.from]}),e.to&&t.push({name:"le",args:["startedAt",e.to]}),1===r.length?t.push({name:i?"eq":"ne",args:["aor",r[0]]}):r.length>1&&t.push({name:i?"in":"nin",args:["aor",r]}),1===s.length?t.push({name:a?"eq":"ne",args:["reason",s[0]]}):s.length>1&&t.push({name:a?"in":"nin",args:["reason",s]}),n&&t.push({name:"eq",args:[n.type,n.id]})},fixStatus:function(){var t=this.$('input[name="status[]"]'),e=t.filter(":checked");0===e.length&&(e=t.prop("checked",!0));var n=e.map(function(){return this.value}).get();return n.length===t.length?[]:n}})}),define("app/prodDowntimes/pages/ProdDowntimeListPage",["app/i18n","app/viewport","app/core/util/bindLoadingMessage","app/core/util/pageActions","app/core/View","../settings","../ProdDowntimeCollection","../views/ProdDowntimeListView","../views/ProdDowntimeFilterView","app/core/templates/listPage"],function(t,e,n,r,i,o,s,a,u,c){"use strict";return i.extend({template:c,layoutName:"page",pageId:"prodDowntimeList",breadcrumbs:[t.bound("prodDowntimes","BREADCRUMBS:browse")],actions:function(e){return[r.jump(this,this.collection),r["export"](e,this,this.collection),{label:t.bound("prodDowntimes","PAGE_ACTION:settings"),icon:"cogs",privileges:"PROD_DATA:MANAGE",href:"#prodDowntimes;settings"}]},initialize:function(){this.defineModels(),this.defineViews(),this.setView(".filter-container",this.filterView),this.setView(".list-container",this.listView)},destroy:function(){o.release()},defineModels:function(){this.collection=n(this.collection,this),this.settings=n(o.acquire(),this)},defineViews:function(){this.listView=new a({collection:this.collection,settings:this.settings}),this.filterView=new u({model:{rqlQuery:this.collection.rqlQuery}}),this.listenTo(this.filterView,"filterChanged",this.refreshList)},load:function(t){return this.settings.isEmpty()?t(this.collection.fetch({reset:!0}),this.settings.fetch({reset:!0})):t(this.collection.fetch({reset:!0}))},afterRender:function(){o.acquire()},refreshList:function(t){this.collection.rqlQuery=t,this.listView.refreshCollectionNow(),this.broker.publish("router.navigate",{url:this.collection.genClientUrl()+"?"+t,trigger:!1,replace:!0})}})}),define("app/prodChangeRequests/util/createDeletePageAction",["underscore","app/broker","app/i18n","app/viewport","app/core/util/pageActions","./isChangeRequest"],function(t,e,n,r,i,o){"use strict";return function(t,e){var s=e.getNlsDomain(),a=o();return a&&t.broker.subscribe("viewport.dialog.shown").setLimit(1).setFilter(function(t){return"delete"===t.options.actionKey&&t.model===e}).on("message",function(e){t.listenToOnce(e,"success",function(){r.msg.show({type:"success",time:3e3,text:n(s,"changeRequest:msg:success:delete")})})}),i["delete"](e,!1,a?{formActionText:n.bound(s,"changeRequest:delete:formActionText"),messageText:n.bound(s,"changeRequest:delete:messageText"),failureText:n.bound(s,"changeRequest:msg:failure:delete")}:{})}}),define("app/prodDowntimes/util/reasonAndAor",["underscore","app/data/downtimeReasons","app/data/aors","app/data/subdivisions"],function(t,e,n,r){"use strict";return{initialize:function(t){t.reasonsToAorsMap={},t.reasonsList=[],t.aorsList={}},destroy:function(t){t.reasonsToAorsMap=null,t.reasonsList=null,t.aorsList=null},setUpReasons:function(n,i,o){var s={},a=[],u=r.get(o),c=u?u.get("aor"):null;(i||e).forEach(function(e){var n={},r=!1;e.get("defaultAor")&&c?(n[c]=!0,r=!0):t.forEach(e.get("aors"),function(t){n[t]=!0,r=!0}),r||(n=null),s[e.id]=n,a.push({id:e.id,text:e.id+" - "+e.get("label"),aors:n})}),n.reasonsToAorsMap=s,n.reasonsList=a},setUpAors:function(t){var e=[];n.forEach(function(t){e.push({id:t.id,text:t.get("name")})}),t.aorsList=e},getReasonsForAor:function(t,e){if(!e)return t.reasonsList;for(var n=[],r=0;r<t.reasonsList.length;++r){var i=t.reasonsList[r];(!i.aors||i.aors[e])&&n.push(i)}return n},getAorsForReason:function(e,r){if(!r)return e.aorsList;var i=e.reasonsToAorsMap[r];if(void 0===i)return[];if(null===i)return e.aorsList;var o=[];return t.forEach(Object.keys(i),function(t){o.push({id:t,text:n.get(t).get("name")})}),o},setUpReasonSelect2:function(e,n,r){var i=e.$id("reason"),o=this.getReasonsForAor(e,n);i.select2(t.extend({openOnEnter:null,data:o},r)),null===i.select2("data")&&i.select2("val",1===o.length?o[0].id:"")},setUpAorSelect2:function(e,n,r){var i=e.$id("aor"),o=this.getAorsForReason(e,n);i.select2(t.extend({openOnEnter:null,data:o},r)),null===i.select2("data")&&i.select2("val",1===o.length?o[0].id:"")}}}),define("app/prodDowntimes/templates/details",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push("<div>\n  "),function(){__output.push('<div id="'),__output.push(idPrefix),__output.push('-props" class="panel panel-'),__output.push(model.statusClassName),__output.push(' prodDowntimes-details">\n  <div class="panel-heading">\n    '),__output.push(t("prodDowntimes","PANEL:TITLE:details")),__output.push('\n  </div>\n  <div class="panel-details row">\n    <div class="col-md-4">\n      <div class="props first">\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("prodDowntimes","PROPERTY:pressWorksheet")),__output.push('</div>\n          <div class="prop-value">\n            '),model.pressWorksheet?(__output.push("\n            "),user.isAllowedTo("PRESS_WORKSHEETS:VIEW")?(__output.push('\n            <a href="#pressWorksheets/'),__output.push(model.pressWorksheet),__output.push('">'),__output.push(t("core","BOOL:true")),__output.push("</a>\n            ")):(__output.push("\n            "),__output.push(t("core","BOOL:true")),__output.push("\n            ")),__output.push("\n            ")):__output.push("\n            -\n            "),__output.push('\n          </div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("prodDowntimes","PROPERTY:shift")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model.prodShiftText),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("prodDowntimes","PROPERTY:order")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model.order),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("prodDowntimes","PROPERTY:master")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model.masterInfo),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("prodDowntimes","PROPERTY:leader")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model.leaderInfo),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("prodDowntimes","PROPERTY:operator")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model.operatorInfo),__output.push('</div>\n        </div>\n      </div>\n    </div>\n    <div class="col-md-4">\n      <div class="props">\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("prodDowntimes","PROPERTY:status")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.statusText)),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("prodDowntimes","PROPERTY:reason")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.reason)),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("prodDowntimes","PROPERTY:aor")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.aor||"-")),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("prodDowntimes","PROPERTY:startedAt")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model.startedAt),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("prodDowntimes","PROPERTY:finishedAt")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model.finishedAt),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("prodDowntimes","PROPERTY:duration")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model.duration),__output.push('</div>\n        </div>\n      </div>\n    </div>\n    <div class="col-md-4">\n      <div class="props">\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("core","ORG_UNIT:division")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.division)),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("core","ORG_UNIT:subdivision")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.subdivision)),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("core","ORG_UNIT:mrpController")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.mrpControllers)),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("core","ORG_UNIT:prodFlow")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.prodFlow)),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("core","ORG_UNIT:workCenter")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.workCenter)),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("core","ORG_UNIT:prodLine")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.prodLine)),__output.push("</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>")}(),__output.push('\n  <div id="'),__output.push(idPrefix),__output.push('-history" class="panel panel-default prodDowntimes-history">\n    <div class="panel-heading">'),__output.push(t("prodDowntimes","PANEL:TITLE:history")),__output.push("</div>\n    "),model.history.forEach(function(t,e){__output.push("\n    "),function(){__output.push('<div class="prodDowntimes-history-item">\n  <span class="prodDowntimes-history-user">'),__output.push(t.user),__output.push('</span>,\n  <time class="prodDowntimes-history-time" datetime="'),__output.push(t.time.iso),__output.push('" title="'),__output.push(t.time["long"]),__output.push('">'),__output.push(t.time.daysAgo>5?t.time["long"]:t.time.human),__output.push("</time>:\n  "),t.changes.length&&(__output.push('\n  <table class="table table-condensed prodDowntimes-history-changes">\n    <tbody>\n      '),t.changes.forEach(function(t){__output.push('\n      <tr>\n        <td class="is-min">'),__output.push(t.label),__output.push(e?":":""),__output.push("</td>\n        "),e&&(__output.push('\n        <td class="is-min">'),__output.push(t.oldValue),__output.push("</td>\n        ")),__output.push('\n        <td class="is-min"><i class="fa fa-arrow-right"></i></td>\n        <td class="is-min">'),__output.push(t.newValue),__output.push("</td>\n        <td></td>\n      </tr>\n      ")}),__output.push("\n    </tbody>\n  </table>\n  ")),__output.push("\n  "),""!==t.comment&&(__output.push('\n  <p class="prodDowntimes-history-comment">'),__output.push(escape(t.comment)),__output.push("</p>\n  ")),__output.push("\n</div>")}(),__output.push("\n    ")}),__output.push("\n    "),!model.pressWorksheet&&user.isLoggedIn()&&(__output.push("\n    "),function(){__output.push('<form id="'),__output.push(idPrefix),__output.push('-corroborate" class="prodDowntimes-corroborate" method="post">\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-comment" class="control-label">'),__output.push(t("prodDowntimes","corroborate:comment")),__output.push('</label>\n    <textarea id="'),__output.push(idPrefix),__output.push('-comment" class="form-control prodDowntimes-corroborate-comment" name="comment" rows="3"></textarea>\n  </div>\n  <button type="submit" class="btn btn-primary"></button>\n</form>\n')}(),__output.push("\n    ")),__output.push("\n  </div>\n</div>\n");return __output.join("")}}),define("app/prodDowntimes/templates/detailsProps",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div id="'),__output.push(idPrefix),__output.push('-props" class="panel panel-'),__output.push(model.statusClassName),__output.push(' prodDowntimes-details">\n  <div class="panel-heading">\n    '),__output.push(t("prodDowntimes","PANEL:TITLE:details")),__output.push('\n  </div>\n  <div class="panel-details row">\n    <div class="col-md-4">\n      <div class="props first">\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("prodDowntimes","PROPERTY:pressWorksheet")),__output.push('</div>\n          <div class="prop-value">\n            '),model.pressWorksheet?(__output.push("\n            "),user.isAllowedTo("PRESS_WORKSHEETS:VIEW")?(__output.push('\n            <a href="#pressWorksheets/'),__output.push(model.pressWorksheet),__output.push('">'),__output.push(t("core","BOOL:true")),__output.push("</a>\n            ")):(__output.push("\n            "),__output.push(t("core","BOOL:true")),__output.push("\n            ")),__output.push("\n            ")):__output.push("\n            -\n            "),__output.push('\n          </div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("prodDowntimes","PROPERTY:shift")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model.prodShiftText),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("prodDowntimes","PROPERTY:order")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model.order),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("prodDowntimes","PROPERTY:master")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model.masterInfo),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("prodDowntimes","PROPERTY:leader")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model.leaderInfo),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("prodDowntimes","PROPERTY:operator")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model.operatorInfo),__output.push('</div>\n        </div>\n      </div>\n    </div>\n    <div class="col-md-4">\n      <div class="props">\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("prodDowntimes","PROPERTY:status")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.statusText)),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("prodDowntimes","PROPERTY:reason")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.reason)),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("prodDowntimes","PROPERTY:aor")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.aor||"-")),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("prodDowntimes","PROPERTY:startedAt")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model.startedAt),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("prodDowntimes","PROPERTY:finishedAt")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model.finishedAt),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("prodDowntimes","PROPERTY:duration")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model.duration),__output.push('</div>\n        </div>\n      </div>\n    </div>\n    <div class="col-md-4">\n      <div class="props">\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("core","ORG_UNIT:division")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.division)),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("core","ORG_UNIT:subdivision")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.subdivision)),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("core","ORG_UNIT:mrpController")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.mrpControllers)),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("core","ORG_UNIT:prodFlow")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.prodFlow)),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("core","ORG_UNIT:workCenter")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.workCenter)),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("core","ORG_UNIT:prodLine")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.prodLine)),__output.push("</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>");return __output.join("")}}),define("app/prodDowntimes/templates/historyItem",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="prodDowntimes-history-item">\n  <span class="prodDowntimes-history-user">'),__output.push(item.user),__output.push('</span>,\n  <time class="prodDowntimes-history-time" datetime="'),__output.push(item.time.iso),__output.push('" title="'),__output.push(item.time["long"]),__output.push('">'),__output.push(item.time.daysAgo>5?item.time["long"]:item.time.human),__output.push("</time>:\n  "),item.changes.length&&(__output.push('\n  <table class="table table-condensed prodDowntimes-history-changes">\n    <tbody>\n      '),item.changes.forEach(function(t){__output.push('\n      <tr>\n        <td class="is-min">'),__output.push(t.label),__output.push(itemIndex?":":""),__output.push("</td>\n        "),itemIndex&&(__output.push('\n        <td class="is-min">'),__output.push(t.oldValue),__output.push("</td>\n        ")),__output.push('\n        <td class="is-min"><i class="fa fa-arrow-right"></i></td>\n        <td class="is-min">'),__output.push(t.newValue),__output.push("</td>\n        <td></td>\n      </tr>\n      ")}),__output.push("\n    </tbody>\n  </table>\n  ")),__output.push("\n  "),""!==item.comment&&(__output.push('\n  <p class="prodDowntimes-history-comment">'),__output.push(escape(item.comment)),__output.push("</p>\n  ")),__output.push("\n</div>");return __output.join("")}}),define("app/prodDowntimes/templates/corroborateExtra",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div id="'),__output.push(idPrefix),__output.push('-corroborateExtra" class="prodDowntimes-corroborate-extra">\n  <div class="form-group prodDowntimes-corroborate-statuses">\n    <label for="'),__output.push(idPrefix),__output.push('-status" class="control-label">'),__output.push(t("prodDowntimes","corroborate:status")),__output.push('</label>\n    <div id="'),__output.push(idPrefix),__output.push('-status" class="btn-group btn-block" data-toggle="buttons">\n      '),showUndecidedStatus&&(__output.push('\n      <label class="btn btn-default"><input type="checkbox" name="status" value="undecided"><i class="fa fa-question text-warning"></i><span>'),__output.push(t("prodDowntimes","PROPERTY:status:undecided")),__output.push("</span></label>\n      ")),__output.push("\n      "),showRejectedStatus&&(__output.push('\n      <label class="btn btn-default"><input type="checkbox" name="status" value="rejected"><i class="fa fa-thumbs-o-down text-danger"></i><span>'),__output.push(t("prodDowntimes","PROPERTY:status:rejected")),__output.push("</span></label>\n      ")),__output.push("\n      "),showConfirmedStatus&&(__output.push('\n      <label class="btn btn-default"><input type="checkbox" name="status" value="confirmed"><i class="fa fa-thumbs-o-up text-success"></i><span>'),__output.push(t("prodDowntimes","PROPERTY:status:confirmed")),__output.push("</span></label>\n      ")),__output.push('\n    </div>\n  </div>\n  <div class="form-group has-required-select2">\n    <label for="'),__output.push(idPrefix),__output.push('-reason" class="control-label is-required">'),__output.push(t("prodDowntimes","corroborate:reason")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-reason" name="reason" required>\n  </div>\n  <div class="form-group has-required-select2">\n    <label for="'),__output.push(idPrefix),__output.push('-aor" class="control-label is-required">'),__output.push(t("prodDowntimes","corroborate:aor")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-aor" name="aor" required>\n  </div>\n  '),defaultAor&&(__output.push('\n  <div id="'),__output.push(idPrefix),__output.push('-defaultAor" class="form-group">\n    <label class="control-label is-required">'),__output.push(t("prodDowntimes","corroborate:aor")),__output.push('</label>\n    <p class="form-control-static">'),__output.push(defaultAor),__output.push("</p>\n  </div>\n  ")),__output.push("\n</div>");return __output.join("")}}),define("app/prodDowntimes/views/ProdDowntimeDetailsView",["jquery","underscore","app/time","app/i18n","app/viewport","app/core/views/DetailsView","app/core/util/buttonGroup","app/data/orgUnits","app/data/aors","../util/decorateProdDowntime","../util/decorateProdDowntimeChange","../util/reasonAndAor","app/prodDowntimes/templates/details","app/prodDowntimes/templates/detailsProps","app/prodDowntimes/templates/historyItem","app/prodDowntimes/templates/corroborateExtra"],function(t,e,n,r,i,o,s,a,u,c,l,p,d,h,f,m){"use strict";return o.extend({template:d,events:e.extend({"select2-removed #-reason, #-aor":function(){this.$id("reason").val(""),this.$id("aor").val(""),this.timers.clearSelect2=setTimeout(function(t){t.setUpReasonSelect2(),t.setUpAorSelect2(),t.$id("reason").select2("focus")},1,this)},"change #-reason":function(){this.setUpAorSelect2()},"change #-aor":function(){this.setUpReasonSelect2()},"change #-status":function(t){this.updateCorroborateSubmit(t)},"change #-corroborate":function(){this.clearCorroborateValidity()},"submit #-corroborate":function(){return this.corroborate(),!1}},o.prototype.events),remoteTopics:function(){return{}},initialize:function(){o.prototype.initialize.apply(this,arguments),p.initialize(this),this.historyItemCount=0},destroy:function(){o.prototype.destroy.call(this),p.destroy(this)},beforeRender:function(){this.stopListening(this.model,"change",this.onModelChange),this.stopListening(this.model,"change:changes",this.updateHistory)},afterRender:function(){this.historyItemCount=this.model.get("changes").length,this.listenTo(this.model,"change",this.onModelChange),this.listenTo(this.model,"change:changes",this.updateHistory),this.timers.updateTimes||(this.timers.updateTimes=setInterval(this.updateTimes.bind(this),3e4)),p.setUpReasons(this),p.setUpAors(this),this.updateCorroborateExtra()},focusComment:function(){this.$id("comment").focus()},updateProps:function(){this.$id("props").replaceWith(h({idPrefix:this.idPrefix,model:c(this.model,{longDate:!0,noHistory:!0})}))},updateHistory:function(){var t=this.$id("history");t.find(".prodDowntimes-history-item").remove();var e=t.find(".panel-heading"),n=this.model.get("changes").map(function(t,e){return f({item:l(t),itemIndex:e})});if(e.after(n.join("")),n.length>this.historyItemCount){for(var r=this.$(".prodDowntimes-history-item"),i=this.historyItemCount;i<r.length;++i)r[i].classList.add("highlight");this.historyItemCount=n.length}},updateCorroborateExtra:function(){var t=this.$id("corroborateExtra"),e=this.model.canChangeStatus(this.settings.getCanChangeStatusOptions());if(this.$id("reason").select2("destroy"),this.$id("aor").select2("destroy"),t.remove(),this.updateCorroborateSubmit(),e){var n=this.getDefaultAor(),r=this.model.get("status");this.$id("corroborate").prepend(m({idPrefix:this.idPrefix,defaultAor:n?n.getLabel():null,showUndecidedStatus:2===e||"rejected"===r&&1===e,showRejectedStatus:2===e||"undecided"===r&&1===e,showConfirmedStatus:2===e||"undecided"===r&&1===e})),this.$id("reason").val(this.model.get("reason")),this.$id("aor").val(this.model.get("aor")),this.setUpReasonSelect2(),this.setUpAorSelect2(),this.updateCorroborateSubmit(null,e)}},updateCorroborateSubmit:function(t,e){void 0===e&&(e=this.model.canChangeStatus(this.settings.getCanChangeStatusOptions()));var n=this.$id("status"),i=s.getValue(n);i&&0!==i.length?1===i.length?i=i[0]:t&&(n.find("input").filter(function(){return this!==t.target}).prop("checked",!1).parent().removeClass("active"),i=t.target.value):i=null;var o=null===i,a=i?"gavel":"comment",u='<i class="fa fa-'+a+'"></i><span>'+r("prodDowntimes","corroborate:submit:"+i)+"</span>";this.$('button[type="submit"]').removeClass("btn-primary btn-success btn-danger btn-warning").addClass("btn-"+this.model.getCssClassName(i)).html(u);var c=!1,l=!1,p=!1;2===e?(c=null!==i,l=null!==i):1===e&&(c="undecided"===i,l="undecided"===i,p="rejected"===i),this.$id("reason").closest(".form-group").toggleClass("hidden",!c),this.$id("aor").closest(".form-group").toggleClass("hidden",!l),this.$id("defaultAor").toggleClass("hidden",!p),this.$id("comment").prop("required",o).closest(".form-group").find("label").toggleClass("is-required",o),t&&(c?this.$id("reason").select2("focus"):this.$id("comment").focus())},setUpReasonSelect2:function(){p.setUpReasonSelect2(this,this.$id("aor").val(),{allowClear:!0,placeholder:" "})},setUpAorSelect2:function(){p.setUpAorSelect2(this,this.$id("reason").val(),{allowClear:!0,placeholder:" "})},updateTimes:function(){this.$(".prodDowntimes-history-time").each(function(){var t=n.toTagData(this.getAttribute("datetime"));this.textContent=t.daysAgo>5?t["long"]:t.human})},clearCorroborateValidity:function(){var t=this.$id("comment")[0];t&&t.setCustomValidity("")},corroborate:function(){var t=this.$id("reason"),n=this.$id("aor"),o=this.$id("comment"),a=s.getValue(this.$id("status")),u=!t.length||t.closest(".form-group").hasClass("hidden")?null:t.val(),c=!n.length||n.closest(".form-group").hasClass("hidden")?null:n.val(),l=o.val().trim(),p={};Array.isArray(a)&&a.length&&(a=a[0]),e.isString(a)&&(a!==this.model.get("status")&&(p.status=a),u&&c?(u!==this.model.get("reason")&&(p.reason=u),c!==this.model.get("aor")&&(p.aor=c)):"rejected"===a&&(c=this.getDefaultAor(),c&&c.id!==this.model.get("aor")&&(p.aor=c.id))),e.isEmpty(l)||(p.decisionComment=l);var d=this.$('.btn[type="submit"]');if(e.isEmpty(p)){if(!o[0].validity.valid)return;return o[0].setCustomValidity(r("prodDowntimes","corroborate:noChanges")),void(this.timers.submit=setTimeout(function(){d.click()},1))}p._id=this.model.id,e.isEmpty(p.decisionComment)&&(p.decisionComment=""),d.prop("disabled",!0);var h=this;this.socket.emit("prodDowntimes.corroborate",p,function(t){t?i.msg.show({type:"error",time:2500,text:r("prodDowntimes","corroborate:failure")}):(h.$id("status").find(".active").click(),o.val("").focus()),d.prop("disabled",!1)})},getDefaultAor:function(){var t=a.getByTypeAndId("subdivision",this.model.get("subdivision"));return t?u.get(t.get("aor"))||null:null},onModelChange:function(){this.updateProps(),this.updateCorroborateExtra()}})}),define("app/prodDowntimes/pages/ProdDowntimeDetailsPage",["app/i18n","app/user","app/viewport","app/core/util/bindLoadingMessage","app/core/util/pageActions","app/core/util/onModelDeleted","app/core/View","app/prodChangeRequests/util/createDeletePageAction","../settings","../ProdDowntime","../views/ProdDowntimeDetailsView"],function(t,e,n,r,i,o,s,a,u,c,l){"use strict";return s.extend({layoutName:"page",breadcrumbs:function(){return[{label:t.bound("prodDowntimes","BREADCRUMBS:browse"),href:this.model.genClientUrl("base")},this.model.getLabel()]
},actions:function(){var n=[];if(this.model.canCorroborate()){var r=this,o=this.model.canChangeStatus(this.settings.getCanChangeStatusOptions());n.push({icon:o?"gavel":"comment",label:t("prodDowntimes","LIST:ACTION:"+(o?"corroborate":"comment")),callback:function(){r.view.focusComment()}})}return this.model.isEditable()&&e.isAllowedTo("PROD_DATA:MANAGE","PROD_DATA:CHANGES:REQUEST")&&n.push(i.edit(this.model,!1),a(this,this.model)),n},initialize:function(){this.model=r(this.model,this),this.settings=r(u.acquire(),this),this.view=new l({model:this.model,settings:this.settings}),this.listenToOnce(this.model,"sync",this.onFirstModelSync),this.listenTo(this.model,"change",this.onModelChange)},destroy:function(){u.release()},setUpLayout:function(t){this.listenTo(this.model,"change",function(){t.setActions(this.actions())})},load:function(t){return this.settings.isEmpty()?t(this.model.fetch(this.options.fetchOptions),this.settings.fetch({reset:!0})):t(this.model.fetch(this.options.fetchOptions))},afterRender:function(){u.acquire(),this.options.corroborate&&this.view.focusComment()},setUpRemoteTopics:function(){function t(t){return t.model._id===e}this.pubsub.subscribe("prodDowntimes.updated."+this.model.id,this.onProdDowntimeUpdated.bind(this)),this.pubsub.subscribe("prodDowntimes.deleted."+this.model.id,this.onProdDowntimeDeleted.bind(this));var e=this.model.get("pressWorksheet");e&&(this.pubsub.subscribe("pressWorksheets.edited",this.onPressWorksheetEdited.bind(this)).setFilter(t),this.pubsub.subscribe("pressWorksheets.deleted",this.onPressWorksheetDeleted.bind(this)).setFilter(t))},refreshModel:function(){this.timers.refreshModel&&(clearTimeout(this.timers.refreshModel),this.timers.refreshModel=null);var t=this;this.promised(this.model.fetch()).fail(function(e){404===e.status&&t.onProdDowntimeDeleted()})},onFirstModelSync:function(){this.setUpRemoteTopics()},onModelChange:function(){},onPressWorksheetEdited:function(){this.timers.refreshModel&&clearTimeout(this.timers.refreshModel),this.timers.refreshModel=setTimeout(this.refreshModel.bind(this),3e3,this)},onPressWorksheetDeleted:function(){this.onProdDowntimeDeleted()},onProdDowntimeDeleted:function(){o(this.broker,this.model,null,!0)},onProdDowntimeUpdated:function(t){this.model.set(t)}})}),define("app/prodDowntimes/templates/form",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="prodDowntimes-form" method="post" action="'),__output.push(formAction),__output.push('">\n  <input type="hidden" name="_method" value="'),__output.push(escape(formMethod)),__output.push('">\n  <div class="panel panel-primary">\n    <div class="panel-heading">'),__output.push(panelTitleText),__output.push("</div>\n    "),isChangeRequest&&(__output.push('\n    <div class="message message-inline message-warning">'),__output.push(t("prodDowntimes","changeRequest:warning:"+(editMode?"edit":"add"))),__output.push("</div>\n    ")),__output.push('\n    <div class="panel-body">\n      '),isChangeRequest&&(__output.push('\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-requestComment" class="control-label">'),__output.push(t("prodDowntimes","changeRequest:commentLabel")),__output.push('</label>\n        <textarea id="'),__output.push(idPrefix),__output.push('-requestComment" class="form-control" name="requestComment" rows="2"></textarea>\n      </div>\n      ')),__output.push('\n      <div class="row">\n        <div class="form-group col-md-4">\n          <label for="'),__output.push(idPrefix),__output.push('-master" class="control-label">'),__output.push(t("prodDowntimes","PROPERTY:master")),__output.push('</label>\n          <input id="'),__output.push(idPrefix),__output.push('-master" type="text" name="master">\n        </div>\n        <div class="form-group col-md-4">\n          <label for="'),__output.push(idPrefix),__output.push('-leader" class="control-label">'),__output.push(t("prodDowntimes","PROPERTY:leader")),__output.push('</label>\n          <input id="'),__output.push(idPrefix),__output.push('-leader" type="text" name="leader">\n        </div>\n        <div class="form-group col-md-4">\n          <label for="'),__output.push(idPrefix),__output.push('-operator" class="control-label">'),__output.push(t("prodDowntimes","PROPERTY:operator")),__output.push('</label>\n          <input id="'),__output.push(idPrefix),__output.push('-operator" type="text" name="operator">\n        </div>\n      </div>\n      '),editMode||(__output.push('\n      <div class="row">\n        <div class="form-group col-md-4 has-required-select2">\n          <label for="'),__output.push(idPrefix),__output.push('-reason" class="control-label is-required">'),__output.push(t("prodDowntimes","PROPERTY:reason")),__output.push('</label>\n          <input id="'),__output.push(idPrefix),__output.push('-reason" type="text" name="reason" required>\n        </div>\n        <div class="form-group col-md-4 has-required-select2">\n          <label for="'),__output.push(idPrefix),__output.push('-aor" class="control-label is-required">'),__output.push(t("prodDowntimes","PROPERTY:aor")),__output.push('</label>\n          <input id="'),__output.push(idPrefix),__output.push('-aor" type="text" name="aor" required>\n        </div>\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-reasonComment" class="control-label">'),__output.push(t("prodDowntimes","PROPERTY:reasonComment")),__output.push('</label>\n        <textarea id="'),__output.push(idPrefix),__output.push('-reasonComment" class="form-control" name="reasonComment" rows="3"></textarea>\n      </div>\n      ')),__output.push('\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-startedAtDate" class="control-label is-required">'),__output.push(t("prodDowntimes","PROPERTY:startedAt")),__output.push('</label>\n        <div class=" form-group-datetime">\n          <input id="'),__output.push(idPrefix),__output.push('-startedAtDate" class="form-control" name="startedAtDate" type="date" required>\n          <input id="'),__output.push(idPrefix),__output.push('-startedAtTime" class="form-control" name="startedAtTime" type="time" required step="1">\n        </div>\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-finishedAtDate" class="control-label is-required">'),__output.push(t("prodDowntimes","PROPERTY:finishedAt")),__output.push('</label>\n        <div class=" form-group-datetime">\n          <input id="'),__output.push(idPrefix),__output.push('-finishedAtDate" class="form-control" name="finishedAtDate" type="date" required>\n          <input id="'),__output.push(idPrefix),__output.push('-finishedAtTime" class="form-control" name="finishedAtTime" type="time" required step="1">\n        </div>\n      </div>\n      '),editMode||(__output.push('\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-status" class="control-label is-required">'),__output.push(t("prodDowntimes","PROPERTY:status")),__output.push('</label>\n        <div class="radio">\n          <label><input type="radio" name="status" value="undecided" required> '),__output.push(t("prodDowntimes","PROPERTY:status:undecided")),__output.push('</label>\n        </div>\n        <div class="radio">\n          <label><input type="radio" name="status" value="confirmed" required> '),__output.push(t("prodDowntimes","PROPERTY:status:confirmed")),__output.push('</label>\n        </div>\n        <div class="radio">\n          <label><input type="radio" name="status" value="rejected" required> '),__output.push(t("prodDowntimes","PROPERTY:status:rejected")),__output.push('</label>\n        </div>\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-decisionComment" class="control-label">'),__output.push(t("prodDowntimes","PROPERTY:decisionComment")),__output.push('</label>\n        <textarea id="'),__output.push(idPrefix),__output.push('-decisionComment" class="form-control" name="decisionComment" rows="3"></textarea>\n      </div>\n      ')),__output.push('\n    </div>\n    <div class="panel-footer">\n      <button type="submit" class="btn btn-primary">'),__output.push(formActionText),__output.push("</button>\n    </div>\n  </div>\n</form>\n");return __output.join("")}}),define("app/prodDowntimes/views/ProdDowntimeFormView",["underscore","app/i18n","app/user","app/time","app/viewport","app/data/downtimeReasons","app/data/aors","app/core/views/FormView","app/users/util/setUpUserSelect2","app/prodChangeRequests/util/isChangeRequest","../util/reasonAndAor","app/prodDowntimes/templates/form"],function(t,e,n,r,i,o,s,a,u,c,l,p){"use strict";return a.extend({template:p,events:t.extend({"select2-removed #-reason, #-aor":function(){this.$id("reason").val(""),this.$id("aor").val(""),this.timers.clearSelect2=setTimeout(function(t){t.setUpReasonSelect2(),t.setUpAorSelect2(),t.$id("reason").select2("focus")},1,this)},"change #-reason":function(){this.setUpAorSelect2()},"change #-aor":function(){this.setUpReasonSelect2()}},a.prototype.events),initialize:function(){a.prototype.initialize.apply(this,arguments),l.initialize(this)},destroy:function(){a.prototype.destroy.call(this),l.destroy(this)},serialize:function(){return t.extend(a.prototype.serialize.call(this),{isChangeRequest:c()})},afterRender:function(){a.prototype.afterRender.call(this),this.options.editMode||(l.setUpReasons(this),l.setUpAors(this),this.setUpReasonSelect2(),this.setUpAorSelect2()),this.setUpUserSelect2("master"),this.setUpUserSelect2("leader"),this.setUpUserSelect2("operator"),this.options.editMode||"undecided"!==this.model.get("status")||(this.$("input[name=status]").attr("disabled",!0),this.$id("decisionComment").attr("disabled",!0)),this.$id("master").select2("focus")},setUpUserSelect2:function(t){var e=u(this.$id(t)),n=this.model.get(t);n&&n.id&&n.label&&e.select2("data",{id:n.id,text:n.label})},setUpReasonSelect2:function(){l.setUpReasonSelect2(this,this.$id("aor").val(),{allowClear:!0,placeholder:" "})},setUpAorSelect2:function(){l.setUpAorSelect2(this,this.$id("reason").val(),{allowClear:!0,placeholder:" "})},showErrorMessage:function(t){return e.has("prodDowntimes","FORM:ERROR:"+t)&&(t=e("prodDowntimes","FORM:ERROR:"+t)),a.prototype.showErrorMessage.call(this,t)},checkValidity:function(t){return t.finishedAt<=t.startedAt?this.showErrorMessage("times"):this.checkTimeValidity(t,"startedAt")&&this.checkTimeValidity(t,"finishedAt")},checkTimeValidity:function(t,e){var n=t[e].getTime(),r=Date.parse(this.model.get("date")),i=r+288e5;return n===i&&(n-=1),r>n||n>=i?this.showErrorMessage(e):!0},serializeToForm:function(){var t=this.model.toJSON();return t.startedAtDate=r.format(t.startedAt,"YYYY-MM-DD"),t.startedAtTime=r.format(t.startedAt,"HH:mm:ss"),t.finishedAtDate=r.format(t.finishedAt,"YYYY-MM-DD"),t.finishedAtTime=r.format(t.finishedAt,"HH:mm:ss"),t.requestComment="",t},serializeForm:function(e){return e.master=this.serializeUserInfo("master"),e.leader=this.serializeUserInfo("leader"),e.operator=this.serializeUserInfo("operator"),e.operators=e.operator?[e.operator]:[],e.startedAt=r.getMoment(e.startedAtDate+" "+e.startedAtTime).toDate(),e.finishedAt=r.getMoment(e.finishedAtDate+" "+e.finishedAtTime).toDate(),e.reasonComment=t.isEmpty(e.reasonComment)?"":e.reasonComment,e.decisionComment=t.isEmpty(e.decisionComment)?"":e.decisionComment,delete e.startedAtDate,delete e.startedAtTime,delete e.finishedAtDate,delete e.finishedAtTime,e},serializeUserInfo:function(t){var e=this.$id(t).select2("data");return null===e?null:{id:e.id,label:e.text}},handleSuccess:function(){if(c()){if(this.options.editMode)return this.handleEditSuccess();i.msg.show({type:"success",time:2500,text:e("prodDowntimes","changeRequest:msg:success:add")})}a.prototype.handleSuccess.apply(this,arguments)},handleEditSuccess:function(){function t(){i.msg.show({type:"success",time:5e3,text:e("prodDowntimes","changeRequest:msg:success:edit")})}return this.model.set(this.model.previousAttributes()),i.currentDialog===this?t():this.broker.subscribe("router.executing").setLimit(1).on("message",t),a.prototype.handleSuccess.apply(this,arguments)},handleFailure:function(t){var n=t.responseJSON;n&&n.error&&e.has("prodDowntimes","FORM:ERROR:"+n.error.message)?this.showErrorMessage(n.error.message):c()?this.showErrorMessage(e("prodShiftOrders","changeRequest:msg:failure:"+(this.options.editMode?"edit":"add"))):a.prototype.handleFailure.apply(this,arguments)}})}),define("app/prodDowntimes/pages/ProdDowntimeEditFormPage",["app/i18n","app/core/pages/EditFormPage","../views/ProdDowntimeFormView"],function(t,e,n){"use strict";return e.extend({FormView:n,breadcrumbs:function(){return[{label:t.bound("prodDowntimes","BREADCRUMBS:browse"),href:this.model.genClientUrl("base")},{label:this.model.getLabel(),href:this.model.genClientUrl()},t.bound("prodDowntimes","BREADCRUMBS:editForm")]}})}),define("app/nls/prodDowntimes",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Downtimes"},"BREADCRUMBS:settings":function(){return"Settings"},"BREADCRUMBS:corroborate":function(){return"Corroboration"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the downtimes :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the downtime :("},"MSG:DELETED":function(t){return"Downtime <em>"+e.v(t,"label")+"</em> was deleted."},"MSG:jump:404":function(t){return"Couldn't find a downtime with ID <em>"+e.v(t,"rid")+"</em> :("},"PAGE_ACTION:export":function(){return"Export downtimes"},"PAGE_ACTION:settings":function(){return"Change settings"},"PAGE_ACTION:edit":function(){return"Edit downtime"},"PAGE_ACTION:delete":function(){return"Delete downtime"},"PAGE_ACTION:comment":function(){return"Comment downtime"},"PAGE_ACTION:corroborate":function(){return"Corroborate downtime"},"PAGE_ACTION:jump:title":function(){return"Jump to downtime by ID"},"PAGE_ACTION:jump:placeholder":function(){return"Downtime ID"},"PANEL:TITLE:details":function(){return"Downtime's details"},"PANEL:TITLE:history":function(){return"Downtime's history"},"PANEL:TITLE:editForm":function(){return"Edit downtime form"},"PANEL:TITLE:addForm":function(){return"Add downtime form"},"filter:submit":function(){return"Filter downtimes"},"filter:tooltip:in":function(){return"Checked: all selected\nUnchecked: all but the selected"},"filter:placeholder:aor":function(){return"Any area of responsibility"},"filter:placeholder:reason":function(){return"Any downtime reason"},"filter:placeholder:orgUnit":function(){return"Any org unit"},"LIST:ACTION:comment":function(){return"Comment downtime"},"LIST:ACTION:corroborate":function(){return"Corroborate downtime"},"PROPERTY:rid":function(){return"ID"},"PROPERTY:mrpControllers":function(){return"MRP"},"PROPERTY:prodFlow":function(){return"Production flow"},"PROPERTY:orgUnit":function(){return"Org Unit"},"PROPERTY:aor":function(){return"Area of responsibility"},"PROPERTY:prodLine":function(){return"Line‚Äã/‚ÄãMachine"},"PROPERTY:reason":function(){return"Downtime reason"},"PROPERTY:reasonComment":function(){return"Reason comment"},"PROPERTY:decisionComment":function(){return"Decision comment"},"PROPERTY:order":function(){return"Order"},"PROPERTY:orderId":function(){return"Order ID"},"PROPERTY:startedAt":function(){return"Started at"},"PROPERTY:finishedAt":function(){return"Finished at"},"PROPERTY:status":function(){return"Status"},"PROPERTY:status:undecided":function(){return"Undecided"},"PROPERTY:status:confirmed":function(){return"Confirmed"},"PROPERTY:status:rejected":function(){return"Rejected"},"PROPERTY:date":function(){return"Date"},"PROPERTY:shift":function(){return"Shift"},"PROPERTY:master":function(){return"Master"},"PROPERTY:leader":function(){return"Leader"},"PROPERTY:operator":function(){return"Operator"},"PROPERTY:operators":function(){return"Operators"},"PROPERTY:creator":function(){return"Creator"},"PROPERTY:corroborator":function(){return"Corroborator"},"PROPERTY:corroboratedAt":function(){return"Corroborated at"},"PROPERTY:duration":function(){return"Duration"},"PROPERTY:pressWorksheet":function(){return"Worksheet"},"FORM:ACTION:add":function(){return"Add downtime"},"FORM:ACTION:edit":function(){return"Edit downtime"},"FORM:ERROR:addFailure":function(){return"Failed to add the downtime :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the downtime :-("},"FORM:ERROR:startedAt":function(){return"Started at must be between the shift's time boundries!"},"FORM:ERROR:finishedAt":function(){return"Finished at must be between the shift's time boundries!"},"FORM:ERROR:times":function(){return"Finished at must be after Started at!"},"FORM:ERROR:INVALID_CHANGES":function(){return"Cannot edit the downtime: no valid changes were detected :("},"FORM:ERROR:INPUT":function(){return"Invalid input data!"},"FORM:ERROR:OVERLAPPING_DOWNTIMES":function(){return"Downtime overlaps with other downtimes!"},"FORM:ERROR:NOT_EDITABLE":function(){return"Downtime isn't finished yet!"},"shift+date":function(t){return e.v(t,"date")+", "+e.v(t,"shift")+" shift"},"NO_DATA:order":function(){return"<em>no order</em>"},"NO_DATA:finishedAt":function(){return"<em>unfinished</em>"},"NO_DATA:corroboration":function(){return"Downtime wasn't corroborated yet."},"corroborate:status":function(){return"New status"},"corroborate:reason":function(){return"New reason"},"corroborate:aor":function(){return"New area of responsibility"},"corroborate:comment":function(){return"Comment"},"corroborate:submit:null":function(){return"Comment"},"corroborate:submit:undecided":function(){return"Assign a new AOR"},"corroborate:submit:confirmed":function(){return"Confirm"},"corroborate:submit:rejected":function(){return"Reject"},"corroborate:noChanges":function(){return"No changes detected :("},"corroborate:failure":function(){return"Failed to corroborate the downtime :("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Downtime deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete downtime"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen downtime?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> downtime?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the downtime :-("},"settings:tab:default":function(){return"General"},"settings:autoConfirmHours":function(){return"Time to automatic confirmation [h]"},"settings:maxAorChanges":function(){return"Maximum number of Area of Responsibility changes"},"settings:maxReasonChanges":function(){return"Maximum number of Downtime reason changes"},"settings:maxRejectedChanges":function(){return"Maximum number of downtime rejections"},"changesCount:reason":function(){return"Number of Downtime reason changes"},"changesCount:aor":function(){return"Number of Area of Responsibility changes"},"changesCount:rejected":function(){return"Number of rejections"},"changeRequest:delete:messageText":function(){return"You're in a change request creation mode. The <em>Downtime</em> will be deleted only after it has been approved by the person responsible.<br><br>Are you sure you want to create the downtime deletion request?"},"changeRequest:delete:formActionText":function(){return"Create deletion request"},"changeRequest:commentLabel":function(){return"Change request comment"},"changeRequest:warning:add":function(){return"You're in a change request creation mode. The new <em>Downtime</em> will be created only after it has been approved by the person responsible."},"changeRequest:warning:edit":function(){return"You're in a change request creation mode. The <em>Downtime</em> will be updated only after the change has been approved by the person responsible."},"changeRequest:msg:success:add":function(){return"Downtime creation request was created successfully."},"changeRequest:msg:success:edit":function(){return"Downtime modification request was created successfully."},"changeRequest:msg:success:delete":function(){return"Downtime deletion request was created successfully."},"changeRequest:msg:failure:add":function(){return"Failed to create a new downtime creation request :-("},"changeRequest:msg:failure:edit":function(){return"Failed to create a new downtime modification request :-("},"changeRequest:msg:failure:delete":function(){return"Failed to create a new downtime deletion request :-("}},pl:!0}}),define("app/nls/pl/prodDowntimes",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Przestoje"},"BREADCRUMBS:settings":function(){return"Ustawienia"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie przestoj√≥w nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie przestoju nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Przest√≥j <em>"+e.v(t,"label")+"</em> zosta≈Ç usuniƒôty."},"MSG:jump:404":function(t){return"Nie znaleziono przestoju o ID <em>"+e.v(t,"rid")+"</em> :("},"PAGE_ACTION:export":function(){return"Eksportuj przestoje"},"PAGE_ACTION:settings":function(){return"Zmie≈Ñ ustawienia"},"PAGE_ACTION:edit":function(){return"Edytuj przest√≥j"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ przest√≥j"},"PAGE_ACTION:comment":function(){return"Komentuj przest√≥j"},"PAGE_ACTION:corroborate":function(){return"Potwierd≈∫ przest√≥j"},"PAGE_ACTION:jump:title":function(){return"Skocz do przestoju po ID"},"PAGE_ACTION:jump:placeholder":function(){return"ID przestoju"},"LIST:ACTION:comment":function(){return"Komentuj przest√≥j"},"LIST:ACTION:corroborate":function(){return"Potwierd≈∫ przest√≥j"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy przestoju"},"PANEL:TITLE:history":function(){return"Historia przestoju"},"PANEL:TITLE:editForm":function(){return"Formularz edycji danych przestoju"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania przestoju"},"filter:submit":function(){return"Filtruj przestoje"},"filter:tooltip:in":function(){return"Zaznaczony: wszystkie wybrane\nNiezaznaczony: wszystkie opr√≥cz wybranych"},"filter:placeholder:aor":function(){return"Dowolny obszar odpowiedzialno≈õci"},"filter:placeholder:reason":function(){return"Dowolny pow√≥d przestoju"},"filter:placeholder:orgUnit":function(){return"Dowolna jednostka organizacyjna"},"PROPERTY:rid":function(){return"ID"},"PROPERTY:mrpControllers":function(){return"MRP"},"PROPERTY:prodFlow":function(){return"Przep≈Çyw"},"PROPERTY:orgUnit":function(){return"Jednostka organizacyjna"},"PROPERTY:aor":function(){return"Obszar odpowiedzialno≈õci"},"PROPERTY:prodLine":function(){return"Linia‚Äã/‚ÄãMaszyna"},"PROPERTY:reason":function(){return"Pow√≥d przestoju"},"PROPERTY:reasonComment":function(){return"Komentarz powodu"},"PROPERTY:decisionComment":function(){return"Komentarz potwierdzenia"},"PROPERTY:order":function(){return"Zlecenie"},"PROPERTY:orderId":function(){return"Zlecenie"},"PROPERTY:startedAt":function(){return"Czas rozpoczƒôcia"},"PROPERTY:finishedAt":function(){return"Czas zako≈Ñczenia"},"PROPERTY:status":function(){return"Status"},"PROPERTY:status:undecided":function(){return"Niepotwierdzony"},"PROPERTY:status:confirmed":function(){return"Potwierdzony"},"PROPERTY:status:rejected":function(){return"Odrzucony"},"PROPERTY:date":function(){return"Data"},"PROPERTY:shift":function(){return"Zmiana"},"PROPERTY:master":function(){return"Mistrz"},"PROPERTY:leader":function(){return"Lider"},"PROPERTY:operator":function(){return"Operator"},"PROPERTY:operators":function(){return"Operatorzy"},"PROPERTY:creator":function(){return"U≈ºytkownik rozpoczynajƒÖcy"},"PROPERTY:corroborator":function(){return"U≈ºytkownik potwierdzajƒÖcy"},"PROPERTY:corroboratedAt":function(){return"Czas potwierdzenia"},"PROPERTY:duration":function(){return"Czas trwania"},"PROPERTY:pressWorksheet":function(){return"Karta pracy"},"FORM:ACTION:add":function(){return"Dodaj przest√≥j"},"FORM:ACTION:edit":function(){return"Edytuj przest√≥j"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá przestoju :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá przestoju :-("},"FORM:ERROR:startedAt":function(){return"Czas rozpoczƒôcia musi mie≈õciƒá siƒô w ramach Zmiany produkcyjnej!"},"FORM:ERROR:finishedAt":function(){return"Czas zako≈Ñczenia musi mie≈õciƒá siƒô w ramach Zmiany produkcyjnej!"},"FORM:ERROR:times":function(){return"Czas zako≈Ñczenia musi byƒá po Czasie rozpoczƒôcia!"},"FORM:ERROR:INVALID_CHANGES":function(){return"Nie mo≈ºna zmodyfikowaƒá przestoju: nie wykryto ≈ºadnych poprawnych zmian :("},"FORM:ERROR:INPUT":function(){return"Nieprawid≈Çowe dane wej≈õciowe!"},"FORM:ERROR:OVERLAPPING_DOWNTIMES":function(){return"Przest√≥j pokrywa siƒô z innymi przestojami!"},"FORM:ERROR:NOT_EDITABLE":function(){return"Przest√≥j jeszcze siƒô nie sko≈Ñczy≈Ç!"},"shift+date":function(t){return e.v(t,"date")+", "+e.v(t,"shift")+" zmiana"},"NO_DATA:order":function(){return"<em>brak zlecenia</em>"},"NO_DATA:finishedAt":function(){return"<em>nie uko≈Ñczony</em>"},"corroborate:status":function(){return"Nowy status"},"corroborate:reason":function(){return"Nowy pow√≥d przestoju"},"corroborate:aor":function(){return"Nowy obszar odpowiedzialno≈õci"},"corroborate:comment":function(){return"Komentarz"},"corroborate:submit:null":function(){return"Komentuj"},"corroborate:submit:undecided":function(){return"Przypisz nowy obszar"},"corroborate:submit:confirmed":function(){return"Potwierd≈∫"},"corroborate:submit:rejected":function(){return"Odrzuƒá"},"corroborate:noChanges":function(){return"Nie wykryto ≈ºadnych zmian :("},"corroborate:failure":function(){return"Nie uda≈Ço siƒô potwierdziƒá przestoju :("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia przestoju"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ przest√≥j"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany przest√≥j?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá przest√≥j <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá przestoju :-("},"settings:tab:default":function(){return"Podstawowe"},"settings:autoConfirmHours":function(){return"Czas do automatycznego potwierdzenia [h]"},"settings:maxAorChanges":function(){return"Maksymalna liczba zmian obszaru odpowiedzialno≈õci"},"settings:maxReasonChanges":function(){return"Maksymalna liczba zmian powodu przestoju"},"settings:maxRejectedChanges":function(){return"Maksymalna liczba odrzuce≈Ñ przestoju"},"changesCount:reason":function(){return"Liczba zmian powodu przestoju"},"changesCount:aor":function(){return"Liczba zmian obszaru odpowiedzialnego"},"changesCount:rejected":function(){return"Liczba odrzuce≈Ñ przestoju"},"changeRequest:delete:messageText":function(){return"Jeste≈õ w trybie tworzenia ≈ºƒÖdania zmiany danych produkcyjnych. <em>Przest√≥j</em> zostanie usuniƒôty dopiero po zaakceptowaniu operacji przez osobƒô odpowiedzialnƒÖ.<br><br>Czy na pewno chcesz utworzyƒá ≈ºƒÖdanie usuniƒôcia wybranego przestoju?"},"changeRequest:delete:formActionText":function(){return"Utw√≥rz ≈ºƒÖdanie usuniƒôcia"},"changeRequest:commentLabel":function(){return"Komentarz do ≈ºƒÖdania zmiany"},"changeRequest:warning:add":function(){return"Jeste≈õ w trybie tworzenia ≈ºƒÖdania zmiany danych produkcyjnych. Nowy <em>przest√≥j</em> zostanie utworzony dopiero po zaakceptowaniu go przez osobƒô odpowiedzialnƒÖ."},"changeRequest:warning:edit":function(){return"Jeste≈õ w trybie tworzenia ≈ºƒÖdania zmiany danych produkcyjnych. <em>Przest√≥j</em> zostanie zaktualizowany dopiero po zaakceptowaniu dokonanych zmian przez osobƒô odpowiedzialnƒÖ."},"changeRequest:msg:success:add":function(){return"≈ªƒÖdanie dodania nowego przestoju zosta≈Ço utworzone."},"changeRequest:msg:success:edit":function(){return"≈ªƒÖdanie edycji przestoju zosta≈Ço utworzone."},"changeRequest:msg:success:delete":function(){return"≈ªƒÖdanie usuniƒôcia przestoju zosta≈Ço utworzone."},"changeRequest:msg:failure:add":function(){return"Nie uda≈Ço siƒô stworzyƒá ≈ºƒÖdania dodania nowego przestoju :-("},"changeRequest:msg:failure:edit":function(){return"Nie uda≈Ço siƒô stworzyƒá ≈ºƒÖdania edycji przestoju :-("},"changeRequest:msg:failure:delete":function(){return"Nie uda≈Ço siƒô stworzyƒá ≈ºƒÖdania usuniƒôcia przestoju :-("}}}),define("app/prodDowntimes/routes",["../router","../viewport","../user","../prodChangeRequests/util/createShowDeleteFormPage","./ProdDowntime","./ProdDowntimeCollection","./pages/ProdDowntimeListPage","./pages/ProdDowntimeDetailsPage","./pages/ProdDowntimeEditFormPage","i18n!app/nls/prodDowntimes"],function(t,e,n,r,i,o,s,a,u){"use strict";var c=n.auth("LOCAL","PROD_DATA:VIEW","PROD_DOWNTIMES:VIEW"),l=n.auth("PROD_DATA:MANAGE","PROD_DATA:CHANGES:REQUEST");t.map("/prodDowntimes",c,function(t){e.showPage(new s({collection:new o(null,{rqlQuery:t.rql})}))}),t.map("/prodDowntimes/:id",function(t){e.showPage(new a({model:new i({_id:t.params.id}),corroborate:"1"===t.query.corroborate}))}),t.map("/prodDowntimes/:id;edit",l,function(t){e.showPage(new u({model:new i({_id:t.params.id})}))}),t.map("/prodDowntimes/:id;delete",l,r(i)),t.map("/prodDowntimes;settings",l,function(t){e.loadPage("app/prodDowntimes/pages/ProdDowntimeSettingsPage",function(e){return new e({initialTab:t.query.tab})})})}),define("app/nls/prodFlows",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Production flows"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the production flows :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the production flow :("},"MSG:DELETED":function(t){return"Production flow <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add production flow"},"PAGE_ACTION:edit":function(){return"Edit production flow"},"PAGE_ACTION:delete":function(){return"Delete production flow"},"PAGE_ACTION:toggleDeactivated":function(){return"Hide deactivated"
},"PANEL:TITLE:details":function(){return"Production flow's details"},"PANEL:TITLE:addForm":function(){return"Add production flow form"},"PANEL:TITLE:editForm":function(){return"Edit production flow form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:name":function(){return"Name"},"PROPERTY:subdivision":function(){return"Subdivision"},"PROPERTY:mrpControllers":function(){return"MRP Controller"},"PROPERTY:deactivatedAt":function(){return"Deactivated at"},"FORM:ACTION:add":function(){return"Add production flow"},"FORM:ACTION:edit":function(){return"Edit production flow"},"FORM:ERROR:addFailure":function(){return"Failed to add the new production flow :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the production flow :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Production flow deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete production flow"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen production flow?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> production flow?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the production flow :-("}},pl:!0}}),define("app/nls/pl/prodFlows",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Przep≈Çywy"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie przep≈Çyw√≥w nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie przep≈Çywu nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Przep≈Çyw <em>"+e.v(t,"label")+"</em> zosta≈Ç usuniƒôty."},"PAGE_ACTION:add":function(){return"Dodaj przep≈Çyw"},"PAGE_ACTION:edit":function(){return"Edytuj przep≈Çyw"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ przep≈Çyw"},"PAGE_ACTION:toggleDeactivated":function(){return"Ukryj dezaktywowane"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy przep≈Çywu"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania przep≈Çywu"},"PANEL:TITLE:editForm":function(){return"Formularz edycji przep≈Çywu"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:name":function(){return"Nazwa"},"PROPERTY:subdivision":function(){return"Dzia≈Ç"},"PROPERTY:mrpControllers":function(){return"Kontrolery MRP"},"PROPERTY:deactivatedAt":function(){return"Data dezaktywacji"},"FORM:ACTION:add":function(){return"Dodaj przep≈Çyw"},"FORM:ACTION:edit":function(){return"Edytuj przep≈Çyw"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá przep≈Çywu :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá przep≈Çywu :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia przep≈Çywu"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ przep≈Çyw"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany przep≈Çyw?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá przep≈Çyw <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá przep≈Çywu :-("}}}),define("app/prodFlows/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","../data/prodFlows","./ProdFlow","i18n!app/nls/prodFlows"],function(t,e,n,r,i,o){"use strict";var s=n.auth("DICTIONARIES:VIEW"),a=n.auth("DICTIONARIES:MANAGE");t.map("/prodFlows",s,function(){e.loadPage(["app/prodFlows/pages/ProdFlowListPage"],function(t){return new t({collection:i})})}),t.map("/prodFlows/:id",function(t){e.loadPage(["app/prodFlows/pages/ProdFlowDetailsPage"],function(e){return new e({model:new o({_id:t.params.id})})})}),t.map("/prodFlows;add",a,function(){e.loadPage(["app/core/pages/AddFormPage","app/prodFlows/views/ProdFlowFormView"],function(t,e){return new t({FormView:e,model:new o})})}),t.map("/prodFlows/:id;edit",a,function(t){e.loadPage(["app/core/pages/EditFormPage","app/prodFlows/views/ProdFlowFormView"],function(e,n){return new e({FormView:n,model:new o({_id:t.params.id})})})}),t.map("/prodFlows/:id;delete",a,r.bind(null,o))}),define("app/nls/prodFunctions",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Functions"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the functions :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the function :("},"MSG:DELETED":function(t){return"Function <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add function"},"PAGE_ACTION:edit":function(){return"Edit function"},"PAGE_ACTION:delete":function(){return"Delete function"},"PANEL:TITLE:details":function(){return"Function's details"},"PANEL:TITLE:addForm":function(){return"Add function form"},"PANEL:TITLE:editForm":function(){return"Edit function form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:label":function(){return"Label"},"PROPERTY:fteMasterPosition":function(){return"Position in FTE (production)"},"PROPERTY:fteLeaderPosition":function(){return"Position in FTE (warehouse)"},"PROPERTY:direct":function(){return"DIRECT/INDIRECT"},"PROPERTY:dirIndirRatio":function(){return"DIR/INDIR [%]"},"PROPERTY:companies":function(){return"Companies"},"PROPERTY:color":function(){return"Color"},"direct:true":function(){return"DIRECT"},"direct:false":function(){return"INDIRECT"},"FORM:ACTION:add":function(){return"Add function"},"FORM:ACTION:edit":function(){return"Edit function"},"FORM:ERROR:addFailure":function(){return"Failed to add the new function :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the function :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Function deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete function"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen function?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> function?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the function :-("}},pl:!0}}),define("app/nls/pl/prodFunctions",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Funkcje"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie funkcji nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie funkcji nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Funkcja <em>"+e.v(t,"label")+"</em> zosta≈Ça usuniƒôta."},"PAGE_ACTION:add":function(){return"Dodaj funkcjƒô"},"PAGE_ACTION:edit":function(){return"Edytuj funkcjƒô"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ funkcjƒô"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy funkcji"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania funkcji"},"PANEL:TITLE:editForm":function(){return"Formularz edycji funkcji"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:label":function(){return"Opis"},"PROPERTY:fteMasterPosition":function(){return"Pozycja w FTE (produkcja)"},"PROPERTY:fteLeaderPosition":function(){return"Pozycja w FTE (magazyn)"},"PROPERTY:direct":function(){return"DIRECT/INDIRECT"},"PROPERTY:dirIndirRatio":function(){return"DIR/INDIR [%]"},"PROPERTY:companies":function(){return"Firmy"},"PROPERTY:color":function(){return"Kolor"},"direct:true":function(){return"DIRECT"},"direct:false":function(){return"INDIRECT"},"FORM:ACTION:add":function(){return"Dodaj funkcjƒô"},"FORM:ACTION:edit":function(){return"Edytuj funkcjƒô"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá funkcji :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá funkcji :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia funkcji"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ funkcjƒô"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybranƒÖ funkcjƒô?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá funkcjƒô <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá funkcji :-("}}}),define("app/prodFunctions/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","../data/prodFunctions","./ProdFunction","i18n!app/nls/prodFunctions"],function(t,e,n,r,i,o){"use strict";var s=n.auth("DICTIONARIES:VIEW"),a=n.auth("DICTIONARIES:MANAGE");t.map("/prodFunctions",s,function(){e.loadPage(["app/core/pages/ListPage"],function(t){return new t({collection:i,columns:[{id:"_id",className:"is-min"},"label",{id:"fteMasterPosition",className:"is-min"},{id:"fteLeaderPosition",className:"is-min"},{id:"direct",className:"is-min"},{id:"dirIndirRatio",className:"is-min"},{id:"companies",className:"is-min"},{id:"color",className:"is-min"}]})})}),t.map("/prodFunctions/:id",function(t){e.loadPage(["app/core/pages/DetailsPage","app/prodFunctions/views/ProdFunctionDetailsView"],function(e,n){return new e({DetailsView:n,model:new o({_id:t.params.id})})})}),t.map("/prodFunctions;add",a,function(){e.loadPage(["app/core/pages/AddFormPage","app/prodFunctions/views/ProdFunctionFormView"],function(t,e){return new t({FormView:e,model:new o})})}),t.map("/prodFunctions/:id;edit",a,function(t){e.loadPage(["app/core/pages/EditFormPage","app/prodFunctions/views/ProdFunctionFormView"],function(e,n){return new e({FormView:n,model:new o({_id:t.params.id})})})}),t.map("/prodFunctions/:id;delete",a,r.bind(null,o))}),define("app/nls/prodLines",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Production lines"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the production lines :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the production line :("},"MSG:DELETED":function(t){return"Production line <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add production line"},"PAGE_ACTION:edit":function(){return"Edit production line"},"PAGE_ACTION:delete":function(){return"Delete production line"},"PAGE_ACTION:toggleDeactivated":function(){return"Hide deactivated"},"PANEL:TITLE:details":function(){return"Production line's details"},"PANEL:TITLE:addForm":function(){return"Add production line form"},"PANEL:TITLE:editForm":function(){return"Edit production line form"},"LIST:ACTION:production":function(){return"Show the operator's screen"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:description":function(){return"Description"},"PROPERTY:workCenter":function(){return"WorkCenter"},"PROPERTY:inventoryNo":function(){return"Inventory no"},"PROPERTY:deactivatedAt":function(){return"Deactivated at"},"FORM:ACTION:add":function(){return"Add production line"},"FORM:ACTION:edit":function(){return"Edit production line"},"FORM:ERROR:addFailure":function(){return"Failed to add the new production line :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the production line :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Production line deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete production line"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen production line?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> production line?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the production line :-("}},pl:!0}}),define("app/nls/pl/prodLines",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Linie produkcyjne"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie linii produkcyjnych nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie linii produkcyjnej nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Linia produkcyjna <em>"+e.v(t,"label")+"</em> zosta≈Ça usuniƒôte."},"PAGE_ACTION:add":function(){return"Dodaj linii produkcyjnƒÖ"},"PAGE_ACTION:edit":function(){return"Edytuj linii produkcyjnƒÖ"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ linii produkcyjnƒÖ"},"PAGE_ACTION:toggleDeactivated":function(){return"Ukryj dezaktywowane"},"LIST:ACTION:production":function(){return"Poka≈º formatkƒô produkcji"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy linii produkcyjnej"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania linii produkcyjnej"},"PANEL:TITLE:editForm":function(){return"Formularz edycji linii produkcyjnej"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:description":function(){return"Opis"},"PROPERTY:workCenter":function(){return"WorkCenter"},"PROPERTY:inventoryNo":function(){return"Nr inwentarzowy"},"PROPERTY:deactivatedAt":function(){return"Data dezaktywacji"},"FORM:ACTION:add":function(){return"Dodaj liniƒô produkcyjnƒÖ"},"FORM:ACTION:edit":function(){return"Edytuj liniƒô produkcyjnƒÖ"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá linii produkcyjnej :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá linii produkcyjnej :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia linii produkcyjnej"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ liniƒô produkcyjnƒÖ"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybranƒÖ liniƒô produkcyjnƒÖ?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá liniƒô produkcyjnƒÖ <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá linii produkcyjnej :-("}}}),define("app/prodLines/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","../data/prodLines","./ProdLine","i18n!app/nls/prodLines"],function(t,e,n,r,i,o){"use strict";var s=n.auth("DICTIONARIES:VIEW"),a=n.auth("DICTIONARIES:MANAGE");t.map("/prodLines",s,function(){e.loadPage(["app/prodLines/pages/ProdLineListPage"],function(t){return new t({collection:i})})}),t.map("/prodLines/:id",function(t){e.loadPage(["app/prodLines/pages/ProdLineDetailsPage"],function(e){return new e({model:new o({_id:t.params.id})})})}),t.map("/prodLines;add",a,function(){e.loadPage(["app/core/pages/AddFormPage","app/prodLines/views/ProdLineFormView"],function(t,e){return new t({FormView:e,model:new o})})}),t.map("/prodLines/:id;edit",a,function(t){e.loadPage(["app/core/pages/EditFormPage","app/prodLines/views/ProdLineFormView"],function(e,n){return new e({FormView:n,model:new o({_id:t.params.id})})})}),t.map("/prodLines/:id;delete",a,r.bind(null,o))}),define("app/prodTasks/ProdTask",["../core/Model"],function(t){"use strict";return t.extend({urlRoot:"/prodTasks",clientUrlRoot:"#prodTasks",topicPrefix:"prodTasks",privilegePrefix:"DICTIONARIES",nlsDomain:"prodTasks",labelAttribute:"name",defaults:{name:null,tags:null,fteDiv:!1,inProd:!0,clipColor:"#eeee00",parent:null},url:function(){var e=t.prototype.url.apply(this,arguments);return this.isNew()?e:e+"?populate(parent)"},parse:function(t){return Array.isArray(t.tags)||(t.tags=[]),t.clipColor||(t.clipColor="#eeee00"),t}})}),define("app/prodTasks/ProdTaskCollection",["../core/Collection","./ProdTask"],function(t,e){"use strict";return t.extend({model:e,rqlQuery:"sort(name)",sort:function(t){function e(t){if(t.children=i[t.id]||[],t.children.length)for(var n=0;n<t.children.length;++n){var r=t.children[n];a.push(r),e(r)}}var n,r=[],i={};for(n=0;n<this.length;++n){var o=this.models[n],s=o.attributes;s.parent?i[s.parent]?i[s.parent].push(o):i[s.parent]=[o]:r.push(o)}var a=[];for(n=0;n<r.length;++n){var u=r[n];a.push(u),e(u)}return this.models=a,t&&!t.silent&&this.trigger("sort",this,t||{}),this},serializeToSelect2:function(t){function e(n){var r=[];if(Array.isArray(n.children))for(var i=0;i<n.children.length;++i){var o=n.children[i];o.id!==t&&r.push({id:o.id,text:o.getLabel(),children:e(o),prodTask:o})}return r}var n=[];return this.sort().forEach(function(r){r.id===t||r.attributes.parent||n.push({id:r.id,text:r.getLabel(),children:e(r),prodTask:r})}),n}})}),define("app/nls/prodTasks",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Production tasks"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the production task :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the production task :("},"MSG:DELETED":function(t){return"Production task <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add production task"},"PAGE_ACTION:edit":function(){return"Edit production task"},"PAGE_ACTION:delete":function(){return"Delete production task"},"PANEL:TITLE:details":function(){return"Production task's details"},"PANEL:TITLE:addForm":function(){return"Add production task form"},"PANEL:TITLE:editForm":function(){return"Edit production task form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:parent":function(){return"Parent task"},"PROPERTY:name":function(){return"Name"},"PROPERTY:tags":function(){return"Tags"},"PROPERTY:fteDiv":function(){return"Divide per Division in FTE (distribution)?"},"PROPERTY:clipColor":function(){return"Color in CLIP"},"PROPERTY:inProd":function(){return"Use in Productivity?"},"FORM:ACTION:add":function(){return"Add production task"},"FORM:ACTION:edit":function(){return"Edit production task"},"FORM:ERROR:addFailure":function(){return"Failed to add the new production task :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the production task :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Production task deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete production task"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen production task?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> production task?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the production task :-("}},pl:!0}}),define("app/nls/pl/prodTasks",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Zadania produkcyjne"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie zada≈Ñ produkcyjnych nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie zadania produkcyjnego nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Zadanie produkcyjne <em>"+e.v(t,"label")+"</em> zosta≈Ço usuniƒôte."},"PAGE_ACTION:add":function(){return"Dodaj zadanie produkcyjne"},"PAGE_ACTION:edit":function(){return"Edytuj zadanie produkcyjne"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ zadanie produkcyjne"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy zadania produkcyjnego"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania zadania produkcyjnego"},"PANEL:TITLE:editForm":function(){return"Formularz edycji zadania produkcyjnego"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:parent":function(){return"Nadrzƒôdne zadanie"},"PROPERTY:name":function(){return"Nazwa"},"PROPERTY:tags":function(){return"Tagi"},"PROPERTY:fteDiv":function(){return"Podzia≈Ç na wydzia≈Çy w FTE (magazyn)?"},"PROPERTY:clipColor":function(){return"Kolor w raporcie CLIP"},"PROPERTY:inProd":function(){return"U≈ºycie w Produktywno≈õci?"},"FORM:ACTION:add":function(){return"Dodaj zadanie produkcyjne"},"FORM:ACTION:edit":function(){return"Edytuj zadanie produkcyjne"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá zadania produkcyjnego :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá zadania produkcyjnego :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia zadania produkcyjnego"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ zadanie produkcyjne"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany zadanie produkcyjne?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá zadanie produkcyjne <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá zadania produkcyjnego :-("}}}),define("app/prodTasks/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","./ProdTaskCollection","./ProdTask","i18n!app/nls/prodTasks"],function(t,e,n,r,i,o){"use strict";var s=n.auth("DICTIONARIES:VIEW"),a=n.auth("DICTIONARIES:MANAGE");t.map("/prodTasks",s,function(t){e.loadPage(["app/core/pages/ListPage","app/prodTasks/views/ProdTaskListView"],function(e,n){return new e({ListView:n,collection:new i({rqlQuery:t.rql})})})}),t.map("/prodTasks/:id",function(t){e.loadPage(["app/core/pages/DetailsPage","app/prodTasks/templates/details"],function(e,n){return new e({model:new o({_id:t.params.id}),detailsTemplate:n})})}),t.map("/prodTasks;add",a,function(){e.loadPage("app/prodTasks/pages/AddProdTaskFormPage",function(t){return new t({model:new o})})}),t.map("/prodTasks/:id;edit",a,function(t){e.loadPage("app/prodTasks/pages/EditProdTaskFormPage",function(e){return new e({model:new o({_id:t.params.id})})})}),t.map("/prodTasks/:id;delete",a,r.bind(null,o))}),define("app/core/util/matchesOperType",["underscore"],function(t){"use strict";return function(e,n){var r=t.find(e.selector.args,function(t){return"eq"===t.name&&"type"===t.args[0]});return r?-1!==n.indexOf(r.args[1]):!0}}),define("app/core/util/matchesProdLine",["underscore","app/user","app/data/prodLines"],function(t,e,n){"use strict";return function(r,i){var o=t.find(r.selector.args,function(t){return"eq"===t.name&&"prodLine"===t.args[0]});if(o)return o.args[1]===i;if(e.data["super"])return!0;var s=n.get(i);if(!s)return!0;var a=e.getDivision();if(!a)return!0;var u=e.getSubdivision(),c=s.getSubdivision();return u?u===c:a.id===c.get("division")}}),define("app/prodLogEntries/util/decorateProdLogEntry",["underscore","app/time","app/i18n","app/data/aors","app/data/prodLines","app/data/downtimeReasons","app/data/views/renderOrgUnitPath","app/core/templates/userInfo"],function(t,e,n,r,i,o,s,a){"use strict";function u(e,r){var i=t.without(Object.keys(r),"_id");return"editOrder"===e&&(i=t.without(i,"mechOrder","orderData"),-1!==i.indexOf("orderId")&&(i=t.without(i,"operationNo"))),i.map(function(t){return n(c[e],"PROPERTY:"+t)}).join(", ")}var c={editShift:"prodShifts",editOrder:"prodShiftOrders",editDowntime:"prodDowntimes"};return function(t){var i=t.toJSON(),s={};switch(i.type){case"changeShift":s.date=e.format(i.data.startedProdShift.date,"YYYY-MM-DD"),s.shift=n("core","SHIFT:"+i.data.startedProdShift.shift);break;case"addShift":s.date=e.format(i.data.date,"YYYY-MM-DD"),s.shift=n("core","SHIFT:"+i.data.shift);break;case"changeMaster":case"changeLeader":case"changeOperator":s.name=i.data?i.data.label:"-";break;case"changeQuantitiesDone":s.hour=i.data.hour+1,s.value=i.data.newValue;break;case"changeOrder":case"correctOrder":case"addOrder":var c=i.data.orderData&&i.data.orderData.operations?i.data.orderData.operations[i.data.operationNo]:null;s.orderId=i.data.orderId,s.orderName=i.data.orderData.name||"?",s.operationNo=i.data.operationNo,s.operationName=c?c.name:"?";break;case"changeQuantityDone":case"changeWorkerCount":s.value=i.data.newValue;break;case"startDowntime":case"addDowntime":var l=o.get(i.data.reason),p=r.get(i.data.aor);s._id=i.data._id,s.reason=l?l.getLabel():i.data.reason,s.aor=p?p.getLabel():i.data.aor;break;case"editShift":case"editOrder":case"editDowntime":"editDowntime"===i.type&&(s._id=i.data._id),s.changedProperties=u(i.type,i.data);break;default:s=i.data}var d=null;return i.savedAt&&(d=(Date.parse(i.savedAt)-Date.parse(i.createdAt))/1e3),i.data=n("prodLogEntries","data:"+i.type,s),i.type=n("prodLogEntries","type:"+i.type),i.createdAt=e.format(i.createdAt,"YYYY-MM-DD HH:mm:ss"),i.creator=a({userInfo:i.creator}),d&&(i.createdAt+=" ("+(0>d?"-":"+")+e.toString(Math.abs(d),!1,!0)+")"),i.prodShift&&(i.prodShift='<a href="#prodShifts/'+i.prodShift._id+'">'+e.format(i.prodShift.date,"YYYY-MM-DD")+", "+n("core","SHIFT:"+i.prodShift.shift)+"</a>"),i.prodShiftOrder=i.prodShiftOrder?'<a href="#prodShiftOrders/'+i.prodShiftOrder._id+'">'+i.prodShiftOrder.orderId+", "+i.prodShiftOrder.operationNo+"</a>":n("prodLogEntries","noData:prodShiftOrder"),i}}),define("app/prodLogEntries/ProdLogEntry",["../core/Model","./util/decorateProdLogEntry"],function(t,e){"use strict";return t.extend({urlRoot:"/prodLogEntries",clientUrlRoot:"#prodLogEntries",topicPrefix:"prodLogEntries",privilegePrefix:"PROD_DATA",nlsDomain:"prodLogEntries",defaults:{type:null},serialize:function(){return e(this)}})}),define("app/prodLogEntries/ProdLogEntryCollection",["../time","../core/Collection","../core/util/matchesOperType","../core/util/matchesProdLine","./ProdLogEntry"],function(t,e,n,r,i){"use strict";return e.extend({model:i,rqlQuery:function(e){return e.Query.fromObject({sort:{createdAt:-1},limit:20,selector:{name:"and",args:[{name:"ge",args:["createdAt",t.getMoment().startOf("day").subtract(1,"week")]}]}})},matches:function(t){return n(this.rqlQuery,t.types)&&r(this.rqlQuery,t.prodLine)}})}),define("app/prodLogEntries/views/ProdLogEntryListView",["app/user","app/viewport","app/core/views/ListView","app/data/prodLines","app/data/views/renderOrgUnitPath"],function(t,e,n,r,i){"use strict";return n.extend({remoteTopics:{"production.synced.**":"refreshCollection","production.edited.**":function(){this.refreshCollection()}},columns:[{id:"prodLine",className:"is-min"},{id:"type",className:"is-min"},"data",{id:"prodShift",className:"is-min"},{id:"prodShiftOrder",className:"is-min"},{id:"createdAt",className:"is-min"},{id:"creator",className:"is-min"}],serializeActions:function(){return null},afterRender:function(){n.prototype.afterRender.call(this);var t=this;this.$('.list-item > td[data-id="prodLine"]').popover({container:this.el,trigger:"hover",placement:"auto right",html:!0,content:function(){var e=i(r.get(t.$(this).text().trim()),!1,!1);return e?e.split(" \\ ").join("<br>\\ "):"?"}})},refreshCollection:function(t){return!t||this.collection.matches(t)?n.prototype.refreshCollection.apply(this,arguments):void 0}})}),define("app/prodLogEntries/templates/filter",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form id="'),__output.push(idPrefix),__output.push('-form" class="well filter-form">\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-from-date">'),__output.push(t("core","filter:date:from")),__output.push('</label>\n    <div id="'),__output.push(idPrefix),__output.push('-from" class="form-group-datetime">\n      <input id="'),__output.push(idPrefix),__output.push('-from-date" class="form-control" name="from-date" type="date" placeholder="YYYY-MM-DD">\n      <input id="'),__output.push(idPrefix),__output.push('-from-time" class="form-control" name="from-time" type="time" placeholder="hh:mm">\n    </div>\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-to-date">'),__output.push(t("core","filter:date:to")),__output.push('</label>\n    <div id="'),__output.push(idPrefix),__output.push('-to" class="form-group-datetime">\n      <input id="'),__output.push(idPrefix),__output.push('-to-date" class="form-control" name="to-date" type="date" placeholder="YYYY-MM-DD">\n      <input id="'),__output.push(idPrefix),__output.push('-to-time" class="form-control" name="to-time" type="time" placeholder="hh:mm">\n    </div>\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-prodLine">'),__output.push(t("prodLogEntries","PROPERTY:prodLine")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-prodLine" name="prodLine" type="text" data-placeholder="'),__output.push(t("prodLogEntries","filter:placeholder:prodLine")),__output.push('">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-type">'),__output.push(t("prodLogEntries","PROPERTY:type")),__output.push('</label>\n    <select id="'),__output.push(idPrefix),__output.push('-type" name="type" data-placeholder="'),__output.push(t("prodLogEntries","filter:placeholder:type")),__output.push('">\n      <option></option>\n      '),["changeShift","changeMaster","changeLeader","changeOperator","changeQuantitiesDone","changeOrder","correctOrder","changeQuantityDone","changeWorkerCount","finishOrder","startDowntime","finishDowntime","corroborateDowntime","endWork","addShift","addOrder","addDowntime","editShift","editOrder","editDowntime","deleteShift","deleteOrder","deleteDowntime"].forEach(function(e){__output.push('\n      <option value="'),__output.push(e),__output.push('">'),__output.push(t("prodLogEntries","type:"+e)),__output.push("</option>\n      ")
}),__output.push("\n    </select>\n  </div>\n  "),__output.push(renderLimit()),__output.push('\n  <div class="form-group filter-actions">\n    <button type="submit" class="btn btn-default"><i class="fa fa-filter"></i><span>'),__output.push(escape(t("prodLogEntries","filter:submit"))),__output.push("</span></button>\n  </div>\n</form>\n");return __output.join("")}}),define("app/prodLogEntries/views/ProdLogEntryFilterView",["app/user","app/data/prodLines","app/core/views/FilterView","app/core/util/fixTimeRange","app/prodLogEntries/templates/filter"],function(t,e,n,r,i){"use strict";return n.extend({template:i,defaultFormData:{createdAt:"",prodLine:null,type:null},termToForm:{createdAt:function(t,e,n){r.toFormData(n,e,"date+time")},prodLine:function(t,e,n){n[t]=e.args[1]},type:"prodLine"},afterRender:function(){n.prototype.afterRender.call(this),this.$id("prodLine").select2({width:"275px",allowClear:!0,data:this.getApplicableProdLines()}),this.$id("type").select2({width:"275px",allowClear:!0})},getApplicableProdLines:function(){return e.getForCurrentUser().map(function(t){return{id:t.id,text:t.getLabel()}})},serializeFormToQuery:function(t){var e=r.fromView(this,{defaultTime:"06:00"}),n=this.$id("prodLine").val(),i=this.$id("type").val();n&&n.length&&t.push({name:"eq",args:["prodLine",n]}),i&&i.length&&t.push({name:"eq",args:["type",i]}),e.from&&t.push({name:"ge",args:["createdAt",e.from]}),e.to&&t.push({name:"le",args:["createdAt",e.to]})}})}),define("app/prodLogEntries/pages/ProdLogEntryListPage",["app/i18n","app/viewport","app/core/util/bindLoadingMessage","app/core/View","../ProdLogEntryCollection","../views/ProdLogEntryListView","../views/ProdLogEntryFilterView","app/core/templates/listPage"],function(t,e,n,r,i,o,s,a){"use strict";return r.extend({template:a,layoutName:"page",pageId:"prodLogEntryList",breadcrumbs:[t.bound("prodLogEntries","BREADCRUMBS:browse")],initialize:function(){this.defineModels(),this.defineViews(),this.setView(".filter-container",this.filterView),this.setView(".list-container",this.listView)},defineModels:function(){this.prodLogEntryList=n(new i(null,{rqlQuery:this.options.rql}),this)},defineViews:function(){this.listView=new o({collection:this.prodLogEntryList}),this.filterView=new s({model:{rqlQuery:this.prodLogEntryList.rqlQuery}}),this.listenTo(this.filterView,"filterChanged",this.refreshList)},load:function(t){return t(this.prodLogEntryList.fetch({reset:!0}))},refreshList:function(t){this.prodLogEntryList.rqlQuery=t,this.listView.refreshCollectionNow(),this.broker.publish("router.navigate",{url:this.prodLogEntryList.genClientUrl()+"?"+t,trigger:!1,replace:!0})}})}),define("app/nls/prodLogEntries",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Operation log"},"MSG:LOADING_FAILURE":function(){return"Failed to load the operation log :("},"filter:submit":function(){return"Filter operations"},"filter:placeholder:type":function(){return"Any type"},"filter:placeholder:prodLine":function(){return"Any production line"},"PROPERTY:prodLine":function(){return"Production line"},"PROPERTY:type":function(){return"Type"},"PROPERTY:createdAt":function(){return"Created at"},"PROPERTY:creator":function(){return"Creator"},"PROPERTY:data":function(){return"Additional info"},"PROPERTY:prodShift":function(){return"Shift"},"PROPERTY:prodShiftOrder":function(){return"Order"},"type:changeShift":function(){return"Shift start"},"type:changeMaster":function(){return"Master change"},"type:changeLeader":function(){return"Leader change"},"type:changeOperator":function(){return"Operator change"},"type:changeQuantitiesDone":function(){return"Quantities done in an hour change"},"type:changeOrder":function(){return"Order start"},"type:changeQuantityDone":function(){return"Order's quantity done change"},"type:changeWorkerCount":function(){return"Order's worker count change"},"type:correctOrder":function(){return"Order correction"},"type:finishOrder":function(){return"Order finish"},"type:startDowntime":function(){return"Downtime start"},"type:finishDowntime":function(){return"Downtime finish"},"type:corroborateDowntime":function(){return"Downtime corroboration"},"type:endWork":function(){return"End of work"},"type:editShift":function(){return"Shift edit"},"type:editOrder":function(){return"Order edit"},"type:editDowntime":function(){return"Downtime edit"},"type:deleteShift":function(){return"Shift deletion"},"type:deleteDowntime":function(){return"Downtime deletion"},"type:deleteOrder":function(){return"Order deletion"},"type:addShift":function(){return"Shift addition"},"type:addOrder":function(){return"Order addition"},"type:addDowntime":function(){return"Downtime addition"},"data:changeShift":function(t){return"Shift <em>"+e.v(t,"shift")+"</em> on <em>"+e.v(t,"date")+"</em>"},"data:addShift":function(t){return"Shift <em>"+e.v(t,"shift")+"</em> on <em>"+e.v(t,"date")+"</em>"},"data:changeMaster":function(t){return"New master: <em>"+e.v(t,"name")+"</em>"},"data:changeLeader":function(t){return"New leader: <em>"+e.v(t,"name")+"</em>"},"data:changeOperator":function(t){return"New operator: <em>"+e.v(t,"name")+"</em>"},"data:changeQuantitiesDone":function(t){return"Quantity done in the <em>"+e.v(t,"hour")+".</em> hour: <em>"+e.v(t,"value")+"</em>"},"data:changeOrder":function(t){return"Order: <em>"+e.v(t,"orderId")+"</em> (<em>"+e.v(t,"orderName")+"</em>); operation: <em>"+e.v(t,"operationNo")+"</em> (<em>"+e.v(t,"operationName")+"</em>)"},"data:addOrder":function(t){return"Order: <em>"+e.v(t,"orderId")+"</em> (<em>"+e.v(t,"orderName")+"</em>); operation: <em>"+e.v(t,"operationNo")+"</em> (<em>"+e.v(t,"operationName")+"</em>)"},"data:changeQuantityDone":function(t){return"Quantity done in the order: <em>"+e.v(t,"value")+"</em>"},"data:changeWorkerCount":function(t){return"Worker count in the order: <em>"+e.v(t,"value")+"</em>"},"data:correctOrder":function(t){return"Order: <em>"+e.v(t,"orderId")+"</em> (<em>"+e.v(t,"orderName")+"</em>); operation: <em>"+e.v(t,"operationNo")+"</em> (<em>"+e.v(t,"operationName")+"</em>)"},"data:finishOrder":function(){return"-"},"data:startDowntime":function(t){return"<a href='#prodDowntimes/"+e.v(t,"_id")+"'>Reason: <em>"+e.v(t,"reason")+"</em>; AOR: <em>"+e.v(t,"aor")+"</em></a>"},"data:addDowntime":function(t){return"<a href='#prodDowntimes/"+e.v(t,"_id")+"'>Reason: <em>"+e.v(t,"reason")+"</em>; AOR: <em>"+e.v(t,"aor")+"</em></a>"},"data:finishDowntime":function(t){return"Finished <a href='#prodDowntimes/"+e.v(t,"_id")+"'>downtime</a>."},"data:corroborateDowntime":function(t){return e.s(t,"status",{confirmed:"Confirmed",rejected:"Rejected",other:"Corroborated"})+" <a href='#prodDowntimes/"+e.v(t,"_id")+"'>downtime</a>."},"data:endWork":function(){return"-"},"data:editShift":function(t){return"Changed attributes: <em>"+e.v(t,"changedProperties")+"</em>"},"data:editOrder":function(t){return"Changed attributes: <em>"+e.v(t,"changedProperties")+"</em>"},"data:editDowntime":function(t){return"Changed attributes of <a href='#prodDowntimes/"+e.v(t,"_id")+"'>downtime</a>: <em>"+e.v(t,"changedProperties")+"</em>"},"data:deleteShift":function(){return"-"},"data:deleteDowntime":function(t){return"Deleted downtime <em>"+e.v(t,"rid")+"</em>"},"data:deleteOrder":function(t){return"Deleted order <em>"+e.v(t,"orderId")+"; "+e.v(t,"operationNo")+"</em>"},"noData:prodShiftOrder":function(){return"<em>no order</em>"}},pl:!0}}),define("app/nls/pl/prodLogEntries",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Historia operacji na liniach produkcyjnych"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie historii operacji nie powiod≈Ço siƒô :("},"filter:submit":function(){return"Filtruj historiƒô"},"filter:placeholder:type":function(){return"Dowolny typ"},"filter:placeholder:prodLine":function(){return"Dowolna linia produkcyjna"},"PROPERTY:prodLine":function(){return"Linia produkcyjna"},"PROPERTY:type":function(){return"Typ"},"PROPERTY:createdAt":function(){return"Czas operacji"},"PROPERTY:creator":function(){return"Wykonawca operacji"},"PROPERTY:data":function(){return"Dodatkowe informacje"},"PROPERTY:prodShift":function(){return"Zmiana"},"PROPERTY:prodShiftOrder":function(){return"Zlecenie"},"type:changeShift":function(){return"Rozpoczƒôcie zmiany"},"type:changeMaster":function(){return"Zmiana mistrza"},"type:changeLeader":function(){return"Zmiana lidera"},"type:changeOperator":function(){return"Zmiana operatora"},"type:changeQuantitiesDone":function(){return"Zmiana wykonanej ilo≈õci w godzinie"},"type:changeOrder":function(){return"Rozpoczƒôcie zlecenia"},"type:changeQuantityDone":function(){return"Zmiana wykonanej ilo≈õci w zleceniu"},"type:changeWorkerCount":function(){return"Zmiana ilo≈õci os√≥b w zleceniu"},"type:correctOrder":function(){return"Poprawa zlecenia"},"type:finishOrder":function(){return"Zako≈Ñczenie zlecenia"},"type:startDowntime":function(){return"Rozpoczƒôcie przestoju"},"type:finishDowntime":function(){return"Zako≈Ñczenie przestoju"},"type:corroborateDowntime":function(){return"Potwierdzenie przestoju"},"type:endWork":function(){return"Zako≈Ñczenie pracy"},"type:editShift":function(){return"Edycja zmiany"},"type:editOrder":function(){return"Edycja zlecenia"},"type:editDowntime":function(){return"Edycja przestoju"},"type:deleteShift":function(){return"Usuniƒôcie zmiany"},"type:deleteDowntime":function(){return"Usuniƒôcie przestoju"},"type:deleteOrder":function(){return"Usuniƒôcie zlecenia"},"type:addShift":function(){return"Dodanie zmiany"},"type:addOrder":function(){return"Dodanie zlecenia"},"type:addDowntime":function(){return"Dodanie przestoju"},"data:changeShift":function(t){return"Zmiana <em>"+e.v(t,"shift")+"</em> z dnia <em>"+e.v(t,"date")+"</em>"},"data:addShift":function(t){return"Zmiana <em>"+e.v(t,"shift")+"</em> z dnia <em>"+e.v(t,"date")+"</em>"},"data:changeMaster":function(t){return"Nowy mistrz: <em>"+e.v(t,"name")+"</em>"},"data:changeLeader":function(t){return"Nowy lider: <em>"+e.v(t,"name")+"</em>"},"data:changeOperator":function(t){return"Nowy operator: <em>"+e.v(t,"name")+"</em>"},"data:changeQuantitiesDone":function(t){return"Wykonana ilo≈õƒá w <em>"+e.v(t,"hour")+".</em> godzinie: <em>"+e.v(t,"value")+"</em>"},"data:changeOrder":function(t){return"Zlecenie: <em>"+e.v(t,"orderId")+"</em> (<em>"+e.v(t,"orderName")+"</em>); operacja: <em>"+e.v(t,"operationNo")+"</em> (<em>"+e.v(t,"operationName")+"</em>)"},"data:addOrder":function(t){return"Zlecenie: <em>"+e.v(t,"orderId")+"</em> (<em>"+e.v(t,"orderName")+"</em>); operacja: <em>"+e.v(t,"operationNo")+"</em> (<em>"+e.v(t,"operationName")+"</em>)"},"data:changeQuantityDone":function(t){return"Wykonana ilo≈õƒá w zleceniu: <em>"+e.v(t,"value")+"</em>"},"data:changeWorkerCount":function(t){return"Ilo≈õƒá os√≥b w zleceniu: <em>"+e.v(t,"value")+"</em>"},"data:correctOrder":function(t){return"Zlecenie: <em>"+e.v(t,"orderId")+"</em> (<em>"+e.v(t,"orderName")+"</em>); operacja: <em>"+e.v(t,"operationNo")+"</em> (<em>"+e.v(t,"operationName")+"</em>)"},"data:finishOrder":function(){return"-"},"data:startDowntime":function(t){return"<a href='#prodDowntimes/"+e.v(t,"_id")+"'>Pow√≥d: <em>"+e.v(t,"reason")+"</em>; obszar odpowiedzialno≈õci: <em>"+e.v(t,"aor")+"</em></a>"},"data:addDowntime":function(t){return"<a href='#prodDowntimes/"+e.v(t,"_id")+"'>Pow√≥d: <em>"+e.v(t,"reason")+"</em>; obszar odpowiedzialno≈õci: <em>"+e.v(t,"aor")+"</em></a>"},"data:finishDowntime":function(t){return"Zako≈Ñczono <a href='#prodDowntimes/"+e.v(t,"_id")+"'>przest√≥j</a>."},"data:corroborateDowntime":function(t){return e.s(t,"status",{confirmed:"Zatwierdzono",rejected:"Odrzucono",other:"Potwierdzono"})+" <a href='#prodDowntimes/"+e.v(t,"_id")+"'>przest√≥j</a>."},"data:endWork":function(){return"-"},"data:editShift":function(t){return"Zmienione atrybuty: <em>"+e.v(t,"changedProperties")+"</em>"},"data:editOrder":function(t){return"Zmienione atrybuty: <em>"+e.v(t,"changedProperties")+"</em>"},"data:editDowntime":function(t){return"Zmienione atrybuty <a href='#prodDowntimes/"+e.v(t,"_id")+"'>przestoju</a>: <em>"+e.v(t,"changedProperties")+"</em>"},"data:deleteShift":function(){return"-"},"data:deleteDowntime":function(t){return"Usuniƒôto przest√≥j <em>"+e.v(t,"rid")+"</em>."},"data:deleteOrder":function(t){return"Usuniƒôto zlecenie "+e.v(t,"orderId")+"; "+e.v(t,"operationNo")+"</em>."},"noData:prodShiftOrder":function(){return"<em>brak zlecenia</em>"}}}),define("app/prodLogEntries/routes",["../router","../viewport","../user","./pages/ProdLogEntryListPage","i18n!app/nls/prodLogEntries"],function(t,e,n,r){"use strict";var i=n.auth("LOCAL","PROD_DATA:VIEW");t.map("/prodLogEntries",i,function(t){e.showPage(new r({rql:t.rql}))})}),define("app/prodShiftOrders/util/decorateProdShiftOrder",["app/time","app/i18n","app/user","app/data/subdivisions","app/data/mrpControllers","app/data/prodFlows","app/data/prodLines","app/data/views/renderOrgUnitPath","app/core/util/getShiftStartInfo","app/core/templates/userInfo"],function(t,e,n,r,i,o,s,a,u,c){"use strict";return function(i,s){var a=i.toJSON(),l=Date.parse(a.startedAt),p=Date.parse(a.finishedAt);if(a.date)a.date=t.format(a.date,"YYYY-MM-DD");else{var d=u(a.startedAt);a.date=d.moment.format("YYYY-MM-DD"),a.shift=d.shift}if(a.shift=e("core","SHIFT:"+a.shift),a.startedAt=t.format(a.startedAt,"HH:mm:ss"),a.finishedAt=t.format(a.finishedAt,"HH:mm:ss"),a.duration=p?t.toString((p-l)/1e3):"-",a.creator=c({userInfo:a.creator}),s.orgUnits){var h=r.get(a.subdivision),f=o.get(a.prodFlow);a.subdivision=h?h.getLabel():"?",a.prodFlow=f?f.getLabel():"?",a.mrpControllers=Array.isArray(a.mrpControllers)&&a.mrpControllers.length?a.mrpControllers.join("; "):"?"}if(a.prodShift=a.prodShift?'<a href="#prodShifts/'+a.prodShift+'">'+a.date+", "+a.shift+"</a>":a.date+", "+a.shift,a.orderData){var m=(a.orderData.operations||{})[a.operationNo]||{};a.order=a.orderId+": <em>"+(a.orderData.name||"?")+"</em>",a.operation=a.operationNo+": <em>"+(m.name||"?")+"</em>"}else a.order=a.orderId,a.operation=a.operationNo;return s.orderUrl&&n.isAllowedTo("ORDERS:VIEW")&&(a.orderUrl="#"+(a.mechOrder?"mechOrders":"orders")+"/"+encodeURIComponent(a.orderId)),a.taktTimeSap=i.getTaktTime(),a.taktTime=i.getActualTaktTime(),a.workerCountSap=i.getWorkerCountSap(),a.efficiency=Math.round(100*i.getEfficiency())+"%",a}}),define("app/prodShiftOrders/util/calcOrderEfficiency",[],function(){"use strict";return function(t,e){var n=t.laborTime/100*t.totalQuantity/(t.workDuration*t.workerCount);return n=isNaN(n)||!isFinite(n)?0:n,e?Math.round(100*n)+"%":n}}),define("app/prodShiftOrders/ProdShiftOrder",["underscore","../user","../time","../data/prodLog","../data/subdivisions","../core/Model","../core/util/getShiftEndDate","./util/decorateProdShiftOrder","./util/calcOrderEfficiency"],function(t,e,n,r,i,o,s,a,u){"use strict";return o.extend({urlRoot:"/prodShiftOrders",clientUrlRoot:"#prodShiftOrders",topicPrefix:"prodShiftOrders",privilegePrefix:"PROD_DATA",nlsDomain:"prodShiftOrders",defaults:{pressWorksheet:null,prodShift:null,division:null,subdivision:null,mrpControllers:null,prodFlow:null,workCenter:null,prodLine:null,date:null,shift:null,mechOrder:null,orderId:null,operationNo:null,orderData:null,workerCount:null,totalQuantity:null,quantityDone:null,quantityLost:null,creator:null,startedAt:null,finishedAt:null,master:null,leader:null,operator:null,operators:null},getLabel:function(t){var e=t===!1?"":this.get("prodLine")+": ";return e+this.get("orderId")+", "+this.get("operationNo")},serialize:function(t){return a(this,t)},onShiftChanged:function(){this.clear()},onOrderChanged:function(t,r,i){this.prepareOperations(r),this.set({prodShift:t.id,division:t.get("division"),subdivision:t.get("subdivision"),mrpControllers:t.get("mrpControllers"),prodFlow:t.get("prodFlow"),workCenter:t.get("workCenter"),prodLine:t.prodLine.id,date:t.get("date"),shift:t.get("shift"),mechOrder:null===r.no,orderId:r.no||r.nc12,operationNo:i,orderData:r,workerCount:0,totalQuantity:0,quantityDone:0,quantityLost:0,losses:null,creator:e.getInfo(),startedAt:n.getMoment().toDate(),finishedAt:null,master:t.get("master"),leader:t.get("leader"),operator:t.get("operator"),operators:t.get("operators")}),this.generateId(t)},onOrderCorrected:function(t,n,r){var i=n.no||n.nc12;if(i===this.get("orderId")&&r===this.get("operationNo"))return null;this.prepareOperations(n);var o={mechOrder:null===n.no,orderId:i,operationNo:r,orderData:n,creator:e.getInfo()};return this.set(o),this.get("workerCount")>this.getMaxWorkerCount()&&t.changeWorkerCount(0),this.get("quantityDone")>this.getMaxQuantityDone()&&t.changeQuantityDone(0),o},onOrderContinued:function(t){this.set({prodShift:t.id,division:t.get("division"),subdivision:t.get("subdivision"),mrpControllers:t.get("mrpControllers"),prodFlow:t.get("prodFlow"),workCenter:t.get("workCenter"),prodLine:t.prodLine.id,date:t.get("date"),shift:t.get("shift"),workerCount:0,totalQuantity:0,quantityDone:0,quantityLost:0,losses:null,creator:e.getInfo(),startedAt:n.getMoment().toDate(),finishedAt:null,master:t.get("master"),leader:t.get("leader"),operator:t.get("operator"),operators:t.get("operators")}),this.generateId(t)},generateId:function(t){this.set("_id",r.generateId(this.get("startedAt"),t.id+this.get("orderId")))},onWorkEnded:function(){this.clear()},isMechOrder:function(){return this.get("mechOrder")},getOrderNo:function(){var t=this.get("orderData");return t?t.no||"?":"-"},getNc12:function(){var t=this.get("orderData");return t?t.nc12||"?":"-"},getProductName:function(){var t=this.get("orderData");return t?t.name||"?":"-"},getOperationName:function(){var t=this.get("orderData"),e=this.get("operationNo");return t&&e?t.operations&&t.operations[e]?t.operations[e].name||e:e:"-"},getEfficiency:function(){return u(this.attributes)},getTaktTime:function(){var t=this.get("orderData"),e=this.get("operationNo");if(!t||!e)return"-";var n=t.operations?t.operations[e]:null;if(!n)return"?";var r=this.get("workerCount");return r||(r=this.getWorkerCountSap()),"number"!=typeof r||0===r||n.laborTime<=0?"?":Math.max(Math.round(1.053*n.laborTime/r*3600/100),1)},getActualTaktTime:function(){var t=n.getMoment(this.get("finishedAt"));if(!t.isValid())return"-";var e=t.diff(this.get("startedAt"),"seconds"),r=this.get("quantityDone");return r?Math.max(1,Math.round(e/r)):"?"},getWorkerCountSap:function(){var t=this.get("orderData"),e=this.get("operationNo");if(!t||!e)return"-";var n=t.operations?t.operations[e]:null;return!n||n.laborTime<=0||n.machineTime<=0?"?":Math.max(Math.round(n.laborTime/n.machineTime),1)},getWorkerCount:function(){return this.get("workerCount")||0},getWorkerCountForEdit:function(){var t=this.getWorkerCount();return 0!==t?t:(t=this.getWorkerCountSap(),"string"==typeof t||0===t?0:t)},getMaxWorkerCount:function(){var t=this.getWorkerCountSap();return"number"==typeof t?t+Math.max(1,Math.round(.25*t)):15},getMaxQuantityDone:function(){var t=this.get("orderData");return t&&t.qty?Math.ceil(1.25*t.qty):999},getStartedAt:function(){var t=this.get("startedAt");return t?n.format(t,"HH:mm:ss"):"?"},getQuantityDone:function(){return this.get("quantityDone")||0},getSubdivisionType:function(){var t=i.get(this.get("subdivision"));return t?t.get("type"):null},getOrderIdType:function(){return"press"===this.getSubdivisionType()?"nc12":"no"},hasOrderData:function(){return!!this.get("orderId")&&!!this.get("operationNo")&&!!this.get("orderData")},isEditable:function(){return this.hasEnded()&&!this.isFromPressWorksheet()},hasEnded:function(){return null!=this.get("finishedAt")},isFromPressWorksheet:function(){return null!=this.get("pressWorksheet")},finish:function(){if(!this.id||this.hasEnded())return null;var t=n.getMoment().toDate(),e=s(this.get("date"),this.get("shift"));return t>e&&(t=e),this.set("finishedAt",t),{_id:this.id,finishedAt:t}},prepareOperations:function(e){if(Array.isArray(e.operations)){var n={};e.operations.forEach(function(t){""!==t.workCenter&&-1!==t.laborTime&&(n[t.no]=t)}),e.operations=n}else t.isObject(e.operations)||(e.operations={});return e}},{parse:function(t){return["date","startedAt","finishedAt","createdAt"].forEach(function(e){"string"==typeof t[e]&&(t[e]=new Date(t[e]))}),t}})}),define("app/core/util/matchesEquals",["underscore"],function(t){"use strict";return function(e,n,r){var i=t.find(e.selector.args,function(t){return"eq"===t.name&&t.args[0]===n});return!i||i.args[1]===r}}),define("app/prodShiftOrders/ProdShiftOrderCollection",["../data/prodLines","../core/Collection","../core/util/matchesEquals","../core/util/matchesProdLine","./ProdShiftOrder"],function(t,e,n,r,i){"use strict";return e.extend({model:i,rqlQuery:function(t){return t.Query.fromObject({fields:{creator:0,losses:0},sort:{startedAt:-1},limit:15,selector:{name:"and",args:[]}})},hasOrMatches:function(t){return this.get(t._id)?!0:r(this.rqlQuery,t.prodLine)&&n(this.rqlQuery,"orderId",t.orderId)&&n(this.rqlQuery,"operationNo",t.operationNo)&&n(this.rqlQuery,"shift",t.shift)}})}),define("app/prodShiftOrders/views/ProdShiftOrderListView",["app/user","app/viewport","app/core/views/ListView","app/data/prodLines","app/data/views/renderOrgUnitPath"],function(t,e,n,r,i){"use strict";return n.extend({className:"is-clickable",remoteTopics:{"prodShiftOrders.created.*":"refreshIfMatches","prodShiftOrders.updated.*":"refreshIfMatches","prodShiftOrders.deleted.*":"refreshIfMatches"},columns:[{id:"mrpControllers",className:"is-min"},"prodFlow",{id:"prodLine",className:"is-min"},"order","operation",{id:"prodShift",className:"is-min"},{id:"startedAt",className:"is-min"},{id:"duration",className:"is-min"},{id:"quantityDone",className:"is-min"},{id:"workerCount",className:"is-min"},{id:"efficiency",className:"is-min"}],serializeRow:function(t){return t.serialize({orgUnits:!0})},serializeActions:function(){var t=this.collection;return function(e){return[n.actions.viewDetails(t.get(e._id))]}},afterRender:function(){n.prototype.afterRender.call(this);var t=this;this.$('.list-item > td[data-id="prodLine"]').popover({container:this.el,trigger:"hover",placement:"auto right",html:!0,content:function(){var e=i(r.get(t.$(this).text().trim()),!1,!1);return e?e.split(" \\ ").join("<br>\\ "):"?"}})},refreshIfMatches:function(t){this.collection.hasOrMatches(t)&&this.refreshCollection()}})}),define("app/prodShiftOrders/templates/filter",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="well filter-form">\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-from">'),__output.push(t("core","filter:date:from")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-from" class="form-control" name="from" type="date" placeholder="YYYY-MM-DD">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-to">'),__output.push(t("core","filter:date:to")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-to" class="form-control" name="to" type="date" placeholder="YYYY-MM-DD">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-shift-any">'),__output.push(t("prodShiftOrders","PROPERTY:shift")),__output.push('</label>\n    <div class="filter-radio-group">\n      '),[0,1,2,3].forEach(function(e){__output.push('\n      <label class="radio-inline">\n        <input id="'),__output.push(idPrefix),__output.push("-shift-"),__output.push(e),__output.push('" name="shift" type="radio" value="'),__output.push(e),__output.push('">\n        '),__output.push(t("core","SHIFT:"+e)),__output.push("\n      </label>\n      ")}),__output.push('\n    </div>\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-orderId">'),__output.push(t("prodShiftOrders","filter:orderId")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-orderId" class="form-control prodShiftOrders-filter-orderId" name="orderId" type="text" placeholder="'),__output.push(t("prodShiftOrders","filter:placeholder:orderId")),__output.push('">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-operationNo">'),__output.push(t("prodShiftOrders","filter:operationNo")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-operationNo" class="form-control prodShiftOrders-filter-operationNo" name="operationNo" type="text" placeholder="'),__output.push(t("prodShiftOrders","filter:placeholder:operationNo")),__output.push('" maxlength="4" pattern="[0-9]+">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-prodLine">'),__output.push(t("prodShiftOrders","PROPERTY:prodLine")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-prodLine" name="prodLine" type="text" data-placeholder="'),__output.push(t("prodShiftOrders","filter:placeholder:prodLine")),__output.push('">\n  </div>\n  '),__output.push(renderLimit()),__output.push('\n  <div class="form-group filter-actions">\n    <button type="submit" class="btn btn-default"><i class="fa fa-filter"></i><span>'),__output.push(escape(t("prodShiftOrders","filter:submit"))),__output.push("</span></button>\n  </div>\n</form>\n");return __output.join("")}}),define("app/prodShiftOrders/views/ProdShiftOrderFilterView",["app/user","app/data/prodLines","app/core/views/FilterView","app/core/util/fixTimeRange","app/prodShiftOrders/templates/filter"],function(t,e,n,r,i){"use strict";return n.extend({template:i,defaultFormData:{createdAt:"",prodLine:null,type:null,shift:0,orderId:"",operationNo:""},termToForm:{date:function(t,e,n){r.toFormData(n,e,"date")},prodLine:function(t,e,n){n[t]=e.args[1]},shift:"prodLine",orderId:"prodLine",operationNo:"prodLine"},afterRender:function(){n.prototype.afterRender.call(this),this.$id("prodLine").select2({width:"275px",allowClear:!t.getDivision(),data:this.getApplicableProdLines()})},getApplicableProdLines:function(){return e.getForCurrentUser().map(function(t){return{id:t.id,text:t.getLabel()}})},serializeFormToQuery:function(t){var e=r.fromView(this,{defaultTime:"06:00"}),n=this.$id("prodLine").val(),i=parseInt(this.$("input[name=shift]:checked").val(),10),o=this.$id("orderId").val(),s=this.fixOperationNo();o&&o.length&&t.push({name:"eq",args:["orderId",o]}),n&&n.length&&t.push({name:"eq",args:["prodLine",n]}),i&&t.push({name:"eq",args:["shift",i]}),s&&s.length&&t.push({name:"eq",args:["operationNo",s]}),e.from&&t.push({name:"ge",args:["date",e.from]}),e.to&&t.push({name:"le",args:["date",e.to]})},fixOperationNo:function(){var t=this.$id("operationNo"),e=t.val().trim();if(e.length>0)for(;e.length<4;)e="0"+e;return t.val(e),e}})}),define("app/prodShiftOrders/pages/ProdShiftOrderListPage",["app/i18n","app/viewport","app/core/util/bindLoadingMessage","app/core/util/pageActions","app/core/View","../ProdShiftOrderCollection","../views/ProdShiftOrderListView","../views/ProdShiftOrderFilterView","app/core/templates/listPage"],function(t,e,n,r,i,o,s,a,u){"use strict";return i.extend({template:u,layoutName:"page",pageId:"prodShiftOrderList",breadcrumbs:[t.bound("prodShiftOrders","BREADCRUMBS:browse")],actions:function(t){return[r["export"](t,this,this.prodShiftOrderList)]},initialize:function(){this.defineModels(),this.defineViews(),this.setView(".filter-container",this.filterView),this.setView(".list-container",this.listView)},defineModels:function(){this.prodShiftOrderList=n(new o(null,{rqlQuery:this.options.rql}),this)},defineViews:function(){this.listView=new s({collection:this.prodShiftOrderList}),this.filterView=new a({model:{rqlQuery:this.prodShiftOrderList.rqlQuery}}),this.listenTo(this.filterView,"filterChanged",this.refreshList)},load:function(t){return t(this.prodShiftOrderList.fetch({reset:!0}))},refreshList:function(t){this.prodShiftOrderList.rqlQuery=t,this.listView.refreshCollectionNow(),this.broker.publish("router.navigate",{url:this.prodShiftOrderList.genClientUrl()+"?"+t,trigger:!1,replace:!0})}})}),define("app/nls/prodShiftOrders",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Orders"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the orders :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the order :("},"MSG:DELETED":function(t){return"Order <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:prodLogEntries":function(){return"Show operation log"},"PAGE_ACTION:prodDowntimes":function(){return"Show downtimes"},"PAGE_ACTION:export":function(){return"Export orders"},"PAGE_ACTION:edit":function(){return"Edit order"},"PAGE_ACTION:delete":function(){return"Delete order"},"PANEL:TITLE:details":function(){return"Order's production details"},"PANEL:TITLE:orderDetails":function(){return"Order's details at the moment of start"},"PANEL:TITLE:losses":function(){return"Losses"},"PANEL:TITLE:downtimes":function(){return"Downtimes"},"PANEL:TITLE:addForm":function(){return"Add order form"},"PANEL:TITLE:editForm":function(){return"Edit order form"},"FORM:ACTION:add":function(){return"Add order"},"FORM:ACTION:edit":function(){return"Edit order"},"FORM:ERROR:addFailure":function(){return"Failed to add the order :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the order :-("},"FORM:ERROR:order":function(){return"Order is required!"},"FORM:ERROR:operation":function(){return"Operation is required!"},"FORM:ERROR:startedAt":function(){return"Started at must be between the shift's time boundries!"},"FORM:ERROR:finishedAt":function(){return"Finished at must be between the shift's time boundries!"},"FORM:ERROR:times":function(){return"Finished at must be after Started at!"},"FORM:ERROR:INVALID_CHANGES":function(){return"Cannot edit the order: no valid changes were detected :("},"FORM:ERROR:INPUT":function(){return"Invalid input data!"},"FORM:ERROR:OVERLAPPING_ORDERS":function(){return"Order overlaps with other orders!"},"FORM:ERROR:NOT_EDITABLE":function(){return"Order isn't finished yet!"},"filter:orderId":function(){return"Order no/12NC"},"filter:operationNo":function(){return"Oper. no"},"filter:submit":function(){return"Filter orders"},"filter:placeholder:type":function(){return"Any type"},"filter:placeholder:prodLine":function(){return"Any production line"
},"filter:placeholder:orderId":function(){return"Any order"},"filter:placeholder:operationNo":function(){return"0000"},"PROPERTY:mrpControllers":function(){return"MRP Controller"},"PROPERTY:prodFlow":function(){return"Production flow"},"PROPERTY:prodLine":function(){return"Production line"},"PROPERTY:creator":function(){return"Creator"},"PROPERTY:date":function(){return"Date"},"PROPERTY:shift":function(){return"Shift"},"PROPERTY:prodShift":function(){return"Shift"},"PROPERTY:master":function(){return"Master"},"PROPERTY:leader":function(){return"Leader"},"PROPERTY:operator":function(){return"Operator"},"PROPERTY:operators":function(){return"Operators"},"PROPERTY:startedAt":function(){return"Started at"},"PROPERTY:finishedAt":function(){return"Finished at"},"PROPERTY:duration":function(){return"Duration"},"PROPERTY:quantityDone":function(){return"Quantity done"},"PROPERTY:quantityDoneSap":function(){return"Quantity done / as per SAP"},"PROPERTY:workerCount":function(){return"Worker count"},"PROPERTY:workerCountSap":function(){return"Worker count / as per SAP"},"PROPERTY:taktTime":function(){return"Takt Time / wg SAP"},"PROPERTY:order":function(){return"Order"},"PROPERTY:orderId":function(){return"Order"},"PROPERTY:operation":function(){return"Operation"},"PROPERTY:operationNo":function(){return"Operation"},"PROPERTY:pressWorksheet":function(){return"Worksheet"},"PROPERTY:efficiency":function(){return"Efficiency"},"unit:workerCount":function(){return"persons"},"unit:taktTime":function(){return"s"},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Order deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete order"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen order?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> order?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the order :-("},"changeRequest:delete:messageText":function(){return"You're in a change request creation mode. The <em>Order</em> will be deleted only after it has been approved by the person responsible.<br><br>Are you sure you want to create the order deletion request?"},"changeRequest:delete:formActionText":function(){return"Create deletion request"},"changeRequest:commentLabel":function(){return"Change request comment"},"changeRequest:warning:add":function(){return"You're in a change request creation mode. The new <em>Order</em> will be created only after it has been approved by the person responsible."},"changeRequest:warning:edit":function(){return"You're in a change request creation mode. The <em>Order</em> will be updated only after the change has been approved by the person responsible."},"changeRequest:msg:success:add":function(){return"Order creation request was created successfully."},"changeRequest:msg:success:edit":function(){return"Order modification request was created successfully."},"changeRequest:msg:success:delete":function(){return"Order deletion request was created successfully."},"changeRequest:msg:failure:add":function(){return"Failed to create a new order creation request :-("},"changeRequest:msg:failure:edit":function(){return"Failed to create a new order modification request :-("},"changeRequest:msg:failure:delete":function(){return"Failed to create a new order deletion request :-("}},pl:!0}}),define("app/nls/pl/prodShiftOrders",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Zlecenia"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie historii zlece≈Ñ nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie danych zlecenia nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Zlecenie <em>"+e.v(t,"label")+"</em> zosta≈Ço usuniƒôte."},"PAGE_ACTION:prodLogEntries":function(){return"Poka≈º historiƒô operacji"},"PAGE_ACTION:prodDowntimes":function(){return"Poka≈º przestoje"},"PAGE_ACTION:export":function(){return"Eksportuj zlecenia"},"PAGE_ACTION:edit":function(){return"Edytuj zlecenie"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ zlecenie"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy zlecenia produkcyjnego"},"PANEL:TITLE:orderDetails":function(){return"Szczeg√≥≈Çy zlecenia w momencie rozpoczƒôcia"},"PANEL:TITLE:losses":function(){return"Straty materia≈Çowe"},"PANEL:TITLE:downtimes":function(){return"Przestoje rozpoczƒôte w trakcie wykonywania zlecenia"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania zlecenia produkcyjnego"},"PANEL:TITLE:editForm":function(){return"Formularz edycji danych zlecenia produkcyjnego"},"filter:orderId":function(){return"Nr/12NC zlecenia"},"filter:operationNo":function(){return"Nr oper."},"filter:submit":function(){return"Filtruj historiƒô"},"filter:placeholder:type":function(){return"Dowolny typ"},"filter:placeholder:prodLine":function(){return"Dowolna linia produkcyjna"},"filter:placeholder:orderId":function(){return"Dowolne zlecenie"},"filter:placeholder:operationNo":function(){return"0000"},"FORM:ACTION:add":function(){return"Dodaj zlecenie"},"FORM:ACTION:edit":function(){return"Edytuj zlecenie"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá zlecenia :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá zlecenia :-("},"FORM:ERROR:order":function(){return"Zlecenie jest wymagane!"},"FORM:ERROR:operation":function(){return"Operacja jest wymagana!"},"FORM:ERROR:startedAt":function(){return"Czas rozpoczƒôcia musi mie≈õciƒá siƒô w ramach Zmiany produkcyjnej!"},"FORM:ERROR:finishedAt":function(){return"Czas zako≈Ñczenia musi mie≈õciƒá siƒô w ramach Zmiany produkcyjnej!"},"FORM:ERROR:times":function(){return"Czas zako≈Ñczenia musi byƒá po Czasie rozpoczƒôcia!"},"FORM:ERROR:INVALID_CHANGES":function(){return"Nie mo≈ºna zmodyfikowaƒá zlecenia: nie wykryto ≈ºadnych poprawnych zmian :("},"FORM:ERROR:INPUT":function(){return"Nieprawid≈Çowe dane wej≈õciowe!"},"FORM:ERROR:OVERLAPPING_ORDERS":function(){return"Zlecenie pokrywa siƒô z innymi zleceniami!"},"FORM:ERROR:NOT_EDITABLE":function(){return"Zlecenie jeszcze siƒô nie sko≈Ñczy≈Ço!"},"PROPERTY:mrpControllers":function(){return"Kontroler MRP"},"PROPERTY:prodFlow":function(){return"Przep≈Çyw"},"PROPERTY:prodLine":function(){return"Linia produkcyjna"},"PROPERTY:creator":function(){return"RozpoczynajƒÖcy"},"PROPERTY:date":function(){return"Data"},"PROPERTY:shift":function(){return"Zmiana"},"PROPERTY:prodShift":function(){return"Zmiana"},"PROPERTY:master":function(){return"Mistrz"},"PROPERTY:leader":function(){return"Lider"},"PROPERTY:operator":function(){return"Operator"},"PROPERTY:operators":function(){return"Operatorzy"},"PROPERTY:startedAt":function(){return"Czas rozpoczƒôcia"},"PROPERTY:finishedAt":function(){return"Czas zako≈Ñczenia"},"PROPERTY:duration":function(){return"Czas trwania"},"PROPERTY:quantityDone":function(){return"Ilo≈õƒá wykonana"},"PROPERTY:quantityDoneSap":function(){return"Ilo≈õƒá wykonana / wg SAP"},"PROPERTY:workerCount":function(){return"Ilo≈õƒá os√≥b"},"PROPERTY:workerCountSap":function(){return"Ilo≈õƒá os√≥b / wg SAP"},"PROPERTY:taktTime":function(){return"Takt Time / wg SAP"},"PROPERTY:order":function(){return"Zlecenie"},"PROPERTY:orderId":function(){return"Zlecenie"},"PROPERTY:operation":function(){return"Operacja"},"PROPERTY:operationNo":function(){return"Operacja"},"PROPERTY:pressWorksheet":function(){return"Karta pracy"},"PROPERTY:efficiency":function(){return"Wydajno≈õƒá"},"unit:workerCount":function(){return"osoby"},"unit:taktTime":function(){return"s"},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia zlecenia"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ zlecenie"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrane zlecenie?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá zlecenie <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá zlecenia :-("},"changeRequest:delete:messageText":function(){return"Jeste≈õ w trybie tworzenia ≈ºƒÖdania zmiany danych produkcyjnych. <em>Zlecenie produkcyjne</em> zostanie usuniƒôte dopiero po zaakceptowaniu operacji przez osobƒô odpowiedzialnƒÖ.<br><br>Czy na pewno chcesz utworzyƒá ≈ºƒÖdanie usuniƒôcia wybranego zlecenia produkcyjnego?"},"changeRequest:delete:formActionText":function(){return"Utw√≥rz ≈ºƒÖdanie usuniƒôcia"},"changeRequest:commentLabel":function(){return"Komentarz do ≈ºƒÖdania zmiany"},"changeRequest:warning:add":function(){return"Jeste≈õ w trybie tworzenia ≈ºƒÖdania zmiany danych produkcyjnych. Nowe <em>zlecenie produkcyjne</em> zostanie utworzone dopiero po zaakceptowaniu go przez osobƒô odpowiedzialnƒÖ."},"changeRequest:warning:edit":function(){return"Jeste≈õ w trybie tworzenia ≈ºƒÖdania zmiany danych produkcyjnych. <em>Zlecenie produkcyjne</em> zostanie zaktualizowane dopiero po zaakceptowaniu dokonanych zmian przez osobƒô odpowiedzialnƒÖ."},"changeRequest:msg:success:add":function(){return"≈ªƒÖdanie dodania nowego zlecenia produkcyjnego zosta≈Ço utworzone."},"changeRequest:msg:success:edit":function(){return"≈ªƒÖdanie edycji zlecenia produkcyjnego zosta≈Ço utworzone."},"changeRequest:msg:success:delete":function(){return"≈ªƒÖdanie usuniƒôcia zlecenia produkcyjnego zosta≈Ço utworzone."},"changeRequest:msg:failure:add":function(){return"Nie uda≈Ço siƒô stworzyƒá ≈ºƒÖdania dodania nowego zlecenia produkcyjnego :-("},"changeRequest:msg:failure:edit":function(){return"Nie uda≈Ço siƒô stworzyƒá ≈ºƒÖdania edycji zlecenia produkcyjnego :-("},"changeRequest:msg:failure:delete":function(){return"Nie uda≈Ço siƒô stworzyƒá ≈ºƒÖdania usuniƒôcia zlecenia produkcyjnego :-("}}}),define("app/prodShiftOrders/routes",["../router","../viewport","../user","../prodChangeRequests/util/createShowDeleteFormPage","./ProdShiftOrder","./pages/ProdShiftOrderListPage","i18n!app/nls/prodShiftOrders"],function(t,e,n,r,i,o){"use strict";var s=n.auth("LOCAL","PROD_DATA:VIEW"),a=n.auth("PROD_DATA:MANAGE","PROD_DATA:CHANGES:REQUEST");t.map("/prodShiftOrders",s,function(t){e.showPage(new o({rql:t.rql}))}),t.map("/prodShiftOrders/:id",s,function(t){e.loadPage("app/prodShiftOrders/pages/ProdShiftOrderDetailsPage",function(e){return new e({modelId:t.params.id})})}),t.map("/prodShiftOrders/:id;edit",a,function(t){e.loadPage(["app/prodShiftOrders/pages/EditProdShiftOrderFormPage"],function(e){return new e({model:new i({_id:t.params.id})})})}),t.map("/prodShiftOrders/:id;delete",a,r(i))}),define("app/prodShifts/ProdShift",["underscore","jquery","../i18n","../user","../time","../socket","../core/Model","../core/util/getShiftStartInfo","../data/downtimeReasons","../data/subdivisions","../data/workCenters","../data/prodFlows","../data/prodLines","../data/prodLog","../prodDowntimes/ProdDowntime","../prodDowntimes/ProdDowntimeCollection","../prodShiftOrders/ProdShiftOrder","../prodShiftOrders/ProdShiftOrderCollection","app/core/templates/userInfo"],function(t,e,n,r,i,o,s,a,u,c,l,p,d,h,f,m,_,g,v){"use strict";return s.extend({urlRoot:"/prodShifts",clientUrlRoot:"#prodShifts",topicPrefix:"prodShifts",privilegePrefix:"PROD_DATA",nlsDomain:"prodShifts",defaults:function(){return{division:null,subdivision:null,mrpControllers:null,prodFlow:null,workCenter:null,prodLine:null,date:null,shift:null,state:null,quantitiesDone:[{planned:0,actual:0},{planned:0,actual:0},{planned:0,actual:0},{planned:0,actual:0},{planned:0,actual:0},{planned:0,actual:0},{planned:0,actual:0},{planned:0,actual:0}],creator:null,createdAt:null,master:null,leader:null,operator:null,operators:null}},initialize:function(t,e){e&&e.production&&(this.shiftChangeTimer=null,this.prodLine=d.get(this.get("prodLine")),this.prodShiftOrder=new _,this.prodDowntimes=new m(null,{paginate:!1,rqlQuery:"sort(-startedAt)&limit(8)&prodLine="+encodeURIComponent(this.prodLine.id)}))},serialize:function(t){var e=this.toJSON();if(e.createdAt=i.format(e.createdAt,"YYYY-MM-DD HH:mm:ss"),e.creator=v({userInfo:e.creator}),e.date=i.format(e.date,"YYYY-MM-DD"),e.shift=e.shift?n("core","SHIFT:"+e.shift):"?",t.orgUnits){var r=c.get(e.subdivision),o=p.get(e.prodFlow);e.subdivision=r?r.getLabel():"?",e.prodFlow=o?o.getLabel():"?",e.mrpControllers=Array.isArray(e.mrpControllers)&&e.mrpControllers.length?e.mrpControllers.join("; "):"?"}return t.personnel&&(e.master=v({userInfo:e.master}),e.leader=v({userInfo:e.leader}),e.operator=v({userInfo:e.operator})),e},startShiftChangeMonitor:function(){this.stopShiftChangeMonitor(),this.shiftChangeTimer=setTimeout(function(t){t.shiftChangeTimer=null,t.changeShift()},1e3,this)},stopShiftChangeMonitor:function(){null!==this.shiftChangeTimer&&(clearTimeout(this.shiftChangeTimer),this.shiftChangeTimer=null)},readLocalData:function(e){if(!this.isLocked()){var n=null;try{n=this.constructor.parse(e?e:JSON.parse(localStorage.getItem(this.getDataStorageKey()))),this.prodShiftOrder.clear(),n.prodShiftOrder&&this.prodShiftOrder.set(_.parse(n.prodShiftOrder)),this.prodDowntimes.reset((n.prodDowntimes||[]).map(f.parse)),delete n.prodShiftOrder,delete n.prodDowntimes}catch(r){}t.isEmpty(n)||(n.state=this.prodDowntimes.findFirstUnfinished()?"downtime":this.prodShiftOrder.id?"working":"idle",this.set(n)),this.changeShift()}},saveLocalData:function(){if(!this.isLocked()){var t=this.toJSON();delete t.division,delete t.subdivision,delete t.mrpControllers,delete t.prodFlow,delete t.workCenter,delete t.prodLine,t.prodShiftOrder=this.prodShiftOrder.toJSON(),t.prodDowntimes=this.prodDowntimes.toJSON(),localStorage.setItem(this.getDataStorageKey(),JSON.stringify(t))}},changeShift:function(){var t=this.getCurrentShiftMoment().toDate(),e=this.get("date");return e&&t.getTime()<=e.getTime()?this.startShiftChangeMonitor():o.isConnected()?this.startNewShiftIfNecessary(t):void this.startNewShift(t)},startNewShiftIfNecessary:function(t){var e=this;this.findExistingShift(t,function(n){n?e.readLocalData(n):e.startNewShift(t)})},findExistingShift:function(t,n){var r=this,i=e.ajax({url:"/prodShifts?prodLine="+this.get("prodLine")+"&date="+t.getTime()});i.fail(function(){r.startNewShift(t)}),i.done(function(o){if(!o||!o.totalCount||!Array.isArray(o.collection))return r.startNewShift(t);var s=o.collection[0],a=e.ajax({url:"/prodShiftOrders?prodShift="+s._id+"&finishedAt=null&sort(-startedAt)"}),u=e.ajax({url:"/prodDowntimes?prodLine="+s.prodLine+"&sort(-startedAt)&limit(8)"});i=e.when(a,u),i.fail(function(){r.startNewShift(t)}),i.done(function(t,e){var r=t[0].collection,i=e[0].collection;s.prodShiftOrder=r&&r[0]?r[0]:null,s.prodDowntimes=Array.isArray(i)?i:[],n(s)})})},startNewShift:function(t){var e=this.id||null;this.finishDowntime(),this.finishOrder(),this.prodShiftOrder.onShiftChanged(),this.set({date:t,shift:this.getCurrentShift(),state:"idle",quantitiesDone:[{planned:0,actual:0},{planned:0,actual:0},{planned:0,actual:0},{planned:0,actual:0},{planned:0,actual:0},{planned:0,actual:0},{planned:0,actual:0},{planned:0,actual:0}],creator:r.getInfo(),createdAt:new Date,master:null,leader:null,operator:null,operators:null}),this.set("_id",h.generateId(this.get("createdAt"),this.prodLine.id)),h.record(this,"changeShift",{finishedProdShiftId:e,startedProdShift:this.toJSON()}),this.startShiftChangeMonitor()},changeMaster:function(t){this.set("master",t),this.onPersonnelChanged("master"),h.record(this,"changeMaster",t)},changeLeader:function(t){this.set("leader",t),this.onPersonnelChanged("leader"),h.record(this,"changeLeader",t)},changeOperator:function(t){this.set("operator",t),this.onPersonnelChanged("operator"),h.record(this,"changeOperator",t)},onPersonnelChanged:function(t){var e=this.get(t);this.prodShiftOrder.id&&this.prodShiftOrder.set(t,e);var n=this.prodDowntimes.findFirstUnfinished();n&&n.set(t,e),"operator"===t&&"assembly"===this.getSubdivisionType()&&(this.set("operators",e?[e]:null),this.onPersonnelChanged("operators"))},changeCurrentQuantitiesDone:function(t){this.changeQuantitiesDone(this.getCurrentQuantityDoneHourIndex(),t)},changeQuantitiesDone:function(t,e,n){("number"!=typeof e||isNaN(e))&&(e=0);var r=this.get("quantitiesDone");if(!r[t])throw new Error("Invalid hour: "+t);r[t].actual!==e&&(r[t].actual=e,this.trigger("change:quantitiesDone",this,r,n||{}),h.record(this,"changeQuantitiesDone",{hour:t,newValue:e}))},changeOrder:function(t,e){this.finishOrder(),this.set("state","working");var n=this.prodShiftOrder.get("orderId");this.prodShiftOrder.onOrderChanged(this,t,e),h.record(this,"changeOrder",this.prodShiftOrder.toJSON()),n!==this.prodShiftOrder.get("orderId")&&this.autoStartDowntime()},correctOrder:function(t,e){if(!this.hasOrder())throw new Error("Cannot correct the order: no order is started!");var n=this.prodShiftOrder.onOrderCorrected(this,t,e);n&&h.record(this,"correctOrder",n)},continueOrder:function(){if(this.hasOrder())throw new Error("Cannot continue the order: an order is already started!");if(!this.prodShiftOrder.hasOrderData())throw new Error("Cannot continue the order: no order data!");this.set("state","working"),this.prodShiftOrder.onOrderContinued(this),h.record(this,"changeOrder",this.prodShiftOrder.toJSON())},changeQuantityDone:function(t){if(!this.hasOrder())throw new Error("Cannot change the quantity done: no prod shift order!");("number"!=typeof t||isNaN(t))&&(t=0),t!==this.prodShiftOrder.get("quantityDone")&&(this.prodShiftOrder.set("quantityDone",t),h.record(this,"changeQuantityDone",{newValue:t}))},changeWorkerCount:function(t){if(!this.hasOrder())throw new Error("Cannot change the worker count: no prod shift order!");("number"!=typeof t||isNaN(t))&&(t=0),t!==this.prodShiftOrder.get("workerCount")&&(this.prodShiftOrder.set("workerCount",t),h.record(this,"changeWorkerCount",{newValue:t}))},endDowntime:function(){this.hasOrder()?this.set("state","working"):this.set("state","idle"),this.finishDowntime()||this.saveLocalData()},endWork:function(){this.finishDowntime(),this.finishOrder(),this.set("state","idle"),this.prodShiftOrder.onWorkEnded(),h.record(this,"endWork",{})},startDowntime:function(t){var e=this.prodDowntimes.addFromInfo(this,t);this.set("state","downtime"),h.record(this,"startDowntime",e.toJSON())},finishOrder:function(){var t=this.prodShiftOrder.finish();t&&h.record(this,"finishOrder",t)},finishDowntime:function(){var t=this.prodDowntimes.finish();return t&&h.record(this,"finishDowntime",t),!!t},editDowntime:function(t,e){t.set(e),e=t.changedAttributes(),e&&(e._id=t.id,h.record(this,"editDowntime",e))},hasOrder:function(){return!!this.prodShiftOrder.id},getLabel:function(){var t=this.get("prodLine"),e=this.get("date"),r=this.get("shift");return e&&r&&(t+=": "+i.format(this.get("date"),"YYYY-MM-DD"),t+=", "+n("core","SHIFT:"+this.get("shift"))),t},getCurrentTime:function(){return i.getMoment().format("YYYY-MM-DD HH:mm:ss")},getCurrentShift:function(){var t=i.getMoment().hour();return t>=6&&14>t?1:t>=14&&22>t?2:3},getCurrentShiftMoment:function(){return a(Date.now()).moment},getTimeToNextShift:function(){return this.getCurrentShiftMoment().add(8,"hours").diff(i.getMoment())},getCurrentQuantityDoneHourIndex:function(){var t=i.getMoment().hours();return t>=6&&14>t?t-6:t>=14&&22>t?t-14:22===t?0:23===t?1:t+2},getCurrentQuantityDoneHourRange:function(){var t=i.getMoment().minutes(0).seconds(0),e=t.format("HH:mm:ss"),n=t.minutes(59).seconds(59).format("HH:mm:ss");return e+"-"+n},getQuantityDoneInCurrentHour:function(){var t=this.get("quantitiesDone");if(!Array.isArray(t))return 0;var e=this.getCurrentQuantityDoneHourIndex();return e>=t.length?0:t[e].actual},getOrderIdType:function(){return"press"===this.getSubdivisionType()?"nc12":"no"},isIdle:function(){return"idle"===this.get("state")},isDowntime:function(){return"downtime"===this.get("state")},isWorking:function(){return"working"===this.get("state")},getMaxQuantitiesDone:function(){return 150},getSubdivisionType:function(){var t=c.get(this.get("subdivision"));return t?t.get("type"):null},getDowntimeReasons:function(){return u.findBySubdivisionType(this.getSubdivisionType())},getBreakReason:function(){return u.findFirstBreakIdBySubdivisionType(this.getSubdivisionType())},getDefaultAor:function(){var t=this.prodLine.getSubdivision();return t?t.get("aor"):null},hasEnded:function(){var t=i.getMoment(this.get("date")).valueOf(),e=a(new Date).moment.valueOf();return e>t},updatePlannedQuantities:function(t){if(Array.isArray(t)&&8===t.length&&Array.isArray(this.attributes.quantitiesDone)){for(var e=0;8>e;++e)this.attributes.quantitiesDone[e].planned=t[e];this.saveLocalData(),this.trigger("change:quantitiesDone",this,this.attributes.quantitiesDone,{})}},isLocked:function(){return!h.isEnabled()||null===this.getSecretKey()},getSecretKey:function(){var t=localStorage.getItem(this.getSecretKeyStorageKey());return"string"==typeof t?t:null},setSecretKey:function(t,e){null===t?(localStorage.removeItem(this.getSecretKeyStorageKey()),localStorage.removeItem(this.getDataStorageKey()),this.prodShiftOrder.clear(),this.prodDowntimes.reset(),this.stopShiftChangeMonitor(),this.set({date:null,shift:null,state:null,quantitiesDone:null,creator:null,createdAt:null,master:null,leader:null,operator:null,operators:null}),this.trigger("locked")):(localStorage.setItem(this.getSecretKeyStorageKey(),t),this.trigger("unlocked"),this.readLocalData(e))},getSecretKeyStorageKey:function(){return"PRODUCTION:SECRET_KEY:"+this.prodLine.id},getDataStorageKey:function(){return"PRODUCTION:DATA:"+this.prodLine.id},autoStartDowntime:function(){var t=this.getDefaultAor();if(t){var e=c.get(this.get("subdivision"));if(e){var n=u.get(e.get("autoDowntime"));n&&this.startDowntime({aor:t,reason:n.id,reasonComment:""})}}}},{STATE:{IDLE:"idle",WORKING:"working",DOWNTIME:"downtime"},parse:function(t){return"string"==typeof t.date&&(t.date=new Date(t.date)),t}})}),define("app/prodShifts/ProdShiftCollection",["../data/prodLines","../core/Collection","../core/util/matchesProdLine","../core/util/matchesEquals","./ProdShift"],function(t,e,n,r,i){"use strict";return e.extend({model:i,rqlQuery:function(t){return t.Query.fromObject({fields:{mrpControllers:1,prodFlow:1,prodLine:1,date:1,shift:1,createdAt:1,creator:1},sort:{createdAt:-1},limit:15,selector:{name:"and",args:[]}})},hasOrMatches:function(t){return this.get(t._id)?!0:n(this.rqlQuery,t.prodLine)&&r(this.rqlQuery,"shift",t.shift)}})}),define("app/core/pages/FilteredListPage",["app/i18n","../util/bindLoadingMessage","../util/pageActions","../View","../views/ListView","./createPageBreadcrumbs","app/core/templates/listPage"],function(t,e,n,r,i,o,s){"use strict";return r.extend({template:s,layoutName:"page",baseBreadcrumb:!1,breadcrumbs:function(){return o(this)},actions:function(){return[n.add(this.collection||this.model)]},initialize:function(){this.defineModels(),this.defineViews(),this.setView(".filter-container",this.filterView),this.setView(".list-container",this.listView)},defineModels:function(){this[this.collection?"collection":"model"]=e(this.collection||this.model,this)},defineViews:function(){this.listView=this.createListView(),this.filterView=this.createFilterView(),this.listenTo(this.filterView,"filterChanged",this.onFilterChanged)},createListView:function(){var t=this.ListView||this.options.ListView||i;return new t({collection:this.collection,model:this.model})},createFilterView:function(){var t=this.FilterView||this.options.FilterView;return new t({model:{rqlQuery:(this.collection||this.model).rqlQuery}})},load:function(t){return t((this.collection||this.model).fetch({reset:!0}))},onFilterChanged:function(t){(this.collection||this.model).rqlQuery=t,this.refreshCollection()},refreshCollection:function(){this.listView.refreshCollectionNow(),this.updateClientUrl()},updateClientUrl:function(){var t=this.collection||this.model;this.broker.publish("router.navigate",{url:t.genClientUrl()+"?"+t.rqlQuery,trigger:!1,replace:!0})}})}),define("app/prodShifts/views/ProdShiftListView",["app/core/views/ListView","app/data/prodLines","app/data/views/renderOrgUnitPath"],function(t,e,n){"use strict";return t.extend({className:"prodShifts-list is-clickable",remoteTopics:{"prodShifts.created.*":"refreshIfMatches","prodShifts.updated.*":"refreshIfMatches","prodShifts.deleted.*":"refreshIfMatches"},columns:[{id:"mrpControllers",className:"is-min"},{id:"prodFlow",className:"is-min"},{id:"prodLine",className:"is-min"},{id:"date",className:"is-min"},{id:"shift",className:"is-min"},{id:"createdAt",className:"is-min"},"creator"],serializeRow:function(t){return t.serialize({orgUnits:!0})},serializeActions:function(){var e=this.collection;return function(n){return[t.actions.viewDetails(e.get(n._id))]}},afterRender:function(){t.prototype.afterRender.call(this);var r=this;this.$('.list-item > td[data-id="prodLine"]').popover({container:this.el,trigger:"hover",placement:"auto right",html:!0,content:function(){return n(e.get(r.$(this).text().trim()),!1,!1).split(" \\ ").join("<br>\\ ")}})},refreshIfMatches:function(t){this.collection.hasOrMatches(t)&&this.refreshCollection()}})}),define("app/prodShifts/templates/filter",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="well filter-form">\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-from">'),__output.push(t("core","filter:date:from")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-from" class="form-control" name="from" type="date" placeholder="YYYY-MM-DD">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-to">'),__output.push(t("core","filter:date:to")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-to" class="form-control" name="to" type="date" placeholder="YYYY-MM-DD">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-shift-0">'),__output.push(t("prodShifts","PROPERTY:shift")),__output.push('</label>\n    <div class="filter-radio-group">\n      '),[0,1,2,3].forEach(function(e){__output.push('\n      <label class="radio-inline">\n        <input id="'),__output.push(idPrefix),__output.push("-shift-"),__output.push(e),__output.push('" name="shift" type="radio" value="'),__output.push(e),__output.push('">\n        '),__output.push(t("core","SHIFT:"+e)),__output.push("\n      </label>\n      ")}),__output.push('\n    </div>\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-prodLine">'),__output.push(t("prodShifts","PROPERTY:prodLine")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-prodLine" name="prodLine" type="text" data-placeholder="'),__output.push(t("prodShifts","filter:placeholder:prodLine")),__output.push('">\n  </div>\n  '),__output.push(renderLimit()),__output.push('\n  <div class="form-group filter-actions">\n    <button type="submit" class="btn btn-default"><i class="fa fa-filter"></i><span>'),__output.push(escape(t("prodShifts","filter:submit"))),__output.push("</span></button>\n  </div>\n</form>\n");return __output.join("")}}),define("app/prodShifts/views/ProdShiftFilterView",["app/user","app/data/prodLines","app/core/views/FilterView","app/core/util/fixTimeRange","app/prodShifts/templates/filter"],function(t,e,n,r,i){"use strict";return n.extend({template:i,defaultFormData:{createdAt:"",prodLine:null,shift:0},termToForm:{date:function(t,e,n){r.toFormData(n,e,"date")},prodLine:function(t,e,n){n[t]=e.args[1]},shift:"prodLine"},afterRender:function(){n.prototype.afterRender.call(this),this.$id("prodLine").select2({width:"275px",allowClear:!t.getDivision(),data:this.getApplicableProdLines()})},getApplicableProdLines:function(){return e.getForCurrentUser().map(function(t){return{id:t.id,text:t.getLabel()}})},serializeFormToQuery:function(t){var e=r.fromView(this),n=this.$id("prodLine").val(),i=parseInt(this.$("input[name=shift]:checked").val(),10);n&&n.length&&t.push({name:"eq",args:["prodLine",n]}),i&&t.push({name:"eq",args:["shift",i]}),e.from&&t.push({name:"ge",args:["date",e.from]}),e.to&&t.push({name:"le",args:["date",e.to]})}})}),define("app/prodShifts/pages/ProdShiftListPage",["app/user","app/core/util/pageActions","app/core/pages/FilteredListPage","../views/ProdShiftListView","../views/ProdShiftFilterView"],function(t,e,n,r,i){"use strict";return n.extend({FilterView:i,ListView:r,actions:function(n){return[e["export"](n,this,this.collection),e.add(this.collection,t.isAllowedTo.bind(t,"PROD_DATA:MANAGE","PROD_DATA:CHANGES:REQUEST"))]}})}),define("app/nls/prodShifts",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Shifts"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the shifts :-("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the shift :-("},"MSG:DELETED":function(t){return"Shift <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:prodLogEntries":function(){return"Show operation log"},"PAGE_ACTION:export":function(){return"Export shifts"},"PAGE_ACTION:add":function(){return"Add shift"},"PAGE_ACTION:edit":function(){return"Edit shift"},"PAGE_ACTION:delete":function(){return"Delete shift"},"PANEL:TITLE:details":function(){return"Shift's details"},"PANEL:TITLE:addForm":function(){return"Add shift form"},"PANEL:TITLE:editForm":function(){return"Edit shift form"},"filter:submit":function(){return"Filter shifts"},"filter:placeholder:prodLine":function(){return"Any production line"},"PROPERTY:mrpControllers":function(){return"MRP Controller"},"PROPERTY:prodFlow":function(){return"Production flow"},"PROPERTY:prodLine":function(){return"Production line"},"PROPERTY:type":function(){return"Type"},"PROPERTY:createdAt":function(){return"Created at"},"PROPERTY:creator":function(){return"Creator"},"PROPERTY:date":function(){return"Date"},"PROPERTY:shift":function(){return"Shift"},"PROPERTY:master":function(){return"Master"},"PROPERTY:leader":function(){return"Leader"},"PROPERTY:operator":function(){return"Operator"},"PROPERTY:operators":function(){return"Operators"},"PROPERTY:quantitiesDone":function(){return"Quantities done"},"PROPERTY:quantitiesDone:hour":function(){return"Hour"},"PROPERTY:quantitiesDone:planned":function(){return"Planned"},"PROPERTY:quantitiesDone:actual":function(){return"Actual"},"PROPERTY:totalQuantityDone":function(){return"Quantity done"},"FORM:ACTION:add":function(){return"Add shift"},"FORM:ACTION:edit":function(){return"Edit shift"},"FORM:ERROR:addFailure":function(){return"Failed to add the shift :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the shift :-("},"FORM:ERROR:INVALID_CHANGES":function(){return"Cannot edit the shift: no valid changes were detected :-("
},"FORM:ERROR:INPUT":function(){return"Invalid input data!"},"FORM:ERROR:NOT_EDITABLE":function(){return"The specified shift didn't end yet!"},"FORM:ERROR:EXISTING":function(){return"The specified shift already exists!"},totalQuantityDone:function(t){return e.v(t,"actual")+" of "+e.v(t,"planned")},"timeline:title":function(){return"Timeline"},"timeline:action:addOrder":function(){return"Add order"},"timeline:action:addDowntime":function(){return"Add downtime"},"timeline:action:editOrder":function(){return"Edit order"},"timeline:action:editDowntime":function(){return"Edit downtime"},"timeline:action:deleteOrder":function(){return"Delete order"},"timeline:action:deleteDowntime":function(){return"Delete downtime"},"timeline:popover:idle":function(){return"Idle"},"timeline:popover:working":function(){return"Order"},"timeline:popover:downtime":function(){return"Downtime"},"timeline:popover:startedAt":function(){return"Started at"},"timeline:popover:finishedAt":function(){return"Finished at"},"timeline:popover:duration":function(){return"Duration"},"timeline:popover:order":function(){return"Order"},"timeline:popover:operation":function(){return"Operation"},"timeline:popover:reason":function(){return"Reason"},"timeline:popover:aor":function(){return"AOR"},"timeline:popover:workerCount":function(){return"Worker count"},"timeline:popover:quantityDone":function(){return"Quantiy done"},"timeline:popover:efficiency":function(){return"Efficiency"},"charts:quantitiesDone:title":function(){return"Quantities done in specific hours"},"charts:quantitiesDone:unit":function(){return" items"},"charts:quantitiesDone:series:planned":function(){return"Planned"},"charts:quantitiesDone:series:actual":function(){return"Actual"},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Shift deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete shift"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen shift?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> shift?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the shift :-("},"changeRequest:delete:messageText":function(){return"You're in a change request creation mode. The <em>Production shift</em> will be deleted only after it has been approved by the person responsible.<br><br>Are you sure you want to create the shift deletion request?"},"changeRequest:delete:formActionText":function(){return"Create deletion request"},"changeRequest:commentLabel":function(){return"Change request comment"},"changeRequest:warning:add":function(){return"You're in a change request creation mode. The new <em>Production shift</em> will be created only after it has been approved by the person responsible."},"changeRequest:warning:edit":function(){return"You're in a change request creation mode. The new <em>Production shift</em> will be updated only after it has been approved by the person responsible."},"changeRequest:msg:success:add":function(){return"Production shift creation request was created successfully."},"changeRequest:msg:success:edit":function(){return"Production shift modification request was created successfully."},"changeRequest:msg:success:delete":function(){return"Production shift deletion request was created successfully."},"changeRequest:msg:failure:add":function(){return"Failed to create a new production shift creation request :-("},"changeRequest:msg:failure:edit":function(){return"Failed to create a new production shift modification request :-("},"changeRequest:msg:failure:delete":function(){return"Failed to create a new production shift deletion request :-("}},pl:!0}}),define("app/nls/pl/prodShifts",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Zmiany"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie historii zmian nie powiod≈Ço siƒô :-("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie danych zmiany nie powiod≈Ço siƒô :-("},"MSG:DELETED":function(t){return"Zmiana <em>"+e.v(t,"label")+"</em> zosta≈Ça usuniƒôta."},"PAGE_ACTION:prodLogEntries":function(){return"Poka≈º historiƒô operacji"},"PAGE_ACTION:export":function(){return"Eksportuj zmiany"},"PAGE_ACTION:add":function(){return"Dodaj zmianƒô"},"PAGE_ACTION:edit":function(){return"Edytuj zmianƒô"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ zmianƒô"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy zmiany"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania zmiany produkcyjnej"},"PANEL:TITLE:editForm":function(){return"Formularz edycji danych zmiany produkcyjnej"},"filter:submit":function(){return"Filtruj historiƒô"},"filter:placeholder:prodLine":function(){return"Dowolna linia produkcyjna"},"PROPERTY:mrpControllers":function(){return"Kontroler MRP"},"PROPERTY:prodFlow":function(){return"Przep≈Çyw"},"PROPERTY:prodLine":function(){return"Linia produkcyjna"},"PROPERTY:type":function(){return"Typ"},"PROPERTY:createdAt":function(){return"Czas rozpoczƒôcia"},"PROPERTY:creator":function(){return"RozpoczynajƒÖcy"},"PROPERTY:date":function(){return"Data"},"PROPERTY:shift":function(){return"Zmiana"},"PROPERTY:master":function(){return"Mistrz"},"PROPERTY:leader":function(){return"Lider"},"PROPERTY:operator":function(){return"Operator"},"PROPERTY:operators":function(){return"Operatorzy"},"PROPERTY:quantitiesDone":function(){return"Wykonane ilo≈õci"},"PROPERTY:quantitiesDone:hour":function(){return"Godz."},"PROPERTY:quantitiesDone:planned":function(){return"Plan"},"PROPERTY:quantitiesDone:actual":function(){return"Wykonane"},"PROPERTY:totalQuantityDone":function(){return"Wykonana ilo≈õƒá"},"FORM:ACTION:add":function(){return"Dodaj zmianƒô"},"FORM:ACTION:edit":function(){return"Edytuj zmianƒô"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá zmiany :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá zmiany :-("},"FORM:ERROR:INVALID_CHANGES":function(){return"Nie mo≈ºna zmodyfikowaƒá zmiany produkcyjnej: nie wykryto ≈ºadnych poprawnych zmian :-("},"FORM:ERROR:INPUT":function(){return"Nieprawid≈Çowe dane wej≈õciowe!"},"FORM:ERROR:NOT_EDITABLE":function(){return"Wybrana zmiana jeszcze siƒô nie sko≈Ñczy≈Ça!"},"FORM:ERROR:EXISTING":function(){return"Wybrana zmiana ju≈º istnieje!"},totalQuantityDone:function(t){return e.v(t,"actual")+" z "+e.v(t,"planned")},"timeline:title":function(){return"O≈õ czasu"},"timeline:action:addOrder":function(){return"Dodaj zlecenie"},"timeline:action:addDowntime":function(){return"Dodaj przest√≥j"},"timeline:action:editOrder":function(){return"Edytuj zlecenie"},"timeline:action:editDowntime":function(){return"Edytuj przest√≥j"},"timeline:action:deleteOrder":function(){return"Usu≈Ñ zlecenie"},"timeline:action:deleteDowntime":function(){return"Usu≈Ñ przest√≥j"},"timeline:popover:idle":function(){return"Bezczynno≈õƒá"},"timeline:popover:working":function(){return"Zlecenie"},"timeline:popover:downtime":function(){return"Przest√≥j"},"timeline:popover:startedAt":function(){return"Czas rozpoczƒôcia"},"timeline:popover:finishedAt":function(){return"Czas zako≈Ñczenia"},"timeline:popover:duration":function(){return"Czas trwania"},"timeline:popover:order":function(){return"Zlecenie"},"timeline:popover:operation":function(){return"Operacja"},"timeline:popover:reason":function(){return"Pow√≥d"},"timeline:popover:aor":function(){return"Obszar"},"timeline:popover:workerCount":function(){return"Ilo≈õƒá os√≥b"},"timeline:popover:quantityDone":function(){return"Ilo≈õƒá wykonana"},"timeline:popover:efficiency":function(){return"Wydajno≈õƒá"},"charts:quantitiesDone:title":function(){return"Wykonane ilo≈õci w przedzia≈Çach godzinowych"},"charts:quantitiesDone:unit":function(){return" szt."},"charts:quantitiesDone:series:planned":function(){return"Plan"},"charts:quantitiesDone:series:actual":function(){return"Wykonane"},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia zmiany"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ zmianƒô"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybranƒÖ zmianƒô?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá zmianƒô <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá zmiany :-("},"changeRequest:delete:messageText":function(){return"Jeste≈õ w trybie tworzenia ≈ºƒÖdania zmiany danych produkcyjnych. <em>Zmiana produkcyjna</em> zostanie usuniƒôta dopiero po zaakceptowaniu operacji przez osobƒô odpowiedzialnƒÖ.<br><br>Czy na pewno chcesz utworzyƒá ≈ºƒÖdanie usuniƒôcia wybranej zmiany produkcyjnej?"},"changeRequest:delete:formActionText":function(){return"Utw√≥rz ≈ºƒÖdanie usuniƒôcia"},"changeRequest:commentLabel":function(){return"Komentarz do ≈ºƒÖdania zmiany"},"changeRequest:warning:add":function(){return"Jeste≈õ w trybie tworzenia ≈ºƒÖdania zmiany danych produkcyjnych. Nowa <em>zmiana produkcyjna</em> zostanie utworzona dopiero po zaakceptowaniu jej przez osobƒô odpowiedzialnƒÖ."},"changeRequest:warning:edit":function(){return"Jeste≈õ w trybie tworzenia ≈ºƒÖdania zmiany danych produkcyjnych. <em>Zmiana produkcyjna</em> zostanie zaktualizowana dopiero po zaakceptowaniu dokonanych zmian przez osobƒô odpowiedzialnƒÖ."},"changeRequest:msg:success:add":function(){return"≈ªƒÖdanie dodania nowej zmiany produkcyjnej zosta≈Ço utworzone."},"changeRequest:msg:success:edit":function(){return"≈ªƒÖdanie edycji zmiany produkcyjnej zosta≈Ço utworzone."},"changeRequest:msg:success:delete":function(){return"≈ªƒÖdanie usuniƒôcia zmiany produkcyjnej zosta≈Ço utworzone."},"changeRequest:msg:failure:add":function(){return"Nie uda≈Ço siƒô stworzyƒá ≈ºƒÖdania dodania nowej zmiany produkcyjnej :-("},"changeRequest:msg:failure:edit":function(){return"Nie uda≈Ço siƒô stworzyƒá ≈ºƒÖdania edycji zmiany produkcyjnej :-("},"changeRequest:msg:failure:delete":function(){return"Nie uda≈Ço siƒô stworzyƒá ≈ºƒÖdania usuniƒôcia zmiany produkcyjnej :-("}}}),define("app/prodShifts/routes",["../router","../viewport","../user","../data/orgUnits","../prodChangeRequests/util/createShowDeleteFormPage","./ProdShift","./ProdShiftCollection","./pages/ProdShiftListPage","i18n!app/nls/prodShifts"],function(t,e,n,r,i,o,s,a){"use strict";var u=n.auth("LOCAL","PROD_DATA:VIEW"),c=n.auth("PROD_DATA:MANAGE","PROD_DATA:CHANGES:REQUEST");t.map("/prodShifts",u,function(t){e.showPage(new a({collection:new s(null,{rqlQuery:t.rql})}))}),t.map("/prodShifts;add",c,function(){e.loadPage(["app/prodShifts/pages/AddProdShiftFormPage"],function(t){return new t({model:new o})})}),t.map("/prodShifts/:id",u,function(t){e.loadPage(["app/prodShifts/pages/ProdShiftDetailsPage"],function(e){return new e({latest:null!==r.getByTypeAndId("prodLine",t.params.id),modelId:t.params.id})})}),t.map("/prodShifts/:id;edit",c,function(t){e.loadPage(["app/prodShifts/pages/EditProdShiftFormPage"],function(e){return new e({model:new o({_id:t.params.id})})})}),t.map("/prodShifts/:id;delete",c,i(o))}),define("app/production/templates/controls",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="production-controls">\n  <a href="#" class="fa fa-home" title="'),__output.push(t("production","controls:dashboard")),__output.push('"></a>\n  <a class="fa fa-unlock production-controls-lock" title="'),__output.push(t("production","controls:lock")),__output.push('"></a>\n  <a class="fa fa-lock production-controls-unlock" title="'),__output.push(t("production","controls:unlock")),__output.push('" accesskey="a"></a>\n  <i class="fa fa-refresh production-controls-sync" title="'),__output.push(t("production","controls:sync")),__output.push('"></i>\n</div>\n');return __output.join("")}}),define("app/production/templates/unlockDialog",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="production-'),__output.push(type),__output.push('Dialog">\n  <p class="message message-inline message-info">'),__output.push(t("production","unlockDialog:message:"+type,{prodLine:prodLine})),__output.push('</p>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-login">'),__output.push(t("production","unlockDialog:login")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-login" class="form-control" type="text" autofocus required>\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-password">'),__output.push(t("production","unlockDialog:password")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-password" class="form-control" type="password" required>\n  </div>\n  <div class="form-actions">\n    <button id="'),__output.push(idPrefix),__output.push('-submit" class="btn btn-primary" type="submit">'),__output.push(t("production","unlockDialog:"+type)),__output.push('</button>\n    <button class="btn btn-link cancel" type="button">'),__output.push(t("core","ACTION_FORM:BUTTON:cancel")),__output.push("</button>\n  </div>\n</form>\n");return __output.join("")}}),define("app/production/views/UnlockDialogView",["app/i18n","app/viewport","app/core/View","app/production/templates/unlockDialog"],function(t,e,n,r){"use strict";return n.extend({template:r,dialogClassName:"production-modal",events:{submit:function(t){t.preventDefault();var e=this.$id("submit")[0];if(!e.disabled){e.disabled=!0;var n={prodLine:this.model.prodLine.id,login:this.$id("login").val(),password:this.$id("password").val()};this.socket.emit("production.unlock",n,this.handleUnlockResponse.bind(this))}}},serialize:function(){return{idPrefix:this.idPrefix,type:"unlock",prodLine:this.model.prodLine.id}},onDialogShown:function(t){this.closeDialog=t.closeDialog.bind(t)},closeDialog:function(){},handleUnlockResponse:function(n,r){if(n)return this.$id("password").val(""),"INVALID_PASSWORD"===n.message?this.$id("password").focus():this.$id("login").val("").focus(),e.msg.show({type:"error",time:3e3,text:t.has("production","unlockDialog:error:"+n.message)?t("production","unlockDialog:error:"+n.message):t("production","unlockDialog:error:UNLOCK_FAILURE")}),this.$id("submit").prop("disabled",!1);var i=r.prodShift;i&&(i.prodShiftOrder=r.prodShiftOrder,i.prodDowntimes=r.prodDowntimes),this.model.setSecretKey(r.secretKey,i),this.closeDialog()}})}),define("app/production/views/LockDialogView",["app/i18n","app/viewport","app/core/View","app/production/templates/unlockDialog"],function(t,e,n,r){"use strict";return n.extend({template:r,dialogClassName:"production-modal",events:{submit:function(t){t.preventDefault();var e=this.$id("submit")[0];if(!e.disabled){e.disabled=!0;var n={prodLine:this.model.prodLine.id,secretKey:this.model.getSecretKey(),login:this.$id("login").val(),password:this.$id("password").val()};this.socket.emit("production.lock",n,this.handleLockResponse.bind(this))}}},serialize:function(){return{idPrefix:this.idPrefix,type:"lock",prodLine:this.model.prodLine.id}},onDialogShown:function(t){this.closeDialog=t.closeDialog.bind(t)},closeDialog:function(){},handleLockResponse:function(n){return n?(this.$id("password").val(""),"INVALID_PASSWORD"===n.message?this.$id("password").focus():this.$id("login").val("").focus(),e.msg.show({type:"error",time:3e3,text:t.has("production","unlockDialog:error:"+n.message)?t("production","unlockDialog:error:"+n.message):t("production","unlockDialog:error:LOCK_FAILURE")}),this.$id("submit").prop("disabled",!1)):(this.model.setSecretKey(null),void this.closeDialog())}})}),define("app/production/views/ProductionControlsView",["app/i18n","app/user","app/viewport","app/core/View","app/production/templates/controls","./UnlockDialogView","./LockDialogView"],function(t,e,n,r,i,o,s){"use strict";var a={"socket.connected":"#5BB75B","socket.disconnected":"#DA4F49","socket.connectFailed":"#DA4F49","socket.connecting":"#F0AD4E"};return r.extend({template:i,localTopics:{"socket.*":function(t,e){var n=a[e];n&&this.$syncControl.css("color",n)},"production.syncing":function(){this.$syncControl.addClass("fa-spin")},"production.synced":function(){this.$syncControl.removeClass("fa-spin")}},events:{"click a.production-controls-lock":"lock","click a.production-controls-unlock":"unlock","mouseover a.production-controls-lock":function(t){this.$(t.target).removeClass("fa-unlock").addClass("fa-lock")},"mouseout a.production-controls-lock":function(t){this.$(t.target).removeClass("fa-lock").addClass("fa-unlock")},"mouseover a.production-controls-unlock":function(t){this.$(t.target).removeClass("fa-lock").addClass("fa-unlock")},"mouseout a.production-controls-unlock":function(t){this.$(t.target).removeClass("fa-unlock").addClass("fa-lock")}},afterRender:function(){this.$syncControl=this.$(".production-controls-sync"),this.$syncControl.css("color",a[this.socket.isConnected()?"socket.connected":"socket.disconnected"])},unlock:function(){return this.socket.isConnected()?void(this.model.isLocked()&&n.showDialog(new o({model:this.model}),t("production","unlockDialog:title:unlock"))):n.msg.show({type:"warning",time:2e3,text:t("production","controls:msg:sync:noConnection")})},lock:function(){return this.socket.isConnected()?void(this.model.isLocked()||n.showDialog(new s({model:this.model}),t("production","unlockDialog:title:lock"))):n.msg.show({type:"warning",time:2e3,text:t("production","controls:msg:sync:noConnection")})}})}),define("app/users/util/decorateUser",["app/i18n","app/data/aors","app/data/companies","app/data/prodFunctions","app/data/divisions","app/data/subdivisions","app/data/views/renderOrgUnitPath"],function(t,e,n,r,i,o,s){"use strict";return function(a){var u=a.toJSON(),c=n.get(u.company);u.company=c?c.getLabel():t("users","NO_DATA:company"),u.aors=Array.isArray(u.aors)?u.aors.map(function(t){var n=e.get(t);return n?n.getLabel():null}).filter(function(t){return!!t}).join("; "):"",u.aors.length||(u.aors=t("users","NO_DATA:aors"));var l=r.get(u.prodFunction);if(u.prodFunction=l?l.getLabel():t("users","NO_DATA:prodFunction"),u.orgUnitType&&u.orgUnitId){var p;switch(u.orgUnitType){case"division":p=i.get(u.orgUnitId);break;case"subdivision":p=o.get(u.orgUnitId)}p&&(u.orgUnit=s(p,!1,!1))}return u.vendor&&(u.vendor.name?u.vendor=u.vendor.name+" ("+u.vendor._id+")":u.vendor._id&&(u.vendor=u.vendor._id)),u}}),define("app/users/User",["../core/Model","./util/decorateUser"],function(t,e){"use strict";return t.extend({urlRoot:"/users",clientUrlRoot:"#users",topicPrefix:"users",privilegePrefix:"USERS",nlsDomain:"users",labelAttribute:"login",defaults:{login:null,email:null,prodFunction:"unspecified",privileges:null,aors:null,company:null,kdDivision:null,personellId:null,card:null,firstName:null,lastName:null,registerDate:null,kdPosition:null,active:!0,vendor:null,gender:null},initialize:function(){Array.isArray(this.get("privileges"))||this.set("privileges",[]),Array.isArray(this.get("aors"))||this.set("aors",[])},getLabel:function(){var t=this.get("lastName")||"",e=this.get("firstName")||"";return t.length&&e.length?t+" "+e:this.get("login")},url:function(){var e=t.prototype.url.apply(this,arguments);return this.isNew()?e:e+"?populate(vendor)"},serialize:function(){return e(this)}})}),define("app/users/UserCollection",["../core/Collection","./User"],function(t,e){"use strict";return t.extend({model:e,rqlQuery:"select(personellId,lastName,firstName,login,company,orgUnitType,orgUnitId,prodFunction)&sort(+lastName,+firstName)&limit(15)"})}),define("app/production/templates/personelPicker",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="production-personelPicker">\n  '),offline&&(__output.push('\n  <p class="message message-inline message-warning">'),__output.push(t("production","personelPicker:offline:warning")),__output.push("</p>\n  ")),__output.push('\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-user">'),__output.push(escape(label)),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-user" class="form-control" type="text">\n  </div>\n  <div class="form-actions">\n    <button type="submit" class="btn btn-primary">'),__output.push(t("production","personelPicker:submit")),__output.push('</button>\n    <button type="button" class="cancel btn btn-link">'),__output.push(t("production","personelPicker:cancel")),__output.push("</button>\n  </div>\n</form>\n");return __output.join("")}}),define("app/production/views/PersonelPickerView",["app/i18n","app/viewport","app/core/View","app/users/util/setUpUserSelect2","app/production/templates/personelPicker"],function(t,e,n,r,i){"use strict";return n.extend({template:i,dialogClassName:"production-modal",localTopics:{"socket.connected":"render","socket.disconnected":"render"},events:{"keypress .select2-container":function(t){13===t.which&&(this.$el.submit(),t.preventDefault())},submit:function(t){t.preventDefault();var e=this.$(".btn-primary")[0];if(!e.disabled){e.disabled=!0;var n={id:null,label:null};if(this.socket.isConnected()){var r=this.$id("user").select2("data");r&&(n.id=r.id,n.label=r.text)}else n.label=this.$id("user").val().trim().replace(/[^0-9]+/g,"");this.trigger("userPicked",null!==n.label&&n.label.length?n:null)}}},serialize:function(){var e=!this.socket.isConnected();return{idPrefix:this.idPrefix,offline:e,label:t("production","personelPicker:"+(e?"offline":"online")+":label")}},afterRender:function(){var e=this.$id("user");this.socket.isConnected()?(r(e.removeClass("form-control"),{dropdownCssClass:"production-dropdown"}),e.select2("focus")):e.attr("placeholder",t("production","personelPicker:offline:placeholder")).focus()},onDialogShown:function(){this.$id("user").focus().select2("focus")}})}),define("app/production/templates/header",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="production-header">\n  <h1 class="production-pageHeader"></h1>\n  <div class="production-properties">\n    <div class="production-property production-property-currentTime">\n      <div class="production-property-name">'),__output.push(t("production","property:currentTime")),__output.push('</div>\n      <div class="production-property-value"></div>\n    </div>\n    <div class="production-property production-property-shift">\n      <div class="production-property-name">'),__output.push(t("production","property:shift")),__output.push('</div>\n      <div class="production-property-value"></div>\n    </div>\n    <div class="production-property production-property-orgUnit">\n      <div class="production-property-name">'),__output.push(t("production","property:orgUnit")),__output.push('</div>\n      <div class="production-property-value"></div>\n    </div>\n    <div class="production-property production-property-master">\n      <div class="production-property-name">'),__output.push(t("production","property:master")),__output.push('</div>\n      <div class="production-property-value is-editable"></div>\n    </div>\n    <div class="production-property production-property-leader">\n      <div class="production-property-name">'),__output.push(t("production","property:leader")),__output.push('</div>\n      <div class="production-property-value is-editable"></div>\n    </div>\n    <div class="production-property production-property-operator">\n      <div class="production-property-name">'),__output.push(t("production","property:operator")),__output.push('</div>\n      <div class="production-property-value is-editable"></div>\n    </div>\n  </div>\n</div>\n');return __output.join("")}}),define("app/production/views/ProductionHeaderView",["app/i18n","app/viewport","app/core/View","app/data/prodLog","app/data/views/renderOrgUnitPath","app/users/UserCollection","./PersonelPickerView","app/production/templates/header"],function(t,e,n,r,i,o,s,a){"use strict";return n.extend({template:a,localTopics:{"visibility.visible":function(){this.updateCurrentTime()},"visibility.hidden":function(){clearTimeout(this.timers.updateCurrentTime)},"divisions.synced":"updateOrgUnit","subdivisions.synced":"updateOrgUnit","mrpControllers.synced":"updateOrgUnit","prodFlows.synced":"updateOrgUnit","workCenters.synced":"updateOrgUnit","prodLines.synced":"updateOrgUnit","socket.connected":"fillPersonnelData"},events:{"click .production-property-master .btn-link":"showMasterPickerDialog","click .production-property-leader .btn-link":"showLeaderPickerDialog","click .production-property-operator .btn-link":"showOperatorPickerDialog"},initialize:function(){this.updateCurrentTime=this.updateCurrentTime.bind(this),this.listenTo(this.model.prodLine,"change:description",this.updatePageHeader),this.listenTo(this.model,"change:shift",this.updateShift),this.listenTo(this.model,"change:master",this.updateMaster),this.listenTo(this.model,"change:leader",this.updateLeader),this.listenTo(this.model,"change:operator",this.updateOperator),this.listenTo(this.model,"locked unlocked",function(){this.updateMaster(),this.updateLeader(),this.updateOperator()})},afterRender:function(){this.$currentTime=this.$property("currentTime"),this.updatePageHeader(),this.updateCurrentTime(),this.updateShift(),this.updateOrgUnit(),this.updateMaster(),this.updateLeader(),this.updateOperator(),this.socket.isConnected()&&this.fillPersonnelData()},updatePageHeader:function(){this.$(".production-pageHeader").text(this.model.prodLine.get("description")||this.model.prodLine.id)},updateCurrentTime:function(){this.$currentTime&&this.$currentTime.text(this.model.getCurrentTime()),this.scheduleCurrentTimeUpdate()},updateShift:function(){var e=this.model.get("shift");e="number"==typeof e?t("core","SHIFT:"+e):"?",this.$property("shift").text(e)},updateOrgUnit:function(){this.$property("orgUnit").text(i(this.model.prodLine.getSubdivision(),!1,!1)||"?")},updateMaster:function(){this.updatePersonnel("master")},updateLeader:function(){this.updatePersonnel("leader")},updateOperator:function(){this.updatePersonnel("operator")},updatePersonnel:function(e){var n,r=!this.model.isLocked(),i=this.model.get(e),o=i&&i.label?i.label:null;if(o){var s=o.match(/^(.*?) \(.*?\)$/);n=null===s?o:s[1].trim(),r&&(n+=' <button class="btn btn-link">'+t("production","property:"+e+":change")+"</button>")}else n=t("production","property:"+e+":noData:"+(r?"un":"")+"locked"),r&&(n='<button class="btn btn-link">'+n+"</a>");this.$property(e).html(n)},scheduleCurrentTimeUpdate:function(){null!=this.timers.updateCurrentTime&&clearTimeout(this.timers.updateCurrentTime),this.timers.updateCurrentTime=setTimeout(function(t){t.timers.updateCurrentTime=null,t.updateCurrentTime()},999,this)},$property:function(t){return this.$(".production-property-"+t+" .production-property-value")},showMasterPickerDialog:function(t){t&&(t.preventDefault(),t.target.blur()),this.showPickerDialog("master",this.model.changeMaster.bind(this.model))},showLeaderPickerDialog:function(t){t&&(t.preventDefault(),t.target.blur()),this.showPickerDialog("leader",this.model.changeLeader.bind(this.model))},showOperatorPickerDialog:function(t){t&&(t.preventDefault(),t.target.blur()),this.showPickerDialog("operator",this.model.changeOperator.bind(this.model))},showPickerDialog:function(n,r){var i=new s;this.listenTo(i,"userPicked",function(t){e.closeDialog();var i=this.model.get(n);null===i?null!==t&&r(t):(i!==t||t&&(t.id!==i.id||t.label!==i.label))&&r(t),this.$(".production-property-"+n+" .btn-link").focus()}),e.showDialog(i,t("production","personelPicker:title:"+n))},fillPersonnelData:function(){var t=[],e=[],n=this.model;["master","leader","operator"].forEach(function(r){var i=n.get(r);i&&null===i.id&&i.label.trim().length>0&&(t.push(i.label),e.push(r))}),t.length>0&&this.fillUserInfo(t,e)},fillUserInfo:function(t,e){if(r.isSyncing())return this.broker.subscribe("production.synced",this.fillPersonnelData.bind(this)).setLimit(1);var n=new o(null,{rqlQuery:{fields:{firstName:1,lastName:1,personellId:1},selector:{name:t.length>1?"in":"eq",args:["personellId",t.length>1?t:t[0]]}}}),i=this.model;this.promised(n.fetch()).then(function(){var r=0;t.forEach(function(t,r){var o=n.findWhere({personellId:t});o&&i.set(e[r],{id:o.id,label:o.get("firstName")+" "+o.get("lastName")})}),r&&i.saveLocalData()})}})}),define("app/core/views/DialogView",["underscore","../View"],function(t,e){"use strict";return e.extend({events:{"click .dialog-answer":function(e){var n=this.$(e.target).closest(".dialog-answer");if(!n.prop("disabled")){n.prop("disabled",!0);var r=n.attr("data-answer");t.isString(r)&&r.length>0&&(this.trigger("answered",r),t.isFunction(this.closeDialog)&&this.closeDialog())}}},serialize:function(){return this.model},onDialogShown:function(t){this.closeDialog=this.options.autoHide===!1?function(){}:t.closeDialog.bind(t)}})}),define("app/production/util/orderPickerHelpers",["underscore","jquery","app/viewport","app/i18n"],function(t,e,n,r){"use strict";return{createGetOrdersUrl:function(t,e){return function(n){var r=t.getOrderIdType();return e.attr("data-type",r),"/production/orders?"+r+"="+encodeURIComponent(n)}},setUpOrderSelect2:function(i,o,s,a){function u(t){return-1!==t.laborTime&&""!==t.workCenter}var c=this;i.removeClass("form-control").select2(t.extend({openOnEnter:null,allowClear:!1,minimumInputLength:6,ajax:{cache:!0,quietMillis:300,url:c.createGetOrdersUrl(s,i),results:function(t){return{results:(Array.isArray(t)?t:[]).map(function(t){return t.id=t._id,t.text=t._id+" - "+(t.name||"?"),t})}},transport:function(t){return e.ajax.apply(e,arguments).fail(function(){n.msg.show({type:"error",time:2e3,text:r("production","newOrderPicker:msg:searchFailure")}),t.success({collection:[]})})}}},a)),i.on("change",function(e){var n;n=Array.isArray(e.operations)?e.operations.filter(u):e.added&&Array.isArray(e.added.operations)?e.added.operations.filter(u):[],c.setUpOperationSelect2(o,n.map(function(t){return{id:t.no,text:t.no+" - "+t.name}}),a,!0),n.length?o.select2("val",e.selectedOperationNo||n[0].no).select2("focus"):(e.selectedOperationNo&&o.val(e.selectedOperationNo),t.defer(function(){o.focus()}))})},setUpOperationSelect2:function(n,i,o,s){return n.prev(".message-warning").remove(),s&&!i.length?(n.select2("destroy").addClass("form-control").val("").attr("title",""),void e('<p class="message message-inline message-warning"></p>').html(r("production","newOrderPicker:msg:noOperations")).insertBefore(n)):void n.removeClass("form-control").select2(t.extend({width:"100%",placeholder:r("production","newOrderPicker:online:operation:placeholder"),openOnEnter:null,allowClear:!1,minimumResultsForSearch:-1,data:i||[],shouldFocusInput:function(){return!0
}},o))},selectOrder:function(e,n){var r=n.get("orderId"),i=n.get("orderData");r&&i&&(e.select2("data",{id:r,text:r+" - "+(i.name||"?"),sameOrder:!0}),e.trigger({type:"change",operations:t.values(i.operations),selectedOperationNo:n.get("operationNo")}))},prepareOrderInfo:function(e,n){if(delete n.__v,delete n.id,delete n.text,n._id&&("no"===e.getOrderIdType()?n.no=n._id:(n.no=null,n.nc12=n._id),delete n._id),Array.isArray(n.operations)){var r={};n.operations.forEach(function(t){""!==t.workCenter&&-1!==t.laborTime&&(r[t.no]=t)}),n.operations=r}else t.isObject(n.operations)||(n.operations={})}}}),define("app/production/templates/newOrderPicker",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="production-newOrderPicker">\n  '),replacingOrder&&(__output.push('\n  <p class="message message-inline message-warning">'),__output.push(t("production","newOrderPicker:checkData:warning")),__output.push('</p>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-quantityDone">'),__output.push(t("production","newOrderPicker:quantityDone")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-quantityDone" class="form-control small" type="number" value="'),__output.push(quantityDone),__output.push('" autofocus min="0" max="'),__output.push(maxQuantityDone),__output.push('">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-workerCount">'),__output.push(t("production","newOrderPicker:workerCount")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-workerCount" class="form-control small" type="number" value="'),__output.push(workerCount),__output.push('" min="1" max="'),__output.push(maxWorkerCount),__output.push('">\n  </div>\n  <div class="modal-header">\n    <h3 class="modal-title">'),__output.push(t("production","newOrderPicker:title")),__output.push("</h3>\n  </div>\n  ")),__output.push("\n  "),correctingOrder||(__output.push("\n  "),offline?(__output.push('\n  <p class="message message-inline message-warning">'),__output.push(t("production","newOrderPicker:offline:warning:"+orderIdType)),__output.push("</p>\n  ")):(__output.push('\n  <p class="message message-inline message-info">'),__output.push(t("production","newOrderPicker:online:info:"+orderIdType)),__output.push("</p>\n  ")),__output.push("\n  ")),__output.push('\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-order">'),__output.push(t("production","newOrderPicker:order:label")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-order" class="form-control" type="text" placeholder="'),__output.push(t("production","newOrderPicker:order:placeholder:"+orderIdType)),__output.push('">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-operation">'),__output.push(t("production","newOrderPicker:operation:label")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-operation" class="form-control" type="text" placeholder="'),__output.push(t("production","newOrderPicker:offline:operation:placeholder")),__output.push('" maxlength="4" pattern="^[0-9]+$">\n  </div>\n  <div class="form-actions">\n    <button type="submit" class="btn btn-'),__output.push(correctingOrder?"primary":"success"),__output.push('">\n      '),__output.push(t("production","newOrderPicker:submit"+(replacingOrder?":replacing":correctingOrder?":correcting":""))),__output.push('\n    </button>\n    <button type="button" class="cancel btn btn-link">'),__output.push(t("production","newOrderPicker:cancel")),__output.push("</button>\n  </div>\n</form>\n");return __output.join("")}}),define("app/production/views/NewOrderPickerView",["app/i18n","app/viewport","app/core/View","../util/orderPickerHelpers","app/production/templates/newOrderPicker"],function(t,e,n,r,i){"use strict";return n.extend({template:i,dialogClassName:function(){var t="production-modal production-newOrderPickerDialog";return this.options.correctingOrder?t+=" is-correcting":this.model.hasOrder()&&(t+=" is-replacing"),t},localTopics:{"socket.connected":"render","socket.disconnected":"render"},events:{"keypress .select2-container":function(t){13===t.which&&(this.$el.submit(),t.preventDefault())},submit:function(t){t.preventDefault();var e=this.$("button[type=submit]")[0];e.disabled||(e.disabled=!0,this.socket.isConnected()?this.handleOnlinePick(e):this.handleOfflinePick(e))}},serialize:function(){return{idPrefix:this.idPrefix,offline:!this.socket.isConnected(),replacingOrder:!this.options.correctingOrder&&this.model.hasOrder(),correctingOrder:!!this.options.correctingOrder,quantityDone:this.model.prodShiftOrder.get("quantityDone")||0,workerCount:this.model.prodShiftOrder.getWorkerCountForEdit(),orderIdType:this.model.getOrderIdType(),maxQuantityDone:this.model.prodShiftOrder.getMaxQuantityDone(),maxWorkerCount:this.model.prodShiftOrder.getMaxWorkerCount()}},afterRender:function(){this.socket.isConnected()?(this.setUpOrderSelect2(),this.setUpOperationSelect2(),this.options.correctingOrder&&this.selectCurrentOrder()):this.options.correctingOrder&&(this.$id("order").val(this.model.prodShiftOrder.get("orderId")),this.$id("operation").val(this.model.prodShiftOrder.get("operationNo"))),this.focusFirstInput()},onDialogShown:function(t){this.closeDialog=t.closeDialog.bind(t),this.focusFirstInput()},closeDialog:function(){},focusFirstInput:function(){!this.options.correctingOrder&&this.model.hasOrder()?this.$id("quantityDone").select():this.socket.isConnected()?this.$id("order").select2("focus"):this.$id("order").select()},setUpOrderSelect2:function(){r.setUpOrderSelect2(this.$id("order"),this.$id("operation"),this.model,{dropdownCssClass:"production-dropdown"})},setUpOperationSelect2:function(){r.setUpOperationSelect2(this.$id("operation"),[],{dropdownCssClass:"production-dropdown"})},selectCurrentOrder:function(){r.selectOrder(this.$id("order"),this.model.prodShiftOrder)},handleOnlinePick:function(n){var i=this.$id("order").select2("data"),o=this.$id("operation"),s=o.hasClass("form-control")?o.val():this.$id("operation").select2("val");return i?s?(i.sameOrder?i=this.model.prodShiftOrder.get("orderData"):r.prepareOrderInfo(this.model,i),void this.pickOrder(i,s)):(o.focus(),n.disabled=!1,e.msg.show({type:"error",time:2e3,text:t("production","newOrderPicker:msg:emptyOperation")})):(this.$id("order").select2("focus"),n.disabled=!1,e.msg.show({type:"error",time:2e3,text:t("production","newOrderPicker:msg:emptyOrder")}))},handleOfflinePick:function(n){var r=this.model.getOrderIdType(),i={no:null,nc12:null},o=this.$id("order").val().trim().replace(/[^a-zA-Z0-9]+/g,""),s=this.$id("operation").val().trim().replace(/[^0-9]+/g,"");if("no"===r&&/^[0-9]{9,}$/.test(o))i.no=o;else{if("nc12"!==r||!(12===o.length||o.length<9&&/^[a-zA-Z]+[a-zA-Z0-9]*$/.test(o)))return this.$id("order").select(),n.disabled=!1,e.msg.show({type:"error",time:2e3,text:t("production",""===o?"newOrderPicker:msg:emptyOrder":"newOrderPicker:msg:invalidOrderId:"+r)});i.nc12=o}return/^[0-9]{1,4}$/.test(s)?void this.pickOrder(i,s):(this.$id("operation").select(),n.disabled=!1,e.msg.show({type:"error",time:2e3,text:t("production",""===o?"newOrderPicker:msg:emptyOrder":"newOrderPicker:msg:invalidOperationNo")}))},pickOrder:function(t,e){for(;e.length<4;)e="0"+e;!this.options.correctingOrder&&this.model.hasOrder()&&(this.model.changeQuantityDone(this.parseInt("quantityDone")),this.model.changeWorkerCount(this.parseInt("workerCount"))),this.options.correctingOrder?this.model.correctOrder(t,e):this.model.changeOrder(t,e),this.closeDialog()},parseInt:function(t){var e=parseInt(this.$id(t).val(),10);return isNaN(e)||0>e?0:e}})}),define("app/production/templates/downtimePicker",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="production-downtimePicker">\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-startedAt">'),__output.push(t("production","downtimePicker:startedAt")),__output.push("</label>\n    "),"start"===mode?(__output.push('\n    <div class="input-group">\n      <input id="'),__output.push(idPrefix),__output.push('-startedAt" class="form-control" type="text" value="'),__output.push(time.format(startedAt,"YYYY-MM-DD, HH:mm:ss")),__output.push('" readonly data-time="'),__output.push(startedAt.getTime()),__output.push('">\n      <span class="input-group-btn">\n        <button class="btn btn-default production-downtimePicker-now" type="button">'),__output.push(t("production","downtimePicker:startedAt:now")),__output.push("</button>\n      </span>\n    </div>\n    ")):(__output.push('\n    <input id="'),__output.push(idPrefix),__output.push('-startedAt" class="form-control" type="text" value="'),__output.push(time.format(startedAt,"YYYY-MM-DD, HH:mm:ss")),__output.push('" readonly data-time="'),__output.push(startedAt.getTime()),__output.push('">\n    ')),__output.push('\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-reason">'),__output.push(t("production","downtimePicker:reason:label")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-reason" type="text" placeholder="'),__output.push(t("production","downtimePicker:reason:placeholder")),__output.push('">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-aor">'),__output.push(t("production","downtimePicker:aor:label")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-aor" type="text" placeholder="'),__output.push(t("production","downtimePicker:aor:placeholder")),__output.push('">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-reasonComment">'),__output.push(t("production","downtimePicker:reasonComment:label")),__output.push('</label>\n    <textarea id="'),__output.push(idPrefix),__output.push('-reasonComment" class="form-control" rows="4" placeholder="'),__output.push(t("production","downtimePicker:reasonComment:placeholder")),__output.push('"></textarea>\n  </div>\n  <div class="form-actions">\n    <button type="submit" class="btn btn-'),__output.push("start"===mode?"danger":"primary"),__output.push('">'),__output.push(t("production","downtimePicker:submit:"+mode)),__output.push('</button>\n    <button type="button" class="cancel btn btn-link">'),__output.push(t("production","downtimePicker:cancel")),__output.push("</button>\n  </div>\n</form>\n");return __output.join("")}}),define("app/production/views/DowntimePickerView",["underscore","app/i18n","app/time","app/viewport","app/data/aors","app/core/View","app/prodDowntimes/util/reasonAndAor","app/production/templates/downtimePicker"],function(t,e,n,r,i,o,s,a){"use strict";return o.extend({template:a,dialogClassName:"production-modal",events:{"keypress .select2-container":function(t){13===t.which&&(t.preventDefault(),this.$el.submit())},"keypress textarea":function(t){13===t.which&&""===t.target.value.trim()&&(t.preventDefault(),this.$el.submit())},submit:function(t){t.preventDefault();var e=this.$('.btn[type="submit"]')[0];e.disabled||(e.disabled=!0,this.handlePick(e))},"click .production-downtimePicker-now":function(){var t=Date.now();this.$id("startedAt").val(n.format(t,"YYYY-MM-DD, HH:mm:ss")).attr("data-time",t)},"select2-removed #-reason, #-aor":function(){this.$id("reason").val(""),this.$id("aor").val(""),this.model.reason=null,this.model.aor=null,this.timers.clearSelect2=setTimeout(function(t){t.setUpReasonSelect2(),t.setUpAorSelect2(),t.$id("reason").select2("focus")},1,this)},"change #-reason":function(t){this.model.reason=t.target.value,this.setUpAorSelect2(),this.$id("aor").select2("focus")},"change #-aor":function(t){this.model.aor=t.target.value,this.setUpReasonSelect2(),null===this.$id("reason").select2("data")?this.$id("reason").select2("focus"):this.$id("reasonComment").focus()}},initialize:function(){s.initialize(this)},destroy:function(){s.destroy(this)},serialize:function(){return{idPrefix:this.idPrefix,startedAt:this.model.startedAt,mode:this.model.mode}},afterRender:function(){this.model.reason&&this.$id("reason").val(this.model.reason),this.model.aor&&this.$id("aor").val(this.model.aor),this.model.reasonComment&&this.$id("reasonComment").val(this.model.reasonComment);var t=this.model.prodShift.getDowntimeReasons().sort(function(t,e){return t.id.localeCompare(e.id)});s.setUpReasons(this,t,this.model.prodShift.get("subdivision")),s.setUpAors(this),this.setUpReasonSelect2(),this.setUpAorSelect2(),this.focusControl()},onDialogShown:function(){this.focusControl()},focusControl:function(){this.model.reason?this.model.aor?"edit"===this.model.mode?this.$id("reasonComment").focus():this.$(".btn-danger").focus():this.$id("aor").select2("focus"):this.$id("reason").select2("focus")},setUpReasonSelect2:function(){s.setUpReasonSelect2(this,this.model.aor,{allowClear:!0,dropdownCssClass:"production-dropdown"})},setUpAorSelect2:function(){s.setUpAorSelect2(this,this.model.reason,{allowClear:!0,dropdownCssClass:"production-dropdown"})},handlePick:function(t){var n=this.$id("reason").select2("val"),i=this.$id("aor").select2("val"),o=this.$id("reasonComment").val();return n?i?void this.trigger("downtimePicked",{reason:n,reasonComment:o,aor:i,startedAt:new Date(parseInt(this.$id("startedAt").attr("data-time"),10))}):(this.$id("aor").select2("focus"),t.disabled=!1,r.msg.show({type:"error",time:2e3,text:e("production","downtimePicker:msg:emptyAor")})):(this.$id("reason").select2("focus"),t.disabled=!1,r.msg.show({type:"error",time:2e3,text:e("production","downtimePicker:msg:emptyReason")}))}})}),define("app/production/templates/endWorkDialog",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="production-endWorkDialog">\n  <p class="message message-inline message-warning">'),__output.push(t("production","endWorkDialog:warning",{downtime:downtime})),__output.push('</p>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-quantitiesDone">'),__output.push(t("production","endWorkDialog:quantitiesDone",{hourRange:hourRange})),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-quantitiesDone" class="form-control small" type="number" value="'),__output.push(quantitiesDone),__output.push('" autofocus min="0" max="'),__output.push(maxQuantitiesDone),__output.push('">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-quantityDone">'),__output.push(t("production","endWorkDialog:quantityDone")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-quantityDone" class="form-control small" type="number" value="'),__output.push(quantityDone),__output.push('" max="'),__output.push(maxQuantityDone),__output.push('">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-workerCount">'),__output.push(t("production","endWorkDialog:workerCount")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-workerCount" class="form-control small" type="number" value="'),__output.push(workerCount),__output.push('" min="1" max="'),__output.push(maxWorkerCount),__output.push('">\n  </div>\n  <div class="form-actions">\n    <button class="btn btn-warning" type="submit">'),__output.push(t("production","endWorkDialog:yes")),__output.push('</button>\n    <button class="btn btn-link cancel" type="button">'),__output.push(t("production","endWorkDialog:no")),__output.push("</button>\n  </div>\n</form>\n");return __output.join("")}}),define("app/production/views/EndWorkDialogView",["app/core/View","app/production/templates/endWorkDialog"],function(t,e){"use strict";return t.extend({template:e,dialogClassName:"production-modal",events:{submit:function(t){t.preventDefault();var e=this.$(".btn-warning")[0];if(!e.disabled){e.disabled=!0;var n=this.parseInt("quantitiesDone"),r=this.parseInt("quantityDone"),i=this.parseInt("workerCount");this.model.changeCurrentQuantitiesDone(n),r!==this.model.prodShiftOrder.get("quantityDone")&&this.model.changeQuantityDone(r),i!==this.model.prodShiftOrder.get("workerCount")&&this.model.changeWorkerCount(i),this.model.endWork(),this.closeDialog()}}},serialize:function(){return{idPrefix:this.idPrefix,downtime:this.model.isDowntime(),hourRange:this.model.getCurrentQuantityDoneHourRange(),quantitiesDone:this.model.getQuantityDoneInCurrentHour(),quantityDone:this.model.prodShiftOrder.get("quantityDone")||0,workerCount:this.model.prodShiftOrder.getWorkerCountForEdit(),maxQuantitiesDone:this.model.getMaxQuantitiesDone(),maxQuantityDone:this.model.prodShiftOrder.getMaxQuantityDone(),maxWorkerCount:this.model.prodShiftOrder.getMaxWorkerCount()}},onDialogShown:function(t){this.closeDialog=t.closeDialog.bind(t)},closeDialog:function(){},parseInt:function(t){var e=parseInt(this.$id(t).val(),10);return isNaN(e)||0>e?0:e}})}),define("app/production/templates/data",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="production-data">\n  <h2 class="production-sectionHeader">'),__output.push(t("production","section:data")),__output.push('</h2>\n  <div class="production-properties production-properties-orderInfo">\n    <div class="production-property production-property-orderNo">\n      <div class="production-property-name">'),__output.push(t("production","property:orderNo")),__output.push('</div>\n      <div class="production-property-value"></div>\n    </div>\n    <div class="production-property production-property-nc12">\n      <div class="production-property-name">'),__output.push(t("production","property:nc12")),__output.push('</div>\n      <div class="production-property-value"></div>\n    </div>\n    <div class="production-property production-property-productName">\n      <div class="production-property-name">'),__output.push(t("production","property:productName")),__output.push('</div>\n      <div class="production-property-value"></div>\n    </div>\n    <div class="production-property production-property-operationName">\n      <div class="production-property-name">'),__output.push(t("production","property:operationName")),__output.push('</div>\n      <div class="production-property-value"></div>\n    </div>\n  </div>\n  <div class="production-properties production-properties-orderData">\n    <div class="production-property production-property-startedAt">\n      <div class="production-property-name">'),__output.push(t("production","property:createdAt")),__output.push('</div>\n      <div class="production-property-value"></div>\n    </div>\n    <div class="production-property production-property-quantityDone">\n      <div class="production-property-name">'),__output.push(t("production","property:quantityDone")),__output.push('</div>\n      <div class="production-property-value"></div>\n    </div>\n    <div class="production-property production-property-workerCount">\n      <div class="production-property-name">'),__output.push(t("production","property:workerCount")),__output.push('</div>\n      <div class="production-property-value"></div>\n    </div>\n    <div class="production-property production-property-workerCountSap">\n      <div class="production-property-name">'),__output.push(t("production","property:workerCountSap")),__output.push('</div>\n      <div class="production-property-value"></div>\n    </div>\n    <div class="production-property production-property-taktTime">\n      <div class="production-property-name">'),__output.push(t("production","property:taktTime")),__output.push('</div>\n      <div class="production-property-value"></div>\n    </div>\n  </div>\n  <div class="production-actions">\n    <button class="btn btn-danger production-action production-beginDowntime">Przest√≥j</button>\n    <button class="btn btn-danger production-action production-beginBreak">Przerwa</button>\n    <button class="btn btn-success production-action production-endDowntime">Koniec przestoju</button>\n    <button class="btn btn-success production-action production-continueOrder">Kontynuuj zlecenie</button>\n    <button class="btn btn-success production-action production-pickNextOrder">Nastƒôpne zlecenie</button>\n    <button class="btn btn-warning production-action production-endWork">Koniec pracy</button>\n  </div>\n</div>\n');return __output.join("")}}),define("app/production/templates/endDowntimeDialog",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="production-question">\n  '),__output.push(t("production","endDowntimeDialog:message")),__output.push('\n  <div class="form-actions">\n    <button class="btn btn-'),__output.push(yesSeverity),__output.push(' dialog-answer" type="button" autofocus data-answer="yes">'),__output.push(t("production","endDowntimeDialog:yes")),__output.push('</button>\n    <button class="btn btn-link cancel" type="button">'),__output.push(t("production","endDowntimeDialog:no")),__output.push("</button>\n  </div>\n</div>\n");return __output.join("")}}),define("app/production/templates/continueOrderDialog",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="production-question">\n  '),__output.push(t("production","continueOrderDialog:message")),__output.push('\n  <div class="form-actions">\n    <button class="btn btn-success dialog-answer" type="button" autofocus data-answer="yes">'),__output.push(t("production","continueOrderDialog:yes")),__output.push('</button>\n    <button class="btn btn-link cancel" type="button">'),__output.push(t("production","continueOrderDialog:no")),__output.push("</button>\n  </div>\n</div>\n");return __output.join("")}}),define("app/production/views/ProductionDataView",["underscore","jquery","app/i18n","app/time","app/viewport","app/core/View","app/core/views/DialogView","app/data/prodLog","./NewOrderPickerView","./DowntimePickerView","./EndWorkDialogView","app/production/templates/data","app/production/templates/endDowntimeDialog","app/production/templates/continueOrderDialog"],function(t,e,n,r,i,o,s,a,u,c,l,p,d,h){"use strict";return o.extend({template:p,localTopics:{"socket.connected":"fillOrderData"},events:{"click .production-newOrder":"newOrder","click .production-continueOrder":"continueOrder","click .production-startDowntime":"startDowntime","click .production-startBreak":"startBreak","click .production-endDowntime":"endDowntime","click .production-endWork":"endWork","click .production-property-orderNo .btn-link":"correctOrder","click .production-property-nc12 .btn-link":"correctOrder","click .production-property-quantityDone .btn-link":"showQuantityDoneEditor","click .production-property-workerCount .btn-link":"showWorkerCountEditor"},initialize:function(){this.listenTo(this.model,"locked unlocked",function(){this.updateWorkerCount(),this.updateQuantityDone(),this.toggleActions()}),this.listenTo(this.model,"change:state",this.toggleActions);var e=this.model.prodShiftOrder;this.listenTo(e,"change:_id change:orderId change:operationNo",t.debounce(function(){this.updateOrderData(),this.updateOrderInfo(),this.updateWorkerCount(),this.updateTaktTime()},1)),this.listenTo(e,"change:quantityDone",this.updateQuantityDone),this.listenTo(e,"change:workerCount",t.debounce(function(){this.updateWorkerCount(),this.updateTaktTime()},1))},afterRender:function(){this.$actions=this.$(".production-actions"),this.updateOrderData(),this.updateOrderInfo(),this.updateQuantityDone(),this.toggleActions(),this.socket.isConnected()&&this.fillOrderData()},updateOrderInfo:function(){var t=this.model.prodShiftOrder;this.updateOrderNo(),this.updateNc12(),this.$property("productName").text(t.getProductName()),this.$property("operationName").text(t.getOperationName())},updateOrderData:function(){this.$el.toggleClass("has-order",this.model.hasOrder()),this.updateTaktTime(),this.updateWorkerCount(),this.$property("startedAt").text(this.model.prodShiftOrder.getStartedAt())},updateOrderNo:function(){var t=this.model.prodShiftOrder.getOrderNo();this.model.isLocked()||!this.model.hasOrder()||this.model.prodShiftOrder.isMechOrder()||(t+=' <button class="btn btn-link">'+n("production","property:orderNo:change")+"</button>"),this.$property("orderNo").html(t)},updateNc12:function(){var t=this.model.prodShiftOrder.getNc12();!this.model.isLocked()&&this.model.hasOrder()&&this.model.prodShiftOrder.isMechOrder()&&(t+=' <button class="btn btn-link">'+n("production","property:nc12:change")+"</button>"),this.$property("nc12").html(t)},updateWorkerCount:function(){this.$property("workerCountSap").text(this.model.prodShiftOrder.getWorkerCountSap());var t=this.model.prodShiftOrder.getWorkerCount(),e="";if(this.model.isIdle())e="-";else if(this.model.isLocked())e="number"==typeof t?t:"-";else{var r="property:workerCount:change:noData";t>0&&(r="property:workerCount:change:data",e+=t+" "),e+='<button class="btn btn-link">'+n("production",r)+"</button>"}this.$property("workerCount").html(e)},updateTaktTime:function(){this.$property("taktTime").text(this.model.prodShiftOrder.getTaktTime())},updateQuantityDone:function(){var t;this.model.isIdle()?t="-":(t=String(this.model.prodShiftOrder.getQuantityDone()),this.model.isLocked()||(t+=' <button class="btn btn-link">'+n("production","property:quantityDone:change")+"</button>")),this.$property("quantityDone").html(t)},toggleActions:function(){this.$actions.empty(),this.model.isLocked()||(this.model.isIdle()?this.toggleIdleActions():this.model.isWorking()?this.toggleWorkingActions():this.toggleDowntimeActions())},toggleIdleActions:function(){t.defer(function(t){t.model.prodShiftOrder.hasOrderData()&&t.appendAction("success","continueOrder"),t.appendAction("success","newOrder")},this)},toggleWorkingActions:function(){this.appendAction("danger","startDowntime"),this.model.getDefaultAor()&&this.appendAction("danger","startBreak"),this.appendAction("success","newOrder"),this.appendAction("warning","endWork")},toggleDowntimeActions:function(){this.model.hasOrder()?(this.appendAction("success","endDowntime"),this.appendAction("warning","endWork")):this.appendAction("warning","endDowntime")},appendAction:function(t,e){var r=["btn","btn-"+t,"production-action","production-"+e],i=n("production","action:"+e);this.$actions.append('<button class="'+r.join(" ")+'">'+i+"</button>")},$property:function(t){return this.$(".production-property-"+t+" .production-property-value")},newOrder:function(t){t&&t.target.blur(),i.showDialog(new u({model:this.model}),n("production","newOrderPicker:title"+(this.model.hasOrder()?":replacing":"")))},continueOrder:function(t){t&&t.target.blur();var e=new s({dialogClassName:"production-modal",template:h});this.listenTo(e,"answered",function(t){"yes"===t&&this.model.continueOrder()}),i.showDialog(e,n("production","continueOrderDialog:title"))},correctOrder:function(t){t&&t.target.blur(),i.showDialog(new u({model:this.model,correctingOrder:!0}),n("production","newOrderPicker:title:correcting"))},startDowntime:function(e,o){var s=r.getMoment().toDate();e&&e.target.blur(),o||(o={}),o.model=t.defaults(o.model||{},{mode:"start",prodShift:this.model,startedAt:s,reason:null,aor:null,reasonComment:null});var a=new c(o);this.listenTo(a,"downtimePicked",function(t){i.closeDialog(),this.model.startDowntime(t)}),i.showDialog(a,n("production","downtimePicker:title:start"))},startBreak:function(t){this.startDowntime(t,{model:{prodShift:this.model,reason:this.model.getBreakReason(),aor:this.model.getDefaultAor()}})},endDowntime:function(t){t&&t.target.blur();var e=new s({dialogClassName:"production-modal",template:d,model:{yesSeverity:this.model.hasOrder()?"success":"warning"}});this.listenTo(e,"answered",function(t){"yes"===t&&this.model.endDowntime()}),i.showDialog(e,n("production","endDowntimeDialog:title"))},endWork:function(t){t&&t.target.blur(),i.showDialog(new l({model:this.model}),n("production","endWorkDialog:title"))},showEditor:function(n,r,i,o,s){function a(){d.remove()}function u(){var t=parseInt(d.val(),10);a(),!isNaN(t)&&t>=i&&o>=t&&l.model[s](t)}var c=n.find(".production-property-value"),l=this,p=e("<form></form>").submit(function(){return u(),!1}),d=e('<input class="form-control input-lg" type="number">').val(r).attr("min",i).attr("max",o).on("keydown",function(e){27===e.which&&t.defer(a)}).css({position:"absolute",width:c.width()+"px"}).appendTo(p);p.appendTo(c),t.defer(function(){d.select().on("blur",function(){t.defer(u)})})},showQuantityDoneEditor:function(){this.showEditor(this.$(".production-property-quantityDone"),this.model.prodShiftOrder.getQuantityDone(),0,this.model.prodShiftOrder.getMaxQuantityDone(),"changeQuantityDone")},showWorkerCountEditor:function(){this.showEditor(this.$(".production-property-workerCount"),this.model.prodShiftOrder.getWorkerCountForEdit(),1,this.model.prodShiftOrder.getMaxWorkerCount(),"changeWorkerCount")},fillOrderData:function(){var e=this.model.prodShiftOrder.get("orderId"),n=this.model.prodShiftOrder.get("orderData");if(e&&(!n||t.isEmpty(n.operations))){if(a.isSyncing())return this.broker.subscribe("production.synced",this.fillOrderData.bind(this)).setLimit(1);this.fetchOrderData()}},fetchOrderData:function(){var t=this,n=this.model,r=n.prodShiftOrder.get("mechOrder")?"nc12":"no",i=n.prodShiftOrder.get("orderId"),o=e.ajax({type:"GET",url:"/production/orders?"+r+"="+encodeURIComponent(i)});this.promised(o).then(function(e){if(Array.isArray(e)&&e.length){var i=e[0];"no"===r?i.no=i._id:(i.nc12=i._id,i.no=null),delete i._id,n.prodShiftOrder.set("orderData",n.prodShiftOrder.prepareOperations(i)),n.saveLocalData(),t.updateOrderData(),t.updateOrderInfo()}})}})}),define("app/production/views/ProdDowntimeListView",["app/i18n","app/time","app/viewport","app/data/aors","app/data/downtimeReasons","app/core/views/ListView","./DowntimePickerView"],function(t,e,n,r,i,o,s){"use strict";return o.extend({className:"production-downtimes",localTopics:{"downtimeReasons.synced":"render","aors.synced":"render"},remoteTopics:function(){var t={};return this.model.prodLine&&(t["prodDowntimes.corroborated."+this.model.prodLine.id+".*"]="onCorroborated"),t},events:{"click .warning":"showEditDialog"},initialize:function(){this.collection=this.model.prodDowntimes,o.prototype.initialize.apply(this,arguments),this.listenTo(this.collection,"add",this.render),this.listenTo(this.collection,"change",this.render),this.listenTo(this.collection,"remove",this.render)
},destroy:function(){this.$el.popover("destroy")},serializeColumns:function(){return[{id:"startedAt",label:t("production","prodDowntime:startedAt")},{id:"finishedAt",label:t("production","prodDowntime:finishedAt")},{id:"reason",label:t("production","prodDowntime:reason")},{id:"aor",label:t("production","prodDowntime:aor")}]},serializeRows:function(){return this.model.prodDowntimes.map(function(t){var n=t.toJSON(),o=r.get(n.aor),s=i.get(n.reason);return n.className=t.getCssClassName(),n.startedAt=e.format(n.startedAt,"YYYY-MM-DD HH:mm:ss"),n.finishedAt=n.finishedAt?e.format(n.finishedAt,"YYYY-MM-DD HH:mm:ss"):"-",o&&(n.aor=o.get("name")),s&&(n.reason=s.get("label")),n.reasonComment&&(n.className+=" has-comment",n.reason+=' <i class="fa fa-info-circle"></i>'),n})},serializeActions:function(){return[]},afterRender:function(){o.prototype.afterRender.call(this);var t=this;this.$el.popover({selector:".has-comment",trigger:"hover",placement:"top",container:this.el.ownerDocument.body,content:function(){return t.model.prodDowntimes.get(this.dataset.id).get("reasonComment")}}).on("shown.bs.popover",function(e){t.$(e.target).data("bs.popover").$tip.addClass("production-downtimes-popover")})},onCorroborated:function(t){var e=this.model.prodDowntimes.get(t._id);e&&(delete t.changes,e.set(t),this.trigger("corroborated",t._id))},showEditDialog:function(e){var r=this.model,i=r.prodDowntimes.get(e.currentTarget.dataset.id),o=new s({model:{mode:"edit",prodShift:r,startedAt:new Date(i.get("startedAt")),reason:i.get("reason"),aor:i.get("aor"),reasonComment:i.get("reasonComment")}});this.listenTo(o,"downtimePicked",function(t){delete t.startedAt,r.editDowntime(i,t),n.closeDialog()}),n.showDialog(o,t("production","downtimePicker:title:edit"))}})}),define("app/production/templates/quantityEditor",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="production-quantityEditor">\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-quantity">'),__output.push(escape(t("production","quantityEditor:label",{from:from,to:to}))),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-quantity" class="form-control input-lg small" type="number" value="'),__output.push(escape(currentQuantity)),__output.push('" min="0" max="'),__output.push(maxQuantity),__output.push('">\n  </div>\n  <div class="form-actions">\n    <button type="submit" class="btn btn-primary">'),__output.push(t("production","quantityEditor:submit")),__output.push('</button>\n    <button type="button" class="cancel btn btn-link">'),__output.push(t("production","quantityEditor:cancel")),__output.push("</button>\n  </div>\n</form>\n");return __output.join("")}}),define("app/production/views/QuantityEditorView",["app/viewport","app/core/View","app/production/templates/quantityEditor"],function(t,e,n){"use strict";return e.extend({template:n,events:{submit:function(t){t.preventDefault();var e=parseInt(this.$id("quantity").val(),10);(isNaN(e)||e===this.options.currentQuantity||0>e)&&(e=null),this.trigger("quantityChanged",e)}},serialize:function(){return{idPrefix:this.idPrefix,from:this.options.from,to:this.options.to,currentQuantity:this.options.currentQuantity,maxQuantity:this.options.maxQuantity}},afterRender:function(){this.$id("quantity").select()},onDialogShown:function(){this.$id("quantity").select()}})}),define("app/production/templates/quantities",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="production-quantities">\n  <h3 class="production-subsectionHeader">'),__output.push(t("production","section:quantities")),__output.push('</h3>\n  <div class="table-responsive">\n    <table class="table table-bordered table-hover table-condensed">\n      <thead>\n        <tr>\n          <th>'),__output.push(t("production","quantities:column:time")),__output.push("</th>\n          <th>"),__output.push(t("production","quantities:column:planned")),__output.push("</th>\n          <th>"),__output.push(t("production","quantities:column:actual")),__output.push("</th>\n        </tr>\n      </thead>\n      <tbody>\n        "),quantityRows.forEach(function(e,n){__output.push("\n        <tr>\n          <td>"),__output.push(e.time),__output.push("</td>\n          <td>"),__output.push(e.planned),__output.push('</td>\n          <td class="production-quantities-actual" data-hour="'),__output.push(n),__output.push('">\n            <span>'),__output.push(e.actual),__output.push("</span>\n            "),e.editable&&(__output.push('\n            <button class="btn btn-link">'),__output.push(t("production","quantities:change")),__output.push("</button>\n            ")),__output.push("\n          </td>\n        </tr>\n        ")}),__output.push("\n      </tbody>\n    </table>\n  </div>\n</div>\n");return __output.join("")}}),define("app/production/views/ProductionQuantitiesView",["underscore","jquery","app/time","app/i18n","app/viewport","app/core/View","./QuantityEditorView","app/production/templates/quantities"],function(t,e,n,r,i,o,s,a){"use strict";return o.extend({template:a,events:{"click .production-quantities-actual .btn-link":"showQuantityEditor","mousedown .production-quantities-actual .btn-link":"showQuantityEditor"},initialize:function(){this.onQuantitiesDoneChanged=this.onQuantitiesDoneChanged.bind(this),this.listenTo(this.model,"change:shift locked unlocked",this.render)},serialize:function(){var t=n.getMoment().valueOf(),e=this.model.getCurrentShiftMoment(),r=!this.model.isLocked();return{quantityRows:(this.model.get("quantitiesDone")||[]).map(function(n,i){var o=r,s=e.format("HH:mm:ss");return e.add(59,"minutes").add(59,"seconds"),o=7===i?o&&t>e.valueOf()-6e5:o&&t>e.valueOf(),s+="-"+e.format("HH:mm:ss"),e.add(1,"seconds"),{time:s,planned:n.planned,actual:n.actual,editable:o||n.actual>0}})}},beforeRender:function(){this.stopListening(this.model,"change:quantitiesDone",this.onQuantitiesDoneChanged)},afterRender:function(){this.listenTo(this.model,"change:quantitiesDone",this.onQuantitiesDoneChanged),this.timers.nextRender&&clearTimeout(this.timers.nextRender),this.model.isLocked()||this.scheduleNextRender()},scheduleNextRender:function(){var t=this.model.getCurrentShiftMoment().add(7,"hours").hours(),e=n.getMoment(),r=e.valueOf(),i=e.hours(),o=e.minutes(0).seconds(0).milliseconds(0).add(1,"hours").valueOf(),s=i===t?o-6e5:o,a=s+1e3-r;a>0?this.timers.nextRender=setTimeout(function(t){t.render(),t.showEditorDialog()},a,this):delete this.timers.nextRender},showQuantityEditor:function(n){function i(){d.remove(),c.show(),l.show()}function o(){var t=parseInt(h.val(),10);i();var e=s.attr("data-hour");t!==p&&t>=0&&u>=t&&(l.text(t),a.model.changeQuantitiesDone(parseInt(e,0),t,{render:!1}))}var s=this.$(n.target).closest("td");if(!s.find("input").length){var a=this,u=this.model.getMaxQuantitiesDone(),c=s.find(".btn-link").hide(),l=s.find("span").hide(),p=parseInt(l.text(),10),d=e("<form></form>").submit(function(){return o(),!1}),h=e('<input class="form-control" type="number" min="0">').attr("placeholder",r("production","quantities:newValuePlaceholder")).attr("max",u).val(p).on("keydown",function(e){27===e.which&&t.defer(i)}).appendTo(d);d.appendTo(s),t.defer(function(){h.select().on("blur",function(){t.defer(o)})})}},showEditorDialog:function(t){t||(t=this.$(".btn-link").last().closest("td"));var e=t.parent().find("td:first-child").text().trim().split("-"),n=parseInt(t.attr("data-hour"),10),o={from:e[0],to:e[1],currentQuantity:parseInt(t.find("span").text(),10),maxQuantity:this.model.getMaxQuantitiesDone()},a=new s(o);this.listenTo(a,"quantityChanged",function(t){i.closeDialog(),null!==t&&this.model.changeQuantitiesDone(n,t,{render:!0})}),i.showDialog(a,r("production","quantityEditor:title"))},onQuantitiesDoneChanged:function(t,e,n){n.render!==!1&&this.render()}})}),define("app/production/templates/productionPage",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="production is-'),__output.push(locked?"locked":"unlocked"),__output.push(" "),__output.push(state?"is-"+state:""),__output.push(" "),__output.push(mechOrder?"is-mechOrder":""),__output.push(' hidden">\n  <div class="production-controls-container"></div>\n  <div class="production-header-container"></div>\n  <div class="production-data-container"></div>\n  <div class="production-ft">\n    <h2 class="production-sectionHeader">'),__output.push(t("production","section:history")),__output.push('</h2>\n    <div class="row">\n      <div class="col-md-8">\n        <h3 class="production-subsectionHeader">'),__output.push(t("production","section:downtimes")),__output.push('</h3>\n        <div class="table-responsive production-downtimes-container"></div>\n      </div>\n      <div class="col-md-4 production-quantities-container"></div>\n    </div>\n  </div>\n</div>\n');return __output.join("")}}),define("app/production/templates/duplicateWarning",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="production-duplicate">\n  <h1>'),__output.push(t("production","duplicate:title")),__output.push("</h1>\n  <p>"),__output.push(t("production","duplicate:message")),__output.push('</p>\n  <p><button onclick="window.location.reload()" type="button" class="btn btn-primary btn-lg">'),__output.push(t("production","duplicate:button")),__output.push("</button></p>\n</div>\n");return __output.join("")}}),define("app/production/pages/ProductionPage",["jquery","app/user","app/i18n","app/viewport","app/updater/index","app/core/View","app/data/prodLog","app/prodShifts/ProdShift","../views/ProductionControlsView","../views/ProductionHeaderView","../views/ProductionDataView","../views/ProdDowntimeListView","../views/ProductionQuantitiesView","app/production/templates/productionPage","app/production/templates/duplicateWarning"],function(t,e,n,r,i,o,s,a,u,c,l,p,d,h,f){"use strict";return o.extend({template:h,layoutName:"blank",localTopics:{"socket.connected":function(){this.joinProduction(),this.refreshDowntimes(),this.refreshPlannedQuantities()},"socket.disconnected":function(){this.productionJoined=!1},"updater.frontendReloading":function(){this.model.saveLocalData()},"router.dispatching":function(t){t.path!=="/production/"+this.model.prodLine.id&&this.leaveProduction()},"production.locked":"onProductionLocked"},breadcrumbs:function(){return[n("production","breadcrumbs:productionPage"),this.model.getLabel()]},initialize:function(){this.delayProductionJoin=this.delayProductionJoin.bind(this),this.onBeforeUnload=this.onBeforeUnload.bind(this),this.layout=null,this.shiftEditedSub=null,this.productionJoined=!1,this.enableProdLog=!1,i.disableViews(),this.defineViews(),this.defineBindings(),t(window).on("beforeunload",this.onBeforeUnload)},setUpLayout:function(t){this.layout=t},destroy:function(){this.layout=null,this.shiftEditedSub=null,t(window).off("beforeunload",this.onBeforeUnload),this.model.stopShiftChangeMonitor(),i.enableViews(),s.disable()},serialize:function(){return{locked:this.model.isLocked(),state:this.model.get("state"),mechOrder:!!this.model.prodShiftOrder.get("mechOrder")}},load:function(e){r.msg.loading();var n=this,i=t.Deferred(),o=t.Deferred();return i.done(function(){n.timers.readLocalData=setTimeout(function(){n.timers.readLocalData=null,n.model.readLocalData()},1)}),i.fail(function(){document.body.innerHTML=f()}),i.always(function(){r.msg.loaded(),"rejected"===i.state()?(n.enableProdLog=!1,o.reject()):(n.enableProdLog=!0,o.resolve())}),s.enable(i),e(o.promise())},defineViews:function(){this.controlsView=new u({model:this.model}),this.headerView=new c({model:this.model}),this.dataView=new l({model:this.model}),this.downtimesView=new p({model:this.model}),this.quantitiesView=new d({model:this.model}),this.setView(".production-controls-container",this.controlsView),this.setView(".production-header-container",this.headerView),this.setView(".production-data-container",this.dataView),this.setView(".production-downtimes-container",this.downtimesView),this.setView(".production-quantities-container",this.quantitiesView)},defineBindings:function(){this.listenTo(this.model,"locked",function(){this.$el.removeClass("is-unlocked").addClass("is-locked"),this.leaveProduction()}),this.listenTo(this.model,"unlocked",function(){this.$el.removeClass("is-locked").addClass("is-unlocked"),this.refreshDowntimes(),this.refreshPlannedQuantities(),this.joinProduction()}),this.listenTo(this.model,"change:state",function(){null!==this.layout&&this.layout.setBreadcrumbs(this.breadcrumbs,this);var t=this.model.previous("state"),e=this.model.get("state");t&&this.$el.removeClass("is-"+t),e&&this.$el.addClass("is-"+e)}),this.listenTo(this.model,"change:shift",function(){return r.closeAllDialogs(),this.$el.hasClass("hidden")?void this.$el.removeClass("hidden"):void(this.model.get("shift")&&r.msg.show({type:"info",time:2e3,text:n("production","msg:shiftChange")}))}),this.listenTo(this.model,"change:_id",this.subscribeForShiftChanges),this.model.id&&this.subscribeForShiftChanges(),this.listenTo(this.model.prodShiftOrder,"change:mechOrder",function(){this.$el.toggleClass("is-mechOrder",this.model.prodShiftOrder.isMechOrder())}),this.listenTo(this.downtimesView,"corroborated",function(){this.model.saveLocalData()}),this.socket.on("production.locked",this.broker.publish.bind(this.broker,"production.locked"))},beforeRender:function(){this.enableProdLog&&(s.enable(),this.enableProdLog=!1)},afterRender:function(){this.socket.isConnected()&&(this.joinProduction(),this.refreshDowntimes(),this.refreshPlannedQuantities()),(this.model.isLocked()||this.model.id)&&this.$el.removeClass("hidden")},onBeforeUnload:function(){return this.model.isLocked()||(s.disable(),this.model.isIdle()||i.isFrontendReloading())?void 0:(this.timers.enableProdLog=setTimeout(s.enable.bind(s),1e3),this.model.isDowntime()?n("production","unload:downtime"):n("production","unload:order"))},onProductionLocked:function(t){t.prodLine===this.model.prodLine.id&&t.secretKey===this.model.getSecretKey()&&(this.model.setSecretKey(null),r.msg.show({time:5e3,type:"warning",text:n("production","msg:locked")}))},refreshDowntimes:function(){if(s.isSyncing())return this.broker.subscribe("production.synced",this.delayDowntimesRefresh.bind(this)).setLimit(1);if(this.model.isLocked())return this.listenToOnce(this.model,"unlocked",this.delayDowntimesRefresh);if(!this.model.id)return this.listenToOnce(this.model,"change:_id",this.delayDowntimesRefresh);this.timers.refreshingDowntimes&&clearTimeout(this.timers.refreshingDowntimes);var t=this;this.timers.refreshingDowntimes=setTimeout(function(){if(delete t.timers.refreshingDowntimes,t.socket.isConnected()&&!t.model.isLocked()){var e=t.model.prodDowntimes.fetch({reset:!0});t.promised(e).done(function(){t.model.saveLocalData()})}},2500)},delayDowntimesRefresh:function(){this.timers.refreshDowntimes&&clearTimeout(this.timers.refreshDowntimes),this.timers.refreshDowntimes=setTimeout(function(t){t.timers.refreshDowntimes=null,t.refreshDowntimes()},2500,this)},refreshPlannedQuantities:function(){if(s.isSyncing())return this.broker.subscribe("production.synced",this.delayPlannedQuantitiesRefresh.bind(this)).setLimit(1);if(this.model.isLocked())return this.listenToOnce(this.model,"unlocked",this.delayPlannedQuantitiesRefresh);if(!this.model.id)return this.listenToOnce(this.model,"change:_id",this.delayPlannedQuantitiesRefresh);var t=this;this.socket.emit("production.getPlannedQuantities",this.model.id,function(e,n){return t.shiftEditedSub?e?void 0:void t.model.updatePlannedQuantities(n):void 0})},delayPlannedQuantitiesRefresh:function(){this.timers.refreshPlannedQuantities&&clearTimeout(this.timers.refreshPlannedQuantities),this.timers.refreshPlannedQuantities=setTimeout(function(t){t.timers.refreshPlannedQuantities=null,t.refreshPlannedQuantities()},5e3,this)},joinProduction:function(){if(this.timers.joinProduction&&(clearTimeout(this.timers.joinProduction),delete this.timers.joinProduction),!this.productionJoined&&!this.model.isLocked()&&this.socket.isConnected()){if(s.isSyncing())return this.broker.subscribe("production.synced",this.delayProductionJoin).setLimit(1);if(!this.model.id)return this.listenToOnce(this.model,"change:_id",this.delayProductionJoin);var t=this.model.prodDowntimes.findFirstUnfinished();this.socket.emit("production.join",{prodLineId:this.model.prodLine.id,prodShiftId:this.model.id,prodShiftOrderId:this.model.prodShiftOrder.id||null,prodDowntimeId:t?t.id:null}),this.productionJoined=!0}},leaveProduction:function(){this.productionJoined&&(this.socket.isConnected()&&this.socket.emit("production.leave",this.model.prodLine.id),this.productionJoined=!1)},delayProductionJoin:function(){this.timers.joinProduction&&clearTimeout(this.timers.joinProduction),this.timers.joinProduction=setTimeout(function(t){t.timers.joinProduction=null,t.joinProduction()},1337,this)},subscribeForShiftChanges:function(){if(this.shiftEditedSub&&this.shiftEditedSub.cancel(),this.model.id){var t=this.model;this.shiftEditedSub=this.pubsub.subscribe("production.edited.shift."+this.model.id).on("message",function(e){t.set(e)})}}})}),define("app/nls/production",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"breadcrumbs:productionPage":function(){return"Production"},"duplicate:title":function(){return"Duplicate operator form"},"duplicate:message":function(){return"Detected another operator form already running.<br>Close all other operator forms and click the button below to reload the form in the current window."},"duplicate:button":function(){return"Reload operator form"},"msg:shiftChange":function(){return"New shift!"},"msg:locked":function(){return"Production line was deactivated!"},"controls:dashboard":function(){return"Go to dashboard"},"controls:lock":function(){return"Lock the editing"},"controls:unlock":function(){return"Unlock the editing"},"controls:locked":function(){return"Editing locked"},"controls:unlocked":function(){return"Editing unlocked"},"controls:sync":function(){return"Server communication indicator"},"controls:msg:sync:noConnection":function(){return"Cannot unlock: no connection to the server :("},"controls:msg:sync:remoteError":function(){return"Cannot unlock: failed to get the key :("},"controls:msg:sync:success":function(){return"Editing unlocked successfully :)"},"unlockDialog:title:unlock":function(){return"Production line activation"},"unlockDialog:title:lock":function(){return"Production line deactivation"},"unlockDialog:message:unlock":function(t){return"To activate the <em>"+e.v(t,"prodLine")+"</em> production line, enter login and password of a user with the <em>WMES Operator client activation</em> privilege. Production line cannot be activated, if it is currently connected to the server from another computer."},"unlockDialog:message:lock":function(t){return"To deactivate the <em>"+e.v(t,"prodLine")+"</em> production line, enter login and password of a user with the <em>WMES Operator client activation</em> privilege."},"unlockDialog:login":function(){return"Login"},"unlockDialog:password":function(){return"Password"},"unlockDialog:unlock":function(){return"Activate production line"},"unlockDialog:lock":function(){return"Deactivate production line"},"unlockDialog:error:UNLOCK_FAILURE":function(){return"Production line activation failed :("},"unlockDialog:error:LOCK_FAILURE":function(){return"Production line deactivation failed :("},"unlockDialog:error:INVALID_PROD_LINE":function(){return"Invalid production line!"},"unlockDialog:error:INVALID_LOGIN":function(){return"Invalid login!"},"unlockDialog:error:INVALID_PASSWORD":function(){return"Invalid password!"},"unlockDialog:error:NO_PRIVILEGES":function(){return"Insufficient privileges!"},"unlockDialog:error:ALREADY_UNLOCKED":function(){return"Production line is currently running on a different computer!"},"unlockDialog:error:DEACTIVATED":function(){return"Production line is deactivated!"},"section:data":function(){return"Production data"},"section:history":function(){return"History"},"section:quantities":function(){return"Quantities done"},"section:downtimes":function(){return"Downtimes"},"property:currentTime":function(){return"Current time"},"property:shift":function(){return"Shift"},"property:orgUnit":function(){return"Subdivision"},"property:master":function(){return"Master"},"property:master:change":function(){return"(change)"},"property:master:noData:locked":function(){return"none"},"property:master:noData:unlocked":function(){return"(change master)"},"property:leader":function(){return"Leader"},"property:leader:change":function(){return"(change)"},"property:leader:noData:locked":function(){return"none"},"property:leader:noData:unlocked":function(){return"(change leader)"},"property:operator":function(){return"Operator"},"property:operator:change":function(){return"(change)"},"property:operator:noData:locked":function(){return"none"},"property:operator:noData:unlocked":function(){return"(change operator)"},"property:orderNo":function(){return"Order no"},"property:orderNo:change":function(){return"(change)"},"property:nc12":function(){return"12NC"},"property:nc12:change":function(){return"(change)"},"property:productName":function(){return"Product name"},"property:operationName":function(){return"Operation name"},"property:taktTime":function(){return"Takt [s]"},"property:workerCountSap":function(){return"Worker count as per SAP"},"property:createdAt":function(){return"Started at"},"property:quantityDone":function(){return"Quantity done"},"property:quantityDone:change":function(){return"(change quantity)"},"property:workerCount":function(){return"Worker count"},"property:workerCount:change:data":function(){return"(change count)"},"property:workerCount:change:noData":function(){return"(set count)"},"action:newOrder":function(){return"New order"},"action:continueOrder":function(){return"Continue order"},"action:startDowntime":function(){return"Downtime"},"action:startBreak":function(){return"Break"},"action:endDowntime":function(){return"End downtime"},"action:endWork":function(){return"End work"},"quantities:column:time":function(){return"Time"},"quantities:column:planned":function(){return"Planned [items]"},"quantities:column:actual":function(){return"Actual [items]"},"quantities:change":function(){return"(change)"},"quantities:newValuePlaceholder":function(){return"New quantity..."},"quantityEditor:title":function(){return"Quantity done in an hour"},"quantityEditor:label":function(t){return"Quantity done from "+e.v(t,"from")+" to "+e.v(t,"to")+":"},"quantityEditor:submit":function(){return"Set quantity done"},"quantityEditor:cancel":function(){return"Cancel"},"personelPicker:title:master":function(){return"Changing master"},"personelPicker:title:leader":function(){return"Changing leader"},"personelPicker:title:operator":function(){return"Changing operator"},"personelPicker:submit":function(){return"Change user"},"personelPicker:cancel":function(){return"Cancel"},"personelPicker:online:label":function(){return"User:"},"personelPicker:online:placeholder":function(){return"Search by last name or personell ID"},"personelPicker:offline:label":function(){return"User:"},"personelPicker:offline:placeholder":function(){return"User's personell ID"},"personelPicker:offline:warning":function(){return"No connection to the server. You can only enter the user's personell ID."},"newOrderPicker:title":function(){return"Starting a new order"},"newOrderPicker:title:replacing":function(){return"Ending the current order"},"newOrderPicker:title:correcting":function(){return"Correcting the current order"},"newOrderPicker:order:label":function(){return"New order:"},"newOrderPicker:order:placeholder:no":function(){return"Enter the new order's no..."},"newOrderPicker:order:placeholder:nc12":function(){return"Order's 12NC"},"newOrderPicker:operation:label":function(){return"Operation:"},"newOrderPicker:offline:operation:placeholder":function(){return"Operation no"},"newOrderPicker:online:operation:placeholder":function(){return"Choose the new order's operation..."},"newOrderPicker:submit":function(){return"Start order"},"newOrderPicker:submit:replacing":function(){return"End the current order and start a new one"},"newOrderPicker:submit:correcting":function(){return"Correct the current order"},"newOrderPicker:cancel":function(){return"Cancel"},"newOrderPicker:msg:invalidOrderId:no":function(){return"Invalid order no :("},"newOrderPicker:msg:invalidOrderId:nc12":function(){return"Invalid 12NC :("},"newOrderPicker:msg:invalidOperationNo":function(){return"Invalid operation no :("},"newOrderPicker:msg:searchFailure":function(){return"Searching orders failed :("},"newOrderPicker:msg:emptyOrder":function(){return"Order is required."},"newOrderPicker:msg:emptyOperation":function(){return"Operation is required."},"newOrderPicker:msg:noOperations":function(){return"The selected order doesn't have any operations. You can manually enter a 4-digit operation no."},"newOrderPicker:online:info:no":function(){return"Enter the order no and choose an operation from the list to start a new order."},"newOrderPicker:online:info:nc12":function(){return"Enter the order's 12NC and choose an operation from the list to start a new order."},"newOrderPicker:offline:warning:no":function(){return"Enter the order no and operation no to start a new order."},"newOrderPicker:offline:warning:nc12":function(){return"Enter the order's 12NC and operation no to start a new order."},"newOrderPicker:checkData:warning":function(){return"Starting a new order will finish the current order. Make sure that the <em>Quantity done</em> and <em>Worker count</em> of the current order have correct values, because after starting a new order, you won't be able to change them."},"newOrderPicker:quantityDone":function(){return"Quantity done in the finished order:"},"newOrderPicker:workerCount":function(){return"Worker count in the finished order:"},"downtimePicker:title:start":function(){return"Starting a new downtime"},"downtimePicker:title:edit":function(){return"Correcting a downtime"},"downtimePicker:submit:start":function(){return"Start downtime"},"downtimePicker:submit:edit":function(){return"Correct downtime"},"downtimePicker:cancel":function(){return"Cancel"},"downtimePicker:reason:label":function(){return"Downtime reason:"},"downtimePicker:reason:placeholder":function(){return"Choose a downtime reason..."},"downtimePicker:reasonComment:label":function(){return"Comment:"},"downtimePicker:reasonComment:placeholder":function(){return"Optional, additional info..."},"downtimePicker:aor:label":function(){return"Area of responsibility:"},"downtimePicker:aor:placeholder":function(){return"Choose an area of responsibility..."},"downtimePicker:msg:emptyReason":function(){return"Downtime reason is required."},"downtimePicker:msg:emptyAor":function(){return"Area of responsibility is required."},"downtimePicker:startedAt":function(){return"Started at"},"downtimePicker:startedAt:now":function(){return"Now"},"prodDowntime:startedAt":function(){return"Started at"},"prodDowntime:finishedAt":function(){return"Finished at"},"prodDowntime:reason":function(){return"Downtime reason"},"prodDowntime:aor":function(){return"Area of responsibility"},"endDowntimeDialog:title":function(){return"Ending downtime confirmation"},"endDowntimeDialog:message":function(){return"<p>Are you sure you want to end the current downtime?</p>"},"endDowntimeDialog:yes":function(){return"End the downtime"},"endDowntimeDialog:no":function(){return"Do not end the downtime"},"continueOrderDialog:title":function(){return"Order continuation confirmation"},"continueOrderDialog:message":function(){return"<p>Are you sure you want to start the currently chosen order?</p>"},"continueOrderDialog:yes":function(){return"Continue the order"},"continueOrderDialog:no":function(){return"Do not continue the order"},"endWorkDialog:title":function(){return"Ending work confirmation"},"endWorkDialog:warning":function(t){return"Ending work will finish "+e.s(t,"downtime",{"true":"the current downtime and order",other:"the current order"})+". Make sure that the following fields have correct values, because after ending the work, you won't be able to change them."},"endWorkDialog:quantitiesDone":function(t){return"Quantity done in the "+e.v(t,"hourRange")+" hour:"},"endWorkDialog:quantityDone":function(){return"Quantity done in the current order:"},"endWorkDialog:workerCount":function(){return"Worker count in the current order:"},"endWorkDialog:yes":function(){return"End work"},"endWorkDialog:no":function(){return"Do not end work"},"unload:downtime":function(){return"Are you sure you want to close the browser leaving the production line in a state of downtime?\n\nIf you close the browser without Ending work, then the current downtime will be finished at the end of the current shift!"},"unload:order":function(){return"Are you sure you want to close the browser leaving the production line in a state of working?\n\nIf you close the browser without Ending work, then the current order will be finished at the end of the current shift!"}},pl:!0}}),define("app/nls/pl/production",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"breadcrumbs:productionPage":function(){return"Produkcja"},"duplicate:title":function(){return"Podw√≥jne uruchomienie formatki"},"duplicate:message":function(){return"Wykryto podw√≥jne uruchomienie przeglƒÖdarki z formatkƒÖ operatora.<br>Zamknij wszystkie inne formatki i wci≈õnij poni≈ºszy przycisk, aby ponownie za≈Çadowaƒá formatkƒô w tym oknie."},"duplicate:button":function(){return"Prze≈Çaduj formatkƒô"},"msg:shiftChange":function(){return"Nowa zmiana!"},"msg:locked":function(){return"Linia produkcyjna zosta≈Ça dezaktywowana!"},"controls:dashboard":function(){return"Przejd≈∫ do dashboardu"},"controls:lock":function(){return"Zablokuj edycjƒô"},"controls:unlock":function(){return"Aktywuj edycjƒô"},"controls:locked":function(){return"Edycja zablokowana"},"controls:unlocked":function(){return"Edycja aktywna"
},"controls:sync":function(){return"Wska≈∫nik komunikacji z serwerem"},"controls:msg:sync:noConnection":function(){return"Nie mo≈ºna aktywowaƒá edycji: brak po≈ÇƒÖczenia z serwerem :("},"controls:msg:sync:remoteError":function(){return"Nie mo≈ºna aktywowaƒá edycji: nieudane pobranie klucza :("},"controls:msg:sync:success":function(){return"Pomy≈õlnie aktywowano edycjƒô :)"},"unlockDialog:title:unlock":function(){return"Aktywacja linii produkcyjnej"},"unlockDialog:title:lock":function(){return"Dezaktywacja linii produkcyjnej"},"unlockDialog:message:unlock":function(t){return"Aby aktywowaƒá liniƒô produkcyjnƒÖ <em>"+e.v(t,"prodLine")+"</em> na tym komputerze, podaj login i has≈Ço u≈ºytkownika z uprawnieniem <em>Aktywacja klienta Operator WMES</em>. Linii nie bƒôdzie mo≈ºna aktywowaƒá, je≈ºeli jest w tym momencie pod≈ÇƒÖczona do serwera na innym komputerze."},"unlockDialog:message:lock":function(t){return"Aby dezaktywowaƒá liniƒô produkcyjnƒÖ <em>"+e.v(t,"prodLine")+"</em> na tym komputerze, podaj login i has≈Ço u≈ºytkownika z uprawnieniem <em>Aktywacja klienta Operator WMES</em>."},"unlockDialog:login":function(){return"Login"},"unlockDialog:password":function(){return"Has≈Ço"},"unlockDialog:unlock":function(){return"Aktywuj liniƒô produkcyjnƒÖ"},"unlockDialog:lock":function(){return"Dezaktywuj liniƒô produkcyjnƒÖ"},"unlockDialog:error:UNLOCK_FAILURE":function(){return"Nie uda≈Ço siƒô aktywowaƒá linii produkcyjnej :("},"unlockDialog:error:LOCK_FAILURE":function(){return"Nie uda≈Ço siƒô dezaktywowaƒá linii produkcyjnej :("},"unlockDialog:error:INVALID_PROD_LINE":function(){return"Nieprawid≈Çowa linia produkcyjna!"},"unlockDialog:error:INVALID_LOGIN":function(){return"Nieprawid≈Çowy login!"},"unlockDialog:error:INVALID_PASSWORD":function(){return"Nieprawid≈Çowe has≈Ço!"},"unlockDialog:error:NO_PRIVILEGES":function(){return"Brak wymaganych uprawnie≈Ñ!"},"unlockDialog:error:ALREADY_UNLOCKED":function(){return"Linia produkcyjna jest aktualnie uruchomiona na innym komputerze!"},"unlockDialog:error:DEACTIVATED":function(){return"Linia produkcyjna jest dezaktywowana!"},"section:data":function(){return"Dane produkcyjne"},"section:history":function(){return"Historia"},"section:quantities":function(){return"Wykonane ilo≈õci"},"section:downtimes":function(){return"Przestoje"},"property:currentTime":function(){return"Aktualny czas"},"property:shift":function(){return"Zmiana"},"property:orgUnit":function(){return"Dzia≈Ç"},"property:master":function(){return"Mistrz"},"property:master:change":function(){return"(zmie≈Ñ)"},"property:master:noData:locked":function(){return"nie wybrany"},"property:master:noData:unlocked":function(){return"(wybierz mistrza)"},"property:leader":function(){return"Lider"},"property:leader:change":function(){return"(zmie≈Ñ)"},"property:leader:noData:locked":function(){return"nie wybrany"},"property:leader:noData:unlocked":function(){return"(wybierz lidera)"},"property:operator":function(){return"Operator"},"property:operator:change":function(){return"(zmie≈Ñ)"},"property:operator:noData:locked":function(){return"nie wybrany"},"property:operator:noData:unlocked":function(){return"(wybierz operatora)"},"property:orderNo":function(){return"Nr zlecenia"},"property:orderNo:change":function(){return"(popraw)"},"property:nc12":function(){return"12NC"},"property:nc12:change":function(){return"(popraw)"},"property:productName":function(){return"Nazwa rodziny/detalu"},"property:operationName":function(){return"Nazwa operacji"},"property:taktTime":function(){return"Takt [s]"},"property:workerCountSap":function(){return"Osoby wg SAP"},"property:createdAt":function(){return"Czas rozpoczƒôcia"},"property:quantityDone":function(){return"Wykonana ilo≈õƒá"},"property:quantityDone:change":function(){return"(zmie≈Ñ ilo≈õƒá)"},"property:workerCount":function(){return"Osoby pracujƒÖce"},"property:workerCount:change:data":function(){return"(zmie≈Ñ ilo≈õƒá)"},"property:workerCount:change:noData":function(){return"(ustaw ilo≈õƒá)"},"action:newOrder":function(){return"Nowe zlecenie"},"action:continueOrder":function(){return"Kontynuuj zlecenie"},"action:startDowntime":function(){return"Przest√≥j"},"action:startBreak":function(){return"Przerwa"},"action:endDowntime":function(){return"Koniec przestoju"},"action:endWork":function(){return"Koniec pracy"},"quantities:column:time":function(){return"Przedzia≈Ç godzinowy"},"quantities:column:planned":function(){return"Plan [szt]"},"quantities:column:actual":function(){return"Wykonane [szt]"},"quantities:change":function(){return"(zmie≈Ñ)"},"quantities:newValuePlaceholder":function(){return"Nowa ilo≈õƒá..."},"quantityEditor:title":function(){return"Wykonana ilo≈õƒá w przedziale godzinowym"},"quantityEditor:label":function(t){return"Ilo≈õƒá wykonana od "+e.v(t,"from")+" do "+e.v(t,"to")+":"},"quantityEditor:submit":function(){return"Ustaw ilo≈õƒá"},"quantityEditor:cancel":function(){return"Anuluj ustawianie"},"personelPicker:title:master":function(){return"Wybieranie mistrza"},"personelPicker:title:leader":function(){return"Wybieranie lidera"},"personelPicker:title:operator":function(){return"Wybieranie operatora"},"personelPicker:submit":function(){return"Wybierz u≈ºytkownika"},"personelPicker:cancel":function(){return"Anuluj wybieranie"},"personelPicker:online:label":function(){return"U≈ºytkownik:"},"personelPicker:online:placeholder":function(){return"Szukaj po numerze kadrowym lub nazwisku"},"personelPicker:offline:label":function(){return"U≈ºytkownik:"},"personelPicker:offline:placeholder":function(){return"Numer kadrowy u≈ºytkownika"},"personelPicker:offline:warning":function(){return"Brak po≈ÇƒÖczenia z serwerem. Mo≈ºesz tylko wpisaƒá numer kadrowy u≈ºytkownika."},"newOrderPicker:title":function(){return"Rozpoczynanie nowego zlecenia"},"newOrderPicker:title:replacing":function(){return"Ko≈Ñczenie aktualnego zlecenia"},"newOrderPicker:title:correcting":function(){return"Poprawianie aktualnego zlecenia"},"newOrderPicker:order:label":function(){return"Nowe zlecenie:"},"newOrderPicker:order:placeholder:no":function(){return"Wpisz numer nowego zlecenia..."},"newOrderPicker:order:placeholder:nc12":function(){return"12NC zlecenia"},"newOrderPicker:operation:label":function(){return"Operacja:"},"newOrderPicker:offline:operation:placeholder":function(){return"Numer operacji"},"newOrderPicker:online:operation:placeholder":function(){return"Wybierz operacjƒô nowego zlecenia..."},"newOrderPicker:submit":function(){return"Rozpocznij nowe zlecenie"},"newOrderPicker:submit:replacing":function(){return"Zako≈Ñcz aktualne zlecenie i rozpocznij nowe"},"newOrderPicker:submit:correcting":function(){return"Popraw aktualne zlecenie"},"newOrderPicker:cancel":function(){return"Anuluj"},"newOrderPicker:msg:invalidOrderId:no":function(){return"Nieprawid≈Çowy numer zlecenia :("},"newOrderPicker:msg:invalidOrderId:nc12":function(){return"Nieprawid≈Çowe 12NC zlecenia :("},"newOrderPicker:msg:invalidOperationNo":function(){return"Nieprawid≈Çowy numer operacji :("},"newOrderPicker:msg:searchFailure":function(){return"Wyszukiwanie zlecenia nie powiod≈Ço siƒô :("},"newOrderPicker:msg:emptyOrder":function(){return"Zlecenie jest wymagane."},"newOrderPicker:msg:emptyOperation":function(){return"Operacja jest wymagana."},"newOrderPicker:msg:noOperations":function(){return"Wybrane zlecenie nie ma zdefiniowanych ≈ºadnych operacji.<br>Mo≈ºesz rƒôcznie wpisaƒá czterocyfrowy nr operacji."},"newOrderPicker:online:info:no":function(){return"Wpisz numer zlecenia i wybierz z listy operacjƒô aby rozpoczƒÖƒá nowe zlecenie."},"newOrderPicker:online:info:nc12":function(){return"Wpisz 12NC zlecenia i wybierz z listy operacjƒô aby rozpoczƒÖƒá nowe zlecenie."},"newOrderPicker:offline:warning:no":function(){return"Wpisz numer zlecenia oraz numer operacji aby rozpoczƒÖƒá nowe zlecenie."},"newOrderPicker:offline:warning:nc12":function(){return"Wpisz 12NC zlecenia oraz numer operacji aby rozpoczƒÖƒá nowe zlecenie."},"newOrderPicker:checkData:warning":function(){return"Wybranie nowego zlecenia uko≈Ñczy aktualnie wybrane zlecenie. Sprawd≈∫ czy pola <em>Ilo≈õƒá wykonana</em> i <em>Osoby pracujƒÖce</em> aktualnego zlecenia majƒÖ prawid≈Çowe warto≈õci, gdy≈º po wybraniu nowego zlecenia nie bƒôdzie mo≈ºna ich zmieniƒá."},"newOrderPicker:quantityDone":function(){return"Ilo≈õƒá wykonana w ko≈Ñczonym zleceniu:"},"newOrderPicker:workerCount":function(){return"Osoby pracujƒÖce przy ko≈Ñczonym zleceniu:"},"downtimePicker:title:start":function(){return"Rozpoczynanie przestoju"},"downtimePicker:title:edit":function(){return"Poprawianie przestoju"},"downtimePicker:submit:start":function(){return"Rozpocznij przest√≥j"},"downtimePicker:submit:edit":function(){return"Popraw przest√≥j"},"downtimePicker:cancel":function(){return"Anuluj"},"downtimePicker:reason:label":function(){return"Pow√≥d przestoju:"},"downtimePicker:reason:placeholder":function(){return"Wybierz pow√≥d przestoju..."},"downtimePicker:reasonComment:label":function(){return"Komentarz:"},"downtimePicker:reasonComment:placeholder":function(){return"Opcjonalne, dodatkowe informacje..."},"downtimePicker:aor:label":function(){return"Obszar odpowiedzialno≈õci:"},"downtimePicker:aor:placeholder":function(){return"Wybierz obszar odpowiedzialno≈õci..."},"downtimePicker:msg:emptyReason":function(){return"Pow√≥d przestoju jest wymagany."},"downtimePicker:msg:emptyAor":function(){return"Obszar odpowiedzialno≈õci jest wymagany."},"downtimePicker:startedAt":function(){return"Czas rozpoczƒôcia"},"downtimePicker:startedAt:now":function(){return"Teraz"},"prodDowntime:startedAt":function(){return"Czas zatrzymania"},"prodDowntime:finishedAt":function(){return"Czas wznowienia"},"prodDowntime:reason":function(){return"Pow√≥d przestoju"},"prodDowntime:aor":function(){return"Obszar odpowiedzialno≈õci"},"endDowntimeDialog:title":function(){return"Potwierdzenie zako≈Ñczenia przestoju"},"endDowntimeDialog:message":function(){return"<p>Czy na pewno chcesz zako≈Ñczyƒá aktualny przest√≥j?</p>"},"endDowntimeDialog:yes":function(){return"Zako≈Ñcz przest√≥j"},"endDowntimeDialog:no":function(){return"Nie ko≈Ñcz przestoju"},"continueOrderDialog:title":function(){return"Potwierdzenie kontynuacji zlecenia"},"continueOrderDialog:message":function(){return"<p>Czy na pewno chcesz rozpoczƒÖƒá aktualnie wybrane zlecenie?</p>"},"continueOrderDialog:yes":function(){return"Kontynuuj zlecenie"},"continueOrderDialog:no":function(){return"Nie kontynuuj zlecenia"},"endWorkDialog:title":function(){return"Potwierdzenie zako≈Ñczenia pracy"},"endWorkDialog:warning":function(t){return"Zako≈Ñczenie pracy uko≈Ñczy "+e.s(t,"downtime",{"true":"aktualnie wybrany przest√≥j i zlecenie",other:"aktualnie wybrane zlecenie"})+". Sprawd≈∫ czy poni≈ºsze pola majƒÖ prawid≈Çowe warto≈õci, gdy≈º po zako≈Ñczeniu pracy nie bƒôdzie mo≈ºna ich zmieniƒá."},"endWorkDialog:quantitiesDone":function(t){return"Wykonana ilo≈õƒá w przedziale godzinowym "+e.v(t,"hourRange")+":"},"endWorkDialog:quantityDone":function(){return"Wykonana ilo≈õƒá aktualnego zlecenia:"},"endWorkDialog:workerCount":function(){return"Osoby pracujƒÖce przy aktualnym zleceniu:"},"endWorkDialog:yes":function(){return"Zako≈Ñcz pracƒô"},"endWorkDialog:no":function(){return"Anuluj"},"unload:downtime":function(){return"Czy na pewno chcesz zamknƒÖƒá przeglƒÖdarkƒô pozostawiajƒÖc liniƒô produkcyjnƒÖ w stanie przestoju?\n\nJe≈ºeli zamkniesz przeglƒÖdarkƒô nie wciskajƒÖc przycisku Koniec pracy, to czas trwania przestoju bƒôdzie siƒô nalicza≈Ç do ko≈Ñca zmiany!"},"unload:order":function(){return"Czy na pewno chcesz zamknƒÖƒá przeglƒÖdarkƒô pozostawiajƒÖc liniƒô produkcyjnƒÖ w stanie wykonywania zlecenia?\n\nJe≈ºeli zamkniesz przeglƒÖdarkƒô nie wciskajƒÖc przycisku Koniec pracy, to czas trwania zlecenia bƒôdzie siƒô nalicza≈Ç do ko≈Ñca zmiany!"}}}),define("app/production/routes",["../broker","../router","../viewport","../data/prodLines","../data/orgUnits","../prodShifts/ProdShift","./pages/ProductionPage","i18n!app/nls/production"],function(t,e,n,r,i,o,s){"use strict";e.map("/production/*prodLineId",function(e){var a=r.get(e.params.prodLineId);return null==a?t.publish("router.404",e):void n.showPage(new s({model:new o(i.getAllForProdLine(a),{production:!0})}))})}),define("app/prodChangeRequests/ProdChangeRequest",["../core/Model"],function(t){"use strict";return t.extend({urlRoot:"/prodChangeRequests",clientUrlRoot:"#prodChangeRequests",topicPrefix:"prodChangeRequests",privilegePrefix:"PROD_DATA:CHANGES",nlsDomain:"prodChangeRequests"})}),define("app/prodChangeRequests/ProdChangeRequestCollection",["underscore","../user","../core/Collection","./ProdChangeRequest"],function(t,e,n,r){"use strict";return n.extend({model:r,rqlQuery:function(t){var n=[{name:"eq",args:["status","new"]}],r=e.getDivision();return r&&n.push({name:"eq",args:["division",r.id]}),t.Query.fromObject({limit:20,sort:{prodLine:1,_id:1},selector:{name:"and",args:n}})},isNewStatus:function(){return t.some(this.rqlQuery.selector.args,function(t){return"status"===t.args[0]&&"new"===t.args[1]})}})}),!function(){function t(t){return null!=t&&!isNaN(t)}function e(t){return t.length}function n(t){for(var e=1;t*e%1;)e*=10;return e}function r(t,e){try{for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}catch(r){t.prototype=e}}function i(){}function o(t){return ua+t in this}function s(t){return t=ua+t,t in this&&delete this[t]}function a(){var t=[];return this.forEach(function(e){t.push(e)}),t}function u(){var t=0;for(var e in this)e.charCodeAt(0)===ca&&++t;return t}function c(){for(var t in this)if(t.charCodeAt(0)===ca)return!1;return!0}function l(){}function p(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function d(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.substring(1);for(var n=0,r=la.length;r>n;++n){var i=la[n]+e;if(i in t)return i}}function h(){}function f(){}function m(t){function e(){for(var e,r=n,i=-1,o=r.length;++i<o;)(e=r[i].on)&&e.apply(this,arguments);return t}var n=[],r=new i;return e.on=function(e,i){var o,s=r.get(e);return arguments.length<2?s&&s.on:(s&&(s.on=null,n=n.slice(0,o=n.indexOf(s)).concat(n.slice(o+1)),r.remove(e)),i&&n.push(r.set(e,{on:i})),t)},e}function _(){Hs.event.preventDefault()}function g(){for(var t,e=Hs.event;t=e.sourceEvent;)e=t;return e}function v(t){for(var e=new f,n=0,r=arguments.length;++n<r;)e[arguments[n]]=m(e);return e.of=function(n,r){return function(i){try{var o=i.sourceEvent=Hs.event;i.target=t,Hs.event=i,e[i.type].apply(n,r)}finally{Hs.event=o}}},e}function y(t){return da(t,ga),t}function w(t){return"function"==typeof t?t:function(){return ha(t,this)}}function E(t){return"function"==typeof t?t:function(){return fa(t,this)}}function b(t,e){function n(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,e)}function o(){this.setAttributeNS(t.space,t.local,e)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function a(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=Hs.ns.qualify(t),null==e?t.local?r:n:"function"==typeof e?t.local?a:s:t.local?o:i}function T(t){return t.trim().replace(/\s+/g," ")}function R(t){return new RegExp("(?:^|\\s+)"+Hs.requote(t)+"(?:\\s+|$)","g")}function A(t){return t.trim().split(/^|\s+/)}function P(t,e){function n(){for(var n=-1;++n<i;)t[n](this,e)}function r(){for(var n=-1,r=e.apply(this,arguments);++n<i;)t[n](this,r)}t=A(t).map(O);var i=t.length;return"function"==typeof e?r:n}function O(t){var e=R(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",T(i+" "+t))):n.setAttribute("class",T(i.replace(e," ")))}}function S(t,e,n){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,e,n)}function o(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}return null==e?r:"function"==typeof e?o:i}function C(t,e){function n(){delete this[t]}function r(){this[t]=e}function i(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?i:r}function k(t){return"function"==typeof t?t:(t=Hs.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,t)}}function M(t){return{__data__:t}}function I(t){return function(){return _a(this,t)}}function D(t){return arguments.length||(t=Hs.ascending),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function L(t,e){for(var n=0,r=t.length;r>n;n++)for(var i,o=t[n],s=0,a=o.length;a>s;s++)(i=o[s])&&e(i,s,n);return t}function N(t){return da(t,ya),t}function z(t){var e,n;return function(r,i,o){var s,a=t[o].update,u=a.length;for(o!=n&&(n=o,e=0),i>=e&&(e=i+1);!(s=a[e])&&++e<u;);return s}}function x(){var t=this.__transition__;t&&++t.active}function F(t,e,n){function r(){var e=this[s];e&&(this.removeEventListener(t,e,e.$),delete this[s])}function i(){var i=u(e,Xs(arguments));r.call(this),this.addEventListener(t,this[s]=i,i.$=n),i._=e}function o(){var e,n=new RegExp("^__on([^.]+)"+Hs.requote(t)+"$");for(var r in this)if(e=r.match(n)){var i=this[r];this.removeEventListener(e[1],i,i.$),delete this[r]}}var s="__on"+t,a=t.indexOf("."),u=U;a>0&&(t=t.substring(0,a));var c=Ea.get(t);return c&&(t=c,u=G),a?e?i:r:e?h:o}function U(t,e){return function(n){var r=Hs.event;Hs.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{Hs.event=r}}}function G(t,e){var n=U(t,e);return function(t){var e=this,r=t.relatedTarget;r&&(r===e||8&r.compareDocumentPosition(e))||n.call(e,t)}}function j(){var t=".dragsuppress-"+ ++Ta,e="click"+t,n=Hs.select(Zs).on("touchmove"+t,_).on("dragstart"+t,_).on("selectstart"+t,_);if(ba){var r=Qs.style,i=r[ba];r[ba]="none"}return function(o){function s(){n.on(e,null)}n.on(t,null),ba&&(r[ba]=i),o&&(n.on(e,function(){_(),s()},!0),setTimeout(s,0))}}function Y(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();if(0>Ra&&(Zs.scrollX||Zs.scrollY)){n=Hs.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var i=n[0][0].getScreenCTM();Ra=!(i.f||i.e),n.remove()}return Ra?(r.x=e.pageX,r.y=e.pageY):(r.x=e.clientX,r.y=e.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}function B(t){return t>0?1:0>t?-1:0}function V(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function W(t){return t>1?0:-1>t?Aa:Math.acos(t)}function q(t){return t>1?Oa:-1>t?-Oa:Math.asin(t)}function H(t){return((t=Math.exp(t))-1/t)/2}function $(t){return((t=Math.exp(t))+1/t)/2}function X(t){return((t=Math.exp(2*t))-1)/(t+1)}function K(t){return(t=Math.sin(t/2))*t}function Q(){}function Z(t,e,n){return new J(t,e,n)}function J(t,e,n){this.h=t,this.s=e,this.l=n}function te(t,e,n){function r(t){return t>360?t-=360:0>t&&(t+=360),60>t?o+(s-o)*t/60:180>t?s:240>t?o+(s-o)*(240-t)/60:o}function i(t){return Math.round(255*r(t))}var o,s;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,s=.5>=n?n*(1+e):n+e-n*e,o=2*n-s,he(i(t+120),i(t),i(t-120))}function ee(t,e,n){return new ne(t,e,n)}function ne(t,e,n){this.h=t,this.c=e,this.l=n}function re(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),ie(n,Math.cos(t*=ka)*e,Math.sin(t)*e)}function ie(t,e,n){return new oe(t,e,n)}function oe(t,e,n){this.l=t,this.a=e,this.b=n}function se(t,e,n){var r=(t+16)/116,i=r+e/500,o=r-n/200;return i=ue(i)*ja,r=ue(r)*Ya,o=ue(o)*Ba,he(le(3.2404542*i-1.5371385*r-.4985314*o),le(-.969266*i+1.8760108*r+.041556*o),le(.0556434*i-.2040259*r+1.0572252*o))}function ae(t,e,n){return t>0?ee(Math.atan2(n,e)*Ma,Math.sqrt(e*e+n*n),t):ee(0/0,0/0,t)}function ue(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function ce(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function le(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function pe(t){return he(t>>16,t>>8&255,255&t)}function de(t){return pe(t)+""}function he(t,e,n){return new fe(t,e,n)}function fe(t,e,n){this.r=t,this.g=e,this.b=n}function me(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function _e(t,e,n){var r,i,o,s=0,a=0,u=0;if(r=/([a-z]+)\((.*)\)/i.exec(t))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(we(i[0]),we(i[1]),we(i[2]))}return(o=qa.get(t))?e(o.r,o.g,o.b):(null!=t&&"#"===t.charAt(0)&&(4===t.length?(s=t.charAt(1),s+=s,a=t.charAt(2),a+=a,u=t.charAt(3),u+=u):7===t.length&&(s=t.substring(1,3),a=t.substring(3,5),u=t.substring(5,7)),s=parseInt(s,16),a=parseInt(a,16),u=parseInt(u,16)),e(s,a,u))}function ge(t,e,n){var r,i,o=Math.min(t/=255,e/=255,n/=255),s=Math.max(t,e,n),a=s-o,u=(s+o)/2;return a?(i=.5>u?a/(s+o):a/(2-s-o),r=t==s?(e-n)/a+(n>e?6:0):e==s?(n-t)/a+2:(t-e)/a+4,r*=60):(r=0/0,i=u>0&&1>u?0:r),Z(r,i,u)}function ve(t,e,n){t=ye(t),e=ye(e),n=ye(n);var r=ce((.4124564*t+.3575761*e+.1804375*n)/ja),i=ce((.2126729*t+.7151522*e+.072175*n)/Ya),o=ce((.0193339*t+.119192*e+.9503041*n)/Ba);return ie(116*i-16,500*(r-i),200*(i-o))}function ye(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function we(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function Ee(t){return"function"==typeof t?t:function(){return t}}function be(t){return t}function Te(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Re(e,n,t,r)}}function Re(t,e,n,r){function i(){var t,e=u.status;if(!e&&u.responseText||e>=200&&300>e||304===e){try{t=n.call(o,u)}catch(r){return void s.error.call(o,r)}s.load.call(o,t)}else s.error.call(o,u)}var o={},s=Hs.dispatch("beforesend","progress","load","error"),a={},u=new XMLHttpRequest,c=null;return!Zs.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(t)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=i:u.onreadystatechange=function(){u.readyState>3&&i()},u.onprogress=function(t){var e=Hs.event;Hs.event=t;try{s.progress.call(o,u)}finally{Hs.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?a[t]:(null==e?delete a[t]:a[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",o):e},o.responseType=function(t){return arguments.length?(c=t,o):c},o.response=function(t){return n=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(Xs(arguments)))}}),o.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),u.open(n,t,!0),null==e||"accept"in a||(a.accept=e+",*/*"),u.setRequestHeader)for(var l in a)u.setRequestHeader(l,a[l]);return null!=e&&u.overrideMimeType&&u.overrideMimeType(e),null!=c&&(u.responseType=c),null!=i&&o.on("error",i).on("load",function(t){i(null,t)}),s.beforesend.call(o,u),u.send(null==r?null:r),o},o.abort=function(){return u.abort(),o},Hs.rebind(o,s,"on"),null==r?o:o.get(Ae(r))}function Ae(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function Pe(){var t=Oe(),e=Se()-t;e>24?(isFinite(e)&&(clearTimeout(Ka),Ka=setTimeout(Pe,e)),Xa=0):(Xa=1,Za(Pe))}function Oe(){var t=Date.now();for(Qa=Ha;Qa;)t>=Qa.t&&(Qa.f=Qa.c(t-Qa.t)),Qa=Qa.n;return t}function Se(){for(var t,e=Ha,n=1/0;e;)e.f?e=t?t.n=e.n:Ha=e.n:(e.t<n&&(n=e.t),e=(t=e).n);return $a=t,n}function Ce(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function ke(t,e){var n=Math.pow(10,3*aa(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function Me(t){var e=t.decimal,n=t.thousands,r=t.grouping,i=t.currency,o=r?function(t){for(var e=t.length,i=[],o=0,s=r[0];e>0&&s>0;)i.push(t.substring(e-=s,e+s)),s=r[o=(o+1)%r.length];return i.reverse().join(n)}:be;return function(t){var n=tu.exec(t),r=n[1]||" ",s=n[2]||">",a=n[3]||"",u=n[4]||"",c=n[5],l=+n[6],p=n[7],d=n[8],h=n[9],f=1,m="",_="",g=!1;switch(d&&(d=+d.substring(1)),(c||"0"===r&&"="===s)&&(c=r="0",s="=",p&&(l-=Math.floor((l-1)/4))),h){case"n":p=!0,h="g";break;case"%":f=100,_="%",h="f";break;case"p":f=100,_="%",h="r";break;case"b":case"o":case"x":case"X":"#"===u&&(m="0"+h.toLowerCase());case"c":case"d":g=!0,d=0;break;case"s":f=-1,h="r"}"$"===u&&(m=i[0],_=i[1]),"r"!=h||d||(h="g"),null!=d&&("g"==h?d=Math.max(1,Math.min(21,d)):("e"==h||"f"==h)&&(d=Math.max(0,Math.min(20,d)))),h=eu.get(h)||Ie;var v=c&&p;return function(t){if(g&&t%1)return"";var n=0>t||0===t&&0>1/t?(t=-t,"-"):a;if(0>f){var i=Hs.formatPrefix(t,d);t=i.scale(t),_=i.symbol}else t*=f;t=h(t,d);var u=t.lastIndexOf("."),y=0>u?t:t.substring(0,u),w=0>u?"":e+t.substring(u+1);!c&&p&&(y=o(y));var E=m.length+y.length+w.length+(v?0:n.length),b=l>E?new Array(E=l-E+1).join(r):"";return v&&(y=o(b+y)),n+=m,t=y+w,("<"===s?n+t+b:">"===s?b+n+t:"^"===s?b.substring(0,E>>=1)+n+t+b.substring(E):n+(v?t:b+t))+_}}}function Ie(t){return t+""}function De(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Le(t,e,n){function r(e){var n=t(e),r=o(n,1);return r-e>e-n?n:r}function i(n){return e(n=t(new ru(n-1)),1),n}function o(t,n){return e(t=new ru(+t),n),t}function s(t,r,o){var s=i(t),a=[];if(o>1)for(;r>s;)n(s)%o||a.push(new Date(+s)),e(s,1);else for(;r>s;)a.push(new Date(+s)),e(s,1);return a}function a(t,e,n){try{ru=De;var r=new De;return r._=t,s(r,e,n)}finally{ru=Date}}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=s;var u=t.utc=Ne(t);return u.floor=u,u.round=Ne(r),u.ceil=Ne(i),u.offset=Ne(o),u.range=a,t}function Ne(t){return function(e,n){try{ru=De;var r=new De;return r._=e,t(r,n)._}finally{ru=Date}}}function ze(t){function e(t){function e(e){for(var n,i,o,s=[],a=-1,u=0;++a<r;)37===t.charCodeAt(a)&&(s.push(t.substring(u,a)),null!=(i=ou[n=t.charAt(++a)])&&(n=t.charAt(++a)),(o=S[n])&&(n=o(e,null==i?"e"===n?" ":"0":i)),s.push(n),u=a+1);return s.push(t.substring(u,a)),s.join("")}var r=t.length;return e.parse=function(e){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,t,e,0);if(i!=e.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var o=null!=r.Z&&ru!==De,s=new(o?De:ru);return"j"in r?s.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(s.setFullYear(r.y,0,1),s.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(s.getDay()+5)%7:r.w+7*r.U-(s.getDay()+6)%7)):s.setFullYear(r.y,r.m,r.d),s.setHours(r.H+Math.floor(r.Z/100),r.M+r.Z%100,r.S,r.L),o?s._:s},e.toString=function(){return t},e}function n(t,e,n,r){for(var i,o,s,a=0,u=e.length,c=n.length;u>a;){if(r>=c)return-1;if(i=e.charCodeAt(a++),37===i){if(s=e.charAt(a++),o=C[s in ou?e.charAt(a++):s],!o||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(t,e,n){b.lastIndex=0;var r=b.exec(e.substring(n));return r?(t.w=T.get(r[0].toLowerCase()),n+r[0].length):-1}function i(t,e,n){w.lastIndex=0;var r=w.exec(e.substring(n));return r?(t.w=E.get(r[0].toLowerCase()),n+r[0].length):-1}function o(t,e,n){P.lastIndex=0;var r=P.exec(e.substring(n));return r?(t.m=O.get(r[0].toLowerCase()),n+r[0].length):-1}function s(t,e,n){R.lastIndex=0;var r=R.exec(e.substring(n));return r?(t.m=A.get(r[0].toLowerCase()),n+r[0].length):-1}function a(t,e,r){return n(t,S.c.toString(),e,r)}function u(t,e,r){return n(t,S.x.toString(),e,r)}function c(t,e,r){return n(t,S.X.toString(),e,r)}function l(t,e,n){var r=y.get(e.substring(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)}var p=t.dateTime,d=t.date,h=t.time,f=t.periods,m=t.days,_=t.shortDays,g=t.months,v=t.shortMonths;e.utc=function(t){function n(t){try{ru=De;var e=new ru;return e._=t,r(e)}finally{ru=Date}}var r=e(t);return n.parse=function(t){try{ru=De;var e=r.parse(t);return e&&e._}finally{ru=Date}},n.toString=r.toString,n},e.multi=e.utc.multi=nn;var y=Hs.map(),w=Fe(m),E=Ue(m),b=Fe(_),T=Ue(_),R=Fe(g),A=Ue(g),P=Fe(v),O=Ue(v);f.forEach(function(t,e){y.set(t.toLowerCase(),e)});var S={a:function(t){return _[t.getDay()]},A:function(t){return m[t.getDay()]},b:function(t){return v[t.getMonth()]},B:function(t){return g[t.getMonth()]},c:e(p),d:function(t,e){return xe(t.getDate(),e,2)},e:function(t,e){return xe(t.getDate(),e,2)},H:function(t,e){return xe(t.getHours(),e,2)},I:function(t,e){return xe(t.getHours()%12||12,e,2)},j:function(t,e){return xe(1+nu.dayOfYear(t),e,3)},L:function(t,e){return xe(t.getMilliseconds(),e,3)},m:function(t,e){return xe(t.getMonth()+1,e,2)},M:function(t,e){return xe(t.getMinutes(),e,2)},p:function(t){return f[+(t.getHours()>=12)]},S:function(t,e){return xe(t.getSeconds(),e,2)},U:function(t,e){return xe(nu.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return xe(nu.mondayOfYear(t),e,2)},x:e(d),X:e(h),y:function(t,e){return xe(t.getFullYear()%100,e,2)},Y:function(t,e){return xe(t.getFullYear()%1e4,e,4)},Z:tn,"%":function(){return"%"}},C={a:r,A:i,b:o,B:s,c:a,d:$e,e:$e,H:Ke,I:Ke,j:Xe,L:Je,m:He,M:Qe,p:l,S:Ze,U:je,w:Ge,W:Ye,x:u,X:c,y:Ve,Y:Be,Z:We,"%":en};return e}function xe(t,e,n){var r=0>t?"-":"",i=(r?-t:t)+"",o=i.length;return r+(n>o?new Array(n-o+1).join(e)+i:i)}function Fe(t){return new RegExp("^(?:"+t.map(Hs.requote).join("|")+")","i")}function Ue(t){for(var e=new i,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Ge(t,e,n){su.lastIndex=0;var r=su.exec(e.substring(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function je(t,e,n){su.lastIndex=0;var r=su.exec(e.substring(n));return r?(t.U=+r[0],n+r[0].length):-1}function Ye(t,e,n){su.lastIndex=0;var r=su.exec(e.substring(n));return r?(t.W=+r[0],n+r[0].length):-1}function Be(t,e,n){su.lastIndex=0;var r=su.exec(e.substring(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Ve(t,e,n){su.lastIndex=0;var r=su.exec(e.substring(n,n+2));return r?(t.y=qe(+r[0]),n+r[0].length):-1}function We(t,e,n){return/^[+-]\d{4}$/.test(e=e.substring(n,n+5))?(t.Z=+e,n+5):-1}function qe(t){return t+(t>68?1900:2e3)}function He(t,e,n){su.lastIndex=0;var r=su.exec(e.substring(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function $e(t,e,n){su.lastIndex=0;var r=su.exec(e.substring(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Xe(t,e,n){su.lastIndex=0;var r=su.exec(e.substring(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function Ke(t,e,n){su.lastIndex=0;var r=su.exec(e.substring(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Qe(t,e,n){su.lastIndex=0;var r=su.exec(e.substring(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Ze(t,e,n){su.lastIndex=0;var r=su.exec(e.substring(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Je(t,e,n){su.lastIndex=0;var r=su.exec(e.substring(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function tn(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=~~(aa(e)/60),i=aa(e)%60;return n+xe(r,"0",2)+xe(i,"0",2)}function en(t,e,n){au.lastIndex=0;var r=au.exec(e.substring(n,n+1));return r?n+r[0].length:-1}function nn(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}function rn(){}function on(t,e,n){var r=n.s=t+e,i=r-t,o=r-i;n.t=t-o+(e-i)}function sn(t,e){t&&pu.hasOwnProperty(t.type)&&pu[t.type](t,e)}function an(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function un(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)an(t[n],e,1);e.polygonEnd()}function cn(){function t(t,e){t*=ka,e=e*ka/2+Aa/4;var n=t-r,s=Math.cos(e),a=Math.sin(e),u=o*a,c=i*s+u*Math.cos(n),l=u*Math.sin(n);hu.add(Math.atan2(l,c)),r=t,i=s,o=a}var e,n,r,i,o;fu.point=function(s,a){fu.point=t,r=(e=s)*ka,i=Math.cos(a=(n=a)*ka/2+Aa/4),o=Math.sin(a)},fu.lineEnd=function(){t(e,n)}}function ln(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function pn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function dn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function hn(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function fn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function mn(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function _n(t){return[Math.atan2(t[1],t[0]),q(t[2])]}function gn(t,e){return aa(t[0]-e[0])<Sa&&aa(t[1]-e[1])<Sa}function vn(t,e){t*=ka;var n=Math.cos(e*=ka);
yn(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function yn(t,e,n){++mu,gu+=(t-gu)/mu,vu+=(e-vu)/mu,yu+=(n-yu)/mu}function wn(){function t(t,i){t*=ka;var o=Math.cos(i*=ka),s=o*Math.cos(t),a=o*Math.sin(t),u=Math.sin(i),c=Math.atan2(Math.sqrt((c=n*u-r*a)*c+(c=r*s-e*u)*c+(c=e*a-n*s)*c),e*s+n*a+r*u);_u+=c,wu+=c*(e+(e=s)),Eu+=c*(n+(n=a)),bu+=c*(r+(r=u)),yn(e,n,r)}var e,n,r;Pu.point=function(i,o){i*=ka;var s=Math.cos(o*=ka);e=s*Math.cos(i),n=s*Math.sin(i),r=Math.sin(o),Pu.point=t,yn(e,n,r)}}function En(){Pu.point=vn}function bn(){function t(t,e){t*=ka;var n=Math.cos(e*=ka),s=n*Math.cos(t),a=n*Math.sin(t),u=Math.sin(e),c=i*u-o*a,l=o*s-r*u,p=r*a-i*s,d=Math.sqrt(c*c+l*l+p*p),h=r*s+i*a+o*u,f=d&&-W(h)/d,m=Math.atan2(d,h);Tu+=f*c,Ru+=f*l,Au+=f*p,_u+=m,wu+=m*(r+(r=s)),Eu+=m*(i+(i=a)),bu+=m*(o+(o=u)),yn(r,i,o)}var e,n,r,i,o;Pu.point=function(s,a){e=s,n=a,Pu.point=t,s*=ka;var u=Math.cos(a*=ka);r=u*Math.cos(s),i=u*Math.sin(s),o=Math.sin(a),yn(r,i,o)},Pu.lineEnd=function(){t(e,n),Pu.lineEnd=En,Pu.point=vn}}function Tn(){return!0}function Rn(t,e,n,r,i){var o=[],s=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(gn(n,r)){i.lineStart();for(var a=0;e>a;++a)i.point((n=t[a])[0],n[1]);return void i.lineEnd()}var u=new Pn(n,t,null,!0),c=new Pn(n,null,u,!1);u.o=c,o.push(u),s.push(c),u=new Pn(r,t,null,!1),c=new Pn(r,null,u,!0),u.o=c,o.push(u),s.push(c)}}),s.sort(e),An(o),An(s),o.length){for(var a=0,u=n,c=s.length;c>a;++a)s[a].e=u=!u;for(var l,p,d=o[0];;){for(var h=d,f=!0;h.v;)if((h=h.n)===d)return;l=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(f)for(var a=0,c=l.length;c>a;++a)i.point((p=l[a])[0],p[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(f){l=h.p.z;for(var a=l.length-1;a>=0;--a)i.point((p=l[a])[0],p[1])}else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,l=h.z,f=!f}while(!h.v);i.lineEnd()}}}function An(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Pn(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function On(t,e,n,r){return function(i,o){function s(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function a(t,e){var n=i(t,e);_.point(n[0],n[1])}function u(){v.point=a,_.lineStart()}function c(){v.point=s,_.lineEnd()}function l(t,e){m.push([t,e]);var n=i(t,e);w.point(n[0],n[1])}function p(){w.lineStart(),m=[]}function d(){l(m[0][0],m[0][1]),w.lineEnd();var t,e=w.clean(),n=y.buffer(),r=n.length;if(m.pop(),f.push(m),m=null,r){if(1&e){t=n[0];var i,r=t.length-1,s=-1;for(o.lineStart();++s<r;)o.point((i=t[s])[0],i[1]);return void o.lineEnd()}r>1&&2&e&&n.push(n.pop().concat(n.shift())),h.push(n.filter(Sn))}}var h,f,m,_=e(o),g=i.invert(r[0],r[1]),v={point:s,lineStart:u,lineEnd:c,polygonStart:function(){v.point=l,v.lineStart=p,v.lineEnd=d,h=[],f=[],o.polygonStart()},polygonEnd:function(){v.point=s,v.lineStart=u,v.lineEnd=c,h=Hs.merge(h);var t=Mn(g,f);h.length?Rn(h,kn,t,n,o):t&&(o.lineStart(),n(null,null,1,o),o.lineEnd()),o.polygonEnd(),h=f=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},y=Cn(),w=e(y);return v}}function Sn(t){return t.length>1}function Cn(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:h,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function kn(t,e){return((t=t.x)[0]<0?t[1]-Oa-Sa:Oa-t[1])-((e=e.x)[0]<0?e[1]-Oa-Sa:Oa-e[1])}function Mn(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],o=0,s=0;hu.reset();for(var a=0,u=e.length;u>a;++a){var c=e[a],l=c.length;if(l)for(var p=c[0],d=p[0],h=p[1]/2+Aa/4,f=Math.sin(h),m=Math.cos(h),_=1;;){_===l&&(_=0),t=c[_];var g=t[0],v=t[1]/2+Aa/4,y=Math.sin(v),w=Math.cos(v),E=g-d,b=aa(E)>Aa,T=f*y;if(hu.add(Math.atan2(T*Math.sin(E),m*w+T*Math.cos(E))),o+=b?E+(E>=0?Pa:-Pa):E,b^d>=n^g>=n){var R=dn(ln(p),ln(t));mn(R);var A=dn(i,R);mn(A);var P=(b^E>=0?-1:1)*q(A[2]);(r>P||r===P&&(R[0]||R[1]))&&(s+=b^E>=0?1:-1)}if(!_++)break;d=g,f=y,m=w,p=t}}return(-Sa>o||Sa>o&&0>hu)^1&s}function In(t){var e,n=0/0,r=0/0,i=0/0;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?Aa:-Aa,u=aa(o-n);aa(u-Aa)<Sa?(t.point(n,r=(r+s)/2>0?Oa:-Oa),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),e=0):i!==a&&u>=Aa&&(aa(n-i)<Sa&&(n-=i*Sa),aa(o-a)<Sa&&(o-=a*Sa),r=Dn(n,r,o,s),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),e=0),t.point(n=o,r=s),i=a},lineEnd:function(){t.lineEnd(),n=r=0/0},clean:function(){return 2-e}}}function Dn(t,e,n,r){var i,o,s=Math.sin(t-n);return aa(s)>Sa?Math.atan((Math.sin(e)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*o*s)):(e+r)/2}function Ln(t,e,n,r){var i;if(null==t)i=n*Oa,r.point(-Aa,i),r.point(0,i),r.point(Aa,i),r.point(Aa,0),r.point(Aa,-i),r.point(0,-i),r.point(-Aa,-i),r.point(-Aa,0),r.point(-Aa,i);else if(aa(t[0]-e[0])>Sa){var o=t[0]<e[0]?Aa:-Aa;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function Nn(t){function e(t,e){return Math.cos(t)*Math.cos(e)>o}function n(t){var n,o,u,c,l;return{lineStart:function(){c=u=!1,l=1},point:function(p,d){var h,f=[p,d],m=e(p,d),_=s?m?0:i(p,d):m?i(p+(0>p?Aa:-Aa),d):0;if(!n&&(c=u=m)&&t.lineStart(),m!==u&&(h=r(n,f),(gn(n,h)||gn(f,h))&&(f[0]+=Sa,f[1]+=Sa,m=e(f[0],f[1]))),m!==u)l=0,m?(t.lineStart(),h=r(f,n),t.point(h[0],h[1])):(h=r(n,f),t.point(h[0],h[1]),t.lineEnd()),n=h;else if(a&&n&&s^m){var g;_&o||!(g=r(f,n,!0))||(l=0,s?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1])))}!m||n&&gn(n,f)||t.point(f[0],f[1]),n=f,u=m,o=_},lineEnd:function(){u&&t.lineEnd(),n=null},clean:function(){return l|(c&&u)<<1}}}function r(t,e,n){var r=ln(t),i=ln(e),s=[1,0,0],a=dn(r,i),u=pn(a,a),c=a[0],l=u-c*c;if(!l)return!n&&t;var p=o*u/l,d=-o*c/l,h=dn(s,a),f=fn(s,p),m=fn(a,d);hn(f,m);var _=h,g=pn(f,_),v=pn(_,_),y=g*g-v*(pn(f,f)-1);if(!(0>y)){var w=Math.sqrt(y),E=fn(_,(-g-w)/v);if(hn(E,f),E=_n(E),!n)return E;var b,T=t[0],R=e[0],A=t[1],P=e[1];T>R&&(b=T,T=R,R=b);var O=R-T,S=aa(O-Aa)<Sa,C=S||Sa>O;if(!S&&A>P&&(b=A,A=P,P=b),C?S?A+P>0^E[1]<(aa(E[0]-T)<Sa?A:P):A<=E[1]&&E[1]<=P:O>Aa^(T<=E[0]&&E[0]<=R)){var k=fn(_,(-g+w)/v);return hn(k,f),[E,_n(k)]}}}function i(e,n){var r=s?t:Aa-t,i=0;return-r>e?i|=1:e>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var o=Math.cos(t),s=o>0,a=aa(o)>Sa,u=cr(t,6*ka);return On(e,n,u,s?[0,-t]:[-Aa,t-Aa])}function zn(t,e,n,r){return function(i){var o,s=i.a,a=i.b,u=s.x,c=s.y,l=a.x,p=a.y,d=0,h=1,f=l-u,m=p-c;if(o=t-u,f||!(o>0)){if(o/=f,0>f){if(d>o)return;h>o&&(h=o)}else if(f>0){if(o>h)return;o>d&&(d=o)}if(o=n-u,f||!(0>o)){if(o/=f,0>f){if(o>h)return;o>d&&(d=o)}else if(f>0){if(d>o)return;h>o&&(h=o)}if(o=e-c,m||!(o>0)){if(o/=m,0>m){if(d>o)return;h>o&&(h=o)}else if(m>0){if(o>h)return;o>d&&(d=o)}if(o=r-c,m||!(0>o)){if(o/=m,0>m){if(o>h)return;o>d&&(d=o)}else if(m>0){if(d>o)return;h>o&&(h=o)}return d>0&&(i.a={x:u+d*f,y:c+d*m}),1>h&&(i.b={x:u+h*f,y:c+h*m}),i}}}}}}function xn(t,e,n,r){function i(r,i){return aa(r[0]-t)<Sa?i>0?0:3:aa(r[0]-n)<Sa?i>0?2:1:aa(r[1]-e)<Sa?i>0?1:0:i>0?3:2}function o(t,e){return s(t.x,e.x)}function s(t,e){var n=i(t,1),r=i(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){function u(t){for(var e=0,n=_.length,r=t[1],i=0;n>i;++i)for(var o,s=1,a=_[i],u=a.length,c=a[0];u>s;++s)o=a[s],c[1]<=r?o[1]>r&&V(c,o,t)>0&&++e:o[1]<=r&&V(c,o,t)<0&&--e,c=o;return 0!==e}function c(o,a,u,c){var l=0,p=0;if(null==o||(l=i(o,u))!==(p=i(a,u))||s(o,a)<0^u>0){do c.point(0===l||3===l?t:n,l>1?r:e);while((l=(l+u+4)%4)!==p)}else c.point(a[0],a[1])}function l(i,o){return i>=t&&n>=i&&o>=e&&r>=o}function p(t,e){l(t,e)&&a.point(t,e)}function d(){C.point=f,_&&_.push(g=[]),R=!0,T=!1,E=b=0/0}function h(){m&&(f(v,y),w&&T&&O.rejoin(),m.push(O.buffer())),C.point=p,T&&a.lineEnd()}function f(t,e){t=Math.max(-Su,Math.min(Su,t)),e=Math.max(-Su,Math.min(Su,e));var n=l(t,e);if(_&&g.push([t,e]),R)v=t,y=e,w=n,R=!1,n&&(a.lineStart(),a.point(t,e));else if(n&&T)a.point(t,e);else{var r={a:{x:E,y:b},b:{x:t,y:e}};S(r)?(T||(a.lineStart(),a.point(r.a.x,r.a.y)),a.point(r.b.x,r.b.y),n||a.lineEnd(),A=!1):n&&(a.lineStart(),a.point(t,e),A=!1)}E=t,b=e,T=n}var m,_,g,v,y,w,E,b,T,R,A,P=a,O=Cn(),S=zn(t,e,n,r),C={point:p,lineStart:d,lineEnd:h,polygonStart:function(){a=O,m=[],_=[],A=!0},polygonEnd:function(){a=P,m=Hs.merge(m);var e=u([t,r]),n=A&&e,i=m.length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),c(null,null,1,a),a.lineEnd()),i&&Rn(m,o,e,c,a),a.polygonEnd()),m=_=g=null}};return C}}function Fn(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n}function Un(t){var e=0,n=Aa/3,r=er(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Aa/180,n=t[1]*Aa/180):[e/Aa*180,n/Aa*180]},i}function Gn(t,e){function n(t,e){var n=Math.sqrt(o-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),s-n*Math.cos(t)]}var r=Math.sin(t),i=(r+Math.sin(e))/2,o=1+r*(2*i-r),s=Math.sqrt(o)/i;return n.invert=function(t,e){var n=s-e;return[Math.atan2(t,n)/i,q((o-(t*t+n*n)*i*i)/(2*i))]},n}function jn(){function t(t,e){ku+=i*t-r*e,r=t,i=e}var e,n,r,i;Nu.point=function(o,s){Nu.point=t,e=r=o,n=i=s},Nu.lineEnd=function(){t(e,n)}}function Yn(t,e){Mu>t&&(Mu=t),t>Du&&(Du=t),Iu>e&&(Iu=e),e>Lu&&(Lu=e)}function Bn(){function t(t,e){s.push("M",t,",",e,o)}function e(t,e){s.push("M",t,",",e),a.point=n}function n(t,e){s.push("L",t,",",e)}function r(){a.point=t}function i(){s.push("Z")}var o=Vn(4.5),s=[],a={point:t,lineStart:function(){a.point=e},lineEnd:r,polygonStart:function(){a.lineEnd=i},polygonEnd:function(){a.lineEnd=r,a.point=t},pointRadius:function(t){return o=Vn(t),a},result:function(){if(s.length){var t=s.join("");return s=[],t}}};return a}function Vn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Wn(t,e){gu+=t,vu+=e,++yu}function qn(){function t(t,r){var i=t-e,o=r-n,s=Math.sqrt(i*i+o*o);wu+=s*(e+t)/2,Eu+=s*(n+r)/2,bu+=s,Wn(e=t,n=r)}var e,n;xu.point=function(r,i){xu.point=t,Wn(e=r,n=i)}}function Hn(){xu.point=Wn}function $n(){function t(t,e){var n=t-r,o=e-i,s=Math.sqrt(n*n+o*o);wu+=s*(r+t)/2,Eu+=s*(i+e)/2,bu+=s,s=i*t-r*e,Tu+=s*(r+t),Ru+=s*(i+e),Au+=3*s,Wn(r=t,i=e)}var e,n,r,i;xu.point=function(o,s){xu.point=t,Wn(e=r=o,n=i=s)},xu.lineEnd=function(){t(e,n)}}function Xn(t){function e(e,n){t.moveTo(e,n),t.arc(e,n,s,0,Pa)}function n(e,n){t.moveTo(e,n),a.point=r}function r(e,n){t.lineTo(e,n)}function i(){a.point=e}function o(){t.closePath()}var s=4.5,a={point:e,lineStart:function(){a.point=n},lineEnd:i,polygonStart:function(){a.lineEnd=o},polygonEnd:function(){a.lineEnd=i,a.point=e},pointRadius:function(t){return s=t,a},result:h};return a}function Kn(t){function e(t){return(a?r:n)(t)}function n(e){return Jn(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})}function r(e){function n(n,r){n=t(n,r),e.point(n[0],n[1])}function r(){y=0/0,R.point=o,e.lineStart()}function o(n,r){var o=ln([n,r]),s=t(n,r);i(y,w,v,E,b,T,y=s[0],w=s[1],v=n,E=o[0],b=o[1],T=o[2],a,e),e.point(y,w)}function s(){R.point=n,e.lineEnd()}function u(){r(),R.point=c,R.lineEnd=l}function c(t,e){o(p=t,d=e),h=y,f=w,m=E,_=b,g=T,R.point=o}function l(){i(y,w,v,E,b,T,h,f,p,m,_,g,a,e),R.lineEnd=s,s()}var p,d,h,f,m,_,g,v,y,w,E,b,T,R={point:n,lineStart:r,lineEnd:s,polygonStart:function(){e.polygonStart(),R.lineStart=u},polygonEnd:function(){e.polygonEnd(),R.lineStart=r}};return R}function i(e,n,r,a,u,c,l,p,d,h,f,m,_,g){var v=l-e,y=p-n,w=v*v+y*y;if(w>4*o&&_--){var E=a+h,b=u+f,T=c+m,R=Math.sqrt(E*E+b*b+T*T),A=Math.asin(T/=R),P=aa(aa(T)-1)<Sa||aa(r-d)<Sa?(r+d)/2:Math.atan2(b,E),O=t(P,A),S=O[0],C=O[1],k=S-e,M=C-n,I=y*k-v*M;(I*I/w>o||aa((v*k+y*M)/w-.5)>.3||s>a*h+u*f+c*m)&&(i(e,n,r,a,u,c,S,C,P,E/=R,b/=R,T,_,g),g.point(S,C),i(S,C,P,E,b,T,l,p,d,h,f,m,_,g))}}var o=.5,s=Math.cos(30*ka),a=16;return e.precision=function(t){return arguments.length?(a=(o=t*t)>0&&16,e):Math.sqrt(o)},e}function Qn(t){var e=Kn(function(e,n){return t([e*Ma,n*Ma])});return function(t){return nr(e(t))}}function Zn(t){this.stream=t}function Jn(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function tr(t){return er(function(){return t})()}function er(t){function e(t){return t=a(t[0]*ka,t[1]*ka),[t[0]*d+u,c-t[1]*d]}function n(t){return t=a.invert((t[0]-u)/d,(c-t[1])/d),t&&[t[0]*Ma,t[1]*Ma]}function r(){a=Fn(s=or(g,v,y),o);var t=o(m,_);return u=h-t[0]*d,c=f+t[1]*d,i()}function i(){return l&&(l.valid=!1,l=null),e}var o,s,a,u,c,l,p=Kn(function(t,e){return t=o(t,e),[t[0]*d+u,c-t[1]*d]}),d=150,h=480,f=250,m=0,_=0,g=0,v=0,y=0,w=Ou,E=be,b=null,T=null;return e.stream=function(t){return l&&(l.valid=!1),l=nr(w(s,p(E(t)))),l.valid=!0,l},e.clipAngle=function(t){return arguments.length?(w=null==t?(b=t,Ou):Nn((b=+t)*ka),i()):b},e.clipExtent=function(t){return arguments.length?(T=t,E=t?xn(t[0][0],t[0][1],t[1][0],t[1][1]):be,i()):T},e.scale=function(t){return arguments.length?(d=+t,r()):d},e.translate=function(t){return arguments.length?(h=+t[0],f=+t[1],r()):[h,f]},e.center=function(t){return arguments.length?(m=t[0]%360*ka,_=t[1]%360*ka,r()):[m*Ma,_*Ma]},e.rotate=function(t){return arguments.length?(g=t[0]%360*ka,v=t[1]%360*ka,y=t.length>2?t[2]%360*ka:0,r()):[g*Ma,v*Ma,y*Ma]},Hs.rebind(e,p,"precision"),function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,r()}}function nr(t){return Jn(t,function(e,n){t.point(e*ka,n*ka)})}function rr(t,e){return[t,e]}function ir(t,e){return[t>Aa?t-Pa:-Aa>t?t+Pa:t,e]}function or(t,e,n){return t?e||n?Fn(ar(t),ur(e,n)):ar(t):e||n?ur(e,n):ir}function sr(t){return function(e,n){return e+=t,[e>Aa?e-Pa:-Aa>e?e+Pa:e,n]}}function ar(t){var e=sr(t);return e.invert=sr(-t),e}function ur(t,e){function n(t,e){var n=Math.cos(e),a=Math.cos(t)*n,u=Math.sin(t)*n,c=Math.sin(e),l=c*r+a*i;return[Math.atan2(u*o-l*s,a*r-c*i),q(l*o+u*s)]}var r=Math.cos(t),i=Math.sin(t),o=Math.cos(e),s=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),a=Math.cos(t)*n,u=Math.sin(t)*n,c=Math.sin(e),l=c*o-u*s;return[Math.atan2(u*o+c*s,a*r+l*i),q(l*r-a*i)]},n}function cr(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,o,s,a){var u=s*e;null!=i?(i=lr(n,i),o=lr(n,o),(s>0?o>i:i>o)&&(i+=s*Pa)):(i=t+s*Pa,o=t-.5*u);for(var c,l=i;s>0?l>o:o>l;l-=u)a.point((c=_n([n,-r*Math.cos(l),-r*Math.sin(l)]))[0],c[1])}}function lr(t,e){var n=ln(e);n[0]-=t,mn(n);var r=W(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Sa)%(2*Math.PI)}function pr(t,e,n){var r=Hs.range(t,e-Sa,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function dr(t,e,n){var r=Hs.range(t,e-Sa,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function hr(t){return t.source}function fr(t){return t.target}function mr(t,e,n,r){var i=Math.cos(e),o=Math.sin(e),s=Math.cos(r),a=Math.sin(r),u=i*Math.cos(t),c=i*Math.sin(t),l=s*Math.cos(n),p=s*Math.sin(n),d=2*Math.asin(Math.sqrt(K(r-e)+i*s*K(n-t))),h=1/Math.sin(d),f=d?function(t){var e=Math.sin(t*=d)*h,n=Math.sin(d-t)*h,r=n*u+e*l,i=n*c+e*p,s=n*o+e*a;return[Math.atan2(i,r)*Ma,Math.atan2(s,Math.sqrt(r*r+i*i))*Ma]}:function(){return[t*Ma,e*Ma]};return f.distance=d,f}function _r(){function t(t,i){var o=Math.sin(i*=ka),s=Math.cos(i),a=aa((t*=ka)-e),u=Math.cos(a);Fu+=Math.atan2(Math.sqrt((a=s*Math.sin(a))*a+(a=r*o-n*s*u)*a),n*o+r*s*u),e=t,n=o,r=s}var e,n,r;Uu.point=function(i,o){e=i*ka,n=Math.sin(o*=ka),r=Math.cos(o),Uu.point=t},Uu.lineEnd=function(){Uu.point=Uu.lineEnd=h}}function gr(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),o=t(r*i);return[o*i*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),o=Math.sin(i),s=Math.cos(i);return[Math.atan2(t*o,r*s),Math.asin(r&&n*o/r)]},n}function vr(t,e){function n(t,e){var n=aa(aa(e)-Oa)<Sa?0:s/Math.pow(i(e),o);return[n*Math.sin(o*t),s-n*Math.cos(o*t)]}var r=Math.cos(t),i=function(t){return Math.tan(Aa/4+t/2)},o=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(i(e)/i(t)),s=r*Math.pow(i(t),o)/o;return o?(n.invert=function(t,e){var n=s-e,r=B(o)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/o,2*Math.atan(Math.pow(s/r,1/o))-Oa]},n):wr}function yr(t,e){function n(t,e){var n=o-e;return[n*Math.sin(i*t),o-n*Math.cos(i*t)]}var r=Math.cos(t),i=t===e?Math.sin(t):(r-Math.cos(e))/(e-t),o=r/i+t;return aa(i)<Sa?rr:(n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/i,o-B(i)*Math.sqrt(t*t+n*n)]},n)}function wr(t,e){return[t,Math.log(Math.tan(Aa/4+e/2))]}function Er(t){var e,n=tr(t),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var s=o.apply(n,arguments);if(s===n){if(e=null==t){var a=Aa*r(),u=i();o([[u[0]-a,u[1]-a],[u[0]+a,u[1]+a]])}}else e&&(s=null);return s},n.clipExtent(null)}function br(t,e){return[Math.log(Math.tan(Aa/4+e/2)),-t]}function Tr(t){return t[0]}function Rr(t){return t[1]}function Ar(t){for(var e=t.length,n=[0,1],r=2,i=2;e>i;i++){for(;r>1&&V(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function Pr(t,e){return t[0]-e[0]||t[1]-e[1]}function Or(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function Sr(t,e,n,r){var i=t[0],o=n[0],s=e[0]-i,a=r[0]-o,u=t[1],c=n[1],l=e[1]-u,p=r[1]-c,d=(a*(u-c)-p*(i-o))/(p*s-a*l);return[i+d*s,u+d*l]}function Cr(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function kr(){Qr(this),this.edge=this.site=this.circle=null}function Mr(t){var e=Qu.pop()||new kr;return e.site=t,e}function Ir(t){Yr(t),$u.remove(t),Qu.push(t),Qr(t)}function Dr(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},o=t.P,s=t.N,a=[t];Ir(t);for(var u=o;u.circle&&aa(n-u.circle.x)<Sa&&aa(r-u.circle.cy)<Sa;)o=u.P,a.unshift(u),Ir(u),u=o;a.unshift(u),Yr(u);for(var c=s;c.circle&&aa(n-c.circle.x)<Sa&&aa(r-c.circle.cy)<Sa;)s=c.N,a.push(c),Ir(c),c=s;a.push(c),Yr(c);var l,p=a.length;for(l=1;p>l;++l)c=a[l],u=a[l-1],$r(c.edge,u.site,c.site,i);u=a[0],c=a[p-1],c.edge=qr(u.site,c.site,null,i),jr(u),jr(c)}function Lr(t){for(var e,n,r,i,o=t.x,s=t.y,a=$u._;a;)if(r=Nr(a,s)-o,r>Sa)a=a.L;else{if(i=o-zr(a,s),!(i>Sa)){r>-Sa?(e=a.P,n=a):i>-Sa?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}var u=Mr(t);if($u.insert(e,u),e||n){if(e===n)return Yr(e),n=Mr(e.site),$u.insert(u,n),u.edge=n.edge=qr(e.site,u.site),jr(e),void jr(n);if(!n)return void(u.edge=qr(e.site,u.site));Yr(e),Yr(n);var c=e.site,l=c.x,p=c.y,d=t.x-l,h=t.y-p,f=n.site,m=f.x-l,_=f.y-p,g=2*(d*_-h*m),v=d*d+h*h,y=m*m+_*_,w={x:(_*v-h*y)/g+l,y:(d*y-m*v)/g+p};$r(n.edge,c,f,w),u.edge=qr(c,t,null,w),n.edge=qr(t,f,null,w),jr(e),jr(n)}}function Nr(t,e){var n=t.site,r=n.x,i=n.y,o=i-e;if(!o)return r;var s=t.P;if(!s)return-1/0;n=s.site;var a=n.x,u=n.y,c=u-e;if(!c)return a;var l=a-r,p=1/o-1/c,d=l/c;return p?(-d+Math.sqrt(d*d-2*p*(l*l/(-2*c)-u+c/2+i-o/2)))/p+r:(r+a)/2}function zr(t,e){var n=t.N;if(n)return Nr(n,e);var r=t.site;return r.y===e?r.x:1/0}function xr(t){this.site=t,this.edges=[]}function Fr(t){for(var e,n,r,i,o,s,a,u,c,l,p=t[0][0],d=t[1][0],h=t[0][1],f=t[1][1],m=Hu,_=m.length;_--;)if(o=m[_],o&&o.prepare())for(a=o.edges,u=a.length,s=0;u>s;)l=a[s].end(),r=l.x,i=l.y,c=a[++s%u].start(),e=c.x,n=c.y,(aa(r-e)>Sa||aa(i-n)>Sa)&&(a.splice(s,0,new Xr(Hr(o.site,l,aa(r-p)<Sa&&f-i>Sa?{x:p,y:aa(e-p)<Sa?n:f}:aa(i-f)<Sa&&d-r>Sa?{x:aa(n-f)<Sa?e:d,y:f}:aa(r-d)<Sa&&i-h>Sa?{x:d,y:aa(e-d)<Sa?n:h}:aa(i-h)<Sa&&r-p>Sa?{x:aa(n-h)<Sa?e:p,y:h}:null),o.site,null)),++u)}function Ur(t,e){return e.angle-t.angle}function Gr(){Qr(this),this.x=this.y=this.arc=this.site=this.cy=null}function jr(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var s=i.x,a=i.y,u=r.x-s,c=r.y-a,l=o.x-s,p=o.y-a,d=2*(u*p-c*l);if(!(d>=-Ca)){var h=u*u+c*c,f=l*l+p*p,m=(p*h-c*f)/d,_=(u*f-l*h)/d,p=_+a,g=Zu.pop()||new Gr;g.arc=t,g.site=i,g.x=m+s,g.y=p+Math.sqrt(m*m+_*_),g.cy=p,t.circle=g;for(var v=null,y=Ku._;y;)if(g.y<y.y||g.y===y.y&&g.x<=y.x){if(!y.L){v=y.P;break}y=y.L}else{if(!y.R){v=y;break}y=y.R}Ku.insert(v,g),v||(Xu=g)}}}}function Yr(t){var e=t.circle;e&&(e.P||(Xu=e.N),Ku.remove(e),Zu.push(e),Qr(e),t.circle=null)}function Br(t){for(var e,n=qu,r=zn(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;i--;)e=n[i],(!Vr(e,t)||!r(e)||aa(e.a.x-e.b.x)<Sa&&aa(e.a.y-e.b.y)<Sa)&&(e.a=e.b=null,n.splice(i,1))}function Vr(t,e){var n=t.b;if(n)return!0;var r,i,o=t.a,s=e[0][0],a=e[1][0],u=e[0][1],c=e[1][1],l=t.l,p=t.r,d=l.x,h=l.y,f=p.x,m=p.y,_=(d+f)/2,g=(h+m)/2;if(m===h){if(s>_||_>=a)return;if(d>f){if(o){if(o.y>=c)return}else o={x:_,y:u};n={x:_,y:c}}else{if(o){if(o.y<u)return}else o={x:_,y:c};n={x:_,y:u}}}else if(r=(d-f)/(m-h),i=g-r*_,-1>r||r>1)if(d>f){if(o){if(o.y>=c)return}else o={x:(u-i)/r,y:u};n={x:(c-i)/r,y:c}}else{if(o){if(o.y<u)return}else o={x:(c-i)/r,y:c};n={x:(u-i)/r,y:u}}else if(m>h){if(o){if(o.x>=a)return}else o={x:s,y:r*s+i};n={x:a,y:r*a+i}}else{if(o){if(o.x<s)return}else o={x:a,y:r*a+i};n={x:s,y:r*s+i}}return t.a=o,t.b=n,!0}function Wr(t,e){this.l=t,this.r=e,this.a=this.b=null}function qr(t,e,n,r){var i=new Wr(t,e);return qu.push(i),n&&$r(i,t,e,n),r&&$r(i,e,t,r),Hu[t.i].edges.push(new Xr(i,t,e)),Hu[e.i].edges.push(new Xr(i,e,t)),i}function Hr(t,e,n){var r=new Wr(t,null);return r.a=e,r.b=n,qu.push(r),r}function $r(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function Xr(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Kr(){this._=null}function Qr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Zr(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Jr(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ti(t){for(;t.L;)t=t.L;return t}function ei(t,e){var n,r,i,o=t.sort(ni).pop();for(qu=[],Hu=new Array(t.length),$u=new Kr,Ku=new Kr;;)if(i=Xu,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))(o.x!==n||o.y!==r)&&(Hu[o.i]=new xr(o),Lr(o),n=o.x,r=o.y),o=t.pop();else{if(!i)break;Dr(i.arc)}e&&(Br(e),Fr(e));var s={cells:Hu,edges:qu};return $u=Ku=qu=Hu=null,s}function ni(t,e){return e.y-t.y||e.x-t.x}function ri(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function ii(t){return t.x}function oi(t){return t.y}function si(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function ai(t,e,n,r,i,o){if(!t(e,n,r,i,o)){var s=.5*(n+i),a=.5*(r+o),u=e.nodes;u[0]&&ai(t,u[0],n,r,s,a),u[1]&&ai(t,u[1],s,r,i,a),u[2]&&ai(t,u[2],n,a,s,o),u[3]&&ai(t,u[3],s,a,i,o)}}function ui(t,e){t=Hs.rgb(t),e=Hs.rgb(e);var n=t.r,r=t.g,i=t.b,o=e.r-n,s=e.g-r,a=e.b-i;return function(t){return"#"+me(Math.round(n+o*t))+me(Math.round(r+s*t))+me(Math.round(i+a*t))}}function ci(t,e){var n,r={},i={};for(n in t)n in e?r[n]=di(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function li(t,e){return e-=t=+t,function(n){return t+e*n}}function pi(t,e){var n,r,i,o,s,a=0,u=0,c=[],l=[];for(t+="",e+="",tc.lastIndex=0,r=0;n=tc.exec(e);++r)n.index&&c.push(e.substring(a,u=n.index)),l.push({i:c.length,x:n[0]}),c.push(null),a=tc.lastIndex;for(a<e.length&&c.push(e.substring(a)),r=0,o=l.length;(n=tc.exec(t))&&o>r;++r)if(s=l[r],s.x==n[0]){if(s.i)if(null==c[s.i+1])for(c[s.i-1]+=s.x,c.splice(s.i,1),i=r+1;o>i;++i)l[i].i--;else for(c[s.i-1]+=s.x+c[s.i+1],c.splice(s.i,2),i=r+1;o>i;++i)l[i].i-=2;else if(null==c[s.i+1])c[s.i]=s.x;else for(c[s.i]=s.x+c[s.i+1],c.splice(s.i+1,1),i=r+1;o>i;++i)l[i].i--;l.splice(r,1),o--,r--}else s.x=li(parseFloat(n[0]),parseFloat(s.x));for(;o>r;)s=l.pop(),null==c[s.i+1]?c[s.i]=s.x:(c[s.i]=s.x+c[s.i+1],c.splice(s.i+1,1)),o--;return 1===c.length?null==c[0]?(s=l[0].x,function(t){return s(t)+""}):function(){return e}:function(t){for(r=0;o>r;++r)c[(s=l[r]).i]=s.x(t);return c.join("")}}function di(t,e){for(var n,r=Hs.interpolators.length;--r>=0&&!(n=Hs.interpolators[r](t,e)););return n}function hi(t,e){var n,r=[],i=[],o=t.length,s=e.length,a=Math.min(t.length,e.length);for(n=0;a>n;++n)r.push(di(t[n],e[n]));for(;o>n;++n)i[n]=t[n];for(;s>n;++n)i[n]=e[n];return function(t){for(n=0;a>n;++n)i[n]=r[n](t);return i}}function fi(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function mi(t){return function(e){return 1-t(1-e)}}function _i(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function gi(t){return t*t}function vi(t){return t*t*t}function yi(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function wi(t){return function(e){return Math.pow(e,t)}}function Ei(t){return 1-Math.cos(t*Oa)}function bi(t){return Math.pow(2,10*(t-1))}function Ti(t){return 1-Math.sqrt(1-t*t)}function Ri(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Pa*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Pa/e)}}function Ai(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Pi(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Oi(t,e){t=Hs.hcl(t),e=Hs.hcl(e);var n=t.h,r=t.c,i=t.l,o=e.h-n,s=e.c-r,a=e.l-i;return isNaN(s)&&(s=0,r=isNaN(r)?e.c:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return re(n+o*t,r+s*t,i+a*t)+""}}function Si(t,e){t=Hs.hsl(t),e=Hs.hsl(e);var n=t.h,r=t.s,i=t.l,o=e.h-n,s=e.s-r,a=e.l-i;return isNaN(s)&&(s=0,r=isNaN(r)?e.s:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return te(n+o*t,r+s*t,i+a*t)+""}}function Ci(t,e){t=Hs.lab(t),e=Hs.lab(e);var n=t.l,r=t.a,i=t.b,o=e.l-n,s=e.a-r,a=e.b-i;return function(t){return se(n+o*t,r+s*t,i+a*t)+""}}function ki(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Mi(t){var e=[t.a,t.b],n=[t.c,t.d],r=Di(e),i=Ii(e,n),o=Di(Li(n,e,-i))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Ma,this.translate=[t.e,t.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*Ma:0}function Ii(t,e){return t[0]*e[0]+t[1]*e[1]}function Di(t){var e=Math.sqrt(Ii(t,t));return e&&(t[0]/=e,t[1]/=e),e}function Li(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Ni(t,e){var n,r=[],i=[],o=Hs.transform(t),s=Hs.transform(e),a=o.translate,u=s.translate,c=o.rotate,l=s.rotate,p=o.skew,d=s.skew,h=o.scale,f=s.scale;return a[0]!=u[0]||a[1]!=u[1]?(r.push("translate(",null,",",null,")"),i.push({i:1,x:li(a[0],u[0])},{i:3,x:li(a[1],u[1])})):r.push(u[0]||u[1]?"translate("+u+")":""),c!=l?(c-l>180?l+=360:l-c>180&&(c+=360),i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:li(c,l)})):l&&r.push(r.pop()+"rotate("+l+")"),p!=d?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:li(p,d)}):d&&r.push(r.pop()+"skewX("+d+")"),h[0]!=f[0]||h[1]!=f[1]?(n=r.push(r.pop()+"scale(",null,",",null,")"),i.push({i:n-4,x:li(h[0],f[0])},{i:n-2,x:li(h[1],f[1])})):(1!=f[0]||1!=f[1])&&r.push(r.pop()+"scale("+f+")"),n=i.length,function(t){for(var e,o=-1;++o<n;)r[(e=i[o]).i]=e.x(t);return r.join("")}}function zi(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return(n-t)*e}}function xi(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return Math.max(0,Math.min(1,(n-t)*e))}}function Fi(t){for(var e=t.source,n=t.target,r=Gi(e,n),i=[e];e!==r;)e=e.parent,i.push(e);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function Ui(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Gi(t,e){if(t===e)return t;for(var n=Ui(t),r=Ui(e),i=n.pop(),o=r.pop(),s=null;i===o;)s=i,i=n.pop(),o=r.pop();return s}function ji(t){t.fixed|=2}function Yi(t){t.fixed&=-7}function Bi(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Vi(t){t.fixed&=-5}function Wi(t,e,n){var r=0,i=0;if(t.charge=0,!t.leaf)for(var o,s=t.nodes,a=s.length,u=-1;++u<a;)o=s[u],null!=o&&(Wi(o,e,n),t.charge+=o.charge,r+=o.charge*o.cx,i+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var c=e*n[t.point.index];t.charge+=t.pointCharge=c,r+=c*t.point.x,i+=c*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}function qi(t,e){return Hs.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=Ki,t}function Hi(t){return t.children}function $i(t){return t.value}function Xi(t,e){return e.value-t.value}function Ki(t){return Hs.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function Qi(t){return t.x}function Zi(t){return t.y}function Ji(t,e,n){t.y0=e,t.y=n}function to(t){return Hs.range(t.length)}function eo(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function no(t){for(var e,n=1,r=0,i=t[0][1],o=t.length;o>n;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function ro(t){return t.reduce(io,0)}function io(t,e){return t+e[1]}function oo(t,e){return so(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function so(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,o=[];++n<=e;)o[n]=i*n+r;return o}function ao(t){return[Hs.min(t),Hs.max(t)]}function uo(t,e){return t.parent==e.parent?1:2}function co(t){var e=t.children;return e&&e.length?e[0]:t._tree.thread}function lo(t){var e,n=t.children;return n&&(e=n.length)?n[e-1]:t._tree.thread}function po(t,e){var n=t.children;if(n&&(i=n.length))for(var r,i,o=-1;++o<i;)e(r=po(n[o],e),t)>0&&(t=r);return t}function ho(t,e){return t.x-e.x}function fo(t,e){return e.x-t.x}function mo(t,e){return t.depth-e.depth}function _o(t,e){function n(t,r){var i=t.children;if(i&&(s=i.length))for(var o,s,a=null,u=-1;++u<s;)o=i[u],n(o,a),a=o;e(t,r)}n(t,null)}function go(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)e=i[o]._tree,e.prelim+=n,e.mod+=n,n+=e.shift+(r+=e.change)}function vo(t,e,n){t=t._tree,e=e._tree;var r=n/(e.number-t.number);t.change+=r,e.change-=r,e.shift+=n,e.prelim+=n,e.mod+=n}function yo(t,e,n){return t._tree.ancestor.parent==e.parent?t._tree.ancestor:n}function wo(t,e){return t.value-e.value}function Eo(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function bo(t,e){t._pack_next=e,e._pack_prev=t}function To(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function Ro(t){function e(t){l=Math.min(t.x-t.r,l),p=Math.max(t.x+t.r,p),d=Math.min(t.y-t.r,d),h=Math.max(t.y+t.r,h)}if((n=t.children)&&(c=n.length)){var n,r,i,o,s,a,u,c,l=1/0,p=-1/0,d=1/0,h=-1/0;if(n.forEach(Ao),r=n[0],r.x=-r.r,r.y=0,e(r),c>1&&(i=n[1],i.x=i.r,i.y=0,e(i),c>2))for(o=n[2],So(r,i,o),e(o),Eo(r,o),r._pack_prev=o,Eo(o,i),i=r._pack_next,s=3;c>s;s++){So(r,i,o=n[s]);var f=0,m=1,_=1;for(a=i._pack_next;a!==i;a=a._pack_next,m++)if(To(a,o)){f=1;break}if(1==f)for(u=r._pack_prev;u!==a._pack_prev&&!To(u,o);u=u._pack_prev,_++);f?(_>m||m==_&&i.r<r.r?bo(r,i=a):bo(r=u,i),s--):(Eo(r,o),i=o,e(o))}var g=(l+p)/2,v=(d+h)/2,y=0;for(s=0;c>s;s++)o=n[s],o.x-=g,o.y-=v,y=Math.max(y,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=y,n.forEach(Po)}}function Ao(t){t._pack_next=t._pack_prev=t}function Po(t){delete t._pack_next,delete t._pack_prev}function Oo(t,e,n,r){var i=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,i)for(var o=-1,s=i.length;++o<s;)Oo(i[o],e,n,r)}function So(t,e,n){var r=t.r+n.r,i=e.x-t.x,o=e.y-t.y;if(r&&(i||o)){var s=e.r+n.r,a=i*i+o*o;s*=s,r*=r;var u=.5+(r-s)/(2*a),c=Math.sqrt(Math.max(0,2*s*(r+a)-(r-=a)*r-s*s))/(2*a);n.x=t.x+u*i+c*o,n.y=t.y+u*o-c*i}else n.x=t.x+r,n.y=t.y}function Co(t){return 1+Hs.max(t,function(t){return t.y})}function ko(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Mo(t){var e=t.children;return e&&e.length?Mo(e[0]):t}function Io(t){var e,n=t.children;return n&&(e=n.length)?Io(n[e-1]):t}function Do(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Lo(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return 0>i&&(n+=i/2,i=0),0>o&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function No(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function zo(t){return t.rangeExtent?t.rangeExtent():No(t.range())}function xo(t,e,n,r){var i=n(t[0],t[1]),o=r(e[0],e[1]);return function(t){return o(i(t))}}function Fo(t,e){var n,r=0,i=t.length-1,o=t[r],s=t[i];return o>s&&(n=r,r=i,i=n,n=o,o=s,s=n),t[r]=e.floor(o),t[i]=e.ceil(s),t}function Uo(t){return t?{floor:function(e){return Math.floor(e/t)*t
},ceil:function(e){return Math.ceil(e/t)*t}}:pc}function Go(t,e,n,r){var i=[],o=[],s=0,a=Math.min(t.length,e.length)-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<=a;)i.push(n(t[s-1],t[s])),o.push(r(e[s-1],e[s]));return function(e){var n=Hs.bisect(t,e,1,a)-1;return o[n](i[n](e))}}function jo(t,e,n,r){function i(){var i=Math.min(t.length,e.length)>2?Go:xo,u=r?xi:zi;return s=i(t,e,u,n),a=i(e,t,u,di),o}function o(t){return s(t)}var s,a;return o.invert=function(t){return a(t)},o.domain=function(e){return arguments.length?(t=e.map(Number),i()):t},o.range=function(t){return arguments.length?(e=t,i()):e},o.rangeRound=function(t){return o.range(t).interpolate(ki)},o.clamp=function(t){return arguments.length?(r=t,i()):r},o.interpolate=function(t){return arguments.length?(n=t,i()):n},o.ticks=function(e){return Wo(t,e)},o.tickFormat=function(e,n){return qo(t,e,n)},o.nice=function(e){return Bo(t,e),i()},o.copy=function(){return jo(t,e,n,r)},i()}function Yo(t,e){return Hs.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Bo(t,e){return Fo(t,Uo(Vo(t,e)[2]))}function Vo(t,e){null==e&&(e=10);var n=No(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),o=e/r*i;return.15>=o?i*=10:.35>=o?i*=5:.75>=o&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Wo(t,e){return Hs.range.apply(Hs,Vo(t,e))}function qo(t,e,n){var r=Vo(t,e);return Hs.format(n?n.replace(tu,function(t,e,n,i,o,s,a,u,c,l){return[e,n,i,o,s,a,u,c||"."+$o(l,r),l].join("")}):",."+Ho(r[2])+"f")}function Ho(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function $o(t,e){var n=Ho(e[2]);return t in dc?Math.abs(n-Ho(Math.max(Math.abs(e[0]),Math.abs(e[1]))))+ +("e"!==t):n-2*("%"===t)}function Xo(t,e,n,r){function i(t){return(n?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function o(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function s(e){return t(i(e))}return s.invert=function(e){return o(t.invert(e))},s.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((r=e.map(Number)).map(i)),s):r},s.base=function(n){return arguments.length?(e=+n,t.domain(r.map(i)),s):e},s.nice=function(){var e=Fo(r.map(i),n?Math:fc);return t.domain(e),r=e.map(o),s},s.ticks=function(){var t=No(r),s=[],a=t[0],u=t[1],c=Math.floor(i(a)),l=Math.ceil(i(u)),p=e%1?2:e;if(isFinite(l-c)){if(n){for(;l>c;c++)for(var d=1;p>d;d++)s.push(o(c)*d);s.push(o(c))}else for(s.push(o(c));c++<l;)for(var d=p-1;d>0;d--)s.push(o(c)*d);for(c=0;s[c]<a;c++);for(l=s.length;s[l-1]>u;l--);s=s.slice(c,l)}return s},s.tickFormat=function(t,e){if(!arguments.length)return hc;arguments.length<2?e=hc:"function"!=typeof e&&(e=Hs.format(e));var r,a=Math.max(.1,t/s.ticks().length),u=n?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(t){return t/o(u(i(t)+r))<=a?e(t):""}},s.copy=function(){return Xo(t.copy(),e,n,r)},Yo(s,t)}function Ko(t,e,n){function r(e){return t(i(e))}var i=Qo(e),o=Qo(1/e);return r.invert=function(e){return o(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(i)),r):n},r.ticks=function(t){return Wo(n,t)},r.tickFormat=function(t,e){return qo(n,t,e)},r.nice=function(t){return r.domain(Bo(n,t))},r.exponent=function(s){return arguments.length?(i=Qo(e=s),o=Qo(1/e),t.domain(n.map(i)),r):e},r.copy=function(){return Ko(t.copy(),e,n)},Yo(r,t)}function Qo(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function Zo(t,e){function n(n){return s[((o.get(n)||"range"===e.t&&o.set(n,t.push(n)))-1)%s.length]}function r(e,n){return Hs.range(t.length).map(function(t){return e+n*t})}var o,s,a;return n.domain=function(r){if(!arguments.length)return t;t=[],o=new i;for(var s,a=-1,u=r.length;++a<u;)o.has(s=r[a])||o.set(s,t.push(s));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(s=t,a=0,e={t:"range",a:arguments},n):s},n.rangePoints=function(i,o){arguments.length<2&&(o=0);var u=i[0],c=i[1],l=(c-u)/(Math.max(1,t.length-1)+o);return s=r(t.length<2?(u+c)/2:u+l*o/2,l),a=0,e={t:"rangePoints",a:arguments},n},n.rangeBands=function(i,o,u){arguments.length<2&&(o=0),arguments.length<3&&(u=o);var c=i[1]<i[0],l=i[c-0],p=i[1-c],d=(p-l)/(t.length-o+2*u);return s=r(l+d*u,d),c&&s.reverse(),a=d*(1-o),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,o,u){arguments.length<2&&(o=0),arguments.length<3&&(u=o);var c=i[1]<i[0],l=i[c-0],p=i[1-c],d=Math.floor((p-l)/(t.length-o+2*u)),h=p-l-(t.length-o)*d;return s=r(l+Math.round(h/2),d),c&&s.reverse(),a=Math.round(d*(1-o)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return a},n.rangeExtent=function(){return No(e.a[0])},n.copy=function(){return Zo(t,e)},n.domain(t)}function Jo(t,e){function n(){var n=0,o=e.length;for(i=[];++n<o;)i[n-1]=Hs.quantile(t,n/o);return r}function r(t){return isNaN(t=+t)?void 0:e[Hs.bisect(i,t)]}var i;return r.domain=function(e){return arguments.length?(t=e.filter(function(t){return!isNaN(t)}).sort(Hs.ascending),n()):t},r.range=function(t){return arguments.length?(e=t,n()):e},r.quantiles=function(){return i},r.invertExtent=function(n){return n=e.indexOf(n),0>n?[0/0,0/0]:[n>0?i[n-1]:t[0],n<i.length?i[n]:t[t.length-1]]},r.copy=function(){return Jo(t,e)},n()}function ts(t,e,n){function r(e){return n[Math.max(0,Math.min(s,Math.floor(o*(e-t))))]}function i(){return o=n.length/(e-t),s=n.length-1,r}var o,s;return r.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],i()):[t,e]},r.range=function(t){return arguments.length?(n=t,i()):n},r.invertExtent=function(e){return e=n.indexOf(e),e=0>e?0/0:e/o+t,[e,e+1/o]},r.copy=function(){return ts(t,e,n)},i()}function es(t,e){function n(n){return n>=n?e[Hs.bisect(t,n)]:void 0}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return es(t,e)},n}function ns(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return Wo(t,e)},e.tickFormat=function(e,n){return qo(t,e,n)},e.copy=function(){return ns(t)},e}function rs(t){return t.innerRadius}function is(t){return t.outerRadius}function os(t){return t.startAngle}function ss(t){return t.endAngle}function as(t){function e(e){function s(){c.push("M",o(t(l),a))}for(var u,c=[],l=[],p=-1,d=e.length,h=Ee(n),f=Ee(r);++p<d;)i.call(this,u=e[p],p)?l.push([+h.call(this,u,p),+f.call(this,u,p)]):l.length&&(s(),l=[]);return l.length&&s(),c.length?c.join(""):null}var n=Tr,r=Rr,i=Tn,o=us,s=o.key,a=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e.defined=function(t){return arguments.length?(i=t,e):i},e.interpolate=function(t){return arguments.length?(s="function"==typeof t?o=t:(o=Ec.get(t)||us).key,e):s},e.tension=function(t){return arguments.length?(a=t,e):a},e}function us(t){return t.join("L")}function cs(t){return us(t)+"Z"}function ls(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function ps(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function ds(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function hs(t,e){return t.length<4?us(t):t[1]+_s(t.slice(1,t.length-1),gs(t,e))}function fs(t,e){return t.length<3?us(t):t[0]+_s((t.push(t[0]),t),gs([t[t.length-2]].concat(t,[t[1]]),e))}function ms(t,e){return t.length<3?us(t):t[0]+_s(t,gs(t,e))}function _s(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return us(t);var n=t.length!=e.length,r="",i=t[0],o=t[1],s=e[0],a=s,u=1;if(n&&(r+="Q"+(o[0]-2*s[0]/3)+","+(o[1]-2*s[1]/3)+","+o[0]+","+o[1],i=t[1],u=2),e.length>1){a=e[1],o=t[u],u++,r+="C"+(i[0]+s[0])+","+(i[1]+s[1])+","+(o[0]-a[0])+","+(o[1]-a[1])+","+o[0]+","+o[1];for(var c=2;c<e.length;c++,u++)o=t[u],a=e[c],r+="S"+(o[0]-a[0])+","+(o[1]-a[1])+","+o[0]+","+o[1]}if(n){var l=t[u];r+="Q"+(o[0]+2*a[0]/3)+","+(o[1]+2*a[1]/3)+","+l[0]+","+l[1]}return r}function gs(t,e){for(var n,r=[],i=(1-e)/2,o=t[0],s=t[1],a=1,u=t.length;++a<u;)n=o,o=s,s=t[a],r.push([i*(s[0]-n[0]),i*(s[1]-n[1])]);return r}function vs(t){if(t.length<3)return us(t);var e=1,n=t.length,r=t[0],i=r[0],o=r[1],s=[i,i,i,(r=t[1])[0]],a=[o,o,o,r[1]],u=[i,",",o,"L",bs(Rc,s),",",bs(Rc,a)];for(t.push(t[n-1]);++e<=n;)r=t[e],s.shift(),s.push(r[0]),a.shift(),a.push(r[1]),Ts(u,s,a);return t.pop(),u.push("L",r),u.join("")}function ys(t){if(t.length<4)return us(t);for(var e,n=[],r=-1,i=t.length,o=[0],s=[0];++r<3;)e=t[r],o.push(e[0]),s.push(e[1]);for(n.push(bs(Rc,o)+","+bs(Rc,s)),--r;++r<i;)e=t[r],o.shift(),o.push(e[0]),s.shift(),s.push(e[1]),Ts(n,o,s);return n.join("")}function ws(t){for(var e,n,r=-1,i=t.length,o=i+4,s=[],a=[];++r<4;)n=t[r%i],s.push(n[0]),a.push(n[1]);for(e=[bs(Rc,s),",",bs(Rc,a)],--r;++r<o;)n=t[r%i],s.shift(),s.push(n[0]),a.shift(),a.push(n[1]),Ts(e,s,a);return e.join("")}function Es(t,e){var n=t.length-1;if(n)for(var r,i,o=t[0][0],s=t[0][1],a=t[n][0]-o,u=t[n][1]-s,c=-1;++c<=n;)r=t[c],i=c/n,r[0]=e*r[0]+(1-e)*(o+i*a),r[1]=e*r[1]+(1-e)*(s+i*u);return vs(t)}function bs(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Ts(t,e,n){t.push("C",bs(bc,e),",",bs(bc,n),",",bs(Tc,e),",",bs(Tc,n),",",bs(Rc,e),",",bs(Rc,n))}function Rs(t,e){return(e[1]-t[1])/(e[0]-t[0])}function As(t){for(var e=0,n=t.length-1,r=[],i=t[0],o=t[1],s=r[0]=Rs(i,o);++e<n;)r[e]=(s+(s=Rs(i=o,o=t[e+1])))/2;return r[e]=s,r}function Ps(t){for(var e,n,r,i,o=[],s=As(t),a=-1,u=t.length-1;++a<u;)e=Rs(t[a],t[a+1]),aa(e)<Sa?s[a]=s[a+1]=0:(n=s[a]/e,r=s[a+1]/e,i=n*n+r*r,i>9&&(i=3*e/Math.sqrt(i),s[a]=i*n,s[a+1]=i*r));for(a=-1;++a<=u;)i=(t[Math.min(u,a+1)][0]-t[Math.max(0,a-1)][0])/(6*(1+s[a]*s[a])),o.push([i||0,s[a]*i||0]);return o}function Os(t){return t.length<3?us(t):t[0]+_s(t,Ps(t))}function Ss(t){for(var e,n,r,i=-1,o=t.length;++i<o;)e=t[i],n=e[0],r=e[1]+yc,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function Cs(t){function e(e){function u(){m.push("M",a(t(g),p),l,c(t(_.reverse()),p),"Z")}for(var d,h,f,m=[],_=[],g=[],v=-1,y=e.length,w=Ee(n),E=Ee(i),b=n===r?function(){return h}:Ee(r),T=i===o?function(){return f}:Ee(o);++v<y;)s.call(this,d=e[v],v)?(_.push([h=+w.call(this,d,v),f=+E.call(this,d,v)]),g.push([+b.call(this,d,v),+T.call(this,d,v)])):_.length&&(u(),_=[],g=[]);return _.length&&u(),m.length?m.join(""):null}var n=Tr,r=Tr,i=0,o=Rr,s=Tn,a=us,u=a.key,c=a,l="L",p=.7;return e.x=function(t){return arguments.length?(n=r=t,e):r},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(i=o=t,e):o},e.y0=function(t){return arguments.length?(i=t,e):i},e.y1=function(t){return arguments.length?(o=t,e):o},e.defined=function(t){return arguments.length?(s=t,e):s},e.interpolate=function(t){return arguments.length?(u="function"==typeof t?a=t:(a=Ec.get(t)||us).key,c=a.reverse||a,l=a.closed?"M":"L",e):u},e.tension=function(t){return arguments.length?(p=t,e):p},e}function ks(t){return t.radius}function Ms(t){return[t.x,t.y]}function Is(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]+yc;return[n*Math.cos(r),n*Math.sin(r)]}}function Ds(){return 64}function Ls(){return"circle"}function Ns(t){var e=Math.sqrt(t/Aa);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function zs(t,e){return da(t,kc),t.id=e,t}function xs(t,e,n,r){var i=t.id;return L(t,"function"==typeof n?function(t,o,s){t.__transition__[i].tween.set(e,r(n.call(t,t.__data__,o,s)))}:(n=r(n),function(t){t.__transition__[i].tween.set(e,n)}))}function Fs(t){return null==t&&(t=""),function(){this.textContent=t}}function Us(t,e,n,r){var o=t.__transition__||(t.__transition__={active:0,count:0}),s=o[n];if(!s){var a=r.time;s=o[n]={tween:new i,time:a,ease:r.ease,delay:r.delay,duration:r.duration},++o.count,Hs.timer(function(r){function i(r){return o.active>n?c():(o.active=n,s.event&&s.event.start.call(t,l,e),s.tween.forEach(function(n,r){(r=r.call(t,l,e))&&m.push(r)}),void Hs.timer(function(){return f.c=u(r||1)?Tn:u,1},0,a))}function u(r){if(o.active!==n)return c();for(var i=r/h,a=p(i),u=m.length;u>0;)m[--u].call(t,a);return i>=1?(s.event&&s.event.end.call(t,l,e),c()):void 0}function c(){return--o.count?delete o[n]:delete t.__transition__,1}var l=t.__data__,p=s.ease,d=s.delay,h=s.duration,f=Qa,m=[];return f.t=d+a,r>=d?i(r-d):void(f.c=i)},0,a)}}function Gs(t,e){t.attr("transform",function(t){return"translate("+e(t)+",0)"})}function js(t,e){t.attr("transform",function(t){return"translate(0,"+e(t)+")"})}function Ys(t){return t.toISOString()}function Bs(t,e,n){function r(e){return t(e)}function i(t,n){var r=t[1]-t[0],i=r/n,o=Hs.bisect(Uc,i);return o==Uc.length?[e.year,Vo(t.map(function(t){return t/31536e6}),n)[2]]:o?e[i/Uc[o-1]<Uc[o]/i?o-1:o]:[Yc,Vo(t,n)[2]]}return r.invert=function(e){return Vs(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(Vs)},r.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,Vs(+n+1),e).length}var o=r.domain(),s=No(o),a=null==t?i(s,10):"number"==typeof t&&i(s,t);return a&&(t=a[0],e=a[1]),r.domain(Fo(o,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=Vs(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=Vs(+e+1);return e}}:t))},r.ticks=function(t,e){var n=No(r.domain()),o=null==t?i(n,10):"number"==typeof t?i(n,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(n[0],Vs(+n[1]+1),1>e?1:e)},r.tickFormat=function(){return n},r.copy=function(){return Bs(t.copy(),e,n)},Yo(r,t)}function Vs(t){return new Date(t)}function Ws(t){return JSON.parse(t.responseText)}function qs(t){var e=Ks.createRange();return e.selectNode(Ks.body),e.createContextualFragment(t.responseText)}var Hs={version:"3.4.1"};Date.now||(Date.now=function(){return+new Date});var $s=[].slice,Xs=function(t){return $s.call(t)},Ks=document,Qs=Ks.documentElement,Zs=window;try{Xs(Qs.childNodes)[0].nodeType}catch(Js){Xs=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}try{Ks.createElement("div").style.setProperty("opacity",0,"")}catch(ta){var ea=Zs.Element.prototype,na=ea.setAttribute,ra=ea.setAttributeNS,ia=Zs.CSSStyleDeclaration.prototype,oa=ia.setProperty;ea.setAttribute=function(t,e){na.call(this,t,e+"")},ea.setAttributeNS=function(t,e,n){ra.call(this,t,e,n+"")},ia.setProperty=function(t,e,n){oa.call(this,t,e+"",n)}}Hs.ascending=function(t,e){return e>t?-1:t>e?1:t>=e?0:0/0},Hs.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:0/0},Hs.min=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o&&!(null!=(n=t[i])&&n>=n);)n=void 0;for(;++i<o;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<o&&!(null!=(n=e.call(t,t[i],i))&&n>=n);)n=void 0;for(;++i<o;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},Hs.max=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o&&!(null!=(n=t[i])&&n>=n);)n=void 0;for(;++i<o;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<o&&!(null!=(n=e.call(t,t[i],i))&&n>=n);)n=void 0;for(;++i<o;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},Hs.extent=function(t,e){var n,r,i,o=-1,s=t.length;if(1===arguments.length){for(;++o<s&&!(null!=(n=i=t[o])&&n>=n);)n=i=void 0;for(;++o<s;)null!=(r=t[o])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++o<s&&!(null!=(n=i=e.call(t,t[o],o))&&n>=n);)n=void 0;for(;++o<s;)null!=(r=e.call(t,t[o],o))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},Hs.sum=function(t,e){var n,r=0,i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)isNaN(n=+t[o])||(r+=n);else for(;++o<i;)isNaN(n=+e.call(t,t[o],o))||(r+=n);return r},Hs.mean=function(e,n){var r,i=e.length,o=0,s=-1,a=0;if(1===arguments.length)for(;++s<i;)t(r=e[s])&&(o+=(r-o)/++a);else for(;++s<i;)t(r=n.call(e,e[s],s))&&(o+=(r-o)/++a);return a?o:void 0},Hs.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],o=n-r;return o?i+o*(t[r]-i):i},Hs.median=function(e,n){return arguments.length>1&&(e=e.map(n)),e=e.filter(t),e.length?Hs.quantile(e.sort(Hs.ascending),.5):void 0},Hs.bisector=function(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var o=r+i>>>1;t.call(e,e[o],o)<n?r=o+1:i=o}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var o=r+i>>>1;n<t.call(e,e[o],o)?i=o:r=o+1}return r}}};var sa=Hs.bisector(function(t){return t});Hs.bisectLeft=sa.left,Hs.bisect=Hs.bisectRight=sa.right,Hs.shuffle=function(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t},Hs.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},Hs.pairs=function(t){for(var e,n=0,r=t.length-1,i=t[0],o=new Array(0>r?0:r);r>n;)o[n]=[e=i,i=t[++n]];return o},Hs.zip=function(){if(!(i=arguments.length))return[];for(var t=-1,n=Hs.min(arguments,e),r=new Array(n);++t<n;)for(var i,o=-1,s=r[t]=new Array(i);++o<i;)s[o]=arguments[o][t];return r},Hs.transpose=function(t){return Hs.zip.apply(Hs,t)},Hs.keys=function(t){var e=[];for(var n in t)e.push(n);return e},Hs.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},Hs.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},Hs.merge=function(t){for(var e,n,r,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(n=new Array(s);--i>=0;)for(r=t[i],e=r.length;--e>=0;)n[--s]=r[e];return n};var aa=Math.abs;Hs.range=function(t,e,r){if(arguments.length<3&&(r=1,arguments.length<2&&(e=t,t=0)),(e-t)/r===1/0)throw new Error("infinite range");var i,o=[],s=n(aa(r)),a=-1;if(t*=s,e*=s,r*=s,0>r)for(;(i=t+r*++a)>e;)o.push(i/s);else for(;(i=t+r*++a)<e;)o.push(i/s);return o},Hs.map=function(t){var e=new i;if(t instanceof i)t.forEach(function(t,n){e.set(t,n)});else for(var n in t)e.set(n,t[n]);return e},r(i,{has:o,get:function(t){return this[ua+t]},set:function(t,e){return this[ua+t]=e},remove:s,keys:a,values:function(){var t=[];return this.forEach(function(e,n){t.push(n)}),t},entries:function(){var t=[];return this.forEach(function(e,n){t.push({key:e,value:n})}),t},size:u,empty:c,forEach:function(t){for(var e in this)e.charCodeAt(0)===ca&&t.call(this,e.substring(1),this[e])}});var ua="\x00",ca=ua.charCodeAt(0);Hs.nest=function(){function t(e,a,u){if(u>=s.length)return r?r.call(o,a):n?a.sort(n):a;for(var c,l,p,d,h=-1,f=a.length,m=s[u++],_=new i;++h<f;)(d=_.get(c=m(l=a[h])))?d.push(l):_.set(c,[l]);return e?(l=e(),p=function(n,r){l.set(n,t(e,r,u))}):(l={},p=function(n,r){l[n]=t(e,r,u)}),_.forEach(p),l}function e(t,n){if(n>=s.length)return t;var r=[],i=a[n++];return t.forEach(function(t,i){r.push({key:t,values:e(i,n)})}),i?r.sort(function(t,e){return i(t.key,e.key)}):r}var n,r,o={},s=[],a=[];return o.map=function(e,n){return t(n,e,0)},o.entries=function(n){return e(t(Hs.map,n,0),0)},o.key=function(t){return s.push(t),o},o.sortKeys=function(t){return a[s.length-1]=t,o},o.sortValues=function(t){return n=t,o},o.rollup=function(t){return r=t,o},o},Hs.set=function(t){var e=new l;if(t)for(var n=0,r=t.length;r>n;++n)e.add(t[n]);return e},r(l,{has:o,add:function(t){return this[ua+t]=!0,t},remove:function(t){return t=ua+t,t in this&&delete this[t]},values:a,size:u,empty:c,forEach:function(t){for(var e in this)e.charCodeAt(0)===ca&&t.call(this,e.substring(1))}}),Hs.behavior={},Hs.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=p(t,e,e[n]);return t};var la=["webkit","ms","moz","Moz","o","O"];Hs.dispatch=function(){for(var t=new f,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=m(t);return t},f.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.substring(n+1),t=t.substring(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},Hs.event=null,Hs.requote=function(t){return t.replace(pa,"\\$&")};var pa=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,da={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},ha=function(t,e){return e.querySelector(t)},fa=function(t,e){return e.querySelectorAll(t)},ma=Qs[d(Qs,"matchesSelector")],_a=function(t,e){return ma.call(t,e)};"function"==typeof Sizzle&&(ha=function(t,e){return Sizzle(t,e)[0]||null},fa=function(t,e){return Sizzle.uniqueSort(Sizzle(t,e))},_a=Sizzle.matchesSelector),Hs.selection=function(){return wa};var ga=Hs.selection.prototype=[];ga.select=function(t){var e,n,r,i,o=[];t=w(t);for(var s=-1,a=this.length;++s<a;){o.push(e=[]),e.parentNode=(r=this[s]).parentNode;for(var u=-1,c=r.length;++u<c;)(i=r[u])?(e.push(n=t.call(i,i.__data__,u,s)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return y(o)},ga.selectAll=function(t){var e,n,r=[];t=E(t);for(var i=-1,o=this.length;++i<o;)for(var s=this[i],a=-1,u=s.length;++a<u;)(n=s[a])&&(r.push(e=Xs(t.call(n,n.__data__,a,i))),e.parentNode=n);return y(r)};var va={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Hs.ns={prefix:va,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.substring(0,e),t=t.substring(e+1)),va.hasOwnProperty(n)?{space:va[n],local:t}:t}},ga.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=Hs.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(b(e,t[e]));return this}return this.each(b(t,e))},ga.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=A(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!R(t[i]).test(e))return!1;return!0}for(e in t)this.each(P(e,t[e]));return this}return this.each(P(t,e))},ga.style=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e="");for(n in t)this.each(S(n,t[n],e));return this}if(2>r)return Zs.getComputedStyle(this.node(),null).getPropertyValue(t);n=""}return this.each(S(t,e,n))},ga.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(C(e,t[e]));return this}return this.each(C(t,e))},ga.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},ga.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},ga.append=function(t){return t=k(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},ga.insert=function(t,e){return t=k(t),e=w(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},ga.remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},ga.data=function(t,e){function n(t,n){var r,o,s,a=t.length,p=n.length,d=Math.min(a,p),h=new Array(p),f=new Array(p),m=new Array(a);if(e){var _,g=new i,v=new i,y=[];for(r=-1;++r<a;)_=e.call(o=t[r],o.__data__,r),g.has(_)?m[r]=o:g.set(_,o),y.push(_);for(r=-1;++r<p;)_=e.call(n,s=n[r],r),(o=g.get(_))?(h[r]=o,o.__data__=s):v.has(_)||(f[r]=M(s)),v.set(_,s),g.remove(_);for(r=-1;++r<a;)g.has(y[r])&&(m[r]=t[r])}else{for(r=-1;++r<d;)o=t[r],s=n[r],o?(o.__data__=s,h[r]=o):f[r]=M(s);for(;p>r;++r)f[r]=M(n[r]);for(;a>r;++r)m[r]=t[r]}f.update=h,f.parentNode=h.parentNode=m.parentNode=t.parentNode,u.push(f),c.push(h),l.push(m)}var r,o,s=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(r=this[0]).length);++s<a;)(o=r[s])&&(t[s]=o.__data__);return t}var u=N([]),c=y([]),l=y([]);if("function"==typeof t)for(;++s<a;)n(r=this[s],t.call(r,r.parentNode.__data__,s));else for(;++s<a;)n(r=this[s],t);return c.enter=function(){return u},c.exit=function(){return l},c},ga.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},ga.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=I(t));for(var o=0,s=this.length;s>o;o++){i.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var a=0,u=n.length;u>a;a++)(r=n[a])&&t.call(r,r.__data__,a,o)&&e.push(r)}return y(i)},ga.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},ga.sort=function(t){t=D.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},ga.each=function(t){return L(this,function(e,n,r){t.call(e,e.__data__,n,r)})},ga.call=function(t){var e=Xs(arguments);return t.apply(e[0]=this,e),this},ga.empty=function(){return!this.node()},ga.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],r=0,i=n.length;i>r;r++){var o=n[r];if(o)return o}return null},ga.size=function(){var t=0;return this.each(function(){++t}),t};var ya=[];Hs.selection.enter=N,Hs.selection.enter.prototype=ya,ya.append=ga.append,ya.empty=ga.empty,ya.node=ga.node,ya.call=ga.call,ya.size=ga.size,ya.select=function(t){for(var e,n,r,i,o,s=[],a=-1,u=this.length;++a<u;){r=(i=this[a]).update,s.push(e=[]),e.parentNode=i.parentNode;for(var c=-1,l=i.length;++c<l;)(o=i[c])?(e.push(r[c]=n=t.call(i.parentNode,o.__data__,c,a)),n.__data__=o.__data__):e.push(null)}return y(s)},ya.insert=function(t,e){return arguments.length<2&&(e=z(this)),ga.insert.call(this,t,e)},ga.transition=function(){for(var t,e,n=Pc||++Mc,r=[],i=Oc||{time:Date.now(),ease:yi,delay:0,duration:250},o=-1,s=this.length;++o<s;){r.push(t=[]);for(var a=this[o],u=-1,c=a.length;++u<c;)(e=a[u])&&Us(e,u,n,i),t.push(e)}return zs(r,n)},ga.interrupt=function(){return this.each(x)},Hs.select=function(t){var e=["string"==typeof t?ha(t,Ks):t];return e.parentNode=Qs,y([e])},Hs.selectAll=function(t){var e=Xs("string"==typeof t?fa(t,Ks):t);return e.parentNode=Qs,y([e])};var wa=Hs.select(Qs);ga.on=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e=!1);for(n in t)this.each(F(n,t[n],e));return this}if(2>r)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(F(t,e,n))};var Ea=Hs.map({mouseenter:"mouseover",mouseleave:"mouseout"});Ea.forEach(function(t){"on"+t in Ks&&Ea.remove(t)});var ba="onselectstart"in Ks?null:d(Qs.style,"userSelect"),Ta=0;Hs.mouse=function(t){return Y(t,g())};var Ra=/WebKit/.test(Zs.navigator.userAgent)?-1:0;Hs.touches=function(t,e){return arguments.length<2&&(e=g().touches),e?Xs(e).map(function(e){var n=Y(t,e);return n.identifier=e.identifier,n}):[]},Hs.behavior.drag=function(){function t(){this.on("mousedown.drag",s).on("touchstart.drag",a)}function e(){return Hs.event.changedTouches[0].identifier}function n(t,e){return Hs.touches(t).filter(function(t){return t.identifier===e})[0]}function r(t,e,n,r){return function(){function s(){var t=e(l,h),n=t[0]-m[0],r=t[1]-m[1];_|=n|r,m=t,p({type:"drag",x:t[0]+u[0],y:t[1]+u[1],dx:n,dy:r})}function a(){g.on(n+"."+f,null).on(r+"."+f,null),v(_&&Hs.event.target===d),p({type:"dragend"})}var u,c=this,l=c.parentNode,p=i.of(c,arguments),d=Hs.event.target,h=t(),f=null==h?"drag":"drag-"+h,m=e(l,h),_=0,g=Hs.select(Zs).on(n+"."+f,s).on(r+"."+f,a),v=j();o?(u=o.apply(c,arguments),u=[u.x-m[0],u.y-m[1]]):u=[0,0],p({type:"dragstart"})}}var i=v(t,"drag","dragstart","dragend"),o=null,s=r(h,Hs.mouse,"mousemove","mouseup"),a=r(e,n,"touchmove","touchend");return t.origin=function(e){return arguments.length?(o=e,t):o},Hs.rebind(t,i,"on")};var Aa=Math.PI,Pa=2*Aa,Oa=Aa/2,Sa=1e-6,Ca=Sa*Sa,ka=Aa/180,Ma=180/Aa,Ia=Math.SQRT2,Da=2,La=4;Hs.interpolateZoom=function(t,e){function n(t){var e=t*v;if(g){var n=$(m),s=o/(Da*d)*(n*X(Ia*e+m)-H(m));return[r+s*c,i+s*l,o*n/$(Ia*e+m)]}return[r+t*c,i+t*l,o*Math.exp(Ia*e)]}var r=t[0],i=t[1],o=t[2],s=e[0],a=e[1],u=e[2],c=s-r,l=a-i,p=c*c+l*l,d=Math.sqrt(p),h=(u*u-o*o+La*p)/(2*o*Da*d),f=(u*u-o*o-La*p)/(2*u*Da*d),m=Math.log(Math.sqrt(h*h+1)-h),_=Math.log(Math.sqrt(f*f+1)-f),g=_-m,v=(g||Math.log(u/o))/Ia;return n.duration=1e3*v,n},Hs.behavior.zoom=function(){function t(t){t.on(O,c).on(xa+".zoom",p).on(S,d).on("dblclick.zoom",h).on(k,l)}function e(t){return[(t[0]-R.x)/R.k,(t[1]-R.y)/R.k]}function n(t){return[t[0]*R.k+R.x,t[1]*R.k+R.y]}function r(t){R.k=Math.max(P[0],Math.min(P[1],t))}function i(t,e){e=n(e),R.x+=t[0]-e[0],R.y+=t[1]-e[1]}function o(){E&&E.domain(w.range().map(function(t){return(t-R.x)/R.k}).map(w.invert)),T&&T.domain(b.range().map(function(t){return(t-R.y)/R.k}).map(b.invert))}function s(t){t({type:"zoomstart"})}function a(t){o(),t({type:"zoom",scale:R.k,translate:[R.x,R.y]})}function u(t){t({type:"zoomend"})}function c(){function t(){l=1,i(Hs.mouse(r),h),a(o)}function n(){p.on(S,Zs===r?d:null).on(C,null),f(l&&Hs.event.target===c),u(o)}var r=this,o=M.of(r,arguments),c=Hs.event.target,l=0,p=Hs.select(Zs).on(S,t).on(C,n),h=e(Hs.mouse(r)),f=j();x.call(r),s(o)}function l(){function t(){var t=Hs.touches(h);return d=R.k,t.forEach(function(t){t.identifier in m&&(m[t.identifier]=e(t))}),t}function n(){for(var e=Hs.event.changedTouches,n=0,o=e.length;o>n;++n)m[e[n].identifier]=null;var s=t(),u=Date.now();if(1===s.length){if(500>u-y){var c=s[0],l=m[c.identifier];r(2*R.k),i(c,l),_(),a(f)}y=u}else if(s.length>1){var c=s[0],p=s[1],d=c[0]-p[0],h=c[1]-p[1];g=d*d+h*h}}function o(){for(var t,e,n,o,s=Hs.touches(h),u=0,c=s.length;c>u;++u,o=null)if(n=s[u],o=m[n.identifier]){if(e)break;t=n,e=o}if(o){var l=(l=n[0]-t[0])*l+(l=n[1]-t[1])*l,p=g&&Math.sqrt(l/g);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+o[0])/2,(e[1]+o[1])/2],r(p*d)}y=null,i(t,e),a(f)}function p(){if(Hs.event.touches.length){for(var e=Hs.event.changedTouches,n=0,r=e.length;r>n;++n)delete m[e[n].identifier];for(var i in m)return void t()}b.on(w,null).on(E,null),T.on(O,c).on(k,l),A(),u(f)}var d,h=this,f=M.of(h,arguments),m={},g=0,v=Hs.event.changedTouches[0].identifier,w="touchmove.zoom-"+v,E="touchend.zoom-"+v,b=Hs.select(Zs).on(w,o).on(E,p),T=Hs.select(h).on(O,null).on(k,n),A=j();x.call(h),n(),s(f)}function p(){var t=M.of(this,arguments);g?clearTimeout(g):(x.call(this),s(t)),g=setTimeout(function(){g=null,u(t)},50),_();var n=m||Hs.mouse(this);f||(f=e(n)),r(Math.pow(2,.002*Na())*R.k),i(n,f),a(t)}function d(){f=null}function h(){var t=M.of(this,arguments),n=Hs.mouse(this),o=e(n),c=Math.log(R.k)/Math.LN2;s(t),r(Math.pow(2,Hs.event.shiftKey?Math.ceil(c)-1:Math.floor(c)+1)),i(n,o),a(t),u(t)}var f,m,g,y,w,E,b,T,R={x:0,y:0,k:1},A=[960,500],P=za,O="mousedown.zoom",S="mousemove.zoom",C="mouseup.zoom",k="touchstart.zoom",M=v(t,"zoomstart","zoom","zoomend");return t.event=function(t){t.each(function(){var t=M.of(this,arguments),e=R;Pc?Hs.select(this).transition().each("start.zoom",function(){R=this.__chart__||{x:0,y:0,k:1},s(t)}).tween("zoom:zoom",function(){var n=A[0],r=A[1],i=n/2,o=r/2,s=Hs.interpolateZoom([(i-R.x)/R.k,(o-R.y)/R.k,n/R.k],[(i-e.x)/e.k,(o-e.y)/e.k,n/e.k]);return function(e){var r=s(e),u=n/r[2];this.__chart__=R={x:i-r[0]*u,y:o-r[1]*u,k:u},a(t)}}).each("end.zoom",function(){u(t)}):(this.__chart__=R,s(t),a(t),u(t))})},t.translate=function(e){return arguments.length?(R={x:+e[0],y:+e[1],k:R.k},o(),t):[R.x,R.y]},t.scale=function(e){return arguments.length?(R={x:R.x,y:R.y,k:+e},o(),t):R.k},t.scaleExtent=function(e){return arguments.length?(P=null==e?za:[+e[0],+e[1]],t):P},t.center=function(e){return arguments.length?(m=e&&[+e[0],+e[1]],t):m},t.size=function(e){return arguments.length?(A=e&&[+e[0],+e[1]],t):A},t.x=function(e){return arguments.length?(E=e,w=e.copy(),R={x:0,y:0,k:1},t):E},t.y=function(e){return arguments.length?(T=e,b=e.copy(),R={x:0,y:0,k:1},t):T},Hs.rebind(t,M,"on")};var Na,za=[0,1/0],xa="onwheel"in Ks?(Na=function(){return-Hs.event.deltaY*(Hs.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Ks?(Na=function(){return Hs.event.wheelDelta},"mousewheel"):(Na=function(){return-Hs.event.detail},"MozMousePixelScroll");Q.prototype.toString=function(){return this.rgb()+""},Hs.hsl=function(t,e,n){return 1===arguments.length?t instanceof J?Z(t.h,t.s,t.l):_e(""+t,ge,Z):Z(+t,+e,+n)
};var Fa=J.prototype=new Q;Fa.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),Z(this.h,this.s,this.l/t)},Fa.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),Z(this.h,this.s,t*this.l)},Fa.rgb=function(){return te(this.h,this.s,this.l)},Hs.hcl=function(t,e,n){return 1===arguments.length?t instanceof ne?ee(t.h,t.c,t.l):t instanceof oe?ae(t.l,t.a,t.b):ae((t=ve((t=Hs.rgb(t)).r,t.g,t.b)).l,t.a,t.b):ee(+t,+e,+n)};var Ua=ne.prototype=new Q;Ua.brighter=function(t){return ee(this.h,this.c,Math.min(100,this.l+Ga*(arguments.length?t:1)))},Ua.darker=function(t){return ee(this.h,this.c,Math.max(0,this.l-Ga*(arguments.length?t:1)))},Ua.rgb=function(){return re(this.h,this.c,this.l).rgb()},Hs.lab=function(t,e,n){return 1===arguments.length?t instanceof oe?ie(t.l,t.a,t.b):t instanceof ne?re(t.l,t.c,t.h):ve((t=Hs.rgb(t)).r,t.g,t.b):ie(+t,+e,+n)};var Ga=18,ja=.95047,Ya=1,Ba=1.08883,Va=oe.prototype=new Q;Va.brighter=function(t){return ie(Math.min(100,this.l+Ga*(arguments.length?t:1)),this.a,this.b)},Va.darker=function(t){return ie(Math.max(0,this.l-Ga*(arguments.length?t:1)),this.a,this.b)},Va.rgb=function(){return se(this.l,this.a,this.b)},Hs.rgb=function(t,e,n){return 1===arguments.length?t instanceof fe?he(t.r,t.g,t.b):_e(""+t,he,te):he(~~t,~~e,~~n)};var Wa=fe.prototype=new Q;Wa.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&i>e&&(e=i),n&&i>n&&(n=i),r&&i>r&&(r=i),he(Math.min(255,~~(e/t)),Math.min(255,~~(n/t)),Math.min(255,~~(r/t)))):he(i,i,i)},Wa.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),he(~~(t*this.r),~~(t*this.g),~~(t*this.b))},Wa.hsl=function(){return ge(this.r,this.g,this.b)},Wa.toString=function(){return"#"+me(this.r)+me(this.g)+me(this.b)};var qa=Hs.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});qa.forEach(function(t,e){qa.set(t,pe(e))}),Hs.functor=Ee,Hs.xhr=Te(be),Hs.dsv=function(t,e){function n(t,n,o){arguments.length<3&&(o=n,n=null);var s=Re(t,e,null==n?r:i(n),o);return s.row=function(t){return arguments.length?s.response(null==(n=t)?r:i(t)):n},s}function r(t){return n.parse(t.responseText)}function i(t){return function(e){return n.parse(e.responseText,t)}}function o(e){return e.map(s).join(t)}function s(t){return a.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var a=new RegExp('["'+t+"\n]"),u=t.charCodeAt(0);return n.parse=function(t,e){var r;return n.parseRows(t,function(t,n){if(r)return r(t,n-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=e?function(t,n){return e(i(t),n)}:i})},n.parseRows=function(t,e){function n(){if(l>=c)return s;if(i)return i=!1,o;var e=l;if(34===t.charCodeAt(e)){for(var n=e;n++<c;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}l=n+2;var r=t.charCodeAt(n+1);return 13===r?(i=!0,10===t.charCodeAt(n+2)&&++l):10===r&&(i=!0),t.substring(e+1,n).replace(/""/g,'"')}for(;c>l;){var r=t.charCodeAt(l++),a=1;if(10===r)i=!0;else if(13===r)i=!0,10===t.charCodeAt(l)&&(++l,++a);else if(r!==u)continue;return t.substring(e,l-a)}return t.substring(e)}for(var r,i,o={},s={},a=[],c=t.length,l=0,p=0;(r=n())!==s;){for(var d=[];r!==o&&r!==s;)d.push(r),r=n();(!e||(d=e(d,p++)))&&a.push(d)}return a},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var r=new l,i=[];return e.forEach(function(t){for(var e in t)r.has(e)||i.push(r.add(e))}),[i.map(s).join(t)].concat(e.map(function(e){return i.map(function(t){return s(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(o).join("\n")},n},Hs.csv=Hs.dsv(",","text/csv"),Hs.tsv=Hs.dsv("	","text/tab-separated-values");var Ha,$a,Xa,Ka,Qa,Za=Zs[d(Zs,"requestAnimationFrame")]||function(t){setTimeout(t,17)};Hs.timer=function(t,e,n){var r=arguments.length;2>r&&(e=0),3>r&&(n=Date.now());var i=n+e,o={c:t,t:i,f:!1,n:null};$a?$a.n=o:Ha=o,$a=o,Xa||(Ka=clearTimeout(Ka),Xa=1,Za(Pe))},Hs.timer.flush=function(){Oe(),Se()},Hs.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Ja=["y","z","a","f","p","n","¬µ","m","","k","M","G","T","P","E","Z","Y"].map(ke);Hs.formatPrefix=function(t,e){var n=0;return t&&(0>t&&(t*=-1),e&&(t=Hs.round(t,Ce(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((0>=n?n+1:n-1)/3)))),Ja[8+n/3]};var tu=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,eu=Hs.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=Hs.round(t,Ce(t,e))).toFixed(Math.max(0,Math.min(20,Ce(t*(1+1e-15),e))))}}),nu=Hs.time={},ru=Date;De.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){iu.setUTCDate.apply(this._,arguments)},setDay:function(){iu.setUTCDay.apply(this._,arguments)},setFullYear:function(){iu.setUTCFullYear.apply(this._,arguments)},setHours:function(){iu.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){iu.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){iu.setUTCMinutes.apply(this._,arguments)},setMonth:function(){iu.setUTCMonth.apply(this._,arguments)},setSeconds:function(){iu.setUTCSeconds.apply(this._,arguments)},setTime:function(){iu.setTime.apply(this._,arguments)}};var iu=Date.prototype;nu.year=Le(function(t){return t=nu.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),nu.years=nu.year.range,nu.years.utc=nu.year.utc.range,nu.day=Le(function(t){var e=new ru(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),nu.days=nu.day.range,nu.days.utc=nu.day.utc.range,nu.dayOfYear=function(t){var e=nu.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=nu[t]=Le(function(t){return(t=nu.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=nu.year(t).getDay();return Math.floor((nu.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});nu[t+"s"]=n.range,nu[t+"s"].utc=n.utc.range,nu[t+"OfYear"]=function(t){var n=nu.year(t).getDay();return Math.floor((nu.dayOfYear(t)+(n+e)%7)/7)}}),nu.week=nu.sunday,nu.weeks=nu.sunday.range,nu.weeks.utc=nu.sunday.utc.range,nu.weekOfYear=nu.sundayOfYear;var ou={"-":"",_:" ",0:"0"},su=/^\s*\d+/,au=/^%/;Hs.locale=function(t){return{numberFormat:Me(t),timeFormat:ze(t)}};var uu=Hs.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Hs.format=uu.numberFormat,Hs.geo={},rn.prototype={s:0,t:0,add:function(t){on(t,this.t,cu),on(cu.s,this.s,this),this.s?this.t+=cu.t:this.s=cu.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var cu=new rn;Hs.geo.stream=function(t,e){t&&lu.hasOwnProperty(t.type)?lu[t.type](t,e):sn(t,e)};var lu={Feature:function(t,e){sn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)sn(n[r].geometry,e)}},pu={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){an(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)an(n[r],e,0)},Polygon:function(t,e){un(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)un(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)sn(n[r],e)}};Hs.geo.area=function(t){return du=0,Hs.geo.stream(t,fu),du};var du,hu=new rn,fu={sphere:function(){du+=4*Aa},point:h,lineStart:h,lineEnd:h,polygonStart:function(){hu.reset(),fu.lineStart=cn},polygonEnd:function(){var t=2*hu;du+=0>t?4*Aa+t:t,fu.lineStart=fu.lineEnd=fu.point=h}};Hs.geo.bounds=function(){function t(t,e){y.push(w=[l=t,d=t]),p>e&&(p=e),e>h&&(h=e)}function e(e,n){var r=ln([e*ka,n*ka]);if(g){var i=dn(g,r),o=[i[1],-i[0],0],s=dn(o,i);mn(s),s=_n(s);var u=e-f,c=u>0?1:-1,m=s[0]*Ma*c,_=aa(u)>180;if(_^(m>c*f&&c*e>m)){var v=s[1]*Ma;v>h&&(h=v)}else if(m=(m+360)%360-180,_^(m>c*f&&c*e>m)){var v=-s[1]*Ma;p>v&&(p=v)}else p>n&&(p=n),n>h&&(h=n);_?f>e?a(l,e)>a(l,d)&&(d=e):a(e,d)>a(l,d)&&(l=e):d>=l?(l>e&&(l=e),e>d&&(d=e)):e>f?a(l,e)>a(l,d)&&(d=e):a(e,d)>a(l,d)&&(l=e)}else t(e,n);g=r,f=e}function n(){E.point=e}function r(){w[0]=l,w[1]=d,E.point=t,g=null}function i(t,n){if(g){var r=t-f;v+=aa(r)>180?r+(r>0?360:-360):r}else m=t,_=n;fu.point(t,n),e(t,n)}function o(){fu.lineStart()}function s(){i(m,_),fu.lineEnd(),aa(v)>Sa&&(l=-(d=180)),w[0]=l,w[1]=d,g=null}function a(t,e){return(e-=t)<0?e+360:e}function u(t,e){return t[0]-e[0]}function c(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var l,p,d,h,f,m,_,g,v,y,w,E={point:t,lineStart:n,lineEnd:r,polygonStart:function(){E.point=i,E.lineStart=o,E.lineEnd=s,v=0,fu.polygonStart()},polygonEnd:function(){fu.polygonEnd(),E.point=t,E.lineStart=n,E.lineEnd=r,0>hu?(l=-(d=180),p=-(h=90)):v>Sa?h=90:-Sa>v&&(p=-90),w[0]=l,w[1]=d}};return function(t){h=d=-(l=p=1/0),y=[],Hs.geo.stream(t,E);var e=y.length;if(e){y.sort(u);for(var n,r=1,i=y[0],o=[i];e>r;++r)n=y[r],c(n[0],i)||c(n[1],i)?(a(i[0],n[1])>a(i[0],i[1])&&(i[1]=n[1]),a(n[0],i[1])>a(i[0],i[1])&&(i[0]=n[0])):o.push(i=n);for(var s,n,f=-1/0,e=o.length-1,r=0,i=o[e];e>=r;i=n,++r)n=o[r],(s=a(i[1],n[0]))>f&&(f=s,l=n[0],d=i[1])}return y=w=null,1/0===l||1/0===p?[[0/0,0/0],[0/0,0/0]]:[[l,p],[d,h]]}}(),Hs.geo.centroid=function(t){mu=_u=gu=vu=yu=wu=Eu=bu=Tu=Ru=Au=0,Hs.geo.stream(t,Pu);var e=Tu,n=Ru,r=Au,i=e*e+n*n+r*r;return Ca>i&&(e=wu,n=Eu,r=bu,Sa>_u&&(e=gu,n=vu,r=yu),i=e*e+n*n+r*r,Ca>i)?[0/0,0/0]:[Math.atan2(n,e)*Ma,q(r/Math.sqrt(i))*Ma]};var mu,_u,gu,vu,yu,wu,Eu,bu,Tu,Ru,Au,Pu={sphere:h,point:vn,lineStart:wn,lineEnd:En,polygonStart:function(){Pu.lineStart=bn},polygonEnd:function(){Pu.lineStart=wn}},Ou=On(Tn,In,Ln,[-Aa,-Aa/2]),Su=1e9;Hs.geo.clipExtent=function(){var t,e,n,r,i,o,s={stream:function(t){return i&&(i.valid=!1),i=o(t),i.valid=!0,i},extent:function(a){return arguments.length?(o=xn(t=+a[0][0],e=+a[0][1],n=+a[1][0],r=+a[1][1]),i&&(i.valid=!1,i=null),s):[[t,e],[n,r]]}};return s.extent([[0,0],[960,500]])},(Hs.geo.conicEqualArea=function(){return Un(Gn)}).raw=Gn,Hs.geo.albers=function(){return Hs.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Hs.geo.albersUsa=function(){function t(t){var o=t[0],s=t[1];return e=null,n(o,s),e||(r(o,s),e)||i(o,s),e}var e,n,r,i,o=Hs.geo.albers(),s=Hs.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=Hs.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&.234>i&&r>=-.425&&-.214>r?s:i>=.166&&.234>i&&r>=-.214&&-.115>r?a:o).invert(t)},t.stream=function(t){var e=o.stream(t),n=s.stream(t),r=a.stream(t);return{point:function(t,i){e.point(t,i),n.point(t,i),r.point(t,i)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},t.precision=function(e){return arguments.length?(o.precision(e),s.precision(e),a.precision(e),t):o.precision()},t.scale=function(e){return arguments.length?(o.scale(e),s.scale(.35*e),a.scale(e),t.translate(o.translate())):o.scale()},t.translate=function(e){if(!arguments.length)return o.translate();var c=o.scale(),l=+e[0],p=+e[1];return n=o.translate(e).clipExtent([[l-.455*c,p-.238*c],[l+.455*c,p+.238*c]]).stream(u).point,r=s.translate([l-.307*c,p+.201*c]).clipExtent([[l-.425*c+Sa,p+.12*c+Sa],[l-.214*c-Sa,p+.234*c-Sa]]).stream(u).point,i=a.translate([l-.205*c,p+.212*c]).clipExtent([[l-.214*c+Sa,p+.166*c+Sa],[l-.115*c-Sa,p+.234*c-Sa]]).stream(u).point,t},t.scale(1070)};var Cu,ku,Mu,Iu,Du,Lu,Nu={point:h,lineStart:h,lineEnd:h,polygonStart:function(){ku=0,Nu.lineStart=jn},polygonEnd:function(){Nu.lineStart=Nu.lineEnd=Nu.point=h,Cu+=aa(ku/2)}},zu={point:Yn,lineStart:h,lineEnd:h,polygonStart:h,polygonEnd:h},xu={point:Wn,lineStart:qn,lineEnd:Hn,polygonStart:function(){xu.lineStart=$n},polygonEnd:function(){xu.point=Wn,xu.lineStart=qn,xu.lineEnd=Hn}};Hs.geo.path=function(){function t(t){return t&&("function"==typeof a&&o.pointRadius(+a.apply(this,arguments)),s&&s.valid||(s=i(o)),Hs.geo.stream(t,s)),o.result()}function e(){return s=null,t}var n,r,i,o,s,a=4.5;return t.area=function(t){return Cu=0,Hs.geo.stream(t,i(Nu)),Cu},t.centroid=function(t){return gu=vu=yu=wu=Eu=bu=Tu=Ru=Au=0,Hs.geo.stream(t,i(xu)),Au?[Tu/Au,Ru/Au]:bu?[wu/bu,Eu/bu]:yu?[gu/yu,vu/yu]:[0/0,0/0]},t.bounds=function(t){return Du=Lu=-(Mu=Iu=1/0),Hs.geo.stream(t,i(zu)),[[Mu,Iu],[Du,Lu]]},t.projection=function(t){return arguments.length?(i=(n=t)?t.stream||Qn(t):be,e()):n},t.context=function(t){return arguments.length?(o=null==(r=t)?new Bn:new Xn(t),"function"!=typeof a&&o.pointRadius(a),e()):r},t.pointRadius=function(e){return arguments.length?(a="function"==typeof e?e:(o.pointRadius(+e),+e),t):a},t.projection(Hs.geo.albersUsa()).context(null)},Hs.geo.transform=function(t){return{stream:function(e){var n=new Zn(e);for(var r in t)n[r]=t[r];return n}}},Zn.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Hs.geo.projection=tr,Hs.geo.projectionMutator=er,(Hs.geo.equirectangular=function(){return tr(rr)}).raw=rr.invert=rr,Hs.geo.rotation=function(t){function e(e){return e=t(e[0]*ka,e[1]*ka),e[0]*=Ma,e[1]*=Ma,e}return t=or(t[0]%360*ka,t[1]*ka,t.length>2?t[2]*ka:0),e.invert=function(e){return e=t.invert(e[0]*ka,e[1]*ka),e[0]*=Ma,e[1]*=Ma,e},e},ir.invert=rr,Hs.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,e=or(-t[0]*ka,-t[1]*ka,0).invert,i=[];return n(null,null,1,{point:function(t,n){i.push(t=e(t,n)),t[0]*=Ma,t[1]*=Ma}}),{type:"Polygon",coordinates:[i]}}var e,n,r=[0,0],i=6;return t.origin=function(e){return arguments.length?(r=e,t):r},t.angle=function(r){return arguments.length?(n=cr((e=+r)*ka,i*ka),t):e},t.precision=function(r){return arguments.length?(n=cr(e*ka,(i=+r)*ka),t):i},t.angle(90)},Hs.geo.distance=function(t,e){var n,r=(e[0]-t[0])*ka,i=t[1]*ka,o=e[1]*ka,s=Math.sin(r),a=Math.cos(r),u=Math.sin(i),c=Math.cos(i),l=Math.sin(o),p=Math.cos(o);return Math.atan2(Math.sqrt((n=p*s)*n+(n=c*l-u*p*a)*n),u*l+c*p*a)},Hs.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return Hs.range(Math.ceil(o/_)*_,i,_).map(d).concat(Hs.range(Math.ceil(c/g)*g,u,g).map(h)).concat(Hs.range(Math.ceil(r/f)*f,n,f).filter(function(t){return aa(t%_)>Sa}).map(l)).concat(Hs.range(Math.ceil(a/m)*m,s,m).filter(function(t){return aa(t%g)>Sa}).map(p))}var n,r,i,o,s,a,u,c,l,p,d,h,f=10,m=f,_=90,g=360,v=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[d(o).concat(h(u).slice(1),d(i).reverse().slice(1),h(c).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(o=+e[0][0],i=+e[1][0],c=+e[0][1],u=+e[1][1],o>i&&(e=o,o=i,i=e),c>u&&(e=c,c=u,u=e),t.precision(v)):[[o,c],[i,u]]},t.minorExtent=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],a=+e[0][1],s=+e[1][1],r>n&&(e=r,r=n,n=e),a>s&&(e=a,a=s,s=e),t.precision(v)):[[r,a],[n,s]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(_=+e[0],g=+e[1],t):[_,g]},t.minorStep=function(e){return arguments.length?(f=+e[0],m=+e[1],t):[f,m]},t.precision=function(e){return arguments.length?(v=+e,l=pr(a,s,90),p=dr(r,n,v),d=pr(c,u,90),h=dr(o,i,v),t):v},t.majorExtent([[-180,-90+Sa],[180,90-Sa]]).minorExtent([[-180,-80-Sa],[180,80+Sa]])},Hs.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||r.apply(this,arguments),n||i.apply(this,arguments)]}}var e,n,r=hr,i=fr;return t.distance=function(){return Hs.geo.distance(e||r.apply(this,arguments),n||i.apply(this,arguments))},t.source=function(n){return arguments.length?(r=n,e="function"==typeof n?null:n,t):r},t.target=function(e){return arguments.length?(i=e,n="function"==typeof e?null:e,t):i},t.precision=function(){return arguments.length?t:0},t},Hs.geo.interpolate=function(t,e){return mr(t[0]*ka,t[1]*ka,e[0]*ka,e[1]*ka)},Hs.geo.length=function(t){return Fu=0,Hs.geo.stream(t,Uu),Fu};var Fu,Uu={sphere:h,point:h,lineStart:_r,lineEnd:h,polygonStart:h,polygonEnd:h},Gu=gr(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(Hs.geo.azimuthalEqualArea=function(){return tr(Gu)}).raw=Gu;var ju=gr(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},be);(Hs.geo.azimuthalEquidistant=function(){return tr(ju)}).raw=ju,(Hs.geo.conicConformal=function(){return Un(vr)}).raw=vr,(Hs.geo.conicEquidistant=function(){return Un(yr)}).raw=yr;var Yu=gr(function(t){return 1/t},Math.atan);(Hs.geo.gnomonic=function(){return tr(Yu)}).raw=Yu,wr.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Oa]},(Hs.geo.mercator=function(){return Er(wr)}).raw=wr;var Bu=gr(function(){return 1},Math.asin);(Hs.geo.orthographic=function(){return tr(Bu)}).raw=Bu;var Vu=gr(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(Hs.geo.stereographic=function(){return tr(Vu)}).raw=Vu,br.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Oa]},(Hs.geo.transverseMercator=function(){var t=Er(br),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[-t[1],t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},t.rotate([0,0])}).raw=br,Hs.geom={},Hs.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,i=Ee(n),o=Ee(r),s=t.length,a=[],u=[];for(e=0;s>e;e++)a.push([+i.call(this,t[e],e),+o.call(this,t[e],e),e]);for(a.sort(Pr),e=0;s>e;e++)u.push([a[e][0],-a[e][1]]);var c=Ar(a),l=Ar(u),p=l[0]===c[0],d=l[l.length-1]===c[c.length-1],h=[];for(e=c.length-1;e>=0;--e)h.push(t[a[c[e]][2]]);for(e=+p;e<l.length-d;++e)h.push(t[a[l[e]][2]]);return h}var n=Tr,r=Rr;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e)},Hs.geom.polygon=function(t){return da(t,Wu),t};var Wu=Hs.geom.polygon.prototype=[];Wu.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)t=r,r=this[e],i+=t[1]*r[0]-t[0]*r[1];return.5*i},Wu.centroid=function(t){var e,n,r=-1,i=this.length,o=0,s=0,a=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)e=a,a=this[r],n=e[0]*a[1]-a[0]*e[1],o+=(e[0]+a[0])*n,s+=(e[1]+a[1])*n;return[o*t,s*t]},Wu.clip=function(t){for(var e,n,r,i,o,s,a=Cr(t),u=-1,c=this.length-Cr(this),l=this[c-1];++u<c;){for(e=t.slice(),t.length=0,i=this[u],o=e[(r=e.length-a)-1],n=-1;++n<r;)s=e[n],Or(s,l,i)?(Or(o,l,i)||t.push(Sr(o,s,l,i)),t.push(s)):Or(o,l,i)&&t.push(Sr(o,s,l,i)),o=s;a&&t.push(t[0]),l=i}return t};var qu,Hu,$u,Xu,Ku,Qu=[],Zu=[];xr.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)t=e[n].edge,t.b&&t.a||e.splice(n,1);return e.sort(Ur),e.length},Xr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Kr.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=ti(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Zr(this,n),t=n,n=t.U),n.C=!1,r.C=!0,Jr(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Jr(this,n),t=n,n=t.U),n.C=!1,r.C=!0,Zr(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,s=t.R;if(n=o?s?ti(s):o:s,i?i.L===t?i.L=n:i.R=n:this._=n,o&&s?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=s,s.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(e=i.R,e.C&&(e.C=!1,i.C=!0,Zr(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Jr(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Zr(this,i),t=this._;break}}else if(e=i.L,e.C&&(e.C=!1,i.C=!0,Jr(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Zr(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Jr(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},Hs.geom.voronoi=function(t){function e(t){var e=new Array(t.length),r=a[0][0],i=a[0][1],o=a[1][0],s=a[1][1];return ei(n(t),a).cells.forEach(function(n,a){var u=n.edges,c=n.site,l=e[a]=u.length?u.map(function(t){var e=t.start();return[e.x,e.y]}):c.x>=r&&c.x<=o&&c.y>=i&&c.y<=s?[[r,s],[o,s],[o,i],[r,i]]:[];l.point=t[a]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(o(t,e)/Sa)*Sa,y:Math.round(s(t,e)/Sa)*Sa,i:e}})}var r=Tr,i=Rr,o=r,s=i,a=Ju;return t?e(t):(e.links=function(t){return ei(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return ei(n(t)).cells.forEach(function(n,r){for(var i,o,s=n.site,a=n.edges.sort(Ur),u=-1,c=a.length,l=a[c-1].edge,p=l.l===s?l.r:l.l;++u<c;)i=l,o=p,l=a[u].edge,p=l.l===s?l.r:l.l,r<o.i&&r<p.i&&ri(s,o,p)<0&&e.push([t[r],t[o.i],t[p.i]])}),e},e.x=function(t){return arguments.length?(o=Ee(r=t),e):r},e.y=function(t){return arguments.length?(s=Ee(i=t),e):i},e.clipExtent=function(t){return arguments.length?(a=null==t?Ju:t,e):a===Ju?null:a},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):a===Ju?null:a&&a[1]},e)};var Ju=[[-1e6,-1e6],[1e6,1e6]];Hs.geom.delaunay=function(t){return Hs.geom.voronoi().triangles(t)},Hs.geom.quadtree=function(t,e,n,r,i){function o(t){function o(t,e,n,r,i,o,s,a){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var u=t.x,l=t.y;if(null!=u)if(aa(u-n)+aa(l-r)<.01)c(t,e,n,r,i,o,s,a);else{var p=t.point;t.x=t.y=t.point=null,c(t,p,u,l,i,o,s,a),c(t,e,n,r,i,o,s,a)}else t.x=n,t.y=r,t.point=e}else c(t,e,n,r,i,o,s,a)}function c(t,e,n,r,i,s,a,u){var c=.5*(i+a),l=.5*(s+u),p=n>=c,d=r>=l,h=(d<<1)+p;t.leaf=!1,t=t.nodes[h]||(t.nodes[h]=si()),p?i=c:a=c,d?s=l:u=l,o(t,e,n,r,i,s,a,u)}var l,p,d,h,f,m,_,g,v,y=Ee(a),w=Ee(u);if(null!=e)m=e,_=n,g=r,v=i;else if(g=v=-(m=_=1/0),p=[],d=[],f=t.length,s)for(h=0;f>h;++h)l=t[h],l.x<m&&(m=l.x),l.y<_&&(_=l.y),l.x>g&&(g=l.x),l.y>v&&(v=l.y),p.push(l.x),d.push(l.y);else for(h=0;f>h;++h){var E=+y(l=t[h],h),b=+w(l,h);m>E&&(m=E),_>b&&(_=b),E>g&&(g=E),b>v&&(v=b),p.push(E),d.push(b)}var T=g-m,R=v-_;T>R?v=_+T:g=m+R;var A=si();if(A.add=function(t){o(A,t,+y(t,++h),+w(t,h),m,_,g,v)},A.visit=function(t){ai(t,A,m,_,g,v)},h=-1,null==e){for(;++h<f;)o(A,t[h],p[h],d[h],m,_,g,v);--h}else t.forEach(A.add);return p=d=t=l=null,A}var s,a=Tr,u=Rr;return(s=arguments.length)?(a=ii,u=oi,3===s&&(i=n,r=e,n=e=0),o(t)):(o.x=function(t){return arguments.length?(a=t,o):a},o.y=function(t){return arguments.length?(u=t,o):u},o.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),o):null==e?null:[[e,n],[r,i]]},o.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),o):null==e?null:[r-e,i-n]},o)},Hs.interpolateRgb=ui,Hs.interpolateObject=ci,Hs.interpolateNumber=li,Hs.interpolateString=pi;var tc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;Hs.interpolate=di,Hs.interpolators=[function(t,e){var n=typeof e;return("string"===n?qa.has(e)||/^(#|rgb\(|hsl\()/.test(e)?ui:pi:e instanceof Q?ui:"object"===n?Array.isArray(e)?hi:ci:li)(t,e)}],Hs.interpolateArray=hi;var ec=function(){return be},nc=Hs.map({linear:ec,poly:wi,quad:function(){return gi},cubic:function(){return vi},sin:function(){return Ei},exp:function(){return bi},circle:function(){return Ti},elastic:Ri,back:Ai,bounce:function(){return Pi}}),rc=Hs.map({"in":be,out:mi,"in-out":_i,"out-in":function(t){return _i(mi(t))}});Hs.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.substring(0,e):t,r=e>=0?t.substring(e+1):"in";return n=nc.get(n)||ec,r=rc.get(r)||be,fi(r(n.apply(null,$s.call(arguments,1))))},Hs.interpolateHcl=Oi,Hs.interpolateHsl=Si,Hs.interpolateLab=Ci,Hs.interpolateRound=ki,Hs.transform=function(t){var e=Ks.createElementNS(Hs.ns.prefix.svg,"g");return(Hs.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new Mi(n?n.matrix:ic)})(t)},Mi.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ic={a:1,b:0,c:0,d:1,e:0,f:0};Hs.interpolateTransform=Ni,Hs.layout={},Hs.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(Fi(t[n]));return e}},Hs.layout.chord=function(){function t(){var t,c,p,d,h,f={},m=[],_=Hs.range(o),g=[];for(n=[],r=[],t=0,d=-1;++d<o;){for(c=0,h=-1;++h<o;)c+=i[d][h];m.push(c),g.push(Hs.range(o)),t+=c}for(s&&_.sort(function(t,e){return s(m[t],m[e])}),a&&g.forEach(function(t,e){t.sort(function(t,n){return a(i[e][t],i[e][n])})}),t=(Pa-l*o)/t,c=0,d=-1;++d<o;){for(p=c,h=-1;++h<o;){var v=_[d],y=g[v][h],w=i[v][y],E=c,b=c+=w*t;f[v+"-"+y]={index:v,subindex:y,startAngle:E,endAngle:b,value:w}}r[v]={index:v,startAngle:p,endAngle:c,value:(c-p)/t},c+=l}for(d=-1;++d<o;)for(h=d-1;++h<o;){var T=f[d+"-"+h],R=f[h+"-"+d];(T.value||R.value)&&n.push(T.value<R.value?{source:R,target:T}:{source:T,target:R})}u&&e()}function e(){n.sort(function(t,e){return u((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,r,i,o,s,a,u,c={},l=0;return c.matrix=function(t){return arguments.length?(o=(i=t)&&i.length,n=r=null,c):i},c.padding=function(t){return arguments.length?(l=t,n=r=null,c):l},c.sortGroups=function(t){return arguments.length?(s=t,n=r=null,c):s},c.sortSubgroups=function(t){return arguments.length?(a=t,n=null,c):a},c.sortChords=function(t){return arguments.length?(u=t,n&&e(),c):u},c.chords=function(){return n||t(),n},c.groups=function(){return r||t(),r},c},Hs.layout.force=function(){function t(t){return function(e,n,r,i){if(e.point!==t){var o=e.cx-t.x,s=e.cy-t.y,a=i-n,u=o*o+s*s;if(u>a*a/_){if(f>u){var c=e.charge/u;t.px-=o*c,t.py-=s*c}return!0}if(e.point&&u&&f>u){var c=e.pointCharge/u;t.px-=o*c,t.py-=s*c}}return!e.charge}}function e(t){t.px=Hs.event.x,t.py=Hs.event.y,a.resume()}var n,r,i,o,s,a={},u=Hs.dispatch("start","tick","end"),c=[1,1],l=.9,p=oc,d=sc,h=-30,f=ac,m=.1,_=.64,g=[],v=[];return a.tick=function(){if((r*=.99)<.005)return u.end({type:"end",alpha:r=0}),!0;var e,n,a,p,d,f,_,y,w,E=g.length,b=v.length;for(n=0;b>n;++n)a=v[n],p=a.source,d=a.target,y=d.x-p.x,w=d.y-p.y,(f=y*y+w*w)&&(f=r*o[n]*((f=Math.sqrt(f))-i[n])/f,y*=f,w*=f,d.x-=y*(_=p.weight/(d.weight+p.weight)),d.y-=w*_,p.x+=y*(_=1-_),p.y+=w*_);if((_=r*m)&&(y=c[0]/2,w=c[1]/2,n=-1,_))for(;++n<E;)a=g[n],a.x+=(y-a.x)*_,a.y+=(w-a.y)*_;if(h)for(Wi(e=Hs.geom.quadtree(g),r,s),n=-1;++n<E;)(a=g[n]).fixed||e.visit(t(a));for(n=-1;++n<E;)a=g[n],a.fixed?(a.x=a.px,a.y=a.py):(a.x-=(a.px-(a.px=a.x))*l,a.y-=(a.py-(a.py=a.y))*l);u.tick({type:"tick",alpha:r})},a.nodes=function(t){return arguments.length?(g=t,a):g},a.links=function(t){return arguments.length?(v=t,a):v},a.size=function(t){return arguments.length?(c=t,a):c},a.linkDistance=function(t){return arguments.length?(p="function"==typeof t?t:+t,a):p},a.distance=a.linkDistance,a.linkStrength=function(t){return arguments.length?(d="function"==typeof t?t:+t,a):d},a.friction=function(t){return arguments.length?(l=+t,a):l},a.charge=function(t){return arguments.length?(h="function"==typeof t?t:+t,a):h},a.chargeDistance=function(t){return arguments.length?(f=t*t,a):Math.sqrt(f)},a.gravity=function(t){return arguments.length?(m=+t,a):m},a.theta=function(t){return arguments.length?(_=t*t,a):Math.sqrt(_)},a.alpha=function(t){return arguments.length?(t=+t,r?r=t>0?t:0:t>0&&(u.start({type:"start",alpha:r=t}),Hs.timer(a.tick)),a):r
},a.start=function(){function t(t,r){if(!n){for(n=new Array(u),a=0;u>a;++a)n[a]=[];for(a=0;c>a;++a){var i=v[a];n[i.source.index].push(i.target),n[i.target.index].push(i.source)}}for(var o,s=n[e],a=-1,c=s.length;++a<c;)if(!isNaN(o=s[a][t]))return o;return Math.random()*r}var e,n,r,u=g.length,l=v.length,f=c[0],m=c[1];for(e=0;u>e;++e)(r=g[e]).index=e,r.weight=0;for(e=0;l>e;++e)r=v[e],"number"==typeof r.source&&(r.source=g[r.source]),"number"==typeof r.target&&(r.target=g[r.target]),++r.source.weight,++r.target.weight;for(e=0;u>e;++e)r=g[e],isNaN(r.x)&&(r.x=t("x",f)),isNaN(r.y)&&(r.y=t("y",m)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof p)for(e=0;l>e;++e)i[e]=+p.call(this,v[e],e);else for(e=0;l>e;++e)i[e]=p;if(o=[],"function"==typeof d)for(e=0;l>e;++e)o[e]=+d.call(this,v[e],e);else for(e=0;l>e;++e)o[e]=d;if(s=[],"function"==typeof h)for(e=0;u>e;++e)s[e]=+h.call(this,g[e],e);else for(e=0;u>e;++e)s[e]=h;return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){return n||(n=Hs.behavior.drag().origin(be).on("dragstart.force",ji).on("drag.force",e).on("dragend.force",Yi)),arguments.length?void this.on("mouseover.force",Bi).on("mouseout.force",Vi).call(n):n},Hs.rebind(a,u,"on")};var oc=20,sc=1,ac=1/0;Hs.layout.hierarchy=function(){function t(e,s,a){var u=i.call(n,e,s);if(e.depth=s,a.push(e),u&&(c=u.length)){for(var c,l,p=-1,d=e.children=new Array(c),h=0,f=s+1;++p<c;)l=d[p]=t(u[p],f,a),l.parent=e,h+=l.value;r&&d.sort(r),o&&(e.value=h)}else delete e.children,o&&(e.value=+o.call(n,e,s)||0);return e}function e(t,r){var i=t.children,s=0;if(i&&(a=i.length))for(var a,u=-1,c=r+1;++u<a;)s+=e(i[u],c);else o&&(s=+o.call(n,t,r)||0);return o&&(t.value=s),s}function n(e){var n=[];return t(e,0,n),n}var r=Xi,i=Hi,o=$i;return n.sort=function(t){return arguments.length?(r=t,n):r},n.children=function(t){return arguments.length?(i=t,n):i},n.value=function(t){return arguments.length?(o=t,n):o},n.revalue=function(t){return e(t,0),t},n},Hs.layout.partition=function(){function t(e,n,r,i){var o=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,o&&(s=o.length)){var s,a,u,c=-1;for(r=e.value?r/e.value:0;++c<s;)t(a=o[c],n,u=a.value*r,i),n+=u}}function e(t){var n=t.children,r=0;if(n&&(i=n.length))for(var i,o=-1;++o<i;)r=Math.max(r,e(n[o]));return 1+r}function n(n,o){var s=r.call(this,n,o);return t(s[0],0,i[0],i[1]/e(s[0])),s}var r=Hs.layout.hierarchy(),i=[1,1];return n.size=function(t){return arguments.length?(i=t,n):i},qi(n,r)},Hs.layout.pie=function(){function t(o){var s=o.map(function(n,r){return+e.call(t,n,r)}),a=+("function"==typeof r?r.apply(this,arguments):r),u=(("function"==typeof i?i.apply(this,arguments):i)-a)/Hs.sum(s),c=Hs.range(o.length);null!=n&&c.sort(n===uc?function(t,e){return s[e]-s[t]}:function(t,e){return n(o[t],o[e])});var l=[];return c.forEach(function(t){var e;l[t]={data:o[t],value:e=s[t],startAngle:a,endAngle:a+=e*u}}),l}var e=Number,n=uc,r=0,i=Pa;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(r=e,t):r},t.endAngle=function(e){return arguments.length?(i=e,t):i},t};var uc={};Hs.layout.stack=function(){function t(a,u){var c=a.map(function(n,r){return e.call(t,n,r)}),l=c.map(function(e){return e.map(function(e,n){return[o.call(t,e,n),s.call(t,e,n)]})}),p=n.call(t,l,u);c=Hs.permute(c,p),l=Hs.permute(l,p);var d,h,f,m=r.call(t,l,u),_=c.length,g=c[0].length;for(h=0;g>h;++h)for(i.call(t,c[0][h],f=m[h],l[0][h][1]),d=1;_>d;++d)i.call(t,c[d][h],f+=l[d-1][h][1],l[d][h][1]);return a}var e=be,n=to,r=eo,i=Ji,o=Qi,s=Zi;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:cc.get(e)||to,t):n},t.offset=function(e){return arguments.length?(r="function"==typeof e?e:lc.get(e)||eo,t):r},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(s=e,t):s},t.out=function(e){return arguments.length?(i=e,t):i},t};var cc=Hs.map({"inside-out":function(t){var e,n,r=t.length,i=t.map(no),o=t.map(ro),s=Hs.range(r).sort(function(t,e){return i[t]-i[e]}),a=0,u=0,c=[],l=[];for(e=0;r>e;++e)n=s[e],u>a?(a+=o[n],c.push(n)):(u+=o[n],l.push(n));return l.reverse().concat(c)},reverse:function(t){return Hs.range(t.length).reverse()},"default":to}),lc=Hs.map({silhouette:function(t){var e,n,r,i=t.length,o=t[0].length,s=[],a=0,u=[];for(n=0;o>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];r>a&&(a=r),s.push(r)}for(n=0;o>n;++n)u[n]=(a-s[n])/2;return u},wiggle:function(t){var e,n,r,i,o,s,a,u,c,l=t.length,p=t[0],d=p.length,h=[];for(h[0]=u=c=0,n=1;d>n;++n){for(e=0,i=0;l>e;++e)i+=t[e][n][1];for(e=0,o=0,a=p[n][0]-p[n-1][0];l>e;++e){for(r=0,s=(t[e][n][1]-t[e][n-1][1])/(2*a);e>r;++r)s+=(t[r][n][1]-t[r][n-1][1])/a;o+=s*t[e][n][1]}h[n]=u-=i?o/i*a:0,c>u&&(c=u)}for(n=0;d>n;++n)h[n]-=c;return h},expand:function(t){var e,n,r,i=t.length,o=t[0].length,s=1/i,a=[];for(n=0;o>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];if(r)for(e=0;i>e;e++)t[e][n][1]/=r;else for(e=0;i>e;e++)t[e][n][1]=s}for(n=0;o>n;++n)a[n]=0;return a},zero:eo});Hs.layout.histogram=function(){function t(t,o){for(var s,a,u=[],c=t.map(n,this),l=r.call(this,c,o),p=i.call(this,l,c,o),o=-1,d=c.length,h=p.length-1,f=e?1:1/d;++o<h;)s=u[o]=[],s.dx=p[o+1]-(s.x=p[o]),s.y=0;if(h>0)for(o=-1;++o<d;)a=c[o],a>=l[0]&&a<=l[1]&&(s=u[Hs.bisect(p,a,1,h)-1],s.y+=f,s.push(t[o]));return u}var e=!0,n=Number,r=ao,i=oo;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(r=Ee(e),t):r},t.bins=function(e){return arguments.length?(i="number"==typeof e?function(t){return so(t,e)}:Ee(e),t):i},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},Hs.layout.tree=function(){function t(t,o){function s(t,e){var r=t.children,i=t._tree;if(r&&(o=r.length)){for(var o,a,c,l=r[0],p=l,d=-1;++d<o;)c=r[d],s(c,a),p=u(c,a,p),a=c;go(t);var h=.5*(l._tree.prelim+c._tree.prelim);e?(i.prelim=e._tree.prelim+n(t,e),i.mod=i.prelim-h):i.prelim=h}else e&&(i.prelim=e._tree.prelim+n(t,e))}function a(t,e){t.x=t._tree.prelim+e;var n=t.children;if(n&&(r=n.length)){var r,i=-1;for(e+=t._tree.mod;++i<r;)a(n[i],e)}}function u(t,e,r){if(e){for(var i,o=t,s=t,a=e,u=t.parent.children[0],c=o._tree.mod,l=s._tree.mod,p=a._tree.mod,d=u._tree.mod;a=lo(a),o=co(o),a&&o;)u=co(u),s=lo(s),s._tree.ancestor=t,i=a._tree.prelim+p-o._tree.prelim-c+n(a,o),i>0&&(vo(yo(a,t,r),t,i),c+=i,l+=i),p+=a._tree.mod,c+=o._tree.mod,d+=u._tree.mod,l+=s._tree.mod;a&&!lo(s)&&(s._tree.thread=a,s._tree.mod+=p-l),o&&!co(u)&&(u._tree.thread=o,u._tree.mod+=c-d,r=t)}return r}var c=e.call(this,t,o),l=c[0];_o(l,function(t,e){t._tree={ancestor:t,prelim:0,mod:0,change:0,shift:0,number:e?e._tree.number+1:0}}),s(l),a(l,-l._tree.prelim);var p=po(l,fo),d=po(l,ho),h=po(l,mo),f=p.x-n(p,d)/2,m=d.x+n(d,p)/2,_=h.depth||1;return _o(l,i?function(t){t.x*=r[0],t.y=t.depth*r[1],delete t._tree}:function(t){t.x=(t.x-f)/(m-f)*r[0],t.y=t.depth/_*r[1],delete t._tree}),c}var e=Hs.layout.hierarchy().sort(null).value(null),n=uo,r=[1,1],i=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=null==(r=e),t):i?null:r},t.nodeSize=function(e){return arguments.length?(i=null!=(r=e),t):i?r:null},qi(t,e)},Hs.layout.pack=function(){function t(t,o){var s=n.call(this,t,o),a=s[0],u=i[0],c=i[1],l=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(a.x=a.y=0,_o(a,function(t){t.r=+l(t.value)}),_o(a,Ro),r){var p=r*(e?1:Math.max(2*a.r/u,2*a.r/c))/2;_o(a,function(t){t.r+=p}),_o(a,Ro),_o(a,function(t){t.r-=p})}return Oo(a,u/2,c/2,e?1:1/Math.max(2*a.r/u,2*a.r/c)),s}var e,n=Hs.layout.hierarchy().sort(wo),r=0,i=[1,1];return t.size=function(e){return arguments.length?(i=e,t):i},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(r=+e,t):r},qi(t,n)},Hs.layout.cluster=function(){function t(t,o){var s,a=e.call(this,t,o),u=a[0],c=0;_o(u,function(t){var e=t.children;e&&e.length?(t.x=ko(e),t.y=Co(e)):(t.x=s?c+=n(t,s):0,t.y=0,s=t)});var l=Mo(u),p=Io(u),d=l.x-n(l,p)/2,h=p.x+n(p,l)/2;return _o(u,i?function(t){t.x=(t.x-u.x)*r[0],t.y=(u.y-t.y)*r[1]}:function(t){t.x=(t.x-d)/(h-d)*r[0],t.y=(1-(u.y?t.y/u.y:1))*r[1]}),a}var e=Hs.layout.hierarchy().sort(null).value(null),n=uo,r=[1,1],i=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=null==(r=e),t):i?null:r},t.nodeSize=function(e){return arguments.length?(i=null!=(r=e),t):i?r:null},qi(t,e)},Hs.layout.treemap=function(){function t(t,e){for(var n,r,i=-1,o=t.length;++i<o;)r=(n=t[i]).value*(0>e?0:e),n.area=isNaN(r)||0>=r?0:r}function e(n){var o=n.children;if(o&&o.length){var s,a,u,c=p(n),l=[],d=o.slice(),f=1/0,m="slice"===h?c.dx:"dice"===h?c.dy:"slice-dice"===h?1&n.depth?c.dy:c.dx:Math.min(c.dx,c.dy);for(t(d,c.dx*c.dy/n.value),l.area=0;(u=d.length)>0;)l.push(s=d[u-1]),l.area+=s.area,"squarify"!==h||(a=r(l,m))<=f?(d.pop(),f=a):(l.area-=l.pop().area,i(l,m,c,!1),m=Math.min(c.dx,c.dy),l.length=l.area=0,f=1/0);l.length&&(i(l,m,c,!0),l.length=l.area=0),o.forEach(e)}}function n(e){var r=e.children;if(r&&r.length){var o,s=p(e),a=r.slice(),u=[];for(t(a,s.dx*s.dy/e.value),u.area=0;o=a.pop();)u.push(o),u.area+=o.area,null!=o.z&&(i(u,o.z?s.dx:s.dy,s,!a.length),u.length=u.area=0);r.forEach(n)}}function r(t,e){for(var n,r=t.area,i=0,o=1/0,s=-1,a=t.length;++s<a;)(n=t[s].area)&&(o>n&&(o=n),n>i&&(i=n));return r*=r,e*=e,r?Math.max(e*i*f/r,r/(e*o*f)):1/0}function i(t,e,n,r){var i,o=-1,s=t.length,a=n.x,c=n.y,l=e?u(t.area/e):0;if(e==n.dx){for((r||l>n.dy)&&(l=n.dy);++o<s;)i=t[o],i.x=a,i.y=c,i.dy=l,a+=i.dx=Math.min(n.x+n.dx-a,l?u(i.area/l):0);i.z=!0,i.dx+=n.x+n.dx-a,n.y+=l,n.dy-=l}else{for((r||l>n.dx)&&(l=n.dx);++o<s;)i=t[o],i.x=a,i.y=c,i.dx=l,c+=i.dy=Math.min(n.y+n.dy-c,l?u(i.area/l):0);i.z=!1,i.dy+=n.y+n.dy-c,n.x+=l,n.dx-=l}}function o(r){var i=s||a(r),o=i[0];return o.x=0,o.y=0,o.dx=c[0],o.dy=c[1],s&&a.revalue(o),t([o],o.dx*o.dy/o.value),(s?n:e)(o),d&&(s=i),i}var s,a=Hs.layout.hierarchy(),u=Math.round,c=[1,1],l=null,p=Do,d=!1,h="squarify",f=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(c=t,o):c},o.padding=function(t){function e(e){var n=t.call(o,e,e.depth);return null==n?Do(e):Lo(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Lo(e,t)}if(!arguments.length)return l;var r;return p=null==(l=t)?Do:"function"==(r=typeof t)?e:"number"===r?(t=[t,t,t,t],n):n,o},o.round=function(t){return arguments.length?(u=t?Math.round:Number,o):u!=Number},o.sticky=function(t){return arguments.length?(d=t,s=null,o):d},o.ratio=function(t){return arguments.length?(f=t,o):f},o.mode=function(t){return arguments.length?(h=t+"",o):h},qi(o,a)},Hs.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=Hs.random.normal.apply(Hs,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=Hs.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e}}},Hs.scale={};var pc={floor:be,ceil:be};Hs.scale.linear=function(){return jo([0,1],[0,1],di,!1)};var dc={s:1,g:1,p:1,r:1,e:1};Hs.scale.log=function(){return Xo(Hs.scale.linear().domain([0,1]),10,!0,[1,10])};var hc=Hs.format(".0e"),fc={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};Hs.scale.pow=function(){return Ko(Hs.scale.linear(),1,[0,1])},Hs.scale.sqrt=function(){return Hs.scale.pow().exponent(.5)},Hs.scale.ordinal=function(){return Zo([],{t:"range",a:[[]]})},Hs.scale.category10=function(){return Hs.scale.ordinal().range(mc)},Hs.scale.category20=function(){return Hs.scale.ordinal().range(_c)},Hs.scale.category20b=function(){return Hs.scale.ordinal().range(gc)},Hs.scale.category20c=function(){return Hs.scale.ordinal().range(vc)};var mc=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(de),_c=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(de),gc=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(de),vc=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(de);Hs.scale.quantile=function(){return Jo([],[])},Hs.scale.quantize=function(){return ts(0,1,[0,1])},Hs.scale.threshold=function(){return es([.5],[0,1])},Hs.scale.identity=function(){return ns([0,1])},Hs.svg={},Hs.svg.arc=function(){function t(){var t=e.apply(this,arguments),o=n.apply(this,arguments),s=r.apply(this,arguments)+yc,a=i.apply(this,arguments)+yc,u=(s>a&&(u=s,s=a,a=u),a-s),c=Aa>u?"0":"1",l=Math.cos(s),p=Math.sin(s),d=Math.cos(a),h=Math.sin(a);return u>=wc?t?"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"M0,"+t+"A"+t+","+t+" 0 1,0 0,"+-t+"A"+t+","+t+" 0 1,0 0,"+t+"Z":"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"Z":t?"M"+o*l+","+o*p+"A"+o+","+o+" 0 "+c+",1 "+o*d+","+o*h+"L"+t*d+","+t*h+"A"+t+","+t+" 0 "+c+",0 "+t*l+","+t*p+"Z":"M"+o*l+","+o*p+"A"+o+","+o+" 0 "+c+",1 "+o*d+","+o*h+"L0,0Z"}var e=rs,n=is,r=os,i=ss;return t.innerRadius=function(n){return arguments.length?(e=Ee(n),t):e},t.outerRadius=function(e){return arguments.length?(n=Ee(e),t):n},t.startAngle=function(e){return arguments.length?(r=Ee(e),t):r},t.endAngle=function(e){return arguments.length?(i=Ee(e),t):i},t.centroid=function(){var t=(e.apply(this,arguments)+n.apply(this,arguments))/2,o=(r.apply(this,arguments)+i.apply(this,arguments))/2+yc;return[Math.cos(o)*t,Math.sin(o)*t]},t};var yc=-Oa,wc=Pa-Sa;Hs.svg.line=function(){return as(be)};var Ec=Hs.map({linear:us,"linear-closed":cs,step:ls,"step-before":ps,"step-after":ds,basis:vs,"basis-open":ys,"basis-closed":ws,bundle:Es,cardinal:ms,"cardinal-open":hs,"cardinal-closed":fs,monotone:Os});Ec.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var bc=[0,2/3,1/3,0],Tc=[0,1/3,2/3,0],Rc=[0,1/6,2/3,1/6];Hs.svg.line.radial=function(){var t=as(Ss);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},ps.reverse=ds,ds.reverse=ps,Hs.svg.area=function(){return Cs(be)},Hs.svg.area.radial=function(){var t=Cs(Ss);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},Hs.svg.chord=function(){function t(t,a){var u=e(this,o,t,a),c=e(this,s,t,a);return"M"+u.p0+r(u.r,u.p1,u.a1-u.a0)+(n(u,c)?i(u.r,u.p1,u.r,u.p0):i(u.r,u.p1,c.r,c.p0)+r(c.r,c.p1,c.a1-c.a0)+i(c.r,c.p1,u.r,u.p0))+"Z"}function e(t,e,n,r){var i=e.call(t,n,r),o=a.call(t,i,r),s=u.call(t,i,r)+yc,l=c.call(t,i,r)+yc;return{r:o,a0:s,a1:l,p0:[o*Math.cos(s),o*Math.sin(s)],p1:[o*Math.cos(l),o*Math.sin(l)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function r(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Aa)+",1 "+e}function i(t,e,n,r){return"Q 0,0 "+r}var o=hr,s=fr,a=ks,u=os,c=ss;return t.radius=function(e){return arguments.length?(a=Ee(e),t):a},t.source=function(e){return arguments.length?(o=Ee(e),t):o},t.target=function(e){return arguments.length?(s=Ee(e),t):s},t.startAngle=function(e){return arguments.length?(u=Ee(e),t):u},t.endAngle=function(e){return arguments.length?(c=Ee(e),t):c},t},Hs.svg.diagonal=function(){function t(t,i){var o=e.call(this,t,i),s=n.call(this,t,i),a=(o.y+s.y)/2,u=[o,{x:o.x,y:a},{x:s.x,y:a},s];return u=u.map(r),"M"+u[0]+"C"+u[1]+" "+u[2]+" "+u[3]}var e=hr,n=fr,r=Ms;return t.source=function(n){return arguments.length?(e=Ee(n),t):e},t.target=function(e){return arguments.length?(n=Ee(e),t):n},t.projection=function(e){return arguments.length?(r=e,t):r},t},Hs.svg.diagonal.radial=function(){var t=Hs.svg.diagonal(),e=Ms,n=t.projection;return t.projection=function(t){return arguments.length?n(Is(e=t)):e},t},Hs.svg.symbol=function(){function t(t,r){return(Ac.get(e.call(this,t,r))||Ns)(n.call(this,t,r))}var e=Ls,n=Ds;return t.type=function(n){return arguments.length?(e=Ee(n),t):e},t.size=function(e){return arguments.length?(n=Ee(e),t):n},t};var Ac=Hs.map({circle:Ns,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Cc)),n=e*Cc;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Sc),n=e*Sc/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Sc),n=e*Sc/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});Hs.svg.symbolTypes=Ac.keys();var Pc,Oc,Sc=Math.sqrt(3),Cc=Math.tan(30*ka),kc=[],Mc=0;kc.call=ga.call,kc.empty=ga.empty,kc.node=ga.node,kc.size=ga.size,Hs.transition=function(t){return arguments.length?Pc?t.transition():t:wa.transition()},Hs.transition.prototype=kc,kc.select=function(t){var e,n,r,i=this.id,o=[];t=w(t);for(var s=-1,a=this.length;++s<a;){o.push(e=[]);for(var u=this[s],c=-1,l=u.length;++c<l;)(r=u[c])&&(n=t.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),Us(n,c,i,r.__transition__[i]),e.push(n)):e.push(null)}return zs(o,i)},kc.selectAll=function(t){var e,n,r,i,o,s=this.id,a=[];t=E(t);for(var u=-1,c=this.length;++u<c;)for(var l=this[u],p=-1,d=l.length;++p<d;)if(r=l[p]){o=r.__transition__[s],n=t.call(r,r.__data__,p,u),a.push(e=[]);for(var h=-1,f=n.length;++h<f;)(i=n[h])&&Us(i,h,s,o),e.push(i)}return zs(a,s)},kc.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=I(t));for(var o=0,s=this.length;s>o;o++){i.push(e=[]);for(var n=this[o],a=0,u=n.length;u>a;a++)(r=n[a])&&t.call(r,r.__data__,a,o)&&e.push(r)}return zs(i,this.id)},kc.tween=function(t,e){var n=this.id;return arguments.length<2?this.node().__transition__[n].tween.get(t):L(this,null==e?function(e){e.__transition__[n].tween.remove(t)}:function(r){r.__transition__[n].tween.set(t,e)})},kc.attr=function(t,e){function n(){this.removeAttribute(a)}function r(){this.removeAttributeNS(a.space,a.local)}function i(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(a);return n!==t&&(e=s(n,t),function(t){this.setAttribute(a,e(t))})})}function o(t){return null==t?r:(t+="",function(){var e,n=this.getAttributeNS(a.space,a.local);return n!==t&&(e=s(n,t),function(t){this.setAttributeNS(a.space,a.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var s="transform"==t?Ni:di,a=Hs.ns.qualify(t);return xs(this,"attr."+t,e,a.local?o:i)},kc.attrTween=function(t,e){function n(t,n){var r=e.call(this,t,n,this.getAttribute(i));return r&&function(t){this.setAttribute(i,r(t))}}function r(t,n){var r=e.call(this,t,n,this.getAttributeNS(i.space,i.local));return r&&function(t){this.setAttributeNS(i.space,i.local,r(t))}}var i=Hs.ns.qualify(t);return this.tween("attr."+t,i.local?r:n)},kc.style=function(t,e,n){function r(){this.style.removeProperty(t)}function i(e){return null==e?r:(e+="",function(){var r,i=Zs.getComputedStyle(this,null).getPropertyValue(t);return i!==e&&(r=di(i,e),function(e){this.style.setProperty(t,r(e),n)})})}var o=arguments.length;if(3>o){if("string"!=typeof t){2>o&&(e="");for(n in t)this.style(n,t[n],e);return this}n=""}return xs(this,"style."+t,e,i)},kc.styleTween=function(t,e,n){function r(r,i){var o=e.call(this,r,i,Zs.getComputedStyle(this,null).getPropertyValue(t));return o&&function(e){this.style.setProperty(t,o(e),n)}}return arguments.length<3&&(n=""),this.tween("style."+t,r)},kc.text=function(t){return xs(this,"text",t,Fs)},kc.remove=function(){return this.each("end.transition",function(){var t;this.__transition__.count<2&&(t=this.parentNode)&&t.removeChild(this)})},kc.ease=function(t){var e=this.id;return arguments.length<1?this.node().__transition__[e].ease:("function"!=typeof t&&(t=Hs.ease.apply(Hs,arguments)),L(this,function(n){n.__transition__[e].ease=t}))},kc.delay=function(t){var e=this.id;return L(this,"function"==typeof t?function(n,r,i){n.__transition__[e].delay=+t.call(n,n.__data__,r,i)}:(t=+t,function(n){n.__transition__[e].delay=t}))},kc.duration=function(t){var e=this.id;return L(this,"function"==typeof t?function(n,r,i){n.__transition__[e].duration=Math.max(1,t.call(n,n.__data__,r,i))}:(t=Math.max(1,t),function(n){n.__transition__[e].duration=t}))},kc.each=function(t,e){var n=this.id;if(arguments.length<2){var r=Oc,i=Pc;Pc=n,L(this,function(e,r,i){Oc=e.__transition__[n],t.call(e,e.__data__,r,i)}),Oc=r,Pc=i}else L(this,function(r){var i=r.__transition__[n];(i.event||(i.event=Hs.dispatch("start","end"))).on(t,e)});return this},kc.transition=function(){for(var t,e,n,r,i=this.id,o=++Mc,s=[],a=0,u=this.length;u>a;a++){s.push(t=[]);for(var e=this[a],c=0,l=e.length;l>c;c++)(n=e[c])&&(r=Object.create(n.__transition__[i]),r.delay+=r.duration,Us(n,c,o,r)),t.push(n)}return zs(s,o)},Hs.svg.axis=function(){function t(t){t.each(function(){var t,c=Hs.select(this),l=this.__chart__||n,p=this.__chart__=n.copy(),d=null==u?p.ticks?p.ticks.apply(p,a):p.domain():u,h=null==e?p.tickFormat?p.tickFormat.apply(p,a):be:e,f=c.selectAll(".tick").data(d,p),m=f.enter().insert("g",".domain").attr("class","tick").style("opacity",Sa),_=Hs.transition(f.exit()).style("opacity",Sa).remove(),g=Hs.transition(f).style("opacity",1),v=zo(p),y=c.selectAll(".domain").data([0]),w=(y.enter().append("path").attr("class","domain"),Hs.transition(y));m.append("line"),m.append("text");var E=m.select("line"),b=g.select("line"),T=f.select("text").text(h),R=m.select("text"),A=g.select("text");switch(r){case"bottom":t=Gs,E.attr("y2",i),R.attr("y",Math.max(i,0)+s),b.attr("x2",0).attr("y2",i),A.attr("x",0).attr("y",Math.max(i,0)+s),T.attr("dy",".71em").style("text-anchor","middle"),w.attr("d","M"+v[0]+","+o+"V0H"+v[1]+"V"+o);break;case"top":t=Gs,E.attr("y2",-i),R.attr("y",-(Math.max(i,0)+s)),b.attr("x2",0).attr("y2",-i),A.attr("x",0).attr("y",-(Math.max(i,0)+s)),T.attr("dy","0em").style("text-anchor","middle"),w.attr("d","M"+v[0]+","+-o+"V0H"+v[1]+"V"+-o);break;case"left":t=js,E.attr("x2",-i),R.attr("x",-(Math.max(i,0)+s)),b.attr("x2",-i).attr("y2",0),A.attr("x",-(Math.max(i,0)+s)).attr("y",0),T.attr("dy",".32em").style("text-anchor","end"),w.attr("d","M"+-o+","+v[0]+"H0V"+v[1]+"H"+-o);break;case"right":t=js,E.attr("x2",i),R.attr("x",Math.max(i,0)+s),b.attr("x2",i).attr("y2",0),A.attr("x",Math.max(i,0)+s).attr("y",0),T.attr("dy",".32em").style("text-anchor","start"),w.attr("d","M"+o+","+v[0]+"H0V"+v[1]+"H"+o)}if(p.rangeBand){var P=p,O=P.rangeBand()/2;l=p=function(t){return P(t)+O}}else l.rangeBand?l=p:_.call(t,p);m.call(t,l),g.call(t,p)})}var e,n=Hs.scale.linear(),r=Ic,i=6,o=6,s=3,a=[10],u=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(r=e in Dc?e+"":Ic,t):r},t.ticks=function(){return arguments.length?(a=arguments,t):a},t.tickValues=function(e){return arguments.length?(u=e,t):u},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(i=+e,o=+arguments[n-1],t):i},t.innerTickSize=function(e){return arguments.length?(i=+e,t):i},t.outerTickSize=function(e){return arguments.length?(o=+e,t):o},t.tickPadding=function(e){return arguments.length?(s=+e,t):s},t.tickSubdivide=function(){return arguments.length&&t},t};var Ic="bottom",Dc={top:1,right:1,bottom:1,left:1};Hs.svg.brush=function(){function t(o){o.each(function(){var o=Hs.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),s=o.selectAll(".background").data([0]);s.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),o.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var a=o.selectAll(".resize").data(f,be);a.exit().remove(),a.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Lc[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),a.style("display",t.empty()?"none":null);var l,p=Hs.transition(o),d=Hs.transition(s);u&&(l=zo(u),d.attr("x",l[0]).attr("width",l[1]-l[0]),n(p)),c&&(l=zo(c),d.attr("y",l[0]).attr("height",l[1]-l[0]),r(p)),e(p)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+l[+/e$/.test(t)]+","+p[+/^s/.test(t)]+")"})}function n(t){t.select(".extent").attr("x",l[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function r(t){t.select(".extent").attr("y",p[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",p[1]-p[0])}function i(){function i(){32==Hs.event.keyCode&&(S||(y=null,k[0]-=l[1],k[1]-=p[1],S=2),_())}function f(){32==Hs.event.keyCode&&2==S&&(k[0]+=l[1],k[1]+=p[1],S=0,_())}function m(){var t=Hs.mouse(E),i=!1;w&&(t[0]+=w[0],t[1]+=w[1]),S||(Hs.event.altKey?(y||(y=[(l[0]+l[1])/2,(p[0]+p[1])/2]),k[0]=l[+(t[0]<y[0])],k[1]=p[+(t[1]<y[1])]):y=null),P&&g(t,u,0)&&(n(R),i=!0),O&&g(t,c,1)&&(r(R),i=!0),i&&(e(R),T({type:"brush",mode:S?"move":"resize"}))}function g(t,e,n){var r,i,a=zo(e),u=a[0],c=a[1],f=k[n],m=n?p:l,_=m[1]-m[0];return S&&(u-=f,c-=_+f),r=(n?h:d)?Math.max(u,Math.min(c,t[n])):t[n],S?i=(r+=f)+_:(y&&(f=Math.max(u,Math.min(c,2*y[n]-r))),r>f?(i=r,r=f):i=f),m[0]!=r||m[1]!=i?(n?s=null:o=null,m[0]=r,m[1]=i,!0):void 0}function v(){m(),R.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),Hs.select("body").style("cursor",null),M.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),C(),T({type:"brushend"})}var y,w,E=this,b=Hs.select(Hs.event.target),T=a.of(E,arguments),R=Hs.select(E),A=b.datum(),P=!/^(n|s)$/.test(A)&&u,O=!/^(e|w)$/.test(A)&&c,S=b.classed("extent"),C=j(),k=Hs.mouse(E),M=Hs.select(Zs).on("keydown.brush",i).on("keyup.brush",f);if(Hs.event.changedTouches?M.on("touchmove.brush",m).on("touchend.brush",v):M.on("mousemove.brush",m).on("mouseup.brush",v),R.interrupt().selectAll("*").interrupt(),S)k[0]=l[0]-k[0],k[1]=p[0]-k[1];else if(A){var I=+/w$/.test(A),D=+/^n/.test(A);w=[l[1-I]-k[0],p[1-D]-k[1]],k[0]=l[I],k[1]=p[D]}else Hs.event.altKey&&(y=k.slice());R.style("pointer-events","none").selectAll(".resize").style("display",null),Hs.select("body").style("cursor",b.style("cursor")),T({type:"brushstart"}),m()}var o,s,a=v(t,"brushstart","brush","brushend"),u=null,c=null,l=[0,0],p=[0,0],d=!0,h=!0,f=Nc[0];return t.event=function(t){t.each(function(){var t=a.of(this,arguments),e={x:l,y:p,i:o,j:s},n=this.__chart__||e;this.__chart__=e,Pc?Hs.select(this).transition().each("start.brush",function(){o=n.i,s=n.j,l=n.x,p=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=hi(l,e.x),r=hi(p,e.y);return o=s=null,function(i){l=e.x=n(i),p=e.y=r(i),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=e.i,s=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(u=e,f=Nc[!u<<1|!c],t):u},t.y=function(e){return arguments.length?(c=e,f=Nc[!u<<1|!c],t):c},t.clamp=function(e){return arguments.length?(u&&c?(d=!!e[0],h=!!e[1]):u?d=!!e:c&&(h=!!e),t):u&&c?[d,h]:u?d:c?h:null},t.extent=function(e){var n,r,i,a,d;return arguments.length?(u&&(n=e[0],r=e[1],c&&(n=n[0],r=r[0]),o=[n,r],u.invert&&(n=u(n),r=u(r)),n>r&&(d=n,n=r,r=d),(n!=l[0]||r!=l[1])&&(l=[n,r])),c&&(i=e[0],a=e[1],u&&(i=i[1],a=a[1]),s=[i,a],c.invert&&(i=c(i),a=c(a)),i>a&&(d=i,i=a,a=d),(i!=p[0]||a!=p[1])&&(p=[i,a])),t):(u&&(o?(n=o[0],r=o[1]):(n=l[0],r=l[1],u.invert&&(n=u.invert(n),r=u.invert(r)),n>r&&(d=n,n=r,r=d))),c&&(s?(i=s[0],a=s[1]):(i=p[0],a=p[1],c.invert&&(i=c.invert(i),a=c.invert(a)),i>a&&(d=i,i=a,a=d))),u&&c?[[n,i],[r,a]]:u?[n,r]:c&&[i,a])},t.clear=function(){return t.empty()||(l=[0,0],p=[0,0],o=s=null),t},t.empty=function(){return!!u&&l[0]==l[1]||!!c&&p[0]==p[1]},Hs.rebind(t,a,"on")};var Lc={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Nc=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],zc=nu.format=uu.timeFormat,xc=zc.utc,Fc=xc("%Y-%m-%dT%H:%M:%S.%LZ");zc.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ys:Fc,Ys.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Ys.toString=Fc.toString,nu.second=Le(function(t){return new ru(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),nu.seconds=nu.second.range,nu.seconds.utc=nu.second.utc.range,nu.minute=Le(function(t){return new ru(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),nu.minutes=nu.minute.range,nu.minutes.utc=nu.minute.utc.range,nu.hour=Le(function(t){var e=t.getTimezoneOffset()/60;return new ru(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),nu.hours=nu.hour.range,nu.hours.utc=nu.hour.utc.range,nu.month=Le(function(t){return t=nu.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),nu.months=nu.month.range,nu.months.utc=nu.month.utc.range;var Uc=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Gc=[[nu.second,1],[nu.second,5],[nu.second,15],[nu.second,30],[nu.minute,1],[nu.minute,5],[nu.minute,15],[nu.minute,30],[nu.hour,1],[nu.hour,3],[nu.hour,6],[nu.hour,12],[nu.day,1],[nu.day,2],[nu.week,1],[nu.month,1],[nu.month,3],[nu.year,1]],jc=zc.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Tn]]),Yc={range:function(t,e,n){return Hs.range(+t,+e,n).map(Vs)},floor:be,ceil:be};Gc.year=nu.year,nu.scale=function(){return Bs(Hs.scale.linear(),Gc,jc)};var Bc=Gc.map(function(t){return[t[0].utc,t[1]]}),Vc=xc.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Tn]]);Bc.year=nu.year.utc,nu.scale.utc=function(){return Bs(Hs.scale.linear(),Bc,Vc)},Hs.text=Te(function(t){return t.responseText}),Hs.json=function(t,e){return Re(t,"application/json",Ws,e)},Hs.html=function(t,e){return Re(t,"text/html",qs,e)},Hs.xml=Te(function(t){return t.responseXML}),"function"==typeof define&&define.amd?define("d3",Hs):"object"==typeof module&&module.exports?module.exports=Hs:this.d3=Hs}(),define("d3.timeline",["d3"],function(t){return t.timeline=function(){function e(e){function n(){var e=Math.min(0,Math.max(I.width-d,t.event.translate[0]));j.translate([e,0]),M.attr("transform","translate("+e+",0)"),c(e*F,U)}function S(t){return w.left+(t.starting_time-v)*F}function C(){if(h||D.attr("height"))h?D.attr("height",h):h=D.attr("height");else{if(!T)throw"height of the timeline is not set";h=Y.height+Y.top-I.top,t.select(e[0][0]).attr("height",h)}}function k(){if(!d&&!I.width)throw"width of the timeline is not set. As of Firefox 27, timeline().with(x) needs to be explicitly set in order to render";
d&&I.width||(d?D.attr("width",d):d=D.attr("width"))}var M=e.append("g"),I=e[0][0].getBoundingClientRect(),D=t.select(e[0][0]),L={},N=1,z=0,x=0;k(),(E||0==y&&0==v)&&(M.each(function(t){t.forEach(function(t,e){E&&-1==Object.keys(L).indexOf(e)&&(L[e]=N,N++),0==y&&0==v&&t.times.forEach(function(t){(t.starting_time<z||0==z)&&(z=t.starting_time),t.ending_time>x&&(x=t.ending_time)})})}),0==y&&0==v&&(v=z,y=x));var F=1/(y-v)*(d-w.left-w.right),U=t.time.scale().domain([v,y]).range([w.left,d-w.right]),G=t.svg.axis().scale(U).orient(p).tickFormat(f.format).ticks(f.tickTime,f.tickNumber).tickSize(f.tickSize);if(M.append("g").attr("class","axis").attr("transform","translate(0,"+(w.top+(T+R)*N)+")").call(G),M.each(function(t){t.forEach(function(t,n){function c(){return E?w.top+(T+R)*L[n]:w.top}var p=t.times,d="undefined"!=typeof t.label;M.selectAll("svg").data(p).enter().append(g).attr("x",S).attr("y",c).attr("width",function(t){return(t.ending_time-t.starting_time)*F}).attr("cy",c).attr("cx",S).attr("r",T/2).attr("height",T).attr("class",O).style("fill",function(){return _?m(t[_]):m?m(n):null}).on("mousemove",function(e){r.call(this,e,n,t)}).on("mouseover",function(e,n){i.call(this,e,n,t)}).on("mouseout",function(e,n){o.call(this,e,n,t)}).on("mousedown",function(e,n){s.call(this,e,n,t)}).on("mouseup",function(e,n){a.call(this,e,n,t)}).on("click",function(e){u.call(this,e,n,t)}).each(l),d&&e.append("text").attr("class","timeline-label").attr("transform","translate(0,"+(T/2+w.top+(T+R)*L[n])+")").text(d?t.label:t.id),"undefined"!=typeof t.icon&&e.append("image").attr("class","timeline-label").attr("transform","translate(0,"+(w.top+(T+R)*L[n])+")").attr("xlink:href",t.icon).attr("width",w.left).attr("height",T)})}),d>I.width){var j=t.behavior.zoom().x(U).on("zoom",n);e.attr("class","scrollable").call(j)}b&&M.selectAll("text").attr("transform",function(){return"rotate("+b+")translate("+(this.getBBox().width/2+10)+","+this.getBBox().height/2+")"});var Y=M[0][0].getBoundingClientRect();if(C(),A){var B=U(new Date);e.append("svg:line").attr("x1",B).attr("y1",P.marginTop).attr("x2",B).attr("y2",h-P.marginBottom).style("stroke",P.color).style("stroke-width",P.width)}}var n=["circle","rect"],r=function(){},i=function(){},o=function(){},s=function(){},a=function(){},u=function(){},c=function(){},l=function(){},p="bottom",d=null,h=null,f={format:t.time.format("%I %p"),tickTime:t.time.hours,tickNumber:1,tickSize:6},m=t.scale.category20(),_=null,g="rect",v=0,y=0,w={left:30,right:30,top:30,bottom:30},E=!1,b=!1,T=20,R=5,A=!1,P={marginTop:25,marginBottom:0,width:1,color:m},O="timeline-item";return e.margin=function(t){return arguments.length?(w=t,e):w},e.orient=function(t){return arguments.length?(p=t,e):p},e.itemHeight=function(t){return arguments.length?(T=t,e):T},e.itemMargin=function(t){return arguments.length?(R=t,e):R},e.height=function(t){return arguments.length?(h=t,e):h},e.width=function(t){return arguments.length?(d=t,e):d},e.display=function(t){return arguments.length&&-1!=n.indexOf(t)?(g=t,e):g},e.tickFormat=function(t){return arguments.length?(f=t,e):f},e.hover=function(t){return arguments.length?(r=t,e):r},e.mouseover=function(t){return arguments.length?(i=t,e):t},e.mouseout=function(t){return arguments.length?(o=t,e):t},e.mousedown=function(t){return arguments.length?(s=t,e):t},e.mouseup=function(t){return arguments.length?(a=t,e):t},e.click=function(t){return arguments.length?(u=t,e):u},e.scroll=function(t){return arguments.length?(c=t,e):c},e.afterRender=function(t){return arguments.length?(l=t,e):l},e.colors=function(t){return arguments.length?(m=t,e):m},e.beginning=function(t){return arguments.length?(v=t,e):v},e.ending=function(t){return arguments.length?(y=t,e):y},e.rotateTicks=function(t){return b=t,e},e.stack=function(){return E=!E,e},e.showToday=function(){return A=!A,e},e.showTodayFormat=function(t){return arguments.length?(P=t,e):P},e.colorProperty=function(t){return arguments.length?(_=t,e):_},e.itemClassName=function(t){return arguments.length?(O=t,e):O},e}}),define("app/prodShifts/templates/timelineIdlePopover",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<table class="prodShifts-timeline-popover">\n  '),managing&&(__output.push('\n  <tfoot>\n    <tr>\n      <td colspan="2"><button class="btn btn-block btn-success prodShifts-timeline-addOrder">'),__output.push(t("prodShifts","timeline:action:addOrder")),__output.push('</button></td>\n    </tr>\n    <tr>\n      <td colspan="2"><button class="btn btn-block btn-danger prodShifts-timeline-addDowntime">'),__output.push(t("prodShifts","timeline:action:addDowntime")),__output.push("</button></td>\n    </tr>\n  </tfoot>\n  ")),__output.push("\n  <tbody>\n    <tr>\n      <th>"),__output.push(t("prodShifts","timeline:popover:startedAt")),__output.push("</th>\n      <td>"),__output.push(startedAt),__output.push("</td>\n    </tr>\n    <tr>\n      <th>"),__output.push(t("prodShifts","timeline:popover:finishedAt")),__output.push("</th>\n      <td>"),__output.push(finishedAt),__output.push("</td>\n    </tr>\n    <tr>\n      <th>"),__output.push(t("prodShifts","timeline:popover:duration")),__output.push("</th>\n      <td>"),__output.push(duration),__output.push("</td>\n    </tr>\n  </tbody>\n</table>\n");return __output.join("")}}),define("app/prodShifts/templates/timelineWorkingPopover",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<table class="prodShifts-timeline-popover">\n  '),managing&&(__output.push('\n  <tfoot>\n    <tr>\n      <td colspan="2"><button class="btn btn-block btn-danger prodShifts-timeline-addDowntime">'),__output.push(t("prodShifts","timeline:action:addDowntime")),__output.push('</button></td>\n    </tr>\n    <tr>\n      <td colspan="2"><button class="btn btn-block btn-success prodShifts-timeline-editOrder">'),__output.push(t("prodShifts","timeline:action:editOrder")),__output.push('</button></td>\n    </tr>\n    <tr>\n      <td colspan="2"><button class="btn btn-block btn-warning prodShifts-timeline-deleteOrder">'),__output.push(t("prodShifts","timeline:action:deleteOrder")),__output.push("</button></td>\n    </tr>\n  </tfoot>\n  ")),__output.push("\n  <tbody>\n    <tr>\n      <th>"),__output.push(t("prodShifts","timeline:popover:startedAt")),__output.push("</th>\n      <td>"),__output.push(startedAt),__output.push("</td>\n    </tr>\n    <tr>\n      <th>"),__output.push(t("prodShifts","timeline:popover:finishedAt")),__output.push("</th>\n      <td>"),__output.push(finishedAt),__output.push("</td>\n    </tr>\n    <tr>\n      <th>"),__output.push(t("prodShifts","timeline:popover:duration")),__output.push("</th>\n      <td>"),__output.push(duration),__output.push("</td>\n    </tr>\n    <tr>\n      <th>"),__output.push(t("prodShifts","timeline:popover:order")),__output.push("</th>\n      <td>"),__output.push(order),__output.push("</td>\n    </tr>\n    <tr>\n      <th>"),__output.push(t("prodShifts","timeline:popover:operation")),__output.push("</th>\n      <td>"),__output.push(operation),__output.push("</td>\n    </tr>\n    <tr>\n      <th>"),__output.push(t("prodShifts","timeline:popover:workerCount")),__output.push("</th>\n      <td>"),__output.push(workerCount),__output.push("</td>\n    </tr>\n    <tr>\n      <th>"),__output.push(t("prodShifts","timeline:popover:quantityDone")),__output.push("</th>\n      <td>"),__output.push(quantityDone),__output.push("</td>\n    </tr>\n    <tr>\n      <th>"),__output.push(t("prodShifts","timeline:popover:efficiency")),__output.push("</th>\n      <td>"),__output.push(efficiency),__output.push("</td>\n    </tr>\n  </tbody>\n</table>\n");return __output.join("")}}),define("app/prodShifts/templates/timelineDowntimePopover",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<table class="prodShifts-timeline-popover">\n  '),managing&&(__output.push('\n  <tfoot>\n    <tr>\n      <td colspan="2"><button class="btn btn-block btn-danger prodShifts-timeline-editDowntime">'),__output.push(t("prodShifts","timeline:action:editDowntime")),__output.push('</button></td>\n    </tr>\n    <tr>\n      <td colspan="2"><button class="btn btn-block btn-'),__output.push(hasOrder?"success":"warning"),__output.push(' prodShifts-timeline-deleteDowntime">'),__output.push(t("prodShifts","timeline:action:deleteDowntime")),__output.push("</button></td>\n    </tr>\n  </tfoot>\n  ")),__output.push("\n  <tbody>\n    <tr>\n      <th>"),__output.push(t("prodShifts","timeline:popover:startedAt")),__output.push("</th>\n      <td>"),__output.push(startedAt),__output.push("</td>\n    </tr>\n    <tr>\n      <th>"),__output.push(t("prodShifts","timeline:popover:finishedAt")),__output.push("</th>\n      <td>"),__output.push(finishedAt),__output.push("</td>\n    </tr>\n    <tr>\n      <th>"),__output.push(t("prodShifts","timeline:popover:duration")),__output.push("</th>\n      <td>"),__output.push(duration),__output.push("</td>\n    </tr>\n    <tr>\n      <th>"),__output.push(t("prodShifts","timeline:popover:reason")),__output.push("</th>\n      <td>"),__output.push(reason),__output.push("</td>\n    </tr>\n    <tr>\n      <th>"),__output.push(t("prodShifts","timeline:popover:aor")),__output.push("</th>\n      <td>"),__output.push(aor),__output.push("</td>\n    </tr>\n  </tbody>\n</table>\n");return __output.join("")}}),define("app/prodShifts/views/ProdShiftTimelineView",["require","underscore","jquery","d3","d3.timeline","app/time","app/i18n","app/user","app/viewport","app/core/View","app/core/util/getShiftStartInfo","app/data/downtimeReasons","app/data/aors","app/prodChangeRequests/util/createDeletePageAction","app/prodShiftOrders/util/calcOrderEfficiency","app/prodShifts/templates/timelineIdlePopover","app/prodShifts/templates/timelineWorkingPopover","app/prodShifts/templates/timelineDowntimePopover"],function(t,e,n,r,i,o,s,a,u,c,l,p,d,h,f,m,_,g){"use strict";return c.extend({className:"prodShifts-timeline",events:{"click .prodShifts-timeline-addOrder":"showAddOrderDialog","click .prodShifts-timeline-editOrder":function(){this.showEditDialog(this.prodShiftOrders,"app/prodShiftOrders/views/ProdShiftOrderFormView")},"click .prodShifts-timeline-deleteOrder":function(){this.showDeleteDialog(this.prodShiftOrders)},"click .prodShifts-timeline-addDowntime":"showAddDowntimeDialog","click .prodShifts-timeline-editDowntime":function(){this.showEditDialog(this.prodDowntimes,"app/prodDowntimes/views/ProdDowntimeFormView")},"click .prodShifts-timeline-deleteDowntime":function(){this.showDeleteDialog(this.prodDowntimes)},"mouseover .popover":function(){this.timers.hidePopover&&(clearTimeout(this.timers.hidePopover),this.timers.hidePopover=null)}},initialize:function(){this.chart=null,this.datum=null,this.beginning=-1,this.ending=-1,this.lastWidth=-1,this.popover=null,this.highlightedItem=null,this.options.resizable!==!1&&(this.onWindowResize=e.debounce(this.onWindowResize.bind(this),16),n(window).on("resize",this.onWindowResize)),this.options.editable!==!1&&(this.onDocumentClick=this.onDocumentClick.bind(this),n(document.body).on("click",this.onDocumentClick));var t=e.debounce(this.render.bind(this),1),r=e.debounce(this.reset.bind(this),1);this.listenTo(this.prodShiftOrders,"add remove change",t),this.listenTo(this.prodShiftOrders,"reset",r),this.listenTo(this.prodDowntimes,"add remove change",t),this.listenTo(this.prodDowntimes,"reset",r)},destroy:function(){this.hidePopover(),this.removeChart(),this.chart=null,this.datum=null,this.options.resizable!==!1&&n(window).off("resize",this.onWindowResize),this.options.editable!==!1&&n(document.body).off("click",this.onDocumentClick),n(document.body).removeClass("prodShifts-extendedDowntime"),r.select(this.el).select("svg").remove()},getLastState:function(){var t="idle";if(!this.datum)return t;for(var e=0,n=0,r=this.datum.length;r>n;++n){var i=this.datum[n],o=i.times[i.times.length-1];o&&o.ending_time>=e&&(e=o.ending_time,t=i.type)}return t},calcWidth:function(){return Math.max(this.el.getBoundingClientRect().width-28,300)},onWindowResize:function(){var t=this.calcWidth();t!==this.lastWidth&&(this.lastWidth=t,this.renderChart())},onDocumentClick:function(t){t.target!==document.body&&n(t.target).closest(".prodShifts-timeline-popover").length||this.hidePopover()},afterRender:function(){this.serializeDatum(),this.beginning&&(null===this.chart&&this.createChart(),this.renderChart(),this.toggleExtendedDowntime(),this.setUpDatumExtension())},setUpDatumExtension:function(){function t(t){null===t.popover&&(t.extendDatum(),t.renderChart(),t.toggleExtendedDowntime())}this.timers.extendDatum&&clearTimeout(this.timers.extendDatum),this.ending>=this.beginning+288e5||(this.timers.extendDatum=setInterval(t,15e3,this))},toggleExtendedDowntime:function(){var t=this.prodShift?this.prodShift.get("extendedDowntimeDelay"):null;if("number"==typeof t){var e=this.prodDowntimes.last(),r=!1;if(e&&!e.get("finishedAt")){var i=Date.parse(e.get("startedAt")),o=Date.now()-i;r=o>=60*t*1e3}n("body").toggleClass("prodShifts-extendedDowntime",r)}},reset:function(){this.chart=null,this.removeChart(),this.render()},removeChart:function(){var t=r.select(this.el),e=t.select("svg");e.empty()||e.remove()},renderChart:function(){this.removeChart();var t=this.calcWidth();this.hidePopover(),this.chart.width(t),r.select(this.el).append("svg").attr("width",t).datum(this.datum).call(this.chart),this.highlightedItem&&this.highlightItem(this.highlightedItem)},hidePopover:function(t){this.timers&&this.timers.hidePopover&&(clearTimeout(this.timers.hidePopover),this.timers.hidePopover=null),null!==this.popover&&(t?this.timers.hidePopover=setTimeout(this.hidePopover.bind(this),200,!1):(n(this.popover.el).popover("destroy"),this.popover=null))},serializeDatum:function(){function t(t){return t.length&&-1===t[t.length-1].ending_time&&(t[t.length-1].ending_time=u,t[t.length-1].ended=!1),t}var e=[],n=[],r=[],i=[],o=Date.now();this.beginning=this.prodShift?Date.parse(this.prodShift.get("date")):l(o).moment.valueOf();var s=this.beginning+288e5,a=o>=s,u=Math.min(o,s);this.ending=u,this.prodShiftOrders.forEach(function(t){var e=Date.parse(t.get("startedAt")),r=Date.parse(t.get("finishedAt"));i.push({from:e,to:r}),n.push({type:"working",starting_time:e,ending_time:r||-1,ended:!isNaN(r),data:t.toJSON()})}),this.prodDowntimes.forEach(function(t){var e=Date.parse(t.get("startedAt")),n=Date.parse(t.get("finishedAt"));t.get("prodShiftOrder")||i.push({from:e,to:n}),r.push({type:"downtime",starting_time:e,ending_time:n||-1,ended:!isNaN(n),data:t.toJSON()})}),i.sort(function(t,e){return t.from-e.from});var c=0===i.length?a?u:-1:i[0].from;e.push({type:"idle",starting_time:this.beginning,ending_time:c,ended:-1!==c});for(var p=0,d=i.length;d>p;++p){var h=i[p+1];if(!h)break;var f=i[p];h.from-f.to>1e3&&e.push({type:"idle",starting_time:f.to,ending_time:h.from,ended:!0})}i.length&&i[i.length-1].to<s&&e.push({type:"idle",starting_time:i[i.length-1].to,ending_time:a?s:-1,ended:a}),this.datum=[{type:"idle",times:t(e)},{type:"working",times:t(n)},{type:"downtime",times:t(r)}]},extendDatum:function(){var t=Date.now(),e=this.beginning+288e5;t>=e&&(clearTimeout(this.timers.extendDatum),this.timers.extendDatum=null,t=e),this.datum.forEach(function(e){var n=e.times.length-1;n>-1&&e.times[n].ended===!1&&(e.times[n].ending_time=t)})},createChart:function(){var t=this,e=this.options.editable!==!1&&a.isAllowedTo("PROD_DATA:MANAGE","PROD_DATA:CHANGES:REQUEST"),o=this.options.itemHeight||60,u=Math.round(.833*o);this.chart=i().beginning(this.beginning).ending(this.beginning+288e5).itemHeight(o).margin({left:20,right:20,top:1,bottom:0}).tickFormat({format:r.time.format("%H:%M"),tickTime:r.time.hours,tickNumber:1,tickSize:5}).colors(!1).itemClassName(function(t){return"timeline-item timeline-item-"+t.type}).afterRender(function(t){t.data&&t.data._id&&this.setAttribute("data-model-id",t.data._id),"downtime"===t.type&&t.data.prodShiftOrder&&this.setAttribute("height",u)}).mouseover(function(i){var o=r.event.target;if(null===t.popover||t.popover.el!==o){t.hidePopover();var a=e&&i.ended,u=n(o);u.popover({trigger:"manual",container:t.el,placement:"top",html:!0,title:s("prodShifts","timeline:popover:"+i.type),content:t.renderPopover(i,a)}),u.popover("show"),u.data("bs.popover").$tip.addClass("popover-"+i.type),t.popover={el:o,item:i}}}).mouseout(function(){t.options.editable===!1?t.hidePopover():r.event.ctrlKey||t.hidePopover(!0)}).mousedown(function(){r.event.preventDefault()}).click(function(e){var n=null;"downtime"===e.type&&a.isAllowedTo("LOCAL","PROD_DATA:VIEW","PROD_DOWNTIMES:VIEW")?n="prodDowntimes/"+e.data._id:"working"===e.type&&(n="prodShiftOrders/"+e.data._id),n&&(r.event.ctrlKey||1===r.event.button?window.open("#"+n):t.broker.publish("router.navigate",{url:"/"+n,trigger:!0}))})},renderPopover:function(t,e){var n=o.toString((t.ending_time-t.starting_time)/1e3),r={startedAt:o.format(t.starting_time,"HH:mm:ss"),finishedAt:t.ended?o.format(t.ending_time,"HH:mm:ss"):"-",duration:n,managing:e};if("idle"===t.type)return m(r);if("working"===t.type)return r.order=t.data.orderId,r.operation=t.data.operationNo,r.workerCount=t.data.workerCount,r.quantityDone=t.data.quantityDone,r.efficiency=f(t.data,!0),_(r);if("downtime"===t.type){var i=p.get(t.data.reason),s=d.get(t.data.aor);return r.reason=i?i.getLabel():t.data.reason,r.aor=s?s.getLabel():t.data.aor,r.hasOrder=!!t.data.prodShiftOrder,g(r)}},showAddOrderDialog:function(){var e=this,n=this.popover.item;t(["app/prodShiftOrders/views/ProdShiftOrderFormView","app/prodShiftOrders/ProdShiftOrder"],function(t,r){var i=new r({prodShift:e.prodShift.id,master:e.prodShift.get("master"),leader:e.prodShift.get("leader"),operator:e.prodShift.get("operator"),operators:e.prodShift.get("operators"),workerCount:1,quantityDone:0,startedAt:new Date(n.starting_time),finishedAt:new Date(n.ending_time)}),o=i.getNlsDomain();u.showDialog(new t({dialogClassName:"has-panel",model:i,editMode:!1,formMethod:"POST",formAction:i.url(),formActionText:s(o,"FORM:ACTION:add"),failureText:s(o,"FORM:ERROR:addFailure"),panelTitleText:s(o,"PANEL:TITLE:addForm"),done:function(){u.closeDialog()}}))})},showAddDowntimeDialog:function(){var e=this,n=this.popover.item;t(["app/prodDowntimes/views/ProdDowntimeFormView","app/prodDowntimes/ProdDowntime"],function(t,r){var i=new r({prodShift:e.prodShift.id,prodShiftOrder:"working"===n.type?n.data._id:null,master:e.prodShift.get("master"),leader:e.prodShift.get("leader"),operator:e.prodShift.get("operator"),operators:e.prodShift.get("operators"),startedAt:new Date(n.starting_time),finishedAt:new Date(n.ending_time),status:"undecided"}),o=i.getNlsDomain();u.showDialog(new t({dialogClassName:"has-panel",model:i,editMode:!1,formMethod:"POST",formAction:i.url(),formActionText:s(o,"FORM:ACTION:add"),failureText:s(o,"FORM:ERROR:addFailure"),panelTitleText:s(o,"PANEL:TITLE:addForm"),done:function(){u.closeDialog()}}))})},showEditDialog:function(e,n){var r=e.get(this.popover.item.data._id);r&&this.promised(r.fetch()).then(function(){t([n],function(t){var e=r.getNlsDomain();u.showDialog(new t({dialogClassName:"has-panel",model:r,editMode:!0,formMethod:"PUT",formAction:r.url(),formActionText:s(e,"FORM:ACTION:edit"),failureText:s(e,"FORM:ERROR:editFailure"),panelTitleText:s(e,"PANEL:TITLE:editForm"),done:function(){u.closeDialog()}}))})})},showDeleteDialog:function(t){var e=t.get(this.popover.item.data._id);if(e){var n=this;this.promised(e.fetch()).then(function(){h(n,e).callback()})}},highlightItem:function(t){this.$('.timeline-item[data-model-id="'+t+'"]')[0].classList.add("is-highlighted"),this.highlightedItem=t}})}),define("app/prodChangeRequests/templates/detailsRow",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<tr class="prodChangeRequests-details">\n  <td colspan="99">\n    <div class="prodChangeRequests-timeline">\n      <div class="progress">\n        <div class="progress-bar progress-bar-primary progress-bar-striped active" style="width: 100%"></div>\n      </div>\n    </div>\n    '),changes.length&&(__output.push('\n    <table class="prodChangeRequests-changes">\n      <tbody>\n        '),changes.forEach(function(t,e){__output.push('\n        <tr class="'),__output.push(isEdit?"":"is-separator"),__output.push(" "),__output.push(e%2?"is-even":"is-odd"),__output.push('">\n          <td>'),__output.push(t.property),__output.push(':</td>\n          <td rowspan="'),__output.push(t.value?2:1),__output.push('">'),__output.push(t.value||t[isEdit?"oldValue":"newValue"]),__output.push("</td>\n        </tr>\n        "),isEdit&&(__output.push('\n        <tr class="prodChangeRequests-changes-newValue '),__output.push(isEdit?"is-separator":""),__output.push(" "),__output.push(e%2?"is-even":"is-odd"),__output.push('">\n          <td><i class="fa fa-arrow-right"></i></td>\n          '),t.value||(__output.push("\n          <td>"),__output.push(t.newValue),__output.push("</td>\n          ")),__output.push("\n        </tr>\n        ")),__output.push("\n        ")}),__output.push("\n      </tbody>\n    </table>\n    ")),__output.push("\n    "),showForm&&(__output.push('\n    <div class="prodChangeRequests-confirmForm">\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-confirmerComment" class="control-label">'),__output.push(t("prodChangeRequests","PROPERTY:confirmerComment")),__output.push('</label>\n        <textarea id="'),__output.push(idPrefix),__output.push('-confirmerComment" class="form-control" name="confirmerComment" rows="2"></textarea>\n      </div>\n      <div class="form-group">\n        <button id="'),__output.push(idPrefix),__output.push('-accept" type="button" class="btn btn-success" data-id="'),__output.push(changeRequestId),__output.push('"><i class="fa fa-thumbs-o-up"></i><span>'),__output.push(t("prodChangeRequests","confirm:accept")),__output.push('</span></button>\n        <button id="'),__output.push(idPrefix),__output.push('-reject" type="button" class="btn btn-danger" data-id="'),__output.push(changeRequestId),__output.push('"><i class="fa fa-thumbs-o-down"></i><span>'),__output.push(t("prodChangeRequests","confirm:reject")),__output.push("</span></button>\n      </div>\n    </div>\n    ")),__output.push("\n  </td>\n</tr>\n");return __output.join("")}}),define("app/prodChangeRequests/templates/quantitiesDone",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<table class="prodChangeRequests-quantitiesDone">\n  <tbody>\n  '),oldQuantitiesDone&&(__output.push('\n  <tr class="prodChangeRequests-quantitiesDone-old">\n    '),oldQuantitiesDone.forEach(function(t){__output.push('\n    <td class="prodChangeRequests-quantitiesDone-actual">'),__output.push(t.actual.toLocaleString()),__output.push('</td>\n    <td class="prodChangeRequests-quantitiesDone-separator">/</td>\n    <td class="prodChangeRequests-quantitiesDone-planned">'),__output.push(t.planned.toLocaleString()),__output.push("</td>\n    ")}),__output.push("\n  </tr>\n  ")),__output.push('\n  <tr class="prodChangeRequests-quantitiesDone-new">\n    '),newQuantitiesDone.forEach(function(t){__output.push('\n    <td class="prodChangeRequests-quantitiesDone-actual">'),__output.push(t.actual.toLocaleString()),__output.push('</td>\n    <td class="prodChangeRequests-quantitiesDone-separator">/</td>\n    <td class="prodChangeRequests-quantitiesDone-planned">'),__output.push(t.planned.toLocaleString()),__output.push("</td>\n    ")}),__output.push("\n  </tr>\n  </tbody>\n</table>\n");return __output.join("")}}),define("app/prodChangeRequests/views/ProdChangeRequestListView",["underscore","jquery","app/i18n","app/time","app/user","app/viewport","app/core/views/ListView","app/data/aors","app/data/downtimeReasons","app/prodShifts/ProdShift","app/prodShifts/views/ProdShiftTimelineView","app/prodShiftOrders/ProdShiftOrder","app/prodShiftOrders/ProdShiftOrderCollection","app/prodDowntimes/ProdDowntime","app/prodDowntimes/ProdDowntimeCollection","app/core/templates/userInfo","app/prodChangeRequests/templates/detailsRow","app/prodChangeRequests/templates/quantitiesDone"],function(t,e,n,r,i,o,s,a,u,c,l,p,d,h,f,m,_,g){"use strict";var v={shift:c,order:p,downtime:h},y=["date","shift","master","leader","operator"],w={shift:["quantitiesDone"],order:["orderId","operationNo","quantityDone","workerCount","startedAt","finishedAt"],downtime:["reason","aor","reasonComment","startedAt","finishedAt"]},E={shift:"prodShifts",order:"prodShiftOrders",downtime:"prodDowntimes"};return s.extend({className:function(){return this.collection.isNewStatus()?"":"is-colored"},remoteTopics:{"prodChangeRequests.**":function(){this.showingDetails?this.requiresRefresh=!0:this.refreshCollection()},"prodShiftOrders.**":"handleProdModelChange","prodDowntimes.**":"handleProdModelChange"},events:{"click .list-item[data-id]":function(t){"A"===t.target.tagName||this.el.classList.contains("is-loading")||this.toggleDetails(t.currentTarget.dataset.id)},"click #-accept":function(t){this.confirm(t.currentTarget.dataset.id,"accepted")},"click #-reject":function(t){this.confirm(t.currentTarget.dataset.id,"rejected")}},initialize:function(){s.prototype.initialize.apply(this,arguments),this.timelineView=null,this.requiresRefresh=!1,this.showingDetails=!1,this.$errorMessage=null},destroy:function(){s.prototype.destroy.apply(this,arguments),this.hideErrorMessage()},afterRender:function(){s.prototype.afterRender.apply(this,arguments),this.requiresRefresh=!1,this.showingDetails=!1,this.hideErrorMessage()},serializeColumns:function(){var t=this.collection.isNewStatus(),e=[{id:"division",className:"is-min"},{id:"prodLine",className:"is-min"},{id:"operation",className:t?"is-min":""},"creatorComment",{id:"creator",className:"is-min"},{id:"createdAt",className:"is-min"}];return t||e.push("confirmerComment",{id:"confirmer",className:"is-min"},{id:"confirmedAt",className:"is-min"}),e},serializeActions:function(){return null},serializeRows:function(){var t=this;return this.collection.map(function(e){var n=e.get("confirmedAt"),i=e.get("confirmer"),o=e.get("status"),s="accepted"===o?"success":"rejected"===o?"danger":"";return{_id:e.id,className:"prodChangeRequests-list-item "+s,division:e.get("division"),prodLine:e.get("prodLine"),operation:t.serializeOperation(e),createdAt:r.format(e.get("createdAt"),"LLL"),creator:m({userInfo:e.get("creator")}),creatorComment:e.get("creatorComment")||"-",confirmedAt:n?r.format(e.get("confirmedAt"),"LLL"):"-",confirmer:i?m({userInfo:i}):"-",confirmerComment:e.get("confirmerComment")||"-"}})},serializeOperation:function(e){var i=e.get("status"),o=e.get("modelType"),s=e.get("data"),a=e.get("operation"),c=new v[o](t.extend({_id:e.get("modelId")},s)),l="?",p="add"===a||"delete"===a&&"new"!==i?null:c.genClientUrl();switch(o){case"shift":l=n("core","SHIFT",{date:r.format(s.date,"YYYY-MM-DD"),shift:n("core","SHIFT:"+s.shift)});break;case"order":l=c.getLabel(!1);break;case"downtime":if("add"===a){var d=c.get("reason"),h=u.get(d);l=h?h.getLabel():d}else l=c.get("rid")}var f=n("prodChangeRequests","operation:"+a+":"+o,{extra:l});return p?'<a href="'+p+'">'+f+"</a>":f},toggleDetails:function(t){var e=this.$('.list-item[data-id="'+t+'"]'),n=this.$(".is-expanded");this.collapseDetails(n),e[0]===n[0]?this.requiresRefresh&&this.refreshCollectionNow():this.expandDetails(t,e)},collapseDetails:function(t){this.removeView(".prodChangeRequests-timeline"),t.removeClass("is-expanded").next().remove()},expandDetails:function(t,n){var r=this.collection.get(t);if("new"===r.get("status")){var i=e(_({idPrefix:this.idPrefix,showForm:"new"===r.get("status")&&this.isCurrentUserAllowedToConfirm(r),changeRequestId:t,isEdit:"edit"===r.get("operation"),changes:this.serializeChanges(r)}));i.insertAfter(n),n.addClass("is-expanded"),this.showingDetails=!0,this.loadTimeline(r)}},isCurrentUserAllowedToConfirm:function(t){if(!i.isAllowedTo("PROD_DATA:MANAGE","PROD_DATA:CHANGES:MANAGE"))return!1;var e=i.getDivision();return!e||e.id===t.get("division")},serializeChanges:function(e){var r=[],i=e.get("operation");if("delete"===i||"new"!==e.get("status"))return r;var o=e.get("modelType"),s=E[o],a=[].concat(y,w[o]),u=e.get("prodModel"),c=e.get("data"),l=this;return t.forEach(a,function(e){var o=u?u[e]:null,a=c[e];if("edit"!==i||!t.isEqual(o,a)){var p=n(s,"PROPERTY:"+e);if("quantitiesDone"===e)r.push({property:p,value:g({oldQuantitiesDone:o,newQuantitiesDone:a})});else{var d={property:p,oldValue:l.serializeProperty(e,o),newValue:l.serializeProperty(e,a)};d.oldValue!==d.newValue&&r.push(d)}}}),r},serializeProperty:function(t,e){if(null===e||void 0===e||""===e)return"-";switch(t){case"master":case"leader":case"operator":return m({userInfo:e});case"date":return r.format(e,"LL");case"shift":return n("core","SHIFT:"+e);case"startedAt":case"finishedAt":return r.format(e,"LLLL");case"reason":var i=u.get(e);return i?i.getLabel():e;case"aor":var o=a.get(e);return o?o.getLabel():e}return"number"==typeof e?e.toLocaleString():String(e)},confirm:function(t,e){var r=this.collection.get(t);if(r){var i=this.$el.addClass("is-loading"),s=this.$(".prodChangeRequests-details").find(".form-control, .btn").prop("disabled",!0),a=this,u=r.save({status:e,confirmerComment:this.$id("confirmerComment").val().trim()},{method:"POST"});u.done(function(){i.removeClass("is-loading"),a.requiresRefresh=!0,a.toggleDetails(t),o.msg.show({type:"success",time:2500,text:n("prodChangeRequests","confirm:success:"+e)})}),u.fail(function(t){var e=E[r.get("modelType")],o=t.responseJSON?t.responseJSON.error.message:null;o=n.has("prodChangeRequests","confirm:error:"+o)?n("prodChangeRequests","confirm:error:"+o):n.has(e,"FORM:ERROR:"+o)?n(e,"FORM:ERROR:"+o):n("prodChangeRequests","confirm:error"),a.showErrorMessage(o),s.prop("disabled",!1),i.removeClass("is-loading")})}},showErrorMessage:function(t){this.hideErrorMessage(),this.$errorMessage=o.msg.show({type:"error",time:5e3,text:t})},hideErrorMessage:function(){this.$errorMessage&&(o.msg.hide(this.$errorMessage),this.$errorMessage=null)},loadTimeline:function(t){var n=this,r=this.$(".prodChangeRequests-timeline");return this.cancelRequests(),"add"===t.get("operation")&&"shift"===t.get("modelType")?r.remove():void this.resolveProdShift(t,function(i){if(!i)return r.removeClass("progress-bar-primary active").addClass("progress-bar-danger");var o=new d(null,{rqlQuery:"sort(startedAt)&prodShift="+i.id}),s=new f(null,{rqlQuery:"sort(startedAt)&prodShift="+i.id}),a=e.when(n.promised(o.fetch({reset:!0})),n.promised(s.fetch({reset:!0})));a.fail(function(){r.removeClass("progress-bar-primary active").addClass("progress-bar-danger")}),a.done(function(){n.renderTimeline(i,o,s,t)
})})},resolveProdShift:function(t,e){var n=t.get("modelType"),r=t.get("prodModel"),i=t.get("data");if("shift"===n)return e(new c(r));var o=new c({_id:r?r.prodShift:i.prodShift}),s=this.promised(o.fetch());s.fail(function(){e(null)}),s.done(function(){e(o)})},renderTimeline:function(t,e,n,r){this.timelineView=new l({editable:!0,resizable:!0,itemHeight:30,prodShift:t,prodShiftOrders:e,prodDowntimes:n}),this.setView(".prodChangeRequests-timeline",this.timelineView),this.timelineView.render(),this.timelineView.highlightItem(r.get("modelId"))},handleProdModelChange:function(t,e){if(this.timelineView){var n=e.split("."),r=n[0],i="prodShiftOrders"===r?this.timelineView.prodShiftOrders:this.timelineView.prodDowntimes;if(t.prodShift){if(t.prodShift!==this.timelineView.prodShift.id)return}else{var o=n[2];if(o&&!i.get(o))return}this.promised(i.fetch())}}})}),define("app/prodChangeRequests/templates/filter",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="well filter-form prodChangeRequests-filter">\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-division">'),__output.push(t("prodChangeRequests","PROPERTY:division")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-division" name="division" type="text">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-prodLine">'),__output.push(t("prodChangeRequests","PROPERTY:prodLine")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-prodLine" name="prodLine" type="text">\n  </div>\n  <div class="form-group">\n    <label>'),__output.push(t("prodChangeRequests","PROPERTY:status")),__output.push('</label>\n    <div id="'),__output.push(idPrefix),__output.push('-status" class="btn-group filter-btn-group" data-toggle="buttons">\n      <label class="btn btn-default">\n        <input type="radio" name="status" value="new"> '),__output.push(t("prodChangeRequests","status:new")),__output.push('\n      </label>\n      <label class="btn btn-default">\n        <input type="radio" name="status" value="old"> '),__output.push(t("prodChangeRequests","status:old")),__output.push("\n      </label>\n    </div>\n  </div>\n  "),__output.push(renderLimit()),__output.push('\n  <div class="form-group filter-actions">\n    <button type="submit" class="btn btn-default"><i class="fa fa-filter"></i><span>'),__output.push(escape(t("prodChangeRequests","filter:submit"))),__output.push("</span></button>\n  </div>\n</form>\n");return __output.join("")}}),define("app/prodChangeRequests/views/ProdChangeRequestFilterView",["underscore","app/time","app/core/views/FilterView","app/core/util/idAndLabel","app/data/orgUnits","app/prodChangeRequests/templates/filter"],function(t,e,n,r,i,o){"use strict";return n.extend({template:o,events:t.extend({"change #-division":function(){this.$id("prodLine").select2("val","")},"change #-prodLine":function(){this.$id("division").select2("val","")}},n.prototype.events),defaultFormData:function(){return{division:"",prodLine:"",status:"new"}},termToForm:{division:function(t,e,n){n[t]=e.args[1]},status:function(t,e,n){n.status="eq"===e.name?"new":"old"},prodLine:"division"},afterRender:function(){n.prototype.afterRender.call(this),this.toggleButtonGroup("status"),this.$id("division").select2({width:175,allowClear:!0,placeholder:" ",data:i.getAllByType("division").filter(function(t){return"prod"===t.get("type")}).map(r)}),this.$id("prodLine").select2({width:175,allowClear:!0,placeholder:" ",data:i.getAllByType("prodLine").filter(function(t){if(t.get("deactivatedAt"))return!1;var e=i.getAllForProdLine(t).division,n=i.getByTypeAndId("division",e);return"prod"===n.get("type")}).map(r)})},serializeFormToQuery:function(t,e){var n=this.$id("division").val(),r=this.$id("prodLine").val(),i=this.getButtonGroupValue("status");n&&t.push({name:"eq",args:["division",n]}),r&&t.push({name:"eq",args:["prodLine",r]}),"old"===i?(t.push({name:"in",args:["status",["accepted","rejected"]]}),e.sort={_id:-1}):(t.push({name:"eq",args:["status","new"]}),e.sort={prodLine:1,_id:1})}})}),define("app/prodChangeRequests/pages/ProdChangeRequestListPage",["app/i18n","app/core/util/pageActions","app/core/pages/FilteredListPage","../views/ProdChangeRequestListView","../views/ProdChangeRequestFilterView"],function(t,e,n,r,i){"use strict";return n.extend({FilterView:i,ListView:r,actions:[]})}),define("app/nls/prodChangeRequests",["app/nls/locale/en"],function(t){return{root:{"BREADCRUMBS:browse":function(){return"Production data change requests"},"MSG:LOADING_FAILURE":function(){return"Failed to load the change requests :-("}},pl:!0}}),define("app/nls/pl/prodChangeRequests",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"≈ªƒÖdania zmian danych produkcyjnych"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie danych nie powiod≈Ço siƒô :-("},"LIST:ACTION:confirm":function(){return"Potwierd≈∫ ≈ºƒÖdanie zmiany"},"PROPERTY:status":function(){return"Status"},"PROPERTY:division":function(){return"Wydzia≈Ç"},"PROPERTY:prodLine":function(){return"Linia produkcyjna"},"PROPERTY:operation":function(){return"Operacja"},"PROPERTY:createdAt":function(){return"Czas stworzenia"},"PROPERTY:creator":function(){return"Stworzone przez"},"PROPERTY:creatorComment":function(){return"Komentarz ≈ºƒÖdania"},"PROPERTY:confirmedAt":function(){return"Czas potwierdzenia"},"PROPERTY:confirmer":function(){return"Potwierdzone przez"},"PROPERTY:confirmerComment":function(){return"Komentarz potwierdzenia"},"status:new":function(){return"Nowe"},"status:old":function(){return"Zaakceptowane i odrzucone"},"filter:submit":function(){return"Filtruj ≈ºƒÖdania"},"operation:add:shift":function(t){return"Dodanie zmiany: "+e.v(t,"extra")},"operation:add:order":function(t){return"Dodanie zlecenia: "+e.v(t,"extra")},"operation:add:downtime":function(t){return"Dodanie przestoju: "+e.v(t,"extra")},"operation:edit:shift":function(t){return"Edycja zmiany: "+e.v(t,"extra")},"operation:edit:order":function(t){return"Edycja zlecenia: "+e.v(t,"extra")},"operation:edit:downtime":function(t){return"Edycja przestoju: "+e.v(t,"extra")},"operation:delete:shift":function(t){return"Usuniƒôcie zmiany: "+e.v(t,"extra")},"operation:delete:order":function(t){return"Usuniƒôcie zlecenia: "+e.v(t,"extra")},"operation:delete:downtime":function(t){return"Usuniƒôcie przestoju: "+e.v(t,"extra")},"confirm:accept":function(){return"Akceptuj zmianƒô"},"confirm:reject":function(){return"Odrzuƒá zmianƒô"},"confirm:success:accepted":function(){return"Dane produkcyjne zosta≈Çy zmienione."},"confirm:success:rejected":function(){return"≈ªƒÖdanie zmian zosta≈Ço odrzucone."},"confirm:error:WRONG_ORDER":function(){return"Najpierw nale≈ºy zatwierdziƒá wcze≈õniejsze ≈ºƒÖdania zmian dla wybranej linii!"},"confirm:error":function(){return"Nie uda≈Ço siƒô zatwierdziƒá ≈ºƒÖdania zmian :-("}}}),define("app/prodChangeRequests/routes",["../router","../viewport","../user","./ProdChangeRequestCollection","./pages/ProdChangeRequestListPage","i18n!app/nls/prodChangeRequests"],function(t,e,n,r,i){"use strict";var o=n.auth("LOCAL","PROD_DATA:VIEW","PROD_DATA:CHANGES:REQUEST");t.map("/prodChangeRequests",o,function(t){e.showPage(new i({collection:new r(null,{rqlQuery:t.rql})}))})}),define("app/nls/reports",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:reports":function(){return"Reports"},"BREADCRUMBS:settings":function(){return"Settings"},"BREADCRUMBS:divisions":function(){return"Divisions"},"BREADCRUMBS:1":function(){return"PROD, EFF, Downtime"},"BREADCRUMBS:2":function(){return"CLIP"},"BREADCRUMBS:3":function(){return"OEE"},"BREADCRUMBS:4":function(){return"Operators"},"BREADCRUMBS:5":function(){return"HR"},"BREADCRUMBS:6":function(){return"Warehouse"},"BREADCRUMBS:6:comp":function(){return"Component warehouse"},"BREADCRUMBS:6:finGoods":function(){return"Finished goods warehouse"},"BREADCRUMBS:6:exTransactions":function(){return"External transactions"},"BREADCRUMBS:6:inTransactions":function(){return"Internal transactions"},"BREADCRUMBS:6:fifo":function(){return"'FIFO' component delivery"},"BREADCRUMBS:7":function(){return"Downtimes in AORs"},"MSG:LOADING_FAILURE":function(){return"Failed to load the report :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the report :("},"PAGE_ACTION:settings":function(){return"Change settings"},"PAGE_ACTION:2:export":function(){return"Export orders"},"PAGE_ACTION:3:exportTable":function(){return"Export table"},"PAGE_ACTION:6:export":function(){return"Export data"},"PAGE_ACTION:6:export:to":function(){return"Export TO"},"PAGE_ACTION:6:export:fte":function(){return"Export FTE"},"PAGE_ACTION:7:export":function(){return"Export data"},"PAGE_ACTION:7:export:clip":function(){return"Export CLIP"},"PAGE_ACTION:7:export:downtimes":function(){return"Export downtime list"},"PAGE_ACTION:7:export:downtimeTimes":function(){return"Export downtime times"},"PAGE_ACTION:7:export:downtimeCounts":function(){return"Export downtime counts"},"1:pageTitle":function(){return"PROD, EFF, Downtime"},"2:pageTitle":function(){return"CLIP"},"charts:title:overall":function(){return"ML"},"coeffs:quantityDone":function(){return"Items"},"coeffs:downtime":function(){return"Downtime"},"coeffs:scheduledDowntime":function(){return"Scheduled downtime"},"coeffs:unscheduledDowntime":function(){return"Unscheduled downtime"},"coeffs:efficiency":function(){return"Efficiency"},"coeffs:productivity":function(){return"Productivity"},"coeffs:productivityNoWh":function(){return"Prod. w/o WH"},"metrics:clip:orderCount":function(){return"All order count"},"metrics:clip:productionCount":function(){return"Production order count"},"metrics:clip:endToEndCount":function(){return"End2End order count"},"metrics:clip:production":function(){return"CLIP Production"},"metrics:clip:endToEnd":function(){return"CLIP End2End"},"downtimesByAor:title":function(){return"Downtimes - AORs"},"downtimesByAor:seriesName":function(){return"Downtime"},"downtimesByAor:press:shortText":function(){return"PWS"},"downtimesByAor:press:longText":function(){return"Press Worksheet"},"downtimesByReason:title":function(){return"Downtimes - reasons"},"downtimesByReason:seriesName":function(){return"Downtime"},quantitySuffix:function(){return" items"},referenceValue:function(){return"Reference value"},otherSeries:function(){return"Other"},"dirIndir:title":function(){return"DIR/INDIR"},"dirIndir:seriesName":function(){return"FTE"},"effIneff:title":function(){return"Allocation of resources"},"effIneff:seriesName":function(){return"FTE"},"effIneff:category:value":function(){return"I/E"},"effIneff:category:dirIndir":function(){return"D/I"},"effIneff:category:other":function(){return"..."},"effIneff:name:value":function(){return"INEFF/EFF"},"effIneff:name:dirIndir":function(){return"DIRECT/INDIRECT"},"effIneff:name:other":function(){return"Other"},"tooltipHeaderFormat:year":function(){return"YYYY"},"tooltipHeaderFormat:quarter":function(t){return e.v(t,"quarter")+" [quarter] YYYY"},"tooltipHeaderFormat:month":function(){return"YYYY MMMM"},"tooltipHeaderFormat:week":function(){return"wo. [week] (LL)"},"tooltipHeaderFormat:day":function(){return"LL"},"tooltipHeaderFormat:shift":function(t){return"LL[, "+e.v(t,"shift")+" shift]"},"tooltipHeaderFormat:hour":function(){return"LLL"},"filter:mode":function(){return"Mode"},"filter:mode:online":function(){return"Online"},"filter:mode:date":function(){return"Time range"},"filter:from":function(){return"From: "},"filter:to":function(){return"To: "},"filter:interval":function(){return"Interval"},"filter:interval:year":function(){return"year"},"filter:interval:quarter":function(){return"quarter"},"filter:interval:month":function(){return"month"},"filter:interval:week":function(){return"week"},"filter:interval:day":function(){return"day"},"filter:interval:shift":function(){return"shift"},"filter:interval:hour":function(){return"hour"},"filter:interval:title:year":function(){return"Year"},"filter:interval:title:quarter":function(){return"Quarter"},"filter:interval:title:month":function(){return"Month"},"filter:interval:title:week":function(){return"Week"},"filter:interval:title:day":function(){return"Day"},"filter:interval:title:shift":function(){return"Shift"},"filter:interval:title:hour":function(){return"Hour"},"filter:subdivisionType":function(){return"Subdivision type"},"filter:subdivisionType:prod":function(){return"Assembly"},"filter:subdivisionType:press":function(){return"Press"},"filter:submit":function(){return"Filter report"},"filter:submit:currentShift":function(){return"Current shift"},"filter:submit:prevShift":function(){return"Previous shift"},"filter:submit:today":function(){return"Today"},"filter:submit:yesterday":function(){return"Yesterday"},"filter:submit:currentWeek":function(){return"Current week"},"filter:submit:prevWeek":function(){return"Previous week"},"filter:submit:currentMonth":function(){return"Current month"},"filter:submit:prevMonth":function(){return"Previous month"},"filter:submit:currentQuarter":function(){return"Current quarter"},"filter:submit:q1":function(){return"I quarter"},"filter:submit:q2":function(){return"II quarter"},"filter:submit:q3":function(){return"III quarter"},"filter:submit:q4":function(){return"IV quarter"},"filter:submit:currentYear":function(){return"Current year"},"filter:submit:prevYear":function(){return"Previous year"},"filter:divisions":function(){return"Division"},"filter:majorMalfunction":function(){return"Major malfunction [h]"},"filter:options":function(){return"Show display options"},"filter:weekends":function(){return"Weekends"},"filter:weekends:title":function(){return"Should the report should include data from Saturdays and Sundays?"},"options:filter":function(){return"Show filter options"},"options:series":function(){return"Data series"},"options:extremes":function(){return"Min./max. synchronization"},"options:extremes:none":function(){return"none"},"options:extremes:siblings":function(){return"w/o parent"},"options:extremes:parent":function(){return"w/ parent"},"options:references":function(){return"References"},"options:references:coeffs":function(){return"Metrics"},"options:references:reasons":function(){return"Downtime reasons"},"options:references:aors":function(){return"Areas of resposibility"},"options:clip":function(){return"CLIP"},"options:direct":function(){return"DIRECT"},"options:indirect":function(){return"INDIRECT"},"options:warehouse":function(){return"WAREHOUSE"},"options:dirIndir":function(){return"DIRECT/INDIRECT"},"options:effIneff":function(){return"INEFF/EFF"},"options:absence":function(){return"Absence"},"options:aors":function(){return"Areas of resposibility"},"options:reasons":function(){return"Downtime reasons"},"options:prodTasks":function(){return"Prod. tasks"},"options:prodFunctions":function(){return"Prod. functions"},"options:companies":function(){return"Companies"},"settings:tab:quantityDone":function(){return"Items"},"settings:tab:efficiency":function(){return"Efficiency"},"settings:tab:productivity":function(){return"Productivity"},"settings:tab:productivityNoWh":function(){return"Productivity w/o WH"},"settings:tab:scheduledDowntime":function(){return"Scheduled downtime"},"settings:tab:unscheduledDowntime":function(){return"Unscheduled downtime"},"settings:tab:aors":function(){return"Downtimes - AORs"},"settings:tab:reasons":function(){return"Downtimes - reasons"},"settings:tab:clip":function(){return"CLIP"},"settings:tab:dirIndir":function(){return"DIRECT/INDIRECT"},"settings:tab:effIneff":function(){return"Allocation of resources"},"settings:tab:hr":function(){return"HR"},"settings:tab:wh":function(){return"Warehouse"},"settings:tab:downtimesInAors":function(){return"Downtimes in AORs"},"settings:overall":function(){return"ML"},"settings:prod":function(){return"Assembly"},"settings:press":function(){return"Press"},"settings:aors":function(){return"Colors and reference values for the areas of responsibility can be set from the <a href='#aors'>Dictionaries &gt; Areas of responsibility</a> page."},"settings:reasons":function(){return"Colors and reference values for the downtime reasons can be set from the <a href='#downtimeReasons'>Dictionaries &gt; Downtime reasons</a> page"},"settings:prodTasks":function(){return"Colors for the production tasks can be set from the <a href='#prodTasks'>Dictionaries &gt; Production tasks</a> page."},"settings:absence":function(){return"Absence task"},"settings:metricRefs":function(){return"Reference values"},"settings:color":function(){return"Color"},"settings:color:clipOrderCount":function(){return"Order count color"},"settings:color:clipProduction":function(){return"Production color"},"settings:color:clipEndToEnd":function(){return"End2End color"},"settings:color:direct":function(){return"DIRECT color"},"settings:color:indirect":function(){return"INDIRECT color"},"settings:color:warehouse":function(){return"WAREHOUSE color"},"settings:color:reference":function(){return"Reference color"},"settings:color:absence":function(){return"Absence color"},"settings:color:dirIndir":function(){return"D/I color"},"settings:color:eff":function(){return"EFF color"},"settings:color:ineff":function(){return"INEFF color"},"settings:color:hrTotal":function(){return"Total FTE color"},"settings:coeff":function(){return"Coefficient"},"settings:hr:quantityDone":function(){return"Production color can be set from the <a href='#reports;settings?tab=quantityDone' data-tab='quantityDone'>Quantity done</a> tab."},"settings:hr:directIndirect":function(){return"DIRECT and INDIRECT colors can be set from the <a href='#reports;settings?tab=dirIndir' data-tab='dirIndir'>DIRECT/INDIRECT</a> tab."},"settings:hr:dirIndir":function(){return"IND/DIR color can be set from the <a href='#reports;settings?tab=effIneff' data-tab='effIneff'>Podzia≈Ç zasob√≥w</a> tab (<em>D/I color</em>)."},"settings:hr:companies":function(){return"Colors for the companies tasks can be set from the <a href='#companies'>Dictionaries &gt; Companies</a> page."},"settings:hr:prodFunctions":function(){return"Colors for the production functions can be set from the <a href='#prodFunctions'>Dictionaries &gt; Production functions</a> page."},"settings:wh:comp":function(){return"Component warehouse"},"settings:wh:finGoods":function(){return"Finished goods warehouse"},"settings:wh:subdivision":function(){return"Subdivision"},"settings:wh:inComp":function(){return"Component input"},"settings:wh:coopComp":function(){return"Cooperation personnel"},"settings:wh:exStorage":function(){return"External warehouse personnel"},"settings:wh:fifo":function(){return"'FIFO' component delivery"},"settings:wh:staging":function(){return"'Staging' component delivery"},"settings:wh:sm":function(){return"'SM' component delivery"},"settings:wh:paint":function(){return"Paint personnel"},"settings:wh:fixBin":function(){return"FixBin supplementation"},"settings:wh:compAbsence":function(){return"Absence"},"settings:wh:finGoodsIn":function(){return"Finished goods input"},"settings:wh:finGoodsOut":function(){return"Finished goods output"},"settings:wh:finGoodsAbsence":function(){return"Absence"},"settings:downtimesInAors:statuses":function(){return"Default downtime statuses on the list"},"settings:downtimesInAors:specificAor":function(){return"Default specific AOR"},"settings:downtimesInAors:aors:own":function(){return"Default to the user's AORs."},"settings:downtimesInAors:aors:specific":function(){return"Default to the following AORs:"},"settings:downtimesInAors:clipInterval":function(){return"Default time interval of the CLIP chart"},"settings:downtimesInAors:clipDateRange":function(){return"Default time range of the CLIP chart"},"settings:downtimesInAors:dtlDateRange":function(){return"Default time range of the downtimes list"},"settings:downtimesInAors:dtcInterval":function(){return"Default time interval of the downtimes charts"},"settings:downtimesInAors:dtcDateRange":function(){return"Default time range of the downtimes charts"},"oee:table:loading":function(){return"Loading..."},"oee:table:loadingFailed":function(){return"Loading failed :("},"oee:no":function(){return"#"},"oee:division":function(){return"Division"},"oee:prodLine":function(){return"Machine name"},"oee:inventoryNo":function(){return"Inventory no"},"oee:totalAvailability":function(){return"Total avail. [h]"},"oee:operationalAvailability:h":function(){return"Oper. avail. [h]"},"oee:operationalAvailability:%":function(){return"Oper. avail. [%]"},"oee:exploitation:h":function(){return"Exploitation [h]"},"oee:exploitation:%":function(){return"Exploitation [%]"},"oee:oee":function(){return"OEE [%]"},"oee:adjusting:duration":function(){return"Adjusting time [h]"},"oee:maintenance:duration":function(){return"Maintenance time [h]"},"oee:renovation:duration":function(){return"Renovation time [h]"},"oee:malfunction:duration":function(){return"Malfunction time [h]"},"oee:malfunction:count":function(){return"Malfunction count"},"oee:majorMalfunction:count":function(){return"Major malfunction count"},"oee:mttr":function(){return"MTTR [h]"},"oee:mtbf":function(){return"MTBF [h]"},"operator:filter:mode:shift":function(){return"Shift"},"operator:filter:mode:masters":function(){return"Masters"},"operator:filter:mode:operators":function(){return"Operators"},"operator:effAndProd:title":function(){return"Efficiency/Productivity"},"operator:efficiency:byDivision":function(t){return e.v(t,"division")+"'s efficiency"},"operator:efficiency":function(){return"Operators' efficiency"},"operator:productivity":function(){return"Operators' productivity"},"operator:workTimes:title":function(){return"Time worked/Downtimes"},"operator:workTimes:total":function(){return"Total time worked"},"operator:workTimes:sap":function(){return"Time worked (SAP)"},"operator:workTimes:otherWorks":function(){return"Time of other works"},"operator:workTimes:downtime":function(){return"Downtime"},"operator:machineTimes:title":function(){return"Machines - work time/adjusting time"},"operator:machineTimes:machineMedian":function(){return"Machine's adjusting median"},"operator:machineTimes:work":function(){return"Time worked"},"operator:machineTimes:operatorMedian":function(){return"Operators' adjusting median"},"operator:quantities:title":function(){return"Quantities done/Material losses"},"operator:quantities:good":function(){return"Good"},"operator:quantities:bad":function(){return"Bad"},"operator:quantities:total":function(){return"Total"},"operator:quantities:loss":function(){return"Losses"},"operator:notes:title":function(){return"Parts with comments"},"operator:notes:load":function(t){return"Load "+e.v(t,"notes")+" "+e.p(t,"notes",0,"en",{one:"comment",other:"comments"})+" from "+e.v(t,"worksheets")+" "+e.p(t,"worksheets",0,"en",{one:"worksheet",other:"worksheets"})},"operator:notes:load:noData":function(){return"Load comments"},"operator:notes:noData":function(){return"No comments."},"hr:quantityDone":function(){return"Production"},"hr:total":function(){return"Total"},"hr:direct":function(){return"DIRECT"},"hr:indirect":function(){return"INDIRECT"},"hr:indirDir":function(){return"IND/DIR"},"hr:title:direct":function(){return"DIRECT"},"hr:title:indirect":function(){return"INDIRECT"},"hr:title:indirDir":function(){return"INDIRECT/DIRECT"},"hr:title:details":function(){return"Functions/Companies"},"hr:total:columns":function(){return"Metric;Unit"},"hr:direct:columns":function(){return"DIRECT;Unit"},"hr:indirect:columns":function(){return"INDIRECT;Unit"},"hr:indirDir:columns":function(){return"Metric;Unit"},"hr:details:columns":function(){return"Position;Company;Unit;Average"},"wh:eff":function(){return"Efficiency"},"wh:fte":function(){return"FTE"},"wh:fte:avg":function(){return"Average FTE"},"wh:qty":function(){return"Quantity"},"wh:absence":function(){return"Absence"},"wh:effAndFte:exTransactions":function(){return"External transactions"},"wh:effAndFte:inTransactions":function(){return"Internal transactions"},"wh:effAndFte:inComp":function(){return"Component input"},"wh:effAndFte:coopComp":function(){return"Cooperation personnel"},"wh:effAndFte:exStorage":function(){return"External warehouse personnel"},"wh:effAndFte:fifo":function(){return"'FIFO' component delivery"},"wh:effAndFte:staging":function(){return"'Staging' component delivery"},"wh:effAndFte:sm":function(){return"'SM' component delivery"},"wh:effAndFte:paint":function(){return"Paint personnel"},"wh:effAndFte:fixBin":function(){return"FixBin supplementation"},"wh:effAndFte:finGoodsIn":function(){return"Finished goods input"},"wh:effAndFte:finGoodsOut":function(){return"Finished goods output"},"wh:category:exTransactions":function(){return"External transactions categories"},"wh:category:coopComp":function(){return"Cooperation personnel categories"},"wh:category:exStorage":function(){return"External WH personnel categories"},"wh:category:fifo":function(){return"FIFO categories"},"wh:category:totalAbsence":function(){return"Total absence categories"},"wh:category:compAbsence":function(){return"Component WH absence categories"},"wh:category:finGoodsAbsence":function(){return"Finished goods WH absence categories"},"wh:category:name:inComp":function(){return"Component input"},"wh:category:name:coopComp":function(){return"Coop. personnel"},"wh:category:name:coopComp541":function(){return"541"},"wh:category:name:coopCompProcessing":function(){return"Processing"},"wh:category:name:exStorage":function(){return"Ext. WH personnel"},"wh:category:name:exStorageIn":function(){return"Input"},"wh:category:name:exStorageOut":function(){return"Output"},"wh:totalAndAbsence:total":function(){return"Total employment"},"wh:totalAndAbsence:comp":function(){return"Component WH employment"},"wh:totalAndAbsence:finGoods":function(){return"Finished goods WH employment"},"filenames:1:coeffs":function(){return"WMES_EffProd"},"filenames:1:downtimesByAor":function(){return"WMES_Downtimes_AOR"},"filenames:1:downtimesByReason":function(){return"WMES_Downtimes_Reasons"},"filenames:2:clip":function(){return"WMES_CLIP"},"filenames:2:dirIndir":function(){return"WMES_DirIndir"},"filenames:2:effIneff":function(){return"WMES_EffIneff"},"filenames:3:table":function(){return"WMES_OEE_Machines"},"filenames:3:oee":function(){return"WMES_OEE"},"filenames:3:downtime":function(){return"WMES_OEE_Downtime"},"filenames:4:effAndProd":function(){return"WMES_Operators_EffProd"},"filenames:4:workTimes":function(){return"WMES_Operators_WorkTimes"},"filenames:4:machineTimes":function(){return"WMES_Operators_MachineTimes"},"filenames:4:quantities":function(){return"WMES_Operators_Quantities"},"filenames:5:total":function(){return"WMES_HR_Totals"},"filenames:5:direct":function(){return"WMES_HR_Direct"},"filenames:5:indir":function(){return"WMES_HR_Indirect"},"filenames:5:indirDir":function(){return"WMES_HR_IndirDir"},"filenames:5:details":function(){return"WMES_HR_Details"},"filenames:6:suffix":function(t){return"WMES_WH_"+e.v(t,"suffix")},"filenames:6:effAndFte:exTransactions":function(){return"WMES_WH_ExTransactions"},"filenames:6:effAndFte:inTransactions":function(){return"WMES_WH_InTransactions"},"filenames:6:effAndFte:inComp":function(){return"WMES_WH_InComp"},"filenames:6:effAndFte:coopComp":function(){return"WMES_WH_CoopComp"},"filenames:6:effAndFte:exStorage":function(){return"WMES_WH_ExStorage"},"filenames:6:effAndFte:fifo":function(){return"WMES_WH_FIFO"},"filenames:6:effAndFte:staging":function(){return"WMES_WH_Staging"},"filenames:6:effAndFte:sm":function(){return"WMES_WH_SM"},"filenames:6:effAndFte:paint":function(){return"WMES_WH_Paint"},"filenames:6:effAndFte:fixBin":function(){return"WMES_WH_FixBin"},"filenames:6:effAndFte:finGoodsIn":function(){return"WMES_WH_FinGoods_In"},"filenames:6:effAndFte:finGoodsOut":function(){return"WMES_WH_FinGoods_Out"},"filenames:6:category:coopComp":function(){return"WMES_WH_CoopComp_Cat"},"filenames:6:category:exStorage":function(){return"WMES_WH_ExStorage_Cat"},"filenames:6:category:exTransactions":function(){return"WMES_WH_ExTransactions_Cat"},"filenames:6:category:fifo":function(){return"WMES_WH_FIFO_Cat"},"filenames:6:category:totalAbsence":function(){return"WMES_WH_Absence_Total"},"filenames:6:category:compAbsence":function(){return"WMES_WH_Absence_Comp"},"filenames:6:category:finGoodsAbsence":function(){return"WMES_WH_Absence_FinGoods"},"filenames:6:totalAndAbsence:total":function(){return"WMES_WH_FTE_Total"},"filenames:6:totalAndAbsence:comp":function(){return"WMES_WH_FTE_Comp"},"filenames:6:totalAndAbsence:finGoods":function(){return"WMES_WH_FTE_FinGoods"},"filenames:7:inout:downtimeTimes":function(){return"WMES_AORDowntimes_Times"},"filenames:7:inout:downtimeCounts":function(){return"WMES_AORDowntimes_Counts"},"filenames:7:clip":function(){return"WMES_CLIP"},"filenames:7:downtimeTimes":function(){return"WMES_AORDowntimes_Times"},"filenames:7:downtimeCounts":function(){return"WMES_AORDowntimes_Counts"},"orders:empty":function(){return"No matching orders found."},"orders:cnf:status":function(){return"Confirmation<br>(production)"},"orders:cnf:date":function(){return"Confirmation time<br>(production)"},"orders:dlv:status":function(){return"Confirmation<br>(warehouse)"},"orders:dlv:date":function(){return"Confirmation time<br>(warehouse)"},"orders:filter:submit":function(){return"Filter orders"},"orders:filter:orderNo":function(){return"Order no"},"orders:filter:hour:inclusive":function(){return"To hour of last day"},"orders:filter:hour:inclusive:title":function(){return"Order statuses to the specified hour of a day specified in the 'To' filter."},"orders:filter:hour:exclusive":function(){return"To hour of next to last day"},"orders:filter:hour:exclusive:title":function(){return"Order statuses to the specified hour of the previous day to the one specified in the 'To' filter."},"orders:filter:hour:finish":function(){return"To hour of finish day"},"orders:filter:hour:finish:title":function(){return"Order statuses to the specified hour of the order's finish date."},"orders:filter:status:red":function(){return"Unconfirmed"},"orders:filter:status:red:title":function(){return"Only orders without CNF/PCNF or DLV/PDLV."},"orders:filter:status:all":function(){return"All selected statuses"},"orders:filter:status:all:title":function(){return"Only orders with all of the selected statuses at the same time."},"orders:filter:status:in":function(){return"Any selected status"},"orders:filter:status:in:title":function(){return"Only orders with at least one of the selected statuses."},"orders:filter:status:nin":function(){return"None of selected statuses"},"orders:filter:status:nin:title":function(){return"Only orders with none of the selected statuses at the same time."},"orders:filter:status:wo":function(){return"Without selected status"
},"orders:filter:status:wo:title":function(){return"Only orders without any of the selected statuses."},"orders:filter:status:CNF":function(){return"Confirmed (CNF)"},"orders:filter:status:PCNF":function(){return"Partially confirmed (PCNF)"},"orders:filter:status:DLV":function(){return"Delivered (DLV)"},"orders:filter:status:PDLV":function(){return"Partially delivered (PDLV)"},"7:filter:statuses":function(){return"Downtime statuses on the list"},"7:filter:specificAor":function(){return"Specific AOR"},"7:filter:aors":function(){return"Areas of responsibility"},"7:filter:aors:ph":function(){return"All AORs"},"7:filter:customTimes":function(){return"Custom time range"},"7:title:downtimeTimes":function(){return"Total downtime duration"},"7:title:downtimeCounts":function(){return"Total downtime count"},"7:valueSuffix:hour":function(){return"h"},"7:valueSuffix:manHour":function(){return"man-hr"},"7:series:indoor":function(){return"Indoor"},"7:series:outdoor":function(){return"Outdoor"},"7:series:indoor:specific":function(){return"Specific (Indoor)"},"7:series:outdoor:specific":function(){return"Specific (Outdoor)"},"7:series:indoor:aor":function(t){return e.v(t,"aor")+" (Indoor)"},"7:series:outdoor:aor":function(t){return e.v(t,"aor")+" (Outdoor)"},"7:series:indoor:total":function(){return"Total (Indoor)"},"7:series:outdoor:total":function(){return"Total (Outdoor)"},"7:series:total":function(){return"Total"},"7:customTimes:title":function(){return"Custom report time range"},"7:customTimes:submit":function(){return"Filter using custom times"},"7:customTimes:reset":function(){return"Filter using default times"},"7:customTimes:clip:date":function(){return"Time range of the CLIP chart"},"7:customTimes:clip:interval":function(){return"Time interval of the CLIP chart"},"7:customTimes:dtl:date":function(){return"Time range of the downtimes list"},"7:customTimes:dtc:date":function(){return"Time range of the downtimes charts"},"7:customTimes:dtc:interval":function(){return"Time interval of the downtimes charts"}},pl:!0}}),define("app/nls/pl/reports",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:reports":function(){return"Raporty"},"BREADCRUMBS:settings":function(){return"Ustawienia"},"BREADCRUMBS:divisions":function(){return"Wydzia≈Çy"},"BREADCRUMBS:1":function(){return"Wska≈∫niki"},"BREADCRUMBS:2":function(){return"CLIP"},"BREADCRUMBS:3":function(){return"Wykorzystanie zasob√≥w"},"BREADCRUMBS:4":function(){return"Operatorzy"},"BREADCRUMBS:5":function(){return"HR"},"BREADCRUMBS:6":function(){return"Magazyn"},"BREADCRUMBS:6:comp":function(){return"Magazyn komponent√≥w"},"BREADCRUMBS:6:finGoods":function(){return"Magazyn wyrob√≥w gotowych"},"BREADCRUMBS:6:exTransactions":function(){return"Obs≈Çuga transakcji zewnƒôtrznych"},"BREADCRUMBS:6:fifo":function(){return"Dostarczanie komponent√≥w FIFO"},"BREADCRUMBS:7":function(){return"Przestoje w obszarach"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie raportu nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie raportu nie powiod≈Ço siƒô :("},"PAGE_ACTION:settings":function(){return"Zmie≈Ñ ustawienia"},"PAGE_ACTION:2:export":function(){return"Eksportuj zlecenia"},"PAGE_ACTION:3:exportTable":function(){return"Eksportuj tabelƒô"},"PAGE_ACTION:6:export":function(){return"Eksportuj dane"},"PAGE_ACTION:6:export:to":function(){return"Eksportuj TO"},"PAGE_ACTION:6:export:fte":function(){return"Eksportuj FTE"},"PAGE_ACTION:7:export":function(){return"Eksportuj dane"},"PAGE_ACTION:7:export:clip":function(){return"Eksportuj CLIP"},"PAGE_ACTION:7:export:downtimes":function(){return"Eksportuj listƒô przestoj√≥w"},"PAGE_ACTION:7:export:downtimeTimes":function(){return"Eksportuj czasy przestoj√≥w"},"PAGE_ACTION:7:export:downtimeCounts":function(){return"Eksportuj ilo≈õci przestoj√≥w"},"1:pageTitle":function(){return"Wska≈∫niki"},"2:pageTitle":function(){return"CLIP"},"5:pageTitle":function(){return"HR"},"charts:title:overall":function(){return"ML"},"coeffs:quantityDone":function(){return"Sztuki"},"coeffs:downtime":function(){return"Przestoje"},"coeffs:scheduledDowntime":function(){return"Planowane przest."},"coeffs:unscheduledDowntime":function(){return"Nieplanowane przest."},"coeffs:efficiency":function(){return"Wydajno≈õƒá"},"coeffs:productivity":function(){return"Produktywno≈õƒá"},"coeffs:productivityNoWh":function(){return"Prod. bez magazynu"},"metrics:clip:orderCount":function(){return"Ilo≈õƒá wszystkich zlece≈Ñ"},"metrics:clip:productionCount":function(){return"Ilo≈õƒá zlece≈Ñ Produkcja"},"metrics:clip:endToEndCount":function(){return"Ilo≈õƒá zlece≈Ñ End2End"},"metrics:clip:production":function(){return"CLIP Produkcja"},"metrics:clip:endToEnd":function(){return"CLIP End2End"},"downtimesByAor:title":function(){return"Czas przestoj√≥w - obszary odp."},"downtimesByAor:seriesName":function(){return"Czas przestoj√≥w"},"downtimesByAor:press:shortText":function(){return"TKP"},"downtimesByAor:press:longText":function(){return"T≈Çocznia (karta pracy)"},"downtimesByReason:title":function(){return"Czas przestoj√≥w - powody"},"downtimesByReason:seriesName":function(){return"Czas przestoj√≥w"},quantitySuffix:function(){return" szt."},referenceValue:function(){return"Warto≈õƒá referencyjna"},otherSeries:function(){return"Inne"},"dirIndir:title":function(){return"DIR/INDIR"},"dirIndir:seriesName":function(){return"FTE"},"effIneff:title":function(){return"Podzia≈Ç zasob√≥w"},"effIneff:seriesName":function(){return"FTE"},"effIneff:category:value":function(){return"I/E"},"effIneff:category:dirIndir":function(){return"D/I"},"effIneff:category:other":function(){return"..."},"effIneff:name:value":function(){return"INEFF/EFF"},"effIneff:name:dirIndir":function(){return"DIRECT/INDIRECT"},"effIneff:name:other":function(){return"Inne"},"tooltipHeaderFormat:year":function(){return"YYYY"},"tooltipHeaderFormat:quarter":function(t){return"["+e.v(t,"quarter")+" kwarta≈Ç] YYYY"},"tooltipHeaderFormat:month":function(){return"YYYY MMMM"},"tooltipHeaderFormat:week":function(){return"wo [tydzie≈Ñ] (LL)"},"tooltipHeaderFormat:day":function(){return"LL"},"tooltipHeaderFormat:shift":function(t){return"LL[, "+e.v(t,"shift")+" zmiana]"},"tooltipHeaderFormat:hour":function(){return"LLL"},"filter:mode":function(){return"Tryb"},"filter:mode:online":function(){return"Online"},"filter:mode:date":function(){return"Zadany okres czasu"},"filter:from":function(){return"Od: "},"filter:to":function(){return"Do: "},"filter:interval":function(){return"Podzia≈Ç czasu"},"filter:interval:year":function(){return"rok"},"filter:interval:quarter":function(){return"kw"},"filter:interval:month":function(){return"mc"},"filter:interval:week":function(){return"tydz"},"filter:interval:day":function(){return"dzie≈Ñ"},"filter:interval:shift":function(){return"zm"},"filter:interval:hour":function(){return"godz"},"filter:interval:title:year":function(){return"Rok"},"filter:interval:title:quarter":function(){return"Kwarta≈Ç"},"filter:interval:title:month":function(){return"MiesiƒÖc"},"filter:interval:title:week":function(){return"Tydzie≈Ñ"},"filter:interval:title:day":function(){return"Dzie≈Ñ"},"filter:interval:title:shift":function(){return"Zmiana"},"filter:interval:title:hour":function(){return"Godzina"},"filter:subdivisionType":function(){return"Typ dzia≈Çu"},"filter:subdivisionType:prod":function(){return"Monta≈º"},"filter:subdivisionType:press":function(){return"T≈Çocznia"},"filter:submit":function(){return"Filtruj raport"},"filter:submit:currentShift":function(){return"Aktualna zmiana"},"filter:submit:prevShift":function(){return"Poprzednia zmiana"},"filter:submit:today":function(){return"Dzisiaj"},"filter:submit:yesterday":function(){return"Wczoraj"},"filter:submit:currentWeek":function(){return"Aktualny tydzie≈Ñ"},"filter:submit:prevWeek":function(){return"Poprzedni tydzie≈Ñ"},"filter:submit:currentMonth":function(){return"Aktualny miesiƒÖc"},"filter:submit:prevMonth":function(){return"Poprzedni miesiƒÖc"},"filter:submit:currentQuarter":function(){return"Aktualny kwarta≈Ç"},"filter:submit:q1":function(){return"I kwarta≈Ç"},"filter:submit:q2":function(){return"II kwarta≈Ç"},"filter:submit:q3":function(){return"III kwarta≈Ç"},"filter:submit:q4":function(){return"IV kwarta≈Ç"},"filter:submit:currentYear":function(){return"Aktualny rok"},"filter:submit:prevYear":function(){return"Poprzedni rok"},"filter:divisions":function(){return"Wydzia≈Ç"},"filter:majorMalfunction":function(){return"Powa≈ºna awaria [h]"},"filter:options":function(){return"Poka≈º opcje wy≈õwietlania"},"filter:weekends":function(){return"Weekendy"},"filter:weekends:title":function(){return"Czy w raporcie majƒÖ byƒá zawarte dane z sob√≥t i niedziel?"},"options:filter":function(){return"Poka≈º opcje filtrowania"},"options:series":function(){return"Serie danych"},"options:extremes":function(){return"Synchronizacja warto≈õci min./maks."},"options:extremes:none":function(){return"brak"},"options:extremes:siblings":function(){return"bez nadrzƒôdnego"},"options:extremes:parent":function(){return"z nadrzƒôdnym"},"options:references":function(){return"Referencje"},"options:references:coeffs":function(){return"Wska≈∫niki"},"options:references:reasons":function(){return"Powody przestoj√≥w"},"options:references:aors":function(){return"Obszary odpowiedzialno≈õci"},"options:clip":function(){return"CLIP"},"options:direct":function(){return"DIRECT"},"options:indirect":function(){return"INDIRECT"},"options:warehouse":function(){return"WAREHOUSE"},"options:dirIndir":function(){return"DIRECT/INDIRECT"},"options:effIneff":function(){return"INEFF/EFF"},"options:absence":function(){return"Absencja"},"options:aors":function(){return"Obszary odpowiedzialnosci"},"options:reasons":function(){return"Powody przestoj√≥w"},"options:prodTasks":function(){return"Zadania produkcyjne"},"options:prodFunctions":function(){return"Funkcje na produkcji"},"options:companies":function(){return"Firmy"},"settings:tab:quantityDone":function(){return"Sztuki"},"settings:tab:efficiency":function(){return"Wydajno≈õƒá"},"settings:tab:productivity":function(){return"Produktywno≈õƒá"},"settings:tab:productivityNoWh":function(){return"Produktywno≈õƒá bez magazynu"},"settings:tab:scheduledDowntime":function(){return"Planowane przestoje"},"settings:tab:unscheduledDowntime":function(){return"Nieplanowane przestoje"},"settings:tab:aors":function(){return"Czas przestoj√≥w - obszary odp."},"settings:tab:reasons":function(){return"Czas przestoj√≥w - powody"},"settings:tab:clip":function(){return"CLIP"},"settings:tab:dirIndir":function(){return"DIRECT/INDIRECT"},"settings:tab:effIneff":function(){return"Podzia≈Ç zasob√≥w"},"settings:tab:hr":function(){return"HR"},"settings:tab:wh":function(){return"Magazyn"},"settings:tab:downtimesInAors":function(){return"Przestoje w obszarach"},"settings:overall":function(){return"ML"},"settings:prod":function(){return"Monta≈º"},"settings:press":function(){return"T≈Çocznia"},"settings:aors":function(){return"Kolory i warto≈õci referencyjne dla obszar√≥w odpowiedzialno≈õci mo≈ºna ustawiƒá na stronie <a href='#aors'>S≈Çowniki &gt; Obszary odpowiedzialno≈õci</a>."},"settings:reasons":function(){return"Kolory i warto≈õci referencyjne dla powod√≥w przestoj√≥w mo≈ºna ustawiƒá na stronie <a href='#downtimeReasons'>S≈Çowniki &gt; Powody przestoj√≥w.</a>"},"settings:prodTasks":function(){return"Kolory warto≈õci zada≈Ñ produkcyjnych mo≈ºna ustawiaƒá na stronie <a href='#prodTasks'>S≈Çowniki &gt; Zadania produkcyjne</a>."},"settings:absence":function(){return"Zadanie produkcyjne absencji"},"settings:metricRefs":function(){return"Warto≈õci referencyjne"},"settings:color":function(){return"Kolor"},"settings:color:clipOrderCount":function(){return"Kolor Ilo≈õƒá zlece≈Ñ"},"settings:color:clipProduction":function(){return"Kolor Produkcja"},"settings:color:clipEndToEnd":function(){return"Kolor End2End"},"settings:color:direct":function(){return"Kolor DIRECT"},"settings:color:indirect":function(){return"Kolor INDIRECT"},"settings:color:warehouse":function(){return"Kolor WAREHOUSE"},"settings:color:reference":function(){return"Kolor referencji"},"settings:color:absence":function(){return"Kolor absencji"},"settings:color:dirIndir":function(){return"Kolor D/I"},"settings:color:eff":function(){return"Kolor EFF"},"settings:color:ineff":function(){return"Kolor INEFF"},"settings:color:hrTotal":function(){return"Kolor sumy FTE"},"settings:coeff":function(){return"Wsp√≥≈Çczynnik"},"settings:hr:quantityDone":function(){return"Kolor warto≈õci Produkcja mo≈ºna ustawiƒá w zak≈Çadce <a href='#reports;settings?tab=quantityDone' data-tab='quantityDone'>Sztuki</a>."},"settings:hr:directIndirect":function(){return"Kolor warto≈õci DIRECT oraz INDIRECT mo≈ºna ustawiƒá w zak≈Çadce <a href='#reports;settings?tab=dirIndir' data-tab='dirIndir'>DIRECT/INDIRECT</a>."},"settings:hr:dirIndir":function(){return"Kolor warto≈õci IND/DIR mo≈ºna ustawiƒá w zak≈Çadce <a href='#reports;settings?tab=effIneff' data-tab='effIneff'>Podzia≈Ç zasob√≥w</a> (<em>Kolor D/I</em>)."},"settings:hr:companies":function(){return"Kolory warto≈õci firm mo≈ºna ustawiaƒá na stronie <a href='#companies'>S≈Çowniki &gt; Firmy</a>."},"settings:hr:prodFunctions":function(){return"Kolory warto≈õci funkcji na produkcji mo≈ºna ustawiaƒá na stronie <a href='#prodFunctions'>S≈Çowniki &gt; Funkcje na produkcji</a>."},"settings:wh:comp":function(){return"Magazyn komponent√≥w"},"settings:wh:finGoods":function(){return"Magazyn wyrob√≥w gotowych"},"settings:wh:subdivision":function(){return"Dzia≈Ç"},"settings:wh:inComp":function(){return"Przyjƒôcia komponent√≥w"},"settings:wh:coopComp":function(){return"Obs≈Çuga kooperacji"},"settings:wh:exStorage":function(){return"Obs≈Çuga magazyn√≥w zewnƒôtrznych"},"settings:wh:fifo":function(){return"Dostarczanie komponent√≥w 'FIFO'"},"settings:wh:staging":function(){return"Dostarczanie komp. 'Staging' oraz wyda≈Ñ koszt."},"settings:wh:sm":function(){return"Dostarczanie komponent√≥w 'SM'"},"settings:wh:paint":function(){return"Obs≈Çuga malarni"},"settings:wh:fixBin":function(){return"Uzupe≈Çnianie FixBin√≥w"},"settings:wh:compAbsence":function(){return"Absencja"},"settings:wh:finGoodsIn":function(){return"Przyjƒôcia wyrob√≥w gotowych"},"settings:wh:finGoodsOut":function(){return"Przygotowanie wysy≈Çek i za≈Çadunek"},"settings:wh:finGoodsAbsence":function(){return"Absencja"},"settings:downtimesInAors:statuses":function(){return"Domy≈õlnie statusy przestoj√≥w na li≈õcie"},"settings:downtimesInAors:specificAor":function(){return"Domy≈õlny wyszczeg√≥lniony obszar odpowiedzialno≈õci"},"settings:downtimesInAors:aors:own":function(){return"Domy≈õlnie obszary odpowiedzialno≈õci u≈ºytkownika."},"settings:downtimesInAors:aors:specific":function(){return"Domy≈õlnie wybrane obszary odpowiedzialno≈õci:"},"settings:downtimesInAors:clipInterval":function(){return"Domy≈õlny podzia≈Ç czasu dla wykresu CLIP"},"settings:downtimesInAors:clipDateRange":function(){return"Domy≈õlny zakres czasu dla wykresu CLIP"},"settings:downtimesInAors:dtlDateRange":function(){return"Domy≈õlny zakres czasu dla listy przestoj√≥w"},"settings:downtimesInAors:dtcInterval":function(){return"Domy≈õlny podzia≈Ç czasu dla wykres√≥w przestoj√≥w"},"settings:downtimesInAors:dtcDateRange":function(){return"Domy≈õlny zakres czasu dla wykres√≥w przestoj√≥w"},"oee:table:loading":function(){return"≈Åadowanie..."},"oee:table:loadingFailed":function(){return"≈Åadowanie nie powiod≈Ço siƒô :("},"oee:no":function(){return"Lp."},"oee:division":function(){return"Wydzia≈Ç"},"oee:prodLine":function(){return"Nazwa maszyny"},"oee:inventoryNo":function(){return"Nr inwent."},"oee:totalAvailability":function(){return"Dyspoz. maszyn ca≈Çkowita [h]"},"oee:operationalAvailability:h":function(){return"Dyspoz. maszyn oper. [h]"},"oee:operationalAvailability:%":function(){return"Dyspoz. maszyn oper. [%]"},"oee:exploitation:h":function(){return"Wykorz. maszyn [h]"},"oee:exploitation:%":function(){return"Wykorz. maszyn [%]"},"oee:oee":function(){return"OEE [%]"},"oee:adjusting:duration":function(){return"Czas ustaw. / przezbr. [h]"},"oee:maintenance:duration":function(){return"Czas konserw. [h]"},"oee:renovation:duration":function(){return"Czas przeglƒÖd√≥w / remont√≥w [h]"},"oee:malfunction:duration":function(){return"Czas wszystkich awarii [h]"},"oee:malfunction:count":function(){return"Ilo≈õƒá wszystkich awarii [szt]"},"oee:majorMalfunction:count":function(){return"Ilo≈õƒá powa≈ºnych awarii [szt]"},"oee:mttr":function(){return"MTTR [h]"},"oee:mtbf":function(){return"MTBF [h]"},"operator:filter:mode:shift":function(){return"Zmiana"},"operator:filter:mode:masters":function(){return"Mistrzowie"},"operator:filter:mode:operators":function(){return"Operatorzy"},"operator:effAndProd:title":function(){return"Wydajno≈õƒá/Produktywno≈õƒá"},"operator:efficiency:byDivision":function(t){return"Wydajno≈õƒá "+e.v(t,"division")},"operator:efficiency":function(){return"Wydajno≈õƒá operator√≥w"},"operator:productivity":function(){return"Produktywno≈õƒá operator√≥w"},"operator:workTimes:title":function(){return"Przepracowany czas/Przestoje"},"operator:workTimes:total":function(){return"Ca≈Çkowity przepracowany czas"},"operator:workTimes:sap":function(){return"Czas przepracowany (SAP)"},"operator:workTimes:otherWorks":function(){return"Czas innych prac"},"operator:workTimes:downtime":function(){return"Czas przestoju"},"operator:machineTimes:title":function(){return"Maszyny - czas pracy/czasy przezbroje≈Ñ"},"operator:machineTimes:machineMedian":function(){return"Mediana przezbroje≈Ñ maszyny"},"operator:machineTimes:work":function(){return"Czas przepracowany"},"operator:machineTimes:operatorMedian":function(){return"Mediana przezbroje≈Ñ operator√≥w"},"operator:quantities:title":function(){return"Ilo≈õci wykonane/Straty materia≈Çowe"},"operator:quantities:good":function(){return"Dobre"},"operator:quantities:bad":function(){return"Wadliwe"},"operator:quantities:total":function(){return"Suma"},"operator:quantities:loss":function(){return"Straty"},"operator:notes:title":function(){return"Lista wykonanych czƒô≈õci z komentarzami"},"operator:notes:load":function(t){return"Wczytaj "+e.v(t,"notes")+" "+e.p(t,"notes",0,"pl",{one:"komentarz",few:"komentarze",other:"komentarzy"})+" z "+e.v(t,"worksheets")+" "+e.p(t,"worksheets",0,"pl",{one:"karty",other:"kart"})},"operator:notes:load:noData":function(){return"Wczytaj komentarze"},"operator:notes:noData":function(){return"Brak komentarzy."},"hr:quantityDone":function(){return"Produkcja"},"hr:total":function(){return"Suma"},"hr:direct":function(){return"DIRECT"},"hr:indirect":function(){return"INDIRECT"},"hr:indirDir":function(){return"IND/DIR"},"hr:title:direct":function(){return"DIRECT"},"hr:title:indirect":function(){return"INDIRECT"},"hr:title:indirDir":function(){return"INDIRECT/DIRECT"},"hr:title:details":function(){return"Funkcje/Firmy"},"hr:total:columns":function(){return"Wska≈∫nik;Jednostka"},"hr:direct:columns":function(){return"DIRECT;Jednostka"},"hr:indirect:columns":function(){return"INDIRECT;Jednostka"},"hr:indirDir:columns":function(){return"Wska≈∫nik;Jednostka"},"hr:details:columns":function(){return"Stanowisko;Firma;Jednostka;≈örednia"},"wh:eff":function(){return"Wydajno≈õƒá"},"wh:fte":function(){return"FTE"},"wh:fte:avg":function(){return"≈örednie FTE"},"wh:qty":function(){return"Ilo≈õƒá"},"wh:absence":function(){return"Absencja"},"wh:effAndFte:exTransactions":function(){return"Obs≈Çuga transakcji zewnƒôtrznych"},"wh:effAndFte:inTransactions":function(){return"Obs≈Çuga transakcji wewnƒôtrznych"},"wh:effAndFte:inComp":function(){return"Przyjƒôcia komponent√≥w"},"wh:effAndFte:coopComp":function(){return"Obs≈Çuga kooperacji"},"wh:effAndFte:exStorage":function(){return"Obs≈Çuga magazyn√≥w zewnƒôtrznych"},"wh:effAndFte:fifo":function(){return"Dostarczanie komponent√≥w 'FIFO'"},"wh:effAndFte:staging":function(){return"Dostarczanie komponent√≥w 'Staging'"},"wh:effAndFte:sm":function(){return"Dostarczanie komponent√≥w 'SM'"},"wh:effAndFte:paint":function(){return"Obs≈Çuga malarni"},"wh:effAndFte:fixBin":function(){return"Uzupe≈Çnianie FixBin√≥w"},"wh:effAndFte:finGoodsIn":function(){return"Przyjƒôcia wyrob√≥w gotowych"},"wh:effAndFte:finGoodsOut":function(){return"Wyr. got.: przyg. wysy≈Çek i za≈Çadunek"},"wh:category:exTransactions":function(){return"Kategorie transakcji zewnƒôtrznych"},"wh:category:inTransactions":function(){return"Kategorie transakcji wewnƒôtrznych"},"wh:category:coopComp":function(){return"Kategorie wyd. do kooperacji"},"wh:category:exStorage":function(){return"Kategorie obs≈Çugi mag. zew."},"wh:category:fifo":function(){return"Kategorie FIFO"},"wh:category:totalAbsence":function(){return"Kategorie absencji ca≈Çkowitej"},"wh:category:compAbsence":function(){return"Kategorie absencji mag. komp."},"wh:category:finGoodsAbsence":function(){return"Kategorie absencji mag. wyr. got."},"wh:category:name:inComp":function(){return"Przyj. komponent√≥w"},"wh:category:name:coopComp":function(){return"Wyd. do kooperacji"},"wh:category:name:coopComp541":function(){return"541"},"wh:category:name:coopCompProcessing":function(){return"Przer√≥bka"},"wh:category:name:exStorage":function(){return"Obs≈Çuga mag. zew."},"wh:category:name:exStorageIn":function(){return"Przyjƒôcia"},"wh:category:name:exStorageOut":function(){return"Wydania"},"wh:category:name:staging":function(){return"STAGING"},"wh:category:name:fifo":function(){return"FIFO"},"wh:category:name:paint":function(){return"PAINT"},"wh:category:name:fixBin":function(){return"FIXBIN"},"wh:totalAndAbsence:total":function(){return"Zatrudnienie ca≈Çkowite"},"wh:totalAndAbsence:comp":function(){return"Zatrudnienie mag. komponent√≥w"},"wh:totalAndAbsence:finGoods":function(){return"Zatrudnienie mag. wyr. gotowych"},"filenames:1:coeffs":function(){return"WMES_Wskazniki_WydProd"},"filenames:1:downtimesByAor":function(){return"WMES_Przestoje_ObszOdp"},"filenames:1:downtimesByReason":function(){return"WMES_Przestoje_Powody"},"filenames:2:clip":function(){return"WMES_CLIP"},"filenames:2:dirIndir":function(){return"WMES_DirIndir"},"filenames:2:effIneff":function(){return"WMES_PodzialZasobow"},"filenames:3:table":function(){return"WMES_WykZas_Maszyny"},"filenames:3:oee":function(){return"WMES_WykZas_OEE"},"filenames:3:downtime":function(){return"WMES_WykZas_Przestoje"},"filenames:4:effAndProd":function(){return"WMES_Operatorzy_WydProd"},"filenames:4:workTimes":function(){return"WMES_Operatorzy_CzasPracy"},"filenames:4:machineTimes":function(){return"WMES_Operatorzy_CzasPrzezbr"},"filenames:4:quantities":function(){return"WMES_Operatorzy_WykIlosci"},"filenames:5:total":function(){return"WMES_HR_Sumy"},"filenames:5:direct":function(){return"WMES_HR_Direct"},"filenames:5:indir":function(){return"WMES_HR_Indirect"},"filenames:5:indirDir":function(){return"WMES_HR_IndirDir"},"filenames:5:details":function(){return"WMES_HR_Szczegoly"},"filenames:6:suffix":function(t){return"WMES_Magazyn_"+e.v(t,"suffix")},"filenames:6:effAndFte:exTransactions":function(){return"WMES_Magazyn_ObsTranZew"},"filenames:6:effAndFte:inTransactions":function(){return"WMES_Magazyn_ObsTranWew"},"filenames:6:effAndFte:inComp":function(){return"WMES_Magazyn_PrzyjKomp"},"filenames:6:effAndFte:coopComp":function(){return"WMES_Magazyn_WydKoop"},"filenames:6:effAndFte:exStorage":function(){return"WMES_Magazyn_ObsMagZew"},"filenames:6:effAndFte:fifo":function(){return"WMES_Magazyn_FIFO"},"filenames:6:effAndFte:staging":function(){return"WMES_Magazyn_Staging"},"filenames:6:effAndFte:sm":function(){return"WMES_Magazyn_SM"},"filenames:6:effAndFte:paint":function(){return"WMES_Magazyn_Malarnia"},"filenames:6:effAndFte:fixBin":function(){return"WMES_Magazyn_FixBin"},"filenames:6:effAndFte:finGoodsIn":function(){return"WMES_Magazyn_WyrGot_Przyjecia"},"filenames:6:effAndFte:finGoodsOut":function(){return"WMES_Magazyn_WyrGot_PrzygWysZal"},"filenames:6:category:coopComp":function(){return"WMES_Magazyn_WydKoop_Kat"},"filenames:6:category:exStorage":function(){return"WMES_Magazyn_ObsMagZew_Kat"},"filenames:6:category:exTransactions":function(){return"WMES_Magazyn_ObsTranZew_Kat"},"filenames:6:category:fifo":function(){return"WMES_Magazyn_FIFO_Kat"},"filenames:6:category:totalAbsence":function(){return"WMES_Magazyn_Absencja_Calkowita"},"filenames:6:category:compAbsence":function(){return"WMES_Magazyn_Absencja_MagKomp"},"filenames:6:category:finGoodsAbsence":function(){return"WMES_Magazyn_Absencja_MagWyrGot"},"filenames:6:totalAndAbsence:total":function(){return"WMES_Magazyn_Zatr_Calkowite"},"filenames:6:totalAndAbsence:comp":function(){return"WMES_Magazyn_Zatr_MagKomp"},"filenames:6:totalAndAbsence:finGoods":function(){return"WMES_Magazyn_Zatr_MagWyrGot"},"filenames:7:inout:downtimeTimes":function(){return"WMES_PrzestojeObszary_Czasy"},"filenames:7:inout:downtimeCounts":function(){return"WMES_PrzestojeObszary_Ilosci"},"filenames:7:clip":function(){return"WMES_CLIP"},"filenames:7:downtimeTimes":function(){return"WMES_PrzestojeObszary_Czasy"},"filenames:7:downtimeCounts":function(){return"WMES_PrzestojeObszary_Ilosci"},"orders:empty":function(){return"Nie znaleziono ≈ºadnych pasujƒÖcych zlece≈Ñ."},"orders:cnf:status":function(){return"Potwierdzenie<br>(produkcja)"},"orders:cnf:date":function(){return"Czas potwierdzenia<br>(produkcja)"},"orders:dlv:status":function(){return"Potwierdzenie<br>(magazyn)"},"orders:dlv:date":function(){return"Czas potwierdzenia<br>(magazyn)"},"orders:filter:submit":function(){return"Filtruj zlecenia"},"orders:filter:orderNo":function(){return"Nr zlecenia"},"orders:filter:hour:inclusive":function(){return"Do godz. ostatniego dnia"},"orders:filter:hour:inclusive:title":function(){return"Status zlecenia do danej godziny dnia podanego w filtrze 'Do'."},"orders:filter:hour:exclusive":function(){return"Do godz. przedostatniego dnia"},"orders:filter:hour:exclusive:title":function(){return"Status zlecenia do danej godziny dnia poprzedzajƒÖcego ten podany w filtrze 'Do'."},"orders:filter:hour:finish":function(){return"Do godz. dnia uko≈Ñczenia"},"orders:filter:hour:finish:title":function(){return"Status zlecenia do danej godziny dnia uko≈Ñczenia danego zlecenia."},"orders:filter:status:red":function(){return"Niepotwierdzone"},"orders:filter:status:red:title":function(){return"Tylko zlecenia, kt√≥re nie majƒÖ CNF/PCNF lub DLV/PDLV."},"orders:filter:status:all":function(){return"Wszystkie wybrane statusy"},"orders:filter:status:all:title":function(){return"Tylko zlecenia, kt√≥re majƒÖ wszystkie wybrane statusy naraz."},"orders:filter:status:in":function(){return"Dowolny wybrany status"},"orders:filter:status:in:title":function(){return"Tylko zlecenia, kt√≥re majƒÖ przynajmniej jeden z wybranych status√≥w."},"orders:filter:status:nin":function(){return"≈ªadne z wybranych status√≥w"},"orders:filter:status:nin:title":function(){return"Tylko zlecenia, kt√≥re nie majƒÖ wszystkich wybranych status√≥w naraz."},"orders:filter:status:wo":function(){return"Bez wybranego statusu"},"orders:filter:status:wo:title":function(){return"Tylko zlecenia, kt√≥re nie majƒÖ jednego z wybranych status√≥w."},"orders:filter:status:CNF":function(){return"Potwierdzone (CNF)"},"orders:filter:status:PCNF":function(){return"Czƒô≈õciowo potwierdzone (PCNF)"},"orders:filter:status:DLV":function(){return"Dostarczone (DLV)"},"orders:filter:status:PDLV":function(){return"Czƒô≈õciowo dostarczone (PDLV)"},"7:filter:statuses":function(){return"Status przestoj√≥w na li≈õcie"},"7:filter:specificAor":function(){return"Wyszczeg√≥lniony obszar odp."},"7:filter:aors":function(){return"Inne obszary odpowiedzialno≈õci"},"7:filter:aors:ph":function(){return"Wszystkie obszary"},"7:filter:customTimes":function(){return"Niestandardowy zakres czasu"},"7:title:downtimeTimes":function(){return"Czas przestoj√≥w"},"7:title:downtimeCounts":function(){return"Ilo≈õƒá przestoj√≥w"},"7:valueSuffix:hour":function(){return"h"},"7:valueSuffix:manHour":function(){return"rbh"},"7:series:indoor":function(){return"Inne (Indoor)"},"7:series:outdoor":function(){return"Inne (Outdoor)"},"7:series:indoor:specific":function(){return"Wyszczeg√≥lniony (Indoor)"},"7:series:outdoor:specific":function(){return"Wyszczeg√≥lniony (Outdoor)"},"7:series:indoor:aor":function(t){return e.v(t,"aor")+" (Indoor)"},"7:series:outdoor:aor":function(t){return e.v(t,"aor")+" (Outdoor)"},"7:series:indoor:total":function(){return"Suma (Indoor)"},"7:series:outdoor:total":function(){return"Suma (Outdoor)"},"7:series:total":function(){return"Suma"},"7:customTimes:title":function(){return"Niestandardowy zakres czasu raportu"},"7:customTimes:submit":function(){return"Filtruj z niestandardowymi czasami"},"7:customTimes:reset":function(){return"Filtruj z domy≈õlnymi czasami"},"7:customTimes:clip:date":function(){return"Zakres czasu dla wykresu CLIP"},"7:customTimes:clip:interval":function(){return"Podzia≈Ç czasu dla wykresu CLIP"},"7:customTimes:dtl:date":function(){return"Zakres czasu dla listy przestoj√≥w"},"7:customTimes:dtc:date":function(){return"Zakres czasu dla wykres√≥w przestoj√≥w"},"7:customTimes:dtc:interval":function(){return"Podzia≈Ç czasy dla wykres√≥w przestoj√≥w"}}}),define("app/reports/routes",["../user","../router","../viewport","i18n!app/nls/reports"],function(t,e,n){"use strict";e.map("/reports/1",t.auth("REPORTS:VIEW","REPORTS:1:VIEW"),function(t){return n.currentPage&&"report1"===n.currentPage.pageId?n.currentPage.query.reset(t.query):void n.loadPage("app/reports/pages/Report1Page",function(e){return new e({query:t.query,displayOptions:t.fragment})})}),e.map("/reports/2",t.auth("REPORTS:VIEW","REPORTS:2:VIEW"),function(t){return n.currentPage&&"report2"===n.currentPage.pageId?n.currentPage.query.reset(t.query):void n.loadPage("app/reports/pages/Report2Page",function(e){return new e({query:t.query,displayOptions:t.fragment})})}),e.map("/reports/3",t.auth("REPORTS:VIEW","REPORTS:3:VIEW"),function(t){n.loadPage("app/reports/pages/Report3Page",function(e){return new e({query:t.rql})})}),e.map("/reports/4",t.auth("REPORTS:VIEW","REPORTS:4:VIEW"),function(t){n.loadPage("app/reports/pages/Report4Page",function(e){return new e({query:t.query})})}),e.map("/reports/5",t.auth("REPORTS:VIEW","REPORTS:5:VIEW"),function(t){return n.currentPage&&"report5"===n.currentPage.pageId?n.currentPage.query.reset(t.query):void n.loadPage("app/reports/pages/Report5Page",function(e){return new e({query:t.query,displayOptions:t.fragment})})}),e.map("/reports/6",t.auth("REPORTS:VIEW","REPORTS:6:VIEW"),function(t){return n.currentPage&&"report6"===n.currentPage.pageId?n.currentPage.query.reset(t.query):void n.loadPage("app/reports/pages/Report6Page",function(e){return new e({query:t.query,displayOptions:t.fragment})})}),e.map("/reports/7",t.auth("REPORTS:VIEW","REPORTS:7:VIEW"),function(t){n.loadPage("app/reports/pages/Report7Page",function(e){return new e({query:t.query})})}),e.map("/reports;settings",t.auth("REPORTS:MANAGE"),function(t){n.loadPage("app/reports/pages/ReportSettingsPage",function(e){return new e({initialTab:t.query.tab})})})}),define("app/nls/subdivisions",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Subdivisions"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the subdivisions :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the subdivision :("
},"MSG:DELETED":function(t){return"Subdivision <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add subdivision"},"PAGE_ACTION:edit":function(){return"Edit subdivision"},"PAGE_ACTION:delete":function(){return"Delete subdivision"},"PANEL:TITLE:details":function(){return"Subdivision's details"},"PANEL:TITLE:addForm":function(){return"Add subdivision form"},"PANEL:TITLE:editForm":function(){return"Edit subdivision form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:division":function(){return"Division"},"PROPERTY:name":function(){return"Name"},"PROPERTY:prodTaskTags":function(){return"Production task tags"},"PROPERTY:type":function(){return"Type"},"PROPERTY:aor":function(){return"Default AOR"},"PROPERTY:autoDowntime":function(){return"Auto downtime"},"TYPE:assembly":function(){return"Assembly"},"TYPE:press":function(){return"Press"},"TYPE:storage":function(){return"Warehouse"},"TYPE:other":function(){return"Other"},"FORM:ACTION:add":function(){return"Add subdivision"},"FORM:ACTION:edit":function(){return"Edit subdivision"},"FORM:ERROR:addFailure":function(){return"Failed to add the new subdivision :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the subdivision :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Subdivision deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete subdivision"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen subdivision?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> subdivision?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the subdivision :-("}},pl:!0}}),define("app/nls/pl/subdivisions",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Dzia≈Çy"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie dzia≈Ç√≥w nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie dzia≈Çu nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Dzia≈Ç <em>"+e.v(t,"label")+"</em> zosta≈Ço usuniƒôte."},"PAGE_ACTION:add":function(){return"Dodaj dzia≈Ç"},"PAGE_ACTION:edit":function(){return"Edytuj dzia≈Ç"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ dzia≈Ç"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy dzia≈Çu"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania dzia≈Çu"},"PANEL:TITLE:editForm":function(){return"Formularz edycji dzia≈Çu"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:division":function(){return"Wydzia≈Ç"},"PROPERTY:name":function(){return"Nazwa"},"PROPERTY:prodTaskTags":function(){return"Tagi zada≈Ñ produkcyjnych"},"PROPERTY:type":function(){return"Typ"},"PROPERTY:aor":function(){return"Domy≈õlny obszar odp."},"PROPERTY:autoDowntime":function(){return"Automatyczny przest√≥j"},"TYPE:assembly":function(){return"Monta≈º"},"TYPE:press":function(){return"T≈Çocznia"},"TYPE:storage":function(){return"Magazyn"},"TYPE:other":function(){return"Inny"},"FORM:ACTION:add":function(){return"Dodaj dzia≈Ç"},"FORM:ACTION:edit":function(){return"Edytuj dzia≈Ç"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá dzia≈Çu :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá dzia≈Çu :-("},"FORM:PLACEHOLDER:aor":function(){return"Wybierz obszar odpowiedzialno≈õci..."},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia dzia≈Çu"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ dzia≈Ç"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany dzia≈Ç?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá dzia≈Ç <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá dzia≈Çu :-("}}}),define("app/subdivisions/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","../data/subdivisions","./Subdivision","i18n!app/nls/subdivisions"],function(t,e,n,r,i,o){"use strict";var s=n.auth("DICTIONARIES:VIEW"),a=n.auth("DICTIONARIES:MANAGE");t.map("/subdivisions",s,function(){e.loadPage(["app/core/pages/ListPage","app/subdivisions/views/decorateSubdivision"],function(t,e){return new t({collection:i,columns:[{id:"division",className:"is-min"},{id:"type",className:"is-min"},{id:"name",className:"is-min"},"prodTaskTags",{id:"aor",className:"is-min"},{id:"autoDowntime",className:"is-min"}],serializeRow:e})})}),t.map("/subdivisions/:id",function(t){e.loadPage(["app/core/pages/DetailsPage","app/subdivisions/views/SubdivisionDetailsView"],function(e,n){return new e({DetailsView:n,model:new o({_id:t.params.id})})})}),t.map("/subdivisions;add",a,function(){e.loadPage("app/subdivisions/pages/AddSubdivisionFormPage",function(t){return new t({model:new o})})}),t.map("/subdivisions/:id;edit",a,function(t){e.loadPage("app/subdivisions/pages/EditSubdivisionFormPage",function(e){return new e({model:new o({_id:t.params.id})})})}),t.map("/subdivisions/:id;delete",a,r.bind(null,o))}),define("app/nls/users",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Users"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"breadcrumbs:logIn":function(){return"Log in form"},"MSG:LOADING_FAILURE":function(){return"Failed to load the users :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the user :("},"MSG:DELETED":function(t){return"User <em>"+e.v(t,"label")+"</em> was deleted."},"MSG:SYNCED":function(){return"Users were synchronized successfully :)"},"MSG:SYNC_FAILURE":function(){return"Failed to synchronize the users :("},"PAGE_ACTION:add":function(){return"Add user"},"PAGE_ACTION:edit":function(){return"Edit user"},"PAGE_ACTION:editAccount":function(){return"Edit account"},"PAGE_ACTION:delete":function(){return"Delete user"},"PAGE_ACTION:sync":function(){return"Synchronize with the AC database"},"PANEL:TITLE:details":function(){return"User's details"},"PANEL:TITLE:addForm":function(){return"Add user form"},"PANEL:TITLE:editForm":function(){return"Edit user form"},"filter:submit":function(){return"Filter users"},"filter:placeholder:personellId":function(){return"Any personnel ID"},"filter:placeholder:lastName":function(){return"Any last name"},"PROPERTY:login":function(){return"Login"},"PROPERTY:password":function(){return"Password"},"PROPERTY:password2":function(){return"Confirm password"},"PROPERTY:email":function(){return"E-mail address"},"PROPERTY:privileges":function(){return"Privileges"},"PROPERTY:prodFunction":function(){return"Production function"},"PROPERTY:aors":function(){return"Areas of responsibility"},"PROPERTY:company":function(){return"Companies"},"PROPERTY:kdDivision":function(){return"Division (AC)"},"PROPERTY:personellId":function(){return"Personell ID"},"PROPERTY:card":function(){return"Card no"},"PROPERTY:name":function(){return"Name"},"PROPERTY:firstName":function(){return"First name"},"PROPERTY:lastName":function(){return"Last name"},"PROPERTY:registerDate":function(){return"Register date"},"PROPERTY:kdPosition":function(){return"Position (AC)"},"PROPERTY:active":function(){return"Active?"},"PROPERTY:orgUnit":function(){return"Org Unit"},"PROPERTY:vendor":function(){return"Vendor"},"PROPERTY:gender":function(){return"Gender"},"ACTIVE:true":function(){return"Yes"},"ACTIVE:false":function(){return"No"},"gender:female":function(){return"Female"},"gender:male":function(){return"Male"},"FORM:ACTION:add":function(){return"Add user"},"FORM:ACTION:edit":function(){return"Edit user"},"FORM:ERROR:passwordMismatch":function(){return"The specified password do not match."},"FORM:ERROR:addFailure":function(){return"Failed to add the user :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the user :-("},"NO_DATA:aors":function(){return"All"},"NO_DATA:company":function(){return"Unspecified"},"NO_DATA:prodFunction":function(){return"Unspecified"},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"User deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete user"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen user?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> user?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the user :-("},"PRIVILEGE:ORDERS:VIEW":function(){return"Orders: view"},"PRIVILEGE:ORDERS:MANAGE":function(){return"Orders: manage"},"PRIVILEGE:EVENTS:VIEW":function(){return"Events: view"},"PRIVILEGE:EVENTS:MANAGE":function(){return"Events: manage"},"PRIVILEGE:USERS:VIEW":function(){return"Users: view"},"PRIVILEGE:USERS:MANAGE":function(){return"Users: manage"},"PRIVILEGE:DICTIONARIES:VIEW":function(){return"Dictionaries: view"},"PRIVILEGE:DICTIONARIES:MANAGE":function(){return"Dictionaries: manage"},"PRIVILEGE:FTE:MASTER:VIEW":function(){return"FTE (production): view"},"PRIVILEGE:FTE:MASTER:MANAGE":function(){return"FTE (production): manage"},"PRIVILEGE:FTE:MASTER:ALL":function(){return"FTE (production): access to all divisions"},"PRIVILEGE:FTE:LEADER:VIEW":function(){return"FTE (distribution): view"},"PRIVILEGE:FTE:LEADER:MANAGE":function(){return"FTE (distribution): manage"},"PRIVILEGE:FTE:LEADER:ALL":function(){return"FTE (distribution): access to all divisions"},"PRIVILEGE:HOURLY_PLANS:VIEW":function(){return"Hourly plans: view"},"PRIVILEGE:HOURLY_PLANS:MANAGE":function(){return"Hourly plans: manage"},"PRIVILEGE:HOURLY_PLANS:ALL":function(){return"Hourly plans: access to all divisions"},"PRIVILEGE:PROD_DOWNTIMES:VIEW":function(){return"Downtimes: view"},"PRIVILEGE:PROD_DOWNTIMES:MANAGE":function(){return"Downtimes: corroboration"},"PRIVILEGE:PROD_DOWNTIMES:ALL":function(){return"Downtimes: access to all divisions"},"PRIVILEGE:PRESS_WORKSHEETS:VIEW":function(){return"Worksheets: view"},"PRIVILEGE:PRESS_WORKSHEETS:MANAGE":function(){return"Worksheets: manage"},"PRIVILEGE:PROD_DATA:VIEW":function(){return"Production data: view"},"PRIVILEGE:PROD_DATA:MANAGE":function(){return"Production data: manage"},"PRIVILEGE:PROD_DATA:CHANGES:REQUEST":function(){return"Production data changes: request"},"PRIVILEGE:PROD_DATA:CHANGES:MANAGE":function(){return"Production data changes: manage"},"PRIVILEGE:REPORTS:VIEW":function(){return"Reports: view all"},"PRIVILEGE:REPORTS:MANAGE":function(){return"Reports: manage"},"PRIVILEGE:REPORTS:1:VIEW":function(){return"Reports: PROD, EFF, Downtime"},"PRIVILEGE:REPORTS:2:VIEW":function(){return"Reports: CLIP"},"PRIVILEGE:REPORTS:3:VIEW":function(){return"Reports: OEE"},"PRIVILEGE:REPORTS:4:VIEW":function(){return"Reports: Operators"},"PRIVILEGE:REPORTS:5:VIEW":function(){return"Reports: HR"},"PRIVILEGE:REPORTS:6:VIEW":function(){return"Reports: Warehouse"},"PRIVILEGE:REPORTS:7:VIEW":function(){return"Reports: Downtimes in AORs"},"PRIVILEGE:XICONF:VIEW":function(){return"Xiconf: view"},"PRIVILEGE:XICONF:MANAGE":function(){return"Xiconf: manage"},"PRIVILEGE:XICONF:NOTIFY":function(){return"Xiconf: notify"},"PRIVILEGE:ICPO:VIEW":function(){return"ICPO: view"},"PRIVILEGE:ICPO:MANAGE":function(){return"ICPO: manage"},"PRIVILEGE:PURCHASE_ORDERS:VIEW":function(){return"Purchase orders: view"},"PRIVILEGE:PURCHASE_ORDERS:MANAGE":function(){return"Purchase orders: manage"},"PRIVILEGE:FACTORY_LAYOUT:MANAGE":function(){return"Monitoring: manage"},"PRIVILEGE:VENDOR_NC12S:VIEW":function(){return"12NC database: view"},"PRIVILEGE:VENDOR_NC12S:MANAGE":function(){return"12NC database: manage"},"PRIVILEGE:KAIZEN:MANAGE":function(){return"Kaizen: manage orders"},"PRIVILEGE:KAIZEN:DICTIONARIES:VIEW":function(){return"Kaizen: view dictionaries"},"PRIVILEGE:KAIZEN:DICTIONARIES:MANAGE":function(){return"Kaizen: manage dictionaries"},"PRIVILEGE:OPERATOR:ACTIVATE":function(){return"WMES Operator: client activation"},"PRIVILEGE:DOCUMENTS:VIEW":function(){return"WMES Documents: view"},"PRIVILEGE:DOCUMENTS:MANAGE":function(){return"WMES Documents: manage"},"PRIVILEGE:DOCUMENTS:ACTIVATE":function(){return"WMES Documents: client activation"},"PRIVILEGE:OPINION_SURVEYS:MANAGE":function(){return"Opinion surveys: manage"},"select2:placeholder":function(){return"Search by last name or personnel ID..."},"select2:users:system":function(){return"System"}},pl:!0}}),define("app/nls/pl/users",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"U≈ºytkownicy"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"breadcrumbs:logIn":function(){return"Logowanie do systemu"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie u≈ºytkownik√≥w nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie u≈ºytkownika nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"U≈ºytkownik <em>"+e.v(t,"label")+"</em> zosta≈Ç usuniƒôty."},"MSG:SYNCED":function(){return"U≈ºytkownicy zostali zsynchronizowani :)"},"MSG:SYNC_FAILURE":function(){return"Synchronizacja u≈ºytkownik√≥w nie powiod≈Ça siƒô :("},"PAGE_ACTION:add":function(){return"Dodaj u≈ºytkownika"},"PAGE_ACTION:edit":function(){return"Edytuj u≈ºytkownika"},"PAGE_ACTION:editAccount":function(){return"Edytuj konto"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ u≈ºytkownika"},"PAGE_ACTION:sync":function(){return"Synchronizuj z bazƒÖ KD"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy u≈ºytkownika"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania u≈ºytkownika"},"PANEL:TITLE:editForm":function(){return"Formularz edycji u≈ºytkownika"},"filter:submit":function(){return"Filtruj u≈ºytkownik√≥w"},"filter:placeholder:personellId":function(){return"Dowolny nr"},"filter:placeholder:lastName":function(){return"Dowolne nazwisko"},"PROPERTY:login":function(){return"Login"},"PROPERTY:password":function(){return"Has≈Ço"},"PROPERTY:password2":function(){return"Potwierdzenie has≈Ça"},"PROPERTY:email":function(){return"Adres e-mail"},"PROPERTY:privileges":function(){return"Uprawnienia"},"PROPERTY:prodFunction":function(){return"Funkcja na produkcji"},"PROPERTY:aors":function(){return"Obszary odpowiedzialno≈õci"},"PROPERTY:company":function(){return"Firma"},"PROPERTY:kdDivision":function(){return"Wydzia≈Ç (KD)"},"PROPERTY:personellId":function(){return"Nr kadrowy"},"PROPERTY:card":function(){return"Nr karty"},"PROPERTY:name":function(){return"Imiƒô i nazwisko"},"PROPERTY:firstName":function(){return"Imiƒô"},"PROPERTY:lastName":function(){return"Nazwisko"},"PROPERTY:registerDate":function(){return"Data rejestracji"},"PROPERTY:kdPosition":function(){return"Stanowisko (KD)"},"PROPERTY:active":function(){return"Aktywny?"},"PROPERTY:orgUnit":function(){return"Jednostka organizacyjna"},"PROPERTY:vendor":function(){return"Dostawca"},"PROPERTY:gender":function(){return"P≈Çeƒá"},"ACTIVE:true":function(){return"Tak"},"ACTIVE:false":function(){return"Nie"},"gender:female":function(){return"≈ªe≈Ñska"},"gender:male":function(){return"Mƒôska"},"FORM:ACTION:add":function(){return"Dodaj u≈ºytkownika"},"FORM:ACTION:edit":function(){return"Edytuj u≈ºytkownika"},"FORM:ERROR:passwordMismatch":function(){return"Podane has≈Ça nie pasujƒÖ do siebie."},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá u≈ºytkownika :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá u≈ºytkownika :-("},"NO_DATA:aors":function(){return"Wszystkie"},"NO_DATA:company":function(){return"Nieokre≈õlona"},"NO_DATA:prodFunction":function(){return"Nieokre≈õlona"},"NO_DATA:vendor":function(){return"Wszyscy"},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia u≈ºytkownika"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ u≈ºytkownika"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybranego u≈ºytkownika?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá u≈ºytkownika <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá u≈ºytkownika :-("},"PRIVILEGE:ORDERS:VIEW":function(){return"Zlecenia: przeglƒÖdanie"},"PRIVILEGE:ORDERS:MANAGE":function(){return"Zlecenia: zarzƒÖdzanie"},"PRIVILEGE:EVENTS:VIEW":function(){return"Zdarzenia: przeglƒÖdanie"},"PRIVILEGE:EVENTS:MANAGE":function(){return"Zdarzenia: zarzƒÖdzanie"},"PRIVILEGE:USERS:VIEW":function(){return"U≈ºytkownicy: przeglƒÖdanie"},"PRIVILEGE:USERS:MANAGE":function(){return"U≈ºytkownicy: zarzƒÖdzanie"},"PRIVILEGE:DICTIONARIES:VIEW":function(){return"S≈Çowniki: przeglƒÖdanie"},"PRIVILEGE:DICTIONARIES:MANAGE":function(){return"S≈Çowniki: zarzƒÖdzanie"},"PRIVILEGE:FTE:MASTER:VIEW":function(){return"FTE (produkcja): przeglƒÖdanie"},"PRIVILEGE:FTE:MASTER:MANAGE":function(){return"FTE (produkcja): zarzƒÖdzanie"},"PRIVILEGE:FTE:MASTER:ALL":function(){return"FTE (produkcja): dostƒôp do wszystkich wydzia≈Ç√≥w"},"PRIVILEGE:FTE:LEADER:VIEW":function(){return"FTE (magazyn): przeglƒÖdanie"},"PRIVILEGE:FTE:LEADER:MANAGE":function(){return"FTE (magazyn): zarzƒÖdzanie"},"PRIVILEGE:FTE:LEADER:ALL":function(){return"FTE (magazyn): dostƒôp do wszystkich wydzia≈Ç√≥w"},"PRIVILEGE:HOURLY_PLANS:VIEW":function(){return"Plany godzinowe: przeglƒÖdanie"},"PRIVILEGE:HOURLY_PLANS:MANAGE":function(){return"Plany godzinowe: zarzƒÖdzanie"},"PRIVILEGE:HOURLY_PLANS:ALL":function(){return"Plany godzinowe: dostƒôp do wszystkich wydzia≈Ç√≥w"},"PRIVILEGE:PROD_DOWNTIMES:VIEW":function(){return"Przestoje: przeglƒÖdanie"},"PRIVILEGE:PROD_DOWNTIMES:MANAGE":function(){return"Przestoje: potwierdzanie"},"PRIVILEGE:PROD_DOWNTIMES:ALL":function(){return"Przestoje: dostƒôp do wszystkich wydzia≈Ç√≥w"},"PRIVILEGE:PRESS_WORKSHEETS:VIEW":function(){return"Karty pracy: przeglƒÖdanie"},"PRIVILEGE:PRESS_WORKSHEETS:MANAGE":function(){return"Karty pracy: dodawanie"},"PRIVILEGE:PROD_DATA:VIEW":function(){return"Dane produkcyjne: przeglƒÖdanie"},"PRIVILEGE:PROD_DATA:MANAGE":function(){return"Dane produkcyjne: zarzƒÖdzanie"},"PRIVILEGE:PROD_DATA:CHANGES:REQUEST":function(){return"Dane produkcyjne: ≈ºƒÖdanie zmian"},"PRIVILEGE:PROD_DATA:CHANGES:MANAGE":function(){return"Dane produkcyjne: zatwierdzanie zmian"},"PRIVILEGE:REPORTS:VIEW":function(){return"Raporty: przeglƒÖdanie wszystkich"},"PRIVILEGE:REPORTS:MANAGE":function(){return"Raporty: zarzƒÖdzanie"},"PRIVILEGE:REPORTS:1:VIEW":function(){return"Raporty: Wska≈∫niki"},"PRIVILEGE:REPORTS:2:VIEW":function(){return"Raporty: CLIP"},"PRIVILEGE:REPORTS:3:VIEW":function(){return"Raporty: Wykorzystanie zasob√≥w"},"PRIVILEGE:REPORTS:4:VIEW":function(){return"Raporty: Operatorzy"},"PRIVILEGE:REPORTS:5:VIEW":function(){return"Raporty: HR"},"PRIVILEGE:REPORTS:6:VIEW":function(){return"Raporty: Magazyn"},"PRIVILEGE:REPORTS:7:VIEW":function(){return"Raporty: Przestoje w obszarach"},"PRIVILEGE:XICONF:VIEW":function(){return"Xiconf: przeglƒÖdanie"},"PRIVILEGE:XICONF:MANAGE":function(){return"Xiconf: zarzƒÖdzanie"},"PRIVILEGE:XICONF:NOTIFY":function(){return"Xiconf: powiadamianie"},"PRIVILEGE:ICPO:VIEW":function(){return"ICPO: przeglƒÖdanie"},"PRIVILEGE:ICPO:MANAGE":function(){return"ICPO: zarzƒÖdzanie"},"PRIVILEGE:PURCHASE_ORDERS:VIEW":function(){return"Zam√≥wienia: przeglƒÖdanie"},"PRIVILEGE:PURCHASE_ORDERS:MANAGE":function(){return"Zam√≥wienia: zarzƒÖdzanie"},"PRIVILEGE:FACTORY_LAYOUT:MANAGE":function(){return"Monitoring: zarzƒÖdzanie"},"PRIVILEGE:VENDOR_NC12S:VIEW":function(){return"Baza 12NC: przeglƒÖdanie"},"PRIVILEGE:VENDOR_NC12S:MANAGE":function(){return"Baza 12NC: zarzƒÖdzanie"},"PRIVILEGE:KAIZEN:MANAGE":function(){return"Usprawnienia: zarzƒÖdzanie zg≈Çoszeniami"},"PRIVILEGE:KAIZEN:DICTIONARIES:VIEW":function(){return"Usprawnienia: przeglƒÖdanie s≈Çownik√≥w"},"PRIVILEGE:KAIZEN:DICTIONARIES:MANAGE":function(){return"Usprawnienia: zarzƒÖdzanie s≈Çownikami"},"PRIVILEGE:OPERATOR:ACTIVATE":function(){return"Operator WMES: aktywacja klient√≥w"},"PRIVILEGE:DOCUMENTS:VIEW":function(){return"Dokumenty WMES: przeglƒÖdanie"},"PRIVILEGE:DOCUMENTS:MANAGE":function(){return"Dokumenty WMES: zarzƒÖdzanie"},"PRIVILEGE:DOCUMENTS:ACTIVATE":function(){return"Dokumenty WMES: aktywacja klient√≥w"},"PRIVILEGE:OPINION_SURVEYS:MANAGE":function(){return"Badanie Opinia: zarzƒÖdzanie"},"select2:placeholder":function(){return"Szukaj po nazwisku lub nr kadrowym..."},"select2:users:system":function(){return"System"}}}),define("app/users/routes",["../i18n","../router","../viewport","../user","../core/View","../core/util/showDeleteFormPage","../core/views/LogInFormView","./User","i18n!app/nls/users"],function(t,e,n,r,i,o,s,a){"use strict";var u=r.auth("USERS:VIEW"),c=r.auth("USERS:MANAGE");e.map("/login",function(){n.showPage(new i({pageId:"logInForm",layoutName:"page",view:new s,breadcrumbs:[t.bound("users","breadcrumbs:logIn")]}))}),e.map("/users",u,function(t){n.loadPage(["app/users/pages/UserListPage"],function(e){return new e({rql:t.rql})})}),e.map("/users/:id",function(t,e,n){t.params.id===r.data._id?n():u(t,e,n)},function(t){n.loadPage(["app/users/pages/UserDetailsPage"],function(e){return new e({model:new a({_id:t.params.id})})})}),e.map("/users;add",c,function(){n.loadPage(["app/core/pages/AddFormPage","app/users/views/UserFormView"],function(t,e){return new t({FormView:e,model:new a})})}),e.map("/users/:id;edit",function(t,e,n){t.params.id===r.data._id?n():c(t,e,n)},function(t){n.loadPage(["app/core/pages/EditFormPage","app/users/views/UserFormView"],function(e,n){return new e({FormView:n,model:new a({_id:t.params.id})})})}),e.map("/users/:id;delete",c,o.bind(null,a))}),define("app/nls/vis",["app/nls/locale/en"],function(t){return{root:{"BREADCRUMBS:structure":function(){return"Org Unit structure"},"PAGE_ACTION:toggleDeactivated":function(){return"Hide deactivated"}},pl:!0}}),define("app/nls/pl/vis",["app/nls/locale/pl"],function(t){return{"BREADCRUMBS:structure":function(){return"Wizualizacja struktury organizacyjnej"},"PAGE_ACTION:toggleDeactivated":function(){return"Ukryj dezaktywowane"}}}),define("app/vis/routes",["../router","../viewport","i18n!app/nls/vis"],function(t,e){"use strict";t.map("/vis/structure",e.loadPage.bind(e,"app/vis/pages/StructureVisPage"))}),define("app/nls/workCenters",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"WorkCenters"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the WorkCenters :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the WorkCenter :("},"MSG:DELETED":function(t){return"WorkCenter <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add WorkCenter"},"PAGE_ACTION:edit":function(){return"Edit WorkCenter"},"PAGE_ACTION:delete":function(){return"Delete WorkCenter"},"PAGE_ACTION:toggleDeactivated":function(){return"Hide deactivated"},"PANEL:TITLE:details":function(){return"WorkCenter's details"},"PANEL:TITLE:addForm":function(){return"Add WorkCenter form"},"PANEL:TITLE:editForm":function(){return"Edit WorkCenter form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:description":function(){return"Label"},"PROPERTY:orgUnitPath":function(){return"MRP Controller/Production flow"},"PROPERTY:deactivatedAt":function(){return"Deactivated at"},"FORM:ACTION:add":function(){return"Add WorkCenter"},"FORM:ACTION:edit":function(){return"Edit WorkCenter"},"FORM:ERROR:addFailure":function(){return"Failed to add the new WorkCenter :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the WorkCenter :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"WorkCenter deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete WorkCenter"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen WorkCenter?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> WorkCenter?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the WorkCenter :-("}},pl:!0}}),define("app/nls/pl/workCenters",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"WorkCentra"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie WorkCentr√≥w nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie WorkCenter nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"WorkCenter <em>"+e.v(t,"label")+"</em> zosta≈Ço usuniƒôte."},"PAGE_ACTION:add":function(){return"Dodaj WorkCenter"},"PAGE_ACTION:edit":function(){return"Edytuj WorkCenter"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ WorkCenter"},"PAGE_ACTION:toggleDeactivated":function(){return"Ukryj dezaktywowane"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy WorkCenter"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania WorkCenter"},"PANEL:TITLE:editForm":function(){return"Formularz edycji WorkCenter"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:description":function(){return"Opis"},"PROPERTY:orgUnitPath":function(){return"Kontroler MRP/Przep≈Çyw"},"PROPERTY:deactivatedAt":function(){return"Data dezaktywacji"},"FORM:ACTION:add":function(){return"Dodaj WorkCenter"},"FORM:ACTION:edit":function(){return"Edytuj WorkCenter"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá WorkCenter :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá WorkCenter :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia WorkCenter"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ WorkCenter"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrane WorkCenter?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá WorkCenter <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá WorkCenter :-("}}}),define("app/workCenters/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","../data/workCenters","./WorkCenter","i18n!app/nls/workCenters"],function(t,e,n,r,i,o){"use strict";var s=n.auth("DICTIONARIES:VIEW"),a=n.auth("DICTIONARIES:MANAGE");t.map("/workCenters",s,function(){e.loadPage(["app/workCenters/pages/WorkCenterListPage"],function(t){return new t({collection:i})})}),t.map("/workCenters/:id",function(t){e.loadPage(["app/workCenters/pages/WorkCenterDetailsPage"],function(e){return new e({model:new o({_id:t.params.id})})})}),t.map("/workCenters;add",a,function(){e.loadPage(["app/core/pages/AddFormPage","app/workCenters/views/WorkCenterFormView"],function(t,e){return new t({FormView:e,model:new o})})}),t.map("/workCenters/:id;edit",a,function(t){e.loadPage(["app/core/pages/EditFormPage","app/workCenters/views/WorkCenterFormView"],function(e,n){return new e({FormView:n,model:new o({_id:t.params.id})})})}),t.map("/workCenters/:id;delete",a,r.bind(null,o))}),define("app/nls/xiconf",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:base":function(){return"Xiconf"},"BREADCRUMBS:browse":function(){return"Results"},"BREADCRUMBS:details":function(){return"Result"},"BREADCRUMBS:settings":function(){return"Settings"},"MSG:LOADING_FAILURE":function(){return"Failed to load the programming results :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the programming result :("},"PANEL:TITLE:details:order":function(){return"Local order details"},"PANEL:TITLE:details:entry":function(){return"Programming details"},"PAGE_ACTION:export":function(){return"Export results"},"PAGE_ACTION:download":function(){return"Download configuration"},"PAGE_ACTION:download:workflow":function(){return"MultiOneWorkflow config"},"PAGE_ACTION:download:feature":function(){return"Driver config"},"PAGE_ACTION:download:gprsOrderFile":function(){return"Order"},"PAGE_ACTION:download:gprsInputFile":function(){return"CityTouchIPT config"},"PAGE_ACTION:download:gprsOutputFile":function(){return"CityTouchIPT result"},"PROPERTY:srcId":function(){return"Installation ID"},"PROPERTY:srcTitle":function(){return"Installation title"},"PROPERTY:srcIp":function(){return"Installation IP"},"PROPERTY:srcUuid":function(){return"Installation key"},"PROPERTY:no":function(){return"Order no"},"PROPERTY:totalCounter":function(){return"Total programming attemps"},"PROPERTY:successCounter":function(){return"Successful programming attempts"},"PROPERTY:failureCounter":function(){return"Failed programming attempts"},"PROPERTY:order":function(){return"Order"},"PROPERTY:quantity":function(){return"Quantity"},"PROPERTY:counter":function(){return"Counter"},"PROPERTY:nc12":function(){return"Program 12NC"},"PROPERTY:gprsNc12":function(){return"GPRS 12NC"},"PROPERTY:startedAt":function(){return"Started at"},"PROPERTY:finishedAt":function(){return"Finished at"},"PROPERTY:duration":function(){return"Duration"},"PROPERTY:log":function(){return"Log"},"PROPERTY:result":function(){return"Result"},"PROPERTY:errorCode":function(){return"Error"
},"PROPERTY:exception":function(){return"Exception"},"PROPERTY:output":function(){return"Programmer output"},"PROPERTY:featureFile":function(){return"Driver configuration file"},"PROPERTY:featureFileName":function(){return"Driver configuration file name"},"PROPERTY:feature":function(){return"Driver configuration file contents"},"PROPERTY:workflowFile":function(){return"Programmer configuration file"},"PROPERTY:workflow":function(){return"Programmer configuration file contents"},"PROPERTY:programName":function(){return"Program name"},"PROPERTY:programSteps":function(){return"Program steps"},"PROPERTY:serviceTag":function(){return"Service Tag"},"PROPERTY:prodLine":function(){return"Production line"},"details:showOrderSummaryLink":function(){return"Show the order summary"},"filter:result:success":function(){return"Success"},"filter:result:failure":function(){return"Failure"},"filter:placeholder:srcId":function(){return"Any"},"filter:nc12Type:program":function(){return"Program 12NC"},"filter:nc12Type:led":function(){return"LED board 12NC"},"filter:submit":function(){return"Filter results"},"step:wait":function(){return"Wait"},"step:pe":function(){return"Protective earth test"},"step:sol":function(){return"Fortimo Solar programming"},"step:fn":function(){return"Functional test"},"tab:log":function(){return"Programming log"},"tab:output":function(){return"Communication log"},"tab:workflow":function(){return"Programmer config"},"tab:feature":function(){return"Driver config"},"tab:leds":function(){return"LED boards"},"tab:program":function(){return"Program"},"tab:gprsOrderFile":function(){return"Order"},"tab:gprsInputFile":function(){return"CityTouchIPT config"},"tab:gprsOutputFile":function(){return"CityTouchIPT result"},"metrics:title":function(){return"Measured values"},"metrics:u":function(){return"Voltage"},"metrics:uSet":function(){return"Set voltage"},"metrics:uGet":function(){return"Measured voltage"},"metrics:i":function(){return"Current"},"metrics:r":function(){return"Resistance"},"metrics:p":function(){return"Power"},"leds:error:INVALID_NC12":function(t){return"Invalid 12NC:<br>"+e.v(t,"nc12")+"!"},"leds:error:NO_CONNECTION":function(){return"No connection to<br>the remote server!"},"leds:error:TIMEOUT":function(){return"Response timeout!"},"ledS:error:DB_FAILURE":function(){return"Database failure!"},"leds:error:UNKNOWN_ORDER_NO":function(){return"Unknown order!"},"leds:error:UNKNOWN_ITEM_NC12":function(){return"Unknown order item!"},"leds:error:SERIAL_NUMBER_USED":function(t){return"SN already used in order "+e.v(t,"orderNo")+":<br>"+e.v(t,"name")},"log:ORDER_CREATED":function(t){return"Starting a new order no <code>"+e.v(t,"orderNo")+"</code> (1/"+e.v(t,"quantity")+")..."},"log:ORDER_CONTINUED":function(t){return"Continuing an existing order no <code>"+e.v(t,"orderNo")+"</code> ("+e.v(t,"counter")+"/"+e.v(t,"quantity")+")..."},"log:PROGRAMMING_STARTED":function(t){return"Starting a programming of the 12NC <code>"+e.v(t,"nc12")+"</code>..."},"log:COUNTDOWN_STARTED":function(t){return"Counting down <code>"+e.v(t,"delay")+"</code> "+e.p(t,"delay",0,"en",{one:"second",other:"seconds"})+"..."},"log:READING_WORKFLOW_FILE":function(t){return"Reading contents of the programmer configuration file: <code>"+e.v(t,"workflowFile")+"</code>"},"log:WORKFLOW_FILE_READ":function(t){return"Read <code>"+e.v(t,"length")+"B</code> of the programmer configuration file."},"log:WRITING_WORKFLOW_FILE":function(t){return"Writing contents of the programmer configuratino file: <code>"+e.v(t,"workflowFile")+"</code> (<code>"+e.v(t,"workflowOptions")+"</code>)"},"log:WORKFLOW_FILE_WRITTEN":function(t){return"Written <code>"+e.v(t,"length")+"B</code> of the programmer configuration file."},"log:USING_LAST_FEATURE_FILE":function(){return"Skipping searching for a driver configuration file: the last file will be used."},"log:SEARCHING_FEATURE_FILE":function(t){return"Searching for a driver configuration file in path: <code>"+e.v(t,"featurePath")+"</code>"},"log:SEARCHING_FEATURE_FILE_FAILURE":function(t){return"Driver configuration file searching failed: <code>"+e.v(t,"error")+"</code>"},"log:SEARCHING_FEATURE_FILE_TIMEOUT":function(){return"Driver configuration file searching timed out."},"log:MISSING_FEATURE_FILE_1":function(){return"Driver configuration file was not found in the first path."},"log:MISSING_FEATURE_FILE_2":function(){return"Driver configuration file was not found in the backup path."},"log:DUPLICATE_FEATURE_FILE_1":function(t){return"Found "+e.v(t,"fileCount")+" driver configuration "+e.p(t,"fileCount",0,"en",{one:"file",other:"files"})+" for the specified 12NC in the first path."},"log:DUPLICATE_FEATURE_FILE_2":function(t){return"Found "+e.v(t,"fileCount")+" driver configuration "+e.p(t,"fileCount",0,"en",{one:"file",other:"files"})+" for the specified 12NC in the backup path."},"log:FEATURE_FILE_FOUND":function(t){return"Found the driver configuration file: <code>"+e.v(t,"featureFile")+"</code>"},"log:SKIPPING_FEATURE_FILE_2":function(){return"Skipping searching for the driver configuration file in the backup path..."},"log:CANCELLING":function(){return"Cancelling the programming..."},"log:PROGRAMMING_SUCCESS":function(t){return"Successfully finished the programming of the 12NC <code>"+e.v(t,"nc12")+"</code> in <code>"+e.v(t,"duration")+"</code>."},"log:PROGRAMMING_FAILURE":function(t){return"Unsuccessfully finished the programming of the 12NC <code>"+e.v(t,"nc12")+"</code> in <code>"+e.v(t,"duration")+"</code> with an error: <code>"+e.v(t,"error")+"</code>"},"log:LED_SCANNING_SUCCESS":function(t){return"Successfully finished the LED boards scanning in <code>"+e.v(t,"duration")+"</code>."},"log:LED_SCANNING_FAILURE":function(t){return"Unsuccessfully finished the LED boards scanning in <code>"+e.v(t,"duration")+"</code> with an error: <code>"+e.v(t,"error")+"</code>"},"log:TESTING_SUCCESS":function(t){return"Successfully finished the testing in <code>"+e.v(t,"duration")+"</code>."},"log:TESTING_FAILURE":function(t){return"Unsuccessfully finished the testing in <code>"+e.v(t,"duration")+"</code> with an error: <code>"+e.v(t,"error")+"</code>"},"log:READING_FEATURE_FILE":function(){return"Reading contents of the driver configuration file..."},"log:READING_FEATURE_FILE_FAILURE":function(t){return"Reading contents of the driver configuration file failed: <code>"+e.v(t,"error")+"</code>"},"log:READING_FEATURE_FILE_TIMEOUT":function(){return"Reading contents of the driver configuration file timed out."},"log:FEATURE_FILE_READ":function(t){return"Read <code>"+e.v(t,"length")+"B</code> of the driver configuration file."},"log:STARTING_PROGRAMMER":function(t){return"Starting the programmer using the <code>"+e.s(t,"interface",{d:"USB2DALI",s:"SimpleSet¬Æ",z:"ZigBee",i:"IP",other:"?"})+"</code> interface: <code>"+e.v(t,"programmerFile")+"</code>"},"log:SOL_STARTED":function(){return"Starting a Fortimo Solar programming..."},"log:SOL_PARSE_ERROR":function(t){return"Error during a parsing of the program file in line <code>"+e.v(t,"i")+"</code>: <code>"+e.v(t,"line")+"</code>"},"log:SOL_SEARCHING_COM":function(t){return"Searching for a serial port using matching the pattern: <code>"+e.v(t,"pattern")+"</code>..."},"log:SOL_OPENING_COM":function(t){return"Opening the <code>"+e.v(t,"comPort")+"</code> serial port..."},"log:SOL_EXECUTING_SET_COMMANDS":function(t){return"Executing "+e.p(t,"count",0,"en",{one:"<code>1</code> SET parameter value command",other:"<code>"+e.v(t,"count")+"</code> SET parameter value commands"})+"..."},"log:SOL_RESETTING":function(){return"Resetting the device..."},"log:SOL_EXECUTING_GET_COMMANDS":function(){return"Comparing the programmed parameter values..."},"log:SOL_INVALID_OPTION":function(t){return"Read parameter value of option <code>"+e.v(t,"option")+"</code> differs from the programmed value (expected <code>"+e.v(t,"expected")+"</code>; got <code>"+e.v(t,"actual")+"</code>)."},"log:LPT_STARTING":function(){return"(LPT) Waiting for a signal to start the programmer..."},"log:LPT_FINISHING":function(){return"(LPT) Setting the result value..."},"log:TESTING_WITH_PROGRAM_STARTED":function(){return"Starting the testing process..."},"log:TESTING_STARTED":function(t){return"Starting <code>"+e.v(t,"program")+"</code> program..."},"log:TESTING_SEARCHING_COM":function(t){return"Searching for a serial port using matching the pattern: <code>"+e.v(t,"pattern")+"</code>..."},"log:TESTING_OPENING_COM":function(t){return"Opening the <code>"+e.v(t,"comPort")+"</code> serial port..."},"log:TESTING_SDP_SETUP":function(){return"Setting up the SDP..."},"log:TESTING_SDP_TEARDOWN":function(){return"Tearing down the SDP..."},"log:TESTING_PLC_SETUP":function(){return"Setting up the PLC..."},"log:TESTING_PLC_TEARDOWN":function(){return"Tearing down the PLC..."},"log:TESTING_EXECUTING_STEP":function(t){return e.s(t,"type",{wait:"Waiting",pe:"Executing the protective earth test",iso:"Executing the isolation resistance test",sol:"Executing the Fortimo Solar programming",program:"Executing the programming step",fn:"Executing the functional test",vis:"Executing the visual test",other:"Executing the <em>"+e.v(t,"type")+"</em> program step"})+"..."},"log:TESTING_SKIPPING_PROGRAMMING":function(){return"Skipping the programming step..."},"log:ACQUIRING_SERVICE_TAG":function(){return"Acquiring a new Service Tag..."},"log:SERVICE_TAG_ACQUIRED":function(t){return"Acquired Service Tag: <code>"+e.v(t,"serviceTag")+"</code>"},"log:ACQUIRING_SERVICE_TAG_FAILURE":function(t){return"Failed to acquire a new Service Tag: <code>"+e.v(t,"error")+"</code>"},"log:SKIPPING_SERVICE_TAG_ACQUIRING":function(){return"Skipping acquiring a new Service Tag..."},"log:PRINTING_SERVICE_TAG":function(t){return"Printing a Service Tag label on the <code>"+e.v(t,"printerName")+"</code> printer..."},"log:PRINTING_SERVICE_TAG_FAILURE":function(t){return"Failed to print a Service Tag label: <code>"+e.v(t,"error")+"</code>"},"log:LED_CHECKING_STARTED":function(){return"Starting the LED boards check..."},"log:WAITING_FOR_LEDS":function(t){return"Waiting for "+e.v(t,"ledCount")+" LED "+e.p(t,"ledCount",0,"en",{one:"board",other:"boards"})+"..."},"log:ADDING_LAST_LEDS":function(t){return"Adding "+e.v(t,"ledCount")+" LED "+e.p(t,"ledCount",0,"en",{one:"board",other:"boards"})+" from the last failed programming..."},"log:WAITING_FOR_CONTINUE":function(){return"Waiting for the Continue button to be pressed..."},"log:GENERATING_SERVICE_TAG":function(){return"Generating a new Service Tag..."},"log:SERVICE_TAG_GENERATED":function(t){return"Generated Service Tag: <code>"+e.v(t,"serviceTag")+"</code>"},"error:WORKFLOW_FILE_ERROR":function(){return"Error during the reading of the programmer configuration file contents."},"error:WORKFLOW_FILE_WRITE_ERROR":function(){return"Error during the writing of the programmer configuration file contents."},"error:FEATURE_FILE_ERROR":function(){return"Error during the reading of the driver configuration file contents."},"error:UNSET_WORKFLOW_FILE":function(){return"Path to the programmer configuration file was not set."},"error:UNSET_FEATURE_PATH_1":function(){return"First path to the driver configuration files was not set."},"error:UNSET_PROGRAMMER_FILE":function(){return"Path to the programmer executable file was not set."},"error:MISSING_WORKFLOW_FILE":function(){return"Programmer configuration file was not found."},"error:MISSING_FEATURE_FILE":function(){return"Driver configuration file was not found."},"error:DUPLICATE_FEATURE_FILE":function(){return"Detected multiple driver configuration files for the specified 12NC."},"error:CANCELLED":function(){return"Programming cancelled."},"error:READING_FEATURE_FILE_TIMEOUT":function(){return"Reading the contents of the driver configuration file timed out."},"error:MISSING_PROGRAMMER_FILE":function(){return"Programmer executable file was not found."},"error:PROGRAMMER_FILE_ERROR":function(){return"Error during running of the programmer executable file."},"error:EXIT_CODE:-1":function(){return"MultiOneWorkflow (-1): general application failure."},"error:EXIT_CODE:1":function(){return"MultiOneWorkflow (1): user software key not activated."},"error:EXIT_CODE:4":function(){return"MultiOneWorkflow (4): verification failed."},"error:EXIT_CODE:5":function(){return"MultiOneWorkflow (5): The interface provided as argument to the command line is wrong."},"error:EXIT_CODE:9":function(){return"MultiOneWorkflow (9): workflow configuration file not found."},"error:EXIT_CODE:10":function(){return"MultiOneWorkflow (10): workflow configuration file not valid."},"error:EXIT_CODE:20":function(){return"MultiOneWorkflow (20): supported devices file not found."},"error:EXIT_CODE:21":function(){return"MultiOneWorkflow (21): supported devices file not valid."},"error:EXIT_CODE:101":function(){return"MultiOneWorkflow (101): there are no features to write."},"error:EXIT_CODE:102":function(){return"MultiOneWorkflow (102): writing failed."},"error:EXIT_CODE:150":function(){return"MultiOneWorkflow (150): resetting the short address of the device failed."},"error:EXIT_CODE:200":function(){return"MultiOneWorkflow (200): feature file not present."},"error:EXIT_CODE:201":function(){return"MultiOneWorkflow (201): invalid feature configuration file."},"error:EXIT_CODE:202":function(){return"MultiOneWorkflow (202): feature configuration file is null or empty."},"error:EXIT_CODE:203":function(){return"MultiOneWorkflow (203): feature configuration file contains duplicate features."},"error:EXIT_CODE:300":function(){return"MultiOneWorkflow (300): the device does not support all features from the feature configuration file."},"error:EXIT_CODE:301":function(){return"MultiOneWorkflow (301): the device is not of the model specified in the feature file."},"error:EXIT_CODE:400":function(){return"MultiOneWorkflow (400): writing traceability information failed."},"error:EXIT_CODE:500":function(){return"MultiOneWorkflow (500): no device found."},"error:EXIT_CODE:501":function(){return"MultiOneWorkflow (501): too many devices found."},"error:EXIT_CODE:502":function(){return"MultiOneWorkflow (502): unable to execute discover."},"error:EXIT_CODE:503":function(){return"MultiOneWorkflow (503): multiple devices share the same short address."},"error:EXIT_CODE:504":function(){return"MultiOneWorkflow (504): unsupported device detected."},"error:EXIT_CODE:600":function(){return"MultiOneWorkflow (600): no features to convert."},"error:EXIT_CODE:700":function(){return"MultiOneWorkflow (700): no interface connected."},"error:EXIT_CODE:800":function(){return"MultiOneWorkflow (800): convert feature data is not possible."},"error:EXIT_CODE:900":function(){return"MultiOneWorkflow (900): the provided scheduler file is invalid and could not be loaded."},"error:SOL_PARSE_ERROR":function(){return"SOL: Error during parsing of the program file."},"error:SOL_NO_COMMANDS":function(){return"SOL: No SET commands were found in the program file."},"error:SOL_SEARCHING_COM_FAILURE":function(){return"SOL: Error while searching for a serial port."},"error:SOL_COM_NOT_FOUND":function(){return"SOL: Serial port was not found."},"error:SOL_OPENING_COM_FAILURE":function(){return"SOL: Error while opening the serial port."},"error:SOL_SERIAL_PORT_FAILURE":function(){return"SOL: Serial port error."},"error:SOL_INVALID_OPTION":function(){return"SOL: Read value differs from the programmed one."},"error:SOL_NO_CONNECTION":function(){return"SOL: No response from the device. Check the serial port connection."},"error:SOL_FEATURE_DISABLED":function(){return"The current license doesn't have the Fortimo Solar programming option."},"error:LPT_FILE_ERROR":function(){return"Error during LPT communication."},"error:LPT_START_TIMEOUT":function(){return"Waiting for a signal to start the programmer timed out."},"error:T24VDC_FEATURE_DISABLED":function(){return"The current license doesn't have the Tester 24V DC option."},"error:TESTING_DISABLED":function(){return"T24VDC: Testing option is disabled."},"error:TESTING_NOT_SOL":function(){return"T24VDC: The found driver configuration has an invalid type."},"error:TESTING_SEARCHING_COM_FAILURE":function(){return"T24VDC: Error while searching for a serial port."},"error:TESTING_COM_NOT_FOUND":function(){return"T24VDC: Serial port was not found."},"error:TESTING_OPENING_COM_FAILURE":function(){return"T24VDC: Error while opening the serial port."},"error:TESTING_SERIAL_PORT_FAILURE":function(){return"T24VDC: Serial port error."},"error:TESTING_PLC_FAILURE":function(){return"T24VDC: PLC error."},"error:TESTING_PLC_NO_CONNECTION":function(){return"T24VDC: Failed to connect to the PLC. Check the Modbus settings."},"error:TESTING_SDP_TIMEOUT":function(){return"T24VDC: Waiting for a response from the SDP timed out."},"error:TESTING_SDP_INVALID_RESPONSE":function(){return"T24VDC: Received an invalid response from the SDP."},"error:TESTING_MAX_RESISTANCE":function(){return"T24VDC: Exceeded the maximum resistance value."},"error:TESTING_MIN_POWER":function(){return"T24VDC: Exceeded the minimum power value."},"error:TESTING_MAX_POWER":function(){return"T24VDC: Exceeded the maximum power value."},"error:REMOTE_SERVICE_TAG_FAILURE":function(){return"Error during acquisition of a new Service Tag."},"error:INVALID_ITEM_QUANTITY":function(){return"Detected invalid component quantities in the current order."},"log:GPRS:READING_ORDER_FILE":function(t){return"Reading contents of the order file: <code>"+e.v(t,"orderFile")+"</code>"},"log:GPRS:ORDER_FILE_READ":function(t){return"Read <code>"+e.v(t,"length")+"B</code> of the order file."},"log:GPRS:READING_INPUT_TEMPLATE_FILE":function(t){return"Reading the programmer input template file: <code>"+e.v(t,"inputTemplateFile")+"</code>"},"log:GPRS:INPUT_TEMPLATE_FILE_READ":function(t){return"Read <code>"+e.v(t,"length")+"B</code> of the programmer input template file."},"log:GPRS:PARSING_INPUT_TEMPLATE":function(){return"Parsing the programmer input template file..."},"log:GPRS:PARSING_INPUT_TEMPLATE_SUCCESS":function(){return"Successfully parsed the programmer input template file."},"log:GPRS:PREPARING_INPUT_FILE":function(){return"Preparing the programmer input file..."},"log:GPRS:PREPARING_INPUT_FILE_SUCCESS":function(){return"Successfully prepared the programmer input file."},"log:GPRS:PROGRAMMER_FILE_STARTED":function(t){return"Starting the programmer using the <code>"+e.v(t,"daliPort")+"</code> DALI port: <code>"+e.v(t,"programmerFile")+"</code>"},"log:GPRS:READING_OUTPUT_FILE":function(t){return"Reading the programmer output file: <code>"+e.v(t,"outputFile")+"</code>"},"log:GPRS:READING_OUTPUT_FILE_SUCCESS":function(t){return"Read <code>"+e.v(t,"length")+"B</code> of the programmer input template file."},"log:GPRS:COPYING_OUTPUT_FILE":function(){return"Copying the programmer output file.."},"log:GPRS:COPYING_OUTPUT_FILE_SUCCESS":function(){return"Successfully copied the programmer output file."},"log:GPRS:VERIFICATION_STARTED":function(){return"Starting the verification process..."},"log:GPRS:VERIFICATION_SKIPPED":function(){return"Skipping the verification process..."},"error:GPRS:READING_ORDER_FILE_FAILURE":function(){return"GPRS: Reading contents of the order file failed."},"error:GPRS:READING_ORDER_FILE_TIMEOUT":function(){return"GPRS: Reading the contents of the order file timed out."},"error:GPRS:READING_INPUT_TEMPLATE_FILE_FAILURE":function(){return"GPRS: Reading contents of the programmer input template file failed."},"error:GPRS:READING_INPUT_TEMPLATE_FILE_TIMEOUT":function(){return"GPRS: Reading the contents of the programmer input template file timed out."},"error:GPRS:PARSING_INPUT_TEMPLATE_FAILURE":function(){return"GPRS: Error during parsing of the programmer input template file."},"error:GPRS:PREPARING_INPUT_FILE_FAILURE":function(){return"GPRS: Error during saving of the programmer input configuration file."},"error:GPRS:INVALID_OPTION":function(){return"GPRS: Invalid configuration option."},"error:GPRS:PARSING_DRIVER_FILE_FAILURE":function(){return"GPRS: Error during parsing of the driver configuration file."},"error:GPRS:PROGRAMMER_FILE_UNSET":function(){return"GPRS: Path to the programmer executable file was not set."},"error:GPRS:PROGRAMMER_FILE_MISSING":function(){return"GPRS: Programmer executable file was not found."},"error:GPRS:PROGRAMMER_FILE_FAILURE":function(){return"GPRS: Error during execution of the programmer executable."},"error:GPRS:OUTPUT_FILE_MISSING":function(){return"GPRS: Programmer output file was not found."},"error:GPRS:COPYING_OUTPUT_FILE_FAILURE":function(){return"GPRS: Error during copying of the programmer output file."},"error:GPRS:VERIFICATION_INPUT_FAILURE":function(){return"GPRS: Error during copying of the programmer output file for verification."},"error:GPRS:VERIFICATION_ERROR":function(){return"GPRS: Programmer output file didn't pass the verification."},"error:GPRS:VERIFICATION_TIMEOUT":function(){return"GPRS: Programmer output file verification timed out."},"error:GPRS:EXIT_CODE:-1":function(){return"CityTouchIPT (-1): general application failure."},"log:GLP2:RESETTING_TESTER":function(){return"Resetting the GLP2-I tester..."},"log:GLP2:TEST_STEP_FAILURE":function(t){return"Exceeded set value 1 <code>"+e.v(t,"setValue")+"</code>: <code>"+e.v(t,"actualValue")+"</code> or set value 2: <code>"+e.v(t,"setValue2")+"</code>: <code>"+e.v(t,"actualValue2")+"</code>"},"error:GLP2:SETTING_DISABLED":function(){return"GLP2: Option is disabled in the settings."},"error:GLP2:FEATURE_DISABLED":function(){return"The current license doesn't have the Tester GLP2-I option."},"error:GLP2:TESTER_NOT_READY":function(){return"GLP2: Tester is not ready."},"error:GLP2:RESETTING_TESTER_FAILURE":function(){return"GLP2: Resetting the tester failed."},"error:GLP2:PROGRAM_NOT_RECOGNIZED":function(){return"GLP2: Program not recognized."},"error:GLP2:UNEXPECTED_RESPONSE":function(){return"GLP2: Unexpected response from the tester."},"error:GLP2:TEST_STEP_FAILURE":function(){return"GLP2: Test step failed."},"error:GLP2:BUSY_TESTER":function(){return"GLP2: Tester is busy or requires a BlackBox test."},"error:GLP2:INVALID_CHECKSUM":function(){return"GLP2: Invalid response checksum from the tester."},"error:GLP2:INVALID_PARAMETERS":function(){return"GLP2: Invalid tester parameters."},"error:GLP2:INVALID_RESPONSE":function(){return"GLP2: Invalid response from the tester."},"error:GLP2:NO_CONNECTION":function(){return"GLP2: No connection to the tester."},"error:GLP2:RESPONSE_TIMEOUT":function(){return"GLP2: Response timed out."},"error:GLP2:FAULT:1":function(){return"GLP2 (1): Safety contact interrupted."},"error:GLP2:FAULT:2":function(){return"GLP2 (2): Fuse defective."},"error:GLP2:FAULT:3":function(){return"GLP2 (3): No test step defined."},"error:GLP2:FAULT:4":function(){return"GLP2 (4): Voltage substitute leakage current not OK."},"error:GLP2:FAULT:5":function(){return"GLP2 (5): Short circuit at test object."},"error:GLP2:FAULT:6":function(){return"GLP2 (6): Error at voltage control."},"error:GLP2:FAULT:7":function(){return"GLP2 (7): Data error."},"error:GLP2:FAULT:8":function(){return"GLP2 (8): Below minimum current at LKC."},"error:GLP2:FAULT:9":function(){return"GLP2 (9): Cancelled."},"error:GLP2:FAULT:10":function(){return"GLP2 (10): Below minimum voltage HV."},"error:GLP2:FAULT:11":function(){return"GLP2 (11): Maximum voltage HV exceeded."},"error:GLP2:FAULT:12":function(){return"GLP2 (12): Below minimum current HV."},"error:GLP2:FAULT:13":function(){return"GLP2 (13): Communication error at HV electronics."},"error:GLP2:FAULT:14":function(){return"GLP2 (14): HV voltage check failed."},"error:GLP2:FAULT:15":function(){return"GLP2 (15): Test program doesn't exist."},"error:GLP2:FAULT:16":function(){return"GLP2 (16): Adjusting error at high-voltage test."},"error:GLP2:FAULT:17":function(){return"GLP2 (17): U max fuse of leakage-current test EN60601 has triggered."},"error:GLP2:FAULT:18":function(){return"GLP2 (18): Test object is still under voltage (between L-N)"},"error:GLP2:FAULT:19":function(){return"GLP2 (19): Mains plug twisted (when testing without isolating transformer)."},"error:GLP2:FAULT:20":function(){return"GLP2 (20): PE of mains lead is missing."},"error:GLP2:FAULT:21":function(){return"GLP2 (21): Printer at the parallel port (LPT1) not ready!"},"error:GLP2:FAULT:22":function(){return"GLP2 (22): High voltage disabled (key switch)."},"error:GLP2:FAULT:23":function(){return"GLP2 (23): Thermo switch of high voltage has triggered."},"error:GLP2:FAULT:24":function(){return"GLP2 (24): The device is not enabled for operation."},"error:GLP2:FAULT:25":function(){return"GLP2 (25): Maximum primary current of the HV-test."},"error:GLP2:FAULT:26":function(){return"GLP2 (26): The phase of the external FCT voltage is not existing or is polarized incorrectly."},"error:GLP2:FAULT:27":function(){return"GLP2 (27): Automatic closing of the protection cover error."},"error:GLP2:FAULT:28":function(){return"GLP2 (28): No test object."},"error:GLP2:FAULT:29":function(){return"GLP2 (29): Test sequence has reported an error."},"error:GLP2:FAULT:30":function(){return"GLP2 (30): Temperature regulation error (test step TMP)."},"error:GLP2:FAULT:31":function(){return"GLP2 (31): FI reference test error."},"log:FL:MONITORING":function(t){return"Monitoring the lighting time of <code>"+e.v(t,"count")+"</code> "+e.p(t,"count",0,"en",{one:"lamp",other:"lamps"})+"..."},"log:FL:LIGHTING_TIME":function(t){return e.v(t,"no")+". lamp shone continuously for <code>"+e.v(t,"duration")+"</code> ms."},"error:FL:FEATURE_DISABLED":function(){return"The current license doesn't have the Fluorescent Lamps option."},"error:FL:LIGHTING_TIME_TOO_SHORT":function(){return"FL: Lighting time too short."},"log:FT:STARTED":function(){return"Starting a frame test..."},"log:FT:SUCCESS":function(t){return"Successfully finished the frame test in <code>"+e.v(t,"duration")+"</code>."},"log:FT:FAILURE":function(t){return"Unsuccessfully finished the frame test in <code>"+e.v(t,"duration")+"</code> with an error: <code>"+e.v(t,"error")+"</code>"},"log:FT:CONNECTING":function(){return"Connecting to the tester..."},"log:FT:RESETTING":function(){return"Resetting the tester..."},"log:FT:PROGRAMMING":function(){return"Programming the tester..."},"log:FT:CHECKING":function(){return"Checking the PE..."},"error:FT:INVALID_SERIAL_PROXY_ADDRESS":function(){return"FT: Invalid ser2net server address."},"error:FT:CONNECTING_FAILURE":function(){return"FT: Tester connection failure."},"error:FT:SDP_TIMEOUT":function(){return"FT: Waiting for a response from the SDP timed out."},"error:FT:SDP_INVALID_RESPONSE":function(){return"FT: Received an invalid response from the SDP."},"error:FT:PE_FAILURE":function(){return"FT: PE failure."},"settings:tab:clients":function(){return"Clients"},"settings:tab:notifier":function(){return"Notifications"},"settings:appVersion":function(){return"Current version of the Walkner Xiconf app"},"settings:notifier:enabled":function(){return"Notifications enabled"},"settings:notifier:emptyLeds":function(){return"Notify about orders without drivers and with no LED boards scanned"},"settings:notifier:delay":function(){return"Notification delay [min]"},"settings:notifier:nameFilter":function(){return"Ignore notifications by product name"}},pl:!0}}),define("app/nls/pl/xiconf",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:base":function(){return"Xiconf"},"BREADCRUMBS:browse":function(){return"Wyniki"},"BREADCRUMBS:details":function(){return"Wynik"},"BREADCRUMBS:settings":function(){return"Ustawienia"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie wynik√≥w programowania nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie danych wyniku programowania nie powiod≈Ço siƒô :("},"PANEL:TITLE:details:order":function(){return"Szczeg√≥≈Çy lokalnego zlecenia"},"PANEL:TITLE:details:entry":function(){return"Szczeg√≥≈Çy programowania"},"PAGE_ACTION:export":function(){return"Eksportuj wyniki"},"PAGE_ACTION:download":function(){return"Pobierz konfiguracjƒô"},"PAGE_ACTION:download:workflow":function(){return"Konfiguracja MultiOneWorkflow"},"PAGE_ACTION:download:feature":function(){return"Konfiguracja drivera"},"PAGE_ACTION:download:gprsOrderFile":function(){return"Zlecenie"},"PAGE_ACTION:download:gprsInputFile":function(){return"Konfiguracja CityTouchIPT"},"PAGE_ACTION:download:gprsOutputFile":function(){return"Wynik CityTouchIPT"},"PROPERTY:srcId":function(){return"ID instalacji"},"PROPERTY:srcTitle":function(){return"Tytu≈Ç instalacji"},"PROPERTY:srcIp":function(){return"IP instalacji"},"PROPERTY:srcUuid":function(){return"Klucz instalacji"},"PROPERTY:no":function(){return"Nr zlecenia"},"PROPERTY:totalCounter":function(){return"Ca≈Çkowita ilo≈õƒá programowa≈Ñ"},"PROPERTY:successCounter":function(){return"Ilo≈õƒá pomy≈õlnych programowa≈Ñ"},"PROPERTY:failureCounter":function(){return"Ilo≈õƒá b≈Çƒôdnych programowa≈Ñ"},"PROPERTY:order":function(){return"Zlecenie"},"PROPERTY:quantity":function(){return"Ilo≈õƒá"},"PROPERTY:counter":function(){return"Licznik"},"PROPERTY:nc12":function(){return"12NC programu"},"PROPERTY:gprsNc12":function(){return"12NC GPRS"},"PROPERTY:startedAt":function(){return"Czas rozpoczƒôcia"},"PROPERTY:finishedAt":function(){return"Czas zako≈Ñczenia"},"PROPERTY:duration":function(){return"Czas trwania"},"PROPERTY:log":function(){return"Log"},"PROPERTY:result":function(){return"Wynik"},"PROPERTY:errorCode":function(){return"B≈ÇƒÖd"},"PROPERTY:exception":function(){return"Szczeg√≥≈Çy b≈Çƒôdu"},"PROPERTY:output":function(){return"Odpowied≈∫ programatora"},"PROPERTY:featureFile":function(){return"Plik konfiguracyjny drivera"},"PROPERTY:featureFileName":function(){return"Nazwa pliku konfiguracyjnego drivera"},"PROPERTY:feature":function(){return"Zawarto≈õƒá pliku konfiguracyjego drivera"},"PROPERTY:workflowFile":function(){return"Plik konfiguracyjny programatora"},"PROPERTY:workflow":function(){return"Zawarto≈õƒá pliku konfiguracyjnego programatora"},"PROPERTY:programName":function(){return"Nazwa programu"},"PROPERTY:programSteps":function(){return"Kroki programu"},"PROPERTY:serviceTag":function(){return"Service Tag"},"PROPERTY:prodLine":function(){return"Linia"},"details:showOrderSummaryLink":function(){return"Poka≈º podsumowanie zlecenia"},"filter:result:success":function(){return"Sukces"},"filter:result:failure":function(){return"Pora≈ºka"},"filter:placeholder:srcId":function(){return"Dowolne"},"filter:nc12Type:program":function(){return"12NC programu"},"filter:nc12Type:led":function(){return"12NC p≈Çytki LED"},"filter:submit":function(){return"Filtruj wyniki"},"step:wait":function(){return"Przerwa"},"step:pe":function(){return"Test obwodu ochronnego"},"step:sol":function(){return"Programowanie Fortimo Solar"},"step:fn":function(){return"Test funkcjonalny"},"tab:log":function(){return"Przebieg programowania"},"tab:output":function(){return"Przebieg komunikacji"},"tab:workflow":function(){return"Konfiguracja programatora"},"tab:feature":function(){return"Konfiguracja drivera"},"tab:leds":function(){return"P≈Çytki LED"},"tab:program":function(){return"Program"},"tab:gprsOrderFile":function(){return"Zlecenie"},"tab:gprsInputFile":function(){return"Konfiguracja CityTouchIPT"},"tab:gprsOutputFile":function(){return"Wynik CityTouchIPT"},"metrics:title":function(){return"Zmierzone warto≈õci"},"metrics:u":function(){return"Napiƒôcie"},"metrics:uSet":function(){return"Napiƒôcie ustawione"},"metrics:uGet":function(){return"Napiƒôcie zmierzone"},"metrics:i":function(){return"Natƒô≈ºenie"},"metrics:r":function(){return"Rezystancja"
},"metrics:p":function(){return"Moc"},"leds:error:INVALID_NC12":function(t){return"Nieprawid≈Çowe 12NC:<br>"+e.v(t,"nc12")+"!"},"leds:error:NO_CONNECTION":function(){return"Brak po≈ÇƒÖczenia z<br>serwerem zewnƒôtrznym!"},"leds:error:TIMEOUT":function(){return"Up≈ÇynƒÖ≈Ç limit czasu<br>oczekiwania na odpowied≈∫!"},"ledS:error:DB_FAILURE":function(){return"B≈ÇƒÖd bazy danych!"},"leds:error:UNKNOWN_ORDER_NO":function(){return"Nieznane zlecenie!"},"leds:error:UNKNOWN_ITEM_NC12":function(){return"Nieznana pozycja zlecenia!"},"leds:error:SERIAL_NUMBER_USED":function(t){return"SN u≈ºyty w zleceniu "+e.v(t,"orderNo")+":<br>"+e.v(t,"name")},"log:ORDER_CREATED":function(t){return"Rozpoczynanie zlecenia nr <code>"+e.v(t,"orderNo")+"</code> (1/"+e.v(t,"quantity")+")..."},"log:ORDER_CONTINUED":function(t){return"Kontynuacja zlecenia nr <code>"+e.v(t,"orderNo")+"</code> ("+e.v(t,"counter")+"/"+e.v(t,"quantity")+")..."},"log:PROGRAMMING_STARTED":function(t){return"Rozpoczynanie programowania 12NC <code>"+e.v(t,"nc12")+"</code>..."},"log:COUNTDOWN_STARTED":function(t){return"Odliczanie <code>"+e.v(t,"delay")+"</code> "+e.p(t,"delay",0,"pl",{one:"sekundy",other:"sekund"})+"..."},"log:READING_WORKFLOW_FILE":function(t){return"Odczytywanie pliku konfiguracyjnego programatora: <code>"+e.v(t,"workflowFile")+"</code>"},"log:WORKFLOW_FILE_READ":function(t){return"Odczytano <code>"+e.v(t,"length")+"B</code> pliku konfiguracyjnego programatora."},"log:WRITING_WORKFLOW_FILE":function(t){return"Zapisywanie pliku konfiguracyjnego programatora: <code>"+e.v(t,"workflowFile")+"</code> (<code>"+e.v(t,"workflowOptions")+"</code>)"},"log:WORKFLOW_FILE_WRITTEN":function(t){return"Zapisano <code>"+e.v(t,"length")+"B</code> pliku konfiguracyjnego programatora."},"log:USING_LAST_FEATURE_FILE":function(){return"Pomijanie wyszukiwania pliku konfiguracyjnego drivera: wykorzystany zostanie ostatni plik."},"log:SEARCHING_FEATURE_FILE":function(t){return"Wyszukiwanie pliku konfiguracyjnego drivera w ≈õcie≈ºce: <code>"+e.v(t,"featurePath")+"</code>"},"log:SEARCHING_FEATURE_FILE_FAILURE":function(t){return"Nieudane wyszukiwanie pliku: <code>"+e.v(t,"error")+"</code>"},"log:SEARCHING_FEATURE_FILE_TIMEOUT":function(){return"Up≈ÇynƒÖ≈Ç limit czasu wyszukiwania pliku konfiguracyjnego drivera."},"log:MISSING_FEATURE_FILE_1":function(){return"Nie znaleziono pliku konfiguracyjnego drivera w pierwszej ≈õcie≈ºce."},"log:MISSING_FEATURE_FILE_2":function(){return"Nie znaleziono pliku konfiguracyjnego drivera w ≈õcie≈ºce zapasowej."},"log:DUPLICATE_FEATURE_FILE_1":function(t){return"W pierwszej ≈õcie≈ºce wykryto "+e.v(t,"fileCount")+" "+e.p(t,"fileCount",0,"pl",{one:"plik konfiguracyjny drivera",few:"pliki konfiguracje driver√≥w",other:"plik√≥w konfiguracyjnych driver√≥w"})+" dla danego kodu 12NC."},"log:DUPLICATE_FEATURE_FILE_2":function(t){return"W ≈õcie≈ºce zapasowej wykryto "+e.v(t,"fileCount")+" "+e.p(t,"fileCount",0,"pl",{one:"plik konfiguracyjny drivera",few:"pliki konfiguracje driver√≥w",other:"plik√≥w konfiguracyjnych driver√≥w"})+" dla danego kodu 12NC."},"log:FEATURE_FILE_FOUND":function(t){return"Znaleziono plik konfiguracyjny drivera: <code>"+e.v(t,"featureFile")+"</code>"},"log:SKIPPING_FEATURE_FILE_2":function(){return"Pomijanie wyszukiwania pliku konfiguracyjnego drivera w ≈õcie≈ºce zapasowej..."},"log:CANCELLING":function(){return"Anulowanie programowania..."},"log:PROGRAMMING_SUCCESS":function(t){return"Pomy≈õlnie uko≈Ñczono programowanie 12NC <code>"+e.v(t,"nc12")+"</code> w ciƒÖgu <code>"+e.v(t,"duration")+"</code>."},"log:PROGRAMMING_FAILURE":function(t){return"Zako≈Ñczono programowanie 12NC <code>"+e.v(t,"nc12")+"</code> w ciƒÖgu <code>"+e.v(t,"duration")+"</code> z powodu b≈Çƒôdu: <code>"+e.v(t,"error")+"</code>"},"log:LED_SCANNING_SUCCESS":function(t){return"Pomy≈õlnie uko≈Ñczono sprawdzanie p≈Çytek LED w ciƒÖgu <code>"+e.v(t,"duration")+"</code>."},"log:LED_SCANNING_FAILURE":function(t){return"Zako≈Ñczono sprawdzanie p≈Çytek LED w ciƒÖgu <code>"+e.v(t,"duration")+"</code> z powodu b≈Çƒôdu: <code>"+e.v(t,"error")+"</code>"},"log:TESTING_SUCCESS":function(t){return"Pomy≈õlnie uko≈Ñczono testowanie w ciƒÖgu <code>"+e.v(t,"duration")+"</code>."},"log:TESTING_FAILURE":function(t){return"Zako≈Ñczono testowanie w ciƒÖgu <code>"+e.v(t,"duration")+"</code> z powodu b≈Çƒôdu: <code>"+e.v(t,"error")+"</code>"},"log:READING_FEATURE_FILE":function(){return"Odczytywanie pliku konfiguracyjnego drivera..."},"log:READING_FEATURE_FILE_FAILURE":function(t){return"B≈ÇƒÖd podczas odczytywania pliku: <code>"+e.v(t,"error")+"</code>"},"log:READING_FEATURE_FILE_TIMEOUT":function(){return"Up≈ÇynƒÖ≈Ç limit czasu odczytywania pliku."},"log:FEATURE_FILE_READ":function(t){return"Odczytano <code>"+e.v(t,"length")+"B</code> pliku konfiguracyjnego drivera."},"log:STARTING_PROGRAMMER":function(t){return"Uruchamianie programatora przez interfejs <code>"+e.s(t,"interface",{d:"USB2DALI",s:"SimpleSet¬Æ",z:"ZigBee",i:"IP",other:"?"})+"</code>: <code>"+e.v(t,"programmerFile")+"</code>"},"log:SOL_STARTED":function(){return"Rozpoczynanie programowania Fortimo Solar..."},"log:SOL_PARSE_ERROR":function(t){return"B≈ÇƒÖd parsowania pliku programu w linii <code>"+e.v(t,"i")+"</code>: <code>"+e.v(t,"line")+"</code>"},"log:SOL_SEARCHING_COM":function(t){return"Wyszukiwanie portu szeregowego wg wzrorca <code>"+e.v(t,"pattern")+"</code>..."},"log:SOL_OPENING_COM":function(t){return"Otwieranie portu szeregowego <code>"+e.v(t,"comPort")+"</code>..."},"log:SOL_EXECUTING_SET_COMMANDS":function(t){return"Wykonywanie "+e.p(t,"count",0,"pl",{one:"<code>1</code> komendy ustawiajƒÖcej",other:"<code>"+e.v(t,"count")+"</code> komend ustawiajƒÖcych"})+" warto≈õci parametr√≥w..."},"log:SOL_RESETTING":function(){return"Resetowanie urzƒÖdzenia..."},"log:SOL_EXECUTING_GET_COMMANDS":function(){return"Por√≥wnywanie zaprogramowanych warto≈õci parametr√≥w..."},"log:SOL_INVALID_OPTION":function(t){return"Odczytana warto≈õƒá parametru <code>"+e.v(t,"option")+"</code> r√≥≈ºni siƒô od warto≈õci zaprogramowanej (oczekiwano <code>"+e.v(t,"expected")+"</code>; otrzymano <code>"+e.v(t,"actual")+"</code>)."},"log:LPT_STARTING":function(){return"(LPT) Oczekiwanie na sygna≈Ç uruchomienia programatora..."},"log:LPT_FINISHING":function(){return"(LPT) Ustawianie warto≈õci wynikowej..."},"log:TESTING_WITH_PROGRAM_STARTED":function(){return"Rozpoczynanie testowania..."},"log:TESTING_STARTED":function(t){return"Rozpoczynanie programu <code>"+e.v(t,"program")+"</code>..."},"log:TESTING_SEARCHING_COM":function(t){return"Wyszukiwanie portu szeregowego wg wzrorca <code>"+e.v(t,"pattern")+"</code>..."},"log:TESTING_OPENING_COM":function(t){return"Otwieranie portu szeregowego <code>"+e.v(t,"comPort")+"</code>..."},"log:TESTING_SDP_SETUP":function(){return"Przygotowywanie zasilacza..."},"log:TESTING_SDP_TEARDOWN":function(){return"Wy≈ÇƒÖczanie zasilacza..."},"log:TESTING_PLC_SETUP":function(){return"Przygotowywanie sterownika..."},"log:TESTING_PLC_TEARDOWN":function(){return"Wy≈ÇƒÖczanie sterownika..."},"log:TESTING_EXECUTING_STEP":function(t){return e.s(t,"type",{wait:"Przerwa",pe:"Wykonywanie testu obwodu ochronnego",iso:"Wykonywanie testu rezystancji izolacji",sol:"Programowanie Fortimo Solar",program:"Wykonywanie kroku programowania",fn:"Wykonywanie testu funkcjonalnego",vis:"Wykonywanie testu wizualnego",other:"Wykonywanie kroku programu <em>"+e.v(t,"type")+"</em>"})+"..."},"log:TESTING_SKIPPING_PROGRAMMING":function(){return"Pomijanie kroku programowania..."},"log:ACQUIRING_SERVICE_TAG":function(){return"Pobieranie nowego Service Taga..."},"log:ACQUIRING_SERVICE_TAG_FAILURE":function(t){return"Nie uda≈Ço siƒô pobraƒá nowego Service Taga: <code>"+e.v(t,"error")+"</code>"},"log:SERVICE_TAG_ACQUIRED":function(t){return"Otrzymano Service Tag: <code>"+e.v(t,"serviceTag")+"</code>"},"log:SKIPPING_SERVICE_TAG_ACQUIRING":function(){return"Pomijanie pobierania nowego Service Taga..."},"log:PRINTING_SERVICE_TAG":function(t){return"Drukowanie etykiety Service Tag na drukarce <code>"+e.v(t,"printerName")+"</code>..."},"log:PRINTING_SERVICE_TAG_FAILURE":function(t){return"Nie uda≈Ço siƒô wydrukowaƒá etykiety Service Tag: <code>"+e.v(t,"error")+"</code>"},"log:LED_CHECKING_STARTED":function(){return"Rozpoczynanie sprawdzania p≈Çytek LED..."},"log:WAITING_FOR_LEDS":function(t){return"Oczekiwanie na "+e.v(t,"ledCount")+" "+e.p(t,"ledCount",0,"pl",{one:"p≈Çytkƒô",few:"p≈Çytki",other:"p≈Çytek"})+" LED..."},"log:ADDING_LAST_LEDS":function(t){return"Dodawanie "+e.v(t,"ledCount")+" "+e.p(t,"ledCount",0,"pl",{one:"p≈Çytki",other:"p≈Çytek"})+" LED z ostatniego nieudanego programowania..."},"log:WAITING_FOR_CONTINUE":function(){return"Oczekiwanie na kontynuacjƒô..."},"log:GENERATING_SERVICE_TAG":function(){return"Generowanie nowego Service Taga..."},"log:SERVICE_TAG_GENERATED":function(t){return"Wygenerowano Service Tag: <code>"+e.v(t,"serviceTag")+"</code>"},"error:WORKFLOW_FILE_ERROR":function(){return"B≈ÇƒÖd podczas odczytywania pliku konfiguracyjnego programatora."},"error:WORKFLOW_FILE_WRITE_ERROR":function(){return"B≈ÇƒÖd podczas zapisywania pliku konfiguracyjnego programatora."},"error:FEATURE_FILE_ERROR":function(){return"B≈ÇƒÖd podczas odczytywania pliku konfiguracyjnego drivera."},"error:UNSET_WORKFLOW_FILE":function(){return"Nie ustawiono ≈õcie≈ºki do pliku konfiguracyjnego programatora."},"error:UNSET_FEATURE_PATH_1":function(){return"Nie ustawiono pierwszej ≈õcie≈ºki do plik√≥w konfiguracyjnych driver√≥w."},"error:UNSET_PROGRAMMER_FILE":function(){return"Nie ustawiono ≈õcie≈ºki do pliku wykonywalnego programatora."},"error:MISSING_WORKFLOW_FILE":function(){return"Nie znaleziono pliku konfiguracyjnego programatora."},"error:MISSING_FEATURE_FILE":function(){return"Nie znaleziono pliku konfiguracyjnego drivera."},"error:DUPLICATE_FEATURE_FILE":function(){return"Wykryto kilka plik√≥w konfiguracyjnych driver√≥w dla danego kodu 12NC."},"error:CANCELLED":function(){return"Anulowanie programowania."},"error:READING_FEATURE_FILE_TIMEOUT":function(){return"Up≈Çyniƒôcie limitu czasu odczytywania pliku konfiguracyjnego drivera."},"error:MISSING_PROGRAMMER_FILE":function(){return"Nie znaleziono pliku wykonywalnego programatora."},"error:PROGRAMMER_FILE_ERROR":function(){return"B≈ÇƒÖd podczas uruchamiania pliku wykonywalnego programatora."},"error:EXIT_CODE:-1":function(){return"MultiOneWorkflow (-1): b≈ÇƒÖd aplikacji."},"error:EXIT_CODE:1":function(){return"MultiOneWorkflow (1): klucz oprogramowania nie aktywowany."},"error:EXIT_CODE:4":function(){return"MultiOneWorkflow (4): b≈ÇƒÖd weryfikacji."},"error:EXIT_CODE:5":function(){return"MultiOneWorkflow (5): interfejs podany jako argument do pliku wykonywalnego programatora jest nieprawid≈Çowy."},"error:EXIT_CODE:9":function(){return"MultiOneWorkflow (9): nie znaleziono pliku konfiguracyjnego programatora."},"error:EXIT_CODE:10":function(){return"MultiOneWorkflow (10): nieprawid≈Çowy plik konfiguracyjny programatora."},"error:EXIT_CODE:20":function(){return"MultiOneWorkflow (20): nie znaleziono pliku wspieranych urzƒÖdze≈Ñ."},"error:EXIT_CODE:21":function(){return"MultiOneWorkflow (21): nieprawid≈Çowy plik wspieranych urzƒÖdze≈Ñ."},"error:EXIT_CODE:101":function(){return"MultiOneWorkflow (101): brak opcji drivera do zapisu."},"error:EXIT_CODE:102":function(){return"MultiOneWorkflow (102): zapisywanie opcji drivera nie powiod≈Ço siƒô."},"error:EXIT_CODE:150":function(){return"MultiOneWorkflow (150): resetowanie kr√≥tkiego adresu urzƒÖdzenia nie powiod≈Ço siƒô."},"error:EXIT_CODE:200":function(){return"MultiOneWorkflow (200): nie znaleziono pliku konfiguracyjnego drivera."},"error:EXIT_CODE:201":function(){return"MultiOneWorkflow (201): nieprawid≈Çowy plik konfiguracyjny drivera."},"error:EXIT_CODE:202":function(){return"MultiOneWorkflow (202): pusty plik konfiguracyjny drivera."},"error:EXIT_CODE:203":function(){return"MultiOneWorkflow (203): wykryto zduplikowane opcje drivera."},"error:EXIT_CODE:300":function(){return"MultiOneWorkflow (300): urzƒÖdzenie nie obs≈Çuguje wszystkich opcji z pliku konfiguracyjnego."},"error:EXIT_CODE:301":function(){return"MultiOneWorkflow (301): model urzƒÖdzenia r√≥≈ºni siƒô od tego w pliku konfiguracyjnym drivera."},"error:EXIT_CODE:400":function(){return"MultiOneWorkflow (400): zapisywanie informacji identyfikacyjnych nie powiod≈Ço siƒô."},"error:EXIT_CODE:500":function(){return"MultiOneWorkflow (500): nie znaleziono urzƒÖdzenia."},"error:EXIT_CODE:501":function(){return"MultiOneWorkflow (501): znaleziono za du≈ºo urzƒÖdze≈Ñ."},"error:EXIT_CODE:502":function(){return"MultiOneWorkflow (502): nie mo≈ºna wykonaƒá wyszukiwania urzƒÖdze≈Ñ."},"error:EXIT_CODE:503":function(){return"MultiOneWorkflow (503): kilka urzƒÖdze≈Ñ ma taki sam kr√≥tki adres."},"error:EXIT_CODE:504":function(){return"MultiOneWorkflow (504): wykryto niewspierane urzƒÖdzenie."},"error:EXIT_CODE:600":function(){return"MultiOneWorkflow (600): brak opcji drivera do konwersji."},"error:EXIT_CODE:700":function(){return"MultiOneWorkflow (700): nie pod≈ÇƒÖczono interfejsu."},"error:EXIT_CODE:800":function(){return"MultiOneWorkflow (800): niemo≈ºliwa konwersja danych opcji drivera."},"error:EXIT_CODE:900":function(){return"MultiOneWorkflow (900): dany plik z harmonogramem jest nieprawid≈Çowy i nie uda≈Ço siƒô go wczytaƒá."},"error:SOL_PARSE_ERROR":function(){return"SOL: B≈ÇƒÖd podczas parsowania pliku programu."},"error:SOL_NO_COMMANDS":function(){return"SOL: Brak komend ustawiajƒÖcych warto≈õci parametr√≥w."},"error:SOL_SEARCHING_COM_FAILURE":function(){return"SOL: B≈ÇƒÖd podczas wyszukiwania portu szeregowego."},"error:SOL_COM_NOT_FOUND":function(){return"SOL: Nie znaleziono portu szeregowego."},"error:SOL_OPENING_COM_FAILURE":function(){return"SOL: B≈ÇƒÖd podczas otwierania portu szeregowego."},"error:SOL_SERIAL_PORT_FAILURE":function(){return"SOL: B≈ÇƒÖd portu szeregowego."},"error:SOL_INVALID_OPTION":function(){return"SOL: Odczytana warto≈õƒá r√≥≈ºni siƒô od warto≈õci zaprogramowanej."},"error:SOL_NO_CONNECTION":function(){return"SOL: Brak odpowiedzi od urzƒÖdzenia. Sprawd≈∫ po≈ÇƒÖczenie portu szeregowego."},"error:SOL_FEATURE_DISABLED":function(){return"Ustawiona licencja nie ma opcji programowania Fortimo Solar."},"error:LPT_FILE_ERROR":function(){return"B≈ÇƒÖd podczas komunikacji LPT."},"error:LPT_START_TIMEOUT":function(){return"Up≈Çyniƒôcie limitu czasu oczekiwania na sygna≈Ç uruchomienia programatora."},"error:T24VDC_FEATURE_DISABLED":function(){return"Ustawiona licencja nie ma opcji testera 24V DC."},"error:TESTING_DISABLED":function(){return"T24VDC: Opcja testowania jest wy≈ÇƒÖczona."},"error:TESTING_NOT_SOL":function(){return"T24VDC: Znaleziono konfiguracjƒô drivera nieprawid≈Çowego typu."},"error:TESTING_SEARCHING_COM_FAILURE":function(){return"T24VDC: B≈ÇƒÖd podczas wyszukiwania portu szeregowego."},"error:TESTING_COM_NOT_FOUND":function(){return"T24VDC: Nie znaleziono portu szeregowego."},"error:TESTING_OPENING_COM_FAILURE":function(){return"T24VDC: B≈ÇƒÖd podczas otwierania portu szeregowego."},"error:TESTING_SERIAL_PORT_FAILURE":function(){return"T24VDC: B≈ÇƒÖd portu szeregowego."},"error:TESTING_PLC_FAILURE":function(){return"T24VDC: B≈ÇƒÖd PLC."},"error:TESTING_PLC_NO_CONNECTION":function(){return"T24VDC: Nie uda≈Ço siƒô po≈ÇƒÖczyƒá ze sterownikiem. Sprawd≈∫ ustawienia Modbus."},"error:TESTING_SDP_TIMEOUT":function(){return"T24VDC: Up≈Çyniƒôcie limitu czasu oczekiwania na odpowied≈∫ testera."},"error:TESTING_SDP_INVALID_RESPONSE":function(){return"T24VDC: Otrzymano nieprawid≈ÇowƒÖ odpowied≈∫ od testera."},"error:TESTING_MAX_RESISTANCE":function(){return"T24VDC: Przekroczono maksymalnƒÖ warto≈õƒá rezystancji."},"error:TESTING_MIN_POWER":function(){return"T24VDC: Przekroczono minimalnƒÖ warto≈õƒá mocy."},"error:TESTING_MAX_POWER":function(){return"T24VDC: Przekroczono maksymalnƒÖ warto≈õƒá mocy."},"error:REMOTE_SERVICE_TAG_FAILURE":function(){return"B≈ÇƒÖd podczas pobierania nowego Service Taga."},"error:INVALID_ITEM_QUANTITY":function(){return"Wykryto nieprawid≈Çowe ilo≈õci komponent√≥w w aktualnym zleceniu."},"log:GPRS:READING_ORDER_FILE":function(t){return"Odczytywanie pliku zlecenia: <code>"+e.v(t,"orderFile")+"</code>"},"log:GPRS:ORDER_FILE_READ":function(t){return"Odczytano <code>"+e.v(t,"length")+"B</code> pliku zlecenia."},"log:GPRS:READING_INPUT_TEMPLATE_FILE":function(t){return"Odczytywanie pliku szablonu konfiguracji programatora: <code>"+e.v(t,"inputTemplateFile")+"</code>"},"log:GPRS:INPUT_TEMPLATE_FILE_READ":function(t){return"Odczytano <code>"+e.v(t,"length")+"B</code> pliku szablonu konfiguracji programatora."},"log:GPRS:PARSING_INPUT_TEMPLATE":function(){return"Przetwarzanie szablonu konfiguracji programatora..."},"log:GPRS:PARSING_INPUT_TEMPLATE_SUCCESS":function(){return"Pomy≈õlnie przetworzono szablon konfiguracji programatora."},"log:GPRS:PREPARING_INPUT_FILE":function(){return"Przygotowywanie konfiguracji programatora..."},"log:GPRS:PREPARING_INPUT_FILE_SUCCESS":function(){return"Pomy≈õlnie przygotowano konfiguracjƒô programatora."},"log:GPRS:PROGRAMMER_FILE_STARTED":function(t){return"Uruchamianie programatora na porcie DALI <code>"+e.v(t,"daliPort")+"</code>: <code>"+e.v(t,"programmerFile")+"</code>"},"log:GPRS:READING_OUTPUT_FILE":function(t){return"Odczytywanie pliku wynikowego programatora: <code>"+e.v(t,"outputFile")+"</code>"},"log:GPRS:READING_OUTPUT_FILE_SUCCESS":function(t){return"Odczytano <code>"+e.v(t,"length")+"B</code> pliku wynikowego programatora."},"log:GPRS:COPYING_OUTPUT_FILE":function(){return"Kopiowanie pliku wynikowego programatora..."},"log:GPRS:COPYING_OUTPUT_FILE_SUCCESS":function(){return"Pomy≈õlnie skopiowano plik wynikowy programatora."},"log:GPRS:VERIFICATION_STARTED":function(){return"Rozpoczynanie weryfikacji..."},"log:GPRS:VERIFICATION_SKIPPED":function(){return"Pomijanie weryfikacji..."},"error:GPRS:READING_ORDER_FILE_FAILURE":function(){return"GPRS: B≈ÇƒÖd podczas odczytywania pliku zlecenia."},"error:GPRS:READING_ORDER_FILE_TIMEOUT":function(){return"GPRS: Up≈ÇynƒÖ≈Ç limit czasu odczytywania pliku zlecenia."},"error:GPRS:READING_INPUT_TEMPLATE_FILE_FAILURE":function(){return"GPRS: B≈ÇƒÖd podczas odczytywania pliku szablonu konfiguracji programatora."},"error:GPRS:READING_INPUT_TEMPLATE_FILE_TIMEOUT":function(){return"GPRS: Up≈ÇynƒÖ≈Ç limit czasu odczytywania pliku szablonu konfiguracji programatora."},"error:GPRS:PARSING_INPUT_TEMPLATE_FAILURE":function(){return"GPRS: B≈ÇƒÖd podczas przetwarzania szablonu konfiguracji programatora."},"error:GPRS:PREPARING_INPUT_FILE_FAILURE":function(){return"GPRS: B≈ÇƒÖd podczas przygotowywania pliku konfiguracji programatora."},"error:GPRS:INVALID_OPTION":function(){return"GPRS: Nieprawid≈Çowa opcja konfiguracyjna."},"error:GPRS:PARSING_DRIVER_FILE_FAILURE":function(){return"GPRS: B≈ÇƒÖd podczas przetwarzania pliku konfiguracji drivera."},"error:GPRS:PROGRAMMER_FILE_UNSET":function(){return"GPRS: Nie ustawiono ≈õcie≈ºki do pliku wykonywalnego programatora."},"error:GPRS:PROGRAMMER_FILE_MISSING":function(){return"GPRS: Nie znaleziono pliku wykonywalnego programatora."},"error:GPRS:PROGRAMMER_FILE_FAILURE":function(){return"GPRS: B≈ÇƒÖd podczas uruchamiania pliku wykonywalnego programatora."},"error:GPRS:OUTPUT_FILE_MISSING":function(){return"GPRS: Nie znaleziono pliku wynikowego programatora."},"error:GPRS:COPYING_OUTPUT_FILE_FAILURE":function(){return"GPRS: B≈ÇƒÖd podczas zapisywania pliku wynikowego programatora."},"error:GPRS:VERIFICATION_INPUT_FAILURE":function(){return"GPRS: B≈ÇƒÖd poczas kopiowania pliku wynikowego programatora do weryfikacji."},"error:GPRS:VERIFICATION_ERROR":function(){return"GPRS: Plik wynikowy programatora nie przeszed≈Ç weryfikacji."},"error:GPRS:VERIFICATION_TIMEOUT":function(){return"GPRS: Up≈ÇynƒÖ≈Ç limit czasu weryfikacji pliku wynikowego programatora."},"error:GPRS:EXIT_CODE:-1":function(){return"CityTouchIPT (-1): b≈ÇƒÖd aplikacji."},"log:GLP2:RESETTING_TESTER":function(){return"Resetowanie testera GLP2-I..."},"log:GLP2:TEST_STEP_FAILURE":function(t){return"Przekroczono warto≈õƒá granicznƒÖ 1 <code>"+e.v(t,"setValue")+"</code>: <code>"+e.v(t,"actualValue")+"</code> lub warto≈õƒá granicznƒÖ 2: <code>"+e.v(t,"setValue2")+"</code>: <code>"+e.v(t,"actualValue2")+"</code>"},"error:GLP2:SETTING_DISABLED":function(){return"GLP2: Opcja jest wy≈ÇƒÖczona w ustawieniach."},"error:GLP2:FEATURE_DISABLED":function(){return"Aktualna licencja nie ma opcji testera GLP2-I."},"error:GLP2:TESTER_NOT_READY":function(){return"GLP2: Tester nie jest gotowy."},"error:GLP2:RESETTING_TESTER_FAILURE":function(){return"GLP2: Resetowanie testera nie powiod≈Ço siƒô."},"error:GLP2:PROGRAM_NOT_RECOGNIZED":function(){return"GLP2: Program nie zosta≈Ç rozpoznany."},"error:GLP2:UNEXPECTED_RESPONSE":function(){return"GLP2: Nieoczekiwana odpowied≈∫ testera."},"error:GLP2:TEST_STEP_FAILURE":function(){return"GLP2: Krok testowy zako≈Ñczony niepowodzeniem."},"error:GLP2:BUSY_TESTER":function(){return"GLP2: Tester jest zajƒôty lub wymaga testu BlackBox."},"error:GLP2:INVALID_CHECKSUM":function(){return"GLP2: Nieprawid≈Çowa suma kontrolna odpowiedzi testera."},"error:GLP2:INVALID_PARAMETERS":function(){return"GLP2: Nieprawid≈Çowe parametry testera."},"error:GLP2:INVALID_RESPONSE":function(){return"GLP2: Nieprawid≈Çowa odpowied≈∫ testera."},"error:GLP2:NO_CONNECTION":function(){return"GLP2: Brak po≈ÇƒÖczenia z testerem."},"error:GLP2:RESPONSE_TIMEOUT":function(){return"GLP2: Up≈ÇynƒÖ≈Ç limit czasu oczekiwania na odpowied≈∫ testera."},"error:GLP2:FAULT:1":function(){return"GLP2 (1): Styk bezpiecze≈Ñstwa przerwany."},"error:GLP2:FAULT:2":function(){return"GLP2 (2): Uszkodzony bezpiecznik."},"error:GLP2:FAULT:3":function(){return"GLP2 (3): Brak zdefiniowanego kroku testowego."},"error:GLP2:FAULT:4":function(){return"GLP2 (4): Nieprawid≈Çowe napiƒôcie substitute-LKC."},"error:GLP2:FAULT:5":function(){return"GLP2 (5): Zwarcie na badanym obiekcie."},"error:GLP2:FAULT:6":function(){return"GLP2 (6): B≈ÇƒÖd kontroli napiƒôcia."},"error:GLP2:FAULT:7":function(){return"GLP2 (7): B≈ÇƒÖd danych."},"error:GLP2:FAULT:8":function(){return"GLP2 (8): Przekroczono minimalne natƒô≈ºenie w te≈õcie LKC."},"error:GLP2:FAULT:9":function(){return"GLP2 (9): Testowanie przerwane."},"error:GLP2:FAULT:10":function(){return"GLP2 (10): Przekroczono minimalne napiƒôcie w te≈õcie HV."},"error:GLP2:FAULT:11":function(){return"GLP2 (11): Przekroczono maksymalne napiƒôcie w te≈õcie HV."},"error:GLP2:FAULT:12":function(){return"GLP2 (12): Przekroczono minimalne natƒô≈ºenie w te≈õcie HV."},"error:GLP2:FAULT:13":function(){return"GLP2 (13): B≈ÇƒÖd komunikacji z elektronikƒÖ HV."},"error:GLP2:FAULT:14":function(){return"GLP2 (14): Kontrola napiƒôcia HV nie powiod≈Ça siƒô."},"error:GLP2:FAULT:15":function(){return"GLP2 (15): Program nie istnieje."},"error:GLP2:FAULT:16":function(){return"GLP2 (16): B≈ÇƒÖd regulacji w te≈õcie HV."},"error:GLP2:FAULT:17":function(){return"GLP2 (17): Aktywowano bezpiecznik maksymalnego napiƒôcia testu LKC EN60601."},"error:GLP2:FAULT:18":function(){return"GLP2 (18): Badany obiekt nadal pod napiƒôciem (L-N)"},"error:GLP2:FAULT:19":function(){return"GLP2 (19): Skrƒôcona wtyczka sieciowa (podczas testowania bez transformatora izolujƒÖcego)."},"error:GLP2:FAULT:20":function(){return"GLP2 (20): Brak PE w przewodzie sieciowym."},"error:GLP2:FAULT:21":function(){return"GLP2 (21): Drukarka na porcie LPT1 nie jest gotowa!"},"error:GLP2:FAULT:22":function(){return"GLP2 (22): Wysokie napiƒôcie wy≈ÇƒÖczone (w≈ÇƒÖcznik z kluczykiem)."},"error:GLP2:FAULT:23":function(){return"GLP2 (23): Prze≈ÇƒÖcznik termiczny wysokiego napiƒôcia zosta≈Ç za≈ÇƒÖczony."},"error:GLP2:FAULT:24":function(){return"GLP2 (24): UrzƒÖdzenie nie jest w≈ÇƒÖczone do pracy."},"error:GLP2:FAULT:25":function(){return"GLP2 (25): Maksymalny prƒÖd pierwotny testu HV."},"error:GLP2:FAULT:26":function(){return"GLP2 (26): Brak fazy zewnƒôtrznego napiƒôcia FCT lub jest nieprawid≈Çowo spolaryzowana."},"error:GLP2:FAULT:27":function(){return"GLP2 (27): Otwarta pokrywa ochronna."},"error:GLP2:FAULT:28":function(){return"GLP2 (28): Brak obiektu do badania."},"error:GLP2:FAULT:29":function(){return"GLP2 (29): Sekwencja testowa zg≈Çosi≈Ça b≈ÇƒÖd."},"error:GLP2:FAULT:30":function(){return"GLP2 (30): B≈ÇƒÖd regulacji temperatury (krok testowy TMP)."},"error:GLP2:FAULT:31":function(){return"GLP2 (31): B≈ÇƒÖd testu referencji FI."},"log:FL:MONITORING":function(t){return"Monitorowanie czasu ≈õwiecenia <code>"+e.v(t,"count")+"</code> "+e.p(t,"count",0,"pl",{one:"≈õwietl√≥wki",other:"≈õwietl√≥wek"})+"..."},"log:FL:LIGHTING_TIME":function(t){return e.v(t,"no")+". ≈õwietl√≥wka ≈õwieci≈Ça nieprzerwanie przez <code>"+e.v(t,"duration")+"</code> ms."},"error:FL:FEATURE_DISABLED":function(){return"Aktualna licencja nie ma opcji sprawdzania ≈õwietl√≥wek."},"error:FL:LIGHTING_TIME_TOO_SHORT":function(){return"FL: Zbyt kr√≥tki czas ≈õwiecenia."},"log:FT:STARTED":function(){return"Rozpoczynanie testowania ramki..."},"log:FT:SUCCESS":function(t){return"Pomy≈õlnie uko≈Ñczono testowanie ramki w ciƒÖgu <code>"+e.v(t,"duration")+"</code>."},"log:FT:FAILURE":function(t){return"Zako≈Ñczono testowanie ramki w ciƒÖgu <code>"+e.v(t,"duration")+"</code> z powodu b≈Çƒôdu: <code>"+e.v(t,"error")+"</code>"},"log:FT:CONNECTING":function(){return"NawiƒÖzywanie po≈ÇƒÖczenia z testerem..."},"log:FT:RESETTING":function(){return"Resetowanie testera..."},"log:FT:PROGRAMMING":function(){return"Programowanie testera..."},"log:FT:CHECKING":function(){return"Sprawdzanie obwodu ochronnego..."},"error:FT:INVALID_SERIAL_PROXY_ADDRESS":function(){return"FT: Nieprawid≈Çowy adres serwera ser2net."},"error:FT:CONNECTING_FAILURE":function(){return"FT: B≈ÇƒÖd po≈ÇƒÖczenia z testerem."},"error:FT:SDP_TIMEOUT":function(){return"FT: Up≈Çyniƒôcie limitu czasu oczekiwania na odpowied≈∫ testera."},"error:FT:SDP_INVALID_RESPONSE":function(){return"FT: Otrzymano nieprawid≈ÇowƒÖ odpowied≈∫ od testera."},"error:FT:PE_FAILURE":function(){return"FT: Nieprawid≈Çowy obw√≥d ochronny."},"settings:tab:clients":function(){return"Klienci"},"settings:tab:notifier":function(){return"Powiadomienia"},"settings:appVersion":function(){return"Aktualna wersja aplikacji Walkner Xiconf"},"settings:notifier:enabled":function(){return"Powiadamianie w≈ÇƒÖczone"},"settings:notifier:emptyLeds":function(){return"Powiadamianie o zleceniach bez driver√≥w z zerowƒÖ ilo≈õciƒÖ zeskanowanych p≈Çytek LED"},"settings:notifier:delay":function(){return"Op√≥≈∫nienie powiadomienia [min]"},"settings:notifier:nameFilter":function(){return"Ignorowanie powiadomie≈Ñ po nazwie wyrobu"}}}),define("app/xiconf/routes",["../router","../viewport","../user","i18n!app/nls/xiconf"],function(t,e,n){"use strict";var r=n.auth("XICONF:VIEW"),i=n.auth("XICONF:MANAGE");t.map("/xiconf/results",r,function(t){e.loadPage(["app/xiconf/pages/XiconfResultListPage"],function(e){return new e({rql:t.rql})})}),t.map("/xiconf/results/:id",r,function(t){e.loadPage(["app/xiconf/pages/XiconfResultDetailsPage"],function(e){return new e({modelId:t.params.id,tab:t.query.tab})})}),t.map("/xiconf;settings",i,function(t){e.loadPage("app/xiconf/pages/XiconfSettingsPage",function(e){return new e({initialTab:t.query.tab})})})}),define("app/nls/xiconfOrders",["app/nls/locale/en"],function(t){return{root:{"BREADCRUMBS:base":function(){return"Xiconf"},"BREADCRUMBS:browse":function(){return"Orders"},"MSG:LOADING_FAILURE":function(){return"Failed to load the orders :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the order :("},"PANEL:TITLE:details:parentOrder":function(){return"Product order details"},"PANEL:TITLE:details:order":function(){return"Xiconf order details"},"PAGE_ACTION:export":function(){return"Export orders"},"PAGE_ACTION:settings":function(){return"Change settings"},"PROPERTY:reqDate":function(){return"Date"},"PROPERTY:startedAt":function(){return"Started at"},"PROPERTY:finishedAt":function(){return"Finished at"},"PROPERTY:duration":function(){return"Duration"},"PROPERTY:name":function(){return"Name"},"PROPERTY:status":function(){return"Status"},"PROPERTY:quantityTodo":function(){return"Quantity todo"},"PROPERTY:quantityDone":function(){return"Quantity done"},"PROPERTY:serviceTagCounter":function(){return"Number of issued Service Tags"},"status:-1":function(){return"Unfinished"},"status:0":function(){return"Finished"},"status:1":function(){return"Excess"},"kind:unit:led":function(){return"LED boards"},"kind:unit:program":function(){return"drivers"},"kind:unit:test":function(){return"tests"},"kind:unit:ft":function(){return"frames"},"kind:name:ft":function(){return"Frame test"},"kind:nc12:led":function(){return"LED board 12NC"},"kind:nc12:program":function(){return"Program 12NC"},"kind:nc12:test":function(){return"Test program 12NC"},"kind:nc12:gprs":function(){return"GPRS board 12NC"},"filter:submit":function(){return"Filter orders"},"details:showResultsLink":function(){return"Show results history"}},pl:!0}}),define("app/nls/pl/xiconfOrders",["app/nls/locale/pl"],function(t){return{"BREADCRUMBS:base":function(){return"Xiconf"},"BREADCRUMBS:browse":function(){return"Zlecenia"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie zlece≈Ñ nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie zlecenia nie powiod≈Ço siƒô :("},"PANEL:TITLE:details:parentOrder":function(){return"Szczeg√≥≈Çy zlecenia wyrobu"},"PANEL:TITLE:details:order":function(){return"Szczeg√≥≈Çy zlecenia Xiconf"},"PAGE_ACTION:export":function(){return"Eksportuj zlecenia"},"PAGE_ACTION:settings":function(){return"Zmie≈Ñ ustawienia"},"PROPERTY:reqDate":function(){return"Data"},"PROPERTY:startedAt":function(){return"Czas rozpoczƒôcia"},"PROPERTY:finishedAt":function(){return"Czas uko≈Ñczenia"},"PROPERTY:duration":function(){return"Czas trwania"},"PROPERTY:name":function(){return"Nazwa"},"PROPERTY:status":function(){return"Status"},"PROPERTY:quantityTodo":function(){return"Ilo≈õƒá do zrobienia"},"PROPERTY:quantityDone":function(){return"Ilo≈õƒá zrobiona"},"PROPERTY:serviceTagCounter":function(){return"Ilo≈õƒá wydanych Service Tag√≥w"},"status:-1":function(){return"Nieuko≈Ñczone"},"status:0":function(){return"Uko≈Ñczone"},"status:1":function(){return"Nadwy≈ºka"},"kind:unit:led":function(){return"p≈Çytki LED"},"kind:unit:program":function(){return"drivery"},"kind:unit:test":function(){return"testy"},"kind:unit:ft":function(){return"ramki"},"kind:name:ft":function(){return"Test ramki"},"kind:nc12:led":function(){return"12NC p≈Çytek LED"},"kind:nc12:program":function(){return"12NC programu"},"kind:nc12:test":function(){return"ID programu"},"kind:nc12:gprs":function(){return"12NC p≈Çytki GPRS"},"filter:submit":function(){return"Filtruj zlecenia"},"details:showResultsLink":function(){return"Poka≈º historiƒô wynik√≥w"}}}),define("app/xiconfOrders/routes",["../router","../viewport","../user","i18n!app/nls/xiconf","i18n!app/nls/xiconfOrders"],function(t,e,n){"use strict";var r=n.auth("XICONF:VIEW");t.map("/xiconf/orders",r,function(t){e.loadPage(["app/xiconfOrders/XiconfOrderCollection","app/xiconfOrders/pages/XiconfOrderListPage"],function(e,n){return new n({collection:new e(null,{rqlQuery:t.rql})})})}),t.map("/xiconf/orders/:id",r,function(t){e.loadPage(["app/xiconfOrders/XiconfOrder","app/xiconfOrders/pages/XiconfOrderDetailsPage"],function(e,n){return new n({model:new e({_id:t.params.id})})})})}),define("app/xiconfPrograms/XiconfProgram",["../i18n","../time","../core/Model"],function(t,e,n){"use strict";return n.extend({urlRoot:"/xiconf/programs",clientUrlRoot:"#xiconf/programs",privilegePrefix:"XICONF",topicPrefix:"xiconfPrograms",nlsDomain:"xiconfPrograms",labelAttribute:"name",defaults:function(){return{type:"t24vdc",name:"",prodLines:"",steps:[]}},serialize:function(){var n=this.toJSON();return n.prodLines=n.prodLines||t("xiconfPrograms","PROPERTY:prodLines:all"),n.programType=t("xiconfPrograms","type:"+n.type),n.createdAt=e.format(n.createdAt,"LLLL"),n.updatedAt=e.format(n.updatedAt,"LLLL"),n}},{TYPES_TO_STEPS:{t24vdc:["wait","pe","sol","fn"],glp2:["wait","pe","iso","program","fn","vis"]},GLP2_INPUTS:[1,2,3,4,5,6,7,8,15,16,17,18,19,20,21,22,23,24,25,26,27]})}),define("app/xiconfPrograms/XiconfProgramCollection",["../core/Collection","./XiconfProgram"],function(t,e){"use strict";return t.extend({model:e,rqlQuery:"select(name,type,prodLines,updatedAt,steps)&limit(15)&sort(name)"})}),define("app/nls/xiconfPrograms",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)
}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Programs"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the programs :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Filed to load the program :("},"MSG:DELETED":function(t){return"Program <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add program"},"PAGE_ACTION:edit":function(){return"Edit program"},"PAGE_ACTION:delete":function(){return"Delete program"},"PAGE_ACTION:toggle":function(){return"Toggle details"},"PANEL:TITLE:details":function(){return"Program details"},"PANEL:TITLE:addForm":function(){return"Program add form"},"PANEL:TITLE:editForm":function(){return"Program edit form"},"step:wait":function(){return"Wait"},"step:pe":function(){return"Protective earth test"},"step:iso":function(){return"Isolation resistance test"},"step:sol":function(){return"Fortimo Solar programming"},"step:sol:label":function(){return"prg"},"step:program":function(){return"Programowanie"},"step:program:label":function(){return"prg"},"step:fn":function(){return"Functional test"},"step:fn:label":function(){return"fct"},"step:vis":function(){return"Visual check"},"type:t24vdc":function(){return"24V DC"},"type:glp2":function(){return"GLP2-I"},"glp2:fn:mode:0":function(){return"Current test"},"glp2:fn:mode:0:label":function(){return"Current [A]"},"glp2:fn:mode:1":function(){return"Apparent power test"},"glp2:fn:mode:1:label":function(){return"Apparent power [W]"},"glp2:fn:mode:2":function(){return"Active power test"},"glp2:fn:mode:2:label":function(){return"Active power [W]"},"glp2:fn:mode:3":function(){return"cosœÜ test"},"glp2:fn:mode:3:label":function(){return"cosœÜ"},"glp2:fn:mode:5":function(){return"Visual check"},"glp2:fn:mode:5:label":function(){return"Set value"},"glp2:fn:mode:6":function(){return"Residual voltage test"},"glp2:fn:mode:6:label":function(){return"Residual voltage [V]"},"glp2:iso:mode:0":function(){return"Resistance evaluation"},"glp2:iso:mode:0:label":function(){return"Resistance [MŒ©]"},"glp2:iso:mode:1":function(){return"Current evaluation"},"glp2:iso:mode:1:label":function(){return"Current [mA]"},"glp2:iso:mode:2":function(){return"Varistor test"},"glp2:iso:mode:2:label":function(){return"Voltage [V]"},"glp2:vis:duration":function(){return"Time to confirmation"},"glp2:vis:maxDuration":function(){return"Max time to confirm"},"glp2:vis:mode":function(){return"Confirmation mode"},"glp2:vis:mode:0":function(){return"Normal"},"glp2:vis:mode:1":function(){return"Condition controlled"},"glp2:vis:goInput":function(){return"Success input"},"glp2:vis:noGoInput":function(){return"Failure input"},"glp2:input:1":function(){return"Start"},"glp2:input:2":function(){return"Probe: button 1"},"glp2:input:3":function(){return"Probe: button 2"},"glp2:input:4":function(){return"Probe: switch"},"glp2:input:5":function(){return"HV Start"},"glp2:input:6":function(){return"HV Stop"},"glp2:input:7":function(){return"HV Pistol"},"glp2:input:8":function(){return"RSP Trigger"},"glp2:input:15":function(){return"Key switch 1 (left)"},"glp2:input:16":function(){return"Key switch 2 (right)"},"glp2:input:17":function(){return"Extra input 1"},"glp2:input:18":function(){return"Extra input 2"},"glp2:input:19":function(){return"Extra input 3"},"glp2:input:20":function(){return"Extra input 4"},"glp2:input:21":function(){return"Two-handed switch 1"},"glp2:input:22":function(){return"Two-handed switch 2"},"glp2:input:23":function(){return"HV safety contact"},"glp2:input:24":function(){return"LV safety contact"},"glp2:input:25":function(){return"Foot pedal"},"glp2:input:26":function(){return"Emergency stop"},"glp2:input:27":function(){return"Two-handed start"},"filter:submit":function(){return"Filter programs"},"PROPERTY:name":function(){return"Name"},"PROPERTY:type":function(){return"Type"},"PROPERTY:prodLines":function(){return"Production lines"},"PROPERTY:prodLines:all":function(){return"All"},"PROPERTY:createdAt":function(){return"Created at"},"PROPERTY:updatedAt":function(){return"Updated at"},"PROPERTY:startTime":function(){return"Start time"},"PROPERTY:duration":function(){return"Measurement time"},"PROPERTY:totalTime":function(){return"Total test time"},"PROPERTY:voltage":function(){return"Voltage [V]"},"PROPERTY:current":function(){return"Current [A]"},"PROPERTY:resistance:max":function(){return"Maximum resistance [Œ©]"},"PROPERTY:power":function(){return"Power [W]"},"PROPERTY:power:req":function(){return"Required power [W]"},"PROPERTY:power:rel":function(){return"Tolerance [%]"},"PROPERTY:power:min":function(){return"Minimum power [W]"},"PROPERTY:power:max":function(){return"Maximum power [W]"},"PROPERTY:steps":function(){return"Steps"},"PROPERTY:waitKind":function(){return"Continuation"},"PROPERTY:waitKind:manual":function(){return"after a user action"},"PROPERTY:waitKind:auto":function(){return"after a delay:"},"PROPERTY:label":function(){return"Test definition"},"PROPERTY:mode":function(){return"Mode"},"PROPERTY:buzzer":function(){return"Buzzer"},"PROPERTY:buzzer:0":function(){return"Disabled"},"PROPERTY:buzzer:1":function(){return"After success"},"PROPERTY:execution":function(){return"Execution"},"PROPERTY:execution:0":function(){return"Auto"},"PROPERTY:execution:1":function(){return"Hold start"},"PROPERTY:execution:2":function(){return"Stop before test"},"PROPERTY:execution:4":function(){return"Stop after test"},"PROPERTY:trigger":function(){return"Trigger"},"PROPERTY:trigger:0":function(){return"Start time"},"PROPERTY:trigger:1":function(){return"Starting signal"},"PROPERTY:trigger:2":function(){return"Measured value"},"PROPERTY:lampCount":function(){return"Fluorescent lamp count"},"PROPERTY:lampDuration":function(){return"Uninterrupted lighting time [s]"},"FORM:ACTION:add":function(){return"Add program"},"FORM:ACTION:edit":function(){return"Edit program"},"FORM:ERROR:addFailure":function(){return"Failed to add the program :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the program :-("},"FORM:ERROR:minDuration":function(){return"Value cannot be lower than 1s."},"FORM:ERROR:minMaxDurations":function(){return"Max time to confirm must be longer than Time to confirmation."},"FORM:ERROR:requiredStep":function(){return"Select at least one step."},"form:steps:add":function(){return"Add a new step"},"form:steps:placeholder":function(){return"Select a step type..."},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Program deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete program"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the selected program?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> program?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the program :-("}},pl:!0}}),define("app/nls/pl/xiconfPrograms",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:base":function(){return"Xiconf"},"BREADCRUMBS:browse":function(){return"Programy"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie program√≥w nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie programu nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Program <em>"+e.v(t,"label")+"</em> zosta≈Ç usuniƒôty."},"PAGE_ACTION:add":function(){return"Dodaj program"},"PAGE_ACTION:edit":function(){return"Edytuj program"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ program"},"PAGE_ACTION:toggle":function(){return"Poka≈º/ukryj szczeg√≥≈Çy"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy programu"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania programu"},"PANEL:TITLE:editForm":function(){return"Formularz edycji programu"},"step:wait":function(){return"Przerwa"},"step:pe":function(){return"Test obwodu ochronnego"},"step:iso":function(){return"Test rezystancji izolacji"},"step:sol":function(){return"Programowanie Fortimo Solar"},"step:sol:label":function(){return"prg"},"step:program":function(){return"Programowanie"},"step:program:label":function(){return"prg"},"step:fn":function(){return"Test funkcjonalny"},"step:fn:label":function(){return"fct"},"step:vis":function(){return"Test wizualny"},"type:t24vdc":function(){return"24V DC"},"type:glp2":function(){return"GLP2-I"},"glp2:fn:mode:0":function(){return"Test poboru prƒÖdu"},"glp2:fn:mode:0:label":function(){return"Natƒô≈ºenie prƒÖdu [A]"},"glp2:fn:mode:1":function(){return"Test mocy pozornej"},"glp2:fn:mode:1:label":function(){return"Moc pozorna [W]"},"glp2:fn:mode:2":function(){return"Test mocy"},"glp2:fn:mode:2:label":function(){return"Moc [W]"},"glp2:fn:mode:3":function(){return"Test cosœÜ"},"glp2:fn:mode:3:label":function(){return"cosœÜ"},"glp2:fn:mode:5":function(){return"Test wizualny"},"glp2:fn:mode:5:label":function(){return"Warto≈õƒá nastawy"},"glp2:fn:mode:6":function(){return"Test napiƒôcia resztkowego"},"glp2:fn:mode:6:label":function(){return"Napiƒôcie resztkowe [V]"},"glp2:iso:mode:0":function(){return"Oporno≈õƒá ISO"},"glp2:iso:mode:0:label":function(){return"Warto≈õƒá nastawy [MŒ©]"},"glp2:iso:mode:1":function(){return"PrƒÖd ISO"},"glp2:iso:mode:1:label":function(){return"Warto≈õƒá nastawy [mA]"},"glp2:iso:mode:2":function(){return"Warystor"},"glp2:iso:mode:2:label":function(){return"Warto≈õƒá nastawy [V]"},"glp2:iso:u":function(){return"Napiƒôcie izolacji [V]"},"glp2:iso:rMax":function(){return"Maksymalny op√≥r [MŒ©]"},"glp2:iso:ramp":function(){return"Czas rampowy"},"glp2:vis:duration":function(){return"Czas do potwierdzenia"},"glp2:vis:maxDuration":function(){return"Czas na potwierdzenie"},"glp2:vis:mode":function(){return"Tryb potwierdzenia"},"glp2:vis:mode:0":function(){return"Normalny"},"glp2:vis:mode:1":function(){return"Stan kontrolowany"},"glp2:vis:goInput":function(){return"Wej≈õcie sukcesu"},"glp2:vis:noGoInput":function(){return"Wej≈õcie pora≈ºki"},"glp2:input:1":function(){return"Start"},"glp2:input:2":function(){return"Sonda: przycisk 1"},"glp2:input:3":function(){return"Sonda: przycisk 2"},"glp2:input:4":function(){return"Sonda: prze≈ÇƒÖcznik"},"glp2:input:5":function(){return"HV Start"},"glp2:input:6":function(){return"HV Stop"},"glp2:input:7":function(){return"HV Pistol (sonda wysokonapiƒôciowa)"},"glp2:input:8":function(){return"RSP Trigger"},"glp2:input:15":function(){return"Prze≈ÇƒÖcznik z kluczem 1 (lewy)"},"glp2:input:16":function(){return"Prze≈ÇƒÖcznik z kluczem 2 (prawy)"},"glp2:input:17":function(){return"Wej≈õcie dodatkowe 1"},"glp2:input:18":function(){return"Wej≈õcie dodatkowe 2"},"glp2:input:19":function(){return"Wej≈õcie dodatkowe 3"},"glp2:input:20":function(){return"Wej≈õcie dodatkowe 4"},"glp2:input:21":function(){return"Prze≈ÇƒÖcznik oburƒôczny 1"},"glp2:input:22":function(){return"Prze≈ÇƒÖcznik oburƒôczny 2"},"glp2:input:23":function(){return"Styk bezpiecze≈Ñstwa HV"},"glp2:input:24":function(){return"Styk bezpiecze≈Ñstwa LV"},"glp2:input:25":function(){return"Prze≈ÇƒÖcznik no≈ºny"},"glp2:input:26":function(){return"Stop bezpiecze≈Ñstwa"},"glp2:input:27":function(){return"Start oburƒôczny"},"filter:submit":function(){return"Filtruj programy"},"PROPERTY:name":function(){return"Nazwa"},"PROPERTY:type":function(){return"Typ"},"PROPERTY:prodLines":function(){return"Linie produkcyjne"},"PROPERTY:prodLines:all":function(){return"Wszystkie"},"PROPERTY:createdAt":function(){return"Data i czas dodania"},"PROPERTY:updatedAt":function(){return"Data i czas modyfikacji"},"PROPERTY:startTime":function(){return"Czas rozruchu"},"PROPERTY:duration":function(){return"Czas pomiaru"},"PROPERTY:totalTime":function(){return"Ca≈Çkowity czas testu"},"PROPERTY:voltage":function(){return"Napiƒôcie [V]"},"PROPERTY:current":function(){return"Natƒô≈ºenie [A]"},"PROPERTY:resistance:max":function(){return"Maksymalny op√≥r [Œ©]"},"PROPERTY:power":function(){return"Moc [W]"},"PROPERTY:power:req":function(){return"Wymagana moc [W]"},"PROPERTY:power:rel":function(){return"Tolerancja [%]"},"PROPERTY:power:min":function(){return"Minimalna moc [W]"},"PROPERTY:power:max":function(){return"Maksymalna moc [W]"},"PROPERTY:steps":function(){return"Kroki"},"PROPERTY:waitKind":function(){return"Kontynuacja"},"PROPERTY:waitKind:manual":function(){return"po akcji u≈ºytkownika"},"PROPERTY:waitKind:auto":function(){return"po up≈Çywie czasu:"},"PROPERTY:label":function(){return"Definicja testu"},"PROPERTY:mode":function(){return"Tryb badania"},"PROPERTY:buzzer":function(){return"Sygna≈Ç d≈∫wiƒôkowy"},"PROPERTY:buzzer:0":function(){return"Wy≈ÇƒÖczony"},"PROPERTY:buzzer:1":function(){return"Po sukcesie"},"PROPERTY:lowerTolerance":function(){return"Dolna granica"},"PROPERTY:upperTolerance":function(){return"G√≥rna granica"},"PROPERTY:execution":function(){return"Rodzaj przebiegu"},"PROPERTY:execution:0":function(){return"Automatyczny"},"PROPERTY:execution:1":function(){return"Przytrzymaj start"},"PROPERTY:execution:2":function(){return"Stop przed testem"},"PROPERTY:execution:4":function(){return"Stop po te≈õcie"},"PROPERTY:trigger":function(){return"Wyzwalacz"},"PROPERTY:trigger:0":function(){return"Czas rozruchu"},"PROPERTY:trigger:1":function(){return"Sygna≈Ç startu"},"PROPERTY:trigger:2":function(){return"Mierzona warto≈õƒá"},"PROPERTY:lampCount":function(){return"Ilo≈õƒá ≈õwietl√≥wek"},"PROPERTY:lampDuration":function(){return"Czas nieprzerwanego ≈õwiecenia [s]"},"FORM:ACTION:add":function(){return"Dodaj program"},"FORM:ACTION:edit":function(){return"Edytuj program"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá programu :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá programu :-("},"FORM:ERROR:minDuration":function(){return"Warto≈õƒá nie mo≈ºe byƒá mniejsza ni≈º 1s."},"FORM:ERROR:minMaxDurations":function(){return"Czas na potwierdzenie musi byƒá d≈Çu≈ºszy od Czasu do potwierdzenia."},"FORM:ERROR:requiredStep":function(){return"Wybierz przynajmniej jeden krok."},"form:steps:add":function(){return"Dodaj krok"},"form:steps:placeholder":function(){return"Wybierz typ kroku..."},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia programu"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ program"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany program?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá program <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá programu :-("}}}),define("app/xiconfPrograms/routes",["underscore","../i18n","../router","../viewport","../user","../core/util/showDeleteFormPage","./XiconfProgram","./XiconfProgramCollection","i18n!app/nls/xiconfPrograms"],function(t,e,n,r,i,o,s,a){"use strict";function u(t){return function(){var n=t.prototype.breadcrumbs.call(this);return n.unshift(e.bound("xiconfPrograms","BREADCRUMBS:base")),n}}var c=i.auth("XICONF:VIEW"),l=i.auth("XICONF:MANAGE");n.map("/xiconf/programs",c,function(t){r.loadPage(["app/xiconfPrograms/pages/XiconfProgramListPage"],function(e){return new e({collection:new a(null,{rqlQuery:t.rql})})})}),n.map("/xiconf/programs/:id",c,function(t){r.loadPage(["app/core/pages/DetailsPage","app/xiconfPrograms/views/XiconfProgramDetailsView"],function(e,n){return new e({DetailsView:n,model:new s({_id:t.params.id}),breadcrumbs:u(e)})})}),n.map("/xiconf/programs;add",l,function(){r.loadPage(["app/core/pages/AddFormPage","app/xiconfPrograms/views/XiconfProgramFormView"],function(t,e){return new t({FormView:e,model:new s,breadcrumbs:u(t)})})}),n.map("/xiconf/programs/:id;edit",l,function(t){r.loadPage(["app/core/pages/EditFormPage","app/xiconfPrograms/views/XiconfProgramFormView"],function(e,n){return new e({FormView:n,model:new s({_id:t.params.id}),breadcrumbs:u(e)})})}),n.map("/xiconf/programs/:id;delete",l,t.partial(o,s,t,t,{breadcrumbs:u()}))}),define("app/nls/xiconfClients",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:base":function(){return"Xiconf"},"BREADCRUMBS:browse":function(){return"Clients"},"MSG:LOADING_FAILURE":function(){return"Failed to load the clients :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the client :("},"MSG:NO_APPS_TO_UPDATE":function(){return"No apps to update :("},"PROPERTY:_id":function(){return"ID"},"PROPERTY:prodLine":function(){return"Line"},"PROPERTY:license":function(){return"License"},"PROPERTY:features":function(){return"Features"},"PROPERTY:appVersion":function(){return"App version"},"PROPERTY:mowVersion":function(){return"MultiOne version"},"PROPERTY:coreScannerDriver":function(){return"CoreScanner"},"PROPERTY:order":function(){return"Order"},"PROPERTY:lastSeenAt":function(){return"Last seen at"},"PROPERTY:status":function(){return"Status"},"status:online":function(){return"Online"},"status:offline":function(){return"Offline"},"coreScannerDriver:true":function(){return"Exists"},"coreScannerDriver:false":function(){return"Doesn't exist"},"page:update":function(){return"Update apps"},"page:settings":function(){return"Change settings"},"list:goToDashboard":function(){return"Go to dashboard"},"list:goToSettings":function(){return"Go to settings"},"list:downloadVNC":function(){return"Download TightVNC config"},"list:restart":function(){return"Restart application"},"list:update":function(){return"Update application"},"filter:submit":function(){return"Filter clients"},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Client deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete client"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen client?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> client?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the client :-("},"restartDialog:title":function(){return"Application restart"},"restartDialog:message":function(t){return"Are you sure you want to restart the <em>"+e.v(t,"client")+"</em> application?<br><br>The application will be restarted right after the current programming finishes."},"restartDialog:yes":function(){return"Restart application"},"restartDialog:no":function(){return"Cancel"},"updateDialog:title":function(){return"Application update"},"updateDialog:message":function(t){return"Are you sure you want to update the <em>"+e.v(t,"client")+"</em> application?<br><br>The application will be updated right after the current programming finishes."},"updateDialog:yes":function(){return"Update application"},"updateDialog:no":function(){return"Cancel"},"updateAllDialog:title":function(){return"Applications update"},"updateAllDialog:message":function(){return"Are you sure you want to update all applications?<br><br>The applications will be updated right after the current programming finishes."},"updateAllDialog:yes":function(){return"Update applications"},"updateAllDialog:no":function(){return"Cancel"},"licensePicker:title":function(){return"Client license selection"}},pl:!0}}),define("app/nls/pl/xiconfClients",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:base":function(){return"Xiconf"},"BREADCRUMBS:browse":function(){return"Klienci"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie klient√≥w nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie klienta nie powiod≈Ço siƒô :("},"MSG:NO_APPS_TO_UPDATE":function(){return"Nie ma ≈ºadnych aplikacji do zaktualizowania :("},"PROPERTY:_id":function(){return"ID"},"PROPERTY:prodLine":function(){return"Linia"},"PROPERTY:license":function(){return"Licencja"},"PROPERTY:features":function(){return"Opcje"},"PROPERTY:appVersion":function(){return"Wersja aplikacji"},"PROPERTY:mowVersion":function(){return"Wersja MultiOne"},"PROPERTY:coreScannerDriver":function(){return"CoreScanner"},"PROPERTY:order":function(){return"Zlecenie"},"PROPERTY:lastSeenAt":function(){return"Ostatnio widziany"},"PROPERTY:status":function(){return"Status"},"status:online":function(){return"Online"},"status:offline":function(){return"Offline"},"coreScannerDriver:true":function(){return"Istnieje"},"coreScannerDriver:false":function(){return"Nie istnieje"},"page:update":function(){return"Aktualizuj aplikacje"},"page:settings":function(){return"Zmie≈Ñ ustawienia"},"list:goToDashboard":function(){return"Przejd≈∫ do ekranu g≈Ç√≥wnego"},"list:goToSettings":function(){return"Przejd≈∫ do ustawie≈Ñ"},"list:downloadVNC":function(){return"Pobierz konfiguracjƒô TightVNC"},"list:restart":function(){return"Restartuj aplikacjƒô"},"list:update":function(){return"Aktualizuj aplikacjƒô"},"filter:submit":function(){return"Filtruj klient√≥w"},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia klienta"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ klietna"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybranego klienta?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá klienta <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá klienta :-("},"restartDialog:title":function(){return"Restartowanie aplikacji"},"restartDialog:message":function(t){return"Czy na pewno chcesz zrestartowaƒá aplikacjƒô <em>"+e.v(t,"client")+"</em>?<br><br>Aplikacja zostanie zrestartowana zaraz po zako≈Ñczeniu aktualnego programowania."},"restartDialog:yes":function(){return"Restartuj aplikacjƒô"},"restartDialog:no":function(){return"Anuluj"},"updateDialog:title":function(){return"Aktualizacja aplikacji"},"updateDialog:message":function(t){return"Czy na pewno chcesz zaktualizowaƒá aplikacjƒô <em>"+e.v(t,"client")+"</em>?<br><br>Aplikacja zostanie zaktualizowana zaraz po zako≈Ñczeniu aktualnego programowania."},"updateDialog:yes":function(){return"Aktualizuj aplikacjƒô"},"updateDialog:no":function(){return"Anuluj"},"updateAllDialog:title":function(){return"Aktualizacja wszystkich aplikacji"},"updateAllDialog:message":function(){return"Czy na pewno chcesz zaktualizowaƒá wszystkie aplikacjƒô?<br><br>Aplikacja zostanƒÖ zaktualizowana zaraz po zako≈Ñczeniu aktualnego programowania."},"updateAllDialog:yes":function(){return"Aktualizuj aplikacje"},"updateAllDialog:no":function(){return"Anuluj"},"licensePicker:title":function(){return"Wyb√≥r licencji klienta"}}}),define("app/nls/licenses",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Licenses"},"MSG:LOADING_FAILURE":function(){return"Failed to load the licenses :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the licenses :("},"MSG:DELETED":function(t){return"License <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add license"},"PAGE_ACTION:edit":function(){return"Edit license"},"PAGE_ACTION:delete":function(){return"Delete license"},"PANEL:TITLE:details":function(){return"License details"},"PANEL:TITLE:addForm":function(){return"License add form"},"PANEL:TITLE:editForm":function(){return"License edit form"},"PROPERTY:_id":function(){return"License ID"},"PROPERTY:appId":function(){return"App ID"},"PROPERTY:appName":function(){return"App name"},"PROPERTY:appVersion":function(){return"App version"},"PROPERTY:date":function(){return"Issue date"},"PROPERTY:expireDate":function(){return"Expiration date"},"PROPERTY:features":function(){return"Features"},"PROPERTY:licensee":function(){return"Licensee"},"PROPERTY:key":function(){return"License key"},"filter:submit":function(){return"Filter licenses"},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"License deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete License"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen License?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> License?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the License :-("},"error:NO_KEY":function(){return"No license key."},"error:INVALID_ED_PEM":function(){return"Invalid license decryption key."},"error:APP_ID":function(){return"Current license was not issued to the running application."},"error:APP_VERSION":function(){return"Current license does not support the currently running version of the application."},"error:UNKNOWN_LICENSE":function(){return"Current license was not recognized by the remote server."},"error:DUPLICATE_LICENSE":function(){return"The remote server detected duplicate licenses in use."},"app:msys-xiconf-lp":function(){return"Xiconf Label Printer"},"app:walkner-xiconf":function(){return"Walkner Xiconf"},"app:walkner-icpo":function(){return"Walkner ICPO"},"app:wmes-docs":function(){return"WMES Documents"},"picker:unused":function(){return"Show only unused licenses"},"picker:noData":function(){return"No matching licenses."},"picker:loading":function(){return"Loading license list..."}},pl:!0}}),define("app/nls/pl/licenses",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Licencje"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie licencji nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie licencji nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Licencja <em>"+e.v(t,"label")+"</em> zosta≈Ça usuniƒôta."},"PAGE_ACTION:add":function(){return"Dodaj licencjƒô"},"PAGE_ACTION:edit":function(){return"Edytuj licencjƒô"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ licencjƒô"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy licencji"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania licencji"},"PANEL:TITLE:editForm":function(){return"Formularz modyfikacji licencji"},"PROPERTY:_id":function(){return"ID licencji"},"PROPERTY:appId":function(){return"ID aplikacji"},"PROPERTY:appName":function(){return"Aplikacja"},"PROPERTY:appVersion":function(){return"Wersja aplikacji"},"PROPERTY:date":function(){return"Data wydania"},"PROPERTY:expireDate":function(){return"Data wyga≈õniƒôcia"},"PROPERTY:features":function(){return"Opcje"},"PROPERTY:licensee":function(){return"Licencjobiorca"},"PROPERTY:key":function(){return"Klucz licencyjny"},"filter:submit":function(){return"Filtruj licencje"},"FORM:ACTION:add":function(){return"Dodaj licencjƒô"},"FORM:ACTION:edit":function(){return"Edytuj licencjƒô"},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia licencji"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ licencjƒô"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybranƒÖ licencjƒô?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá licencjƒô <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá licencji :-("},"error:NO_KEY":function(){return"Brak klucza licencji."},"error:INVALID_ED_PEM":function(){return"Nieprawid≈Çowy klucz odszyfrowywania."},"error:APP_ID":function(){return"Ustawiona licencja nie zosta≈Ça przydzielona do uruchomionej aplikacji."},"error:APP_VERSION":function(){return"Ustawiona licencja nie obejmuje aktualnie uruchomionej wersji aplikacji."},"error:UNKNOWN_LICENSE":function(){return"Licencja nie zosta≈Ça rozpoznana przez zewnƒôtrzy serwer."},"error:DUPLICATE_LICENSE":function(){return"Zewnƒôtrzny serwer wykry≈Ç zduplikowane licencje."},"app:msys-xiconf-lp":function(){return"Xiconf Label Printer"},"app:walkner-xiconf":function(){return"Walkner Xiconf"},"app:walkner-icpo":function(){return"Walkner ICPO"},"app:wmes-docs":function(){return"Dokumenty WMES"},"picker:unused":function(){return"Pokazuj tylko nieu≈ºywane licencje"},"picker:noData":function(){return"Brak pasujƒÖcych licencji."},"picker:loading":function(){return"≈Åadowanie listy licencji..."}}}),define("app/xiconfClients/routes",["../router","../viewport","../user","i18n!app/nls/xiconf","i18n!app/nls/xiconfClients","i18n!app/nls/licenses"],function(t,e,n){"use strict";var r=n.auth("XICONF:VIEW");t.map("/xiconf/clients",r,function(t){e.loadPage(["app/xiconfClients/XiconfClientCollection","app/xiconfClients/pages/XiconfClientListPage"],function(e,n){return new n({collection:new e(null,{rqlQuery:t.rql})})})})}),define("app/nls/icpo",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"ICPO results"},"BREADCRUMBS:details":function(){return"Result"},"MSG:LOADING_FAILURE":function(){return"Failed to load the programming results :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the programming result :("
},"PANEL:TITLE:details":function(){return"Programming details"},"PAGE_ACTION:export":function(){return"Export results"},"PAGE_ACTION:download":function(){return"Download configuration"},"PAGE_ACTION:download:orderData":function(){return"Order configuration"},"PAGE_ACTION:download:driverData":function(){return"Driver configuration"},"PAGE_ACTION:download:gprsData":function(){return"GPRS configuration"},"PAGE_ACTION:download:inputData":function(){return"Programmer configuration"},"PAGE_ACTION:download:outputData":function(){return"Programmer result"},"PROPERTY:srcId":function(){return"Installation ID"},"PROPERTY:srcTitle":function(){return"Installation title"},"PROPERTY:srcIp":function(){return"Installation IP"},"PROPERTY:srcUuid":function(){return"Installation key"},"PROPERTY:serviceTag":function(){return"Service Tag label"},"PROPERTY:driver":function(){return"Driver label"},"PROPERTY:gprs":function(){return"GPRS label"},"PROPERTY:led":function(){return"LED board label"},"PROPERTY:startedAt":function(){return"Started at"},"PROPERTY:finishedAt":function(){return"Finished at"},"PROPERTY:duration":function(){return"Duration"},"PROPERTY:log":function(){return"Log"},"PROPERTY:result":function(){return"Result"},"PROPERTY:errorCode":function(){return"Error"},"PROPERTY:exception":function(){return"Exception"},"filter:result:success":function(){return"Success"},"filter:result:failure":function(){return"Failure"},"filter:placeholder:srcId":function(){return"Any"},"filter:submit":function(){return"Filter results"},"tab:log":function(){return"Programming log"},"tab:output":function(){return"Programmer output"},"tab:orderData":function(){return"Order"},"tab:driverData":function(){return"Driver"},"tab:gprsData":function(){return"GPRS"},"tab:inputData":function(){return"Programmer"},"tab:outputData":function(){return"Result"},"log:CANCELLING":function(){return"Cancelling..."},"log:PROGRAMMING_STARTED":function(){return"Starting a programming process..."},"log:READING_INPUT_TEMPLATE_FILE":function(t){return"Reading the programmer input template file: <code>"+e.v(t,"inputTemplateFile")+"</code>"},"log:READING_INPUT_TEMPLATE_FILE_SUCCESS":function(t){return"Read <code>"+e.v(t,"length")+"B</code> of the programmer input template file."},"log:PARSING_INPUT_TEMPLATE":function(){return"Parsing the programmer input template file..."},"log:PARSING_INPUT_TEMPLATE_SUCCESS":function(){return"Successfully parsed the programmer input template file."},"log:PREPARING_INPUT_FILE":function(){return"Preparing the programmer input file..."},"log:PREPARING_INPUT_FILE_SUCCESS":function(){return"Successfully prepared the programmer input file."},"log:PROGRAMMER_FILE_STARTED":function(t){return"Starting the programmer using the <code>"+e.v(t,"daliPort")+"</code> DALI port: <code>"+e.v(t,"programmerFile")+"</code>"},"log:PROGRAMMING_PROGRESS":function(t){return"<code>"+e.v(t,"percentage")+"%</code>"},"log:READING_OUTPUT_FILE":function(t){return"Reading the programmer output file: <code>"+e.v(t,"outputFile")+"</code>"},"log:READING_OUTPUT_FILE_SUCCESS":function(t){return"Read <code>"+e.v(t,"length")+"B</code> of the programmer input template file."},"log:COPYING_OUTPUT_FILE":function(){return"Copying the programmer output file..."},"log:COPYING_OUTPUT_FILE_SUCCESS":function(){return"Successfully copied the programmer output file."},"log:VERIFICATION_STARTED":function(){return"Starting the verification process..."},"log:VERIFICATION_SKIPPED":function(){return"Skipping the verification process..."},"log:PROGRAMMING_SUCCESS":function(t){return"Successfully finished the programming process in <code>"+e.v(t,"duration")+"</code>."},"log:PROGRAMMING_FAILURE":function(t){return"Finished the programming process in <code>"+e.v(t,"duration")+"</code> with an error: <code>"+e.v(t,"error")+"</code>"},"error:INPUT_TEMPLATE_FILE_MISSING":function(){return"Programmer input template file was not found"},"error:INPUT_TEMPLATE_FILE_FAILURE":function(){return"Error during reading of the programmer input template file."},"error:INPUT_TEMPLATE_FILE_TIMEOUT":function(){return"Reading the programmer input template file timed out."},"error:PARSING_INPUT_TEMPLATE_FAILURE":function(){return"Error during parsing of the programmer input template file."},"error:PREPARING_INPUT_FILE_FAILURE":function(){return"Error during saving of the programmer input configuration file."},"error:PROGRAMMER_FILE_UNSET":function(){return"Path to the programmer executable file was not set."},"error:PROGRAMMER_FILE_MISSING":function(){return"Programmer executable file was not found"},"error:PROGRAMMER_FILE_FAILURE":function(){return"Error during execution of the programmer executable."},"error:OUTPUT_FILE_MISSING":function(){return"Programmer output file was not found."},"error:COPYING_OUTPUT_FILE_FAILURE":function(){return"Error during copying of the programmer output file."},"error:VERIFICATION_INPUT_FAILURE":function(){return"Error during copying of the programmer output file for verification."},"error:VERIFICATION_WATCHER_FAILURE":function(){return"Error during observing of the verification directories."},"error:VERIFICATION_ERROR":function(){return"Programmer output file didn't pass the verification."},"error:VERIFICATION_TIMEOUT":function(){return"Programmer output file verification timed out."},"error:CANCELLED":function(){return"Programming cancelled."},"error:EXIT_CODE:-1":function(){return"CityTouchIPT (-1): general application failure."}},pl:!0}}),define("app/nls/pl/icpo",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Wyniki ICPO"},"BREADCRUMBS:details":function(){return"Wynik"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie wynik√≥w programowania nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie danych wyniku programowania nie powiod≈Ço siƒô :("},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy programowania"},"PAGE_ACTION:export":function(){return"Eksportuj wyniki"},"PAGE_ACTION:download":function(){return"Pobierz konfiguracjƒô"},"PAGE_ACTION:download:orderData":function(){return"Konfiguracja zlecenia"},"PAGE_ACTION:download:driverData":function(){return"Konfiguracja drivera"},"PAGE_ACTION:download:gprsData":function(){return"Konfiguracja GPRS"},"PAGE_ACTION:download:inputData":function(){return"Konfiguracja programatora"},"PAGE_ACTION:download:outputData":function(){return"Wynik programatora"},"PROPERTY:srcId":function(){return"ID instalacji"},"PROPERTY:srcTitle":function(){return"Tytu≈Ç instalacji"},"PROPERTY:srcIp":function(){return"IP instalacji"},"PROPERTY:srcUuid":function(){return"Klucz instalacji"},"PROPERTY:serviceTag":function(){return"Etykieta Service Tag"},"PROPERTY:driver":function(){return"Etykieta drivera"},"PROPERTY:gprs":function(){return"Etykieta GPRS"},"PROPERTY:led":function(){return"Etykieta LED"},"PROPERTY:startedAt":function(){return"Czas rozpoczƒôcia"},"PROPERTY:finishedAt":function(){return"Czas zako≈Ñczenia"},"PROPERTY:duration":function(){return"Czas trwania"},"PROPERTY:log":function(){return"Log"},"PROPERTY:result":function(){return"Wynik"},"PROPERTY:errorCode":function(){return"B≈ÇƒÖd"},"PROPERTY:exception":function(){return"Szczeg√≥≈Çy b≈Çƒôdu"},"filter:result:success":function(){return"Sukces"},"filter:result:failure":function(){return"Pora≈ºka"},"filter:placeholder:srcId":function(){return"Dowolne"},"filter:submit":function(){return"Filtruj wyniki"},"tab:log":function(){return"Przebieg programowania"},"tab:output":function(){return"Odpowied≈∫ programatora"},"tab:orderData":function(){return"Zlecenie"},"tab:driverData":function(){return"Driver"},"tab:gprsData":function(){return"GPRS"},"tab:inputData":function(){return"Programator"},"tab:outputData":function(){return"Wynik"},"log:CANCELLING":function(){return"Anulowanie programowania..."},"log:PROGRAMMING_STARTED":function(){return"Rozpoczynanie programowania..."},"log:READING_INPUT_TEMPLATE_FILE":function(t){return"Odczytywanie pliku szablonu konfiguracji programatora: <code>"+e.v(t,"inputTemplateFile")+"</code>"},"log:READING_INPUT_TEMPLATE_FILE_SUCCESS":function(t){return"Odczytano <code>"+e.v(t,"length")+"B</code> pliku szablonu konfiguracji programatora."},"log:PARSING_INPUT_TEMPLATE":function(){return"Przetwarzanie szablonu konfiguracji programatora..."},"log:PARSING_INPUT_TEMPLATE_SUCCESS":function(){return"Pomy≈õlnie przetworzono szablon konfiguracji programatora."},"log:PREPARING_INPUT_FILE":function(){return"Przygotowywanie konfiguracji programatora..."},"log:PREPARING_INPUT_FILE_SUCCESS":function(){return"Pomy≈õlnie przygotowano konfiguracjƒô programatora."},"log:PROGRAMMER_FILE_STARTED":function(t){return"Uruchamianie programatora na porcie DALI <code>"+e.v(t,"daliPort")+"</code>: <code>"+e.v(t,"programmerFile")+"</code>"},"log:PROGRAMMING_PROGRESS":function(t){return"<code>"+e.v(t,"percentage")+"%</code>"},"log:READING_OUTPUT_FILE":function(t){return"Odczytywanie pliku wynikowego programatora: <code>"+e.v(t,"outputFile")+"</code>"},"log:READING_OUTPUT_FILE_SUCCESS":function(t){return"Odczytano <code>"+e.v(t,"length")+"B</code> pliku wynikowego programatora."},"log:COPYING_OUTPUT_FILE":function(){return"Kopiowanie pliku wynikowego programatora..."},"log:COPYING_OUTPUT_FILE_SUCCESS":function(){return"Pomy≈õlnie skopiowano plik wynikowy programatora."},"log:VERIFICATION_STARTED":function(){return"Rozpoczynanie weryfikacji..."},"log:VERIFICATION_SKIPPED":function(){return"Pomijanie weryfikacji..."},"log:PROGRAMMING_SUCCESS":function(t){return"Pomy≈õlnie uko≈Ñczono programowanie w ciƒÖgu <code>"+e.v(t,"duration")+"</code>."},"log:PROGRAMMING_FAILURE":function(t){return"Zako≈Ñczono programowanie w ciƒÖgu <code>"+e.v(t,"duration")+"</code> z powodu b≈Çƒôdu: <code>"+e.v(t,"error")+"</code>"},"error:INPUT_TEMPLATE_FILE_MISSING":function(){return"Nie znaleziono pliku szablonu konfiguracji programatora"},"error:INPUT_TEMPLATE_FILE_FAILURE":function(){return"B≈ÇƒÖd poczas odczytywania pliku szablonu konfiguracji programatora."},"error:INPUT_TEMPLATE_FILE_TIMEOUT":function(){return"Up≈ÇynƒÖ≈Ç limit czas odczytywania pliku szablonu konfiguracji programatora."},"error:PARSING_INPUT_TEMPLATE_FAILURE":function(){return"B≈ÇƒÖd poczas przetwarzania szablonu konfiguracji programatora."},"error:PREPARING_INPUT_FILE_FAILURE":function(){return"B≈ÇƒÖd podczas zapisywania konfiguracji programatora."},"error:PROGRAMMER_FILE_UNSET":function(){return"Nie ustawiono ≈õcie≈ºki do pliku wykonywalnego programatora."},"error:PROGRAMMER_FILE_MISSING":function(){return"Nie znaleziono pliku wykonywalnego programatora."},"error:PROGRAMMER_FILE_FAILURE":function(){return"B≈ÇƒÖd podczas uruchamiania pliku wykonywalnego programatora."},"error:OUTPUT_FILE_MISSING":function(){return"Nie znaleziono pliku wynikowego programatora."},"error:COPYING_OUTPUT_FILE_FAILURE":function(){return"B≈ÇƒÖd podczas zapisywania pliku wynikowego programatora."},"error:VERIFICATION_INPUT_FAILURE":function(){return"B≈ÇƒÖd poczas kopiowania pliku wynikowego programatora do weryfikacji."},"error:VERIFICATION_ERROR":function(){return"Plik wynikowy programatora nie przeszed≈Ç weryfikacji."},"error:VERIFICATION_TIMEOUT":function(){return"Up≈ÇynƒÖ≈Ç limit czasu weryfikacji pliku wynikowego programatora."},"error:CANCELLED":function(){return"Programowanie anulowano."},"error:EXIT_CODE:-1":function(){return"CityTouchIPT (-1): b≈ÇƒÖd aplikacji."}}}),define("app/icpo/routes",["../router","../viewport","../user","i18n!app/nls/icpo"],function(t,e,n){"use strict";var r=n.auth("ICPO:VIEW");t.map("/icpo/results",r,function(t){e.loadPage(["app/icpo/pages/IcpoResultListPage"],function(e){return new e({rql:t.rql})})}),t.map("/icpo/results/:id",r,function(t){e.loadPage(["app/icpo/pages/IcpoResultDetailsPage"],function(e){return new e({modelId:t.params.id})})})}),define("app/nls/factoryLayout",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"bc:layout":function(){return"Monitoring"},"bc:list":function(){return"Production lines"},"bc:settings":function(){return"Settings"},"pa:settings":function(){return"Change settings"},"pa:layout:fullscreen":function(){return"Fullscreen mode"},"pa:layout:edit":function(){return"Edit layout"},"pa:layout:live":function(){return"Publish"},"prop:master":function(){return"Master"},"prop:leader":function(){return"Leader"},"prop:operator":function(){return"Operator"},"prop:shift":function(){return"Shift"},"prop:order":function(){return"Order"},"prop:nc12":function(){return"12NC"},"prop:downtime":function(){return"Downtime"},"prop:lastOrder":function(){return"Last order"},"prop:lastNc12":function(){return"Last 12NC"},"prop:lastDowntime":function(){return"Last downtime"},"prop:qty":function(){return"Quantities done"},qty:function(t){return e.v(t,"actual")+" of "+e.v(t,"planned")},"statuses:online":function(){return"Online"},"statuses:online:title":function(){return"Production lines connected to the server."},"statuses:offline":function(){return"Offline"},"statuses:offline:title":function(){return"Production lines not connected to the server. Data may be inaccurate."},"states:idle":function(){return"Idle"},"states:working":function(){return"Work"},"states:downtime":function(){return"Downtime"},"options:picker":function(){return"Pick production lines"},"options:save":function(){return"Save display options"},"options:saved":function(){return"Display options were saved successfully!"},"options:blacklisted":function(){return"Ignored"},"options:loadHistory":function(){return"Show history"},"options:resetHistory":function(){return"Show current data"},noProdLines:function(){return"No matching production lines :("},loadingHistoryData:function(){return"Loading data..."},"msg:historyDataRange":function(){return"Cannot load more than seven days of data at once :("},"picker:title":function(){return"Production line picker"},"picker:submit":function(){return"Pick"},"settings:tab:blacklist":function(){return"Ignored org units"},"settings:tab:divisionColors":function(){return"Division colors"},"settings:tab:other":function(){return"Other"},"settings:extendedDowntimeDelay":function(){return"Extended downtime [min]"}},pl:!0}}),define("app/nls/pl/factoryLayout",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"bc:layout":function(){return"Monitoring"},"bc:layout:edit":function(){return"Edycja uk≈Çadu fabryki"},"bc:list":function(){return"Linie produkcyjne"},"bc:settings":function(){return"Ustawienia"},"pa:settings":function(){return"Zmie≈Ñ ustawienia"},"pa:layout:fullscreen":function(){return"Tryb pe≈Çnoekranowy"},"pa:layout:edit":function(){return"Edytuj uk≈Çad fabryki"},"pa:layout:live":function(){return"Publikuj"},"prop:master":function(){return"Mistrz"},"prop:leader":function(){return"Lider"},"prop:operator":function(){return"Operator"},"prop:shift":function(){return"Zmiana"},"prop:order":function(){return"Zlecenie"},"prop:nc12":function(){return"12NC"},"prop:downtime":function(){return"Przest√≥j"},"prop:lastOrder":function(){return"Ostatnie zlecenie"},"prop:lastNc12":function(){return"Ostatnie 12NC"},"prop:lastDowntime":function(){return"Ostatni przest√≥j"},"prop:qty":function(){return"Wykonane ilo≈õci"},qty:function(t){return e.v(t,"actual")+" z "+e.v(t,"planned")},"statuses:online":function(){return"Online"},"statuses:online:title":function(){return"Linie produkcyjne z aktywnym po≈ÇƒÖczeniem do serwera."},"statuses:offline":function(){return"Offline"},"statuses:offline:title":function(){return"Linie produkcyjne niepo≈ÇƒÖczone z serwerem. Dane mogƒÖ byƒá nieaktualne."},"states:idle":function(){return"Bezczynno≈õƒá"},"states:working":function(){return"Praca"},"states:downtime":function(){return"Przest√≥j"},"options:picker":function(){return"Wybierz linie produkcyjne"},"options:save":function(){return"Zapisz opcje wy≈õwietlania"},"options:saved":function(){return"Opcje wy≈õwietlania zapisane!"},"options:blacklisted":function(){return"Ignorowane"},"options:loadHistory":function(){return"Poka≈º historiƒô"},"options:resetHistory":function(){return"Poka≈º aktualne dane"},noProdLines:function(){return"Brak pasujƒÖcych linii produkcyjnych :("},loadingHistoryData:function(){return"≈Åadowanie danych..."},"msg:historyDataRange":function(){return"Nie mo≈ºna pobraƒá danych z wiƒôcej ni≈º siedmiu dni na raz :("},"picker:title":function(){return"Wybieranie linii produkcyjnych"},"picker:submit":function(){return"Wybierz"},"settings:tab:blacklist":function(){return"Ignorowane jednostki org."},"settings:tab:divisionColors":function(){return"Kolory wydzia≈Ç√≥w"},"settings:tab:other":function(){return"Inne"},"settings:extendedDowntimeDelay":function(){return"D≈Çugi przest√≥j [min]"}}}),define("app/factoryLayout/routes",["../user","../router","../viewport","i18n!app/nls/factoryLayout"],function(t,e,n){"use strict";e.map("/factoryLayout",function(){e.replace("/factoryLayout/default")}),e.map("/factoryLayout/:id",function(){n.loadPage(["app/factoryLayout/productionState","app/factoryLayout/pages/FactoryLayoutPage"],function(t,e){return new e({model:t})})}),e.map("/factoryLayout/:id;edit",function(t){n.loadPage(["app/factoryLayout/FactoryLayout","app/factoryLayout/pages/FactoryLayoutEditPage"],function(e,n){return new n({model:new e({_id:t.params.id})})})}),e.map("/factoryLayout;list",function(t){n.loadPage(["app/factoryLayout/productionState","app/factoryLayout/ProdLineStateDisplayOptions","app/factoryLayout/pages/ProdLineStateListPage"],function(e,n,r){return new r({model:e,displayOptions:n.fromQuery(t.query)})})}),e.map("/factoryLayout;settings",t.auth("FACTORY_LAYOUT:MANAGE"),function(t){n.loadPage(["app/factoryLayout/productionState","app/factoryLayout/pages/FactoryLayoutSettingsPage"],function(e,n){return new n({initialTab:t.query.tab,model:e})})})}),define("app/data/colorFactory",[],function(){"use strict";function t(){return"#"+(16777216+16777215*Math.random()).toString(16).substr(1,6)}var e=["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a","#aaff00","#00aaff","#ffaa00","#00ffaa","#aa00ff","#ff00aa","#4572A7","#AA4643","#89A54E","#80699B","#3D96AE","#DB843D","#92A8CD","#A47D7C","#B5CA92","#666666","#809FFF","#9F80FF","#DF80FF","#FF80DF","#FF809F","#FF9F80","#FFDF80","#DFFF80","#9FFF80","#80FF9F","#80FFDF","#80DFFF","#4271FF","#0544FF","#FFD042","#FFC105","#3366FF","#6633FF","#CC33FF","#FF33CC","#FF3366","#FF6633","#FFCC33","#CCFF33","#66FF33","#33FF66","#33FFCC","#33CCFF","#003DF5","#002EB8","#F5B800","#B88A00","#0039E6","#3900E6","#AC00E6","#E600AC","#E60039","#E63900","#E6AC00","#ACE600","#39E600","#00E639","#00E6AC","#00ACE6","#245BFF","#6188FF","#FFC824","#FFD761"],n={};return{getColor:function(r,i){return"undefined"==typeof n[r]&&(n[r]={free:[].concat(e),assigned:{}}),r=n[r],"string"==typeof r.assigned[i]?r.assigned[i]:(r.assigned[i]=r.free.length?r.free.shift():t(),r.assigned[i])}}}),define("app/licenses/util/createLicenseFeaturesSerializer",["app/data/colorFactory"],function(t){"use strict";function e(e){var n=t.getColor("LICENSES",e);return'<span class="label license-feature" style="background: '+n+'">'+e+"</span>"}return function(t){for(var n=[],r={},i=0;i<t.length;++i){var o=Math.pow(2,i);n.push(o),r[o]=e(t[i])}return function(t){for(var e=[],i=0;i<n.length;++i){var o=n[i];t&o&&e.push(r[o])}return e.join(" ")}}}),define("app/xiconf/util/serializeXiconfLicenseFeatures",["app/licenses/util/createLicenseFeaturesSerializer"],function(t){"use strict";return t(["wmes","sol","t24vdc","led","gprs","glp2","fl","ft"])}),define("app/icpo/util/serializeIcpoLicenseFeatures",["app/licenses/util/createLicenseFeaturesSerializer"],function(t){"use strict";return t(["wmes"])}),define("app/licenses/License",["../i18n","../time","../core/Model","../xiconf/util/serializeXiconfLicenseFeatures","../icpo/util/serializeIcpoLicenseFeatures"],function(t,e,n,r,i){"use strict";var o={"walkner-xiconf":r,"walkner-icpo":i};return n.extend({urlRoot:"/licenses",clientUrlRoot:"#licenses",topicPrefix:"licenses",privilegePrefix:"LICENSES",nlsDomain:"licenses",serialize:function(){var n=this.toJSON();return n.appName=t("licenses","app:"+n.appId),n.date=e.format(n.date,"YYYY-MM-DD"),n.expireDate=n.expireDate?e.format(n.expireDate,"YYYY-MM-DD"):"-",n.features=this.serializeFeatures(),n},serializeFeatures:function(){var t=o[this.get("appId")],e=this.get("features");return t?t(e):e?e.toString():"-"}})}),define("app/licenses/LicenseCollection",["../core/Collection","./License"],function(t,e){"use strict";return t.extend({model:e,rqlQuery:"limit(15)&sort(expireDate)"})}),define("app/licenses/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","./LicenseCollection","./License","i18n!app/nls/licenses"],function(t,e,n,r,i,o){"use strict";var s=n.auth("DICTIONARIES:VIEW"),a=n.auth("LICENSES:MANAGE");t.map("/licenses",s,function(t){e.loadPage(["app/core/pages/FilteredListPage","app/licenses/views/LicenseFilterView","app/licenses/views/LicenseListView"],function(e,n,r){return new e({FilterView:n,ListView:r,collection:new i(null,{rqlQuery:t.rql})})})}),t.map("/licenses/:id",function(t){e.loadPage(["app/core/pages/DetailsPage","app/licenses/templates/details"],function(e,n){return new e({detailsTemplate:n,model:new o({_id:t.params.id})})})}),t.map("/licenses;add",a,function(){e.loadPage(["app/core/pages/AddFormPage","app/licenses/views/LicenseFormView"],function(t,e){return new t({FormView:e,model:new o})})}),t.map("/licenses/:id;edit",a,function(t){e.loadPage(["app/core/pages/EditFormPage","app/licenses/views/LicenseFormView"],function(e,n){return new e({FormView:n,model:new o({_id:t.params.id})})})}),t.map("/licenses/:id;delete",a,r.bind(null,o))}),define("app/kaizenSections/KaizenSection",["../core/Model"],function(t){"use strict";return t.extend({urlRoot:"/kaizen/sections",clientUrlRoot:"#kaizenSections",topicPrefix:"kaizen.sections",privilegePrefix:"KAIZEN:DICTIONARIES",nlsDomain:"kaizenSections",labelAttribute:"name",defaults:{}})}),define("app/kaizenSections/KaizenSectionCollection",["../core/Collection","./KaizenSection"],function(t,e){"use strict";return t.extend({model:e,comparator:"position"})}),define("app/kaizenAreas/KaizenArea",["../core/Model"],function(t){"use strict";return t.extend({urlRoot:"/kaizen/areas",clientUrlRoot:"#kaizenAreas",topicPrefix:"kaizen.areas",privilegePrefix:"KAIZEN:DICTIONARIES",nlsDomain:"kaizenAreas",labelAttribute:"name",defaults:{}})}),define("app/kaizenAreas/KaizenAreaCollection",["../core/Collection","./KaizenArea"],function(t,e){"use strict";return t.extend({model:e,comparator:"position"})}),define("app/kaizenCategories/KaizenCategory",["../i18n","../core/Model"],function(t,e){"use strict";return e.extend({urlRoot:"/kaizen/categories",clientUrlRoot:"#kaizenCategories",topicPrefix:"kaizen.categories",privilegePrefix:"KAIZEN:DICTIONARIES",nlsDomain:"kaizenCategories",labelAttribute:"name",defaults:{},serialize:function(){var e=this.toJSON();return e.description||(e.description="-"),e.inNearMiss=t("core","BOOL:"+this.get("inNearMiss")),e.inSuggestion=t("core","BOOL:"+this.get("inSuggestion")),e}})}),define("app/kaizenCategories/KaizenCategoryCollection",["../core/Collection","./KaizenCategory"],function(t,e){"use strict";return t.extend({model:e,comparator:"position",inNearMiss:function(){return this.filter(function(t){return t.get("inNearMiss")})},inSuggestion:function(){return this.filter(function(t){return t.get("inSuggestion")})}})}),define("app/kaizenCauses/KaizenCause",["../core/Model"],function(t){"use strict";return t.extend({urlRoot:"/kaizen/causes",clientUrlRoot:"#kaizenCauses",topicPrefix:"kaizen.causes",privilegePrefix:"KAIZEN:DICTIONARIES",nlsDomain:"kaizenCauses",labelAttribute:"name",defaults:{},serialize:function(){var t=this.toJSON();return t.description||(t.description="-"),t}})}),define("app/kaizenCauses/KaizenCauseCollection",["../core/Collection","./KaizenCause"],function(t,e){"use strict";return t.extend({model:e,comparator:"position"})}),define("app/kaizenRisks/KaizenRisk",["../core/Model"],function(t){"use strict";return t.extend({urlRoot:"/kaizen/risks",clientUrlRoot:"#kaizenRisks",topicPrefix:"kaizen.risks",privilegePrefix:"KAIZEN:DICTIONARIES",nlsDomain:"kaizenRisks",labelAttribute:"name",defaults:{},serialize:function(){var t=this.toJSON();return t.description||(t.description="-"),t}})}),define("app/kaizenRisks/KaizenRiskCollection",["../core/Collection","./KaizenRisk"],function(t,e){"use strict";return t.extend({model:e,comparator:"position"})}),define("app/kaizenOrders/dictionaries",["jquery","../broker","../pubsub","../user","../kaizenSections/KaizenSectionCollection","../kaizenAreas/KaizenAreaCollection","../kaizenCategories/KaizenCategoryCollection","../kaizenCauses/KaizenCauseCollection","../kaizenRisks/KaizenRiskCollection"],function(t,e,n,r,i,o,s,a,u){"use strict";function c(){h=null,null!==f&&(f.destroy(),f=null,m=null),_.loaded=!1,_.types=[],_.statuses=[],_.sections.reset(),_.areas.reset(),_.categories.reset(),_.causes.reset(),_.risks.reset()}function l(t,n){var r=n.split("."),i=_[r[1]];if(i){switch(r[1]){case"added":i.add(t.model);break;case"edited":var o=i.get(t.model._id);o&&o.set(t.model);break;case"deleted":i.remove(i.get(t.model._id))}e.publish(n,t)}}function p(t){e.publish("kaizen.orders.seen",t.orderId)}var d=null,h=null,f=null,m=null,_={multiType:!!window.KAIZEN_MULTI,types:[],statuses:[],sections:new i,areas:new o,categories:new s,causes:new a,risks:new u,loaded:!1,load:function(){return null!==h&&(clearTimeout(h),h=null),_.loaded?null:null!==d?d:(d=t.ajax({url:"/kaizen/dictionaries"}),d.done(function(t){_.loaded=!0,_.types=t.types,_.statuses=t.statuses,_.sections.reset(t.sections),_.areas.reset(t.areas),_.categories.reset(t.categories),_.causes.reset(t.causes),_.risks.reset(t.risks)}),d.fail(c),d.always(function(){d=null}),f=n.sandbox(),f.subscribe("kaizen.sections.**",l),f.subscribe("kaizen.areas.**",l),f.subscribe("kaizen.categories.**",l),f.subscribe("kaizen.causes.**",l),f.subscribe("kaizen.risks.**",l),m=f.subscribe("kaizen.orders.seen."+r.data._id,p),d)},unload:function(){null!==h&&clearTimeout(h),h=setTimeout(c,3e4)},getLabel:function(t,e){if(!_[t])return e;var n=_[t].get(e);return n?n.getLabel():e}};return e.subscribe("user.reloaded",function(){m&&(m.cancel(),m=null),f&&(m=f.subscribe("kaizen.orders.seen."+r.data._id,p))}),_}),define("app/kaizenOrders/KaizenOrder",["underscore","../i18n","../time","../user","../core/Model","./dictionaries","app/core/templates/userInfo"],function(t,e,n,r,i,o,s){"use strict";var a=["kaizenStartDate","kaizenFinishDate"],u=["createdAt","updatedAt","confirmedAt"],c=["creator","updater","confirmer"],l=["nearMissOwners","suggestionOwners","kaizenOwners"];return i.extend({urlRoot:"/kaizen/orders",clientUrlRoot:"#kaizenOrders",topicPrefix:"kaizen.orders",privilegePrefix:"KAIZEN",nlsDomain:"kaizenOrders",labelAttribute:"rid",defaults:function(){return{status:"new",types:window.KAIZEN_MULTI?[]:["nearMiss"],eventDate:new Date}},initialize:function(){this.on("reset change",this.prepareUsers),this.prepareUsers()},isMulti:function(){var t=this.get("types");return t.length>1||"nearMiss"!==t[0]},serialize:function(t){var r=t&&t.longDateTime,i=r?"LL":"YY-MM-DD",p=r?"LLLL":"YY-MM-DD, HH:mm:ss",d=this.toJSON();return d.types=d.types.map(function(t){return'<span class="label kaizenOrders-label-'+t+'" title="'+e("kaizenOrders","type:"+t)+'">'+e("kaizenOrders","type:label:"+t)+"</span>"}).join(" "),d.status=e("kaizenOrders","status:"+d.status),d.eventDate=d.eventDate?n.format(d.eventDate,e("kaizenOrders","PROPERTY:eventDate:"+(r?"long":"short"))):null,a.forEach(function(t){d[t]=d[t]?n.format(d[t],i):null}),u.forEach(function(t){d[t]=d[t]?n.format(d[t],p):null}),d.section=o.sections.getLabel(d.section),d.area=o.areas.getLabel(d.area),d.nearMissCategory=o.categories.getLabel(d.nearMissCategory),d.suggestionCategory=o.categories.getLabel(d.suggestionCategory),d.cause=o.causes.getLabel(d.cause),d.risk=o.risks.getLabel(d.risk),d.kaizenDuration=d.kaizenDuration?n.toString(d.kaizenDuration):null,c.forEach(function(t){d[t]=s({userInfo:d[t]})}),l.forEach(function(t){d[t]=(d[t]||[]).map(function(t){return t.rendered})}),Array.isArray(d.attachments)||(d.attachments=[]),d},serializeRow:function(){var n=this.serialize();n.observer.notify&&t.isEmpty(n.observer.changes)&&(n.className="is-changed");var r=n.owners;return n.owners=1===r.length?r[0].rendered:e("kaizenOrders","LIST:owners",{first:r[0].rendered,count:r.length-1}),n},serializeDetails:function(){var e=this.serialize({longDateTime:!0});return e.changed=e.observer.changes||{},delete e.changed.all,e.changed.all=e.observer.notify&&t.isEmpty(e.observer.changes),e},isCreator:function(){return this.attributes.creator&&this.attributes.creator.id===r.data._id},isConfirmer:function(){return this.attributes.confirmer&&this.attributes.confirmer.id===r.data._id},isNotSeen:function(){return this.attributes.observer.notify},canEdit:function(){if(r.isAllowedTo("KAIZEN:MANAGE"))return!0;var e=this.attributes;return"finished"===e.status||"cancelled"===e.status?!1:this.isCreator()||this.isConfirmer()?!0:t.any(l,function(n){return t.any(e[n],function(t){return t.id===r.data._id})})},canDelete:function(){return r.isAllowedTo("KAIZEN:MANAGE")||"new"===this.get("status")&&this.isCreator()},markAsSeen:function(){var t=this.attributes.observer;if(t.notify){t.lastSeenAt=new Date,t.notify=!1,t.changes={};var e=this.attributes.observers;this.attributes.observers=null,this.set("observers",e),this.trigger("seen")}},prepareUsers:function(){this.attributes.observers&&this.prepareObserver(),this.attributes.nearMissOwners&&this.prepareOwners()},prepareObserver:function(){var e=this.get("observers")||[],n=t.find(e,function(t){return t.user.id===r.data._id});this.attributes.observer=n||{user:{id:r.data._id,label:r.getLabel()},role:"viewer",lastSeenAt:null,notify:!1,changes:{}},n&&"string"==typeof n.lastSeenAt&&(n.lastSeenAt=new Date(n.lastSeenAt)),this.trigger("change:observer")},prepareOwners:function(){var e=this.attributes,n={};l.forEach(function(t){e[t]=(e[t]||[]).map(function(t){return t.rendered=s({userInfo:t}),n[t.id]||(n[t.id]=t),t})}),e.owners=t.values(n),this.trigger("change:owners")}},{DATE_PROPERTIES:a})}),define("app/kaizenOrders/KaizenOrderCollection",["../core/Collection","./KaizenOrder"],function(t,e){"use strict";return t.extend({model:e,rqlQuery:"exclude(changes)&limit(15)&sort(-eventDate)"})}),define("app/kaizenOrders/KaizenOrderReport",["underscore","../time","../core/Model","../data/colorFactory","./dictionaries"],function(t,e,n,r,i){"use strict";var o=["type","status","section","area","cause","risk","nearMissCategory"],s={section:"sections",area:"areas",cause:"causes",risk:"risks",nearMissCategory:"categories",suggestionCategory:"categories"};return window.KAIZEN_MULTI&&o.push("suggestionCategory"),n.extend({urlRoot:"/kaizen/report",defaults:function(){return{from:0,to:0,interval:"month"}
},initialize:function(){},fetch:function(e){return t.isObject(e)||(e={}),e.data=t.extend(e.data||{},{from:this.get("from"),to:this.get("to"),interval:this.get("interval")}),n.prototype.fetch.call(this,e)},genClientUrl:function(){return"/kaizenReport?from="+this.get("from")+"&to="+this.get("to")+"&interval="+this.get("interval")},parse:function(e){var n=this,r=e.totals,s=r.count,a={type:{rows:this.prepareTypeRows(r),series:this.prepareTypeSeries()},status:{rows:this.prepareRows(s,r.status,"status"),series:{}}};return t.forEach(o,function(t){a[t]||(a[t]={rows:n.prepareRows(s,r[t],t),series:{}})}),t.forEach(e.groups,function(e){var r;"number"==typeof e?(r=e,e={key:r,type:{}}):r=e.key;var s=a.type.series;s.nearMiss.data.push({x:r,y:e.type.nearMiss||null}),i.multiType&&(s.suggestion.data.push({x:r,y:e.type.suggestion||null}),s.kaizen.data.push({x:r,y:e.type.kaizen||null})),t.forEach(o,function(t){n.createSeriesFromRows(t,a,e)})},this),a},prepareTypeRows:function(t){if(!i.multiType)return[{id:"nearMiss",abs:t.type.nearMiss,rel:t.type.nearMiss/t.count,color:"#d9534f"}];var e=t.type.nearMiss+t.type.suggestion+t.type.kaizen;return[{id:"singleTotal",abs:t.count,rel:1},{id:"multiTotal",abs:e,rel:1},{id:"nearMiss",abs:t.type.nearMiss,rel:t.type.nearMiss/e,color:"#d9534f"},{id:"suggestion",abs:t.type.suggestion,rel:t.type.suggestion/e,color:"#f0ad4e"},{id:"kaizen",abs:t.type.kaizen,rel:t.type.kaizen/e,color:"#5cb85c"}]},prepareTypeSeries:function(){var t={nearMiss:{data:[],color:"#d9534f"}};return i.multiType&&(t.suggestion={data:[],color:"#f0ad4e"},t.kaizen={data:[],color:"#5cb85c"}),t},prepareRows:function(t,e,n){var o=s[n];return e.map(function(e){return{id:e[0],abs:e[1],rel:e[1]/t,color:r.getColor(n,e[0]),label:o?i.getLabel(o,e[0]):void 0}})},createSeriesFromRows:function(e,n,r){var i=n[e].series;t.forEach(n[e].rows,function(t){i[t.id]||(i[t.id]={name:t.label,data:[],color:t.color}),i[t.id].data.push({x:r.key,y:r[e]?r[e][t.id]||null:null})})}},{TABLE_AND_CHART_METRICS:o})}),define("app/kaizenOrders/templates/filter",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="well filter-form kaizenOrders-filter">\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-from">'),__output.push(t("core","filter:date:from")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-from" class="form-control" name="from" type="date" placeholder="'),__output.push(t("core","placeholder:date")),__output.push('">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-to">'),__output.push(t("core","filter:date:to")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-to" class="form-control" name="to" type="date" placeholder="'),__output.push(t("core","placeholder:date")),__output.push('">\n  </div>\n  <div class="form-group">\n    <div class="filter-radioLabels">\n      <label>\n        <input name="userType" type="radio" value="mine">\n        '),__output.push(t("kaizenOrders","filter:user:mine")),__output.push('\n      </label><label>\n        <input name="userType" type="radio" value="unseen">\n        '),__output.push(t("kaizenOrders","filter:user:unseen")),__output.push('\n      </label><label>\n        <input name="userType" type="radio" value="owner">\n        '),__output.push(t("kaizenOrders","filter:user:owner")),__output.push('\n      </label><label>\n        <input name="userType" type="radio" value="others">\n        '),__output.push(t("kaizenOrders","filter:user:others")),__output.push('\n      </label>\n    </div>\n    <input id="'),__output.push(idPrefix),__output.push('-user" name="user" type="text">\n  </div>\n  '),multi&&(__output.push('\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-types">'),__output.push(t("kaizenOrders","PROPERTY:types")),__output.push('</label>\n    <select id="'),__output.push(idPrefix),__output.push('-types" name="types" class="form-control" size="1">\n      <option></option>\n      '),types.forEach(function(e){__output.push('\n      <option value="'),__output.push(e),__output.push('">'),__output.push(t("kaizenOrders","type:short:"+e)),__output.push("</option>\n      ")}),__output.push("\n    </select>\n  </div>\n  ")),__output.push('\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-status">'),__output.push(t("kaizenOrders","PROPERTY:status")),__output.push('</label>\n    <select id="'),__output.push(idPrefix),__output.push('-status" name="status" class="form-control" size="1">\n      <option></option>\n      <option value="open">'),__output.push(t("kaizenOrders","status:open")),__output.push("</option>\n      "),statuses.forEach(function(e){__output.push('\n      <option value="'),__output.push(e),__output.push('">'),__output.push(t("kaizenOrders","status:"+e)),__output.push("</option>\n      ")}),__output.push('\n    </select>\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-area">'),__output.push(t("kaizenOrders","PROPERTY:area")),__output.push('</label>\n    <select id="'),__output.push(idPrefix),__output.push('-area" name="area" class="form-control" size="1">\n      <option></option>\n      '),areas.forEach(function(t){__output.push('\n      <option value="'),__output.push(t._id),__output.push('">'),__output.push(escape(t.name)),__output.push("</option>\n      ")}),__output.push('\n    </select>\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-cause">'),__output.push(t("kaizenOrders","filter:cause")),__output.push('</label>\n    <select id="'),__output.push(idPrefix),__output.push('-cause" name="cause" class="form-control" size="1">\n      <option></option>\n      '),causes.forEach(function(t){__output.push('\n      <option value="'),__output.push(t._id),__output.push('">'),__output.push(escape(t.name)),__output.push("</option>\n      ")}),__output.push('\n    </select>\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-risk">'),__output.push(t("kaizenOrders","PROPERTY:risk")),__output.push('</label>\n    <select id="'),__output.push(idPrefix),__output.push('-risk" name="risk" class="form-control" size="1">\n      <option></option>\n      '),risks.forEach(function(t){__output.push('\n      <option value="'),__output.push(t._id),__output.push('">'),__output.push(escape(t.name)),__output.push("</option>\n      ")}),__output.push('\n    </select>\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-category">'),__output.push(t("kaizenOrders","PROPERTY:category")),__output.push('</label>\n    <select id="'),__output.push(idPrefix),__output.push('-category" name="category" class="form-control" size="1">\n      <option></option>\n      '),multi?(__output.push('\n      <optgroup label="'),__output.push(t("kaizenOrders","type:nearMiss")),__output.push('">\n        '),nearMissCategories.forEach(function(t){__output.push('\n        <option value="nearMiss.'),__output.push(t._id),__output.push('">'),__output.push(escape(t.name)),__output.push("</option>\n        ")}),__output.push('\n      </optgroup>\n      <optgroup label="'),__output.push(t("kaizenOrders","type:suggestion")),__output.push('">\n        '),suggestionCategories.forEach(function(t){__output.push('\n        <option value="suggestion.'),__output.push(t._id),__output.push('">'),__output.push(escape(t.name)),__output.push("</option>\n        ")}),__output.push("\n      </optgroup>\n      ")):(__output.push("\n      "),nearMissCategories.forEach(function(t){__output.push('\n      <option value="nearMiss.'),__output.push(t._id),__output.push('">'),__output.push(escape(t.name)),__output.push("</option>\n      ")}),__output.push("\n      ")),__output.push('\n    </select>\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-section">'),__output.push(t("kaizenOrders","PROPERTY:section")),__output.push('</label>\n    <select id="'),__output.push(idPrefix),__output.push('-section" name="section" class="form-control" size="1">\n      <option></option>\n      '),sections.forEach(function(t){__output.push('\n      <option value="'),__output.push(t._id),__output.push('">'),__output.push(escape(t.name)),__output.push("</option>\n      ")}),__output.push("\n    </select>\n  </div>\n  "),__output.push(renderLimit()),__output.push('\n  <div class="form-group filter-actions">\n    <button type="submit" class="btn btn-default"><i class="fa fa-filter"></i><span>'),__output.push(escape(t("kaizenOrders","filter:submit"))),__output.push("</span></button>\n  </div>\n</form>\n");return __output.join("")}}),define("app/kaizenOrders/views/KaizenOrderFilterView",["underscore","app/time","app/core/views/FilterView","app/users/util/setUpUserSelect2","../dictionaries","app/kaizenOrders/templates/filter"],function(t,e,n,r,i,o){"use strict";return n.extend({template:o,events:t.extend({'change input[name="userType"]':"toggleUserSelect2","keyup select":function(t){return 27===t.keyCode?(t.target.selectedIndex=-1,!1):void 0},"dblclick select":function(t){t.target.selectedIndex=-1}},n.prototype.events),defaultFormData:function(){return{types:[].concat(i.types),status:[].concat(i.statuses),section:null,area:null,category:null,risk:null,cause:null,userType:"others",user:null,from:"",to:""}},termToForm:{types:function(t,e,n){n[t]=e.args[1]},nearMissCategory:function(t,e,n){n.category="nearMiss."+e.args[1]},suggestionCategory:function(t,e,n){n.category="suggestion."+e.args[1]},"owners.id":function(t,e,n){n.userType="owner",n.user=e.args[1]},"observers.user.id":function(t,e,n){"mine"===e.args[1]?(n.userType="mine",n.user=null):"unseen"===e.args[1]?(n.userType="unseen",n.user=null):(n.userType="others",n.user=e.args[1])},eventDate:function(t,n,r){r["ge"===n.name?"from":"to"]=e.format(n.args[1],"YYYY-MM-DD")},status:function(t,e,n){n.status="in"===e.name?"open":e.args[1]},section:"types",area:"types",risk:"types",cause:"types"},serialize:function(){return t.extend(n.prototype.serialize.call(this),{multi:!!window.KAIZEN_MULTI,types:i.types,statuses:i.statuses,sections:i.sections.toJSON(),areas:i.areas.toJSON(),nearMissCategories:t.invoke(i.categories.inNearMiss(),"toJSON"),suggestionCategories:t.invoke(i.categories.inSuggestion(),"toJSON"),risks:i.risks.toJSON(),causes:i.causes.toJSON()})},serializeFormToQuery:function(t){var n=e.getMoment(this.$id("from").val(),"YYYY-MM-DD"),r=e.getMoment(this.$id("to").val(),"YYYY-MM-DD"),i=this.$id("category").val().split("."),o=this.$('input[name="userType"]:checked').val(),s=this.$id("user").val(),a=this.$id("status").val();n.isValid()&&t.push({name:"ge",args:["eventDate",n.valueOf()]}),r.isValid()&&(r.valueOf()===n.valueOf()&&this.$id("to").val(r.add(1,"days").format("YYYY-MM-DD")),t.push({name:"lt",args:["eventDate",r.valueOf()]})),2===i.length&&t.push({name:"eq",args:[i[0]+"Category",i[1]]}),"mine"===o||"unseen"===o?t.push({name:"eq",args:["observers.user.id",o]}):s&&t.push({name:"eq",args:["owner"===o?"owners.id":"observers.user.id",s]}),"open"===a?t.push({name:"in",args:["status",["new","accepted","todo","inProgress","paused"]]}):a&&t.push({name:"eq",args:["status",a]}),["types","section","area","risk","cause"].forEach(function(e){var n=this.$id(e).val();n&&t.push({name:"eq",args:[e,n]})},this)},afterRender:function(){n.prototype.afterRender.call(this),r(this.$id("user"),{view:this}),this.toggleUserSelect2()},toggleUserSelect2:function(){var t=this.$('input[name="userType"]:checked').val();this.$id("user").select2("enable","others"===t||"owner"===t)}})}),define("app/kaizenOrders/views/KaizenOrderListView",["app/i18n","app/core/views/ListView"],function(t,e){"use strict";function n(t){return t.observer.notify&&t.observer.changes&&t.observer.changes[this.id]?'class="is-changed"':""}return e.extend({className:"kaizenOrders-list is-clickable",serializeColumns:function(){var e=[{id:"rid",className:"is-min is-number"}];return window.KAIZEN_MULTI&&e.push("types"),e.push({id:"status",tdAttrs:n},{id:"subject",tdAttrs:n,label:t("kaizenOrders","PROPERTY:subjectAndDescription")},{id:"eventDate",tdAttrs:n},{id:"area",tdAttrs:n},{id:"cause",tdAttrs:n},{id:"risk",tdAttrs:n},{id:"nearMissCategory",tdAttrs:n}),window.KAIZEN_MULTI&&e.push({id:"suggestionCategory",tdAttrs:n}),e.push({id:"section",tdAttrs:n},{id:"confirmer",tdAttrs:n},{id:"owners",label:t("kaizenOrders","PROPERTY:nearMissOwners")}),e},serializeActions:function(){var t=this.collection;return function(n){var r=t.get(n._id),i=[e.actions.viewDetails(r)];return r.canEdit()&&i.push(e.actions.edit(r)),r.canDelete()&&i.push(e.actions["delete"](r)),i}},afterRender:function(){e.prototype.afterRender.call(this);var t=this;this.$el.popover({selector:".list-item > td",container:this.el,trigger:"hover",placement:function(t,e){return"subject"===e.dataset.id?"auto right":"auto left"},html:!0,content:function(){var e=t.collection.get(this.parentNode.dataset.id);return"subject"===this.dataset.id?e.get("description"):"owners"===this.dataset.id?t.serializeOwnersPopoverContent(e):void 0}})},serializeOwnersPopoverContent:function(t){var e=t.get("owners");if(e.length<=1)return void 0;for(var n='<ul class="kaizenOrders-list-owners">',r=0;r<e.length;++r)n+="<li>"+e[r].rendered;return n+="</ul>"}})}),define("app/kaizenOrders/pages/KaizenOrderListPage",["app/i18n","app/core/pages/FilteredListPage","app/core/util/pageActions","../dictionaries","../views/KaizenOrderFilterView","../views/KaizenOrderListView"],function(t,e,n,r,i,o){"use strict";return e.extend({baseBreadcrumb:!0,FilterView:i,ListView:o,actions:function(e){var r=this.collection;return[n.jump(this,r),n["export"](e,this,this.collection,!1),{label:t.bound(r.getNlsDomain(),"PAGE_ACTION:add"),icon:"plus",href:r.genClientUrl("add")}]},load:function(t){return t(this.collection.fetch({reset:!0}),r.load())},destroy:function(){e.prototype.destroy.call(this),r.unload()},afterRender:function(){e.prototype.afterRender.call(this),r.load()}})}),define("app/kaizenOrders/templates/details",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="kaizenOrders-details">\n  <div class="panel panel-primary kaizenOrders-details-props">\n    <div class="panel-heading">\n      '),multi?(__output.push("\n      "),__output.push(escape(model.subject||t("kaizenOrders","PANEL:TITLE:details"))),__output.push("\n      ")):(__output.push("\n      "),__output.push(t("kaizenOrders","PANEL:TITLE:details")),__output.push("\n      ")),__output.push('\n    </div>\n    <div class="panel-details '),__output.push(model.changed.all?"is-changed":""),__output.push('">\n      <div class="row">\n        <div class="col-md-4">\n          <div class="props first">\n            <div class="prop">\n              '),multi?(__output.push('\n              <div class="prop-name '),__output.push(model.changed.types?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:types")),__output.push('</div>\n              <div class="prop-value">'),__output.push(model.types),__output.push("</div>\n              ")):(__output.push('\n              <div class="prop-name '),__output.push(model.changed.subject?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:subject")),__output.push('</div>\n              <div class="prop-value">'),__output.push(escape(model.subject)),__output.push("</div>\n              ")),__output.push('\n            </div>\n            <div class="prop">\n              <div class="prop-name '),__output.push(model.changed.status?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:status")),__output.push('</div>\n              <div class="prop-value">'),__output.push(model.status),__output.push('</div>\n            </div>\n            <div class="prop">\n              <div class="prop-name '),__output.push(model.changed.section?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:section")),__output.push('</div>\n              <div class="prop-value">'),__output.push(model.section),__output.push('</div>\n            </div>\n          </div>\n        </div>\n        <div class="col-md-4">\n          <div class="props">\n            <div class="prop">\n              <div class="prop-name">'),__output.push(t("kaizenOrders","PROPERTY:creator")),__output.push('</div>\n              <div class="prop-value">'),__output.push(model.creator),__output.push('</div>\n            </div>\n            <div class="prop">\n              <div class="prop-name">'),__output.push(t("kaizenOrders","PROPERTY:updater")),__output.push('</div>\n              <div class="prop-value">'),__output.push(model.updater),__output.push('</div>\n            </div>\n            <div class="prop">\n              <div class="prop-name '),__output.push(model.changed.confirmer?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:confirmer")),__output.push('</div>\n              <div class="prop-value">'),__output.push(model.confirmer),__output.push('</div>\n            </div>\n          </div>\n        </div>\n        <div class="col-md-4">\n          <div class="props">\n            <div class="prop">\n              <div class="prop-name">'),__output.push(t("kaizenOrders","PROPERTY:createdAt")),__output.push('</div>\n              <div class="prop-value">'),__output.push(model.createdAt),__output.push('</div>\n            </div>\n            <div class="prop">\n              <div class="prop-name">'),__output.push(t("kaizenOrders","PROPERTY:updatedAt")),__output.push('</div>\n              <div class="prop-value">'),__output.push(model.updatedAt),__output.push('</div>\n            </div>\n            <div class="prop">\n              <div class="prop-name">'),__output.push(t("kaizenOrders","PROPERTY:confirmedAt")),__output.push('</div>\n              <div class="prop-value">'),__output.push(model.confirmedAt||"-"),__output.push('</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="row kaizenOrders-details-types">\n    '),showNearMissPanel&&(__output.push("\n    "),function(){__output.push('<div class="col-md-'),__output.push(nearMissColumnSize),__output.push('">\n  <div class="panel panel-danger">\n    <div class="panel-heading">'),__output.push(t("kaizenOrders","type:nearMiss")),__output.push('</div>\n    <div class="panel-details '),__output.push(model.changed.all?"is-changed":""),__output.push('">\n      <div class="props first">\n        <div class="prop">\n          <div class="prop-name '),__output.push(model.changed.nearMissOwners?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:nearMissOwners")),__output.push('</div>\n          <div class="prop-value">\n            <ul>\n              '),model.nearMissOwners.forEach(function(t){__output.push("\n              <li>"),__output.push(t),__output.push("</li>\n              ")}),__output.push('\n            </ul>\n          </div>\n        </div>\n        <div class="prop">\n          <div class="prop-name '),__output.push(model.changed.eventDate?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:eventDate")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model.eventDate||"-"),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name '),__output.push(model.changed.area?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:area")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model.area||"-"),__output.push('</div>\n        </div>\n        <div class="prop" data-dictionary="causes" data-property="cause">\n          <div class="prop-name '),__output.push(model.changed.cause||model.changed.causeText?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:causeText")),__output.push(' <i class="fa fa-info-circle"></i></div>\n          <div class="prop-value">\n            '),model.cause||model.causeText?model.cause&&model.causeText?(__output.push("\n            <em>"),__output.push(model.cause),__output.push('</em><br>\n            <span class="text-lines">'),__output.push(escape(model.causeText)),__output.push("</span>\n            ")):model.cause?(__output.push("\n            "),__output.push(model.cause),__output.push("\n            ")):(__output.push("\n            "),__output.push(escape(model.causeText)),__output.push("\n            ")):__output.push("\n            -\n            "),__output.push('\n          </div>\n        </div>\n        <div class="prop" data-dictionary="risks" data-property="risk">\n          <div class="prop-name '),__output.push(model.changed.risk?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:risk")),__output.push(' <i class="fa fa-info-circle"></i></div>\n          <div class="prop-value">'),__output.push(model.risk||"-"),__output.push('</div>\n        </div>\n        <div class="prop" data-dictionary="categories" data-property="nearMissCategory">\n          <div class="prop-name '),__output.push(model.changed.nearMissCategory?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:nearMissCategory")),__output.push(' <i class="fa fa-info-circle"></i></div>\n          <div class="prop-value">'),__output.push(model.nearMissCategory||"-"),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name '),__output.push(model.changed.description?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:description")),__output.push('</div>\n          <div class="prop-value text-lines">'),__output.push(escape(model.description||"-")),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name '),__output.push(model.changed.correctiveMeasures?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:correctiveMeasures")),__output.push('</div>\n          <div class="prop-value text-lines">'),__output.push(escape(model.correctiveMeasures||"-")),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name '),__output.push(model.changed.preventiveMeasures?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:preventiveMeasures")),__output.push('</div>\n          <div class="prop-value text-lines">'),__output.push(escape(model.preventiveMeasures||"-")),__output.push("</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n")}(),__output.push("\n    ")),__output.push("\n    "),showSuggestionPanel&&(__output.push("\n    "),function(){__output.push('<div class="col-md-'),__output.push(suggestionColumnSize),__output.push('">\n  <div class="panel panel-warning">\n    <div class="panel-heading">'),__output.push(t("kaizenOrders","type:suggestion")),__output.push('</div>\n    <div class="panel-details '),__output.push(model.changed.all?"is-changed":""),__output.push('">\n      '),showNearMissPanel?(__output.push('\n      <div class="props first">\n        <div class="prop">\n          <div class="prop-name '),__output.push(model.changed.suggestionOwners?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:suggestionOwners")),__output.push('</div>\n          <div class="prop-value">\n            <ul>\n              '),model.suggestionOwners.forEach(function(t){__output.push("\n              <li>"),__output.push(t),__output.push("</li>\n              ")}),__output.push('\n            </ul>\n          </div>\n        </div>\n        <div class="prop" data-dictionary="categories" data-property="suggestionCategory">\n          <div class="prop-name '),__output.push(model.changed.suggestionCategory?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:suggestionCategory")),__output.push(' <i class="fa fa-info-circle"></i></div>\n          <div class="prop-value">'),__output.push(model.suggestionCategory||"-"),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name '),__output.push(model.changed.suggestion?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:suggestion")),__output.push('</div>\n          <div class="prop-value text-lines">'),__output.push(model.suggestion||"-"),__output.push("</div>\n        </div>\n      </div>\n      ")):(__output.push('\n      <div class="row">\n        <div class="col-md-6">\n          <div class="props first">\n            <div class="prop">\n              <div class="prop-name '),__output.push(model.changed.suggestionOwners?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:nearMissOwners")),__output.push('</div>\n              <div class="prop-value">\n                <ul>\n                  '),model.suggestionOwners.forEach(function(t){__output.push("\n                  <li>"),__output.push(t),__output.push("</li>\n                  ")}),__output.push('\n                </ul>\n              </div>\n            </div>\n            <div class="prop">\n              <div class="prop-name '),__output.push(model.changed.eventDate?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:eventDate")),__output.push('</div>\n              <div class="prop-value">'),__output.push(model.eventDate||"-"),__output.push('</div>\n            </div>\n            <div class="prop">\n              <div class="prop-name '),__output.push(model.changed.area?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:area")),__output.push('</div>\n              <div class="prop-value">'),__output.push(model.area||"-"),__output.push('</div>\n            </div>\n            <div class="prop" data-dictionary="causes" data-property="cause">\n              <div class="prop-name '),__output.push(model.changed.cause||model.changed.causeText?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:causeText")),__output.push(' <i class="fa fa-info-circle"></i></div>\n              <div class="prop-value">\n                '),model.cause||model.causeText?model.cause&&model.causeText?(__output.push("\n                <em>"),__output.push(model.cause),__output.push('</em><br>\n                <span class="text-lines">'),__output.push(escape(model.causeText)),__output.push("</span>\n                ")):model.cause?(__output.push("\n                "),__output.push(model.cause),__output.push("\n                ")):(__output.push("\n                "),__output.push(escape(model.causeText)),__output.push("\n                ")):__output.push("\n                -\n                "),__output.push('\n              </div>\n            </div>\n            <div class="prop" data-dictionary="risks" data-property="risk">\n              <div class="prop-name '),__output.push(model.changed.risk?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:risk")),__output.push(' <i class="fa fa-info-circle"></i></div>\n              <div class="prop-value">'),__output.push(model.risk||"-"),__output.push('</div>\n            </div>\n            <div class="prop" data-dictionary="categories" data-property="nearMissCategory">\n              <div class="prop-name '),__output.push(model.changed.nearMissCategory?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:nearMissCategory")),__output.push(' <i class="fa fa-info-circle"></i></div>\n              <div class="prop-value">'),__output.push(model.nearMissCategory||"-"),__output.push('</div>\n            </div>\n            <div class="prop" data-dictionary="categories" data-property="suggestionCategory">\n              <div class="prop-name '),__output.push(model.changed.suggestionCategory?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:suggestionCategory")),__output.push(' <i class="fa fa-info-circle"></i></div>\n              <div class="prop-value">'),__output.push(model.suggestionCategory||"-"),__output.push('</div>\n            </div>\n          </div>\n        </div>\n        <div class="col-md-6">\n          <div class="props">\n            <div class="prop">\n              <div class="prop-name '),__output.push(model.changed.description?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:description")),__output.push('</div>\n              <div class="prop-value text-lines">'),__output.push(model.description||"-"),__output.push('</div>\n            </div>\n            <div class="prop">\n              <div class="prop-name '),__output.push(model.changed.correctiveMeasures?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:correctiveMeasures")),__output.push('</div>\n              <div class="prop-value text-lines">'),__output.push(model.correctiveMeasures||"-"),__output.push('</div>\n            </div>\n            <div class="prop">\n              <div class="prop-name '),__output.push(model.changed.suggestion?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:suggestion")),__output.push('</div>\n              <div class="prop-value text-lines">'),__output.push(model.suggestion||"-"),__output.push("</div>\n            </div>\n          </div>\n        </div>\n      </div>\n      ")),__output.push("\n    </div>\n  </div>\n</div>")}(),__output.push("\n    ")),__output.push("\n    "),showKaizenPanel&&(__output.push("\n    "),function(){__output.push('<div class="col-md-'),__output.push(kaizenColumnSize),__output.push('">\n  <div class="panel panel-success">\n    <div class="panel-heading">'),__output.push(t("kaizenOrders","type:kaizen")),__output.push('</div>\n    <div class="panel-details '),__output.push(model.changed.all?"is-changed":""),__output.push('">\n      <div class="props first">\n        <div class="prop">\n          <div class="prop-name '),__output.push(model.changed.kaizenOwners?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:kaizenOwners")),__output.push('</div>\n          <div class="prop-value">\n            '),model.kaizenOwners.length?(__output.push("\n            <ul>\n              "),model.kaizenOwners.forEach(function(t){__output.push("\n              <li>"),__output.push(t),__output.push("</li>\n              ")}),__output.push("\n            </ul>\n            ")):__output.push("\n            -\n            "),__output.push('\n          </div>\n        </div>\n        <div class="prop">\n          <div class="prop-name '),__output.push(model.changed.kaizenStartDate?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:kaizenStartDate")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model.kaizenStartDate||"-"),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name '),__output.push(model.changed.kaizenFinishDate?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:kaizenFinishDate")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model.kaizenFinishDate||"-"),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name '),__output.push(model.changed.kaizenStartDate||model.changed.kaizenFinishDate?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:kaizenDuration")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model.kaizenDuration||"-"),__output.push("</div>\n        </div>\n        "),showSuggestionPanel||(__output.push('\n        <div class="prop">\n          <div class="prop-name '),__output.push(model.changed.suggestion?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:suggestion")),__output.push('</div>\n          <div class="prop-value text-lines">'),__output.push(model.suggestion||"-"),__output.push("</div>\n        </div>\n        ")),__output.push('\n        <div class="prop">\n          <div class="prop-name '),__output.push(model.changed.kaizenImprovements?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:kaizenImprovements")),__output.push('</div>\n          <div class="prop-value text-lines">'),__output.push(escape(model.kaizenImprovements||"-")),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name '),__output.push(model.changed.kaizenEffect?"is-changed":""),__output.push('">'),__output.push(t("kaizenOrders","PROPERTY:kaizenEffect")),__output.push('</div>\n          <div class="prop-value text-lines">'),__output.push(escape(model.kaizenEffect||"-")),__output.push("</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>")
}(),__output.push("\n    ")),__output.push('\n  </div>\n  <div class="kaizenOrders-details-tabs">\n    <ul class="nav nav-tabs">\n      <li class="active"><a href="#'),__output.push(idPrefix),__output.push('-attachments" data-toggle="tab" data-tab="attachments">'),__output.push(t("kaizenOrders","tab:attachments")),__output.push('</a></li>\n      <li><a href="#'),__output.push(idPrefix),__output.push('-observers" data-toggle="tab" data-tab="observers">'),__output.push(t("kaizenOrders","tab:observers")),__output.push('</a></li>\n    </ul>\n    <div class="tab-content">\n      <div class="tab-pane active" id="'),__output.push(idPrefix),__output.push('-attachments">'),function(){__output.push('<table class="table table-bordered table-condensed table-hover kaizenOrders-details-attachments">\n  <thead>\n    <tr>\n      <th class="is-min">'),__output.push(t("kaizenOrders","PROPERTY:attachments:description")),__output.push("</th>\n      <th>"),__output.push(t("kaizenOrders","PROPERTY:attachments:file")),__output.push('</th>\n      <th class="actions">'),__output.push(t("core","LIST:COLUMN:actions")),__output.push("</th>\n    </tr>\n  </thead>\n  <tbody>\n    "),model.attachments.length||(__output.push('\n    <tr>\n      <td colspan="3">'),__output.push(t("kaizenOrders","attachments:noData")),__output.push("</td>\n    </tr>\n    ")),__output.push("\n    "),model.attachments.forEach(function(e){__output.push('\n    <tr>\n      <td class="is-min">'),__output.push(escape(t.has("kaizenOrders","attachments:"+e.description)?t("kaizenOrders","attachments:"+e.description):e.description)),__output.push("</td>\n      <td>"),__output.push(escape(e.name)),__output.push('</td>\n      <td class="actions">\n        <a class="btn btn-default" href="/kaizen/orders/'),__output.push(model._id),__output.push("/attachments/"),__output.push(e._id),__output.push('" title="'),__output.push(t("kaizenOrders","attachments:actions:view")),__output.push('"><i class="fa fa-file-text-o"></i></a>\n        <a class="btn btn-default" href="/kaizen/orders/'),__output.push(model._id),__output.push("/attachments/"),__output.push(e._id),__output.push('?download=1" title="'),__output.push(t("kaizenOrders","attachments:actions:download")),__output.push('"><i class="fa fa-download"></i></a>\n      </td>\n    </tr>\n    ')}),__output.push("\n  </tbody>\n</table>")}(),__output.push('</div>\n      <div class="tab-pane" id="'),__output.push(idPrefix),__output.push('-observers">'),function(){__output.push('<table class="table table-bordered table-condensed table-hover kaizenOrders-details-observers">\n  <thead>\n    <tr>\n      <th class="is-min">'),__output.push(t("kaizenOrders","PROPERTY:observers:name")),__output.push('</th>\n      <th class="is-min">'),__output.push(t("kaizenOrders","PROPERTY:observers:role")),__output.push("</th>\n      <th>"),__output.push(t("kaizenOrders","PROPERTY:observers:lastSeenAt")),__output.push("</th>\n    </tr>\n  </thead>\n  <tbody>\n    "),model.observers.length||(__output.push('\n    <tr>\n      <td colspan="3">'),__output.push(t("kaizenOrders","observers:noData")),__output.push("</td>\n    </tr>\n    ")),__output.push("\n    "),model.observers.forEach(function(e){__output.push('\n    <tr>\n      <td class="is-min">'),__output.push(escape(e.user.label)),__output.push('</td>\n      <td class="is-min">'),__output.push(escape(t("kaizenOrders","role:"+e.role))),__output.push("</td>\n      <td>"),__output.push(escape(e.lastSeenAt?time.format(e.lastSeenAt,"LLLL"):"-")),__output.push("</td>\n    </tr>\n    ")}),__output.push("\n  </tbody>\n</table>")}(),__output.push("</div>\n    </div>\n  </div>\n</div>\n");return __output.join("")}}),define("app/kaizenOrders/views/KaizenOrderDetailsView",["underscore","app/core/views/DetailsView","../dictionaries","app/kaizenOrders/templates/details"],function(t,e,n,r){"use strict";var i={100:[12,0,0],"010":[0,12,0],"001":[0,0,12],110:[6,6,0],"011":[0,8,4],101:[6,0,6],111:[4,4,4]};return e.extend({template:r,currentTab:null,events:t.extend({'click a[data-toggle="tab"]':function(t){this.currentTab=t.currentTarget.dataset.tab}},e.prototype.events),serialize:function(){var n=this.model.get("types"),r=t.contains(n,"nearMiss"),o=t.contains(n,"suggestion"),s=t.contains(n,"kaizen"),a=i[(r?"1":"0")+(o?"1":"0")+(s?"1":"0")];return t.extend(e.prototype.serialize.call(this),{multi:!!window.KAIZEN_MULTI||this.model.isMulti(),showNearMissPanel:r,showSuggestionPanel:o,showKaizenPanel:s,nearMissColumnSize:a[0],suggestionColumnSize:a[1],kaizenColumnSize:a[2]})},afterRender:function(){e.prototype.afterRender.call(this);var r=this;this.$(".prop[data-dictionary]").each(function(){var e=n[this.dataset.dictionary].get(r.model.get(this.dataset.property));if(e){var i=e.get("description");t.isEmpty(i)||(this.classList.toggle("has-description",!0),this.dataset.description=i)}}),this.$el.popover({container:this.el,selector:".has-description",placement:function(t,e){if(window.innerWidth<=992)return"top";var n=r.$(e).closest(".panel").parent();return n[0]===n.parent().children().last()[0]?"top":"right"},trigger:"hover",content:function(){return this.dataset.description}}),this.$('a[data-tab="'+(this.currentTab||this.options.initialTab)+'"]').click()}})}),define("app/kaizenOrders/templates/historyItem",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="kaizenOrders-history-item '),__output.push(item.changes.length?"has-changes":""),__output.push(" "),__output.push(""!==item.comment?"has-comment":""),__output.push(" "),__output.push(item.seen?"":"is-unseen"),__output.push('">\n  <span class="kaizenOrders-history-user">'),__output.push(item.user),__output.push('</span>,\n  <time class="kaizenOrders-history-time" datetime="'),__output.push(item.time.iso),__output.push('" title="'),__output.push(item.time["long"]),__output.push('">'),__output.push(item.time.daysAgo>5?item.time["long"]:item.time.human),__output.push("</time>:\n  "),item.changes.length&&(__output.push('\n  <table class="table table-condensed kaizenOrders-history-changes">\n    <tbody>\n      '),item.changes.forEach(function(t){__output.push('\n      <tr>\n        <td class="is-min">'),__output.push(t.label),__output.push(':</td>\n        <td class="is-min"><span class="'),__output.push(t.oldValue.more?"has-more":""),__output.push('" data-content="'),__output.push(escape(t.oldValue.more)),__output.push('">'),__output.push(t.oldValue),__output.push('</span></td>\n        <td class="is-min"><i class="fa fa-arrow-right"></i></td>\n        <td><span class="'),__output.push(t.newValue.more?"has-more":""),__output.push('" data-content="'),__output.push(escape(t.newValue.more)),__output.push('">'),__output.push(t.newValue),__output.push("</span></td>\n        <td></td>\n      </tr>\n      ")}),__output.push("\n    </tbody>\n  </table>\n  ")),__output.push("\n  "),""!==item.comment&&(__output.push('\n  <p class="kaizenOrders-history-comment">'),__output.push(escape(item.comment)),__output.push("</p>\n  ")),__output.push("\n</div>");return __output.join("")}}),define("app/kaizenOrders/templates/history",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="panel panel-default kaizenOrders-history">\n  <div class="panel-heading">'),__output.push(t("kaizenOrders","PANEL:TITLE:changes")),__output.push("</div>\n  "),items.forEach(function(t){__output.push("\n  "),function(){__output.push('<div class="kaizenOrders-history-item '),__output.push(t.changes.length?"has-changes":""),__output.push(" "),__output.push(""!==t.comment?"has-comment":""),__output.push(" "),__output.push(t.seen?"":"is-unseen"),__output.push('">\n  <span class="kaizenOrders-history-user">'),__output.push(t.user),__output.push('</span>,\n  <time class="kaizenOrders-history-time" datetime="'),__output.push(t.time.iso),__output.push('" title="'),__output.push(t.time["long"]),__output.push('">'),__output.push(t.time.daysAgo>5?t.time["long"]:t.time.human),__output.push("</time>:\n  "),t.changes.length&&(__output.push('\n  <table class="table table-condensed kaizenOrders-history-changes">\n    <tbody>\n      '),t.changes.forEach(function(t){__output.push('\n      <tr>\n        <td class="is-min">'),__output.push(t.label),__output.push(':</td>\n        <td class="is-min"><span class="'),__output.push(t.oldValue.more?"has-more":""),__output.push('" data-content="'),__output.push(escape(t.oldValue.more)),__output.push('">'),__output.push(t.oldValue),__output.push('</span></td>\n        <td class="is-min"><i class="fa fa-arrow-right"></i></td>\n        <td><span class="'),__output.push(t.newValue.more?"has-more":""),__output.push('" data-content="'),__output.push(escape(t.newValue.more)),__output.push('">'),__output.push(t.newValue),__output.push("</span></td>\n        <td></td>\n      </tr>\n      ")}),__output.push("\n    </tbody>\n  </table>\n  ")),__output.push("\n  "),""!==t.comment&&(__output.push('\n  <p class="kaizenOrders-history-comment">'),__output.push(escape(t.comment)),__output.push("</p>\n  ")),__output.push("\n</div>")}(),__output.push("\n  ")}),__output.push('\n  <form class="kaizenOrders-history-form">\n    '),canEdit&&(__output.push('\n    <div class="message message-inline message-info">\n      <p>'),__output.push(t("kaizenOrders","history:editMessage",{editUrl:editUrl})),__output.push("</p>\n    </div>\n    ")),__output.push('\n    <div class="form-group">\n      <label for="'),__output.push(idPrefix),__output.push('-comment" class="control-label">'),__output.push(t("kaizenOrders","PROPERTY:comment")),__output.push('</label>\n      <textarea id="'),__output.push(idPrefix),__output.push('-comment" class="form-control" name="comment" rows="3"></textarea>\n    </div>\n    <div class="panel-footer">\n      <button id="'),__output.push(idPrefix),__output.push('-submit" type="submit" class="btn btn-primary">\n        <i class="fa fa-comment-o"></i><span>'),__output.push(t("kaizenOrders","history:submit")),__output.push("</span>\n      </button>\n    </div>\n  </form>\n</div>");return __output.join("")}}),define("app/kaizenOrders/views/KaizenOrderHistoryView",["underscore","jquery","app/i18n","app/time","app/user","app/viewport","app/core/View","app/core/templates/userInfo","../dictionaries","app/kaizenOrders/templates/historyItem","app/kaizenOrders/templates/history"],function(t,e,n,r,i,o,s,a,u,c,l){"use strict";return s.extend({template:l,events:{"submit form":function(){var t=this.$id("comment"),e=t.val().trim();if(""===e)return!1;var r=this.$id("submit").prop("disabled",!0),i=this.ajax({type:"PUT",url:"/kaizen/orders/"+this.model.id,data:JSON.stringify({comment:e})});return i.done(function(){t.val("")}),i.fail(function(){o.msg.show({type:"error",time:3e3,text:n("kaizenOrders","MSG:comment:failure")})}),i.always(function(){r.prop("disabled",!1)}),!1}},initialize:function(){this.lastChangeCount=0,this.listenTo(this.model,"seen",function(){this.$el.find(".is-unseen").removeClass("is-unseen")})},destroy:function(){this.$el.popover("destroy")},serialize:function(){return{idPrefix:this.idPrefix,canEdit:this.model.canEdit(),editUrl:this.model.genClientUrl("edit"),items:this.serializeItems()}},serializeItems:function(){var t=this.model.get("changes").map(this.serializeItem,this);return t.unshift(this.serializeItem({user:this.model.get("creator"),date:this.model.get("createdAt"),data:{},comment:n("kaizenOrders","history:added")},0)),t},serializeItem:function(e,o){var s,u;e.data.observer?(u=[],s=n("kaizenOrders","history:observer:"+e.data.observer[0])):(u=t.map(e.data,function(t,e){return{label:n("kaizenOrders","PROPERTY:"+e),oldValue:this.serializeItemValue(e,t[0],!0,o),newValue:this.serializeItemValue(e,t[1],!1,o)}},this),s=e.comment.trim());var c=this.model.get("observer").lastSeenAt;return{seen:e.user.id===i.data._id||null===c||c.getTime()>=Date.parse(e.date),time:r.toTagData(e.date),user:a({userInfo:e.user}),changes:u,comment:s}},serializeItemValue:function(e,i,o,s){if(t.isEmpty(i))return"-";switch(e){case"eventDate":return r.format(i,"YYYY-MM-DD, HH:mm");case"kaizenStartDate":case"kaizenFinishDate":return r.format(i,"YYYY-MM-DD");case"confirmer":return a({userInfo:i});case"nearMissOwners":case"suggestionOwners":case"kaizenOwners":return i.map(function(t){return(t.label||"").replace(/\s*\(.*?\)/,"")}).join(", ");case"status":return n("kaizenOrders","status:"+i);case"types":return i.map(function(t){return n("kaizenOrders","type:short:"+t)}).join("+");case"section":case"area":case"risk":case"cause":var c=u[e+"s"].get(i);return c?c.getLabel():i;case"nearMissCategory":case"suggestionCategory":var l=u.categories.get(i);return l?l.getLabel():i;case"subject":case"causeText":case"description":case"correctiveMeasures":case"suggestion":case"kaizenImprovements":case"kaizenEffect":return i.length<=43?i:{more:i,toString:function(){return i.substr(0,40)+"..."}};case"attachments":return i.map(function(e){return'<a href="/kaizen/orders/'+this.model.id+"/attachments/"+e._id+"?download=1&change="+(o?-s:s)+'" title="'+t.escape(e.name)+'">'+n("kaizenOrders","attachments:"+e.description)+"</a>"},this).join("; ");case"subscribers":return i.join("; ");default:return i||""}},beforeRender:function(){this.stopListening(this.model,"change:changes",this.updateHistory),this.stopListening(this.model,"change:observer",this.updateUnseen)},afterRender:function(){this.lastChangeCount=this.model.get("changes").length,this.listenTo(this.model,"change:changes",this.updateHistory),this.listenTo(this.model,"change:observer",this.updateUnseen),this.$el.popover({container:"body",selector:".has-more",placement:"top",trigger:"hover",template:this.$el.popover.Constructor.DEFAULTS.template.replace('class="popover"','class="popover kaizenOrders-history-popover"'),title:function(){return e(this).closest("tr").children().first().text()}}),this.timers.updateTimes||(this.timers.updateTimes=setInterval(this.updateTimes.bind(this),3e4))},updateHistory:function(){for(var t=this.model.get("changes"),n="",r=this.lastChangeCount;r<t.length;++r)n+=c({item:this.serializeItem(t[r],r)});e(n).insertAfter(this.$(".kaizenOrders-history-item").last()).addClass("highlight"),this.lastChangeCount=t.length},updateUnseen:function(){var t=this.$(".is-unseen");if(t.length){var e=Date.parse(t.last().find(".kaizenOrders-history-time").attr("datetime")),n=this.model.get("observer").lastSeenAt;n&&n.getTime()>=e&&t.removeClass("is-unseen")}},updateTimes:function(){this.$(".kaizenOrders-history-time").each(function(){var t=r.toTagData(this.getAttribute("datetime"));this.textContent=t.daysAgo>5?t["long"]:t.human})}})}),define("app/kaizenOrders/templates/detailsPage",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="kaizenOrders-detailsPage">\n  <div class="kaizenOrders-detailsPage-properties"></div>\n  <div class="kaizenOrders-detailsPage-history"></div>\n</div>');return __output.join("")}}),define("app/kaizenOrders/pages/KaizenOrderDetailsPage",["app/i18n","app/user","app/viewport","app/core/pages/DetailsPage","app/core/util/pageActions","../dictionaries","../views/KaizenOrderDetailsView","../views/KaizenOrderHistoryView","app/kaizenOrders/templates/detailsPage"],function(t,e,n,r,i,o,s,a,u){"use strict";return r.extend({template:u,baseBreadcrumb:!0,localTopics:{"kaizen.orders.seen":"onSeen"},actions:function(){var e=[];this.model.isNotSeen()&&e.push({id:"markAsSeen",icon:"eye",label:t("kaizenOrders","PAGE_ACTION:markAsSeen"),callback:this.markAsSeen.bind(this)});var n=this.model.get("observer");return"subscriber"===n.role?e.push({id:"unobserve",icon:"eye-slash",label:t("kaizenOrders","PAGE_ACTION:unobserve"),callback:this.unobserve.bind(this)}):"viewer"===n.role&&e.push({id:"observe",icon:"eye",label:t("kaizenOrders","PAGE_ACTION:observe"),callback:this.observe.bind(this)}),this.model.canEdit()&&e.push(i.edit(this.model,!1)),this.model.canDelete()&&e.push(i["delete"](this.model,!1)),e},initialize:function(){r.prototype.initialize.apply(this,arguments),this.setView(".kaizenOrders-detailsPage-properties",this.detailsView),this.setView(".kaizenOrders-detailsPage-history",this.historyView)},destroy:function(){r.prototype.destroy.call(this),o.unload()},defineViews:function(){this.detailsView=new s({model:this.model}),this.historyView=new a({model:this.model})},load:function(t){return t(this.model.fetch(),o.load())},setUpLayout:function(t){this.listenTo(this.model,"reset change",function(){t.setActions(this.actions,this)})},afterRender:function(){r.prototype.afterRender.call(this),o.load()},markAsSeen:function(e){var r=e.currentTarget.querySelector(".btn");r.disabled=!0,this.socket.emit("kaizen.markAsSeen",{_id:this.model.id},function(e){e&&(n.msg.show({type:"error",time:3e3,text:t("kaizenOrders","MSG:markAsSeen:failure")}),r.disabled=!1)})},observe:function(e){var r=e.currentTarget.querySelector(".btn");r.disabled=!0,this.socket.emit("kaizen.observe",{_id:this.model.id,state:!0},function(e){e&&(n.msg.show({type:"error",time:3e3,text:t("kaizenOrders","MSG:observe:failure")}),r.disabled=!1)})},unobserve:function(e){var r=e.currentTarget.querySelector(".btn");r.disabled=!0,this.socket.emit("kaizen.observe",{_id:this.model.id,state:!1},function(e){e&&(n.msg.show({type:"error",time:3e3,text:t("kaizenOrders","MSG:unobserve:failure")}),r.disabled=!1)})},onSeen:function(t){t===this.model.id&&this.model.markAsSeen()}})}),define("app/kaizenOrders/templates/form",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="kaizenOrders-form '),__output.push(multi?"is-multi":""),__output.push('" method="post" action="'),__output.push(formAction),__output.push('" autocomplete="off">\n  <input type="hidden" name="_method" value="'),__output.push(formMethod),__output.push('">\n  <div class="panel panel-primary">\n    <div class="panel-heading">'),__output.push(panelTitleText),__output.push('</div>\n    <div class="panel-body">\n      <div class="form-group clearfix">\n        <label for="'),__output.push(idPrefix),__output.push('-status" class="control-label">'),__output.push(t("kaizenOrders","PROPERTY:status")),__output.push('</label>\n        <div id="'),__output.push(idPrefix),__output.push('-status" class="btn-group kaizenOrders-form-statusBtnGroup" data-toggle="buttons">\n          '),statuses.forEach(function(e){__output.push('\n          <label class="btn btn-default">\n            <input type="radio" name="status" value="'),__output.push(e),__output.push('">'),__output.push(t("kaizenOrders","status:"+e)),__output.push("\n          </label>\n          ")}),__output.push('\n        </div>\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-subject" class="control-label is-required">'),__output.push(t("kaizenOrders","PROPERTY:subject")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-subject" class="form-control" type="text" name="subject" required placeholder="'),__output.push(t("kaizenOrders","FORM:help:subject")),__output.push('">\n      </div>\n      <div class="row">\n        <div class="form-group col-lg-4 has-required-select2">\n          <label for="'),__output.push(idPrefix),__output.push('-section" class="control-label is-required">'),__output.push(t("kaizenOrders","PROPERTY:section")),__output.push('</label>\n          <input id="'),__output.push(idPrefix),__output.push('-section" type="text" name="section" required placeholder="'),__output.push(t("kaizenOrders","FORM:help:section")),__output.push('">\n        </div>\n        <div class="form-group col-lg-8 has-required-select2">\n          <label for="'),__output.push(idPrefix),__output.push('-confirmer" class="control-label is-required">'),__output.push(t("kaizenOrders","PROPERTY:confirmer")),__output.push('</label>\n          <input id="'),__output.push(idPrefix),__output.push('-confirmer" type="text" name="confirmer" required placeholder="'),__output.push(t("kaizenOrders","FORM:help:confirmer")),__output.push('">\n        </div>\n      </div>\n      '),multi&&(__output.push('\n      <div id="'),__output.push(idPrefix),__output.push('-chooseTypes" class="message message-inline message-info">\n        <p>'),__output.push(t("kaizenOrders","FORM:MSG:chooseTypes",{gender:user.data.gender})),__output.push("</p>\n      </div>\n      ")),__output.push('\n      <div id="'),__output.push(idPrefix),__output.push('-panel-nearMiss" class="panel panel-default kaizenOrders-form-typePanel is-collapsed" data-type="nearMiss" data-expanded-class="panel-danger">\n        <div class="panel-heading" role="togglePanel" '),multi&&__output.push('tabindex="0"'),__output.push('>\n          <i class="fa fa-times kaizenOrders-form-collapsedIcon"></i><i class="fa fa-check kaizenOrders-form-expandedIcon"></i><span>'),__output.push(t("kaizenOrders","type:nearMiss")),__output.push('</span>\n        </div>\n        <div class="panel-body">\n          <div id="'),__output.push(idPrefix),__output.push('-nearMissOwnersFormGroup" class="form-group has-required-select2">\n            <label for="'),__output.push(idPrefix),__output.push('-nearMissOwners" class="control-label is-required">'),__output.push(t("kaizenOrders","PROPERTY:nearMissOwners")),__output.push('</label>\n            <input id="'),__output.push(idPrefix),__output.push('-nearMissOwners" type="text" name="nearMissOwners">\n          </div>\n          <div id="'),__output.push(idPrefix),__output.push('-eventDateAreaRow" class="row">\n            <div class="form-group col-lg-2">\n              <label for="'),__output.push(idPrefix),__output.push('-eventDate" class="control-label is-required">'),__output.push(t("kaizenOrders","PROPERTY:eventDate")),__output.push('</label>\n              <div class=" form-group-datetime">\n                <input id="'),__output.push(idPrefix),__output.push('-eventDate" class="form-control" name="eventDate" type="date" max="'),__output.push(today),__output.push('">\n                <input id="'),__output.push(idPrefix),__output.push('-eventTime" class="form-control" name="eventTime" type="text" placeholder="'),__output.push(t("kaizenOrders","FORM:MSG:eventTime")),__output.push('">\n              </div>\n            </div>\n            <div class="form-group col-lg-10 has-required-select2">\n              <label for="'),__output.push(idPrefix),__output.push('-area" class="control-label is-required">'),__output.push(t("kaizenOrders","PROPERTY:area")),__output.push('</label>\n              <input id="'),__output.push(idPrefix),__output.push('-area" type="text" name="area">\n            </div>\n          </div>\n          <div id="'),__output.push(idPrefix),__output.push('-descriptionFormGroup" class="form-group">\n            <label for="'),__output.push(idPrefix),__output.push('-description" class="control-label is-required">'),__output.push(t("kaizenOrders","PROPERTY:description")),__output.push('</label>\n            <textarea id="'),__output.push(idPrefix),__output.push('-description" class="form-control" name="description" rows="3"></textarea>\n          </div>\n          <div id="'),__output.push(idPrefix),__output.push('-nearMissOptional" class="message message-inline message-info kaizenOrders-form-msg-optional">\n            <p>'),__output.push(t("kaizenOrders","FORM:MSG:optional",{gender:user.data.gender})),__output.push('</p>\n          </div>\n          <div id="'),__output.push(idPrefix),__output.push('-causeTextFormGroup" class="form-group">\n            <label for="'),__output.push(idPrefix),__output.push('-causeText" class="control-label is-requiredToFinish">'),__output.push(t("kaizenOrders","PROPERTY:causeText")),__output.push('</label>\n            <textarea id="'),__output.push(idPrefix),__output.push('-causeText" class="form-control" name="causeText" rows="3"></textarea>\n          </div>\n          <div id="'),__output.push(idPrefix),__output.push('-causeCategoryRiskRow" class="row">\n            <div class="form-group col-md-4">\n              <label for="'),__output.push(idPrefix),__output.push('-cause" class="control-label is-requiredToFinish">'),__output.push(t("kaizenOrders","PROPERTY:cause")),__output.push('</label>\n              <input id="'),__output.push(idPrefix),__output.push('-cause" type="text" name="cause">\n            </div>\n            <div class="form-group col-md-4">\n              <label for="'),__output.push(idPrefix),__output.push('-risk" class="control-label is-requiredToFinish">'),__output.push(t("kaizenOrders","PROPERTY:risk")),__output.push('</label>\n              <input id="'),__output.push(idPrefix),__output.push('-risk" type="text" name="risk">\n            </div>\n            <div class="form-group col-md-4">\n              <label for="'),__output.push(idPrefix),__output.push('-nearMissCategory" class="control-label is-requiredToFinish">'),__output.push(t("kaizenOrders","PROPERTY:nearMissCategory")),__output.push('</label>\n              <input id="'),__output.push(idPrefix),__output.push('-nearMissCategory" type="text" name="nearMissCategory">\n            </div>\n          </div>\n          <div id="'),__output.push(idPrefix),__output.push('-correctiveMeasuresFormGroup" class="form-group">\n            <label for="'),__output.push(idPrefix),__output.push('-correctiveMeasures" class="control-label is-requiredToFinish">'),__output.push(t("kaizenOrders","PROPERTY:correctiveMeasures")),__output.push('</label>\n            <textarea id="'),__output.push(idPrefix),__output.push('-correctiveMeasures" class="form-control" name="correctiveMeasures" rows="3"></textarea>\n            <p class="help-block">'),__output.push(t("kaizenOrders","FORM:help:correctiveMeasures")),__output.push('</p>\n          </div>\n          <div id="'),__output.push(idPrefix),__output.push('-preventiveMeasuresFormGroup" class="form-group">\n            <label for="'),__output.push(idPrefix),__output.push('-preventiveMeasures" class="control-label is-requiredToFinish">'),__output.push(t("kaizenOrders","PROPERTY:preventiveMeasures")),__output.push('</label>\n            <textarea id="'),__output.push(idPrefix),__output.push('-preventiveMeasures" class="form-control" name="preventiveMeasures" rows="3"></textarea>\n            <p class="help-block">'),__output.push(t("kaizenOrders","FORM:help:preventiveMeasures")),__output.push('</p>\n          </div>\n        </div>\n      </div>\n      <div id="'),__output.push(idPrefix),__output.push('-panel-suggestion" class="panel panel-default kaizenOrders-form-typePanel is-collapsed '),__output.push(multi?"":"hidden"),__output.push('" data-type="suggestion" data-expanded-class="panel-warning">\n        <div class="panel-heading" role="togglePanel" tabindex="0">\n          <i class="fa fa-times kaizenOrders-form-collapsedIcon"></i><i class="fa fa-check kaizenOrders-form-expandedIcon"></i><span>'),__output.push(t("kaizenOrders","type:suggestion")),__output.push('</span>\n        </div>\n        <div id="'),__output.push(idPrefix),__output.push('-suggestionPanelBody" class="panel-body">\n          <div id="'),__output.push(idPrefix),__output.push('-suggestionOwnersFormGroup" class="form-group has-required-select2">\n            <label for="'),__output.push(idPrefix),__output.push('-suggestionOwners" class="control-label is-required">'),__output.push(t("kaizenOrders","PROPERTY:suggestionOwners")),__output.push('</label>\n            <input id="'),__output.push(idPrefix),__output.push('-suggestionOwners" type="text" name="suggestionOwners">\n          </div>\n          <div id="'),__output.push(idPrefix),__output.push('-suggestionFormGroup" class="form-group">\n            <label for="'),__output.push(idPrefix),__output.push('-suggestion" class="control-label is-required">'),__output.push(t("kaizenOrders","PROPERTY:suggestion")),__output.push('</label>\n            <textarea id="'),__output.push(idPrefix),__output.push('-suggestion" class="form-control" name="suggestion" rows="3"></textarea>\n          </div>\n          <div id="'),__output.push(idPrefix),__output.push('-suggestionOptional" class="message message-inline message-info kaizenOrders-form-msg-optional">\n            <p>'),__output.push(t("kaizenOrders","FORM:MSG:optional",{gender:user.data.gender})),__output.push('</p>\n          </div>\n          <div id="'),__output.push(idPrefix),__output.push('-suggestionCategoryFormGroup" class="form-group">\n            <label for="'),__output.push(idPrefix),__output.push('-suggestionCategory" class="control-label is-requiredToFinish">'),__output.push(t("kaizenOrders","PROPERTY:suggestionCategory")),__output.push('</label>\n            <input id="'),__output.push(idPrefix),__output.push('-suggestionCategory" type="text" name="suggestionCategory">\n          </div>\n        </div>\n      </div>\n      <div id="'),__output.push(idPrefix),__output.push('-panel-kaizen" class="panel panel-default kaizenOrders-form-typePanel is-collapsed '),__output.push(multi?"":"hidden"),__output.push('" data-type="kaizen" data-expanded-class="panel-success">\n        <div class="panel-heading" role="togglePanel" tabindex="0">\n          <i class="fa fa-times kaizenOrders-form-collapsedIcon"></i><i class="fa fa-check kaizenOrders-form-expandedIcon"></i><span>'),__output.push(t("kaizenOrders","type:kaizen")),__output.push('</span>\n        </div>\n        <div class="panel-body has-lastElementRow">\n          <div id="'),__output.push(idPrefix),__output.push('-kaizenOwnersFormGroup" class="form-group has-required-select2">\n            <label for="'),__output.push(idPrefix),__output.push('-kaizenOwners" class="control-label is-required">'),__output.push(t("kaizenOrders","PROPERTY:kaizenOwners")),__output.push('</label>\n            <input id="'),__output.push(idPrefix),__output.push('-kaizenOwners" type="text" name="kaizenOwners">\n          </div>\n          <div class="row">\n            <div class="form-group col-lg-2">\n              <label for="'),__output.push(idPrefix),__output.push('-kaizenStartDate" class="control-label is-requiredToFinish">'),__output.push(t("kaizenOrders","PROPERTY:kaizenStartDate")),__output.push('</label>\n              <input id="'),__output.push(idPrefix),__output.push('-kaizenStartDate" class="form-control" type="date" name="kaizenStartDate" max="'),__output.push(today),__output.push('" placeholder="'),__output.push(t("core","placeholder:date")),__output.push('">\n            </div>\n            <div class="form-group col-lg-2">\n              <label for="'),__output.push(idPrefix),__output.push('-kaizenFinishDate" class="control-label is-requiredToFinish">'),__output.push(t("kaizenOrders","PROPERTY:kaizenFinishDate")),__output.push('</label>\n              <input id="'),__output.push(idPrefix),__output.push('-kaizenFinishDate" class="form-control" type="date" name="kaizenFinishDate" max="'),__output.push(today),__output.push('" placeholder="'),__output.push(t("core","placeholder:date")),__output.push('">\n            </div>\n          </div>\n          <div class="row">\n            <div class="form-group col-md-6">\n              <label for="'),__output.push(idPrefix),__output.push('-kaizenImprovements" class="control-label is-requiredToFinish">'),__output.push(t("kaizenOrders","PROPERTY:kaizenImprovements")),__output.push('</label>\n              <textarea id="'),__output.push(idPrefix),__output.push('-kaizenImprovements" class="form-control" name="kaizenImprovements" rows="3"></textarea>\n            </div>\n            <div class="form-group col-md-6">\n              <label for="'),__output.push(idPrefix),__output.push('-kaizenEffect" class="control-label is-requiredToFinish">'),__output.push(t("kaizenOrders","PROPERTY:kaizenEffect")),__output.push('</label>\n              <textarea id="'),__output.push(idPrefix),__output.push('-kaizenEffect" class="form-control" name="kaizenEffect" rows="3"></textarea>\n            </div>\n          </div>\n        </div>\n      </div>\n      '),editMode&&(__output.push('\n      <div class="message message-inline message-warning">\n        <p>'),__output.push(t("kaizenOrders","FORM:MSG:attachmentEdit")),__output.push('</p>\n      </div>\n      <div class="row kaizenOrders-form-attachments">\n        '),["scan","before","after"].forEach(function(e){__output.push('\n        <div class="col-md-4 form-group">\n          <label class="control-label">'),__output.push(t("kaizenOrders","attachments:"+e+":current")),__output.push('</label>\n          <p class="form-control-static">\n            '),attachments[e]?(__output.push('\n            <a href="/kaizen/orders/'),__output.push(model._id),__output.push("/attachments/"),__output.push(attachments[e]._id),__output.push('">'),__output.push(escape(attachments[e].name)),__output.push("</a>\n            ")):__output.push("\n            -\n            "),__output.push("\n          </p>\n        </div>\n        ")
}),__output.push("\n      </div>\n      ")),__output.push('\n      <div class="row">\n        '),["scan","before","after"].forEach(function(e){__output.push('\n        <div class="col-md-4 form-group">\n          <label for="'),__output.push(idPrefix),__output.push("-attachments-"),__output.push(e),__output.push('" class="control-label">'),__output.push(t("kaizenOrders","attachments:"+e+(editMode?":new":""))),__output.push('</label>\n          <input id="'),__output.push(idPrefix),__output.push("-attachments-"),__output.push(e),__output.push('" class="form-control" type="file" data-name="'),__output.push(e),__output.push('">\n        </div>\n        ')}),__output.push('\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-subscribers" class="control-label">'),__output.push(t("kaizenOrders","PROPERTY:subscribers")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-subscribers" type="text" name="subscribers">\n        <p class="help-block">'),__output.push(t("kaizenOrders","FORM:help:subscribers")),__output.push("</p>\n      </div>\n      "),editMode&&(__output.push('\n      <div class="form-group kaizenOrders-form-comment">\n        <label for="'),__output.push(idPrefix),__output.push('-comment" class="control-label">'),__output.push(t("kaizenOrders","PROPERTY:comment")),__output.push('</label>\n        <textarea id="'),__output.push(idPrefix),__output.push('-comment" class="form-control" name="comment" rows="3"></textarea>\n      </div>\n      ')),__output.push('\n    </div>\n    <div class="panel-footer">\n      <button id="'),__output.push(idPrefix),__output.push('-submit" type="submit" class="btn btn-primary">\n        <i class="fa fa-spinner fa-spin"></i>\n        <span>'),__output.push(formActionText),__output.push("</span>\n      </button>\n    </div>\n  </div>\n</form>\n");return __output.join("")}}),define("app/kaizenOrders/views/KaizenOrderFormView",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/buttonGroup","app/core/util/idAndLabel","app/core/views/FormView","app/users/util/setUpUserSelect2","../dictionaries","../KaizenOrder","app/kaizenOrders/templates/form"],function(t,e,n,r,i,o,s,a,u,c,l,p){"use strict";function d(t){return{id:t.id,text:t.getLabel(),description:t.get("description")}}function h(e){if(t.isEmpty(e.description))return t.escape(e.text);var n='<div class="kaizenOrders-select2">';return n+="<h3>"+t.escape(e.text)+"</h3>",n+="<p>"+t.escape(e.description)+"</p>",n+="</div>"}function f(t,e){return e}return a.extend({template:p,events:t.extend({'keydown [role="togglePanel"]':function(t){window.KAIZEN_MULTI&&13===t.keyCode&&(t.preventDefault(),t.stopPropagation(),t.currentTarget.click())},'click [role="togglePanel"]':function(t){if(window.KAIZEN_MULTI){var e=this.$(t.currentTarget).closest(".panel"),n=e.attr("data-type");e.hasClass("is-collapsed")?this.expandPanel(n):this.collapsePanel(n)}},'change [name="status"]':"toggleRequiredToFinishFlags"},a.prototype.events),serialize:function(){var e={};return this.options.editMode&&this.model.get("attachments").forEach(function(t){e[t.description]=t}),t.extend(a.prototype.serialize.call(this),{multi:!!window.KAIZEN_MULTI||this.model.isMulti(),today:r.format(new Date,"YYYY-MM-DD"),statuses:c.statuses,types:c.types,attachments:e})},checkValidity:function(){return!0},submitRequest:function(t,e){var r=this,i=new FormData,o=0;if(this.$('input[type="file"]').each(function(){this.files.length&&(i.append(this.dataset.name,this.files[0]),++o)}),0===o)return a.prototype.submitRequest.call(r,t,e);this.$el.addClass("is-uploading");var s=this.ajax({type:"POST",url:"/kaizen/orders;upload",data:i,processData:!1,contentType:!1});s.done(function(n){e.attachments=n,a.prototype.submitRequest.call(r,t,e)}),s.fail(function(){r.showErrorMessage(n("kaizenOrders","FORM:ERROR:upload")),t.attr("disabled",!1)}),s.always(function(){r.$el.removeClass("is-uploading")})},handleSuccess:function(){this.broker.publish("router.navigate",{url:this.model.genClientUrl()+(this.options.editMode?"":"?thank=you"),trigger:!0})},serializeToForm:function(){var t=this.model.toJSON(),e=t.eventDate?r.getMoment(t.eventDate):null;return e?(t.eventDate=e.format("YYYY-MM-DD"),t.eventTime=e.format("H")):(t.eventDate="",t.eventTime=""),l.DATE_PROPERTIES.forEach(function(e){t[e]&&(t[e]=r.format(t[e],"YYYY-MM-DD"))}),t.subscribers="",t},serializeForm:function(e){function n(t){var e=i.$id(t+"Owners").select2("data");return e.map(function(t){return{id:t.id,label:t.text}}).filter(function(t){return!!t.id})}var i=this,o=this.$id("confirmer").select2("data");delete e.attachments,e.confirmer=o?{id:o.id,label:o.text}:null,e.types=t.values(c.types).filter(function(t){return this.isPanelExpanded(t)},this),e.nearMissOwners=n("nearMiss"),e.suggestionOwners=c.multiType?n("suggestion"):[],e.kaizenOwners=c.multiType?n("kaizen"):[],e.subscribers=this.$id("subscribers").select2("data").map(function(t){return{id:t.id,label:t.text}}),l.DATE_PROPERTIES.forEach(function(t){var n=r.getMoment(e[t],"YYYY-MM-DD");e[t]=n.isValid()?n.toISOString():null});var s=(e.eventTime||"").match(/([0-9]{1,2})[^0-9]*([0-9]{1,2})?/),a="00:00";if(delete e.eventTime,s){var u=s[1],p=s[2];a=(1===u.length?"0":"")+u+":",a+=p?(1===p.length?"0":"")+p:"00"}var d=r.getMoment(e.eventDate+" "+a,"YYYY-MM-DD HH:mm");return d.isValid()||(d=r.getMoment(e.eventDate,"YYYY-MM-DD")),e.eventDate=d.isValid()?d.toISOString():null,e},afterRender:function(){a.prototype.afterRender.call(this),this.$id("section").select2({data:c.sections.map(s)}),this.$id("area").select2({allowClear:!0,placeholder:" ",data:c.areas.map(s)}),this.$id("cause").select2({allowClear:!0,placeholder:" ",dropdownCssClass:"is-bigdrop",data:c.causes.map(d),formatResult:h}),this.$id("nearMissCategory").select2({allowClear:!0,placeholder:" ",dropdownCssClass:"is-bigdrop",data:c.categories.where({inNearMiss:!0}).map(d),formatResult:h}),this.$id("suggestionCategory").select2({allowClear:!0,placeholder:" ",dropdownCssClass:"is-bigdrop",data:c.categories.where({inSuggestion:!0}).map(d),formatResult:h}),this.$id("risk").select2({allowClear:!0,placeholder:" ",dropdownCssClass:"is-bigdrop",data:c.risks.map(d),formatResult:h}),o.toggle(this.$id("status")),u(this.$id("subscribers"),{multiple:!0,textFormatter:f}),this.setUpConfirmerSelect2(),this.setUpOwnerSelect2(),this.toggleStatuses(),this.toggleSubmit(),this.toggleRequiredToFinishFlags(),this.togglePanels(),this.$("input[autofocus]").focus()},setUpConfirmerSelect2:function(){var t=this.model.get("confirmer"),e=u(this.$id("confirmer"),{textFormatter:f});t&&e.select2("data",{id:t.id,text:t.label})},setUpOwnerSelect2:function(){function t(t){if(!e)return r;var i=n.get(t+"Owners");return Array.isArray(i)&&i.length?i.map(function(t){return{id:t.id,text:t.label}}):[]}var e=this.options.editMode,n=this.model,r={id:i.data._id,text:i.getLabel()};u(this.$id("nearMissOwners"),{multiple:!0,textFormatter:f}).select2("data",t("nearMiss")),u(this.$id("suggestionOwners"),{multiple:!0,textFormatter:f}).select2("data",t("suggestion")),u(this.$id("kaizenOwners"),{multiple:!0,textFormatter:f}).select2("data",t("kaizen"))},isPanelExpanded:function(t){return this.$id("panel-"+t).hasClass("is-expanded")},collapsePanel:function(t){var e=this.$id("panel-"+t);return e.removeClass("is-expanded "+e.attr("data-expanded-class")).addClass("panel-default is-collapsed"),this.toggleSubmit(),this.moveFields(),this.toggleRequiredFlags(),this.toggleChooseTypesMsg(),e.find(".panel-body").stop(!1,!1).slideUp("fast"),e},expandPanel:function(t,e){var n=this.$id("panel-"+t);n.removeClass("is-collapsed panel-default").addClass("is-expanded "+n.attr("data-expanded-class")),this.toggleSubmit(),this.moveFields(),this.toggleRequiredFlags(),this.toggleChooseTypesMsg();var r=n.find(".panel-body").stop(!1,!1);return e===!1?r.css("display","block"):r.slideDown("fast",function(){n.find("input, textarea").first().focus()}),n},toggleRequiredToFinishFlags:function(){var t=this.$('input[name="status"]:checked').val(),e="finished"===t,n=this;this.$(".is-requiredToFinish").toggleClass("is-required",e).each(function(){this.nextElementSibling.classList.contains("select2-container")&&this.parentNode.classList.toggle("has-required-select2",e),e||n.$("#"+this.htmlFor).prop("required",!1)}),this.$(".kaizenOrders-form-msg-optional").toggleClass("hidden",e),e&&this.toggleRequiredFlags()},toggleRequiredFlags:function(){this.$(".kaizenOrders-form-typePanel").each(function(){var t=e(this),n=t.hasClass("is-expanded");t.find(".is-required").each(function(){t.find("#"+this.htmlFor).prop("required",n)})})},toggleChooseTypesMsg:function(){this.$id("chooseTypes").toggleClass("hidden",this.$(".kaizenOrders-form-typePanel.is-expanded").length>0)},toggleStatuses:function(){if(this.options.editMode){if(i.isAllowedTo("KAIZEN:MANAGE"))return;var t=["new"];this.model.isConfirmer()||t.push("accepted","finished"),this.model.isCreator()&&"new"===this.model.get("status")||t.push("cancelled");var e=this.el;t.forEach(function(t){var n=e.querySelector('input[name="status"][value="'+t+'"]');n.parentNode.classList.toggle("disabled",!n.checked)})}else this.$id("status").find(".btn").each(function(){this.classList.toggle("disabled","new"!==this.querySelector("input").value)})},toggleSubmit:function(){this.$id("submit").prop("disabled",0===this.$(".panel.is-expanded").length)},togglePanels:function(){(this.model.get("types")||[]).forEach(function(t){this.expandPanel(t,!1)},this)},moveFields:function(){var t=this.isPanelExpanded("nearMiss"),e=this.isPanelExpanded("suggestion"),n=this.isPanelExpanded("kaizen"),r=this.$id("nearMissOwnersFormGroup"),i=this.$id("suggestionOwnersFormGroup"),o=this.$id("kaizenOwnersFormGroup"),s=this.$id("eventDateAreaRow"),a=this.$id("descriptionFormGroup"),u=this.$id("nearMissOptional"),c=this.$id("causeTextFormGroup"),l=this.$id("causeCategoryRiskRow"),p=this.$id("correctiveMeasuresFormGroup"),d=this.$id("suggestionCategoryFormGroup"),h=this.$id("suggestionFormGroup"),f=this.$id("suggestionPanelBody"),m=this.$id("suggestionOptional"),_="nearMiss"===s.closest(".panel").attr("data-type");if(t){if(_)return void h.insertAfter(!e&&n?o:i);s.detach(),a.detach(),c.detach(),l.detach(),p.detach(),h.detach(),d.detach(),d.removeClass("col-md-3").appendTo(f),h.removeClass("col-md-4").insertAfter(i),s.insertAfter(r),a.insertAfter(s),c.insertAfter(u),l.insertAfter(c).find(".col-md-3").removeClass("col-md-3").addClass("col-md-4"),p.insertAfter(l),!e&&n&&h.insertAfter(o)}else if(e){if(!_)return;s.detach(),a.detach(),c.detach(),l.detach(),p.detach(),h.detach(),d.detach(),s.insertAfter(i),a.insertAfter(s),h.insertAfter(a),c.insertAfter(m),l.insertAfter(c).find(".col-md-4").removeClass("col-md-4").addClass("col-md-3"),d.addClass("col-md-3").appendTo(l),p.insertAfter(l)}}})}),define("app/kaizenOrders/pages/KaizenOrderAddFormPage",["app/core/pages/AddFormPage","../dictionaries","../views/KaizenOrderFormView"],function(t,e,n){"use strict";return t.extend({baseBreadcrumb:!0,FormView:n,load:function(t){return t(e.load())},destroy:function(){t.prototype.destroy.call(this),e.unload()},afterRender:function(){t.prototype.afterRender.call(this),e.load()}})}),define("app/kaizenOrders/pages/KaizenOrderEditFormPage",["app/core/pages/EditFormPage","../dictionaries","../views/KaizenOrderFormView"],function(t,e,n){"use strict";return t.extend({baseBreadcrumb:!0,FormView:n,load:function(t){return t(this.model.fetch(),e.load())},destroy:function(){t.prototype.destroy.call(this),e.unload()},afterRender:function(){t.prototype.afterRender.call(this),e.load()}})}),define("app/kaizenOrders/templates/reportFilter",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="well filter-form kaizenOrders-report-filter">\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-from">'),__output.push(t("core","filter:date:from")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-from" class="form-control" name="from" type="date" placeholder="'),__output.push(t("core","placeholder:date")),__output.push('">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-to">'),__output.push(t("core","filter:date:to")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-to" class="form-control" name="to" type="date" placeholder="'),__output.push(t("core","placeholder:date")),__output.push('">\n  </div>\n  <div class="form-group">\n    <label>'),__output.push(t("reports","filter:interval")),__output.push('</label>\n    <div id="'),__output.push(idPrefix),__output.push('-interval" class="btn-group filter-btn-group" data-toggle="buttons">\n      '),["year","quarter","month","week","day"].forEach(function(e){__output.push('\n      <label class="btn btn-default" title="'),__output.push(t("reports","filter:interval:title:"+e)),__output.push('" data-interval="'),__output.push(e),__output.push('">\n        <input type="radio" name="interval" value="'),__output.push(e),__output.push('"> '),__output.push(t("reports","filter:interval:"+e)),__output.push("\n      </label>\n      ")}),__output.push('\n    </div>\n  </div>\n  <div class="form-group filter-actions">\n    <div class="btn-group">\n      <button type="submit" class="btn btn-default"><i class="fa fa-filter"></i><span>'),__output.push(t("reports","filter:submit")),__output.push('</span></button>\n      <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">\n        <span class="caret"></span>\n      </button>\n      <ul class="dropdown-menu">\n        <li><a data-range="today">'),__output.push(escape(t("reports","filter:submit:today"))),__output.push('</a></li>\n        <li><a data-range="yesterday">'),__output.push(escape(t("reports","filter:submit:yesterday"))),__output.push('</a></li>\n        <li><a data-range="currentWeek">'),__output.push(escape(t("reports","filter:submit:currentWeek"))),__output.push('</a></li>\n        <li><a data-range="prevWeek">'),__output.push(escape(t("reports","filter:submit:prevWeek"))),__output.push('</a></li>\n        <li><a data-range="currentMonth">'),__output.push(escape(t("reports","filter:submit:currentMonth"))),__output.push('</a></li>\n        <li><a data-range="prevMonth">'),__output.push(escape(t("reports","filter:submit:prevMonth"))),__output.push('</a></li>\n        <li><a data-range="q1">'),__output.push(escape(t("reports","filter:submit:q1"))),__output.push('</a></li>\n        <li><a data-range="q2">'),__output.push(escape(t("reports","filter:submit:q2"))),__output.push('</a></li>\n        <li><a data-range="q3">'),__output.push(escape(t("reports","filter:submit:q3"))),__output.push('</a></li>\n        <li><a data-range="q4">'),__output.push(escape(t("reports","filter:submit:q4"))),__output.push('</a></li>\n        <li><a data-range="currentYear" data-interval="quarter">'),__output.push(escape(t("reports","filter:submit:currentYear"))),__output.push('</a></li>\n        <li><a data-range="prevYear" data-interval="quarter">'),__output.push(escape(t("reports","filter:submit:prevYear"))),__output.push("</a></li>\n      </ul>\n    </div>\n  </div>\n</form>\n");return __output.join("")}}),define("app/reports/util/prepareDateRange",["app/time"],function(t){"use strict";return function(e,n){var r,i="string"==typeof e?e:e.getAttribute("data-range"),o=t.getMoment().minutes(0).seconds(0).milliseconds(0),s="day",a=o.hours();switch(n&&o.hours(6),i){case"currentYear":o.month(0).date(1),r=o.clone().add(1,"years"),s="year";break;case"prevYear":o.month(0).date(1).subtract(1,"years"),r=o.clone().add(1,"years"),s="year";break;case"currentQuarter":o.startOf("quarter"),r=o.clone().add(1,"quarter"),s="month";break;case"q1":case"q2":case"q3":case"q4":o.quarter(+i.substr(1)).startOf("quarter"),r=o.clone().add(3,"months"),s="month";break;case"currentMonth":o.date(1),r=o.clone().add(1,"months");break;case"prevMonth":o.date(1).subtract(1,"months"),r=o.clone().add(1,"months");break;case"currentWeek":o.weekday(0),r=o.clone().add(7,"days");break;case"prevWeek":o.weekday(0).subtract(7,"days"),r=o.clone().add(7,"days");break;case"today":r=o.clone().add(1,"days"),n&&(s="shift");break;case"yesterday":r=o.clone(),o.subtract(1,"days"),n&&(s="shift");break;case"currentShift":case"prevShift":a>=6&&14>a?o.hours(6):a>=14&&22>a?o.hours(14):(o.hours(22),6>a&&o.subtract(1,"days")),r=o.clone().add(8,"hours"),s="hour","prevShift"===i&&(o.subtract(8,"hours"),r.subtract(8,"hours"))}if(e.getAttribute){var u=e.getAttribute("data-interval");u&&(s=u)}return{fromMoment:o,toMoment:r,interval:s}}}),define("app/kaizenOrders/views/KaizenOrderReportFilterView",["js2form","app/time","app/core/View","app/core/util/fixTimeRange","app/core/util/buttonGroup","app/kaizenOrders/templates/reportFilter","app/reports/util/prepareDateRange"],function(t,e,n,r,i,o,s){"use strict";return n.extend({template:o,events:{submit:function(){return this.changeFilter(),!1},"click a[data-range]":function(t){var e=s(t.target);this.$id("from").val(e.fromMoment.format("YYYY-MM-DD")),this.$id("to").val(e.toMoment.format("YYYY-MM-DD")),this.$('.btn[data-interval="'+e.interval+'"]').click(),this.$el.submit()}},afterRender:function(){t(this.el,this.serializeFormData()),i.toggle(this.$id("interval"))},serializeFormData:function(){var t=this.model,n=+t.get("from"),r=+t.get("to");return{interval:t.get("interval"),from:n?e.format(n,"YYYY-MM-DD"):"",to:r?e.format(r,"YYYY-MM-DD"):""}},changeFilter:function(){var t={from:e.getMoment(this.$id("from").val(),"YYYY-MM-DD").valueOf(),to:e.getMoment(this.$id("to").val(),"YYYY-MM-DD").valueOf(),interval:i.getValue(this.$id("interval"))};if((!t.from||t.from<0)&&(t.from=0),(!t.to||t.to<0)&&(t.to=0),t.from&&t.from===t.to){var n=e.getMoment(t.to).add(1,"days");this.$id("to").val(n.format("YYYY-MM-DD")),t.to=n.valueOf()}this.model.set(t),this.model.trigger("filtered")}})}),function(){function t(t,e){var n;t||(t={});for(n in e)t[n]=e[n];return t}function e(){var t,e,n=arguments,r={},i=function(t,e){var n,r;"object"!=typeof t&&(t={});for(r in e)e.hasOwnProperty(r)&&(n=e[r],t[r]=n&&"object"==typeof n&&"[object Array]"!==Object.prototype.toString.call(n)&&"renderTo"!==r&&"number"!=typeof n.nodeType?i(t[r]||{},n):e[r]);return t};for(n[0]===!0&&(r=n[1],n=Array.prototype.slice.call(n,2)),e=n.length,t=0;e>t;t++)r=i(r,n[t]);return r}function n(t,e){return parseInt(t,e||10)}function r(t){return"string"==typeof t}function i(t){return t&&"object"==typeof t}function o(t){return"[object Array]"===Object.prototype.toString.call(t)}function s(t){return"number"==typeof t}function a(t){return ce.log(t)/ce.LN10}function u(t){return ce.pow(10,t)}function c(t,e){for(var n=t.length;n--;)if(t[n]===e){t.splice(n,1);break}}function l(t){return t!==z&&null!==t}function p(t,e,n){var o,s;if(r(e))l(n)?t.setAttribute(e,n):t&&t.getAttribute&&(s=t.getAttribute(e));else if(l(e)&&i(e))for(o in e)t.setAttribute(o,e[o]);return s}function d(t){return o(t)?t:[t]}function h(){var t,e,n=arguments,r=n.length;for(t=0;r>t;t++)if(e=n[t],e!==z&&null!==e)return e}function f(e,n){be&&!Se&&n&&n.opacity!==z&&(n.filter="alpha(opacity="+100*n.opacity+")"),t(e.style,n)}function m(e,n,r,i,o){return e=ae.createElement(e),n&&t(e,n),o&&f(e,{padding:0,border:xe,margin:0}),r&&f(e,r),i&&i.appendChild(e),e}function _(e,n){var r=function(){return z};return r.prototype=new e,t(r.prototype,n),r}function g(t,e,r,i){var o=se.numberFormat,s=G.lang,a=+t||0,u=-1===e?(a.toString().split(".")[1]||"").length:isNaN(e=me(e))?2:e,c=void 0===r?s.decimalPoint:r,s=void 0===i?s.thousandsSep:i,l=0>a?"-":"",p=String(n(a=me(a).toFixed(u))),d=p.length>3?p.length%3:0;return o!==g?o(t,e,r,i):l+(d?p.substr(0,d)+s:"")+p.substr(d).replace(/(\d{3})(?=\d)/g,"$1"+s)+(u?c+me(a-p).toFixed(u).slice(2):"")}function v(t,e){return Array((e||2)+1-String(t).length).join(0)+t}function y(t,e,n){var r=t[e];t[e]=function(){var t=Array.prototype.slice.call(arguments);return t.unshift(r),n.apply(this,t)}}function w(t,e){for(var n,r,i,o,s,a="{",u=!1,c=[];-1!==(a=t.indexOf(a));){if(n=t.slice(0,a),u){for(r=n.split(":"),i=r.shift().split("."),s=i.length,n=e,o=0;s>o;o++)n=n[i[o]];r.length&&(r=r.join(":"),i=/\.([0-9])/,o=G.lang,s=void 0,/f$/.test(r)?(s=(s=r.match(i))?s[1]:-1,null!==n&&(n=g(n,s,o.decimalPoint,r.indexOf(",")>-1?o.thousandsSep:""))):n=j(r,n))}c.push(n),t=t.slice(a+1),a=(u=!u)?"}":"{"}return c.push(t),c.join("")}function E(t){return ce.pow(10,pe(ce.log(t)/ce.LN10))}function b(t,e,n,r){var i,n=h(n,1);for(i=t/n,e||(e=[1,2,2.5,5,10],r===!1&&(1===n?e=[1,2,5,10]:.1>=n&&(e=[1/n]))),r=0;r<e.length&&(t=e[r],!(i<=(e[r]+(e[r+1]||e[r]))/2));r++);return t*=n}function T(t,e){var n,r,i=t.length;for(r=0;i>r;r++)t[r].ss_i=r;for(t.sort(function(t,r){return n=e(t,r),0===n?t.ss_i-r.ss_i:n}),r=0;i>r;r++)delete t[r].ss_i}function R(t){for(var e=t.length,n=t[0];e--;)t[e]<n&&(n=t[e]);return n}function A(t){for(var e=t.length,n=t[0];e--;)t[e]>n&&(n=t[e]);return n}function P(t,e){for(var n in t)t[n]&&t[n]!==e&&t[n].destroy&&t[n].destroy(),delete t[n]}function O(t){U||(U=m(ze)),t&&U.appendChild(t),U.innerHTML=""}function S(t){return parseFloat(t.toPrecision(14))}function C(t,e){Y=h(t,e.animation)}function k(){var t=G.global.useUTC,e=t?"getUTC":"get",n=t?"setUTC":"set";q=G.global.Date||window.Date,$=6e4*(t&&G.global.timezoneOffset||0),H=t?q.UTC:function(t,e,n,r,i,o){return new q(t,e,h(n,1),h(r,0),h(i,0),h(o,0)).getTime()},X=e+"Minutes",K=e+"Hours",Q=e+"Day",Z=e+"Date",J=e+"Month",te=e+"FullYear",ee=n+"Minutes",ne=n+"Hours",re=n+"Date",ie=n+"Month",oe=n+"FullYear"}function M(){}function I(t,e,n,r){this.axis=t,this.pos=e,this.type=n||"",this.isNew=!0,!n&&!r&&this.addLabel()}function D(){this.init.apply(this,arguments)}function L(){this.init.apply(this,arguments)}function N(t,e,n,r,i){var o=t.chart.inverted;this.axis=t,this.isNegative=n,this.options=e,this.x=r,this.total=null,this.points={},this.stack=i,this.alignOptions={align:e.align||(o?n?"left":"right":"center"),verticalAlign:e.verticalAlign||(o?"middle":n?"bottom":"top"),y:h(e.y,o?4:n?14:-6),x:h(e.x,o?n?-6:6:0)},this.textAlign=e.textAlign||(o?n?"right":"left":"center")}var z,x,F,U,G,j,Y,B,V,W,q,H,$,X,K,Q,Z,J,te,ee,ne,re,ie,oe,se,ae=document,ue=window,ce=Math,le=ce.round,pe=ce.floor,de=ce.ceil,he=ce.max,fe=ce.min,me=ce.abs,_e=ce.cos,ge=ce.sin,ve=ce.PI,ye=2*ve/360,we=navigator.userAgent,Ee=ue.opera,be=/msie/i.test(we)&&!Ee,Te=8===ae.documentMode,Re=/AppleWebKit/.test(we),Ae=/Firefox/.test(we),Pe=/(Mobile|Android|Windows Phone)/.test(we),Oe="http://www.w3.org/2000/svg",Se=!!ae.createElementNS&&!!ae.createElementNS(Oe,"svg").createSVGRect,Ce=Ae&&parseInt(we.split("Firefox/")[1],10)<4,ke=!Se&&!be&&!!ae.createElement("canvas").getContext,Me={},Ie=0,De=function(){return z},Le=[],Ne=0,ze="div",xe="none",Fe=/^[0-9]+$/,Ue="stroke-width",Ge={};ue.Highcharts?W(16,!0):se=ue.Highcharts={},j=function(e,n,r){if(!l(n)||isNaN(n))return"Invalid date";var i,e=h(e,"%Y-%m-%d %H:%M:%S"),o=new q(n-$),s=o[K](),a=o[Q](),u=o[Z](),c=o[J](),p=o[te](),d=G.lang,f=d.weekdays,o=t({a:f[a].substr(0,3),A:f[a],d:v(u),e:u,b:d.shortMonths[c],B:d.months[c],m:v(c+1),y:p.toString().substr(2,2),Y:p,H:v(s),I:v(s%12||12),l:s%12||12,M:v(o[X]()),p:12>s?"AM":"PM",P:12>s?"am":"pm",S:v(o.getSeconds()),L:v(le(n%1e3),3)},se.dateFormats);for(i in o)for(;-1!==e.indexOf("%"+i);)e=e.replace("%"+i,"function"==typeof o[i]?o[i](n):o[i]);return r?e.substr(0,1).toUpperCase()+e.substr(1):e},W=function(t,e){var n="Highcharts error #"+t+": www.highcharts.com/errors/"+t;if(e)throw n;ue.console&&void 0},V={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:26784e5,year:31556952e3},B={init:function(t,e,n){var r,i,o,e=e||"",s=t.shift,a=e.indexOf("C")>-1,u=a?7:3,e=e.split(" "),n=[].concat(n),c=function(t){for(r=t.length;r--;)"M"===t[r]&&t.splice(r+1,0,t[r+1],t[r+2],t[r+1],t[r+2])};if(a&&(c(e),c(n)),t.isArea&&(i=e.splice(e.length-6,6),o=n.splice(n.length-6,6)),s<=n.length/u&&e.length===n.length)for(;s--;)n=[].concat(n).splice(0,u).concat(n);if(t.shift=0,e.length)for(t=n.length;e.length<t;)s=[].concat(e).splice(e.length-u,u),a&&(s[u-6]=s[u-2],s[u-5]=s[u-1]),e=e.concat(s);return i&&(e=e.concat(i),n=n.concat(o)),[e,n]},step:function(t,e,n,r){var i=[],o=t.length;if(1===n)i=r;else if(o===e.length&&1>n)for(;o--;)r=parseFloat(t[o]),i[o]=isNaN(r)?t[o]:n*parseFloat(e[o]-r)+r;else i=e;return i}},function(e){ue.HighchartsAdapter=ue.HighchartsAdapter||e&&{init:function(t){var n=e.fx;e.extend(e.easing,{easeOutQuad:function(t,e,n,r,i){return-r*(e/=i)*(e-2)+n}}),e.each(["cur","_default","width","height","opacity"],function(t,r){var i,o=n.step;"cur"===r?o=n.prototype:"_default"===r&&e.Tween&&(o=e.Tween.propHooks[r],r="set"),(i=o[r])&&(o[r]=function(e){var n,e=t?e:this;return"align"!==e.prop?(n=e.elem,n.attr?n.attr(e.prop,"cur"===r?z:e.now):i.apply(this,arguments)):void 0})}),y(e.cssHooks.opacity,"get",function(t,e,n){return e.attr?e.opacity||0:t.call(this,e,n)}),this.addAnimSetter("d",function(e){var n,r=e.elem;e.started||(n=t.init(r,r.d,r.toD),e.start=n[0],e.end=n[1],e.started=!0),r.attr("d",t.step(e.start,e.end,e.pos,r.toD))}),this.each=Array.prototype.forEach?function(t,e){return Array.prototype.forEach.call(t,e)}:function(t,e){var n,r=t.length;for(n=0;r>n;n++)if(e.call(t[n],t[n],n,t)===!1)return n},e.fn.highcharts=function(){var t,e,n="Chart",i=arguments;return this[0]&&(r(i[0])&&(n=i[0],i=Array.prototype.slice.call(i,1)),t=i[0],t!==z&&(t.chart=t.chart||{},t.chart.renderTo=this[0],new se[n](t,i[1]),e=this),t===z&&(e=Le[p(this[0],"data-highcharts-chart")])),e}},addAnimSetter:function(t,n){e.Tween?e.Tween.propHooks[t]={set:n}:e.fx.step[t]=n},getScript:e.getScript,inArray:e.inArray,adapterRun:function(t,n){return e(t)[n]()},grep:e.grep,map:function(t,e){for(var n=[],r=0,i=t.length;i>r;r++)n[r]=e.call(t[r],t[r],r,t);return n},offset:function(t){return e(t).offset()},addEvent:function(t,n,r){e(t).bind(n,r)},removeEvent:function(t,n,r){var i=ae.removeEventListener?"removeEventListener":"detachEvent";ae[i]&&t&&!t[i]&&(t[i]=function(){}),e(t).unbind(n,r)},fireEvent:function(n,r,i,o){var s,a=e.Event(r),u="detached"+r;!be&&i&&(delete i.layerX,delete i.layerY,delete i.returnValue),t(a,i),n[r]&&(n[u]=n[r],n[r]=null),e.each(["preventDefault","stopPropagation"],function(t,e){var n=a[e];a[e]=function(){try{n.call(a)}catch(t){"preventDefault"===e&&(s=!0)}}}),e(n).trigger(a),n[u]&&(n[r]=n[u],n[u]=null),o&&!a.isDefaultPrevented()&&!s&&o(a)},washMouseEvent:function(t){var e=t.originalEvent||t;return e.pageX===z&&(e.pageX=t.pageX,e.pageY=t.pageY),e},animate:function(t,n,r){var i=e(t);t.style||(t.style={}),n.d&&(t.toD=n.d,n.d=1),i.stop(),n.opacity!==z&&t.attr&&(n.opacity+="px"),t.hasAnim=1,i.animate(n,r)},stop:function(t){t.hasAnim&&e(t).stop()}}}(ue.jQuery);var je=ue.HighchartsAdapter,Ye=je||{};je&&je.init.call(je,B);var Be=Ye.adapterRun,Ve=Ye.getScript,We=Ye.inArray,qe=Ye.each,He=Ye.grep,$e=Ye.offset,Xe=Ye.map,Ke=Ye.addEvent,Qe=Ye.removeEvent,Ze=Ye.fireEvent,Je=Ye.washMouseEvent,tn=Ye.animate,en=Ye.stop,Ye={enabled:!0,x:0,y:15,style:{color:"#606060",cursor:"default",fontSize:"11px"}};G={colors:"#7cb5ec,#434348,#90ed7d,#f7a35c,#8085e9,#f15c80,#e4d354,#8085e8,#8d4653,#91e8e1".split(","),symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),decimalPoint:".",numericSymbols:"k,M,G,T,P,E".split(","),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/4.0.4/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/4.0.4/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#333333",fontSize:"18px"}},subtitle:{text:"",align:"center",style:{color:"#555555"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0,lineWidthPlus:1,radiusPlus:2},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:e(Ye,{align:"center",enabled:!1,formatter:function(){return null===this.y?"":g(this.y,-1)},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,states:{hover:{lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3}},labels:{style:{position:"absolute",color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:0,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:Se,backgroundColor:"rgba(249, 249, 249, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">‚óè</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,snap:Pe?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var nn=G.plotOptions,je=nn.line;k();var rn=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,on=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,sn=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,an=function(t){var r,i,o=[];return function(t){t&&t.stops?i=Xe(t.stops,function(t){return an(t[1])}):(r=rn.exec(t))?o=[n(r[1]),n(r[2]),n(r[3]),parseFloat(r[4],10)]:(r=on.exec(t))?o=[n(r[1],16),n(r[2],16),n(r[3],16),1]:(r=sn.exec(t))&&(o=[n(r[1]),n(r[2]),n(r[3]),1])}(t),{get:function(n){var r;return i?(r=e(t),r.stops=[].concat(r.stops),qe(i,function(t,e){r.stops[e]=[r.stops[e][0],t.get(n)]})):r=o&&!isNaN(o[0])?"rgb"===n?"rgb("+o[0]+","+o[1]+","+o[2]+")":"a"===n?o[3]:"rgba("+o.join(",")+")":t,r},brighten:function(t){if(i)qe(i,function(e){e.brighten(t)});else if(s(t)&&0!==t){var e;for(e=0;3>e;e++)o[e]+=n(255*t),o[e]<0&&(o[e]=0),o[e]>255&&(o[e]=255)}return this},rgba:o,setOpacity:function(t){return o[3]=t,this}}};M.prototype={opacity:1,textProps:"fontSize,fontWeight,fontFamily,color,lineHeight,width,textDecoration,textShadow,HcTextStroke".split(","),init:function(t,e){this.element="span"===e?m(e):ae.createElementNS(Oe,e),this.renderer=t},animate:function(t,n,r){return n=h(n,Y,!0),en(this),n?(n=e(n,{}),r&&(n.complete=r),tn(this,t,n)):(this.attr(t),r&&r()),this},colorGradient:function(t,n,r){var i,s,a,u,c,p,d,h,f,m,_=this.renderer,g=[];
if(t.linearGradient?s="linearGradient":t.radialGradient&&(s="radialGradient"),s){a=t[s],u=_.gradients,p=t.stops,f=r.radialReference,o(a)&&(t[s]=a={x1:a[0],y1:a[1],x2:a[2],y2:a[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===s&&f&&!l(a.gradientUnits)&&(a=e(a,{cx:f[0]-f[2]/2+a.cx*f[2],cy:f[1]-f[2]/2+a.cy*f[2],r:a.r*f[2],gradientUnits:"userSpaceOnUse"}));for(m in a)"id"!==m&&g.push(m,a[m]);for(m in p)g.push(p[m]);g=g.join(","),u[g]?t=u[g].attr("id"):(a.id=t="highcharts-"+Ie++,u[g]=c=_.createElement(s).attr(a).add(_.defs),c.stops=[],qe(p,function(t){0===t[1].indexOf("rgba")?(i=an(t[1]),d=i.get("rgb"),h=i.get("a")):(d=t[1],h=1),t=_.createElement("stop").attr({offset:t[0],"stop-color":d,"stop-opacity":h}).add(c),c.stops.push(t)})),r.setAttribute(n,"url("+_.url+"#"+t+")")}},attr:function(t,e){var n,r,i,o,s=this.element,a=this;if("string"==typeof t&&e!==z&&(n=t,t={},t[n]=e),"string"==typeof t)a=(this[t+"Getter"]||this._defaultGetter).call(this,t,s);else{for(n in t)r=t[n],o=!1,this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(n)&&(i||(this.symbolAttr(t),i=!0),o=!0),!this.rotation||"x"!==n&&"y"!==n||(this.doTransform=!0),o||(this[n+"Setter"]||this._defaultSetter).call(this,r,n,s),this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(n)&&this.updateShadows(n,r);this.doTransform&&(this.updateTransform(),this.doTransform=!1)}return a},updateShadows:function(t,e){for(var n=this.shadows,r=n.length;r--;)n[r].setAttribute(t,"height"===t?he(e-(n[r].cutHeight||0),0):"d"===t?this.d:e)},addClass:function(t){var e=this.element,n=p(e,"class")||"";return-1===n.indexOf(t)&&p(e,"class",n+" "+t),this},symbolAttr:function(t){var e=this;qe("x,y,r,start,end,width,height,innerR,anchorX,anchorY".split(","),function(n){e[n]=h(t[n],e[n])}),e.attr({d:e.renderer.symbols[e.symbolName](e.x,e.y,e.width,e.height,e)})},clip:function(t){return this.attr("clip-path",t?"url("+this.renderer.url+"#"+t.id+")":xe)},crisp:function(t){var e,n,r={},i=t.strokeWidth||this.strokeWidth||0;n=le(i)%2/2,t.x=pe(t.x||this.x||0)+n,t.y=pe(t.y||this.y||0)+n,t.width=pe((t.width||this.width||0)-2*n),t.height=pe((t.height||this.height||0)-2*n),t.strokeWidth=i;for(e in t)this[e]!==t[e]&&(this[e]=r[e]=t[e]);return r},css:function(e){var r,i,o=this.styles,s={},a=this.element,u="";if(r=!o,e&&e.color&&(e.fill=e.color),o)for(i in e)e[i]!==o[i]&&(s[i]=e[i],r=!0);if(r){if(r=this.textWidth=e&&e.width&&"text"===a.nodeName.toLowerCase()&&n(e.width),o&&(e=t(o,s)),this.styles=e,r&&(ke||!Se&&this.renderer.forExport)&&delete e.width,be&&!Se)f(this.element,e);else{o=function(t,e){return"-"+e.toLowerCase()};for(i in e)u+=i.replace(/([A-Z])/g,o)+":"+e[i]+";";p(a,"style",u)}r&&this.added&&this.renderer.buildText(this)}return this},on:function(t,e){var n=this,r=n.element;return F&&"click"===t?(r.ontouchstart=function(t){n.touchEventFired=q.now(),t.preventDefault(),e.call(r,t)},r.onclick=function(t){(-1===we.indexOf("Android")||q.now()-(n.touchEventFired||0)>1100)&&e.call(r,t)}):r["on"+t]=e,this},setRadialReference:function(t){return this.element.radialReference=t,this},translate:function(t,e){return this.attr({translateX:t,translateY:e})},invert:function(){return this.inverted=!0,this.updateTransform(),this},updateTransform:function(){var t=this.translateX||0,e=this.translateY||0,n=this.scaleX,r=this.scaleY,i=this.inverted,o=this.rotation,s=this.element;i&&(t+=this.attr("width"),e+=this.attr("height")),t=["translate("+t+","+e+")"],i?t.push("rotate(90) scale(-1,1)"):o&&t.push("rotate("+o+" "+(s.getAttribute("x")||0)+" "+(s.getAttribute("y")||0)+")"),(l(n)||l(r))&&t.push("scale("+h(n,1)+" "+h(r,1)+")"),t.length&&s.setAttribute("transform",t.join(" "))},toFront:function(){var t=this.element;return t.parentNode.appendChild(t),this},align:function(t,e,n){var i,o,s,a,u={};return o=this.renderer,s=o.alignedObjects,t?(this.alignOptions=t,this.alignByTranslate=e,(!n||r(n))&&(this.alignTo=i=n||"renderer",c(s,this),s.push(this),n=null)):(t=this.alignOptions,e=this.alignByTranslate,i=this.alignTo),n=h(n,o[i],o),i=t.align,o=t.verticalAlign,s=(n.x||0)+(t.x||0),a=(n.y||0)+(t.y||0),("right"===i||"center"===i)&&(s+=(n.width-(t.width||0))/{right:1,center:2}[i]),u[e?"translateX":"x"]=le(s),("bottom"===o||"middle"===o)&&(a+=(n.height-(t.height||0))/({bottom:1,middle:2}[o]||1)),u[e?"translateY":"y"]=le(a),this[this.placed?"animate":"attr"](u),this.placed=!0,this.alignAttr=u,this},getBBox:function(){var e,n,r=this.bBox,i=this.renderer,o=this.rotation;e=this.element;var s=this.styles,a=o*ye;n=this.textStr;var u;if((""===n||Fe.test(n))&&(u="num."+n.toString().length+(s?"|"+s.fontSize+"|"+s.fontFamily:"")),u&&(r=i.cache[u]),!r){if(e.namespaceURI===Oe||i.forExport){try{r=e.getBBox?t({},e.getBBox()):{width:e.offsetWidth,height:e.offsetHeight}}catch(c){}(!r||r.width<0)&&(r={width:0,height:0})}else r=this.htmlGetBBox();i.isSVG&&(e=r.width,n=r.height,be&&s&&"11px"===s.fontSize&&"16.9"===n.toPrecision(3)&&(r.height=n=14),o&&(r.width=me(n*ge(a))+me(e*_e(a)),r.height=me(n*_e(a))+me(e*ge(a)))),this.bBox=r,u&&(i.cache[u]=r)}return r},show:function(t){return t&&this.element.namespaceURI===Oe?this.element.removeAttribute("visibility"):this.attr({visibility:t?"inherit":"visible"}),this},hide:function(){return this.attr({visibility:"hidden"})},fadeOut:function(t){var e=this;e.animate({opacity:0},{duration:t||150,complete:function(){e.attr({y:-9999})}})},add:function(t){var e,r,i=this.renderer,o=t||i,s=o.element||i.box,a=this.element,u=this.zIndex;if(t&&(this.parentGroup=t),this.parentInverted=t&&t.inverted,void 0!==this.textStr&&i.buildText(this),u&&(o.handleZ=!0,u=n(u)),o.handleZ)for(t=s.childNodes,e=0;e<t.length;e++)if(i=t[e],o=p(i,"zIndex"),i!==a&&(n(o)>u||!l(u)&&l(o))){s.insertBefore(a,i),r=!0;break}return r||s.appendChild(a),this.added=!0,this.onAdd&&this.onAdd(),this},safeRemoveChild:function(t){var e=t.parentNode;e&&e.removeChild(t)},destroy:function(){var t,e,n=this,r=n.element||{},i=n.shadows,o=n.renderer.isSVG&&"SPAN"===r.nodeName&&n.parentGroup;if(r.onclick=r.onmouseout=r.onmouseover=r.onmousemove=r.point=null,en(n),n.clipPath&&(n.clipPath=n.clipPath.destroy()),n.stops){for(e=0;e<n.stops.length;e++)n.stops[e]=n.stops[e].destroy();n.stops=null}for(n.safeRemoveChild(r),i&&qe(i,function(t){n.safeRemoveChild(t)});o&&o.div&&0===o.div.childNodes.length;)r=o.parentGroup,n.safeRemoveChild(o.div),delete o.div,o=r;n.alignTo&&c(n.renderer.alignedObjects,n);for(t in n)delete n[t];return null},shadow:function(t,e,n){var r,i,o,s,a,u,c=[],l=this.element;if(t){for(s=h(t.width,3),a=(t.opacity||.15)/s,u=this.parentInverted?"(-1,-1)":"("+h(t.offsetX,1)+", "+h(t.offsetY,1)+")",r=1;s>=r;r++)i=l.cloneNode(0),o=2*s+1-2*r,p(i,{isShadow:"true",stroke:t.color||"black","stroke-opacity":a*r,"stroke-width":o,transform:"translate"+u,fill:xe}),n&&(p(i,"height",he(p(i,"height")-o,0)),i.cutHeight=o),e?e.element.appendChild(i):l.parentNode.insertBefore(i,l),c.push(i);this.shadows=c}return this},xGetter:function(t){return"circle"===this.element.nodeName&&(t={x:"cx",y:"cy"}[t]||t),this._defaultGetter(t)},_defaultGetter:function(t){return t=h(this[t],this.element?this.element.getAttribute(t):null,0),/^[\-0-9\.]+$/.test(t)&&(t=parseFloat(t)),t},dSetter:function(t,e,n){t&&t.join&&(t=t.join(" ")),/(NaN| {2}|^$)/.test(t)&&(t="M 0 0"),n.setAttribute(e,t),this[e]=t},dashstyleSetter:function(t){var e;if(t=t&&t.toLowerCase()){for(t=t.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),e=t.length;e--;)t[e]=n(t[e])*this["stroke-width"];t=t.join(",").replace("NaN","none"),this.element.setAttribute("stroke-dasharray",t)}},alignSetter:function(t){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[t])},opacitySetter:function(t,e,n){this[e]=t,n.setAttribute(e,t)},titleSetter:function(t){var e=this.element.getElementsByTagName("title")[0];e||(e=ae.createElementNS(Oe,"title"),this.element.appendChild(e)),e.textContent=h(t,"").replace(/<[^>]*>/g,"")},textSetter:function(t){t!==this.textStr&&(delete this.bBox,this.textStr=t,this.added&&this.renderer.buildText(this))},fillSetter:function(t,e,n){"string"==typeof t?n.setAttribute(e,t):t&&this.colorGradient(t,e,n)},zIndexSetter:function(t,e,n){n.setAttribute(e,t),this[e]=t},_defaultSetter:function(t,e,n){n.setAttribute(e,t)}},M.prototype.yGetter=M.prototype.xGetter,M.prototype.translateXSetter=M.prototype.translateYSetter=M.prototype.rotationSetter=M.prototype.verticalAlignSetter=M.prototype.scaleXSetter=M.prototype.scaleYSetter=function(t,e){this[e]=t,this.doTransform=!0},M.prototype["stroke-widthSetter"]=M.prototype.strokeSetter=function(t,e,n){this[e]=t,this.stroke&&this["stroke-width"]?(this.strokeWidth=this["stroke-width"],M.prototype.fillSetter.call(this,this.stroke,"stroke",n),n.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===e&&0===t&&this.hasStroke&&(n.removeAttribute("stroke"),this.hasStroke=!1)};var un=function(){this.init.apply(this,arguments)};un.prototype={Element:M,init:function(t,e,n,r,i){var o,s=location,r=this.createElement("svg").attr({version:"1.1"}).css(this.getStyle(r));o=r.element,t.appendChild(o),-1===t.innerHTML.indexOf("xmlns")&&p(o,"xmlns",Oe),this.isSVG=!0,this.box=o,this.boxWrapper=r,this.alignedObjects=[],this.url=(Ae||Re)&&ae.getElementsByTagName("base").length?s.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",this.createElement("desc").add().element.appendChild(ae.createTextNode("Created with Highcharts 4.0.4")),this.defs=this.createElement("defs").add(),this.forExport=i,this.gradients={},this.cache={},this.setSize(e,n,!1);var a;Ae&&t.getBoundingClientRect&&(this.subPixelFix=e=function(){f(t,{left:0,top:0}),a=t.getBoundingClientRect(),f(t,{left:de(a.left)-a.left+"px",top:de(a.top)-a.top+"px"})},e(),Ke(ue,"resize",e))},getStyle:function(e){return this.style=t({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},e)},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var t=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),P(this.gradients||{}),this.gradients=null,t&&(this.defs=t.destroy()),this.subPixelFix&&Qe(ue,"resize",this.subPixelFix),this.alignedObjects=null},createElement:function(t){var e=new this.Element;return e.init(this,t),e},draw:function(){},buildText:function(t){for(var e,r,i=t.element,o=this,s=o.forExport,a=h(t.textStr,"").toString(),u=-1!==a.indexOf("<"),c=i.childNodes,l=p(i,"x"),d=t.styles,m=t.textWidth,_=d&&d.lineHeight,g=d&&d.HcTextStroke,v=c.length,y=function(t){return _?n(_):o.fontMetrics(/(px|em)$/.test(t&&t.style.fontSize)?t.style.fontSize:d&&d.fontSize||o.style.fontSize||12,t).h};v--;)i.removeChild(c[v]);u||g||-1!==a.indexOf(" ")?(e=/<.*style="([^"]+)".*>/,r=/<.*href="(http[^"]+)".*>/,m&&!t.added&&this.box.appendChild(i),a=u?a.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[a],""===a[a.length-1]&&a.pop(),qe(a,function(n,a){var u,c=0,n=n.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||");u=n.split("|||"),qe(u,function(n){if(""!==n||1===u.length){var h,_={},g=ae.createElementNS(Oe,"tspan");if(e.test(n)&&(h=n.match(e)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),p(g,"style",h)),r.test(n)&&!s&&(p(g,"onclick",'location.href="'+n.match(r)[1]+'"'),f(g,{cursor:"pointer"})),n=(n.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">")," "!==n){if(g.appendChild(ae.createTextNode(n)),c?_.dx=0:a&&null!==l&&(_.x=l),p(g,_),i.appendChild(g),!c&&a&&(!Se&&s&&f(g,{display:"block"}),p(g,"dy",y(g))),m)for(var v,w,n=n.replace(/([^\^])-/g,"$1- ").split(" "),_=u.length>1||n.length>1&&"nowrap"!==d.whiteSpace,E=d.HcHeight,b=[],T=y(g),R=1;_&&(n.length||b.length);)delete t.bBox,v=t.getBBox(),w=v.width,!Se&&o.forExport&&(w=o.measureSpanWidth(g.firstChild.data,t.styles)),v=w>m,v&&1!==n.length?(g.removeChild(g.firstChild),b.unshift(n.pop())):(n=b,b=[],n.length&&(R++,E&&R*T>E?(n=["..."],t.attr("title",t.textStr)):(g=ae.createElementNS(Oe,"tspan"),p(g,{dy:T,x:l}),h&&p(g,"style",h),i.appendChild(g))),w>m&&(m=w)),n.length&&g.appendChild(ae.createTextNode(n.join(" ").replace(/- /g,"-")));c++}}})})):i.appendChild(ae.createTextNode(a))},button:function(n,r,i,o,s,a,u,c,l){var p,d,h,f,m,_,g=this.label(n,r,i,l,null,null,null,null,"button"),v=0,n={x1:0,y1:0,x2:0,y2:1},s=e({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:n,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},s);return h=s.style,delete s.style,a=e(s,{stroke:"#68A",fill:{linearGradient:n,stops:[[0,"#FFF"],[1,"#ACF"]]}},a),f=a.style,delete a.style,u=e(s,{stroke:"#68A",fill:{linearGradient:n,stops:[[0,"#9BD"],[1,"#CDF"]]}},u),m=u.style,delete u.style,c=e(s,{style:{color:"#CCC"}},c),_=c.style,delete c.style,Ke(g.element,be?"mouseover":"mouseenter",function(){3!==v&&g.attr(a).css(f)}),Ke(g.element,be?"mouseout":"mouseleave",function(){3!==v&&(p=[s,a,u][v],d=[h,f,m][v],g.attr(p).css(d))}),g.setState=function(t){(g.state=v=t)?2===t?g.attr(u).css(m):3===t&&g.attr(c).css(_):g.attr(s).css(h)},g.on("click",function(){3!==v&&o.call(g)}).attr(s).css(t({cursor:"default"},h))},crispLine:function(t,e){return t[1]===t[4]&&(t[1]=t[4]=le(t[1])-e%2/2),t[2]===t[5]&&(t[2]=t[5]=le(t[2])+e%2/2),t},path:function(e){var n={fill:xe};return o(e)?n.d=e:i(e)&&t(n,e),this.createElement("path").attr(n)},circle:function(t,e,n){return t=i(t)?t:{x:t,y:e,r:n},e=this.createElement("circle"),e.xSetter=function(t){this.element.setAttribute("cx",t)},e.ySetter=function(t){this.element.setAttribute("cy",t)},e.attr(t)},arc:function(t,e,n,r,o,s){return i(t)&&(e=t.y,n=t.r,r=t.innerR,o=t.start,s=t.end,t=t.x),t=this.symbol("arc",t||0,e||0,n||0,n||0,{innerR:r||0,start:o||0,end:s||0}),t.r=n,t},rect:function(t,e,n,r,o,s){var o=i(t)?t.r:o,a=this.createElement("rect"),t=i(t)?t:t===z?{}:{x:t,y:e,width:he(n,0),height:he(r,0)};return s!==z&&(t.strokeWidth=s,t=a.crisp(t)),o&&(t.r=o),a.rSetter=function(t){p(this.element,{rx:t,ry:t})},a.attr(t)},setSize:function(t,e,n){var r=this.alignedObjects,i=r.length;for(this.width=t,this.height=e,this.boxWrapper[h(n,!0)?"animate":"attr"]({width:t,height:e});i--;)r[i].align()},g:function(t){var e=this.createElement("g");return l(t)?e.attr({"class":"highcharts-"+t}):e},image:function(e,n,r,i,o){var s={preserveAspectRatio:xe};return arguments.length>1&&t(s,{x:n,y:r,width:i,height:o}),s=this.createElement("image").attr(s),s.element.setAttributeNS?s.element.setAttributeNS("http://www.w3.org/1999/xlink","href",e):s.element.setAttribute("hc-svg-href",e),s},symbol:function(e,n,r,i,o,s){var a,u,c,l=this.symbols[e],l=l&&l(le(n),le(r),i,o,s),p=/^url\((.*?)\)$/;return l?(a=this.path(l),t(a,{symbolName:e,x:n,y:r,width:i,height:o}),s&&t(a,s)):p.test(e)&&(c=function(t,e){t.element&&(t.attr({width:e[0],height:e[1]}),t.alignByTranslate||t.translate(le((i-e[0])/2),le((o-e[1])/2)))},u=e.match(p)[1],e=Me[u]||s&&s.width&&s.height&&[s.width,s.height],a=this.image(u).attr({x:n,y:r}),a.isImg=!0,e?c(a,e):(a.attr({width:0,height:0}),m("img",{onload:function(){c(a,Me[u]=[this.width,this.height])},src:u}))),a},symbols:{circle:function(t,e,n,r){var i=.166*n;return["M",t+n/2,e,"C",t+n+i,e,t+n+i,e+r,t+n/2,e+r,"C",t-i,e+r,t-i,e,t+n/2,e,"Z"]},square:function(t,e,n,r){return["M",t,e,"L",t+n,e,t+n,e+r,t,e+r,"Z"]},triangle:function(t,e,n,r){return["M",t+n/2,e,"L",t+n,e+r,t,e+r,"Z"]},"triangle-down":function(t,e,n,r){return["M",t,e,"L",t+n,e,t+n/2,e+r,"Z"]},diamond:function(t,e,n,r){return["M",t+n/2,e,"L",t+n,e+r/2,t+n/2,e+r,t,e+r/2,"Z"]},arc:function(t,e,n,r,i){var o=i.start,n=i.r||n||r,s=i.end-.001,r=i.innerR,a=i.open,u=_e(o),c=ge(o),l=_e(s),s=ge(s),i=i.end-o<ve?0:1;return["M",t+n*u,e+n*c,"A",n,n,0,i,1,t+n*l,e+n*s,a?"M":"L",t+r*l,e+r*s,"A",r,r,0,i,0,t+r*u,e+r*c,a?"":"Z"]},callout:function(t,e,n,r,i){var o=fe(i&&i.r||0,n,r),s=o+6,a=i&&i.anchorX,u=i&&i.anchorY,i=le(i.strokeWidth||0)%2/2;return t+=i,e+=i,i=["M",t+o,e,"L",t+n-o,e,"C",t+n,e,t+n,e,t+n,e+o,"L",t+n,e+r-o,"C",t+n,e+r,t+n,e+r,t+n-o,e+r,"L",t+o,e+r,"C",t,e+r,t,e+r,t,e+r-o,"L",t,e+o,"C",t,e,t,e,t+o,e],a&&a>n&&u>e+s&&e+r-s>u?i.splice(13,3,"L",t+n,u-6,t+n+6,u,t+n,u+6,t+n,e+r-o):a&&0>a&&u>e+s&&e+r-s>u?i.splice(33,3,"L",t,u+6,t-6,u,t,u-6,t,e+o):u&&u>r&&a>t+s&&t+n-s>a?i.splice(23,3,"L",a+6,e+r,a,e+r+6,a-6,e+r,t+o,e+r):u&&0>u&&a>t+s&&t+n-s>a&&i.splice(3,3,"L",a-6,e,a,e-6,a+6,e,n-o,e),i}},clipRect:function(t,e,n,r){var i="highcharts-"+Ie++,o=this.createElement("clipPath").attr({id:i}).add(this.defs),t=this.rect(t,e,n,r,0).add(o);return t.id=i,t.clipPath=o,t},text:function(t,e,n,r){var i=ke||!Se&&this.forExport,o={};return r&&!this.forExport?this.html(t,e,n):(o.x=Math.round(e||0),n&&(o.y=Math.round(n)),(t||0===t)&&(o.text=t),t=this.createElement("text").attr(o),i&&t.css({position:"absolute"}),r||(t.xSetter=function(t,e,n){var r,i,o=n.getElementsByTagName("tspan"),s=n.getAttribute(e);for(i=0;i<o.length;i++)r=o[i],r.getAttribute(e)===s&&r.setAttribute(e,t);n.setAttribute(e,t)}),t)},fontMetrics:function(t,e){t=t||this.style.fontSize,e&&ue.getComputedStyle&&(e=e.element||e,t=ue.getComputedStyle(e,"").fontSize);var t=/px/.test(t)?n(t):/em/.test(t)?12*parseFloat(t):12,r=24>t?t+4:le(1.2*t),i=le(.8*r);return{h:r,b:i,f:t}},label:function(n,r,i,o,s,a,u,c,p){function d(){var e,n;e=A.element.style,_=(void 0===g||void 0===v||R.styles.textAlign)&&A.textStr&&A.getBBox(),R.width=(g||_.width||0)+2*O+S,R.height=(v||_.height||0)+2*O,E=O+T.fontMetrics(e&&e.fontSize,A).b,b&&(m||(e=le(-P*O),n=c?-E:0,R.box=m=o?T.symbol(o,e,n,R.width,R.height,k):T.rect(e,n,R.width,R.height,0,k[Ue]),m.attr("fill",xe).add(R)),m.isImg||m.attr(t({width:le(R.width),height:le(R.height)},k)),k=null)}function h(){var t,e=R.styles,e=e&&e.textAlign,n=S+O*(1-P);t=c?0:E,l(g)&&_&&("center"===e||"right"===e)&&(n+={center:.5,right:1}[e]*(g-_.width)),(n!==A.x||t!==A.y)&&(A.attr("x",n),t!==z&&A.attr("y",t)),A.x=n,A.y=t}function f(t,e){m?m.attr(t,e):k[t]=e}var m,_,g,v,y,w,E,b,T=this,R=T.g(p),A=T.text("",0,0,u).attr({zIndex:1}),P=0,O=3,S=0,C=0,k={};R.onAdd=function(){A.add(R),R.attr({text:n||0===n?n:"",x:r,y:i}),m&&l(s)&&R.attr({anchorX:s,anchorY:a})},R.widthSetter=function(t){g=t},R.heightSetter=function(t){v=t},R.paddingSetter=function(t){l(t)&&t!==O&&(O=t,h())},R.paddingLeftSetter=function(t){l(t)&&t!==S&&(S=t,h())},R.alignSetter=function(t){P={left:0,center:.5,right:1}[t]},R.textSetter=function(t){t!==z&&A.textSetter(t),d(),h()},R["stroke-widthSetter"]=function(t,e){t&&(b=!0),C=t%2/2,f(e,t)},R.strokeSetter=R.fillSetter=R.rSetter=function(t,e){"fill"===e&&t&&(b=!0),f(e,t)},R.anchorXSetter=function(t,e){s=t,f(e,t+C-y)},R.anchorYSetter=function(t,e){a=t,f(e,t-w)},R.xSetter=function(t){R.x=t,P&&(t-=P*((g||_.width)+O)),y=le(t),R.attr("translateX",y)},R.ySetter=function(t){w=R.y=le(t),R.attr("translateY",w)};var I=R.css;return t(R,{css:function(t){if(t){var n={},t=e(t);qe(R.textProps,function(e){t[e]!==z&&(n[e]=t[e],delete t[e])}),A.css(n)}return I.call(R,t)},getBBox:function(){return{width:_.width+2*O,height:_.height+2*O,x:_.x-O,y:_.y-O}},shadow:function(t){return m&&m.shadow(t),R},destroy:function(){Qe(R.element,"mouseenter"),Qe(R.element,"mouseleave"),A&&(A=A.destroy()),m&&(m=m.destroy()),M.prototype.destroy.call(R),R=T=d=h=f=null}})}},x=un,t(M.prototype,{htmlCss:function(e){var n=this.element;return(n=e&&"SPAN"===n.tagName&&e.width)&&(delete e.width,this.textWidth=n,this.updateTransform()),this.styles=t(this.styles,e),f(this.element,e),this},htmlGetBBox:function(){var t=this.element,e=this.bBox;return e||("text"===t.nodeName&&(t.style.position="absolute"),e=this.bBox={x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}),e},htmlUpdateTransform:function(){if(this.added){var t=this.renderer,e=this.element,r=this.translateX||0,i=this.translateY||0,o=this.x||0,s=this.y||0,a=this.textAlign||"left",u={left:0,center:.5,right:1}[a],c=this.shadows;if(f(e,{marginLeft:r,marginTop:i}),c&&qe(c,function(t){f(t,{marginLeft:r+1,marginTop:i+1})}),this.inverted&&qe(e.childNodes,function(n){t.invertChild(n,e)}),"SPAN"===e.tagName){var p,d=this.rotation,m=n(this.textWidth),_=[d,a,e.innerHTML,this.textWidth].join(",");_!==this.cTT&&(p=t.fontMetrics(e.style.fontSize).b,l(d)&&this.setSpanRotation(d,u,p),c=h(this.elemWidth,e.offsetWidth),c>m&&/[ \-]/.test(e.textContent||e.innerText)&&(f(e,{width:m+"px",display:"block",whiteSpace:"normal"}),c=m),this.getSpanCorrection(c,p,u,d,a)),f(e,{left:o+(this.xCorr||0)+"px",top:s+(this.yCorr||0)+"px"}),Re&&(p=e.offsetHeight),this.cTT=_}}else this.alignOnAdd=!0},setSpanRotation:function(t,e,n){var r={},i=be?"-ms-transform":Re?"-webkit-transform":Ae?"MozTransform":Ee?"-o-transform":"";r[i]=r.transform="rotate("+t+"deg)",r[i+(Ae?"Origin":"-origin")]=r.transformOrigin=100*e+"% "+n+"px",f(this.element,r)},getSpanCorrection:function(t,e,n){this.xCorr=-t*n,this.yCorr=-e}}),t(un.prototype,{html:function(e,n,r){var i=this.createElement("span"),o=i.element,s=i.renderer;return i.textSetter=function(t){t!==o.innerHTML&&delete this.bBox,o.innerHTML=this.textStr=t},i.xSetter=i.ySetter=i.alignSetter=i.rotationSetter=function(t,e){"align"===e&&(e="textAlign"),i[e]=t,i.htmlUpdateTransform()},i.attr({text:e,x:le(n),y:le(r)}).css({position:"absolute",whiteSpace:"nowrap",fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),i.css=i.htmlCss,s.isSVG&&(i.add=function(e){var n,r=s.box.parentNode,a=[];if(this.parentGroup=e){if(n=e.div,!n){for(;e;)a.push(e),e=e.parentGroup;qe(a.reverse(),function(e){var i;n=e.div=e.div||m(ze,{className:p(e.element,"class")},{position:"absolute",left:(e.translateX||0)+"px",top:(e.translateY||0)+"px"},n||r),i=n.style,t(e,{translateXSetter:function(t,n){i.left=t+"px",e[n]=t,e.doTransform=!0},translateYSetter:function(t,n){i.top=t+"px",e[n]=t,e.doTransform=!0},visibilitySetter:function(t,e){i[e]=t}})})}}else n=r;return n.appendChild(o),i.added=!0,i.alignOnAdd&&i.htmlUpdateTransform(),i}),i}});var cn;if(!Se&&!ke){cn={init:function(t,e){var n=["<",e,' filled="f" stroked="f"'],r=["position: ","absolute",";"],i=e===ze;("shape"===e||i)&&r.push("left:0;top:0;width:1px;height:1px;"),r.push("visibility: ",i?"hidden":"visible"),n.push(' style="',r.join(""),'"/>'),e&&(n=i||"span"===e||"img"===e?n.join(""):t.prepVML(n),this.element=m(n)),this.renderer=t},add:function(t){var e=this.renderer,n=this.element,r=e.box,r=t?t.element||t:r;return t&&t.inverted&&e.invertChild(n,r),r.appendChild(n),this.added=!0,this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform(),this.onAdd&&this.onAdd(),this},updateTransform:M.prototype.htmlUpdateTransform,setSpanRotation:function(){var t=this.rotation,e=_e(t*ye),n=ge(t*ye);f(this.element,{filter:t?["progid:DXImageTransform.Microsoft.Matrix(M11=",e,", M12=",-n,", M21=",n,", M22=",e,", sizingMethod='auto expand')"].join(""):xe})},getSpanCorrection:function(t,e,n,r,i){var o,s=r?_e(r*ye):1,a=r?ge(r*ye):0,u=h(this.elemHeight,this.element.offsetHeight);this.xCorr=0>s&&-t,this.yCorr=0>a&&-u,o=0>s*a,this.xCorr+=a*e*(o?1-n:n),this.yCorr-=s*e*(r?o?n:1-n:1),i&&"left"!==i&&(this.xCorr-=t*n*(0>s?-1:1),r&&(this.yCorr-=u*n*(0>a?-1:1)),f(this.element,{textAlign:i}))},pathToVML:function(t){for(var e=t.length,n=[];e--;)s(t[e])?n[e]=le(10*t[e])-5:"Z"===t[e]?n[e]="x":(n[e]=t[e],!t.isArc||"wa"!==t[e]&&"at"!==t[e]||(n[e+5]===n[e+7]&&(n[e+7]+=t[e+7]>t[e+5]?1:-1),n[e+6]===n[e+8]&&(n[e+8]+=t[e+8]>t[e+6]?1:-1)));return n.join(" ")||"x"},clip:function(t){var e,n=this;return t?(e=t.members,c(e,n),e.push(n),n.destroyClip=function(){c(e,n)},t=t.getCSS(n)):(n.destroyClip&&n.destroyClip(),t={clip:Te?"inherit":"rect(auto)"}),n.css(t)},css:M.prototype.htmlCss,safeRemoveChild:function(t){t.parentNode&&O(t)},destroy:function(){return this.destroyClip&&this.destroyClip(),M.prototype.destroy.apply(this)},on:function(t,e){return this.element["on"+t]=function(){var t=ue.event;t.target=t.srcElement,e(t)},this},cutOffPath:function(t,e){var r,t=t.split(/[ ,]/);return r=t.length,(9===r||11===r)&&(t[r-4]=t[r-2]=n(t[r-2])-10*e),t.join(" ")},shadow:function(t,e,r){var i,o,s,a,u,c,l,p=[],d=this.element,f=this.renderer,_=d.style,g=d.path;if(g&&"string"!=typeof g.value&&(g="x"),u=g,t){for(c=h(t.width,3),l=(t.opacity||.15)/c,i=1;3>=i;i++)a=2*c+1-2*i,r&&(u=this.cutOffPath(g.value,a+.5)),s=['<shape isShadow="true" strokeweight="',a,'" filled="false" path="',u,'" coordsize="10 10" style="',d.style.cssText,'" />'],o=m(f.prepVML(s),null,{left:n(_.left)+h(t.offsetX,1),top:n(_.top)+h(t.offsetY,1)}),r&&(o.cutOff=a+1),s=['<stroke color="',t.color||"black",'" opacity="',l*i,'"/>'],m(f.prepVML(s),null,null,o),e?e.element.appendChild(o):d.parentNode.insertBefore(o,d),p.push(o);this.shadows=p}return this},updateShadows:De,setAttr:function(t,e){Te?this.element[t]=e:this.element.setAttribute(t,e)},classSetter:function(t){this.element.className=t},dashstyleSetter:function(t,e,n){(n.getElementsByTagName("stroke")[0]||m(this.renderer.prepVML(["<stroke/>"]),null,null,n))[e]=t||"solid",this[e]=t},dSetter:function(t,e,n){var r=this.shadows,t=t||[];if(this.d=t.join&&t.join(" "),n.path=t=this.pathToVML(t),r)for(n=r.length;n--;)r[n].path=r[n].cutOff?this.cutOffPath(t,r[n].cutOff):t;this.setAttr(e,t)},fillSetter:function(t,e,n){var r=n.nodeName;"SPAN"===r?n.style.color=t:"IMG"!==r&&(n.filled=t!==xe,this.setAttr("fillcolor",this.renderer.color(t,n,e,this)))},opacitySetter:De,rotationSetter:function(t,e,n){n=n.style,this[e]=n[e]=t,n.left=-le(ge(t*ye)+1)+"px",n.top=le(_e(t*ye))+"px"},strokeSetter:function(t,e,n){this.setAttr("strokecolor",this.renderer.color(t,n,e))},"stroke-widthSetter":function(t,e,n){n.stroked=!!t,this[e]=t,s(t)&&(t+="px"),this.setAttr("strokeweight",t)},titleSetter:function(t,e){this.setAttr(e,t)},visibilitySetter:function(t,e,n){"inherit"===t&&(t="visible"),this.shadows&&qe(this.shadows,function(n){n.style[e]=t}),"DIV"===n.nodeName&&(t="hidden"===t?"-999em":0,Te||(n.style[e]=t?"visible":"hidden"),e="top"),n.style[e]=t},xSetter:function(t,e,n){this[e]=t,"x"===e?e="left":"y"===e&&(e="top"),this.updateClipping?(this[e]=t,this.updateClipping()):n.style[e]=t},zIndexSetter:function(t,e,n){n.style[e]=t}},se.VMLElement=cn=_(M,cn),cn.prototype.ySetter=cn.prototype.widthSetter=cn.prototype.heightSetter=cn.prototype.xSetter;var ln={Element:cn,isIE8:we.indexOf("MSIE 8.0")>-1,init:function(e,n,r,i){var o;if(this.alignedObjects=[],i=this.createElement(ze).css(t(this.getStyle(i),{position:"relative"})),o=i.element,e.appendChild(i.element),this.isVML=!0,this.box=o,this.boxWrapper=i,this.cache={},this.setSize(n,r,!1),!ae.namespaces.hcv){ae.namespaces.add("hcv","urn:schemas-microsoft-com:vml");try{ae.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}catch(s){ae.styleSheets[0].cssText+="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(e,n,r,o){var s=this.createElement(),a=i(e);return t(s,{members:[],left:(a?e.x:e)+1,top:(a?e.y:n)+1,width:(a?e.width:r)-1,height:(a?e.height:o)-1,getCSS:function(e){var n=e.element,r=n.nodeName,e=e.inverted,i=this.top-("shape"===r?n.offsetTop:0),o=this.left,n=o+this.width,s=i+this.height,i={clip:"rect("+le(e?o:i)+"px,"+le(e?s:n)+"px,"+le(e?n:s)+"px,"+le(e?i:o)+"px)"};return!e&&Te&&"DIV"===r&&t(i,{width:n+"px",height:s+"px"}),i},updateClipping:function(){qe(s.members,function(t){t.element&&t.css(s.getCSS(t))})}})},color:function(t,e,n,r){var i,o,s,a=this,u=/^rgba/,c=xe;if(t&&t.linearGradient?s="gradient":t&&t.radialGradient&&(s="pattern"),s){var l,p,d,h,f,_,g,v,y=t.linearGradient||t.radialGradient,w="",t=t.stops,E=[],b=function(){o=['<fill colors="'+E.join(",")+'" opacity="',f,'" o:opacity2="',h,'" type="',s,'" ',w,'focus="100%" method="any" />'],m(a.prepVML(o),null,null,e)};if(d=t[0],v=t[t.length-1],d[0]>0&&t.unshift([0,d[1]]),v[0]<1&&t.push([1,v[1]]),qe(t,function(t,e){u.test(t[1])?(i=an(t[1]),l=i.get("rgb"),p=i.get("a")):(l=t[1],p=1),E.push(100*t[0]+"% "+l),e?(f=p,_=l):(h=p,g=l)}),"fill"===n)if("gradient"===s)n=y.x1||y[0]||0,t=y.y1||y[1]||0,d=y.x2||y[2]||0,y=y.y2||y[3]||0,w='angle="'+(90-180*ce.atan((y-t)/(d-n))/ve)+'"',b();else{var T,c=y.r,R=2*c,A=2*c,P=y.cx,O=y.cy,S=e.radialReference,c=function(){S&&(T=r.getBBox(),P+=(S[0]-T.x)/T.width-.5,O+=(S[1]-T.y)/T.height-.5,R*=S[2]/T.width,A*=S[2]/T.height),w='src="'+G.global.VMLRadialGradientURL+'" size="'+R+","+A+'" origin="0.5,0.5" position="'+P+","+O+'" color2="'+g+'" ',b()};r.added?c():r.onAdd=c,c=_}else c=l}else u.test(t)&&"IMG"!==e.tagName?(i=an(t),o=["<",n,' opacity="',i.get("a"),'"/>'],m(this.prepVML(o),null,null,e),c=i.get("rgb")):(c=e.getElementsByTagName(n),c.length&&(c[0].opacity=1,c[0].type="solid"),c=t);return c},prepVML:function(t){var e=this.isIE8,t=t.join("");return e?(t=t.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),t=-1===t.indexOf('style="')?t.replace("/>",' style="display:inline-block;behavior:url(#default#VML);" />'):t.replace('style="','style="display:inline-block;behavior:url(#default#VML);')):t=t.replace("<","<hcv:"),t},text:un.prototype.html,path:function(e){var n={coordsize:"10 10"};return o(e)?n.d=e:i(e)&&t(n,e),this.createElement("shape").attr(n)},circle:function(t,e,n){var r=this.symbol("circle");return i(t)&&(n=t.r,e=t.y,t=t.x),r.isCircle=!0,r.r=n,r.attr({x:t,y:e})},g:function(t){var e;return t&&(e={className:"highcharts-"+t,"class":"highcharts-"+t}),this.createElement(ze).attr(e)},image:function(t,e,n,r,i){var o=this.createElement("img").attr({src:t});return arguments.length>1&&o.attr({x:e,y:n,width:r,height:i}),o},createElement:function(t){return"rect"===t?this.symbol(t):un.prototype.createElement.call(this,t)},invertChild:function(t,e){var r=this,i=e.style,o="IMG"===t.tagName&&t.style;f(t,{flip:"x",left:n(i.width)-(o?n(o.top):1),top:n(i.height)-(o?n(o.left):1),rotation:-90}),qe(t.childNodes,function(e){r.invertChild(e,t)})},symbols:{arc:function(t,e,n,r,i){var o=i.start,s=i.end,a=i.r||n||r,n=i.innerR,r=_e(o),u=ge(o),c=_e(s),l=ge(s);return s-o===0?["x"]:(o=["wa",t-a,e-a,t+a,e+a,t+a*r,e+a*u,t+a*c,e+a*l],i.open&&!n&&o.push("e","M",t,e),o.push("at",t-n,e-n,t+n,e+n,t+n*c,e+n*l,t+n*r,e+n*u,"x","e"),o.isArc=!0,o)},circle:function(t,e,n,r,i){return i&&(n=r=2*i.r),i&&i.isCircle&&(t-=n/2,e-=r/2),["wa",t,e,t+n,e+r,t+n,e+r/2,t+n,e+r/2,"e"]},rect:function(t,e,n,r,i){return un.prototype.symbols[l(i)&&i.r?"callout":"square"].call(0,t,e,n,r,i)}}};se.VMLRenderer=cn=function(){this.init.apply(this,arguments)},cn.prototype=e(un.prototype,ln),x=cn}un.prototype.measureSpanWidth=function(t,e){var n,r=ae.createElement("span");return n=ae.createTextNode(t),r.appendChild(n),f(r,e),this.box.appendChild(r),n=r.offsetWidth,O(r),n};var pn;ke&&(se.CanVGRenderer=cn=function(){Oe="http://www.w3.org/1999/xhtml"},cn.prototype.symbols={},pn=function(){function t(){var t,n=e.length;for(t=0;n>t;t++)e[t]();e=[]}var e=[];return{push:function(n,r){0===e.length&&Ve(r,t),e.push(n)}}}(),x=cn),I.prototype={addLabel:function(){var e,n=this.axis,r=n.options,i=n.chart,o=n.horiz,a=n.categories,c=n.names,p=this.pos,d=r.labels,f=d.rotation,m=n.tickPositions,o=o&&a&&!d.step&&!d.staggerLines&&!d.rotation&&i.plotWidth/m.length||!o&&(i.margin[3]||.33*i.chartWidth),_=p===m[0],g=p===m[m.length-1],c=a?h(a[p],c[p],p):p,a=this.label,v=m.info;n.isDatetimeAxis&&v&&(e=r.dateTimeLabelFormats[v.higherRanks[p]||v.unitName]),this.isFirst=_,this.isLast=g,r=n.labelFormatter.call({axis:n,chart:i,isFirst:_,isLast:g,dateTimeLabelFormat:e,value:n.isLog?S(u(c)):c}),p=o&&{width:he(1,le(o-2*(d.padding||10)))+"px"},l(a)?a&&a.attr({text:r}).css(p):(e={align:n.labelAlign},s(f)&&(e.rotation=f),o&&d.ellipsis&&(p.HcHeight=n.len/m.length),this.label=a=l(r)&&d.enabled?i.renderer.text(r,0,0,d.useHTML).attr(e).css(t(p,d.style)).add(n.labelGroup):null,n.tickBaseline=i.renderer.fontMetrics(d.style.fontSize,a).b,f&&2===n.side&&(n.tickBaseline*=_e(f*ye))),this.yOffset=a?h(d.y,n.tickBaseline+(2===n.side?8:-(a.getBBox().height/2))):0
},getLabelSize:function(){var t=this.label,e=this.axis;return t?t.getBBox()[e.horiz?"height":"width"]:0},getLabelSides:function(){var t=this.label.getBBox(),e=this.axis,n=e.horiz,r=e.options.labels,t=n?t.width:t.height,e=n?r.x-t*{left:0,center:.5,right:1}[e.labelAlign]:0;return[e,n?t+e:t]},handleOverflow:function(t,e){var n,r,i,o=!0,s=this.axis,a=this.isFirst,u=this.isLast,c=s.horiz?e.x:e.y,l=s.reversed,p=s.tickPositions,d=this.getLabelSides(),h=d[0],d=d[1],f=this.label.line;if(n=f||0,r=s.labelEdge,i=s.justifyLabels&&(a||u),r[n]===z||c+h>r[n]?r[n]=c+d:i||(o=!1),i){n=(r=s.justifyToPlot)?s.pos:0,r=r?n+s.len:s.chart.chartWidth;do t+=a?1:-1,i=s.ticks[p[t]];while(p[t]&&(!i||!i.label||i.label.line!==f));s=i&&i.label.xy&&i.label.xy.x+i.getLabelSides()[a?0:1],a&&!l||u&&l?n>c+h&&(c=n-h,i&&c+d>s&&(o=!1)):c+d>r&&(c=r-d,i&&s>c+h&&(o=!1)),e.x=c}return o},getPosition:function(t,e,n,r){var i=this.axis,o=i.chart,s=r&&o.oldChartHeight||o.chartHeight;return{x:t?i.translate(e+n,null,null,r)+i.transB:i.left+i.offset+(i.opposite?(r&&o.oldChartWidth||o.chartWidth)-i.right-i.left:0),y:t?s-i.bottom+i.offset-(i.opposite?i.height:0):s-i.translate(e+n,null,null,r)-i.transB}},getLabelPosition:function(t,e,n,r,i,o,s,a){var u=this.axis,c=u.transA,l=u.reversed,p=u.staggerLines,t=t+i.x-(o&&r?o*c*(l?-1:1):0),e=e+this.yOffset-(o&&!r?o*c*(l?1:-1):0);return p&&(n.line=s/(a||1)%p,e+=n.line*(u.labelOffset/p)),{x:t,y:e}},getMarkPath:function(t,e,n,r,i,o){return o.crispLine(["M",t,e,"L",t+(i?0:-n),e+(i?n:0)],r)},render:function(t,e,n){var r=this.axis,i=r.options,o=r.chart.renderer,s=r.horiz,a=this.type,u=this.label,c=this.pos,l=i.labels,p=this.gridLine,d=a?a+"Grid":"grid",f=a?a+"Tick":"tick",m=i[d+"LineWidth"],_=i[d+"LineColor"],g=i[d+"LineDashStyle"],v=i[f+"Length"],d=i[f+"Width"]||0,y=i[f+"Color"],w=i[f+"Position"],f=this.mark,E=l.step,b=!0,T=r.tickmarkOffset,R=this.getPosition(s,c,T,e),A=R.x,R=R.y,P=s&&A===r.pos+r.len||!s&&R===r.pos?-1:1,n=h(n,1);this.isActive=!0,m&&(c=r.getPlotLinePath(c+T,m*P,e,!0),p===z&&(p={stroke:_,"stroke-width":m},g&&(p.dashstyle=g),a||(p.zIndex=1),e&&(p.opacity=0),this.gridLine=p=m?o.path(c).attr(p).add(r.gridGroup):null),!e&&p&&c&&p[this.isNew?"attr":"animate"]({d:c,opacity:n})),d&&v&&("inside"===w&&(v=-v),r.opposite&&(v=-v),a=this.getMarkPath(A,R,v,d*P,s,o),f?f.animate({d:a,opacity:n}):this.mark=o.path(a).attr({stroke:y,"stroke-width":d,opacity:n}).add(r.axisGroup)),u&&!isNaN(A)&&(u.xy=R=this.getLabelPosition(A,R,u,s,l,T,t,E),this.isFirst&&!this.isLast&&!h(i.showFirstLabel,1)||this.isLast&&!this.isFirst&&!h(i.showLastLabel,1)?b=!1:!r.isRadial&&!l.step&&!l.rotation&&!e&&0!==n&&(b=this.handleOverflow(t,R)),E&&t%E&&(b=!1),b&&!isNaN(R.y)?(R.opacity=n,u[this.isNew?"attr":"animate"](R),this.isNew=!1):u.attr("y",-9999))},destroy:function(){P(this,this.axis)}},se.PlotLineOrBand=function(t,e){this.axis=t,e&&(this.options=e,this.id=e.id)},se.PlotLineOrBand.prototype={render:function(){var t,n=this,r=n.axis,i=r.horiz,o=(r.pointRange||0)/2,s=n.options,u=s.label,c=n.label,p=s.width,d=s.to,h=s.from,f=l(h)&&l(d),m=s.value,_=s.dashStyle,g=n.svgElem,v=[],y=s.color,w=s.zIndex,E=s.events,b={},T=r.chart.renderer;if(r.isLog&&(h=a(h),d=a(d),m=a(m)),p)v=r.getPlotLinePath(m,p),b={stroke:y,"stroke-width":p},_&&(b.dashstyle=_);else{if(!f)return;h=he(h,r.min-o),d=fe(d,r.max+o),v=r.getPlotBandPath(h,d,s),y&&(b.fill=y),s.borderWidth&&(b.stroke=s.borderColor,b["stroke-width"]=s.borderWidth)}if(l(w)&&(b.zIndex=w),g)v?g.animate({d:v},null,g.onGetPath):(g.hide(),g.onGetPath=function(){g.show()},c&&(n.label=c=c.destroy()));else if(v&&v.length&&(n.svgElem=g=T.path(v).attr(b).add(),E))for(t in o=function(t){g.on(t,function(e){E[t].apply(n,[e])})},E)o(t);return u&&l(u.text)&&v&&v.length&&r.width>0&&r.height>0?(u=e({align:i&&f&&"center",x:i?!f&&4:10,verticalAlign:!i&&f&&"middle",y:i?f?16:10:f?6:-4,rotation:i&&!f&&90},u),c||(b={align:u.textAlign||u.align,rotation:u.rotation},l(w)&&(b.zIndex=w),n.label=c=T.text(u.text,0,0,u.useHTML).attr(b).css(u.style).add()),r=[v[1],v[4],f?v[6]:v[1]],f=[v[2],v[5],f?v[7]:v[2]],v=R(r),i=R(f),c.align(u,!1,{x:v,y:i,width:A(r)-v,height:A(f)-i}),c.show()):c&&c.hide(),n},destroy:function(){c(this.axis.plotLinesAndBands,this),delete this.axis,P(this)}},D.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:Ye,lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#707070"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return g(this.total,-1)},style:Ye.style}},defaultLeftAxisOptions:{labels:{x:-15,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{x:0,y:null},title:{rotation:0}},defaultTopAxisOptions:{labels:{x:0,y:-15},title:{rotation:0}},init:function(t,e){var n=e.isX;this.horiz=t.inverted?!n:n,this.coll=(this.isXAxis=n)?"xAxis":"yAxis",this.opposite=e.opposite,this.side=e.side||(this.horiz?this.opposite?0:2:this.opposite?1:3),this.setOptions(e);var r=this.options,i=r.type;this.labelFormatter=r.labels.formatter||this.defaultLabelFormatter,this.userOptions=e,this.minPixelPadding=0,this.chart=t,this.reversed=r.reversed,this.zoomEnabled=r.zoomEnabled!==!1,this.categories=r.categories||"category"===i,this.names=[],this.isLog="logarithmic"===i,this.isDatetimeAxis="datetime"===i,this.isLinked=l(r.linkedTo),this.tickmarkOffset=this.categories&&"between"===r.tickmarkPlacement&&1===h(r.tickInterval,1)?.5:0,this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len=0,this.minRange=this.userMinRange=r.minRange||r.maxZoom,this.range=r.range,this.offset=r.offset||0,this.stacks={},this.oldStacks={},this.min=this.max=null,this.crosshair=h(r.crosshair,d(t.options.tooltip.crosshairs)[n?0:1],!1);var o,r=this.options.events;-1===We(this,t.axes)&&(n&&!this.isColorAxis?t.axes.splice(t.xAxis.length,0,this):t.axes.push(this),t[this.coll].push(this)),this.series=this.series||[],t.inverted&&n&&this.reversed===z&&(this.reversed=!0),this.removePlotLine=this.removePlotBand=this.removePlotBandOrLine;for(o in r)Ke(this,o,r[o]);this.isLog&&(this.val2lin=a,this.lin2val=u)},setOptions:function(t){this.options=e(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],e(G[this.coll],t))},defaultLabelFormatter:function(){var t,e=this.axis,n=this.value,r=e.categories,i=this.dateTimeLabelFormat,o=G.lang.numericSymbols,s=o&&o.length,a=e.options.labels.format,e=e.isLog?n:e.tickInterval;if(a)t=w(a,this);else if(r)t=n;else if(i)t=j(i,n);else if(s&&e>=1e3)for(;s--&&t===z;)r=Math.pow(1e3,s+1),e>=r&&null!==o[s]&&(t=g(n/r,-1)+o[s]);return t===z&&(t=me(n)>=1e4?g(n,0):g(n,-1,z,"")),t},getSeriesExtremes:function(){var t=this,e=t.chart;t.hasVisibleSeries=!1,t.dataMin=t.dataMax=t.ignoreMinPadding=t.ignoreMaxPadding=null,t.buildStacks&&t.buildStacks(),qe(t.series,function(n){if(n.visible||!e.options.chart.ignoreHiddenSeries){var r;r=n.options.threshold;var i;t.hasVisibleSeries=!0,t.isLog&&0>=r&&(r=null),t.isXAxis?(r=n.xData,r.length&&(t.dataMin=fe(h(t.dataMin,r[0]),R(r)),t.dataMax=he(h(t.dataMax,r[0]),A(r)))):(n.getExtremes(),i=n.dataMax,n=n.dataMin,l(n)&&l(i)&&(t.dataMin=fe(h(t.dataMin,n),n),t.dataMax=he(h(t.dataMax,i),i)),l(r)&&(t.dataMin>=r?(t.dataMin=r,t.ignoreMinPadding=!0):t.dataMax<r&&(t.dataMax=r,t.ignoreMaxPadding=!0)))}})},translate:function(t,e,n,r,i,o){var a=1,u=0,c=r?this.oldTransA:this.transA,r=r?this.oldMin:this.min,l=this.minPixelPadding,i=(this.options.ordinal||this.isLog&&i)&&this.lin2val;return c||(c=this.transA),n&&(a*=-1,u=this.len),this.reversed&&(a*=-1,u-=a*(this.sector||this.len)),e?(t=t*a+u,t-=l,t=t/c+r,i&&(t=this.lin2val(t))):(i&&(t=this.val2lin(t)),"between"===o&&(o=.5),t=a*(t-r)*c+u+a*l+(s(o)?c*o*this.pointRange:0)),t},toPixels:function(t,e){return this.translate(t,!1,!this.horiz,null,!0)+(e?0:this.pos)},toValue:function(t,e){return this.translate(t-(e?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(t,e,n,r,i){var o,s,a,u=this.chart,c=this.left,l=this.top,p=n&&u.oldChartHeight||u.chartHeight,d=n&&u.oldChartWidth||u.chartWidth;return o=this.transB,i=h(i,this.translate(t,null,null,n)),t=n=le(i+o),o=s=le(p-i-o),isNaN(i)?a=!0:this.horiz?(o=l,s=p-this.bottom,(c>t||t>c+this.width)&&(a=!0)):(t=c,n=d-this.right,(l>o||o>l+this.height)&&(a=!0)),a&&!r?null:u.renderer.crispLine(["M",t,o,"L",n,s],e||1)},getLinearTickPositions:function(t,e,n){var r,i=S(pe(e/t)*t),o=S(de(n/t)*t),a=[];if(e===n&&s(e))return[e];for(e=i;o>=e&&(a.push(e),e=S(e+t),e!==r);)r=e;return a},getMinorTickPositions:function(){var t,e=this.options,n=this.tickPositions,r=this.minorTickInterval,i=[];if(this.isLog)for(t=n.length,e=1;t>e;e++)i=i.concat(this.getLogTickPositions(r,n[e-1],n[e],!0));else if(this.isDatetimeAxis&&"auto"===e.minorTickInterval)i=i.concat(this.getTimeTicks(this.normalizeTimeTickInterval(r),this.min,this.max,e.startOfWeek)),i[0]<this.min&&i.shift();else for(n=this.min+(n[0]-this.min)%r;n<=this.max;n+=r)i.push(n);return i},adjustForMinRange:function(){var t,e,n,r,i,o,s=this.options,a=this.min,u=this.max,c=this.dataMax-this.dataMin>=this.minRange;if(this.isXAxis&&this.minRange===z&&!this.isLog&&(l(s.min)||l(s.max)?this.minRange=null:(qe(this.series,function(t){for(i=t.xData,n=o=t.xIncrement?1:i.length-1;n>0;n--)r=i[n]-i[n-1],(e===z||e>r)&&(e=r)}),this.minRange=fe(5*e,this.dataMax-this.dataMin))),u-a<this.minRange){var p=this.minRange;t=(p-u+a)/2,t=[a-t,h(s.min,a-t)],c&&(t[2]=this.dataMin),a=A(t),u=[a+p,h(s.max,a+p)],c&&(u[2]=this.dataMax),u=R(u),p>u-a&&(t[0]=u-p,t[1]=h(s.min,u-p),a=A(t))}this.min=a,this.max=u},setAxisTranslation:function(t){var e,n=this,i=n.max-n.min,o=n.axisPointRange||0,s=0,a=0,u=n.linkedParent,c=!!n.categories,p=n.transA;(n.isXAxis||c||o)&&(u?(s=u.minPointOffset,a=u.pointRangePadding):qe(n.series,function(t){var u=c?1:n.isXAxis?t.pointRange:n.axisPointRange||0,p=t.options.pointPlacement,d=t.closestPointRange;u>i&&(u=0),o=he(o,u),s=he(s,r(p)?0:u/2),a=he(a,"on"===p?0:u),!t.noSharedTooltip&&l(d)&&(e=l(e)?fe(e,d):d)}),u=n.ordinalSlope&&e?n.ordinalSlope/e:1,n.minPointOffset=s*=u,n.pointRangePadding=a*=u,n.pointRange=fe(o,i),n.closestPointRange=e),t&&(n.oldTransA=p),n.translationSlope=n.transA=p=n.len/(i+a||1),n.transB=n.horiz?n.left:n.bottom,n.minPixelPadding=p*s},setTickPositions:function(t){var e,n=this,r=n.chart,i=n.options,o=i.startOnTick,u=i.endOnTick,c=n.isLog,p=n.isDatetimeAxis,d=n.isXAxis,f=n.isLinked,m=n.options.tickPositioner,_=i.maxPadding,g=i.minPadding,v=i.tickInterval,y=i.minTickInterval,w=i.tickPixelInterval,T=n.categories;f?(n.linkedParent=r[n.coll][i.linkedTo],r=n.linkedParent.getExtremes(),n.min=h(r.min,r.dataMin),n.max=h(r.max,r.dataMax),i.type!==n.linkedParent.options.type&&W(11,1)):(n.min=h(n.userMin,i.min,n.dataMin),n.max=h(n.userMax,i.max,n.dataMax)),c&&(!t&&fe(n.min,h(n.dataMin,n.min))<=0&&W(10,1),n.min=S(a(n.min)),n.max=S(a(n.max))),n.range&&l(n.max)&&(n.userMin=n.min=he(n.min,n.max-n.range),n.userMax=n.max,n.range=null),n.beforePadding&&n.beforePadding(),n.adjustForMinRange(),T||n.axisPointRange||n.usePercentage||f||!l(n.min)||!l(n.max)||!(r=n.max-n.min)||(l(i.min)||l(n.userMin)||!g||!(n.dataMin<0)&&n.ignoreMinPadding||(n.min-=r*g),l(i.max)||l(n.userMax)||!_||!(n.dataMax>0)&&n.ignoreMaxPadding||(n.max+=r*_)),s(i.floor)&&(n.min=he(n.min,i.floor)),s(i.ceiling)&&(n.max=fe(n.max,i.ceiling)),n.min===n.max||void 0===n.min||void 0===n.max?n.tickInterval=1:f&&!v&&w===n.linkedParent.options.tickPixelInterval?n.tickInterval=n.linkedParent.tickInterval:(n.tickInterval=h(v,T?1:(n.max-n.min)*w/he(n.len,w)),!l(v)&&n.len<w&&!this.isRadial&&!this.isLog&&!T&&o&&u&&(e=!0,n.tickInterval/=4)),d&&!t&&qe(n.series,function(t){t.processData(n.min!==n.oldMin||n.max!==n.oldMax)}),n.setAxisTranslation(!0),n.beforeSetTickPositions&&n.beforeSetTickPositions(),n.postProcessTickInterval&&(n.tickInterval=n.postProcessTickInterval(n.tickInterval)),n.pointRange&&(n.tickInterval=he(n.pointRange,n.tickInterval)),!v&&n.tickInterval<y&&(n.tickInterval=y),p||c||v||(n.tickInterval=b(n.tickInterval,null,E(n.tickInterval),h(i.allowDecimals,!(n.tickInterval>1&&n.tickInterval<5&&n.max>1e3&&n.max<9999)))),n.minorTickInterval="auto"===i.minorTickInterval&&n.tickInterval?n.tickInterval/5:i.minorTickInterval,n.tickPositions=t=i.tickPositions?[].concat(i.tickPositions):m&&m.apply(n,[n.min,n.max]),t||(!n.ordinalPositions&&(n.max-n.min)/n.tickInterval>he(2*n.len,200)&&W(19,!0),t=p?n.getTimeTicks(n.normalizeTimeTickInterval(n.tickInterval,i.units),n.min,n.max,i.startOfWeek,n.ordinalPositions,n.closestPointRange,!0):c?n.getLogTickPositions(n.tickInterval,n.min,n.max):n.getLinearTickPositions(n.tickInterval,n.min,n.max),e&&t.splice(1,t.length-2),n.tickPositions=t),f||(i=t[0],c=t[t.length-1],p=n.minPointOffset||0,o?n.min=i:n.min-p>i&&t.shift(),u?n.max=c:n.max+p<c&&t.pop(),0===t.length&&l(i)&&t.push((c+i)/2),1===t.length&&(o=me(n.max)>1e13?1:.001,n.min-=o,n.max+=o))},setMaxTicks:function(){var t=this.chart,e=t.maxTicks||{},n=this.tickPositions,r=this._maxTicksKey=[this.coll,this.pos,this.len].join("-");!this.isLinked&&!this.isDatetimeAxis&&n&&n.length>(e[r]||0)&&this.options.alignTicks!==!1&&(e[r]=n.length),t.maxTicks=e},adjustTickAmount:function(){var t=this._maxTicksKey,e=this.tickPositions,n=this.chart.maxTicks;if(n&&n[t]&&!this.isDatetimeAxis&&!this.categories&&!this.isLinked&&this.options.alignTicks!==!1&&this.min!==z){var r=this.tickAmount,i=e.length;if(this.tickAmount=t=n[t],t>i){for(;e.length<t;)e.push(S(e[e.length-1]+this.tickInterval));this.transA*=(i-1)/(t-1),this.max=e[e.length-1]}l(r)&&t!==r&&(this.isDirty=!0)}},setScale:function(){var t,e,n,r,i=this.stacks;if(this.oldMin=this.min,this.oldMax=this.max,this.oldAxisLength=this.len,this.setAxisSize(),r=this.len!==this.oldAxisLength,qe(this.series,function(t){(t.isDirtyData||t.isDirty||t.xAxis.isDirty)&&(n=!0)}),r||n||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax){if(!this.isXAxis)for(t in i)for(e in i[t])i[t][e].total=null,i[t][e].cum=0;this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickPositions(),this.oldUserMin=this.userMin,this.oldUserMax=this.userMax,this.isDirty||(this.isDirty=r||this.min!==this.oldMin||this.max!==this.oldMax)}else if(!this.isXAxis){this.oldStacks&&(i=this.stacks=this.oldStacks);for(t in i)for(e in i[t])i[t][e].cum=i[t][e].total}this.setMaxTicks()},setExtremes:function(e,n,r,i,o){var s=this,a=s.chart,r=h(r,!0),o=t(o,{min:e,max:n});Ze(s,"setExtremes",o,function(){s.userMin=e,s.userMax=n,s.eventArgs=o,s.isDirtyExtremes=!0,r&&a.redraw(i)})},zoom:function(t,e){var n=this.dataMin,r=this.dataMax,i=this.options;return this.allowZoomOutside||(l(n)&&t<=fe(n,h(i.min,n))&&(t=z),l(r)&&e>=he(r,h(i.max,r))&&(e=z)),this.displayBtn=t!==z||e!==z,this.setExtremes(t,e,!1,z,{trigger:"zoom"}),!0},setAxisSize:function(){var t=this.chart,e=this.options,n=e.offsetLeft||0,r=this.horiz,i=h(e.width,t.plotWidth-n+(e.offsetRight||0)),o=h(e.height,t.plotHeight),s=h(e.top,t.plotTop),e=h(e.left,t.plotLeft+n),n=/%$/;n.test(o)&&(o=parseInt(o,10)/100*t.plotHeight),n.test(s)&&(s=parseInt(s,10)/100*t.plotHeight+t.plotTop),this.left=e,this.top=s,this.width=i,this.height=o,this.bottom=t.chartHeight-o-s,this.right=t.chartWidth-i-e,this.len=he(r?i:o,0),this.pos=r?e:s},getExtremes:function(){var t=this.isLog;return{min:t?S(u(this.min)):this.min,max:t?S(u(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(t){var e=this.isLog,n=e?u(this.min):this.min,e=e?u(this.max):this.max;return n>t||null===t?t=n:t>e&&(t=e),this.translate(t,0,1,0,1)},autoLabelAlign:function(t){return t=(h(t,0)-90*this.side+720)%360,t>15&&165>t?"right":t>195&&345>t?"left":"center"},getOffset:function(){var t,e,n,r,i,o,s,a,u,c=this,p=c.chart,d=p.renderer,f=c.options,m=c.tickPositions,_=c.ticks,g=c.horiz,v=c.side,y=p.inverted?[1,0,3,2][v]:v,w=0,E=0,b=f.title,T=f.labels,R=0,A=p.axisOffset,p=p.clipOffset,P=[-1,1,1,-1][v],O=1,S=h(T.maxStaggerLines,5);if(c.hasData=t=c.hasVisibleSeries||l(c.min)&&l(c.max)&&!!m,c.showAxis=e=t||h(f.showEmpty,!0),c.staggerLines=c.horiz&&T.staggerLines,c.axisGroup||(c.gridGroup=d.g("grid").attr({zIndex:f.gridZIndex||1}).add(),c.axisGroup=d.g("axis").attr({zIndex:f.zIndex||2}).add(),c.labelGroup=d.g("axis-labels").attr({zIndex:T.zIndex||7}).addClass("highcharts-"+c.coll.toLowerCase()+"-labels").add()),t||c.isLinked){if(c.labelAlign=h(T.align||c.autoLabelAlign(T.rotation)),qe(m,function(t){_[t]?_[t].addLabel():_[t]=new I(c,t)}),c.horiz&&!c.staggerLines&&S&&!T.rotation){for(t=c.reversed?[].concat(m).reverse():m;S>O;){for(i=[],o=!1,r=0;r<t.length;r++)s=t[r],a=(a=_[s].label&&_[s].label.getBBox())?a.width:0,u=r%O,a&&(s=c.translate(s),i[u]!==z&&s<i[u]&&(o=!0),i[u]=s+a);if(!o)break;O++}O>1&&(c.staggerLines=O)}qe(m,function(t){(0===v||2===v||{1:"left",3:"right"}[v]===c.labelAlign)&&(R=he(_[t].getLabelSize(),R))}),c.staggerLines&&(R*=c.staggerLines,c.labelOffset=R)}else for(r in _)_[r].destroy(),delete _[r];b&&b.text&&b.enabled!==!1&&(c.axisTitle||(c.axisTitle=d.text(b.text,0,0,b.useHTML).attr({zIndex:7,rotation:b.rotation||0,align:b.textAlign||{low:"left",middle:"center",high:"right"}[b.align]}).addClass("highcharts-"+this.coll.toLowerCase()+"-title").css(b.style).add(c.axisGroup),c.axisTitle.isNew=!0),e&&(w=c.axisTitle.getBBox()[g?"height":"width"],n=b.offset,E=l(n)?0:h(b.margin,g?5:10)),c.axisTitle[e?"show":"hide"]()),c.offset=P*h(f.offset,A[v]),d=2===v?c.tickBaseline:0,g=R+E+(R&&P*(g?h(T.y,c.tickBaseline+8):T.x)-d),c.axisTitleMargin=h(n,g),A[v]=he(A[v],c.axisTitleMargin+w+P*c.offset,g),p[y]=he(p[y],2*pe(f.lineWidth/2))},getLinePath:function(t){var e=this.chart,n=this.opposite,r=this.offset,i=this.horiz,o=this.left+(n?this.width:0)+r,r=e.chartHeight-this.bottom-(n?this.height:0)+r;return n&&(t*=-1),e.renderer.crispLine(["M",i?this.left:o,i?r:this.top,"L",i?e.chartWidth-this.right:o,i?r:e.chartHeight-this.bottom],t)},getTitlePosition:function(){var t=this.horiz,e=this.left,r=this.top,i=this.len,o=this.options.title,s=t?e:r,a=this.opposite,u=this.offset,c=n(o.style.fontSize||12),i={low:s+(t?0:i),middle:s+i/2,high:s+(t?i:0)}[o.align],e=(t?r+this.height:e)+(t?1:-1)*(a?-1:1)*this.axisTitleMargin+(2===this.side?c:0);return{x:t?i:e+(a?this.width:0)+u+(o.x||0),y:t?e-(a?this.height:0)+u:i+(o.y||0)}},render:function(){var t,e,n,r=this,i=r.horiz,o=r.reversed,s=r.chart,a=s.renderer,c=r.options,p=r.isLog,d=r.isLinked,h=r.tickPositions,f=r.axisTitle,m=r.ticks,_=r.minorTicks,g=r.alternateBands,v=c.stackLabels,y=c.alternateGridColor,w=r.tickmarkOffset,E=c.lineWidth,b=s.hasRendered&&l(r.oldMin)&&!isNaN(r.oldMin),T=r.hasData,R=r.showAxis,A=c.labels.overflow,P=r.justifyLabels=i&&A!==!1;r.labelEdge.length=0,r.justifyToPlot="justify"===A,qe([m,_,g],function(t){for(var e in t)t[e].isActive=!1}),(T||d)&&(r.minorTickInterval&&!r.categories&&qe(r.getMinorTickPositions(),function(t){_[t]||(_[t]=new I(r,t,"minor")),b&&_[t].isNew&&_[t].render(null,!0),_[t].render(null,!1,1)}),h.length&&(t=h.slice(),(i&&o||!i&&!o)&&t.reverse(),P&&(t=t.slice(1).concat([t[0]])),qe(t,function(e,n){P&&(n=n===t.length-1?0:n+1),(!d||e>=r.min&&e<=r.max)&&(m[e]||(m[e]=new I(r,e)),b&&m[e].isNew&&m[e].render(n,!0,.1),m[e].render(n))}),w&&0===r.min&&(m[-1]||(m[-1]=new I(r,-1,null,!0)),m[-1].render(-1))),y&&qe(h,function(t,i){i%2===0&&t<r.max&&(g[t]||(g[t]=new se.PlotLineOrBand(r)),e=t+w,n=h[i+1]!==z?h[i+1]+w:r.max,g[t].options={from:p?u(e):e,to:p?u(n):n,color:y},g[t].render(),g[t].isActive=!0)}),r._addedPlotLB||(qe((c.plotLines||[]).concat(c.plotBands||[]),function(t){r.addPlotBandOrLine(t)}),r._addedPlotLB=!0)),qe([m,_,g],function(t){var e,n,r=[],i=Y?Y.duration||500:0,o=function(){for(n=r.length;n--;)t[r[n]]&&!t[r[n]].isActive&&(t[r[n]].destroy(),delete t[r[n]])};for(e in t)t[e].isActive||(t[e].render(e,!1,0),t[e].isActive=!1,r.push(e));t!==g&&s.hasRendered&&i?i&&setTimeout(o,i):o()}),E&&(i=r.getLinePath(E),r.axisLine?r.axisLine.animate({d:i}):r.axisLine=a.path(i).attr({stroke:c.lineColor,"stroke-width":E,zIndex:7}).add(r.axisGroup),r.axisLine[R?"show":"hide"]()),f&&R&&(f[f.isNew?"attr":"animate"](r.getTitlePosition()),f.isNew=!1),v&&v.enabled&&r.renderStackTotals(),r.isDirty=!1},redraw:function(){this.render(),qe(this.plotLinesAndBands,function(t){t.render()}),qe(this.series,function(t){t.isDirty=!0})},destroy:function(t){var e,n=this,r=n.stacks,i=n.plotLinesAndBands;t||Qe(n);for(e in r)P(r[e]),r[e]=null;for(qe([n.ticks,n.minorTicks,n.alternateBands],function(t){P(t)}),t=i.length;t--;)i[t].destroy();qe("stackTotalGroup,axisLine,axisTitle,axisGroup,cross,gridGroup,labelGroup".split(","),function(t){n[t]&&(n[t]=n[t].destroy())}),this.cross&&this.cross.destroy()},drawCrosshair:function(t,e){if(this.crosshair)if((l(e)||!h(this.crosshair.snap,!0))===!1)this.hideCrosshair();else{var n,r=this.crosshair,i=r.animation;h(r.snap,!0)?l(e)&&(n=this.chart.inverted!=this.horiz?e.plotX:this.len-e.plotY):n=this.horiz?t.chartX-this.pos:this.len-t.chartY+this.pos,n=this.isRadial?this.getPlotLinePath(this.isXAxis?e.x:h(e.stackY,e.y)):this.getPlotLinePath(null,null,null,null,n),null===n?this.hideCrosshair():this.cross?this.cross.attr({visibility:"visible"})[i?"animate":"attr"]({d:n},i):(i={"stroke-width":r.width||1,stroke:r.color||"#C0C0C0",zIndex:r.zIndex||2},r.dashStyle&&(i.dashstyle=r.dashStyle),this.cross=this.chart.renderer.path(n).attr(i).add())}},hideCrosshair:function(){this.cross&&this.cross.hide()}},t(D.prototype,{getPlotBandPath:function(t,e){var n=this.getPlotLinePath(e),r=this.getPlotLinePath(t);return r&&n?r.push(n[4],n[5],n[1],n[2]):r=null,r},addPlotBand:function(t){return this.addPlotBandOrLine(t,"plotBands")},addPlotLine:function(t){return this.addPlotBandOrLine(t,"plotLines")},addPlotBandOrLine:function(t,e){var n=new se.PlotLineOrBand(this,t).render(),r=this.userOptions;return n&&(e&&(r[e]=r[e]||[],r[e].push(t)),this.plotLinesAndBands.push(n)),n},removePlotBandOrLine:function(t){for(var e=this.plotLinesAndBands,n=this.options,r=this.userOptions,i=e.length;i--;)e[i].id===t&&e[i].destroy();qe([n.plotLines||[],r.plotLines||[],n.plotBands||[],r.plotBands||[]],function(e){for(i=e.length;i--;)e[i].id===t&&c(e,e[i])})}}),D.prototype.getTimeTicks=function(e,n,r,i){var o,s=[],a={},u=G.global.useUTC,c=new q(n-$),p=e.unitRange,d=e.count;if(l(n)){p>=V.second&&(c.setMilliseconds(0),c.setSeconds(p>=V.minute?0:d*pe(c.getSeconds()/d))),p>=V.minute&&c[ee](p>=V.hour?0:d*pe(c[X]()/d)),p>=V.hour&&c[ne](p>=V.day?0:d*pe(c[K]()/d)),p>=V.day&&c[re](p>=V.month?1:d*pe(c[Z]()/d)),p>=V.month&&(c[ie](p>=V.year?0:d*pe(c[J]()/d)),o=c[te]()),p>=V.year&&(o-=o%d,c[oe](o)),p===V.week&&c[re](c[Z]()-c[Q]()+h(i,1)),n=1,$&&(c=new q(c.getTime()+$)),o=c[te]();for(var i=c.getTime(),f=c[J](),m=c[Z](),_=(V.day+(u?$:6e4*c.getTimezoneOffset()))%V.day;r>i;)s.push(i),p===V.year?i=H(o+n*d,0):p===V.month?i=H(o,f+n*d):u||p!==V.day&&p!==V.week?i+=p*d:i=H(o,f,m+n*d*(p===V.day?1:7)),n++;s.push(i),qe(He(s,function(t){return p<=V.hour&&t%V.day===_}),function(t){a[t]="day"})}return s.info=t(e,{higherRanks:a,totalRange:p*d}),s},D.prototype.normalizeTimeTickInterval=function(t,e){var n,r=e||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],i=r[r.length-1],o=V[i[0]],s=i[1];for(n=0;n<r.length&&(i=r[n],o=V[i[0]],s=i[1],!(r[n+1]&&t<=(o*s[s.length-1]+V[r[n+1][0]])/2));n++);return o===V.year&&5*o>t&&(s=[1,2,5]),r=b(t/o,s,"year"===i[0]?he(E(t/o),1):1),{unitRange:o,count:r,unitName:i[0]}},D.prototype.getLogTickPositions=function(t,e,n,r){var i=this.options,o=this.len,s=[];if(r||(this._minorAutoInterval=null),t>=.5)t=le(t),s=this.getLinearTickPositions(t,e,n);else if(t>=.08)for(var c,l,p,d,f,o=pe(e),i=t>.3?[1,2,4]:t>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];n+1>o&&!f;o++)for(l=i.length,c=0;l>c&&!f;c++)p=a(u(o)*i[c]),p>e&&(!r||n>=d)&&d!==z&&s.push(d),d>n&&(f=!0),d=p;else e=u(e),n=u(n),t=i[r?"minorTickInterval":"tickInterval"],t=h("auto"===t?null:t,this._minorAutoInterval,(n-e)*(i.tickPixelInterval/(r?5:1))/((r?o/this.tickPositions.length:o)||1)),t=b(t,null,E(t)),s=Xe(this.getLinearTickPositions(t,e,n),a),r||(this._minorAutoInterval=t/5);return r||(this.tickInterval=t),s};var dn=se.Tooltip=function(){this.init.apply(this,arguments)};dn.prototype={init:function(t,e){var r=e.borderWidth,i=e.style,o=n(i.padding);this.chart=t,this.options=e,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=t.renderer.label("",0,0,e.shape||"callout",null,null,e.useHTML,null,"tooltip").attr({padding:o,fill:e.backgroundColor,"stroke-width":r,r:e.borderRadius,zIndex:8}).css(i).css({padding:0}).add().attr({y:-9999}),ke||this.label.shadow(e.shadow),this.shared=e.shared},destroy:function(){this.label&&(this.label=this.label.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(e,n,r,i){var o=this,s=o.now,a=o.options.animation!==!1&&!o.isHidden&&(me(e-s.x)>1||me(n-s.y)>1),u=o.followPointer||o.len>1;t(s,{x:a?(2*s.x+e)/3:e,y:a?(s.y+n)/2:n,anchorX:u?z:a?(2*s.anchorX+r)/3:r,anchorY:u?z:a?(s.anchorY+i)/2:i}),o.label.attr(s),a&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){o&&o.move(e,n,r,i)},32))},hide:function(t){var e,n=this;clearTimeout(this.hideTimer),this.isHidden||(e=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){n.label.fadeOut(),n.isHidden=!0},h(t,this.options.hideDelay,500)),e&&qe(e,function(t){t.setState()}),this.chart.hoverPoints=null)},getAnchor:function(t,e){var n,r,i=this.chart,o=i.inverted,s=i.plotTop,a=0,u=0,t=d(t);return n=t[0].tooltipPos,this.followPointer&&e&&(e.chartX===z&&(e=i.pointer.normalize(e)),n=[e.chartX-i.plotLeft,e.chartY-s]),n||(qe(t,function(t){r=t.series.yAxis,a+=t.plotX,u+=(t.plotLow?(t.plotLow+t.plotHigh)/2:t.plotY)+(!o&&r?r.top-s:0)}),a/=t.length,u/=t.length,n=[o?i.plotWidth-u:a,this.shared&&!o&&t.length>1&&e?e.chartY-s:o?i.plotHeight-a:u]),Xe(n,le)},getPosition:function(t,e,n){var r,i=this.chart,o=this.distance,s={},a=["y",i.chartHeight,e,n.plotY+i.plotTop],u=["x",i.chartWidth,t,n.plotX+i.plotLeft],c=n.ttBelow||i.inverted&&!n.negative||!i.inverted&&n.negative,l=function(t,e,n,r){var i=r-o>n,e=e>r+o+n,n=r-o-n;if(r+=o,c&&e)s[t]=r;else if(!c&&i)s[t]=n;else if(i)s[t]=n;else{if(!e)return!1;s[t]=r}},p=function(t,e,n,r){return o>r||r>e-o?!1:void(s[t]=n/2>r?1:r>e-n/2?e-n-2:r-n/2)},d=function(t){var e=a;a=u,u=e,r=t},h=function(){l.apply(0,a)!==!1?p.apply(0,u)===!1&&!r&&(d(!0),h()):r?s.x=s.y=0:(d(!0),h())};return(i.inverted||this.len>1)&&d(),h(),s},defaultFormatter:function(t){var e,n=this.points||d(this),r=n[0].series;return e=[t.tooltipHeaderFormatter(n[0])],qe(n,function(t){r=t.series,e.push(r.tooltipFormatter&&r.tooltipFormatter(t)||t.point.tooltipFormatter(r.tooltipOptions.pointFormat))}),e.push(t.options.footerFormat||""),e.join("")},refresh:function(t,e){var n,r,i,o=this.chart,s=this.label,a=this.options,u={},c=[];i=a.formatter||this.defaultFormatter;var l,u=o.hoverPoints,p=this.shared;clearTimeout(this.hideTimer),this.followPointer=d(t)[0].series.tooltipOptions.followPointer,r=this.getAnchor(t,e),n=r[0],r=r[1],!p||t.series&&t.series.noSharedTooltip?u=t.getLabelConfig():(o.hoverPoints=t,u&&qe(u,function(t){t.setState()}),qe(t,function(t){t.setState("hover"),c.push(t.getLabelConfig())}),u={x:t[0].category,y:t[0].y},u.points=c,this.len=c.length,t=t[0]),i=i.call(u,this),u=t.series,this.distance=h(u.tooltipOptions.distance,16),i===!1?this.hide():(this.isHidden&&(en(s),s.attr("opacity",1).show()),s.attr({text:i}),l=a.borderColor||t.color||u.color||"#606060",s.attr({stroke:l}),this.updatePosition({plotX:n,plotY:r,negative:t.negative,ttBelow:t.ttBelow}),this.isHidden=!1),Ze(o,"tooltipRefresh",{text:i,x:n+o.plotLeft,y:r+o.plotTop,borderColor:l})},updatePosition:function(t){var e=this.chart,n=this.label,n=(this.options.positioner||this.getPosition).call(this,n.width,n.height,t);this.move(le(n.x),le(n.y),t.plotX+e.plotLeft,t.plotY+e.plotTop)},tooltipHeaderFormatter:function(t){var e,n=t.series,r=n.tooltipOptions,i=r.dateTimeLabelFormats,o=r.xDateFormat,a=n.xAxis,u=a&&"datetime"===a.options.type&&s(t.key),r=r.headerFormat,a=a&&a.closestPointRange;if(u&&!o){if(a){for(e in V)if(V[e]>=a||V[e]<=V.day&&t.key%V[e]>0){o=i[e];break}}else o=i.day;o=o||i.year}return u&&o&&(r=r.replace("{point.key}","{point.key:"+o+"}")),w(r,{point:t,series:n})}};var hn;F=ae.documentElement.ontouchstart!==z;var fn=se.Pointer=function(t,e){this.init(t,e)};if(fn.prototype={init:function(t,e){var n,r=e.chart,i=r.events,o=ke?"":r.zoomType,r=t.inverted;this.options=e,this.chart=t,this.zoomX=n=/x/.test(o),this.zoomY=o=/y/.test(o),this.zoomHor=n&&!r||o&&r,this.zoomVert=o&&!r||n&&r,this.hasZoom=n||o,this.runChartClick=i&&!!i.click,this.pinchDown=[],this.lastValidTouch={},se.Tooltip&&e.tooltip.enabled&&(t.tooltip=new dn(t,e.tooltip),this.followTouchMove=e.tooltip.followTouchMove),this.setDOMEvents()},normalize:function(e,n){var r,i,e=e||window.event,e=Je(e);return e.target||(e.target=e.srcElement),i=e.touches?e.touches.length?e.touches.item(0):e.changedTouches[0]:e,n||(this.chartPosition=n=$e(this.chart.container)),i.pageX===z?(r=he(e.x,e.clientX-n.left),i=e.y):(r=i.pageX-n.left,i=i.pageY-n.top),t(e,{chartX:le(r),chartY:le(i)})},getCoordinates:function(t){var e={xAxis:[],yAxis:[]};return qe(this.chart.axes,function(n){e[n.isXAxis?"xAxis":"yAxis"].push({axis:n,value:n.toValue(t[n.horiz?"chartX":"chartY"])})}),e},getIndex:function(t){var e=this.chart;return e.inverted?e.plotHeight+e.plotTop-t.chartY:t.chartX-e.plotLeft},runPointActions:function(t){var e,n,r,i,o=this.chart,s=o.series,a=o.tooltip,u=o.hoverPoint,c=o.hoverSeries,l=o.chartWidth,p=this.getIndex(t);if(a&&this.options.tooltip.shared&&(!c||!c.noSharedTooltip)){for(n=[],r=s.length,i=0;r>i;i++)s[i].visible&&s[i].options.enableMouseTracking!==!1&&!s[i].noSharedTooltip&&s[i].singularTooltips!==!0&&s[i].tooltipPoints.length&&(e=s[i].tooltipPoints[p])&&e.series&&(e._dist=me(p-e.clientX),l=fe(l,e._dist),n.push(e));for(r=n.length;r--;)n[r]._dist>l&&n.splice(r,1);n.length&&n[0].clientX!==this.hoverX&&(a.refresh(n,t),this.hoverX=n[0].clientX)}s=c&&c.tooltipOptions.followPointer,c&&c.tracker&&!s?(e=c.tooltipPoints[p])&&e!==u&&e.onMouseOver(t):a&&s&&!a.isHidden&&(c=a.getAnchor([{}],t),a.updatePosition({plotX:c[0],plotY:c[1]})),a&&!this._onDocumentMouseMove&&(this._onDocumentMouseMove=function(t){Le[hn]&&Le[hn].pointer.onDocumentMouseMove(t)},Ke(ae,"mousemove",this._onDocumentMouseMove)),qe(o.axes,function(n){n.drawCrosshair(t,h(e,u))})},reset:function(t,e){var n=this.chart,r=n.hoverSeries,i=n.hoverPoint,o=n.tooltip,s=o&&o.shared?n.hoverPoints:i;(t=t&&o&&s)&&d(s)[0].plotX===z&&(t=!1),t?(o.refresh(s),i&&i.setState(i.state,!0)):(i&&i.onMouseOut(),r&&r.onMouseOut(),o&&o.hide(e),this._onDocumentMouseMove&&(Qe(ae,"mousemove",this._onDocumentMouseMove),this._onDocumentMouseMove=null),qe(n.axes,function(t){t.hideCrosshair()}),this.hoverX=null)},scaleGroups:function(t,e){var n,r=this.chart;qe(r.series,function(i){n=t||i.getPlotBox(),i.xAxis&&i.xAxis.zoomEnabled&&(i.group.attr(n),i.markerGroup&&(i.markerGroup.attr(n),i.markerGroup.clip(e?r.clipRect:null)),i.dataLabelsGroup&&i.dataLabelsGroup.attr(n))}),r.clipRect.attr(e||r.clipBox)},dragStart:function(t){var e=this.chart;e.mouseIsDown=t.type,e.cancelClick=!1,e.mouseDownX=this.mouseDownX=t.chartX,e.mouseDownY=this.mouseDownY=t.chartY
},drag:function(t){var e,n=this.chart,r=n.options.chart,i=t.chartX,o=t.chartY,s=this.zoomHor,a=this.zoomVert,u=n.plotLeft,c=n.plotTop,l=n.plotWidth,p=n.plotHeight,d=this.mouseDownX,h=this.mouseDownY,f=r.panKey&&t[r.panKey+"Key"];u>i?i=u:i>u+l&&(i=u+l),c>o?o=c:o>c+p&&(o=c+p),this.hasDragged=Math.sqrt(Math.pow(d-i,2)+Math.pow(h-o,2)),this.hasDragged>10&&(e=n.isInsidePlot(d-u,h-c),n.hasCartesianSeries&&(this.zoomX||this.zoomY)&&e&&!f&&!this.selectionMarker&&(this.selectionMarker=n.renderer.rect(u,c,s?1:l,a?1:p,0).attr({fill:r.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add()),this.selectionMarker&&s&&(i-=d,this.selectionMarker.attr({width:me(i),x:(i>0?0:i)+d})),this.selectionMarker&&a&&(i=o-h,this.selectionMarker.attr({height:me(i),y:(i>0?0:i)+h})),e&&!this.selectionMarker&&r.panning&&n.pan(t,r.panning))},drop:function(e){var n=this.chart,r=this.hasPinched;if(this.selectionMarker){var i,o={xAxis:[],yAxis:[],originalEvent:e.originalEvent||e},s=this.selectionMarker,a=s.attr?s.attr("x"):s.x,u=s.attr?s.attr("y"):s.y,c=s.attr?s.attr("width"):s.width,l=s.attr?s.attr("height"):s.height;(this.hasDragged||r)&&(qe(n.axes,function(t){if(t.zoomEnabled){var n=t.horiz,r="touchend"===e.type?t.minPixelPadding:0,s=t.toValue((n?a:u)+r),n=t.toValue((n?a+c:u+l)-r);!isNaN(s)&&!isNaN(n)&&(o[t.coll].push({axis:t,min:fe(s,n),max:he(s,n)}),i=!0)}}),i&&Ze(n,"selection",o,function(e){n.zoom(t(e,r?{animation:!1}:null))})),this.selectionMarker=this.selectionMarker.destroy(),r&&this.scaleGroups()}n&&(f(n.container,{cursor:n._cursor}),n.cancelClick=this.hasDragged>10,n.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(t){t=this.normalize(t),t.preventDefault&&t.preventDefault(),this.dragStart(t)},onDocumentMouseUp:function(t){Le[hn]&&Le[hn].pointer.drop(t)},onDocumentMouseMove:function(t){var e=this.chart,n=this.chartPosition,r=e.hoverSeries,t=this.normalize(t,n);n&&r&&!this.inClass(t.target,"highcharts-tracker")&&!e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&this.reset()},onContainerMouseLeave:function(){var t=Le[hn];t&&(t.pointer.reset(),t.pointer.chartPosition=null)},onContainerMouseMove:function(t){var e=this.chart;hn=e.index,t=this.normalize(t),t.returnValue=!1,"mousedown"===e.mouseIsDown&&this.drag(t),(this.inClass(t.target,"highcharts-tracker")||e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop))&&!e.openMenu&&this.runPointActions(t)},inClass:function(t,e){for(var n;t;){if(n=p(t,"class")){if(-1!==n.indexOf(e))return!0;if(-1!==n.indexOf("highcharts-container"))return!1}t=t.parentNode}},onTrackerMouseOut:function(t){var e=this.chart.hoverSeries,n=(t=t.relatedTarget||t.toElement)&&t.point&&t.point.series;!e||e.options.stickyTracking||this.inClass(t,"highcharts-tooltip")||n===e||e.onMouseOut()},onContainerClick:function(e){var n=this.chart,r=n.hoverPoint,i=n.plotLeft,o=n.plotTop,e=this.normalize(e);e.cancelBubble=!0,n.cancelClick||(r&&this.inClass(e.target,"highcharts-tracker")?(Ze(r.series,"click",t(e,{point:r})),n.hoverPoint&&r.firePointEvent("click",e)):(t(e,this.getCoordinates(e)),n.isInsidePlot(e.chartX-i,e.chartY-o)&&Ze(n,"click",e)))},setDOMEvents:function(){var t=this,e=t.chart.container;e.onmousedown=function(e){t.onContainerMouseDown(e)},e.onmousemove=function(e){t.onContainerMouseMove(e)},e.onclick=function(e){t.onContainerClick(e)},Ke(e,"mouseleave",t.onContainerMouseLeave),1===Ne&&Ke(ae,"mouseup",t.onDocumentMouseUp),F&&(e.ontouchstart=function(e){t.onContainerTouchStart(e)},e.ontouchmove=function(e){t.onContainerTouchMove(e)},1===Ne&&Ke(ae,"touchend",t.onDocumentTouchEnd))},destroy:function(){var t;Qe(this.chart.container,"mouseleave",this.onContainerMouseLeave),Ne||(Qe(ae,"mouseup",this.onDocumentMouseUp),Qe(ae,"touchend",this.onDocumentTouchEnd)),clearInterval(this.tooltipTimeout);for(t in this)this[t]=null}},t(se.Pointer.prototype,{pinchTranslate:function(t,e,n,r,i,o){(this.zoomHor||this.pinchHor)&&this.pinchTranslateDirection(!0,t,e,n,r,i,o),(this.zoomVert||this.pinchVert)&&this.pinchTranslateDirection(!1,t,e,n,r,i,o)},pinchTranslateDirection:function(t,e,n,r,i,o,s,a){var u,c,l,p=this.chart,d=t?"x":"y",h=t?"X":"Y",f="chart"+h,m=t?"width":"height",_=p["plot"+(t?"Left":"Top")],g=a||1,v=p.inverted,y=p.bounds[t?"h":"v"],w=1===e.length,E=e[0][f],b=n[0][f],T=!w&&e[1][f],R=!w&&n[1][f],n=function(){!w&&me(E-T)>20&&(g=a||me(b-R)/me(E-T)),c=(_-b)/g+E,u=p["plot"+(t?"Width":"Height")]/g};n(),e=c,e<y.min?(e=y.min,l=!0):e+u>y.max&&(e=y.max-u,l=!0),l?(b-=.8*(b-s[d][0]),w||(R-=.8*(R-s[d][1])),n()):s[d]=[b,R],v||(o[d]=c-_,o[m]=u),o=v?1/g:g,i[m]=u,i[d]=e,r[v?t?"scaleY":"scaleX":"scale"+h]=g,r["translate"+h]=o*_+(b-o*E)},pinch:function(e){var n=this,r=n.chart,i=n.pinchDown,o=n.followTouchMove,s=e.touches,a=s.length,u=n.lastValidTouch,c=n.hasZoom,l=n.selectionMarker,p={},d=1===a&&(n.inClass(e.target,"highcharts-tracker")&&r.runTrackerClick||n.runChartClick),f={};(c||o)&&!d&&e.preventDefault(),Xe(s,function(t){return n.normalize(t)}),"touchstart"===e.type?(qe(s,function(t,e){i[e]={chartX:t.chartX,chartY:t.chartY}}),u.x=[i[0].chartX,i[1]&&i[1].chartX],u.y=[i[0].chartY,i[1]&&i[1].chartY],qe(r.axes,function(t){if(t.zoomEnabled){var e=r.bounds[t.horiz?"h":"v"],n=t.minPixelPadding,i=t.toPixels(h(t.options.min,t.dataMin)),o=t.toPixels(h(t.options.max,t.dataMax)),s=fe(i,o),i=he(i,o);e.min=fe(t.pos,s-n),e.max=he(t.pos+t.len,i+n)}}),n.res=!0):i.length&&(l||(n.selectionMarker=l=t({destroy:De},r.plotBox)),n.pinchTranslate(i,s,p,l,f,u),n.hasPinched=c,n.scaleGroups(p,f),!c&&o&&1===a?this.runPointActions(n.normalize(e)):n.res&&(n.res=!1,this.reset(!1,0)))},onContainerTouchStart:function(t){var e=this.chart;hn=e.index,1===t.touches.length?(t=this.normalize(t),e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)?(this.runPointActions(t),this.pinch(t)):this.reset()):2===t.touches.length&&this.pinch(t)},onContainerTouchMove:function(t){(1===t.touches.length||2===t.touches.length)&&this.pinch(t)},onDocumentTouchEnd:function(t){Le[hn]&&Le[hn].pointer.drop(t)}}),ue.PointerEvent||ue.MSPointerEvent){var mn={},_n=!!ue.PointerEvent,gn=function(){var t,e=[];e.item=function(t){return this[t]};for(t in mn)mn.hasOwnProperty(t)&&e.push({pageX:mn[t].pageX,pageY:mn[t].pageY,target:mn[t].target});return e},vn=function(t,e,n,r){t=t.originalEvent||t,"touch"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_TOUCH||!Le[hn]||(r(t),r=Le[hn].pointer,r[e]({type:n,target:t.currentTarget,preventDefault:De,touches:gn()}))};t(fn.prototype,{onContainerPointerDown:function(t){vn(t,"onContainerTouchStart","touchstart",function(t){mn[t.pointerId]={pageX:t.pageX,pageY:t.pageY,target:t.currentTarget}})},onContainerPointerMove:function(t){vn(t,"onContainerTouchMove","touchmove",function(t){mn[t.pointerId]={pageX:t.pageX,pageY:t.pageY},mn[t.pointerId].target||(mn[t.pointerId].target=t.currentTarget)})},onDocumentPointerUp:function(t){vn(t,"onContainerTouchEnd","touchend",function(t){delete mn[t.pointerId]})},batchMSEvents:function(t){t(this.chart.container,_n?"pointerdown":"MSPointerDown",this.onContainerPointerDown),t(this.chart.container,_n?"pointermove":"MSPointerMove",this.onContainerPointerMove),t(ae,_n?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}}),y(fn.prototype,"init",function(t,e,n){t.call(this,e,n),(this.hasZoom||this.followTouchMove)&&f(e.container,{"-ms-touch-action":xe,"touch-action":xe})}),y(fn.prototype,"setDOMEvents",function(t){t.apply(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(Ke)}),y(fn.prototype,"destroy",function(t){this.batchMSEvents(Qe),t.call(this)})}var yn=se.Legend=function(t,e){this.init(t,e)};yn.prototype={init:function(t,n){var r=this,i=n.itemStyle,o=h(n.padding,8),s=n.itemMarginTop||0;this.options=n,n.enabled&&(r.itemStyle=i,r.itemHiddenStyle=e(i,n.itemHiddenStyle),r.itemMarginTop=s,r.padding=o,r.initialItemX=o,r.initialItemY=o-5,r.maxItemWidth=0,r.chart=t,r.itemHeight=0,r.lastLineHeight=0,r.symbolWidth=h(n.symbolWidth,16),r.pages=[],r.render(),Ke(r.chart,"endResize",function(){r.positionCheckboxes()}))},colorizeItem:function(t,e){var n,r=this.options,i=t.legendItem,o=t.legendLine,s=t.legendSymbol,a=this.itemHiddenStyle.color,r=e?r.itemStyle.color:a,u=e?t.legendColor||t.color||"#CCC":a,a=t.options&&t.options.marker,c={fill:u};if(i&&i.css({fill:r,color:r}),o&&o.attr({stroke:u}),s){if(a&&s.isMarker)for(n in c.stroke=u,a=t.convertAttribs(a))i=a[n],i!==z&&(c[n]=i);s.attr(c)}},positionItem:function(t){var e=this.options,n=e.symbolPadding,e=!e.rtl,r=t._legendItemPos,i=r[0],r=r[1],o=t.checkbox;t.legendGroup&&t.legendGroup.translate(e?i:this.legendWidth-i-2*n-4,r),o&&(o.x=i,o.y=r)},destroyItem:function(t){var e=t.checkbox;qe(["legendItem","legendLine","legendSymbol","legendGroup"],function(e){t[e]&&(t[e]=t[e].destroy())}),e&&O(t.checkbox)},destroy:function(){var t=this.group,e=this.box;e&&(this.box=e.destroy()),t&&(this.group=t.destroy())},positionCheckboxes:function(t){var e,n=this.group.alignAttr,r=this.clipHeight||this.legendHeight;n&&(e=n.translateY,qe(this.allItems,function(i){var o,s=i.checkbox;s&&(o=e+s.y+(t||0)+3,f(s,{left:n.translateX+i.checkboxOffset+s.x-20+"px",top:o+"px",display:o>e-6&&e+r-6>o?"":xe}))}))},renderTitle:function(){var t=this.padding,e=this.options.title,n=0;e.text&&(this.title||(this.title=this.chart.renderer.label(e.text,t-3,t-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(e.style).add(this.group)),t=this.title.getBBox(),n=t.height,this.offsetWidth=t.width,this.contentGroup.attr({translateY:n})),this.titleHeight=n},renderItem:function(t){var n=this.chart,r=n.renderer,i=this.options,o="horizontal"===i.layout,s=this.symbolWidth,a=i.symbolPadding,u=this.itemStyle,c=this.itemHiddenStyle,l=this.padding,p=o?h(i.itemDistance,20):0,d=!i.rtl,f=i.width,m=i.itemMarginBottom||0,_=this.itemMarginTop,g=this.initialItemX,v=t.legendItem,y=t.series&&t.series.drawLegendSymbol?t.series:t,E=y.options,E=this.createCheckboxForItem&&E&&E.showCheckbox,b=i.useHTML;v||(t.legendGroup=r.g("legend-item").attr({zIndex:1}).add(this.scrollGroup),t.legendItem=v=r.text(i.labelFormat?w(i.labelFormat,t):i.labelFormatter.call(t),d?s+a:-a,this.baseline||0,b).css(e(t.visible?u:c)).attr({align:d?"left":"right",zIndex:2}).add(t.legendGroup),this.baseline||(this.baseline=r.fontMetrics(u.fontSize,v).f+3+_,v.attr("y",this.baseline)),y.drawLegendSymbol(this,t),this.setItemEvents&&this.setItemEvents(t,v,b,u,c),this.colorizeItem(t,t.visible),E&&this.createCheckboxForItem(t)),r=v.getBBox(),s=t.checkboxOffset=i.itemWidth||t.legendItemWidth||s+a+r.width+p+(E?20:0),this.itemHeight=a=le(t.legendItemHeight||r.height),o&&this.itemX-g+s>(f||n.chartWidth-2*l-g-i.x)&&(this.itemX=g,this.itemY+=_+this.lastLineHeight+m,this.lastLineHeight=0),this.maxItemWidth=he(this.maxItemWidth,s),this.lastItemY=_+this.itemY+m,this.lastLineHeight=he(a,this.lastLineHeight),t._legendItemPos=[this.itemX,this.itemY],o?this.itemX+=s:(this.itemY+=_+a+m,this.lastLineHeight=a),this.offsetWidth=f||he((o?this.itemX-g-p:s)+l,this.offsetWidth)},getAllItems:function(){var t=[];return qe(this.chart.series,function(e){var n=e.options;h(n.showInLegend,l(n.linkedTo)?!1:z,!0)&&(t=t.concat(e.legendItems||("point"===n.legendType?e.data:e)))}),t},render:function(){var e,n,r,i,o=this,s=o.chart,a=s.renderer,u=o.group,c=o.box,l=o.options,p=o.padding,d=l.borderWidth,h=l.backgroundColor;o.itemX=o.initialItemX,o.itemY=o.initialItemY,o.offsetWidth=0,o.lastItemY=0,u||(o.group=u=a.g("legend").attr({zIndex:7}).add(),o.contentGroup=a.g().attr({zIndex:1}).add(u),o.scrollGroup=a.g().add(o.contentGroup)),o.renderTitle(),e=o.getAllItems(),T(e,function(t,e){return(t.options&&t.options.legendIndex||0)-(e.options&&e.options.legendIndex||0)}),l.reversed&&e.reverse(),o.allItems=e,o.display=n=!!e.length,qe(e,function(t){o.renderItem(t)}),r=l.width||o.offsetWidth,i=o.lastItemY+o.lastLineHeight+o.titleHeight,i=o.handleOverflow(i),(d||h)&&(r+=p,i+=p,c?r>0&&i>0&&(c[c.isNew?"attr":"animate"](c.crisp({width:r,height:i})),c.isNew=!1):(o.box=c=a.rect(0,0,r,i,l.borderRadius,d||0).attr({stroke:l.borderColor,"stroke-width":d||0,fill:h||xe}).add(u).shadow(l.shadow),c.isNew=!0),c[n?"show":"hide"]()),o.legendWidth=r,o.legendHeight=i,qe(e,function(t){o.positionItem(t)}),n&&u.align(t({width:r,height:i},l),!0,"spacingBox"),s.isResizing||this.positionCheckboxes()},handleOverflow:function(t){var e,n,r=this,i=this.chart,o=i.renderer,s=this.options,a=s.y,a=i.spacingBox.height+("top"===s.verticalAlign?-a:a)-this.padding,u=s.maxHeight,c=this.clipRect,l=s.navigation,p=h(l.animation,!0),d=l.arrowSize||12,f=this.nav,m=this.pages,_=this.allItems;return"horizontal"===s.layout&&(a/=2),u&&(a=fe(a,u)),m.length=0,t>a&&!s.useHTML?(this.clipHeight=e=he(a-20-this.titleHeight-this.padding,0),this.currentPage=h(this.currentPage,1),this.fullHeight=t,qe(_,function(t,r){var i=t._legendItemPos[1],o=le(t.legendItem.getBBox().height),s=m.length;(!s||i-m[s-1]>e&&(n||i)!==m[s-1])&&(m.push(n||i),s++),r===_.length-1&&i+o-m[s-1]>e&&m.push(i),i!==n&&(n=i)}),c||(c=r.clipRect=o.clipRect(0,this.padding,9999,0),r.contentGroup.clip(c)),c.attr({height:e}),f||(this.nav=f=o.g().attr({zIndex:1}).add(this.group),this.up=o.symbol("triangle",0,0,d,d).on("click",function(){r.scroll(-1,p)}).add(f),this.pager=o.text("",15,10).css(l.style).add(f),this.down=o.symbol("triangle-down",0,0,d,d).on("click",function(){r.scroll(1,p)}).add(f)),r.scroll(0),t=a):f&&(c.attr({height:i.chartHeight}),f.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),t},scroll:function(t,e){var n=this.pages,r=n.length,i=this.currentPage+t,o=this.clipHeight,s=this.options.navigation,a=s.activeColor,s=s.inactiveColor,u=this.pager,c=this.padding;i>r&&(i=r),i>0&&(e!==z&&C(e,this.chart),this.nav.attr({translateX:c,translateY:o+this.padding+7+this.titleHeight,visibility:"visible"}),this.up.attr({fill:1===i?s:a}).css({cursor:1===i?"default":"pointer"}),u.attr({text:i+"/"+r}),this.down.attr({x:18+this.pager.getBBox().width,fill:i===r?s:a}).css({cursor:i===r?"default":"pointer"}),n=-n[i-1]+this.initialItemY,this.scrollGroup.animate({translateY:n}),this.currentPage=i,this.positionCheckboxes(n))}},Ye=se.LegendSymbolMixin={drawRectangle:function(t,e){var n=t.options.symbolHeight||12;e.legendSymbol=this.chart.renderer.rect(0,t.baseline-5-n/2,t.symbolWidth,n,t.options.symbolRadius||0).attr({zIndex:3}).add(e.legendGroup)},drawLineMarker:function(t){var e,n=this.options,r=n.marker;e=t.symbolWidth;var i,o=this.chart.renderer,s=this.legendGroup,t=t.baseline-le(.3*o.fontMetrics(t.options.itemStyle.fontSize,this.legendItem).b);n.lineWidth&&(i={"stroke-width":n.lineWidth},n.dashStyle&&(i.dashstyle=n.dashStyle),this.legendLine=o.path(["M",0,t,"L",e,t]).attr(i).add(s)),r&&r.enabled!==!1&&(n=r.radius,this.legendSymbol=e=o.symbol(this.symbol,e/2-n,t-n,2*n,2*n).add(s),e.isMarker=!0)}},(/Trident\/7\.0/.test(we)||Ae)&&y(yn.prototype,"positionItem",function(t,e){var n=this,r=function(){e._legendItemPos&&t.call(n,e)};r(),setTimeout(r)}),L.prototype={init:function(t,n){var r,i=t.series;t.series=null,r=e(G,t),r.series=t.series=i,this.userOptions=t,i=r.chart,this.margin=this.splashArray("margin",i),this.spacing=this.splashArray("spacing",i);var o=i.events;this.bounds={h:{},v:{}},this.callback=n,this.isResizing=0,this.options=r,this.axes=[],this.series=[],this.hasCartesianSeries=i.showAxes;var s,a=this;if(a.index=Le.length,Le.push(a),Ne++,i.reflow!==!1&&Ke(a,"load",function(){a.initReflow()}),o)for(s in o)Ke(a,s,o[s]);a.xAxis=[],a.yAxis=[],a.animation=ke?!1:h(i.animation,!0),a.pointCount=a.colorCounter=a.symbolCounter=0,a.firstRender()},initSeries:function(t){var e=this.options.chart;return(e=Ge[t.type||e.type||e.defaultSeriesType])||W(17,!0),e=new e,e.init(this,t),e},isInsidePlot:function(t,e,n){var r=n?e:t,t=n?t:e;return r>=0&&r<=this.plotWidth&&t>=0&&t<=this.plotHeight},adjustTickAmounts:function(){this.options.chart.alignTicks!==!1&&qe(this.axes,function(t){t.adjustTickAmount()}),this.maxTicks=null},redraw:function(e){var n,r,i=this.axes,o=this.series,s=this.pointer,a=this.legend,u=this.isDirtyLegend,c=this.hasCartesianSeries,l=this.isDirtyBox,p=o.length,d=p,h=this.renderer,f=h.isHidden(),m=[];for(C(e,this),f&&this.cloneRenderTo(),this.layOutTitles();d--;)if(e=o[d],e.options.stacking&&(n=!0,e.isDirty)){r=!0;break}if(r)for(d=p;d--;)e=o[d],e.options.stacking&&(e.isDirty=!0);qe(o,function(t){t.isDirty&&"point"===t.options.legendType&&(u=!0)}),u&&a.options.enabled&&(a.render(),this.isDirtyLegend=!1),n&&this.getStacks(),c&&(this.isResizing||(this.maxTicks=null,qe(i,function(t){t.setScale()})),this.adjustTickAmounts()),this.getMargins(),c&&(qe(i,function(t){t.isDirty&&(l=!0)}),qe(i,function(e){e.isDirtyExtremes&&(e.isDirtyExtremes=!1,m.push(function(){Ze(e,"afterSetExtremes",t(e.eventArgs,e.getExtremes())),delete e.eventArgs})),(l||n)&&e.redraw()})),l&&this.drawChartBox(),qe(o,function(t){t.isDirty&&t.visible&&(!t.isCartesian||t.xAxis)&&t.redraw()}),s&&s.reset(!0),h.draw(),Ze(this,"redraw"),f&&this.cloneRenderTo(!0),qe(m,function(t){t.call()})},get:function(t){var e,n,r=this.axes,i=this.series;for(e=0;e<r.length;e++)if(r[e].options.id===t)return r[e];for(e=0;e<i.length;e++)if(i[e].options.id===t)return i[e];for(e=0;e<i.length;e++)for(n=i[e].points||[],r=0;r<n.length;r++)if(n[r].id===t)return n[r];return null},getAxes:function(){var t=this,e=this.options,n=e.xAxis=d(e.xAxis||{}),e=e.yAxis=d(e.yAxis||{});qe(n,function(t,e){t.index=e,t.isX=!0}),qe(e,function(t,e){t.index=e}),n=n.concat(e),qe(n,function(e){new D(t,e)}),t.adjustTickAmounts()},getSelectedPoints:function(){var t=[];return qe(this.series,function(e){t=t.concat(He(e.points||[],function(t){return t.selected}))}),t},getSelectedSeries:function(){return He(this.series,function(t){return t.selected})},getStacks:function(){var t=this;qe(t.yAxis,function(t){t.stacks&&t.hasVisibleSeries&&(t.oldStacks=t.stacks)}),qe(t.series,function(e){!e.options.stacking||e.visible!==!0&&t.options.chart.ignoreHiddenSeries!==!1||(e.stackKey=e.type+h(e.options.stack,""))})},setTitle:function(t,n,r){var i,o,s=this,a=s.options;o=a.title=e(a.title,t),i=a.subtitle=e(a.subtitle,n),a=i,qe([["title",t,o],["subtitle",n,a]],function(t){var e=t[0],n=s[e],r=t[1],t=t[2];n&&r&&(s[e]=n=n.destroy()),t&&t.text&&!n&&(s[e]=s.renderer.text(t.text,0,0,t.useHTML).attr({align:t.align,"class":"highcharts-"+e,zIndex:t.zIndex||4}).css(t.style).add())}),s.layOutTitles(r)},layOutTitles:function(e){var n=0,r=this.title,i=this.subtitle,o=this.options,s=o.title,o=o.subtitle,a=this.renderer,u=this.spacingBox.width-44;!r||(r.css({width:(s.width||u)+"px"}).align(t({y:a.fontMetrics(s.style.fontSize,r).b-3},s),!1,"spacingBox"),s.floating||s.verticalAlign)||(n=r.getBBox().height),i&&(i.css({width:(o.width||u)+"px"}).align(t({y:n+(s.margin-13)+a.fontMetrics(s.style.fontSize,i).b},o),!1,"spacingBox"),!o.floating&&!o.verticalAlign&&(n=de(n+i.getBBox().height))),r=this.titleOffset!==n,this.titleOffset=n,!this.isDirtyBox&&r&&(this.isDirtyBox=r,this.hasRendered&&h(e,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var t=this.options.chart,e=t.width,t=t.height,n=this.renderToClone||this.renderTo;l(e)||(this.containerWidth=Be(n,"width")),l(t)||(this.containerHeight=Be(n,"height")),this.chartWidth=he(0,e||this.containerWidth||600),this.chartHeight=he(0,h(t,this.containerHeight>19?this.containerHeight:400))},cloneRenderTo:function(t){var e=this.renderToClone,n=this.container;t?e&&(this.renderTo.appendChild(n),O(e),delete this.renderToClone):(n&&n.parentNode===this.renderTo&&this.renderTo.removeChild(n),this.renderToClone=e=this.renderTo.cloneNode(0),f(e,{position:"absolute",top:"-9999px",display:"block"}),e.style.setProperty&&e.style.setProperty("display","block","important"),ae.body.appendChild(e),n&&e.appendChild(n))},getContainer:function(){var e,i,o,s,a=this.options.chart;this.renderTo=e=a.renderTo,s="highcharts-"+Ie++,r(e)&&(this.renderTo=e=ae.getElementById(e)),e||W(13,!0),i=n(p(e,"data-highcharts-chart")),!isNaN(i)&&Le[i]&&Le[i].hasRendered&&Le[i].destroy(),p(e,"data-highcharts-chart",this.index),e.innerHTML="",!a.skipClone&&!e.offsetWidth&&this.cloneRenderTo(),this.getChartSize(),i=this.chartWidth,o=this.chartHeight,this.container=e=m(ze,{className:"highcharts-container"+(a.className?" "+a.className:""),id:s},t({position:"relative",overflow:"hidden",width:i+"px",height:o+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},a.style),this.renderToClone||e),this._cursor=e.style.cursor,this.renderer=a.forExport?new un(e,i,o,a.style,!0):new x(e,i,o,a.style),ke&&this.renderer.create(this,e,i,o)},getMargins:function(){var t,e=this.spacing,n=this.legend,r=this.margin,i=this.options.legend,o=h(i.margin,20),s=i.x,a=i.y,u=i.align,c=i.verticalAlign,p=this.titleOffset;this.resetMargins(),t=this.axisOffset,p&&!l(r[0])&&(this.plotTop=he(this.plotTop,p+this.options.title.margin+e[0])),n.display&&!i.floating&&("right"===u?l(r[1])||(this.marginRight=he(this.marginRight,n.legendWidth-s+o+e[1])):"left"===u?l(r[3])||(this.plotLeft=he(this.plotLeft,n.legendWidth+s+o+e[3])):"top"===c?l(r[0])||(this.plotTop=he(this.plotTop,n.legendHeight+a+o+e[0])):"bottom"!==c||l(r[2])||(this.marginBottom=he(this.marginBottom,n.legendHeight-a+o+e[2]))),this.extraBottomMargin&&(this.marginBottom+=this.extraBottomMargin),this.extraTopMargin&&(this.plotTop+=this.extraTopMargin),this.hasCartesianSeries&&qe(this.axes,function(t){t.getOffset()}),l(r[3])||(this.plotLeft+=t[3]),l(r[0])||(this.plotTop+=t[0]),l(r[2])||(this.marginBottom+=t[2]),l(r[1])||(this.marginRight+=t[1]),this.setChartSize()},reflow:function(t){var e=this,n=e.options.chart,r=e.renderTo,i=n.width||Be(r,"width"),o=n.height||Be(r,"height"),n=t?t.target:ue,r=function(){e.container&&(e.setSize(i,o,!1),e.hasUserSize=null)};e.hasUserSize||!i||!o||n!==ue&&n!==ae||((i!==e.containerWidth||o!==e.containerHeight)&&(clearTimeout(e.reflowTimeout),t?e.reflowTimeout=setTimeout(r,100):r()),e.containerWidth=i,e.containerHeight=o)},initReflow:function(){var t=this,e=function(e){t.reflow(e)};Ke(ue,"resize",e),Ke(t,"destroy",function(){Qe(ue,"resize",e)})},setSize:function(t,e,n){var r,i,o,s=this;s.isResizing+=1,o=function(){s&&Ze(s,"endResize",null,function(){s.isResizing-=1})},C(n,s),s.oldChartHeight=s.chartHeight,s.oldChartWidth=s.chartWidth,l(t)&&(s.chartWidth=r=he(0,le(t)),s.hasUserSize=!!r),l(e)&&(s.chartHeight=i=he(0,le(e))),(Y?tn:f)(s.container,{width:r+"px",height:i+"px"},Y),s.setChartSize(!0),s.renderer.setSize(r,i,n),s.maxTicks=null,qe(s.axes,function(t){t.isDirty=!0,t.setScale()}),qe(s.series,function(t){t.isDirty=!0}),s.isDirtyLegend=!0,s.isDirtyBox=!0,s.layOutTitles(),s.getMargins(),s.redraw(n),s.oldChartHeight=null,Ze(s,"resize"),Y===!1?o():setTimeout(o,Y&&Y.duration||500)},setChartSize:function(t){var e,n,r,i,o=this.inverted,s=this.renderer,a=this.chartWidth,u=this.chartHeight,c=this.options.chart,l=this.spacing,p=this.clipOffset;this.plotLeft=e=le(this.plotLeft),this.plotTop=n=le(this.plotTop),this.plotWidth=r=he(0,le(a-e-this.marginRight)),this.plotHeight=i=he(0,le(u-n-this.marginBottom)),this.plotSizeX=o?i:r,this.plotSizeY=o?r:i,this.plotBorderWidth=c.plotBorderWidth||0,this.spacingBox=s.spacingBox={x:l[3],y:l[0],width:a-l[3]-l[1],height:u-l[0]-l[2]},this.plotBox=s.plotBox={x:e,y:n,width:r,height:i},a=2*pe(this.plotBorderWidth/2),o=de(he(a,p[3])/2),s=de(he(a,p[0])/2),this.clipBox={x:o,y:s,width:pe(this.plotSizeX-he(a,p[1])/2-o),height:he(0,pe(this.plotSizeY-he(a,p[2])/2-s))},t||qe(this.axes,function(t){t.setAxisSize(),t.setAxisTranslation()})},resetMargins:function(){var t=this.spacing,e=this.margin;this.plotTop=h(e[0],t[0]),this.marginRight=h(e[1],t[1]),this.marginBottom=h(e[2],t[2]),this.plotLeft=h(e[3],t[3]),this.axisOffset=[0,0,0,0],this.clipOffset=[0,0,0,0]},drawChartBox:function(){var t,e=this.options.chart,n=this.renderer,r=this.chartWidth,i=this.chartHeight,o=this.chartBackground,s=this.plotBackground,a=this.plotBorder,u=this.plotBGImage,c=e.borderWidth||0,l=e.backgroundColor,p=e.plotBackgroundColor,d=e.plotBackgroundImage,h=e.plotBorderWidth||0,f=this.plotLeft,m=this.plotTop,_=this.plotWidth,g=this.plotHeight,v=this.plotBox,y=this.clipRect,w=this.clipBox;t=c+(e.shadow?8:0),(c||l)&&(o?o.animate(o.crisp({width:r-t,height:i-t})):(o={fill:l||xe},c&&(o.stroke=e.borderColor,o["stroke-width"]=c),this.chartBackground=n.rect(t/2,t/2,r-t,i-t,e.borderRadius,c).attr(o).addClass("highcharts-background").add().shadow(e.shadow))),p&&(s?s.animate(v):this.plotBackground=n.rect(f,m,_,g,0).attr({fill:p}).add().shadow(e.plotShadow)),d&&(u?u.animate(v):this.plotBGImage=n.image(d,f,m,_,g).add()),y?y.animate({width:w.width,height:w.height}):this.clipRect=n.clipRect(w),h&&(a?a.animate(a.crisp({x:f,y:m,width:_,height:g,strokeWidth:-h})):this.plotBorder=n.rect(f,m,_,g,0,-h).attr({stroke:e.plotBorderColor,"stroke-width":h,fill:xe,zIndex:1}).add()),this.isDirtyBox=!1},propFromSeries:function(){var t,e,n,r=this,i=r.options.chart,o=r.options.series;qe(["inverted","angular","polar"],function(s){for(t=Ge[i.type||i.defaultSeriesType],n=r[s]||i[s]||t&&t.prototype[s],e=o&&o.length;!n&&e--;)(t=Ge[o[e].type])&&t.prototype[s]&&(n=!0);r[s]=n})},linkSeries:function(){var t=this,e=t.series;qe(e,function(t){t.linkedSeries.length=0}),qe(e,function(e){var n=e.options.linkedTo;r(n)&&(n=":previous"===n?t.series[e.index-1]:t.get(n))&&(n.linkedSeries.push(e),e.linkedParent=n)})},renderSeries:function(){qe(this.series,function(t){t.translate(),t.setTooltipPoints&&t.setTooltipPoints(),t.render()})},renderLabels:function(){var e=this,r=e.options.labels;r.items&&qe(r.items,function(i){var o=t(r.style,i.style),s=n(o.left)+e.plotLeft,a=n(o.top)+e.plotTop+12;delete o.left,delete o.top,e.renderer.text(i.html,s,a).attr({zIndex:2}).css(o).add()})},render:function(){var t=this.axes,e=this.renderer,n=this.options;this.setTitle(),this.legend=new yn(this,n.legend),this.getStacks(),qe(t,function(t){t.setScale()}),this.getMargins(),this.maxTicks=null,qe(t,function(t){t.setTickPositions(!0),t.setMaxTicks()}),this.adjustTickAmounts(),this.getMargins(),this.drawChartBox(),this.hasCartesianSeries&&qe(t,function(t){t.render()}),this.seriesGroup||(this.seriesGroup=e.g("series-group").attr({zIndex:3}).add()),this.renderSeries(),this.renderLabels(),this.showCredits(n.credits),this.hasRendered=!0},showCredits:function(t){t.enabled&&!this.credits&&(this.credits=this.renderer.text(t.text,0,0).on("click",function(){t.href&&(location.href=t.href)}).attr({align:t.position.align,zIndex:8}).css(t.style).add().align(t.position))},destroy:function(){var t,e=this,n=e.axes,r=e.series,i=e.container,o=i&&i.parentNode;for(Ze(e,"destroy"),Le[e.index]=z,Ne--,e.renderTo.removeAttribute("data-highcharts-chart"),Qe(e),t=n.length;t--;)n[t]=n[t].destroy();for(t=r.length;t--;)r[t]=r[t].destroy();qe("title,subtitle,chartBackground,plotBackground,plotBGImage,plotBorder,seriesGroup,clipRect,credits,pointer,scroller,rangeSelector,legend,resetZoomButton,tooltip,renderer".split(","),function(t){var n=e[t];n&&n.destroy&&(e[t]=n.destroy())}),i&&(i.innerHTML="",Qe(i),o&&O(i));for(t in e)delete e[t]},isReadyToRender:function(){var t=this;return!Se&&ue==ue.top&&"complete"!==ae.readyState||ke&&!ue.canvg?(ke?pn.push(function(){t.firstRender()},t.options.global.canvasToolsURL):ae.attachEvent("onreadystatechange",function(){ae.detachEvent("onreadystatechange",t.firstRender),"complete"===ae.readyState&&t.firstRender()}),!1):!0},firstRender:function(){var t=this,e=t.options,n=t.callback;t.isReadyToRender()&&(t.getContainer(),Ze(t,"init"),t.resetMargins(),t.setChartSize(),t.propFromSeries(),t.getAxes(),qe(e.series||[],function(e){t.initSeries(e)}),t.linkSeries(),Ze(t,"beforeRender"),se.Pointer&&(t.pointer=new fn(t,e)),t.render(),t.renderer.draw(),n&&n.apply(t,[t]),qe(t.callbacks,function(e){e.apply(t,[t])}),t.cloneRenderTo(!0),Ze(t,"load"))},splashArray:function(t,e){var n=e[t],n=i(n)?n:[n,n,n,n];return[h(e[t+"Top"],n[0]),h(e[t+"Right"],n[1]),h(e[t+"Bottom"],n[2]),h(e[t+"Left"],n[3])]}},L.prototype.callbacks=[],cn=se.CenteredSeriesMixin={getCenter:function(){var t,e,r=this.options,i=this.chart,o=2*(r.slicedOffset||0),s=i.plotWidth-2*o,a=i.plotHeight-2*o,i=r.center,r=[h(i[0],"50%"),h(i[1],"50%"),r.size||"100%",r.innerSize||0],u=fe(s,a);return Xe(r,function(r,i){return e=/%$/.test(r),t=2>i||2===i&&e,(e?[s,a,u,u][i]*n(r)/100:r)+(t?o:0)})}};var wn=function(){};wn.prototype={init:function(t,e,n){return this.series=t,this.applyOptions(e,n),this.pointAttr={},t.options.colorByPoint&&(e=t.options.colors||t.chart.options.colors,this.color=this.color||e[t.colorCounter++],t.colorCounter===e.length)&&(t.colorCounter=0),t.chart.pointCount++,this},applyOptions:function(e,n){var r=this.series,i=r.options.pointValKey||r.pointValKey,e=wn.prototype.optionsToObject.call(this,e);return t(this,e),this.options=this.options?t(this.options,e):e,i&&(this.y=this[i]),this.x===z&&r&&(this.x=n===z?r.autoIncrement():n),this},optionsToObject:function(t){var e={},n=this.series,r=n.pointArrayMap||["y"],i=r.length,s=0,a=0;if("number"==typeof t||null===t)e[r[0]]=t;else if(o(t))for(t.length>i&&(n=typeof t[0],"string"===n?e.name=t[0]:"number"===n&&(e.x=t[0]),s++);i>a;)e[r[a++]]=t[s++];else"object"==typeof t&&(e=t,t.dataLabels&&(n._hasPointLabels=!0),t.marker&&(n._hasPointMarkers=!0));return e},destroy:function(){var t,e=this.series.chart,n=e.hoverPoints;e.pointCount--,n&&(this.setState(),c(n,this),!n.length)&&(e.hoverPoints=null),this===e.hoverPoint&&this.onMouseOut(),(this.graphic||this.dataLabel)&&(Qe(this),this.destroyElements()),this.legendItem&&e.legend.destroyItem(this);for(t in this)this[t]=null},destroyElements:function(){for(var t,e="graphic,dataLabel,dataLabelUpper,group,connector,shadowGroup".split(","),n=6;n--;)t=e[n],this[t]&&(this[t]=this[t].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(t){var e=this.series,n=e.tooltipOptions,r=h(n.valueDecimals,""),i=n.valuePrefix||"",o=n.valueSuffix||"";return qe(e.pointArrayMap||["y"],function(e){e="{point."+e,(i||o)&&(t=t.replace(e+"}",i+e+"}"+o)),t=t.replace(e+"}",e+":,."+r+"f}")}),w(t,{point:this,series:this.series})},firePointEvent:function(t,e,n){var r=this,i=this.series.options;(i.point.events[t]||r.options&&r.options.events&&r.options.events[t])&&this.importEvents(),"click"===t&&i.allowPointSelect&&(n=function(t){r.select(null,t.ctrlKey||t.metaKey||t.shiftKey)}),Ze(this,t,e,n)}};var En=function(){};En.prototype={isCartesian:!0,type:"line",pointClass:wn,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(e,n){var r,i,o=this,s=e.series,a=function(t,e){return h(t.options.index,t._i)-h(e.options.index,e._i)};o.chart=e,o.options=n=o.setOptions(n),o.linkedSeries=[],o.bindAxes(),t(o,{name:n.name,state:"",pointAttr:{},visible:n.visible!==!1,selected:n.selected===!0}),ke&&(n.animation=!1),i=n.events;for(r in i)Ke(o,r,i[r]);(i&&i.click||n.point&&n.point.events&&n.point.events.click||n.allowPointSelect)&&(e.runTrackerClick=!0),o.getColor(),o.getSymbol(),qe(o.parallelArrays,function(t){o[t+"Data"]=[]}),o.setData(n.data,!1),o.isCartesian&&(e.hasCartesianSeries=!0),s.push(o),o._i=s.length-1,T(s,a),this.yAxis&&T(this.yAxis.series,a),qe(s,function(t,e){t.index=e,t.name=t.name||"Series "+(e+1)})},bindAxes:function(){var t,e=this,n=e.options,r=e.chart;qe(e.axisTypes||[],function(i){qe(r[i],function(r){t=r.options,(n[i]===t.index||n[i]!==z&&n[i]===t.id||n[i]===z&&0===t.index)&&(r.series.push(e),e[i]=r,r.isDirty=!0)}),!e[i]&&e.optionalAxis!==i&&W(18,!0)})},updateParallelArrays:function(t,e){var n=t.series,r=arguments;qe(n.parallelArrays,"number"==typeof e?function(r){var i="y"===r&&n.toYData?n.toYData(t):t[r];n[r+"Data"][e]=i}:function(t){Array.prototype[e].apply(n[t+"Data"],Array.prototype.slice.call(r,2))})},autoIncrement:function(){var t=this.options,e=this.xIncrement,e=h(e,t.pointStart,0);return this.pointInterval=h(this.pointInterval,t.pointInterval,1),this.xIncrement=e+this.pointInterval,e
},getSegments:function(){var t,e=-1,n=[],r=this.points,i=r.length;if(i)if(this.options.connectNulls){for(t=i;t--;)null===r[t].y&&r.splice(t,1);r.length&&(n=[r])}else qe(r,function(t,o){null===t.y?(o>e+1&&n.push(r.slice(e+1,o)),e=o):o===i-1&&n.push(r.slice(e+1,o+1))});this.segments=n},setOptions:function(t){var n=this.chart,r=n.options.plotOptions,n=n.userOptions||{},i=n.plotOptions||{},o=r[this.type];return this.userOptions=t,r=e(o,r.series,t),this.tooltipOptions=e(G.tooltip,G.plotOptions[this.type].tooltip,n.tooltip,i.series&&i.series.tooltip,i[this.type]&&i[this.type].tooltip,t.tooltip),null===o.marker&&delete r.marker,r},getCyclic:function(t,e,n){var r=this.userOptions,i="_"+t+"Index",o=t+"Counter";e||(l(r[i])?e=r[i]:(r[i]=e=this.chart[o]%n.length,this.chart[o]+=1),e=n[e]),this[t]=e},getColor:function(){this.options.colorByPoint||this.getCyclic("color",this.options.color||nn[this.type].color,this.chart.options.colors)},getSymbol:function(){var t=this.options.marker;this.getCyclic("symbol",t.symbol,this.chart.options.symbols),/^url/.test(this.symbol)&&(t.radius=0)},drawLegendSymbol:Ye.drawLineMarker,setData:function(t,e,n,i){var a,u=this,c=u.points,l=c&&c.length||0,p=u.options,d=u.chart,f=null,m=u.xAxis,_=m&&!!m.categories,g=u.tooltipPoints,v=p.turboThreshold,y=this.xData,w=this.yData,E=(a=u.pointArrayMap)&&a.length,t=t||[];if(a=t.length,e=h(e,!0),i===!1||!a||l!==a||u.cropped||u.hasGroupedData){if(u.xIncrement=null,u.pointRange=_?1:p.pointRange,u.colorCounter=0,qe(this.parallelArrays,function(t){u[t+"Data"].length=0}),v&&a>v){for(n=0;null===f&&a>n;)f=t[n],n++;if(s(f)){for(_=h(p.pointStart,0),p=h(p.pointInterval,1),n=0;a>n;n++)y[n]=_,w[n]=t[n],_+=p;u.xIncrement=_}else if(o(f))if(E)for(n=0;a>n;n++)p=t[n],y[n]=p[0],w[n]=p.slice(1,E+1);else for(n=0;a>n;n++)p=t[n],y[n]=p[0],w[n]=p[1];else W(12)}else for(n=0;a>n;n++)t[n]!==z&&(p={series:u},u.pointClass.prototype.applyOptions.apply(p,[t[n]]),u.updateParallelArrays(p,n),_&&p.name)&&(m.names[p.x]=p.name);for(r(w[0])&&W(14,!0),u.data=[],u.options.data=t,n=l;n--;)c[n]&&c[n].destroy&&c[n].destroy();g&&(g.length=0),m&&(m.minRange=m.userMinRange),u.isDirty=u.isDirtyData=d.isDirtyBox=!0,n=!1}else qe(t,function(t,e){c[e].update(t,!1,null,!1)});e&&d.redraw(n)},processData:function(t){var e,n=this.xData,r=this.yData,i=n.length;e=0;var o,s,a,u=this.xAxis,c=this.options;a=c.cropThreshold;var l,p,d=0,h=this.isCartesian;if(h&&!this.isDirty&&!u.isDirty&&!this.yAxis.isDirty&&!t)return!1;for(u&&(l=u.getExtremes(),p=l.min,l=l.max),h&&this.sorted&&(!a||i>a||this.forceCrop)&&(n[i-1]<p||n[0]>l?(n=[],r=[]):(n[0]<p||n[i-1]>l)&&(e=this.cropData(this.xData,this.yData,p,l),n=e.xData,r=e.yData,e=e.start,o=!0,d=n.length)),a=n.length-1;a>=0;a--)i=n[a]-n[a-1],!o&&n[a]>p&&n[a]<l&&d++,i>0&&(s===z||s>i)?s=i:0>i&&this.requireSorting&&W(15);this.cropped=o,this.cropStart=e,this.processedXData=n,this.processedYData=r,this.activePointCount=d,null===c.pointRange&&(this.pointRange=s||1),this.closestPointRange=s},cropData:function(t,e,n,r){var i,o=t.length,s=0,a=o,u=h(this.cropShoulder,1);for(i=0;o>i;i++)if(t[i]>=n){s=he(0,i-u);break}for(;o>i;i++)if(t[i]>r){a=i+u;break}return{xData:t.slice(s,a),yData:e.slice(s,a),start:s,end:a}},generatePoints:function(){var t,e,n,r,i=this.options.data,o=this.data,s=this.processedXData,a=this.processedYData,u=this.pointClass,c=s.length,l=this.cropStart||0,p=this.hasGroupedData,h=[];for(o||p||(o=[],o.length=i.length,o=this.data=o),r=0;c>r;r++)e=l+r,p?h[r]=(new u).init(this,[s[r]].concat(d(a[r]))):(o[e]?n=o[e]:i[e]!==z&&(o[e]=n=(new u).init(this,i[e],s[r])),h[r]=n),h[r].index=e;if(o&&(c!==(t=o.length)||p))for(r=0;t>r;r++)r===l&&!p&&(r+=c),o[r]&&(o[r].destroyElements(),o[r].plotX=z);this.data=o,this.points=h},getExtremes:function(t){var e,n=this.yAxis,r=this.processedXData,i=[],o=0;e=this.xAxis.getExtremes();var s,a,u,c,l=e.min,p=e.max,t=t||this.stackedYData||this.processedYData;for(e=t.length,c=0;e>c;c++)if(a=r[c],u=t[c],s=null!==u&&u!==z&&(!n.isLog||u.length||u>0),a=this.getExtremesFromAll||this.cropped||(r[c+1]||a)>=l&&(r[c-1]||a)<=p,s&&a)if(s=u.length)for(;s--;)null!==u[s]&&(i[o++]=u[s]);else i[o++]=u;this.dataMin=h(void 0,R(i)),this.dataMax=h(void 0,A(i))},translate:function(){this.processedXData||this.processData(),this.generatePoints();for(var t=this.options,e=t.stacking,n=this.xAxis,r=n.categories,i=this.yAxis,o=this.points,a=o.length,u=!!this.modifyValue,c=t.pointPlacement,p="between"===c||s(c),d=t.threshold,t=0;a>t;t++){var f=o[t],m=f.x,_=f.y,g=f.low,v=e&&i.stacks[(this.negStacks&&d>_?"-":"")+this.stackKey];i.isLog&&0>=_&&(f.y=_=null,W(10)),f.plotX=n.translate(m,0,0,0,1,c,"flags"===this.type),e&&this.visible&&v&&v[m]&&(v=v[m],_=v.points[this.index+","+t],g=_[0],_=_[1],0===g&&(g=h(d,i.min)),i.isLog&&0>=g&&(g=null),f.total=f.stackTotal=v.total,f.percentage=v.total&&f.y/v.total*100,f.stackY=_,v.setOffset(this.pointXOffset||0,this.barW||0)),f.yBottom=l(g)?i.translate(g,0,1,0,1):null,u&&(_=this.modifyValue(_,f)),f.plotY="number"==typeof _&&1/0!==_?i.translate(_,0,1,0,1):z,f.clientX=p?n.translate(m,0,0,0,1):f.plotX,f.negative=f.y<(d||0),f.category=r&&r[f.x]!==z?r[f.x]:f.x}this.getSegments()},animate:function(e){var n,r=this.chart,o=r.renderer;n=this.options.animation;var s,a=this.clipBox||r.clipBox,u=r.inverted;n&&!i(n)&&(n=nn[this.type].animation),s=["_sharedClip",n.duration,n.easing,a.height].join(","),e?(e=r[s],n=r[s+"m"],e||(r[s]=e=o.clipRect(t(a,{width:0})),r[s+"m"]=n=o.clipRect(-99,u?-r.plotLeft:-r.plotTop,99,u?r.chartWidth:r.chartHeight)),this.group.clip(e),this.markerGroup.clip(n),this.sharedClipKey=s):((e=r[s])&&e.animate({width:r.plotSizeX},n),r[s+"m"]&&r[s+"m"].animate({width:r.plotSizeX+99},n),this.animate=null)},afterAnimate:function(){var t=this.chart,e=this.sharedClipKey,n=this.group,r=this.clipBox;n&&this.options.clip!==!1&&(e&&r||n.clip(r?t.renderer.clipRect(r):t.clipRect),this.markerGroup.clip()),Ze(this,"afterAnimate"),setTimeout(function(){e&&t[e]&&(r||(t[e]=t[e].destroy()),t[e+"m"]&&(t[e+"m"]=t[e+"m"].destroy()))},100)},drawPoints:function(){var e,n,r,i,o,s,a,u,c,l,p,d,f=this.points,m=this.chart,_=this.options.marker,g=this.pointAttr[""],v=this.markerGroup,y=h(_.enabled,!this.requireSorting||this.activePointCount<.5*this.xAxis.len/_.radius);if(_.enabled!==!1||this._hasPointMarkers)for(i=f.length;i--;)o=f[i],n=pe(o.plotX),r=o.plotY,c=o.graphic,l=o.marker||{},p=!!o.marker,e=y&&l.enabled===z||l.enabled,d=m.isInsidePlot(le(n),r,m.inverted),e&&r!==z&&!isNaN(r)&&null!==o.y?(e=o.pointAttr[o.selected?"select":""]||g,s=e.r,a=h(l.symbol,this.symbol),u=0===a.indexOf("url"),c?c[d?"show":"hide"](!0).animate(t({x:n-s,y:r-s},c.symbolName?{width:2*s,height:2*s}:{})):d&&(s>0||u)&&(o.graphic=m.renderer.symbol(a,n-s,r-s,2*s,2*s,p?l:_).attr(e).add(v))):c&&(o.graphic=c.destroy())},convertAttribs:function(t,e,n,r){var i,o,s=this.pointAttrToOptions,a={},t=t||{},e=e||{},n=n||{},r=r||{};for(i in s)o=s[i],a[i]=h(t[o],e[i],n[i],r[i]);return a},getAttribs:function(){var e,n=this,r=n.options,i=nn[n.type].marker?r.marker:r,o=i.states,s=o.hover,a=n.color;e={stroke:a,fill:a};var u,c,p=n.points||[],d=[],h=n.pointAttrToOptions;c=n.hasPointSpecificOptions;var f=r.negativeColor,m=i.lineColor,_=i.fillColor;u=r.turboThreshold;var g;if(r.marker?(s.radius=s.radius||i.radius+s.radiusPlus,s.lineWidth=s.lineWidth||i.lineWidth+s.lineWidthPlus):s.color=s.color||an(s.color||a).brighten(s.brightness).get(),d[""]=n.convertAttribs(i,e),qe(["hover","select"],function(t){d[t]=n.convertAttribs(o[t],d[""])}),n.pointAttr=d,a=p.length,!u||u>a||c)for(;a--;){if(u=p[a],(i=u.options&&u.options.marker||u.options)&&i.enabled===!1&&(i.radius=0),u.negative&&f&&(u.color=u.fillColor=f),c=r.colorByPoint||u.color,u.options)for(g in h)l(i[h[g]])&&(c=!0);c?(i=i||{},c=[],o=i.states||{},e=o.hover=o.hover||{},r.marker||(e.color=e.color||!u.options.color&&s.color||an(u.color).brighten(e.brightness||s.brightness).get()),e={color:u.color},_||(e.fillColor=u.color),m||(e.lineColor=u.color),c[""]=n.convertAttribs(t(e,i),d[""]),c.hover=n.convertAttribs(o.hover,d.hover,c[""]),c.select=n.convertAttribs(o.select,d.select,c[""])):c=d,u.pointAttr=c}},destroy:function(){var t,e,n,r,i,o=this,s=o.chart,a=/AppleWebKit\/533/.test(we),u=o.data||[];for(Ze(o,"destroy"),Qe(o),qe(o.axisTypes||[],function(t){(i=o[t])&&(c(i.series,o),i.isDirty=i.forceRedraw=!0)}),o.legendItem&&o.chart.legend.destroyItem(o),e=u.length;e--;)(n=u[e])&&n.destroy&&n.destroy();o.points=null,clearTimeout(o.animationTimeout),qe("area,graph,dataLabelsGroup,group,markerGroup,tracker,graphNeg,areaNeg,posClip,negClip".split(","),function(e){o[e]&&(t=a&&"group"===e?"hide":"destroy",o[e][t]())}),s.hoverSeries===o&&(s.hoverSeries=null),c(s.series,o);for(r in o)delete o[r]},getSegmentPath:function(t){var e=this,n=[],r=e.options.step;return qe(t,function(i,o){var s,a=i.plotX,u=i.plotY;e.getPointSpline?n.push.apply(n,e.getPointSpline(t,i,o)):(n.push(o?"L":"M"),r&&o&&(s=t[o-1],"right"===r?n.push(s.plotX,u):"center"===r?n.push((s.plotX+a)/2,s.plotY,(s.plotX+a)/2,u):n.push(a,s.plotY)),n.push(i.plotX,i.plotY))}),n},getGraphPath:function(){var t,e=this,n=[],r=[];return qe(e.segments,function(i){t=e.getSegmentPath(i),i.length>1?n=n.concat(t):r.push(i[0])}),e.singlePoints=r,e.graphPath=n},drawGraph:function(){var t=this,e=this.options,n=[["graph",e.lineColor||this.color]],r=e.lineWidth,i=e.dashStyle,o="square"!==e.linecap,s=this.getGraphPath(),a=e.negativeColor;a&&n.push(["graphNeg",a]),qe(n,function(n,a){var u=n[0],c=t[u];c?(en(c),c.animate({d:s})):r&&s.length&&(c={stroke:n[1],"stroke-width":r,fill:xe,zIndex:1},i?c.dashstyle=i:o&&(c["stroke-linecap"]=c["stroke-linejoin"]="round"),t[u]=t.chart.renderer.path(s).attr(c).add(t.group).shadow(!a&&e.shadow))})},clipNeg:function(){var t,e=this.options,n=this.chart,r=n.renderer,i=e.negativeColor||e.negativeFillColor,o=this.graph,s=this.area,a=this.posClip,u=this.negClip;t=n.chartWidth;var c=n.chartHeight,l=he(t,c),p=this.yAxis;i&&(o||s)&&(i=le(p.toPixels(e.threshold||0,!0)),0>i&&(l-=i),e={x:0,y:0,width:l,height:i},l={x:0,y:i,width:l,height:l},n.inverted&&(e.height=l.y=n.plotWidth-i,r.isVML&&(e={x:n.plotWidth-i-n.plotLeft,y:0,width:t,height:c},l={x:i+n.plotLeft-t,y:0,width:n.plotLeft+i,height:t})),p.reversed?(n=l,t=e):(n=e,t=l),a?(a.animate(n),u.animate(t)):(this.posClip=a=r.clipRect(n),this.negClip=u=r.clipRect(t),o&&this.graphNeg&&(o.clip(a),this.graphNeg.clip(u)),s&&(s.clip(a),this.areaNeg.clip(u))))},invertGroups:function(){function t(){var t={width:e.yAxis.len,height:e.xAxis.len};qe(["group","markerGroup"],function(n){e[n]&&e[n].attr(t).invert()})}var e=this,n=e.chart;e.xAxis&&(Ke(n,"resize",t),Ke(e,"destroy",function(){Qe(n,"resize",t)}),t(),e.invertGroups=t)},plotGroup:function(t,e,n,r,i){var o=this[t],s=!o;return s&&(this[t]=o=this.chart.renderer.g(e).attr({visibility:n,zIndex:r||.1}).add(i)),o[s?"attr":"animate"](this.getPlotBox()),o},getPlotBox:function(){var t=this.chart,e=this.xAxis,n=this.yAxis;return t.inverted&&(e=n,n=this.xAxis),{translateX:e?e.left:t.plotLeft,translateY:n?n.top:t.plotTop,scaleX:1,scaleY:1}},render:function(){var t,e=this,n=e.chart,r=e.options,i=(t=r.animation)&&!!e.animate&&n.renderer.isSVG&&h(t.duration,500)||0,o=e.visible?"visible":"hidden",s=r.zIndex,a=e.hasRendered,u=n.seriesGroup;t=e.plotGroup("group","series",o,s,u),e.markerGroup=e.plotGroup("markerGroup","markers",o,s,u),i&&e.animate(!0),e.getAttribs(),t.inverted=e.isCartesian?n.inverted:!1,e.drawGraph&&(e.drawGraph(),e.clipNeg()),qe(e.points,function(t){t.redraw&&t.redraw()}),e.drawDataLabels&&e.drawDataLabels(),e.visible&&e.drawPoints(),e.drawTracker&&e.options.enableMouseTracking!==!1&&e.drawTracker(),n.inverted&&e.invertGroups(),r.clip!==!1&&!e.sharedClipKey&&!a&&t.clip(n.clipRect),i&&e.animate(),a||(i?e.animationTimeout=setTimeout(function(){e.afterAnimate()},i):e.afterAnimate()),e.isDirty=e.isDirtyData=!1,e.hasRendered=!0},redraw:function(){var t=this.chart,e=this.isDirtyData,n=this.group,r=this.xAxis,i=this.yAxis;n&&(t.inverted&&n.attr({width:t.plotWidth,height:t.plotHeight}),n.animate({translateX:h(r&&r.left,t.plotLeft),translateY:h(i&&i.top,t.plotTop)})),this.translate(),this.setTooltipPoints&&this.setTooltipPoints(!0),this.render(),e&&Ze(this,"updatedData")}},N.prototype={destroy:function(){P(this,this.axis)},render:function(t){var e=this.options,n=e.format,n=n?w(n,this):e.formatter.call(this);this.label?this.label.attr({text:n,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(n,null,null,e.useHTML).css(e.style).attr({align:this.textAlign,rotation:e.rotation,visibility:"hidden"}).add(t)},setOffset:function(t,e){var n=this.axis,r=n.chart,i=r.inverted,o=this.isNegative,s=n.translate(n.usePercentage?100:this.total,0,0,0,1),n=n.translate(0),n=me(s-n),a=r.xAxis[0].translate(this.x)+t,u=r.plotHeight,o={x:i?o?s:s-n:a,y:i?u-a-e:o?u-s-n:u-s,width:i?n:e,height:i?e:n};(i=this.label)&&(i.align(this.alignOptions,null,o),o=i.alignAttr,i[this.options.crop===!1||r.isInsidePlot(o.x,o.y)?"show":"hide"](!0))}},D.prototype.buildStacks=function(){var t=this.series,e=h(this.options.reversedStacks,!0),n=t.length;if(!this.isXAxis){for(this.usePercentage=!1;n--;)t[e?n:t.length-n-1].setStackedPoints();if(this.usePercentage)for(n=0;n<t.length;n++)t[n].setPercentStacks()}},D.prototype.renderStackTotals=function(){var t,e,n=this.chart,r=n.renderer,i=this.stacks,o=this.stackTotalGroup;o||(this.stackTotalGroup=o=r.g("stack-labels").attr({visibility:"visible",zIndex:6}).add()),o.translate(n.plotLeft,n.plotTop);for(t in i)for(e in n=i[t])n[e].render(o)},En.prototype.setStackedPoints=function(){if(this.options.stacking&&(this.visible===!0||this.chart.options.chart.ignoreHiddenSeries===!1)){var t,e,n,r,i,o,s=this.processedXData,a=this.processedYData,u=[],c=a.length,l=this.options,p=l.threshold,d=l.stack,l=l.stacking,h=this.stackKey,f="-"+h,m=this.negStacks,_=this.yAxis,g=_.stacks,v=_.oldStacks;for(r=0;c>r;r++)i=s[r],o=a[r],n=this.index+","+r,e=(t=m&&p>o)?f:h,g[e]||(g[e]={}),g[e][i]||(v[e]&&v[e][i]?(g[e][i]=v[e][i],g[e][i].total=null):g[e][i]=new N(_,_.options.stackLabels,t,i,d)),e=g[e][i],e.points[n]=[e.cum||0],"percent"===l?(t=t?h:f,m&&g[t]&&g[t][i]?(t=g[t][i],e.total=t.total=he(t.total,e.total)+me(o)||0):e.total=S(e.total+(me(o)||0))):e.total=S(e.total+(o||0)),e.cum=(e.cum||0)+(o||0),e.points[n].push(e.cum),u[r]=e.cum;"percent"===l&&(_.usePercentage=!0),this.stackedYData=u,_.oldStacks={}}},En.prototype.setPercentStacks=function(){var t=this,e=t.stackKey,n=t.yAxis.stacks,r=t.processedXData;qe([e,"-"+e],function(e){for(var i,o,s,a=r.length;a--;)o=r[a],i=(s=n[e]&&n[e][o])&&s.points[t.index+","+a],(o=i)&&(s=s.total?100/s.total:0,o[0]=S(o[0]*s),o[1]=S(o[1]*s),t.stackedYData[a]=o[1])})},t(L.prototype,{addSeries:function(t,e,n){var r,i=this;return t&&(e=h(e,!0),Ze(i,"addSeries",{options:t},function(){r=i.initSeries(t),i.isDirtyLegend=!0,i.linkSeries(),e&&i.redraw(n)})),r},addAxis:function(t,n,r,i){var o=n?"xAxis":"yAxis",s=this.options;new D(this,e(t,{index:this[o].length,isX:n})),s[o]=d(s[o]||{}),s[o].push(t),h(r,!0)&&this.redraw(i)},showLoading:function(e){var n=this,r=n.options,i=n.loadingDiv,o=r.loading,s=function(){i&&f(i,{left:n.plotLeft+"px",top:n.plotTop+"px",width:n.plotWidth+"px",height:n.plotHeight+"px"})};i||(n.loadingDiv=i=m(ze,{className:"highcharts-loading"},t(o.style,{zIndex:10,display:xe}),n.container),n.loadingSpan=m("span",null,o.labelStyle,i),Ke(n,"redraw",s)),n.loadingSpan.innerHTML=e||r.lang.loading,n.loadingShown||(f(i,{opacity:0,display:""}),tn(i,{opacity:o.style.opacity},{duration:o.showDuration||0}),n.loadingShown=!0),s()},hideLoading:function(){var t=this.options,e=this.loadingDiv;e&&tn(e,{opacity:0},{duration:t.loading.hideDuration||100,complete:function(){f(e,{display:xe})}}),this.loadingShown=!1}}),t(wn.prototype,{update:function(t,e,n,r){function s(){u.applyOptions(t),i(t)&&!o(t)&&(u.redraw=function(){l&&(t&&t.marker&&t.marker.symbol?u.graphic=l.destroy():l.attr(u.pointAttr[u.state||""])),t&&t.dataLabels&&u.dataLabel&&(u.dataLabel=u.dataLabel.destroy()),u.redraw=null}),a=u.index,c.updateParallelArrays(u,a),d.data[a]=u.options,c.isDirty=c.isDirtyData=!0,!c.fixedBox&&c.hasCartesianSeries&&(p.isDirtyBox=!0),"point"===d.legendType&&p.legend.destroyItem(u),e&&p.redraw(n)}var a,u=this,c=u.series,l=u.graphic,p=c.chart,d=c.options,e=h(e,!0);r===!1?s():u.firePointEvent("update",{options:t},s)},remove:function(t,e){var n,r=this,i=r.series,o=i.points,s=i.chart,a=i.data;C(e,s),t=h(t,!0),r.firePointEvent("remove",null,function(){n=We(r,a),a.length===o.length&&o.splice(n,1),a.splice(n,1),i.options.data.splice(n,1),i.updateParallelArrays(r,"splice",n,1),r.destroy(),i.isDirty=!0,i.isDirtyData=!0,t&&s.redraw()})}}),t(En.prototype,{addPoint:function(t,e,n,r){var i,o=this.options,s=this.data,a=this.graph,u=this.area,c=this.chart,l=this.xAxis&&this.xAxis.names,p=a&&a.shift||0,d=o.data,f=this.xData;if(C(r,c),n&&qe([a,u,this.graphNeg,this.areaNeg],function(t){t&&(t.shift=p+1)}),u&&(u.isArea=!0),e=h(e,!0),r={series:this},this.pointClass.prototype.applyOptions.apply(r,[t]),a=r.x,u=f.length,this.requireSorting&&a<f[u-1])for(i=!0;u&&f[u-1]>a;)u--;this.updateParallelArrays(r,"splice",u,0,0),this.updateParallelArrays(r,u),l&&r.name&&(l[a]=r.name),d.splice(u,0,t),i&&(this.data.splice(u,0,null),this.processData()),"point"===o.legendType&&this.generatePoints(),n&&(s[0]&&s[0].remove?s[0].remove(!1):(s.shift(),this.updateParallelArrays(r,"shift"),d.shift())),this.isDirtyData=this.isDirty=!0,e&&(this.getAttribs(),c.redraw())},remove:function(t,e){var n=this,r=n.chart,t=h(t,!0);n.isRemoving||(n.isRemoving=!0,Ze(n,"remove",null,function(){n.destroy(),r.isDirtyLegend=r.isDirtyBox=!0,r.linkSeries(),t&&r.redraw(e)})),n.isRemoving=!1},update:function(n,r){var i,o=this,s=this.chart,a=this.userOptions,u=this.type,c=Ge[u].prototype,l=["group","markerGroup","dataLabelsGroup"];qe(l,function(t){l[t]=o[t],delete o[t]}),n=e(a,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},n),this.remove(!1);for(i in c)c.hasOwnProperty(i)&&(this[i]=z);t(this,Ge[n.type||u].prototype),qe(l,function(t){o[t]=l[t]}),this.init(s,n),s.linkSeries(),h(r,!0)&&s.redraw(!1)}}),t(D.prototype,{update:function(n,r){var i=this.chart,n=i.options[this.coll][this.options.index]=e(this.userOptions,n);this.destroy(!0),this._addedPlotLB=z,this.init(i,t(n,{events:z})),i.isDirtyBox=!0,h(r,!0)&&i.redraw()},remove:function(t){for(var e=this.chart,n=this.coll,r=this.series,i=r.length;i--;)r[i]&&r[i].remove(!1);c(e.axes,this),c(e[n],this),e.options[n].splice(this.options.index,1),qe(e[n],function(t,e){t.options.index=e}),this.destroy(),e.isDirtyBox=!0,h(t,!0)&&e.redraw()},setTitle:function(t,e){this.update({title:t},e)},setCategories:function(t,e){this.update({categories:t},e)}}),ln=_(En),Ge.line=ln,nn.area=e(je,{threshold:0});var bn=_(En,{type:"area",getSegments:function(){var t,e,n,r,i=this,o=[],s=[],a=[],u=this.xAxis,c=this.yAxis,l=c.stacks[this.stackKey],p={},d=this.points,h=this.options.connectNulls;if(this.options.stacking&&!this.cropped){for(n=0;n<d.length;n++)p[d[n].x]=d[n];for(r in l)null!==l[r].total&&a.push(+r);a.sort(function(t,e){return t-e}),qe(a,function(r){var o,a=0;if(!h||p[r]&&null!==p[r].y)if(p[r])s.push(p[r]);else{for(n=i.index;n<=c.series.length;n++)if(o=l[r].points[n+","+r]){a=o[1];break}t=u.translate(r),e=c.toPixels(a,!0),s.push({y:null,plotX:t,clientX:t,plotY:e,yBottom:e,onMouseOver:De})}}),s.length&&o.push(s)}else En.prototype.getSegments.call(this),o=this.segments;this.segments=o},getSegmentPath:function(t){var e,n=En.prototype.getSegmentPath.call(this,t),r=[].concat(n),i=this.options;e=n.length;var o,s=this.yAxis.getThreshold(i.threshold);if(3===e&&r.push("L",n[1],n[2]),i.stacking&&!this.closedStacks)for(e=t.length-1;e>=0;e--)o=h(t[e].yBottom,s),e<t.length-1&&i.step&&r.push(t[e+1].plotX,o),r.push(t[e].plotX,o);else this.closeSegment(r,t,s);return this.areaPath=this.areaPath.concat(r),n},closeSegment:function(t,e,n){t.push("L",e[e.length-1].plotX,n,"L",e[0].plotX,n)},drawGraph:function(){this.areaPath=[],En.prototype.drawGraph.apply(this);var t=this,e=this.areaPath,n=this.options,r=n.negativeColor,i=n.negativeFillColor,o=[["area",this.color,n.fillColor]];(r||i)&&o.push(["areaNeg",r,i]),qe(o,function(r){var i=r[0],o=t[i];o?o.animate({d:e}):t[i]=t.chart.renderer.path(e).attr({fill:h(r[2],an(r[1]).setOpacity(h(n.fillOpacity,.75)).get()),zIndex:0}).add(t.group)})},drawLegendSymbol:Ye.drawRectangle});Ge.area=bn,nn.spline=e(je),ln=_(En,{type:"spline",getPointSpline:function(t,e,n){var r,i,o,s,a=e.plotX,u=e.plotY,c=t[n-1],l=t[n+1];if(c&&l){t=c.plotY,o=l.plotX;var p,l=l.plotY;r=(1.5*a+c.plotX)/2.5,i=(1.5*u+t)/2.5,o=(1.5*a+o)/2.5,s=(1.5*u+l)/2.5,p=(s-i)*(o-a)/(o-r)+u-s,i+=p,s+=p,i>t&&i>u?(i=he(t,u),s=2*u-i):t>i&&u>i&&(i=fe(t,u),s=2*u-i),s>l&&s>u?(s=he(l,u),i=2*u-s):l>s&&u>s&&(s=fe(l,u),i=2*u-s),e.rightContX=o,e.rightContY=s}return n?(e=["C",c.rightContX||c.plotX,c.rightContY||c.plotY,r||a,i||u,a,u],c.rightContX=c.rightContY=null):e=["M",a,u],e}}),Ge.spline=ln,nn.areaspline=e(nn.area),bn=bn.prototype,ln=_(ln,{type:"areaspline",closedStacks:!0,getSegmentPath:bn.getSegmentPath,closeSegment:bn.closeSegment,drawGraph:bn.drawGraph,drawLegendSymbol:Ye.drawRectangle}),Ge.areaspline=ln,nn.column=e(je,{borderColor:"#FFFFFF",borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1,halo:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},stickyTracking:!1,tooltip:{distance:6},threshold:0}),ln=_(En,{type:"column",pointAttrToOptions:{stroke:"borderColor",fill:"color",r:"borderRadius"},cropShoulder:0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){En.prototype.init.apply(this,arguments);var t=this,e=t.chart;e.hasRendered&&qe(e.series,function(e){e.type===t.type&&(e.isDirty=!0)})},getColumnMetrics:function(){var t,e,n=this,r=n.options,i=n.xAxis,o=n.yAxis,s=i.reversed,a={},u=0;r.grouping===!1?u=1:qe(n.chart.series,function(r){var i=r.options,s=r.yAxis;r.type===n.type&&r.visible&&o.len===s.len&&o.pos===s.pos&&(i.stacking?(t=r.stackKey,a[t]===z&&(a[t]=u++),e=a[t]):i.grouping!==!1&&(e=u++),r.columnIndex=e)});var i=fe(me(i.transA)*(i.ordinalSlope||r.pointRange||i.closestPointRange||i.tickInterval||1),i.len),c=i*r.groupPadding,p=(i-2*c)/u,d=r.pointWidth,r=l(d)?(p-d)/2:p*r.pointPadding,d=h(d,p-2*r);return n.columnMetrics={width:d,offset:r+(c+((s?u-(n.columnIndex||0):n.columnIndex)||0)*p-i/2)*(s?-1:1)}},translate:function(){var t=this,e=t.chart,n=t.options,r=t.borderWidth=h(n.borderWidth,t.activePointCount>.5*t.xAxis.len?0:1),i=t.yAxis,o=t.translatedThreshold=i.getThreshold(n.threshold),s=h(n.minPointLength,5),a=t.getColumnMetrics(),u=a.width,c=t.barW=he(u,1+2*r),l=t.pointXOffset=a.offset,p=-(r%2?.5:0),d=r%2?.5:1;e.renderer.isVML&&e.inverted&&(d+=1),n.pointPadding&&(c=de(c)),En.prototype.translate.apply(t),qe(t.points,function(n){var r,a=h(n.yBottom,o),f=fe(he(-999-a,n.plotY),i.len+999+a),m=n.plotX+l,_=c,g=fe(f,a);r=he(f,a)-g,me(r)<s&&s&&(r=s,g=le(me(g-o)>s?a-s:o-(i.translate(n.y,0,1,0,1)<=o?s:0))),n.barX=m,n.pointWidth=u,n.tooltipPos=e.inverted?[i.len-f,t.xAxis.len-m-_/2]:[m+_/2,f+i.pos-e.plotTop],_=le(m+_)+p,m=le(m)+p,_-=m,a=me(g)<.5,r=le(g+r)+d,g=le(g)+d,r-=g,a&&(g-=1,r+=1),n.shapeType="rect",n.shapeArgs={x:m,y:g,width:_,height:r}})},getSymbol:De,drawLegendSymbol:Ye.drawRectangle,drawGraph:De,drawPoints:function(){var t,n,r=this,i=this.chart,o=r.options,s=i.renderer,a=o.animationLimit||250;qe(r.points,function(u){var c=u.plotY,p=u.graphic;c===z||isNaN(c)||null===u.y?p&&(u.graphic=p.destroy()):(t=u.shapeArgs,c=l(r.borderWidth)?{"stroke-width":r.borderWidth}:{},n=u.pointAttr[u.selected?"select":""]||r.pointAttr[""],p?(en(p),p.attr(c)[i.pointCount<a?"animate":"attr"](e(t))):u.graphic=s[u.shapeType](t).attr(n).attr(c).add(r.group).shadow(o.shadow,null,o.stacking&&!o.borderRadius))})},animate:function(t){var e=this.yAxis,n=this.options,r=this.chart.inverted,i={};Se&&(t?(i.scaleY=.001,t=fe(e.pos+e.len,he(e.pos,e.toPixels(n.threshold))),r?i.translateX=t-e.len:i.translateY=t,this.group.attr(i)):(i.scaleY=1,i[r?"translateX":"translateY"]=e.pos,this.group.animate(i,this.options.animation),this.animate=null))},remove:function(){var t=this,e=t.chart;e.hasRendered&&qe(e.series,function(e){e.type===t.type&&(e.isDirty=!0)}),En.prototype.remove.apply(t,arguments)}}),Ge.column=ln,nn.bar=e(nn.column),bn=_(ln,{type:"bar",inverted:!0}),Ge.bar=bn,nn.scatter=e(je,{lineWidth:0,tooltip:{headerFormat:'<span style="color:{series.color}">‚óè</span> <span style="font-size: 10px;"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"},stickyTracking:!1}),bn=_(En,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,singularTooltips:!0,drawGraph:function(){this.options.lineWidth&&En.prototype.drawGraph.call(this)}}),Ge.scatter=bn,nn.pie=e(je,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}}),je={type:"pie",isCartesian:!1,pointClass:_(wn,{init:function(){wn.prototype.init.apply(this,arguments);var e,n=this;return n.y<0&&(n.y=null),t(n,{visible:n.visible!==!1,name:h(n.name,"Slice")}),e=function(t){n.slice("select"===t.type)},Ke(n,"select",e),Ke(n,"unselect",e),n},setVisible:function(t){var e=this,n=e.series,r=n.chart;e.visible=e.options.visible=t=t===z?!e.visible:t,n.options.data[We(e,n.data)]=e.options,qe(["graphic","dataLabel","connector","shadowGroup"],function(n){e[n]&&e[n][t?"show":"hide"](!0)}),e.legendItem&&r.legend.colorizeItem(e,t),!n.isDirty&&n.options.ignoreHiddenPoint&&(n.isDirty=!0,r.redraw())},slice:function(t,e,n){var r=this.series;C(n,r.chart),h(e,!0),this.sliced=this.options.sliced=t=l(t)?t:!this.sliced,r.options.data[We(this,r.data)]=this.options,t=t?this.slicedTranslation:{translateX:0,translateY:0},this.graphic.animate(t),this.shadowGroup&&this.shadowGroup.animate(t)},haloPath:function(t){var e=this.shapeArgs,n=this.series.chart;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(n.plotLeft+e.x,n.plotTop+e.y,e.r+t,e.r+t,{innerR:this.shapeArgs.r,start:e.start,end:e.end})}}),requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},singularTooltips:!0,getColor:De,animate:function(t){var e=this,n=e.points,r=e.startAngleRad;t||(qe(n,function(t){var n=t.graphic,t=t.shapeArgs;n&&(n.attr({r:e.center[3]/2,start:r,end:r}),n.animate({r:t.r,start:t.start,end:t.end},e.options.animation))}),e.animate=null)},setData:function(t,e,n,r){En.prototype.setData.call(this,t,!1,n,r),this.processData(),this.generatePoints(),h(e,!0)&&this.chart.redraw(n)},generatePoints:function(){var t,e,n,r,i=0,o=this.options.ignoreHiddenPoint;for(En.prototype.generatePoints.call(this),e=this.points,n=e.length,t=0;n>t;t++)r=e[t],i+=o&&!r.visible?0:r.y;for(this.total=i,t=0;n>t;t++)r=e[t],r.percentage=i>0?r.y/i*100:0,r.total=i},translate:function(t){this.generatePoints();var e,n,r,i,o,s=0,a=this.options,u=a.slicedOffset,c=u+a.borderWidth,l=a.startAngle||0,p=this.startAngleRad=ve/180*(l-90),l=(this.endAngleRad=ve/180*(h(a.endAngle,l+360)-90))-p,d=this.points,f=a.dataLabels.distance,a=a.ignoreHiddenPoint,m=d.length;for(t||(this.center=t=this.getCenter()),this.getX=function(e,n){return r=ce.asin(fe((e-t[1])/(t[2]/2+f),1)),t[0]+(n?-1:1)*_e(r)*(t[2]/2+f)},i=0;m>i;i++)o=d[i],e=p+s*l,(!a||o.visible)&&(s+=o.percentage/100),n=p+s*l,o.shapeType="arc",o.shapeArgs={x:t[0],y:t[1],r:t[2]/2,innerR:t[3]/2,start:le(1e3*e)/1e3,end:le(1e3*n)/1e3},r=(n+e)/2,r>1.5*ve?r-=2*ve:-ve/2>r&&(r+=2*ve),o.slicedTranslation={translateX:le(_e(r)*u),translateY:le(ge(r)*u)},e=_e(r)*t[2]/2,n=ge(r)*t[2]/2,o.tooltipPos=[t[0]+.7*e,t[1]+.7*n],o.half=-ve/2>r||r>ve/2?1:0,o.angle=r,c=fe(c,f/2),o.labelPos=[t[0]+e+_e(r)*f,t[1]+n+ge(r)*f,t[0]+e+_e(r)*c,t[1]+n+ge(r)*c,t[0]+e,t[1]+n,0>f?"center":o.half?"right":"left",r]},drawGraph:null,drawPoints:function(){var e,n,r,i,o=this,s=o.chart.renderer,a=o.options.shadow;a&&!o.shadowGroup&&(o.shadowGroup=s.g("shadow").add(o.group)),qe(o.points,function(u){n=u.graphic,i=u.shapeArgs,r=u.shadowGroup,a&&!r&&(r=u.shadowGroup=s.g("shadow").add(o.shadowGroup)),e=u.sliced?u.slicedTranslation:{translateX:0,translateY:0},r&&r.attr(e),n?n.animate(t(i,e)):u.graphic=n=s[u.shapeType](i).setRadialReference(o.center).attr(u.pointAttr[u.selected?"select":""]).attr({"stroke-linejoin":"round"}).attr(e).add(o.group).shadow(a,r),void 0!==u.visible&&u.setVisible(u.visible)})},sortByAngle:function(t,e){t.sort(function(t,n){return void 0!==t.angle&&(n.angle-t.angle)*e})},drawLegendSymbol:Ye.drawRectangle,getCenter:cn.getCenter,getSymbol:De},je=_(En,je),Ge.pie=je,En.prototype.drawDataLabels=function(){var n,r,i,o,s=this,a=s.options,u=a.cursor,c=a.dataLabels,p=s.points,d=s.hasRendered||0;(c.enabled||s._hasPointLabels)&&(s.dlProcessOptions&&s.dlProcessOptions(c),o=s.plotGroup("dataLabelsGroup","data-labels",c.defer?"hidden":"visible",c.zIndex||6),h(c.defer,!0)&&(o.attr({opacity:+d}),d||Ke(s,"afterAnimate",function(){s.visible&&o.show(),o[a.animation?"animate":"attr"]({opacity:1},{duration:200})})),r=c,qe(p,function(a){var p,d,f,m=a.dataLabel,_=a.connector,g=!0;if(n=a.options&&a.options.dataLabels,p=h(n&&n.enabled,r.enabled),m&&!p)a.dataLabel=m.destroy();else if(p){if(c=e(r,n),p=c.rotation,d=a.getLabelConfig(),i=c.format?w(c.format,d):c.formatter.call(d,c),c.style.color=h(c.color,c.style.color,s.color,"black"),m)l(i)?(m.attr({text:i}),g=!1):(a.dataLabel=m=m.destroy(),_&&(a.connector=_.destroy()));else if(l(i)){m={fill:c.backgroundColor,stroke:c.borderColor,"stroke-width":c.borderWidth,r:c.borderRadius||0,rotation:p,padding:c.padding,zIndex:1};for(f in m)m[f]===z&&delete m[f];m=a.dataLabel=s.chart.renderer[p?"text":"label"](i,0,-999,null,null,null,c.useHTML).attr(m).css(t(c.style,u&&{cursor:u})).add(o).shadow(c.shadow)}m&&s.alignDataLabel(a,m,c,null,g)}}))},En.prototype.alignDataLabel=function(e,n,r,i,o){var s=this.chart,a=s.inverted,u=h(e.plotX,-999),c=h(e.plotY,-999),l=n.getBBox();(e=this.visible&&(e.series.forceDL||s.isInsidePlot(u,le(c),a)||i&&s.isInsidePlot(u,a?i.x+1:i.y+i.height-1,a)))&&(i=t({x:a?s.plotWidth-c:u,y:le(a?s.plotHeight-u:c),width:0,height:0},i),t(r,{width:l.width,height:l.height}),r.rotation?n[o?"attr":"animate"]({x:i.x+r.x+i.width/2,y:i.y+r.y+i.height/2}).attr({align:r.align}):(n.align(r,null,i),a=n.alignAttr,"justify"===h(r.overflow,"justify")?this.justifyDataLabel(n,r,a,l,i,o):h(r.crop,!0)&&(e=s.isInsidePlot(a.x,a.y)&&s.isInsidePlot(a.x+l.width,a.y+l.height)))),e||(n.attr({y:-999}),n.placed=!1)},En.prototype.justifyDataLabel=function(t,e,n,r,i,o){var s,a,u=this.chart,c=e.align,l=e.verticalAlign;s=n.x,0>s&&("right"===c?e.align="left":e.x=-s,a=!0),s=n.x+r.width,s>u.plotWidth&&("left"===c?e.align="right":e.x=u.plotWidth-s,a=!0),s=n.y,0>s&&("bottom"===l?e.verticalAlign="top":e.y=-s,a=!0),s=n.y+r.height,s>u.plotHeight&&("top"===l?e.verticalAlign="bottom":e.y=u.plotHeight-s,a=!0),a&&(t.placed=!o,t.align(e,null,i))},Ge.pie&&(Ge.pie.prototype.drawDataLabels=function(){var t,e,n,r,i,o,s,a,u,c,l,p=this,d=p.data,f=p.chart,m=p.options.dataLabels,_=h(m.connectorPadding,10),g=h(m.connectorWidth,1),v=f.plotWidth,y=f.plotHeight,w=h(m.softConnector,!0),E=m.distance,b=p.center,T=b[2]/2,R=b[1],P=E>0,O=[[],[]],S=[0,0,0,0],C=function(t,e){return e.y-t.y};if(p.visible&&(m.enabled||p._hasPointLabels)){for(En.prototype.drawDataLabels.apply(p),qe(d,function(t){t.dataLabel&&t.visible&&O[t.half].push(t)}),c=2;c--;){var k,M=[],I=[],D=O[c],L=D.length;if(L){for(p.sortByAngle(D,c-.5),l=d=0;!d&&D[l];)d=D[l]&&D[l].dataLabel&&(D[l].dataLabel.getBBox().height||21),l++;if(E>0){for(i=fe(R+T+E,f.plotHeight),l=he(0,R-T-E);i>=l;l+=d)M.push(l);if(i=M.length,L>i){for(t=[].concat(D),t.sort(C),l=L;l--;)t[l].rank=l;
for(l=L;l--;)D[l].rank>=i&&D.splice(l,1);L=D.length}for(l=0;L>l;l++){t=D[l],o=t.labelPos,t=9999;var N,z;for(z=0;i>z;z++)N=me(M[z]-o[1]),t>N&&(t=N,k=z);if(l>k&&null!==M[l])k=l;else for(L-l+k>i&&null!==M[l]&&(k=i-L+l);null===M[k];)k++;I.push({i:k,y:M[k]}),M[k]=null}I.sort(C)}for(l=0;L>l;l++)t=D[l],o=t.labelPos,r=t.dataLabel,u=t.visible===!1?"hidden":"visible",t=o[1],E>0?(i=I.pop(),k=i.i,a=i.y,(t>a&&null!==M[k+1]||a>t&&null!==M[k-1])&&(a=fe(he(0,t),f.plotHeight))):a=t,s=m.justify?b[0]+(c?-1:1)*(T+E):p.getX(a===R-T-E||a===R+T+E?t:a,c),r._attr={visibility:u,align:o[6]},r._pos={x:s+m.x+({left:_,right:-_}[o[6]]||0),y:a+m.y-10},r.connX=s,r.connY=a,null===this.options.size&&(i=r.width,_>s-i?S[3]=he(le(i-s+_),S[3]):s+i>v-_&&(S[1]=he(le(s+i-v+_),S[1])),0>a-d/2?S[0]=he(le(-a+d/2),S[0]):a+d/2>y&&(S[2]=he(le(a+d/2-y),S[2])))}}(0===A(S)||this.verifyDataLabelOverflow(S))&&(this.placeDataLabels(),P&&g&&qe(this.points,function(t){e=t.connector,o=t.labelPos,(r=t.dataLabel)&&r._pos?(u=r._attr.visibility,s=r.connX,a=r.connY,n=w?["M",s+("left"===o[6]?5:-5),a,"C",s,a,2*o[2]-o[4],2*o[3]-o[5],o[2],o[3],"L",o[4],o[5]]:["M",s+("left"===o[6]?5:-5),a,"L",o[2],o[3],"L",o[4],o[5]],e?(e.animate({d:n}),e.attr("visibility",u)):t.connector=e=p.chart.renderer.path(n).attr({"stroke-width":g,stroke:m.connectorColor||t.color||"#606060",visibility:u}).add(p.dataLabelsGroup)):e&&(t.connector=e.destroy())}))}},Ge.pie.prototype.placeDataLabels=function(){qe(this.points,function(t){var e,t=t.dataLabel;t&&((e=t._pos)?(t.attr(t._attr),t[t.moved?"animate":"attr"](e),t.moved=!0):t&&t.attr({y:-999}))})},Ge.pie.prototype.alignDataLabel=De,Ge.pie.prototype.verifyDataLabelOverflow=function(t){var e,n=this.center,r=this.options,i=r.center,o=r=r.minSize||80;return null!==i[0]?o=he(n[2]-he(t[1],t[3]),r):(o=he(n[2]-t[1]-t[3],r),n[0]+=(t[3]-t[1])/2),null!==i[1]?o=he(fe(o,n[2]-he(t[0],t[2])),r):(o=he(fe(o,n[2]-t[0]-t[2]),r),n[1]+=(t[0]-t[2])/2),o<n[2]?(n[2]=o,this.translate(n),qe(this.points,function(t){t.dataLabel&&(t.dataLabel._pos=null)}),this.drawDataLabels&&this.drawDataLabels()):e=!0,e}),Ge.column&&(Ge.column.prototype.alignDataLabel=function(t,n,r,i,o){var s=this.chart,a=s.inverted,u=t.dlBox||t.shapeArgs,c=t.below||t.plotY>h(this.translatedThreshold,s.plotSizeY),l=h(r.inside,!!this.options.stacking);u&&(i=e(u),a&&(i={x:s.plotWidth-i.y-i.height,y:s.plotHeight-i.x-i.width,width:i.height,height:i.width}),!l)&&(a?(i.x+=c?0:i.width,i.width=0):(i.y+=c?i.height:0,i.height=0)),r.align=h(r.align,!a||l?"center":c?"right":"left"),r.verticalAlign=h(r.verticalAlign,a||l?"middle":c?"top":"bottom"),En.prototype.alignDataLabel.call(this,t,n,r,i,o)}),je=se.TrackerMixin={drawTrackerPoint:function(){var t=this,e=t.chart,n=e.pointer,r=t.options.cursor,i=r&&{cursor:r},o=function(n){var r,i=n.target;for(e.hoverSeries!==t&&t.onMouseOver();i&&!r;)r=i.point,i=i.parentNode;r!==z&&r!==e.hoverPoint&&r.onMouseOver(n)};qe(t.points,function(t){t.graphic&&(t.graphic.element.point=t),t.dataLabel&&(t.dataLabel.element.point=t)}),t._hasTracking||(qe(t.trackerGroups,function(e){t[e]&&(t[e].addClass("highcharts-tracker").on("mouseover",o).on("mouseout",function(t){n.onTrackerMouseOut(t)}).css(i),F)&&t[e].on("touchstart",o)}),t._hasTracking=!0)},drawTrackerGraph:function(){var t,e=this,n=e.options,r=n.trackByArea,i=[].concat(r?e.areaPath:e.graphPath),o=i.length,s=e.chart,a=s.pointer,u=s.renderer,c=s.options.tooltip.snap,l=e.tracker,p=n.cursor,d=p&&{cursor:p},p=e.singlePoints,h=function(){s.hoverSeries!==e&&e.onMouseOver()},f="rgba(192,192,192,"+(Se?1e-4:.002)+")";if(o&&!r)for(t=o+1;t--;)"M"===i[t]&&i.splice(t+1,0,i[t+1]-c,i[t+2],"L"),(t&&"M"===i[t]||t===o)&&i.splice(t,0,"L",i[t-2]+c,i[t-1]);for(t=0;t<p.length;t++)o=p[t],i.push("M",o.plotX-c,o.plotY,"L",o.plotX+c,o.plotY);l?l.attr({d:i}):(e.tracker=u.path(i).attr({"stroke-linejoin":"round",visibility:e.visible?"visible":"hidden",stroke:f,fill:r?f:xe,"stroke-width":n.lineWidth+(r?0:2*c),zIndex:2}).add(e.group),qe([e.tracker,e.markerGroup],function(t){t.addClass("highcharts-tracker").on("mouseover",h).on("mouseout",function(t){a.onTrackerMouseOut(t)}).css(d),F&&t.on("touchstart",h)}))}},Ge.column&&(ln.prototype.drawTracker=je.drawTrackerPoint),Ge.pie&&(Ge.pie.prototype.drawTracker=je.drawTrackerPoint),Ge.scatter&&(bn.prototype.drawTracker=je.drawTrackerPoint),t(yn.prototype,{setItemEvents:function(t,e,n,r,i){var o=this;(n?e:t.legendGroup).on("mouseover",function(){t.setState("hover"),e.css(o.options.itemHoverStyle)}).on("mouseout",function(){e.css(t.visible?r:i),t.setState()}).on("click",function(e){var n=function(){t.setVisible()},e={browserEvent:e};t.firePointEvent?t.firePointEvent("legendItemClick",e,n):Ze(t,"legendItemClick",e,n)})},createCheckboxForItem:function(t){t.checkbox=m("input",{type:"checkbox",checked:t.selected,defaultChecked:t.selected},this.options.itemCheckboxStyle,this.chart.container),Ke(t.checkbox,"click",function(e){Ze(t,"checkboxClick",{checked:e.target.checked},function(){t.select()})})}}),G.legend.itemStyle.cursor="pointer",t(L.prototype,{showResetZoom:function(){var t=this,e=G.lang,n=t.options.chart.resetZoomButton,r=n.theme,i=r.states,o="chart"===n.relativeTo?null:"plotBox";this.resetZoomButton=t.renderer.button(e.resetZoom,null,null,function(){t.zoomOut()},r,i&&i.hover).attr({align:n.position.align,title:e.resetZoomTitle}).add().align(n.position,!1,o)},zoomOut:function(){var t=this;Ze(t,"selection",{resetSelection:!0},function(){t.zoom()})},zoom:function(t){var e,n,r=this.pointer,o=!1;!t||t.resetSelection?qe(this.axes,function(t){e=t.zoom()}):qe(t.xAxis.concat(t.yAxis),function(t){var n=t.axis,i=n.isXAxis;(r[i?"zoomX":"zoomY"]||r[i?"pinchX":"pinchY"])&&(e=n.zoom(t.min,t.max),n.displayBtn&&(o=!0))}),n=this.resetZoomButton,o&&!n?this.showResetZoom():!o&&i(n)&&(this.resetZoomButton=n.destroy()),e&&this.redraw(h(this.options.chart.animation,t&&t.animation,this.pointCount<100))},pan:function(t,e){var n,r=this,i=r.hoverPoints;i&&qe(i,function(t){t.setState()}),qe("xy"===e?[1,0]:[1],function(e){var i=t[e?"chartX":"chartY"],o=r[e?"xAxis":"yAxis"][0],s=r[e?"mouseDownX":"mouseDownY"],a=(o.pointRange||0)/2,u=o.getExtremes(),c=o.toValue(s-i,!0)+a,s=o.toValue(s+r[e?"plotWidth":"plotHeight"]-i,!0)-a;o.series.length&&c>fe(u.dataMin,u.min)&&s<he(u.dataMax,u.max)&&(o.setExtremes(c,s,!1,!1,{trigger:"pan"}),n=!0),r[e?"mouseDownX":"mouseDownY"]=i}),n&&r.redraw(!1),f(r.container,{cursor:"move"})}}),t(wn.prototype,{select:function(t,e){var n=this,r=n.series,i=r.chart,t=h(t,!n.selected);n.firePointEvent(t?"select":"unselect",{accumulate:e},function(){n.selected=n.options.selected=t,r.options.data[We(n,r.data)]=n.options,n.setState(t&&"select"),e||qe(i.getSelectedPoints(),function(t){t.selected&&t!==n&&(t.selected=t.options.selected=!1,r.options.data[We(t,r.data)]=t.options,t.setState(""),t.firePointEvent("unselect"))})})},onMouseOver:function(t){var e=this.series,n=e.chart,r=n.tooltip,i=n.hoverPoint;i&&i!==this&&i.onMouseOut(),this.firePointEvent("mouseOver"),r&&(!r.shared||e.noSharedTooltip)&&r.refresh(this,t),this.setState("hover"),n.hoverPoint=this},onMouseOut:function(){var t=this.series.chart,e=t.hoverPoints;this.firePointEvent("mouseOut"),e&&-1!==We(this,e)||(this.setState(),t.hoverPoint=null)},importEvents:function(){if(!this.hasImportedEvents){var t,n=e(this.series.options.point,this.options).events;this.events=n;for(t in n)Ke(this,t,n[t]);this.hasImportedEvents=!0}},setState:function(n,r){var i,o=this.plotX,s=this.plotY,a=this.series,u=a.options.states,c=nn[a.type].marker&&a.options.marker,l=c&&!c.enabled,p=c&&c.states[n],d=p&&p.enabled===!1,h=a.stateMarkerGraphic,f=this.marker||{},m=a.chart,_=a.halo,n=n||"";i=this.pointAttr[n]||a.pointAttr[n],n===this.state&&!r||this.selected&&"select"!==n||u[n]&&u[n].enabled===!1||n&&(d||l&&p.enabled===!1)||n&&f.states&&f.states[n]&&f.states[n].enabled===!1||(this.graphic?(c=c&&this.graphic.symbolName&&i.r,this.graphic.attr(e(i,c?{x:o-c,y:s-c,width:2*c,height:2*c}:{})),h&&h.hide()):(n&&p&&(c=p.radius,f=f.symbol||a.symbol,h&&h.currentSymbol!==f&&(h=h.destroy()),h?h[r?"animate":"attr"]({x:o-c,y:s-c}):f&&(a.stateMarkerGraphic=h=m.renderer.symbol(f,o-c,s-c,2*c,2*c).attr(i).add(a.markerGroup),h.currentSymbol=f)),h&&h[n&&m.isInsidePlot(o,s,m.inverted)?"show":"hide"]()),(o=u[n]&&u[n].halo)&&o.size?(_||(a.halo=_=m.renderer.path().add(a.seriesGroup)),_.attr(t({fill:an(this.color||a.color).setOpacity(o.opacity).get()},o.attributes))[r?"animate":"attr"]({d:this.haloPath(o.size)})):_&&_.attr({d:[]}),this.state=n)},haloPath:function(t){var e=this.series,n=e.chart,r=e.getPlotBox(),i=n.inverted;return n.renderer.symbols.circle(r.translateX+(i?e.yAxis.len-this.plotY:this.plotX)-t,r.translateY+(i?e.xAxis.len-this.plotX:this.plotY)-t,2*t,2*t)}}),t(En.prototype,{onMouseOver:function(){var t=this.chart,e=t.hoverSeries;e&&e!==this&&e.onMouseOut(),this.options.events.mouseOver&&Ze(this,"mouseOver"),this.setState("hover"),t.hoverSeries=this},onMouseOut:function(){var t=this.options,e=this.chart,n=e.tooltip,r=e.hoverPoint;r&&r.onMouseOut(),this&&t.events.mouseOut&&Ze(this,"mouseOut"),n&&!t.stickyTracking&&(!n.shared||this.noSharedTooltip)&&n.hide(),this.setState(),e.hoverSeries=null},setState:function(t){var e=this.options,n=this.graph,r=this.graphNeg,i=e.states,e=e.lineWidth,t=t||"";this.state!==t&&(this.state=t,i[t]&&i[t].enabled===!1||(t&&(e=i[t].lineWidth||e+(i[t].lineWidthPlus||0)),n&&!n.dashstyle&&(t={"stroke-width":e},n.attr(t),r&&r.attr(t))))},setVisible:function(t,e){var n,r=this,i=r.chart,o=r.legendItem,s=i.options.chart.ignoreHiddenSeries,a=r.visible;n=(r.visible=t=r.userOptions.visible=t===z?!a:t)?"show":"hide",qe(["group","dataLabelsGroup","markerGroup","tracker"],function(t){r[t]&&r[t][n]()}),i.hoverSeries===r&&r.onMouseOut(),o&&i.legend.colorizeItem(r,t),r.isDirty=!0,r.options.stacking&&qe(i.series,function(t){t.options.stacking&&t.visible&&(t.isDirty=!0)}),qe(r.linkedSeries,function(e){e.setVisible(t,!1)}),s&&(i.isDirtyBox=!0),e!==!1&&i.redraw(),Ze(r,n)},setTooltipPoints:function(t){var e,n,r,i,o=[],s=this.xAxis,a=s&&s.getExtremes(),u=s?s.tooltipLen||s.len:this.chart.plotSizeX,c=[];if(this.options.enableMouseTracking!==!1&&!this.singularTooltips){for(t&&(this.tooltipPoints=null),qe(this.segments||this.points,function(t){o=o.concat(t)}),s&&s.reversed&&(o=o.reverse()),this.orderTooltipPoints&&this.orderTooltipPoints(o),t=o.length,i=0;t>i;i++)if(s=o[i],e=s.x,e>=a.min&&e<=a.max)for(r=o[i+1],e=n===z?0:n+1,n=o[i+1]?fe(he(0,pe((s.clientX+(r?r.wrappedClientX||r.clientX:u))/2)),u):u;e>=0&&n>=e;)c[e++]=s;this.tooltipPoints=c}},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(t){this.selected=t=t===z?!this.selected:t,this.checkbox&&(this.checkbox.checked=t),Ze(this,t?"select":"unselect")},drawTracker:je.drawTrackerGraph}),t(se,{Axis:D,Chart:L,Color:an,Point:wn,Tick:I,Renderer:x,Series:En,SVGElement:M,SVGRenderer:un,arrayMin:R,arrayMax:A,charts:Le,dateFormat:j,format:w,pathAnim:B,getOptions:function(){return G},hasBidiBug:Ce,isTouchDevice:Pe,numberFormat:g,seriesTypes:Ge,setOptions:function(t){return G=e(!0,G,t),k(),G},addEvent:Ke,removeEvent:Qe,createElement:m,discardElement:O,css:f,each:qe,extend:t,map:Xe,merge:e,pick:h,splat:d,extendClass:_,pInt:n,wrap:y,svg:Se,canvas:ke,vml:!Se&&!ke,product:"Highcharts",version:"4.0.4"})}(),function(t,e){function n(t,e,n){this.init.call(this,t,e,n)}var r=t.arrayMin,i=t.arrayMax,o=t.each,s=t.extend,a=t.merge,u=t.map,c=t.pick,l=t.pInt,p=t.getOptions().plotOptions,d=t.seriesTypes,h=t.extendClass,f=t.splat,m=t.wrap,_=t.Axis,g=t.Tick,v=t.Point,y=t.Pointer,w=t.CenteredSeriesMixin,E=t.TrackerMixin,b=t.Series,T=Math,R=T.round,A=T.floor,P=T.max,O=t.Color,S=function(){};s(n.prototype,{init:function(t,e,n){var r=this,i=r.defaultOptions;r.chart=e,e.angular&&(i.background={}),r.options=t=a(i,t),(t=t.background)&&o([].concat(f(t)).reverse(),function(t){var e=t.backgroundColor,t=a(r.defaultBackgroundOptions,t);e&&(t.backgroundColor=e),t.color=t.backgroundColor,n.options.plotBands.unshift(t)})},defaultOptions:{center:["50%","50%"],size:"85%",startAngle:0},defaultBackgroundOptions:{shape:"circle",borderWidth:1,borderColor:"silver",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#FFF"],[1,"#DDD"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"}});var C=_.prototype,g=g.prototype,k={getOffset:S,redraw:function(){this.isDirty=!1},render:function(){this.isDirty=!1},setScale:S,setCategories:S,setTitle:S},M={isRadial:!0,defaultRadialGaugeOptions:{labels:{align:"center",x:0,y:null},minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,tickLength:10,tickPosition:"inside",tickWidth:2,title:{rotation:0},zIndex:2},defaultRadialXOptions:{gridLineWidth:1,labels:{align:null,distance:15,x:0,y:null},maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},defaultRadialYOptions:{gridLineInterpolation:"circle",labels:{align:"right",x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}},setOptions:function(t){t=this.options=a(this.defaultOptions,this.defaultRadialOptions,t),t.plotBands||(t.plotBands=[])},getOffset:function(){C.getOffset.call(this),this.chart.axisOffset[this.side]=0,this.center=this.pane.center=w.getCenter.call(this.pane)},getLinePath:function(t,e){var n=this.center,e=c(e,n[2]/2-this.offset);return this.chart.renderer.symbols.arc(this.left+n[0],this.top+n[1],e,e,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0})},setAxisTranslation:function(){C.setAxisTranslation.call(this),this.center&&(this.transA=this.isCircular?(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.center[2]/2/(this.max-this.min||1),this.minPixelPadding=this.isXAxis?this.transA*this.minPointOffset:0)},beforeSetTickPositions:function(){this.autoConnect&&(this.max+=this.categories&&1||this.pointRange||this.closestPointRange||0)},setAxisSize:function(){C.setAxisSize.call(this),this.isRadial&&(this.center=this.pane.center=t.CenteredSeriesMixin.getCenter.call(this.pane),this.isCircular&&(this.sector=this.endAngleRad-this.startAngleRad),this.len=this.width=this.height=this.center[2]*c(this.sector,1)/2)},getPosition:function(t,e){return this.postTranslate(this.isCircular?this.translate(t):0,c(this.isCircular?e:this.translate(t),this.center[2]/2)-this.offset)},postTranslate:function(t,e){var n=this.chart,r=this.center,t=this.startAngleRad+t;return{x:n.plotLeft+r[0]+Math.cos(t)*e,y:n.plotTop+r[1]+Math.sin(t)*e}},getPlotBandPath:function(t,e,n){var r,i=this.center,o=this.startAngleRad,s=i[2]/2,a=[c(n.outerRadius,"100%"),n.innerRadius,c(n.thickness,10)],p=/%$/,d=this.isCircular;return"polygon"===this.options.gridLineInterpolation?i=this.getPlotLinePath(t).concat(this.getPlotLinePath(e,!0)):(d||(a[0]=this.translate(t),a[1]=this.translate(e)),a=u(a,function(t){return p.test(t)&&(t=l(t,10)*s/100),t}),"circle"!==n.shape&&d?(t=o+this.translate(t),e=o+this.translate(e)):(t=-Math.PI/2,e=1.5*Math.PI,r=!0),i=this.chart.renderer.symbols.arc(this.left+i[0],this.top+i[1],a[0],a[0],{start:t,end:e,innerR:c(a[1],a[0]-a[2]),open:r})),i},getPlotLinePath:function(t,e){var n,r,i,s=this,a=s.center,u=s.chart,c=s.getPosition(t);return s.isCircular?i=["M",a[0]+u.plotLeft,a[1]+u.plotTop,"L",c.x,c.y]:"circle"===s.options.gridLineInterpolation?(t=s.translate(t))&&(i=s.getLinePath(0,t)):(o(u.xAxis,function(t){t.pane===s.pane&&(n=t)}),i=[],t=s.translate(t),a=n.tickPositions,n.autoConnect&&(a=a.concat([a[0]])),e&&(a=[].concat(a).reverse()),o(a,function(e,o){r=n.getPosition(e,t),i.push(o?"L":"M",r.x,r.y)})),i},getTitlePosition:function(){var t=this.center,e=this.chart,n=this.options.title;return{x:e.plotLeft+t[0]+(n.x||0),y:e.plotTop+t[1]-{high:.5,middle:.25,low:0}[n.align]*t[2]+(n.y||0)}}};m(C,"init",function(t,r,i){var o,u,l,p=r.angular,d=r.polar,h=i.isX,m=p&&h;l=r.options;var _=i.pane||0;p?(s(this,m?k:M),(u=!h)&&(this.defaultRadialOptions=this.defaultRadialGaugeOptions)):d&&(s(this,M),this.defaultRadialOptions=(u=h)?this.defaultRadialXOptions:a(this.defaultYAxisOptions,this.defaultRadialYOptions)),t.call(this,r,i),m||!p&&!d||(t=this.options,r.panes||(r.panes=[]),this.pane=(o=r.panes[_]=r.panes[_]||new n(f(l.pane)[_],r,this),_=o),_=_.options,r.inverted=!1,l.chart.zoomType=null,this.startAngleRad=r=(_.startAngle-90)*Math.PI/180,this.endAngleRad=l=(c(_.endAngle,_.startAngle+360)-90)*Math.PI/180,this.offset=t.offset||0,(this.isCircular=u)&&i.max===e&&l-r===2*Math.PI&&(this.autoConnect=!0))}),m(g,"getPosition",function(t,e,n,r,i){var o=this.axis;return o.getPosition?o.getPosition(n):t.call(this,e,n,r,i)}),m(g,"getLabelPosition",function(t,e,n,r,i,o,s,a,u){var l=this.axis,p=o.y,d=o.align,h=(l.translate(this.pos)+l.startAngleRad+Math.PI/2)/Math.PI*180%360;return l.isRadial?(t=l.getPosition(this.pos,l.center[2]/2+c(o.distance,-25)),"auto"===o.rotation?r.attr({rotation:h}):null===p&&(p=l.chart.renderer.fontMetrics(r.styles.fontSize).b-r.getBBox().height/2),null===d&&(d=l.isCircular?h>20&&160>h?"left":h>200&&340>h?"right":"center":"center",r.attr({align:d})),t.x+=o.x,t.y+=p):t=t.call(this,e,n,r,i,o,s,a,u),t}),m(g,"getMarkPath",function(t,e,n,r,i,o,s){var a=this.axis;return a.isRadial?(t=a.getPosition(this.pos,a.center[2]/2+r),e=["M",e,n,"L",t.x,t.y]):e=t.call(this,e,n,r,i,o,s),e}),p.arearange=a(p.area,{lineWidth:1,marker:null,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">‚óè</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:null,verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0},states:{hover:{halo:!1}}}),d.arearange=h(d.area,{type:"arearange",pointArrayMap:["low","high"],toYData:function(t){return[t.low,t.high]},pointValKey:"low",getSegments:function(){var t=this;o(t.points,function(e){t.options.connectNulls||null!==e.low&&null!==e.high?null===e.low&&null!==e.high&&(e.y=e.high):e.y=null}),b.prototype.getSegments.call(this)},translate:function(){var t=this.yAxis;d.area.prototype.translate.apply(this),o(this.points,function(e){var n=e.low,r=e.high,i=e.plotY;null===r&&null===n?e.y=null:null===n?(e.plotLow=e.plotY=null,e.plotHigh=t.translate(r,0,1,0,1)):null===r?(e.plotLow=i,e.plotHigh=null):(e.plotLow=i,e.plotHigh=t.translate(r,0,1,0,1))})},getSegmentPath:function(t){var e,n,r,i=[],o=t.length,s=b.prototype.getSegmentPath;r=this.options;var a=r.step;for(e=HighchartsAdapter.grep(t,function(t){return null!==t.plotLow});o--;)n=t[o],null!==n.plotHigh&&i.push({plotX:n.plotX,plotY:n.plotHigh});return t=s.call(this,e),a&&(a===!0&&(a="left"),r.step={left:"right",center:"center",right:"left"}[a]),i=s.call(this,i),r.step=a,r=[].concat(t,i),i[0]="L",this.areaPath=this.areaPath.concat(t,i),r},drawDataLabels:function(){var t,e,n=this.data,r=n.length,i=[],o=b.prototype,s=this.options.dataLabels,a=s.align,u=this.chart.inverted;if(s.enabled||this._hasPointLabels){for(t=r;t--;)e=n[t],e.y=e.high,e._plotY=e.plotY,e.plotY=e.plotHigh,i[t]=e.dataLabel,e.dataLabel=e.dataLabelUpper,e.below=!1,u?(a||(s.align="left"),s.x=s.xHigh):s.y=s.yHigh;for(o.drawDataLabels&&o.drawDataLabels.apply(this,arguments),t=r;t--;)e=n[t],e.dataLabelUpper=e.dataLabel,e.dataLabel=i[t],e.y=e.low,e.plotY=e._plotY,e.below=!0,u?(a||(s.align="right"),s.x=s.xLow):s.y=s.yLow;o.drawDataLabels&&o.drawDataLabels.apply(this,arguments)}s.align=a},alignDataLabel:function(){d.column.prototype.alignDataLabel.apply(this,arguments)},getSymbol:S,drawPoints:S}),p.areasplinerange=a(p.arearange),d.areasplinerange=h(d.arearange,{type:"areasplinerange",getPointSpline:d.spline.prototype.getPointSpline}),function(){var t=d.column.prototype;p.columnrange=a(p.column,p.arearange,{lineWidth:1,pointRange:null}),d.columnrange=h(d.arearange,{type:"columnrange",translate:function(){var e,n=this,r=n.yAxis;t.translate.apply(n),o(n.points,function(t){var i,o=t.shapeArgs,s=n.options.minPointLength;t.tooltipPos=null,t.plotHigh=e=r.translate(t.high,0,1,0,1),t.plotLow=t.plotY,i=e,t=t.plotY-e,s>t&&(s-=t,t+=s,i-=s/2),o.height=t,o.y=i})},trackerGroups:["group","dataLabelsGroup"],drawGraph:S,pointAttrToOptions:t.pointAttrToOptions,drawPoints:t.drawPoints,drawTracker:t.drawTracker,animate:t.animate,getColumnMetrics:t.getColumnMetrics})}(),p.gauge=a(p.line,{dataLabels:{enabled:!0,defer:!1,y:15,borderWidth:1,borderColor:"silver",borderRadius:3,crop:!1,style:{fontWeight:"bold"},verticalAlign:"top",zIndex:2},dial:{},pivot:{},tooltip:{headerFormat:""},showInLegend:!1}),E={type:"gauge",pointClass:h(v,{setState:function(t){this.state=t}}),angular:!0,drawGraph:S,fixedBox:!0,forceDL:!0,trackerGroups:["group","dataLabelsGroup"],translate:function(){var t=this.yAxis,e=this.options,n=t.center;this.generatePoints(),o(this.points,function(r){var i=a(e.dial,r.dial),o=l(c(i.radius,80))*n[2]/200,s=l(c(i.baseLength,70))*o/100,u=l(c(i.rearLength,10))*o/100,p=i.baseWidth||3,d=i.topWidth||1,h=e.overshoot,f=t.startAngleRad+t.translate(r.y,null,null,null,!0);h&&"number"==typeof h?(h=h/180*Math.PI,f=Math.max(t.startAngleRad-h,Math.min(t.endAngleRad+h,f))):e.wrap===!1&&(f=Math.max(t.startAngleRad,Math.min(t.endAngleRad,f))),f=180*f/Math.PI,r.shapeType="path",r.shapeArgs={d:i.path||["M",-u,-p/2,"L",s,-p/2,o,-d/2,o,d/2,s,p/2,-u,p/2,"z"],translateX:n[0],translateY:n[1],rotation:f},r.plotX=n[0],r.plotY=n[1]})},drawPoints:function(){var t=this,e=t.yAxis.center,n=t.pivot,r=t.options,i=r.pivot,s=t.chart.renderer;o(t.points,function(e){var n=e.graphic,i=e.shapeArgs,o=i.d,u=a(r.dial,e.dial);n?(n.animate(i),i.d=o):e.graphic=s[e.shapeType](i).attr({stroke:u.borderColor||"none","stroke-width":u.borderWidth||0,fill:u.backgroundColor||"black",rotation:i.rotation}).add(t.group)}),n?n.animate({translateX:e[0],translateY:e[1]}):t.pivot=s.circle(0,0,c(i.radius,5)).attr({"stroke-width":i.borderWidth||0,stroke:i.borderColor||"silver",fill:i.backgroundColor||"black"}).translate(e[0],e[1]).add(t.group)},animate:function(t){var e=this;t||(o(e.points,function(t){var n=t.graphic;n&&(n.attr({rotation:180*e.yAxis.startAngleRad/Math.PI}),n.animate({rotation:t.shapeArgs.rotation},e.options.animation))}),e.animate=null)},render:function(){this.group=this.plotGroup("group","series",this.visible?"visible":"hidden",this.options.zIndex,this.chart.seriesGroup),b.prototype.render.call(this),this.group.clip(this.chart.clipRect)},setData:function(t,e){b.prototype.setData.call(this,t,!1),this.processData(),this.generatePoints(),c(e,!0)&&this.chart.redraw()},drawTracker:E&&E.drawTrackerPoint},d.gauge=h(d.line,E),p.boxplot=a(p.column,{fillColor:"#FFFFFF",lineWidth:1,medianWidth:2,states:{hover:{brightness:-.3}},threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">‚óè</span> <b> {series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",whiskerWidth:2}),d.boxplot=h(d.column,{type:"boxplot",pointArrayMap:["low","q1","median","q3","high"],toYData:function(t){return[t.low,t.q1,t.median,t.q3,t.high]},pointValKey:"high",pointAttrToOptions:{fill:"fillColor",stroke:"color","stroke-width":"lineWidth"},drawDataLabels:S,translate:function(){var t=this.yAxis,e=this.pointArrayMap;d.column.prototype.translate.apply(this),o(this.points,function(n){o(e,function(e){null!==n[e]&&(n[e+"Plot"]=t.translate(n[e],0,1,0,1))})})},drawPoints:function(){var t,n,r,i,s,a,u,l,p,d,h,f,m,_,g,v,y,w,E,b,T,P,O=this,S=O.points,C=O.options,k=O.chart.renderer,M=O.doQuartiles!==!1,I=parseInt(O.options.whiskerLength,10)/100;o(S,function(o){p=o.graphic,T=o.shapeArgs,h={},_={},v={},P=o.color||O.color,o.plotY!==e&&(t=o.pointAttr[o.selected?"selected":""],y=T.width,w=A(T.x),E=w+y,b=R(y/2),n=A(M?o.q1Plot:o.lowPlot),r=A(M?o.q3Plot:o.lowPlot),i=A(o.highPlot),s=A(o.lowPlot),h.stroke=o.stemColor||C.stemColor||P,h["stroke-width"]=c(o.stemWidth,C.stemWidth,C.lineWidth),h.dashstyle=o.stemDashStyle||C.stemDashStyle,_.stroke=o.whiskerColor||C.whiskerColor||P,_["stroke-width"]=c(o.whiskerWidth,C.whiskerWidth,C.lineWidth),v.stroke=o.medianColor||C.medianColor||P,v["stroke-width"]=c(o.medianWidth,C.medianWidth,C.lineWidth),v["stroke-linecap"]="round",u=h["stroke-width"]%2/2,l=w+b+u,d=["M",l,r,"L",l,i,"M",l,n,"L",l,s],M&&(u=t["stroke-width"]%2/2,l=A(l)+u,n=A(n)+u,r=A(r)+u,w+=u,E+=u,f=["M",w,r,"L",w,n,"L",E,n,"L",E,r,"L",w,r,"z"]),I&&(u=_["stroke-width"]%2/2,i+=u,s+=u,m=["M",l-b*I,i,"L",l+b*I,i,"M",l-b*I,s,"L",l+b*I,s]),u=v["stroke-width"]%2/2,a=R(o.medianPlot)+u,g=["M",w,a,"L",E,a],p?(o.stem.animate({d:d}),I&&o.whiskers.animate({d:m}),M&&o.box.animate({d:f}),o.medianShape.animate({d:g})):(o.graphic=p=k.g().add(O.group),o.stem=k.path(d).attr(h).add(p),I&&(o.whiskers=k.path(m).attr(_).add(p)),M&&(o.box=k.path(f).attr(t).add(p)),o.medianShape=k.path(g).attr(v).add(p)))})}}),p.errorbar=a(p.boxplot,{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{series.color}">‚óè</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null}),d.errorbar=h(d.boxplot,{type:"errorbar",pointArrayMap:["low","high"],toYData:function(t){return[t.low,t.high]},pointValKey:"high",doQuartiles:!1,drawDataLabels:d.arearange?d.arearange.prototype.drawDataLabels:S,getColumnMetrics:function(){return this.linkedParent&&this.linkedParent.columnMetrics||d.column.prototype.getColumnMetrics.call(this)}}),p.waterfall=a(p.column,{lineWidth:1,lineColor:"#333",dashStyle:"dot",borderColor:"#333",states:{hover:{lineWidthPlus:0}}}),d.waterfall=h(d.column,{type:"waterfall",upColorProp:"fill",pointArrayMap:["low","y"],pointValKey:"y",init:function(t,e){e.stacking=!0,d.column.prototype.init.call(this,t,e)},translate:function(){var t,e,n,r,i,o,s,a,u,c,l=this.yAxis;for(t=this.options.threshold,d.column.prototype.translate.apply(this),a=u=t,n=this.points,e=0,t=n.length;t>e;e++)r=n[e],i=r.shapeArgs,o=this.getStack(e),c=o.points[this.index+","+e],isNaN(r.y)&&(r.y=this.yData[e]),s=P(a,a+r.y)+c[0],i.y=l.translate(s,0,1),r.isSum?(i.y=l.translate(c[1],0,1),i.height=l.translate(c[0],0,1)-i.y):r.isIntermediateSum?(i.y=l.translate(c[1],0,1),i.height=l.translate(u,0,1)-i.y,u=c[1]):a+=o.total,i.height<0&&(i.y+=i.height,i.height*=-1),r.plotY=i.y=R(i.y)-this.borderWidth%2/2,i.height=P(R(i.height),.001),r.yBottom=i.y+i.height,i=r.plotY+(r.negative?i.height:0),this.chart.inverted?r.tooltipPos[0]=l.len-i:r.tooltipPos[1]=i},processData:function(t){var e,n,r,i,o,s,a,u=this.yData,c=this.points,l=u.length;for(r=n=i=o=this.options.threshold||0,a=0;l>a;a++)s=u[a],e=c&&c[a]?c[a]:{},"sum"===s||e.isSum?u[a]=r:"intermediateSum"===s||e.isIntermediateSum?u[a]=n:(r+=s,n+=s),i=Math.min(r,i),o=Math.max(r,o);b.prototype.processData.call(this,t),this.dataMin=i,this.dataMax=o},toYData:function(t){return t.isSum?0===t.x?null:"sum":t.isIntermediateSum?0===t.x?null:"intermediateSum":t.y},getAttribs:function(){d.column.prototype.getAttribs.apply(this,arguments);var e=this.options,n=e.states,r=e.upColor||this.color,e=t.Color(r).brighten(.1).get(),i=a(this.pointAttr),s=this.upColorProp;i[""][s]=r,i.hover[s]=n.hover.upColor||e,i.select[s]=n.select.upColor||r,o(this.points,function(t){t.y>0&&!t.color&&(t.pointAttr=i,t.color=r)})},getGraphPath:function(){var t,e,n,r=this.data,i=r.length,o=R(this.options.lineWidth+this.borderWidth)%2/2,s=[];for(n=1;i>n;n++)e=r[n].shapeArgs,t=r[n-1].shapeArgs,e=["M",t.x+t.width,t.y+o,"L",e.x,t.y+o],r[n-1].y<0&&(e[2]+=t.height,e[5]+=t.height),s=s.concat(e);return s},getExtremes:S,getStack:function(t){var e=this.yAxis.stacks,n=this.stackKey;return this.processedYData[t]<this.options.threshold&&(n="-"+n),e[n][t]},drawGraph:b.prototype.drawGraph}),p.bubble=a(p.scatter,{dataLabels:{formatter:function(){return this.point.z},inside:!0,style:{color:"white",textShadow:"0px 0px 3px black"},verticalAlign:"middle"},marker:{lineColor:null,lineWidth:1},minSize:8,maxSize:"20%",states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0}),E=h(v,{haloPath:function(){return v.prototype.haloPath.call(this,this.shapeArgs.r+this.series.options.states.hover.halo.size)}}),d.bubble=h(d.scatter,{type:"bubble",pointClass:E,pointArrayMap:["y","z"],parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],bubblePadding:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor"},applyOpacity:function(t){var e=this.options.marker,n=c(e.fillOpacity,.5),t=t||e.fillColor||this.color;return 1!==n&&(t=O(t).setOpacity(n).get("rgba")),t},convertAttribs:function(){var t=b.prototype.convertAttribs.apply(this,arguments);return t.fill=this.applyOpacity(t.fill),t},getRadii:function(t,e,n,r){var i,o,s,a=this.zData,u=[],c="width"!==this.options.sizeBy;for(o=0,i=a.length;i>o;o++)s=e-t,s=s>0?(a[o]-t)/(e-t):.5,c&&s>=0&&(s=Math.sqrt(s)),u.push(T.ceil(n+s*(r-n))/2);this.radii=u},animate:function(t){var e=this.options.animation;t||(o(this.points,function(t){var n=t.graphic,t=t.shapeArgs;n&&t&&(n.attr("r",1),n.animate({r:t.r},e))}),this.animate=null)},translate:function(){var t,n,r,i=this.data,o=this.radii;for(d.scatter.prototype.translate.call(this),t=i.length;t--;)n=i[t],r=o?o[t]:0,n.negative=n.z<(this.options.zThreshold||0),r>=this.minPxSize/2?(n.shapeType="circle",n.shapeArgs={x:n.plotX,y:n.plotY,r:r},n.dlBox={x:n.plotX-r,y:n.plotY-r,width:2*r,height:2*r}):n.shapeArgs=n.plotY=n.dlBox=e},drawLegendSymbol:function(t,e){var n=l(t.itemStyle.fontSize)/2;e.legendSymbol=this.chart.renderer.circle(n,t.baseline-n,n).attr({zIndex:3}).add(e.legendGroup),e.legendSymbol.isMarker=!0},drawPoints:d.column.prototype.drawPoints,alignDataLabel:d.column.prototype.alignDataLabel}),_.prototype.beforePadding=function(){var t=this,n=this.len,s=this.chart,a=0,u=n,p=this.isXAxis,d=p?"xData":"yData",h=this.min,f={},m=T.min(s.plotWidth,s.plotHeight),_=Number.MAX_VALUE,g=-Number.MAX_VALUE,v=this.max-h,y=n/v,w=[];this.tickPositions&&(o(this.series,function(e){var n=e.options;!e.bubblePadding||!e.visible&&s.options.chart.ignoreHiddenSeries||(t.allowZoomOutside=!0,w.push(e),p&&(o(["minSize","maxSize"],function(t){var e=n[t],r=/%$/.test(e),e=l(e);f[t]=r?m*e/100:e}),e.minPxSize=f.minSize,e=e.zData,e.length&&(_=c(n.zMin,T.min(_,T.max(r(e),n.displayNegative===!1?n.zThreshold:-Number.MAX_VALUE))),g=c(n.zMax,T.max(g,i(e))))))}),o(w,function(t){var e,n=t[d],r=n.length;if(p&&t.getRadii(_,g,f.minSize,f.maxSize),v>0)for(;r--;)"number"==typeof n[r]&&(e=t.radii[r],a=Math.min((n[r]-h)*y-e,a),u=Math.max((n[r]-h)*y+e,u))}),w.length&&v>0&&c(this.options.min,this.userMin)===e&&c(this.options.max,this.userMax)===e&&(u-=n,y*=(n+a-u)/n,this.min+=a/y,this.max+=u/y))},function(){function t(t,e,n){t.call(this,e,n),this.chart.polar&&(this.closeSegment=function(t){var e=this.xAxis.center;t.push("L",e[0],e[1])},this.closedStacks=!0)}function e(t,e){var n=this.chart,r=this.options.animation,i=this.group,o=this.markerGroup,s=this.xAxis.center,a=n.plotLeft,u=n.plotTop;n.polar?n.renderer.isSVG&&(r===!0&&(r={}),e?(n={translateX:s[0]+a,translateY:s[1]+u,scaleX:.001,scaleY:.001},i.attr(n),o&&o.attr(n)):(n={translateX:a,translateY:u,scaleX:1,scaleY:1},i.animate(n,r),o&&o.animate(n,r),this.animate=null)):t.call(this,e)}var n,r=b.prototype,i=y.prototype;r.toXY=function(t){var e,n=this.chart,r=t.plotX;e=t.plotY,t.rectPlotX=r,t.rectPlotY=e,r=(r/Math.PI*180+this.xAxis.pane.options.startAngle)%360,0>r&&(r+=360),t.clientX=r,e=this.xAxis.postTranslate(t.plotX,this.yAxis.len-e),t.plotX=t.polarPlotX=e.x-n.plotLeft,t.plotY=t.polarPlotY=e.y-n.plotTop},r.orderTooltipPoints=function(t){this.chart.polar&&(t.sort(function(t,e){return t.clientX-e.clientX}),t[0])&&(t[0].wrappedClientX=t[0].clientX+360,t.push(t[0]))},d.area&&m(d.area.prototype,"init",t),d.areaspline&&m(d.areaspline.prototype,"init",t),d.spline&&m(d.spline.prototype,"getPointSpline",function(t,e,n,r){var i,o,s,a,u,c,l;return this.chart.polar?(i=n.plotX,o=n.plotY,t=e[r-1],s=e[r+1],this.connectEnds&&(t||(t=e[e.length-2]),s||(s=e[1])),t&&s&&(a=t.plotX,u=t.plotY,e=s.plotX,c=s.plotY,a=(1.5*i+a)/2.5,u=(1.5*o+u)/2.5,s=(1.5*i+e)/2.5,l=(1.5*o+c)/2.5,e=Math.sqrt(Math.pow(a-i,2)+Math.pow(u-o,2)),c=Math.sqrt(Math.pow(s-i,2)+Math.pow(l-o,2)),a=Math.atan2(u-o,a-i),u=Math.atan2(l-o,s-i),l=Math.PI/2+(a+u)/2,Math.abs(a-l)>Math.PI/2&&(l-=Math.PI),a=i+Math.cos(l)*e,u=o+Math.sin(l)*e,s=i+Math.cos(Math.PI+l)*c,l=o+Math.sin(Math.PI+l)*c,n.rightContX=s,n.rightContY=l),r?(n=["C",t.rightContX||t.plotX,t.rightContY||t.plotY,a||i,u||o,i,o],t.rightContX=t.rightContY=null):n=["M",i,o]):n=t.call(this,e,n,r),n
}),m(r,"translate",function(t){if(t.call(this),this.chart.polar&&!this.preventPostTranslate)for(var t=this.points,e=t.length;e--;)this.toXY(t[e])}),m(r,"getSegmentPath",function(t,e){var n=this.points;return this.chart.polar&&this.options.connectEnds!==!1&&e[e.length-1]===n[n.length-1]&&null!==n[0].y&&(this.connectEnds=!0,e=[].concat(e,[n[0]])),t.call(this,e)}),m(r,"animate",e),m(r,"setTooltipPoints",function(t,e){return this.chart.polar&&s(this.xAxis,{tooltipLen:360}),t.call(this,e)}),d.column&&(n=d.column.prototype,m(n,"animate",e),m(n,"translate",function(t){var e,n,r=this.xAxis,i=this.yAxis.len,o=r.center,s=r.startAngleRad,a=this.chart.renderer;if(this.preventPostTranslate=!0,t.call(this),r.isRadial)for(r=this.points,n=r.length;n--;)e=r[n],t=e.barX+s,e.shapeType="path",e.shapeArgs={d:a.symbols.arc(o[0],o[1],i-e.plotY,null,{start:t,end:t+e.pointWidth,innerR:i-c(e.yBottom,i)})},this.toXY(e),e.tooltipPos=[e.plotX,e.plotY],e.ttBelow=e.plotY>o[1]}),m(n,"alignDataLabel",function(t,e,n,i,o,s){this.chart.polar?(t=e.rectPlotX/Math.PI*180,null===i.align&&(i.align=t>20&&160>t?"left":t>200&&340>t?"right":"center"),null===i.verticalAlign&&(i.verticalAlign=45>t||t>315?"bottom":t>135&&225>t?"top":"middle"),r.alignDataLabel.call(this,e,n,i,o,s)):t.call(this,e,n,i,o,s)})),m(i,"getIndex",function(t,e){var n,r,i=this.chart;return i.polar?(r=i.xAxis[0].center,n=e.chartX-r[0]-i.plotLeft,i=e.chartY-r[1]-i.plotTop,n=180-Math.round(Math.atan2(n,i)/Math.PI*180)):n=t.call(this,e),n}),m(i,"getCoordinates",function(t,e){var n=this.chart,r={xAxis:[],yAxis:[]};return n.polar?o(n.axes,function(t){var i=t.isXAxis,o=t.center,s=e.chartX-o[0]-n.plotLeft,o=e.chartY-o[1]-n.plotTop;r[i?"xAxis":"yAxis"].push({axis:t,value:t.translate(i?Math.PI-Math.atan2(s,o):Math.sqrt(Math.pow(s,2)+Math.pow(o,2)),!0)})}):r=t.call(this,e),r})}()}(Highcharts),function(t){var e,n=t.Chart,r=t.addEvent,i=t.removeEvent,o=t.createElement,s=t.discardElement,a=t.css,u=t.merge,c=t.each,l=t.extend,p=Math.max,d=document,h=window,f=t.isTouchDevice,m=t.Renderer.prototype.symbols,_=t.getOptions();l(_.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"}),_.navigation={menuStyle:{border:"1px solid #A0A0A0",background:"#FFFFFF",padding:"5px 0"},menuItemStyle:{padding:"0 10px",background:"none",color:"#303030",fontSize:f?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{symbolFill:"#E0E0E0",symbolSize:14,symbolStroke:"#666",symbolStrokeWidth:3,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,theme:{fill:"white",stroke:"none"},verticalAlign:"top",width:24}},_.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{menuClassName:"highcharts-contextmenu",symbol:"menu",_titleKey:"contextButtonTitle",menuItems:[{textKey:"printChart",onclick:function(){this.print()}},{separator:!0},{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]}}},t.post=function(t,e,n){var r,t=o("form",u({method:"post",action:t,enctype:"multipart/form-data"},n),{display:"none"},d.body);for(r in e)o("input",{type:"hidden",name:r,value:e[r]},null,t);t.submit(),s(t)},l(n.prototype,{getSVG:function(e){var n,r,i,a,p=this,h=u(p.options,e);return d.createElementNS||(d.createElementNS=function(t,e){return d.createElement(e)}),e=o("div",null,{position:"absolute",top:"-9999em",width:p.chartWidth+"px",height:p.chartHeight+"px"},d.body),r=p.renderTo.style.width,a=p.renderTo.style.height,r=h.exporting.sourceWidth||h.chart.width||/px$/.test(r)&&parseInt(r,10)||600,a=h.exporting.sourceHeight||h.chart.height||/px$/.test(a)&&parseInt(a,10)||400,l(h.chart,{animation:!1,renderTo:e,forExport:!0,width:r,height:a}),h.exporting.enabled=!1,h.series=[],c(p.series,function(t){i=u(t.options,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:t.visible}),i.isInternal||h.series.push(i)}),n=new t.Chart(h,p.callback),c(["xAxis","yAxis"],function(t){c(p[t],function(e,r){var i=n[t][r],o=e.getExtremes(),s=o.userMin,o=o.userMax;i&&(void 0!==s||void 0!==o)&&i.setExtremes(s,o,!0,!1)})}),r=n.container.innerHTML,h=null,n.destroy(),s(e),r=r.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/(fill|stroke)="rgba\(([ 0-9]+,[ 0-9]+,[ 0-9]+),([ 0-9\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g," ").replace(/&shy;/g,"¬≠").replace(/<IMG /g,"<image ").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/id=([^" >]+)/g,'id="$1"').replace(/class=([^" >]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(t){return t.toLowerCase()}),r=r.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'")},exportChart:function(e,n){var e=e||{},r=this.options.exporting,r=this.getSVG(u({chart:{borderRadius:0}},r.chartOptions,n,{exporting:{sourceWidth:e.sourceWidth||r.sourceWidth,sourceHeight:e.sourceHeight||r.sourceHeight}})),e=u(this.options.exporting,e);t.post(e.url,{filename:e.filename||"chart",type:e.type,width:e.width||0,scale:e.scale||2,svg:r},e.formAttributes)},print:function(){var t=this,e=t.container,n=[],r=e.parentNode,i=d.body,o=i.childNodes;t.isPrinting||(t.isPrinting=!0,c(o,function(t,e){1===t.nodeType&&(n[e]=t.style.display,t.style.display="none")}),i.appendChild(e),h.focus(),h.print(),setTimeout(function(){r.appendChild(e),c(o,function(t,e){1===t.nodeType&&(t.style.display=n[e])}),t.isPrinting=!1},1e3))},contextMenu:function(t,e,n,s,u,d,h){var f,m,_,g=this,v=g.options.navigation,y=v.menuItemStyle,w=g.chartWidth,E=g.chartHeight,b="cache-"+t,T=g[b],R=p(u,d),A=function(e){g.pointer.inClass(e.target,t)||m()};T||(g[b]=T=o("div",{className:t},{position:"absolute",zIndex:1e3,padding:R+"px"},g.container),f=o("div",null,l({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},v.menuStyle),T),m=function(){a(T,{display:"none"}),h&&h.setState(0),g.openMenu=!1},r(T,"mouseleave",function(){_=setTimeout(m,500)}),r(T,"mouseenter",function(){clearTimeout(_)}),r(document,"mouseup",A),r(g,"destroy",function(){i(document,"mouseup",A)}),c(e,function(t){if(t){var e=t.separator?o("hr",null,null,f):o("div",{onmouseover:function(){a(this,v.menuItemHoverStyle)},onmouseout:function(){a(this,y)},onclick:function(){m(),t.onclick.apply(g,arguments)},innerHTML:t.text||g.options.lang[t.textKey]},l({cursor:"pointer"},y),f);g.exportDivElements.push(e)}}),g.exportDivElements.push(f,T),g.exportMenuWidth=T.offsetWidth,g.exportMenuHeight=T.offsetHeight),e={display:"block"},n+g.exportMenuWidth>w?e.right=w-n-u-R+"px":e.left=n-R+"px",s+d+g.exportMenuHeight>E&&"top"!==h.alignOptions.verticalAlign?e.bottom=E-s-R+"px":e.top=s+d-R+"px",a(T,e),g.openMenu=!0},addButton:function(n){var r,i,o=this,s=o.renderer,a=u(o.options.navigation.buttonOptions,n),c=a.onclick,p=a.menuItems,d={stroke:a.symbolStroke,fill:a.symbolFill},h=a.symbolSize||12;if(o.btnCount||(o.btnCount=0),o.exportDivElements||(o.exportDivElements=[],o.exportSVGElements=[]),a.enabled!==!1){var f,m=a.theme,_=m.states,g=_&&_.hover,_=_&&_.select;delete m.states,c?f=function(){c.apply(o,arguments)}:p&&(f=function(){o.contextMenu(i.menuClassName,p,i.translateX,i.translateY,i.width,i.height,i),i.setState(2)}),a.text&&a.symbol?m.paddingLeft=t.pick(m.paddingLeft,25):a.text||l(m,{width:a.width,height:a.height,padding:0}),i=s.button(a.text,0,0,f,m,g,_).attr({title:o.options.lang[a._titleKey],"stroke-linecap":"round"}),i.menuClassName=n.menuClassName||"highcharts-menu-"+o.btnCount++,a.symbol&&(r=s.symbol(a.symbol,a.symbolX-h/2,a.symbolY-h/2,h,h).attr(l(d,{"stroke-width":a.symbolStrokeWidth||1,zIndex:1})).add(i)),i.add().align(l(a,{width:i.width,x:t.pick(a.x,e)}),!0,"spacingBox"),e+=(i.width+a.buttonSpacing)*("right"===a.align?-1:1),o.exportSVGElements.push(i,r)}},destroyExport:function(t){var e,n,t=t.target;for(e=0;e<t.exportSVGElements.length;e++)(n=t.exportSVGElements[e])&&(n.onclick=n.ontouchstart=null,t.exportSVGElements[e]=n.destroy());for(e=0;e<t.exportDivElements.length;e++)n=t.exportDivElements[e],i(n,"mouseleave"),t.exportDivElements[e]=n.onmouseout=n.onmouseover=n.ontouchstart=n.onclick=null,s(n)}}),m.menu=function(t,e,n,r){return["M",t,e+2.5,"L",t+n,e+2.5,"M",t,e+r/2+.5,"L",t+n,e+r/2+.5,"M",t,e+r-1.5,"L",t+n,e+r-1.5]},n.prototype.callbacks.push(function(t){var n,i=t.options.exporting,o=i.buttons;if(e=0,i.enabled!==!1){for(n in o)t.addButton(o[n]);r(t,"destroy",t.destroyExport)}})}(Highcharts),function(t){function e(){return!!this.points.length}function n(){this.hasData()?this.hideNoData():this.showNoData()}var r=t.seriesTypes,i=t.Chart.prototype,o=t.getOptions(),s=t.extend;s(o.lang,{noData:"No data to display"}),o.noData={position:{x:0,y:0,align:"center",verticalAlign:"middle"},attr:{},style:{fontWeight:"bold",fontSize:"12px",color:"#60606a"}},r.pie&&(r.pie.prototype.hasData=e),r.gauge&&(r.gauge.prototype.hasData=e),r.waterfall&&(r.waterfall.prototype.hasData=e),t.Series.prototype.hasData=function(){return void 0!==this.dataMax&&void 0!==this.dataMin},i.showNoData=function(t){var e=this.options,t=t||e.lang.noData,e=e.noData;this.noDataLabel||(this.noDataLabel=this.renderer.label(t,0,0,null,null,null,null,null,"no-data").attr(e.attr).css(e.style).add(),this.noDataLabel.align(s(this.noDataLabel.getBBox(),e.position),!1,"plotBox"))},i.hideNoData=function(){this.noDataLabel&&(this.noDataLabel=this.noDataLabel.destroy())},i.hasData=function(){for(var t=this.series,e=t.length;e--;)if(t[e].hasData()&&!t[e].options.isInternal)return!0;return!1},i.callbacks.push(function(e){t.addEvent(e,"load",n),t.addEvent(e,"redraw",n)})}(Highcharts),define("highcharts",["jquery"],function(t){return function(){var e;return e||t.Highcharts}}(this)),define("app/nls/core",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{TITLE:function(){return"Wannabe MES"},"MSG:LOADING":function(){return"Loading..."},"MSG:LOADING_FAILURE":function(){return"Loading failed :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Loading failed :("},"MSG:LOG_OUT:FAILURE":function(){return"Logging out failed :("},"MSG:LOG_OUT:SUCCESS":function(){return"You are now logged out!"},"PAGE_ACTION:filter":function(){return"Filter"},"LIST:COLUMN:actions":function(){return"Actions"},"LIST:NO_DATA":function(){return"No data."},"LIST:NO_DATA:cell":function(){return"no data"},"LIST:ACTION:viewDetails":function(){return"View details"},"LIST:ACTION:edit":function(){return"Edit"},"LIST:ACTION:delete":function(){return"Delete"},"LIST:ACTION:print":function(){return"Print"},"BREADCRUMBS:edit":function(){return"Editing"},"BREADCRUMBS:delete":function(){return"Deleting"},"BREADCRUMBS:error":function(t){return"Error "+e.v(t,"code")+": "+e.s(t,"codeStr",{e401:"unauthorized access",e404:"not found",other:"bad request"})},"ERROR:400":function(){return"The request cannot be fulfilled due to bad syntax :("},"ERROR:401":function(){return"Unfortunately, you do not have the right privileges to perform the requested action :("},"ERROR:404":function(){return"The requested resource could not be found :("},"PAGINATION:FIRST_PAGE":function(){return"First page"},"PAGINATION:PREV_PAGE":function(){return"Previous page"},"PAGINATION:NEXT_PAGE":function(){return"Next page"},"PAGINATION:LAST_PAGE":function(){return"Last page"},"LOG_IN_FORM:TITLE:LOG_IN":function(){return"Log in form"},"LOG_IN_FORM:TITLE:RESET":function(){return"Password reset form"},"LOG_IN_FORM:LABEL:LOGIN":function(){return"Login"},"LOG_IN_FORM:LABEL:PASSWORD":function(){return"Password"},"LOG_IN_FORM:LABEL:NEW_PASSWORD":function(){return"New password"},"LOG_IN_FORM:SUBMIT:LOG_IN":function(){return"Log in"},"LOG_IN_FORM:SUBMIT:RESET":function(){return"Reset password"},"LOG_IN_FORM:LINK:LOG_IN":function(){return"Log in"},"LOG_IN_FORM:LINK:RESET":function(){return"Forgot your password?"},"LOG_IN_FORM:RESET:SUBJECT":function(){return"WMES password reset"},"LOG_IN_FORM:RESET:TEXT":function(t){return"We've received a request to reset your WMES account password.\n\nTo change your password, please click this link:\n"+e.v(t,"resetUrl")+"\n\nPassword reset links are valid for only 24 hours. If the link expires, you will need to submit a new request here: "+e.v(t,"appUrl")+"\n\nIf you didn't request a change, please discregard this e-mail and your password will stay the same.\n\nContact your superior or WMES administrator if you need help or have questions.\n\nSincerely, WMES support team."},"LOG_IN_FORM:RESET:MSG:NOT_FOUND":function(){return"U≈ºytkownik o podanym loginie nie istnieje :-("},"LOG_IN_FORM:RESET:MSG:INVALID_EMAIL":function(){return"U≈ºytkownik nie ma ustawionego adresu e-mail :-("},"LOG_IN_FORM:RESET:MSG:FAILURE":function(){return"Nie uda≈Ço siƒô zresetowaƒá has≈Ça :-("},"LOG_IN_FORM:RESET:MSG:SUCCESS":function(){return"Sprawd≈∫ swojego e-maila!"},"BOOL:true":function(){return"Yes"},"BOOL:false":function(){return"No"},"BOOL:null":function(){return"N/A"},"#":function(){return"No."},GUEST_USER_NAME:function(){return"Guest"},"NAVBAR:TOGGLE":function(){return"Show menu"},"NAVBAR:DASHBOARD":function(){return"Dashboard"},"NAVBAR:EVENTS":function(){return"Events"},"NAVBAR:ORDERS":function(){return"Orders"},"NAVBAR:MECH_ORDERS":function(){return"Mechanical orders"},"NAVBAR:OTHER_ORDERS":function(){return"Production orders"},"NAVBAR:EMPTY_ORDERS":function(){return"Empty orders"},"NAVBAR:LINES":function(){return"Production lines"},"NAVBAR:USERS":function(){return"Users"},"NAVBAR:MY_ACCOUNT":function(){return"My account"},"NAVBAR:UI_LOCALE":function(){return"UI locale"},"NAVBAR:LOCALE_PL":function(){return"In Polish"},"NAVBAR:LOCALE_US":function(){return"In English"},"NAVBAR:LOG_IN":function(){return"Log in"},"NAVBAR:LOG_OUT":function(){return"Log out"},"NAVBAR:DICTIONARIES":function(){return"Dictionaries"},"NAVBAR:ORDER_STATUSES":function(){return"Order statuses"},"NAVBAR:DELAY_REASONS":function(){return"Delay reasons"},"NAVBAR:DOWNTIME_REASONS":function(){return"Downtime reasons"},"NAVBAR:LOSS_REASONS":function(){return"Loss reasons"},"NAVBAR:AORS":function(){return"Areas of responsibility"},"NAVBAR:WORK_CENTERS":function(){return"WorkCenters"},"NAVBAR:COMPANIES":function(){return"Companies"},"NAVBAR:DIVISIONS":function(){return"Divisions"},"NAVBAR:SUBDIVISIONS":function(){return"Subdivisions"},"NAVBAR:MRP_CONTROLLERS":function(){return"MRP Controllers"},"NAVBAR:PROD_FUNCTIONS":function(){return"Functions"},"NAVBAR:PROD_FLOWS":function(){return"Production flows"},"NAVBAR:PROD_TASKS":function(){return"Production tasks"},"NAVBAR:PROD_LINES":function(){return"Production lines"},"NAVBAR:HOURLY_PLANS":function(){return"Hourly plans"},"NAVBAR:FTE":function(){return"FTE"},"NAVBAR:FTE:MASTER":function(){return"Production"},"NAVBAR:FTE:MASTER:LIST":function(){return"Entries"},"NAVBAR:FTE:MASTER:CURRENT":function(){return"Allocation"},"NAVBAR:FTE:LEADER":function(){return"Warehouse"},"NAVBAR:FTE:LEADER:LIST":function(){return"Entries"},"NAVBAR:FTE:LEADER:CURRENT":function(){return"Allocation"},"NAVBAR:VIS":function(){return"Visualization"},"NAVBAR:VIS:STRUCTURE":function(){return"Org Unit structure"},"NAVBAR:PRESS_WORKSHEETS":function(){return"Worksheets"},"NAVBAR:REPORTS":function(){return"Reports"},"NAVBAR:REPORTS:1":function(){return"PROD, EFF, Downtime"},"NAVBAR:REPORTS:2":function(){return"CLIP"},"NAVBAR:REPORTS:3":function(){return"OEE"},"NAVBAR:REPORTS:4":function(){return"Operators"},"NAVBAR:REPORTS:5":function(){return"HR"},"NAVBAR:REPORTS:6":function(){return"Warehouse"},"NAVBAR:REPORTS:7":function(){return"Downtimes in AORs"},"NAVBAR:PROD":function(){return"Production"},"NAVBAR:PROD:DATA":function(){return"Production data"},"NAVBAR:PROD:LOG_ENTRIES":function(){return"Operation log"},"NAVBAR:PROD:SHIFTS":function(){return"Shifts"},"NAVBAR:PROD:SHIFT_ORDERS":function(){return"Orders"},"NAVBAR:PROD:DOWNTIMES":function(){return"Downtimes"},"NAVBAR:PROD:CHANGE_REQUESTS":function(){return"Change requests"},"NAVBAR:PROGRAMMING":function(){return"Programming"},"NAVBAR:XICONF":function(){return"Xiconf <em>(MultiOne)</em>"},"NAVBAR:XICONF:PROGRAMS":function(){return"Programs"},"NAVBAR:XICONF:ORDERS":function(){return"Orders"},"NAVBAR:XICONF:RESULTS":function(){return"Results"},"NAVBAR:XICONF:CLIENTS":function(){return"Clients"},"NAVBAR:DOCUMENTS":function(){return"Documentation"},"NAVBAR:DOCUMENTS:CLIENTS":function(){return"Clients"},"NAVBAR:DOCUMENTS:SETTINGS":function(){return"Settings"},"NAVBAR:VENDORS":function(){return"Vendors"},"NAVBAR:PURCHASE_ORDERS":function(){return"Purchase orders"},"NAVBAR:MONITORING":function(){return"Monitoring"},"NAVBAR:MONITORING:LAYOUT":function(){return"Factory layout"},"NAVBAR:MONITORING:LIST":function(){return"Production line list"},"NAVBAR:VENDOR_NC12S":function(){return"12NC database"},"NAVBAR:LICENSES":function(){return"Licenses"},"ACTION_FORM:BUTTON":function(){return"Perform action"},"ACTION_FORM:BUTTON:delete":function(){return"Delete"},"ACTION_FORM:BUTTON:cancel":function(){return"Cancel"},"ACTION_FORM:MESSAGE":function(){return"Are you sure you want to perform the requested action?"},"ACTION_FORM:MESSAGE:failure":function(){return"Action failed :("},"ORG_UNIT:division":function(){return"Division"},"ORG_UNIT:subdivision":function(){return"Subdivision"},"ORG_UNIT:mrpController":function(){return"MRP Controller"},"ORG_UNIT:prodFlow":function(){return"Production flow"},"ORG_UNIT:workCenter":function(){return"WorkCenter"},"ORG_UNIT:prodLine":function(){return"Production line"},SHIFT:function(t){return e.v(t,"date")+", "+e.v(t,"shift")},"SHIFT:1":function(){return"I"},"SHIFT:2":function(){return"II"},"SHIFT:3":function(){return"III"},"SHIFT:0":function(){return"Any"},QUARTER:function(t){return e.v(t,"quarter")+" quarter "+e.v(t,"year")},"QUARTER:1":function(){return"I"},"QUARTER:2":function(){return"II"},"QUARTER:3":function(){return"III"},"QUARTER:4":function(){return"IV"},"QUARTER:0":function(){return"Any"},"highcharts:contextButtonTitle":function(){return"Chart's context menu"},"highcharts:downloadJPEG":function(){return"Save as JPEG"},"highcharts:downloadPDF":function(){return"Save as PDF"},"highcharts:downloadPNG":function(){return"Save as PNG"},"highcharts:downloadSVG":function(){return"Save as SVG"},"highcharts:downloadCSV":function(){return"Save as CSV"},"highcharts:printChart":function(){return"Print the chart"},"highcharts:decimalPoint":function(){return"."},"highcharts:thousandsSep":function(){return","},"highcharts:noData":function(){return"No data :("},"highcharts:resetZoom":function(){return"1:1"},"highcharts:resetZoomTitle":function(){return"Reset the zoom level to 1:1"},"highcharts:loading":function(){return"Loading..."},"highcharts:months":function(){return"January_February_March_April_May_June_July_August_September_October_November_December"},"highcharts:shortMonths":function(){return"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec"},"highcharts:weekdays":function(){return"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday"},"dataTables:emptyTable":function(){return"No data."},"dataTables:loadingRecords":function(){return"Loading..."},"dataTables:loadingFailed":function(){return"Loading failed :("},"feedback:button:text":function(){return"Feedback"},"feedback:button:tooltip":function(){return"Report bugs, notes, opinions or ideas!"},"colorPicker:label":function(){return"Color"},"filter:date:from":function(){return"From"},"filter:date:from:info":function(){return"Data from 06:00 of the selected day"},"filter:date:to":function(){return"To"},"filter:date:to:info":function(){return"Data to 06:00 of the selected day"},"filter:submit":function(){return"Filter"},"filter:limit":function(){return"Limit"},"filter:show":function(){return"Show filter"},"filter:hide":function(){return"Hide filter"},"placeholder:date":function(){return"yyyy-mm-dd"},"placeholder:time":function(){return"--:--"}},pl:!0}}),define("app/nls/pl/core",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{TITLE:function(){return"Wannabe MES"},"MSG:LOADING":function(){return"≈Åadowanie..."},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie nie powiod≈Ço siƒô :("},"MSG:LOG_OUT:FAILURE":function(){return"Wylogowanie nie powiod≈Ço siƒô :("},"MSG:LOG_OUT:SUCCESS":function(){return"Zosta≈Çe≈õ wylogowany!"},"PAGE_ACTION:filter":function(){return"Filtruj"},"LIST:COLUMN:actions":function(){return"Akcje"},"LIST:NO_DATA":function(){return"Brak danych."},"LIST:NO_DATA:cell":function(){return"brak danych"},"LIST:ACTION:viewDetails":function(){return"Poka≈º szczeg√≥≈Çy"},"LIST:ACTION:edit":function(){return"Edytuj"},"LIST:ACTION:delete":function(){return"Usu≈Ñ"},"LIST:ACTION:print":function(){return"Drukuj"},"BREADCRUMBS:edit":function(){return"Edycja"},"BREADCRUMBS:delete":function(){return"Usuwanie"},"BREADCRUMBS:error":function(t){return"B≈ÇƒÖd "+e.v(t,"code")+": "+e.s(t,"codeStr",{e401:"nieautoryzowany dostƒôp",e404:"nie znaleziono",other:"nieprawid≈Çowe zapytanie"})},"ERROR:400":function(){return"≈ªƒÖdanie nie mo≈ºe byƒá obs≈Çu≈ºone z powodu b≈Çƒôdnej sk≈Çadni zapytania :("},"ERROR:401":function(){return"Niestety, ale nie masz wystarczajƒÖcych uprawnie≈Ñ do wykonania ≈ºƒÖdanej akcji :("},"ERROR:404":function(){return"Wybrana strona nie istnieje :("},"PAGINATION:FIRST_PAGE":function(){return"Pierwsza strona"},"PAGINATION:PREV_PAGE":function(){return"Poprzednia strona"},"PAGINATION:NEXT_PAGE":function(){return"Nastƒôpna strona"},"PAGINATION:LAST_PAGE":function(){return"Ostatnia strona"},"LOG_IN_FORM:TITLE:LOG_IN":function(){return"Logowanie do systemu"},"LOG_IN_FORM:TITLE:RESET":function(){return"Resetowanie has≈Ça"},"LOG_IN_FORM:LABEL:LOGIN":function(){return"Login"},"LOG_IN_FORM:LABEL:PASSWORD":function(){return"Has≈Ço"},"LOG_IN_FORM:LABEL:NEW_PASSWORD":function(){return"Nowe has≈Ço"},"LOG_IN_FORM:SUBMIT:LOG_IN":function(){return"Zaloguj siƒô"},"LOG_IN_FORM:SUBMIT:RESET":function(){return"Resetuj has≈Ço"},"LOG_IN_FORM:LINK:LOG_IN":function(){return"Zaloguj siƒô"},"LOG_IN_FORM:LINK:RESET":function(){return"Zapomnia≈Çe≈õ has≈Ça?"},"LOG_IN_FORM:RESET:SUBJECT":function(){return"Reset has≈Ça w systemie WMES"},"LOG_IN_FORM:RESET:TEXT":function(t){return"Otrzymali≈õmy ≈ºƒÖdanie zresetowania has≈Ça do Twojego konta w systemie WMES.\n\nAby potwierdziƒá zmianƒô has≈Ça, kliknij poni≈ºszy odno≈õnik:\n"+e.v(t,"resetUrl")+"\n\nOdno≈õnik aktywny bƒôdzie tylko przez 24 godziny. Po tym czasie mo≈ºesz wygenerowaƒá nowe ≈ºƒÖdanie wchodzƒÖc do systemu: "+e.v(t,"appUrl")+"\n\nJe≈ºeli nie chcesz zmianiaƒá swojego has≈Ça, zignoruj tego e-maila.\n\nW razie jakichkolwiek problem√≥w skonsultuj siƒô ze swoim prze≈Ço≈ºonym lub administratorem systemu."},"LOG_IN_FORM:RESET:MSG:NOT_FOUND":function(){return"U≈ºytkownik o podanym loginie nie istnieje :-("},"LOG_IN_FORM:RESET:MSG:INVALID_EMAIL":function(){return"U≈ºytkownik nie ma ustawionego adresu e-mail :-("},"LOG_IN_FORM:RESET:MSG:FAILURE":function(){return"Nie uda≈Ço siƒô zresetowaƒá has≈Ça :-("},"LOG_IN_FORM:RESET:MSG:SUCCESS":function(){return"Sprawd≈∫ swojego e-maila!"},"BOOL:true":function(){return"Tak"},"BOOL:false":function(){return"Nie"},"BOOL:null":function(){return"Nie dotyczy"},"#":function(){return"Lp."},GUEST_USER_NAME:function(){return"Go≈õƒá"},"NAVBAR:TOGGLE":function(){return"Poka≈º menu"},"NAVBAR:DASHBOARD":function(){return"Pulpit"},"NAVBAR:EVENTS":function(){return"Zdarzenia"},"NAVBAR:ORDERS":function(){return"Zlecenia"},"NAVBAR:MECH_ORDERS":function(){return"Zlecenia dzia≈Çu mechanicznego"},"NAVBAR:OTHER_ORDERS":function(){return"Zlecenia reszty dzia≈Ç√≥w"},"NAVBAR:EMPTY_ORDERS":function(){return"Puste zlecenia"},"NAVBAR:LINES":function(){return"Linie produkcyjne"},"NAVBAR:USERS":function(){return"U≈ºytkownicy"},"NAVBAR:MY_ACCOUNT":function(){return"Moje konto"},"NAVBAR:UI_LOCALE":function(){return"Lokalizacja UI"},"NAVBAR:LOCALE_PL":function(){return"Po polsku"},"NAVBAR:LOCALE_US":function(){return"Po angielsku"},"NAVBAR:LOG_IN":function(){return"Zaloguj siƒô"},"NAVBAR:LOG_OUT":function(){return"Wyloguj siƒô"},"NAVBAR:DICTIONARIES":function(){return"S≈Çowniki"},"NAVBAR:ORDER_STATUSES":function(){return"Statusy zlece≈Ñ"},"NAVBAR:DELAY_REASONS":function(){return"Powody op√≥≈∫nie≈Ñ"},"NAVBAR:DOWNTIME_REASONS":function(){return"Powody przestoj√≥w"},"NAVBAR:LOSS_REASONS":function(){return"Powody strat materia≈Çowych"},"NAVBAR:AORS":function(){return"Obszary odpowiedzialno≈õci"},"NAVBAR:WORK_CENTERS":function(){return"WorkCentra"},"NAVBAR:COMPANIES":function(){return"Firmy"},"NAVBAR:DIVISIONS":function(){return"Wydzia≈Çy"},"NAVBAR:SUBDIVISIONS":function(){return"Dzia≈Çy"},"NAVBAR:MRP_CONTROLLERS":function(){return"Kontrolery MRP"},"NAVBAR:PROD_FUNCTIONS":function(){return"Funkcje"},"NAVBAR:PROD_FLOWS":function(){return"Przep≈Çywy"},"NAVBAR:PROD_TASKS":function(){return"Zadania produkcyjne"},"NAVBAR:PROD_LINES":function(){return"Linie produkcyjne"},"NAVBAR:HOURLY_PLANS":function(){return"Plany godzinowe"},"NAVBAR:FTE":function(){return"FTE"},"NAVBAR:FTE:MASTER":function(){return"Produkcja"},"NAVBAR:FTE:MASTER:LIST":function(){return"Lista wpis√≥w"},"NAVBAR:FTE:MASTER:CURRENT":function(){return"Przydzielanie zasob√≥w"},"NAVBAR:FTE:LEADER":function(){return"Magazyn"},"NAVBAR:FTE:LEADER:LIST":function(){return"Lista wpis√≥w"},"NAVBAR:FTE:LEADER:CURRENT":function(){return"Przydzielanie zasob√≥w"},"NAVBAR:VIS":function(){return"Wizualizacja"},"NAVBAR:VIS:STRUCTURE":function(){return"Struktura organizacyjna"},"NAVBAR:PRESS_WORKSHEETS":function(){return"Karty pracy"},"NAVBAR:REPORTS":function(){return"Raporty"},"NAVBAR:REPORTS:1":function(){return"Wska≈∫niki"},"NAVBAR:REPORTS:2":function(){return"CLIP"},"NAVBAR:REPORTS:3":function(){return"Wykorzystanie zasob√≥w"},"NAVBAR:REPORTS:4":function(){return"Operatorzy"},"NAVBAR:REPORTS:5":function(){return"HR"},"NAVBAR:REPORTS:6":function(){return"Magazyn"},"NAVBAR:REPORTS:7":function(){return"Przestoje w obszarach"},"NAVBAR:PROD":function(){return"Produkcja"},"NAVBAR:PROD:DATA":function(){return"Dane produkcyjne"},"NAVBAR:PROD:LOG_ENTRIES":function(){return"Historia operacji"},"NAVBAR:PROD:SHIFTS":function(){return"Zmiany"},"NAVBAR:PROD:SHIFT_ORDERS":function(){return"Zlecenia"},"NAVBAR:PROD:DOWNTIMES":function(){return"Przestoje"},"NAVBAR:PROD:CHANGE_REQUESTS":function(){return"≈ªƒÖdania zmian"},"NAVBAR:PROGRAMMING":function(){return"Programowanie"},"NAVBAR:XICONF":function(){return"Xiconf <em>(MultiOne)</em>"},"NAVBAR:XICONF:PROGRAMS":function(){return"Programy"},"NAVBAR:XICONF:ORDERS":function(){return"Zlecenia"},"NAVBAR:XICONF:RESULTS":function(){return"Historia wynik√≥w"},"NAVBAR:XICONF:CLIENTS":function(){return"Klienci"},"NAVBAR:DOCUMENTS":function(){return"Dokumentacja"},"NAVBAR:DOCUMENTS:CLIENTS":function(){return"Klienci"},"NAVBAR:DOCUMENTS:SETTINGS":function(){return"Ustawienia"},"NAVBAR:VENDORS":function(){return"Dostawcy"},"NAVBAR:PURCHASE_ORDERS":function(){return"Zam√≥wienia"},"NAVBAR:MONITORING":function(){return"Monitoring"},"NAVBAR:MONITORING:LAYOUT":function(){return"Uk≈Çad fabryki"},"NAVBAR:MONITORING:LIST":function(){return"Lista linii produkcyjnych"},"NAVBAR:VENDOR_NC12S":function(){return"Baza 12NC"},"NAVBAR:LICENSES":function(){return"Licencje"},"ACTION_FORM:BUTTON":function(){return"Wykonaj akcjƒô"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ"},"ACTION_FORM:BUTTON:cancel":function(){return"Anuluj"},"ACTION_FORM:MESSAGE":function(){return"Czy na pewno chcesz wykonaƒá ≈ºƒÖdanƒÖ akcjƒô?"},"ACTION_FORM:MESSAGE:failure":function(){return"Wykonywanie akcji nie powiod≈Ço siƒô :("},"ORG_UNIT:division":function(){return"Wydzia≈Ç"},"ORG_UNIT:subdivision":function(){return"Dzia≈Ç"},"ORG_UNIT:mrpController":function(){return"Kontroler MRP"},"ORG_UNIT:prodFlow":function(){return"Przep≈Çyw"},"ORG_UNIT:workCenter":function(){return"WorkCenter"},"ORG_UNIT:prodLine":function(){return"Linia monta≈ºowa"},SHIFT:function(t){return e.v(t,"date")+", "+e.v(t,"shift")},"SHIFT:1":function(){return"I"},"SHIFT:2":function(){return"II"},"SHIFT:3":function(){return"III"},"SHIFT:0":function(){return"Dowolna"},QUARTER:function(t){return e.v(t,"quarter")+" kwarta≈Ç "+e.v(t,"year")},"QUARTER:1":function(){return"I"},"QUARTER:2":function(){return"II"},"QUARTER:3":function(){return"III"},"QUARTER:4":function(){return"IV"},"QUARTER:0":function(){return"Dowolny"},"highcharts:contextButtonTitle":function(){return"Menu kontekstowe wykresu"},"highcharts:downloadJPEG":function(){return"Zapisz jako JPEG"},"highcharts:downloadPDF":function(){return"Zapisz jako PDF"},"highcharts:downloadPNG":function(){return"Zapisz jako PNG"},"highcharts:downloadSVG":function(){return"Zapisz jako SVG"},"highcharts:downloadCSV":function(){return"Zapisz jako CSV"},"highcharts:printChart":function(){return"Drukuj wykres"},"highcharts:decimalPoint":function(){return","},"highcharts:thousandsSep":function(){return" "},"highcharts:noData":function(){return"Brak danych :("},"highcharts:resetZoom":function(){return"1:1"},"highcharts:resetZoomTitle":function(){return"Zresetuj przybli≈ºenie"},"highcharts:loading":function(){return"≈Åadowanie..."},"highcharts:months":function(){return"Stycze≈Ñ_Luty_Marzec_Kwiecie≈Ñ_Maj_Czerwiec_Lipiec_Sierpie≈Ñ_Wrzesie≈Ñ_Pa≈∫dziernik_Listopad_Grudzie≈Ñ"},"highcharts:shortMonths":function(){return"Sty_Lut_Mar_Kwi_Maj_Cze_Lip_Sie_Wrz_Pa≈∫_Lis_Gru"},"highcharts:weekdays":function(){return"Niedziela_Poniedzia≈Çek_Wtorek_≈öroda_Czwartek_PiƒÖtek_Sobota"},"dataTables:emptyTable":function(){return"Brak danych."},"dataTables:loadingRecords":function(){return"≈Åadowanie danych..."},"dataTables:loadingFailed":function(){return"≈Åadowanie danych nie powiod≈Ço siƒô :("},"feedback:button:text":function(){return"Feedback"},"feedback:button:tooltip":function(){return"Zg≈Ço≈õ b≈Çƒôdy, uwagi, opinie lub pomys≈Çy!"},"colorPicker:label":function(){return"Kolor"},"filter:date:from":function(){return"Od"},"filter:date:from:info":function(){return"Dane od godziny 06:00 wybranego dnia"},"filter:date:to":function(){return"Do"},"filter:date:to:info":function(){return"Dane do godziny 06:00 wybranego dnia"},"filter:submit":function(){return"Filtruj"},"filter:limit":function(){return"Limit"},"filter:show":function(){return"Poka≈º filtr"},"filter:hide":function(){return"Ukryj filtr"},"placeholder:date":function(){return"rrrr-mm-dd"},"placeholder:time":function(){return"--:--"}}}),define("app/highcharts",["underscore","highcharts","./i18n","./time","./broker","i18n!app/nls/core"],function(t,e,n,r,i){"use strict";function o(){e.setOptions({lang:{contextButtonTitle:n("core","highcharts:contextButtonTitle"),downloadJPEG:n("core","highcharts:downloadJPEG"),downloadPDF:n("core","highcharts:downloadPDF"),downloadPNG:n("core","highcharts:downloadPNG"),downloadSVG:n("core","highcharts:downloadSVG"),printChart:n("core","highcharts:printChart"),noData:n("core","highcharts:noData"),resetZoom:n("core","highcharts:resetZoom"),resetZoomTitle:n("core","highcharts:resetZoomTitle"),loading:n("core","highcharts:loading"),decimalPoint:n("core","highcharts:decimalPoint"),thousandsSep:n("core","highcharts:thousandsSep"),shortMonths:n("core","highcharts:shortMonths").split("_"),weekdays:n("core","highcharts:weekdays").split("_"),months:n("core","highcharts:months").split("_")},exporting:{buttons:{contextButton:{menuItems:s()}}}})
}function s(){return[{text:n("core","highcharts:downloadPDF"),onclick:t.partial(a,"application/pdf")},{text:n("core","highcharts:downloadPNG"),onclick:t.partial(a,"image/png")}]}function a(e){var n={dataLabels:{enabled:!0,formatter:u}},r=this.options.chart.events;this.exportChart({type:e},{chart:{events:{load:function(){r&&r.load&&r.load.apply(this,arguments),t.forEach(this.series,function(t){t.update(n)})}}}})}function u(){var t=this.series.chart.options.chart.type;if(null===this.y||0===this.y&&"pie"!==t)return"";if("column"!==this.series.type&&"pie"!==this.series.type&&this.series.points.length>10){if(this.series.index%2===0&&this.point.index%2!==0)return"";if(this.series.index%2!==0&&this.point.index%2===0)return""}var n=e.numberFormat(this.y,1);return/.0$/.test(n)&&(n=e.numberFormat(this.y,0)),n}function c(t){return t.series.name}function l(t){return t.y}var p=e.Tooltip.prototype.getPosition;return e.Tooltip.prototype.getPosition=function(t,e,n){var r=p.call(this,t,e,n);return r.y<this.chart.plotTop+5&&(r.y=this.chart.plotTop+5),r},t.extend(e.Axis.prototype.defaultYAxisOptions,{maxPadding:.01,minPadding:.01}),e.getDefaultMenuItems=s,e.formatTableTooltip=function(t,r){var i=n("core","highcharts:decimalPoint"),o=t?'<b class="highcharts-tooltip-header">'+t+"</b>":"";return o+='<table class="highcharts-tooltip">',r.forEach(function(t){var n=e.numberFormat(t.value,t.decimals).split(i),r=n[0],s=2===n.length?i+n[1]:"",a=t.prefix||"",u=t.suffix||"";o+='<tr><td class="highcharts-tooltip-label"><span style="color: '+t.color+'">‚óè</span> '+t.name+':</td><td class="highcharts-tooltip-integer">'+a+r+'</td><td class="highcharts-tooltip-fraction">'+s+'</td><td class="highcharts-tooltip-suffix">'+u+"</td>"+(t.extraColumns||"")+"</tr>"}),o+="</table>"},e.setOptions({global:{timezoneOffset:r.getMoment().zone(),useUTC:!1},chart:{zoomType:"x",animation:!1,resetZoomButton:{theme:{style:{top:"display: none"}}}},plotOptions:{series:{animation:!1}},credits:{enabled:!1},legend:{borderRadius:0,borderWidth:1,borderColor:"#E3E3E3",backgroundColor:"#F5F5F5",itemStyle:{fontSize:"10px",fontWeight:"normal",fontFamily:"Arial, sans-serif"}},tooltip:{borderColor:"#000",borderWidth:1,borderRadius:0,backgroundColor:"rgba(255,255,255,.85)",shadow:!1,shape:"square",hideDelay:250,useHTML:!0,displayHeader:!0,formatter:function(){var t,n=[],r=(this.point||this.points[0]).series.chart.tooltip.options,i=r.headerFormatter,o=r.rowNameFormatter||c,s=r.valueFormatter||l;t="function"==typeof i?i(this):this.key?this.key:this.points?this.points[0].key:this.series?this.series.name:this.x;var a=this.points||[{point:this.point,series:this.point.series}];return a.forEach(function(t){t=t.point;var e=t.series.tooltipOptions;n.push({point:t,color:t.color||t.series.color,name:o(t),prefix:e.valuePrefix,suffix:e.valueSuffix,decimals:e.valueDecimals,value:s(t)})}),r.extraRowsProvider&&r.extraRowsProvider(a,n),e.formatTableTooltip(t,n)}},exporting:{chartOptions:{chart:{spacing:[10,10,10,10]}},scale:1,sourceWidth:848,sourceHeight:600,url:"/reports;export"},loading:{labelStyle:{top:"20%"}}}),o(),i.subscribe("i18n.reloaded",o),e}),define("app/reports/util/formatTooltipHeader",["app/i18n","app/time"],function(t,e){"use strict";return function(n){var r,i=e.getMoment("number"==typeof n?n:n.x),o=(this.model.query?this.model.query.get("interval"):this.model.get("interval"))||"day";return"shift"===o?r={shift:t("core","SHIFT:"+(6===i.hours()?1:14===i.hours()?2:3))}:"quarter"===o&&(r={quarter:t("core","QUARTER:"+i.quarter())}),i.format(t("reports","tooltipHeaderFormat:"+o,r))}}),define("app/kaizenOrders/templates/reportTable",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<table class="table table-bordered table-condensed">\n  <tbody>\n    '),rows.forEach(function(e){__output.push('\n    <tr data-id="'),__output.push(e.id),__output.push('">\n      <td '),e.color&&(__output.push('style="border-left-color: '),__output.push(e.color),__output.push('"')),__output.push(">"),__output.push(escape(e.label||t("kaizenOrders","report:series:"+e.id))),__output.push('</td>\n      <td class="is-min is-number">'),__output.push(Math.round(e.abs||0).toLocaleString()),__output.push('</td>\n      <td class="is-min is-number">'),__output.push(Math.round(100*(e.rel||0)).toLocaleString()),__output.push("%</td>\n    </tr>\n    ")}),__output.push('\n    <tr>\n      <td colspan="3"></td>\n    </tr>\n  </tbody>\n</table>\n');return __output.join("")}}),define("app/kaizenOrders/templates/tableAndChart",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="kaizenOrders-report-tableAndChart">\n  <div id="'),__output.push(idPrefix),__output.push('-table" class="kaizenOrders-report-table"></div>\n  <div id="'),__output.push(idPrefix),__output.push('-chart" class="kaizenOrders-report-chart"></div>\n</div>\n');return __output.join("")}}),define("app/kaizenOrders/views/KaizenOrderTableAndChartView",["underscore","app/i18n","app/highcharts","app/core/View","app/reports/util/formatTooltipHeader","../dictionaries","app/kaizenOrders/templates/reportTable","app/kaizenOrders/templates/tableAndChart"],function(t,e,n,r,i,o,s,a){"use strict";return r.extend({template:a,events:{},initialize:function(){this.chart=null,this.isLoading=!1,this.listenTo(this.model,"request",this.onModelLoading),this.listenTo(this.model,"sync",this.onModelLoaded),this.listenTo(this.model,"error",this.onModelError),this.listenTo(this.model,"change:"+this.options.metric,this.render)},destroy:function(){null!==this.chart&&(this.chart.destroy(),this.chart=null)},afterRender:function(){this.timers.createOrUpdate&&clearTimeout(this.timers.createOrUpdate),this.timers.createOrUpdate=setTimeout(this.createOrUpdate.bind(this),1)},createOrUpdate:function(){this.timers.createOrUpdate=null,this.chart?this.updateChart():(this.createChart(),this.isLoading&&this.chart.showLoading()),this.updateTable()},createChart:function(){this.chart=new n.Chart({chart:{renderTo:this.$id("chart")[0],plotBorderWidth:1,spacing:[10,1,1,0]},exporting:{filename:e.bound("kaizenOrders","report:filenames:"+this.options.metric),buttons:{contextButton:{align:"left"}}},title:!1,noData:{},xAxis:{type:"datetime"},yAxis:{title:!1,min:0,valueDecimals:0,opposite:!0},tooltip:{shared:!0,valueDecimals:0,headerFormatter:i.bind(this)},legend:{enabled:!1},plotOptions:{column:{borderWidth:0}},series:this.serializeChartSeries()})},updateChart:function(){this.chart.destroy(),this.createChart()},updateTable:function(){this.$id("table").html(s({rows:this.model.get(this.options.metric).rows}))},serializeChartData:function(){return this.model.get(this.options.metric).series},serializeChartSeries:function(){var n=this.model.get(this.options.metric).series;return Object.keys(n).map(function(r){var i=n[r];return t.defaults(i,{id:r,type:"column",name:i.name||e.bound("kaizenOrders","report:series:"+r),data:[]})})},onModelLoading:function(){this.isLoading=!0,this.chart&&this.chart.showLoading()},onModelLoaded:function(){this.isLoading=!1,this.chart&&this.chart.hideLoading()},onModelError:function(){this.isLoading=!1,this.chart&&this.chart.hideLoading()}})}),define("app/kaizenOrders/templates/reportPage",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="kaizenOrders-report">\n  <div class="filter-container"></div>\n  '),metrics.forEach(function(e){__output.push("\n  <h3>"),__output.push(t("kaizenOrders","report:title:"+e)),__output.push('</h3>\n  <div class="kaizenOrders-report-'),__output.push(e),__output.push('"></div>\n  ')}),__output.push("\n</div>\n");return __output.join("")}}),define("app/kaizenOrders/pages/KaizenOrderReportPage",["app/i18n","app/core/View","../dictionaries","../KaizenOrderReport","../views/KaizenOrderReportFilterView","../views/KaizenOrderTableAndChartView","app/kaizenOrders/templates/reportPage"],function(t,e,n,r,i,o,s){"use strict";return e.extend({layoutName:"page",template:s,breadcrumbs:[t.bound("kaizenOrders","BREADCRUMBS:base"),t.bound("kaizenOrders","BREADCRUMBS:report")],initialize:function(){this.setView(".filter-container",new i({model:this.model})),r.TABLE_AND_CHART_METRICS.forEach(function(t){this.setView(".kaizenOrders-report-"+t,new o({metric:t,model:this.model}))},this),this.listenTo(this.model,"filtered",this.onFiltered)},destroy:function(){n.unload()},serialize:function(){return{idPrefix:this.idPrefix,metrics:r.TABLE_AND_CHART_METRICS}},load:function(t){return n.loaded?t(this.model.fetch()):n.load().then(this.model.fetch.bind(this.model))},afterRender:function(){n.load()},onFiltered:function(){this.promised(this.model.fetch()),this.broker.publish("router.navigate",{url:this.model.genClientUrl(),trigger:!1,replace:!0})}})}),define("app/kaizenOrders/templates/thanks",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="kaizenOrders-thanks">\n  <p class="kaizenOrders-thanks-message">'),__output.push(t("kaizenOrders","thanks:message")),__output.push('</p>\n  <i class="fa fa-thumbs-up"></i>\n  <p class="kaizenOrders-thanks-footnote">'),__output.push(t("kaizenOrders","thanks:footnote")),__output.push("</p>\n</div>\n");return __output.join("")}}),define("app/kaizenOrders/views/KaizenOrderThankYouView",["jquery","app/core/View","app/kaizenOrders/templates/thanks"],function(t,e,n){"use strict";return e.extend({template:n,initialize:function(){this.doCloseDialog=this.doCloseDialog.bind(this),t(window).on("mousedown.thanks",this.doCloseDialog).on("keydown.thanks",this.doCloseDialog),this.broker.subscribe("router.*",this.doCloseDialog).setLimit(1)},destroy:function(){t(window).off(".thanks")},onDialogShown:function(t){this.closeDialog=t.closeDialog.bind(t,null)},doCloseDialog:function(){this.closeDialog(),this.closeDialog=function(){}},closeDialog:function(){}})}),define("app/nls/kaizenOrders",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:base":function(){return"Improvements"},"BREADCRUMBS:browse":function(){return"Entries"},"BREADCRUMBS:addForm":function(){return"Add"},"BREADCRUMBS:editForm":function(){return"Edit"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Delete"},"BREADCRUMBS:report":function(){return"Report"},"navbar:kaizen":function(){return"Improvements"},"navbar:orders":function(){return"Entries"},"navbar:all":function(){return"All"},"navbar:open":function(){return"Only open"},"navbar:mine":function(){return"Only mine"},"navbar:unseen":function(){return"Only unread"},"navbar:reports":function(){return"Reports"},"navbar:reports:qty":function(){return"Entry quantities"},"navbar:dictionaries":function(){return"Dictionaries"},"navbar:sections":function(){return"Sections"},"navbar:areas":function(){return"Areas"},"navbar:categories":function(){return"Categories"},"navbar:causes":function(){return"Causes"},"navbar:risks":function(){return"Risks"},"navbar:help":function(){return"Pomoc"},"MSG:LOADING_FAILURE":function(){return"Failed to load entries :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the entry :("},"MSG:DELETED":function(t){return"Entry <em>"+e.v(t,"label")+"</em> was deleted."},"MSG:jump:404":function(t){return"Entry <em>"+e.v(t,"rid")+"</em> doesn't exist :("},"MSG:markAsSeen:failure":function(){return"Failed to mark the entry as read :("},"MSG:observe:failure":function(){return"Failed to subscribe to the entry :("},"MSG:unobserve:failure":function(){return"Failed to unsubscribe from the entry :("},"MSG:comment:failure":function(){return"Failed to comment the entry :("},"PAGE_ACTION:export":function(){return"Export entries"},"PAGE_ACTION:add":function(){return"Add entry"},"PAGE_ACTION:edit":function(){return"Edit entry"},"PAGE_ACTION:delete":function(){return"Delete entry"},"PAGE_ACTION:markAsSeen":function(){return"Mark as read"},"PAGE_ACTION:observe":function(){return"Subscribe"},"PAGE_ACTION:unobserve":function(){return"Unsubscribe"},"PAGE_ACTION:jump:title":function(){return"Jump to entry by ID"},"PAGE_ACTION:jump:placeholder":function(){return"Entry ID"},"PANEL:TITLE:details":function(){return"Entry details"},"PANEL:TITLE:changes":function(){return"Entry changes history"},"PANEL:TITLE:addForm":function(){return"Add entry form"},"PANEL:TITLE:editForm":function(){return"Edit entry form"},"LIST:owners":function(t){return e.v(t,"first")+" +"+e.p(t,"count",0,"en",{one:"1 other",other:e.v(t,"count")+" others"})},"PROPERTY:rid":function(){return"ID"},"PROPERTY:types":function(){return"Type"},"PROPERTY:subject":function(){return"Subject"},"PROPERTY:subjectAndDescription":function(){return"Subject/description"},"PROPERTY:eventDate":function(){return"Event time"},"PROPERTY:eventDate:short":function(){return"YY-MM-DD[, at ] H."},"PROPERTY:eventDate:long":function(){return"LL[, at. ] H."},"PROPERTY:area":function(){return"Area"},"PROPERTY:cause":function(){return"Cause category"},"PROPERTY:causeText":function(){return"Casue"},"PROPERTY:risk":function(){return"Risk"},"PROPERTY:category":function(){return"Category"},"PROPERTY:section":function(){return"Section"},"PROPERTY:nearMissCategory":function(){return"Near miss category"},"PROPERTY:suggestionCategory":function(){return"Suggestion category"},"PROPERTY:description":function(){return"Description (how it is)"},"PROPERTY:nearMissOwners":function(){return"Owners"},"PROPERTY:suggestionOwners":function(){return"Owners"},"PROPERTY:kaizenOwners":function(){return"Owners"},"PROPERTY:correctiveMeasures":function(){return"Corrective measures"},"PROPERTY:preventiveMeasures":function(){return"Preventive measures"},"PROPERTY:suggestion":function(){return"Suggestion (how it should be)"},"PROPERTY:kaizenStartDate":function(){return"Start date"},"PROPERTY:kaizenFinishDate":function(){return"Finish date"},"PROPERTY:kaizenDuration":function(){return"Duration"},"PROPERTY:kaizenImprovements":function(){return"Improvements"},"PROPERTY:kaizenEffect":function(){return"Effect"},"PROPERTY:status":function(){return"Status"},"PROPERTY:creator":function(){return"Created by"},"PROPERTY:updater":function(){return"Updated by"},"PROPERTY:confirmer":function(){return"Confirmed by"},"PROPERTY:createdAt":function(){return"Created at"},"PROPERTY:updatedAt":function(){return"Updated at"},"PROPERTY:confirmedAt":function(){return"Confirmed at"},"PROPERTY:attachments":function(){return"Attachments"},"PROPERTY:attachments:description":function(){return"Description"},"PROPERTY:attachments:file":function(){return"File name"},"PROPERTY:attachments:type":function(){return"File type"},"PROPERTY:comment":function(){return"Comment/opinion"},"PROPERTY:subscribers":function(){return"Subscribers"},"PROPERTY:observers:name":function(){return"Name"},"PROPERTY:observers:role":function(){return"Role"},"PROPERTY:observers:lastSeenAt":function(){return"Last seen at"},"type:nearMiss":function(){return"Near Miss"},"type:suggestion":function(){return"Suggestion"},"type:kaizen":function(){return"Kaizen"},"type:short:nearMiss":function(){return"NM"},"type:short:suggestion":function(){return"Suggestion"},"type:short:kaizen":function(){return"Kaizen"},"type:label:nearMiss":function(){return"NM"},"type:label:suggestion":function(){return"SUG"},"type:label:kaizen":function(){return"KZN"},"status:new":function(){return"New"},"status:accepted":function(){return"Accepted"},"status:todo":function(){return"To do"},"status:inProgress":function(){return"In progress"},"status:cancelled":function(){return"Cancelled"},"status:finished":function(){return"Finished"},"status:paused":function(){return"Paused"},"status:open":function(){return"Open"},"role:creator":function(){return"Creator"},"role:confirmer":function(){return"Confirmer"},"role:owner":function(){return"Owner"},"role:subscriber":function(){return"Subscriber"},"tab:attachments":function(){return"Attachments"},"tab:observers":function(){return"Participants"},"attachments:noData":function(){return"Entry doesn't have any attachments."},"attachments:actions:view":function(){return"Open the file"},"attachments:actions:download":function(){return"Download the file"},"attachments:scan":function(){return"Document scan"},"attachments:scan:current":function(){return"Current document scan"},"attachments:scan:new":function(){return"New document scan"},"attachments:before":function(){return"State before"},"attachments:before:current":function(){return"Current state before"},"attachments:before:new":function(){return"New state before"},"attachments:after":function(){return"State after"},"attachments:after:current":function(){return"Current state after"},"attachments:after:new":function(){return"New state after"},"FORM:ACTION:add":function(){return"Add entry"},"FORM:ACTION:edit":function(){return"Save"},"FORM:ERROR:addFailure":function(){return"Failed to add the entry :("},"FORM:ERROR:editFailure":function(){return"Failed to edit the entry :("},"FORM:ERROR:onlyKaizen":function(){return"Kaizen requires a Near Miss or a Suggestion!"},"FORM:ERROR:upload":function(){return"Failed to upload the attachments :("},"FORM:MSG:eventTime":function(){return"Hour"},"FORM:MSG:optional":function(){return"The fields below are optional. Leave them empty, if you don't know what to enter."},"FORM:MSG:chooseTypes":function(){return"Choose the entry types (NM, Suggestion, Kaizen) by clicking on the on the bars below. Entry can have any combination of types at the same time."},"FORM:MSG:attachmentEdit":function(){return"Choose new files only if you want to override the current files."},"FORM:help:subject":function(){return"Entry a short text..."},"FORM:help:section":function(){return"Choose your section..."},"FORM:help:confirmer":function(){return"Choose a superior of the chosen section..."},"FORM:help:correctiveMeasures":function(){return"What was done to remove consequences of this particular event."},"FORM:help:preventiveMeasures":function(){return"What was done to stop similar events occurring again in the future."},"FORM:help:subscribers":function(){return"You can select additional people, that weren't selected in the previous fields, but may be interesed in this entry or you want for them to express their opinion.<br>Those people will be added to a list of participants with an Observer role, and will be notified about changes in this entry."},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Entry deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete entry"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen entry?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> entry?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the entry :("},"filter:cause":function(){return"Cause"},"filter:user:mine":function(){return"Mine"},"filter:user:unseen":function(){return"Unread"},"filter:user:owner":function(){return"Owner"},"filter:user:others":function(){return"Participant"},"filter:submit":function(){return"Filter"},"history:added":function(){return"added the entry."},"history:observer:0":function(){return"subscribed to the entry."},"history:observer:1":function(){return"unsubscribe from the entry."},"history:editMessage":function(t){return"Here you can add a new comment. If you also want to change some properties, <a href='"+e.v(t,"editUrl")+"'>then use the edit form</a>."},"history:submit":function(){return"Comment"},"report:title:type":function(){return"Entry count by types"},"report:title:status":function(){return"Entry count by statuses"},"report:title:section":function(){return"Entry count by sections"},"report:title:area":function(){return"Entry count by areas"},"report:title:cause":function(){return"Entry count by causes"},"report:title:risk":function(){return"Entry count by risks"},"report:title:nearMissCategory":function(){return"Entry count by NM categories"},"report:title:suggestionCategory":function(){return"Entry count by Suggestion categories"},"report:series:singleTotal":function(){return"Total (w/o type repeats)"},"report:series:multiTotal":function(){return"Total (w/ type repeats)"},"report:series:nearMiss":function(){return"Near misses"},"report:series:suggestion":function(){return"Suggestions"},"report:series:kaizen":function(){return"Kaizens"},"report:series:new":function(){return"New"},"report:series:accepted":function(){return"Accepted"},"report:series:todo":function(){return"To do"},"report:series:inProgress":function(){return"In progress"},"report:series:cancelled":function(){return"Cancelled"},"report:series:finished":function(){return"Finished"},"report:series:paused":function(){return"Paused"},"report:filenames:type":function(){return"KAIZEN_CountByType"},"report:filenames:status":function(){return"KAIZEN_CountByStatus"},"report:filenames:section":function(){return"KAIZEN_CountBySection"},"report:filenames:area":function(){return"KAIZEN_CountByArea"},"report:filenames:cause":function(){return"KAIZEN_CountByCause"},"report:filenames:risk":function(){return"KAIZEN_CountByRisk"},"report:filenames:nearMissCategory":function(){return"KAIZEN_CountByNMCategory"},"report:filenames:suggestionCategory":function(){return"KAIZEN_CountBySUGCategory"},"thanks:message":function(){return"Thanks for the entry!"},"thanks:footnote":function(){return"(click any button or key to close this window)"}},pl:!0}}),define("app/nls/pl/kaizenOrders",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:base":function(){return"Usprawnienia"},"BREADCRUMBS:browse":function(){return"Zg≈Çoszenia"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"BREADCRUMBS:report":function(){return"Raport"},"navbar:kaizen":function(){return"Usprawnienia"},"navbar:orders":function(){return"Zg≈Çoszenia"},"navbar:all":function(){return"Wszystkie"},"navbar:open":function(){return"Tylko otwarte"},"navbar:mine":function(){return"Tylko moje"},"navbar:unseen":function(){return"Tylko nieprzeczytane"},"navbar:reports":function(){return"Raporty"},"navbar:reports:qty":function(){return"Ilo≈õƒá zg≈Çosze≈Ñ"},"navbar:dictionaries":function(){return"S≈Çowniki"},"navbar:sections":function(){return"Dzia≈Çy"},"navbar:areas":function(){return"Miejsca zdarze≈Ñ"},"navbar:categories":function(){return"Kategorie"},"navbar:causes":function(){return"Przyczyny"},"navbar:risks":function(){return"Rodzaje ryzyka"},"navbar:help":function(){return"Pomoc"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie zg≈Çosze≈Ñ nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie zg≈Çoszenia nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Zg≈Çoszenie <em>"+e.v(t,"label")+"</em> zosta≈Ço usuniƒôte."},"MSG:jump:404":function(t){return"Nie znaleziono zg≈Çoszenia o ID <em>"+e.v(t,"rid")+"</em> :("},"MSG:markAsSeen:failure":function(){return"Nie uda≈Ço siƒô oznaczyƒá zg≈Çoszenia jako przeczytane :("},"MSG:observe:failure":function(){return"Nie uda≈Ço siƒô rozpoczƒÖƒá obserwacji zg≈Çoszenia :("},"MSG:unobserve:failure":function(){return"Nie uda≈Ço siƒô zako≈Ñczyƒá obserwacji zg≈Çoszenia :("},"MSG:comment:failure":function(){return"Nie uda≈Ço siƒô skomentowaƒá zg≈Çoszenia :("},"PAGE_ACTION:export":function(){return"Eksportuj zg≈Çoszenia"},"PAGE_ACTION:add":function(){return"Dodaj zg≈Çoszenie"},"PAGE_ACTION:edit":function(){return"Edytuj zg≈Çoszenie"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ zg≈Çoszenie"},"PAGE_ACTION:markAsSeen":function(){return"Oznacz jako przeczytane"},"PAGE_ACTION:observe":function(){return"Obserwuj zg≈Çoszenie"},"PAGE_ACTION:unobserve":function(){return"Przesta≈Ñ obserwowaƒá"},"PAGE_ACTION:jump:title":function(){return"Skocz do zg≈Çoszenia po ID"},"PAGE_ACTION:jump:placeholder":function(){return"ID zg≈Çoszenia"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy zg≈Çoszenia"},"PANEL:TITLE:changes":function(){return"Historia zmian zg≈Çoszenia"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania zg≈Çoszenia"},"PANEL:TITLE:editForm":function(){return"Formularz edycji zg≈Çoszenia"},"LIST:owners":function(t){return e.v(t,"first")+" +"+e.p(t,"count",0,"pl",{one:"1 inna",other:e.v(t,"count")+" inne"})},"PROPERTY:rid":function(){return"ID"},"PROPERTY:types":function(){return"Rodzaj"},"PROPERTY:subject":function(){return"Temat zg≈Çoszenia"},"PROPERTY:subjectAndDescription":function(){return"Temat/opis zg≈Çoszenia"},"PROPERTY:eventDate":function(){return"Czas zdarzenia"},"PROPERTY:eventDate:short":function(){return"YY-MM-DD[, godz. ] H."},"PROPERTY:eventDate:long":function(){return"LL[, godz. ] H."},"PROPERTY:area":function(){return"Miejsce zdarzenia"},"PROPERTY:cause":function(){return"Kategoria przyczyny"},"PROPERTY:causeText":function(){return"Przyczyna wystƒÖpienia zdarzenia"},"PROPERTY:risk":function(){return"Rodzaj ryzyka"},"PROPERTY:category":function(){return"Kategoria"},"PROPERTY:section":function(){return"Dzia≈Ç zg≈ÇaszajƒÖcy"},"PROPERTY:nearMissCategory":function(){return"Kategoria zdarzenia"},"PROPERTY:suggestionCategory":function(){return"Kategoria sugestii"},"PROPERTY:description":function(){return"Opis zdarzenia (jak jest)"},"PROPERTY:nearMissOwners":function(){return"Osoby zg≈ÇaszajƒÖce"},"PROPERTY:suggestionOwners":function(){return"Osoby sugerujƒÖce"},"PROPERTY:kaizenOwners":function(){return"Osoby realizujƒÖce"},"PROPERTY:correctiveMeasures":function(){return"Podjƒôte dzia≈Çania korekcyjne (gaszenie po≈ºaru)"},"PROPERTY:preventiveMeasures":function(){return"Podjƒôte dzia≈Çania korygujƒÖce"},"PROPERTY:suggestion":function(){return"Propozycja dzia≈Ça≈Ñ korygujƒÖcych (jak ma byƒá)"},"PROPERTY:kaizenStartDate":function(){return"Data rozpoczƒôcia realizacji"},"PROPERTY:kaizenFinishDate":function(){return"Data zako≈Ñczenia realizacji"},"PROPERTY:kaizenDuration":function(){return"Czas realizacji"},"PROPERTY:kaizenImprovements":function(){return"Wdro≈ºone usprawnienia"},"PROPERTY:kaizenEffect":function(){return"Efekt usprawnie≈Ñ"},"PROPERTY:status":function(){return"Status"},"PROPERTY:creator":function(){return"Stworzone przez"},"PROPERTY:updater":function(){return"Ostatnio zmienione przez"},"PROPERTY:confirmer":function(){return"Osoba zatwierdzajƒÖca"},"PROPERTY:createdAt":function(){return"Czas stworzenia"},"PROPERTY:updatedAt":function(){return"Czas ostatniej zmiany"},"PROPERTY:confirmedAt":function(){return"Czas potwierdzenia"},"PROPERTY:attachments":function(){return"Za≈ÇƒÖczniki"},"PROPERTY:attachments:description":function(){return"Opis"},"PROPERTY:attachments:file":function(){return"Nazwa pliku"},"PROPERTY:attachments:type":function(){return"Typ pliku"},"PROPERTY:comment":function(){return"Komentarz/opinia"},"PROPERTY:subscribers":function(){return"Obserwatorzy zg≈Çoszenia"},"PROPERTY:observers:name":function(){return"Imiƒô i nazwisko"},"PROPERTY:observers:role":function(){return"Rola"},"PROPERTY:observers:lastSeenAt":function(){return"Ostatnio widziany"},"type:nearMiss":function(){return"Zdarzenie Potencjalnie Wypadkowe"},"type:suggestion":function(){return"Sugestia"},"type:kaizen":function(){return"Kaizen"},"type:short:nearMiss":function(){return"ZPW"},"type:short:suggestion":function(){return"Sugestia"},"type:short:kaizen":function(){return"Kaizen"},"type:label:nearMiss":function(){return"ZPW"},"type:label:suggestion":function(){return"SUG"},"type:label:kaizen":function(){return"KZN"},"status:new":function(){return"Nowe"},"status:accepted":function(){return"Zaakceptowane"},"status:todo":function(){return"Do realizacji"},"status:inProgress":function(){return"W realizacji"},"status:cancelled":function(){return"Anulowane"},"status:finished":function(){return"Zako≈Ñczone"},"status:paused":function(){return"Wstrzymane"},"status:open":function(){return"Otwarte"},"role:creator":function(){return"Zg≈ÇaszajƒÖcy"},"role:confirmer":function(){return"ZatwierdzajƒÖcy"},"role:owner":function(){return"W≈Ça≈õciciel"},"role:subscriber":function(){return"Obserwator"},"tab:attachments":function(){return"Za≈ÇƒÖczniki zg≈Çoszenia"},"tab:observers":function(){return"Uczestnicy zg≈Çoszenia"},"attachments:noData":function(){return"Zg≈Çoszenie nie ma ≈ºadnych za≈ÇƒÖcznik√≥w."},"attachments:actions:view":function(){return"Otw√≥rz plik"},"attachments:actions:download":function(){return"Pobierz plik"},"attachments:scan":function(){return"Skan dokumentu"},"attachments:scan:current":function(){return"Aktualny skan dokumentu"},"attachments:scan:new":function(){return"Nowy skan dokumentu"},"attachments:before":function(){return"Stan przed"},"attachments:before:current":function(){return"Aktualny skan przed"},"attachments:before:new":function(){return"Nowy stan przed"},"attachments:after":function(){return"Stan po"},"attachments:after:current":function(){return"Aktualny stan po"},"attachments:after:new":function(){return"Nowy stan po"},"FORM:ACTION:add":function(){return"Dodaj zg≈Çoszenie"},"FORM:ACTION:edit":function(){return"Zapisz"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá zg≈Çoszenia :("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá zg≈Çoszenia :("},"FORM:ERROR:onlyKaizen":function(){return"Kaizen wymaga ZPW lub Sugestii!"},"FORM:ERROR:upload":function(){return"Nie uda≈Ço siƒô za≈Çadowaƒá za≈ÇƒÖcznik√≥w :("},"FORM:MSG:eventTime":function(){return"Godzina"},"FORM:MSG:optional":function(){return"Poni≈ºsze pola sƒÖ opcjonalne. Pozostaw je puste, je≈ºeli nie wiesz co w nich wpisaƒá."},"FORM:MSG:chooseTypes":function(){return"Wybierz typy zg≈Çoszenia (ZPW, Sugestia, Kaizen) klikajƒÖc na poni≈ºsze belki. Zg≈Çoszenie mo≈ºe mieƒá w tym samym czasie dowolnƒÖ kombinacjƒô typ√≥w."},"FORM:MSG:attachmentEdit":function(){return"Wybierz nowe pliki tylko wtedy, gdy chcesz nadpisaƒá ju≈º istniejƒÖce pliki."},"FORM:help:subject":function(){return"Wpisz kr√≥tki tekst..."},"FORM:help:section":function(){return"Wybierz sw√≥j dzia≈Ç..."},"FORM:help:confirmer":function(){return"Wybierz nazwisko prze≈Ço≈ºonego, w kt√≥rego obszarze odpowiedzialno≈õci stwierdzono zdarzenie..."},"FORM:help:correctiveMeasures":function(){return"Co zrobiono, aby usunƒÖƒá <strong>skutek</strong> wystƒÖpienia tego konkretnego zdarzenia."},"FORM:help:preventiveMeasures":function(){return"Co zrobiono, aby usunƒÖƒá <strong>przyczynƒô</strong> wystƒôpowania podobnych zdarze≈Ñ."
},"FORM:help:subscribers":function(){return"W tym polu mo≈ºesz wybraƒá dodatkowe osoby, kt√≥re nie zosta≈Çy wskazane we wcze≈õniejszych polach, a mogƒÖ byƒá zainteresowane tym zg≈Çoszeniem lub chcesz, aby wyrazi≈Çy swojƒÖ opiniƒô.<br>Osoby te zostanƒÖ dodane do listy uczestnik√≥w zg≈Çoszenia z rolƒÖ Obserwatora, dziƒôki czemu bƒôdƒÖ powiadamiani o zmianach w tym zg≈Çoszeniu."},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia zg≈Çoszenia"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ zg≈Çoszenie"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrane zg≈Çoszenie?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá zg≈Çoszenie <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá zg≈Çoszenia :("},"filter:cause":function(){return"Przyczyna"},"filter:user:mine":function(){return"Moje"},"filter:user:unseen":function(){return"Nieprzeczytane"},"filter:user:owner":function(){return"Zg≈ÇaszajƒÖcy"},"filter:user:others":function(){return"Uczestnik"},"filter:submit":function(){return"Filtruj"},"history:added":function(){return"utworzenie zg≈Çoszenia."},"history:observer:0":function(){return"rozpoczƒôcie obserwacji zg≈Çoszenia."},"history:observer:1":function(){return"zako≈Ñczenie obserwacji zg≈Çoszenia."},"history:editMessage":function(t){return"Tutaj mo≈ºesz dodaƒá komentarz do zg≈Çoszenia. Je≈ºeli chcesz tak≈ºe zmieniƒá jakie≈õ w≈Ça≈õciwo≈õci, <a href='"+e.v(t,"editUrl")+"'>to skorzystaj z formularza edycji</a>."},"history:submit":function(){return"Komentuj"},"report:title:type":function(){return"Ilo≈õƒá zg≈Çosze≈Ñ wg typ√≥w"},"report:title:status":function(){return"Ilo≈õƒá zg≈Çosze≈Ñ wg status√≥w"},"report:title:section":function(){return"Ilo≈õƒá zg≈Çosze≈Ñ wg dzia≈Ç√≥w"},"report:title:area":function(){return"Ilo≈õƒá zg≈Çosze≈Ñ wg miejsc zdarze≈Ñ"},"report:title:cause":function(){return"Ilo≈õƒá zg≈Çosze≈Ñ wg przyczyn"},"report:title:risk":function(){return"Ilo≈õƒá zg≈Çosze≈Ñ wg rodzaj√≥w ryzyka"},"report:title:nearMissCategory":function(){return"Ilo≈õƒá zg≈Çosze≈Ñ wg kategorii ZPW"},"report:title:suggestionCategory":function(){return"Ilo≈õƒá zg≈Çosze≈Ñ wg kategorii sugestii"},"report:series:singleTotal":function(){return"Suma (bez powt√≥rze≈Ñ typ√≥w)"},"report:series:multiTotal":function(){return"Suma (z powt√≥rzeniami typ√≥w)"},"report:series:nearMiss":function(){return"ZPW"},"report:series:suggestion":function(){return"Sugestie"},"report:series:kaizen":function(){return"Kaizeny"},"report:series:new":function(){return"Nowe"},"report:series:accepted":function(){return"Zaakceptowane"},"report:series:todo":function(){return"Do realizacji"},"report:series:inProgress":function(){return"W realizacji"},"report:series:cancelled":function(){return"Anulowane"},"report:series:finished":function(){return"Zako≈Ñczone"},"report:series:paused":function(){return"Wstrzymane"},"report:filenames:type":function(){return"KAIZEN_IloscWgTypow"},"report:filenames:status":function(){return"KAIZEN_IloscWgStatusow"},"report:filenames:section":function(){return"KAIZEN_IloscWgDzialow"},"report:filenames:area":function(){return"KAIZEN_IloscWgMiejsc"},"report:filenames:cause":function(){return"KAIZEN_IloscWgPrzyczyn"},"report:filenames:risk":function(){return"KAIZEN_IloscWgRyzyka"},"report:filenames:nearMissCategory":function(){return"KAIZEN_IloscWgKatZPW"},"report:filenames:suggestionCategory":function(){return"KAIZEN_IloscWgKatSug"},"thanks:message":function(){return"Dziƒôkujemy za zg≈Çoszenie!"},"thanks:footnote":function(){return"(kliknij dowolny przycisk lub wci≈õnij dowolny klawisz, aby zamknƒÖƒá ten komunikat)"}}}),define("app/kaizenOrders/routes",["underscore","../router","../viewport","../user","../core/util/showDeleteFormPage","./KaizenOrderCollection","./KaizenOrder","./KaizenOrderReport","./pages/KaizenOrderListPage","./pages/KaizenOrderDetailsPage","./pages/KaizenOrderAddFormPage","./pages/KaizenOrderEditFormPage","./pages/KaizenOrderReportPage","./views/KaizenOrderThankYouView","i18n!app/nls/reports","i18n!app/nls/kaizenOrders"],function(t,e,n,r,i,o,s,a,u,c,l,p,d,h){"use strict";var f=r.auth();e.map("/kaizenReport",f,function(t){n.showPage(new d({model:new a({from:+t.query.from||void 0,to:+t.query.to||void 0,interval:t.query.interval})}))}),e.map("/kaizenHelp",function(){n.loadPage(["app/core/View","app/kaizenOrders/templates/help"],function(t,e){return new t({layoutName:"page",template:e})})}),e.map("/kaizenOrders",f,function(t){n.showPage(new u({collection:new o(null,{rqlQuery:t.rql})}))}),e.map("/kaizenOrders/:id",f,function(t){var e=new c({model:new s({_id:t.params.id})});n.showPage(e),"you"===t.query.thank&&e.once("afterRender",function(){e.broker.publish("router.navigate",{url:"/kaizenOrders/"+e.model.id,trigger:!1,replace:!0}),n.showDialog(new h)})}),e.map("/kaizenOrders;add",f,function(){n.showPage(new l({model:new s}))}),e.map("/kaizenOrders/:id;edit",f,function(t){n.showPage(new p({model:new s({_id:t.params.id})}))}),e.map("/kaizenOrders/:id;delete",f,t.partial(i,s,t,t,{baseBreadcrumb:!0}))}),define("app/kaizenSections/templates/form",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form method="post" action="'),__output.push(formAction),__output.push('">\n  <input type="hidden" name="_method" value="'),__output.push(formMethod),__output.push('">\n  <div class="panel panel-primary">\n    <div class="panel-heading">'),__output.push(panelTitleText),__output.push('</div>\n    <div class="panel-body">\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-id" class="control-label">'),__output.push(t("kaizenSections","PROPERTY:_id")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-id" class="form-control" type="text" name="_id" autofocus required maxlength="20" pattern="^[A-Za-z0-9-]+$">\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-name" class="control-label">'),__output.push(t("kaizenSections","PROPERTY:name")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-name" class="form-control" type="text" name="name" required maxlength="100">\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-position" class="control-label is-required">'),__output.push(t("kaizenSections","PROPERTY:position")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-position" class="form-control" type="number" name="position" min="0" required>\n      </div>\n    </div>\n    <div class="panel-footer">\n      <button type="submit" class="btn btn-primary">'),__output.push(formActionText),__output.push("</button>\n    </div>\n  </div>\n</form>\n");return __output.join("")}}),define("app/kaizenSections/views/KaizenSectionFormView",["app/core/views/FormView","app/kaizenSections/templates/form"],function(t,e){"use strict";return t.extend({template:e,afterRender:function(){t.prototype.afterRender.call(this),this.options.editMode&&(this.$id("id").prop("readonly",!0),this.$id("name").focus())}})}),define("app/kaizenSections/templates/details",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="panel panel-primary">\n  <div class="panel-heading">'),__output.push(t("kaizenSections","PANEL:TITLE:details")),__output.push('</div>\n  <div class="panel-details">\n    <div class="props first">\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("kaizenSections","PROPERTY:_id")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model._id)),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("kaizenSections","PROPERTY:name")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model.name)),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("kaizenSections","PROPERTY:position")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model.position||"0")),__output.push("</div>\n      </div>\n    </div>\n  </div>\n</div>\n");return __output.join("")}}),define("app/nls/kaizenSections",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:base":function(){return"Improvements"},"BREADCRUMBS:browse":function(){return"Sections"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the sections :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the section :("},"MSG:DELETED":function(t){return"Section <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add section"},"PAGE_ACTION:edit":function(){return"Edit section"},"PAGE_ACTION:delete":function(){return"Delete section"},"PANEL:TITLE:details":function(){return"Section's details"},"PANEL:TITLE:addForm":function(){return"Add section form"},"PANEL:TITLE:editForm":function(){return"Edit section form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:name":function(){return"Name"},"PROPERTY:position":function(){return"Position"},"FORM:ACTION:add":function(){return"Add section"},"FORM:ACTION:edit":function(){return"Edit section"},"FORM:ERROR:addFailure":function(){return"Failed to add the new section :("},"FORM:ERROR:editFailure":function(){return"Failed to edit the section :("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Section deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete section"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen section?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> section?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the section :-("}},pl:!0}}),define("app/nls/pl/kaizenSections",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:base":function(){return"Usprawnienia"},"BREADCRUMBS:browse":function(){return"Dzia≈Çy"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie dzia≈Ç√≥w nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie dzia≈Çu nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Dzia≈Ç <em>"+e.v(t,"label")+"</em> zosta≈Ç usuniƒôty."},"PAGE_ACTION:add":function(){return"Dodaj dzia≈Ç"},"PAGE_ACTION:edit":function(){return"Edytuj dzia≈Ç"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ dzia≈Ç"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy dzia≈Çu"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania dzia≈Çu"},"PANEL:TITLE:editForm":function(){return"Formularz edycji dzia≈Çu"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:name":function(){return"Nazwa"},"PROPERTY:position":function(){return"Pozycja"},"FORM:ACTION:add":function(){return"Dodaj dzia≈Ç"},"FORM:ACTION:edit":function(){return"Edytuj dzia≈Ç"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá dzia≈Çu :("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá dzia≈Çu :("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia dzia≈Çu"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ dzia≈Ç"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany dzia≈Ç?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá dzia≈Ç <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá dzia≈Çu :("}}}),define("app/kaizenSections/routes",["underscore","../router","../viewport","../user","../core/util/showDeleteFormPage","./KaizenSectionCollection","./KaizenSection","../core/pages/ListPage","../core/pages/DetailsPage","../core/pages/AddFormPage","../core/pages/EditFormPage","../core/pages/ActionFormPage","./views/KaizenSectionFormView","app/kaizenSections/templates/details","i18n!app/nls/kaizenSections"],function(t,e,n,r,i,o,s,a,u,c,l,p,d,h){"use strict";var f=r.auth("KAIZEN:DICTIONARIES:VIEW"),m=r.auth("KAIZEN:DICTIONARIES:MANAGE");e.map("/kaizenSections",f,function(t){n.showPage(new a({baseBreadcrumb:!0,collection:new o(null,{rqlQuery:t.rql}),columns:[{id:"_id",className:"is-min"},"name",{id:"position",className:"is-min"}]}))}),e.map("/kaizenSections/:id",f,function(t){n.showPage(new u({baseBreadcrumb:!0,model:new s({_id:t.params.id}),detailsTemplate:h}))}),e.map("/kaizenSections;add",m,function(){n.showPage(new c({baseBreadcrumb:!0,FormView:d,model:new s}))}),e.map("/kaizenSections/:id;edit",m,function(t){n.showPage(new l({baseBreadcrumb:!0,FormView:d,model:new s({_id:t.params.id})}))}),e.map("/kaizenSections/:id;delete",m,t.partial(i,s,t,t,{baseBreadcrumb:!0}))}),define("app/kaizenAreas/templates/form",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form method="post" action="'),__output.push(formAction),__output.push('">\n  <input type="hidden" name="_method" value="'),__output.push(formMethod),__output.push('">\n  <div class="panel panel-primary">\n    <div class="panel-heading">'),__output.push(panelTitleText),__output.push('</div>\n    <div class="panel-body">\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-id" class="control-label">'),__output.push(t("kaizenAreas","PROPERTY:_id")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-id" class="form-control" type="text" name="_id" autofocus required maxlength="20" pattern="^[A-Za-z0-9-]+$">\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-name" class="control-label">'),__output.push(t("kaizenAreas","PROPERTY:name")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-name" class="form-control" type="text" name="name" required maxlength="100">\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-position" class="control-label is-required">'),__output.push(t("kaizenAreas","PROPERTY:position")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-position" class="form-control" type="number" name="position" min="0" required>\n      </div>\n    </div>\n    <div class="panel-footer">\n      <button type="submit" class="btn btn-primary">'),__output.push(formActionText),__output.push("</button>\n    </div>\n  </div>\n</form>\n");return __output.join("")}}),define("app/kaizenAreas/views/KaizenAreaFormView",["app/core/views/FormView","app/kaizenAreas/templates/form"],function(t,e){"use strict";return t.extend({template:e,afterRender:function(){t.prototype.afterRender.call(this),this.options.editMode&&(this.$id("id").prop("readonly",!0),this.$id("name").focus())}})}),define("app/kaizenAreas/templates/details",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="panel panel-primary">\n  <div class="panel-heading">'),__output.push(t("kaizenAreas","PANEL:TITLE:details")),__output.push('</div>\n  <div class="panel-details">\n    <div class="props first">\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("kaizenAreas","PROPERTY:_id")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model._id)),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("kaizenAreas","PROPERTY:name")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model.name)),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("kaizenAreas","PROPERTY:position")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model.position||"0")),__output.push("</div>\n      </div>\n    </div>\n  </div>\n</div>\n");return __output.join("")}}),define("app/nls/kaizenAreas",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:base":function(){return"Improvements"},"BREADCRUMBS:browse":function(){return"Areas"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the areas :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the area :("},"MSG:DELETED":function(t){return"Area <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add area"},"PAGE_ACTION:edit":function(){return"Edit area"},"PAGE_ACTION:delete":function(){return"Delete area"},"PANEL:TITLE:details":function(){return"Area's details"},"PANEL:TITLE:addForm":function(){return"Add area form"},"PANEL:TITLE:editForm":function(){return"Edit area form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:name":function(){return"Name"},"PROPERTY:position":function(){return"Position"},"FORM:ACTION:add":function(){return"Add area"},"FORM:ACTION:edit":function(){return"Edit area"},"FORM:ERROR:addFailure":function(){return"Failed to add the new area :("},"FORM:ERROR:editFailure":function(){return"Failed to edit the area :("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Area deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete area"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen area?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> area?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the area :-("}},pl:!0}}),define("app/nls/pl/kaizenAreas",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:base":function(){return"Usprawnienia"},"BREADCRUMBS:browse":function(){return"Miejsca zdarze≈Ñ"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie miejsc zdarze≈Ñ nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie miejsca zdarze≈Ñ nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Miejsce zdarze≈Ñ <em>"+e.v(t,"label")+"</em> zosta≈Ç usuniƒôty."},"PAGE_ACTION:add":function(){return"Dodaj miejsce zdarze≈Ñ"},"PAGE_ACTION:edit":function(){return"Edytuj miejsce zdarze≈Ñ"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ miejsce zdarze≈Ñ"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy miejsca zdarze≈Ñ"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania miejsca zdarze≈Ñ"},"PANEL:TITLE:editForm":function(){return"Formularz edycji miejsca zdarze≈Ñ"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:name":function(){return"Nazwa"},"PROPERTY:position":function(){return"Pozycja"},"FORM:ACTION:add":function(){return"Dodaj miejsce zdarze≈Ñ"},"FORM:ACTION:edit":function(){return"Edytuj miejsce zdarze≈Ñ"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá miejsca zdarze≈Ñ :("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá miejsca zdarze≈Ñ :("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia miejsca zdarze≈Ñ"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ miejsce zdarze≈Ñ"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrane miejsce zdarze≈Ñ?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá miejsce zdarze≈Ñ <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá miejsca zdarze≈Ñ :("}}}),define("app/kaizenAreas/routes",["underscore","../router","../viewport","../user","../core/util/showDeleteFormPage","./KaizenAreaCollection","./KaizenArea","../core/pages/ListPage","../core/pages/DetailsPage","../core/pages/AddFormPage","../core/pages/EditFormPage","../core/pages/ActionFormPage","./views/KaizenAreaFormView","app/kaizenAreas/templates/details","i18n!app/nls/kaizenAreas"],function(t,e,n,r,i,o,s,a,u,c,l,p,d,h){"use strict";var f=r.auth("KAIZEN:DICTIONARIES:VIEW"),m=r.auth("KAIZEN:DICTIONARIES:MANAGE");e.map("/kaizenAreas",f,function(t){n.showPage(new a({baseBreadcrumb:!0,collection:new o(null,{rqlQuery:t.rql}),columns:[{id:"_id",className:"is-min"},"name",{id:"position",className:"is-min"}]}))}),e.map("/kaizenAreas/:id",f,function(t){n.showPage(new u({baseBreadcrumb:!0,model:new s({_id:t.params.id}),detailsTemplate:h}))}),e.map("/kaizenAreas;add",m,function(){n.showPage(new c({baseBreadcrumb:!0,FormView:d,model:new s}))}),e.map("/kaizenAreas/:id;edit",m,function(t){n.showPage(new l({baseBreadcrumb:!0,FormView:d,model:new s({_id:t.params.id})}))}),e.map("/kaizenAreas/:id;delete",m,t.partial(i,s,t,t,{baseBreadcrumb:!0}))}),define("app/kaizenCategories/templates/form",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form method="post" action="'),__output.push(formAction),__output.push('">\n  <input type="hidden" name="_method" value="'),__output.push(formMethod),__output.push('">\n  <div class="panel panel-primary">\n    <div class="panel-heading">'),__output.push(panelTitleText),__output.push('</div>\n    <div class="panel-body">\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-id" class="control-label">'),__output.push(t("kaizenCategories","PROPERTY:_id")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-id" class="form-control" type="text" name="_id" autofocus required maxlength="20" pattern="^[A-Za-z0-9-]+$">\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-name" class="control-label">'),__output.push(t("kaizenCategories","PROPERTY:name")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-name" class="form-control" type="text" name="name" required maxlength="100">\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-description" class="control-label">'),__output.push(t("kaizenCategories","PROPERTY:description")),__output.push('</label>\n        <textarea id="'),__output.push(idPrefix),__output.push('-description" class="form-control" name="description" rows="4"></textarea>\n      </div>\n      <div class="checkbox">\n        <label class="control-label">\n          <input type="checkbox" name="inNearMiss">\n          '),__output.push(t("kaizenCategories","PROPERTY:inNearMiss")),__output.push('\n        </label>\n      </div>\n      <div class="checkbox">\n        <label class="control-label">\n          <input type="checkbox" name="inSuggestion">\n          '),__output.push(t("kaizenCategories","PROPERTY:inSuggestion")),__output.push('\n        </label>\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-position" class="control-label is-required">'),__output.push(t("kaizenCauses","PROPERTY:position")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-position" class="form-control" type="number" name="position" min="0" required>\n      </div>\n    </div>\n    <div class="panel-footer">\n      <button type="submit" class="btn btn-primary">'),__output.push(formActionText),__output.push("</button>\n    </div>\n  </div>\n</form>\n");return __output.join("")}}),define("app/kaizenCategories/views/KaizenCategoryFormView",["app/core/views/FormView","app/kaizenCategories/templates/form"],function(t,e){"use strict";return t.extend({template:e,afterRender:function(){t.prototype.afterRender.call(this),this.options.editMode&&(this.$id("id").prop("readonly",!0),this.$id("name").focus())},serializeForm:function(t){return t.description||(t.description=""),t.inNearMiss=!!t.inNearMiss,t.inSuggestion=!!t.inSuggestion,t}})}),define("app/kaizenCategories/templates/details",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="panel panel-primary">\n  <div class="panel-heading">'),__output.push(t("kaizenCategories","PANEL:TITLE:details")),__output.push('</div>\n  <div class="panel-details">\n    <div class="props first">\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("kaizenCategories","PROPERTY:_id")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model._id)),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("kaizenCategories","PROPERTY:name")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model.name)),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("kaizenCategories","PROPERTY:description")),__output.push('</div>\n        <div class="prop-value text-lines">'),__output.push(escape(model.description)),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("kaizenCategories","PROPERTY:inNearMiss")),__output.push('</div>\n        <div class="prop-value">'),__output.push(model.inNearMiss),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("kaizenCategories","PROPERTY:inSuggestion")),__output.push('</div>\n        <div class="prop-value">'),__output.push(model.inSuggestion),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("kaizenCauses","PROPERTY:position")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model.position||"0")),__output.push("</div>\n      </div>\n    </div>\n  </div>\n</div>\n");return __output.join("")}}),define("app/nls/kaizenCategories",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:base":function(){return"Improvements"},"BREADCRUMBS:browse":function(){return"Categories"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the categories :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the category :("},"MSG:DELETED":function(t){return"Category <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add category"},"PAGE_ACTION:edit":function(){return"Edit category"},"PAGE_ACTION:delete":function(){return"Delete category"},"PANEL:TITLE:details":function(){return"Category's details"},"PANEL:TITLE:addForm":function(){return"Add category form"},"PANEL:TITLE:editForm":function(){return"Edit category form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:name":function(){return"Name"},"PROPERTY:description":function(){return"Description"},"PROPERTY:inNearMiss":function(){return"In near misses?"},"PROPERTY:inSuggestion":function(){return"In suggestions?"},"PROPERTY:position":function(){return"Position"},"FORM:ACTION:add":function(){return"Add category"},"FORM:ACTION:edit":function(){return"Edit category"},"FORM:ERROR:addFailure":function(){return"Failed to add the new category :("},"FORM:ERROR:editFailure":function(){return"Failed to edit the category :("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Category deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete category"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen category?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> category?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the category :-("
}},pl:!0}}),define("app/nls/pl/kaizenCategories",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:base":function(){return"Usprawnienia"},"BREADCRUMBS:browse":function(){return"Kategorie"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie kategorii nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie kategorii nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Kategoria <em>"+e.v(t,"label")+"</em> zosta≈Ça usuniƒôta."},"PAGE_ACTION:add":function(){return"Dodaj kategoriƒô"},"PAGE_ACTION:edit":function(){return"Edytuj kategoriƒô"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ kategoriƒô"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy kategorii"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania kategorii"},"PANEL:TITLE:editForm":function(){return"Formularz edycji kategorii"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:name":function(){return"Nazwa"},"PROPERTY:description":function(){return"Opis"},"PROPERTY:inNearMiss":function(){return"W zdarzeniach potencjalnie wypadkowych?"},"PROPERTY:inSuggestion":function(){return"W sugestiach?"},"PROPERTY:position":function(){return"Pozycja"},"FORM:ACTION:add":function(){return"Dodaj kategoriƒô"},"FORM:ACTION:edit":function(){return"Edytuj kategoriƒô"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá kategorii :("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá kategorii :("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia kategorii"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ kategoriƒô"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybranƒÖ kategoriƒô?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá kategoriƒô <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá kategorii :("}}}),define("app/kaizenCategories/routes",["underscore","../router","../viewport","../user","../core/util/showDeleteFormPage","./KaizenCategoryCollection","./KaizenCategory","../core/pages/ListPage","../core/pages/DetailsPage","../core/pages/AddFormPage","../core/pages/EditFormPage","../core/pages/ActionFormPage","./views/KaizenCategoryFormView","app/kaizenCategories/templates/details","i18n!app/nls/kaizenCategories"],function(t,e,n,r,i,o,s,a,u,c,l,p,d,h){"use strict";var f=r.auth("KAIZEN:DICTIONARIES:VIEW"),m=r.auth("KAIZEN:DICTIONARIES:MANAGE");e.map("/kaizenCategories",f,function(t){n.showPage(new a({baseBreadcrumb:!0,collection:new o(null,{rqlQuery:t.rql}),columns:[{id:"_id",className:"is-min"},"name",{id:"inNearMiss",className:"is-min"},{id:"inSuggestion",className:"is-min"},{id:"position",className:"is-min"}]}))}),e.map("/kaizenCategories/:id",f,function(t){n.showPage(new u({baseBreadcrumb:!0,model:new s({_id:t.params.id}),detailsTemplate:h}))}),e.map("/kaizenCategories;add",m,function(){n.showPage(new c({baseBreadcrumb:!0,FormView:d,model:new s}))}),e.map("/kaizenCategories/:id;edit",m,function(t){n.showPage(new l({baseBreadcrumb:!0,FormView:d,model:new s({_id:t.params.id})}))}),e.map("/kaizenCategories/:id;delete",m,t.partial(i,s,t,t,{baseBreadcrumb:!0}))}),define("app/kaizenCauses/templates/form",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form method="post" action="'),__output.push(formAction),__output.push('">\n  <input type="hidden" name="_method" value="'),__output.push(formMethod),__output.push('">\n  <div class="panel panel-primary">\n    <div class="panel-heading">'),__output.push(panelTitleText),__output.push('</div>\n    <div class="panel-body">\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-id" class="control-label">'),__output.push(t("kaizenCauses","PROPERTY:_id")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-id" class="form-control" type="text" name="_id" autofocus required maxlength="20" pattern="^[A-Za-z0-9-]+$">\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-name" class="control-label">'),__output.push(t("kaizenCauses","PROPERTY:name")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-name" class="form-control" type="text" name="name" required maxlength="100">\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-description" class="control-label">'),__output.push(t("kaizenCauses","PROPERTY:description")),__output.push('</label>\n        <textarea id="'),__output.push(idPrefix),__output.push('-description" class="form-control" name="description" rows="4"></textarea>\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-position" class="control-label is-required">'),__output.push(t("kaizenCauses","PROPERTY:position")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-position" class="form-control" type="number" name="position" min="0" required>\n      </div>\n    </div>\n    <div class="panel-footer">\n      <button type="submit" class="btn btn-primary">'),__output.push(formActionText),__output.push("</button>\n    </div>\n  </div>\n</form>\n");return __output.join("")}}),define("app/kaizenCauses/views/KaizenCauseFormView",["app/core/views/FormView","app/kaizenCauses/templates/form"],function(t,e){"use strict";return t.extend({template:e,afterRender:function(){t.prototype.afterRender.call(this),this.options.editMode&&(this.$id("id").prop("readonly",!0),this.$id("name").focus())},serializeForm:function(t){return t.description||(t.description=""),t}})}),define("app/kaizenCauses/templates/details",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="panel panel-primary">\n  <div class="panel-heading">'),__output.push(t("kaizenCauses","PANEL:TITLE:details")),__output.push('</div>\n  <div class="panel-details">\n    <div class="props first">\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("kaizenCauses","PROPERTY:_id")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model._id)),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("kaizenCauses","PROPERTY:name")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model.name)),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("kaizenCauses","PROPERTY:description")),__output.push('</div>\n        <div class="prop-value text-lines">'),__output.push(escape(model.description)),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("kaizenCauses","PROPERTY:position")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model.position||"0")),__output.push("</div>\n      </div>\n    </div>\n  </div>\n</div>\n");return __output.join("")}}),define("app/nls/kaizenCauses",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:base":function(){return"Improvements"},"BREADCRUMBS:browse":function(){return"Causes"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the causes :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the cause :("},"MSG:DELETED":function(t){return"Cause <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add cause"},"PAGE_ACTION:edit":function(){return"Edit cause"},"PAGE_ACTION:delete":function(){return"Delete cause"},"PANEL:TITLE:details":function(){return"Cause's details"},"PANEL:TITLE:addForm":function(){return"Add cause form"},"PANEL:TITLE:editForm":function(){return"Edit cause form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:name":function(){return"Name"},"PROPERTY:description":function(){return"Description"},"PROPERTY:position":function(){return"Position"},"FORM:ACTION:add":function(){return"Add cause"},"FORM:ACTION:edit":function(){return"Edit cause"},"FORM:ERROR:addFailure":function(){return"Failed to add the new cause :("},"FORM:ERROR:editFailure":function(){return"Failed to edit the cause :("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Cause deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete cause"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen cause?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> cause?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the cause :-("}},pl:!0}}),define("app/nls/pl/kaizenCauses",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:base":function(){return"Usprawnienia"},"BREADCRUMBS:browse":function(){return"Przyczyny"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie przyczyn nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie przyczyny nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Przyczyna <em>"+e.v(t,"label")+"</em> zosta≈Ça usuniƒôty."},"PAGE_ACTION:add":function(){return"Dodaj przyczynƒô"},"PAGE_ACTION:edit":function(){return"Edytuj przyczynƒô"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ przyczynƒô"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy przyczyny"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania przyczyny"},"PANEL:TITLE:editForm":function(){return"Formularz edycji przyczyny"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:name":function(){return"Nazwa"},"PROPERTY:description":function(){return"Opis"},"PROPERTY:position":function(){return"Pozycja"},"FORM:ACTION:add":function(){return"Dodaj przyczynƒô"},"FORM:ACTION:edit":function(){return"Edytuj przyczynƒô"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá przyczyny :("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá przyczyny :("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia przyczyny"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ przyczynƒô"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybranƒÖ przyczynƒô?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá przyczynƒô <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá przyczyny :("}}}),define("app/kaizenCauses/routes",["underscore","../router","../viewport","../user","../core/util/showDeleteFormPage","./KaizenCauseCollection","./KaizenCause","../core/pages/ListPage","../core/pages/DetailsPage","../core/pages/AddFormPage","../core/pages/EditFormPage","../core/pages/ActionFormPage","./views/KaizenCauseFormView","app/kaizenCauses/templates/details","i18n!app/nls/kaizenCauses"],function(t,e,n,r,i,o,s,a,u,c,l,p,d,h){"use strict";var f=r.auth("KAIZEN:DICTIONARIES:VIEW"),m=r.auth("KAIZEN:DICTIONARIES:MANAGE");e.map("/kaizenCauses",f,function(t){n.showPage(new a({baseBreadcrumb:!0,collection:new o(null,{rqlQuery:t.rql}),columns:[{id:"_id",className:"is-min"},"name",{id:"position",className:"is-min"}]}))}),e.map("/kaizenCauses/:id",f,function(t){n.showPage(new u({baseBreadcrumb:!0,model:new s({_id:t.params.id}),detailsTemplate:h}))}),e.map("/kaizenCauses;add",m,function(){n.showPage(new c({baseBreadcrumb:!0,FormView:d,model:new s}))}),e.map("/kaizenCauses/:id;edit",m,function(t){n.showPage(new l({baseBreadcrumb:!0,FormView:d,model:new s({_id:t.params.id})}))}),e.map("/kaizenCauses/:id;delete",m,t.partial(i,s,t,t,{baseBreadcrumb:!0}))}),define("app/kaizenRisks/templates/form",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form method="post" action="'),__output.push(formAction),__output.push('">\n  <input type="hidden" name="_method" value="'),__output.push(formMethod),__output.push('">\n  <div class="panel panel-primary">\n    <div class="panel-heading">'),__output.push(panelTitleText),__output.push('</div>\n    <div class="panel-body">\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-id" class="control-label">'),__output.push(t("kaizenRisks","PROPERTY:_id")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-id" class="form-control" type="text" name="_id" autofocus required maxlength="20" pattern="^[A-Za-z0-9-]+$">\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-name" class="control-label">'),__output.push(t("kaizenRisks","PROPERTY:name")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-name" class="form-control" type="text" name="name" required maxlength="100">\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-description" class="control-label">'),__output.push(t("kaizenRisks","PROPERTY:description")),__output.push('</label>\n        <textarea id="'),__output.push(idPrefix),__output.push('-description" class="form-control" name="description" rows="4"></textarea>\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-position" class="control-label is-required">'),__output.push(t("kaizenCauses","PROPERTY:position")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-position" class="form-control" type="number" name="position" min="0" required>\n      </div>\n    </div>\n    <div class="panel-footer">\n      <button type="submit" class="btn btn-primary">'),__output.push(formActionText),__output.push("</button>\n    </div>\n  </div>\n</form>\n");return __output.join("")}}),define("app/kaizenRisks/views/KaizenRiskFormView",["app/core/views/FormView","app/kaizenRisks/templates/form"],function(t,e){"use strict";return t.extend({template:e,afterRender:function(){t.prototype.afterRender.call(this),this.options.editMode&&(this.$id("id").prop("readonly",!0),this.$id("name").focus())},serializeForm:function(t){return t.description||(t.description=""),t}})}),define("app/kaizenRisks/templates/details",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="panel panel-primary">\n  <div class="panel-heading">'),__output.push(t("kaizenRisks","PANEL:TITLE:details")),__output.push('</div>\n  <div class="panel-details">\n    <div class="props first">\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("kaizenRisks","PROPERTY:_id")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model._id)),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("kaizenRisks","PROPERTY:name")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model.name)),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("kaizenRisks","PROPERTY:description")),__output.push('</div>\n        <div class="prop-value text-lines">'),__output.push(escape(model.description)),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("kaizenCauses","PROPERTY:position")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model.position||"0")),__output.push("</div>\n      </div>\n    </div>\n  </div>\n</div>\n");return __output.join("")}}),define("app/nls/kaizenRisks",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:base":function(){return"Improvements"},"BREADCRUMBS:browse":function(){return"Risks"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the risks :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the risk :("},"MSG:DELETED":function(t){return"Risk <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add risk"},"PAGE_ACTION:edit":function(){return"Edit risk"},"PAGE_ACTION:delete":function(){return"Delete risk"},"PANEL:TITLE:details":function(){return"Risk's details"},"PANEL:TITLE:addForm":function(){return"Add risk form"},"PANEL:TITLE:editForm":function(){return"Edit risk form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:name":function(){return"Name"},"PROPERTY:description":function(){return"Description"},"PROPERTY:position":function(){return"Position"},"FORM:ACTION:add":function(){return"Add risk"},"FORM:ACTION:edit":function(){return"Edit risk"},"FORM:ERROR:addFailure":function(){return"Failed to add the new risk :("},"FORM:ERROR:editFailure":function(){return"Failed to edit the risk :("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Risk deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete risk"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen risk?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> risk?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the risk :-("}},pl:!0}}),define("app/nls/pl/kaizenRisks",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:base":function(){return"Usprawnienia"},"BREADCRUMBS:browse":function(){return"Rodzaje ryzyka"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie rodzaj√≥w ryzyka nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie rodzaju ryzyka nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Rodzaj ryzyka <em>"+e.v(t,"label")+"</em> zosta≈Ça usuniƒôty."},"PAGE_ACTION:add":function(){return"Dodaj rodzaj ryzyka"},"PAGE_ACTION:edit":function(){return"Edytuj rodzaj ryzyka"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ rodzaj ryzyka"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy rodzaju ryzyka"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania rodzaju ryzyka"},"PANEL:TITLE:editForm":function(){return"Formularz edycji rodzaju ryzyka"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:name":function(){return"Nazwa"},"PROPERTY:description":function(){return"Opis"},"PROPERTY:position":function(){return"Pozycja"},"FORM:ACTION:add":function(){return"Dodaj rodzaj ryzyka"},"FORM:ACTION:edit":function(){return"Edytuj rodzaj ryzyka"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá rodzaju ryzyka :("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá rodzaju ryzyka :("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia rodzaju ryzyka"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ rodzaj ryzyka"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany rodzaj ryzyka?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá rodzaj ryzyka <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá rodzaju ryzyka :("}}}),define("app/kaizenRisks/routes",["underscore","../router","../viewport","../user","../core/util/showDeleteFormPage","./KaizenRiskCollection","./KaizenRisk","../core/pages/ListPage","../core/pages/DetailsPage","../core/pages/AddFormPage","../core/pages/EditFormPage","../core/pages/ActionFormPage","./views/KaizenRiskFormView","app/kaizenRisks/templates/details","i18n!app/nls/kaizenRisks"],function(t,e,n,r,i,o,s,a,u,c,l,p,d,h){"use strict";var f=r.auth("KAIZEN:DICTIONARIES:VIEW"),m=r.auth("KAIZEN:DICTIONARIES:MANAGE");e.map("/kaizenRisks",f,function(t){n.showPage(new a({baseBreadcrumb:!0,collection:new o(null,{rqlQuery:t.rql}),columns:[{id:"_id",className:"is-min"},"name",{id:"position",className:"is-min"}]}))}),e.map("/kaizenRisks/:id",f,function(t){n.showPage(new u({baseBreadcrumb:!0,model:new s({_id:t.params.id}),detailsTemplate:h}))}),e.map("/kaizenRisks;add",m,function(){n.showPage(new c({baseBreadcrumb:!0,FormView:d,model:new s}))}),e.map("/kaizenRisks/:id;edit",m,function(t){n.showPage(new l({baseBreadcrumb:!0,FormView:d,model:new s({_id:t.params.id})}))}),e.map("/kaizenRisks/:id;delete",m,t.partial(i,s,t,t,{baseBreadcrumb:!0}))}),define("app/opinionSurveyDivisions/OpinionSurveyDivision",["../core/Model"],function(t){"use strict";return t.extend({urlRoot:"/opinionSurveys/divisions",clientUrlRoot:"#opinionSurveyDivisions",topicPrefix:"opinionSurveys.divisions",privilegePrefix:"OPINION_SURVEYS",nlsDomain:"opinionSurveyDivisions",labelAttribute:"short"})}),define("app/opinionSurveyDivisions/OpinionSurveyDivisionCollection",["../core/Collection","./OpinionSurveyDivision"],function(t,e){"use strict";return t.extend({model:e})}),define("app/opinionSurveyEmployers/OpinionSurveyEmployer",["../core/Model","../data/companies","../data/colorFactory"],function(t,e,n){"use strict";return t.extend({urlRoot:"/opinionSurveys/employers",clientUrlRoot:"#opinionSurveyEmployers",topicPrefix:"opinionSurveys.employers",privilegePrefix:"OPINION_SURVEYS",nlsDomain:"opinionSurveyEmployers",labelAttribute:"short",getColor:function(){var t=e.get(this.id),r=null;return t&&(r=t.get("color")),r||n.getColor("opinionSurveys:employers",this.id)}})}),define("app/opinionSurveyEmployers/OpinionSurveyEmployerCollection",["../core/Collection","./OpinionSurveyEmployer"],function(t,e){"use strict";return t.extend({model:e})}),define("app/opinionSurveyQuestions/OpinionSurveyQuestion",["../core/Model"],function(t){"use strict";return t.extend({urlRoot:"/opinionSurveys/questions",clientUrlRoot:"#opinionSurveyQuestions",topicPrefix:"opinionSurveys.questions",privilegePrefix:"OPINION_SURVEYS",nlsDomain:"opinionSurveyQuestions",labelAttribute:"short"})}),define("app/opinionSurveyQuestions/OpinionSurveyQuestionCollection",["../core/Collection","./OpinionSurveyQuestion"],function(t,e){"use strict";return t.extend({model:e})}),define("app/opinionSurveys/OpinionSurveySetting",["../settings/Setting"],function(t){"use strict";return t.extend({urlRoot:"/opinionSurveys/settings"})}),define("app/opinionSurveys/OpinionSurveySettingCollection",["../settings/SettingCollection","./OpinionSurveySetting"],function(t,e){"use strict";return t.extend({model:e,topicSuffix:"opinionSurveys.**",getValue:function(t){var e=this.get("opinionSurveys."+t);return e?e.getValue():null},prepareValue:function(t,e){return parseInt(e,10)||0},getPositiveAnswersReference:function(){return this.getValue("positiveAnswersReference")||0},getResponseReference:function(){return this.getValue("responseReference")||0}})}),define("app/opinionSurveys/dictionaries",["jquery","../broker","../pubsub","../user","../data/createSettings","../opinionSurveyDivisions/OpinionSurveyDivisionCollection","../opinionSurveyEmployers/OpinionSurveyEmployerCollection","../opinionSurveyQuestions/OpinionSurveyQuestionCollection","./OpinionSurveySettingCollection"],function(t,e,n,r,i,o,s,a,u){"use strict";function c(){h=null,null!==f&&(f.destroy(),f=null),_.loaded=!1,p.forEach(function(t){_[t].reset()}),m.release(),_.settings.reset([])}function l(t,n){var r=n.split("."),i=_[r[1]];if(i){switch(r[1]){case"added":i.add(t.model);break;case"edited":var o=i.get(t.model._id);o&&o.set(t.model);break;case"deleted":i.remove(i.get(t.model._id))}e.publish(n,t)}}var p=["divisions","employers","questions"],d=null,h=null,f=null,m=i(u),_={actionStatuses:["planned","progress","done","failed","late"],settings:m.acquire(),divisions:new o,employers:new s,questions:new a,loaded:!1,load:function(){return null!==h&&(clearTimeout(h),h=null),_.loaded?null:null!==d?d:(d=t.ajax({url:"/opinionSurveys/dictionaries"}),d.done(function(t){_.loaded=!0,p.forEach(function(e){_[e].reset(t[e])}),_.settings.reset(t.settings)}),d.fail(c),d.always(function(){d=null}),f=n.sandbox(),p.forEach(function(t){f.subscribe("opinionSurveys."+t+".**",l)}),d)},unload:function(){null!==h&&clearTimeout(h),h=setTimeout(c,3e4)},getLabel:function(t,e){if(!_[t])return e;var n=_[t].get(e);return n?n.getLabel():e}};return _}),define("app/opinionSurveys/OpinionSurvey",["underscore","../time","../core/Model","./dictionaries"],function(t,e,n,r){"use strict";return n.extend({urlRoot:"/opinionSurveys/surveys",clientUrlRoot:"#opinionSurveys",topicPrefix:"opinionSurveys.surveys",privilegePrefix:"OPINION_SURVEYS",nlsDomain:"opinionSurveys",labelAttribute:"label",serialize:function(){var t=this.toJSON();return t.startDate=e.format(t.startDate,"LL"),t.endDate=e.format(t.endDate,"LL"),t.superiors=this.serializeSuperiors(),t.employeeCount=this.serializeEmployeeCount(),t},serializeSuperiors:function(){return(this.get("superiors")||[]).map(function(t){var e=r.divisions.get(t.division);return e&&(t.division=e.get("full")),t})},serializeEmployeeCount:function(){return(this.get("employeeCount")||[]).map(function(t){var e=r.divisions.get(t.division);e&&(t.division=e.get("full"));var n=r.employers.get(t.employer);return n&&(t.employer=n.get("short")),t.count=t.count.toLocaleString(),t})},buildCacheMaps:function(){this.cacheMaps||this.on("change",this.buildCacheMaps);var e=this.attributes,n={employers:{},divisions:{},superiors:{},questions:{},employeeCount:{}};t.forEach(e.employers,function(t){n.employers[t._id]=t},this),t.forEach(e.questions,function(t){n.questions[t._id]=t},this),t.forEach(e.superiors,function(t){n.superiors[t._id]=t,n.divisions[t.division]||(n.divisions[t.division]=[]),n.divisions[t.division].push(t)},this),t.forEach(e.employeeCount,function(t){n.employeeCount[t.division]||(n.employeeCount[t.division]={}),n.employeeCount[t.division][t.employer]=t.count}),this.cacheMaps=n}},{})}),define("app/opinionSurveys/OpinionSurveyCollection",["underscore","../core/Collection","./OpinionSurvey"],function(t,e,n){"use strict";return e.extend({model:n,rqlQuery:"select(startDate,endDate,label)&limit(15)&sort(-startDate)",buildCacheMaps:function(){for(var t=0;t<this.models.length;++t)this.models[t].buildCacheMaps()},getSuperiors:function(){var e={};return this.forEach(function(n){t.forEach(n.get("superiors"),function(t){e[t._id]||(e[t._id]=t)})}),t.values(e)}})}),define("app/opinionSurveys/templates/details",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="opinionSurveys-details">\n  <div class="panel panel-primary opinionSurveys-details-props">\n    <div class="panel-heading">\n      '),__output.push(t("opinionSurveys","PANEL:TITLE:details")),__output.push('\n    </div>\n    <div class="panel-details">\n      <div class="props first">\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("opinionSurveys","PROPERTY:_id")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model._id),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("opinionSurveys","PROPERTY:label")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.label)),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("opinionSurveys","PROPERTY:startDate")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model.startDate),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("opinionSurveys","PROPERTY:endDate")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model.endDate),__output.push('</div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="panel panel-default opinionSurveys-details-intro">\n    <div class="panel-heading">\n      '),__output.push(t("opinionSurveys","PROPERTY:intro")),__output.push('\n    </div>\n    <div class="panel-body">'),__output.push(model.intro),__output.push('</div>\n  </div>\n  <div class="panel panel-default opinionSurveys-details-employers">\n    <div class="panel-heading">\n      '),__output.push(t("opinionSurveys","PROPERTY:employers")),__output.push('\n    </div>\n    <table class="table table-condensed table-bordered">\n      <thead>\n      <tr>\n        <th class="is-min">'),__output.push(t("opinionSurveys","PROPERTY:employers._id")),__output.push('</th>\n        <th class="is-min">'),__output.push(t("opinionSurveys","PROPERTY:employers.short")),__output.push("</th>\n        <th>"),__output.push(t("opinionSurveys","PROPERTY:employers.full")),__output.push("</th>\n      </tr>\n      </thead>\n      <tbody>\n      "),model.employers.forEach(function(t){__output.push('\n      <tr>\n        <td class="is-min">'),__output.push(t._id),__output.push('</td>\n        <td class="is-min">'),__output.push(escape(t["short"])),__output.push("</td>\n        <td>"),__output.push(escape(t.full)),__output.push("</td>\n      </tr>\n      ")
}),__output.push('\n      </tbody>\n    </table>\n  </div>\n  <div class="panel panel-default opinionSurveys-details-superiors">\n    <div class="panel-heading">\n      '),__output.push(t("opinionSurveys","PROPERTY:superiors")),__output.push('\n    </div>\n    <table class="table table-condensed table-bordered">\n      <thead>\n      <tr>\n        <th class="is-min">'),__output.push(t("opinionSurveys","PROPERTY:superiors.short")),__output.push('</th>\n        <th class="is-min">'),__output.push(t("opinionSurveys","PROPERTY:superiors.full")),__output.push("</th>\n        <th>"),__output.push(t("opinionSurveys","PROPERTY:superiors.division")),__output.push("</th>\n      </tr>\n      </thead>\n      <tbody>\n      "),model.superiors.forEach(function(t){__output.push('\n      <tr>\n        <td class="is-min">'),__output.push(escape(t["short"])),__output.push('</td>\n        <td class="is-min">'),__output.push(escape(t.full)),__output.push("</td>\n        <td>"),__output.push(escape(t.division)),__output.push("</td>\n      </tr>\n      ")}),__output.push('\n      </tbody>\n    </table>\n  </div>\n  <div class="panel panel-default opinionSurveys-details-questions">\n    <div class="panel-heading">\n      '),__output.push(t("opinionSurveys","PROPERTY:questions")),__output.push('\n    </div>\n    <table class="table table-condensed table-bordered">\n      <thead>\n      <tr>\n        <th class="is-min">'),__output.push(t("opinionSurveys","PROPERTY:questions._id")),__output.push('</th>\n        <th class="is-min">'),__output.push(t("opinionSurveys","PROPERTY:questions.short")),__output.push("</th>\n        <th>"),__output.push(t("opinionSurveys","PROPERTY:questions.full")),__output.push("</th>\n      </tr>\n      </thead>\n      <tbody>\n      "),model.questions.forEach(function(t){__output.push('\n      <tr>\n        <td class="is-min">'),__output.push(escape(t._id)),__output.push('</td>\n        <td class="is-min">'),__output.push(escape(t["short"])),__output.push("</td>\n        <td>"),__output.push(escape(t.full)),__output.push("</td>\n      </tr>\n      ")}),__output.push('\n      </tbody>\n    </table>\n  </div>\n  <div class="panel panel-default opinionSurveys-details-employeeCount">\n    <div class="panel-heading">\n      '),__output.push(t("opinionSurveys","PROPERTY:employeeCount")),__output.push('\n    </div>\n    <table class="table table-condensed table-bordered">\n      <thead>\n      <tr>\n        <th class="is-min">'),__output.push(t("opinionSurveys","PROPERTY:employeeCount.division")),__output.push('</th>\n        <th class="is-min">'),__output.push(t("opinionSurveys","PROPERTY:employeeCount.employer")),__output.push("</th>\n        <th>"),__output.push(t("opinionSurveys","PROPERTY:employeeCount.count")),__output.push("</th>\n      </tr>\n      </thead>\n      <tbody>\n      "),model.employeeCount.forEach(function(t){__output.push('\n      <tr>\n        <td class="is-min">'),__output.push(escape(t.division)),__output.push('</td>\n        <td class="is-min">'),__output.push(escape(t.employer)),__output.push("</td>\n        <td>"),__output.push(t.count),__output.push("</td>\n      </tr>\n      ")}),__output.push("\n      </tbody>\n    </table>\n  </div>\n</div>\n");return __output.join("")}}),define("app/opinionSurveys/views/OpinionSurveyDetailsView",["underscore","app/core/views/DetailsView","../dictionaries","app/opinionSurveys/templates/details"],function(t,e,n,r){"use strict";return e.extend({template:r,events:t.extend({},e.prototype.events),afterRender:function(){e.prototype.afterRender.call(this)}})}),define("app/opinionSurveys/pages/OpinionSurveyDetailsPage",["app/i18n","app/core/pages/DetailsPage","app/core/util/pageActions","../dictionaries","../views/OpinionSurveyDetailsView"],function(t,e,n,r,i){"use strict";return e.extend({baseBreadcrumb:!0,DetailsView:i,actions:function(){var e=this.model,r=e.getNlsDomain();return[{label:t.bound(r,"PAGE_ACTION:print"),icon:"print",href:"/opinionSurveys/"+e.id+".pdf"},{label:t.bound(r,"PAGE_ACTION:editEmployeeCount"),icon:"users",href:e.genClientUrl("editEmployeeCount")},n.edit(e,!1),n["delete"](e,!1)]},destroy:function(){e.prototype.destroy.call(this),r.unload()},load:function(t){return t(this.model.fetch(),r.load())},afterRender:function(){e.prototype.afterRender.call(this),r.load()}})}),define("app/opinionSurveys/util/formatQuestionResult",["underscore"],function(t){"use strict";return function(e){var n='<div class="opinionSurveys-select2">';return n+="<h3>"+t.escape(e["short"]||e.question.get("short"))+"</h3>",n+="<p>"+t.escape(e.full||e.question.get("full"))+"</p>",n+="</div>"}}),define("app/opinionSurveys/templates/form",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="opinionSurveys-form" method="post" action="'),__output.push(formAction),__output.push('" autocomplete="off">\n  <input type="hidden" name="_method" value="'),__output.push(formMethod),__output.push('">\n  <div class="panel panel-primary">\n    <div class="panel-heading">'),__output.push(panelTitleText),__output.push('</div>\n    <div class="panel-body">\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-id" class="control-label is-required">'),__output.push(t("opinionSurveys","PROPERTY:_id")),__output.push("</label>\n        "),editMode?(__output.push('\n        <p class="form-control-static">'),__output.push(model._id),__output.push("</p>\n        ")):(__output.push('\n        <input id="'),__output.push(idPrefix),__output.push('-id" class="form-control" type="text" name="_id" autofocus required maxlength="20" pattern="^[A-Za-z0-9-_]+$">\n        <p class="help-block">'),__output.push(t("opinionSurveys","form:help:_id")),__output.push("</p>\n        ")),__output.push('\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-label" class="control-label is-required">'),__output.push(t("opinionSurveys","PROPERTY:label")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-label" class="form-control" type="text" name="label" required>\n        <p class="help-block">'),__output.push(t("opinionSurveys","form:help:label")),__output.push('</p>\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-startDate" class="control-label is-required">'),__output.push(t("opinionSurveys","PROPERTY:startDate")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-startDate" class="form-control" type="date" name="startDate" required>\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-endDate" class="control-label is-required">'),__output.push(t("opinionSurveys","PROPERTY:endDate")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-endDate" class="form-control" type="date" name="endDate" required>\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-intro" class="control-label">'),__output.push(t("opinionSurveys","PROPERTY:intro")),__output.push('</label>\n        <textarea id="'),__output.push(idPrefix),__output.push('-intro" class="form-control" name="intro" rows="8"></textarea>\n      </div>\n      <div class="form-group has-required-select2">\n        <label for="'),__output.push(idPrefix),__output.push('-employers" class="control-label is-required">'),__output.push(t("opinionSurveys","PROPERTY:employers")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-employers" type="text" name="employers" required placeholder="'),__output.push(t("opinionSurveys","form:placeholder:employers")),__output.push('">\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-superiors" class="control-label">'),__output.push(t("opinionSurveys","PROPERTY:superiors")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-superiors" type="text">\n        <table id="'),__output.push(idPrefix),__output.push('-superiorsTable" class="table table-condensed opinionSurveys-form-superiorsTable">\n          <thead>\n          <tr>\n            <th class="is-min">'),__output.push(t("opinionSurveys","PROPERTY:superiors.full")),__output.push('</th>\n            <th class="opinionSurveys-form-superiorsTable-short">'),__output.push(t("opinionSurveys","PROPERTY:superiors.short")),__output.push("</th>\n            <th>"),__output.push(t("opinionSurveys","PROPERTY:superiors.division")),__output.push('</th>\n            <th class="actions">'),__output.push(t("core","LIST:COLUMN:actions")),__output.push('</th>\n          </tr>\n          </thead>\n          <tbody></tbody>\n        </table>\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-questions" class="control-label">'),__output.push(t("opinionSurveys","PROPERTY:questions")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-questions" type="text" placeholder="'),__output.push(t("opinionSurveys","form:placeholder:questions")),__output.push('">\n        <table id="'),__output.push(idPrefix),__output.push('-questionsTable" class="table table-condensed opinionSurveys-form-questionsTable">\n          <thead>\n          <tr>\n            <th class="is-min">'),__output.push(t("opinionSurveys","PROPERTY:questions._id")),__output.push('</th>\n            <th class="opinionSurveys-form-questionsTable-short">'),__output.push(t("opinionSurveys","PROPERTY:questions.short")),__output.push("</th>\n            <th>"),__output.push(t("opinionSurveys","PROPERTY:questions.full")),__output.push('</th>\n            <th class="actions">'),__output.push(t("core","LIST:COLUMN:actions")),__output.push('</th>\n          </tr>\n          </thead>\n          <tbody></tbody>\n        </table>\n      </div>\n    </div>\n    <div class="panel-footer">\n      <button id="'),__output.push(idPrefix),__output.push('-submit" type="submit" class="btn btn-primary">'),__output.push(formActionText),__output.push('</button>\n      <button id="'),__output.push(idPrefix),__output.push('-preview" type="button" class="btn btn-default" accesskey="p">'),__output.push(t("opinionSurveys","FORM:ACTION:preview")),__output.push("</button>\n    </div>\n  </div>\n</form>\n");return __output.join("")}}),define("app/opinionSurveys/templates/formSuperiorTr",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<tr>\n  <td class="is-min">\n    <input type="hidden" name="superiors['),__output.push(i),__output.push(']._id" value="'),__output.push(superior._id),__output.push('">\n    <input type="hidden" name="superiors['),__output.push(i),__output.push('].full" value="'),__output.push(escape(superior.full)),__output.push('">\n    '),__output.push(escape(superior.full)),__output.push('\n  </td>\n  <td><input class="form-control" name="superiors['),__output.push(i),__output.push('].short" type="text" value="'),__output.push(escape(superior["short"])),__output.push('" required></td>\n  <td><input name="superiors['),__output.push(i),__output.push('].division" type="text" value="'),__output.push(escape(superior.division)),__output.push('" required></td>\n  <td class="actions"><button class="btn btn-danger opinionSurveys-form-deleteRow" type="button"><i class="fa fa-remove"></i></button></td>\n</tr>\n');return __output.join("")}}),define("app/opinionSurveys/templates/formQuestionTr",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<tr>\n  <td class="is-min">\n    <input type="hidden" name="questions['),__output.push(i),__output.push(']._id" value="'),__output.push(question._id),__output.push('">\n    '),__output.push(escape(question._id)),__output.push('\n  </td>\n  <td><input class="form-control" name="questions['),__output.push(i),__output.push('].short" type="text" value="'),__output.push(escape(question["short"])),__output.push('" required></td>\n  <td><input class="form-control" name="questions['),__output.push(i),__output.push('].full" type="text" value="'),__output.push(escape(question.full)),__output.push('" required></td>\n  <td class="actions">\n    <button class="btn btn-default opinionSurveys-form-moveRowUp" type="button"><i class="fa fa-arrow-up"></i></button>\n    <button class="btn btn-default opinionSurveys-form-moveRowDown" type="button"><i class="fa fa-arrow-down"></i></button>\n    <button class="btn btn-danger opinionSurveys-form-deleteRow" type="button"><i class="fa fa-remove"></i></button>\n  </td>\n</tr>\n');return __output.join("")}}),define("app/opinionSurveys/views/OpinionSurveyFormView",["underscore","jquery","form2js","app/i18n","app/time","app/user","app/viewport","app/core/util/buttonGroup","app/core/util/idAndLabel","app/core/views/FormView","app/data/orgUnits","app/users/util/setUpUserSelect2","../dictionaries","../OpinionSurvey","../util/formatQuestionResult","app/opinionSurveys/templates/form","app/opinionSurveys/templates/formSuperiorTr","app/opinionSurveys/templates/formQuestionTr"],function(t,e,n,r,i,o,s,a,u,c,l,p,d,h,f,m,_,g){"use strict";return c.extend({template:m,superiorCounter:0,questionCounter:0,events:t.extend({"click .opinionSurveys-form-deleteRow":function(t){var n=this.$(t.currentTarget).closest("tr"),r=n.closest("table");n.fadeOut("fast",function(){e(this).remove(),r.find("tbody").children().length||r.css("display","none")}),r.hasClass("opinionSurveys-form-questionsTable")&&this.setUpQuestionsSelect2(!0)},"click .opinionSurveys-form-moveRowUp":function(t){var e=this.$(t.currentTarget),n=e.closest("tr"),r=n.prev();if(r.length)n.insertBefore(r);else{var i=n.parent().children();i.length>1&&n.insertAfter(i.last())}e.focus()},"click .opinionSurveys-form-moveRowDown":function(t){var e=this.$(t.currentTarget),n=e.closest("tr"),r=n.next();if(r.length)n.insertAfter(r);else{var i=n.parent().children();i.length>1&&n.insertBefore(i.first())}e.focus()},"click #-preview":function(){if(!this.el.checkValidity())return void this.$id("submit").click();var t=this.$id("preview").prop("disabled",!0),e=this.serializeForm(n(this.el)),i=this.ajax({method:"POST",url:"/opinionSurveys/preview",data:JSON.stringify(e)});i.fail(function(){s.msg.show({type:"error",time:3e3,text:r("opinionSurveys","FORM:ERROR:previewFailure")})}),i.done(this.openPreviewWindow.bind(this)),i.always(function(){t.prop("disabled",!1)})}},c.prototype.events),serializeToForm:function(){var t=this.model.toJSON();return t.startDate&&(t.startDate=i.format(t.startDate,"YYYY-MM-DD")),t.endDate&&(t.endDate=i.format(t.endDate,"YYYY-MM-DD")),t.employers=(t.employers||[]).map(function(t){return t._id}).join(","),t},serializeForm:function(t){return t.employers=this.$id("employers").select2("data").map(function(t){return d.employers.get(t.id).toJSON()}),t.superiors||(t.superiors=[]),t.superiors.sort(function(t,e){if(t.division===e.division)return t.full.localeCompare(e.full);var n=t.division.match(/([a-z])$/),r=e.division.match(/([a-z])$/);return n&&!r?-1:!n&&r?1:n||r?n[1].localeCompare(r[1]):t.division.localeCompare(e.division)}),t},afterRender:function(){c.prototype.afterRender.call(this),this.renderSuperiorsTable(),this.renderQuestionsTable(),this.setUpEmployersSelect2(),this.setUpSuperiorsSelect2(),this.setUpQuestionsSelect2(),this.$("input[autofocus]").focus()},setUpEmployersSelect2:function(){this.$id("employers").select2({multiple:!0,data:d.employers.map(u)})},setUpSuperiorsSelect2:function(){var t=this.$id("superiorsTable"),n=t.find("tbody"),r=p(this.$id("superiors")),i=this;n.children().length||t.css("display","none"),r.on("change",function(o){if(r.select2("data",null),o.added){var s=o.added.user;if(!n.find('[value="'+s._id+'"]').length){var a="";"division"===s.orgUnitType?a=s.orgUnitId:"subdivision"===s.orgUnitType&&(a=l.getByTypeAndId("subdivision",s.orgUnitId).get("division"));var u=d.divisions.get(a);u||(u=d.divisions.at(0));var c=e(_({i:++i.superiorCounter,superior:{_id:s._id,full:s.lastName+" "+s.firstName,"short":s.lastName+" "+s.firstName.substring(0,1)+".",division:u?u.id:""}}));n.append(c),t.css("display",""),i.setUpSuperiorsDivisionSelect2(c),c.find('[name$="short"]').select()}}})},setUpSuperiorsDivisionSelect2:function(t){t.find('[name$="division"]').select2({minimumResultsForSearch:-1,data:d.divisions.map(function(t){return{id:t.id,text:t.get("full")+" ("+t.get("short")+")"}})})},setUpQuestionsSelect2:function(t){function n(t,e){var n=e.find('input[name$="_id"]').map(function(){return this.value}).get();return t.select2({formatResult:f,minimumResultsForSearch:-1,data:d.questions.map(function(t){return{id:t.id,text:t.get("short"),question:t}}).filter(function(t){return-1===n.indexOf(t.id)})})}var r=this.$id("questionsTable"),i=r.find("tbody"),o=n(this.$id("questions"),i);if(!t){var s=this;i.children().length||r.css("display","none"),o.on("change",function(t){if(o.select2("data",null),t.added){var a=t.added.question,u=e(g({i:++s.questionCounter,question:{_id:a.id,"short":a.get("short"),full:a.get("full")}}));u.appendTo(i),r.css("display",""),u.find('[name$="short"]').select(),n(o,i)}})}},renderSuperiorsTable:function(){var t=this,n=this.$id("superiorsTable").find("tbody");(this.model.get("superiors")||[]).forEach(function(r){var i=e(_({i:++t.superiorCounter,superior:r}));n.append(i),t.setUpSuperiorsDivisionSelect2(i)})},renderQuestionsTable:function(){var t=this,n=this.$id("questionsTable").find("tbody");(this.model.get("questions")||[]).forEach(function(r){var i=e(g({i:++t.questionCounter,question:r}));n.append(i)})},openPreviewWindow:function(t){var e="/opinionSurveys/"+t+".pdf?recreate=1",n="OPINION_SURVEY_PREVIEW",i=window.screen,o=.6*i.availWidth,a=.8*i.availHeight,u=Math.floor((i.availWidth-o)/2),c=Math.floor((i.availHeight-a)/2),l="resizable,scrollbars,location=no,top="+c+",left="+u+",width="+Math.floor(o)+",height="+Math.floor(a),p=window.open(e,n,l);p||s.msg.show({type:"warning",time:3e3,text:r("opinionSurveys","FORM:ERROR:previewPopupBlocked")})}})}),define("app/opinionSurveys/pages/OpinionSurveyAddFormPage",["app/core/pages/AddFormPage","../dictionaries","../views/OpinionSurveyFormView"],function(t,e,n){"use strict";return t.extend({baseBreadcrumb:!0,FormView:n,load:function(t){return t(e.load())},destroy:function(){t.prototype.destroy.call(this),e.unload()},afterRender:function(){t.prototype.afterRender.call(this),e.load()}})}),define("app/opinionSurveys/pages/OpinionSurveyEditFormPage",["app/core/pages/EditFormPage","../dictionaries","../views/OpinionSurveyFormView"],function(t,e,n){"use strict";return t.extend({baseBreadcrumb:!0,FormView:n,load:function(t){return t(this.model.fetch(),e.load())},destroy:function(){t.prototype.destroy.call(this),e.unload()},afterRender:function(){t.prototype.afterRender.call(this),e.load()}})}),define("app/opinionSurveys/templates/employeeCountForm",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="opinionSurveys-employeeCountForm" method="post" action="'),__output.push(formAction),__output.push('" autocomplete="off">\n  <input type="hidden" name="_method" value="'),__output.push(formMethod),__output.push('">\n  <div class="panel panel-primary">\n    <div class="panel-heading">'),__output.push(t("opinionSurveys","PANEL:TITLE:editEmployeeCountForm")),__output.push('</div>\n    <div class="panel-body">\n      '),_.forEach(employeeCounts,function(t,e){__output.push('\n      <div class="form-group">\n        <label class="control-label">'),__output.push(escape(t.label)),__output.push('</label>\n        <div class="opinionSurveys-employeeCountForm-division">\n          '),_.forEach(t.employers,function(t,n){__output.push('\n          <div class="form-group opinionSurveys-employeeCountForm-employer">\n            <label for="'),__output.push(idPrefix),__output.push("-"),__output.push(e),__output.push("-"),__output.push(n),__output.push('" class="control-label is-required">'),__output.push(escape(t.label)),__output.push('</label>\n            <input id="'),__output.push(idPrefix),__output.push("-"),__output.push(e),__output.push("-"),__output.push(n),__output.push('" class="form-control" type="number" name="employeeCount['),__output.push(t.index),__output.push('].count" required min="0" max="9999">\n            <input type="hidden" name="employeeCount['),__output.push(t.index),__output.push('].division" value="'),__output.push(e),__output.push('">\n            <input type="hidden" name="employeeCount['),__output.push(t.index),__output.push('].employer" value="'),__output.push(n),__output.push('">\n          </div>\n          ')}),__output.push("\n        </div>\n      </div>\n      ")}),__output.push('\n    </div>\n    <div class="panel-footer">\n      <button id="'),__output.push(idPrefix),__output.push('-submit" type="submit" class="btn btn-primary">'),__output.push(t("opinionSurveys","FORM:ACTION:editEmployeeCount")),__output.push("</button>\n    </div>\n  </div>\n</form>\n");return __output.join("")}}),define("app/opinionSurveys/views/EmployeeCountFormView",["underscore","app/core/views/FormView","../dictionaries","app/opinionSurveys/templates/employeeCountForm"],function(t,e,n,r){"use strict";return e.extend({template:r,serialize:function(){var r={};return(this.model.get("employeeCount")||[]).forEach(function(t,e){r[t.division]||(r[t.division]={label:n.divisions.get(t.division).get("full"),employers:{}}),r[t.division].employers[t.employer]={index:e,label:n.employers.get(t.employer).get("short"),count:t.count}}),t.extend(e.prototype.serialize.call(this),{employeeCounts:r})},afterRender:function(){e.prototype.afterRender.call(this)}})}),define("app/opinionSurveys/pages/EmployeeCountEditFormPage",["app/core/pages/EditFormPage","../dictionaries","../views/EmployeeCountFormView"],function(t,e,n){"use strict";return t.extend({baseBreadcrumb:!0,FormView:n,load:function(t){return t(this.model.fetch(),e.load())},destroy:function(){t.prototype.destroy.call(this),e.unload()},afterRender:function(){t.prototype.afterRender.call(this),e.load()}})}),define("app/opinionSurveys/views/OpinionSurveyListView",["app/i18n","app/core/views/ListView"],function(t,e){"use strict";return e.extend({className:"is-clickable",columns:[{id:"_id",className:"is-min"},{id:"startDate",className:"is-min"},{id:"endDate",className:"is-min"},"label"],serializeActions:function(){var n=this.collection;return function(r){var i=n.get(r._id);return[e.actions.viewDetails(i),{id:"print",icon:"print",label:t(i.getNlsDomain(),"LIST:ACTION:print"),href:"/opinionSurveys/"+i.id+".pdf"},e.actions.edit(i),e.actions["delete"](i)]}}})}),define("app/nls/opinionSurveys",["app/nls/locale/en"],function(t){return{root:{},pl:!0}}),define("app/nls/pl/opinionSurveys",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:base":function(){return"Badanie Opinia"},"BREADCRUMBS:browse":function(){return"Badania"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"BREADCRUMBS:report":function(){return"Raport"},"BREADCRUMBS:settings":function(){return"Ustawienia"},"navbar:main":function(){return"Badanie Opinia"},"navbar:current":function(){return"Aktualne badanie"},"navbar:report":function(){return"Raport"},"navbar:actions":function(){return"Akcje naprawcze"},"navbar:responses":function(){return"Odpowiedzi"},"navbar:dictionaries":function(){return"S≈Çowniki"},"navbar:surveys":function(){return"Badania"},"navbar:employers":function(){return"Pracodawcy"},"navbar:divisions":function(){return"Wydzia≈Çy"},"navbar:questions":function(){return"Pytania"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie bada≈Ñ nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie badania nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Badanie <em>"+e.v(t,"label")+"</em> zosta≈Ço usuniƒôte."},"PAGE_ACTION:print":function(){return"Wersja do druku"},"PAGE_ACTION:add":function(){return"Dodaj badanie"},"PAGE_ACTION:edit":function(){return"Edytuj badanie"},"PAGE_ACTION:editEmployeeCount":function(){return"Edytuj zatrudnienie"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ badanie"},"PAGE_ACTION:settings":function(){return"Ustawienia"},"LIST:ACTION:print":function(){return"Poka≈º wersjƒô do druku"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy badania"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania badania"},"PANEL:TITLE:editForm":function(){return"Formularz edycji badania"},"PANEL:TITLE:editEmployeeCountForm":function(){return"Formularz edycji zatrudnienia w trakcie badania"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:label":function(){return"Etykieta"},"PROPERTY:startDate":function(){return"Data rozpoczƒôcia"},"PROPERTY:endDate":function(){return"Data zako≈Ñczenia"},"PROPERTY:intro":function(){return"Wstƒôp"},"PROPERTY:employers":function(){return"Pracodawcy"},"PROPERTY:employers._id":function(){return"ID"},"PROPERTY:employers.full":function(){return"Pe≈Çna nazwa"},"PROPERTY:employers.short":function(){return"Kr√≥tka nazwa"},"PROPERTY:superiors":function(){return"Prze≈Ço≈ºeni"},"PROPERTY:superiors.full":function(){return"Pe≈Çna nazwa"},"PROPERTY:superiors.short":function(){return"Kr√≥tka nazwa"},"PROPERTY:superiors.division":function(){return"Wydzia≈Ç"},"PROPERTY:questions":function(){return"Pytania"},"PROPERTY:questions._id":function(){return"ID"},"PROPERTY:questions.short":function(){return"Kr√≥tka tre≈õƒá"},"PROPERTY:questions.full":function(){return"Pe≈Çna tre≈õƒá"},"PROPERTY:employeeCount":function(){return"Zatrudnienie"},"PROPERTY:employeeCount.division":function(){return"Wydzia≈Ç"},"PROPERTY:employeeCount.employer":function(){return"Pracodawca"},"PROPERTY:employeeCount.count":function(){return"Ilo≈õƒá pracownik√≥w"},"FORM:ACTION:add":function(){return"Dodaj badanie"},"FORM:ACTION:edit":function(){return"Edytuj badanie"},"FORM:ACTION:editEmployeeCount":function(){return"Edytuj zatrudnienie"},"FORM:ACTION:preview":function(){return"Wygeneruj podglƒÖd (ALT+P)"},"FORM:ERROR:previewFailure":function(){return"Nie uda≈Ço siƒô wygenerowaƒá podglƒÖdu :("},"FORM:ERROR:previewPopupBlocked":function(){return"WyskakujƒÖce okienko podglƒÖdu zosta≈Ço zablokowane :("},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá badania :("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá badania :("},"form:placeholder:employers":function(){return"Wybierz opcje dostƒôpne do zaznaczenia w pytaniu Jestem pracownikiem..."},"form:placeholder:questions":function(){return"Wybierz pytania ankiety..."},"form:help:_id":function(){return"Unikalny identyfikator badania wykorzystywany do ≈Çatwiejszej identyfikacji danych powiƒÖzanych z tym badaniem. Dozwolone sƒÖ tylko znaki alfanumeryczne, my≈õlnik oraz podkre≈õlenie (A-Z0-9-_). Na przyk≈Çad, rok i miesiƒÖc rozpoczƒôcia badania: 2015-07. Warto≈õci tej nie bƒôdzie mo≈ºna zmieniƒá po dodaniu."},"form:help:label":function(){return"Kr√≥tka etykieta badania wy≈õwietlana miƒôdzy innymi na wykresach por√≥wnawczych. Na przyk≈Çad, rok i miesiƒÖc badania: Lipiec 2015."},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia badania"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ badanie"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrane badanie?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá badanie <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá badania :("},"report:filter:surveys":function(){return"Badania"},"report:filter:divisions":function(){return"Wydzia≈Çy"},"report:filter:superiors":function(){return"Prze≈Ço≈ºeni"},"report:filter:employers":function(){return"Pracodawcy"},"report:responseCount:title":function(){return"Ilo≈õƒá respondent√≥w/Zatrudnienie/Respondencja"},"report:responseCount:survey":function(){return"Badanie"},"report:responseCountByDivision:title":function(){return"Ilo≈õƒá respondent√≥w wg Wydzia≈Ç√≥w z podzia≈Çem na Pracodawcƒô"},"report:responseCountByDivision:series":function(){return"Ilo≈õƒá respondent√≥w"},"report:responseCountByDivision:filename":function(){return"Opinia_IloscRespondentowWgWydzialow"},"report:responseCountBySuperior:title":function(){return"Ilo≈õƒá respondent√≥w wg Prze≈Ço≈ºonych z podzia≈Çem na Pracodawcƒô"},"report:responseCountBySuperior:series":function(){return"Ilo≈õƒá respondent√≥w"},"report:responseCountBySuperior:filename":function(){return"Opinia_IloscRespondentowWgPrzelozonego"},"report:responsePercentBySurvey:title":function(){return"Respondencja w wybranych Badaniach [%]"},"report:responsePercentBySurvey:filename":function(){return"Opinia_RespondencjaWgBadan"},"report:responsePercentByDivision:title":function(){return"Respondencja w wybranych Wydzia≈Çach [%]"},"report:responsePercentByDivision:filename":function(){return"Opinia_RespondencjaWgWydzialow"},"report:answerCountTotal:title":function(){return"Wyniki ankiety"},"report:answerCountTotal:filename":function(){return"Opinia_WynikiAnkiety"},"report:positiveAnswerPercentBySurvey:title":function(){return"≈örednia ocen pozytywnych w wybranych Badaniach [%]"},"report:positiveAnswerPercentBySurvey:filename":function(){return"Opinia_SredniaOcenWgBadan"},"report:positiveAnswerPercentByDivision:title":function(){return"≈örednia ocen pozytywnych w wybranych Wydzia≈Çach [%]"},"report:positiveAnswerPercentByDivision:filename":function(){return"Opinia_SredniaOcenWgWydzialow"},"report:answer:yes":function(){return"Zgadzam siƒô"},"report:answer:na":function(){return"Nie mam zdania"},"report:answer:no":function(){return"Nie zgadzam siƒô"},"report:refValue":function(){return"Cel"},"settings:tab:reports":function(){return"Raporty"},"settings:positiveAnswersReference":function(){return"Warto≈õƒá referencyjna ≈õredniej ocen pozytywnych [%]"},"settings:responseReference":function(){return"Warto≈õƒá referencyjna respondencji [%]"}}}),define("app/opinionSurveys/routes",["underscore","../router","../viewport","../user","../core/util/showDeleteFormPage","../core/pages/ListPage","./OpinionSurveyCollection","./OpinionSurvey","./pages/OpinionSurveyDetailsPage","./pages/OpinionSurveyAddFormPage","./pages/OpinionSurveyEditFormPage","./pages/EmployeeCountEditFormPage","./views/OpinionSurveyListView","i18n!app/nls/reports","i18n!app/nls/opinionSurveys"],function(t,e,n,r,i,o,s,a,u,c,l,p,d){"use strict";
var h=r.auth(),f=r.auth("OPINION_SURVEYS:MANAGE");e.map("/opinionSurveyReport",h,function(t){n.loadPage("app/opinionSurveys/pages/OpinionSurveyReportPage",function(e){return new e({query:t.query})})}),e.map("/opinionSurveys",f,function(t){n.showPage(new o({baseBreadcrumb:!0,ListView:d,collection:new s(null,{rqlQuery:t.rql})}))}),e.map("/opinionSurveys/:id",f,function(t){n.showPage(new u({model:new a({_id:t.params.id})}))}),e.map("/opinionSurveys;add",f,function(){n.showPage(new c({model:new a}))}),e.map("/opinionSurveys/:id;edit",f,function(t){n.showPage(new l({model:new a({_id:t.params.id})}))}),e.map("/opinionSurveys/:id;editEmployeeCount",f,function(t){n.showPage(new p({model:new a({_id:t.params.id})}))}),e.map("/opinionSurveys/:id;delete",f,t.partial(i,a,t,t,{baseBreadcrumb:!0})),e.map("/opinionSurveys;settings",f,function(t){n.loadPage("app/opinionSurveys/pages/OpinionSurveySettingsPage",function(e){return new e({initialTab:t.query.tab})})})}),define("app/opinionSurveyActions/OpinionSurveyAction",["../i18n","../time","../user","../core/Model","../opinionSurveys/dictionaries","../opinionSurveys/OpinionSurvey","app/core/templates/userInfo"],function(t,e,n,r,i,o,s){"use strict";return r.extend({urlRoot:"/opinionSurveys/actions",clientUrlRoot:"#opinionSurveyActions",topicPrefix:"opinionSurveys.actions",privilegePrefix:"OPINION_SURVEYS",nlsDomain:"opinionSurveyActions",labelAttribute:"rid",defaults:{status:"planned"},url:function(){var t=r.prototype.url.apply(this,arguments);return this.isNew()?t:t+"?populate(survey)"},serialize:function(n){var r=this.toJSON();n||(n=new o(r.survey&&r.survey._id?r.survey:{_id:r.survey})),n.cacheMaps||n.buildCacheMaps();var a=i.divisions.get(r.division);return r.division=a?a.get("short"):r.division||"?",r.survey=n.get("label")||n.id,r.createdAt=e.format(r.createdAt,"LLLL"),r.creator=s({userInfo:r.creator}),r.updatedAt=r.updatedAt?e.format(r.updatedAt,"LLLL"):"-",r.updater=s({userInfo:r.updater}),r.owners=r.owners.map(function(t){return s({userInfo:t})}).join(", "),r.superior=s({userInfo:r.superior}),r.startDate=r.startDate?e.format(r.startDate,"LL"):"-",r.finishDate=r.finishDate?e.format(r.finishDate,"LL"):"-",r.status=t("opinionSurveyActions","status:"+r.status),r.question=r.question||"-",r.problem=r.problem||"-",r.cause=r.cause||"-",r.action=r.action||"-",r},canEdit:function(){return n.isAllowedTo("OPINION_SURVEYS:MANAGE")||-1!==this.attributes.participants.indexOf(n.data._id)},canDelete:function(){return n.isAllowedTo("OPINION_SURVEYS:MANAGE")||this.attributes.creator.id===n.data._id}})}),define("app/opinionSurveyActions/OpinionSurveyActionCollection",["../core/Collection","./OpinionSurveyAction"],function(t,e){"use strict";return t.extend({model:e,rqlQuery:"limit(15)&sort(-createdAt)",initialize:function(){t.prototype.initialize.apply(this,arguments),this.usedSurveyIds=[]},parse:function(e){for(var n=t.prototype.parse.call(this,e),r={},i=0;i<n.length;++i)r[n[i].survey]=1;return this.usedSurveyIds=Object.keys(r),n}})}),define("app/opinionSurveyActions/views/OpinionSurveyActionListView",["app/core/views/ListView"],function(t){"use strict";return t.extend({className:"is-clickable",tableClassName:"table-bordered table-hover table-condensed table-striped",columns:[{id:"rid",className:"is-min"},{id:"survey",className:"is-min"},{id:"division",className:"is-min"},{id:"question",className:"opinionSurveyActions-list-long"},{id:"problem",className:"opinionSurveyActions-list-long"},{id:"cause",className:"opinionSurveyActions-list-long"},{id:"action",className:"opinionSurveyActions-list-long"},{id:"startDate",tdClassName:"is-min"},{id:"finishDate",tdClassName:"is-min"},{id:"owners",className:"opinionSurveyActions-list-long"},"superior",{id:"status",className:"is-min"}],serializeRows:function(){var t=this.opinionSurveys;return this.collection.map(function(e){return e.serialize(t.get(e.get("survey")))})},serializeActions:function(){var e=this.collection,n=e.getNlsDomain();return function(r){var i=e.get(r._id),o=[t.actions.viewDetails(i,n)];return i.canEdit()&&o.push(t.actions.edit(i,n)),i.canDelete()&&o.push(t.actions["delete"](i,n)),o}}})}),define("app/opinionSurveyActions/templates/filter",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="well filter-form opinionSurveyActions-filter">\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-survey">'),__output.push(t("opinionSurveyActions","PROPERTY:survey")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-survey" name="survey" type="text">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-division">'),__output.push(t("opinionSurveyActions","PROPERTY:division")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-division" name="division" type="text">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-participants">'),__output.push(t("opinionSurveyActions","filter:participants")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-participants" name="participants" type="text">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-status">'),__output.push(t("opinionSurveyActions","PROPERTY:status")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-status" name="status" type="text">\n  </div>\n  '),__output.push(renderLimit()),__output.push('\n  <div class="form-group filter-actions">\n    <button type="submit" class="btn btn-default"><i class="fa fa-filter"></i><span>'),__output.push(escape(t("opinionSurveyActions","filter:submit"))),__output.push("</span></button>\n  </div>\n</form>\n");return __output.join("")}}),define("app/opinionSurveyActions/views/OpinionSurveyActionFilterView",["app/i18n","app/time","app/core/views/FilterView","app/core/util/idAndLabel","app/users/util/setUpUserSelect2","app/opinionSurveys/dictionaries","app/opinionSurveyActions/templates/filter"],function(t,e,n,r,i,o,s){"use strict";return n.extend({template:s,defaultFormData:function(){return{survey:"",division:"",status:"",participants:""}},termToForm:{survey:function(t,e,n){n[t]=e.args[1]},division:"survey",status:"survey",participants:function(t,e,n){n[t]="in"===e.name?e.args[1].join(","):e.args[1]}},afterRender:function(){n.prototype.afterRender.call(this),this.$id("survey").select2({width:175,allowClear:!0,placeholder:" ",minimumResultsForSearch:-1,data:this.model.opinionSurveys.map(r)}),this.$id("division").select2({width:150,allowClear:!0,data:o.divisions.map(r)}),this.$id("status").select2({width:200,allowClear:!0,placeholder:" ",minimumResultsForSearch:-1,data:o.actionStatuses.map(function(e){return{id:e,text:t("opinionSurveyActions","status:"+e)}})}),i(this.$id("participants"),{width:300,view:this})},serializeFormToQuery:function(t){["survey","division","status","participants"].forEach(function(e){var n=this.$id(e).val();n.length&&t.push({name:"eq",args:[e,n]})},this)}})}),define("app/opinionSurveyActions/pages/OpinionSurveyActionListPage",["app/i18n","app/user","app/core/util/bindLoadingMessage","app/core/util/pageActions","app/core/pages/FilteredListPage","app/opinionSurveys/OpinionSurveyCollection","app/opinionSurveys/dictionaries","../views/OpinionSurveyActionListView","../views/OpinionSurveyActionFilterView"],function(t,e,n,r,i,o,s,a,u){"use strict";return i.extend({baseBreadcrumb:!0,actions:function(){var t=this.collection;return[r.jump(this,t),r.add(t,function(){return e.isAllowedTo("OPINION_SURVEYS:MANAGE")||"manager"===e.data.prodFunction||"master"===e.data.prodFunction})]},defineModels:function(){i.prototype.defineModels.apply(this,arguments),this.opinionSurveys=n(new o(null,{rqlQuery:"select(label,superiors,questions)&sort(-startDate)"}),this),this.listenToOnce(this.opinionSurveys,"reset",function(){this.opinionSurveys.buildCacheMaps()})},createFilterView:function(){return new u({model:{rqlQuery:this.collection.rqlQuery,opinionSurveys:this.opinionSurveys}})},createListView:function(){return new a({collection:this.collection,opinionSurveys:this.opinionSurveys})},destroy:function(){i.prototype.destroy.call(this),s.unload()},load:function(t){return t(this.collection.fetch({reset:!0}),this.opinionSurveys.fetch({reset:!0}),s.load())},afterRender:function(){i.prototype.afterRender.call(this),s.load()}})}),define("app/opinionSurveyActions/templates/details",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div>\n  <div class="panel panel-primary">\n    <div class="panel-heading">'),__output.push(t("opinionSurveyActions","PANEL:TITLE:details")),__output.push('</div>\n    <div class="panel-details row">\n      <div class="col-md-6">\n        <div class="props first">\n          <div class="prop">\n            <div class="prop-name">'),__output.push(t("opinionSurveyActions","PROPERTY:rid")),__output.push('</div>\n            <div class="prop-value">'),__output.push(model.rid),__output.push('</div>\n          </div>\n          <div class="prop">\n            <div class="prop-name">'),__output.push(t("opinionSurveyActions","PROPERTY:survey")),__output.push('</div>\n            <div class="prop-value">'),__output.push(escape(model.survey)),__output.push('</div>\n          </div>\n          <div class="prop">\n            <div class="prop-name">'),__output.push(t("opinionSurveyActions","PROPERTY:status")),__output.push('</div>\n            <div class="prop-value">'),__output.push(model.status),__output.push('</div>\n          </div>\n          <div class="prop">\n            <div class="prop-name">'),__output.push(t("opinionSurveyActions","PROPERTY:division")),__output.push('</div>\n            <div class="prop-value">'),__output.push(escape(model.division)),__output.push('</div>\n          </div>\n          <div class="prop">\n            <div class="prop-name">'),__output.push(t("opinionSurveyActions","PROPERTY:superior")),__output.push('</div>\n            <div class="prop-value">'),__output.push(model.superior),__output.push('</div>\n          </div>\n          <div class="prop">\n            <div class="prop-name">'),__output.push(t("opinionSurveyActions","PROPERTY:owners")),__output.push('</div>\n            <div class="prop-value">'),__output.push(model.owners),__output.push('</div>\n          </div>\n        </div>\n      </div>\n      <div class="col-md-6">\n        <div class="props">\n          <div class="prop">\n            <div class="prop-name">'),__output.push(t("opinionSurveyActions","PROPERTY:startDate")),__output.push('</div>\n            <div class="prop-value">'),__output.push(model.startDate),__output.push('</div>\n          </div>\n          <div class="prop">\n            <div class="prop-name">'),__output.push(t("opinionSurveyActions","PROPERTY:finishDate")),__output.push('</div>\n            <div class="prop-value">'),__output.push(model.finishDate),__output.push('</div>\n          </div>\n          <div class="prop">\n            <div class="prop-name">'),__output.push(t("opinionSurveyActions","PROPERTY:createdAt")),__output.push('</div>\n            <div class="prop-value">'),__output.push(model.createdAt),__output.push('</div>\n          </div>\n          <div class="prop">\n            <div class="prop-name">'),__output.push(t("opinionSurveyActions","PROPERTY:creator")),__output.push('</div>\n            <div class="prop-value">'),__output.push(model.creator),__output.push('</div>\n          </div>\n          <div class="prop">\n            <div class="prop-name">'),__output.push(t("opinionSurveyActions","PROPERTY:updatedAt")),__output.push('</div>\n            <div class="prop-value">'),__output.push(model.updatedAt),__output.push('</div>\n          </div>\n          <div class="prop">\n            <div class="prop-name">'),__output.push(t("opinionSurveyActions","PROPERTY:updater")),__output.push('</div>\n            <div class="prop-value">'),__output.push(model.updater),__output.push('</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-lg-3">\n      <div class="panel panel-default">\n        <div class="panel-heading">'),__output.push(t("opinionSurveyActions","PROPERTY:question")),__output.push('</div>\n        <div class="panel-body">\n          <p class="opinionSurveyActions-details-text">'),__output.push(escape(model.question)),__output.push('</p>\n        </div>\n      </div>\n    </div>\n    <div class="col-lg-3">\n      <div class="panel panel-danger">\n        <div class="panel-heading">'),__output.push(t("opinionSurveyActions","PROPERTY:problem")),__output.push('</div>\n        <div class="panel-body">\n          <p class="opinionSurveyActions-details-text">'),__output.push(escape(model.problem)),__output.push('</p>\n        </div>\n      </div>\n    </div>\n    <div class="col-lg-3">\n      <div class="panel panel-warning">\n        <div class="panel-heading">'),__output.push(t("opinionSurveyActions","PROPERTY:cause")),__output.push('</div>\n        <div class="panel-body">\n          <p class="opinionSurveyActions-details-text">'),__output.push(escape(model.cause)),__output.push('</p>\n        </div>\n      </div>\n    </div>\n    <div class="col-lg-3">\n      <div class="panel panel-success">\n        <div class="panel-heading">'),__output.push(t("opinionSurveyActions","PROPERTY:action")),__output.push('</div>\n        <div class="panel-body">\n          <p class="opinionSurveyActions-details-text">'),__output.push(escape(model.action)),__output.push("</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n");return __output.join("")}}),define("app/opinionSurveyActions/pages/OpinionSurveyActionDetailsPage",["app/core/util/pageActions","app/core/pages/DetailsPage","app/opinionSurveys/dictionaries","app/opinionSurveyActions/templates/details"],function(t,e,n,r){"use strict";return e.extend({detailsTemplate:r,baseBreadcrumb:!0,actions:function(){var e=this[this.modelProperty],n=[];return e.canEdit()&&n.push(t.edit(e,!1)),e.canDelete()&&n.push(t["delete"](e,!1)),n},destroy:function(){e.prototype.destroy.call(this),n.unload()},load:function(t){return t(this.model.fetch(),n.load())},afterRender:function(){e.prototype.afterRender.call(this),n.load()}})}),define("app/opinionSurveyActions/templates/form",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form method="post" action="'),__output.push(formAction),__output.push('">\n  <input type="hidden" name="_method" value="'),__output.push(formMethod),__output.push('">\n  <div class="panel panel-primary">\n    <div class="panel-heading">'),__output.push(panelTitleText),__output.push('</div>\n    <div class="panel-body">\n      <div class="form-group has-required-select2">\n        <label for="'),__output.push(idPrefix),__output.push('-survey" class="control-label is-required">'),__output.push(t("opinionSurveyActions","PROPERTY:survey")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-survey" name="survey" type="text" required>\n      </div>\n      <div class="form-group has-required-select2">\n        <label for="'),__output.push(idPrefix),__output.push('-division" class="control-label is-required">'),__output.push(t("opinionSurveyActions","PROPERTY:division")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-division" name="division" type="text" required>\n      </div>\n      <div class="form-group has-required-select2">\n        <label for="'),__output.push(idPrefix),__output.push('-owners" class="control-label is-required">'),__output.push(t("opinionSurveyActions","PROPERTY:owners")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-owners" name="owners" type="text" required>\n      </div>\n      <div class="form-group has-required-select2">\n        <label for="'),__output.push(idPrefix),__output.push('-superior" class="control-label is-required">'),__output.push(t("opinionSurveyActions","PROPERTY:superior")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-superior" name="superior" type="text" required>\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-questionList" class="control-label is-required">'),__output.push(t("opinionSurveyActions","PROPERTY:question")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-questionList" type="text">\n        <textarea id="'),__output.push(idPrefix),__output.push('-question" name="question" class="form-control opinionSurveyActions-form-question" rows="3" required></textarea>\n      </div>\n      <div class="row">\n        <div class="form-group col-md-4">\n          <label for="'),__output.push(idPrefix),__output.push('-problem" class="control-label">'),__output.push(t("opinionSurveyActions","PROPERTY:problem")),__output.push('</label>\n          <textarea id="'),__output.push(idPrefix),__output.push('-problem" name="problem" class="form-control" rows="3"></textarea>\n        </div>\n        <div class="form-group col-md-4">\n          <label for="'),__output.push(idPrefix),__output.push('-cause" class="control-label">'),__output.push(t("opinionSurveyActions","PROPERTY:cause")),__output.push('</label>\n          <textarea id="'),__output.push(idPrefix),__output.push('-cause" name="cause" class="form-control" rows="3"></textarea>\n        </div>\n        <div class="form-group col-md-4">\n          <label for="'),__output.push(idPrefix),__output.push('-action" class="control-label">'),__output.push(t("opinionSurveyActions","PROPERTY:action")),__output.push('</label>\n          <textarea id="'),__output.push(idPrefix),__output.push('-action" name="action" class="form-control" rows="3"></textarea>\n        </div>\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-status" class="control-label">'),__output.push(t("opinionSurveyActions","PROPERTY:status")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-status" name="status" type="text">\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-startDate" class="control-label">'),__output.push(t("opinionSurveyActions","PROPERTY:startDate")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-startDate" name="startDate" class="form-control" type="date">\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-finishDate" class="control-label">'),__output.push(t("opinionSurveyActions","PROPERTY:finishDate")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-finishDate" name="finishDate" class="form-control" type="date">\n      </div>\n    </div>\n    <div class="panel-footer">\n      <button type="submit" class="btn btn-primary">'),__output.push(formActionText),__output.push("</button>\n    </div>\n  </div>\n</form>\n");return __output.join("")}}),define("app/opinionSurveyActions/views/OpinionSurveyActionFormView",["underscore","app/i18n","app/time","app/user","app/core/views/FormView","app/core/util/idAndLabel","app/users/util/setUpUserSelect2","app/opinionSurveys/dictionaries","app/opinionSurveys/util/formatQuestionResult","app/opinionSurveyActions/templates/form"],function(t,e,n,r,i,o,s,a,u,c){"use strict";function l(t){return{id:t.id,label:t.text.replace(/\s*\(.*?\)$/,"")}}return i.extend({template:c,events:t.extend({"change #-survey":function(t){this.selectSurvey(t.added.id)},"change #-division":function(t){this.selectDivision(t.added.id)},"change #-questionList":function(t){t.added&&this.$id("question").val(t.added.full).focus()}},i.prototype.events),serializeToForm:function(){var t=this.model.toJSON();return t.owners=t.owners?t.owners.map(function(t){return t.id}).join(","):"",t.superior=t.superior?t.superior.id:"",t.startDate=t.startDate?n.format(t.startDate,"YYYY-MM-DD"):"",t.endDate=t.endDate?n.format(t.endDate,"YYYY-MM-DD"):"",t},serializeForm:function(t){return t.superior=l(this.$id("superior").select2("data")),t.owners=this.$id("owners").select2("data").map(l),t.startDate=t.startDate?n.getMoment(t.startDate,"YYYY-MM-DD").toISOString():"",t.endDate=t.endDate?n.getMoment(t.endDate,"YYYY-MM-DD").toISOString():"",t},afterRender:function(){if(i.prototype.afterRender.call(this),this.$id("survey").select2({minimumResultsForSearch:5,data:this.model.surveys.map(o)}),s(this.$id("superior"),{view:this,textFormatter:function(t,e,n){return t.personellId&&n&&/^[0-9]+$/.test(n.term)?e+=" ("+t.personellId+")":"division"===t.orgUnitType&&(e+=" ("+t.orgUnitId+")"),e}}),this.$id("status").select2({minimumResultsForSearch:-1,data:a.actionStatuses.map(function(t){return{id:t,text:e("opinionSurveyActions","status:"+t)}})}),this.options.editMode)this.selectSurvey(this.model.get("survey")._id),this.$id("problem").focus();else if(this.model.surveys.length){this.selectSurvey(this.model.surveys.at(0).id);var t=r.getDivision();t&&this.selectDivision(t.id),this.$id(1===this.model.surveys.length?"division":"survey").focus()}else this.setUpDivisionSelect2([]),this.setUpOwnersSelect2([]),this.setUpQuestionSelect2([]),this.$id("survey").focus()},setUpDivisionSelect2:function(t){this.$id("division").select2({minimumResultsForSearch:2,data:t.map(function(t){var e=a.divisions.get(t);return{id:e.id,text:e.get("full")+" ("+e.get("short")+")"}})})},setUpOwnersSelect2:function(t){this.$id("owners").select2({minimumResultsForSearch:7,multiple:!0,data:t.map(function(t){return{id:t._id,text:t.full+" ("+t.division+")",division:t.division}})})},setUpQuestionSelect2:function(t){this.$id("questionList").select2({minimumResultsForSearch:-1,formatResult:u,data:t.map(function(t){return{id:t._id,text:t["short"],"short":t["short"],full:t.full}})})},selectSurvey:function(t){var e=this.model.surveys.get(t);e&&(this.setUpDivisionSelect2(Object.keys(e.cacheMaps.divisions)),this.setUpOwnersSelect2(e.get("superiors")),this.setUpQuestionSelect2(e.get("questions")),this.$id("survey").select2("val",e.id))},selectDivision:function(t){var e=this.model.surveys.get(this.$id("survey").val()),n=e.cacheMaps.divisions[t].map(function(t){return t._id});this.$id("owners").select2("val",n);var r=this,i=this.ajax({url:"/users?select(firstName,lastName)&prodFunction=manager&orgUnitId="+t});i.done(function(e){if(e&&e.totalCount){var n=e.collection[0];r.$id("superior").select2("data",{id:n._id,text:n.lastName+" "+n.firstName+" ("+t+")"})}}),this.$id("division").select2("val",t)}})}),define("app/opinionSurveyActions/pages/OpinionSurveyActionAddFormPage",["app/core/pages/AddFormPage","app/core/util/bindLoadingMessage","app/opinionSurveys/dictionaries","app/opinionSurveys/OpinionSurveyCollection","../views/OpinionSurveyActionFormView"],function(t,e,n,r,i){"use strict";return t.extend({baseBreadcrumb:!0,FormView:i,defineModels:function(){t.prototype.defineModels.apply(this,arguments),this.model.surveys=e(new r(null,{rqlQuery:"sort(-startDate)"}),this),this.listenToOnce(this.model.surveys,"reset",function(){this.model.surveys.buildCacheMaps()})},load:function(t){return t(this.model.surveys.fetch({reset:!0}),n.load())},destroy:function(){t.prototype.destroy.call(this),n.unload()},afterRender:function(){t.prototype.afterRender.call(this),n.load()}})}),define("app/opinionSurveyActions/pages/OpinionSurveyActionEditFormPage",["app/core/pages/EditFormPage","app/core/util/bindLoadingMessage","app/opinionSurveys/dictionaries","app/opinionSurveys/OpinionSurveyCollection","../views/OpinionSurveyActionFormView"],function(t,e,n,r,i){"use strict";return t.extend({baseBreadcrumb:!0,FormView:i,defineModels:function(){t.prototype.defineModels.apply(this,arguments),this.model.surveys=e(new r(null,{rqlQuery:"sort(-startDate)"}),this),this.listenToOnce(this.model.surveys,"reset",function(){this.model.surveys.buildCacheMaps()})},load:function(t){return t(this.model.fetch(),this.model.surveys.fetch({reset:!0}),n.load())},destroy:function(){t.prototype.destroy.call(this),n.unload()},afterRender:function(){t.prototype.afterRender.call(this),n.load()}})}),define("app/nls/opinionSurveyActions",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:base":function(){return"Opinion survey"},"BREADCRUMBS:browse":function(){return"Corrective corrective actions"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the corrective actions :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the corrective action :("},"MSG:DELETED":function(t){return"Corrective corrective action <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add corrective action"},"PAGE_ACTION:edit":function(){return"Edit corrective action"},"PAGE_ACTION:delete":function(){return"Delete corrective action"},"PANEL:TITLE:details":function(){return"Corrective corrective action's details"},"PANEL:TITLE:addForm":function(){return"Add corrective action form"},"PANEL:TITLE:editForm":function(){return"Edit corrective action form"},"PROPERTY:":function(){return""},"FORM:ACTION:add":function(){return"Add corrective action"},"FORM:ACTION:edit":function(){return"Edit corrective action"},"FORM:ERROR:addFailure":function(){return"Failed to add the new corrective action :("},"FORM:ERROR:editFailure":function(){return"Failed to edit the corrective action :("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Corrective corrective action deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete corrective action"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen corrective action?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> corrective action?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the corrective action :-("}},pl:!0}}),define("app/nls/pl/opinionSurveyActions",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:base":function(){return"Badanie Opinia"},"BREADCRUMBS:browse":function(){return"Akcje naprawcze"},"BREADCRUMBS:details":function(){return"Akcja naprawcza"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie akcji naprawczych nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie akcji naprawczej nie powiod≈Ço siƒô :("},"MSG:DELETED":function(){return"Akcja naprawcza zosta≈Ça usuniƒôta."},"MSG:jump:404":function(t){return"Nie znaleziono akcji naprawczej o ID <em>"+e.v(t,"rid")+"</em> :("},"PAGE_ACTION:add":function(){return"Dodaj akcjƒô"},"PAGE_ACTION:edit":function(){return"Edytuj akcjƒô"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ akcjƒô"},"PAGE_ACTION:jump:title":function(){return"Skocz do akcji po ID"},"PAGE_ACTION:jump:placeholder":function(){return"ID akcji"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy akcji naprawczej"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania akcji naprawczej"},"PANEL:TITLE:editForm":function(){return"Formularz edycji akcji naprawczej"},"PROPERTY:rid":function(){return"ID"},"PROPERTY:creator":function(){return"Dodana przez"},"PROPERTY:createdAt":function(){return"Czas dodania"},"PROPERTY:updater":function(){return"Zmieniona przez"},"PROPERTY:updatedAt":function(){return"Czas zmiany"},"PROPERTY:survey":function(){return"Badanie"},"PROPERTY:division":function(){return"Wydzia≈Ç"},"PROPERTY:question":function(){return"Pytanie"},"PROPERTY:problem":function(){return"Problem"},"PROPERTY:cause":function(){return"Przyczyna"},"PROPERTY:action":function(){return"Przeciwdzia≈Çanie"},"PROPERTY:startDate":function(){return"Termin rozpoczƒôcia"},"PROPERTY:finishDate":function(){return"Termin zrealizowania"},"PROPERTY:owners":function(){return"W≈Ça≈õciciele"},"PROPERTY:superior":function(){return"Prze≈Ço≈ºony"},"PROPERTY:status":function(){return"Status"},"FORM:ACTION:add":function(){return"Dodaj akcjƒô naprawczƒÖ"},"FORM:ACTION:edit":function(){return"Edytuj akcjƒô naprawczƒÖ"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá akcji naprawczej :("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá akcji naprawczej :("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia akcji naprawczej"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ akcjƒô naprawczƒÖ"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybranƒÖ akcjƒô naprawczƒÖ?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybranƒÖ akcjƒô naprawczƒÖ?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá akcji naprawczej :("},"filter:participants":function(){return"W≈Ça≈õciciel/Prze≈Ço≈ºony"},"filter:submit":function(){return"Filtruj akcje"},"status:planned":function(){return"Zaplanowana"},"status:progress":function(){return"W realizacji"},"status:done":function(){return"Zrealizowana"},"status:failed":function(){return"Niezrealizowana"},"status:late":function(){return"Sp√≥≈∫niona"}}}),define("app/opinionSurveyActions/routes",["underscore","../router","../viewport","../user","../core/util/showDeleteFormPage","./OpinionSurveyActionCollection","./OpinionSurveyAction","./pages/OpinionSurveyActionListPage","./pages/OpinionSurveyActionDetailsPage","./pages/OpinionSurveyActionAddFormPage","./pages/OpinionSurveyActionEditFormPage","i18n!app/nls/opinionSurveyActions"],function(t,e,n,r,i,o,s,a,u,c,l){"use strict";var p=r.auth(),d=r.auth("OPINION_SURVEYS:MANAGE","FN:manager","FN:master");e.map("/opinionSurveyActions",p,function(t){n.showPage(new a({collection:new o(null,{rqlQuery:t.rql})}))}),e.map("/opinionSurveyActions/:id",p,function(t){n.showPage(new u({model:new s({_id:t.params.id})}))}),e.map("/opinionSurveyActions;add",d,function(){n.showPage(new c({model:new s}))
}),e.map("/opinionSurveyActions/:id;edit",d,function(t){n.showPage(new l({model:new s({_id:t.params.id})}))}),e.map("/opinionSurveyActions/:id;delete",d,t.partial(i,s,t,t,{baseBreadcrumb:!0}))}),define("app/opinionSurveyResponses/OpinionSurveyResponse",["../time","../core/Model","../opinionSurveys/dictionaries","../opinionSurveys/OpinionSurvey","app/core/templates/userInfo"],function(t,e,n,r,i){"use strict";return e.extend({urlRoot:"/opinionSurveys/responses",clientUrlRoot:"#opinionSurveyResponses",topicPrefix:"opinionSurveys.responses",privilegePrefix:"OPINION_SURVEYS",nlsDomain:"opinionSurveyResponses",getLabel:function(){return null},url:function(){var t=e.prototype.url.apply(this,arguments);return this.isNew()?t:t+"?populate(survey)"},serialize:function(e){var o=this.toJSON();e||(e=new r(o.survey._id?o.survey:{_id:o.survey})),e.cacheMaps||e.buildCacheMaps();var s=n.employers.get(o.employer),a=e.cacheMaps.superiors[o.superior],u=n.divisions.get(o.division);return o.survey=e.get("label")||e.id,o.createdAt=t.format(o.createdAt,"LLLL"),o.creator=i({userInfo:o.creator}),o.employer=s?s.get("short"):o.employer||"?",o.superior=a?a["short"]:o.superior||"?",o.division=u?u.get("short"):o.division||"?",o.answers=o.answers.map(function(t){return{question:e.cacheMaps.questions[t.question],answer:t.answer}}),o}})}),define("app/opinionSurveyResponses/OpinionSurveyResponseCollection",["../core/Collection","./OpinionSurveyResponse"],function(t,e){"use strict";return t.extend({model:e,rqlQuery:"limit(15)&sort(-createdAt)",initialize:function(){t.prototype.initialize.apply(this,arguments),this.usedSurveyIds=[]},parse:function(e){for(var n=t.prototype.parse.call(this,e),r={},i=0;i<n.length;++i)r[n[i].survey]=1;return this.usedSurveyIds=Object.keys(r),n}})}),define("app/opinionSurveyResponses/views/OpinionSurveyResponseListView",["underscore","app/i18n","app/time","app/user","app/viewport","app/core/views/ListView","app/opinionSurveys/dictionaries"],function(t,e,n,r,i,o){"use strict";var s={yes:"thumbs-up",no:"thumbs-down",na:"question"};return o.extend({className:"is-clickable",serializeColumns:function(){var e=[{id:"survey",className:"is-min"},{id:"division",className:"is-min"},{id:"superior",className:"is-min"},{id:"employer",className:"is-min"}],n={},r=this.opinionSurveys;return t.forEach(this.collection.usedSurveyIds,function(t){var i=r.get(t);i&&i.get("questions").forEach(function(t){n[t._id]||(e.push({id:"Q-"+t._id,label:t["short"],thClassName:"is-min",tdClassName:"is-min opinionSurveyResponses-answer",noData:""}),n[t._id]=!0)})}),e.push({id:"null",label:"&nbsp;",noData:""}),e},serializeRows:function(){var t=this.opinionSurveys;return this.collection.map(function(e){var n=t.get(e.get("survey")),r=e.serialize(n);return e.get("answers").forEach(function(t){r["Q-"+t.question]='<i class="fa fa-'+s[t.answer]+'"></i>'}),r})}})}),define("app/opinionSurveyResponses/templates/filter",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form class="well filter-form opinionSurveyResponses-filter">\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-survey">'),__output.push(t("opinionSurveyResponses","PROPERTY:survey")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-survey" name="survey" type="text">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-division">'),__output.push(t("opinionSurveyResponses","PROPERTY:division")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-division" name="division" type="text">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-employer">'),__output.push(t("opinionSurveyResponses","PROPERTY:employer")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-employer" name="employer" type="text">\n  </div>\n  <div class="form-group">\n    <label for="'),__output.push(idPrefix),__output.push('-superior">'),__output.push(t("opinionSurveyResponses","PROPERTY:superior")),__output.push('</label>\n    <input id="'),__output.push(idPrefix),__output.push('-superior" name="superior" type="text">\n  </div>\n  '),__output.push(renderLimit()),__output.push('\n  <div class="form-group filter-actions">\n    <button type="submit" class="btn btn-default"><i class="fa fa-filter"></i><span>'),__output.push(escape(t("opinionSurveyResponses","filter:submit"))),__output.push("</span></button>\n  </div>\n</form>\n");return __output.join("")}}),define("app/opinionSurveyResponses/views/OpinionSurveyResponseFilterView",["app/time","app/core/views/FilterView","app/core/util/idAndLabel","app/users/util/setUpUserSelect2","app/opinionSurveys/dictionaries","app/opinionSurveyResponses/templates/filter"],function(t,e,n,r,i,o){"use strict";return e.extend({template:o,defaultFormData:function(){return{survey:"",division:"",superior:"",employer:""}},termToForm:{survey:function(t,e,n){n[t]=e.args[1]},division:function(t,e,n){n[t]="in"===e.name?e.args[1].join(","):e.args[1]},superior:"division",employer:"division"},afterRender:function(){e.prototype.afterRender.call(this),this.$id("survey").select2({width:175,allowClear:!0,placeholder:" ",minimumResultsForSearch:-1,data:this.model.opinionSurveys.map(n)}),this.$id("division").select2({width:225,multiple:!0,allowClear:!0,data:i.divisions.map(n)}),this.$id("employer").select2({width:200,multiple:!0,allowClear:!0,data:i.employers.map(n)}),r(this.$id("superior"),{width:500,multiple:!0,view:this})},serializeFormToQuery:function(t){var e=this.$id("survey").val();e.length&&t.push({name:"eq",args:["survey",e]}),["division","employer","superior"].forEach(function(e){var n=this.$id(e).val().split(",");n.length>1?t.push({name:"in",args:[e,n]}):""!==n[0]&&t.push({name:"eq",args:[e,n[0]]})},this)}})}),define("app/opinionSurveyResponses/pages/OpinionSurveyResponseListPage",["app/i18n","app/core/util/bindLoadingMessage","app/core/pages/FilteredListPage","app/opinionSurveys/OpinionSurveyCollection","app/opinionSurveys/dictionaries","../views/OpinionSurveyResponseListView","../views/OpinionSurveyResponseFilterView"],function(t,e,n,r,i,o,s){"use strict";return n.extend({baseBreadcrumb:!0,defineModels:function(){n.prototype.defineModels.apply(this,arguments),this.opinionSurveys=e(new r(null,{rqlQuery:"select(label,superiors,questions)&sort(-startDate)"}),this),this.listenToOnce(this.opinionSurveys,"reset",function(){this.opinionSurveys.buildCacheMaps()})},createFilterView:function(){return new s({model:{rqlQuery:this.collection.rqlQuery,opinionSurveys:this.opinionSurveys}})},createListView:function(){return new o({collection:this.collection,opinionSurveys:this.opinionSurveys})},destroy:function(){n.prototype.destroy.call(this),i.unload()},load:function(t){return t(this.collection.fetch({reset:!0}),this.opinionSurveys.fetch({reset:!0}),i.load())},afterRender:function(){n.prototype.afterRender.call(this),i.load()}})}),define("app/opinionSurveyResponses/templates/details",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div>\n  <div class="panel panel-primary">\n    <div class="panel-heading">'),__output.push(t("opinionSurveyResponses","PANEL:TITLE:details")),__output.push('</div>\n    <div class="panel-details">\n      <div class="props first">\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("opinionSurveyResponses","PROPERTY:createdAt")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model.createdAt),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("opinionSurveyResponses","PROPERTY:creator")),__output.push('</div>\n          <div class="prop-value">'),__output.push(model.creator),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("opinionSurveyResponses","PROPERTY:survey")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.survey)),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("opinionSurveyResponses","PROPERTY:employer")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.employer)),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("opinionSurveyResponses","PROPERTY:superior")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.superior)),__output.push('</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">'),__output.push(t("opinionSurveyResponses","PROPERTY:division")),__output.push('</div>\n          <div class="prop-value">'),__output.push(escape(model.division)),__output.push('</div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="panel panel-default">\n    <div class="panel-heading">'),__output.push(t("opinionSurveyResponses","PANEL:TITLE:comment")),__output.push('</div>\n    <div class="panel-body">\n      '),__output.push(escape(model.comment||t("opinionSurveyResponses","noComment"))),__output.push('\n    </div>\n  </div>\n  <div class="panel panel-default">\n    <div class="panel-heading">'),__output.push(t("opinionSurveyResponses","PANEL:TITLE:answers")),__output.push('</div>\n    <table class="table table-bordered table-condensed">\n      <thead>\n      <tr>\n        <th class="is-min">'),__output.push(t("opinionSurveys","PROPERTY:questions._id")),__output.push('</th>\n        <th class="is-min">'),__output.push(t("opinionSurveys","PROPERTY:questions.short")),__output.push("</th>\n        <th>"),__output.push(t("opinionSurveys","PROPERTY:questions.full")),__output.push('</th>\n        <th class="is-min">'),__output.push(t("opinionSurveyResponses","PROPERTY:answer")),__output.push("</th>\n      </tr>\n      </thead>\n      <tbody>\n      "),model.answers.forEach(function(e){__output.push('\n      <tr>\n        <td class="is-min">'),__output.push(e.question._id),__output.push('</td>\n        <td class="is-min">'),__output.push(escape(e.question["short"])),__output.push("</td>\n        <td>"),__output.push(escape(e.question.full)),__output.push('</td>\n        <td class="is-min">'),__output.push(t("opinionSurveyResponses","answer:"+e.answer)),__output.push("</td>\n      </tr>\n      ")}),__output.push("\n      </tbody>\n    </table>\n  </div>\n</div>\n");return __output.join("")}}),define("app/opinionSurveyResponses/pages/OpinionSurveyResponseDetailsPage",["app/core/pages/DetailsPage","app/opinionSurveys/dictionaries","app/opinionSurveyResponses/templates/details"],function(t,e,n){"use strict";return t.extend({detailsTemplate:n,baseBreadcrumb:!0,destroy:function(){t.prototype.destroy.call(this),e.unload()},load:function(t){return t(this.model.fetch(),e.load())},afterRender:function(){t.prototype.afterRender.call(this),e.load()}})}),define("app/opinionSurveyResponses/templates/form",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form method="post" action="'),__output.push(formAction),__output.push('">\n  <input type="hidden" name="_method" value="'),__output.push(formMethod),__output.push('">\n  <div class="panel panel-primary">\n    <div class="panel-heading">'),__output.push(panelTitleText),__output.push('</div>\n    <div class="panel-body">\n      <div class="form-group has-required-select2">\n        <label for="'),__output.push(idPrefix),__output.push('-survey" class="control-label is-required">'),__output.push(t("opinionSurveyResponses","PROPERTY:survey")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-survey" name="survey" type="text" required>\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-comment" class="control-label">'),__output.push(t("opinionSurveyResponses","PROPERTY:comment")),__output.push('</label>\n        <textarea id="'),__output.push(idPrefix),__output.push('-comment" name="comment" class="form-control" rows="3"></textarea>\n      </div>\n      <div class="form-group has-required-select2">\n        <label for="'),__output.push(idPrefix),__output.push('-employer" class="control-label is-required">'),__output.push(t("opinionSurveyResponses","PROPERTY:employer")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-employer" name="employer" type="text" required>\n      </div>\n      <div class="form-group has-required-select2">\n        <label for="'),__output.push(idPrefix),__output.push('-superior" class="control-label is-required">'),__output.push(t("opinionSurveyResponses","PROPERTY:superior")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-superior" name="superior" type="text" required>\n      </div>\n      <div id="'),__output.push(idPrefix),__output.push('-answers" class="opinionSurveyResponses-form-answers"></div>\n    </div>\n    <div class="panel-footer">\n      <button type="submit" class="btn btn-primary">'),__output.push(formActionText),__output.push("</button>\n    </div>\n  </div>\n</form>\n");return __output.join("")}}),define("app/opinionSurveyResponses/templates/formAnswer",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="form-group">\n  <label for="'),__output.push(idPrefix),__output.push("-answers-"),__output.push(question._id),__output.push('" class="control-label">'),__output.push(escape(question["short"])),__output.push('</label>\n  <p class="help-block">'),__output.push(escape(question.full)),__output.push('</p>\n  <input type="hidden" name="answers['),__output.push(index),__output.push('].question" value="'),__output.push(question._id),__output.push('">\n  '),["yes","no","na"].forEach(function(e){__output.push('\n  <label class="radio-inline">\n    <input type="radio" name="answers['),__output.push(index),__output.push('].answer" value="'),__output.push(e),__output.push('" '),__output.push(value===e?"checked":""),__output.push("> "),__output.push(t("opinionSurveyResponses","answer:"+e)),__output.push("\n  </label>\n  ")}),__output.push("\n</div>\n");return __output.join("")}}),define("app/opinionSurveyResponses/views/OpinionSurveyResponseFormView",["underscore","app/core/views/FormView","app/core/util/idAndLabel","app/opinionSurveyResponses/templates/form","app/opinionSurveyResponses/templates/formAnswer"],function(t,e,n,r,i){"use strict";return e.extend({template:r,events:t.extend({"change #-survey":function(t){this.selectSurvey(t.added.id)}},e.prototype.events),afterRender:function(){e.prototype.afterRender.call(this),this.$id("survey").select2({minimumResultsForSearch:5,data:this.model.surveys.map(n)}),this.options.editMode?(this.selectSurvey(this.model.get("survey")._id),this.$id("comment").focus()):this.model.surveys.length?(this.selectSurvey(this.model.surveys.at(0).id),this.$id(1===this.model.surveys.length?"comment":"survey").focus()):(this.setUpEmployerSelect2([]),this.setUpSuperiorSelect2([]),this.$id("survey").focus())},setUpEmployerSelect2:function(t){this.$id("employer").select2({minimumResultsForSearch:5,data:t.map(function(t){return{id:t._id,text:t.full}})})},setUpSuperiorSelect2:function(t){this.$id("superior").select2({minimumResultsForSearch:5,data:t.map(function(t){return{id:t._id,text:t.full+" ("+t.division+")",division:t.division}})})},selectSurvey:function(t){var e=this.model.surveys.get(t);if(e){this.setUpEmployerSelect2(e.get("employers")),this.setUpSuperiorSelect2(e.get("superiors"));var n=this.idPrefix,r=this.model.get("answers")||[],o=e.get("questions").map(function(t,e){return i({idPrefix:n,index:e,question:t,value:r[e]?r[e].answer:"na"})});this.$id("survey").select2("val",t),this.$id("answers").html(o.join(""))}},serializeForm:function(t){return t.division=this.$id("superior").select2("data").division,t}})}),define("app/opinionSurveyResponses/pages/OpinionSurveyResponseAddFormPage",["app/core/pages/AddFormPage","app/core/util/bindLoadingMessage","app/opinionSurveys/dictionaries","app/opinionSurveys/OpinionSurveyCollection","../views/OpinionSurveyResponseFormView"],function(t,e,n,r,i){"use strict";return t.extend({baseBreadcrumb:!0,FormView:i,defineModels:function(){t.prototype.defineModels.apply(this,arguments),this.model.surveys=e(new r(null,{rqlQuery:"sort(-startDate)"}),this),this.listenToOnce(this.model.surveys,"reset",function(){this.model.surveys.buildCacheMaps()})},load:function(t){return t(this.model.surveys.fetch({reset:!0}),n.load())},destroy:function(){t.prototype.destroy.call(this),n.unload()},afterRender:function(){t.prototype.afterRender.call(this),n.load()}})}),define("app/opinionSurveyResponses/pages/OpinionSurveyResponseEditFormPage",["app/core/pages/EditFormPage","app/core/util/bindLoadingMessage","app/opinionSurveys/dictionaries","app/opinionSurveys/OpinionSurveyCollection","../views/OpinionSurveyResponseFormView"],function(t,e,n,r,i){"use strict";return t.extend({baseBreadcrumb:!0,FormView:i,defineModels:function(){t.prototype.defineModels.apply(this,arguments),this.model.surveys=e(new r(null,{rqlQuery:"sort(-startDate)"}),this),this.listenToOnce(this.model.surveys,"reset",function(){this.model.surveys.buildCacheMaps()})},load:function(t){return t(this.model.fetch(),this.model.surveys.fetch({reset:!0}),n.load())},destroy:function(){t.prototype.destroy.call(this),n.unload()},afterRender:function(){t.prototype.afterRender.call(this),n.load()}})}),define("app/nls/opinionSurveyResponses",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:base":function(){return"Opinion survey"},"BREADCRUMBS:browse":function(){return"Responses"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the responses :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the response :("},"MSG:DELETED":function(t){return"Response <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add response"},"PAGE_ACTION:edit":function(){return"Edit response"},"PAGE_ACTION:delete":function(){return"Delete response"},"PANEL:TITLE:details":function(){return"Response's details"},"PANEL:TITLE:addForm":function(){return"Add response form"},"PANEL:TITLE:editForm":function(){return"Edit response form"},"PROPERTY:":function(){return""},"FORM:ACTION:add":function(){return"Add response"},"FORM:ACTION:edit":function(){return"Edit response"},"FORM:ERROR:addFailure":function(){return"Failed to add the new response :("},"FORM:ERROR:editFailure":function(){return"Failed to edit the response :("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Response deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete response"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen response?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> response?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the response :-("}},pl:!0}}),define("app/nls/pl/opinionSurveyResponses",["app/nls/locale/pl"],function(t){return{"BREADCRUMBS:base":function(){return"Badanie Opinia"},"BREADCRUMBS:browse":function(){return"Odpowiedzi"},"BREADCRUMBS:details":function(){return"Odpowied≈∫"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie odpowiedzi nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie odpowiedzi nie powiod≈Ço siƒô :("},"MSG:DELETED":function(){return"Odpowied≈∫ zosta≈Ça usuniƒôta."},"PAGE_ACTION:add":function(){return"Dodaj odpowied≈∫"},"PAGE_ACTION:edit":function(){return"Edytuj odpowied≈∫"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ odpowied≈∫"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy odpowiedzi"},"PANEL:TITLE:answers":function(){return"Odpowiedzi do ankiety"},"PANEL:TITLE:comment":function(){return"Komentarz"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania odpowiedzi"},"PANEL:TITLE:editForm":function(){return"Formularz edycji odpowiedzi"},"PROPERTY:creator":function(){return"DodajƒÖcy"},"PROPERTY:createdAt":function(){return"Czas dodania"},"PROPERTY:comment":function(){return"Komentarz"},"PROPERTY:survey":function(){return"Badanie"},"PROPERTY:division":function(){return"Wydzia≈Ç"},"PROPERTY:superior":function(){return"Prze≈Ço≈ºony"},"PROPERTY:employer":function(){return"Pracodawca"},"PROPERTY:answer":function(){return"Odpowied≈∫"},"FORM:ACTION:add":function(){return"Dodaj odpowied≈∫"},"FORM:ACTION:edit":function(){return"Edytuj odpowied≈∫"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá odpowiedzi :("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá odpowiedzi :("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia odpowiedzi"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ odpowied≈∫"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybranƒÖ odpowied≈∫?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybranƒÖ odpowied≈∫?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá odpowiedzi :("},"filter:submit":function(){return"Filtruj odpowiedzi"},noComment:function(){return"Brak komentarza."},"answer:yes":function(){return"Zgadzam siƒô"},"answer:no":function(){return"Nie zgadzam siƒô"},"answer:na":function(){return"Nie mam zdania"}}}),define("app/opinionSurveyResponses/routes",["underscore","../router","../viewport","../user","../core/util/showDeleteFormPage","./OpinionSurveyResponseCollection","./OpinionSurveyResponse","./pages/OpinionSurveyResponseListPage","./pages/OpinionSurveyResponseDetailsPage","./pages/OpinionSurveyResponseAddFormPage","./pages/OpinionSurveyResponseEditFormPage","i18n!app/nls/opinionSurveyResponses"],function(t,e,n,r,i,o,s,a,u,c,l){"use strict";var p=r.auth(),d=r.auth("OPINION_SURVEYS:MANAGE");e.map("/opinionSurveyResponses",p,function(t){n.showPage(new a({collection:new o(null,{rqlQuery:t.rql})}))}),e.map("/opinionSurveyResponses/:id",p,function(t){n.showPage(new u({model:new s({_id:t.params.id})}))}),e.map("/opinionSurveyResponses;add",d,function(){n.showPage(new c({model:new s}))}),e.map("/opinionSurveyResponses/:id;edit",d,function(t){n.showPage(new l({model:new s({_id:t.params.id})}))}),e.map("/opinionSurveyResponses/:id;delete",d,t.partial(i,s,t,t,{baseBreadcrumb:!0}))}),define("app/opinionSurveyEmployers/templates/form",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form method="post" action="'),__output.push(formAction),__output.push('">\n  <input type="hidden" name="_method" value="'),__output.push(formMethod),__output.push('">\n  <div class="panel panel-primary">\n    <div class="panel-heading">'),__output.push(panelTitleText),__output.push('</div>\n    <div class="panel-body">\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-id" class="control-label is-required">'),__output.push(t("opinionSurveyEmployers","PROPERTY:_id")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-id" class="form-control" type="text" name="_id" autofocus required maxlength="30" pattern="^[A-Za-z0-9-_]+$">\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-short" class="control-label is-required">'),__output.push(t("opinionSurveyEmployers","PROPERTY:short")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-short" class="form-control" type="text" name="short" required maxlength="30">\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-full" class="control-label is-required">'),__output.push(t("opinionSurveyEmployers","PROPERTY:full")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-full" class="form-control" type="text" name="full" required maxlength="250">\n      </div>\n    </div>\n    <div class="panel-footer">\n      <button type="submit" class="btn btn-primary">'),__output.push(formActionText),__output.push("</button>\n    </div>\n  </div>\n</form>\n");return __output.join("")}}),define("app/opinionSurveyEmployers/views/OpinionSurveyEmployerFormView",["app/core/views/FormView","app/opinionSurveyEmployers/templates/form"],function(t,e){"use strict";return t.extend({template:e,afterRender:function(){t.prototype.afterRender.call(this),this.options.editMode&&(this.$id("id").prop("readonly",!0),this.$id("short").focus())}})}),define("app/opinionSurveyEmployers/templates/details",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="panel panel-primary">\n  <div class="panel-heading">'),__output.push(t("opinionSurveyEmployers","PANEL:TITLE:details")),__output.push('</div>\n  <div class="panel-details">\n    <div class="props first">\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("opinionSurveyEmployers","PROPERTY:_id")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model._id)),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("opinionSurveyEmployers","PROPERTY:short")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model["short"])),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("opinionSurveyEmployers","PROPERTY:full")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model.full)),__output.push("</div>\n      </div>\n    </div>\n  </div>\n</div>\n");return __output.join("")}}),define("app/nls/opinionSurveyEmployers",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:base":function(){return"Opinion survey"},"BREADCRUMBS:browse":function(){return"Employers"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the employers :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the employer :("},"MSG:DELETED":function(t){return"Employer <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add employer"},"PAGE_ACTION:edit":function(){return"Edit employer"},"PAGE_ACTION:delete":function(){return"Delete employer"},"PANEL:TITLE:details":function(){return"Employer's details"},"PANEL:TITLE:addForm":function(){return"Add employer form"},"PANEL:TITLE:editForm":function(){return"Edit employer form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:full":function(){return"Full name"},"PROPERTY:short":function(){return"Short name"},"FORM:ACTION:add":function(){return"Add employer"},"FORM:ACTION:edit":function(){return"Edit employer"},"FORM:ERROR:addFailure":function(){return"Failed to add the new employer :("},"FORM:ERROR:editFailure":function(){return"Failed to edit the employer :("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Employer deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete employer"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen employer?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> employer?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the employer :-("}},pl:!0}}),define("app/nls/pl/opinionSurveyEmployers",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:base":function(){return"Badanie Opinia"},"BREADCRUMBS:browse":function(){return"Pracodawcy"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie pracodawcy nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie pracodawcy nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Pracodawca <em>"+e.v(t,"label")+"</em> zosta≈Ç usuniƒôty."},"PAGE_ACTION:add":function(){return"Dodaj pracodawcƒô"},"PAGE_ACTION:edit":function(){return"Edytuj pracodawcƒô"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ pracodawcƒô"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy pracodawcy"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania pracodawcy"},"PANEL:TITLE:editForm":function(){return"Formularz edycji pracodawcy"},"PROPERTY:_id":function(){return"ID"
},"PROPERTY:full":function(){return"Pe≈Çna nazwa"},"PROPERTY:short":function(){return"Kr√≥tka nazwa"},"FORM:ACTION:add":function(){return"Dodaj pracodawcƒô"},"FORM:ACTION:edit":function(){return"Edytuj pracodawcƒô"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá pracodawcy :("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá pracodawcy :("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia pracodawcy"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ pracodawcƒô"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybranego pracodawcƒô?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá pracodawcƒô <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá pracodawcy :("}}}),define("app/opinionSurveyEmployers/routes",["underscore","../router","../viewport","../user","../core/util/showDeleteFormPage","./OpinionSurveyEmployerCollection","./OpinionSurveyEmployer","../core/pages/ListPage","../core/pages/DetailsPage","../core/pages/AddFormPage","../core/pages/EditFormPage","./views/OpinionSurveyEmployerFormView","app/opinionSurveyEmployers/templates/details","i18n!app/nls/opinionSurveyEmployers"],function(t,e,n,r,i,o,s,a,u,c,l,p,d){"use strict";var h=r.auth("OPINION_SURVEYS:MANAGE");e.map("/opinionSurveyEmployers",h,function(t){n.showPage(new a({baseBreadcrumb:!0,collection:new o(null,{rqlQuery:t.rql}),columns:[{id:"_id",className:"is-min"},{id:"short",className:"is-min"},"full"]}))}),e.map("/opinionSurveyEmployers/:id",h,function(t){n.showPage(new u({baseBreadcrumb:!0,model:new s({_id:t.params.id}),detailsTemplate:d}))}),e.map("/opinionSurveyEmployers;add",h,function(){n.showPage(new c({baseBreadcrumb:!0,FormView:p,model:new s}))}),e.map("/opinionSurveyEmployers/:id;edit",h,function(t){n.showPage(new l({baseBreadcrumb:!0,FormView:p,model:new s({_id:t.params.id})}))}),e.map("/opinionSurveyEmployers/:id;delete",h,t.partial(i,s,t,t,{baseBreadcrumb:!0}))}),define("app/opinionSurveyDivisions/templates/form",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form method="post" action="'),__output.push(formAction),__output.push('">\n  <input type="hidden" name="_method" value="'),__output.push(formMethod),__output.push('">\n  <div class="panel panel-primary">\n    <div class="panel-heading">'),__output.push(panelTitleText),__output.push('</div>\n    <div class="panel-body">\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-id" class="control-label is-required">'),__output.push(t("opinionSurveyDivisions","PROPERTY:_id")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-id" class="form-control" type="text" name="_id" autofocus required maxlength="30" pattern="^[A-Za-z0-9-_]+$">\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-short" class="control-label is-required">'),__output.push(t("opinionSurveyDivisions","PROPERTY:short")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-short" class="form-control" type="text" name="short" required maxlength="30">\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-full" class="control-label is-required">'),__output.push(t("opinionSurveyDivisions","PROPERTY:full")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-full" class="form-control" type="text" name="full" required maxlength="250">\n      </div>\n    </div>\n    <div class="panel-footer">\n      <button type="submit" class="btn btn-primary">'),__output.push(formActionText),__output.push("</button>\n    </div>\n  </div>\n</form>\n");return __output.join("")}}),define("app/opinionSurveyDivisions/views/OpinionSurveyDivisionFormView",["app/core/views/FormView","app/opinionSurveyDivisions/templates/form"],function(t,e){"use strict";return t.extend({template:e,afterRender:function(){t.prototype.afterRender.call(this),this.options.editMode&&(this.$id("id").prop("readonly",!0),this.$id("short").focus())}})}),define("app/opinionSurveyDivisions/templates/details",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="panel panel-primary">\n  <div class="panel-heading">'),__output.push(t("opinionSurveyDivisions","PANEL:TITLE:details")),__output.push('</div>\n  <div class="panel-details">\n    <div class="props first">\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("opinionSurveyDivisions","PROPERTY:_id")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model._id)),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("opinionSurveyDivisions","PROPERTY:short")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model["short"])),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("opinionSurveyDivisions","PROPERTY:full")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model.full)),__output.push("</div>\n      </div>\n    </div>\n  </div>\n</div>\n");return __output.join("")}}),define("app/nls/opinionSurveyDivisions",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:base":function(){return"Opinion survey"},"BREADCRUMBS:browse":function(){return"Divisions"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the divisions :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the division :("},"MSG:DELETED":function(t){return"Division <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add division"},"PAGE_ACTION:edit":function(){return"Edit division"},"PAGE_ACTION:delete":function(){return"Delete division"},"PANEL:TITLE:details":function(){return"Division's details"},"PANEL:TITLE:addForm":function(){return"Add division form"},"PANEL:TITLE:editForm":function(){return"Edit division form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:full":function(){return"Full name"},"PROPERTY:short":function(){return"Short name"},"FORM:ACTION:add":function(){return"Add division"},"FORM:ACTION:edit":function(){return"Edit division"},"FORM:ERROR:addFailure":function(){return"Failed to add the new division :("},"FORM:ERROR:editFailure":function(){return"Failed to edit the division :("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Division deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete division"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen division?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> division?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the division :-("}},pl:!0}}),define("app/nls/pl/opinionSurveyDivisions",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:base":function(){return"Badanie Opinia"},"BREADCRUMBS:browse":function(){return"Wydzia≈Çy"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie wydzia≈Çu nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie wydzia≈Çu nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Wydzia≈Ç <em>"+e.v(t,"label")+"</em> zosta≈Ç usuniƒôte."},"PAGE_ACTION:add":function(){return"Dodaj wydzia≈Ç"},"PAGE_ACTION:edit":function(){return"Edytuj wydzia≈Ç"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ wydzia≈Ç"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy wydzia≈Çu"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania wydzia≈Çu"},"PANEL:TITLE:editForm":function(){return"Formularz edycji wydzia≈Çu"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:full":function(){return"Pe≈Çna nazwa"},"PROPERTY:short":function(){return"Kr√≥tka nazwa"},"FORM:ACTION:add":function(){return"Dodaj wydzia≈Ç"},"FORM:ACTION:edit":function(){return"Edytuj wydzia≈Ç"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá wydzia≈Çu :("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá wydzia≈Çu :("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia wydzia≈Çu"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ wydzia≈Ç"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany wydzia≈Ç?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wydzia≈Ç <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá wydzia≈Çu :("}}}),define("app/opinionSurveyDivisions/routes",["underscore","../router","../viewport","../user","../core/util/showDeleteFormPage","./OpinionSurveyDivisionCollection","./OpinionSurveyDivision","../core/pages/ListPage","../core/pages/DetailsPage","../core/pages/AddFormPage","../core/pages/EditFormPage","./views/OpinionSurveyDivisionFormView","app/opinionSurveyDivisions/templates/details","i18n!app/nls/opinionSurveyDivisions"],function(t,e,n,r,i,o,s,a,u,c,l,p,d){"use strict";var h=r.auth("OPINION_SURVEYS:MANAGE");e.map("/opinionSurveyDivisions",h,function(t){n.showPage(new a({baseBreadcrumb:!0,collection:new o(null,{rqlQuery:t.rql}),columns:[{id:"_id",className:"is-min"},{id:"short",className:"is-min"},"full"]}))}),e.map("/opinionSurveyDivisions/:id",h,function(t){n.showPage(new u({baseBreadcrumb:!0,model:new s({_id:t.params.id}),detailsTemplate:d}))}),e.map("/opinionSurveyDivisions;add",h,function(){n.showPage(new c({baseBreadcrumb:!0,FormView:p,model:new s}))}),e.map("/opinionSurveyDivisions/:id;edit",h,function(t){n.showPage(new l({baseBreadcrumb:!0,FormView:p,model:new s({_id:t.params.id})}))}),e.map("/opinionSurveyDivisions/:id;delete",h,t.partial(i,s,t,t,{baseBreadcrumb:!0}))}),define("app/opinionSurveyQuestions/templates/form",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<form method="post" action="'),__output.push(formAction),__output.push('">\n  <input type="hidden" name="_method" value="'),__output.push(formMethod),__output.push('">\n  <div class="panel panel-primary">\n    <div class="panel-heading">'),__output.push(panelTitleText),__output.push('</div>\n    <div class="panel-body">\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-id" class="control-label is-required">'),__output.push(t("opinionSurveyQuestions","PROPERTY:_id")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-id" class="form-control" type="text" name="_id" autofocus required maxlength="30" pattern="^[A-Za-z0-9-_]+$">\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-short" class="control-label is-required">'),__output.push(t("opinionSurveyQuestions","PROPERTY:short")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-short" class="form-control" type="text" name="short" required maxlength="30">\n      </div>\n      <div class="form-group">\n        <label for="'),__output.push(idPrefix),__output.push('-full" class="control-label is-required">'),__output.push(t("opinionSurveyQuestions","PROPERTY:full")),__output.push('</label>\n        <input id="'),__output.push(idPrefix),__output.push('-full" class="form-control" type="text" name="full" required maxlength="250">\n      </div>\n    </div>\n    <div class="panel-footer">\n      <button type="submit" class="btn btn-primary">'),__output.push(formActionText),__output.push("</button>\n    </div>\n  </div>\n</form>\n");return __output.join("")}}),define("app/opinionSurveyQuestions/views/OpinionSurveyQuestionFormView",["app/core/views/FormView","app/opinionSurveyQuestions/templates/form"],function(t,e){"use strict";return t.extend({template:e,afterRender:function(){t.prototype.afterRender.call(this),this.options.editMode&&(this.$id("id").prop("readonly",!0),this.$id("short").focus())}})}),define("app/opinionSurveyQuestions/templates/details",["app/i18n"],function(t){return function anonymous(locals,escape,include,rethrow){escape=escape||function(t){return void 0==t?"":String(t).replace(_MATCH_HTML,function(t){return _ENCODE_HTML_RULES[t]||t})};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g,__output=[];with(locals||{})__output.push('<div class="panel panel-primary">\n  <div class="panel-heading">'),__output.push(t("opinionSurveyQuestions","PANEL:TITLE:details")),__output.push('</div>\n  <div class="panel-details">\n    <div class="props first">\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("opinionSurveyQuestions","PROPERTY:_id")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model._id)),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("opinionSurveyQuestions","PROPERTY:short")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model["short"])),__output.push('</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">'),__output.push(t("opinionSurveyQuestions","PROPERTY:full")),__output.push('</div>\n        <div class="prop-value">'),__output.push(escape(model.full)),__output.push("</div>\n      </div>\n    </div>\n  </div>\n</div>\n");return __output.join("")}}),define("app/nls/opinionSurveyQuestions",["app/nls/locale/en"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{root:{"BREADCRUMBS:base":function(){return"Opinion survey"},"BREADCRUMBS:browse":function(){return"Questions"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the questions :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the question :("},"MSG:DELETED":function(t){return"Question <em>"+e.v(t,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add question"},"PAGE_ACTION:edit":function(){return"Edit question"},"PAGE_ACTION:delete":function(){return"Delete question"},"PANEL:TITLE:details":function(){return"Question's details"},"PANEL:TITLE:addForm":function(){return"Add question form"},"PANEL:TITLE:editForm":function(){return"Edit question form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:full":function(){return"Full text"},"PROPERTY:short":function(){return"Short text"},"FORM:ACTION:add":function(){return"Add question"},"FORM:ACTION:edit":function(){return"Edit question"},"FORM:ERROR:addFailure":function(){return"Failed to add the new question :("},"FORM:ERROR:editFailure":function(){return"Failed to edit the question :("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Question deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete question"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen question?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Are you sure you want to delete the <em>"+e.v(t,"label")+"</em> question?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the question :-("}},pl:!0}}),define("app/nls/pl/opinionSurveyQuestions",["app/nls/locale/pl"],function(t){var e={lc:{pl:function(e){return t(e)},en:function(e){return t(e)}},c:function(t,e){if(!t)throw new Error("MessageFormat: Data required for '"+e+"'.")},n:function(t,e,n){if(isNaN(t[e]))throw new Error("MessageFormat: '"+e+"' isn't a number.");return t[e]-(n||0)},v:function(t,n){return e.c(t,n),t[n]},p:function(t,n,r,i,o){return e.c(t,n),t[n]in o?o[t[n]]:(n=e.lc[i](t[n]-r),n in o?o[n]:o.other)},s:function(t,n,r){return e.c(t,n),t[n]in r?r[t[n]]:r.other}};return{"BREADCRUMBS:base":function(){return"Badanie Opinia"},"BREADCRUMBS:browse":function(){return"Pytania"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie pyta≈Ñ nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie pytania nie powiod≈Ço siƒô :("},"MSG:DELETED":function(t){return"Pytanie <em>"+e.v(t,"label")+"</em> zosta≈Ço usuniƒôte."},"PAGE_ACTION:add":function(){return"Dodaj pytanie"},"PAGE_ACTION:edit":function(){return"Edytuj pytanie"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ pytanie"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy pytania"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania pytania"},"PANEL:TITLE:editForm":function(){return"Formularz edycji pytania"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:full":function(){return"Pe≈Çna tre≈õƒá pytania"},"PROPERTY:short":function(){return"Kr√≥tka tre≈õƒá pytania"},"FORM:ACTION:add":function(){return"Dodaj pytanie"},"FORM:ACTION:edit":function(){return"Edytuj pytanie"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá pytania :("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá pytania :("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia pytania"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ pytanie"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrane pytanie?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(t){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá pytanie <em>"+e.v(t,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá pytania :("}}}),define("app/opinionSurveyQuestions/routes",["underscore","../router","../viewport","../user","../core/util/showDeleteFormPage","./OpinionSurveyQuestionCollection","./OpinionSurveyQuestion","../core/pages/ListPage","../core/pages/DetailsPage","../core/pages/AddFormPage","../core/pages/EditFormPage","./views/OpinionSurveyQuestionFormView","app/opinionSurveyQuestions/templates/details","i18n!app/nls/opinionSurveyQuestions"],function(t,e,n,r,i,o,s,a,u,c,l,p,d){"use strict";var h=r.auth("OPINION_SURVEYS:MANAGE");e.map("/opinionSurveyQuestions",h,function(t){n.showPage(new a({baseBreadcrumb:!0,collection:new o(null,{rqlQuery:t.rql}),columns:[{id:"_id",className:"is-min"},{id:"short",className:"is-min"},"full"]}))}),e.map("/opinionSurveyQuestions/:id",h,function(t){n.showPage(new u({baseBreadcrumb:!0,model:new s({_id:t.params.id}),detailsTemplate:d}))}),e.map("/opinionSurveyQuestions;add",h,function(){n.showPage(new c({baseBreadcrumb:!0,FormView:p,model:new s}))}),e.map("/opinionSurveyQuestions/:id;edit",h,function(t){n.showPage(new l({baseBreadcrumb:!0,FormView:p,model:new s({_id:t.params.id})}))}),e.map("/opinionSurveyQuestions/:id;delete",h,t.partial(i,s,t,t,{baseBreadcrumb:!0}))}),define("app/wmes-routes",["./aors/routes","./companies/routes","./dashboard/routes","./divisions/routes","./delayReasons/routes","./downtimeReasons/routes","./lossReasons/routes","./events/routes","./emptyOrders/routes","./fte/routes","./hourlyPlans/routes","./mechOrders/routes","./mrpControllers/routes","./orders/routes","./orderStatuses/routes","./orderDocumentClients/routes","./pressWorksheets/routes","./prodDowntimes/routes","./prodFlows/routes","./prodFunctions/routes","./prodLines/routes","./prodTasks/routes","./prodLogEntries/routes","./prodShiftOrders/routes","./prodShifts/routes","./production/routes","./prodChangeRequests/routes","./reports/routes","./subdivisions/routes","./users/routes","./vis/routes","./workCenters/routes","./xiconf/routes","./xiconfOrders/routes","./xiconfPrograms/routes","./xiconfClients/routes","./icpo/routes","./factoryLayout/routes","./licenses/routes","./kaizenOrders/routes","./kaizenSections/routes","./kaizenAreas/routes","./kaizenCategories/routes","./kaizenCauses/routes","./kaizenRisks/routes","./opinionSurveys/routes","./opinionSurveyActions/routes","./opinionSurveyResponses/routes","./opinionSurveyEmployers/routes","./opinionSurveyDivisions/routes","./opinionSurveyQuestions/routes"],function(){"use strict"}),function(){window.visibly={q:document,p:void 0,prefixes:["webkit","ms","o","moz","khtml"],props:["VisibilityState","visibilitychange","Hidden"],m:["focus","blur"],visibleCallbacks:[],hiddenCallbacks:[],genericCallbacks:[],_callbacks:[],cachedPrefix:"",onVisible:function(t){"function"==typeof t&&this.visibleCallbacks.push(t)},onHidden:function(t){"function"==typeof t&&this.hiddenCallbacks.push(t)},getPrefix:function(){if(!this.cachedPrefix)for(var t=0;b=this.prefixes[t++];)if(b+this.props[2]in this.q)return this.cachedPrefix=b,this.cachedPrefix},visibilityState:function(){return this._getProp(0)},hidden:function(){return this._getProp(2)},visibilitychange:function(t){"function"==typeof t&&this.genericCallbacks.push(t);var e=this.genericCallbacks.length;if(e)if(this.cachedPrefix)for(;e--;)this.genericCallbacks[e].call(this,this.visibilityState());else for(;e--;)this.genericCallbacks[e].call(this,arguments[0])},isSupported:function(){return this.cachedPrefix+this.props[2]in this.q},_getProp:function(t){return this.q[this.cachedPrefix+this.props[t]]},_execute:function(t){if(t){this._callbacks=1==t?this.visibleCallbacks:this.hiddenCallbacks;for(var e=this._callbacks.length;e--;)this._callbacks[e]()}},_visible:function(){window.visibly._execute(1),window.visibly.visibilitychange.call(window.visibly,"visible")},_hidden:function(){window.visibly._execute(2),window.visibly.visibilitychange.call(window.visibly,"hidden")},_nativeSwitch:function(){this[this._getProp(2)?"_hidden":"_visible"]()},_listen:function(){try{this.isSupported()?this.q.addEventListener(this.cachedPrefix+this.props[1],function(){window.visibly._nativeSwitch.apply(window.visibly,arguments)},1):this.q.addEventListener?(window.addEventListener(this.m[0],this._visible,1),window.addEventListener(this.m[1],this._hidden,1)):this.q.attachEvent&&(this.q.attachEvent("onfocusin",this._visible),this.q.attachEvent("onfocusout",this._hidden))}catch(t){}},init:function(){this.getPrefix(),this._listen()}},this.visibly.init()}(),define("visibly",function(t){return function(){var e;return e||t.visibly}}(this)),define("app/visibility",["visibly","app/broker"],function(t,e){"use strict";var n={visible:!t.hidden()};return t.onVisible(function(){n.visible=!0,e.publish("visibility.visible",n)}),t.onHidden(function(){n.visible=!1,e.publish("visibility.hidden",n)}),n}),function(){"use strict";function t(){require(["domReady","jquery","backbone","backbone.layout","moment","app/monkeyPatch","app/broker","app/i18n","app/socket","app/router","app/viewport","app/updater/index","app/data/loadedModules","app/core/layouts/PageLayout","app/core/layouts/PrintLayout","app/core/layouts/BlankLayout","app/core/views/NavbarView","app/core/views/LogInFormView","app/time","app/wmes-routes","app/visibility","bootstrap","moment-lang/"+window.appLocale,"select2-lang/"+window.appLocale,"i18n!app/nls/core"],e)}function e(t,e,n,r,i,o,s,a,u,c,l,p,d,h,f,m,_,g){function v(){var t=c.getCurrentRequest(),n=new _({currentPath:null===t?"/":t.path,loadedModules:d.map});return n.on("logIn",function(){l.showDialog(new g,a("core","LOG_IN_FORM:TITLE:LOG_IN"))}),n.on("logOut",function(){e.ajax({type:"GET",url:"/logout"}).fail(function(){l.msg.show({type:"error",text:a("core","MSG:LOG_OUT:FAILURE"),time:5e3})})}),n}function y(){null!==w&&(w.destroy(),w=null),s.subscribe("i18n.reloaded",function(t){localStorage.setItem("LOCALE",t.newLocale),l.render()}),s.subscribe("user.reloaded",function(){var t=c.getCurrentRequest();l.render(),/^\/production\//.test(t.path)||c.dispatch(t.url)}),s.subscribe("user.loggedIn",function(){var t=c.getCurrentRequest();if(t){var e=t.url;("/"===e||"/login"===e)&&c.replace(window.DASHBOARD_URL_AFTER_LOG_IN||"/")}}),s.subscribe("user.loggedOut",function(){l.msg.show({type:"success",text:a("core","MSG:LOG_OUT:SUCCESS"),time:2500}),s.publish("router.navigate",{url:"/",trigger:!0})}),t(function(){e("#app-loading").fadeOut(function(){e(this).remove()}),window.ENV&&document.body.classList.add("is-"+window.ENV+"-env"),n.history.start({root:"/",hashChange:!0,pushState:!1})})}var w=null;u.connect(),i.locale(window.appLocale),e.ajaxSetup({dataType:"json",accepts:{json:"application/json",text:"text/plain"},contentType:"application/json"}),r.configure({manage:!0,el:!1,keep:!0}),l.registerLayout("page",function(){return new h({views:{".navbar":v()},version:p.getCurrentVersionString()})}),l.registerLayout("print",function(){return new f}),l.registerLayout("blank",function(){return new m}),navigator.onLine?(w=s.sandbox(),w.subscribe("socket.connected",function(){w.subscribe("user.reloaded",y)}),w.subscribe("socket.connectFailed",y),s.subscribe("page.titleChanged",function(t){t.unshift(a("core","TITLE")),document.title=t.reverse().join(" < ")})):y()}window.requireApp=t}(),define("wmes-main",function(){});