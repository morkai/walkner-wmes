/**
 * @license RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/domReady for details
 */

/*!
 * jQuery JavaScript Library v2.0.3
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03T13:30Z
 */

/*!
 * Sizzle CSS Selector Engine v1.9.4-pre
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-06-03
 */

//     Underscore.js 1.5.2
//     http://underscorejs.org
//     (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

//     (c) 2010-2013 Jeremy Ashkenas, DocumentCloud Inc.
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

/*!
 * backbone.layoutmanager.js v0.9.4
 * Copyright 2013, Tim Branyen (@tbranyen)
 * backbone.layoutmanager.js may be freely distributed under the MIT license.
 */

//! moment.js
//! version : 2.8.3
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/*!
 * Bootstrap v3.3.2 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

/*!
 * Generated using the Bootstrap Customizer (http://getbootstrap.com/customize/?id=3fc4d804a53dbaac22c8)
 * Config saved to config.json and https://gist.github.com/3fc4d804a53dbaac22c8
 */

/* ========================================================================
 * Bootstrap: button.js v3.3.2
 * http://getbootstrap.com/javascript/#buttons
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: dropdown.js v3.3.2
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: modal.js v3.3.2
 * http://getbootstrap.com/javascript/#modals
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: tooltip.js v3.3.2
 * http://getbootstrap.com/javascript/#tooltip
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: popover.js v3.3.2
 * http://getbootstrap.com/javascript/#popovers
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: tab.js v3.3.2
 * http://getbootstrap.com/javascript/#tabs
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: collapse.js v3.3.2
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: transition.js v3.3.2
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/*
Copyright 2012 Igor Vaynberg

Version: 3.5.2 Timestamp: Sat Nov  1 14:43:36 EDT 2014

This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
General Public License version 2 (the "GPL License"). You may choose either license to govern your
use of this software only upon the condition that you accept all of the terms of either the Apache
License or the GPL License.

You may obtain a copy of the Apache License and the GPL License at:

    http://www.apache.org/licenses/LICENSE-2.0
    http://www.gnu.org/licenses/gpl-2.0.html

Unless required by applicable law or agreed to in writing, software distributed under the
Apache License or the GPL License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
the specific language governing permissions and limitations under the Apache License and the GPL License.
*/

// Copyright (c) 2014, ≈Åukasz Walukiewicz <lukasz@walukiewicz.eu>. Some Rights Reserved.
// Licensed under CC BY-NC-SA 4.0 <http://creativecommons.org/licenses/by-nc-sa/4.0/>.
// Part of the walkner-wmes project <http://lukasz.walukiewicz.eu/p/walkner-wmes>

/*! Socket.IO.js build:0.9.16, development. Copyright(c) 2011 LearnBoost <dev@learnboost.com> MIT Licensed */

/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

/**
   * Parses an URI
   *
   * @author Steven Levithan <stevenlevithan.com> (MIT license)
   * @api public
   */

/*!self.reconnecting &&*/

//! moment-timezone.js
//! version : 0.2.4
//! author : Tim Wood
//! license : MIT
//! github.com/moment/moment-timezone

/**
 * @license RequireJS i18n 2.0.4 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/i18n for details
 */

/**
 * Copyright (c) 2010 Maxim Vasiliev
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * @author Maxim Vasiliev
 * Date: 09.09.2010
 * Time: 19:02:33
 */

/**
 * Copyright (c) 2010 Maxim Vasiliev
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * @author Maxim Vasiliev
 * Date: 19.09.11
 * Time: 23:40
 */

/*!
 * Bootstrap Colorpicker
 * (c) 2012 Stefan Petre
 * http://mjaalnir.github.io/bootstrap-colorpicker/
 * http://www.apache.org/licenses/LICENSE-2.0.txt
 */

/*! Copyright (c) 2011 by Jonas Mosbech - https://github.com/jmosbech/StickyTableHeaders
	MIT license info: https://github.com/jmosbech/StickyTableHeaders/blob/master/license.txt */

/*!
 * visibly - v0.6 Aug 2011 - Page Visibility API Polyfill
 * http://github.com/addyosmani
 * Copyright (c) 2011 Addy Osmani
 * Dual licensed under the MIT and GPL licenses.
 *
 * Methods supported:
 * visibly.onVisible(callback)
 * visibly.onHidden(callback)
 * visibly.hidden()
 * visibly.visibilityState()
 * visibly.visibilitychange(callback(state));
 */

if(define("domReady",[],function(){function e(e){var t;for(t=0;t<e.length;t+=1)e[t](c)}function t(){var t=l;u&&t.length&&(l=[],e(t))}function n(){u||(u=!0,a&&clearInterval(a),t())}function r(e){return u?e(c):l.push(e),r}var i,o,a,s="undefined"!=typeof window&&window.document,u=!s,c=s?document:null,l=[];if(s){if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1);else if(window.attachEvent){window.attachEvent("onload",n),o=document.createElement("div");try{i=null===window.frameElement}catch(d){}o.doScroll&&i&&window.external&&(a=setInterval(function(){try{o.doScroll(),n()}catch(e){}},30))}"complete"===document.readyState&&n()}return r.version="2.0.1",r.load=function(e,t,n,i){i.isBuild?n(null):r(n)},r}),function(e,t){function n(e){var t=e.length,n=ot.type(e);return ot.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function r(e){var t=ht[e]={};return ot.each(e.match(st)||[],function(e,n){t[n]=!0}),t}function i(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=ot.expando+Math.random()}function o(e,n,r){var i;if(r===t&&1===e.nodeType)if(i="data-"+n.replace(vt,"-$1").toLowerCase(),r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:yt.test(r)?JSON.parse(r):r}catch(o){}mt.set(e,n,r)}else r=t;return r}function a(){return!0}function s(){return!1}function u(){try{return V.activeElement}catch(e){}}function c(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function l(e,t,n){if(ot.isFunction(t))return ot.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return ot.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(Ct.test(t))return ot.filter(t,e,n);t=ot.filter(t,e)}return ot.grep(e,function(e){return tt.call(t,e)>=0!==n})}function d(e,t){return ot.nodeName(e,"table")&&ot.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function p(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function f(e){var t=Ut.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function h(e,t){for(var n=e.length,r=0;n>r;r++)gt.set(e[r],"globalEval",!t||gt.get(t[r],"globalEval"))}function m(e,t){var n,r,i,o,a,s,u,c;if(1===t.nodeType){if(gt.hasData(e)&&(o=gt.access(e),a=gt.set(t,o),c=o.events)){delete a.handle,a.events={};for(i in c)for(n=0,r=c[i].length;r>n;n++)ot.event.add(t,i,c[i][n])}mt.hasData(e)&&(s=mt.access(e),u=ot.extend({},s),mt.set(t,u))}}function g(e,n){var r=e.getElementsByTagName?e.getElementsByTagName(n||"*"):e.querySelectorAll?e.querySelectorAll(n||"*"):[];return n===t||n&&ot.nodeName(e,n)?ot.merge([e],r):r}function y(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Lt.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function v(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Jt.length;i--;)if(t=Jt[i]+n,t in e)return t;return r}function w(e,t){return e=t||e,"none"===ot.css(e,"display")||!ot.contains(e.ownerDocument,e)}function E(t){return e.getComputedStyle(t,null)}function b(e,t){for(var n,r,i,o=[],a=0,s=e.length;s>a;a++)r=e[a],r.style&&(o[a]=gt.get(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&w(r)&&(o[a]=gt.access(r,"olddisplay",O(r.nodeName)))):o[a]||(i=w(r),(n&&"none"!==n||!i)&&gt.set(r,"olddisplay",i?n:ot.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function T(e,t,n){var r=qt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function A(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=ot.css(e,n+Zt[o],!0,i)),r?("content"===n&&(a-=ot.css(e,"padding"+Zt[o],!0,i)),"margin"!==n&&(a-=ot.css(e,"border"+Zt[o]+"Width",!0,i))):(a+=ot.css(e,"padding"+Zt[o],!0,i),"padding"!==n&&(a+=ot.css(e,"border"+Zt[o]+"Width",!0,i)));return a}function R(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=E(e),a=ot.support.boxSizing&&"border-box"===ot.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=Bt(e,t,o),(0>i||null==i)&&(i=e.style[t]),$t.test(i))return i;r=a&&(ot.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+A(e,t,n||(a?"border":"content"),r,o)+"px"}function O(e){var t=V,n=Xt[e];return n||(n=P(e,t),"none"!==n&&n||(Wt=(Wt||ot("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Wt[0].contentWindow||Wt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=P(e,t),Wt.detach()),Xt[e]=n),n}function P(e,t){var n=ot(t.createElement(e)).appendTo(t.body),r=ot.css(n[0],"display");return n.remove(),r}function k(e,t,n,r){var i;if(ot.isArray(t))ot.each(t,function(t,i){n||tn.test(e)?r(e,i):k(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==ot.type(t))r(e,t);else for(i in t)k(e+"["+i+"]",t[i],n,r)}function C(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(st)||[];if(ot.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function S(e,t,n,r){function i(s){var u;return o[s]=!0,ot.each(e[s]||[],function(e,s){var c=s(t,n,r);return"string"!=typeof c||a||o[c]?a?!(u=c):void 0:(t.dataTypes.unshift(c),i(c),!1)}),u}var o={},a=e===wn;return i(t.dataTypes[0])||!o["*"]&&i("*")}function I(e,n){var r,i,o=ot.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((o[r]?e:i||(i={}))[r]=n[r]);return i&&ot.extend(!0,e,i),e}function D(e,n,r){for(var i,o,a,s,u=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("Content-Type"));if(i)for(o in u)if(u[o]&&u[o].test(i)){c.unshift(o);break}if(c[0]in r)a=c[0];else{for(o in r){if(!c[0]||e.converters[o+" "+c[0]]){a=o;break}s||(s=o)}a=a||s}return a?(a!==c[0]&&c.unshift(a),r[a]):void 0}function N(e,t,n,r){var i,o,a,s,u,c={},l=e.dataTypes.slice();if(l[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=l.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(a=c[u+" "+o]||c["* "+o],!a)for(i in c)if(s=i.split(" "),s[1]===o&&(a=c[u+" "+s[0]]||c["* "+s[0]])){a===!0?a=c[i]:c[i]!==!0&&(o=s[0],l.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(d){return{state:"parsererror",error:a?d:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}function M(){return setTimeout(function(){Cn=t}),Cn=ot.now()}function _(e,t,n){for(var r,i=(_n[t]||[]).concat(_n["*"]),o=0,a=i.length;a>o;o++)if(r=i[o].call(n,t,e))return r}function F(e,t,n){var r,i,o=0,a=Mn.length,s=ot.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=Cn||M(),n=Math.max(0,c.startTime+c.duration-t),r=n/c.duration||0,o=1-r,a=0,u=c.tweens.length;u>a;a++)c.tweens[a].run(o);return s.notifyWith(e,[c,o,n]),1>o&&u?n:(s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:ot.extend({},t),opts:ot.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Cn||M(),duration:n.duration,tweens:[],createTween:function(t,n){var r=ot.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)c.tweens[n].run(1);return t?s.resolveWith(e,[c,t]):s.rejectWith(e,[c,t]),this}}),l=c.props;for(L(l,c.opts.specialEasing);a>o;o++)if(r=Mn[o].call(c,e,l,c.opts))return r;return ot.map(l,_,c),ot.isFunction(c.opts.start)&&c.opts.start.call(e,c),ot.fx.timer(ot.extend(u,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function L(e,t){var n,r,i,o,a;for(n in e)if(r=ot.camelCase(n),i=t[r],o=e[n],ot.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=ot.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function z(e,n,r){var i,o,a,s,u,c,l=this,d={},p=e.style,f=e.nodeType&&w(e),h=gt.get(e,"fxshow");r.queue||(u=ot._queueHooks(e,"fx"),null==u.unqueued&&(u.unqueued=0,c=u.empty.fire,u.empty.fire=function(){u.unqueued||c()}),u.unqueued++,l.always(function(){l.always(function(){u.unqueued--,ot.queue(e,"fx").length||u.empty.fire()})})),1===e.nodeType&&("height"in n||"width"in n)&&(r.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===ot.css(e,"display")&&"none"===ot.css(e,"float")&&(p.display="inline-block")),r.overflow&&(p.overflow="hidden",l.always(function(){p.overflow=r.overflow[0],p.overflowX=r.overflow[1],p.overflowY=r.overflow[2]}));for(i in n)if(o=n[i],In.exec(o)){if(delete n[i],a=a||"toggle"===o,o===(f?"hide":"show")){if("show"!==o||!h||h[i]===t)continue;f=!0}d[i]=h&&h[i]||ot.style(e,i)}if(!ot.isEmptyObject(d)){h?"hidden"in h&&(f=h.hidden):h=gt.access(e,"fxshow",{}),a&&(h.hidden=!f),f?ot(e).show():l.done(function(){ot(e).hide()}),l.done(function(){var t;gt.remove(e,"fxshow");for(t in d)ot.style(e,t,d[t])});for(i in d)s=_(f?h[i]:0,i,l),i in h||(h[i]=s.start,f&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}}function x(e,t,n,r,i){return new x.prototype.init(e,t,n,r,i)}function U(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function j(e){return ot.isWindow(e)?e:9===e.nodeType&&e.defaultView}var G,B,W=typeof t,Y=e.location,V=e.document,q=V.documentElement,$=e.jQuery,H=e.$,X={},Q=[],K="2.0.3",Z=Q.concat,J=Q.push,et=Q.slice,tt=Q.indexOf,nt=X.toString,rt=X.hasOwnProperty,it=K.trim,ot=function(e,t){return new ot.fn.init(e,t,G)},at=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,st=/\S+/g,ut=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ct=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,lt=/^-ms-/,dt=/-([\da-z])/gi,pt=function(e,t){return t.toUpperCase()},ft=function(){V.removeEventListener("DOMContentLoaded",ft,!1),e.removeEventListener("load",ft,!1),ot.ready()};ot.fn=ot.prototype={jquery:K,constructor:ot,init:function(e,n,r){var i,o;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:ut.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof ot?n[0]:n,ot.merge(this,ot.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:V,!0)),ct.test(i[1])&&ot.isPlainObject(n))for(i in n)ot.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}return o=V.getElementById(i[2]),o&&o.parentNode&&(this.length=1,this[0]=o),this.context=V,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ot.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),ot.makeArray(e,this))},selector:"",length:0,toArray:function(){return et.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=ot.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return ot.each(this,e,t)},ready:function(e){return ot.ready.promise().done(e),this},slice:function(){return this.pushStack(et.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(ot.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:J,sort:[].sort,splice:[].splice},ot.fn.init.prototype=ot.fn,ot.extend=ot.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},u=1,c=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[1]||{},u=2),"object"==typeof s||ot.isFunction(s)||(s={}),c===u&&(s=this,--u);c>u;u++)if(null!=(e=arguments[u]))for(n in e)r=s[n],i=e[n],s!==i&&(l&&i&&(ot.isPlainObject(i)||(o=ot.isArray(i)))?(o?(o=!1,a=r&&ot.isArray(r)?r:[]):a=r&&ot.isPlainObject(r)?r:{},s[n]=ot.extend(l,a,i)):i!==t&&(s[n]=i));return s},ot.extend({expando:"jQuery"+(K+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===ot&&(e.$=H),t&&e.jQuery===ot&&(e.jQuery=$),ot},isReady:!1,readyWait:1,holdReady:function(e){e?ot.readyWait++:ot.ready(!0)},ready:function(e){(e===!0?--ot.readyWait:ot.isReady)||(ot.isReady=!0,e!==!0&&--ot.readyWait>0||(B.resolveWith(V,[ot]),ot.fn.trigger&&ot(V).trigger("ready").off("ready")))},isFunction:function(e){return"function"===ot.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?X[nt.call(e)]||"object":typeof e},isPlainObject:function(e){if("object"!==ot.type(e)||e.nodeType||ot.isWindow(e))return!1;try{if(e.constructor&&!rt.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||V;var r=ct.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=ot.buildFragment([e],t,i),i&&ot(i).remove(),ot.merge([],r.childNodes))},parseJSON:JSON.parse,parseXML:function(e){var n,r;if(!e||"string"!=typeof e)return null;try{r=new DOMParser,n=r.parseFromString(e,"text/xml")}catch(i){n=t}return(!n||n.getElementsByTagName("parsererror").length)&&ot.error("Invalid XML: "+e),n},noop:function(){},globalEval:function(e){var t,n=eval;e=ot.trim(e),e&&(1===e.indexOf("use strict")?(t=V.createElement("script"),t.text=e,V.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(lt,"ms-").replace(dt,pt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i,o=0,a=e.length,s=n(e);if(r){if(s)for(;a>o&&(i=t.apply(e[o],r),i!==!1);o++);else for(o in e)if(i=t.apply(e[o],r),i===!1)break}else if(s)for(;a>o&&(i=t.call(e[o],o,e[o]),i!==!1);o++);else for(o in e)if(i=t.call(e[o],o,e[o]),i===!1)break;return e},trim:function(e){return null==e?"":it.call(e)},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?ot.merge(r,"string"==typeof e?[e]:e):J.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:tt.call(t,e,n)},merge:function(e,n){var r=n.length,i=e.length,o=0;if("number"==typeof r)for(;r>o;o++)e[i++]=n[o];else for(;n[o]!==t;)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,r){var i,o=0,a=e.length,s=n(e),u=[];if(s)for(;a>o;o++)i=t(e[o],o,r),null!=i&&(u[u.length]=i);else for(o in e)i=t(e[o],o,r),null!=i&&(u[u.length]=i);return Z.apply([],u)},guid:1,proxy:function(e,n){var r,i,o;return"string"==typeof n&&(r=e[n],n=e,e=r),ot.isFunction(e)?(i=et.call(arguments,2),o=function(){return e.apply(n||this,i.concat(et.call(arguments)))},o.guid=e.guid=e.guid||ot.guid++,o):t},access:function(e,n,r,i,o,a,s){var u=0,c=e.length,l=null==r;if("object"===ot.type(r)){o=!0;for(u in r)ot.access(e,n,u,r[u],!0,a,s)}else if(i!==t&&(o=!0,ot.isFunction(i)||(s=!0),l&&(s?(n.call(e,i),n=null):(l=n,n=function(e,t,n){return l.call(ot(e),n)})),n))for(;c>u;u++)n(e[u],r,s?i:i.call(e[u],u,n(e[u],r)));return o?e:l?n.call(e):c?n(e[0],r):a},now:Date.now,swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),ot.ready.promise=function(t){return B||(B=ot.Deferred(),"complete"===V.readyState?setTimeout(ot.ready):(V.addEventListener("DOMContentLoaded",ft,!1),e.addEventListener("load",ft,!1))),B.promise(t)},ot.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){X["[object "+t+"]"]=t.toLowerCase()}),G=ot(V),function(e,t){function n(e,t,n,r){var i,o,a,s,u,c,l,d,h,m;if((t?t.ownerDocument||t:j)!==N&&D(t),t=t||N,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(_&&!r){if(i=wt.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&x(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return et.apply(n,t.getElementsByTagName(e)),n;if((a=i[3])&&A.getElementsByClassName&&t.getElementsByClassName)return et.apply(n,t.getElementsByClassName(a)),n}if(A.qsa&&(!F||!F.test(e))){if(d=l=U,h=t,m=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(c=p(e),(l=t.getAttribute("id"))?d=l.replace(Tt,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",u=c.length;u--;)c[u]=d+f(c[u]);h=ft.test(e)&&t.parentNode||t,m=c.join(",")}if(m)try{return et.apply(n,h.querySelectorAll(m)),n}catch(g){}finally{l||t.removeAttribute("id")}}}return b(e.replace(lt,"$1"),t,n,r)}function r(){function e(n,r){return t.push(n+=" ")>O.cacheLength&&delete e[t.shift()],e[n]=r}var t=[];return e}function i(e){return e[U]=!0,e}function o(e){var t=N.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t){for(var n=e.split("|"),r=e.length;r--;)O.attrHandle[n[r]]=t}function s(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||X)-(~e.sourceIndex||X);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function u(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function c(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return i(function(t){return t=+t,i(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function d(){}function p(e,t){var r,i,o,a,s,u,c,l=Y[e+" "];if(l)return t?0:l.slice(0);for(s=e,u=[],c=O.preFilter;s;){(!r||(i=dt.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),r=!1,(i=pt.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(lt," ")}),s=s.slice(r.length));for(a in O.filter)!(i=yt[a].exec(s))||c[a]&&!(i=c[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return t?s.length:s?n.error(e):Y(e,u).slice(0)}function f(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function h(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=B++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,u,c,l=G+" "+o;if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i)if(c=t[U]||(t[U]={}),(u=c[r])&&u[0]===l){if((s=u[1])===!0||s===R)return s===!0}else if(u=c[r]=[l],u[1]=e(t,n,a)||R,u[1]===!0)return!0}}function m(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function g(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,c=null!=t;u>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),c&&t.push(s));return a}function y(e,t,n,r,o,a){return r&&!r[U]&&(r=y(r)),o&&!o[U]&&(o=y(o,a)),i(function(i,a,s,u){var c,l,d,p=[],f=[],h=a.length,m=i||E(t||"*",s.nodeType?[s]:s,[]),y=!e||!i&&t?m:g(m,p,e,s,u),v=n?o||(i?e:h||r)?[]:a:y;if(n&&n(y,v,s,u),r)for(c=g(v,f),r(c,[],s,u),l=c.length;l--;)(d=c[l])&&(v[f[l]]=!(y[f[l]]=d));if(i){if(o||e){if(o){for(c=[],l=v.length;l--;)(d=v[l])&&c.push(y[l]=d);o(null,v=[],c,u)}for(l=v.length;l--;)(d=v[l])&&(c=o?nt.call(i,d):p[l])>-1&&(i[c]=!(a[c]=d))}}else v=g(v===a?v.splice(h,v.length):v),o?o(null,a,v,u):et.apply(a,v)})}function v(e){for(var t,n,r,i=e.length,o=O.relative[e[0].type],a=o||O.relative[" "],s=o?1:0,u=h(function(e){return e===t},a,!0),c=h(function(e){return nt.call(t,e)>-1},a,!0),l=[function(e,n,r){return!o&&(r||n!==S)||((t=n).nodeType?u(e,n,r):c(e,n,r))}];i>s;s++)if(n=O.relative[e[s].type])l=[h(m(l),n)];else{if(n=O.filter[e[s].type].apply(null,e[s].matches),n[U]){for(r=++s;i>r&&!O.relative[e[r].type];r++);return y(s>1&&m(l),s>1&&f(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(lt,"$1"),n,r>s&&v(e.slice(s,r)),i>r&&v(e=e.slice(r)),i>r&&f(e))}l.push(n)}return m(l)}function w(e,t){var r=0,o=t.length>0,a=e.length>0,s=function(i,s,u,c,l){var d,p,f,h=[],m=0,y="0",v=i&&[],w=null!=l,E=S,b=i||a&&O.find.TAG("*",l&&s.parentNode||s),T=G+=null==E?1:Math.random()||.1;for(w&&(S=s!==N&&s,R=r);null!=(d=b[y]);y++){if(a&&d){for(p=0;f=e[p++];)if(f(d,s,u)){c.push(d);break}w&&(G=T,R=++r)}o&&((d=!f&&d)&&m--,i&&v.push(d))}if(m+=y,o&&y!==m){for(p=0;f=t[p++];)f(v,h,s,u);if(i){if(m>0)for(;y--;)v[y]||h[y]||(h[y]=Z.call(c));h=g(h)}et.apply(c,h),w&&!i&&h.length>0&&m+t.length>1&&n.uniqueSort(c)}return w&&(G=T,S=E),v};return o?i(s):s}function E(e,t,r){for(var i=0,o=t.length;o>i;i++)n(e,t[i],r);return r}function b(e,t,n,r){var i,o,a,s,u,c=p(e);if(!r&&1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&A.getById&&9===t.nodeType&&_&&O.relative[o[1].type]){if(t=(O.find.ID(a.matches[0].replace(At,Rt),t)||[])[0],!t)return n;e=e.slice(o.shift().value.length)}for(i=yt.needsContext.test(e)?0:o.length;i--&&(a=o[i],!O.relative[s=a.type]);)if((u=O.find[s])&&(r=u(a.matches[0].replace(At,Rt),ft.test(o[0].type)&&t.parentNode||t))){if(o.splice(i,1),e=r.length&&f(o),!e)return et.apply(n,r),n;break}}return C(e,c)(r,t,!_,n,ft.test(e)),n}var T,A,R,O,P,k,C,S,I,D,N,M,_,F,L,z,x,U="sizzle"+-new Date,j=e.document,G=0,B=0,W=r(),Y=r(),V=r(),q=!1,$=function(e,t){return e===t?(q=!0,0):0},H=typeof t,X=1<<31,Q={}.hasOwnProperty,K=[],Z=K.pop,J=K.push,et=K.push,tt=K.slice,nt=K.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},rt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",at="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",st=at.replace("w","w#"),ut="\\["+it+"*("+at+")"+it+"*(?:([*^$|!~]?=)"+it+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+st+")|)|)"+it+"*\\]",ct=":("+at+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ut.replace(3,8)+")*)|.*)\\)|)",lt=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),dt=new RegExp("^"+it+"*,"+it+"*"),pt=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),ft=new RegExp(it+"*[+~]"),ht=new RegExp("="+it+"*([^\\]'\"]*)"+it+"*\\]","g"),mt=new RegExp(ct),gt=new RegExp("^"+st+"$"),yt={ID:new RegExp("^#("+at+")"),CLASS:new RegExp("^\\.("+at+")"),TAG:new RegExp("^("+at.replace("w","w*")+")"),ATTR:new RegExp("^"+ut),PSEUDO:new RegExp("^"+ct),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+rt+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},vt=/^[^{]+\{\s*\[native \w/,wt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Et=/^(?:input|select|textarea|button)$/i,bt=/^h\d$/i,Tt=/'|\\/g,At=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),Rt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{et.apply(K=tt.call(j.childNodes),j.childNodes),K[j.childNodes.length].nodeType}catch(Ot){et={apply:K.length?function(e,t){J.apply(e,tt.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}k=n.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},A=n.support={},D=n.setDocument=function(e){var t=e?e.ownerDocument||e:j,n=t.defaultView;return t!==N&&9===t.nodeType&&t.documentElement?(N=t,M=t.documentElement,_=!k(t),n&&n.attachEvent&&n!==n.top&&n.attachEvent("onbeforeunload",function(){D()}),A.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),A.getElementsByTagName=o(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),A.getElementsByClassName=o(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),A.getById=o(function(e){return M.appendChild(e).id=U,!t.getElementsByName||!t.getElementsByName(U).length}),A.getById?(O.find.ID=function(e,t){if(typeof t.getElementById!==H&&_){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},O.filter.ID=function(e){var t=e.replace(At,Rt);return function(e){return e.getAttribute("id")===t}}):(delete O.find.ID,O.filter.ID=function(e){var t=e.replace(At,Rt);return function(e){var n=typeof e.getAttributeNode!==H&&e.getAttributeNode("id");return n&&n.value===t}}),O.find.TAG=A.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==H?t.getElementsByTagName(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},O.find.CLASS=A.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==H&&_?t.getElementsByClassName(e):void 0},L=[],F=[],(A.qsa=vt.test(t.querySelectorAll))&&(o(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||F.push("\\["+it+"*(?:value|"+rt+")"),e.querySelectorAll(":checked").length||F.push(":checked")}),o(function(e){var n=t.createElement("input");n.setAttribute("type","hidden"),e.appendChild(n).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&F.push("[*^$]="+it+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||F.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),F.push(",.*:")})),(A.matchesSelector=vt.test(z=M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&o(function(e){A.disconnectedMatch=z.call(e,"div"),z.call(e,"[s!='']:x"),L.push("!=",ct)}),F=F.length&&new RegExp(F.join("|")),L=L.length&&new RegExp(L.join("|")),x=vt.test(M.contains)||M.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},$=M.compareDocumentPosition?function(e,n){if(e===n)return q=!0,0;var r=n.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(n);return r?1&r||!A.sortDetached&&n.compareDocumentPosition(e)===r?e===t||x(j,e)?-1:n===t||x(j,n)?1:I?nt.call(I,e)-nt.call(I,n):0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,n){var r,i=0,o=e.parentNode,a=n.parentNode,u=[e],c=[n];if(e===n)return q=!0,0;if(!o||!a)return e===t?-1:n===t?1:o?-1:a?1:I?nt.call(I,e)-nt.call(I,n):0;if(o===a)return s(e,n);for(r=e;r=r.parentNode;)u.unshift(r);for(r=n;r=r.parentNode;)c.unshift(r);for(;u[i]===c[i];)i++;return i?s(u[i],c[i]):u[i]===j?-1:c[i]===j?1:0},t):N},n.matches=function(e,t){return n(e,null,null,t)},n.matchesSelector=function(e,t){if((e.ownerDocument||e)!==N&&D(e),t=t.replace(ht,"='$1']"),!(!A.matchesSelector||!_||L&&L.test(t)||F&&F.test(t)))try{var r=z.call(e,t);if(r||A.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return n(t,N,null,[e]).length>0},n.contains=function(e,t){return(e.ownerDocument||e)!==N&&D(e),x(e,t)},n.attr=function(e,n){(e.ownerDocument||e)!==N&&D(e);var r=O.attrHandle[n.toLowerCase()],i=r&&Q.call(O.attrHandle,n.toLowerCase())?r(e,n,!_):t;return i===t?A.attributes||!_?e.getAttribute(n):(i=e.getAttributeNode(n))&&i.specified?i.value:null:i},n.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},n.uniqueSort=function(e){var t,n=[],r=0,i=0;if(q=!A.detectDuplicates,I=!A.sortStable&&e.slice(0),e.sort($),q){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return e},P=n.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=P(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=P(t);return n},O=n.selectors={cacheLength:50,createPseudo:i,match:yt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(At,Rt),e[3]=(e[4]||e[5]||"").replace(At,Rt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||n.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&n.error(e[0]),e},PSEUDO:function(e){var n,r=!e[5]&&e[2];return yt.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:r&&mt.test(r)&&(n=p(r,!0))&&(n=r.indexOf(")",r.length-n)-r.length)&&(e[0]=e[0].slice(0,n),e[2]=r.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(At,Rt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+it+")"+e+"("+it+"|$)"))&&W(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==H&&e.getAttribute("class")||"")})},ATTR:function(e,t,r){return function(i){var o=n.attr(i,e);return null==o?"!="===t:t?(o+="","="===t?o===r:"!="===t?o!==r:"^="===t?r&&0===o.indexOf(r):"*="===t?r&&o.indexOf(r)>-1:"$="===t?r&&o.slice(-r.length)===r:"~="===t?(" "+o+" ").indexOf(r)>-1:"|="===t?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var c,l,d,p,f,h,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!u&&!s;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(s?d.nodeName.toLowerCase()===y:1===d.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?g.firstChild:g.lastChild],a&&v){for(l=g[U]||(g[U]={}),c=l[e]||[],f=c[0]===G&&c[1],p=c[0]===G&&c[2],d=f&&g.childNodes[f];d=++f&&d&&d[m]||(p=f=0)||h.pop();)if(1===d.nodeType&&++p&&d===t){l[e]=[G,f,p];break}}else if(v&&(c=(t[U]||(t[U]={}))[e])&&c[0]===G)p=c[1];else for(;(d=++f&&d&&d[m]||(p=f=0)||h.pop())&&((s?d.nodeName.toLowerCase()!==y:1!==d.nodeType)||!++p||(v&&((d[U]||(d[U]={}))[e]=[G,p]),d!==t)););return p-=i,p===r||p%r===0&&p/r>=0}}},PSEUDO:function(e,t){var r,o=O.pseudos[e]||O.setFilters[e.toLowerCase()]||n.error("unsupported pseudo: "+e);return o[U]?o(t):o.length>1?(r=[e,e,"",t],O.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,n){for(var r,i=o(e,t),a=i.length;a--;)r=nt.call(e,i[a]),e[r]=!(n[r]=i[a])}):function(e){return o(e,0,r)}):o}},pseudos:{not:i(function(e){var t=[],n=[],r=C(e.replace(lt,"$1"));return r[U]?i(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:i(function(e){return function(t){return n(e,t).length>0}}),contains:i(function(e){return function(t){return(t.textContent||t.innerText||P(t)).indexOf(e)>-1}}),lang:i(function(e){return gt.test(e||"")||n.error("unsupported lang: "+e),e=e.replace(At,Rt).toLowerCase(),function(t){var n;do if(n=_?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===M},focus:function(e){return e===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!O.pseudos.empty(e)
},header:function(e){return bt.test(e.nodeName)},input:function(e){return Et.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},O.pseudos.nth=O.pseudos.eq;for(T in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})O.pseudos[T]=u(T);for(T in{submit:!0,reset:!0})O.pseudos[T]=c(T);d.prototype=O.filters=O.pseudos,O.setFilters=new d,C=n.compile=function(e,t){var n,r=[],i=[],o=V[e+" "];if(!o){for(t||(t=p(e)),n=t.length;n--;)o=v(t[n]),o[U]?r.push(o):i.push(o);o=V(e,w(i,r))}return o},A.sortStable=U.split("").sort($).join("")===U,A.detectDuplicates=q,D(),A.sortDetached=o(function(e){return 1&e.compareDocumentPosition(N.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||a("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),A.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||a("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||a(rt,function(e,t,n){var r;return n?void 0:(r=e.getAttributeNode(t))&&r.specified?r.value:e[t]===!0?t.toLowerCase():null}),ot.find=n,ot.expr=n.selectors,ot.expr[":"]=ot.expr.pseudos,ot.unique=n.uniqueSort,ot.text=n.getText,ot.isXMLDoc=n.isXML,ot.contains=n.contains}(e);var ht={};ot.Callbacks=function(e){e="string"==typeof e?ht[e]||r(e):ot.extend({},e);var n,i,o,a,s,u,c=[],l=!e.once&&[],d=function(t){for(n=e.memory&&t,i=!0,u=a||0,a=0,s=c.length,o=!0;c&&s>u;u++)if(c[u].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}o=!1,c&&(l?l.length&&d(l.shift()):n?c=[]:p.disable())},p={add:function(){if(c){var t=c.length;!function r(t){ot.each(t,function(t,n){var i=ot.type(n);"function"===i?e.unique&&p.has(n)||c.push(n):n&&n.length&&"string"!==i&&r(n)})}(arguments),o?s=c.length:n&&(a=t,d(n))}return this},remove:function(){return c&&ot.each(arguments,function(e,t){for(var n;(n=ot.inArray(t,c,n))>-1;)c.splice(n,1),o&&(s>=n&&s--,u>=n&&u--)}),this},has:function(e){return e?ot.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],s=0,this},disable:function(){return c=l=n=t,this},disabled:function(){return!c},lock:function(){return l=t,n||p.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!c||i&&!l||(t=t||[],t=[e,t.slice?t.slice():t],o?l.push(t):d(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},ot.extend({Deferred:function(e){var t=[["resolve","done",ot.Callbacks("once memory"),"resolved"],["reject","fail",ot.Callbacks("once memory"),"rejected"],["notify","progress",ot.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ot.Deferred(function(n){ot.each(t,function(t,o){var a=o[0],s=ot.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&ot.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ot.extend(e,r):r}},i={};return r.pipe=r.then,ot.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=et.call(arguments),a=o.length,s=1!==a||e&&ot.isFunction(e.promise)?a:0,u=1===s?e:ot.Deferred(),c=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?et.call(arguments):i,r===t?u.notifyWith(n,r):--s||u.resolveWith(n,r)}};if(a>1)for(t=new Array(a),n=new Array(a),r=new Array(a);a>i;i++)o[i]&&ot.isFunction(o[i].promise)?o[i].promise().done(c(i,r,o)).fail(u.reject).progress(c(i,n,t)):--s;return s||u.resolveWith(r,o),u.promise()}}),ot.support=function(t){var n=V.createElement("input"),r=V.createDocumentFragment(),i=V.createElement("div"),o=V.createElement("select"),a=o.appendChild(V.createElement("option"));return n.type?(n.type="checkbox",t.checkOn=""!==n.value,t.optSelected=a.selected,t.reliableMarginRight=!0,t.boxSizingReliable=!0,t.pixelPosition=!1,n.checked=!0,t.noCloneChecked=n.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!a.disabled,n=V.createElement("input"),n.value="t",n.type="radio",t.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),r.appendChild(n),t.checkClone=r.cloneNode(!0).cloneNode(!0).lastChild.checked,t.focusinBubbles="onfocusin"in e,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===i.style.backgroundClip,ot(function(){var n,r,o="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",a=V.getElementsByTagName("body")[0];a&&(n=V.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(i),i.innerHTML="",i.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",ot.swap(a,null!=a.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===i.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(i,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(i,null)||{width:"4px"}).width,r=i.appendChild(V.createElement("div")),r.style.cssText=i.style.cssText=o,r.style.marginRight=r.style.width="0",i.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),a.removeChild(n))}),t):t}({});var mt,gt,yt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,vt=/([A-Z])/g;i.uid=1,i.accepts=function(e){return e.nodeType?1===e.nodeType||9===e.nodeType:!0},i.prototype={key:function(e){if(!i.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=i.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,ot.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),o=this.cache[i];if("string"==typeof t)o[t]=n;else if(ot.isEmptyObject(o))ot.extend(this.cache[i],t);else for(r in t)o[r]=t[r];return o},get:function(e,n){var r=this.cache[this.key(e)];return n===t?r:r[n]},access:function(e,n,r){var i;return n===t||n&&"string"==typeof n&&r===t?(i=this.get(e,n),i!==t?i:this.get(e,ot.camelCase(n))):(this.set(e,n,r),r!==t?r:n)},remove:function(e,n){var r,i,o,a=this.key(e),s=this.cache[a];if(n===t)this.cache[a]={};else{ot.isArray(n)?i=n.concat(n.map(ot.camelCase)):(o=ot.camelCase(n),n in s?i=[n,o]:(i=o,i=i in s?[i]:i.match(st)||[])),r=i.length;for(;r--;)delete s[i[r]]}},hasData:function(e){return!ot.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}},mt=new i,gt=new i,ot.extend({acceptData:i.accepts,hasData:function(e){return mt.hasData(e)||gt.hasData(e)},data:function(e,t,n){return mt.access(e,t,n)},removeData:function(e,t){mt.remove(e,t)},_data:function(e,t,n){return gt.access(e,t,n)},_removeData:function(e,t){gt.remove(e,t)}}),ot.fn.extend({data:function(e,n){var r,i,a=this[0],s=0,u=null;if(e===t){if(this.length&&(u=mt.get(a),1===a.nodeType&&!gt.get(a,"hasDataAttrs"))){for(r=a.attributes;s<r.length;s++)i=r[s].name,0===i.indexOf("data-")&&(i=ot.camelCase(i.slice(5)),o(a,i,u[i]));gt.set(a,"hasDataAttrs",!0)}return u}return"object"==typeof e?this.each(function(){mt.set(this,e)}):ot.access(this,function(n){var r,i=ot.camelCase(e);if(a&&n===t){if(r=mt.get(a,e),r!==t)return r;if(r=mt.get(a,i),r!==t)return r;if(r=o(a,i,t),r!==t)return r}else this.each(function(){var r=mt.get(this,i);mt.set(this,i,n),-1!==e.indexOf("-")&&r!==t&&mt.set(this,e,n)})},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){mt.remove(this,e)})}}),ot.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=gt.get(e,t),n&&(!r||ot.isArray(n)?r=gt.access(e,t,ot.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=ot.queue(e,t),r=n.length,i=n.shift(),o=ot._queueHooks(e,t),a=function(){ot.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return gt.get(e,n)||gt.access(e,n,{empty:ot.Callbacks("once memory").add(function(){gt.remove(e,[t+"queue",n])})})}}),ot.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),arguments.length<r?ot.queue(this[0],e):n===t?this:this.each(function(){var t=ot.queue(this,e,n);ot._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&ot.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ot.dequeue(this,e)})},delay:function(e,t){return e=ot.fx?ot.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,o=ot.Deferred(),a=this,s=this.length,u=function(){--i||o.resolveWith(a,[a])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";s--;)r=gt.get(a[s],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(u));return u(),o.promise(n)}});var wt,Et,bt=/[\t\r\n\f]/g,Tt=/\r/g,At=/^(?:input|select|textarea|button)$/i;ot.fn.extend({attr:function(e,t){return ot.access(this,ot.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ot.removeAttr(this,e)})},prop:function(e,t){return ot.access(this,ot.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[ot.propFix[e]||e]})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,u="string"==typeof e&&e;if(ot.isFunction(e))return this.each(function(t){ot(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(st)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(bt," "):" ")){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");n.className=ot.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,u=0===arguments.length||"string"==typeof e&&e;if(ot.isFunction(e))return this.each(function(t){ot(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(st)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(bt," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");n.className=e?ot.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(ot.isFunction(e)?function(n){ot(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,r=0,i=ot(this),o=e.match(st)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(n===W||"boolean"===n)&&(this.className&&gt.set(this,"__className__",this.className),this.className=this.className||e===!1?"":gt.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(bt," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];{if(arguments.length)return i=ot.isFunction(e),this.each(function(r){var o;1===this.nodeType&&(o=i?e.call(this,r,ot(this).val()):e,null==o?o="":"number"==typeof o?o+="":ot.isArray(o)&&(o=ot.map(o,function(e){return null==e?"":e+""})),n=ot.valHooks[this.type]||ot.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,o,"value")!==t||(this.value=o))});if(o)return n=ot.valHooks[o.type]||ot.valHooks[o.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(o,"value"))!==t?r:(r=o.value,"string"==typeof r?r.replace(Tt,""):null==r?"":r)}}}),ot.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;s>u;u++)if(n=r[u],!(!n.selected&&u!==i||(ot.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&ot.nodeName(n.parentNode,"optgroup"))){if(t=ot(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=ot.makeArray(t),a=i.length;a--;)r=i[a],(r.selected=ot.inArray(ot(r).val(),o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}},attr:function(e,n,r){var i,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===W?ot.prop(e,n,r):(1===a&&ot.isXMLDoc(e)||(n=n.toLowerCase(),i=ot.attrHooks[n]||(ot.expr.match.bool.test(n)?Et:wt)),r===t?i&&"get"in i&&null!==(o=i.get(e,n))?o:(o=ot.find.attr(e,n),null==o?t:o):null!==r?i&&"set"in i&&(o=i.set(e,r,n))!==t?o:(e.setAttribute(n,r+""),r):void ot.removeAttr(e,n))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(st);if(o&&1===e.nodeType)for(;n=o[i++];)r=ot.propFix[n]||n,ot.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!ot.support.radioValue&&"radio"===t&&ot.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,r){var i,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!ot.isXMLDoc(e),a&&(n=ot.propFix[n]||n,o=ot.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&null!==(i=o.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||At.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),Et={set:function(e,t,n){return t===!1?ot.removeAttr(e,n):e.setAttribute(n,n),n}},ot.each(ot.expr.match.bool.source.match(/\w+/g),function(e,n){var r=ot.expr.attrHandle[n]||ot.find.attr;ot.expr.attrHandle[n]=function(e,n,i){var o=ot.expr.attrHandle[n],a=i?t:(ot.expr.attrHandle[n]=t)!=r(e,n,i)?n.toLowerCase():null;return ot.expr.attrHandle[n]=o,a}}),ot.support.optSelected||(ot.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),ot.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ot.propFix[this.toLowerCase()]=this}),ot.each(["radio","checkbox"],function(){ot.valHooks[this]={set:function(e,t){return ot.isArray(t)?e.checked=ot.inArray(ot(e).val(),t)>=0:void 0}},ot.support.checkOn||(ot.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Rt=/^key/,Ot=/^(?:mouse|contextmenu)|click/,Pt=/^(?:focusinfocus|focusoutblur)$/,kt=/^([^.]*)(?:\.(.+)|)$/;ot.event={global:{},add:function(e,n,r,i,o){var a,s,u,c,l,d,p,f,h,m,g,y=gt.get(e);if(y){for(r.handler&&(a=r,r=a.handler,o=a.selector),r.guid||(r.guid=ot.guid++),(c=y.events)||(c=y.events={}),(s=y.handle)||(s=y.handle=function(e){return typeof ot===W||e&&ot.event.triggered===e.type?t:ot.event.dispatch.apply(s.elem,arguments)},s.elem=e),n=(n||"").match(st)||[""],l=n.length;l--;)u=kt.exec(n[l])||[],h=g=u[1],m=(u[2]||"").split(".").sort(),h&&(p=ot.event.special[h]||{},h=(o?p.delegateType:p.bindType)||h,p=ot.event.special[h]||{},d=ot.extend({type:h,origType:g,data:i,handler:r,guid:r.guid,selector:o,needsContext:o&&ot.expr.match.needsContext.test(o),namespace:m.join(".")},a),(f=c[h])||(f=c[h]=[],f.delegateCount=0,p.setup&&p.setup.call(e,i,m,s)!==!1||e.addEventListener&&e.addEventListener(h,s,!1)),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),o?f.splice(f.delegateCount++,0,d):f.push(d),ot.event.global[h]=!0);e=null}},remove:function(e,t,n,r,i){var o,a,s,u,c,l,d,p,f,h,m,g=gt.hasData(e)&&gt.get(e);if(g&&(u=g.events)){for(t=(t||"").match(st)||[""],c=t.length;c--;)if(s=kt.exec(t[c])||[],f=m=s[1],h=(s[2]||"").split(".").sort(),f){for(d=ot.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,p=u[f]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)l=p[o],!i&&m!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(p.splice(o,1),l.selector&&p.delegateCount--,d.remove&&d.remove.call(e,l));a&&!p.length&&(d.teardown&&d.teardown.call(e,h,g.handle)!==!1||ot.removeEvent(e,f,g.handle),delete u[f])}else for(f in u)ot.event.remove(e,f+t[c],n,r,!0);ot.isEmptyObject(u)&&(delete g.handle,gt.remove(e,"events"))}},trigger:function(n,r,i,o){var a,s,u,c,l,d,p,f=[i||V],h=rt.call(n,"type")?n.type:n,m=rt.call(n,"namespace")?n.namespace.split("."):[];if(s=u=i=i||V,3!==i.nodeType&&8!==i.nodeType&&!Pt.test(h+ot.event.triggered)&&(h.indexOf(".")>=0&&(m=h.split("."),h=m.shift(),m.sort()),l=h.indexOf(":")<0&&"on"+h,n=n[ot.expando]?n:new ot.Event(h,"object"==typeof n&&n),n.isTrigger=o?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:ot.makeArray(r,[n]),p=ot.event.special[h]||{},o||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!o&&!p.noBubble&&!ot.isWindow(i)){for(c=p.delegateType||h,Pt.test(c+h)||(s=s.parentNode);s;s=s.parentNode)f.push(s),u=s;u===(i.ownerDocument||V)&&f.push(u.defaultView||u.parentWindow||e)}for(a=0;(s=f[a++])&&!n.isPropagationStopped();)n.type=a>1?c:p.bindType||h,d=(gt.get(s,"events")||{})[n.type]&&gt.get(s,"handle"),d&&d.apply(s,r),d=l&&s[l],d&&ot.acceptData(s)&&d.apply&&d.apply(s,r)===!1&&n.preventDefault();return n.type=h,o||n.isDefaultPrevented()||p._default&&p._default.apply(f.pop(),r)!==!1||!ot.acceptData(i)||l&&ot.isFunction(i[h])&&!ot.isWindow(i)&&(u=i[l],u&&(i[l]=null),ot.event.triggered=h,i[h](),ot.event.triggered=t,u&&(i[l]=u)),n.result}},dispatch:function(e){e=ot.event.fix(e);var n,r,i,o,a,s=[],u=et.call(arguments),c=(gt.get(this,"events")||{})[e.type]||[],l=ot.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(s=ot.event.handlers.call(this,e,c),n=0;(o=s[n++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,r=0;(a=o.handlers[r++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(a.namespace))&&(e.handleObj=a,e.data=a.data,i=((ot.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,u),i!==t&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],u=n.delegateCount,c=e.target;if(u&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!==this;c=c.parentNode||this)if(c.disabled!==!0||"click"!==e.type){for(i=[],r=0;u>r;r++)a=n[r],o=a.selector+" ",i[o]===t&&(i[o]=a.needsContext?ot(o,this).index(c)>=0:ot.find(o,this,null,[c]).length),i[o]&&i.push(a);i.length&&s.push({elem:c,handlers:i})}return u<n.length&&s.push({elem:this,handlers:n.slice(u)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,o,a=n.button;return null==e.pageX&&null!=n.clientX&&(r=e.target.ownerDocument||V,i=r.documentElement,o=r.body,e.pageX=n.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)),e.which||a===t||(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[ot.expando])return e;var t,n,r,i=e.type,o=e,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=Ot.test(i)?this.mouseHooks:Rt.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new ot.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=V),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==u()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===u()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&ot.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return ot.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=ot.extend(new ot.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?ot.event.trigger(i,null,t):ot.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},ot.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},ot.Event=function(e,t){return this instanceof ot.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.getPreventDefault&&e.getPreventDefault()?a:s):this.type=e,t&&ot.extend(this,t),this.timeStamp=e&&e.timeStamp||ot.now(),void(this[ot.expando]=!0)):new ot.Event(e,t)},ot.Event.prototype={isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=a,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=a,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a,this.stopPropagation()}},ot.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){ot.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!ot.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),ot.support.focusinBubbles||ot.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){ot.event.simulate(t,e.target,ot.event.fix(e),!0)};ot.event.special[t]={setup:function(){0===n++&&V.addEventListener(e,r,!0)},teardown:function(){0===--n&&V.removeEventListener(e,r,!0)}}}),ot.fn.extend({on:function(e,n,r,i,o){var a,u;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(u in e)this.on(u,n,r,e[u],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=s;else if(!i)return this;return 1===o&&(a=i,i=function(e){return ot().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=ot.guid++)),this.each(function(){ot.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,ot(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=s),this.each(function(){ot.event.remove(this,e,r,n)})},trigger:function(e,t){return this.each(function(){ot.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?ot.event.trigger(e,t,n,!0):void 0}});var Ct=/^.[^:#\[\.,]*$/,St=/^(?:parents|prev(?:Until|All))/,It=ot.expr.match.needsContext,Dt={children:!0,contents:!0,next:!0,prev:!0};ot.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(ot(e).filter(function(){for(t=0;i>t;t++)if(ot.contains(r[t],this))return!0}));for(t=0;i>t;t++)ot.find(e,r[t],n);return n=this.pushStack(i>1?ot.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t=ot(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(ot.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(l(this,e||[],!0))},filter:function(e){return this.pushStack(l(this,e||[],!1))},is:function(e){return!!l(this,"string"==typeof e&&It.test(e)?ot(e):e||[],!1).length},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=It.test(e)||"string"!=typeof e?ot(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&ot.find.matchesSelector(n,e))){n=o.push(n);break}return this.pushStack(o.length>1?ot.unique(o):o)},index:function(e){return e?"string"==typeof e?tt.call(ot(e),this[0]):tt.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?ot(e,t):ot.makeArray(e&&e.nodeType?[e]:e),r=ot.merge(this.get(),n);return this.pushStack(ot.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ot.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ot.dir(e,"parentNode")},parentsUntil:function(e,t,n){return ot.dir(e,"parentNode",n)},next:function(e){return c(e,"nextSibling")},prev:function(e){return c(e,"previousSibling")},nextAll:function(e){return ot.dir(e,"nextSibling")},prevAll:function(e){return ot.dir(e,"previousSibling")},nextUntil:function(e,t,n){return ot.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return ot.dir(e,"previousSibling",n)},siblings:function(e){return ot.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ot.sibling(e.firstChild)},contents:function(e){return e.contentDocument||ot.merge([],e.childNodes)}},function(e,t){ot.fn[e]=function(n,r){var i=ot.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=ot.filter(r,i)),this.length>1&&(Dt[e]||ot.unique(i),St.test(e)&&i.reverse()),this.pushStack(i)}}),ot.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?ot.find.matchesSelector(r,e)?[r]:[]:ot.find.matches(e,ot.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,r){for(var i=[],o=r!==t;(e=e[n])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&ot(e).is(r))break;i.push(e)}return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var Nt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Mt=/<([\w:]+)/,_t=/<|&#?\w+;/,Ft=/<(?:script|style|link)/i,Lt=/^(?:checkbox|radio)$/i,zt=/checked\s*(?:[^=]|=\s*.checked.)/i,xt=/^$|\/(?:java|ecma)script/i,Ut=/^true\/(.*)/,jt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Gt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Gt.optgroup=Gt.option,Gt.tbody=Gt.tfoot=Gt.colgroup=Gt.caption=Gt.thead,Gt.th=Gt.td,ot.fn.extend({text:function(e){return ot.access(this,function(e){return e===t?ot.text(this):this.empty().append((this[0]&&this[0].ownerDocument||V).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=d(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=d(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?ot.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||ot.cleanData(g(n)),n.parentNode&&(t&&ot.contains(n.ownerDocument,n)&&h(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ot.cleanData(g(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return ot.clone(this,e,t)})},html:function(e){return ot.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t&&1===n.nodeType)return n.innerHTML;if("string"==typeof e&&!Ft.test(e)&&!Gt[(Mt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Nt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(ot.cleanData(g(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=ot.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),ot(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=Z.apply([],e);var r,i,o,a,s,u,c=0,l=this.length,d=this,h=l-1,m=e[0],y=ot.isFunction(m);if(y||!(1>=l||"string"!=typeof m||ot.support.checkClone)&&zt.test(m))return this.each(function(r){var i=d.eq(r);y&&(e[0]=m.call(this,r,i.html())),i.domManip(e,t,n)});if(l&&(r=ot.buildFragment(e,this[0].ownerDocument,!1,!n&&this),i=r.firstChild,1===r.childNodes.length&&(r=i),i)){for(o=ot.map(g(r,"script"),p),a=o.length;l>c;c++)s=r,c!==h&&(s=ot.clone(s,!0,!0),a&&ot.merge(o,g(s,"script"))),t.call(this[c],s,c);if(a)for(u=o[o.length-1].ownerDocument,ot.map(o,f),c=0;a>c;c++)s=o[c],xt.test(s.type||"")&&!gt.access(s,"globalEval")&&ot.contains(u,s)&&(s.src?ot._evalUrl(s.src):ot.globalEval(s.textContent.replace(jt,"")))}return this}}),ot.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ot.fn[e]=function(e){for(var n,r=[],i=ot(e),o=i.length-1,a=0;o>=a;a++)n=a===o?this:this.clone(!0),ot(i[a])[t](n),J.apply(r,n.get());return this.pushStack(r)}}),ot.extend({clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),u=ot.contains(e.ownerDocument,e);if(!(ot.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ot.isXMLDoc(e)))for(a=g(s),o=g(e),r=0,i=o.length;i>r;r++)y(o[r],a[r]);if(t)if(n)for(o=o||g(e),a=a||g(s),r=0,i=o.length;i>r;r++)m(o[r],a[r]);else m(e,s);return a=g(s,"script"),a.length>0&&h(a,!u&&g(e,"script")),s},buildFragment:function(e,t,n,r){for(var i,o,a,s,u,c,l=0,d=e.length,p=t.createDocumentFragment(),f=[];d>l;l++)if(i=e[l],i||0===i)if("object"===ot.type(i))ot.merge(f,i.nodeType?[i]:i);else if(_t.test(i)){for(o=o||p.appendChild(t.createElement("div")),a=(Mt.exec(i)||["",""])[1].toLowerCase(),s=Gt[a]||Gt._default,o.innerHTML=s[1]+i.replace(Nt,"<$1></$2>")+s[2],c=s[0];c--;)o=o.lastChild;ot.merge(f,o.childNodes),o=p.firstChild,o.textContent=""}else f.push(t.createTextNode(i));for(p.textContent="",l=0;i=f[l++];)if((!r||-1===ot.inArray(i,r))&&(u=ot.contains(i.ownerDocument,i),o=g(p.appendChild(i),"script"),u&&h(o),n))for(c=0;i=o[c++];)xt.test(i.type||"")&&n.push(i);return p},cleanData:function(e){for(var n,r,o,a,s,u,c=ot.event.special,l=0;(r=e[l])!==t;l++){if(i.accepts(r)&&(s=r[gt.expando],s&&(n=gt.cache[s]))){if(o=Object.keys(n.events||{}),o.length)for(u=0;(a=o[u])!==t;u++)c[a]?ot.event.remove(r,a):ot.removeEvent(r,a,n.handle);gt.cache[s]&&delete gt.cache[s]}delete mt.cache[r[mt.expando]]}},_evalUrl:function(e){return ot.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),ot.fn.extend({wrapAll:function(e){var t;return ot.isFunction(e)?this.each(function(t){ot(this).wrapAll(e.call(this,t))}):(this[0]&&(t=ot(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(ot.isFunction(e)?function(t){ot(this).wrapInner(e.call(this,t))
}:function(){var t=ot(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ot.isFunction(e);return this.each(function(n){ot(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){ot.nodeName(this,"body")||ot(this).replaceWith(this.childNodes)}).end()}});var Bt,Wt,Yt=/^(none|table(?!-c[ea]).+)/,Vt=/^margin/,qt=new RegExp("^("+at+")(.*)$","i"),$t=new RegExp("^("+at+")(?!px)[a-z%]+$","i"),Ht=new RegExp("^([+-])=("+at+")","i"),Xt={BODY:"block"},Qt={position:"absolute",visibility:"hidden",display:"block"},Kt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],Jt=["Webkit","O","Moz","ms"];ot.fn.extend({css:function(e,n){return ot.access(this,function(e,n,r){var i,o,a={},s=0;if(ot.isArray(n)){for(i=E(e),o=n.length;o>s;s++)a[n[s]]=ot.css(e,n[s],!1,i);return a}return r!==t?ot.style(e,n,r):ot.css(e,n)},e,n,arguments.length>1)},show:function(){return b(this,!0)},hide:function(){return b(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){w(this)?ot(this).show():ot(this).hide()})}}),ot.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Bt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,model:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,u=ot.camelCase(n),c=e.style;return n=ot.cssProps[u]||(ot.cssProps[u]=v(c,u)),s=ot.cssHooks[n]||ot.cssHooks[u],r===t?s&&"get"in s&&(o=s.get(e,!1,i))!==t?o:c[n]:(a=typeof r,"string"===a&&(o=Ht.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(ot.css(e,n)),a="number"),null==r||"number"===a&&isNaN(r)||("number"!==a||ot.cssNumber[u]||(r+="px"),ot.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(c[n]="inherit"),s&&"set"in s&&(r=s.set(e,r,i))===t||(c[n]=r)),void 0)}},css:function(e,n,r,i){var o,a,s,u=ot.camelCase(n);return n=ot.cssProps[u]||(ot.cssProps[u]=v(e.style,u)),s=ot.cssHooks[n]||ot.cssHooks[u],s&&"get"in s&&(o=s.get(e,!0,r)),o===t&&(o=Bt(e,n,i)),"normal"===o&&n in Kt&&(o=Kt[n]),""===r||r?(a=parseFloat(o),r===!0||ot.isNumeric(a)?a||0:o):o}}),Bt=function(e,n,r){var i,o,a,s=r||E(e),u=s?s.getPropertyValue(n)||s[n]:t,c=e.style;return s&&(""!==u||ot.contains(e.ownerDocument,e)||(u=ot.style(e,n)),$t.test(u)&&Vt.test(n)&&(i=c.width,o=c.minWidth,a=c.maxWidth,c.minWidth=c.maxWidth=c.width=u,u=s.width,c.width=i,c.minWidth=o,c.maxWidth=a)),u},ot.each(["height","width"],function(e,t){ot.cssHooks[t]={get:function(e,n,r){return n?0===e.offsetWidth&&Yt.test(ot.css(e,"display"))?ot.swap(e,Qt,function(){return R(e,t,r)}):R(e,t,r):void 0},set:function(e,n,r){var i=r&&E(e);return T(e,n,r?A(e,t,r,ot.support.boxSizing&&"border-box"===ot.css(e,"boxSizing",!1,i),i):0)}}}),ot(function(){ot.support.reliableMarginRight||(ot.cssHooks.marginRight={get:function(e,t){return t?ot.swap(e,{display:"inline-block"},Bt,[e,"marginRight"]):void 0}}),!ot.support.pixelPosition&&ot.fn.position&&ot.each(["top","left"],function(e,t){ot.cssHooks[t]={get:function(e,n){return n?(n=Bt(e,t),$t.test(n)?ot(e).position()[t]+"px":n):void 0}}})}),ot.expr&&ot.expr.filters&&(ot.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},ot.expr.filters.visible=function(e){return!ot.expr.filters.hidden(e)}),ot.each({margin:"",padding:"",border:"Width"},function(e,t){ot.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+Zt[r]+t]=o[r]||o[r-2]||o[0];return i}},Vt.test(e)||(ot.cssHooks[e+t].set=T)});var en=/%20/g,tn=/\[\]$/,nn=/\r?\n/g,rn=/^(?:submit|button|image|reset|file)$/i,on=/^(?:input|select|textarea|keygen)/i;ot.fn.extend({serialize:function(){return ot.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ot.prop(this,"elements");return e?ot.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ot(this).is(":disabled")&&on.test(this.nodeName)&&!rn.test(e)&&(this.checked||!Lt.test(e))}).map(function(e,t){var n=ot(this).val();return null==n?null:ot.isArray(n)?ot.map(n,function(e){return{name:t.name,value:e.replace(nn,"\r\n")}}):{name:t.name,value:n.replace(nn,"\r\n")}}).get()}}),ot.param=function(e,n){var r,i=[],o=function(e,t){t=ot.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=ot.ajaxSettings&&ot.ajaxSettings.traditional),ot.isArray(e)||e.jquery&&!ot.isPlainObject(e))ot.each(e,function(){o(this.name,this.value)});else for(r in e)k(r,e[r],n,o);return i.join("&").replace(en,"+")},ot.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ot.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ot.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var an,sn,un=ot.now(),cn=/\?/,ln=/#.*$/,dn=/([?&])_=[^&]*/,pn=/^(.*?):[ \t]*([^\r\n]*)$/gm,fn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,hn=/^(?:GET|HEAD)$/,mn=/^\/\//,gn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,yn=ot.fn.load,vn={},wn={},En="*/".concat("*");try{sn=Y.href}catch(bn){sn=V.createElement("a"),sn.href="",sn=sn.href}an=gn.exec(sn.toLowerCase())||[],ot.fn.load=function(e,n,r){if("string"!=typeof e&&yn)return yn.apply(this,arguments);var i,o,a,s=this,u=e.indexOf(" ");return u>=0&&(i=e.slice(u),e=e.slice(0,u)),ot.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(o="POST"),s.length>0&&ot.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){a=arguments,s.html(i?ot("<div>").append(ot.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,a||[e.responseText,t,e])}),this},ot.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ot.fn[t]=function(e){return this.on(t,e)}}),ot.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:sn,type:"GET",isLocal:fn.test(an[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":En,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ot.parseJSON,"text xml":ot.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?I(I(e,ot.ajaxSettings),t):I(ot.ajaxSettings,e)},ajaxPrefilter:C(vn),ajaxTransport:C(wn),ajax:function(e,n){function r(e,n,r,s){var c,d,v,w,b,A=n;2!==E&&(E=2,u&&clearTimeout(u),i=t,a=s||"",T.readyState=e>0?4:0,c=e>=200&&300>e||304===e,r&&(w=D(p,T,r)),w=N(p,w,T,c),c?(p.ifModified&&(b=T.getResponseHeader("Last-Modified"),b&&(ot.lastModified[o]=b),b=T.getResponseHeader("etag"),b&&(ot.etag[o]=b)),204===e||"HEAD"===p.type?A="nocontent":304===e?A="notmodified":(A=w.state,d=w.data,v=w.error,c=!v)):(v=A,(e||!A)&&(A="error",0>e&&(e=0))),T.status=e,T.statusText=(n||A)+"",c?m.resolveWith(f,[d,A,T]):m.rejectWith(f,[T,A,v]),T.statusCode(y),y=t,l&&h.trigger(c?"ajaxSuccess":"ajaxError",[T,p,c?d:v]),g.fireWith(f,[T,A]),l&&(h.trigger("ajaxComplete",[T,p]),--ot.active||ot.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var i,o,a,s,u,c,l,d,p=ot.ajaxSetup({},n),f=p.context||p,h=p.context&&(f.nodeType||f.jquery)?ot(f):ot.event,m=ot.Deferred(),g=ot.Callbacks("once memory"),y=p.statusCode||{},v={},w={},E=0,b="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(2===E){if(!s)for(s={};t=pn.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===E?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return E||(e=w[n]=w[n]||e,v[e]=t),this},overrideMimeType:function(e){return E||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>E)for(t in e)y[t]=[y[t],e[t]];else T.always(e[T.status]);return this},abort:function(e){var t=e||b;return i&&i.abort(t),r(0,t),this}};if(m.promise(T).complete=g.add,T.success=T.done,T.error=T.fail,p.url=((e||p.url||sn)+"").replace(ln,"").replace(mn,an[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=ot.trim(p.dataType||"*").toLowerCase().match(st)||[""],null==p.crossDomain&&(c=gn.exec(p.url.toLowerCase()),p.crossDomain=!(!c||c[1]===an[1]&&c[2]===an[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(an[3]||("http:"===an[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=ot.param(p.data,p.traditional)),S(vn,p,n,T),2===E)return T;l=p.global,l&&0===ot.active++&&ot.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!hn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(cn.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=dn.test(o)?o.replace(dn,"$1_="+un++):o+(cn.test(o)?"&":"?")+"_="+un++)),p.ifModified&&(ot.lastModified[o]&&T.setRequestHeader("If-Modified-Since",ot.lastModified[o]),ot.etag[o]&&T.setRequestHeader("If-None-Match",ot.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&T.setRequestHeader("Content-Type",p.contentType),T.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+En+"; q=0.01":""):p.accepts["*"]);for(d in p.headers)T.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(p.beforeSend.call(f,T,p)===!1||2===E))return T.abort();b="abort";for(d in{success:1,error:1,complete:1})T[d](p[d]);if(i=S(wn,p,n,T)){T.readyState=1,l&&h.trigger("ajaxSend",[T,p]),p.async&&p.timeout>0&&(u=setTimeout(function(){T.abort("timeout")},p.timeout));try{E=1,i.send(v,r)}catch(A){if(!(2>E))throw A;r(-1,A)}}else r(-1,"No Transport");return T},getJSON:function(e,t,n){return ot.get(e,t,n,"json")},getScript:function(e,n){return ot.get(e,t,n,"script")}}),ot.each(["get","post"],function(e,n){ot[n]=function(e,r,i,o){return ot.isFunction(r)&&(o=o||i,i=r,r=t),ot.ajax({url:e,type:n,dataType:o,data:r,success:i})}}),ot.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return ot.globalEval(e),e}}}),ot.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ot.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=ot("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),V.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Tn=[],An=/(=)\?(?=&|$)|\?\?/;ot.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Tn.pop()||ot.expando+"_"+un++;return this[e]=!0,e}}),ot.ajaxPrefilter("json jsonp",function(n,r,i){var o,a,s,u=n.jsonp!==!1&&(An.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&An.test(n.data)&&"data");return u||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=ot.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,u?n[u]=n[u].replace(An,"$1"+o):n.jsonp!==!1&&(n.url+=(cn.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return s||ot.error(o+" was not called"),s[0]},n.dataTypes[0]="json",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,Tn.push(o)),s&&ot.isFunction(a)&&a(s[0]),s=a=t}),"script"):void 0}),ot.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Rn=ot.ajaxSettings.xhr(),On={0:200,1223:204},Pn=0,kn={};e.ActiveXObject&&ot(e).on("unload",function(){for(var e in kn)kn[e]();kn=t}),ot.support.cors=!!Rn&&"withCredentials"in Rn,ot.support.ajax=Rn=!!Rn,ot.ajaxTransport(function(e){var n;return ot.support.cors||Rn&&!e.crossDomain?{send:function(r,i){var o,a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)s[o]=e.xhrFields[o];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(o in r)s.setRequestHeader(o,r[o]);n=function(e){return function(){n&&(delete kn[a],n=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?i(s.status||404,s.statusText):i(On[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:t,s.getAllResponseHeaders()))}},s.onload=n(),s.onerror=n("error"),n=kn[a=Pn++]=n("abort"),s.send(e.hasContent&&e.data||null)},abort:function(){n&&n()}}:void 0});var Cn,Sn,In=/^(?:toggle|show|hide)$/,Dn=new RegExp("^(?:([+-])=|)("+at+")([a-z%]*)$","i"),Nn=/queueHooks$/,Mn=[z],_n={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Dn.exec(t),o=i&&i[3]||(ot.cssNumber[e]?"":"px"),a=(ot.cssNumber[e]||"px"!==o&&+r)&&Dn.exec(ot.css(n.elem,e)),s=1,u=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do s=s||".5",a/=s,ot.style(n.elem,e,a+o);while(s!==(s=n.cur()/r)&&1!==s&&--u)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};ot.Animation=ot.extend(F,{tweener:function(e,t){ot.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],_n[n]=_n[n]||[],_n[n].unshift(t)},prefilter:function(e,t){t?Mn.unshift(e):Mn.push(e)}}),ot.Tween=x,x.prototype={constructor:x,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(ot.cssNumber[n]?"":"px")},cur:function(){var e=x.propHooks[this.prop];return e&&e.get?e.get(this):x.propHooks._default.get(this)},run:function(e){var t,n=x.propHooks[this.prop];return this.pos=t=this.options.duration?ot.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):x.propHooks._default.set(this),this}},x.prototype.init.prototype=x.prototype,x.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ot.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){ot.fx.step[e.prop]?ot.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ot.cssProps[e.prop]]||ot.cssHooks[e.prop])?ot.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},x.propHooks.scrollTop=x.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ot.each(["toggle","show","hide"],function(e,t){var n=ot.fn[t];ot.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(U(t,!0),e,r,i)}}),ot.fn.extend({fadeTo:function(e,t,n,r){return this.filter(w).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=ot.isEmptyObject(e),o=ot.speed(t,n,r),a=function(){var t=F(this,ot.extend({},e),o);(i||gt.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=ot.timers,a=gt.get(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&Nn.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&ot.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=gt.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=ot.timers,a=r?r.length:0;for(n.finish=!0,ot.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),ot.each({slideDown:U("show"),slideUp:U("hide"),slideToggle:U("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ot.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),ot.speed=function(e,t,n){var r=e&&"object"==typeof e?ot.extend({},e):{complete:n||!n&&t||ot.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ot.isFunction(t)&&t};return r.duration=ot.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in ot.fx.speeds?ot.fx.speeds[r.duration]:ot.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){ot.isFunction(r.old)&&r.old.call(this),r.queue&&ot.dequeue(this,r.queue)},r},ot.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ot.timers=[],ot.fx=x.prototype.init,ot.fx.tick=function(){var e,n=ot.timers,r=0;for(Cn=ot.now();r<n.length;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||ot.fx.stop(),Cn=t},ot.fx.timer=function(e){e()&&ot.timers.push(e)&&ot.fx.start()},ot.fx.interval=13,ot.fx.start=function(){Sn||(Sn=setInterval(ot.fx.tick,ot.fx.interval))},ot.fx.stop=function(){clearInterval(Sn),Sn=null},ot.fx.speeds={slow:600,fast:200,_default:400},ot.fx.step={},ot.expr&&ot.expr.filters&&(ot.expr.filters.animated=function(e){return ot.grep(ot.timers,function(t){return e===t.elem}).length}),ot.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){ot.offset.setOffset(this,e,t)});var n,r,i=this[0],o={top:0,left:0},a=i&&i.ownerDocument;if(a)return n=a.documentElement,ot.contains(n,i)?(typeof i.getBoundingClientRect!==W&&(o=i.getBoundingClientRect()),r=j(a),{top:o.top+r.pageYOffset-n.clientTop,left:o.left+r.pageXOffset-n.clientLeft}):o},ot.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,c,l=ot.css(e,"position"),d=ot(e),p={};"static"===l&&(e.style.position="relative"),s=d.offset(),o=ot.css(e,"top"),u=ot.css(e,"left"),c=("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1,c?(r=d.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),ot.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+i),"using"in t?t.using.call(e,p):d.css(p)}},ot.fn.extend({position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===ot.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ot.nodeName(e[0],"html")||(r=e.offset()),r.top+=ot.css(e[0],"borderTopWidth",!0),r.left+=ot.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-ot.css(n,"marginTop",!0),left:t.left-r.left-ot.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||q;e&&!ot.nodeName(e,"html")&&"static"===ot.css(e,"position");)e=e.offsetParent;return e||q})}}),ot.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,r){var i="pageYOffset"===r;ot.fn[n]=function(o){return ot.access(this,function(n,o,a){var s=j(n);return a===t?s?s[r]:n[o]:void(s?s.scrollTo(i?e.pageXOffset:a,i?a:e.pageYOffset):n[o]=a)},n,o,arguments.length,null)}}),ot.each({Height:"height",Width:"width"},function(e,n){ot.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){ot.fn[i]=function(i,o){var a=arguments.length&&(r||"boolean"!=typeof i),s=r||(i===!0||o===!0?"margin":"border");return ot.access(this,function(n,r,i){var o;return ot.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):i===t?ot.css(n,r,s):ot.style(n,r,i,s)},n,a?i:t,a,null)}})}),ot.fn.size=function(){return this.length},ot.fn.andSelf=ot.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=ot:"function"==typeof define&&define.amd&&define("jquery",[],function(){return ot}),"object"==typeof e&&"object"==typeof e.document&&(e.jQuery=e.$=ot)}(window),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,o=Function.prototype,a=r.push,s=r.slice,u=r.concat,c=i.toString,l=i.hasOwnProperty,d=r.forEach,p=r.map,f=r.reduce,h=r.reduceRight,m=r.filter,g=r.every,y=r.some,v=r.indexOf,w=r.lastIndexOf,E=Array.isArray,b=Object.keys,T=o.bind,A=function(e){return e instanceof A?e:this instanceof A?void(this._wrapped=e):new A(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=A),exports._=A):e._=A,A.VERSION="1.5.2";var R=A.each=A.forEach=function(e,t,r){if(null!=e)if(d&&e.forEach===d)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,o=e.length;o>i;i++)if(t.call(r,e[i],i,e)===n)return}else for(var a=A.keys(e),i=0,o=a.length;o>i;i++)if(t.call(r,e[a[i]],a[i],e)===n)return};A.map=A.collect=function(e,t,n){var r=[];return null==e?r:p&&e.map===p?e.map(t,n):(R(e,function(e,i,o){r.push(t.call(n,e,i,o))}),r)};var O="Reduce of empty array with no initial value";A.reduce=A.foldl=A.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),f&&e.reduce===f)return r&&(t=A.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(R(e,function(e,o,a){i?n=t.call(r,n,e,o,a):(n=e,i=!0)}),!i)throw new TypeError(O);return n},A.reduceRight=A.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),h&&e.reduceRight===h)return r&&(t=A.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var o=e.length;if(o!==+o){var a=A.keys(e);o=a.length}if(R(e,function(s,u,c){u=a?a[--o]:--o,i?n=t.call(r,n,e[u],u,c):(n=e[u],i=!0)}),!i)throw new TypeError(O);return n},A.find=A.detect=function(e,t,n){var r;return P(e,function(e,i,o){return t.call(n,e,i,o)?(r=e,!0):void 0}),r},A.filter=A.select=function(e,t,n){var r=[];return null==e?r:m&&e.filter===m?e.filter(t,n):(R(e,function(e,i,o){t.call(n,e,i,o)&&r.push(e)}),r)},A.reject=function(e,t,n){return A.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},A.every=A.all=function(e,t,r){t||(t=A.identity);var i=!0;return null==e?i:g&&e.every===g?e.every(t,r):(R(e,function(e,o,a){return(i=i&&t.call(r,e,o,a))?void 0:n}),!!i)};var P=A.some=A.any=function(e,t,r){t||(t=A.identity);var i=!1;return null==e?i:y&&e.some===y?e.some(t,r):(R(e,function(e,o,a){return i||(i=t.call(r,e,o,a))?n:void 0}),!!i)};A.contains=A.include=function(e,t){return null==e?!1:v&&e.indexOf===v?-1!=e.indexOf(t):P(e,function(e){return e===t})},A.invoke=function(e,t){var n=s.call(arguments,2),r=A.isFunction(t);return A.map(e,function(e){return(r?t:e[t]).apply(e,n)})},A.pluck=function(e,t){return A.map(e,function(e){return e[t]})},A.where=function(e,t,n){return A.isEmpty(t)?n?void 0:[]:A[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},A.findWhere=function(e,t){return A.where(e,t,!0)},A.max=function(e,t,n){if(!t&&A.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&A.isEmpty(e))return-1/0;var r={computed:-1/0,value:-1/0};return R(e,function(e,i,o){var a=t?t.call(n,e,i,o):e;a>r.computed&&(r={value:e,computed:a})}),r.value},A.min=function(e,t,n){if(!t&&A.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&A.isEmpty(e))return 1/0;var r={computed:1/0,value:1/0};return R(e,function(e,i,o){var a=t?t.call(n,e,i,o):e;a<r.computed&&(r={value:e,computed:a})}),r.value},A.shuffle=function(e){var t,n=0,r=[];return R(e,function(e){t=A.random(n++),r[n-1]=r[t],r[t]=e}),r},A.sample=function(e,t,n){return arguments.length<2||n?e[A.random(e.length-1)]:A.shuffle(e).slice(0,Math.max(0,t))};var k=function(e){return A.isFunction(e)?e:function(t){return t[e]}};A.sortBy=function(e,t,n){var r=k(t);return A.pluck(A.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index-t.index}),"value")};var C=function(e){return function(t,n,r){var i={},o=null==n?A.identity:k(n);return R(t,function(n,a){var s=o.call(r,n,a,t);e(i,s,n)}),i}};A.groupBy=C(function(e,t,n){(A.has(e,t)?e[t]:e[t]=[]).push(n)}),A.indexBy=C(function(e,t,n){e[t]=n}),A.countBy=C(function(e,t){A.has(e,t)?e[t]++:e[t]=1}),A.sortedIndex=function(e,t,n,r){n=null==n?A.identity:k(n);for(var i=n.call(r,t),o=0,a=e.length;a>o;){var s=o+a>>>1;n.call(r,e[s])<i?o=s+1:a=s}return o},A.toArray=function(e){return e?A.isArray(e)?s.call(e):e.length===+e.length?A.map(e,A.identity):A.values(e):[]},A.size=function(e){return null==e?0:e.length===+e.length?e.length:A.keys(e).length},A.first=A.head=A.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:s.call(e,0,t)},A.initial=function(e,t,n){return s.call(e,0,e.length-(null==t||n?1:t))},A.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:s.call(e,Math.max(e.length-t,0))},A.rest=A.tail=A.drop=function(e,t,n){return s.call(e,null==t||n?1:t)},A.compact=function(e){return A.filter(e,A.identity)};var S=function(e,t,n){return t&&A.every(e,A.isArray)?u.apply(n,e):(R(e,function(e){A.isArray(e)||A.isArguments(e)?t?a.apply(n,e):S(e,t,n):n.push(e)}),n)};A.flatten=function(e,t){return S(e,t,[])},A.without=function(e){return A.difference(e,s.call(arguments,1))},A.uniq=A.unique=function(e,t,n,r){A.isFunction(t)&&(r=n,n=t,t=!1);var i=n?A.map(e,n,r):e,o=[],a=[];return R(i,function(n,r){(t?r&&a[a.length-1]===n:A.contains(a,n))||(a.push(n),o.push(e[r]))}),o},A.union=function(){return A.uniq(A.flatten(arguments,!0))},A.intersection=function(e){var t=s.call(arguments,1);return A.filter(A.uniq(e),function(e){return A.every(t,function(t){return A.indexOf(t,e)>=0})})},A.difference=function(e){var t=u.apply(r,s.call(arguments,1));return A.filter(e,function(e){return!A.contains(t,e)})},A.zip=function(){for(var e=A.max(A.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=A.pluck(arguments,""+n);return t},A.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},A.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=A.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(v&&e.indexOf===v)return e.indexOf(t,n);for(;i>r;r++)if(e[r]===t)return r;return-1},A.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(w&&e.lastIndexOf===w)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},A.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,o=new Array(r);r>i;)o[i++]=e,e+=n;return o};var I=function(){};A.bind=function(e,t){var n,r;if(T&&e.bind===T)return T.apply(e,s.call(arguments,1));if(!A.isFunction(e))throw new TypeError;return n=s.call(arguments,2),r=function(){if(!(this instanceof r))return e.apply(t,n.concat(s.call(arguments)));I.prototype=e.prototype;var i=new I;I.prototype=null;var o=e.apply(i,n.concat(s.call(arguments)));return Object(o)===o?o:i}},A.partial=function(e){var t=s.call(arguments,1);return function(){return e.apply(this,t.concat(s.call(arguments)))}},A.bindAll=function(e){var t=s.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return R(t,function(t){e[t]=A.bind(e[t],e)}),e},A.memoize=function(e,t){var n={};return t||(t=A.identity),function(){var r=t.apply(this,arguments);return A.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},A.delay=function(e,t){var n=s.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},A.defer=function(e){return A.delay.apply(A,[e,1].concat(s.call(arguments,1)))},A.throttle=function(e,t,n){var r,i,o,a=null,s=0;n||(n={});var u=function(){s=n.leading===!1?0:new Date,a=null,o=e.apply(r,i)};return function(){var c=new Date;s||n.leading!==!1||(s=c);var l=t-(c-s);return r=this,i=arguments,0>=l?(clearTimeout(a),a=null,s=c,o=e.apply(r,i)):a||n.trailing===!1||(a=setTimeout(u,l)),o}},A.debounce=function(e,t,n){var r,i,o,a,s;return function(){o=this,i=arguments,a=new Date;var u=function(){var c=new Date-a;t>c?r=setTimeout(u,t-c):(r=null,n||(s=e.apply(o,i)))},c=n&&!r;return r||(r=setTimeout(u,t)),c&&(s=e.apply(o,i)),s}},A.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},A.wrap=function(e,t){return function(){var n=[e];return a.apply(n,arguments),t.apply(this,n)}},A.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},A.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},A.keys=b||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)A.has(e,n)&&t.push(n);return t},A.values=function(e){for(var t=A.keys(e),n=t.length,r=new Array(n),i=0;n>i;i++)r[i]=e[t[i]];return r},A.pairs=function(e){for(var t=A.keys(e),n=t.length,r=new Array(n),i=0;n>i;i++)r[i]=[t[i],e[t[i]]];return r},A.invert=function(e){for(var t={},n=A.keys(e),r=0,i=n.length;i>r;r++)t[e[n[r]]]=n[r];return t},A.functions=A.methods=function(e){var t=[];for(var n in e)A.isFunction(e[n])&&t.push(n);return t.sort()},A.extend=function(e){return R(s.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},A.pick=function(e){var t={},n=u.apply(r,s.call(arguments,1));return R(n,function(n){n in e&&(t[n]=e[n])}),t},A.omit=function(e){var t={},n=u.apply(r,s.call(arguments,1));for(var i in e)A.contains(n,i)||(t[i]=e[i]);return t},A.defaults=function(e){return R(s.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},A.clone=function(e){return A.isObject(e)?A.isArray(e)?e.slice():A.extend({},e):e},A.tap=function(e,t){return t(e),e};var D=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof A&&(e=e._wrapped),t instanceof A&&(t=t._wrapped);var i=c.call(e);if(i!=c.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=n.length;o--;)if(n[o]==e)return r[o]==t;var a=e.constructor,s=t.constructor;if(a!==s&&!(A.isFunction(a)&&a instanceof a&&A.isFunction(s)&&s instanceof s))return!1;n.push(e),r.push(t);var u=0,l=!0;if("[object Array]"==i){if(u=e.length,l=u==t.length)for(;u--&&(l=D(e[u],t[u],n,r)););}else{for(var d in e)if(A.has(e,d)&&(u++,!(l=A.has(t,d)&&D(e[d],t[d],n,r))))break;if(l){for(d in t)if(A.has(t,d)&&!u--)break;l=!u}}return n.pop(),r.pop(),l};A.isEqual=function(e,t){return D(e,t,[],[])},A.isEmpty=function(e){if(null==e)return!0;if(A.isArray(e)||A.isString(e))return 0===e.length;for(var t in e)if(A.has(e,t))return!1;return!0},A.isElement=function(e){return!(!e||1!==e.nodeType)},A.isArray=E||function(e){return"[object Array]"==c.call(e)},A.isObject=function(e){return e===Object(e)},R(["Arguments","Function","String","Number","Date","RegExp"],function(e){A["is"+e]=function(t){return c.call(t)=="[object "+e+"]"}}),A.isArguments(arguments)||(A.isArguments=function(e){return!(!e||!A.has(e,"callee"))}),"function"!=typeof/./&&(A.isFunction=function(e){return"function"==typeof e}),A.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},A.isNaN=function(e){return A.isNumber(e)&&e!=+e},A.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==c.call(e)},A.isNull=function(e){return null===e},A.isUndefined=function(e){return void 0===e},A.has=function(e,t){return l.call(e,t)},A.noConflict=function(){return e._=t,this},A.identity=function(e){return e},A.times=function(e,t,n){for(var r=Array(Math.max(0,e)),i=0;e>i;i++)r[i]=t.call(n,i);return r},A.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var N={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};N.unescape=A.invert(N.escape);var M={escape:new RegExp("["+A.keys(N.escape).join("")+"]","g"),unescape:new RegExp("("+A.keys(N.unescape).join("|")+")","g")};
A.each(["escape","unescape"],function(e){A[e]=function(t){return null==t?"":(""+t).replace(M[e],function(t){return N[e][t]})}}),A.result=function(e,t){if(null==e)return void 0;var n=e[t];return A.isFunction(n)?n.call(e):n},A.mixin=function(e){R(A.functions(e),function(t){var n=A[t]=e[t];A.prototype[t]=function(){var e=[this._wrapped];return a.apply(e,arguments),x.call(this,n.apply(A,e))}})};var _=0;A.uniqueId=function(e){var t=++_+"";return e?e+t:t},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},z=/\\|'|\r|\n|\t|\u2028|\u2029/g;A.template=function(e,t,n){var r;n=A.defaults({},n,A.templateSettings);var i=new RegExp([(n.escape||F).source,(n.interpolate||F).source,(n.evaluate||F).source].join("|")+"|$","g"),o=0,a="__p+='";e.replace(i,function(t,n,r,i,s){return a+=e.slice(o,s).replace(z,function(e){return"\\"+L[e]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(a+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(a+="';\n"+i+"\n__p+='"),o=s+t.length,t}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(n.variable||"obj","_",a)}catch(s){throw s.source=a,s}if(t)return r(t,A);var u=function(e){return r.call(this,e,A)};return u.source="function("+(n.variable||"obj")+"){\n"+a+"}",u},A.chain=function(e){return A(e).chain()};var x=function(e){return this._chain?A(e).chain():e};A.mixin(A),R(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];A.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],x.call(this,n)}}),R(["concat","join","slice"],function(e){var t=r[e];A.prototype[e]=function(){return x.call(this,t.apply(this._wrapped,arguments))}}),A.extend(A.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(e){return function(){var t;return t||e._}}(this)),function(){var e,t=this,n=t.Backbone,r=[],i=r.push,o=r.slice,a=r.splice;e="undefined"!=typeof exports?exports:t.Backbone={},e.VERSION="1.0.0";var s=t._;s||"undefined"==typeof require||(s=require("underscore")),e.$=t.jQuery||t.Zepto||t.ender||t.$,e.noConflict=function(){return t.Backbone=n,this},e.emulateHTTP=!1,e.emulateJSON=!1;var u=e.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=s.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,o,a,u,c,d,p;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(a=e?[e]:s.keys(this._events),u=0,c=a.length;c>u;u++)if(e=a[u],o=this._events[e]){if(this._events[e]=r=[],t||n)for(d=0,p=o.length;p>d;d++)i=o[d],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=o.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&d(n,t),r&&d(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;"object"==typeof t&&(n=this),e&&((r={})[e._listenerId]=e);for(var o in r)r[o].off(t,n,this),i&&delete this._listeners[o];return this}},c=/\s+/,l=function(e,t,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(c.test(n)){for(var o=n.split(c),a=0,s=o.length;s>a;a++)e[t].apply(e,[o[a]].concat(r));return!1}return!0},d=function(e,t){var n,r=-1,i=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a,s);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t)}},p={listenTo:"on",listenToOnce:"once"};s.each(p,function(e,t){u[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),o=t._listenerId||(t._listenerId=s.uniqueId("l"));return i[o]=t,"object"==typeof n&&(r=this),t[e](n,r,this),this}}),u.bind=u.on,u.unbind=u.off,s.extend(e,u);var f=e.Model=function(e,t){var n,r=e||{};t||(t={}),this.cid=s.uniqueId("c"),this.attributes={},s.extend(this,s.pick(t,h)),t.parse&&(r=this.parse(r,t)||{}),(n=s.result(this,"defaults"))&&(r=s.defaults({},r,n)),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},h=["url","urlRoot","collection"];s.extend(f.prototype,u,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return s.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return s.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var r,i,o,a,u,c,l,d;if(null==e)return this;if("object"==typeof e?(i=e,n=t):(i={})[e]=t,n||(n={}),!this._validate(i,n))return!1;o=n.unset,u=n.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=s.clone(this.attributes),this.changed={}),d=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],s.isEqual(d[r],t)||a.push(r),s.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,o?delete d[r]:d[r]=t;if(!u){a.length&&(this._pending=!0);for(var p=0,f=a.length;f>p;p++)this.trigger("change:"+a[p],this,d[a[p]],n)}if(c)return this;if(!u)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,s.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,s.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!s.isEmpty(this.changed):s.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?s.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e)s.isEqual(r[i],t=e[i])||((n||(n={}))[i]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return s.clone(this._previousAttributes)},fetch:function(e){e=e?s.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){return t.set(t.parse(r,e),e)?(n&&n(t,r,e),void t.trigger("sync",t,r,e)):!1},z(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,o,a=this.attributes;if(null==e||"object"==typeof e?(r=e,n=t):(r={})[e]=t,!(!r||n&&n.wait||this.set(r,n)))return!1;if(n=s.extend({validate:!0},n),!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=s.extend({},a,r)),void 0===n.parse&&(n.parse=!0);var u=this,c=n.success;return n.success=function(e){u.attributes=a;var t=u.parse(e,n);return n.wait&&(t=s.extend(r||{},t)),s.isObject(t)&&!u.set(t,n)?!1:(c&&c(u,e,n),void u.trigger("sync",u,e,n))},z(this,n),i=this.isNew()?"create":n.patch?"patch":"update","patch"===i&&(n.attrs=r),o=this.sync(i,this,n),r&&n.wait&&(this.attributes=a),o},destroy:function(e){e=e?s.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)},this.isNew())return e.success(),!1;z(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=s.result(this,"urlRoot")||s.result(this.collection,"url")||L();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},s.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=s.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,s.extend(t||{},{validationError:n})),!1):!0}});var m=["keys","values","pairs","invert","pick","omit"];s.each(m,function(e){f.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.attributes),s[e].apply(s,t)}});var g=e.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,s.extend({silent:!0},t))},y={add:!0,remove:!0,merge:!0},v={add:!0,merge:!1,remove:!1};s.extend(g.prototype,u,{model:f,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return e.sync.apply(this,arguments)},add:function(e,t){return this.set(e,s.defaults(t||{},v))},remove:function(e,t){e=s.isArray(e)?e.slice():[e],t||(t={});var n,r,i,o;for(n=0,r=e.length;r>n;n++)o=this.get(e[n]),o&&(delete this._byId[o.id],delete this._byId[o.cid],i=this.indexOf(o),this.models.splice(i,1),this.length--,t.silent||(t.index=i,o.trigger("remove",o,this,t)),this._removeReference(o));return this},set:function(e,t){t=s.defaults(t||{},y),t.parse&&(e=this.parse(e,t)),s.isArray(e)||(e=e?[e]:[]);var n,r,o,u,c,l=t.at,d=this.comparator&&null==l&&t.sort!==!1,p=s.isString(this.comparator)?this.comparator:null,f=[],h=[],m={};for(n=0,r=e.length;r>n;n++)(o=this._prepareModel(e[n],t))&&((u=this.get(o))?(t.remove&&(m[u.cid]=!0),t.merge&&(u.set(o.attributes,t),d&&!c&&u.hasChanged(p)&&(c=!0))):t.add&&(f.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,null!=o.id&&(this._byId[o.id]=o)));if(t.remove){for(n=0,r=this.length;r>n;++n)m[(o=this.models[n]).cid]||h.push(o);h.length&&this.remove(h,t)}if(f.length&&(d&&(c=!0),this.length+=f.length,null!=l?a.apply(this.models,[l,0].concat(f)):i.apply(this.models,f)),c&&this.sort({silent:!0}),t.silent)return this;for(n=0,r=f.length;r>n;n++)(o=f[n]).trigger("add",o,this,t);return c&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;r>n;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,s.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,s.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,s.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return null==e?void 0:this._byId[null!=e.id?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return s.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),s.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(s.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=s.isFunction(t)?t:function(e){return e.get(t)};return s.sortedIndex(this.models,e,r,n)},pluck:function(e){return s.invoke(this.models,"get",e)},fetch:function(e){e=e?s.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},z(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?s.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof f)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var w=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];s.each(w,function(e){g.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),s[e].apply(s,t)}});var E=["groupBy","countBy","sortBy"];s.each(E,function(e){g.prototype[e]=function(t,n){var r=s.isFunction(t)?t:function(e){return e.get(t)};return s[e](this.models,r,n)}});var b=e.View=function(e){this.cid=s.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},T=/^(\S+)\s*(.*)$/,A=["model","collection","el","id","attributes","className","tagName","events"];s.extend(b.prototype,u,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=s.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];if(s.isFunction(n)||(n=this[e[t]]),n){var r=t.match(T),i=r[1],o=r[2];n=s.bind(n,this),i+=".delegateEvents"+this.cid,""===o?this.$el.on(i,n):this.$el.on(i,o,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=s.extend({},s.result(this,"options"),e)),s.extend(this,s.pick(e,A)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(s.result(this,"el"),!1);else{var t=s.extend({},s.result(this,"attributes"));this.id&&(t.id=s.result(this,"id")),this.className&&(t["class"]=s.result(this,"className"));var n=e.$("<"+s.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,r){var i=R[t];s.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var o={type:i,dataType:"json"};if(r.url||(o.url=s.result(n,"url")||L()),null!=r.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(r.attrs||n.toJSON(r))),r.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),r.emulateHTTP&&("PUT"===i||"DELETE"===i||"PATCH"===i)){o.type="POST",r.emulateJSON&&(o.data._method=i);var a=r.beforeSend;r.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",i),a?a.apply(this,arguments):void 0}}"GET"===o.type||r.emulateJSON||(o.processData=!1),"PATCH"!==o.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var u=r.xhr=e.ajax(s.extend(o,r));return n.trigger("request",n,u,r),u};var R={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var O=e.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},P=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,C=/\*\w+/g,S=/[\-{}\[\]+?.,\\\^$|#\s]/g;s.extend(O.prototype,u,{initialize:function(){},route:function(t,n,r){s.isRegExp(t)||(t=this._routeToRegExp(t)),s.isFunction(n)&&(r=n,n=""),r||(r=this[n]);var i=this;return e.history.route(t,function(o){var a=i._extractParameters(t,o);r&&r.apply(i,a),i.trigger.apply(i,["route:"+n].concat(a)),i.trigger("route",n,a),e.history.trigger("route",i,n,a)}),this},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=s.result(this,"routes");for(var e,t=s.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(S,"\\$&").replace(P,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(C,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return s.map(n,function(e){return e?decodeURIComponent(e):null})}});var I=e.History=function(){this.handlers=[],s.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},D=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,M=/msie [\w.]+/,_=/\/$/;I.started=!1,s.extend(I.prototype,u,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(_,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(D,"")},start:function(t){if(I.started)throw new Error("Backbone.history has already been started");I.started=!0,this.options=s.extend({},{root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),r=document.documentMode,i=M.exec(navigator.userAgent.toLowerCase())&&(!r||7>=r);this.root=("/"+this.root+"/").replace(N,"/"),i&&this._wantsHashChange&&(this.iframe=e.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!i?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var o=this.location,a=o.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!a?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&a&&o.hash&&(this.fragment=this.getHash().replace(D,""),this.history.replaceState({},document.title,this.root+this.fragment+o.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),I.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=s.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0});return n},navigate:function(e,t){if(!I.started)return!1;if(t&&t!==!0||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),e.history=new I;var F=function(e,t){var n,r=this;n=e&&s.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},s.extend(n,r,t);var i=function(){this.constructor=n};return i.prototype=r.prototype,n.prototype=new i,e&&s.extend(n.prototype,e),n.__super__=r.prototype,n};f.extend=g.extend=O.extend=b.extend=I.extend=F;var L=function(){throw new Error('A "url" property or function must be specified')},z=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(this),define("backbone",["underscore","jquery"],function(e){return function(){var t;return t||e.Backbone}}(this)),function(e,t){var n=e.Backbone;return"function"==typeof define&&define.amd?define("backbone.layout",["backbone","underscore","jquery"],function(){return t.apply(e,arguments)}):void(n.Layout=t.call(e,n,e._,n.$))}("object"==typeof global?global:this,function(e,t,n){var r=this,i=e.View,o=Array.prototype.push,a=Array.prototype.concat,s=Array.prototype.splice,u=String.prototype.trim?t.bind(String.prototype.trim.call,String.prototype.trim):n.trim,c=e.View.extend({_render:function(){var e=this,t=e.__manager__,n=e.beforeRender,r=e.deferred();return e.hasRendered&&e._removeViews(),t.callback=function(){delete t.isAsync,delete t.callback,e.trigger("beforeRender",e),e._viewRender(t).render().then(function(){r.resolve()})},n&&n.call(e,e),t.isAsync||t.callback(),r.promise()},_applyTemplate:function(e,r,i){t.isString(e)&&(r.noel?(e=n.parseHTML(e,!0),this.$el.slice(1).remove(),this.$el.replaceWith(e),this.setElement(e,!1)):this.html(this.$el,e)),i.resolveWith(this,[this])},_viewRender:function(e){function n(t,n){var i;e.callback=function(t){delete e.isAsync,delete e.callback,a._applyTemplate(t,e,o)},c.cache(r,n),n&&(i=a.renderTemplate.call(a,n,t)),e.isAsync||a._applyTemplate(i,e,o)}var r,i,o,a=this;return{render:function(){var s=a.serialize,u=a.template;return o=a.deferred(),t.isFunction(s)&&(s=s.call(a)),e.callback=function(t){delete e.isAsync,delete e.callback,n(s,t)},"string"==typeof u&&(r=a.prefix+u),(i=c.cache(r))?(n(s,i,r),o):("string"==typeof u?i=a.fetchTemplate.call(a,a.prefix+u):"function"==typeof u?i=u:null!=u&&(i=a.fetchTemplate.call(a,u)),e.isAsync||n(s,i),o)}}},constructor:function(n){this.manage=!0,t.extend(this,n),e.View.apply(this,arguments)},async:function(){var e=this.__manager__;return e.isAsync=!0,e.callback},promise:function(){return this.__manager__.renderDeferred.promise()},renderViews:function(){var e=this,t=e.__manager__,n=e.deferred(),r=e.getViews().map(function(e){return e.render().__manager__.renderDeferred}).value();return t.renderDeferred=n.promise(),e.when(r).then(function(){n.resolveWith(e,[e])}),e},insertView:function(t,n,r){return n instanceof e.View?this.setView(t,n,!0,r):this.setView(t,!0,n)},insertViews:function(e){return t.isArray(e)?this.setViews({"":e}):(t.each(e,function(n,r){e[r]=t.isArray(n)?n:[n]}),this.setViews(e))},getView:function(e){return null==e&&(e=arguments[1]),this.getViews(e).first().value()},getViews:function(e){var n;return"string"==typeof e?(e=this.sections[e]||e,n=this.views[e]||[],t.chain([].concat(n))):(n=t.chain(this.views).map(function(e){return t.isArray(e)?e:[e]},this).flatten(),"object"==typeof e?n.where(e):"function"==typeof e?n.filter(e):n)},removeView:function(e){return this.getViews(e).each(function(e){e.remove()})},setView:function(e,n,r,i){var o,s,u,c=this;if("string"!=typeof e&&(i=r,r=n,n=e,e=""),o=n.__manager__,!o)throw new Error("The argument associated with selector '"+e+"' is defined and a View.  Set `manage` property to true for Backbone.View instances.");return o.parent=c,s=o.selector=c.sections[e]||e,u=c.views[s],r?(c.views[s]=a.call([],c.views[e]||[],n),i&&t.isNumber(i.insertAt)&&u?(u.splice(i.insertAt,0,n),c.views[s]=u,o.insertAt=i.insertAt):c.views[s]=a.call([],u||[],n),c.__manager__.insert=!0,n):(n.hasRendered&&n.partial(c.$el,n.$el,c.__manager__,o),c.removeView(e),c.views[s]=n)},setViews:function(e){return t.each(e,function(e,n){return t.isArray(e)?t.each(e,function(e){this.insertView(n,e)},this):void this.setView(n,e)},this),this},render:function(){function e(){function e(){var e=r.console,n=i.afterRender;n&&n.call(i,i),i.trigger("afterRender",i),a.noel&&i.$el.length>1&&t.isFunction(e.warn)&&!i.suppressWarnings&&(e.warn("`el: false` with multiple top level elements is not supported."),t.isFunction(e.trace)&&e.trace())}var n;return t.each(i.views,function(e,n){t.isArray(e)&&i.htmlBatch(i,e,n)}),s&&!a.insertedViaFragment&&(i.contains(s.el,i.el)||s.partial(s.$el,i.$el,u,a)),i.delegateEvents(),i.hasRendered=!0,(n=a.queue.shift())?n():delete a.queue,u&&u.queue?s.once("afterRender",e):e(),c.resolveWith(i,[i])}function n(){i._render().done(function(){if(!t.keys(i.views).length)return e();var n=t.map(i.views,function(e){var n=t.isArray(e);return n&&e.length?i.when(t.map(e,function(e){return e.__manager__.insertedViaFragment=!0,e.render().__manager__.renderDeferred})):n?e:e.render().__manager__.renderDeferred});i.when(n).done(e)})}var i=this,a=i.__manager__,s=a.parent,u=s&&s.__manager__,c=i.deferred();return a.queue?o.call(a.queue,n):(a.queue=[],n(i,c)),i.__manager__.renderDeferred=c,i},remove:function(){return c._removeView(this,!0),this._remove.apply(this,arguments)}},{_cache:{},_removeViews:function(e,t){"boolean"==typeof e&&(t=e,e=this),e=e||this,e.getViews().each(function(e){(e.hasRendered||t)&&c._removeView(e,t)})},_removeView:function(e,n){var r,i=e.__manager__,o=i.parent&&i.parent.__manager__,a="boolean"==typeof e.keep?e.keep:e.options.keep;if(!a&&o&&o.insert===!0||n){if(c.cleanViews(e),e._removeViews(!0),e.$el.remove(),!i.parent)return;if(r=i.parent.views[i.selector],t.isArray(r))return t.each(t.clone(r),function(e,t){e&&e.__manager__===i&&s.call(r,t,1)});delete i.parent.views[i.selector]}},cache:function(e,t){return e in this._cache&&null==t?this._cache[e]:null!=e&&null!=t?this._cache[e]=t:void 0},cleanViews:function(n){t.each(a.call([],n),function(n){n.unbind(),n.model instanceof e.Model&&n.model.off(null,null,n),n.collection instanceof e.Collection&&n.collection.off(null,null,n),n.stopListening(),t.isFunction(n.cleanup)&&n.cleanup()})},configure:function(n){t.extend(c.prototype,n),n.manage&&(e.View.prototype.manage=!0),n.el===!1&&(e.View.prototype.el=!1),n.suppressWarnings===!0&&(e.View.prototype.suppressWarnings=!0)},setupView:function(n,r){r=r||{},t.each(a.call([],n),function(n){if(!n.__manager__){var i,o,a=c.prototype;t.defaults(n,{views:{},sections:{},__manager__:{},_removeViews:c._removeViews,_removeView:c._removeView},c.prototype),n.options=r,t.extend(n,r),n._remove=e.View.prototype.remove,n.render=c.prototype.render,n.remove!==a.remove&&(n._remove=n.remove,n.remove=a.remove),i=r.views||n.views,t.keys(i).length&&(o=i,n.views={},t.each(o,function(e,t){"function"==typeof e&&(o[t]=e.call(n,n))}),n.setViews(o))}})}});c.VERSION="0.9.4",e.Layout=c,e.View=function(e){var t;e=e||{},("el"in e?e.el===!1:this.el===!1)&&(t=!0),(e.manage||this.manage)&&c.setupView(this,e),this.__manager__&&(this.__manager__.noel=t,this.__manager__.suppressWarnings=e.suppressWarnings),i.apply(this,arguments)},e.View.extend=i.extend,e.View.prototype=i.prototype;var l={prefix:"",deferred:function(){return n.Deferred()},fetchTemplate:function(e){return t.template(n(e).html())},renderTemplate:function(e,t){return u(e(t))},serialize:function(){return this.model?t.clone(this.model.attributes):{}},partial:function(e,t,n,r){var i;r.selector&&(n.noel?(i=e.filter(r.selector),e=i.length?i:e.find(r.selector)):e=e.find(r.selector)),n.insert?this.insert(e,t,r.insertAt):this.html(e,t)},html:function(e,t){e.html(t)},htmlBatch:function(e,r,i){var o=e.__manager__,a={selector:i},s=t.reduce(r,function(t,r){var i="boolean"==typeof r.keep?r.keep:r.options.keep,o=i&&n.contains(e.el,r.el);return r.el&&!o&&t.push(r.el),t},[]);return this.partial(e.$el,n(s),o,a)},insert:function(e,n,r){t.isNumber(r)?this.insertAtIndex(e,n,r):e.append(n)},insertAtIndex:function(e,t,n){var r;r=e.children().eq(0>n?Math.max(0,e.children().length+n):n),r.length?r.before(t):this.insert(e,t)},when:function(e){return n.when.apply(null,e)},contains:function(e,t){return n.contains(e,t)}};return t.extend(c.prototype,l),c}),function(e){function t(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw new Error("Implement me")}}function n(e,t){return Ot.call(e,t)}function r(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function i(e){wt.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn}function o(e,t){var n=!0;return p(function(){return n&&(i(e),n=!1),t.apply(this,arguments)},t)}function a(e,t){yn[e]||(i(t),yn[e]=!0)}function s(e,t){return function(n){return m(e.call(this,n),t)}}function u(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function c(){}function l(e,t){t!==!1&&D(e),f(this,e),this._d=new Date(+e._d)}function d(e){var t=R(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||0,a=t.day||0,s=t.hour||0,u=t.minute||0,c=t.second||0,l=t.millisecond||0;this._milliseconds=+l+1e3*c+6e4*u+36e5*s,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=wt.localeData(),this._bubble()}function p(e,t){for(var r in t)n(t,r)&&(e[r]=t[r]);return n(t,"toString")&&(e.toString=t.toString),n(t,"valueOf")&&(e.valueOf=t.valueOf),e}function f(e,t){var n,r,i;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),_t.length>0)for(n in _t)r=_t[n],i=t[r],"undefined"!=typeof i&&(e[r]=i);return e}function h(e){return 0>e?Math.ceil(e):Math.floor(e)}function m(e,t,n){for(var r=""+Math.abs(e),i=e>=0;r.length<t;)r="0"+r;return(i?n?"+":"":"-")+r}function g(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function y(e,t){var n;return t=L(t,e),e.isBefore(t)?n=g(e,t):(n=g(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function v(e,t){return function(n,r){var i,o;return null===r||isNaN(+r)||(a(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),o=n,n=r,r=o),n="string"==typeof n?+n:n,i=wt.duration(n,r),w(this,i,e),this}}function w(e,t,n,r){var i=t._milliseconds,o=t._days,a=t._months;r=null==r?!0:r,i&&e._d.setTime(+e._d+i*n),o&&ft(e,"Date",pt(e,"Date")+o*n),a&&dt(e,pt(e,"Month")+a*n),r&&wt.updateOffset(e,o||a)}function E(e){return"[object Array]"===Object.prototype.toString.call(e)}function b(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function T(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(r=0;i>r;r++)(n&&e[r]!==t[r]||!n&&P(e[r])!==P(t[r]))&&a++;return a+o}function A(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=ln[e]||dn[t]||t}return e}function R(e){var t,r,i={};for(r in e)n(e,r)&&(t=A(r),t&&(i[t]=e[r]));return i}function O(t){var n,r;if(0===t.indexOf("week"))n=7,r="day";else{if(0!==t.indexOf("month"))return;n=12,r="month"}wt[t]=function(i,o){var a,s,u=wt._locale[t],c=[];if("number"==typeof i&&(o=i,i=e),s=function(e){var t=wt().utc().set(r,e);return u.call(wt._locale,t,i||"")
},null!=o)return s(o);for(a=0;n>a;a++)c.push(s(a));return c}}function P(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function k(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function C(e,t,n){return st(wt([e,11,31+t-n]),t,n).week}function S(e){return I(e)?366:365}function I(e){return e%4===0&&e%100!==0||e%400===0}function D(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[kt]<0||e._a[kt]>11?kt:e._a[Ct]<1||e._a[Ct]>k(e._a[Pt],e._a[kt])?Ct:e._a[St]<0||e._a[St]>23?St:e._a[It]<0||e._a[It]>59?It:e._a[Dt]<0||e._a[Dt]>59?Dt:e._a[Nt]<0||e._a[Nt]>999?Nt:-1,e._pf._overflowDayOfYear&&(Pt>t||t>Ct)&&(t=Ct),e._pf.overflow=t)}function N(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function M(e){return e?e.toLowerCase().replace("_","-"):e}function _(e){for(var t,n,r,i,o=0;o<e.length;){for(i=M(e[o]).split("-"),t=i.length,n=M(e[o+1]),n=n?n.split("-"):null;t>0;){if(r=F(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&T(i,n,!0)>=t-1)break;t--}o++}return null}function F(e){var t=null;if(!Mt[e]&&Ft)try{t=wt.locale(),require("./locale/"+e),wt.locale(t)}catch(n){}return Mt[e]}function L(e,t){return t._isUTC?wt(e).zone(t._offset||0):wt(e).local()}function z(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function x(e){var t,n,r=e.match(Ut);for(t=0,n=r.length;n>t;t++)r[t]=gn[r[t]]?gn[r[t]]:z(r[t]);return function(i){var o="";for(t=0;n>t;t++)o+=r[t]instanceof Function?r[t].call(i,e):r[t];return o}}function U(e,t){return e.isValid()?(t=j(t,e.localeData()),pn[t]||(pn[t]=x(t)),pn[t](e)):e.localeData().invalidDate()}function j(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(jt.lastIndex=0;r>=0&&jt.test(e);)e=e.replace(jt,n),jt.lastIndex=0,r-=1;return e}function G(e,t){var n,r=t._strict;switch(e){case"Q":return Kt;case"DDDD":return Jt;case"YYYY":case"GGGG":case"gggg":return r?en:Wt;case"Y":case"G":case"g":return nn;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return r?tn:Yt;case"S":if(r)return Kt;case"SS":if(r)return Zt;case"SSS":if(r)return Jt;case"DDD":return Bt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return qt;case"a":case"A":return t._locale._meridiemParse;case"X":return Xt;case"Z":case"ZZ":return $t;case"T":return Ht;case"SSSS":return Vt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return r?Zt:Gt;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Gt;case"Do":return Qt;default:return n=new RegExp(Q(X(e.replace("\\","")),"i"))}}function B(e){e=e||"";var t=e.match($t)||[],n=t[t.length-1]||[],r=(n+"").match(un)||["-",0,0],i=+(60*r[1])+P(r[2]);return"+"===r[0]?-i:i}function W(e,t,n){var r,i=n._a;switch(e){case"Q":null!=t&&(i[kt]=3*(P(t)-1));break;case"M":case"MM":null!=t&&(i[kt]=P(t)-1);break;case"MMM":case"MMMM":r=n._locale.monthsParse(t),null!=r?i[kt]=r:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(i[Ct]=P(t));break;case"Do":null!=t&&(i[Ct]=P(parseInt(t,10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=P(t));break;case"YY":i[Pt]=wt.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":i[Pt]=P(t);break;case"a":case"A":n._isPm=n._locale.isPM(t);break;case"H":case"HH":case"h":case"hh":i[St]=P(t);break;case"m":case"mm":i[It]=P(t);break;case"s":case"ss":i[Dt]=P(t);break;case"S":case"SS":case"SSS":case"SSSS":i[Nt]=P(1e3*("0."+t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=B(t);break;case"dd":case"ddd":case"dddd":r=n._locale.weekdaysParse(t),null!=r?(n._w=n._w||{},n._w.d=r):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=P(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=wt.parseTwoDigitYear(t)}}function Y(e){var n,r,i,o,a,s,u;n=e._w,null!=n.GG||null!=n.W||null!=n.E?(a=1,s=4,r=t(n.GG,e._a[Pt],st(wt(),1,4).year),i=t(n.W,1),o=t(n.E,1)):(a=e._locale._week.dow,s=e._locale._week.doy,r=t(n.gg,e._a[Pt],st(wt(),a,s).year),i=t(n.w,1),null!=n.d?(o=n.d,a>o&&++i):o=null!=n.e?n.e+a:a),u=ut(r,i,o,s,a),e._a[Pt]=u.year,e._dayOfYear=u.dayOfYear}function V(e){var n,r,i,o,a=[];if(!e._d){for(i=$(e),e._w&&null==e._a[Ct]&&null==e._a[kt]&&Y(e),e._dayOfYear&&(o=t(e._a[Pt],i[Pt]),e._dayOfYear>S(o)&&(e._pf._overflowDayOfYear=!0),r=rt(o,0,e._dayOfYear),e._a[kt]=r.getUTCMonth(),e._a[Ct]=r.getUTCDate()),n=0;3>n&&null==e._a[n];++n)e._a[n]=a[n]=i[n];for(;7>n;n++)e._a[n]=a[n]=null==e._a[n]?2===n?1:0:e._a[n];e._d=(e._useUTC?rt:nt).apply(null,a),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm)}}function q(e){var t;e._d||(t=R(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],V(e))}function $(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function H(e){if(e._f===wt.ISO_8601)return void Z(e);e._a=[],e._pf.empty=!0;var t,n,r,i,o,a=""+e._i,s=a.length,u=0;for(r=j(e._f,e._locale).match(Ut)||[],t=0;t<r.length;t++)i=r[t],n=(a.match(G(i,e))||[])[0],n&&(o=a.substr(0,a.indexOf(n)),o.length>0&&e._pf.unusedInput.push(o),a=a.slice(a.indexOf(n)+n.length),u+=n.length),gn[i]?(n?e._pf.empty=!1:e._pf.unusedTokens.push(i),W(i,n,e)):e._strict&&!n&&e._pf.unusedTokens.push(i);e._pf.charsLeftOver=s-u,a.length>0&&e._pf.unusedInput.push(a),e._isPm&&e._a[St]<12&&(e._a[St]+=12),e._isPm===!1&&12===e._a[St]&&(e._a[St]=0),V(e),D(e)}function X(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i})}function Q(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function K(e){var t,n,i,o,a;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(0/0));for(o=0;o<e._f.length;o++)a=0,t=f({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=r(),t._f=e._f[o],H(t),N(t)&&(a+=t._pf.charsLeftOver,a+=10*t._pf.unusedTokens.length,t._pf.score=a,(null==i||i>a)&&(i=a,n=t));p(e,n||t)}function Z(e){var t,n,r=e._i,i=rn.exec(r);if(i){for(e._pf.iso=!0,t=0,n=an.length;n>t;t++)if(an[t][1].exec(r)){e._f=an[t][0]+(i[6]||" ");break}for(t=0,n=sn.length;n>t;t++)if(sn[t][1].exec(r)){e._f+=sn[t][0];break}r.match($t)&&(e._f+="Z"),H(e)}else e._isValid=!1}function J(e){Z(e),e._isValid===!1&&(delete e._isValid,wt.createFromInputFallback(e))}function et(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function tt(t){var n,r=t._i;r===e?t._d=new Date:b(r)?t._d=new Date(+r):null!==(n=Lt.exec(r))?t._d=new Date(+n[1]):"string"==typeof r?J(t):E(r)?(t._a=et(r.slice(0),function(e){return parseInt(e,10)}),V(t)):"object"==typeof r?q(t):"number"==typeof r?t._d=new Date(r):wt.createFromInputFallback(t)}function nt(e,t,n,r,i,o,a){var s=new Date(e,t,n,r,i,o,a);return 1970>e&&s.setFullYear(e),s}function rt(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function it(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function ot(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function at(e,t,n){var r=wt.duration(e).abs(),i=Rt(r.as("s")),o=Rt(r.as("m")),a=Rt(r.as("h")),s=Rt(r.as("d")),u=Rt(r.as("M")),c=Rt(r.as("y")),l=i<fn.s&&["s",i]||1===o&&["m"]||o<fn.m&&["mm",o]||1===a&&["h"]||a<fn.h&&["hh",a]||1===s&&["d"]||s<fn.d&&["dd",s]||1===u&&["M"]||u<fn.M&&["MM",u]||1===c&&["y"]||["yy",c];return l[2]=t,l[3]=+e>0,l[4]=n,ot.apply({},l)}function st(e,t,n){var r,i=n-t,o=n-e.day();return o>i&&(o-=7),i-7>o&&(o+=7),r=wt(e).add(o,"d"),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function ut(e,t,n,r,i){var o,a,s=rt(e,0,1).getUTCDay();return s=0===s?7:s,n=null!=n?n:i,o=i-s+(s>r?7:0)-(i>s?7:0),a=7*(t-1)+(n-i)+o+1,{year:a>0?e:e-1,dayOfYear:a>0?a:S(e-1)+a}}function ct(t){var n=t._i,r=t._f;return t._locale=t._locale||wt.localeData(t._l),null===n||r===e&&""===n?wt.invalid({nullInput:!0}):("string"==typeof n&&(t._i=n=t._locale.preparse(n)),wt.isMoment(n)?new l(n,!0):(r?E(r)?K(t):H(t):tt(t),new l(t)))}function lt(e,t){var n,r;if(1===t.length&&E(t[0])&&(t=t[0]),!t.length)return wt();for(n=t[0],r=1;r<t.length;++r)t[r][e](n)&&(n=t[r]);return n}function dt(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),k(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function pt(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function ft(e,t,n){return"Month"===t?dt(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function ht(e,t){return function(n){return null!=n?(ft(this,e,n),wt.updateOffset(this,t),this):pt(this,e)}}function mt(e){return 400*e/146097}function gt(e){return 146097*e/400}function yt(e){wt.duration.fn[e]=function(){return this._data[e]}}function vt(e){"undefined"==typeof ender&&(Et=At.moment,At.moment=e?o("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",wt):wt)}for(var wt,Et,bt,Tt="2.8.3",At="undefined"!=typeof global?global:this,Rt=Math.round,Ot=Object.prototype.hasOwnProperty,Pt=0,kt=1,Ct=2,St=3,It=4,Dt=5,Nt=6,Mt={},_t=[],Ft="undefined"!=typeof module&&module.exports,Lt=/^\/?Date\((\-?\d+)/i,zt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,xt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Ut=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,jt=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Gt=/\d\d?/,Bt=/\d{1,3}/,Wt=/\d{1,4}/,Yt=/[+\-]?\d{1,6}/,Vt=/\d+/,qt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,$t=/Z|[\+\-]\d\d:?\d\d/gi,Ht=/T/i,Xt=/[\+\-]?\d+(\.\d{1,3})?/,Qt=/\d{1,2}/,Kt=/\d/,Zt=/\d\d/,Jt=/\d{3}/,en=/\d{4}/,tn=/[+-]?\d{6}/,nn=/[+-]?\d+/,rn=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,on="YYYY-MM-DDTHH:mm:ssZ",an=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],sn=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],un=/([\+\-]|\d\d)/gi,cn=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),ln={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},dn={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},pn={},fn={s:45,m:45,h:22,d:26,M:11},hn="DDD w W M D d".split(" "),mn="M D H h m s w W".split(" "),gn={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return m(this.year()%100,2)},YYYY:function(){return m(this.year(),4)},YYYYY:function(){return m(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+m(Math.abs(e),6)},gg:function(){return m(this.weekYear()%100,2)},gggg:function(){return m(this.weekYear(),4)},ggggg:function(){return m(this.weekYear(),5)},GG:function(){return m(this.isoWeekYear()%100,2)},GGGG:function(){return m(this.isoWeekYear(),4)},GGGGG:function(){return m(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return P(this.milliseconds()/100)},SS:function(){return m(P(this.milliseconds()/10),2)},SSS:function(){return m(this.milliseconds(),3)},SSSS:function(){return m(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+m(P(e/60),2)+":"+m(P(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+m(P(e/60),2)+m(P(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},yn={},vn=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];hn.length;)bt=hn.pop(),gn[bt+"o"]=u(gn[bt],bt);for(;mn.length;)bt=mn.pop(),gn[bt+bt]=s(gn[bt],2);gn.DDDD=s(gn.DDD,3),p(c.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,n,r;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(n=wt.utc([2e3,t]),r="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[t]=new RegExp(r.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,r;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=wt([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return"function"==typeof n?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,r){var i=this._relativeTime[n];return"function"==typeof i?i(e,t,n,r):i.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return st(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),wt=function(t,n,i,o){var a;return"boolean"==typeof i&&(o=i,i=e),a={},a._isAMomentObject=!0,a._i=t,a._f=n,a._l=i,a._strict=o,a._isUTC=!1,a._pf=r(),ct(a)},wt.suppressDeprecationWarnings=!1,wt.createFromInputFallback=o("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i)}),wt.min=function(){var e=[].slice.call(arguments,0);return lt("isBefore",e)},wt.max=function(){var e=[].slice.call(arguments,0);return lt("isAfter",e)},wt.utc=function(t,n,i,o){var a;return"boolean"==typeof i&&(o=i,i=e),a={},a._isAMomentObject=!0,a._useUTC=!0,a._isUTC=!0,a._l=i,a._i=t,a._f=n,a._strict=o,a._pf=r(),ct(a).utc()},wt.unix=function(e){return wt(1e3*e)},wt.duration=function(e,t){var r,i,o,a,s=e,u=null;return wt.isDuration(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(s={},t?s[t]=e:s.milliseconds=e):(u=zt.exec(e))?(r="-"===u[1]?-1:1,s={y:0,d:P(u[Ct])*r,h:P(u[St])*r,m:P(u[It])*r,s:P(u[Dt])*r,ms:P(u[Nt])*r}):(u=xt.exec(e))?(r="-"===u[1]?-1:1,o=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*r},s={y:o(u[2]),M:o(u[3]),d:o(u[4]),h:o(u[5]),m:o(u[6]),s:o(u[7]),w:o(u[8])}):"object"==typeof s&&("from"in s||"to"in s)&&(a=y(wt(s.from),wt(s.to)),s={},s.ms=a.milliseconds,s.M=a.months),i=new d(s),wt.isDuration(e)&&n(e,"_locale")&&(i._locale=e._locale),i},wt.version=Tt,wt.defaultFormat=on,wt.ISO_8601=function(){},wt.momentProperties=_t,wt.updateOffset=function(){},wt.relativeTimeThreshold=function(t,n){return fn[t]===e?!1:n===e?fn[t]:(fn[t]=n,!0)},wt.lang=o("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return wt.locale(e,t)}),wt.locale=function(e,t){var n;return e&&(n="undefined"!=typeof t?wt.defineLocale(e,t):wt.localeData(e),n&&(wt.duration._locale=wt._locale=n)),wt._locale._abbr},wt.defineLocale=function(e,t){return null!==t?(t.abbr=e,Mt[e]||(Mt[e]=new c),Mt[e].set(t),wt.locale(e),Mt[e]):(delete Mt[e],null)},wt.langData=o("moment.langData is deprecated. Use moment.localeData instead.",function(e){return wt.localeData(e)}),wt.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return wt._locale;if(!E(e)){if(t=F(e))return t;e=[e]}return _(e)},wt.isMoment=function(e){return e instanceof l||null!=e&&n(e,"_isAMomentObject")},wt.isDuration=function(e){return e instanceof d};for(bt=vn.length-1;bt>=0;--bt)O(vn[bt]);wt.normalizeUnits=function(e){return A(e)},wt.invalid=function(e){var t=wt.utc(0/0);return null!=e?p(t._pf,e):t._pf.userInvalidated=!0,t},wt.parseZone=function(){return wt.apply(null,arguments).parseZone()},wt.parseTwoDigitYear=function(e){return P(e)+(P(e)>68?1900:2e3)},p(wt.fn=l.prototype,{clone:function(){return wt(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=wt(this).utc();return 0<e.year()&&e.year()<=9999?U(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):U(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return N(this)},isDSTShifted:function(){return this._a?this.isValid()&&T(this._a,(this._isUTC?wt.utc(this._a):wt(this._a)).toArray())>0:!1},parsingFlags:function(){return p({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._dateTzOffset(),"m")),this},format:function(e){var t=U(this,e||wt.defaultFormat);return this.localeData().postformat(t)},add:v(1,"add"),subtract:v(-1,"subtract"),diff:function(e,t,n){var r,i,o,a=L(e,this),s=6e4*(this.zone()-a.zone());return t=A(t),"year"===t||"month"===t?(r=432e5*(this.daysInMonth()+a.daysInMonth()),i=12*(this.year()-a.year())+(this.month()-a.month()),o=this-wt(this).startOf("month")-(a-wt(a).startOf("month")),o-=6e4*(this.zone()-wt(this).startOf("month").zone()-(a.zone()-wt(a).startOf("month").zone())),i+=o/r,"year"===t&&(i/=12)):(r=this-a,i="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-s)/864e5:"week"===t?(r-s)/6048e5:r),n?i:h(i)},from:function(e,t){return wt.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(wt(),e)},calendar:function(e){var t=e||wt(),n=L(t,this).startOf("day"),r=this.diff(n,"days",!0),i=-6>r?"sameElse":-1>r?"lastWeek":0>r?"lastDay":1>r?"sameDay":2>r?"nextDay":7>r?"nextWeek":"sameElse";return this.format(this.localeData().calendar(i,this))},isLeapYear:function(){return I(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=it(e,this.localeData()),this.add(e-t,"d")):t},month:ht("Month",!0),startOf:function(e){switch(e=A(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return e=A(e),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},isAfter:function(e,t){return t=A("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=wt.isMoment(e)?e:wt(e),+this>+e):+this.clone().startOf(t)>+wt(e).startOf(t)},isBefore:function(e,t){return t=A("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=wt.isMoment(e)?e:wt(e),+e>+this):+this.clone().startOf(t)<+wt(e).startOf(t)},isSame:function(e,t){return t=A(t||"millisecond"),"millisecond"===t?(e=wt.isMoment(e)?e:wt(e),+this===+e):+this.clone().startOf(t)===+L(e,this).startOf(t)},min:o("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=wt.apply(null,arguments),this>e?this:e}),max:o("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=wt.apply(null,arguments),e>this?this:e}),zone:function(e,t){var n,r=this._offset||0;return null==e?this._isUTC?r:this._dateTzOffset():("string"==typeof e&&(e=B(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(n=this._dateTzOffset()),this._offset=e,this._isUTC=!0,null!=n&&this.subtract(n,"m"),r!==e&&(!t||this._changeInProgress?w(this,wt.duration(r-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,wt.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?wt(e).zone():0,(this.zone()-e)%60===0},daysInMonth:function(){return k(this.year(),this.month())},dayOfYear:function(e){var t=Rt((wt(this).startOf("day")-wt(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=st(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=st(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=st(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return C(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return C(this.year(),e.dow,e.doy)},get:function(e){return e=A(e),this[e]()},set:function(e,t){return e=A(e),"function"==typeof this[e]&&this[e](t),this},locale:function(t){var n;return t===e?this._locale._abbr:(n=wt.localeData(t),null!=n&&(this._locale=n),this)},lang:o("moment().lang() is deprecated. Use moment().localeData() instead.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),wt.fn.millisecond=wt.fn.milliseconds=ht("Milliseconds",!1),wt.fn.second=wt.fn.seconds=ht("Seconds",!1),wt.fn.minute=wt.fn.minutes=ht("Minutes",!1),wt.fn.hour=wt.fn.hours=ht("Hours",!0),wt.fn.date=ht("Date",!0),wt.fn.dates=o("dates accessor is deprecated. Use date instead.",ht("Date",!0)),wt.fn.year=ht("FullYear",!0),wt.fn.years=o("years accessor is deprecated. Use year instead.",ht("FullYear",!0)),wt.fn.days=wt.fn.day,wt.fn.months=wt.fn.month,wt.fn.weeks=wt.fn.week,wt.fn.isoWeeks=wt.fn.isoWeek,wt.fn.quarters=wt.fn.quarter,wt.fn.toJSON=wt.fn.toISOString,p(wt.duration.fn=d.prototype,{_bubble:function(){var e,t,n,r=this._milliseconds,i=this._days,o=this._months,a=this._data,s=0;a.milliseconds=r%1e3,e=h(r/1e3),a.seconds=e%60,t=h(e/60),a.minutes=t%60,n=h(t/60),a.hours=n%24,i+=h(n/24),s=h(mt(i)),i-=h(gt(s)),o+=h(i/30),i%=30,s+=h(o/12),o%=12,a.days=i,a.months=o,a.years=s},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return h(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*P(this._months/12)},humanize:function(e){var t=at(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=wt.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=wt.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=A(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;if(e=A(e),"month"===e||"year"===e)return t=this._days+this._milliseconds/864e5,n=this._months+12*mt(t),"month"===e?n:n/12;switch(t=this._days+gt(this._months/12),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 24*t*60+this._milliseconds/6e4;case"second":return 24*t*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*t*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:wt.fn.lang,locale:wt.fn.locale,toIsoString:o("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),r=Math.abs(this.hours()),i=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||i||o?"T":"")+(r?r+"H":"")+(i?i+"M":"")+(o?o+"S":""):"P0D"},localeData:function(){return this._locale}}),wt.duration.fn.toString=wt.duration.fn.toISOString;for(bt in cn)n(cn,bt)&&yt(bt.toLowerCase());wt.duration.fn.asMilliseconds=function(){return this.as("ms")},wt.duration.fn.asSeconds=function(){return this.as("s")},wt.duration.fn.asMinutes=function(){return this.as("m")},wt.duration.fn.asHours=function(){return this.as("h")},wt.duration.fn.asDays=function(){return this.as("d")},wt.duration.fn.asWeeks=function(){return this.as("weeks")},wt.duration.fn.asMonths=function(){return this.as("M")},wt.duration.fn.asYears=function(){return this.as("y")},wt.locale("en",{ordinal:function(e){var t=e%10,n=1===P(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),Ft?module.exports=wt:"function"==typeof define&&define.amd?(define("moment",["require","exports","module"],function(e,t,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(At.moment=Et),wt}),vt(!0)):vt()}.call(this),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(e){function t(t){return this.each(function(){var r=e(this),i=r.data("bs.button"),o="object"==typeof t&&t;i||r.data("bs.button",i=new n(this,o)),"toggle"==t?i.toggle():t&&i.setState(t)})}var n=function(t,r){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,r),this.isLoading=!1};n.VERSION="3.3.2",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",o=r.data();t+="Text",null==o.resetText&&r.data("resetText",r[i]()),setTimeout(e.proxy(function(){r[i](null==o[t]?this.options[t]:o[t]),"loadingText"==t?(this.isLoading=!0,r.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));e&&this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var r=e(n.target);r.hasClass("btn")||(r=r.closest(".btn")),t.call(r,"toggle"),n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),+function(e){function t(t){t&&3===t.which||(e(i).remove(),e(o).each(function(){var r=e(this),i=n(r),o={relatedTarget:this};i.hasClass("open")&&(i.trigger(t=e.Event("hide.bs.dropdown",o)),t.isDefaultPrevented()||(r.attr("aria-expanded","false"),i.removeClass("open").trigger("hidden.bs.dropdown",o)))}))}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}function r(t){return this.each(function(){var n=e(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new a(this)),"string"==typeof t&&r[t].call(n)})}var i=".dropdown-backdrop",o='[data-toggle="dropdown"]',a=function(t){e(t).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.2",a.prototype.toggle=function(r){var i=e(this);if(!i.is(".disabled, :disabled")){var o=n(i),a=o.hasClass("open");if(t(),!a){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var s={relatedTarget:this};if(o.trigger(r=e.Event("show.bs.dropdown",s)),r.isDefaultPrevented())return;i.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger("shown.bs.dropdown",s)}return!1}},a.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var r=e(this);if(t.preventDefault(),t.stopPropagation(),!r.is(".disabled, :disabled")){var i=n(r),a=i.hasClass("open");
if(!a&&27!=t.which||a&&27==t.which)return 27==t.which&&i.find(o).trigger("focus"),r.trigger("click");var s=" li:not(.divider):visible a",u=i.find('[role="menu"]'+s+', [role="listbox"]'+s);if(u.length){var c=u.index(t.target);38==t.which&&c>0&&c--,40==t.which&&c<u.length-1&&c++,~c||(c=0),u.eq(c).trigger("focus")}}}};var s=e.fn.dropdown;e.fn.dropdown=r,e.fn.dropdown.Constructor=a,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",o,a.prototype.toggle).on("keydown.bs.dropdown.data-api",o,a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',a.prototype.keydown)}(jQuery),+function(e){function t(t,r){return this.each(function(){var i=e(this),o=i.data("bs.modal"),a=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);o||i.data("bs.modal",o=new n(this,a)),"string"==typeof t?o[t](r):a.show&&o.show(r)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.2",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var r=this,i=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var i=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.options.backdrop&&r.adjustBackdrop(),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in").attr("aria-hidden",!1),r.enforceFocus();var o=e.Event("shown.bs.modal",{relatedTarget:t});i?r.$element.find(".modal-dialog").one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(n.TRANSITION_DURATION):r.$element.trigger("focus").trigger(o)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=e.support.transition&&i;if(this.$backdrop=e('<div class="modal-backdrop '+i+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;o?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){r.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):a()}else t&&t()},n.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog()},n.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var r=e(this),i=r.attr("href"),o=e(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),a=o.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},o.data(),r.data());r.is("a")&&n.preventDefault(),o.one("show.bs.modal",function(e){e.isDefaultPrevented()||o.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),t.call(o,a,this)})}(jQuery),+function(e){function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),o="object"==typeof t&&t;(i||"destroy"!=t)&&(i||r.data("bs.tooltip",i=new n(this,o)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};n.VERSION="3.3.2",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,r){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(this.options.viewport.selector||this.options.viewport);for(var i=this.options.trigger.split(" "),o=i.length;o--;){var a=i[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",u="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n&&n.$tip&&n.$tip.is(":visible")?void(n.hoverState="in"):(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!r)return;var i=this,o=this.tip(),a=this.getUID(this.type);this.setContent(),o.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&o.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,u=/\s?auto?\s?/i,c=u.test(s);c&&(s=s.replace(u,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element);var l=this.getPosition(),d=o[0].offsetWidth,p=o[0].offsetHeight;if(c){var f=s,h=this.options.container?e(this.options.container):this.$element.parent(),m=this.getPosition(h);s="bottom"==s&&l.bottom+p>m.bottom?"top":"top"==s&&l.top-p<m.top?"bottom":"right"==s&&l.right+d>m.width?"left":"left"==s&&l.left-d<m.left?"right":s,o.removeClass(f).addClass(s)}var g=this.getCalculatedOffset(s,l,d,p);this.applyPlacement(g,s);var y=function(){var e=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==e&&i.leave(i)};e.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",y).emulateTransitionEnd(n.TRANSITION_DURATION):y()}},n.prototype.applyPlacement=function(t,n){var r=this.tip(),i=r[0].offsetWidth,o=r[0].offsetHeight,a=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),t.top=t.top+a,t.left=t.left+s,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var u=r[0].offsetWidth,c=r[0].offsetHeight;"top"==n&&c!=o&&(t.top=t.top+o-c);var l=this.getViewportAdjustedDelta(n,t,u,c);l.left?t.left+=l.left:t.top+=l.top;var d=/top|bottom/.test(n),p=d?2*l.left-i+u:2*l.top-o+c,f=d?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(p,r[0][f],d)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function r(){"in"!=i.hoverState&&o.detach(),i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),t&&t()}var i=this,o=this.tip(),a=e.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(o.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],r="BODY"==n.tagName,i=n.getBoundingClientRect();null==i.width&&(i=e.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var o=r?{top:0,left:0}:t.offset(),a={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},i,a,s,o)},n.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-o-a.scroll,u=t.top+o-a.scroll+r;s<a.top?i.top=a.top-s:u>a.top+a.height&&(i.top=a.top+a.height-u)}else{var c=t.left-o,l=t.left+o+n;c<a.left?i.left=a.left-c:l>a.width&&(i.left=a.left+a.width-l)}return i},n.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},n.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},n.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type)})};var r=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(jQuery),+function(e){function t(t){return this.each(function(){var r=e(this),i=r.data("bs.popover"),o="object"==typeof t&&t;(i||"destroy"!=t)&&(i||r.data("bs.popover",i=new n(this,o)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.2",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},n.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var r=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=r,this}}(jQuery),+function(e){function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new n(this)),"string"==typeof t&&i[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.3.2",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");if(r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=n.find(".active:last a"),o=e.Event("hide.bs.tab",{relatedTarget:t[0]}),a=e.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(o),t.trigger(a),!a.isDefaultPrevented()&&!o.isDefaultPrevented()){var s=e(r);this.activate(t.closest("li"),n),this.activate(s,s.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},n.prototype.activate=function(t,r,i){function o(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}var a=r.find("> .active"),s=i&&e.support.transition&&(a.length&&a.hasClass("fade")||!!r.find("> .fade").length);a.length&&s?a.one("bsTransitionEnd",o).emulateTransitionEnd(n.TRANSITION_DURATION):o(),a.removeClass("in")};var r=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=r,this};var i=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),+function(e){function t(t){var n,r=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(r)}function n(t){return this.each(function(){var n=e(this),i=n.data("bs.collapse"),o=e.extend({},r.DEFAULTS,n.data(),"object"==typeof t&&t);!i&&o.toggle&&"show"==t&&(o.toggle=!1),i||n.data("bs.collapse",i=new r(this,o)),"string"==typeof t&&i[t]()})}var r=function(t,n){this.$element=e(t),this.options=e.extend({},r.DEFAULTS,n),this.$trigger=e(this.options.trigger).filter('[href="#'+t.id+'"], [data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};r.VERSION="3.3.2",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},r.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(i&&i.length&&(t=i.data("bs.collapse"),t&&t.transitioning))){var o=e.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){i&&i.length&&(n.call(i,"hide"),t||i.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var u=e.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[a](this.$element[0][u])}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(i,this)).emulateTransitionEnd(r.TRANSITION_DURATION):i.call(this)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,r){var i=e(r);this.addAriaAndCollapsedClass(t(i),i)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=r,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(r){var i=e(this);i.attr("data-target")||r.preventDefault();var o=t(i),a=o.data("bs.collapse"),s=a?"toggle":e.extend({},i.data(),{trigger:this});n.call(o,s)})}(jQuery),+function(e){function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one("bsTransitionEnd",function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),define("bootstrap",function(){}),function(e){"undefined"==typeof e.fn.each2&&e.extend(e.fn,{each2:function(t){for(var n=e([0]),r=-1,i=this.length;++r<i&&(n.context=n[0]=this[r])&&t.call(n[0],r,n)!==!1;);return this}})}(jQuery),function(e,t){function n(t){var n=e(document.createTextNode(""));t.before(n),n.before(t),n.remove()}function r(e){function t(e){return j[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function i(e,t){for(var n=0,r=t.length;r>n;n+=1)if(a(e,t[n]))return n;return-1}function o(){var t=e(U);t.appendTo(document.body);var n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),n}function a(e,n){return e===n?!0:e===t||n===t?!1:null===e||null===n?!1:e.constructor===String?e+""==n+"":n.constructor===String?n+""==e+"":!1}function s(e,t,n){var r,i,o;if(null===e||e.length<1)return[];for(r=e.split(t),i=0,o=r.length;o>i;i+=1)r[i]=n(r[i]);return r}function u(e){return e.outerWidth(!1)-e.width()}function c(n){var r="keyup-change-value";n.on("keydown",function(){e.data(n,r)===t&&e.data(n,r,n.val())}),n.on("keyup",function(){var i=e.data(n,r);i!==t&&n.val()!==i&&(e.removeData(n,r),n.trigger("keyup-change"))})}function l(n){n.on("mousemove",function(n){var r=z;(r===t||r.x!==n.pageX||r.y!==n.pageY)&&e(n.target).trigger("mousemove-filtered",n)})}function d(e,n,r){r=r||t;var i;return function(){var t=arguments;window.clearTimeout(i),i=window.setTimeout(function(){n.apply(r,t)},e)}}function p(e,t){var n=d(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){i(e.target,t.get())>=0&&n(e)})}function f(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,n=e[0],r=e.val().length;e.focus();var i=n.offsetWidth>0||n.offsetHeight>0;i&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(r,r):n.createTextRange&&(t=n.createTextRange(),t.collapse(!1),t.select()))},0)}function h(t){t=e(t)[0];var n=0,r=0;if("selectionStart"in t)n=t.selectionStart,r=t.selectionEnd-n;else if("selection"in document){t.focus();var i=document.selection.createRange();r=document.selection.createRange().text.length,i.moveStart("character",-t.value.length),n=i.text.length-r}return{offset:n,length:r}}function m(e){e.preventDefault(),e.stopPropagation()}function g(e){e.preventDefault(),e.stopImmediatePropagation()}function y(t){if(!_){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);_=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),_.attr("class","select2-sizer"),e(document.body).append(_)}return _.text(t.val()),_.width()}function v(t,n,r){var i,o,a=[];i=e.trim(t.attr("class")),i&&(i=""+i,e(i.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&a.push(this)})),i=e.trim(n.attr("class")),i&&(i=""+i,e(i.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(o=r(this),o&&a.push(o))})),t.attr("class",a.join(" "))}function w(e,t,n,i){var o=r(e.toUpperCase()).indexOf(r(t.toUpperCase())),a=t.length;return 0>o?void n.push(i(e)):(n.push(i(e.substring(0,o))),n.push("<span class='select2-match'>"),n.push(i(e.substring(o,o+a))),n.push("</span>"),void n.push(i(e.substring(o+a,e.length))))}function E(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function b(n){var r,i=null,o=n.quietMillis||100,a=n.url,s=this;return function(u){window.clearTimeout(r),r=window.setTimeout(function(){var r=n.data,o=a,c=n.transport||e.fn.select2.ajaxDefaults.transport,l={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||t,dataType:n.dataType||"json"},d=e.extend({},e.fn.select2.ajaxDefaults.params,l);r=r?r.call(s,u.term,u.page,u.context):null,o="function"==typeof o?o.call(s,u.term,u.page,u.context):o,i&&"function"==typeof i.abort&&i.abort(),n.params&&(e.isFunction(n.params)?e.extend(d,n.params.call(s)):e.extend(d,n.params)),e.extend(d,{url:o,dataType:n.dataType,data:r,success:function(e){var t=n.results(e,u.page,u);u.callback(t)},error:function(e,t,n){var r={hasError:!0,jqXHR:e,textStatus:t,errorThrown:n};u.callback(r)}}),i=c.call(s,d)},o)}}function T(t){var n,r,i=t,o=function(e){return""+e.text};e.isArray(i)&&(r=i,i={results:r}),e.isFunction(i)===!1&&(r=i,i=function(){return r});var a=i();return a.text&&(o=a.text,e.isFunction(o)||(n=a.text,o=function(e){return e[n]})),function(t){var n,r=t.term,a={results:[]};return""===r?void t.callback(i()):(n=function(i,a){var s,u;if(i=i[0],i.children){s={};for(u in i)i.hasOwnProperty(u)&&(s[u]=i[u]);s.children=[],e(i.children).each2(function(e,t){n(t,s.children)}),(s.children.length||t.matcher(r,o(s),i))&&a.push(s)}else t.matcher(r,o(i),i)&&a.push(i)},e(i().results).each2(function(e,t){n(t,a.results)}),void t.callback(a))}}function A(n){var r=e.isFunction(n);return function(i){var o=i.term,a={results:[]},s=r?n(i):n;e.isArray(s)&&(e(s).each(function(){var e=this.text!==t,n=e?this.text:this;(""===o||i.matcher(o,n))&&a.results.push(e?this:{id:this,text:this})}),i.callback(a))}}function R(t,n){if(e.isFunction(t))return!0;if(!t)return!1;if("string"==typeof t)return!0;throw new Error(n+" must be a string, function, or falsy value")}function O(t,n){if(e.isFunction(t)){var r=Array.prototype.slice.call(arguments,2);return t.apply(n,r)}return t}function P(t){var n=0;return e.each(t,function(e,t){t.children?n+=P(t.children):n++}),n}function k(e,n,r,i){var o,s,u,c,l,d=e,p=!1;if(!i.createSearchChoice||!i.tokenSeparators||i.tokenSeparators.length<1)return t;for(;;){for(s=-1,u=0,c=i.tokenSeparators.length;c>u&&(l=i.tokenSeparators[u],s=e.indexOf(l),!(s>=0));u++);if(0>s)break;if(o=e.substring(0,s),e=e.substring(s+l.length),o.length>0&&(o=i.createSearchChoice.call(this,o,n),o!==t&&null!==o&&i.id(o)!==t&&null!==i.id(o))){for(p=!1,u=0,c=n.length;c>u;u++)if(a(i.id(o),i.id(n[u]))){p=!0;break}p||r(o)}}return d!==e?e:void 0}function C(){var t=this;e.each(arguments,function(e,n){t[n].remove(),t[n]=null})}function S(t,n){var r=function(){};return r.prototype=new t,r.prototype.constructor=r,r.prototype.parent=t.prototype,r.prototype=e.extend(r.prototype,n),r}if(window.Select2===t){var I,D,N,M,_,F,L,z={x:0,y:0},x={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case x.LEFT:case x.RIGHT:case x.UP:case x.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case x.SHIFT:case x.CTRL:case x.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},U="<div class='select2-measure-scrollbar'></div>",j={"‚í∂":"A",Ôº°:"A",√Ä:"A",√Å:"A",√Ç:"A",·∫¶:"A",·∫§:"A",·∫™:"A",·∫®:"A",√É:"A",ƒÄ:"A",ƒÇ:"A",·∫∞:"A",·∫Æ:"A",·∫¥:"A",·∫≤:"A",»¶:"A",«†:"A",√Ñ:"A",«û:"A",·∫¢:"A",√Ö:"A",«∫:"A",«ç:"A",»Ä:"A",»Ç:"A",·∫†:"A",·∫¨:"A",·∫∂:"A",·∏Ä:"A",ƒÑ:"A",»∫:"A",‚±Ø:"A",Íú≤:"AA",√Ü:"AE",«º:"AE",«¢:"AE",Íú¥:"AO",Íú∂:"AU",Íú∏:"AV",Íú∫:"AV",Íúº:"AY","‚í∑":"B",Ôº¢:"B",·∏Ç:"B",·∏Ñ:"B",·∏Ü:"B",…É:"B",∆Ç:"B",∆Å:"B","‚í∏":"C",Ôº£:"C",ƒÜ:"C",ƒà:"C",ƒä:"C",ƒå:"C",√á:"C",·∏à:"C",∆á:"C",»ª:"C",Íúæ:"C","‚íπ":"D",Ôº§:"D",·∏ä:"D",ƒé:"D",·∏å:"D",·∏ê:"D",·∏í:"D",·∏é:"D",ƒê:"D",∆ã:"D",∆ä:"D",∆â:"D",Íùπ:"D",«±:"DZ",«Ñ:"DZ",«≤:"Dz",«Ö:"Dz","‚í∫":"E",Ôº•:"E",√à:"E",√â:"E",√ä:"E",·ªÄ:"E",·∫æ:"E",·ªÑ:"E",·ªÇ:"E",·∫º:"E",ƒí:"E",·∏î:"E",·∏ñ:"E",ƒî:"E",ƒñ:"E",√ã:"E",·∫∫:"E",ƒö:"E",»Ñ:"E",»Ü:"E",·∫∏:"E",·ªÜ:"E",»®:"E",·∏ú:"E",ƒò:"E",·∏ò:"E",·∏ö:"E",∆ê:"E",∆é:"E","‚íª":"F",Ôº¶:"F",·∏û:"F",∆ë:"F",Íùª:"F","‚íº":"G",Ôºß:"G",«¥:"G",ƒú:"G",·∏†:"G",ƒû:"G",ƒ†:"G",«¶:"G",ƒ¢:"G",«§:"G",∆ì:"G","Íû†":"G",ÍùΩ:"G",Íùæ:"G","‚íΩ":"H",Ôº®:"H",ƒ§:"H",·∏¢:"H",·∏¶:"H",»û:"H",·∏§:"H",·∏®:"H",·∏™:"H",ƒ¶:"H",‚±ß:"H",‚±µ:"H","Íûç":"H","‚íæ":"I",Ôº©:"I",√å:"I",√ç:"I",√é:"I",ƒ®:"I",ƒ™:"I",ƒ¨:"I",ƒ∞:"I",√è:"I",·∏Æ:"I",·ªà:"I",«è:"I",»à:"I",»ä:"I",·ªä:"I",ƒÆ:"I",·∏¨:"I",∆ó:"I","‚íø":"J",Ôº™:"J",ƒ¥:"J",…à:"J","‚ìÄ":"K",Ôº´:"K",·∏∞:"K",«®:"K",·∏≤:"K",ƒ∂:"K",·∏¥:"K",∆ò:"K",‚±©:"K",ÍùÄ:"K",ÍùÇ:"K",ÍùÑ:"K","Íû¢":"K","‚ìÅ":"L",Ôº¨:"L",ƒø:"L",ƒπ:"L",ƒΩ:"L",·∏∂:"L",·∏∏:"L",ƒª:"L",·∏º:"L",·∏∫:"L",≈Å:"L",»Ω:"L",‚±¢:"L",‚±†:"L",Íùà:"L",ÍùÜ:"L",ÍûÄ:"L",«á:"LJ",«à:"Lj","‚ìÇ":"M",Ôº≠:"M",·∏æ:"M",·πÄ:"M",·πÇ:"M",‚±Æ:"M",∆ú:"M","‚ìÉ":"N",ÔºÆ:"N",«∏:"N",≈É:"N",√ë:"N",·πÑ:"N",≈á:"N",·πÜ:"N",≈Ö:"N",·πä:"N",·πà:"N",»†:"N",∆ù:"N","Íûê":"N","Íû§":"N",«ä:"NJ",«ã:"Nj","‚ìÑ":"O",ÔºØ:"O",√í:"O",√ì:"O",√î:"O",·ªí:"O",·ªê:"O",·ªñ:"O",·ªî:"O",√ï:"O",·πå:"O",»¨:"O",·πé:"O",≈å:"O",·πê:"O",·πí:"O",≈é:"O",»Æ:"O",»∞:"O",√ñ:"O",»™:"O",·ªé:"O",≈ê:"O",«ë:"O",»å:"O",»é:"O",∆†:"O",·ªú:"O",·ªö:"O",·ª†:"O",·ªû:"O",·ª¢:"O",·ªå:"O",·ªò:"O",«™:"O",«¨:"O",√ò:"O",«æ:"O",∆Ü:"O",∆ü:"O",Íùä:"O",Íùå:"O",∆¢:"OI",Íùé:"OO",»¢:"OU","‚ìÖ":"P",Ôº∞:"P",·πî:"P",·πñ:"P",∆§:"P",‚±£:"P",Íùê:"P",Íùí:"P",Íùî:"P","‚ìÜ":"Q",Ôº±:"Q",Íùñ:"Q",Íùò:"Q",…ä:"Q","‚ìá":"R",Ôº≤:"R",≈î:"R",·πò:"R",≈ò:"R",»ê:"R",»í:"R",·πö:"R",·πú:"R",≈ñ:"R",·πû:"R",…å:"R",‚±§:"R",Íùö:"R","Íû¶":"R",ÍûÇ:"R","‚ìà":"S",Ôº≥:"S",·∫û:"S",≈ö:"S",·π§:"S",≈ú:"S",·π†:"S",≈†:"S",·π¶:"S",·π¢:"S",·π®:"S",»ò:"S",≈û:"S","‚±æ":"S","Íû®":"S",ÍûÑ:"S","‚ìâ":"T",Ôº¥:"T",·π™:"T",≈§:"T",·π¨:"T",»ö:"T",≈¢:"T",·π∞:"T",·πÆ:"T",≈¶:"T",∆¨:"T",∆Æ:"T",»æ:"T",ÍûÜ:"T",Íú®:"TZ","‚ìä":"U",Ôºµ:"U",√ô:"U",√ö:"U",√õ:"U",≈®:"U",·π∏:"U",≈™:"U",·π∫:"U",≈¨:"U",√ú:"U",«õ:"U",«ó:"U",«ï:"U",«ô:"U",·ª¶:"U",≈Æ:"U",≈∞:"U",«ì:"U",»î:"U",»ñ:"U",∆Ø:"U",·ª™:"U",·ª®:"U",·ªÆ:"U",·ª¨:"U",·ª∞:"U",·ª§:"U",·π≤:"U",≈≤:"U",·π∂:"U",·π¥:"U",…Ñ:"U","‚ìã":"V",Ôº∂:"V",·πº:"V",·πæ:"V",∆≤:"V",Íùû:"V",…Ö:"V",Íù†:"VY","‚ìå":"W",Ôº∑:"W",·∫Ä:"W",·∫Ç:"W",≈¥:"W",·∫Ü:"W",·∫Ñ:"W",·∫à:"W",‚±≤:"W","‚ìç":"X",Ôº∏:"X",·∫ä:"X",·∫å:"X","‚ìé":"Y",Ôºπ:"Y",·ª≤:"Y",√ù:"Y",≈∂:"Y",·ª∏:"Y",»≤:"Y",·∫é:"Y",≈∏:"Y",·ª∂:"Y",·ª¥:"Y",∆≥:"Y",…é:"Y",·ªæ:"Y","‚ìè":"Z",Ôº∫:"Z",≈π:"Z",·∫ê:"Z",≈ª:"Z",≈Ω:"Z",·∫í:"Z",·∫î:"Z",∆µ:"Z",»§:"Z","‚±ø":"Z",‚±´:"Z",Íù¢:"Z","‚ìê":"a",ÔΩÅ:"a",·∫ö:"a",√†:"a",√°:"a",√¢:"a",·∫ß:"a",·∫•:"a",·∫´:"a",·∫©:"a",√£:"a",ƒÅ:"a",ƒÉ:"a",·∫±:"a",·∫Ø:"a",·∫µ:"a",·∫≥:"a",»ß:"a",«°:"a",√§:"a",«ü:"a",·∫£:"a",√•:"a",«ª:"a",«é:"a",»Å:"a",»É:"a",·∫°:"a",·∫≠:"a",·∫∑:"a",·∏Å:"a",ƒÖ:"a",‚±•:"a",…ê:"a",Íú≥:"aa",√¶:"ae",«Ω:"ae",«£:"ae",Íúµ:"ao",Íú∑:"au",Íúπ:"av",Íúª:"av",ÍúΩ:"ay","‚ìë":"b",ÔΩÇ:"b",·∏É:"b",·∏Ö:"b",·∏á:"b",∆Ä:"b",∆É:"b",…ì:"b","‚ìí":"c",ÔΩÉ:"c",ƒá:"c",ƒâ:"c",ƒã:"c",ƒç:"c",√ß:"c",·∏â:"c",∆à:"c",»º:"c",Íúø:"c",‚ÜÑ:"c","‚ìì":"d",ÔΩÑ:"d",·∏ã:"d",ƒè:"d",·∏ç:"d",·∏ë:"d",·∏ì:"d",·∏è:"d",ƒë:"d",∆å:"d",…ñ:"d",…ó:"d",Íù∫:"d",«≥:"dz",«Ü:"dz","‚ìî":"e",ÔΩÖ:"e",√®:"e",√©:"e",√™:"e",·ªÅ:"e",·∫ø:"e",·ªÖ:"e",·ªÉ:"e",·∫Ω:"e",ƒì:"e",·∏ï:"e",·∏ó:"e",ƒï:"e",ƒó:"e",√´:"e",·∫ª:"e",ƒõ:"e",»Ö:"e",»á:"e",·∫π:"e",·ªá:"e",»©:"e",·∏ù:"e",ƒô:"e",·∏ô:"e",·∏õ:"e",…á:"e",…õ:"e",«ù:"e","‚ìï":"f",ÔΩÜ:"f",·∏ü:"f",∆í:"f",Íùº:"f","‚ìñ":"g",ÔΩá:"g",«µ:"g",ƒù:"g",·∏°:"g",ƒü:"g",ƒ°:"g",«ß:"g",ƒ£:"g",«•:"g",…†:"g","Íû°":"g",·µπ:"g",Íùø:"g","‚ìó":"h",ÔΩà:"h",ƒ•:"h",·∏£:"h",·∏ß:"h",»ü:"h",·∏•:"h",·∏©:"h",·∏´:"h",·∫ñ:"h",ƒß:"h",‚±®:"h",‚±∂:"h",…•:"h",∆ï:"hv","‚ìò":"i",ÔΩâ:"i",√¨:"i",√≠:"i",√Æ:"i",ƒ©:"i",ƒ´:"i",ƒ≠:"i",√Ø:"i",·∏Ø:"i",·ªâ:"i",«ê:"i",»â:"i",»ã:"i",·ªã:"i",ƒØ:"i",·∏≠:"i",…®:"i",ƒ±:"i","‚ìô":"j",ÔΩä:"j",ƒµ:"j",«∞:"j",…â:"j","‚ìö":"k",ÔΩã:"k",·∏±:"k",«©:"k",·∏≥:"k",ƒ∑:"k",·∏µ:"k",∆ô:"k",‚±™:"k",ÍùÅ:"k",ÍùÉ:"k",ÍùÖ:"k","Íû£":"k","‚ìõ":"l",ÔΩå:"l",≈Ä:"l",ƒ∫:"l",ƒæ:"l",·∏∑:"l",·∏π:"l",ƒº:"l",·∏Ω:"l",·∏ª:"l",≈ø:"l",≈Ç:"l",∆ö:"l",…´:"l",‚±°:"l",Íùâ:"l",ÍûÅ:"l",Íùá:"l",«â:"lj","‚ìú":"m",ÔΩç:"m",·∏ø:"m",·πÅ:"m",·πÉ:"m",…±:"m",…Ø:"m","‚ìù":"n",ÔΩé:"n",«π:"n",≈Ñ:"n",√±:"n",·πÖ:"n",≈à:"n",·πá:"n",≈Ü:"n",·πã:"n",·πâ:"n",∆û:"n",…≤:"n",≈â:"n","Íûë":"n","Íû•":"n",«å:"nj","‚ìû":"o",ÔΩè:"o",√≤:"o",√≥:"o",√¥:"o",·ªì:"o",·ªë:"o",·ªó:"o",·ªï:"o",√µ:"o",·πç:"o",»≠:"o",·πè:"o",≈ç:"o",·πë:"o",·πì:"o",≈è:"o",»Ø:"o",»±:"o",√∂:"o",»´:"o",·ªè:"o",≈ë:"o",«í:"o",»ç:"o",»è:"o",∆°:"o",·ªù:"o",·ªõ:"o",·ª°:"o",·ªü:"o",·ª£:"o",·ªç:"o",·ªô:"o",«´:"o",«≠:"o",√∏:"o",«ø:"o",…î:"o",Íùã:"o",Íùç:"o",…µ:"o",∆£:"oi",»£:"ou",Íùè:"oo","‚ìü":"p",ÔΩê:"p",·πï:"p",·πó:"p",∆•:"p",·µΩ:"p",Íùë:"p",Íùì:"p",Íùï:"p","‚ì†":"q",ÔΩë:"q",…ã:"q",Íùó:"q",Íùô:"q","‚ì°":"r",ÔΩí:"r",≈ï:"r",·πô:"r",≈ô:"r",»ë:"r",»ì:"r",·πõ:"r",·πù:"r",≈ó:"r",·πü:"r",…ç:"r",…Ω:"r",Íùõ:"r","Íûß":"r",ÍûÉ:"r","‚ì¢":"s",ÔΩì:"s",√ü:"s",≈õ:"s",·π•:"s",≈ù:"s",·π°:"s",≈°:"s",·πß:"s",·π£:"s",·π©:"s",»ô:"s",≈ü:"s",»ø:"s","Íû©":"s",ÍûÖ:"s",·∫õ:"s","‚ì£":"t",ÔΩî:"t",·π´:"t",·∫ó:"t",≈•:"t",·π≠:"t",»õ:"t",≈£:"t",·π±:"t",·πØ:"t",≈ß:"t",∆≠:"t", à:"t",‚±¶:"t",Íûá:"t",Íú©:"tz","‚ì§":"u",ÔΩï:"u",√π:"u",√∫:"u",√ª:"u",≈©:"u",·ππ:"u",≈´:"u",·πª:"u",≈≠:"u",√º:"u",«ú:"u",«ò:"u",«ñ:"u",«ö:"u",·ªß:"u",≈Ø:"u",≈±:"u",«î:"u",»ï:"u",»ó:"u",∆∞:"u",·ª´:"u",·ª©:"u",·ªØ:"u",·ª≠:"u",·ª±:"u",·ª•:"u",·π≥:"u",≈≥:"u",·π∑:"u",·πµ:"u", â:"u","‚ì•":"v",ÔΩñ:"v",·πΩ:"v",·πø:"v", ã:"v",Íùü:"v", å:"v",Íù°:"vy","‚ì¶":"w",ÔΩó:"w",·∫Å:"w",·∫É:"w",≈µ:"w",·∫á:"w",·∫Ö:"w",·∫ò:"w",·∫â:"w",‚±≥:"w","‚ìß":"x",ÔΩò:"x",·∫ã:"x",·∫ç:"x","‚ì®":"y",ÔΩô:"y",·ª≥:"y",√Ω:"y",≈∑:"y",·ªπ:"y",»≥:"y",·∫è:"y",√ø:"y",·ª∑:"y",·∫ô:"y",·ªµ:"y",∆¥:"y",…è:"y",·ªø:"y","‚ì©":"z",ÔΩö:"z",≈∫:"z",·∫ë:"z",≈º:"z",≈æ:"z",·∫ì:"z",·∫ï:"z",∆∂:"z",»•:"z",…Ä:"z",‚±¨:"z",Íù£:"z",ŒÜ:"Œë",Œà:"Œï",Œâ:"Œó",Œä:"Œô",Œ™:"Œô",Œå:"Œü",Œé:"Œ•",Œ´:"Œ•",Œè:"Œ©",Œ¨:"Œ±",Œ≠:"Œµ",ŒÆ:"Œ∑",ŒØ:"Œπ",œä:"Œπ",Œê:"Œπ",œå:"Œø",œç:"œÖ",œã:"œÖ",Œ∞:"œÖ",œâ:"œâ",œÇ:"œÉ"};
F=e(document),M=function(){var e=1;return function(){return e++}}(),I=S(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var r,i,a=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&null!==n.element.data("select2")&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=e(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+M()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",n.element.attr("title")),this.body=e(document.body),v(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(O(n.containerCss,this.opts.element)),this.container.addClass(O(n.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",m),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),v(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(O(n.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",m),this.results=r=this.container.find(a),this.search=i=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",m),l(this.results),this.dropdown.on("mousemove-filtered",a,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",a,this.bind(function(e){this._touchEvent=!0,this.highlightUnderEvent(e)})),this.dropdown.on("touchmove",a,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",a,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),p(80,this.results),this.dropdown.on("scroll-debounced",a,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&r.mousewheel(function(e,t,n,i){var o=r.scrollTop();i>0&&0>=o-i?(r.scrollTop(0),m(e)):0>i&&r.get(0).scrollHeight-r.scrollTop()+i<=r.height()&&(r.scrollTop(r.get(0).scrollHeight-r.height()),m(e))}),c(i),i.on("keyup-change input paste",this.bind(this.updateResults)),i.on("focus",function(){i.addClass("select2-focused")}),i.on("blur",function(){i.removeClass("select2-focused")}),this.dropdown.on("mouseup",a,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()}),this.nextSearchTerm=t,e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var s=n.element.prop("disabled");s===t&&(s=!1),this.enable(!s);var u=n.element.prop("readonly");u===t&&(u=!1),this.readonly(u),L=L||o(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",n.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,n=e.data("select2"),r=this;this.close(),e.length&&e[0].detachEvent&&r._sync&&e.each(function(){r._sync&&this.detachEvent("onpropertychange",r._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,n!==t&&(n.container.remove(),n.liveRegion.remove(),n.dropdown.remove(),e.show().removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.css("display","")),C.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:a(e.attr("locked"),"locked")||a(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(n){var r,i,o,u,c=this;if(r=n.element,"select"===r.get(0).tagName.toLowerCase()&&(this.select=i=n.element),i&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n=e.extend({},{populateResults:function(r,i,o){var a,s=this.opts.id,u=this.liveRegion;(a=function(r,i,l){var d,p,f,h,m,g,y,v,w,E;r=n.sortResults(r,i,o);var b=[];for(d=0,p=r.length;p>d;d+=1)f=r[d],m=f.disabled===!0,h=!m&&s(f)!==t,g=f.children&&f.children.length>0,y=e("<li></li>"),y.addClass("select2-results-dept-"+l),y.addClass("select2-result"),y.addClass(h?"select2-result-selectable":"select2-result-unselectable"),m&&y.addClass("select2-disabled"),g&&y.addClass("select2-result-with-children"),y.addClass(c.opts.formatResultCssClass(f)),y.attr("role","presentation"),v=e(document.createElement("div")),v.addClass("select2-result-label"),v.attr("id","select2-result-label-"+M()),v.attr("role","option"),E=n.formatResult(f,v,o,c.opts.escapeMarkup),E!==t&&(v.html(E),y.append(v)),g&&(w=e("<ul></ul>"),w.addClass("select2-result-sub"),a(f.children,w,l+1),y.append(w)),y.data("select2-data",f),b.push(y[0]);i.append(b),u.text(n.formatMatches(r.length))})(i,r,0)}},e.fn.select2.defaults,n),"function"!=typeof n.id&&(o=n.id,n.id=function(e){return e[o]}),e.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(i?(n.query=this.bind(function(e){var n,i,o,a={results:[],more:!1},s=e.term;o=function(t,n){var r;t.is("option")?e.matcher(s,t.text(),t)&&n.push(c.optionToData(t)):t.is("optgroup")&&(r=c.optionToData(t),t.children().each2(function(e,t){o(t,r.children)}),r.children.length>0&&n.push(r))},n=r.children(),this.getPlaceholder()!==t&&n.length>0&&(i=this.getPlaceholderOption(),i&&(n=n.not(i))),n.each2(function(e,t){o(t,a.results)}),e.callback(a)}),n.id=function(e){return e.id}):"query"in n||("ajax"in n?(u=n.element.data("ajax-url"),u&&u.length>0&&(n.ajax.url=u),n.query=b.call(n.element,n.ajax)):"data"in n?n.query=T(n.data):"tags"in n&&(n.query=A(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),n.initSelection===t&&(n.initSelection=function(t,r){var i=[];e(s(t.val(),n.separator,n.transformVal)).each(function(){var t={id:this,text:this},r=n.tags;e.isFunction(r)&&(r=r()),e(r).each(function(){return a(this.id,t.id)?(t=this,!1):void 0}),i.push(t)}),r(i)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");if("top"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof n.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return n},monitorSource:function(){var n,r=this.opts.element,i=this;r.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var e=r.prop("disabled");e===t&&(e=!1),this.enable(!e);var n=r.prop("readonly");n===t&&(n=!1),this.readonly(n),this.container&&(v(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(O(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(v(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(O(this.opts.dropdownCssClass,this.opts.element)))}),r.length&&r[0].attachEvent&&r.each(function(){this.attachEvent("onpropertychange",i._sync)}),n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,n!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new n(function(t){e.each(t,i._sync)}),this.propertyObserver.observe(r.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var n=e.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){e===t&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var t,n,r,i,o,a=this.dropdown,s=this.container,u=s.offset(),c=s.outerHeight(!1),l=s.outerWidth(!1),d=a.outerHeight(!1),p=e(window),f=p.width(),h=p.height(),m=p.scrollLeft()+f,g=p.scrollTop()+h,y=u.top+c,v=u.left,w=g>=y+d,E=u.top-d>=p.scrollTop(),b=a.outerWidth(!1),T=function(){return m>=v+b},A=function(){return u.left+m+s.outerWidth(!1)>b},R=a.hasClass("select2-drop-above");R?(n=!0,!E&&w&&(r=!0,n=!1)):(n=!1,!w&&E&&(r=!0,n=!0)),r&&(a.hide(),u=this.container.offset(),c=this.container.outerHeight(!1),l=this.container.outerWidth(!1),d=a.outerHeight(!1),m=p.scrollLeft()+f,g=p.scrollTop()+h,y=u.top+c,v=u.left,b=a.outerWidth(!1),a.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(o=e(".select2-results",a)[0],a.addClass("select2-drop-auto-width"),a.css("width",""),b=a.outerWidth(!1)+(o.scrollHeight===o.clientHeight?0:L.width),b>l?l=b:b=l,d=a.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(t=this.body.offset(),y-=t.top,v-=t.left),!T()&&A()&&(v=u.left+this.container.outerWidth(!1)-b),i={left:v,width:l},n?(i.top=u.top-d,i.bottom="auto",this.container.addClass("select2-drop-above"),a.addClass("select2-drop-above")):(i.top=y,i.bottom="auto",this.container.removeClass("select2-drop-above"),a.removeClass("select2-drop-above")),i=e.extend(i,O(this.opts.dropdownCss,this.opts.element)),a.css(i)},shouldOpen:function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),F.on("mousemove.select2Event",function(e){z.x=e.pageX,z.y=e.pageY}),!0):!1},opening:function(){var t,r=this.containerEventName,i="scroll."+r,o="resize."+r,a="orientationchange."+r;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),t=e("#select2-drop-mask"),0===t.length&&(t=e(document.createElement("div")),t.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body),t.on("mousedown touchstart click",function(r){n(t);var i,o=e("#select2-drop");o.length>0&&(i=o.data("select2"),i.opts.selectOnBlur&&i.selectHighlighted({noFocus:!0}),i.close(),r.preventDefault(),r.stopPropagation())})),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var s=this;this.container.parents().add(window).each(function(){e(this).on(o+" "+i+" "+a,function(){s.opened()&&s.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerEventName,n="scroll."+t,r="resize."+t,i="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(n).off(r).off(i)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),F.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return O(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t,n,r,i,o,a,s,u,c=this.results;if(n=this.highlight(),!(0>n)){if(0==n)return void c.scrollTop(0);t=this.findHighlightableChoices().find(".select2-result-label"),r=e(t[n]),u=(r.offset()||{}).top||0,i=u+r.outerHeight(!0),n===t.length-1&&(s=c.find("li.select2-more-results"),s.length>0&&(i=s.offset().top+s.outerHeight(!0))),o=c.offset().top+c.outerHeight(!1),i>o&&c.scrollTop(c.scrollTop()+(i-o)),a=u-c.offset().top,0>a&&"none"!=r.css("display")&&c.scrollTop(c.scrollTop()+a)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){for(var n=this.findHighlightableChoices(),r=this.highlight();r>-1&&r<n.length;){r+=t;var i=e(n[r]);if(i.hasClass("select2-result-selectable")&&!i.hasClass("select2-disabled")&&!i.hasClass("select2-selected")){this.highlight(r);break}}},highlight:function(t){var n,r,o=this.findHighlightableChoices();return 0===arguments.length?i(o.filter(".select2-highlighted")[0],o.get()):(t>=o.length&&(t=o.length-1),0>t&&(t=0),this.removeHighlight(),n=e(o[t]),n.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",n.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(n.text()),r=n.data("select2-data"),void(r&&this.opts.element.trigger({type:"select2-highlight",val:this.id(r),choice:r})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var r=this.findHighlightableChoices();this.highlight(r.index(n))}else 0==n.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e,t=this.results,n=t.find("li.select2-more-results"),r=this.resultsPage+1,i=this,o=this.search.val(),a=this.context;0!==n.length&&(e=n.offset().top-t.offset().top-t.height(),e<=this.opts.loadMorePadding&&(n.addClass("select2-active"),this.opts.query({element:this.opts.element,term:o,page:r,context:a,matcher:this.opts.matcher,callback:this.bind(function(e){i.opened()&&(i.opts.populateResults.call(this,t,e.results,{term:o,page:r,context:a}),i.postprocessResults(e,!1,!1),e.more===!0?(n.detach().appendTo(t).html(i.opts.escapeMarkup(O(i.opts.formatLoadMore,i.opts.element,r+1))),window.setTimeout(function(){i.loadMoreIfNeeded()},10)):n.remove(),i.positionDropdown(),i.resultsPage=r,i.context=e.context,this.opts.element.trigger({type:"select2-loaded",items:e}))})})))},tokenize:function(){},updateResults:function(n){function r(){c.removeClass("select2-active"),p.positionDropdown(),p.liveRegion.text(l.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?l.text():p.opts.formatMatches(l.find('.select2-result-selectable:not(".select2-selected")').length))}function i(e){l.html(e),r()}var o,s,u,c=this.search,l=this.results,d=this.opts,p=this,f=c.val(),h=e.data(this.container,"select2-last-term");if((n===!0||!h||!a(f,h))&&(e.data(this.container,"select2-last-term",f),n===!0||this.showSearchInput!==!1&&this.opened())){u=++this.queryCount;var m=this.getMaximumSelectionSize();if(m>=1&&(o=this.data(),e.isArray(o)&&o.length>=m&&R(d.formatSelectionTooBig,"formatSelectionTooBig")))return void i("<li class='select2-selection-limit'>"+O(d.formatSelectionTooBig,d.element,m)+"</li>");if(c.val().length<d.minimumInputLength)return i(R(d.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+O(d.formatInputTooShort,d.element,c.val(),d.minimumInputLength)+"</li>":""),void(n&&this.showSearch&&this.showSearch(!0));if(d.maximumInputLength&&c.val().length>d.maximumInputLength)return void i(R(d.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+O(d.formatInputTooLong,d.element,c.val(),d.maximumInputLength)+"</li>":"");d.formatSearching&&0===this.findHighlightableChoices().length&&i("<li class='select2-searching'>"+O(d.formatSearching,d.element)+"</li>"),c.addClass("select2-active"),this.removeHighlight(),s=this.tokenize(),s!=t&&null!=s&&c.val(s),this.resultsPage=1,d.query({element:d.element,term:c.val(),page:this.resultsPage,context:null,matcher:d.matcher,callback:this.bind(function(o){var s;if(u==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(o.hasError!==t&&R(d.formatAjaxError,"formatAjaxError"))return void i("<li class='select2-ajax-error'>"+O(d.formatAjaxError,d.element,o.jqXHR,o.textStatus,o.errorThrown)+"</li>");if(this.context=o.context===t?null:o.context,this.opts.createSearchChoice&&""!==c.val()&&(s=this.opts.createSearchChoice.call(p,c.val(),o.results),s!==t&&null!==s&&p.id(s)!==t&&null!==p.id(s)&&0===e(o.results).filter(function(){return a(p.id(this),p.id(s))}).length&&this.opts.createSearchChoicePosition(o.results,s)),0===o.results.length&&R(d.formatNoMatches,"formatNoMatches"))return void i("<li class='select2-no-results'>"+O(d.formatNoMatches,d.element,c.val())+"</li>");l.empty(),p.opts.populateResults.call(this,l,o.results,{term:c.val(),page:this.resultsPage,context:null}),o.more===!0&&R(d.formatLoadMore,"formatLoadMore")&&(l.append("<li class='select2-more-results'>"+d.escapeMarkup(O(d.formatLoadMore,d.element,this.resultsPage))+"</li>"),window.setTimeout(function(){p.loadMoreIfNeeded()},10)),this.postprocessResults(o,n),r(),this.opts.element.trigger({type:"select2-loaded",items:o})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){f(this.search)},selectHighlighted:function(e){if(this._touchMoved)return void this.clearTouchMoved();var t=this.highlight(),n=this.results.find(".select2-highlighted"),r=n.closest(".select2-result").data("select2-data");r?(this.highlight(t),this.onSelect(r,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var n=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&n||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.trim(n.text())&&""===n.val())return n}},initContainerWidth:function(){function n(){var n,r,i,o,a,s;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(n=this.opts.element.attr("style"),n!==t)for(r=n.split(";"),o=0,a=r.length;a>o;o+=1)if(s=r[o].replace(/\s/g,""),i=s.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==i&&i.length>=1)return i[1];return"resolve"===this.opts.width?(n=this.opts.element.css("width"),n.indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var r=n.call(this);null!==r&&this.container.css("width",r)}}),D=S(I,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return t},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var n,r,i;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),n=this.search.get(0),n.createTextRange?(r=n.createTextRange(),r.collapse(!1),r.select()):n.setSelectionRange&&(i=this.search.val().length,n.setSelectionRange(i,i))),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),C.call(this,"selection","focusser")},initContainer:function(){var t,r,i=this.container,o=this.dropdown,a=M();this.showSearch(this.opts.minimumResultsForSearch<0?!1:!0),this.selection=t=i.find(".select2-choice"),this.focusser=i.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+a),this.focusser.attr("aria-labelledby","select2-chosen-"+a),this.results.attr("id","select2-results-"+a),this.search.attr("aria-owns","select2-results-"+a),this.focusser.attr("id","s2id_autogen"+a),r=e("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.focus(this.bind(function(){this.focus()})),this.focusser.prev().text(r.text()).attr("for",this.focusser.attr("id"));var s=this.opts.element.attr("title");this.opts.element.attr("title",s||r.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode){if(e.which===x.PAGE_UP||e.which===x.PAGE_DOWN)return void m(e);switch(e.which){case x.UP:case x.DOWN:return this.moveHighlight(e.which===x.UP?-1:1),void m(e);case x.ENTER:return this.selectHighlighted(),void m(e);case x.TAB:return void this.selectHighlighted({noFocus:!0});case x.ESC:return this.cancel(e),void m(e)}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==x.TAB&&!x.isControl(e)&&!x.isFunctionKey(e)&&e.which!==x.ESC){if(this.opts.openOnEnter===!1&&e.which===x.ENTER)return void m(e);if(e.which==x.DOWN||e.which==x.UP||e.which==x.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void m(e)}return e.which==x.DELETE||e.which==x.BACKSPACE?(this.opts.allowClear&&this.clear(),void m(e)):void 0}})),c(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),t.on("mousedown touchstart","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),g(e),this.close(),this.selection&&this.selection.focus())})),t.on("mousedown touchstart",this.bind(function(r){n(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),m(r)})),o.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),t.on("focus",this.bind(function(e){m(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(t){var n=this.selection.data("select2-data");if(n){var r=e.Event("select2-clearing");if(this.opts.element.trigger(r),r.isDefaultPrevented())return;var i=this.getPlaceholderOption();this.opts.element.val(i?i.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),t!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.setPlaceholder(),e.nextSearchTerm=e.opts.nextSearchTerm(n,e.search.val()))})}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()===t?!1:(e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val()},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var r=e.find("option").filter(function(){return this.selected&&!this.disabled});t(n.optionToData(r))}:"data"in t&&(t.initSelection=t.initSelection||function(n,r){var i=n.val(),o=null;t.query({matcher:function(e,n,r){var s=a(i,t.id(r));return s&&(o=r),s},callback:e.isFunction(r)?function(){r(o)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,n){var r=0,i=this;if(this.findHighlightableChoices().each2(function(e,t){return a(i.id(t.data("select2-data")),i.opts.element.val())?(r=e,!1):void 0}),n!==!1&&this.highlight(t===!0&&r>=0?r:0),t===!0){var o=this.opts.minimumResultsForSearch;o>=0&&this.showSearch(P(e.results)>=o)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var n=this.opts.element.val(),r=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),a(n,this.id(e))||this.triggerChange({added:e,removed:r})}},updateSelection:function(e){var n,r,i=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),i.empty(),null!==e&&(n=this.opts.formatSelection(e,i,this.opts.escapeMarkup)),n!==t&&i.append(n),r=this.opts.formatSelectionCssClass(e,i),r!==t&&i.addClass(r),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,n=!1,r=null,i=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return r=i.optionToData(t),!1}),this.updateSelection(r),this.setPlaceholder(),n&&this.triggerChange({added:r,removed:o});else{if(!e&&0!==e)return void this.clear(n);if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){i.opts.element.val(e?i.id(e):""),i.updateSelection(e),i.setPlaceholder(),n&&i.triggerChange({added:e,removed:o})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var n,r=!1;return 0===arguments.length?(n=this.selection.data("select2-data"),n==t&&(n=null),n):(arguments.length>1&&(r=arguments[1]),void(e?(n=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),r&&this.triggerChange({added:e,removed:n})):this.clear(r)))}}),N=S(I,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));
return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var r=[];e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(e,t){r.push(n.optionToData(t))}),t(r)}:"data"in t&&(t.initSelection=t.initSelection||function(n,r){var i=s(n.val(),t.separator,t.transformVal),o=[];t.query({matcher:function(n,r,s){var u=e.grep(i,function(e){return a(e,t.id(s))}).length;return u&&o.push(s),u},callback:e.isFunction(r)?function(){for(var e=[],n=0;n<i.length;n++)for(var s=i[n],u=0;u<o.length;u++){var c=o[u];if(a(s,t.id(c))){e.push(c),o.splice(u,1);break}}r(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),C.call(this,"searchContainer","selection")},initContainer:function(){var t,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(n);var r=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(){r.search[0].focus(),r.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+M()),this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.focus(this.bind(function(){this.focus()})),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var n=t.find(".select2-search-choice-focus"),r=n.prev(".select2-search-choice:not(.select2-locked)"),i=n.next(".select2-search-choice:not(.select2-locked)"),o=h(this.search);if(n.length&&(e.which==x.LEFT||e.which==x.RIGHT||e.which==x.BACKSPACE||e.which==x.DELETE||e.which==x.ENTER)){var a=n;return e.which==x.LEFT&&r.length?a=r:e.which==x.RIGHT?a=i.length?i:null:e.which===x.BACKSPACE?this.unselect(n.first())&&(this.search.width(10),a=r.length?r:i):e.which==x.DELETE?this.unselect(n.first())&&(this.search.width(10),a=i.length?i:null):e.which==x.ENTER&&(a=null),this.selectChoice(a),m(e),void(a&&a.length||this.open())}if((e.which===x.BACKSPACE&&1==this.keydowns||e.which==x.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),void m(e);if(this.selectChoice(null),this.opened())switch(e.which){case x.UP:case x.DOWN:return this.moveHighlight(e.which===x.UP?-1:1),void m(e);case x.ENTER:return this.selectHighlighted(),void m(e);case x.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case x.ESC:return this.cancel(e),void m(e)}if(e.which!==x.TAB&&!x.isControl(e)&&!x.isFunctionKey(e)&&e.which!==x.BACKSPACE&&e.which!==x.ESC){if(e.which===x.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===x.PAGE_UP||e.which===x.PAGE_DOWN)&&m(e),e.which===x.ENTER&&m(e)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",n,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",n,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),n=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var n=[],r=[],o=this;e(t).each(function(){i(o.id(this),n)<0&&(n.push(o.id(this)),r.push(this))}),t=r,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){o.addSelectedChoice(this)}),o.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,n){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(e,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),n&&n.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var r,i,o=!n.locked,a=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),s=e("<li class='select2-search-choice select2-locked'><div></div></li>"),u=o?a:s,c=this.id(n),l=this.getVal();r=this.opts.formatSelection(n,u.find("div"),this.opts.escapeMarkup),r!=t&&u.find("div").replaceWith(e("<div></div>").html(r)),i=this.opts.formatSelectionCssClass(n,u.find("div")),i!=t&&u.addClass(i),o&&u.find(".select2-search-choice-close").on("mousedown",m).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),m(t),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),u.data("select2-data",n),u.insertBefore(this.searchContainer),l.push(c),this.setVal(l)},unselect:function(t){var n,r,o=this.getVal();if(t=t.closest(".select2-search-choice"),0===t.length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(n=t.data("select2-data")){var a=e.Event("select2-removing");if(a.val=this.id(n),a.choice=n,this.opts.element.trigger(a),a.isDefaultPrevented())return!1;for(;(r=i(this.id(n),o))>=0;)o.splice(r,1),this.setVal(o),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}),!0}},postprocessResults:function(e,t,n){var r=this.getVal(),o=this.results.find(".select2-result"),a=this.results.find(".select2-result-with-children"),s=this;o.each2(function(e,t){var n=s.id(t.data("select2-data"));i(n,r)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),a.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&n!==!1&&this.opts.closeOnSelect===!0&&s.highlight(0),!this.opts.createSearchChoice&&!o.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&R(s.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+O(s.opts.formatNoMatches,s.opts.element,s.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-u(this.search)},resizeSearch:function(){var e,t,n,r,i,o=u(this.search);e=y(this.search)+10,t=this.search.offset().left,n=this.selection.width(),r=this.selection.offset().left,i=n-(t-r)-o,e>i&&(i=n-o),40>i&&(i=n-o),0>=i&&(i=e),this.search.width(Math.floor(i))},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),s(e,this.opts.separator,this.opts.transformVal))},setVal:function(t){var n;this.select?this.select.val(t):(n=[],e(t).each(function(){i(this,n)<0&&n.push(this)}),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),n=0;n<t.length;n++)for(var r=0;r<e.length;r++)a(this.opts.id(t[n]),this.opts.id(e[r]))&&(t.splice(n,1),n>0&&n--,e.splice(r,1),r--);return{added:t,removed:e}},val:function(n,r){var i,o=this;if(0===arguments.length)return this.getVal();if(i=this.data(),i.length||(i=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(r&&this.triggerChange({added:this.data(),removed:i}));if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),r&&this.triggerChange(this.buildChangeDetails(i,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var n=e.map(t,o.id);o.setVal(n),o.updateSelection(t),o.clearSearch(),r&&o.triggerChange(o.buildChangeDetails(i,o.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(n.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,n){var r,i,o=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(i=this.data(),t||(t=[]),r=e.map(t,function(e){return o.opts.id(e)}),this.setVal(r),this.updateSelection(t),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(i,this.data())),void 0)}}),e.fn.select2=function(){var n,r,o,a,s,u=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],l=["opened","isFocused","container","dropdown"],d=["val","data"],p={search:"externalSearch"};return this.each(function(){if(0===u.length||"object"==typeof u[0])n=0===u.length?{}:e.extend({},u[0]),n.element=e(this),"select"===n.element.get(0).tagName.toLowerCase()?s=n.element.prop("multiple"):(s=n.multiple||!1,"tags"in n&&(n.multiple=s=!0)),r=s?new window.Select2["class"].multi:new window.Select2["class"].single,r.init(n);else{if("string"!=typeof u[0])throw"Invalid arguments to select2 plugin: "+u;if(i(u[0],c)<0)throw"Unknown method: "+u[0];if(a=t,r=e(this).data("select2"),r===t)return;if(o=u[0],"container"===o?a=r.container:"dropdown"===o?a=r.dropdown:(p[o]&&(o=p[o]),a=r[o].apply(r,u.slice(1))),i(u[0],l)>=0||i(u[0],d)>=0&&1==u.length)return!1}}),a===t?this:a},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,r){var i=[];return w(this.text(e),n.term,i,r),i.join("")},transformVal:function(t){return e.trim(t)},formatSelection:function(e,n,r){return e?r(this.text(e)):t},sortResults:function(e){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(){return t},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==t?null:e.id},text:function(t){return t&&this.data&&this.data.text?e.isFunction(this.data.text)?this.data.text(t):t[this.data.text]:t.text},matcher:function(e,t){return r(""+t).toUpperCase().indexOf(r(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:k,escapeMarkup:E,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){var t="ontouchstart"in window||navigator.msMaxTouchPoints>0;return t&&e.opts.minimumResultsForSearch<0?!1:!0}},e.fn.select2.locales=[],e.fn.select2.locales.en={formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(){return"Loading failed"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" or more character"+(1==n?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results‚Ä¶"},formatSearching:function(){return"Searching‚Ä¶"}},e.extend(e.fn.select2.defaults,e.fn.select2.locales.en),e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:b,local:T,tags:A},util:{debounce:d,markMatch:w,escapeMarkup:E,stripDiacritics:r},"class":{"abstract":I,single:D,multi:N}}}}(jQuery),define("select2",["jquery"],function(e){return function(){var t;return t||e.Select2}}(this)),define("app/monkeyPatch",["jquery","backbone","bootstrap","select2"],function(e,t){var n=t.sync;t.sync=function(e,t,r){return r.syncMethod=e,n.call(this,e,t,r)},e.fn.modal.Constructor.prototype.enforceFocus=function(){},e.fn.modal.Constructor.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27===e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")};var r=e(document.body);return e.fn.select2.defaults.dropdownContainer=function(e){var t=e.container.closest(".modal-body");if(0===t.length)return r;var n=t.closest(".modal-dialog");return 0===n.length?r:n},r.on("click","label[for]",function(t){var n=e("#"+t.target.htmlFor);n.data("select2")&&n.select2("focus")}),{}}),define("h5.pubsub/Subscriptions",["require","exports","module"],function(e,t,n){function r(e){this.messageBroker=e,this.children={},this.subscriptions=[],this.subscriptionsPendingRemoval=[],this.sendingMessagesCount=0,this.removeSubscription=this.removeSubscription.bind(this)}n.exports=r;var i=[];r.TOKEN={SEPARATOR:".",ANY:"*",ALL:"**"},r.prototype.destroy=function(){for(var e=this.children,t=Object.keys(e),n=0,r=t.length;r>n;++n)e[t[n]].destroy();this.children=null,this.removeSubscriptions(),this.subscriptionsPendingRemoval=null,this.messageBroker=null},r.prototype.count=function(e,t){this.subscriptions.length&&(t[e]=this.subscriptions.length);var n=Object.keys(this.children),i=n.length;if(i){0!==e.length&&(e+=r.TOKEN.SEPARATOR);for(var o=0;i>o;++o){var a=n[o];this.children[a].count(e+a,t)}}},r.prototype.add=function(e){var t=this.splitTopic(e.getTopic());this.addSubscription(t,e)},r.prototype.remove=function(e){this.removeSubscriptions(this.splitTopic(e))},r.prototype.send=function(e,t,n){var r=this.splitTopic(e);this.sendMessage(r,e,t,n)},r.prototype.addSubscription=function(e,t){if(0===e.length)return this.subscriptions.push(t),t.on("cancel",this.removeSubscription),void(1===this.subscriptions.length&&this.messageBroker.emit("new topic",t.getTopic()));var n=this.children,i=e.shift();"undefined"==typeof n[i]&&(n[i]=new r(this.messageBroker)),n[i].addSubscription(e,t)},r.prototype.removeSubscriptions=function(e){var t,n;if("undefined"==typeof e||0===e.length){var r=this.subscriptions;if(!r.length)return;this.subscriptions=[];var i=r[0].getTopic();for(t=0,n=r.length;n>t;++t)r[t].cancel();return void this.messageBroker.emit("empty topic",i)}var o=e.shift();"undefined"!=typeof this.children[o]&&this.children[o].removeSubscriptions(e)},r.prototype.sendMessage=function(e,t,n,o){if(++this.sendingMessagesCount,"undefined"!=typeof this.children[r.TOKEN.ALL]&&this.children[r.TOKEN.ALL].sendMessage(i,t,n,o),0===e.length)for(var a=0,s=this.subscriptions.length;s>a;++a)this.subscriptions[a].send(t,n,o);else{var u=e.shift();"undefined"!=typeof this.children[r.TOKEN.ANY]&&this.children[r.TOKEN.ANY].sendMessage([].concat(e),t,n,o),"undefined"!=typeof this.children[u]&&this.children[u].sendMessage(e,t,n,o)}--this.sendingMessagesCount,this.removePendingSubscriptions()},r.prototype.splitTopic=function(e){var t=e.split(r.TOKEN.SEPARATOR).filter(function(e){return 0!==e.length});if(0===t.length)throw new Error("Invalid subscription topic: "+e);return t},r.prototype.removeSubscription=function(e){return this.messageBroker.emit("cancel",e),0!==this.subscriptions.length?1===this.subscriptions.length&&this.subscriptions[0]===e?(this.subscriptions.length=0,void this.messageBroker.emit("empty topic",e.getTopic())):void this.removeOrQueueRemoval(e):void 0},r.prototype.removeOrQueueRemoval=function(e){0===this.sendingMessagesCount?this.subscriptions.splice(this.subscriptions.indexOf(e),1):this.subscriptionsPendingRemoval.push(e)},r.prototype.removePendingSubscriptions=function(){var e=this.subscriptionsPendingRemoval,t=e.length;if(t&&!this.sendingMessagesCount){var n=this.subscriptions;if(t===n.length)return e.length=0,void(n.length=0);var r,i,o=[];for(r=0;t>r;++r)o.push(n.indexOf(e[r]));for(o.sort(function(e,t){return t-e}),r=0,i=o.length;i>r;++r)n.splice(o[r],1);e.length=0}}}),define("h5.pubsub/Subscription",["require","exports","module"],function(e,t,n){function r(e,t){this.cancelled=!1,this.id=e,this.topic=t,this.messageFilter=null,this.messageLimit=0,this.messageCount=0,this.doFilter=null,this.listeners={cancel:null,message:null}}n.exports=r,r.compileFilter=function(){throw new Error("Subscription.compileFilter() is not implemented!")},r.prototype.toJSON=function(){var e=this.getFilter();return"function"==typeof e&&(e=e.toString()),{id:this.getId(),topic:this.getTopic(),limit:this.getLimit(),filter:e}},r.prototype.getId=function(){return this.id},r.prototype.getTopic=function(){return this.topic},r.prototype.getFilter=function(){return this.messageFilter},r.prototype.setFilter=function(e){if(this.messageFilter=e,"function"==typeof e)this.doFilter=e;else if(this.doFilter=r.compileFilter(e),"function"!=typeof this.doFilter)throw new Error("Subscription.compileFilter() must return a function.");return this},r.prototype.getLimit=function(){return this.messageLimit},r.prototype.setLimit=function(e){if(1>e)throw new Error("Subscription limit must be greater than 0.");return this.messageLimit=e,this},r.prototype.getMessageCount=function(){return this.messageCount},r.prototype.on=function(e,t){if(this.cancelled)return this;var n=this.listeners[e],r=typeof n;if("undefined"===r)throw new Error("Unknown event: "+e);return"function"===r?this.listeners[e]=[n,t]:null===n?this.listeners[e]=t:this.listeners[e].push(t),this},r.prototype.off=function(e,t){if(this.cancelled)return this;var n=this.listeners[e],r=typeof n;if("undefined"===r)throw new Error("Unknown event: "+e);if("function"===r&&n===t)this.listeners[e]=null;else if("object"===r&&null!==n){for(var i=-1,o=n.length,a=0;o>a;++a)if(n[a]===t){i=a;break}-1!==i&&(n.splice(i,1),2===o&&(this.listeners[e]=n[0]))}return this},r.prototype.cancel=function(){this.cancelled||(this.cancelled=!0,this.emit("cancel",this),this.listeners=null,this.doFilter=null)},r.prototype.send=function(e,t,n){this.cancelled||null!==this.doFilter&&!this.doFilter(t,e,n,this)||(++this.messageCount,this.emit("message",t,e,n,this),this.messageCount===this.messageLimit&&this.cancel())},r.prototype.emit=function(e){var t=this.listeners[e];if(null!==t){var n=arguments.length;if("function"==typeof t)return void(5===n?t(arguments[1],arguments[2],arguments[3],arguments[4]):t(arguments[1]));for(var r=0,i=t.length;i>r;++r)5===n?t[r](arguments[1],arguments[2],arguments[3],arguments[4]):t[r](arguments[1])}}}),define("h5.pubsub/Sandbox",["require","exports","module"],function(e,t,n){function r(e){this.broker=e,this.subscriptions={},this.removeSubscription=this.removeSubscription.bind(this)}n.exports=r,r.prototype.destroy=function(){var e=this.subscriptions;null!==e&&Object.keys(e).forEach(function(t){e[t].cancel()}),this.subscriptions=null,this.broker=null},r.prototype.sandbox=function(){return new r(this)},r.prototype.publish=function(e,t,n){return this.broker.publish(e,t,n),this},r.prototype.subscribe=function(e,t){var n=this.broker.subscribe(e,t);return n.on("cancel",this.removeSubscription),this.subscriptions[n.getId()]=n,n},r.prototype.unsubscribe=function(e){var t=[],n=this.subscriptions;for(var r in n)n.hasOwnProperty(r)&&n[r].getTopic()===e&&t.push(r);for(var i=0,o=t.length;o>i;++i)n[t[i]].cancel();return this},r.prototype.removeSubscription=function(e){delete this.subscriptions[e.getId()]}}),define("h5.pubsub/MessageBroker",["require","exports","module","./Subscriptions","./Subscription","./Sandbox"],function(e,t,n){function r(){this.subscriptions=new i(this),this.nextSubscriptionId=0,this.listeners={subscribe:[],cancel:[],"new topic":[],"empty topic":[],message:[]}}var i=e("./Subscriptions"),o=e("./Subscription"),a=e("./Sandbox");n.exports=r,r.prototype.destroy=function(){this.subscriptions.destroy(),this.subscriptions=null,this.listeners=null},r.prototype.sandbox=function(){return new a(this)},r.prototype.publish=function(e,t,n){return"undefined"==typeof n&&(n={}),this.emit("message",e,t,n),this.subscriptions.send(e,t,n),this},r.prototype.subscribe=function(e,t){var n=new o(this.getNextSubscriptionId(),e);return"function"==typeof t&&n.on("message",t),this.subscriptions.add(n),this.emit("subscribe",n),n},r.prototype.unsubscribe=function(e){return this.subscriptions.remove(e),this},r.prototype.count=function(){var e={};if(null===this.subscriptions)return e;var t="";return this.subscriptions.count(t,e),e},r.prototype.on=function(e,t){var n=this.listeners[e],r=typeof n;if("undefined"===r)throw new Error("Unknown event: "+e);return n.push(t),this},r.prototype.off=function(e,t){var n=this.listeners[e],r=typeof n;if("undefined"===r)throw new Error("Unknown event: "+e);var i=n.indexOf(t);return-1!==i&&n.splice(i,1),this},r.prototype.emit=function(e,t){var n=this.listeners[e],r=typeof n;if("undefined"===r)throw new Error("Unknown event: "+e);if(!n.length)return this;var i=arguments.length;i>4&&(t=Array.prototype.slice.call(arguments),t.shift());for(var o=0,a=n.length;a>o;++o){var s=n[o];switch(i){case 4:s(arguments[1],arguments[2],arguments[3]);break;case 3:s(arguments[1],arguments[2]);break;case 2:s(arguments[1]);break;default:s.apply(null,t)}}return this},r.prototype.getNextSubscriptionId=function(){return(this.nextSubscriptionId++).toString(36)}}),define("app/broker",["h5.pubsub/MessageBroker"],function(e){var t=new e;return t.on("message",function(e,t){}),window.broker=t,t}),define("app/i18n",["underscore","moment","select2","app/broker"],function(e,t,n,r){function i(e,t,n){try{return c[e][t](n)}catch(i){if(c[e]&&c[e][t])throw i;return r.publish("i18n.missingKey",{domain:e,key:t}),t}}function o(e,t,n){c[e]=t,"string"==typeof n&&l.push(n),r.publish("i18n.registered",{domain:e,keys:t,moduleId:n})}function a(o,a){var s="en";e.isObject(i.config)&&(s=i.config.locale,i.config.locale=o),l.forEach(require.undef);var u=[].concat(l);"en"!==o&&u.unshift("moment-lang/"+o),u.unshift("select2-lang/"+o),require(u,function(){t.locale(o),n.lang(o),r.publish("i18n.reloaded",{oldLocale:s,newLocale:o}),e.isFunction(a)&&a()})}function s(e,t,n){function r(){return i(e,t,n)}return r.toString=r,r}function u(e,t){return"undefined"!=typeof c[e]&&"function"==typeof c[e][t]}var c={},l=[];return i.config=null,i.translate=i,i.register=o,i.reload=a,i.bound=s,i.has=u,window.i18n=i,i});var io="undefined"==typeof module?{}:module.exports;!function(){!function(e,t){var n=e;n.version="0.9.16",n.protocol=1,n.transports=[],n.j=[],n.sockets={},n.connect=function(e,r){var i,o,a=n.util.parseUri(e);t&&t.location&&(a.protocol=a.protocol||t.location.protocol.slice(0,-1),a.host=a.host||(t.document?t.document.domain:t.location.hostname),a.port=a.port||t.location.port),i=n.util.uniqueUri(a);var s={host:a.host,secure:"https"==a.protocol,port:a.port||("https"==a.protocol?443:80),query:a.query||""};return n.util.merge(s,r),(s["force new connection"]||!n.sockets[i])&&(o=new n.Socket(s)),!s["force new connection"]&&o&&(n.sockets[i]=o),o=o||n.sockets[i],o.of(a.path.length>1?a.path:"")}}("object"==typeof module?module.exports:this.io={},this),function(e,t){var n=e.util={},r=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];n.parseUri=function(e){for(var t=r.exec(e||""),n={},o=14;o--;)n[i[o]]=t[o]||"";return n},n.uniqueUri=function(e){var n=e.protocol,r=e.host,i=e.port;return"document"in t?(r=r||document.domain,i=i||("https"==n&&"https:"!==document.location.protocol?443:document.location.port)):(r=r||"localhost",i||"https"!=n||(i=443)),(n||"http")+"://"+r+":"+(i||80)},n.query=function(e,t){var r=n.chunkQuery(e||""),i=[];n.merge(r,n.chunkQuery(t||""));for(var o in r)r.hasOwnProperty(o)&&i.push(o+"="+r[o]);return i.length?"?"+i.join("&"):""},n.chunkQuery=function(e){for(var t,n={},r=e.split("&"),i=0,o=r.length;o>i;++i)t=r[i].split("="),t[0]&&(n[t[0]]=t[1]);return n};var o=!1;n.load=function(e){return"document"in t&&"complete"===document.readyState||o?e():void n.on(t,"load",e,!1)},n.on=function(e,t,n,r){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener&&e.addEventListener(t,n,r)},n.request=function(e){if(e&&"undefined"!=typeof XDomainRequest&&!n.ua.hasCORS)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!e||n.ua.hasCORS))return new XMLHttpRequest;if(!e)try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}return null},"undefined"!=typeof window&&n.load(function(){o=!0}),n.defer=function(e){return n.ua.webkit&&"undefined"==typeof importScripts?void n.load(function(){setTimeout(e,100)}):e()},n.merge=function(e,t,r,i){var o,a=i||[],s="undefined"==typeof r?2:r;for(o in t)t.hasOwnProperty(o)&&n.indexOf(a,o)<0&&("object"==typeof e[o]&&s?n.merge(e[o],t[o],s-1,a):(e[o]=t[o],a.push(t[o])));return e},n.mixin=function(e,t){n.merge(e.prototype,t.prototype)},n.inherit=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.intersect=function(e,t){for(var r=[],i=e.length>t.length?e:t,o=e.length>t.length?t:e,a=0,s=o.length;s>a;a++)~n.indexOf(i,o[a])&&r.push(o[a]);return r},n.indexOf=function(e,t,n){for(var r=e.length,n=0>n?0>n+r?0:n+r:n||0;r>n&&e[n]!==t;n++);return n>=r?-1:n},n.toArray=function(e){for(var t=[],n=0,r=e.length;r>n;n++)t.push(e[n]);return t},n.ua={},n.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var e=new XMLHttpRequest}catch(t){return!1}return void 0!=e.withCredentials}(),n.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent),n.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)}("undefined"!=typeof io?io:module.exports,this),function(e,t){function n(){}e.EventEmitter=n,n.prototype.on=function(e,n){return this.$events||(this.$events={}),this.$events[e]?t.util.isArray(this.$events[e])?this.$events[e].push(n):this.$events[e]=[this.$events[e],n]:this.$events[e]=n,this},n.prototype.addListener=n.prototype.on,n.prototype.once=function(e,t){function n(){r.removeListener(e,n),t.apply(this,arguments)}var r=this;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,n){if(this.$events&&this.$events[e]){var r=this.$events[e];if(t.util.isArray(r)){for(var i=-1,o=0,a=r.length;a>o;o++)if(r[o]===n||r[o].listener&&r[o].listener===n){i=o;break}if(0>i)return this;r.splice(i,1),r.length||delete this.$events[e]}else(r===n||r.listener&&r.listener===n)&&delete this.$events[e]}return this},n.prototype.removeAllListeners=function(e){return void 0===e?(this.$events={},this):(this.$events&&this.$events[e]&&(this.$events[e]=null),this)},n.prototype.listeners=function(e){return this.$events||(this.$events={}),this.$events[e]||(this.$events[e]=[]),t.util.isArray(this.$events[e])||(this.$events[e]=[this.$events[e]]),this.$events[e]},n.prototype.emit=function(e){if(!this.$events)return!1;var n=this.$events[e];if(!n)return!1;var r=Array.prototype.slice.call(arguments,1);if("function"==typeof n)n.apply(this,r);else{if(!t.util.isArray(n))return!1;for(var i=n.slice(),o=0,a=i.length;a>o;o++)i[o].apply(this,r)}return!0}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(exports,nativeJSON){function f(e){return 10>e?"0"+e:e}function date(e){return isFinite(e.valueOf())?e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"Z":null}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,o,a,s=gap,u=t[e];switch(u instanceof Date&&(u=date(e)),"function"==typeof rep&&(u=rep.call(t,e,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";
if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(u)){for(o=u.length,n=0;o>n;n+=1)a[n]=str(n,u)||"null";return i=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],i=str(r,u),i&&a.push(quote(r)+(gap?": ":":")+i));else for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(i=str(r,u),i&&a.push(quote(r)+(gap?": ":":")+i));return i=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,i}}if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})},JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),void 0!==r?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof JSON?JSON:void 0),function(e,t){var n=e.parser={},r=n.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],i=n.reasons=["transport not supported","client not handshaken","unauthorized"],o=n.advice=["reconnect"],a=t.JSON,s=t.util.indexOf;n.encodePacket=function(e){var t=s(r,e.type),n=e.id||"",u=e.endpoint||"",c=e.ack,l=null;switch(e.type){case"error":var d=e.reason?s(i,e.reason):"",p=e.advice?s(o,e.advice):"";(""!==d||""!==p)&&(l=d+(""!==p?"+"+p:""));break;case"message":""!==e.data&&(l=e.data);break;case"event":var f={name:e.name};e.args&&e.args.length&&(f.args=e.args),l=a.stringify(f);break;case"json":l=a.stringify(e.data);break;case"connect":e.qs&&(l=e.qs);break;case"ack":l=e.ackId+(e.args&&e.args.length?"+"+a.stringify(e.args):"")}var h=[t,n+("data"==c?"+":""),u];return null!==l&&void 0!==l&&h.push(l),h.join(":")},n.encodePayload=function(e){var t="";if(1==e.length)return e[0];for(var n=0,r=e.length;r>n;n++){var i=e[n];t+="ÔøΩ"+i.length+"ÔøΩ"+e[n]}return t};var u=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;n.decodePacket=function(e){var t=e.match(u);if(!t)return{};var n=t[2]||"",e=t[5]||"",s={type:r[t[1]],endpoint:t[4]||""};switch(n&&(s.id=n,s.ack=t[3]?"data":!0),s.type){case"error":var t=e.split("+");s.reason=i[t[0]]||"",s.advice=o[t[1]]||"";break;case"message":s.data=e||"";break;case"event":try{var c=a.parse(e);s.name=c.name,s.args=c.args}catch(l){}s.args=s.args||[];break;case"json":try{s.data=a.parse(e)}catch(l){}break;case"connect":s.qs=e||"";break;case"ack":var t=e.match(/^([0-9]+)(\+)?(.*)/);if(t&&(s.ackId=t[1],s.args=[],t[3]))try{s.args=t[3]?a.parse(t[3]):[]}catch(l){}break;case"disconnect":case"heartbeat":}return s},n.decodePayload=function(e){if("ÔøΩ"==e.charAt(0)){for(var t=[],r=1,i="";r<e.length;r++)"ÔøΩ"==e.charAt(r)?(t.push(n.decodePacket(e.substr(r+1).substr(0,i))),r+=Number(i)+1,i=""):i+=e.charAt(r);return t}return[n.decodePacket(e)]}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t){function n(e,t){this.socket=e,this.sessid=t}e.Transport=n,t.util.mixin(n,t.EventEmitter),n.prototype.heartbeats=function(){return!0},n.prototype.onData=function(e){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),""!==e){var n=t.parser.decodePayload(e);if(n&&n.length)for(var r=0,i=n.length;i>r;r++)this.onPacket(n[r])}return this},n.prototype.onPacket=function(e){return this.socket.setHeartbeatTimeout(),"heartbeat"==e.type?this.onHeartbeat():("connect"==e.type&&""==e.endpoint&&this.onConnect(),"error"==e.type&&"reconnect"==e.advice&&(this.isOpen=!1),this.socket.onPacket(e),this)},n.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var e=this;this.closeTimeout=setTimeout(function(){e.onDisconnect()},this.socket.closeTimeout)}},n.prototype.onDisconnect=function(){return this.isOpen&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},n.prototype.onConnect=function(){return this.socket.onConnect(),this},n.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},n.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},n.prototype.packet=function(e){this.send(t.parser.encodePacket(e))},n.prototype.onHeartbeat=function(){this.packet({type:"heartbeat"})},n.prototype.onOpen=function(){this.isOpen=!0,this.clearCloseTimeout(),this.socket.onOpen()},n.prototype.onClose=function(){this.isOpen=!1,this.socket.onClose(),this.onDisconnect()},n.prototype.prepareUrl=function(){var e=this.socket.options;return this.scheme()+"://"+e.host+":"+e.port+"/"+e.resource+"/"+t.protocol+"/"+this.name+"/"+this.sessid},n.prototype.ready=function(e,t){t.call(this)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function r(e){if(this.options={port:80,secure:!1,document:"document"in n?document:!1,resource:"socket.io",transports:t.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!1,"auto connect":!0,"flash policy port":10843,manualFlush:!1},t.util.merge(this.options,e),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||t.util.ua.hasCORS)){var r=this;t.util.on(n,"beforeunload",function(){r.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function i(){}e.Socket=r,t.util.mixin(r,t.EventEmitter),r.prototype.of=function(e){return this.namespaces[e]||(this.namespaces[e]=new t.SocketNamespace(this,e),""!==e&&this.namespaces[e].packet({type:"connect"})),this.namespaces[e]},r.prototype.publish=function(){this.emit.apply(this,arguments);var e;for(var t in this.namespaces)this.namespaces.hasOwnProperty(t)&&(e=this.of(t),e.$emit.apply(e,arguments))},r.prototype.handshake=function(e){function n(t){t instanceof Error?(r.connecting=!1,r.onError(t.message)):e.apply(null,t.split(":"))}var r=this,o=this.options,a=["http"+(o.secure?"s":"")+":/",o.host+":"+o.port,o.resource,t.protocol,t.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!t.util.ua.hasCORS){var s=document.getElementsByTagName("script")[0],u=document.createElement("script");u.src=a+"&jsonp="+t.j.length,s.parentNode.insertBefore(u,s),t.j.push(function(e){n(e),u.parentNode.removeChild(u)})}else{var c=t.util.request();c.open("GET",a,!0),this.isXDomain()&&(c.withCredentials=!0),c.onreadystatechange=function(){4==c.readyState&&(c.onreadystatechange=i,200==c.status?n(c.responseText):403==c.status?r.onError(c.responseText):(r.connecting=!1,r.onError(c.responseText)))},c.send(null)}},r.prototype.getTransport=function(e){for(var n,r=e||this.transports,i=0;n=r[i];i++)if(t.Transport[n]&&t.Transport[n].check(this)&&(!this.isXDomain()||t.Transport[n].xdomainCheck(this)))return new t.Transport[n](this,this.sessionid);return null},r.prototype.connect=function(e){if(this.connecting)return this;var n=this;return n.connecting=!0,this.handshake(function(r,i,o,a){function s(e){return n.transport&&n.transport.clearTimeouts(),n.transport=n.getTransport(e),n.transport?void n.transport.ready(n,function(){n.connecting=!0,n.publish("connecting",n.transport.name),n.transport.open(),n.options["connect timeout"]&&(n.connectTimeoutTimer=setTimeout(function(){if(!n.connected&&(n.connecting=!1,n.options["try multiple transports"])){for(var e=n.transports;e.length>0&&e.splice(0,1)[0]!=n.transport.name;);e.length?s(e):n.publish("connect_failed")}},n.options["connect timeout"]))}):n.publish("connect_failed")}n.sessionid=r,n.closeTimeout=1e3*o,n.heartbeatTimeout=1e3*i,n.transports||(n.transports=n.origTransports=a?t.util.intersect(a.split(","),n.options.transports):n.options.transports),n.setHeartbeatTimeout(),s(n.transports),n.once("connect",function(){clearTimeout(n.connectTimeoutTimer),e&&"function"==typeof e&&e()})}),this},r.prototype.setHeartbeatTimeout=function(){if(clearTimeout(this.heartbeatTimeoutTimer),!this.transport||this.transport.heartbeats()){var e=this;this.heartbeatTimeoutTimer=setTimeout(function(){e.transport.onClose()},this.heartbeatTimeout)}},r.prototype.packet=function(e){return this.connected&&!this.doBuffer?this.transport.packet(e):this.buffer.push(e),this},r.prototype.setBuffer=function(e){this.doBuffer=e,!e&&this.connected&&this.buffer.length&&(this.options.manualFlush||this.flushBuffer())},r.prototype.flushBuffer=function(){this.transport.payload(this.buffer),this.buffer=[]},r.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this},r.prototype.disconnectSync=function(){var e=t.util.request(),n=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,t.protocol,"",this.sessionid].join("/")+"/?disconnect=1";e.open("GET",n,!1),e.send(null),this.onDisconnect("booted")},r.prototype.isXDomain=function(){var e=n.location.port||("https:"==n.location.protocol?443:80);return this.options.host!==n.location.hostname||this.options.port!=e},r.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},r.prototype.onOpen=function(){this.open=!0},r.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},r.prototype.onPacket=function(e){this.of(e.endpoint).onPacket(e)},r.prototype.onError=function(e){e&&e.advice&&"reconnect"===e.advice&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",e&&e.reason?e.reason:e)},r.prototype.onDisconnect=function(e){var t=this.connected,n=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(t||n)&&(this.transport.close(),this.transport.clearTimeouts(),t&&(this.publish("disconnect",e),"booted"!=e&&this.options.reconnect&&!this.reconnecting&&this.reconnect()))},r.prototype.reconnect=function(){function e(){if(n.connected){for(var e in n.namespaces)n.namespaces.hasOwnProperty(e)&&""!==e&&n.namespaces[e].packet({type:"connect"});n.publish("reconnect",n.transport.name,n.reconnectionAttempts)}clearTimeout(n.reconnectionTimer),n.removeListener("connect_failed",t),n.removeListener("connect",t),n.reconnecting=!1,delete n.reconnectionAttempts,delete n.reconnectionDelay,delete n.reconnectionTimer,delete n.redoTransports,n.options["try multiple transports"]=i}function t(){return n.reconnecting?n.connected?e():n.connecting&&n.reconnecting?n.reconnectionTimer=setTimeout(t,1e3):void(n.reconnectionAttempts++>=r?n.redoTransports?(n.publish("reconnect_failed"),e()):(n.on("connect_failed",t),n.options["try multiple transports"]=!0,n.transports=n.origTransports,n.transport=n.getTransport(),n.redoTransports=!0,n.connect()):(n.reconnectionDelay<o&&(n.reconnectionDelay*=2),n.connect(),n.publish("reconnecting",n.reconnectionDelay,n.reconnectionAttempts),n.reconnectionTimer=setTimeout(t,n.reconnectionDelay))):void 0}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var n=this,r=this.options["max reconnection attempts"],i=this.options["try multiple transports"],o=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(t,this.reconnectionDelay),this.on("connect",t)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(e,t){this.socket=e,this.name=t||"",this.flags={},this.json=new r(this,"json"),this.ackPackets=0,this.acks={}}function r(e,t){this.namespace=e,this.name=t}e.SocketNamespace=n,t.util.mixin(n,t.EventEmitter),n.prototype.$emit=t.EventEmitter.prototype.emit,n.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},n.prototype.packet=function(e){return e.endpoint=this.name,this.socket.packet(e),this.flags={},this},n.prototype.send=function(e,t){var n={type:this.flags.json?"json":"message",data:e};return"function"==typeof t&&(n.id=++this.ackPackets,n.ack=!0,this.acks[n.id]=t),this.packet(n)},n.prototype.emit=function(e){var t=Array.prototype.slice.call(arguments,1),n=t[t.length-1],r={type:"event",name:e};return"function"==typeof n&&(r.id=++this.ackPackets,r.ack="data",this.acks[r.id]=n,t=t.slice(0,t.length-1)),r.args=t,this.packet(r)},n.prototype.disconnect=function(){return""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},n.prototype.onPacket=function(e){function n(){r.packet({type:"ack",args:t.util.toArray(arguments),ackId:e.id})}var r=this;switch(e.type){case"connect":this.$emit("connect");break;case"disconnect":""===this.name?this.socket.onDisconnect(e.reason||"booted"):this.$emit("disconnect",e.reason);break;case"message":case"json":var i=["message",e.data];"data"==e.ack?i.push(n):e.ack&&this.packet({type:"ack",ackId:e.id}),this.$emit.apply(this,i);break;case"event":var i=[e.name].concat(e.args);"data"==e.ack&&i.push(n),this.$emit.apply(this,i);break;case"ack":this.acks[e.ackId]&&(this.acks[e.ackId].apply(this,e.args),delete this.acks[e.ackId]);break;case"error":e.advice?this.socket.onError(e):"unauthorized"==e.reason?this.$emit("connect_failed",e.reason):this.$emit("error",e.reason)}},r.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},r.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function r(){t.Transport.apply(this,arguments)}e.websocket=r,t.util.inherit(r,t.Transport),r.prototype.name="websocket",r.prototype.open=function(){var e,r=t.util.query(this.socket.options.query),i=this;return e||(e=n.MozWebSocket||n.WebSocket),this.websocket=new e(this.prepareUrl()+r),this.websocket.onopen=function(){i.onOpen(),i.socket.setBuffer(!1)},this.websocket.onmessage=function(e){i.onData(e.data)},this.websocket.onclose=function(){i.onClose(),i.socket.setBuffer(!0)},this.websocket.onerror=function(e){i.onError(e)},this},r.prototype.send=t.util.ua.iDevice?function(e){var t=this;return setTimeout(function(){t.websocket.send(e)},0),this}:function(e){return this.websocket.send(e),this},r.prototype.payload=function(e){for(var t=0,n=e.length;n>t;t++)this.packet(e[t]);return this},r.prototype.close=function(){return this.websocket.close(),this},r.prototype.onError=function(e){this.socket.onError(e)},r.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},r.check=function(){return"WebSocket"in n&&!("__addTask"in WebSocket)||"MozWebSocket"in n},r.xdomainCheck=function(){return!0},t.transports.push("websocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t,n){function r(e){e&&(t.Transport.apply(this,arguments),this.sendBuffer=[])}function i(){}e.XHR=r,t.util.inherit(r,t.Transport),r.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},r.prototype.payload=function(e){for(var n=[],r=0,i=e.length;i>r;r++)n.push(t.parser.encodePacket(e[r]));this.send(t.parser.encodePayload(n))},r.prototype.send=function(e){return this.post(e),this},r.prototype.post=function(e){function t(){4==this.readyState&&(this.onreadystatechange=i,o.posting=!1,200==this.status?o.socket.setBuffer(!1):o.onClose())}function r(){this.onload=i,o.socket.setBuffer(!1)}var o=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),n.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=r:this.sendXHR.onreadystatechange=t,this.sendXHR.send(e)},r.prototype.close=function(){return this.onClose(),this},r.prototype.request=function(e){var n=t.util.request(this.socket.isXDomain()),r=t.util.query(this.socket.options.query,"t="+ +new Date);if(n.open(e||"GET",this.prepareUrl()+r,!0),"POST"==e)try{n.setRequestHeader?n.setRequestHeader("Content-type","text/plain;charset=UTF-8"):n.contentType="text/plain"}catch(i){}return n},r.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},r.check=function(e,r){try{var i=t.util.request(r),o=n.XDomainRequest&&i instanceof XDomainRequest,a=e&&e.options&&e.options.secure?"https:":"http:",s=n.location&&a!=n.location.protocol;if(i&&(!o||!s))return!0}catch(u){}return!1},r.xdomainCheck=function(e){return r.check(e,!0)}}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t,n){function r(){t.Transport.XHR.apply(this,arguments)}function i(){}e["xhr-polling"]=r,t.util.inherit(r,t.Transport.XHR),t.util.merge(r,t.Transport.XHR),r.prototype.name="xhr-polling",r.prototype.heartbeats=function(){return!1},r.prototype.open=function(){var e=this;return t.Transport.XHR.prototype.open.call(e),!1},r.prototype.get=function(){function e(){4==this.readyState&&(this.onreadystatechange=i,200==this.status?(o.onData(this.responseText),o.get()):o.onClose())}function t(){this.onload=i,this.onerror=i,o.retryCounter=1,o.onData(this.responseText),o.get()}function r(){o.retryCounter++,!o.retryCounter||o.retryCounter>3?o.onClose():o.get()}if(this.isOpen){var o=this;this.xhr=this.request(),n.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=t,this.xhr.onerror=r):this.xhr.onreadystatechange=e,this.xhr.send(null)}},r.prototype.onClose=function(){if(t.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=i;try{this.xhr.abort()}catch(e){}this.xhr=null}},r.prototype.ready=function(e,n){var r=this;t.util.defer(function(){n.call(r)})},t.transports.push("xhr-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),"function"==typeof define&&define.amd&&define("socket.io",[],function(){return io})}(),define("app/core/SocketSandbox",["underscore"],function(e){function t(e){if(this.socket=e,this.listeners={destroy:[]},e instanceof t){var n=this;this.socket.on("destroy",function(){n.destroy()})}}return t.prototype.destroy=function(){var t=this.listeners;if(null!=t){var n=t.destroy;if(e.isArray(n))for(var r=0,i=n.length;i>r;++r)n[r].call(this);delete this.listeners.destroy;for(var o=Object.keys(t),a=0,s=o.length;s>a;++a)for(var u=o[a],c=t[u],l=0,d=c.length;d>l;++l)this.socket.off(u,c[l]);this.listeners=null,this.socket=null}},t.prototype.sandbox=function(){return new t(this)},t.prototype.getId=function(){return this.socket.getId()},t.prototype.isConnected=function(){return this.socket.isConnected()},t.prototype.on=function(t,n){var r=this.listeners[t];return e.isUndefined(r)&&(r=this.listeners[t]=[]),r.push(n),"destroy"!==t&&this.socket.on(t,n),this},t.prototype.off=function(t,n){var r=this.listeners[t];if(e.isUndefined(r))return this;if(e.isUndefined(n))delete this.listeners[t];else{var i=e.indexOf(r,n);if(-1===i)return this;r.splice(i,1),0===r.length&&delete this.listeners[t]}return"destroy"!==t&&this.socket.off(t,n),this},t.prototype.emit=function(){var e=Array.prototype.slice.call(arguments),t=e.length-1;return e[t]=this.wrapCallback(e[t]),this.socket.emit.apply(this.socket,e),this},t.prototype.send=function(e,t){return this.socket.send(e,this.wrapCallback(t)),this},t.prototype.wrapCallback=function(t){if(!e.isFunction(t))return t;var n=this;return function(){null!==n.socket&&t.apply(this,arguments)}},t}),define("app/core/Socket",["app/core/SocketSandbox"],function(e){function t(e){this.sio=e}return t.prototype.sandbox=function(){return new e(this)},t.prototype.getId=function(){return this.sio.socket.sessionid},t.prototype.isConnected=function(){return this.sio.socket.connected},t.prototype.connect=function(){this.isConnected()||this.sio.socket.connecting||this.sio.socket.connect()},t.prototype.reconnect=function(){this.isConnected()||this.sio.socket.reconnecting||this.sio.socket.reconnect()},t.prototype.on=function(e,t){return this.sio.addListener(e,t),this},t.prototype.off=function(e,t){return"undefined"==typeof t?this.sio.removeAllListeners(e):this.sio.removeListener(e,t),this},t.prototype.emit=function(){return this.sio.json.emit.apply(this.sio.json,arguments),this},t.prototype.send=function(e,t){return this.sio.json.send(e,t),this},t}),define("app/socket",["underscore","socket.io","app/broker","app/core/Socket"],function(e,t,n,r){function i(e){""!==e||a||(o.off("error",i),o.reconnect())}var o=new r(t.connect("",{resource:"socket.io",transports:["websocket"],"auto connect":!1,"connect timeout":5e3,reconnect:!0,"reconnection delay":e.random(100,500),"reconnection limit":e.random(4e3,8e3),"max reconnection attempts":1/0})),a=!1,s=!1;return o.on("connecting",function(){n.publish("socket.connecting",!1)}),o.on("connect",function(){a||(a=!0,n.publish("socket.connected"))}),o.on("connect_failed",function(){n.publish("socket.connectFailed",!1)}),o.on("message",function(e){n.publish("socket.message",e)}),o.on("disconnect",function(){n.publish("socket.disconnected")}),o.on("reconnecting",function(){s=!0,n.publish("socket.connecting",!0)}),o.on("reconnect",function(){s=!1,n.publish("socket.connected",!0)}),o.on("reconnect_failed",function(){s=!1,n.publish("socket.connectFailed",!0)}),o.on("error",i),o.on("error",function(){s&&n.publish("socket.connectFailed",!0)}),window.socket=o,o}),define("app/pubsub",["underscore","h5.pubsub/MessageBroker","app/broker","app/socket"],function(e,t,n,r){function i(t,r,i){if(r)return void n.publish("pubsub.subscribeFailed",{err:r,topics:t});i.length>0&&n.publish("pubsub.subscribeNotAllowed",{topics:i});var o=e.difference(t,i);o.length>0&&n.publish("pubsub.subscribed",{topics:o})}function o(){r.isConnected()&&r.emit("pubsub.subscribe",c,i.bind(null,c)),c=[],l=null}function a(){var e=Object.keys(u);r.isConnected()&&r.emit("pubsub.unsubscribe",e),u={},d=null,n.publish("pubsub.unsubscribed",{topics:e})}var s=new t,u={},c=[],l=null,d=null;return s.on("new topic",function(e){"undefined"!=typeof u[e]&&delete u[e],r.isConnected()&&(c.push(e),null===l&&(l=setTimeout(o,0)))}),s.on("empty topic",function(e){r.isConnected()&&(u[e]=!0,null===d&&(d=setTimeout(a,0)))}),s.on("message",function(e,t,i){i.remote!==!0&&r.emit("pubsub.publish",e,t,i,function(r){r?n.publish("pubsub.publishFailed",{err:r,topic:e,message:t,meta:i}):n.publish("pubsub.published",{topic:e,message:t,meta:i})})}),r.on("connect",function(){var e=Object.keys(s.count());e.length&&r.emit("pubsub.subscribe",e,i.bind(null,e))}),r.on("pubsub.message",function(e,t){s.publish(e,t,{remote:!0})}),window.pubsub=s,s}),define("app/core/util",["underscore"],function(e){var t={};return t.inherits=function(t,n){e.extend(t,n);var r=function(){this.constructor=t};return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},t.decodeUriComponent=function(e){return decodeURIComponent(e.replace(/\+/g," "))},t.defineSandboxedProperty=function(t,n,r){e.isObject(t._sandboxedProperties)||(t._sandboxedProperties={});var i=t._sandboxedProperties,o=t.options[n];return e.isObject(o)?(i[n]=o,t[n]=o,void delete t.options[n]):(i[n]=null,void Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:function(){return null===i[n]&&(i[n]=r.sandbox()),i[n]},set:function(e){this[n]=e}}))},t.cleanupSandboxedProperties=function(t){var n=t._sandboxedProperties;if(e.isObject(n)){var r=Object.keys(n);r.forEach(function(t){var r=n[t];r&&e.isFunction(r.destroy)&&r.destroy()}),t._sandboxedProperties=null}},t.subscribeTopics=function(t,n,r,i){if(e.isFunction(r)&&(r=r.call(t)),e.isObject(r)&&e.size(r)){var o=t[n];e.each(r,function(n,r){e.isString(n)&&(n=t[n]),i&&(n=n.bind(t)),o.subscribe(r,n)})}},t.escapeRegExp=function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},t}),define("app/core/View",["underscore","jquery","backbone.layout","app/broker","app/socket","app/pubsub","./util"],function(e,t,n,r,i,o,a){function s(t){this.idPrefix=e.uniqueId("v"),this.options=t||{},this.timers={},this.promises=[],a.defineSandboxedProperty(this,"broker",r),a.defineSandboxedProperty(this,"pubsub",o),a.defineSandboxedProperty(this,"socket",i),n.call(this,t),a.subscribeTopics(this,"broker",this.localTopics,!0),a.subscribeTopics(this,"pubsub",this.remoteTopics,!0)}return a.inherits(s,n),s.prototype.delegateEvents=function(t){return t||(t=e.result(this,"events")),t?(this.undelegateEvents(),void Object.keys(t).forEach(function(n){var r=t[n];if(e.isFunction(r)||(r=this[r]),e.isFunction(r)){var i=n.match(/^(\S+)\s*(.*)$/),o=i[1]+".delegateEvents"+this.cid,a=i[2];""===a?this.$el.on(o,r.bind(this)):(e.isString(this.idPrefix)&&(a=a.replace(/#-/g,"#"+this.idPrefix+"-")),this.$el.on(o,a,r.bind(this)))}},this)):this},s.prototype.cleanup=function(){this.destroy(),this.cleanupSelect2(),a.cleanupSandboxedProperties(this),e.isObject(this.timers)&&(e.each(this.timers,clearTimeout),this.timers=null),this.cancelRequests()},s.prototype.destroy=function(){},s.prototype.cleanupSelect2=function(){var e=this;this.$(".select2-container").each(function(){e.$("#"+this.id.replace("s2id_","")).select2("destroy")})},s.prototype.serialize=function(){return{idPrefix:this.idPrefix}},s.prototype.isRendered=function(){return this.hasRendered===!0},s.prototype.isDetached=function(){return!t.contains(document.documentElement,this.el)},s.prototype.ajax=function(e){return this.promised(t.ajax(e))},s.prototype.promised=function(t){if(!t||!e.isFunction(t.abort))return t;this.promises.push(t);var n=this;return t.always(function(){Array.isArray(n.promises)&&n.promises.splice(n.promises.indexOf(t),1)}),t},s.prototype.cancelRequests=function(){this.promises.forEach(function(e){e.abort()}),this.promises=[]},s.prototype.cancelAnimations=function(e,t){this.$(":animated").stop(e!==!1,t!==!1)},s.prototype.$id=function(t){var n="#";return e.isString(this.idPrefix)&&(n+=this.idPrefix+"-"),this.$(n+t)},s}),define("app/core/templates/messages",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<ol class="messages"></ol>\n')}();return buf.join("")}}),define("app/core/templates/message",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="message message-',type,'">',text,"</div>\n")}();return buf.join("")}}),define("app/core/views/MessagesView",["underscore","jquery","app/i18n","../View","app/core/templates/messages","app/core/templates/message"],function(e,t,n,r,i,o){var a=0,s=r.extend({template:i,events:{"click .message":function(e){e.currentTarget.parentNode===this.el&&e.currentTarget.getAttribute("data-view")===this.idPrefix&&this.hide(t(e.currentTarget))}},localTopics:{"router.executing":function(){this.hide()}}});return s.prototype.initialize=function(){this.$loadingMessage=null,this.loadingTimer=null,this.loadingCounter=0,this.hideTimers=[],this.loading=this.loading.bind(this),this.loaded=this.loaded.bind(this)},s.prototype.destroy=function(){this.$loadingMessage=null,null!==this.loadingTimer&&(clearTimeout(this.loadingTimer),this.loadingTimer=null),this.hideTimers.length>0&&(this.hideTimers.forEach(clearTimeout),this.hideTimers=null),this.$('.message[data-view="'+this.idPrefix+'"]').remove()},s.prototype.show=function(e){var n=t(o({type:e.type||"info",text:e.text}));return this.$el.append(n.attr("data-view",this.idPrefix)),this.moveDown(n),n.attr("data-top",n.position().top).css("margin-left",-(n.width()/2)+"px"),e.immediate?n.css("opacity",1):n.animate({opacity:1}),this.scheduleHiding(n,e.time),n},s.prototype.hide=function(e,t){if(e){if(e.hasClass("message-hiding"))return;e.addClass("message-hiding")}else e=this.$('.message[data-view="'+this.idPrefix+'"]'),this.$loadingMessage=null;1===e.length&&(this.moveUp(e),this.removeHideTimer(e)),t?e.remove():e.animate({opacity:0},function(){e.remove()})},s.prototype.loading=function(){this.loadingCounter+=1,null===this.loadingTimer&&(this.loadingTimer=setTimeout(this.showLoadingMessage.bind(this),a))},s.prototype.loaded=function(){this.hideLoadingMessage()},s.prototype.loadingFailed=function(t){this.hideLoadingMessage(),this.show({type:"error",text:e.isString(t)?t:n("core","MSG:LOADING_FAILURE")})},s.prototype.showLoadingMessage=function(){this.loadingTimer=null,null===this.$loadingMessage&&(this.$loadingMessage=this.show({type:"warning",text:'<i class="fa fa-spinner fa-spin"></i><span>'+n("core","MSG:LOADING")+"</span>",immediate:!0}))},s.prototype.hideLoadingMessage=function(){this.loadingCounter>0&&--this.loadingCounter,0===this.loadingCounter&&(null!==this.loadingTimer&&(clearTimeout(this.loadingTimer),this.loadingTimer=null),null!==this.$loadingMessage&&(this.hide(this.$loadingMessage),this.$loadingMessage=null))},s.prototype.moveDown=function(e){this.moveTopBy(this.$('.message[data-view="'+this.idPrefix+'"]'),e,this.getMoveOffset(e))},s.prototype.moveUp=function(e){this.moveTopBy(e.prevAll(".message"),e,-this.getMoveOffset(e))},s.prototype.moveTopBy=function(e,n,r){e.each(function(){if(this!==n[0]){var e=t(this),i=parseInt(e.attr("data-top"),10)+r;e.attr("data-top",i),e.animate({top:i+"px"})}})},s.prototype.getMoveOffset=function(e){return e.outerHeight()+8},s.prototype.scheduleHiding=function(t,n){if(e.isNumber(n)){1e3>n&&(n=1e3);var r=setTimeout(this.hide.bind(this,t),n);t.data("hideTimer",r),this.hideTimers.push(r)}},s.prototype.removeHideTimer=function(t){var n=t.data("hideTimer");e.isUndefined(n)||(clearTimeout(n),t.data("hideTimer",void 0),this.hideTimers.splice(this.hideTimers.indexOf(n),1))},s}),define("app/core/templates/dialogContainer",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="modal fade viewport-dialog" tabindex="-1">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close cancel">√ó</button>\n        <h3 class="modal-title"></h3>\n      </div>\n      <div class="modal-body"></div>\n    </div>\n  </div>\n</div>\n')}();return buf.join("")}}),define("app/core/Viewport",["require","underscore","jquery","./View","./util","./views/MessagesView","app/core/templates/dialogContainer"],function(e,t,n,r,i,o,a){function s(e){r.call(this,e),this.msg=e.messagesView?e.messagesView:new o({el:this.el}),this.document=e.document||window.document,this.layouts={},this.currentLayout=null,this.currentLayoutName=null,this.currentPage=null,this.$dialog=null,this.dialogQueue=[],this.currentDialog=null,this.closeDialog=this.closeDialog.bind(this),this.$el.on("click",".viewport-dialog .cancel",this.closeDialog)
}var u=function(e){return new e};return i.inherits(s,r),s.prototype.cleanup=function(){this.broker.destroy(),this.msg.remove(),this.$dialog.remove(),this.currentPage&&this.currentPage.remove(),this.currentLayout&&this.currentLayout.remove(),this.currentDialog&&this.currentDialog.remove(),t.invoke(this.dialogQueue.filter(t.isObject),"remove"),this.$el.off("click",".viewport-dialog .cancel",this.closeDialog),this.broker=null,this.msg=null,this.$dialog=null,this.currentLayout=null,this.currentDialog=null,this.dialogQueue=null,this.layouts=null},s.prototype.afterRender=function(){return null!==this.$dialog?this.closeDialog():(this.$dialog=n(a()).appendTo(this.el).modal({show:!1,backdrop:!0}),this.$dialog.on("shown.bs.modal",this.onDialogShown.bind(this)),void this.$dialog.on("hidden.bs.modal",this.onDialogHidden.bind(this)))},s.prototype.registerLayout=function(e,t){return this.layouts[e]=t,this},s.prototype.loadPage=function(n,r){this.msg.loading(),t.isFunction(r)||(r=u);var i=this;e([].concat(n),function(){i.showPage(r.apply(null,arguments)),i.msg.loaded()})},s.prototype.showPage=function(e){function r(){return n.when.apply(n,t.map(arguments,e.promised,e))}function i(){null!==s.currentPage&&s.currentPage.remove(),s.currentPage=e;var n=s.setLayout(a);t.isFunction(n.setUpPage)&&n.setUpPage(e),t.isFunction(e.setUpLayout)&&e.setUpLayout(n),t.isObject(e.view)&&e.setView(e.view),n.setView(n.pageContainerSelector,e),s.isRendered()?n.isRendered()?e.render():n.render():s.render()}function o(){e.remove()}var a=t.result(e,"layoutName");if(!t.isObject(this.layouts[a]))throw new Error("Unknown layout: `"+a+"`");var s=this;t.isFunction(e.load)?e.load(r).then(i,o):i()},s.prototype.showDialog=function(e,n){if(null!==this.currentDialog)return this.dialogQueue.push(e,n),this;var r=e.afterRender,i=this;e.afterRender=function(){var n=i.$dialog.find(".modal-body");n.children()[0]!==e.el&&n.empty().append(e.el),i.$dialog.modal("show"),t.isFunction(r)&&r.apply(e,arguments)},this.currentDialog=e;var o=this.$dialog.find(".modal-header");return n?(o.find(".modal-title").text(n),o.show()):o.hide(),e.dialogClassName&&this.$dialog.addClass(t.result(e,"dialogClassName")),e.render(),this},s.prototype.closeDialog=function(e){return null===this.currentDialog?this:(this.$dialog.modal("hide"),e&&e.preventDefault(),this)},s.prototype.closeAllDialogs=function(){this.dialogQueue=[],this.closeDialog()},s.prototype.setLayout=function(e){if(e===this.currentLayoutName)return t.isFunction(this.currentLayout.reset)&&this.currentLayout.reset(),this.currentLayout;var n=this.layouts[e],r=this.options.selector||"";return t.isObject(this.currentLayout)&&this.removeView(r),this.currentLayoutName=e,this.currentLayout=n(),this.setView(r,this.currentLayout),this.currentLayout},s.prototype.onDialogShown=function(){this.currentDialog.$("[autofocus]").focus(),t.isFunction(this.currentDialog.onDialogShown)&&this.currentDialog.onDialogShown(this),this.broker.publish("viewport.dialog.shown",this.currentDialog)},s.prototype.onDialogHidden=function(){this.currentDialog.dialogClassName&&this.$dialog.removeClass(t.result(this.currentDialog,"dialogClassName")),t.isFunction(this.currentDialog.remove)&&(this.currentDialog.remove(),this.broker.publish("viewport.dialog.hidden")),this.currentDialog=null,this.dialogQueue.length&&this.showDialog(this.dialogQueue.shift(),this.dialogQueue.shift())},s}),define("app/viewport",["app/broker","app/core/Viewport"],function(e,t){var n=new t({el:document.body,selector:"#app-viewport"});return e.subscribe("router.executing",function(){window.scrollTo(0,0)}),window.viewport=n,n}),define("h5.rql/Term",["require","exports","module"],function(e,t,n){function r(e,t){this.name=e||null,this.args=t||[]}n.exports=r}),define("h5.rql/specialTerms",["require","exports","module"],function(e,t,n){function r(e,t,n){e.fields={};for(var r="select"===t,i=0,o=n.length;o>i;++i){var a=n[i];Array.isArray(a)&&(a=a.join(".")),e.fields[a]=r}}function i(e,t,n){e.sort={};for(var r=0,i=n.length;i>r;++r){var o=n[r];Array.isArray(o)&&(o=o.join(".")),"-"===o[0]?e.sort[o.substr(1)]=-1:"+"===o[0]?e.sort[o.substr(1)]=1:e.sort[o]=1}}function o(e,t,n){var r=parseInt(n[0],10),i=0;n.length>1&&(i=parseInt(n[1],10)),e.limit=isNaN(r)||1>r?-1:r,e.skip=isNaN(i)||0>i?0:i}n.exports={select:r,exclude:r,sort:i,limit:o}}),define("h5.rql/autoConvertedMap",["require","exports","module"],function(e,t,n){n.exports={"true":!0,"false":!1,"null":null,undefined:void 0,Infinity:1/0,"-Infinity":-1/0}}),define("h5.rql/serializers/stringSerializer",["require","exports","module","../specialTerms","../autoConvertedMap"],function(e,t){function n(e,t){var n=[],s=t&&t.doubleEncode?f:p;return r(n,e.fields),i(n,e.sort),o(n,e.limit,e.skip),a(n,s,e.selector),n.join("").substr(1)}function r(e,t){var n=Object.keys(t);0!==n.length&&e.push(t[n[0]]?"&select(":"&exclude(",n.join(","),")")}function i(e,t){var n=Object.keys(t),r=n.length;if(0!==r){e.push("&sort(");for(var i=0;r>i;++i){var o=n[i];-1===t[o]&&e.push("-"),e.push(o),r-1>i&&e.push(",")}e.push(")")}}function o(e,t,n){-1!==t&&(e.push("&limit(",t),0!==n&&e.push(",",n),e.push(")"))}function a(e,t,n){var r=n.args.length;if(0!==r)if("and"===n.name)for(var i=0;r>i;++i){var o=n.args[i];h.hasOwnProperty(o.name)||(e.push("&"),s(e,t,o,r))}else e.push("&"),s(e,t,n,r,!0)}function s(e,t,n,r,i){if(Array.isArray(n))return void c(e,t,n);if(null===n||"object"!=typeof n||"string"!=typeof n.name||!Array.isArray(n.args))return void l(e,t,n);if(g.hasOwnProperty(n.name)&&n.args.length>1)return s(e,t,n.args[0],0),e.push(g[n.name]),void s(e,t,n.args[1],0);var o=",";"and"===n.name?o="&":"or"===n.name&&i!==!0&&(o="|"),u(e,t,o,n,r)}function u(e,t,n,r,i){var o=r.args.length;","===n?e.push(r.name,"("):1!==i&&e.push("(");for(var a=0;o>a;++a)s(e,t,r.args[a],o),o-1>a&&e.push(n);(","===n||-1!==i)&&e.push(")")}function c(e,t,n){e.push("(");for(var r=0,i=n.length;i>r;++r)s(e,t,n[r],i),i-1>r&&e.push(",");e.push(")")}function l(e,t,n){switch(typeof n){case"undefined":e.push("undefined");break;case"boolean":e.push(n?"true":"false");break;case"number":e.push(n.toString(10));break;case"object":d(e,t,n);break;default:0===n.length?e.push("string:"):isNaN(+n)?m.hasOwnProperty(n)?e.push("string:",n):e.push(t(n)):e.push("string:",n.toString())}}function d(e,t,n){if(null===n)e.push("null");else if(n instanceof Date)e.push("epoch:",n.getTime().toString());else if(n instanceof RegExp){var r=n.toString(),i=r.lastIndexOf("/");""===r.substr(i+1)&&(r=r.substr(1,i-1)),e.push("re:",t(r))}else e.push("function"==typeof n.convertToRqlValue?n.convertToRqlValue(t):t(n.toString()))}function p(e){return e=encodeURIComponent(e),/[\(\)]/.test(e)&&(e=e.replace(/\(/g,"%28").replace(/\)/g,"%29")),e}function f(e){return p(p(e))}var h=e("../specialTerms"),m=e("../autoConvertedMap");t.fromQuery=n;var g={eq:"=",ne:"!=",le:"<=",ge:">=",lt:"<",gt:">","in":"=in=",nin:"=nin="}}),define("h5.rql/Query",["require","exports","module","./Term","./serializers/stringSerializer"],function(e,t,n){function r(){this.selector=new i("and"),this.fields={},this.skip=0,this.limit=-1,this.sort={}}var i=e("./Term"),o=e("./serializers/stringSerializer");n.exports=r,r.fromObject=function(e){if(e instanceof r)return e;var t=new r;return e?(e.selector&&(t.selector=e.selector),e.fields&&(t.fields=e.fields),e.skip&&(t.skip=e.skip),e.limit&&(t.limit=e.limit),e.sort&&(t.sort=e.sort),t):t},r.prototype.toString=function(e){return o.fromQuery(this,e)},r.prototype.isEmpty=function(){return 0===this.skip&&-1===this.limit&&0===Object.keys(this.fields).length&&0===Object.keys(this.sort).length&&0===this.selector.args.length}}),define("h5.rql/valueConverters",["require","exports","module","./autoConvertedMap"],function(e,t,n){function r(e,t){if(p.hasOwnProperty(e))return p[e];var n=+e;return isNaN(n)||n.toString()!==e?(e=decodeURIComponent(e),t.options.jsonQueryCompatible&&"'"===e[0]&&"'"===e[e.length-1]?JSON.parse('"'+e.substring(1,e.length-1)+'"'):e):n}function i(e){var t=+e;if(isNaN(t))throw new Error("Invalid number: "+e);return t}function o(e){var t=new Date(+e);if(isNaN(t.getTime()))throw new Error("Invalid date: "+e);return t}function a(e){return e=decodeURIComponent(e),e="0000".substr(0,4-e.length)+e,e+="0000-01-01T00:00:00Z".substring(e.length),s(e)}function s(e){e=decodeURIComponent(e);var t,n=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(e);if(t=new Date(null!==n?Date.UTC(+n[1],+n[2]-1,+n[3],+n[4],+n[5],+n[6]):e),isNaN(t.getTime()))throw new Error("Invalid date: "+e);return t}function u(e){return e?!0:!1}function c(e){return decodeURIComponent(e)}function l(e){e=decodeURIComponent(e);var t=e,n="";if("/"===e[0]){var r=e.lastIndexOf("/");t=e.substr(1,r-1),n=e.substr(r+1)}return new RegExp(t,n)}function d(e){return e=decodeURIComponent(e).replace(/([\\\|\(\)\[\]\{\}\^\$\*\+\?\.<>])/g,"\\$1").replace(/\\\*/g,".*").replace(/\\\?/g,".?"),e=".*"===e.substr(0,2)?e.substr(2):"^"+e,e=".*"===e.substr(e.length-2)?e.substr(0,e.length-2):e+"$",new RegExp(e,"i")}var p=e("./autoConvertedMap");n.exports={"default":r,auto:r,number:i,epoch:o,isodate:a,date:s,"boolean":u,string:c,re:l,glob:d}}),define("h5.rql/Parser",["require","exports","module","./Term","./valueConverters"],function(e,t,n){function r(e){this.options=e instanceof r.Options?e:new r.Options(e)}var i=e("./Term"),o=e("./valueConverters");n.exports=r;var a=/^[\+\*\$\-:\w%\._!'~]$/,s=/[\+\*\$\-:\w%\._!'~]*\/[\+\*\$\-:\w%\._!'~\/]*/g,u=new RegExp("(\\([\\+\\*\\$\\-:\\w%\\._,]+\\)|[\\+\\*\\$\\-:\\w%\\._]*|)([<>!]?=(?:[\\w]*=)?|>|<)(\\([\\+\\*\\$\\-:\\w%\\._,!'~]*\\)|[\\+\\*\\$\\-:\\w%\\._!'~]*|)","g"),c={"=":"eq","==":"eq",">":"gt",">=":"ge","<":"lt","<=":"le","!=":"ne"};r.Options=function(e){("object"!=typeof e||null===e)&&(e={}),this.jsonQueryCompatible=e.jsonQueryCompatible===!0,this.fiqlCompatible=!e.hasOwnProperty("fiqlCompatible")||e.fiqlCompatible===!0,this.allowSlashedArrays=e.allowSlashedArrays===!0,this.allowEmptyValues=e.allowEmptyValues===!0,this.defaultValueConverter="function"==typeof e.defaultValueConverter?e.defaultValueConverter:o.default,this.specialTerms=Array.isArray(e.specialTerms)?e.specialTerms:[],this.emptyValue=e.hasOwnProperty("emptyValue")?e.emptyValue:""},r.prototype.parse=function(e,t){var n="object"==typeof t&&null!==t,r=this.options.specialTerms,o=null,s=new i,u=[],c=!0;this.options.jsonQueryCompatible&&(e=this.makeJsonQueryCompatible(e)),this.options.allowSlashedArrays&&(e=this.convertSlashedArrays(e)),this.options.fiqlCompatible&&(e=this.convertFiql(e));for(var l=0,d=e.length;d>l;++l){var p=e[l];switch(p){case"(":u.push(s),s=new i(o),n&&null!==o&&-1!==r.indexOf(o)&&(delete t[o],t[o]=s.args),o=null,c=!0;break;case",":if(c===!1){if(!this.options.allowEmptyValues)throw new Error("Empty value at position "+l+" is not allowed.");o=this.options.emptyValue}null!==o&&(s.args.push(this.convertStringToValue(o)),o=null),c=!1;break;case")":null!==o&&(s.args.push(this.convertStringToValue(o)),o=null);var f=null===s.name?s.args:s;s=u.pop(),s.args.push(f),c=!0;break;case"&":case"|":var h="&"===p?"and":"or";if(null!==s.name&&s.name!==h)throw new Error("Can not mix conjunctions within a group at position "+l+", use parenthesises around each set of the same conjunctions (& and |)");s.name="&"===p?"and":"or",null!==o&&(s.args.push(this.convertStringToValue(o)),o=null);break;default:if(!a.test(p))throw new Error("Invalid character at position "+l+": '"+p+"' ("+p.charCodeAt(0)+")");null===o?o=p:o+=p,c=!0}}return null!==o&&s.args.push(this.convertStringToValue(o)),null===s.name&&(s.name="and"),"and"===s.name&&1===s.args.length&&s.args[0]instanceof i&&"and"===s.args[0].name&&(s=s.args[0]),s},r.prototype.makeJsonQueryCompatible=function(e){return this.options.jsonQueryCompatible&&(e=e.replace(/%3C=/g,"=le=").replace(/%3E=/g,"=ge=").replace(/%3C/g,"=lt=").replace(/%3E/g,"=gt=")),e},r.prototype.convertSlashedArrays=function(e){return-1!==e.indexOf("/")?e.replace(s,function(e){return"("+e.replace(/\//g,",")+")"}):e},r.prototype.convertFiql=function(e){return e.replace(u,function(e,t,n,r){return n=n.length<3?c[n]:n.substring(1,n.length-1),n+"("+t+","+r+")"})},r.prototype.convertStringToValue=function(e){var t,n=e.indexOf(":");if(-1!==n){var r=e.substr(0,n);if(t=o[r],"undefined"==typeof t)throw new Error("Unknown value converter: "+r);e=e.substr(n+1)}else t=this.options.defaultValueConverter;return t(e,this)}}),define("h5.rql/index",["require","exports","module","./Term","./Query","./Parser","./specialTerms","./valueConverters"],function(e,t){var n=e("./Term"),r=e("./Query"),i=e("./Parser"),o=e("./specialTerms"),a=e("./valueConverters");t.Term=n,t.Query=r,t.Parser=i,t.specialTerms=o,t.valueConverters=a,t.parser=null,t.parse=function(e){null===t.parser&&(t.parser=new i({jsonQueryCompatible:!0,fiqlCompatible:!0,allowEmptyValues:!1,allowSlashedArrays:!0,specialTerms:Object.keys(o)}));var n=new r,a={};n.selector=t.parser.parse(e,a);for(var s in a)a.hasOwnProperty(s)&&o.hasOwnProperty(s)&&o[s](n,s,a[s]);return n}}),define("app/core/Request",["h5.rql/index","./util"],function(e,t){function n(e){"/"!==e[0]&&(e="/"+e);var t=e.match(r);this.url=e,this.path=("/"===t[1][0]?"":"/")+t[1],this.queryString=t[2]||"",this.fragment=t[3]||"",this.params={},this.query={},this.rql={},""!==this.queryString&&this.defineGetters()}var r=/^\/(.*?)(?:\?(.*?))?(?:#(.*?))?$/;return n.prototype.defineGetters=function(){Object.defineProperty(this,"query",{enumerable:!0,configurable:!0,get:function(){return this.parseQueryString()},set:function(e){this.query=e}}),Object.defineProperty(this,"rql",{enumerable:!0,configurable:!0,get:function(){return this.parseRqlString()},set:function(e){this.rql=e}})},n.prototype.parseQueryString=function(){delete this.query;for(var e=this.queryString.split("&"),n={},r=0,i=e.length;i>r;++r){var o=e[r],a=o.indexOf("=");if(-1!==a){var s=t.decodeUriComponent(o.substr(0,a)),u=t.decodeUriComponent(o.substr(a+1));n[s]=u}}return this.query=n,n},n.prototype.parseRqlString=function(){return delete this.rql,this.rql=e.parse(this.queryString),this.rql},n}),define("app/core/Router",["underscore","./util","./Request"],function(e,t,n){function r(e){this.broker=e,this.routes=[],this.dispatching=!1,this.dispatchQueue=[],this.currentRequest=null,this.previousUrl=null}function i(n,r){return function(i){var o=n.exec(i.path);if(null===o)return!1;var a=o.length;if(1===a)return!0;var s,u=e.isArray(r)?r.length:0;if(a===u+1)for(s=0;u>s;++s)i.params[r[s]]=t.decodeUriComponent(o[s+1]);else for(s=0;a>s;++s)i.params[s]=t.decodeUriComponent(o[s]);return!0}}var o=/([:*])([\w\-]+)?/g,a=/[\-\[\]{}()+?.,\\\^$|#\s]/g;return r.prototype.getCurrentRequest=function(){return this.currentRequest},r.prototype.map=function(e){var t=Array.prototype.slice.call(arguments);t.shift(),this.routes.unshift(this.createMatcher(e),t)},r.prototype.navigate=function(t,n){this.broker.publish("router.navigate",e.extend({url:t},n))},r.prototype.replace=function(e){this.broker.publish("router.navigate",{url:e,trigger:!0,replace:!0})},r.prototype.update=function(e){this.broker.publish("router.navigate",{url:e,trigger:!1,replace:!0})},r.prototype.dispatch=function(t){if(!e.isUndefined(t)){if(null===t&&(t="/"),this.dispatching)return void this.dispatchQueue.push(t);this.dispatching=!0;var r=new n(t);this.broker.publish("router.dispatching",r);var i=this.match(r);if(null===i){this.dispatching=!1;var o=this.dispatchQueue.shift();e.isUndefined(o)?this.broker.publish("router.404",r):this.dispatch(o)}else this.broker.publish("router.matched",{handlers:i,req:r}),e.defer(this.execute.bind(this,i,r))}},r.prototype.match=function(e){for(var t=this.routes,n=0,r=t.length;r>n;n+=2){var i=t[n];if(i(e))return t[n+1]}return null},r.prototype.execute=function(e,t){function n(i){i+1<e.length?e[i](t,r,n.bind(null,i+1)):e[i](t,r)}this.currentRequest=t,this.broker.publish("router.executing",{handlers:e,req:t});var r=this.previousUrl;n(0),this.previousUrl=t.url,this.dispatching=!1,this.dispatch(this.dispatchQueue.shift())},r.prototype.createMatcher=function(t){if(t instanceof RegExp)return i(t);if(t=t.trim(),""===t||"/"===t)return function(e){return""===e.path||"/"===e.path};var n=[],r=!1,s=t.replace(a,"\\$&");return s=s.replace(o,function(t,i,o){return r=!0,e.isUndefined(o)?"*"===i?".*":t:(n.push(o),"*"===i?"(.*?)":"([^/#?;]*)")}),r?i(new RegExp("^"+s+"$"),n):function(e){return e.path===t}},r}),define("app/core/templates/error400",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<p class="well">',t("core","ERROR:400"),"</p>\n")}();return buf.join("")}}),define("app/core/templates/error401",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<p class="well">',t("core","ERROR:401"),"</p>\n")}();return buf.join("")}}),define("app/core/templates/error404",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<p class="well">',t("core","ERROR:404"),"</p>\n")}();return buf.join("")}}),define("app/core/pages/ErrorPage",["app/i18n","../View","app/core/templates/error400","app/core/templates/error401","app/core/templates/error404"],function(e,t,n,r,i){return t.extend({layoutName:"page",pageId:"error",breadcrumbs:function(){return[e.bound("core","BREADCRUMBS:error",{code:this.options.code,codeStr:"e"+this.options.code})]},initialize:function(){var e;switch(this.options.code){case 401:e=r;break;case 404:e=i;break;default:e=n}this.view=new t({template:e})}})}),define("app/router",["backbone","app/broker","app/viewport","app/core/Router","app/core/pages/ErrorPage"],function(e,t,n,r,i){e.Router.prototype._extractParameters=function(e,t){return e.exec(t).slice(1)};var o=new r(t),a=new e.Router;a.route("*catchall","catchall",function(e){o.dispatch(e)}),t.subscribe("router.navigate",function(e){var t=e.url,n=t.charAt(0);("#"===n||"/"===n)&&(t=t.substr(1)),a.navigate(t,{trigger:e.trigger===!0,replace:e.replace===!0})});var s="/404";return t.subscribe("router.404",function(e){e.path===s?n.showPage(new i({code:404,req:e})):o.dispatch(s)}),window.router=o,o}),function(e,t){"function"==typeof define&&define.amd?define("moment-timezone",["moment"],t):"object"==typeof exports?module.exports=t(require("moment")):t(e.moment)}(this,function(e){function t(e){return e>96?e-87:e>64?e-29:e-48}function n(e){var n,r=0,i=e.split("."),o=i[0],a=i[1]||"",s=1,u=0,c=1;for(45===e.charCodeAt(0)&&(r=1,c=-1),r;r<o.length;r++)n=t(o.charCodeAt(r)),u=60*u+n;for(r=0;r<a.length;r++)s/=60,n=t(a.charCodeAt(r)),u+=n*s;return u*c}function r(e){for(var t=0;t<e.length;t++)e[t]=n(e[t])}function i(e,t){for(var n=0;t>n;n++)e[n]=Math.round((e[n-1]||0)+6e4*e[n]);e[t-1]=1/0}function o(e,t){var n,r=[];for(n=0;n<t.length;n++)r[n]=e[t[n]];return r}function a(e){var t=e.split("|"),n=t[2].split(" "),a=t[3].split(""),s=t[4].split(" ");return r(n),r(a),r(s),i(s,a.length),{name:t[0],abbrs:o(t[1].split(" "),a),offsets:o(n,a),untils:s}}function s(e){e&&this._set(a(e))}function u(e){return(e||"").toLowerCase().replace(/\//g,"_")}function c(e){var t,n,r;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)n=new s(e[t]),r=u(n.name),R[r]=n,f(r)}function l(e){return R[u(e)]||null}function d(){var e,t=[];for(e in R)R.hasOwnProperty(e)&&R[e]&&t.push(R[e].name);return t.sort()}function p(e){var t,n;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)n=e[t].split("|"),m(n[0],n[1]),m(n[1],n[0])}function f(e){if(O[e]){var t,n=R[e],r=O[e];for(t=0;t<r.length;t++)h(n,r[t]);O[e]=null}}function h(e,t){var n=R[u(t)]=new s;n._set(e),n.name=t}function m(e,t){e=u(e),R[e]?h(R[e],t):(O[e]=O[e]||[],O[e].push(t))}function g(e){c(e.zones),p(e.links),E.dataVersion=e.version}function y(e){return y.didShowError||(y.didShowError=!0,w("moment.tz.zoneExists('"+e+"') has been deprecated in favor of !moment.tz.zone('"+e+"')")),!!l(e)}function v(e){return!(!e._a||void 0!==e._tzm)}function w(e){"undefined"!=typeof console&&"function"==typeof console.error}function E(){var t=Array.prototype.slice.call(arguments,0,-1),n=arguments[arguments.length-1],r=l(n),i=e.utc.apply(null,t);return r&&v(i)&&i.add(r.parse(i),"minutes"),i.tz(n),i}function b(e){return function(){return this._z?this._z.abbr(this):e.call(this)}}function T(e){return function(){return this._z=null,e.apply(this,arguments)}}if(void 0!==e.tz)return e;var A="0.2.4",R={},O={},P=e.version.split("."),k=+P[0],C=+P[1];(2>k||2===k&&6>C)&&w("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+e.version+". See momentjs.com"),s.prototype={_set:function(e){this.name=e.name,this.abbrs=e.abbrs,this.untils=e.untils,this.offsets=e.offsets},_index:function(e){var t,n=+e,r=this.untils;for(t=0;t<r.length;t++)if(n<r[t])return t},parse:function(e){var t,n,r,i,o=+e,a=this.offsets,s=this.untils,u=s.length-1;for(i=0;u>i;i++)if(t=a[i],n=a[i+1],r=a[i?i-1:i],n>t&&E.moveAmbiguousForward?t=n:t>r&&E.moveInvalidForward&&(t=r),o<s[i]-6e4*t)return a[i];return a[u]},abbr:function(e){return this.abbrs[this._index(e)]},offset:function(e){return this.offsets[this._index(e)]}},E.version=A,E.dataVersion="",E._zones=R,E._links=O,E.add=c,E.link=p,E.load=g,E.zone=l,E.zoneExists=y,E.names=d,E.Zone=s,E.unpack=a,E.unpackBase60=n,E.needsOffset=v,E.moveInvalidForward=!0,E.moveAmbiguousForward=!1;var S=e.fn;e.tz=E,e.updateOffset=function(e,t){var n;e._z&&(n=e._z.offset(e),Math.abs(n)<16&&(n/=60),e.zone(n,t))},S.tz=function(t){return t?(this._z=l(t),this._z?e.updateOffset(this):w("Moment Timezone has no data for "+t+". See http://momentjs.com/timezone/docs/#/data-loading/."),this):this._z?this._z.name:void 0},S.zoneName=b(S.zoneName),S.zoneAbbr=b(S.zoneAbbr),S.utc=T(S.utc);var I=e.momentProperties;return"[object Array]"===Object.prototype.toString.call(I)?(I.push("_z"),I.push("_a")):I&&(I._z=null),g({version:"2014i",zones:["Africa/Abidjan|GMT|0|0|","Africa/Addis_Ababa|EAT|-30|0|","Africa/Algiers|CET|-10|0|","Africa/Bangui|WAT|-10|0|","Africa/Blantyre|CAT|-20|0|","Africa/Cairo|EET EEST|-20 -30|0101010101010101010101010101010|1Cby0 Fb0 c10 8n0 8Nd0 gL0 e10 mn0 1o10 jz0 gN0 pb0 1qN0 dX0 e10 xz0 1o10 bb0 e10 An0 1o10 5z0 e10 FX0 1o10 2L0 e10 IL0 1C10 Lz0","Africa/Casablanca|WET WEST|0 -10|01010101010101010101010101010101010101010|1Cco0 Db0 1zd0 Lz0 1Nf0 wM0 co0 go0 1o00 s00 dA0 vc0 11A0 A00 e00 y00 11A0 uo0 e00 DA0 11A0 rA0 e00 Jc0 WM0 m00 gM0 M00 WM0 jc0 e00 RA0 11A0 dA0 e00 Uo0 11A0 800 gM0 Xc0","Africa/Ceuta|CET CEST|-10 -20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Africa/Johannesburg|SAST|-20|0|","Africa/Tripoli|EET CET CEST|-20 -10 -20|0120|1IlA0 TA0 1o00","Africa/Windhoek|WAST WAT|-20 -10|01010101010101010101010|1C1c0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0","America/Adak|HAST HADT|a0 90|01010101010101010101010|1BR00 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Anchorage|AKST AKDT|90 80|01010101010101010101010|1BQX0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Anguilla|AST|40|0|","America/Araguaina|BRT BRST|30 20|010|1IdD0 Lz0","America/Argentina/Buenos_Aires|ART|30|0|","America/Asuncion|PYST PYT|30 40|01010101010101010101010|1C430 1a10 1fz0 1a10 1fz0 1cN0 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0","America/Atikokan|EST|50|0|","America/Bahia|BRT BRST|30 20|010|1FJf0 Rb0","America/Bahia_Banderas|MST CDT CST|70 50 60|01212121212121212121212|1C1l0 1nW0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Belem|BRT|30|0|","America/Belize|CST|60|0|","America/Boa_Vista|AMT|40|0|","America/Bogota|COT|50|0|","America/Boise|MST MDT|70 60|01010101010101010101010|1BQV0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Campo_Grande|AMST AMT|30 40|01010101010101010101010|1BIr0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10","America/Cancun|CST CDT|60 50|01010101010101010101010|1C1k0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Caracas|VET|4u|0|","America/Cayenne|GFT|30|0|","America/Chicago|CST CDT|60 50|01010101010101010101010|1BQU0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Chihuahua|MST MDT|70 60|01010101010101010101010|1C1l0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Creston|MST|70|0|","America/Dawson|PST PDT|80 70|01010101010101010101010|1BQW0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Detroit|EST EDT|50 40|01010101010101010101010|1BQT0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Eirunepe|AMT ACT|40 50|01|1KLE0","America/Glace_Bay|AST ADT|40 30|01010101010101010101010|1BQS0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Godthab|WGT WGST|30 20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","America/Goose_Bay|AST ADT|40 30|01010101010101010101010|1BQQ1 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Grand_Turk|EST EDT AST|50 40 40|01010101012|1BQT0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Guayaquil|ECT|50|0|","America/Guyana|GYT|40|0|","America/Havana|CST CDT|50 40|01010101010101010101010|1BQR0 1wo0 U00 1zc0 U00 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0","America/La_Paz|BOT|40|0|","America/Lima|PET|50|0|","America/Metlakatla|PST|80|0|","America/Miquelon|PMST PMDT|30 20|01010101010101010101010|1BQR0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Montevideo|UYST UYT|20 30|01010101010101010101010|1BQQ0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10","America/Noronha|FNT|20|0|","America/North_Dakota/Beulah|MST MDT CST CDT|70 60 60 50|01232323232323232323232|1BQV0 1zb0 Oo0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Paramaribo|SRT|30|0|","America/Port-au-Prince|EST EDT|50 40|0101010101010101010|1GI70 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Santa_Isabel|PST PDT|80 70|01010101010101010101010|1C1m0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Santiago|CLST CLT|30 40|01010101010101010101010|1C1f0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1zb0 Op0 1zb0 Rd0 1wn0 Rd0","America/Sao_Paulo|BRST BRT|20 30|01010101010101010101010|1BIq0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10","America/Scoresbysund|EGT EGST|10 0|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","America/St_Johns|NST NDT|3u 2u|01010101010101010101010|1BQPv 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","Antarctica/Casey|CAST AWST|-b0 -80|0101|1BN30 40P0 KL0","Antarctica/Davis|DAVT DAVT|-50 -70|0101|1BPw0 3Wn0 KN0","Antarctica/DumontDUrville|DDUT|-a0|0|","Antarctica/Macquarie|AEDT MIST|-b0 -b0|01|1C140","Antarctica/Mawson|MAWT|-50|0|","Antarctica/McMurdo|NZDT NZST|-d0 -c0|01010101010101010101010|1C120 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00","Antarctica/Rothera|ROTT|30|0|","Antarctica/Syowa|SYOT|-30|0|","Antarctica/Troll|UTC CEST|0 -20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Antarctica/Vostok|VOST|-60|0|","Asia/Aden|AST|-30|0|","Asia/Almaty|ALMT|-60|0|","Asia/Amman|EET EEST|-20 -30|010101010101010101010|1BVy0 1qM0 11A0 1o00 11A0 4bX0 Dd0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0","Asia/Anadyr|ANAT ANAST ANAT|-c0 -c0 -b0|0120|1BWe0 1qN0 WM0","Asia/Aqtau|AQTT|-50|0|","Asia/Ashgabat|TMT|-50|0|","Asia/Baku|AZT AZST|-40 -50|01010101010101010101010|1BWo0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Bangkok|ICT|-70|0|","Asia/Beirut|EET EEST|-20 -30|01010101010101010101010|1BWm0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0","Asia/Bishkek|KGT|-60|0|","Asia/Brunei|BNT|-80|0|","Asia/Calcutta|IST|-5u|0|","Asia/Chita|YAKT YAKST YAKT IRKT|-90 -a0 -a0 -80|01023|1BWh0 1qM0 WM0 8Hz0","Asia/Choibalsan|CHOT|-80|0|","Asia/Chongqing|CST|-80|0|","Asia/Dacca|BDT|-60|0|","Asia/Damascus|EET EEST|-20 -30|01010101010101010101010|1C0m0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0","Asia/Dili|TLT|-90|0|","Asia/Dubai|GST|-40|0|","Asia/Dushanbe|TJT|-50|0|","Asia/Gaza|EET EEST|-20 -30|01010101010101010101010|1BVW1 SKX 1xd1 MKX 1AN0 1a00 1fA0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1fB0 1cL0 1cN0 1cL0","Asia/Hebron|EET EEST|-20 -30|0101010101010101010101010|1BVy0 Tb0 1xd1 MKX bB0 cn0 1cN0 1a00 1fA0 1cL0 1cN0 1cL0 1cN0 1cL0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1fB0 1cL0 1cN0 1cL0","Asia/Hong_Kong|HKT|-80|0|","Asia/Hovd|HOVT|-70|0|","Asia/Irkutsk|IRKT IRKST IRKT|-80 -90 -90|01020|1BWi0 1qM0 WM0 8Hz0","Asia/Istanbul|EET EEST|-20 -30|01010101010101010101010|1BWp0 1qM0 Xc0 1qo0 WM0 1qM0 11A0 1o00 1200 1nA0 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Jakarta|WIB|-70|0|","Asia/Jayapura|WIT|-90|0|","Asia/Jerusalem|IST IDT|-20 -30|01010101010101010101010|1BVA0 17X0 1kp0 1dz0 1c10 1aL0 1eN0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0","Asia/Kabul|AFT|-4u|0|","Asia/Kamchatka|PETT PETST PETT|-c0 -c0 -b0|0120|1BWe0 1qN0 WM0","Asia/Karachi|PKT|-50|0|","Asia/Kashgar|XJT|-60|0|","Asia/Kathmandu|NPT|-5J|0|","Asia/Khandyga|VLAT VLAST VLAT YAKT YAKT|-a0 -b0 -b0 -a0 -90|010234|1BWg0 1qM0 WM0 17V0 7zD0","Asia/Krasnoyarsk|KRAT KRAST KRAT|-70 -80 -80|01020|1BWj0 1qM0 WM0 8Hz0","Asia/Kuala_Lumpur|MYT|-80|0|","Asia/Magadan|MAGT MAGST MAGT MAGT|-b0 -c0 -c0 -a0|01023|1BWf0 1qM0 WM0 8Hz0","Asia/Makassar|WITA|-80|0|","Asia/Manila|PHT|-80|0|","Asia/Nicosia|EET EEST|-20 -30|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Novokuznetsk|KRAT NOVST NOVT NOVT|-70 -70 -60 -70|01230|1BWj0 1qN0 WM0 8Hz0","Asia/Novosibirsk|NOVT NOVST NOVT|-60 -70 -70|01020|1BWk0 1qM0 WM0 8Hz0","Asia/Omsk|OMST OMSST OMST|-60 -70 -70|01020|1BWk0 1qM0 WM0 8Hz0","Asia/Oral|ORAT|-50|0|","Asia/Pyongyang|KST|-90|0|","Asia/Qyzylorda|QYZT|-60|0|","Asia/Rangoon|MMT|-6u|0|","Asia/Sakhalin|SAKT SAKST SAKT|-a0 -b0 -b0|01020|1BWg0 1qM0 WM0 8Hz0","Asia/Samarkand|UZT|-50|0|","Asia/Singapore|SGT|-80|0|","Asia/Srednekolymsk|MAGT MAGST MAGT SRET|-b0 -c0 -c0 -b0|01023|1BWf0 1qM0 WM0 8Hz0","Asia/Tbilisi|GET|-40|0|","Asia/Tehran|IRST IRDT|-3u -4u|01010101010101010101010|1BTUu 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0","Asia/Thimbu|BTT|-60|0|","Asia/Tokyo|JST|-90|0|","Asia/Ulaanbaatar|ULAT|-80|0|","Asia/Ust-Nera|MAGT MAGST MAGT VLAT VLAT|-b0 -c0 -c0 -b0 -a0|010234|1BWf0 1qM0 WM0 17V0 7zD0","Asia/Vladivostok|VLAT VLAST VLAT|-a0 -b0 -b0|01020|1BWg0 1qM0 WM0 8Hz0","Asia/Yakutsk|YAKT YAKST YAKT|-90 -a0 -a0|01020|1BWh0 1qM0 WM0 8Hz0","Asia/Yekaterinburg|YEKT YEKST YEKT|-50 -60 -60|01020|1BWl0 1qM0 WM0 8Hz0","Asia/Yerevan|AMT AMST|-40 -50|01010|1BWm0 1qM0 WM0 1qM0","Atlantic/Azores|AZOT AZOST|10 0|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Atlantic/Canary|WET WEST|0 -10|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Atlantic/Cape_Verde|CVT|10|0|","Atlantic/South_Georgia|GST|20|0|","Atlantic/Stanley|FKST FKT|30 40|010|1C6R0 U10","Australia/ACT|AEDT AEST|-b0 -a0|01010101010101010101010|1C140 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0","Australia/Adelaide|ACDT ACST|-au -9u|01010101010101010101010|1C14u 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0","Australia/Brisbane|AEST|-a0|0|","Australia/Darwin|ACST|-9u|0|","Australia/Eucla|ACWST|-8J|0|","Australia/LHI|LHDT LHST|-b0 -au|01010101010101010101010|1C130 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu","Australia/Perth|AWST|-80|0|","Chile/EasterIsland|EASST EAST|50 60|01010101010101010101010|1C1f0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1wn0 Rd0 1zb0 Op0 1zb0 Rd0 1wn0 Rd0","Eire|GMT IST|0 -10|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Etc/GMT+1|GMT+1|10|0|","Etc/GMT+10|GMT+10|a0|0|","Etc/GMT+11|GMT+11|b0|0|","Etc/GMT+12|GMT+12|c0|0|","Etc/GMT+2|GMT+2|20|0|","Etc/GMT+3|GMT+3|30|0|","Etc/GMT+4|GMT+4|40|0|","Etc/GMT+5|GMT+5|50|0|","Etc/GMT+6|GMT+6|60|0|","Etc/GMT+7|GMT+7|70|0|","Etc/GMT+8|GMT+8|80|0|","Etc/GMT+9|GMT+9|90|0|","Etc/GMT-1|GMT-1|-10|0|","Etc/GMT-10|GMT-10|-a0|0|","Etc/GMT-11|GMT-11|-b0|0|","Etc/GMT-12|GMT-12|-c0|0|","Etc/GMT-13|GMT-13|-d0|0|","Etc/GMT-14|GMT-14|-e0|0|","Etc/GMT-2|GMT-2|-20|0|","Etc/GMT-3|GMT-3|-30|0|","Etc/GMT-4|GMT-4|-40|0|","Etc/GMT-5|GMT-5|-50|0|","Etc/GMT-6|GMT-6|-60|0|","Etc/GMT-7|GMT-7|-70|0|","Etc/GMT-8|GMT-8|-80|0|","Etc/GMT-9|GMT-9|-90|0|","Etc/UCT|UCT|0|0|","Etc/UTC|UTC|0|0|","Europe/Belfast|GMT BST|0 -10|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Kaliningrad|EET EEST FET|-20 -30 -30|01020|1BWo0 1qM0 WM0 8Hz0","Europe/Minsk|EET EEST FET MSK|-20 -30 -30 -30|01023|1BWo0 1qM0 WM0 8Hy0","Europe/Moscow|MSK MSD MSK|-30 -40 -40|01020|1BWn0 1qM0 WM0 8Hz0","Europe/Samara|SAMT SAMST SAMT|-40 -40 -30|0120|1BWm0 1qN0 WM0","Europe/Simferopol|EET EEST MSK MSK|-20 -30 -40 -30|01010101023|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11z0 1nW0","Europe/Volgograd|MSK MSK|-30 -40|01010|1BWn0 1qM0 WM0 8Hz0","HST|HST|a0|0|","Indian/Chagos|IOT|-60|0|","Indian/Christmas|CXT|-70|0|","Indian/Cocos|CCT|-6u|0|","Indian/Kerguelen|TFT|-50|0|","Indian/Mahe|SCT|-40|0|","Indian/Maldives|MVT|-50|0|","Indian/Mauritius|MUT|-40|0|","Indian/Reunion|RET|-40|0|","Kwajalein|MHT|-c0|0|","MET|MET MEST|-10 -20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","NZ-CHAT|CHADT CHAST|-dJ -cJ|01010101010101010101010|1C120 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00","Pacific/Apia|SST SDT WSDT WSST|b0 a0 -e0 -d0|01012323232323232323232|1Dbn0 1ff0 1a00 CI0 AQ0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00","Pacific/Bougainville|PGT BST|-a0 -b0|01|1NwE0","Pacific/Chuuk|CHUT|-a0|0|","Pacific/Efate|VUT|-b0|0|","Pacific/Enderbury|PHOT|-d0|0|","Pacific/Fakaofo|TKT TKT|b0 -d0|01|1Gfn0","Pacific/Fiji|FJST FJT|-d0 -c0|01010101010101010101010|1BWe0 1o00 Rc0 1wo0 Ao0 1Nc0 Ao0 1Q00 xz0 1SN0 uM0 1SM0 xA0 1SM0 uM0 1SM0 uM0 1SM0 uM0 1SM0 uM0 1SM0","Pacific/Funafuti|TVT|-c0|0|","Pacific/Galapagos|GALT|60|0|","Pacific/Gambier|GAMT|90|0|","Pacific/Guadalcanal|SBT|-b0|0|","Pacific/Guam|ChST|-a0|0|","Pacific/Kiritimati|LINT|-e0|0|","Pacific/Kosrae|KOST|-b0|0|","Pacific/Marquesas|MART|9u|0|","Pacific/Midway|SST|b0|0|","Pacific/Nauru|NRT|-c0|0|","Pacific/Niue|NUT|b0|0|","Pacific/Norfolk|NFT|-bu|0|","Pacific/Noumea|NCT|-b0|0|","Pacific/Palau|PWT|-90|0|","Pacific/Pohnpei|PONT|-b0|0|","Pacific/Port_Moresby|PGT|-a0|0|","Pacific/Rarotonga|CKT|a0|0|","Pacific/Tahiti|TAHT|a0|0|","Pacific/Tarawa|GILT|-c0|0|","Pacific/Tongatapu|TOT|-d0|0|","Pacific/Wake|WAKT|-c0|0|","Pacific/Wallis|WFT|-c0|0|"],links:["Africa/Abidjan|Africa/Accra","Africa/Abidjan|Africa/Bamako","Africa/Abidjan|Africa/Banjul","Africa/Abidjan|Africa/Bissau","Africa/Abidjan|Africa/Conakry","Africa/Abidjan|Africa/Dakar","Africa/Abidjan|Africa/Freetown","Africa/Abidjan|Africa/Lome","Africa/Abidjan|Africa/Monrovia","Africa/Abidjan|Africa/Nouakchott","Africa/Abidjan|Africa/Ouagadougou","Africa/Abidjan|Africa/Sao_Tome","Africa/Abidjan|Africa/Timbuktu","Africa/Abidjan|America/Danmarkshavn","Africa/Abidjan|Atlantic/Reykjavik","Africa/Abidjan|Atlantic/St_Helena","Africa/Abidjan|Etc/GMT","Africa/Abidjan|Etc/GMT+0","Africa/Abidjan|Etc/GMT-0","Africa/Abidjan|Etc/GMT0","Africa/Abidjan|Etc/Greenwich","Africa/Abidjan|GMT","Africa/Abidjan|GMT+0","Africa/Abidjan|GMT-0","Africa/Abidjan|GMT0","Africa/Abidjan|Greenwich","Africa/Abidjan|Iceland","Africa/Addis_Ababa|Africa/Asmara","Africa/Addis_Ababa|Africa/Asmera","Africa/Addis_Ababa|Africa/Dar_es_Salaam","Africa/Addis_Ababa|Africa/Djibouti","Africa/Addis_Ababa|Africa/Juba","Africa/Addis_Ababa|Africa/Kampala","Africa/Addis_Ababa|Africa/Khartoum","Africa/Addis_Ababa|Africa/Mogadishu","Africa/Addis_Ababa|Africa/Nairobi","Africa/Addis_Ababa|Indian/Antananarivo","Africa/Addis_Ababa|Indian/Comoro","Africa/Addis_Ababa|Indian/Mayotte","Africa/Algiers|Africa/Tunis","Africa/Bangui|Africa/Brazzaville","Africa/Bangui|Africa/Douala","Africa/Bangui|Africa/Kinshasa","Africa/Bangui|Africa/Lagos","Africa/Bangui|Africa/Libreville","Africa/Bangui|Africa/Luanda","Africa/Bangui|Africa/Malabo","Africa/Bangui|Africa/Ndjamena","Africa/Bangui|Africa/Niamey","Africa/Bangui|Africa/Porto-Novo","Africa/Blantyre|Africa/Bujumbura","Africa/Blantyre|Africa/Gaborone","Africa/Blantyre|Africa/Harare","Africa/Blantyre|Africa/Kigali","Africa/Blantyre|Africa/Lubumbashi","Africa/Blantyre|Africa/Lusaka","Africa/Blantyre|Africa/Maputo","Africa/Cairo|Egypt","Africa/Casablanca|Africa/El_Aaiun","Africa/Ceuta|Arctic/Longyearbyen","Africa/Ceuta|Atlantic/Jan_Mayen","Africa/Ceuta|CET","Africa/Ceuta|Europe/Amsterdam","Africa/Ceuta|Europe/Andorra","Africa/Ceuta|Europe/Belgrade","Africa/Ceuta|Europe/Berlin","Africa/Ceuta|Europe/Bratislava","Africa/Ceuta|Europe/Brussels","Africa/Ceuta|Europe/Budapest","Africa/Ceuta|Europe/Busingen","Africa/Ceuta|Europe/Copenhagen","Africa/Ceuta|Europe/Gibraltar","Africa/Ceuta|Europe/Ljubljana","Africa/Ceuta|Europe/Luxembourg","Africa/Ceuta|Europe/Madrid","Africa/Ceuta|Europe/Malta","Africa/Ceuta|Europe/Monaco","Africa/Ceuta|Europe/Oslo","Africa/Ceuta|Europe/Paris","Africa/Ceuta|Europe/Podgorica","Africa/Ceuta|Europe/Prague","Africa/Ceuta|Europe/Rome","Africa/Ceuta|Europe/San_Marino","Africa/Ceuta|Europe/Sarajevo","Africa/Ceuta|Europe/Skopje","Africa/Ceuta|Europe/Stockholm","Africa/Ceuta|Europe/Tirane","Africa/Ceuta|Europe/Vaduz","Africa/Ceuta|Europe/Vatican","Africa/Ceuta|Europe/Vienna","Africa/Ceuta|Europe/Warsaw","Africa/Ceuta|Europe/Zagreb","Africa/Ceuta|Europe/Zurich","Africa/Ceuta|Poland","Africa/Johannesburg|Africa/Maseru","Africa/Johannesburg|Africa/Mbabane","Africa/Tripoli|Libya","America/Adak|America/Atka","America/Adak|US/Aleutian","America/Anchorage|America/Juneau","America/Anchorage|America/Nome","America/Anchorage|America/Sitka","America/Anchorage|America/Yakutat","America/Anchorage|US/Alaska","America/Anguilla|America/Antigua","America/Anguilla|America/Aruba","America/Anguilla|America/Barbados","America/Anguilla|America/Blanc-Sablon","America/Anguilla|America/Curacao","America/Anguilla|America/Dominica","America/Anguilla|America/Grenada","America/Anguilla|America/Guadeloupe","America/Anguilla|America/Kralendijk","America/Anguilla|America/Lower_Princes","America/Anguilla|America/Marigot","America/Anguilla|America/Martinique","America/Anguilla|America/Montserrat","America/Anguilla|America/Port_of_Spain","America/Anguilla|America/Puerto_Rico","America/Anguilla|America/Santo_Domingo","America/Anguilla|America/St_Barthelemy","America/Anguilla|America/St_Kitts","America/Anguilla|America/St_Lucia","America/Anguilla|America/St_Thomas","America/Anguilla|America/St_Vincent","America/Anguilla|America/Tortola","America/Anguilla|America/Virgin","America/Argentina/Buenos_Aires|America/Argentina/Catamarca","America/Argentina/Buenos_Aires|America/Argentina/ComodRivadavia","America/Argentina/Buenos_Aires|America/Argentina/Cordoba","America/Argentina/Buenos_Aires|America/Argentina/Jujuy","America/Argentina/Buenos_Aires|America/Argentina/La_Rioja","America/Argentina/Buenos_Aires|America/Argentina/Mendoza","America/Argentina/Buenos_Aires|America/Argentina/Rio_Gallegos","America/Argentina/Buenos_Aires|America/Argentina/Salta","America/Argentina/Buenos_Aires|America/Argentina/San_Juan","America/Argentina/Buenos_Aires|America/Argentina/San_Luis","America/Argentina/Buenos_Aires|America/Argentina/Tucuman","America/Argentina/Buenos_Aires|America/Argentina/Ushuaia","America/Argentina/Buenos_Aires|America/Buenos_Aires","America/Argentina/Buenos_Aires|America/Catamarca","America/Argentina/Buenos_Aires|America/Cordoba","America/Argentina/Buenos_Aires|America/Jujuy","America/Argentina/Buenos_Aires|America/Mendoza","America/Argentina/Buenos_Aires|America/Rosario","America/Atikokan|America/Cayman","America/Atikokan|America/Coral_Harbour","America/Atikokan|America/Jamaica","America/Atikokan|America/Panama","America/Atikokan|EST","America/Atikokan|Jamaica","America/Belem|America/Fortaleza","America/Belem|America/Maceio","America/Belem|America/Recife","America/Belem|America/Santarem","America/Belize|America/Costa_Rica","America/Belize|America/El_Salvador","America/Belize|America/Guatemala","America/Belize|America/Managua","America/Belize|America/Regina","America/Belize|America/Swift_Current","America/Belize|America/Tegucigalpa","America/Belize|Canada/East-Saskatchewan","America/Belize|Canada/Saskatchewan","America/Boa_Vista|America/Manaus","America/Boa_Vista|America/Porto_Velho","America/Boa_Vista|Brazil/West","America/Boise|America/Cambridge_Bay","America/Boise|America/Denver","America/Boise|America/Edmonton","America/Boise|America/Inuvik","America/Boise|America/Ojinaga","America/Boise|America/Shiprock","America/Boise|America/Yellowknife","America/Boise|Canada/Mountain","America/Boise|MST7MDT","America/Boise|Navajo","America/Boise|US/Mountain","America/Campo_Grande|America/Cuiaba","America/Cancun|America/Merida","America/Cancun|America/Mexico_City","America/Cancun|America/Monterrey","America/Cancun|Mexico/General","America/Chicago|America/Indiana/Knox","America/Chicago|America/Indiana/Tell_City","America/Chicago|America/Knox_IN","America/Chicago|America/Matamoros","America/Chicago|America/Menominee","America/Chicago|America/North_Dakota/Center","America/Chicago|America/North_Dakota/New_Salem","America/Chicago|America/Rainy_River","America/Chicago|America/Rankin_Inlet","America/Chicago|America/Resolute","America/Chicago|America/Winnipeg","America/Chicago|CST6CDT","America/Chicago|Canada/Central","America/Chicago|US/Central","America/Chicago|US/Indiana-Starke","America/Chihuahua|America/Mazatlan","America/Chihuahua|Mexico/BajaSur","America/Creston|America/Dawson_Creek","America/Creston|America/Hermosillo","America/Creston|America/Phoenix","America/Creston|MST","America/Creston|US/Arizona","America/Dawson|America/Ensenada","America/Dawson|America/Los_Angeles","America/Dawson|America/Tijuana","America/Dawson|America/Vancouver","America/Dawson|America/Whitehorse","America/Dawson|Canada/Pacific","America/Dawson|Canada/Yukon","America/Dawson|Mexico/BajaNorte","America/Dawson|PST8PDT","America/Dawson|US/Pacific","America/Dawson|US/Pacific-New","America/Detroit|America/Fort_Wayne","America/Detroit|America/Indiana/Indianapolis","America/Detroit|America/Indiana/Marengo","America/Detroit|America/Indiana/Petersburg","America/Detroit|America/Indiana/Vevay","America/Detroit|America/Indiana/Vincennes","America/Detroit|America/Indiana/Winamac","America/Detroit|America/Indianapolis","America/Detroit|America/Iqaluit","America/Detroit|America/Kentucky/Louisville","America/Detroit|America/Kentucky/Monticello","America/Detroit|America/Louisville","America/Detroit|America/Montreal","America/Detroit|America/Nassau","America/Detroit|America/New_York","America/Detroit|America/Nipigon","America/Detroit|America/Pangnirtung","America/Detroit|America/Thunder_Bay","America/Detroit|America/Toronto","America/Detroit|Canada/Eastern","America/Detroit|EST5EDT","America/Detroit|US/East-Indiana","America/Detroit|US/Eastern","America/Detroit|US/Michigan","America/Eirunepe|America/Porto_Acre","America/Eirunepe|America/Rio_Branco","America/Eirunepe|Brazil/Acre","America/Glace_Bay|America/Halifax","America/Glace_Bay|America/Moncton","America/Glace_Bay|America/Thule","America/Glace_Bay|Atlantic/Bermuda","America/Glace_Bay|Canada/Atlantic","America/Havana|Cuba","America/Metlakatla|Pacific/Pitcairn","America/Noronha|Brazil/DeNoronha","America/Santiago|Antarctica/Palmer","America/Santiago|Chile/Continental","America/Sao_Paulo|Brazil/East","America/St_Johns|Canada/Newfoundland","Antarctica/McMurdo|Antarctica/South_Pole","Antarctica/McMurdo|NZ","Antarctica/McMurdo|Pacific/Auckland","Asia/Aden|Asia/Baghdad","Asia/Aden|Asia/Bahrain","Asia/Aden|Asia/Kuwait","Asia/Aden|Asia/Qatar","Asia/Aden|Asia/Riyadh","Asia/Aqtau|Asia/Aqtobe","Asia/Ashgabat|Asia/Ashkhabad","Asia/Bangkok|Asia/Ho_Chi_Minh","Asia/Bangkok|Asia/Phnom_Penh","Asia/Bangkok|Asia/Saigon","Asia/Bangkok|Asia/Vientiane","Asia/Calcutta|Asia/Colombo","Asia/Calcutta|Asia/Kolkata","Asia/Chongqing|Asia/Chungking","Asia/Chongqing|Asia/Harbin","Asia/Chongqing|Asia/Macao","Asia/Chongqing|Asia/Macau","Asia/Chongqing|Asia/Shanghai","Asia/Chongqing|Asia/Taipei","Asia/Chongqing|PRC","Asia/Chongqing|ROC","Asia/Dacca|Asia/Dhaka","Asia/Dubai|Asia/Muscat","Asia/Hong_Kong|Hongkong","Asia/Istanbul|Europe/Istanbul","Asia/Istanbul|Turkey","Asia/Jakarta|Asia/Pontianak","Asia/Jerusalem|Asia/Tel_Aviv","Asia/Jerusalem|Israel","Asia/Kashgar|Asia/Urumqi","Asia/Kathmandu|Asia/Katmandu","Asia/Kuala_Lumpur|Asia/Kuching","Asia/Makassar|Asia/Ujung_Pandang","Asia/Nicosia|EET","Asia/Nicosia|Europe/Athens","Asia/Nicosia|Europe/Bucharest","Asia/Nicosia|Europe/Chisinau","Asia/Nicosia|Europe/Helsinki","Asia/Nicosia|Europe/Kiev","Asia/Nicosia|Europe/Mariehamn","Asia/Nicosia|Europe/Nicosia","Asia/Nicosia|Europe/Riga","Asia/Nicosia|Europe/Sofia","Asia/Nicosia|Europe/Tallinn","Asia/Nicosia|Europe/Tiraspol","Asia/Nicosia|Europe/Uzhgorod","Asia/Nicosia|Europe/Vilnius","Asia/Nicosia|Europe/Zaporozhye","Asia/Pyongyang|Asia/Seoul","Asia/Pyongyang|ROK","Asia/Samarkand|Asia/Tashkent","Asia/Singapore|Singapore","Asia/Tehran|Iran","Asia/Thimbu|Asia/Thimphu","Asia/Tokyo|Japan","Asia/Ulaanbaatar|Asia/Ulan_Bator","Atlantic/Canary|Atlantic/Faeroe","Atlantic/Canary|Atlantic/Faroe","Atlantic/Canary|Atlantic/Madeira","Atlantic/Canary|Europe/Lisbon","Atlantic/Canary|Portugal","Atlantic/Canary|WET","Australia/ACT|Australia/Canberra","Australia/ACT|Australia/Currie","Australia/ACT|Australia/Hobart","Australia/ACT|Australia/Melbourne","Australia/ACT|Australia/NSW","Australia/ACT|Australia/Sydney","Australia/ACT|Australia/Tasmania","Australia/ACT|Australia/Victoria","Australia/Adelaide|Australia/Broken_Hill","Australia/Adelaide|Australia/South","Australia/Adelaide|Australia/Yancowinna","Australia/Brisbane|Australia/Lindeman","Australia/Brisbane|Australia/Queensland","Australia/Darwin|Australia/North","Australia/LHI|Australia/Lord_Howe","Australia/Perth|Australia/West","Chile/EasterIsland|Pacific/Easter","Eire|Europe/Dublin","Etc/UCT|UCT","Etc/UTC|Etc/Universal","Etc/UTC|Etc/Zulu","Etc/UTC|UTC","Etc/UTC|Universal","Etc/UTC|Zulu","Europe/Belfast|Europe/Guernsey","Europe/Belfast|Europe/Isle_of_Man","Europe/Belfast|Europe/Jersey","Europe/Belfast|Europe/London","Europe/Belfast|GB","Europe/Belfast|GB-Eire","Europe/Moscow|W-SU","HST|Pacific/Honolulu","HST|Pacific/Johnston","HST|US/Hawaii","Kwajalein|Pacific/Kwajalein","Kwajalein|Pacific/Majuro","NZ-CHAT|Pacific/Chatham","Pacific/Chuuk|Pacific/Truk","Pacific/Chuuk|Pacific/Yap","Pacific/Guam|Pacific/Saipan","Pacific/Midway|Pacific/Pago_Pago","Pacific/Midway|Pacific/Samoa","Pacific/Midway|US/Samoa","Pacific/Pohnpei|Pacific/Ponape"]}),e
}),define("app/time",["moment-timezone","app/socket"],function(e,t){function n(e,t){for(e=String(e);e.length<t;)e="0"+e;return e}var r="TIME:OFFSET",i="TIME:ZONE",o={synced:!1,offset:parseFloat(localStorage.getItem(r))||0,zone:localStorage.getItem(i)||"Europe/Warsaw",appData:window.TIME||0};return delete window.TIME,o.sync=function(){var e=Date.now();t.emit("time",function(t,n){o.offset=(t-e+(t-Date.now()))/2,o.zone=n,o.synced=!0,localStorage.setItem(r,o.offset.toString()),localStorage.setItem(i,o.zone)})},o.getServerMoment=function(){return e(Date.now()+o.offset).tz(o.zone)},o.getMoment=function(t,n){return e(t,n).tz(o.zone)},o.format=function(e,t){var n=o.getMoment(e);return n.isValid()?n.format(t):null},o.toSeconds=function(e){if("number"==typeof e)return e;if("string"!=typeof e)return 0;var t={g:3600,h:3600,m:60,s:1},n=e.trim(),r=parseInt(n,10);if(/^[0-9]+\.?[0-9]*$/.test(n)===!1){var i,o=/([0-9\.]+) *(h|m|s)[a-z]*/gi;for(r=0;i=o.exec(n);)r+=i[1]*t[i[2].toLowerCase()]}return r},o.toString=function(e,t,r){if("number"!=typeof e||0>=e)return t?"00:00:00":"0s";var i="",o=Math.floor(e/3600);o>0?(i+=t?n(o,2)+":":" "+o+"h",e%=3600):t&&(i+="00:");var a=Math.floor(e/60);a>0?(i+=t?n(a,2)+":":" "+a+"min",e%=60):t&&(i+="00:");var s=e;return s>=1?(i+=t?n(Math.round(s),2):" "+Math.round(s)+"s",r&&s%1!==0&&(i+=t?"."+n(Math.round(s%1*1e3),3):" "+(Math.round(s%1*1e3)+"ms"))):s>0&&""===i?i+=" "+1e3*s+"ms":t&&(i+="00"),t?i:i.substr(1)},t.on("connect",function(){o.sync()}),t.isConnected()&&o.sync(),window.time=o,o}),define("app/updater/views/RestartMessageView",["app/core/View"],function(e){return e.extend({destroy:function(){this.el.ownerDocument.body.style.marginBottom=""},afterRender:function(){this.el.ownerDocument.body.style.marginBottom=this.$el.outerHeight()+15+"px"}})}),define("app/updater/templates/backendRestart",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="updater-restart updater-restart-backend">\n  <i class="fa fa-exclamation-triangle updater-restart-icon"></i><span class="updater-restart-message">',t("updater","restart:backend"),"</span>\n</div>\n")}();return buf.join("")}}),define("app/updater/templates/frontendRestart",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="updater-restart updater-restart-frontend">\n  <i class="fa fa-exclamation-circle updater-restart-icon"></i><span class="updater-restart-message">',t("updater","restart:frontend"),"</span>\n</div>\n")}();return buf.join("")}}),function(){function e(e,t,n,r,i,o){t[e]&&(n.push(e),(t[e]===!0||1===t[e])&&r.push(i+e+"/"+o))}function t(e,t,n,r,i){var o=r+t+"/"+i;require._fileExists(e.toUrl(o+".js"))&&n.push(o)}function n(e,t,r){var i;for(i in t)!t.hasOwnProperty(i)||e.hasOwnProperty(i)&&!r?"object"==typeof t[i]&&(!e[i]&&t[i]&&(e[i]={}),n(e[i],t[i],r)):e[i]=t[i]}var r=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(i){var o=i.config?i.config():{};return{version:"2.0.4",load:function(i,a,s,u){u=u||{},u.locale&&(o.locale=u.locale);var c,l,d,p=r.exec(i),f=p[1],h=p[4],m=p[5],g=h.split("-"),y=[],v={},w="";if(p[5]?(f=p[1],c=f+m):(c=i,m=p[4],h=o.locale,h||(h=o.locale="undefined"==typeof navigator?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),g=h.split("-")),u.isBuild){for(y.push(c),t(a,"root",y,f,m),l=0;l<g.length;l++)d=g[l],w+=(w?"-":"")+d,t(a,w,y,f,m);a(y,function(){s()})}else a([c],function(t){var r,i=[];for(e("root",t,i,y,f,m),l=0;l<g.length;l++)r=g[l],w+=(w?"-":"")+r,e(w,t,i,y,f,m);a(y,function(){var e,r,o;for(e=i.length-1;e>-1&&i[e];e--)o=i[e],r=t[o],(r===!0||1===r)&&(r=a(f+o+"/"+m)),n(v,r);s(v)})})}}})}(),define("app/nls/locale/en",[],function(){var e={locale:{}};return e.locale.en=function(e){return 1===e?"one":"other"}}),define("app/nls/updater",["app/nls/locale/en"],function(e){return{root:{"restart:backend":function(){return"Application server is being restarted! Communication with the server might not work for a short while..."},"restart:frontend":function(){return"A new version of the application is available! <a href='javascript:window.location.reload()'>Click here to reload the browser</a>..."}},pl:!0}}),define("app/nls/locale/pl",[],function(){var e={locale:{}};return e.locale.pl=function(e){return 1==e?"one":e%10>=2&&4>=e%10&&(12>e%100||e%100>14)&&e==Math.floor(e)?"few":e%10===0||1!=e&&e%10==1||(e%10>=5&&9>=e%10||e%100>=12&&14>=e%100)&&e==Math.floor(e)?"many":"other"}}),define("app/nls/pl/updater",["app/nls/locale/pl"],function(e){return{"restart:backend":function(){return"Serwer aplikacji jest restartowany! Komunikacja z serwerem mo≈ºe przez chwilƒô nie dzia≈Çaƒá..."},"restart:frontend":function(){return"Dostƒôpna jest nowa wersja aplikacji! <a href='javascript:window.location.reload()'>Kliknij tutaj aby prze≈Çadowaƒá przeglƒÖdarkƒô</a>..."}}}),define("app/updater/index",["../broker","../pubsub","../socket","../viewport","../time","./views/RestartMessageView","app/updater/templates/backendRestart","app/updater/templates/frontendRestart","i18n!app/nls/updater"],function(e,t,n,r,i,o,a,s){function u(){h.versions.time=Date.now(),localStorage.setItem(f,JSON.stringify(h.versions))}function c(){y||(y=!0,E&&(null!==g&&g.remove(),g=new o({template:a,type:"backend"}),r.insertView(g).render(),g.$el.slideDown()),e.subscribe("socket.connected").setLimit(1).on("message",function(){y=!1,null!==g&&g.$el.slideUp(function(){"backend"===g.options.type&&(g.remove(),g=null)}),e.publish("updater.backendRestarted")}),e.publish("updater.backendRestarting"))}function l(){v||(v=!0,window.addEventListener("mousemove",d),window.addEventListener("keypress",d),E&&(null!==g&&g.remove(),g=new o({template:s,type:"frontend"}),r.insertView(g).render(),g.$el.slideDown()),e.publish("updater.frontendRestarting"),d())}function d(){clearTimeout(m),m=setTimeout(p,6e4)}function p(){n.isConnected()&&(w=!0,e.publish("updater.frontendReloading"),window.location.reload())}var f="VERSIONS",h={},m=null,g=null,y=!1,v=!1,w=!1,E=!0,b=window[f],T=JSON.parse(localStorage.getItem(f)||"null");return delete window[f],h.versions=T&&T.time>i.appData?T:b,h.isRestarting=function(){return y||v},h.isBackendRestarting=function(){return y},h.isFrontendRestarting=function(){return v},h.isFrontendReloading=function(){return w},h.enableViews=function(){E=!0},h.disableViews=function(){E=!1},h.pull=function(e){n.emit("updater.pull",e)},h.getCurrentVersionString=function(){return h.versions.package},u(),n.on("updater.versions",function(e){var t=h.versions;h.versions=e,u(),e.frontend!==t.frontend&&l()}),t.subscribe("updater.newVersion",function(t){e.publish("updater.newVersion",t),"backend"===t.service?c():"frontend"===t.service&&l()}),window.updater=h,h}),define("app/core/PaginationData",["underscore","backbone"],function(e,t){return t.Model.extend({defaults:{totalCount:-1,urlTemplate:"?page=${page}&limit=${limit}",page:1,skip:0,limit:10},initialize:function(){this.on("change",this.recalcAttrs,this);var e=this.attributes;e.page<1&&(e.page=1),e.skip<0&&(e.skip=0),e.limit<1&&(e.limit=1),0!==e.skip?this.recalcPage():1!==e.page?this.recalcSkip():this.adjustSkipToLimit()},sync:function(){throw new Error("Not supported!")},recalcAttrs:function(){var t=this.changedAttributes();e.has(t,"total")||e.has(t,"skip")||e.has(t,"limit")?this.recalcPage():e.has(t,"page")&&this.recalcSkip()},recalcPage:function(){this.adjustSkipToLimit();var e=this.attributes;e.page=e.skip/e.limit+1},recalcSkip:function(){var e=this.attributes;e.skip=(e.page-1)*e.limit},adjustSkipToLimit:function(){var e=this.attributes;e.skip>=e.total&&(e.skip=e.total<2?1:e.total-1);var t=e.skip%e.limit;0!==t&&(e.skip-=t)}})}),define("app/core/Collection",["underscore","backbone","h5.rql/index","./util","./PaginationData"],function(e,t,n,r,i){function o(n,r){e.isObject(r)||(r={}),this.rqlQuery=this.createRqlQuery(r.rqlQuery||this.rqlQuery),this.paginationData=r.paginate!==!1?new i:null,this.url||(this.url=this.model.prototype.urlRoot),t.Collection.call(this,n,r),this.paginationData&&this.listenTo(this.paginationData,"change:page",this.onPageChanged)}return r.inherits(o,t.Collection),o.prototype.parse=function(e){return this.paginationData&&this.paginationData.set({totalCount:e.totalCount,urlTemplate:this.genPaginationUrlTemplate(),skip:this.rqlQuery.skip,limit:this.rqlQuery.limit}),e.collection},o.prototype.sync=function(e,n,r){return"read"!==e||r.data||(r.data=this.rqlQuery.toString()),t.Collection.prototype.sync.call(this,e,n,r)},o.prototype.genClientUrl=function(e){if(null===this.model.prototype.clientUrlRoot)throw new Error("Model's `clientUrlRoot` was not specified");var t=this.model.prototype.clientUrlRoot;return"string"==typeof e&&(t+=";"+e),t},o.prototype.getTopicPrefix=function(){return this.topicPrefix||this.model.prototype.topicPrefix},o.prototype.getPrivilegePrefix=function(){return this.privilegePrefix||this.model.prototype.privilegePrefix},o.prototype.getNlsDomain=function(){return this.nlsDomain||this.model.prototype.nlsDomain},o.prototype.createRqlQuery=function(t){return e.isString(t)?t=n.parse(t):e.isFunction(t)?t=t.call(this,n):e.isObject(t)&&(t=n.Query.fromObject(t)),t&&!t.isEmpty()?t:e.isString(this.rqlQuery)?n.parse(this.rqlQuery):e.isFunction(this.rqlQuery)?this.rqlQuery.call(this,n):e.isObject(this.rqlQuery)?n.Query.fromObject(this.rqlQuery):new n.Query},o.prototype.genPaginationUrlTemplate=function(){var e=this.rqlQuery,t=e.skip,n=e.limit;e.skip="${skip}",e.limit="${limit}";var r=this.genClientUrl()+"?"+e.toString();return e.skip=t,e.limit=n,r},o.prototype.onPageChanged=function(e,t){this.rqlQuery.skip=(t-1)*this.rqlQuery.limit,this.fetch({reset:!0})},o}),define("app/core/Model",["backbone"],function(e){return e.Model.extend({idAttribute:"_id",urlRoot:"/",clientUrlRoot:null,topicPrefix:null,privilegePrefix:null,nlsDomain:null,labelAttribute:null,genClientUrl:function(e){if(null===this.clientUrlRoot)throw new Error("`clientUrlRoot` was not specified");var t=this.clientUrlRoot;return"base"===e?t:(t+="/",t+=encodeURIComponent(this.isNew()?this.cid:this.id),"string"==typeof e&&(t+=";"+e),t)},getTopicPrefix:function(){return this.topicPrefix},getPrivilegePrefix:function(){return this.privilegePrefix},getNlsDomain:function(){return this.nlsDomain||"core"},getLabelAttribute:function(){return this.labelAttribute||this.idAttribute},getLabel:function(){return String(this.get(this.getLabelAttribute()))}})}),define("app/divisions/Division",["../core/Model"],function(e){return e.extend({urlRoot:"/divisions",clientUrlRoot:"#divisions",topicPrefix:"divisions",privilegePrefix:"DICTIONARIES",nlsDomain:"divisions",labelAttribute:"_id",defaults:{type:"prod",description:null}})}),define("app/divisions/DivisionCollection",["../core/Collection","./Division"],function(e,t){return e.extend({model:t,rqlQuery:"select(type,description)&sort(_id)",comparator:"_id"})}),define("app/data/createStorage",["app/time","app/broker","app/pubsub"],function(e,t,n){return function(r,i,o){function a(){localStorage.setItem(r,JSON.stringify({time:Date.now(),data:l.models})),t.publish(i+".synced")}var s={time:e.appData,data:window[r]||[]},u=JSON.parse(localStorage.getItem(r)||"null"),c=u&&u.time>s.time?u:s,l=new o(c.data);return c===s&&a(),l.on("add",a),l.on("remove",a),l.on("destroy",a),l.on("change",a),l.on("sync",a),n.subscribe(i+".added",function(e){l.add(e.model)}),n.subscribe(i+".edited",function(e){var t=l.get(e.model._id);t?t.set(e.model):l.add(e.model)}),n.subscribe(i+".deleted",function(e){l.remove(e.model._id)}),l}}),define("app/data/divisions",["app/divisions/DivisionCollection","./createStorage"],function(e,t){return t("DIVISIONS","divisions",e)}),define("app/subdivisions/Subdivision",["../core/Model"],function(e){return e.extend({urlRoot:"/subdivisions",clientUrlRoot:"#subdivisions",topicPrefix:"subdivisions",privilegePrefix:"DICTIONARIES",nlsDomain:"subdivisions",labelAttribute:"name",defaults:{division:null,type:"assembly",name:null,prodTaskTags:null,aor:null}})}),define("app/subdivisions/SubdivisionCollection",["../core/Collection","./Subdivision"],function(e,t){return e.extend({model:t,rqlQuery:"select(division,type,name,prodTaskTags,aor)&sort(division,name)",comparator:"type"})}),define("app/data/subdivisions",["app/subdivisions/SubdivisionCollection","./createStorage"],function(e,t){return t("SUBDIVISIONS","subdivisions",e)}),define("app/user",["underscore","app/i18n","app/broker","app/socket","app/viewport","app/data/divisions","app/data/subdivisions","app/core/pages/ErrorPage"],function(e,t,n,r,i,o,a,s){var u=null;-1!==window.location.search.indexOf("COMPUTERNAME=")&&window.location.search.substr(1).split("&").forEach(function(e){e=e.split("="),"COMPUTERNAME"===e[0]&&e[1]&&(u=e[1])});var c={};return r.on("user.reload",function(e){c.reload(e)}),c.data=e.extend(window.GUEST_USER||{},{name:t.bound("core","GUEST_USER_NAME")}),delete window.GUEST_USER,c.reload=function(r){if(!e.isEqual(r,c.data)){var i=c.isLoggedIn();e.isObject(r)&&Object.keys(r).length>0&&(r.loggedIn===!1&&(r.name=t.bound("core","GUEST_USER_NAME")),c.data=r),n.publish("user.reloaded"),i&&!c.isLoggedIn()?n.publish("user.loggedOut"):!i&&c.isLoggedIn()&&n.publish("user.loggedIn")}},c.isLoggedIn=function(){return c.data.loggedIn===!0},c.getLabel=function(){return c.data.name?String(c.data.name):c.data.lastName&&c.data.firstName?c.data.firstName+" "+c.data.lastName:c.data.login},c.getInfo=function(){return{id:c.data._id,ip:c.data.ip||c.data.ipAddress||"0.0.0.0",cname:u,label:c.getLabel()}},c.isAllowedTo=function(e){if(c.data.super)return!0;var t=c.data.privileges,n=(1===arguments.length?[e]:Array.prototype.slice.call(arguments)).map(function(e){return Array.isArray(e)?e:[e]});if(n.length&&c.data.local&&n[0].some(function(e){return"LOCAL"===e}))return!0;if(!t)return!1;if(!n.length)return c.isLoggedIn();for(var r=0,i=n.length;i>r;++r){for(var o=n[r],a=0,s=o.length,u=0;s>u;++u)a+=-1===t.indexOf(o[u])?0:1;if(a===s)return!0}return!1},c.hasAccessToAor=function(e){return!e||c.data.super||!c.data.aors||!c.data.aors.length||-1!==c.data.aors.indexOf(e)},c.auth=function(){var e=Array.prototype.slice.call(arguments);return function(t,n,r){c.isAllowedTo.apply(c,e)?r():i.showPage(new s({code:401,req:t,referer:n}))}},c.getDivision=function(){var e=null;switch(c.data.orgUnitType){case"division":e=c.data.orgUnitId;break;case"subdivision":var t=a.get(c.data.orgUnitId);t&&(e=t.get("division"))}return o.get(e)||null},c.getSubdivision=function(){return"subdivision"!==c.data.orgUnitType?null:a.get(c.data.orgUnitId)||null},c.getRootUserData=function(){return window.ROOT_USER||{id:null,login:"root",name:"root",loggedIn:!0,"super":!0,privileges:[]}},window.user=c,c}),define("app/core/templates/pageLayout",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="page">\n  <div class="hd">\n    <nav class="navbar navbar-default"></nav>\n    <div class="page-alerts"></div>\n    <div class="page-header">\n      <ul class="page-actions"></ul>\n      <ul class="page-breadcrumbs"></ul>\n    </div>\n  </div>\n  <div class="bd"></div>\n  <div class="ft">\n    <p>\n      WMES v',version,'<br>\n      <a href="http://miracle.systems/">miracle.systems</a>\n    </p>\n  </div>\n</div>\n')}();return buf.join("")}}),define("app/core/layouts/PageLayout",["underscore","jquery","app/user","../View","app/core/templates/pageLayout"],function(e,t,n,r,i){var o=r.extend({pageContainerSelector:".bd",template:i});return o.prototype.initialize=function(){this.model={id:null,actions:[],breadcrumbs:[],title:null},this.$header=null,this.$breadcrumbs=null,this.$actions=null},o.prototype.destroy=function(){this.el.ownerDocument&&this.el.ownerDocument.body.classList.remove("page"),this.$breadcrumbs=null,this.$actions=null},o.prototype.serialize=function(){return e.extend(r.prototype.serialize.call(this),{version:this.options.version})},o.prototype.afterRender=function(){this.el.ownerDocument&&this.el.ownerDocument.body.classList.add("page"),this.$header=this.$(".page-header").first(),this.$breadcrumbs=this.$(".page-breadcrumbs").first(),this.$actions=this.$(".page-actions").first(),this.changeTitle(),this.renderBreadcrumbs(),this.renderActions(),null!==this.model.id&&this.setId(this.model.id)},o.prototype.reset=function(){this.setId(null),this.model.title=null,this.$header&&this.$header.hide(),this.$breadcrumbs&&(this.model.breadcrumbs=[],this.$breadcrumbs.empty()),this.$actions&&(this.model.actions=[],this.$actions.empty()),this.removeView(this.pageContainerSelector)},o.prototype.setUpPage=function(e){e.pageId&&this.setId(e.pageId),e.breadcrumbs?this.setBreadcrumbs(e.breadcrumbs,e):e.title?this.setTitle(e.title,e):this.changeTitle(),e.actions&&this.setActions(e.actions,e)},o.prototype.setId=function(e){return this.isRendered()&&this.$el.attr("data-id",e),this.model.id=e,this},o.prototype.setBreadcrumbs=function(e,t){return null==e?this:("function"==typeof e&&(e=e.call(t,this)),Array.isArray(e)||(e=[e]),this.model.breadcrumbs=e.map(function(e){var t=typeof e;return("string"===t||"function"===t)&&(e={label:e,href:null}),"string"==typeof e.href&&"#"!==e.href[0]&&(e.href="#"+e.href),e}),this.$breadcrumbs&&this.renderBreadcrumbs(),this.changeTitle(),this)},o.prototype.setTitle=function(e,t){return null==e?this:("function"==typeof e&&(e=e.call(t,this)),Array.isArray(e)||(e=[e]),this.model.title=e,this.changeTitle(),this)},o.prototype.setActions=function(e,t){return null==e?this:("function"==typeof e&&(e=e.call(t,this)),e?(Array.isArray(e)||(e=[e]),this.model.actions=e.map(this.prepareAction.bind(this)),this.$actions&&this.renderActions(),this):this)},o.prototype.prepareAction=function(e){if(e.prepared)return e;if("string"==typeof e.href){var t=e.href.charAt(0);"#"!==t&&"/"!==t&&(e.href="#"+e.href)}else e.href=null;return"string"==typeof e.icon&&(e.icon="fa-"+e.icon.split(" ").join(" fa-")),"string"!=typeof e.className&&(e.className=""),e.className="btn btn-"+(e.type||"default")+" "+e.className,e.prepared=!0,e},o.prototype.renderBreadcrumbs=function(){for(var e=this.model.breadcrumbs,t="",n=0,r=e.length;r>n;++n){var i=e[n];t+="<li>",t+=n!==r-1&&i.href?'<a href="'+i.href+'">'+i.label+"</a>":i.label}this.$breadcrumbs.html(t),this.$header.show()},o.prototype.renderActions=function(){for(var t=this.model.actions,r={},i={},o="",a=0,s=t.length;s>a;++a){var u=t[a];if(u.privileges)if(e.isFunction(u.privileges)){if(!u.privileges())continue}else if(!n.isAllowedTo(u.privileges))continue;"function"==typeof u.callback&&(r[a]=u.callback.bind(this)),"function"==typeof u.afterRender&&(i[a]=u.afterRender.bind(this)),o+='<li data-index="'+a+'">',"function"==typeof u.template?o+=u.template(u):(o+=null===u.href?'<button class="'+u.className+'">':'<a class="'+u.className+'" href="'+u.href+'">',"string"==typeof u.icon&&(o+='<i class="fa '+u.icon+'"></i>'),o+="<span>"+u.label+"</span>"+(u.href?"</a>":"</button>"))}this.$actions.html(o);var c=this.$actions.find("li");Object.keys(r).forEach(function(e){c.filter('li[data-index="'+e+'"]').click(t[e].callback)}),Object.keys(i).forEach(function(e){i[e](c.filter('li[data-index="'+e+'"]'),t[e])}),this.$header.show()},o.prototype.changeTitle=function(){if(this.isRendered()){var t=Array.isArray(this.model.title)?[].concat(this.model.title):e.pluck(this.model.breadcrumbs,"label");this.broker.publish("page.titleChanged",t)}},o}),define("app/core/templates/printLayout",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="printLayout">\n  <div class="print-pages">\n    <div class="print-page">\n      <div class="print-page-hd">\n        <p class="print-page-hd-right"></p>\n        <p class="print-page-hd-left"></p>\n      </div>\n      <div class="print-page-bd"></div>\n      <div class="print-page-ft">\n        <p class="print-page-ft-right">',t("emptyOrders","PRINT_PAGE:FT:PAGE_NO"),'</p>\n        <p class="print-page-ft-left">',t("emptyOrders","PRINT_PAGE:FT:INFO"),"</p>\n      </div>\n    </div>\n  </div>\n</div>\n")}();return buf.join("")}}),define("app/core/layouts/PrintLayout",["underscore","jquery","app/time","app/user","../View","app/core/templates/printLayout"],function(e,t,n,r,i,o){var a=i.extend({pageContainerSelector:".print-page-bd",template:o});return a.prototype.initialize=function(){this.model={id:null,actions:[],breadcrumbs:[]}},a.prototype.destroy=function(){this.el.ownerDocument&&this.el.ownerDocument.body.classList.remove("print")},a.prototype.afterRender=function(){this.changeTitle(),null!==this.model.id&&this.setId(this.model.id),this.el.ownerDocument&&this.el.ownerDocument.body.classList.add("print")},a.prototype.reset=function(){this.setId(null),this.model.breadcrumbs=[],this.removeView(this.pageContainerSelector)},a.prototype.setUpPage=function(e){e.pageId&&this.setId(e.pageId),e.breadcrumbs?this.setBreadcrumbs(e.breadcrumbs,e):this.changeTitle(),this.listenTo(e,"afterRender",this.fitToPrintablePage)},a.prototype.setId=function(e){return this.isRendered()&&this.$el.attr("data-id",e),this.model.id=e,this},a.prototype.setBreadcrumbs=function(e,t){return null==e?this:("function"==typeof e&&(e=e.call(t)),Array.isArray(e)||(e=[e]),this.model.breadcrumbs=e.map(function(e){var t=typeof e;return("string"===t||"function"===t)&&(e={label:e}),e}),this.changeTitle(),this)},a.prototype.changeTitle=function(){this.isRendered()&&this.broker.publish("page.titleChanged",e.pluck(this.model.breadcrumbs,"label"))},a.prototype.fitToPrintablePage=function(i){var o=this.$(".print-pages"),a=o.find(".print-page"),s=a.find(".print-page-hd"),u=a.find(".print-page-ft"),c=a.find(".print-page-bd"),l=t('<div class="print-page-bd-container"></div>');a.toggleClass("is-landscape",!!i.landscape),e.isFunction(i.hdLeft)&&s.find(".print-page-hd-left").text(i.hdLeft.call(i)),e.isFunction(i.hdRight)&&s.find(".print-page-hd-right").text(i.hdRight.call(i));var d,p=i.landscape?792:1122,f={top:parseFloat(a.css("padding-top"))||0,left:parseFloat(a.css("padding-left"))||0,right:parseFloat(a.css("padding-right"))||0,bottom:parseFloat(a.css("padding-bottom"))||0},h=s.outerHeight(!0),m=u.outerHeight(!0),g=p-f.top-f.bottom-h-m;d=e.isFunction(i.fitToPrintablePage)?i.fitToPrintablePage.call(i,g):e.isObject(i.view)&&e.isFunction(i.view.fitToPrintablePage)?i.view.fitToPrintablePage.call(i,g):[i.$el.detach()],l.height(g),c.wrap(l),a.detach(),d.forEach(function(e,t){var n=a.clone();n.find(".print-page-bd").append(e),n.find(".print-page-no").text(t+1),n.addClass("print-page-fit"),o.append(n)}),a.remove(),this.$(".print-page-count").text(d.length),this.$(".print-page-date").text(n.format(Date.now(),"LLL")),this.$(".print-page-user").text(r.data.name||r.data.login)},a}),define("app/core/templates/blankLayout",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="blankLayout">\n  <div class="blank-page-bd"></div>\n</div>\n')}();return buf.join("")}}),define("app/core/layouts/BlankLayout",["underscore","jquery","app/user","../View","app/core/templates/blankLayout"],function(e,t,n,r,i){var o=r.extend({pageContainerSelector:".blank-page-bd",template:i});return o.prototype.initialize=function(){this.model={breadcrumbs:[]}},o.prototype.afterRender=function(){this.changeTitle()},o.prototype.reset=function(){this.removeView(this.pageContainerSelector)},o.prototype.setUpPage=function(e){e.breadcrumbs?this.setBreadcrumbs(e.breadcrumbs,e):this.changeTitle()},o.prototype.setBreadcrumbs=function(e,t){return null==e?this:("function"==typeof e&&(e=e.call(t)),Array.isArray(e)||(e=[e]),this.model.breadcrumbs=e.map(function(e){var t=typeof e;return("string"===t||"function"===t)&&(e={label:e}),e}),this.changeTitle(),this)},o.prototype.changeTitle=function(){this.isRendered()&&this.broker.publish("page.titleChanged",e.pluck(this.model.breadcrumbs,"label"))},o}),define("app/core/templates/navbar",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="navbar-inner">\n  '+function(){var e=[];return e.push('<div class="navbar-header">\n  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">\n    <span class="sr-only">',t("core","NAVBAR:TOGGLE"),'</span>\n    <span class="icon-bar"></span>\n    <span class="icon-bar"></span>\n    <span class="icon-bar"></span>\n  </button>\n  <a class="navbar-brand fa fa-cogs" href="#"></a>\n</div>\n'),e.join("")}()+'\n  <div class="collapse navbar-collapse">\n    <ul class="nav navbar-nav">\n      <li><a href="#">',t("core","NAVBAR:DASHBOARD"),'</a>\n      <li data-online data-privilege="EVENTS:VIEW" data-module><a href="#events">',t("core","NAVBAR:EVENTS"),"</a>\n      "+function(){var e=[];return e.push('<li data-online data-module="fte" class="dropdown">\n  <a class="dropdown-toggle" data-toggle="dropdown">\n    ',t("core","NAVBAR:FTE"),'\n    <b class="caret"></b>\n  </a>\n  <ul class="dropdown-menu">\n    <li class="dropdown-header">',t("core","NAVBAR:FTE:MASTER"),'\n    <li data-privilege="FTE:MASTER:VIEW"><a href="#fte/master">',t("core","NAVBAR:FTE:MASTER:LIST"),'</a>\n    <li data-privilege="FTE:MASTER:MANAGE"><a href="#fte/master;add">',t("core","NAVBAR:FTE:MASTER:CURRENT"),'</a>\n    <li class="divider">\n    <li class="dropdown-header">',t("core","NAVBAR:FTE:LEADER"),'\n    <li data-privilege="FTE:LEADER:VIEW"><a href="#fte/leader">',t("core","NAVBAR:FTE:LEADER:LIST"),'</a>\n    <li data-privilege="FTE:LEADER:MANAGE"><a href="#fte/leader;add">',t("core","NAVBAR:FTE:LEADER:CURRENT"),"</a>\n  </ul>\n"),e.join("")}()+'\n      <li data-online data-privilege="HOURLY_PLANS:VIEW" data-module><a href="#hourlyPlans">',t("core","NAVBAR:HOURLY_PLANS"),'</a>\n      <li data-online data-privilege="PURCHASE_ORDERS:VIEW" data-module><a href="#purchaseOrders">',t("core","NAVBAR:PURCHASE_ORDERS"),"</a>\n      "+function(){var e=[];return e.push('<li data-online class="dropdown">\n  <a class="dropdown-toggle" data-toggle="dropdown">\n    ',t("core","NAVBAR:PROD"),'\n    <b class="caret"></b>\n  </a>\n  <ul class="dropdown-menu">\n    <li class="dropdown-header">',t("core","NAVBAR:MONITORING"),'\n    <li data-privilege="LOCAL PROD_DATA:VIEW" data-module><a href="#factoryLayout/default">',t("core","NAVBAR:MONITORING:LAYOUT"),'</a>\n    <li data-privilege="LOCAL PROD_DATA:VIEW" data-module><a href="#factoryLayout;list">',t("core","NAVBAR:MONITORING:LIST"),'</a>\n    <li class="divider">\n    <li class="dropdown-header">',t("core","NAVBAR:PROD:DATA"),'\n    <li data-privilege="LOCAL PRESS_WORKSHEETS:VIEW" data-module><a href="#pressWorksheets">',t("core","NAVBAR:PRESS_WORKSHEETS"),'</a>\n    <li data-privilege="LOCAL PROD_DATA:VIEW" data-module><a href="#prodLogEntries">',t("core","NAVBAR:PROD:LOG_ENTRIES"),'</a>\n    <li data-privilege="LOCAL PROD_DATA:VIEW" data-module><a href="#prodShifts">',t("core","NAVBAR:PROD:SHIFTS"),'</a>\n    <li data-privilege="LOCAL PROD_DATA:VIEW" data-module><a href="#prodShiftOrders">',t("core","NAVBAR:PROD:SHIFT_ORDERS"),'</a>\n    <li data-privilege="LOCAL PROD_DOWNTIMES:VIEW" data-module><a href="#prodDowntimes">',t("core","NAVBAR:PROD:DOWNTIMES"),"</a>\n  </ul>\n"),e.join("")}()+"\n      "+function(){var e=[];return e.push('<li data-online class="dropdown">\n  <a class="dropdown-toggle" data-toggle="dropdown">\n    ',t("core","NAVBAR:PROGRAMMING"),'\n    <b class="caret"></b>\n  </a>\n  <ul class="dropdown-menu">\n    <li class="dropdown-header">',t("core","NAVBAR:XICONF"),'\n    <li data-privilege="XICONF:VIEW" data-module="xiconf"><a href="#xiconfPrograms">',t("core","NAVBAR:XICONF:PROGRAMS"),'</a>\n    <li data-privilege="XICONF:VIEW" data-module><a href="#xiconf/results">',t("core","NAVBAR:XICONF:RESULTS"),'</a>\n    <li class="divider">\n    <li class="dropdown-header">',t("core","NAVBAR:ICPO"),'\n    <li data-privilege="ICPO:VIEW" data-module><a href="#icpo/results">',t("core","NAVBAR:ICPO:RESULTS"),"</a>\n  </ul>\n"),e.join("")}()+"\n      "+function(){var e=[];return e.push('<li class="dropdown" data-online data-module="reports" data-privilege="REPORTS:VIEW">\n  <a class="dropdown-toggle" data-toggle="dropdown">\n    ',t("core","NAVBAR:REPORTS"),'\n    <b class="caret"></b>\n  </a>\n  <ul class="dropdown-menu">\n    <li><a href="#reports/1">',t("core","NAVBAR:REPORTS:1"),'</a>\n    <li><a href="#reports/2">',t("core","NAVBAR:REPORTS:2"),'</a>\n    <li><a href="#reports/3">',t("core","NAVBAR:REPORTS:3"),'</a>\n    <li><a href="#reports/4">',t("core","NAVBAR:REPORTS:4"),'</a>\n    <li><a href="#reports/5">',t("core","NAVBAR:REPORTS:5"),'</a>\n    <li><a href="#reports/6">',t("core","NAVBAR:REPORTS:6"),'</a>\n    <li class="divider">\n    <li><a href="#vis/structure">',t("core","NAVBAR:VIS:STRUCTURE"),"</a>\n  </ul>\n"),e.join("")}()+"\n      "+function(){var e=[];return e.push('<li data-online class="dropdown">\n  <a class="dropdown-toggle" data-toggle="dropdown">\n    ',t("core","NAVBAR:DICTIONARIES"),'\n    <b class="caret"></b>\n  </a>\n  <ul class="dropdown-menu">\n    <li data-privilege="ORDERS:VIEW" data-module="orders"><a href="#mechOrders">',t("core","NAVBAR:MECH_ORDERS"),'</a>\n    <li data-privilege="ORDERS:VIEW" data-module><a href="#orders">',t("core","NAVBAR:OTHER_ORDERS"),'</a>\n    <li data-privilege="ORDERS:VIEW" data-module="orders"><a href="#emptyOrders">',t("core","NAVBAR:EMPTY_ORDERS"),'</a>\n    <li class="divider">\n    <li data-privilege="USERS:VIEW" data-module><a href="#users">',t("core","NAVBAR:USERS"),'</a>\n    <li class="divider">\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#divisions">',t("core","NAVBAR:DIVISIONS"),'</a>\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#subdivisions">',t("core","NAVBAR:SUBDIVISIONS"),'</a>\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#mrpControllers">',t("core","NAVBAR:MRP_CONTROLLERS"),'</a>\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#prodFlows">',t("core","NAVBAR:PROD_FLOWS"),'</a>\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#workCenters">',t("core","NAVBAR:WORK_CENTERS"),'</a>\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#prodLines">',t("core","NAVBAR:PROD_LINES"),'</a>\n    <li class="divider">\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#companies">',t("core","NAVBAR:COMPANIES"),'</a>\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#vendors">',t("core","NAVBAR:VENDORS"),'</a>\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#prodFunctions">',t("core","NAVBAR:PROD_FUNCTIONS"),'</a>\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#prodTasks">',t("core","NAVBAR:PROD_TASKS"),'</a>\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#orderStatuses">',t("core","NAVBAR:ORDER_STATUSES"),'</a>\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#downtimeReasons">',t("core","NAVBAR:DOWNTIME_REASONS"),'</a>\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#lossReasons">',t("core","NAVBAR:LOSS_REASONS"),'</a>\n    <li data-privilege="DICTIONARIES:VIEW" data-module><a href="#aors">',t("core","NAVBAR:AORS"),"</a>\n  </ul>\n"),e.join("")
}()+"\n    </ul>\n    "+function(){var e=[];return e.push('<ul class="nav navbar-nav navbar-right">\n  <li class="dropdown navbar-account-dropdown">\n    <a href="#account" class="dropdown-toggle" data-toggle="dropdown">\n      <i class="fa fa-user fa-lg navbar-account-status"></i>\n      ',user.getLabel(),'\n      <b class="caret"></b>\n    </a>\n    <ul class="dropdown-menu">\n      <li data-online data-loggedin><a href="#users/',user.data._id,'">',t("core","NAVBAR:MY_ACCOUNT"),'</a>\n      <li class="divider">\n      <li class="dropdown-header">',t("core","NAVBAR:UI_LOCALE"),'\n      <li><a class="navbar-account-locale" href="#" data-locale="pl">',t("core","NAVBAR:LOCALE_PL"),'</a>\n      <li><a class="navbar-account-locale" href="#" data-locale="en">',t("core","NAVBAR:LOCALE_US"),'</a>\n      <li class="divider">\n      <li data-online data-loggedin=0><a class="navbar-account-logIn" href="#login">',t("core","NAVBAR:LOG_IN"),'</a>\n      <li data-online data-loggedin><a class="navbar-account-logOut" href="/logout">',t("core","NAVBAR:LOG_OUT"),'</a>\n    </ul>\n  </li>\n</ul>\n<!--\n<button class="btn btn-warning navbar-btn navbar-right navbar-feedback" type="button" title="',t("core","feedback:button:tooltip"),'">',t("core","feedback:button:text"),"</button>\n//-->\n"),e.join("")}()+"\n  </div>\n</div>\n")}();return buf.join("")}}),define("app/core/views/NavbarView",["underscore","app/i18n","app/user","../View","app/core/templates/navbar"],function(e,t,n,r,i){var o=r.extend({template:i,localTopics:{"router.executing":function(e){this.activateNavItem(this.getModuleNameFromPath(e.req.path))},"socket.connected":function(){this.setConnectionStatus("online")},"socket.connecting":function(){this.setConnectionStatus("connecting")},"socket.connectFailed":function(){this.setConnectionStatus("offline")},"socket.disconnected":function(){this.setConnectionStatus("offline")}},events:{"click .disabled a":function(e){e.preventDefault()},"click .navbar-account-locale":function(e){e.preventDefault(),this.changeLocale(e.currentTarget.getAttribute("data-locale"))},"click .navbar-account-logIn":function(e){e.preventDefault(),this.trigger("logIn")},"click .navbar-account-logOut":function(e){e.preventDefault(),this.trigger("logOut")},"click .navbar-feedback":function(e){e.preventDefault(),e.target.disabled=!0,this.trigger("feedback",function(){e.target.disabled=!1})}}});return o.DEFAULT_OPTIONS={currentPath:"/",activeItemClassName:"active",offlineStatusClassName:"navbar-status-offline",onlineStatusClassName:"navbar-status-online",connectingStatusClassName:"navbar-status-connecting",loadedModules:[]},o.prototype.initialize=function(){e.defaults(this.options,o.DEFAULT_OPTIONS),this.activeModuleName="",this.navItems=null,this.$activeNavItem=null,this.loadedModules={},this.options.loadedModules.forEach(function(e){this.loadedModules[e]=!0},this),this.activateNavItem(this.getModuleNameFromPath(this.options.currentPath))},o.prototype.beforeRender=function(){this.navItems=null,this.$activeNavItem=null},o.prototype.afterRender=function(){this.selectActiveNavItem(),this.setConnectionStatus(this.socket.isConnected()?"online":"offline"),this.hideNotAllowedEntries(),this.hideEmptyEntries()},o.prototype.serialize=function(){return{user:n}},o.prototype.activateNavItem=function(e){e!==this.activeModuleName&&(this.activeModuleName=e,this.selectActiveNavItem())},o.prototype.changeLocale=function(e){t.reload(e)},o.prototype.setConnectionStatus=function(e){if(this.isRendered()){var t=this.$(".navbar-account-status");t.removeClass(this.options.offlineStatusClassName).removeClass(this.options.onlineStatusClassName).removeClass(this.options.connectingStatusClassName),t.addClass(this.options[e+"StatusClassName"]),this.toggleConnectionStatusEntries("online"===e)}},o.prototype.getModuleNameFromLi=function(e,t){if(void 0===e.dataset.module&&!t)return null;if(e.dataset.module)return e.dataset.module;var n=e.querySelector("a");if(!n)return null;var r=n.getAttribute("href");return r?this.getModuleNameFromPath(r):null},o.prototype.getModuleNameFromPath=function(e){if(("/"===e[0]||"#"===e[0])&&(e=e.substr(1)),""===e)return"";var t=e.match(/^([a-z0-9][a-z0-9\-]*[a-z0-9]*)/i);return t?t[1]:null},o.prototype.selectActiveNavItem=function(){if(this.isRendered()){null===this.navItems&&this.cacheNavItems();var t=this.options.activeItemClassName;null!==this.$activeNavItem&&this.$activeNavItem.removeClass(t);var n=this.navItems[this.activeModuleName];e.isUndefined(n)?this.$activeNavItem=null:(n.addClass(t),this.$activeNavItem=n)}},o.prototype.cacheNavItems=function(){this.navItems={},this.$(".nav > li").each(this.cacheNavItem.bind(this))},o.prototype.cacheNavItem=function(e,t){var n=this.$(t);n.hasClass(this.options.activeItemClassName)&&(this.$activeNavItem=n);var r=n.find("a").attr("href");if(r&&"#"===r[0]){var i=this.getModuleNameFromLi(n[0],!0);this.navItems[i]=n}else if(n.hasClass("dropdown")){var o=this;n.find(".dropdown-menu > li").each(function(){var e=o.getModuleNameFromLi(this,!0);o.navItems[e]=n})}},o.prototype.hideNotAllowedEntries=function(){function e(n){if(!n.hasClass("dropdown"))return!0;var i=!0;return n.find("> .dropdown-menu > li").each(function(){var o=n.find(this);if(!t(o)){var a=r(o)&&e(o);o.toggle(a),i=i||a}}),i}function t(e){return e.hasClass("divider")?(s.push(e),!0):e.hasClass("dropdown-header")?(a.push(e),!0):!1}function r(e){var t=e.attr("data-loggedin");if("string"==typeof t&&(t="0"!==t,t!==o))return!1;var r=i.getModuleNameFromLi(e[0],!1);if(null!==r&&!i.loadedModules[r])return!1;var a=e.attr("data-privilege");return void 0===a||n.isAllowedTo.apply(n,a.split(" "))}var i=this,o=n.isLoggedIn(),a=[],s=[];this.$(".navbar-nav > li").each(function(){var n=i.$(this);t(n)||n.toggle(r(n)&&e(n))}),a.forEach(function(e){e.toggle(this.hasVisibleSiblings(e,"next"))},this),s.forEach(function(e){e.toggle(this.hasVisibleSiblings(e,"prev")&&this.hasVisibleSiblings(e,"next"))},this)},o.prototype.hasVisibleSiblings=function(e,t){var n=e[t+"All"]().filter(function(){return"none"!==this.style.display});if(!n.length)return!1;var r=n.first();return!r.hasClass("divider")},o.prototype.hideEmptyEntries=function(){var e=this;this.$(".dropdown > .dropdown-menu").each(function(){var t=e.$(this),n=!1;t.children().each(function(){n=n||"none"!==this.style.display}),n||t.parent().hide()})},o.prototype.toggleConnectionStatusEntries=function(e){var t=this;this.$("li[data-online]").each(function(){var n=t.$(this);if("undefined"!=typeof n.attr("data-disabled"))return n.addClass("disabled");switch(n.attr("data-online")){case"show":n[e?"show":"hide"]();break;case"hide":n[e?"hide":"show"]();break;default:n[e?"removeClass":"addClass"]("disabled")}})},o}),define("app/core/templates/logInForm",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<form class="logInForm" method="post" action="/login">\n  <div class="form-group">\n    <input name="login" type="text" class="form-control input-lg" placeholder="',t("core","LOG_IN_FORM:LABEL:LOGIN"),'" autofocus>\n  </div>\n  <div class="form-group">\n    <input name="password" type="password" class="form-control input-lg" placeholder="',t("core","LOG_IN_FORM:LABEL:PASSWORD"),'">\n  </div>\n  <button class="btn btn-block btn-lg btn-primary logInForm-submit" type="submit">\n    <i class="fa fa-spinner fa-spin logInForm-submit-spinner"></i>\n    <span class="logInForm-submit-label">',t("core","LOG_IN_FORM:LABEL:SUBMIT"),"</span>\n  </button>\n</form>\n")}();return buf.join("")}}),define("app/core/views/LogInFormView",["app/user","../View","app/core/templates/logInForm"],function(e,t,n){return t.extend({template:n,events:{submit:"submitForm","keypress input":function(){this.$submitEl.removeClass("btn-danger").addClass("btn-primary")}},destroy:function(){this.$submitEl=null},afterRender:function(){this.$('input[name="login"]').focus(),this.$submitEl=this.$(".logInForm-submit")},submitForm:function(){if(!this.$submitEl.hasClass("btn-primary"))return!1;var t={login:this.$("[name=login]").val(),password:this.$("[name=password]").val(),socketId:this.socket.getId()};if(0===t.login.length||0===t.password.length)return!1;this.$el.addClass("logInForm-loading"),this.$submitEl.attr("disabled",!0);var n=this.ajax({type:"POST",url:this.el.action,data:JSON.stringify(t)}),r=this;return n.done(function(t){r.$submitEl.removeClass("btn-primary").addClass("btn-success"),e.reload(t)}),n.fail(function(){r.$submitEl.removeClass("btn-primary").addClass("btn-danger"),r.$submitEl.attr("disabled",!1),r.$el.removeClass("logInForm-loading"),r.$("[autofocus]").focus()}),!1}})}),define("app/core/util/showDeleteFormPage",["app/viewport"],function(e){return function(t,n,r){var i=new t({_id:n.params.id});e.loadPage("app/core/pages/ActionFormPage",function(e){return new e({model:i,actionKey:"delete",successUrl:i.genClientUrl("base"),cancelUrl:r||i.genClientUrl("base"),formMethod:"DELETE",formAction:i.url(),formActionSeverity:"danger"})})}}),define("app/core/templates/colorLabel",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<span class="label ',"string"==typeof className?className:"",'" style="background-color: ',color,'" title="',escape("string"==typeof title?title:""),'">',escape("string"==typeof label?label:color),"</span>\n")}();return buf.join("")}}),define("app/aors/Aor",["../core/Model","app/core/templates/colorLabel"],function(e,t){return e.extend({urlRoot:"/aors",clientUrlRoot:"#aors",topicPrefix:"aors",privilegePrefix:"DICTIONARIES",nlsDomain:"aors",labelAttribute:"name",defaults:{name:null,description:null,color:"#f08f44",refColor:"#ffa85c",refValue:0},serialize:function(){var e=this.toJSON();return e.color=t({color:e.color}),e.refColor=t({color:e.refColor}),e.refValue=e.refValue&&e.refValue.toLocaleString?e.refValue.toLocaleString():"0",e}})}),define("app/aors/AorCollection",["../core/Collection","./Aor"],function(e,t){return e.extend({model:t,rqlQuery:"sort(name)",comparator:"name"})}),define("app/data/aors",["app/aors/AorCollection","./createStorage"],function(e,t){return t("AORS","aors",e)}),define("app/nls/aors",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Areas of responsibility"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the areas of responsibility :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the area of resposibility :("},"MSG:DELETED":function(e){return"Area of resposibility <em>"+t.v(e,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add AOR"},"PAGE_ACTION:edit":function(){return"Edit AOR"},"PAGE_ACTION:delete":function(){return"Delete AOR"},"PANEL:TITLE:details":function(){return"AOR's details"},"PANEL:TITLE:addForm":function(){return"Add AOR form"},"PANEL:TITLE:editForm":function(){return"Edit AOR form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:name":function(){return"Name"},"PROPERTY:description":function(){return"Description"},"PROPERTY:color":function(){return"Value color"},"PROPERTY:refValue":function(){return"Reference [FTE]"},"PROPERTY:refColor":function(){return"Reference color"},"FORM:ACTION:add":function(){return"Add AOR"},"FORM:ACTION:edit":function(){return"Edit AOR"},"FORM:ERROR:addFailure":function(){return"Failed to add the new AOR :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the new AOR :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"AOR deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete AOR"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen AOR?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Are you sure you want to delete the <em>"+t.v(e,"label")+"</em> AOR?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the AOR :-("}},pl:!0}}),define("app/nls/pl/aors",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Obszary odpowiedzialno≈õci"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie obszar√≥w odpowiedzialno≈õci nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie obszaru odpowiedzialno≈õci nie powiod≈Ço siƒô :("},"MSG:DELETED":function(e){return"Obszar odpowiedzialno≈õci <em>"+t.v(e,"label")+"</em> zosta≈Ç usuniƒôty."},"PAGE_ACTION:add":function(){return"Dodaj obszar odpowiedzialno≈õci"},"PAGE_ACTION:edit":function(){return"Edytuj obszar odpowiedzialno≈õci"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ obszar odpowiedzialno≈õci"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy obszaru odpowiedzialno≈õci"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania obszaru odpowiedzialno≈õci"},"PANEL:TITLE:editForm":function(){return"Formularz edycji obszaru odpowiedzialno≈õci"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:name":function(){return"Nazwa"},"PROPERTY:description":function(){return"Opis"},"PROPERTY:color":function(){return"Kolor warto≈õci"},"PROPERTY:refValue":function(){return"Referencja [FTE]"},"PROPERTY:refColor":function(){return"Kolor referencji"},"FORM:ACTION:add":function(){return"Dodaj obszar odpowiedzialno≈õci"},"FORM:ACTION:edit":function(){return"Edytuj obszar odpowiedzialno≈õci"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá obszaru odpowiedzialno≈õci :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá obszaru odpowiedzialno≈õci :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia obszaru odpowiedzialno≈õci"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ obszar odpowiedzialno≈õci"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany obszar odpowiedzialno≈õci?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá obszar odpowiedzialno≈õci <em>"+t.v(e,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá obszaru odpowiedzialno≈õci :-("}}}),define("app/aors/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","../data/aors","./Aor","i18n!app/nls/aors"],function(e,t,n,r,i,o){var a=n.auth("DICTIONARIES:VIEW"),s=n.auth("DICTIONARIES:MANAGE");e.map("/aors",a,function(){t.loadPage(["app/core/pages/ListPage"],function(e){return new e({collection:i,columns:["name","description","color","refColor","refValue"]})})}),e.map("/aors/:id",function(e){t.loadPage(["app/core/pages/DetailsPage","app/aors/templates/details"],function(t,n){return new t({model:new o({_id:e.params.id}),detailsTemplate:n})})}),e.map("/aors;add",s,function(){t.loadPage(["app/core/pages/AddFormPage","app/aors/views/AorFormView"],function(e,t){return new e({FormView:t,model:new o})})}),e.map("/aors/:id;edit",s,function(e){t.loadPage(["app/core/pages/EditFormPage","app/aors/views/AorFormView"],function(t,n){return new t({FormView:n,model:new o({_id:e.params.id})})})}),e.map("/aors/:id;delete",s,r.bind(null,o))}),define("app/companies/Company",["../core/Model","app/core/templates/colorLabel"],function(e,t){return e.extend({urlRoot:"/companies",clientUrlRoot:"#companies",topicPrefix:"companies",privilegePrefix:"DICTIONARIES",nlsDomain:"companies",labelAttribute:"name",defaults:{name:null,fteMasterPosition:-1,fteLeaderPosition:-1,color:"#000000"},serialize:function(){var e=this.toJSON();return e.name||(e.name=e._id),e.color=t({color:e.color}),e}})}),define("app/companies/CompanyCollection",["../core/Collection","./Company"],function(e,t){return e.extend({model:t,rqlQuery:"select(name,fteMasterPosition,fteLeaderPosition,color)&sort(_id)"})}),define("app/data/companies",["app/companies/CompanyCollection","./createStorage"],function(e,t){return t("COMPANIES","companies",e)}),define("app/nls/companies",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Companies"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the companies :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the company :("},"MSG:DELETED":function(e){return"Company <em>"+t.v(e,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add company"},"PAGE_ACTION:edit":function(){return"Edit company"},"PAGE_ACTION:delete":function(){return"Delete company"},"PANEL:TITLE:details":function(){return"Company's details"},"PANEL:TITLE:addForm":function(){return"Add company form"},"PANEL:TITLE:editForm":function(){return"Edit company form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:name":function(){return"Name"},"PROPERTY:fteMasterPosition":function(){return"Position in FTE (production)"},"PROPERTY:fteLeaderPosition":function(){return"Position in FTE (distribution)"},"PROPERTY:color":function(){return"Color"},"FORM:ACTION:add":function(){return"Add company"},"FORM:ACTION:edit":function(){return"Edit company"},"FORM:ERROR:addFailure":function(){return"Failed to add the new company :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the company :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Company deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete company"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen company?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Are you sure you want to delete the <em>"+t.v(e,"label")+"</em> company?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the company :-("}},pl:!0}}),define("app/nls/pl/companies",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Firmy"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie firm nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie firmy nie powiod≈Ço siƒô :("},"MSG:DELETED":function(e){return"Firma <em>"+t.v(e,"label")+"</em> zosta≈Ça usuniƒôta."},"PAGE_ACTION:add":function(){return"Dodaj firmƒô"},"PAGE_ACTION:edit":function(){return"Edytuj firmƒô"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ firmƒô"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy firmy"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania firmy"},"PANEL:TITLE:editForm":function(){return"Formularz edycji firmy"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:name":function(){return"Nazwa"},"PROPERTY:fteMasterPosition":function(){return"Pozycja w FTE (produkcja)"},"PROPERTY:fteLeaderPosition":function(){return"Pozycja w FTE (magazyn)"},"PROPERTY:color":function(){return"Kolor"},"FORM:ACTION:add":function(){return"Dodaj firmƒô"},"FORM:ACTION:edit":function(){return"Edytuj firmƒô"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá firmy :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá firmy :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia firmy"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ firmƒô"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybranƒÖ firmƒô?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá firmƒô <em>"+t.v(e,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá firmy :-("}}}),define("app/companies/routes",["../router","../viewport","../user","../data/companies","./Company","i18n!app/nls/companies"],function(e,t,n,r,i){var o=n.auth("DICTIONARIES:VIEW"),a=n.auth("DICTIONARIES:MANAGE");e.map("/companies",o,function(){t.loadPage(["app/core/pages/ListPage"],function(e){return new e({collection:r,columns:["_id","name","fteMasterPosition","fteLeaderPosition","color"]})})}),e.map("/companies/:id",function(e){t.loadPage(["app/core/pages/DetailsPage","app/companies/templates/details"],function(t,n){return new t({model:new i({_id:e.params.id}),detailsTemplate:n})})}),e.map("/companies;add",a,function(){t.loadPage(["app/core/pages/AddFormPage","app/companies/views/CompanyFormView"],function(e,t){return new e({FormView:t,model:new i})})}),e.map("/companies/:id;edit",a,function(e){t.loadPage(["app/core/pages/EditFormPage","app/companies/views/CompanyFormView"],function(t,n){return new t({FormView:n,model:new i({_id:e.params.id})})})}),e.map("/companies/:id;delete",a,function(e,n){var r=new i({_id:e.params.id});t.loadPage(["app/core/pages/ActionFormPage"],function(e){return new e({model:r,actionKey:"delete",successUrl:r.genClientUrl("base"),cancelUrl:n||r.genClientUrl("base"),formMethod:"DELETE",formAction:r.url(),formActionSeverity:"danger"})})})}),define("app/dashboard/templates/dashboard",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("<div>\n  <h1>WIP</h1>\n</div>\n")}();return buf.join("")}}),define("app/dashboard/views/DashboardView",["app/core/View","app/dashboard/templates/dashboard"],function(e,t){return e.extend({template:t})}),define("app/dashboard/pages/DashboardPage",["app/i18n","app/user","app/core/View","app/core/views/LogInFormView","../views/DashboardView"],function(e,t,n,r,i){return n.extend({layoutName:"page",pageId:"dashboard",localTopics:{"user.reloaded":function(){this.view.remove(),this.view=t.isLoggedIn()?new i:new r,this.view.render()}},breadcrumbs:function(){return t.isLoggedIn()?[]:[e.bound("dashboard","breadcrumbs:logIn")]},initialize:function(){this.view=t.isLoggedIn()?new i:new r},afterRender:function(){this.$('input[name="login"]').focus()}})}),define("app/nls/dashboard",["app/nls/locale/en"],function(e){return{root:{"breadcrumbs:logIn":function(){return"Log in form"}},pl:!0}}),define("app/nls/pl/dashboard",["app/nls/locale/pl"],function(e){return{"breadcrumbs:logIn":function(){return"Logowanie do systemu"}}}),define("app/dashboard/routes",["app/router","app/viewport","./pages/DashboardPage","i18n!app/nls/dashboard"],function(e,t,n){e.map("/",function(){t.showPage(new n)})}),define("app/nls/divisions",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Divisions"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the divisions :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the division :("},"MSG:DELETED":function(e){return"Division <em>"+t.v(e,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add division"},"PAGE_ACTION:edit":function(){return"Edit division"},"PAGE_ACTION:delete":function(){return"Delete division"},"PANEL:TITLE:details":function(){return"Division's details"},"PANEL:TITLE:addForm":function(){return"Add division form"},"PANEL:TITLE:editForm":function(){return"Edit division form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:description":function(){return"Description"},"PROPERTY:type":function(){return"Type"},"TYPE:prod":function(){return"Production"},"TYPE:dist":function(){return"Distribution"},"FORM:ACTION:add":function(){return"Add division"},"FORM:ACTION:edit":function(){return"Edit division"},"FORM:ERROR:addFailure":function(){return"Failed to add the new division :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the division :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Division deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete division"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen division?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Are you sure you want to delete the <em>"+t.v(e,"label")+"</em> division?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the division :-("}},pl:!0}}),define("app/nls/pl/divisions",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Wydzia≈Çy"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie wydzia≈Ç√≥w nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie wydzia≈Çu nie powiod≈Ço siƒô :("},"MSG:DELETED":function(e){return"Wydzia≈Ç <em>"+t.v(e,"label")+"</em> zosta≈Ço usuniƒôte."},"PAGE_ACTION:add":function(){return"Dodaj wydzia≈Ç"},"PAGE_ACTION:edit":function(){return"Edytuj wydzia≈Ç"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ wydzia≈Ç"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy wydzia≈Çu"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania wydzia≈Çu"},"PANEL:TITLE:editForm":function(){return"Formularz edycji wydzia≈Çu"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:description":function(){return"Opis"},"PROPERTY:type":function(){return"Typ"},"TYPE:prod":function(){return"Produkcja"},"TYPE:dist":function(){return"Dystrybucja"},"FORM:ACTION:add":function(){return"Dodaj wydzia≈Ç"},"FORM:ACTION:edit":function(){return"Edytuj wydzia≈Ç"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá wydzia≈Çu :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá wydzia≈Çu :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia wydzia≈Çu"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ wydzia≈Ç"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany wydzia≈Ç?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wydzia≈Ç <em>"+t.v(e,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá wydzia≈Çu :-("}}}),define("app/divisions/routes",["../router","../viewport","../i18n","../user","../core/util/showDeleteFormPage","../data/divisions","./Division","i18n!app/nls/divisions"],function(e,t,n,r,i,o,a){var s=r.auth("DICTIONARIES:VIEW"),u=r.auth("DICTIONARIES:MANAGE");e.map("/divisions",s,function(){t.loadPage(["app/core/pages/ListPage"],function(e){return new e({collection:o,columns:["_id","type","description"],serializeRow:function(e){var t=e.toJSON();return t.type=n("divisions","TYPE:"+t.type),t}})})}),e.map("/divisions/:id",function(e){t.loadPage(["app/core/pages/DetailsPage","app/divisions/templates/details"],function(t,n){return new t({model:new a({_id:e.params.id}),detailsTemplate:n})})}),e.map("/divisions;add",u,function(){t.loadPage(["app/core/pages/AddFormPage","app/divisions/views/DivisionFormView"],function(e,t){return new e({FormView:t,model:new a})})}),e.map("/divisions/:id;edit",u,function(e){t.loadPage(["app/core/pages/EditFormPage","app/divisions/views/DivisionFormView"],function(t,n){return new t({FormView:n,model:new a({_id:e.params.id})})})}),e.map("/divisions/:id;delete",u,i.bind(null,a))}),define("app/downtimeReasons/DowntimeReason",["../i18n","../core/Model","app/core/templates/colorLabel"],function(e,t,n){return t.extend({urlRoot:"/downtimeReasons",clientUrlRoot:"#downtimeReasons",topicPrefix:"downtimeReasons",privilegePrefix:"DICTIONARIES",nlsDomain:"downtimeReasons",labelAttribute:"label",defaults:function(){return{label:null,type:"other",subdivisionTypes:["assembly","press"],opticsPosition:-1,pressPosition:-1,auto:!1,scheduled:!1,color:"#ff0000",refColor:"#aa0000",refValue:0}},serialize:function(){var t=this.toJSON();return t.scheduled=e("core","BOOL:"+t.scheduled),t.auto=e("core","BOOL:"+t.auto),t.type=e("downtimeReasons","type:"+t.type),t.color=n({color:t.color}),t.refColor=n({color:t.refColor}),t.refValue=t.refValue&&t.refValue.toLocaleString?t.refValue.toLocaleString():"0",t.subdivisionTypes=t.subdivisionTypes&&t.subdivisionTypes.length?t.subdivisionTypes.map(function(t){return e("downtimeReasons","subdivisionType:"+t)}).join("; "):e("downtimeReasons","subdivisionType:none"),t}})}),define("app/downtimeReasons/DowntimeReasonCollection",["../core/Collection","./DowntimeReason"],function(e,t){return e.extend({model:t,rqlQuery:"sort(_id)",comparator:"_id",findBySubdivisionType:function(e){return this.filter(function(t){return-1!==t.get("subdivisionTypes").indexOf(e)})},findFirstBreakIdBySubdivisionType:function(e){var t=this.find(function(t){return"break"!==t.get("type")?!1:-1!==t.get("subdivisionTypes").indexOf(e)});return t?t.id:null}})}),define("app/data/downtimeReasons",["app/downtimeReasons/DowntimeReasonCollection","./createStorage"],function(e,t){return t("DOWNTIME_REASONS","downtimeReasons",e)
}),define("app/core/util/bindLoadingMessage",["app/i18n","app/viewport"],function(e,t){return function(n,r,i,o){function a(){t.msg.loaded()}function s(n){var r=n.statusText;if("abort"===r)return t.msg.loaded();var a=n.responseJSON;a&&a.error&&(a.error.code?r=a.error.code:a.error.message&&(r=a.error.message)),t.msg.loadingFailed(e(o,i,{code:r}))}return o||(o=n.nlsDomain?n.nlsDomain:n.model&&n.model.prototype.nlsDomain?n.model.prototype.nlsDomain:"core"),i||(i=n.model?"MSG:LOADING_FAILURE":"MSG:LOADING_SINGLE_FAILURE"),r.listenTo(n,"request",function(e,n,r){"read"===r.syncMethod&&(t.msg.loading(),n.done(a),n.fail(s))}),n}}),define("app/core/templates/actionForm",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<form class="action-form" method="post" action="',formAction,'">\n  <input type="hidden" name="_method" value="',formMethod,'">\n  <p>',messageText,'</p>\n  <div class="form-actions">\n    <button type="submit" class="btn btn-',formActionSeverity,'">',formActionText,"</button>\n    "),"#"===cancelUrl?buf.push('\n    <button type="button" class="cancel btn btn-link">',t("core","ACTION_FORM:BUTTON:cancel"),"</button>\n    "):buf.push('\n    <a class="cancel" href="',cancelUrl,'">',t("core","ACTION_FORM:BUTTON:cancel"),"</a>\n    "),buf.push("\n  </div>\n</form>\n")}();return buf.join("")}}),define("app/core/views/ActionFormView",["underscore","app/i18n","app/viewport","app/router","../View","app/core/templates/actionForm"],function(e,t,n,r,i,o){var a={formMethod:"POST",formAction:"/",formActionText:t.bound("core","ACTION_FORM:BUTTON"),formActionSeverity:"primary",messageText:t.bound("core","ACTION_FORM:MESSAGE"),successUrl:null,cancelUrl:"#",failureText:t.bound("core","ACTION_FORM:MESSAGE_FAILURE"),requestData:null},s=i.extend({template:o,events:{submit:"submitForm"},$errorMessage:null,initialize:function(){e.defaults(this.options,a),this.$errorMessage=null},destroy:function(){this.hideErrorMessage()},serialize:function(){return{formMethod:this.options.formMethod,formAction:this.options.formAction,formActionText:this.options.formActionText,formActionSeverity:this.options.formActionSeverity,messageText:this.options.messageText,cancelUrl:this.options.cancelUrl,model:this.model}},afterRender:function(){this.model&&this.listenToOnce(this.model,"change",this.render)},submitForm:function(){this.hideErrorMessage();var t=this.$('[type="submit"]').attr("disabled",!0),r=this.options,i=r.requestData;i=null==i?void 0:e.isFunction(i)?i.call(this):JSON.stringify(i);var o=this.ajax({type:r.formMethod,url:r.formAction,data:i}),a=this;return o.done(function(t){a.trigger("success",t),e.isString(r.successUrl)&&a.broker.publish("router.navigate",{url:r.successUrl,trigger:!0,replace:!0})}),o.fail(function(e){a.trigger("failure",e),r.failureText&&(a.$errorMessage=n.msg.show({type:"error",time:5e3,text:r.failureText}))}),o.always(function(){t.attr("disabled",!1)}),!1},hideErrorMessage:function(){null!==this.$errorMessage&&(n.msg.hide(this.$errorMessage),this.$errorMessage=null)}},{showDialog:function(r){var i=null;if(r.nlsDomain||(r.nlsDomain=r.model.getNlsDomain()),r.nlsDomain){i=t.bound(r.nlsDomain,"ACTION_FORM:DIALOG_TITLE:"+r.actionKey);var o=r.labelAttribute?r.model.get(r.labelAttribute):r.model.getLabel();r.messageText=o?t.bound(r.nlsDomain,"ACTION_FORM:MESSAGE_SPECIFIC:"+r.actionKey,{label:o}):t.bound(r.nlsDomain,"ACTION_FORM:MESSAGE:"+r.actionKey),r.formActionText=t.bound(r.nlsDomain,"ACTION_FORM:BUTTON:"+r.actionKey),r.failureText=t.bound(r.nlsDomain,"ACTION_FORM:MESSAGE_FAILURE:"+r.actionKey)}!r.formAction&&e.isFunction(r.model.url)&&(r.formAction=r.model.url()),e.isObject(r.requestData)||(r.requestData={}),e.isString(r.requestData.action)||(r.requestData.action=r.actionKey);var a=new s(r);return a.on("success",function(){n.closeDialog()}),n.showDialog(a,i),a},showDeleteDialog:function(e){return e.actionKey="delete",e.formMethod="DELETE",e.formActionSeverity="danger",s.showDialog(e)}});return s}),define("app/core/templates/jumpAction",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<form class="page-actions-jump" title="',t(nlsDomain,"PAGE_ACTION:jump:title"),'">\n  <div class="input-group">\n    <input name="rid" type="text" class="form-control" placeholder="',t(nlsDomain,"PAGE_ACTION:jump:placeholder"),'" required autofocus pattern="^ *[0-9]+ *$">\n    <span class="input-group-btn">\n      <button class="btn btn-default" type="submit"><i class="fa fa-search"></i></button>\n    </span>\n  </div>\n</form>\n')}();return buf.join("")}}),define("app/core/util/pageActions",["underscore","app/i18n","app/viewport","../views/ActionFormView","app/core/templates/jumpAction"],function(e,t,n,r,i){function o(e){return e.paginationData?e.paginationData.get("totalCount"):e.length}function a(r,i,o){var a=o[0].rid;if(a.readOnly)return!1;var s=parseInt(a.value,10);if(isNaN(s)||0>=s)return a.value="",!1;a.readOnly=!0,a.value=s;var u=o.find(".fa").removeClass("fa-search").addClass("fa-spinner fa-spin"),c=r.ajax({url:e.result(i,"url")+";rid",data:{rid:s}});return c.done(function(e){r.broker.publish("router.navigate",{url:i.genClientUrl()+"/"+e,trigger:!0})}),c.fail(function(){n.msg.show({type:"error",time:2e3,text:t(i.getNlsDomain(),"MSG:jump:404",{rid:s})}),u.removeClass("fa-spinner fa-spin").addClass("fa-search"),a.readOnly=!1,a.select()}),!1}return{add:function(e,n){return{label:t.bound(e.getNlsDomain(),"PAGE_ACTION:add"),icon:"plus",href:e.genClientUrl("add"),privileges:n||e.getPrivilegePrefix()+":MANAGE"}},edit:function(e,n){return{label:t.bound(e.getNlsDomain(),"PAGE_ACTION:edit"),icon:"edit",href:e.genClientUrl("edit"),privileges:n||e.getPrivilegePrefix()+":MANAGE"}},"delete":function(e,n){return{label:t.bound(e.getNlsDomain(),"PAGE_ACTION:delete"),icon:"times",href:e.genClientUrl("delete"),privileges:n||e.getPrivilegePrefix()+":MANAGE",callback:function(t){0===t.button&&(t.preventDefault(),r.showDeleteDialog({model:e}))}}},"export":function(n,r,i,a){return r.listenTo(i,"sync",function(){var t=o(i),r=n.$(".page-actions .export").attr("href",e.result(i,"url")+";export?"+i.rqlQuery).toggleClass("disabled",!t).removeClass("btn-default btn-warning");t>=1e4?r.removeClass("btn-default").addClass("btn-warning"):r.removeClass("btn-warning").addClass("btn-default")}),{label:t.bound(i.getNlsDomain(),"PAGE_ACTION:export"),icon:"download",type:o(i)>=1e4?"warning":"default",href:e.result(i,"url")+";export?"+i.rqlQuery,privileges:a||i.getPrivilegePrefix()+":VIEW",className:"export"+(i.length?"":" disabled")}},jump:function(e,t){return{template:function(){return i({nlsDomain:t.getNlsDomain()})},afterRender:function(n){var r=n.find("form");r.submit(a.bind(null,e,t,r))}}}}}),define("app/core/templates/pagination",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<ul class="pagination">\n\n  '),firstLastLinksVisible&&(buf.push("\n    "),firstPageLinkAvailable?buf.push('\n    <li><a href="',firstPageHref,'" title="',t("core","PAGINATION:FIRST_PAGE"),'" data-page="1">&laquo;</a>\n    '):buf.push('\n    <li class="disabled"><span>&laquo;</span>\n    '),buf.push("\n  ")),buf.push("\n\n  "),prevNextLinksVisible&&(buf.push("\n    "),prevPageLinkAvailable?buf.push('\n    <li><a href="',prevPageHref,'" title="',t("core","PAGINATION:PREV_PAGE"),'" data-page="',page-1,'">&lsaquo;</a>\n    '):buf.push('\n    <li class="disabled"><span>&lsaquo;</span>\n    '),buf.push("\n  ")),buf.push("\n\n  "),leftDotsVisible&&buf.push('\n  <li class="disabled"><span class="pagination-dots">...</span>\n  '),buf.push("\n\n  "),pages.forEach(function(e){buf.push('\n  <li class="',e.active?"active":"",'"><a href="',e.href,'" data-page="',e.no,'">',e.no,"</a>\n  ")}),buf.push("\n\n  "),rightDotsVisible&&buf.push('\n  <li class="disabled"><span class="pagination-dots">...</span>\n  '),buf.push("\n\n  "),prevNextLinksVisible&&(buf.push("\n    "),nextPageLinkAvailable?buf.push('\n    <li><a href="',nextPageHref,'" title="',t("core","PAGINATION:NEXT_PAGE"),'" data-page="',page+1,'">&rsaquo;</a>\n    '):buf.push('\n    <li class="disabled"><span>&rsaquo;</span>\n    '),buf.push("\n  ")),buf.push("\n\n  "),firstLastLinksVisible&&(buf.push("\n    "),lastPageLinkAvailable?buf.push('\n    <li><a href="',lastPageHref,'" title="',t("core","PAGINATION:LAST_PAGE"),'" data-page="',pageCount,'">&raquo;</a>\n    '):buf.push('\n    <li class="disabled"><span>&raquo;</span>\n    '),buf.push("\n  ")),buf.push("\n\n</ul>\n")}();return buf.join("")}}),define("app/core/views/PaginationView",["underscore","../View","app/core/templates/pagination"],function(e,t,n){var r={pageNumbers:3,firstLastLinksVisible:!0,prevNextLinksVisible:!0,dotsVisible:!0},i=t.extend({template:n,events:{"click a":function(e){if(0===e.button){e.preventDefault();var t=e.currentTarget;this.changePage(+t.getAttribute("data-page"),t.getAttribute("href"))}}}});return i.prototype.initialize=function(){e.defaults(this.options,r),this.listenTo(this.model,"change:urlTemplate",this.render)},i.prototype.afterRender=function(){var e=this.model.get("limit");(-1===e||this.model.get("totalCount")<=e)&&this.$el.hide()},i.prototype.changePage=function(e,t){this.model.set({page:e}),t&&this.broker.publish("router.navigate",{url:t})},i.prototype.serialize=function(){var e=this.options,t=this.model,n=t.get("page"),r=Math.ceil(t.get("totalCount")/t.get("limit")),i=(e.pageNumbers-1)/2;e.dotsVisible&&(i+=1);var o=n,a=o+i,s=!0,u=!1;1>o-i?o=1:(o-=i,u=e.dotsVisible&&1!==o),u&&(o+=1),a>r&&(a=r,s=!1),i+1>n?(a+=i+1-n,a>r&&(a=r)):n>r-i&&(o-=i-(r-n),1>o&&(o=1));var c=e.dotsVisible&&s&&a!==r;return c&&(a-=1),1===o&&(u=!1),{pageCount:r,page:n,skip:t.get("skip"),limit:t.get("limit"),visible:r>1,firstLastLinksVisible:e.firstLastLinksVisible,prevNextLinksVisible:e.prevNextLinksVisible,leftDotsVisible:u,rightDotsVisible:c,firstPageLinkAvailable:n>1,lastPageLinkAvailable:r>n,prevPageLinkAvailable:n>1,nextPageLinkAvailable:r>n,firstPageHref:this.genPageHref(1),lastPageHref:this.genPageHref(r),prevPageHref:this.genPageHref(n-1),nextPageHref:this.genPageHref(n+1),pages:this.genPages(o,a)}},i.prototype.genPageHref=function(e){var t=this.model.get("urlTemplate"),n=this.model.get("limit");return t.replace("${page}",e).replace("${skip}",(e-1)*n).replace("${limit}",n)},i.prototype.genPages=function(e,t){for(var n=[],r=this.model.get("page"),i=e;t>=i;++i)n.push({no:i,active:i===r,href:this.genPageHref(i)});return n},i}),define("app/core/templates/list",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="list ',"undefined"==typeof className?"":className,'">\n  <table class="table table-bordered table-hover table-condensed">\n    <thead>\n    <tr>\n      '),columns.forEach(function(e){buf.push("\n      <th>",e.label,"</th>\n      ")}),buf.push("\n      "),"function"==typeof actions&&buf.push('\n      <th class="actions">',t("core","LIST:COLUMN:actions"),"</th>\n      "),buf.push("\n    </tr>\n    </thead>\n    <tbody>\n      "),rows.length||buf.push('\n      <tr>\n        <td colspan="',columns.length+1,'">',t("core","LIST:NO_DATA"),"</td>\n      </tr>\n      "),buf.push("\n      "),rows.forEach(function(e){buf.push('\n      <tr class="list-item ',e.className?e.className:"",'"\n        '),e.dataAttrs&&(buf.push("\n        "),Object.keys(e.dataAttrs).forEach(function(t){buf.push("\n        data-",t,'="',escape(e.dataAttrs[t]),'"\n        ')}),buf.push("\n        ")),buf.push("\n        "),e._id&&buf.push('data-id="',e._id,'"'),buf.push("\n      >\n        "),columns.forEach(function(n){buf.push("\n        <td ","function"==typeof n.tdAttrs?n.tdAttrs(e):n.tdAttrs||"",' data-id="',n.id,'">\n        '),null==e[n.id]?(buf.push("\n          "),null==n.noData?buf.push("\n          <em>",t("core","LIST:NO_DATA:cell"),"</em>\n          "):buf.push("\n          ",n.noData,"\n          "),buf.push("\n          ")):buf.push("\n          ",e[n.id],"\n          "),buf.push("\n        </td>\n        ")}),buf.push("\n        "),"function"==typeof actions&&(buf.push('\n        <td class="actions">\n          '),actions(e).forEach(function(e){buf.push("\n          "),e.href?buf.push('\n          <a href="',e.href,'" class="btn btn-',e.type||"default"," action-",e.id,'" title="',escape(e.label),'"><i class="fa fa-',e.icon,'"></i></a>\n          '):buf.push("\n          TODO\n          "),buf.push("\n          ")}),buf.push("\n        </td>\n        ")),buf.push("\n      </tr>\n      ")}),buf.push('\n    </tbody>\n  </table>\n  <div class="pagination-container"></div>\n</div>\n')}();return buf.join("")}}),define("app/core/views/ListView",["jquery","app/i18n","app/user","../View","./ActionFormView","./PaginationView","app/core/templates/list"],function(e,t,n,r,i,o,a){function s(e,n,r){return n||(n=e.getNlsDomain()),t.has(n,r)?t(n,r):t("core",r)}var u=r.extend({template:a,remoteTopics:function(){var e={},t=this.collection.getTopicPrefix();return t&&(e[t+".added"]="refreshCollection",e[t+".edited"]="refreshCollection",e[t+".deleted"]="onModelDeleted"),e},events:{"click .action-delete":function(e){e.preventDefault(),i.showDeleteDialog({model:this.getModelFromEvent(e)})}},initialize:function(){this.lastRefreshAt=0,this.listenTo(this.collection,"sync",function(){this.lastRefreshAt=Date.now()}),this.collection.paginationData&&(this.paginationView=new o({model:this.collection.paginationData}),this.setView(".pagination-container",this.paginationView),this.listenTo(this.collection.paginationData,"change:page",this.scrollTop))},destroy:function(){this.paginationView=null},serialize:function(){return{columns:this.decorateColumns(this.serializeColumns()),actions:this.serializeActions(),rows:this.serializeRows(),className:this.className}},serializeColumns:function(){var e;return e=Array.isArray(this.options.columns)?this.options.columns:Array.isArray(this.columns)?this.columns:[]},decorateColumns:function(e){var n=this.collection.getNlsDomain();return e.map(function(e){return"string"==typeof e&&(e={id:e,label:t(n,"PROPERTY:"+e)}),e.label||(e.label=t(n,"PROPERTY:"+e.id)),e})},serializeActions:function(){return u.actions.viewEditDelete(this.collection)},serializeRows:function(){return this.collection.map(this.options.serializeRow||this.serializeRow,this)},serializeRow:function(e){return"function"==typeof e.serializeRow?e.serializeRow():"function"==typeof e.serialize?e.serialize():e.toJSON()},beforeRender:function(){this.stopListening(this.collection,"reset",this.render)},afterRender:function(){this.listenToOnce(this.collection,"reset",this.render)},onModelDeleted:function(e){e&&e.model&&e.model._id&&(this.$('.list-item[data-id="'+e.model._id+'"]').addClass("is-deleted"),this.refreshCollection(e))},refreshCollection:function(e){e&&this.timers.refreshCollection||(Date.now()-this.lastRefreshAt>3e3?this.refreshCollectionNow():this.timers.refreshCollection=setTimeout(this.refreshCollectionNow.bind(this),3e3))},refreshCollectionNow:function(e){this.timers.refreshCollection&&clearTimeout(this.timers.refreshCollection),delete this.timers.refreshCollection,this.promised(this.collection.fetch(e||{reset:!0}))},scrollTop:function(){var t=this.$el.offset().top-14,n=e(".navbar-fixed-top");n.length&&(t-=n.outerHeight()),window.scrollY>t&&e("html, body").stop(!0,!1).animate({scrollTop:t})},getModelFromEvent:function(e){return this.collection.get(this.$(e.target).closest(".list-item").attr("data-id"))}});return u.actions={viewDetails:function(e,t){return{id:"viewDetails",icon:"file-text-o",label:s(e,t,"LIST:ACTION:viewDetails"),href:e.genClientUrl()}},edit:function(e,t){return{id:"edit",icon:"edit",label:s(e,t,"LIST:ACTION:edit"),href:e.genClientUrl("edit")}},"delete":function(e,t){return{id:"delete",icon:"times",label:s(e,t,"LIST:ACTION:delete"),href:e.genClientUrl("delete")}},viewEditDelete:function(e,t,r){return function(i){var o=e.get(i._id),a=[u.actions.viewDetails(o,r)];return n.isAllowedTo((t||o.getPrivilegePrefix())+":MANAGE")&&a.push(u.actions.edit(o,r),u.actions.delete(o,r)),a}}},u}),define("app/core/pages/ListPage",["app/i18n","../util/bindLoadingMessage","../util/pageActions","../View","../views/ListView"],function(e,t,n,r,i){return r.extend({layoutName:"page",pageId:"list",breadcrumbs:function(){return[e.bound(this.collection.getNlsDomain(),"BREADCRUMBS:browse")]},actions:function(){return[n.add(this.collection,this.collection.getPrivilegePrefix()+":MANAGE")]},initialize:function(){this.collection=t(this.options.collection,this);var e=this.options.ListView||i;this.view=new e({collection:this.collection,columns:this.options.columns||e.prototype.columns,serializeRow:this.options.serializeRow||e.prototype.serializeRow})},load:function(e){return e(this.collection.fetch({reset:!0}))}})}),define("app/core/util/onModelDeleted",["app/i18n","app/viewport"],function(e,t){return function(n,r,i,o){var a=i?i.model:null;(o||a&&a._id===r.id)&&(n.subscribe("router.executing").setLimit(1).on("message",function(){t.msg.show({type:"warning",time:5e3,text:e(r.getNlsDomain()||"core","MSG:DELETED",{label:r.getLabel()})})}),n.publish("router.navigate",{url:r.genClientUrl("base"),trigger:!0,replace:!0}))}}),define("app/core/views/DetailsView",["../View","../util/onModelDeleted"],function(e,t){return e.extend({remoteTopics:function(){var e={},t=this.model.getTopicPrefix();return e[t+".edited"]="onModelEdited",e[t+".deleted"]="onModelDeleted",e},serialize:function(){return{idPrefix:this.idPrefix,model:this.serializeDetails(this.model)}},serializeDetails:function(e){return"function"==typeof e.serializeDetails?e.serializeDetails():"function"==typeof e.serialize?e.serialize():e.toJSON()},beforeRender:function(){this.stopListening(this.collection,"change",this.render)},afterRender:function(){this.listenToOnce(this.model,"change",this.render)},onModelEdited:function(e){var t=e.model;t&&t._id===this.model.id&&this.model.set(t)},onModelDeleted:function(e){t(this.broker,this.model,e)}})}),define("app/core/pages/DetailsPage",["app/i18n","../util/bindLoadingMessage","../util/pageActions","../View","../views/DetailsView"],function(e,t,n,r,i){return r.extend({layoutName:"page",pageId:"details",modelProperty:"model",breadcrumbs:function(){var t=this[this.modelProperty];return[{label:e.bound(t.nlsDomain,"BREADCRUMBS:browse"),href:t.genClientUrl("base")},t.getLabel()]},actions:function(){var e=this[this.modelProperty];return[n.edit(e,e.privilegePrefix+":MANAGE"),n.delete(e,e.privilegePrefix+":MANAGE")]},initialize:function(){this.defineModels(),this.defineViews()},defineModels:function(){this[this.modelProperty]=t(this.options.model,this)},defineViews:function(){var e=this.DetailsView||i,t={model:this[this.modelProperty]};"function"==typeof this.detailsTemplate&&(t.template=this.detailsTemplate),"function"==typeof this.serializeDetails&&(t.serializeDetails=this.serializeDetails),this.view=new e(t)},load:function(e){return e(this[this.modelProperty].fetch(this.fetchOptions))}})}),function(e,t){"function"==typeof define&&define.amd?define("form2js",t):e.form2js=t()}(this,function(){function e(e,r,i,o,a){("undefined"==typeof i||null==i)&&(i=!0),("undefined"==typeof r||null==r)&&(r="."),arguments.length<5&&(a=!1),e="string"==typeof e?document.getElementById(e):e;var s,u=[],c=0;if(e.constructor==Array||"undefined"!=typeof NodeList&&e.constructor==NodeList)for(;s=e[c++];)u=u.concat(n(s,o,a));else u=n(e,o,a);return t(u,i,r)}function t(e,t,n){var r,i,o,a,s,u,c,l,d,p,f,h,m,g={},y={};for(r=0;r<e.length;r++)if(s=e[r].value,!t||""!==s&&null!==s){for(h=e[r].name,m=h.split(n),u=[],c=g,l="",i=0;i<m.length;i++)if(f=m[i].split("]["),f.length>1)for(o=0;o<f.length;o++)if(f[o]=0==o?f[o]+"]":o==f.length-1?"["+f[o]:"["+f[o]+"]",p=f[o].match(/([a-z_]+)?\[([a-z_][a-z0-9_]+?)\]/i))for(a=1;a<p.length;a++)p[a]&&u.push(p[a]);else u.push(f[o]);else u=u.concat(f);for(i=0;i<u.length;i++)f=u[i],f.indexOf("[]")>-1&&i==u.length-1?(d=f.substr(0,f.indexOf("[")),l+=d,c[d]||(c[d]=[]),c[d].push(s)):f.indexOf("[")>-1?(d=f.substr(0,f.indexOf("[")),p=f.replace(/(^([a-z_]+)?\[)|(\]$)/gi,""),l+="_"+d+"_"+p,y[l]||(y[l]={}),""==d||c[d]||(c[d]=[]),i==u.length-1?""==d?(c.push(s),y[l][p]=c[c.length-1]):(c[d].push(s),y[l][p]=c[d][c[d].length-1]):y[l][p]||(c[d].push(/^[a-z_]+\[?/i.test(u[i+1])?{}:[]),y[l][p]=c[d][c[d].length-1]),c=y[l][p]):(l+=f,i<u.length-1?(c[f]||(c[f]={}),c=c[f]):c[f]=s)}return g}function n(e,t,n){var o=i(e,t,n);return o.length>0?o:r(e,t,n)}function r(e,t,n){for(var r=[],o=e.firstChild;o;)r=r.concat(i(o,t,n)),o=o.nextSibling;return r}function i(e,t,n){var i,s,u,c=o(e,n);return i=t&&t(e),i&&i.name?u=[i]:""!=c&&e.nodeName.match(/INPUT|TEXTAREA/i)?(s=a(e),u=[{name:c,value:s}]):""!=c&&e.nodeName.match(/SELECT/i)?(s=a(e),u=[{name:c.replace(/\[\]$/,""),value:s}]):u=r(e,t,n),u}function o(e,t){return e.name&&""!=e.name?e.name:t&&e.id&&""!=e.id?e.id:""}function a(e){if(e.disabled)return null;switch(e.nodeName){case"INPUT":case"TEXTAREA":switch(e.type.toLowerCase()){case"radio":if(e.checked&&"false"===e.value)return!1;case"checkbox":if(e.checked&&"true"===e.value)return!0;if(!e.checked&&"true"===e.value)return!1;if(e.checked)return e.value;break;case"button":case"reset":case"submit":case"image":return"";default:return e.value}break;case"SELECT":return s(e)}return null}function s(e){var t,n,r,i=e.multiple,o=[];if(!i)return e.value;for(t=e.getElementsByTagName("option"),n=0,r=t.length;r>n;n++)t[n].selected&&o.push(t[n].value);return o}return e}),function(e,t){"function"==typeof define&&define.amd?define("js2form",t):e.js2form=t()}(this,function(){function e(e,r,o,a,s){arguments.length<3&&(o="."),arguments.length<4&&(a=null),arguments.length<5&&(s=!1);var c,l;c=i(r),l=n(e,s,o,{},!0);for(var d=0;d<c.length;d++){var p=c[d].name,f=c[d].value;"undefined"!=typeof l[p]?t(l[p],f):"undefined"!=typeof l[p.replace(u,"[]")]&&t(l[p.replace(u,"[]")],f)}}function t(e,t){var n,r,i;if(e instanceof Array)for(r=0;r<e.length;r++)(String(e[r].value)==String(t)||t===!0)&&(e[r].checked=!0);else if(d.test(e.nodeName))e.value=t;else if(/SELECT/i.test(e.nodeName))for(n=e.getElementsByTagName("option"),r=0,i=n.length;i>r;r++)if(n[r].value==t){if(n[r].selected=!0,e.multiple)break}else e.multiple||(n[r].selected=!1)}function n(e,t,i,o,a){arguments.length<4&&(o={});for(var s,c,l,d,p,f,h,m={},g=e.firstChild;g;){if(s="",g.name&&""!=g.name?s=g.name:t&&g.id&&""!=g.id&&(s=g.id),""==s){var y=n(g,t,i,o,a);for(l in y)if("undefined"==typeof m[l])m[l]=y[l];else for(d=0;d<y[l].length;d++)m[l].push(y[l][d])}else if(/SELECT/i.test(g.nodeName))for(p=0,h=g.getElementsByTagName("option"),f=h.length;f>p;p++)a&&(h[p].selected=!1),c=r(s,i,o),c=c.replace(u,"[]"),m[c]=g;else/INPUT/i.test(g.nodeName)&&/CHECKBOX|RADIO/i.test(g.type)?(a&&(g.checked=!1),c=r(s,i,o),c=c.replace(u,"[]"),m[c]||(m[c]=[]),m[c].push(g)):(a&&(g.value=""),c=r(s,i,o),m[c]=g);g=g.nextSibling}return m}function r(e,t,n){var r,i,o,a,s,u,d=[],p=e.split(t);for(e=e.replace(l,"[$1].[$2]"),u=0;u<p.length;u++)r=p[u],d.push(r),i=r.match(c),null!=i&&(o=d.join(t),a=o.replace(c,"$3"),o=o.replace(c,"$1"),"undefined"==typeof n[o]&&(n[o]={lastIndex:-1,indexes:{}}),(""==a||"undefined"==typeof n[o].indexes[a])&&(n[o].lastIndex++,n[o].indexes[a]=n[o].lastIndex),s=n[o].indexes[a],d[d.length-1]=r.replace(c,"$1$2"+s+"$4"));return o=d.join(t),o=o.replace("].[","][")}function i(e,t){var n,r,i=[];if(1==arguments.length&&(t=0),null==e)i=[{name:"",value:null}];else if("string"==typeof e||"number"==typeof e||"date"==typeof e||"boolean"==typeof e)i=[{name:"",value:e}];else if(e instanceof Array)for(n=0;n<e.length;n++)r="["+n+"]",i=i.concat(o(e[n],r,t+1));else for(n in e)r=n,i=i.concat(o(e[n],r,t+1));return i}function o(e,t,n){var r,o,u,c=[],l=i(e,n+1);for(o=0;o<l.length;o++)r=t,a.test(l[o].name)?r+=l[o].name:s.test(l[o].name)&&(r+="."+l[o].name),u={name:r,value:l[o].value},c.push(u);return c}var a=/^\[\d+?\]/,s=/^[a-zA-Z_][a-zA-Z_0-9]+/,u=/\[[0-9]+?\]$/,c=/(.*)(\[)([0-9]*)(\])$/,l=/\[([0-9]+)\]\[([0-9]+)\]/g,d=/INPUT|TEXTAREA/i;return e}),define("app/core/views/FormView",["underscore","form2js","js2form","app/viewport","../View"],function(e,t,n,r,i){return i.extend({events:{submit:"submitForm"},$errorMessage:null,initialize:function(){this.$errorMessage=null,this.listenTo(this.model,"change",function(){this.isRendered()&&n(this.el,this.serializeToForm())})},destroy:function(){this.hideErrorMessage()},serialize:function(){return{editMode:!!this.options.editMode,idPrefix:this.idPrefix,formMethod:this.options.formMethod,formAction:this.options.formAction,formActionText:this.options.formActionText,panelTitleText:this.options.panelTitleText,model:this.model.toJSON()}},afterRender:function(){n(this.el,this.serializeToForm())},serializeToForm:function(){return this.model.toJSON()},serializeForm:function(e){return e},submitForm:function(){if(this.hideErrorMessage(),!this.el.checkValidity())return!1;var e=this.serializeForm(t(this.el));if(!this.checkValidity(e))return!1;var n=this.$('[type="submit"]').attr("disabled",!0),r=this.promised(this.model.save(e,{wait:!0})),i=this;return r.done(function(){"function"==typeof i.options.done?i.options.done(!0):i.broker.publish("router.navigate",{url:i.model.genClientUrl(),trigger:!0})}),r.fail(this.handleFailure.bind(this)),r.always(function(){n.attr("disabled",!1)}),!1},hideErrorMessage:function(){null!==this.$errorMessage&&(r.msg.hide(this.$errorMessage),this.$errorMessage=null)},checkValidity:function(e){return!!e},handleFailure:function(){this.$errorMessage=r.msg.show({type:"error",text:this.options.failureText})}})}),define("app/core/pages/AddFormPage",["app/i18n","../View","../views/FormView"],function(e,t,n){return t.extend({layoutName:"page",pageId:"addForm",breadcrumbs:function(){return[{label:e.bound(this.model.getNlsDomain(),"BREADCRUMBS:browse"),href:this.model.genClientUrl("base")},e.bound(this.model.getNlsDomain(),"BREADCRUMBS:addForm")]},initialize:function(){var t=this.options.FormView||this.FormView||n,r={editMode:!1,model:this.model,formMethod:"POST",formAction:this.model.url(),formActionText:e(this.model.getNlsDomain(),"FORM:ACTION:add"),failureText:e(this.model.getNlsDomain(),"FORM:ERROR:addFailure"),panelTitleText:e(this.model.getNlsDomain(),"PANEL:TITLE:addForm")};"function"==typeof this.options.formTemplate&&(r.template=this.options.formTemplate),this.view=new t(r)}})}),define("app/core/pages/EditFormPage",["app/i18n","../util/bindLoadingMessage","../View","../views/FormView"],function(e,t,n,r){return n.extend({layoutName:"page",pageId:"editForm",breadcrumbs:function(){return[{label:e.bound(this.model.getNlsDomain(),"BREADCRUMBS:browse"),href:this.model.genClientUrl("base")},{label:this.model.getLabel(),href:this.model.genClientUrl()},e.bound(this.model.getNlsDomain(),"BREADCRUMBS:editForm")]},initialize:function(){this.model=t(this.options.model,this);var n=this.options.FormView||this.FormView||r,i={editMode:!0,model:this.model,formMethod:"PUT",formAction:this.model.url(),formActionText:e(this.model.getNlsDomain(),"FORM:ACTION:edit"),failureText:e(this.model.getNlsDomain(),"FORM:ERROR:editFailure"),panelTitleText:e(this.model.getNlsDomain(),"PANEL:TITLE:editForm")};"function"==typeof this.options.formTemplate&&(i.template=this.options.formTemplate),this.view=new n(i)},load:function(e){return e(this.model.fetch(this.options.fetchOptions))}})}),define("app/core/pages/ActionFormPage",["underscore","app/i18n","../util/bindLoadingMessage","../View","../views/ActionFormView"],function(e,t,n,r,i){return r.extend({layoutName:"page",breadcrumbs:function(){return[{label:t.bound(this.model.getNlsDomain(),"BREADCRUMBS:browse"),href:this.model.genClientUrl("base")},{label:this.model.getLabel(),href:this.model.genClientUrl()},t.bound(this.model.getNlsDomain(),"BREADCRUMBS:ACTION_FORM:"+this.options.actionKey)]},initialize:function(){this.model=n(this.options.model,this);var r=this.options.actionKey;this.view=new i(e.defaults({model:this.model},this.options,{formActionText:t.bound(this.model.getNlsDomain(),"ACTION_FORM:BUTTON:"+r),messageText:t.bound(this.model.getNlsDomain(),"ACTION_FORM:MESSAGE:"+r),failureText:t.bound(this.model.getNlsDomain(),"ACTION_FORM:MESSAGE_FAILURE:"+r),requestData:{action:r}}))},load:function(e){return e(this.model.fetch())}})}),define("app/core/templates/colorPicker",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="form-group">\n  <label for="',idPrefix,"-",property,'" class="control-label">',"string"==typeof label?label:t("core","colorPicker:label"),'</label>\n  <div class="input-group colorpicker-component" data-color="',value,'" data-color-format="hex">\n    <input id="',idPrefix,"-",property,'" class="form-control" name="',property,'" type="text" value="',value,'">\n    <span class="input-group-addon"><i style="background-color: ',value,'"></i></span>\n  </div>\n</div>\n')}();return buf.join("")}}),define("app/downtimeReasons/templates/form",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<form class="downtimeReasons-form" method="post" action="',formAction,'">\n  <input type="hidden" name="_method" value="',formMethod,'">\n  <div class="panel panel-primary">\n    <div class="panel-heading">',panelTitleText,'</div>\n    <div class="panel-body">\n      <div class="form-group">\n        <label for="',idPrefix,'-id" class="control-label">',t("downtimeReasons","PROPERTY:_id"),'</label>\n        <input id="',idPrefix,'-id" class="form-control" type="text" name="_id" autofocus required maxlength="50" pattern="^[a-zA-Z][a-zA-Z_-]*$">\n      </div>\n      <div class="form-group">\n        <label for="',idPrefix,'-label" class="control-label">',t("downtimeReasons","PROPERTY:label"),'</label>\n        <input id="',idPrefix,'-label" class="form-control" type="text" name="label" required maxlength="100">\n      </div>\n      <div class="row">\n        <div class="col-md-2 form-group">\n          <label for="',idPrefix,'-type-maintenance" class="control-label">',t("downtimeReasons","PROPERTY:type"),"</label>\n          "),["maintenance","renovation","malfunction","adjusting","break","otherWorks","other"].forEach(function(e){buf.push('\n          <div class="radio">\n            <label>\n              <input id="',idPrefix,"-type-",e,'" type="radio" name="type" value="',e,'">\n              ',t("downtimeReasons","type:"+e),"\n            </label>\n          </div>\n          ")}),buf.push('\n        </div>\n        <div class="col-md-2 form-group">\n          <label for="',idPrefix,'-subdivisions-assembly" class="control-label">',t("downtimeReasons","PROPERTY:subdivisionTypes"),'</label>\n          <div class="checkbox">\n            <label>\n              <input id="',idPrefix,'-subdivisions-assembly" type="checkbox" name="subdivisionTypes[]" value="assembly">\n              ',t("downtimeReasons","subdivisionType:assembly"),'\n            </label>\n          </div>\n          <div class="checkbox">\n            <label>\n              <input type="checkbox" name="subdivisionTypes[]" value="press">\n              ',t("downtimeReasons","subdivisionType:press"),'\n            </label>\n          </div>\n        </div>\n        <div class="col-md-2 form-group">\n          <label for="',idPrefix,'-scheduled-true" class="control-label">',t("downtimeReasons","PROPERTY:scheduled"),"</label>\n          "),["true","false","null"].forEach(function(e){buf.push('\n          <div class="radio">\n            <label>\n              <input id="',idPrefix,"-scheduled-",e,'" type="radio" name="scheduled" value="',e,'">\n              ',t("core","BOOL:"+e),"\n            </label>\n          </div>\n          ")
}),buf.push('\n        </div>\n      </div>\n      <div class="row">\n        <div class="col-md-2 form-group">\n          <label for="',idPrefix,'-opticsPosition" class="control-label">',t("downtimeReasons","PROPERTY:opticsPosition"),'</label>\n          <input id="',idPrefix,'-opticsPosition" class="form-control" type="number" name="opticsPosition">\n        </div>\n        <div class="col-md-2 form-group">\n          <label for="',idPrefix,'-pressPosition" class="control-label">',t("downtimeReasons","PROPERTY:pressPosition"),'</label>\n          <input id="',idPrefix,'-pressPosition" class="form-control" type="number" name="pressPosition">\n        </div>\n      </div>\n      ',renderColorPicker({idPrefix:idPrefix,property:"color",label:t("downtimeReasons","PROPERTY:color"),value:model.color}),'\n      <div class="form-group-horizontal">\n        ',renderColorPicker({idPrefix:idPrefix,property:"refColor",label:t("downtimeReasons","PROPERTY:refColor"),value:model.refColor}),'\n        <div class="form-group">\n          <label for="',idPrefix,'-refValue" class="control-label">',t("downtimeReasons","PROPERTY:refValue"),'</label>\n          <input id="',idPrefix,'-refValue" class="form-control small" type="number" name="refValue" step="0.01">\n        </div>\n      </div>\n      <div class="checkbox">\n        <label>\n          <input id="',idPrefix,'-auto" type="checkbox" name="auto" value="true">\n          ',t("downtimeReasons","PROPERTY:auto"),'\n        </label>\n      </div>\n    </div>\n    <div class="panel-footer">\n      <button type="submit" class="btn btn-primary">',formActionText,"</button>\n    </div>\n  </div>\n</form>\n")}();return buf.join("")}}),function(e){var t=function(e){this.value={h:1,s:1,b:1,a:1},this.setColor(e)};t.prototype={constructor:t,setColor:function(t){t=t.toLowerCase();var n=this;e.each(i.stringParsers,function(e,r){var o=r.re.exec(t),a=o&&r.parse(o),s=r.space||"rgba";return a?(n.value="hsla"===s?i.RGBtoHSB.apply(null,i.HSLtoRGB.apply(null,a)):i.RGBtoHSB.apply(null,a),!1):!0})},setHue:function(e){this.value.h=1-e},setSaturation:function(e){this.value.s=e},setLightness:function(e){this.value.b=1-e},setAlpha:function(e){this.value.a=parseInt(100*(1-e),10)/100},toRGB:function(e,t,n,r){e||(e=this.value.h,t=this.value.s,n=this.value.b),e*=360;var i,o,a,s,u;return e=e%360/60,u=n*t,s=u*(1-Math.abs(e%2-1)),i=o=a=n-u,e=~~e,i+=[u,s,0,0,s,u][e],o+=[s,u,u,s,0,0][e],a+=[0,0,s,u,u,s][e],{r:Math.round(255*i),g:Math.round(255*o),b:Math.round(255*a),a:r||this.value.a}},toHex:function(e,t,n,r){var i=this.toRGB(e,t,n,r);return"#"+(1<<24|parseInt(i.r)<<16|parseInt(i.g)<<8|parseInt(i.b)).toString(16).substr(1)},toHSL:function(e,t,n,r){e||(e=this.value.h,t=this.value.s,n=this.value.b);var i=e,o=(2-t)*n,a=t*n;return a/=o>0&&1>=o?o:2-o,o/=2,a>1&&(a=1),{h:i,s:a,l:o,a:r||this.value.a}}};var n=0,r=function(t,r){n++,this.element=e(t).attr("data-colorpicker-guid",n);var o=r.format||this.element.data("color-format")||"hex";this.format=i.translateFormats[o],this.isInput=this.element.is("input"),this.component=this.element.is(".colorpicker-component")?this.element.find(".add-on, .input-group-addon"):!1,this.picker=e(i.template).attr("data-colorpicker-guid",n).appendTo("body").on("mousedown.colorpicker",e.proxy(this.mousedown,this)),this.isInput?this.element.on({"focus.colorpicker":e.proxy(this.show,this),"keyup.colorpicker":e.proxy(this.update,this)}):this.component?this.component.on({"click.colorpicker":e.proxy(this.show,this)}):this.element.on({"click.colorpicker":e.proxy(this.show,this)}),("rgba"===o||"hsla"===o)&&(this.picker.addClass("alpha"),this.alpha=this.picker.find(".colorpicker-alpha")[0].style),this.component?(this.picker.find(".colorpicker-color").hide(),this.preview=this.element.find("i")[0].style):this.preview=this.picker.find("div:last")[0].style,this.base=this.picker.find("div:first")[0].style,this.update(),e(e.proxy(function(){this.element.trigger("create",[this])},this))};r.prototype={constructor:r,show:function(t){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),e(window).on("resize.colorpicker",e.proxy(this.place,this)),this.isInput||t&&(t.stopPropagation(),t.preventDefault()),e(document).on({"mousedown.colorpicker":e.proxy(this.hide,this)}),this.element.trigger({type:"showPicker",color:this.color})},update:function(){var e=this.isInput?this.element.prop("value"):this.element.data("color");("undefined"==typeof e||null===e)&&(e="#ffffff"),this.color=new t(e),this.picker.find("i").eq(0).css({left:100*this.color.value.s,top:100-100*this.color.value.b}).end().eq(1).css("top",100*(1-this.color.value.h)).end().eq(2).css("top",100*(1-this.color.value.a)),this.previewColor()},hide:function(){this.picker.hide(),e(window).off("resize",this.place),e(document).off({mousedown:this.hide}),this.isInput?""!==this.element.val()&&this.element.prop("value",this.format.call(this)).trigger("change"):(this.component&&""!==this.element.find("input").val()&&this.element.find("input").prop("value",this.format.call(this)).trigger("change"),this.element.data("color",this.format.call(this))),this.element.trigger({type:"hidePicker",color:this.color})},place:function(){var e=this.component?this.component.offset():this.element.offset();this.picker.css({top:e.top+this.height,left:e.left})},destroy:function(){e(".colorpicker[data-colorpicker-guid="+this.element.attr("data-colorpicker-guid")+"]").remove(),this.element.removeData("colorpicker").removeAttr("data-colorpicker-guid").off(".colorpicker"),this.component!==!1&&this.component.off(".colorpicker"),this.element.trigger("destroy",[this])},setValue:function(e){this.isInput?this.element.prop("value",e):(this.element.find("input").val(e),this.element.data("color",e)),this.update(),this.element.trigger({type:"changeColor",color:this.color})},previewColor:function(){try{this.preview.backgroundColor=this.format.call(this)}catch(e){this.preview.backgroundColor=this.color.toHex()}this.base.backgroundColor=this.color.toHex(this.color.value.h,1,1,1),this.alpha&&(this.alpha.backgroundColor=this.color.toHex())},pointer:null,slider:null,mousedown:function(t){t.stopPropagation(),t.preventDefault();var n=e(t.target),r=n.closest("div");if(!r.is(".colorpicker")){if(r.is(".colorpicker-saturation"))this.slider=e.extend({},i.sliders.saturation);else if(r.is(".colorpicker-hue"))this.slider=e.extend({},i.sliders.hue);else{if(!r.is(".colorpicker-alpha"))return!1;this.slider=e.extend({},i.sliders.alpha)}var o=r.offset();this.slider.knob=r.find("i")[0].style,this.slider.left=t.pageX-o.left,this.slider.top=t.pageY-o.top,this.pointer={left:t.pageX,top:t.pageY},e(document).on({"mousemove.colorpicker":e.proxy(this.mousemove,this),"mouseup.colorpicker":e.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(e){e.stopPropagation(),e.preventDefault();var t=Math.max(0,Math.min(this.slider.maxLeft,this.slider.left+((e.pageX||this.pointer.left)-this.pointer.left))),n=Math.max(0,Math.min(this.slider.maxTop,this.slider.top+((e.pageY||this.pointer.top)-this.pointer.top)));if(this.slider.knob.left=t+"px",this.slider.knob.top=n+"px",this.slider.callLeft&&this.color[this.slider.callLeft].call(this.color,t/100),this.slider.callTop&&this.color[this.slider.callTop].call(this.color,n/100),this.previewColor(),this.isInput)try{this.element.val(this.format.call(this)).trigger("change")}catch(e){this.element.val(this.color.toHex()).trigger("change")}else try{this.element.find("input").val(this.format.call(this)).trigger("change")}catch(e){this.element.find("input").val(this.color.toHex()).trigger("change")}return this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(t){return t.stopPropagation(),t.preventDefault(),e(document).off({mousemove:this.mousemove,mouseup:this.mouseup}),!1}},e.fn.colorpicker=function(t,n){return this.each(function(){var i=e(this),o=i.data("colorpicker"),a="object"==typeof t&&t;o?"string"==typeof t&&o[t](n):"destroy"!==t&&i.data("colorpicker",o=new r(this,e.extend({},e.fn.colorpicker.defaults,a)))})},e.fn.colorpicker.defaults={},e.fn.colorpicker.Constructor=r;var i={translateFormats:{rgb:function(){var e=this.color.toRGB();return"rgb("+e.r+","+e.g+","+e.b+")"},rgba:function(){var e=this.color.toRGB();return"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"},hsl:function(){var e=this.color.toHSL();return"hsl("+Math.round(360*e.h)+","+Math.round(100*e.s)+"%,"+Math.round(100*e.l)+"%)"},hsla:function(){var e=this.color.toHSL();return"hsla("+Math.round(360*e.h)+","+Math.round(100*e.s)+"%,"+Math.round(100*e.l)+"%,"+e.a+")"},hex:function(){return this.color.toHex()}},sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setLightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},RGBtoHSB:function(e,t,n,r){e/=255,t/=255,n/=255;var i,o,a,s;return a=Math.max(e,t,n),s=a-Math.min(e,t,n),i=0===s?null:a===e?(t-n)/s:a===t?(n-e)/s+2:(e-t)/s+4,i=(i+360)%6*60/360,o=0===s?0:s/a,{h:i||1,s:o,b:a,a:r||1}},HueToRGB:function(e,t,n){return 0>n?n+=1:n>1&&(n-=1),1>6*n?e+(t-e)*n*6:1>2*n?t:2>3*n?e+(t-e)*(2/3-n)*6:e},HSLtoRGB:function(e,t,n,r){0>t&&(t=0);var o;o=.5>=n?n*(1+t):n+t-n*t;var a=2*n-o,s=e+1/3,u=e,c=e-1/3,l=Math.round(255*i.HueToRGB(a,o,s)),d=Math.round(255*i.HueToRGB(a,o,u)),p=Math.round(255*i.HueToRGB(a,o,c));return[l,d,p,r||1]},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1]/360,e[2]/100,e[3]/100,e[4]]}}],template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div></div>'}}(window.jQuery),define("bootstrap-colorpicker",function(){}),define("app/downtimeReasons/views/DowntimeReasonFormView",["underscore","app/core/views/FormView","app/core/templates/colorPicker","app/downtimeReasons/templates/form","bootstrap-colorpicker"],function(e,t,n,r){return t.extend({template:r,events:e.extend({},t.prototype.events,{"change [name=color]":"updateColorPicker","change [name=refColor]":"updateColorPicker"}),destroy:function(){t.prototype.destroy.call(this),this.$(".colorpicker-component").colorpicker("destroy")},serialize:function(){return e.extend(t.prototype.serialize.call(this),{renderColorPicker:n})},afterRender:function(){t.prototype.afterRender.call(this),this.$id("color").parent().colorpicker(),this.$id("refColor").parent().colorpicker(),this.options.editMode&&(this.$(".form-control[name=_id]").attr("readonly",!0),this.$(".form-control[name=label]").focus())},serializeToForm:function(){var e=this.model.toJSON();return e.scheduled=String(e.scheduled),e},serializeForm:function(e){var t=parseFloat(e.refValue);return e.refValue=isNaN(t)?0:t,"null"===e.scheduled&&(e.scheduled=null),e},updateColorPicker:function(e){e.originalEvent&&this.$(e.target).closest(".colorpicker-component").colorpicker("setValue",e.target.value)}})}),define("app/downtimeReasons/templates/details",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="panel panel-primary">\n  <div class="panel-heading">',t("downtimeReasons","PANEL:TITLE:details"),'</div>\n  <div class="panel-details">\n    <div class="props first">\n      <div class="prop">\n        <div class="prop-name">',t("downtimeReasons","PROPERTY:_id"),'</div>\n        <div class="prop-value">',escape(model._id),'</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">',t("downtimeReasons","PROPERTY:label"),'</div>\n        <div class="prop-value">',escape(model.label),'</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">',t("downtimeReasons","PROPERTY:type"),'</div>\n        <div class="prop-value">',escape(model.type),'</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">',t("downtimeReasons","PROPERTY:subdivisionTypes"),'</div>\n        <div class="prop-value">',escape(model.subdivisionTypes),'</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">',t("downtimeReasons","PROPERTY:opticsPosition"),'</div>\n        <div class="prop-value">',model.opticsPosition,'</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">',t("downtimeReasons","PROPERTY:pressPosition"),'</div>\n        <div class="prop-value">',model.pressPosition,'</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">',t("downtimeReasons","PROPERTY:auto"),'</div>\n        <div class="prop-value">',model.auto,'</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">',t("downtimeReasons","PROPERTY:scheduled"),'</div>\n        <div class="prop-value">',model.scheduled,'</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">',t("downtimeReasons","PROPERTY:color"),'</div>\n        <div class="prop-value">',model.color,'</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">',t("downtimeReasons","PROPERTY:refColor"),'</div>\n        <div class="prop-value">',model.refColor,'</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">',t("downtimeReasons","PROPERTY:refValue"),'</div>\n        <div class="prop-value">',model.refValue,"</div>\n      </div>\n    </div>\n  </div>\n</div>\n")}();return buf.join("")}}),define("app/nls/downtimeReasons",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Downtime reasons"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load thedowntime reasons :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the downtime reason :("},"MSG:DELETED":function(e){return"Downtime reason <em>"+t.v(e,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add downtime reason"},"PAGE_ACTION:edit":function(){return"Edit downtime reason"},"PAGE_ACTION:delete":function(){return"Delete downtime reason"},"PANEL:TITLE:details":function(){return"Downtime reason's details"},"PANEL:TITLE:addForm":function(){return"Add downtime reason form"},"PANEL:TITLE:editForm":function(){return"Edit downtime reason form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:label":function(){return"Label"},"PROPERTY:type":function(){return"Type"},"PROPERTY:subdivisionTypes":function(){return"Subdivision types"},"PROPERTY:opticsPosition":function(){return"Position in Worksheet (optics)"},"PROPERTY:pressPosition":function(){return"Position in Worksheet (other)"},"PROPERTY:scheduled":function(){return"Scheduled?"},"PROPERTY:auto":function(){return"Auto confirmation?"},"PROPERTY:color":function(){return"Value color"},"PROPERTY:refValue":function(){return"Reference [FTE]"},"PROPERTY:refColor":function(){return"Reference color"},"type:other":function(){return"Other"},"type:malfunction":function(){return"Malfunction"},"type:renovation":function(){return"Inspection/renovation"},"type:maintenance":function(){return"Maintenance"},"type:adjusting":function(){return"Adjusting/rearmament"},"type:break":function(){return"Break"},"type:otherWorks":function(){return"Other works"},"subdivisionType:none":function(){return"None"},"subdivisionType:assembly":function(){return"Assembly"},"subdivisionType:press":function(){return"Press"},"FORM:ACTION:add":function(){return"Add downtime reason"},"FORM:ACTION:edit":function(){return"Edit downtime reason"},"FORM:ERROR:addFailure":function(){return"Failed to add the new downtime reason :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the downtime reason :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Downtime reason deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete downtime reason"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen downtime reason?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Are you sure you want to delete the <em>"+t.v(e,"label")+"</em> downtime reason?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the downtime reason :-("}},pl:!0}}),define("app/nls/pl/downtimeReasons",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Powody przestoj√≥w"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie powod√≥w przestoj√≥w nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie powodu przestoj√≥w nie powiod≈Ço siƒô :("},"MSG:DELETED":function(e){return"Pow√≥d przestoj√≥w <em>"+t.v(e,"label")+"</em> zosta≈Ç usuniƒôty."},"PAGE_ACTION:add":function(){return"Dodaj pow√≥d przestoj√≥w"},"PAGE_ACTION:edit":function(){return"Edytuj pow√≥d przestoj√≥w"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ pow√≥d przestoj√≥w"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy powodu przestoj√≥w"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania powodu przestoj√≥w"},"PANEL:TITLE:editForm":function(){return"Formularz edycji powodu przestoj√≥w"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:label":function(){return"Opis"},"PROPERTY:type":function(){return"Typ"},"PROPERTY:subdivisionTypes":function(){return"Typy dzia≈Ç√≥w"},"PROPERTY:opticsPosition":function(){return"Pozycja na karcie pracy (monta≈º optyki)"},"PROPERTY:pressPosition":function(){return"Pozycja na karcie pracy (inne)"},"PROPERTY:scheduled":function(){return"Planowany?"},"PROPERTY:auto":function(){return"Automatyczne potwierdzanie?"},"PROPERTY:color":function(){return"Kolor warto≈õci"},"PROPERTY:refValue":function(){return"Referencja [FTE]"},"PROPERTY:refColor":function(){return"Kolor referencji"},"type:other":function(){return"Inny"},"type:malfunction":function(){return"Awaria"},"type:renovation":function(){return"PrzeglƒÖd/remont"},"type:maintenance":function(){return"Konserwacja"},"type:adjusting":function(){return"Ustawianie/przezbrojenie"},"type:break":function(){return"Przerwa"},"type:otherWorks":function(){return"Inne prace"},"subdivisionType:none":function(){return"≈ªadne"},"subdivisionType:assembly":function(){return"Monta≈º"},"subdivisionType:press":function(){return"T≈Çocznia"},"FORM:ACTION:add":function(){return"Dodaj pow√≥d przestoj√≥w"},"FORM:ACTION:edit":function(){return"Edytuj pow√≥d przestoj√≥w"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá powodu przestoj√≥w :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá powodu przestoj√≥w :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia powodu przestoj√≥w"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ pow√≥d przestoj√≥w"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany pow√≥d przestoj√≥w?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá pow√≥d przestoj√≥w <em>"+t.v(e,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá powodu przestoj√≥w :-("}}}),define("app/downtimeReasons/routes",["../router","../viewport","../user","../data/downtimeReasons","./DowntimeReason","../core/pages/ListPage","../core/pages/DetailsPage","../core/pages/AddFormPage","../core/pages/EditFormPage","../core/pages/ActionFormPage","./views/DowntimeReasonFormView","app/downtimeReasons/templates/details","i18n!app/nls/downtimeReasons"],function(e,t,n,r,i,o,a,s,u,c,l,d){var p=n.auth("DICTIONARIES:VIEW"),f=n.auth("DICTIONARIES:MANAGE");e.map("/downtimeReasons",p,function(){t.showPage(new o({collection:r,columns:["_id","label","type","subdivisionTypes","opticsPosition","pressPosition","auto","scheduled","color","refColor","refValue"]}))}),e.map("/downtimeReasons/:id",function(e){t.showPage(new a({model:new i({_id:e.params.id}),detailsTemplate:d}))}),e.map("/downtimeReasons;add",f,function(){t.showPage(new s({FormView:l,model:new i}))}),e.map("/downtimeReasons/:id;edit",f,function(e){t.showPage(new u({FormView:l,model:new i({_id:e.params.id})}))}),e.map("/downtimeReasons/:id;delete",f,function(e,n){var r=new i({_id:e.params.id});t.showPage(new c({model:r,actionKey:"delete",successUrl:r.genClientUrl("base"),cancelUrl:n||r.genClientUrl("base"),formMethod:"DELETE",formAction:r.url(),formActionSeverity:"danger"}))})}),define("app/lossReasons/LossReason",["../core/Model"],function(e){return e.extend({urlRoot:"/lossReasons",clientUrlRoot:"#lossReasons",topicPrefix:"lossReasons",privilegePrefix:"DICTIONARIES",nlsDomain:"lossReasons",labelAttribute:"label",defaults:{label:null,position:0},toJSON:function(){var t=e.prototype.toJSON.call(this);return t.label||(t.label=t._id),t}})}),define("app/lossReasons/LossReasonCollection",["../core/Collection","./LossReason"],function(e,t){return e.extend({model:t,rqlQuery:"select(label,position)&sort(position)"})}),define("app/lossReasons/templates/form",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<form class="lossReasons-form" method="post" action="',formAction,'">\n  <input type="hidden" name="_method" value="',formMethod,'">\n  <div class="panel panel-primary">\n    <div class="panel-heading">',panelTitleText,'</div>\n    <div class="panel-body">\n      <div class="form-group">\n        <label for="',idPrefix,'-id" class="control-label">',t("lossReasons","PROPERTY:_id"),'</label>\n        <input id="',idPrefix,'-id" class="form-control" type="text" name="_id" autofocus required maxlength="50">\n      </div>\n      <div class="form-group">\n        <label for="',idPrefix,'-label" class="control-label">',t("lossReasons","PROPERTY:label"),'</label>\n        <input id="',idPrefix,'-label" class="form-control" type="text" name="label" required maxlength="100">\n      </div>\n      <div class="form-group">\n        <label for="',idPrefix,'-position" class="control-label">',t("lossReasons","PROPERTY:position"),'</label>\n        <input id="',idPrefix,'-position" class="form-control small" type="number" name="position" min="0">\n      </div>\n    </div>\n    <div class="panel-footer">\n      <button type="submit" class="btn btn-primary">',formActionText,"</button>\n    </div>\n  </div>\n</form>\n")}();return buf.join("")}}),define("app/lossReasons/views/LossReasonFormView",["app/core/views/FormView","app/lossReasons/templates/form"],function(e,t){return e.extend({template:t,afterRender:function(){e.prototype.afterRender.call(this),this.options.editMode&&(this.$(".form-control[name=_id]").attr("readonly",!0),this.$(".form-control[name=label]").focus())}})}),define("app/lossReasons/templates/details",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="panel panel-primary">\n  <div class="panel-heading">',t("lossReasons","PANEL:TITLE:details"),'</div>\n  <div class="panel-details">\n    <div class="props first">\n      <div class="prop">\n        <div class="prop-name">',t("lossReasons","PROPERTY:_id"),'</div>\n        <div class="prop-value">',escape(model._id),'</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">',t("lossReasons","PROPERTY:label"),'</div>\n        <div class="prop-value">',escape(model.label||"-"),'</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">',t("lossReasons","PROPERTY:position"),'</div>\n        <div class="prop-value">',escape(model.position),"</div>\n      </div>\n    </div>\n  </div>\n</div>\n")}();return buf.join("")}}),define("app/nls/lossReasons",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Loss reasons"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the loss reasons :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the loss reason :("},"MSG:DELETED":function(e){return"Loss reason <em>"+t.v(e,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add loss reason"},"PAGE_ACTION:edit":function(){return"Edit loss reason"},"PAGE_ACTION:delete":function(){return"Delete loss reason"},"PANEL:TITLE:details":function(){return"Loss reason's details"},"PANEL:TITLE:addForm":function(){return"Add loss reason form"},"PANEL:TITLE:editForm":function(){return"Edit loss reason form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:label":function(){return"Label"},"PROPERTY:position":function(){return"Position in Worksheet"},"FORM:ACTION:add":function(){return"Add loss reason"},"FORM:ACTION:edit":function(){return"Edit loss reason"},"FORM:ERROR:addFailure":function(){return"Failed to add the new loss reason :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the loss reason :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Loss reason deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete loss reason"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen loss reason?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Are you sure you want to delete the <em>"+t.v(e,"label")+"</em> loss reason?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the loss reason :-("}},pl:!0}}),define("app/nls/pl/lossReasons",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Powody strat materia≈Çowych"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie powod√≥w strat materia≈Çowych nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie powodu strat materia≈Çowych nie powiod≈Ço siƒô :("},"MSG:DELETED":function(e){return"Pow√≥d strat materia≈Çowych <em>"+t.v(e,"label")+"</em> zosta≈Ç usuniƒôty."},"PAGE_ACTION:add":function(){return"Dodaj powod strat materia≈Çowych"},"PAGE_ACTION:edit":function(){return"Edytuj powod strat materia≈Çowych"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ powod strat materia≈Çowych"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy powodu strat materia≈Çowych"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania powodu strat materia≈Çowych"},"PANEL:TITLE:editForm":function(){return"Formularz edycji powodu strat materia≈Çowych"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:label":function(){return"Opis"},"PROPERTY:position":function(){return"Pozycja na karcie pracy"},"FORM:ACTION:add":function(){return"Dodaj powod strat materia≈Çowych"},"FORM:ACTION:edit":function(){return"Edytuj powod strat materia≈Çowych"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá powodu strat materia≈Çowych :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá powodu strat materia≈Çowych :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia powodu strat materia≈Çowych"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ powod strat materia≈Çowych"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany powod strat materia≈Çowych?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá powod strat materia≈Çowych <em>"+t.v(e,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá powodu strat materia≈Çowych :-("}}}),define("app/lossReasons/routes",["../router","../viewport","../user","./LossReasonCollection","./LossReason","../core/pages/ListPage","../core/pages/DetailsPage","../core/pages/AddFormPage","../core/pages/EditFormPage","../core/pages/ActionFormPage","./views/LossReasonFormView","app/lossReasons/templates/details","i18n!app/nls/lossReasons"],function(e,t,n,r,i,o,a,s,u,c,l,d){var p=n.auth("DICTIONARIES:VIEW"),f=n.auth("DICTIONARIES:MANAGE");e.map("/lossReasons",p,function(e){t.showPage(new o({collection:new r(null,{rqlQuery:e.rql}),columns:["_id","label","position"]}))}),e.map("/lossReasons/:id",function(e){t.showPage(new a({model:new i({_id:e.params.id}),detailsTemplate:d}))}),e.map("/lossReasons;add",f,function(){t.showPage(new s({FormView:l,model:new i}))}),e.map("/lossReasons/:id;edit",f,function(e){t.showPage(new u({FormView:l,model:new i({_id:e.params.id})}))}),e.map("/lossReasons/:id;delete",f,function(e,n){var r=new i({_id:e.params.id});t.showPage(new c({model:r,actionKey:"delete",successUrl:r.genClientUrl("base"),cancelUrl:n||r.genClientUrl("base"),formMethod:"DELETE",formAction:r.url(),formActionSeverity:"danger"}))})}),define("app/nls/events",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)
}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"MSG:LOADING_FAILURE":function(){return"Failed to load the events :("},"MSG:LOADING_TYPES_FAILURE":function(){return"Failed to load the event types :("},"BREADCRUMBS:browse":function(){return"Events"},"filter:placeholder:type":function(){return"Any type"},"filter:submit":function(){return"Filter events"},"PROPERTY:time":function(){return"Time of occurrence"},"PROPERTY:user":function(){return"User"},"PROPERTY:type":function(){return"Type"},"PROPERTY:text":function(){return"Description"},"PROPERTY:severity":function(){return"Severity"},"TYPE:app.started":function(){return"System start"},"TEXT:app.started":function(e){return"<em>"+t.s(e,"id",{frontend:"Application server",importer:"Importer server",other:"Server "+t.v(e,"id")})+"</em> started in the <em>"+t.s(e,"env",{development:"development",production:"production",other:"unspecified"})+"</em> environment in <em>"+t.v(e,"time")+"</em> ms."},"TYPE:users.login":function(){return"Users: log in"},"TEXT:users.login":function(){return"-"},"TYPE:users.loginFailure":function(){return"Users: log in failure"},"TEXT:users.loginFailure":function(e){return"Failed log in to account: <em>"+t.v(e,"login")+"</em>"},"TYPE:users.logout":function(){return"Users: log out"},"TEXT:users.logout":function(){return"-"},"TYPE:users.added":function(){return"Users: added"},"TEXT:users.added":function(e){return"Added user: <a href='#users/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->login")+"</a>"},"TYPE:users.edited":function(){return"Users: edited"},"TEXT:users.edited":function(e){return"Edited user: <a href='#users/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->login")+"</a>"},"TYPE:users.deleted":function(){return"Users: deleted"},"TEXT:users.deleted":function(e){return"Deleted user: <em>"+t.v(e,"model->login")+"</em>"},"TYPE:users.synced":function(){return"Users: synchronization"},"TEXT:users.synced":function(e){return"Added "+t.p(e,"created",0,"en",{one:"1 new user",other:t.n(e,"created")+" new users"})+" and modified "+t.p(e,"updated",0,"en",{one:"1 existing user",other:t.n(e,"updated")+" existing users"})+" during synchronization with the AC database."},"TYPE:users.syncFailed":function(){return"Users: synchronization failure"},"TEXT:users.syncFailed":function(e){return"Failed to synchronize users with the AC database: <em>"+t.v(e,"error")+"</em>"},"TYPE:mechOrders.edited":function(){return"Mechanical orders: edited"},"TEXT:mechOrders.edited":function(e){return"Edited mechanical order: <a href='#mechOrders/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:mechOrders.synced":function(){return"Mechanical orders: import"},"TEXT:mechOrders.synced":function(e){return"Imported "+t.p(e,"count",0,"en",{one:"1 mechanical order",other:t.n(e,"count")+" mechanical orders"})+"."},"TYPE:emptyOrders.synced":function(){return"Empty orders: synchronization"},"TEXT:emptyOrders.synced":function(e){return"Added "+t.p(e,"count",0,"en",{one:"1 new empty order",other:t.n(e,"count")+" new empty orders"})+"."},"TYPE:orders.synced":function(){return"Production orders: synchronization"},"TEXT:orders.synced":function(e){return"Added "+t.v(e,"created")+" new and edited "+t.p(e,"updated",0,"en",{one:"1 existing order",other:t.n(e,"updated")+" existing orders"})+t.s(e,"moduleName",{currentDayOrderImporter:"&nbsp;from the current day",nextDayOrderImporter:"&nbsp;from the next day",prevDayOrderImporter:"&nbsp;from the previous day",other:""})+"."},"TYPE:purchaseOrders.synced":function(){return"Purchase orders: synchronization"},"TEXT:purchaseOrders.synced":function(e){return"Added "+t.p(e,"created",0,"en",{one:"1 new order",other:t.n(e,"created")+" new orders"})+", edited "+t.p(e,"updated",0,"en",{one:"1 existing order",other:t.n(e,"updated")+" existing orders"})+" and closed "+t.p(e,"closed",0,"en",{one:"1 order",other:t.n(e,"closed")+" orders"})+" from "+t.v(e,"importedAt")+"."},"TYPE:orderStatuses.added":function(){return"Order statuses: added"},"TEXT:orderStatuses.added":function(e){return"Added order status: <a href='#orderStatuses/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:orderStatuses.edited":function(){return"Order statuses: edited"},"TEXT:orderStatuses.edited":function(e){return"Edited order status: <a href='#orderStatuses/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:orderStatuses.deleted":function(){return"Order statuses: deleted"},"TEXT:orderStatuses.deleted":function(e){return"Deleted order status: <em>"+t.v(e,"model->_id")+"</em>"},"TYPE:downtimeReasons.added":function(){return"Downtime reasons: added"},"TEXT:downtimeReasons.added":function(e){return"Added downtime reason: <a href='#downtimeReasons/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:downtimeReasons.edited":function(){return"Downtime reasons: edited"},"TEXT:downtimeReasons.edited":function(e){return"Edited downtime reason: <a href='#downtimeReasons/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:downtimeReasons.deleted":function(){return"Downtime reasons: deleted"},"TEXT:downtimeReasons.deleted":function(e){return"Deleted downtime reason: <em>"+t.v(e,"model->_id")+"</em>"},"TYPE:lossReasons.added":function(){return"Loss reasons: added"},"TEXT:lossReasons.added":function(e){return"Added loss reason: <a href='#lossReasons/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:lossReasons.edited":function(){return"Loss reasons: edited"},"TEXT:lossReasons.edited":function(e){return"Edited loss reason: <a href='#lossReasons/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:lossReasons.deleted":function(){return"Loss reasons: deleted"},"TEXT:lossReasons.deleted":function(e){return"Deleted loss reason: <em>"+t.v(e,"model->_id")+"</em>"},"TYPE:aors.added":function(){return"Areas of responsibility: added"},"TEXT:aors.added":function(e){return"Added area of responsibility: <a href='#aors/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->name")+"</a>"},"TYPE:aors.edited":function(){return"Areas of responsibility: edited"},"TEXT:aors.edited":function(e){return"Edited area of responsibility: <a href='#aors/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->name")+"</a>"},"TYPE:aors.deleted":function(){return"Areas of responsibility: deleted"},"TEXT:aors.deleted":function(e){return"Deleted area of responsibility: <em>"+t.v(e,"model->name")+"</em>"},"TYPE:vendors.added":function(){return"Vendors: added"},"TEXT:vendors.added":function(e){return"Added vendor: <a href='#vendors/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:vendors.edited":function(){return"Vendors: edited"},"TEXT:vendors.edited":function(e){return"Edited vendor: <a href='#vendors/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:vendors.deleted":function(){return"Vendors: deleted"},"TEXT:vendors.deleted":function(e){return"Deleted vendor: <em>"+t.v(e,"model->_id")+"</em>"},"TYPE:workCenters.added":function(){return"WorkCenters: added"},"TEXT:workCenters.added":function(e){return"Added WorkCenter: <a href='#workCenters/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:workCenters.edited":function(){return"WorkCenters: edited"},"TEXT:workCenters.edited":function(e){return"Edited WorkCenter: <a href='#workCenters/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:workCenters.deleted":function(){return"WorkCenters: deleted"},"TEXT:workCenters.deleted":function(e){return"Deleted WorkCenter: <em>"+t.v(e,"model->_id")+"</em>"},"TYPE:divisions.added":function(){return"Divisions: added"},"TEXT:divisions.added":function(e){return"Added division: <a href='#divisions/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:divisions.edited":function(){return"Divisions: edited"},"TEXT:divisions.edited":function(e){return"Edited division: <a href='#divisions/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:divisions.deleted":function(){return"Divisions: deleted"},"TEXT:divisions.deleted":function(e){return"Deleted division: <em>"+t.v(e,"model->_id")+"</em>"},"TYPE:subdivisions.added":function(){return"Subdivisions: added"},"TEXT:subdivisions.added":function(e){return"Added subdivision: <a href='#subdivisions/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->name")+"</a>"},"TYPE:subdivisions.edited":function(){return"Subdivisions: edited"},"TEXT:subdivisions.edited":function(e){return"Edited subdivision: <a href='#subdivisions/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->name")+"</a>"},"TYPE:subdivisions.deleted":function(){return"Subdivisions: deleted"},"TEXT:subdivisions.deleted":function(e){return"Deleted subdivision: <em>"+t.v(e,"model->name")+"</em>"},"TYPE:companies.added":function(){return"Companies: added"},"TEXT:companies.added":function(e){return"Added company: <a href='#companies/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->name")+"</a>"},"TYPE:companies.edited":function(){return"Companies: edited"},"TEXT:companies.edited":function(e){return"Edited company: <a href='#companies/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->name")+"</a>"},"TYPE:companies.deleted":function(){return"Companies: deleted"},"TEXT:companies.deleted":function(e){return"Deleted company: <em>"+t.v(e,"model->name")+"</em>"},"TYPE:mrpControllers.added":function(){return"MRP Controllers: added"},"TEXT:mrpControllers.added":function(e){return"Added MRP Controller: <a href='#mrpControllers/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:mrpControllers.edited":function(){return"MRP Controllers: edited"},"TEXT:mrpControllers.edited":function(e){return"Edited MRP Controller: <a href='#mrpControllers/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:mrpControllers.deleted":function(){return"MRP Controllers: deleted"},"TEXT:mrpControllers.deleted":function(e){return"Deleted MRP Controller: <em>"+t.v(e,"model->_id")+"</em>"},"TYPE:prodLines.added":function(){return"Production line: added"},"TEXT:prodLines.added":function(e){return"Added production line: <a href='#prodLines/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:prodLines.edited":function(){return"Production line: edited"},"TEXT:prodLines.edited":function(e){return"Edited production line: <a href='#prodLines/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:prodLines.deleted":function(){return"Production line: deleted"},"TEXT:prodLines.deleted":function(e){return"Deleted production line: <em>"+t.v(e,"model->_id")+"</em>"},"TYPE:prodTasks.added":function(){return"Production tasks: added"},"TEXT:prodTasks.added":function(e){return"Added production task: <a href='#prodTasks/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->name")+"</a>"},"TYPE:prodTasks.edited":function(){return"Production tasks: edited"},"TEXT:prodTasks.edited":function(e){return"Edited production task: <a href='#prodTasks/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->name")+"</a>"},"TYPE:prodTasks.deleted":function(){return"Production tasks: deleted"},"TEXT:prodTasks.deleted":function(e){return"Deleted production task: <em>"+t.v(e,"model->name")+"</em>"},"TYPE:prodFlows.added":function(){return"Production flows: added"},"TEXT:prodFlows.added":function(e){return"Added production flow: <a href='#prodFlows/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->name")+"</a>"},"TYPE:prodFlows.edited":function(){return"Production flows: edited"},"TEXT:prodFlows.edited":function(e){return"Edited production flow: <a href='#prodFlows/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->name")+"</a>"},"TYPE:prodFlows.deleted":function(){return"Production flows: deleted"},"TEXT:prodFlows.deleted":function(e){return"Deleted production flow: <em>"+t.v(e,"model->name")+"</em>"},"TYPE:prodFunctions.added":function(){return"Production functions: added"},"TEXT:prodFunctions.added":function(e){return"Added production function: <a href='#prodFunctions/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->label")+"</a>"},"TYPE:prodFunctions.edited":function(){return"Production functions: edited"},"TEXT:prodFunctions.edited":function(e){return"Edited production function: <a href='#prodFunctions/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->label")+"</a>"},"TYPE:prodFunctions.deleted":function(){return"Production functions: deleted"},"TEXT:prodFunctions.deleted":function(e){return"Deleted production function: <em>"+t.v(e,"model->label")+"</em>"},"TYPE:fte.leader.created":function(){return"FTE (warehouse): added"},"TEXT:fte.leader.created":function(e){return"Created <a href='#fte/leader/"+t.v(e,"model->_id")+"'>a new FTE (warehouse) entry</a> for <em>"+t.v(e,"model->shift")+"</em> shift of <em>"+t.v(e,"model->date")+"</em> for subdivision <em>"+t.v(e,"model->subdivision")+"</em>."},"TYPE:fte.leader.locked":function(){return"FTE (warehouse): locked"},"TEXT:fte.leader.locked":function(e){return"Locked <a href='#fte/leader/"+t.v(e,"model->_id")+"'>an FTE (warehouse) entry</a> for <em>"+t.v(e,"model->shift")+"</em> shift of <em>"+t.v(e,"model->date")+"</em> for subdivision <em>"+t.v(e,"model->subdivision")+"</em>."},"TYPE:fte.leader.deleted":function(){return"FTE (warehouse): deleted"},"TEXT:fte.leader.deleted":function(e){return"Deleted an FTE (warehouse) entry for <em>"+t.v(e,"model->shift")+"</em> shift of <em>"+t.v(e,"model->date")+"</em> for subdivision <em>"+t.v(e,"model->subdivision")+"</em>."},"TYPE:fte.master.created":function(){return"FTE (production): added"},"TEXT:fte.master.created":function(e){return"Created <a href='#fte/master/"+t.v(e,"model->_id")+"'>a new FTE (production) entry</a> for <em>"+t.v(e,"model->shift")+"</em> shift of <em>"+t.v(e,"model->date")+"</em> for subdivision <em>"+t.v(e,"model->subdivision")+"</em>."},"TYPE:fte.master.locked":function(){return"FTE (production): locked"},"TEXT:fte.master.locked":function(e){return"Locked <a href='#fte/master/"+t.v(e,"model->_id")+"'>an FTE (production) entry</a> for <em>"+t.v(e,"model->shift")+"</em> shift of <em>"+t.v(e,"model->date")+"</em> for subdivision <em>"+t.v(e,"model->subdivision")+"</em>."},"TYPE:fte.master.deleted":function(){return"FTE (production): deleted"},"TEXT:fte.master.deleted":function(e){return"Deleted an FTE (production) entry for <em>"+t.v(e,"model->shift")+"</em> shift of <em>"+t.v(e,"model->date")+"</em> for subdivision <em>"+t.v(e,"model->subdivision")+"</em>."},"TYPE:hourlyPlans.created":function(){return"Hourly plans: added"},"TEXT:hourlyPlans.created":function(e){return"Created <a href='#hourlyPlans/"+t.v(e,"model->_id")+"'>a new hourly plan</a> for <em>"+t.v(e,"model->shift")+"</em> shift of <em>"+t.v(e,"model->date")+"</em> for division <em>"+t.v(e,"model->division")+"</em>."},"TYPE:hourlyPlans.locked":function(){return"Hourly plans: locked"},"TEXT:hourlyPlans.locked":function(e){return"Locked <a href='#hourlyPlans/"+t.v(e,"model->_id")+"'>an hourly plan</a> for <em>"+t.v(e,"model->shift")+"</em> shift of <em>"+t.v(e,"model->date")+"</em> for division <em>"+t.v(e,"model->division")+"</em>."},"TYPE:hourlyPlans.deleted":function(){return"Hourly plans: deleted"},"TEXT:hourlyPlans.deleted":function(e){return"Locked an hourly plan for <em>"+t.v(e,"model->shift")+"</em> shift of <em>"+t.v(e,"model->date")+"</em> for division <em>"+t.v(e,"model->division")+"</em>."},"TYPE:pressWorksheets.added":function(){return"Worksheets: added"},"TEXT:pressWorksheets.added":function(e){return"Added <a href='#pressWorksheets/"+t.v(e,"model->_id")+"'>a new worksheet</a>."},"TYPE:pressWorksheets.edited":function(){return"Worksheets: edycja"},"TEXT:pressWorksheets.edited":function(e){return"Edited worksheet: <a href='#pressWorksheets/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->rid")+"</a>"},"TYPE:pressWorksheets.deleted":function(){return"Worksheets: deleted"},"TEXT:pressWorksheets.deleted":function(e){return"Deleted worksheet: <em>"+t.v(e,"model->rid")+"</em>"},"TYPE:feedback.added":function(){return"Feedback: added"},"TEXT:feedback.added":function(){return"Added new feedback."},"TYPE:clipOrderCount.created":function(){return"CLIP: created"},"TEXT:clipOrderCount.created":function(e){return"Calculated CLIP for "+t.v(e,"date")+" ("+t.p(e,"total",0,"en",{one:"1 MRP",other:t.v(e,"total")+" different MRPs"})+")."},"TYPE:production.unlocked":function(){return"Production: line activation"},"TEXT:production.unlocked":function(e){return"Activated production line: <em>"+t.v(e,"prodLine")+"</em>"},"TYPE:production.locked":function(){return"Production: line deactivation"},"TEXT:production.locked":function(e){return"Deactivated production line: <em>"+t.v(e,"prodLine")+"</em>"},"TYPE:warehouse.controlCycles.synced":function(){return"Warehouse: control cycles sync"},"TEXT:warehouse.controlCycles.synced":function(e){return"Imported <em>"+t.v(e,"count")+"</em> "+t.p(e,"count",0,"en",{one:"control cycle",other:"control cycles"})+" from data downloaded at <em>"+t.v(e,"timestamp")+"</em>."},"TYPE:warehouse.controlCycles.syncFailed":function(){return"Warehouse: control cycles sync failure"},"TEXT:warehouse.controlCycles.syncFailed":function(e){return"Failed to import control cycles from data downloaded at <em>"+t.v(e,"timestamp")+"</em>: <em>"+t.v(e,"error")+"</em>"},"TYPE:warehouse.transferOrders.synced":function(){return"Warehouse: transfer orders sync"},"TEXT:warehouse.transferOrders.synced":function(e){return"Imported <em>"+t.v(e,"count")+"</em> "+t.p(e,"count",0,"en",{one:"transfer order",other:"transfer orders"})+" from data downloaded at <em>"+t.v(e,"timestamp")+"</em>."},"TYPE:warehouse.transferOrders.syncFailed":function(){return"Warehouse: transfer orders sync failure"},"TEXT:warehouse.transferOrders.syncFailed":function(e){return"Failed to import transfer orders from data downloaded at <em>"+t.v(e,"timestamp")+"</em>: <em>"+t.v(e,"error")+"</em>"},"TYPE:warehouse.shiftMetrics.synced":function(){return"Warehouse: metrics calc"},"TEXT:warehouse.shiftMetrics.synced":function(e){return"Calculated warehouse shift metrics for <em>"+t.v(e,"date")+"</em>."},"TYPE:warehouse.shiftMetrics.syncFailed":function(){return"Warehouse: metrics calc failure"},"TEXT:warehouse.shiftMetrics.syncFailed":function(e){return"Failed to calculate warehouse shift metrics for <em>"+t.v(e,"date")+"</em>: <em>"+t.v(e,"error")+"</em>"},"TYPE:xiconfPrograms.added":function(){return"Xiconf programs: added"},"TEXT:xiconfPrograms.added":function(e){return"Added program: <a href='#xiconf/programs/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->name")+"</a>"},"TYPE:xiconfPrograms.edited":function(){return"Xiconf programs: edited"},"TEXT:xiconfPrograms.edited":function(e){return"Edited program: <a href='#xiconf/programs/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->name")+"</a>"},"TYPE:xiconfPrograms.deleted":function(){return"Xiconf programs: deleted"},"TEXT:xiconfPrograms.deleted":function(e){return"Deleted program: <em>"+t.v(e,"model->name")+"</em>"}},pl:!0}}),define("app/nls/pl/events",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"MSG:LOADING_FAILURE":function(){return"≈Åadowanie zdarze≈Ñ nie powiod≈Ço siƒô :("},"MSG:LOADING_TYPES_FAILURE":function(){return"≈Åadowanie typ√≥w zdarze≈Ñ nie powiod≈Ço siƒô :("},"BREADCRUMBS:browse":function(){return"Zdarzenia"},"filter:placeholder:type":function(){return"Dowolny typ"},"filter:submit":function(){return"Filtruj zdarzenia"},"PROPERTY:time":function(){return"Czas wystƒÖpienia"},"PROPERTY:user":function(){return"U≈ºytkownik"},"PROPERTY:type":function(){return"Typ"},"PROPERTY:text":function(){return"Opis"},"PROPERTY:severity":function(){return"Poziom wa≈ºno≈õci"},"TYPE:app.started":function(){return"Start systemu"},"TEXT:app.started":function(e){return"<em>"+t.s(e,"id",{frontend:"Serwer aplikacji",controller:"Serwer sterownika",alarms:"Serwer alarm√≥w",other:"Serwer "+t.v(e,"id")})+"</em> wystartowa≈Ç w ≈õrodowisku <em>"+t.s(e,"env",{development:"rozwojowym",production:"produkcyjnym",other:"nieokre≈õlonym"})+"</em> w ciƒÖgu <em>"+t.v(e,"time")+"</em> ms."},"TYPE:users.login":function(){return"U≈ºytkownicy: zalogowanie"},"TEXT:users.login":function(){return"-"},"TYPE:users.loginFailure":function(){return"U≈ºytkownicy: nieudane logowanie"},"TEXT:users.loginFailure":function(e){return"Nieudane logowanie na konto: <em>"+t.v(e,"login")+"</em>"},"TYPE:users.logout":function(){return"U≈ºytkownicy: wylogowanie"},"TEXT:users.logout":function(){return"-"},"TYPE:users.added":function(){return"U≈ºytkownicy: dodanie"},"TEXT:users.added":function(e){return"Dodano u≈ºytkownika: <a href='#users/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->login")+"</a>"},"TYPE:users.edited":function(){return"U≈ºytkownicy: edycja"},"TEXT:users.edited":function(e){return"Zmodyfikowano u≈ºytkownika: <a href='#users/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->login")+"</a>"},"TYPE:users.deleted":function(){return"U≈ºytkownicy: usuniƒôcie"},"TEXT:users.deleted":function(e){return"Usuniƒôto u≈ºytkownika: <em>"+t.v(e,"model->login")+"</em>"},"TYPE:users.synced":function(){return"U≈ºytkownicy: synchronizacja"},"TEXT:users.synced":function(e){return"Dodano "+t.p(e,"created",0,"pl",{one:"1 nowego u≈ºytkownika",other:t.n(e,"created")+" nowych u≈ºytkownik√≥w"})+" i zmodyfikowano "+t.p(e,"updated",0,"pl",{one:"1 istniejƒÖcego u≈ºytkownika",other:t.n(e,"updated")+" istniejƒÖcych u≈ºytkownik√≥w"})+" podczas synchronizacji z bazƒÖ KD."},"TYPE:users.syncFailed":function(){return"U≈ºytkownicy: b≈ÇƒÖd synchronizacji"},"TEXT:users.syncFailed":function(e){return"Nie uda≈Ço siƒô zsynchronizowaƒá u≈ºytkownik√≥w z bazƒÖ KD: <em>"+t.v(e,"error")+"</em>"},"TYPE:mechOrders.edited":function(){return"Zlecenia dzia≈Çu mechanicznego: edycja"},"TEXT:mechOrders.edited":function(e){return"Zmodyfikowano zlecenie dzia≈Çu mechanicznego: <a href='#mechOrders/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:mechOrders.synced":function(){return"Zlecenia dzia≈Çu mechanicznego: import"},"TEXT:mechOrders.synced":function(e){return"Zaimportowano "+t.p(e,"count",0,"pl",{one:"1 zlecenie",few:t.n(e,"count")+" zlecenia",other:t.n(e,"count")+" zlece≈Ñ"})+" dzia≈Çu mechanicznego."},"TYPE:emptyOrders.synced":function(){return"Puste zlecenia: synchronizacja"},"TEXT:emptyOrders.synced":function(e){return"Dodano "+t.p(e,"count",0,"pl",{one:"1 nowe puste zlecenie",few:t.n(e,"count")+" nowe puste zlecenia",other:t.n(e,"count")+" nowych pustych zlece≈Ñ"})+"."},"TYPE:orders.synced":function(){return"Zlecenia reszty dzia≈Ç√≥w: synchronizacja"},"TEXT:orders.synced":function(e){return"Dodano "+t.p(e,"created",0,"pl",{one:"1 nowe",few:t.n(e,"created")+" nowe",other:t.n(e,"created")+" nowych"})+" i zmodyfikowano "+t.p(e,"updated",0,"pl",{one:"1 istniejƒÖce zlecenie",few:t.n(e,"updated")+" istniejƒÖce zlecenia",other:t.n(e,"updated")+" istniejƒÖcych zlece≈Ñ"})+t.s(e,"moduleName",{currentDayOrderImporter:"&nbsp;z aktualnego dnia",nextDayOrderImporter:"&nbsp;z nastƒôpnego dnia",prevDayOrderImporter:"&nbsp;z poprzedniego dnia",other:""})+"."},"TYPE:purchaseOrders.synced":function(){return"Zam√≥wienia: synchronizacja"},"TEXT:purchaseOrders.synced":function(e){return"Dodano "+t.p(e,"created",0,"pl",{one:"1 nowe zam√≥wienie",few:t.n(e,"created")+" nowe zam√≥wienia",other:t.n(e,"created")+" nowych zam√≥wie≈Ñ"})+", zmodyfikowano "+t.p(e,"updated",0,"pl",{one:"1 istniejƒÖce zam√≥wienie",few:t.n(e,"updated")+" istniejƒÖce zam√≥wienia",other:t.n(e,"updated")+" istniejƒÖcych zam√≥wie≈Ñ"})+" i zamkniƒôto "+t.p(e,"closed",0,"pl",{one:"1 zam√≥wienie",few:t.n(e,"closed")+" zam√≥wienia",other:t.n(e,"closed")+" zam√≥wie≈Ñ"})+" z danych otrzymanych "+t.v(e,"importedAt")+"."},"TYPE:orderStatuses.added":function(){return"Statusy zlece≈Ñ: dodanie"},"TEXT:orderStatuses.added":function(e){return"Dodano status zlece≈Ñ: <a href='#orderStatuses/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:orderStatuses.edited":function(){return"Statusy zlece≈Ñ: edycja"},"TEXT:orderStatuses.edited":function(e){return"Zmodyfikowano status zlece≈Ñ: <a href='#orderStatuses/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:orderStatuses.deleted":function(){return"Statusy zlece≈Ñ: usuniƒôcie"},"TEXT:orderStatuses.deleted":function(e){return"Usuniƒôto status zlece≈Ñ: <em>"+t.v(e,"model->_id")+"</em>"},"TYPE:downtimeReasons.added":function(){return"Powody przestoj√≥w: dodanie"},"TEXT:downtimeReasons.added":function(e){return"Dodano pow√≥d przestoj√≥w: <a href='#downtimeReasons/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:downtimeReasons.edited":function(){return"Powody przestoj√≥w: edycja"},"TEXT:downtimeReasons.edited":function(e){return"Zmodyfikowano pow√≥d przestoj√≥w: <a href='#downtimeReasons/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:downtimeReasons.deleted":function(){return"Powody przestoj√≥w: usuniƒôcie"},"TEXT:downtimeReasons.deleted":function(e){return"Usuniƒôto pow√≥d przestoj√≥w: <em>"+t.v(e,"model->_id")+"</em>"},"TYPE:lossReasons.added":function(){return"Powody strat materia≈Çowych: dodanie"},"TEXT:lossReasons.added":function(e){return"Dodano pow√≥d strat materia≈Çowych: <a href='#lossReasons/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:lossReasons.edited":function(){return"Powody strat materia≈Çowych: edycja"},"TEXT:lossReasons.edited":function(e){return"Zmodyfikowano pow√≥d strat materia≈Çowych: <a href='#lossReasons/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:lossReasons.deleted":function(){return"Powody strat materia≈Çowych: usuniƒôcie"},"TEXT:lossReasons.deleted":function(e){return"Usuniƒôto pow√≥d strat materia≈Çowych: <em>"+t.v(e,"model->_id")+"</em>"},"TYPE:aors.added":function(){return"Obszary odpowiedzialno≈õci: dodanie"},"TEXT:aors.added":function(e){return"Dodano obszar odpowiedzialno≈õci: <a href='#aors/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->name")+"</a>"},"TYPE:aors.edited":function(){return"Obszary odpowiedzialno≈õci: edycja"},"TEXT:aors.edited":function(e){return"Zmodyfikowano obszar odpowiedzialno≈õci: <a href='#aors/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->name")+"</a>"},"TYPE:aors.deleted":function(){return"Obszary odpowiedzialno≈õci: usuniƒôcie"},"TEXT:aors.deleted":function(e){return"Usuniƒôto obszar odpowiedzialno≈õci: <em>"+t.v(e,"model->name")+"</em>"},"TYPE:vendors.added":function(){return"Dostawcy: dodanie"},"TEXT:vendors.added":function(e){return"Dodano dostawcƒô: <a href='#vendors/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:vendors.edited":function(){return"Dostawcy: edycja"},"TEXT:vendors.edited":function(e){return"Zmodyfikowano dostawcƒô: <a href='#vendors/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:vendors.deleted":function(){return"Dostawcy: usuniƒôcie"},"TEXT:vendors.deleted":function(e){return"Usuniƒôto dostawcƒô: <em>"+t.v(e,"model->_id")+"</em>"},"TYPE:workCenters.added":function(){return"WorkCentera: dodanie"},"TEXT:workCenters.added":function(e){return"Dodano WorkCenter: <a href='#workCenters/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:workCenters.edited":function(){return"WorkCentera: edycja"},"TEXT:workCenters.edited":function(e){return"Zmodyfikowano WorkCenter: <a href='#workCenters/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:workCenters.deleted":function(){return"WorkCentera: usuniƒôcie"},"TEXT:workCenters.deleted":function(e){return"Usuniƒôto WorkCenter: <em>"+t.v(e,"model->_id")+"</em>"},"TYPE:divisions.added":function(){return"Wydzia≈Çy: dodanie"},"TEXT:divisions.added":function(e){return"Dodano wydzia≈Ç: <a href='#divisions/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:divisions.edited":function(){return"Wydzia≈Çy: edycja"},"TEXT:divisions.edited":function(e){return"Zmodyfikowano wydzia≈Ç: <a href='#divisions/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:divisions.deleted":function(){return"Wydzia≈Çy: usuniƒôcie"},"TEXT:divisions.deleted":function(e){return"Usuniƒôto wydzia≈Ç: <em>"+t.v(e,"model->_id")+"</em>"},"TYPE:subdivisions.added":function(){return"Dzia≈Çy: dodanie"},"TEXT:subdivisions.added":function(e){return"Dodano dzia≈Ç: <a href='#subdivisions/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->name")+"</a>"},"TYPE:subdivisions.edited":function(){return"Dzia≈Çy: edycja"},"TEXT:subdivisions.edited":function(e){return"Zmodyfikowano dzia≈Ç: <a href='#subdivisions/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->name")+"</a>"},"TYPE:subdivisions.deleted":function(){return"Dzia≈Çy: usuniƒôcie"},"TEXT:subdivisions.deleted":function(e){return"Usuniƒôto dzia≈Ç: <em>"+t.v(e,"model->name")+"</em>"},"TYPE:companies.added":function(){return"Firmy: dodanie"},"TEXT:companies.added":function(e){return"Dodano firmƒô: <a href='#companies/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->name")+"</a>"},"TYPE:companies.edited":function(){return"Firmy: edycja"},"TEXT:companies.edited":function(e){return"Zmodyfikowano firmƒô: <a href='#companies/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->name")+"</a>"},"TYPE:companies.deleted":function(){return"Firmy: usuniƒôcie"},"TEXT:companies.deleted":function(e){return"Usuniƒôto firmƒô: <em>"+t.v(e,"model->name")+"</em>"},"TYPE:mrpControllers.added":function(){return"Kontrolery MRP: dodanie"},"TEXT:mrpControllers.added":function(e){return"Dodano kontroler MRP: <a href='#mrpControllers/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:mrpControllers.edited":function(){return"Kontrolery MRP: edycja"},"TEXT:mrpControllers.edited":function(e){return"Zmodyfikowano kontroler MRP: <a href='#mrpControllers/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:mrpControllers.deleted":function(){return"Kontrolery MRP: usuniƒôcie"},"TEXT:mrpControllers.deleted":function(e){return"Usuniƒôto kontroler MRP: <em>"+t.v(e,"model->_id")+"</em>"},"TYPE:prodLines.added":function(){return"Linie produkcyjne: dodanie"},"TEXT:prodLines.added":function(e){return"Dodano liniƒô produkcyjnƒÖ: <a href='#prodLines/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:prodLines.edited":function(){return"Linie produkcyjne: edycja"},"TEXT:prodLines.edited":function(e){return"Zmodyfikowano liniƒô produkcyjnƒÖ: <a href='#prodLines/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->_id")+"</a>"},"TYPE:prodLines.deleted":function(){return"Linie produkcyjne: usuniƒôcie"},"TEXT:prodLines.deleted":function(e){return"Usuniƒôto liniƒô produkcyjnƒÖ: <em>"+t.v(e,"model->_id")+"</em>"},"TYPE:prodTasks.added":function(){return"Zadania produkcyjne: dodanie"},"TEXT:prodTasks.added":function(e){return"Dodano zadanie produkcyjne: <a href='#prodTasks/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->name")+"</a>"},"TYPE:prodTasks.edited":function(){return"Zadania produkcyjne: edycja"},"TEXT:prodTasks.edited":function(e){return"Zmodyfikowano zadanie produkcyjne: <a href='#prodTasks/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->name")+"</a>"},"TYPE:prodTasks.deleted":function(){return"Zadania produkcyjne: usuniƒôcie"},"TEXT:prodTasks.deleted":function(e){return"Usuniƒôto zadanie produkcyjne: <em>"+t.v(e,"model->name")+"</em>"},"TYPE:prodFlows.added":function(){return"Przep≈Çywy: dodanie"},"TEXT:prodFlows.added":function(e){return"Dodano przep≈Çyw: <a href='#prodFlows/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->name")+"</a>"},"TYPE:prodFlows.edited":function(){return"Przep≈Çywy: edycja"},"TEXT:prodFlows.edited":function(e){return"Zmodyfikowano przep≈Çyw: <a href='#prodFlows/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->name")+"</a>"},"TYPE:prodFlows.deleted":function(){return"Przep≈Çywy: usuniƒôcie"},"TEXT:prodFlows.deleted":function(e){return"Usuniƒôto przep≈Çyw: <em>"+t.v(e,"model->name")+"</em>"},"TYPE:prodFunctions.added":function(){return"Funkcje na produkcji: dodanie"},"TEXT:prodFunctions.added":function(e){return"Dodano funkcjƒô na produkcji: <a href='#prodFunctions/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->label")+"</a>"
},"TYPE:prodFunctions.edited":function(){return"Funkcje na produkcji: edycja"},"TEXT:prodFunctions.edited":function(e){return"Zmodyfikowano funkcjƒô na produkcji: <a href='#prodFunctions/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->label")+"</a>"},"TYPE:prodFunctions.deleted":function(){return"Funkcje na produkcji: usuniƒôcie"},"TEXT:prodFunctions.deleted":function(e){return"Usuniƒôto funkcjƒô na produkcji: <em>"+t.v(e,"model->label")+"</em>"},"TYPE:fte.leader.created":function(){return"FTE (magazyn): dodanie"},"TEXT:fte.leader.created":function(e){return"Utworzono <a href='#fte/leader/"+t.v(e,"model->_id")+"'>nowy wpis FTE (magazyn)</a> dla <em>"+t.v(e,"model->shift")+"</em> zmiany dnia <em>"+t.v(e,"model->date")+"</em> dla dzia≈Çu <em>"+t.v(e,"model->subdivision")+"</em>."},"TYPE:fte.leader.locked":function(){return"FTE (magazyn): zamkniƒôcie"},"TEXT:fte.leader.locked":function(e){return"Zamkniƒôto <a href='#fte/leader/"+t.v(e,"model->_id")+"'>wpis FTE (magazyn)</a> dla <em>"+t.v(e,"model->shift")+"</em> zmiany dnia <em>"+t.v(e,"model->date")+"</em> dla dzia≈Çu <em>"+t.v(e,"model->subdivision")+"</em>."},"TYPE:fte.leader.deleted":function(){return"FTE (magazyn): usuniƒôcie"},"TEXT:fte.leader.deleted":function(e){return"Usuniƒôto wpis FTE (magazyn) dla <em>"+t.v(e,"model->shift")+"</em> zmiany dnia <em>"+t.v(e,"model->date")+"</em> dla dzia≈Çu <em>"+t.v(e,"model->subdivision")+"</em>."},"TYPE:fte.master.created":function(){return"FTE (produkcja): dodanie"},"TEXT:fte.master.created":function(e){return"Utworzono <a href='#fte/master/"+t.v(e,"model->_id")+"'>nowy wpis FTE (produkcja)</a> dla <em>"+t.v(e,"model->shift")+"</em> zmiany dnia <em>"+t.v(e,"model->date")+"</em> dla dzia≈Çu <em>"+t.v(e,"model->subdivision")+"</em>."},"TYPE:fte.master.locked":function(){return"FTE (produkcja): zamkniƒôcie"},"TEXT:fte.master.locked":function(e){return"Zamkniƒôto <a href='#fte/master/"+t.v(e,"model->_id")+"'>wpis FTE (produkcja)</a> dla <em>"+t.v(e,"model->shift")+"</em> zmiany dnia <em>"+t.v(e,"model->date")+"</em> dla dzia≈Çu <em>"+t.v(e,"model->subdivision")+"</em>."},"TYPE:fte.master.deleted":function(){return"FTE (produkcja): usuniƒôcie"},"TEXT:fte.master.deleted":function(e){return"Usuniƒôto wpis FTE (produkcja) dla <em>"+t.v(e,"model->shift")+"</em> zmiany dnia <em>"+t.v(e,"model->date")+"</em> dla dzia≈Çu <em>"+t.v(e,"model->subdivision")+"</em>."},"TYPE:hourlyPlans.created":function(){return"Plany godzinowe: dodanie"},"TEXT:hourlyPlans.created":function(e){return"Utworzono <a href='#hourlyPlans/"+t.v(e,"model->_id")+"'>nowy plan godzinowy</a> dla <em>"+t.v(e,"model->shift")+"</em> zmiany dnia <em>"+t.v(e,"model->date")+"</em> dla wydzia≈Çu <em>"+t.v(e,"model->division")+"</em>."},"TYPE:hourlyPlans.locked":function(){return"Plany godzinowe: zamkniƒôcie"},"TEXT:hourlyPlans.locked":function(e){return"Zamkniƒôto <a href='#hourlyPlans/"+t.v(e,"model->_id")+"'>plan godzinowy</a> dla <em>"+t.v(e,"model->shift")+"</em> zmiany dnia <em>"+t.v(e,"model->date")+"</em> dla wydzia≈Çu <em>"+t.v(e,"model->division")+"</em>."},"TYPE:hourlyPlans.deleted":function(){return"Plany godzinowe: usuniƒôcie"},"TEXT:hourlyPlans.deleted":function(e){return"Usuniƒôto plan godzinowy dla <em>"+t.v(e,"model->shift")+"</em> zmiany dnia <em>"+t.v(e,"model->date")+"</em> dla wydzia≈Çu <em>"+t.v(e,"model->division")+"</em>."},"TYPE:pressWorksheets.added":function(){return"Karty pracy: dodanie"},"TEXT:pressWorksheets.added":function(e){return"Dodano nowƒÖ <a href='#pressWorksheets/"+t.v(e,"model->_id")+"'>kartƒô pracy</a>."},"TYPE:pressWorksheets.edited":function(){return"Karty pracy: edycja"},"TEXT:pressWorksheets.edited":function(e){return"Zmodyfikowano kartƒô pracy: <a href='#pressWorksheets/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->rid")+"</a>"},"TYPE:pressWorksheets.deleted":function(){return"Karty pracy: usuniƒôcie"},"TEXT:pressWorksheets.deleted":function(e){return"Usuniƒôto kartƒô pracy: <em>"+t.v(e,"model->rid")+"</em>"},"TYPE:feedback.added":function(){return"Feedback: dodanie"},"TEXT:feedback.added":function(){return"Dodano nowy feedback."},"TYPE:clipOrderCount.created":function(){return"CLIP: utworzenie"},"TEXT:clipOrderCount.created":function(e){return"Obliczono CLIP z dnia "+t.v(e,"date")+" ("+t.v(e,"total")+" MRP)."},"TYPE:production.unlocked":function(){return"Produkcja: aktywacja linii"},"TEXT:production.unlocked":function(e){return"Aktywowano liniƒô produkcyjnƒÖ: <em>"+t.v(e,"prodLine")+"</em>"},"TYPE:production.locked":function(){return"Produkcja: dezaktywacja linii"},"TEXT:production.locked":function(e){return"Dezaktywowano liniƒô produkcyjnƒÖ: <em>"+t.v(e,"prodLine")+"</em>"},"TYPE:warehouse.controlCycles.synced":function(){return"Magazyn: synchronizacja cykli kontrolnych"},"TEXT:warehouse.controlCycles.synced":function(e){return"Zaimportowano <em>"+t.v(e,"count")+"</em> "+t.p(e,"count",0,"pl",{one:"cykl kontrolny",few:"cykle kontrolne",other:"cylki kontrolnych"})+" z danych pobranych <em>"+t.v(e,"timestamp")+"</em>."},"TYPE:warehouse.controlCycles.syncFailed":function(){return"Magazyn: nieudana synchronizacja cykli kontrolnych"},"TEXT:warehouse.controlCycles.syncFailed":function(e){return"Nie uda≈Ço siƒô zaimportowaƒá cykli kontrolnych z danych pobranych <em>"+t.v(e,"timestamp")+"</em>: <em>"+t.v(e,"error")+"</em>"},"TYPE:warehouse.transferOrders.synced":function(){return"Magazyn: synchronizacja zam√≥wie≈Ñ przeniesienia"},"TEXT:warehouse.transferOrders.synced":function(e){return"Zaimportowano <em>"+t.v(e,"count")+"</em> "+t.p(e,"count",0,"pl",{one:"zam√≥wienie przeniesienia",few:"zam√≥wienia przeniesienia",other:"zam√≥wie≈Ñ przeniesienia"})+" z danych pobranych <em>"+t.v(e,"timestamp")+"</em>."},"TYPE:warehouse.transferOrders.syncFailed":function(){return"Magazyn: nieudana synchronizacja zam√≥wie≈Ñ przeniesienia"},"TEXT:warehouse.transferOrders.syncFailed":function(e){return"Nie uda≈Ço siƒô zaimportowaƒá zam√≥wie≈Ñ przeniesienia z danych pobranych <em>"+t.v(e,"timestamp")+"</em>: <em>"+t.v(e,"error")+"</em>"},"TYPE:warehouse.shiftMetrics.synced":function(){return"Magazyn: obliczenie wska≈∫nik√≥w"},"TEXT:warehouse.shiftMetrics.synced":function(e){return"Obliczono wska≈∫niki magazynu dla dnia <em>"+t.v(e,"date")+"</em>."},"TYPE:warehouse.shiftMetrics.syncFailed":function(){return"Magazyn: nieudane obliczenie wska≈∫nik√≥w"},"TEXT:warehouse.shiftMetrics.syncFailed":function(e){return"Nie uda≈Ço siƒô obliczyƒá wska≈∫nik√≥w magazynu dla dnia <em>"+t.v(e,"date")+"</em>: <em>"+t.v(e,"error")+"</em>"},"TYPE:xiconfPrograms.added":function(){return"Programy Xiconf: dodanie"},"TEXT:xiconfPrograms.added":function(e){return"Dodano program: <a href='#xiconf/programs/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->name")+"</a>"},"TYPE:xiconfPrograms.edited":function(){return"Programy Xiconf: edycja"},"TEXT:xiconfPrograms.edited":function(e){return"Zmodyfikowano program: <a href='#xiconf/programs/"+t.v(e,"model->_id")+"'>"+t.v(e,"model->name")+"</a>"},"TYPE:xiconfPrograms.deleted":function(){return"Programy Xiconf: usuniƒôcie"},"TEXT:xiconfPrograms.deleted":function(e){return"Usuniƒôto program: <em>"+t.v(e,"model->name")+"</em>"}}}),define("app/events/routes",["../router","../viewport","../user","i18n!app/nls/events"],function(e,t,n){e.map("/events",n.auth("EVENTS:VIEW"),function(e){t.loadPage("app/events/pages/EventListPage",function(t){return new t({rql:e.rql})})})}),define("app/emptyOrders/EmptyOrder",["app/time","../core/Model"],function(e,t){return t.extend({urlRoot:"/emptyOrders",clientUrlRoot:"#emptyOrders",topicPrefix:"emptyOrders",privilegePrefix:"ORDERS",nlsDomain:"emptyOrders",labelAttribute:"_id",defaults:{nc12:null,mrp:null,startDate:null,finishDate:null,statuses:null,createdAt:null},toJSON:function(n){n||(n={});var r=t.prototype.toJSON.call(this);return r.startDate&&(r.startDateText=e.format(r.startDate,n.startFinishDateFormat||"LL")),r.finishDate&&(r.finishDateText=e.format(r.finishDate,n.startFinishDateFormat||"LL")),r.createdAt&&(r.createdAtText=e.format(r.createdAt,"LLLL")),r}})}),define("app/emptyOrders/EmptyOrderCollection",["../time","../core/Collection","./EmptyOrder"],function(e,t,n){return t.extend({model:n,rqlQuery:function(t){var n=e.getMoment().hours(0).minutes(0).seconds(0).milliseconds(0);return t.Query.fromObject({fields:{nc12:1,mrp:1,startDate:1,finishDate:1},sort:{startDate:-1,finishDate:-1},limit:15,selector:{name:"and",args:[{name:"ge",args:["startDate",n.valueOf()]},{name:"le",args:["startDate",n.valueOf()]}]}})}})}),define("app/emptyOrders/views/EmptyOrderListView",["app/i18n","app/core/views/ListView"],function(e,t){return t.extend({remoteTopics:{"emptyOrders.synced":"refreshCollection"},serializeColumns:function(){return[{id:"_id",label:e("emptyOrders","PROPERTY:_id")},{id:"nc12",label:e("emptyOrders","PROPERTY:nc12")},{id:"mrp",label:e("emptyOrders","PROPERTY:mrp")},{id:"startDateText",label:e("emptyOrders","PROPERTY:startDate")},{id:"finishDateText",label:e("emptyOrders","PROPERTY:finishDate")}]},serializeActions:function(){return[]}})}),define("app/core/util/buttonGroup",[],function(){return{toggle:function(e){e.find("input:checked").parent().addClass("active")},getValue:function(e){var t=e.find("input");return"radio"===t[0].type||1===t.length?t.filter(":checked").val():t.filter(":checked").map(function(){return this.value}).get()}}}),define("app/core/templates/filterLimit",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="form-group">\n  <label for="',idPrefix,'-limit">',t("core","filter:limit"),'</label>\n  <input id="',idPrefix,'-limit" class="form-control" name="limit" type="number" min="',min,'" max="',max,'" step="1">\n</div>\n')}();return buf.join("")}}),define("app/core/views/FilterView",["underscore","js2form","h5.rql/specialTerms","app/core/View","app/core/util/buttonGroup","app/core/templates/filterLimit","select2"],function(e,t,n,r,i,o){return r.extend({minLimit:5,maxLimit:100,termToForm:{},defaultFormData:{},formData:null,events:{submit:function(){return this.changeFilter(),!1}},serialize:function(){var e=this;return{idPrefix:this.idPrefix,renderLimit:function(){return o({idPrefix:e.idPrefix,min:e.minLimit,max:e.maxLimit})}}},toggleButtonGroup:function(e){return i.toggle(this.$id(e))},getButtonGroupValue:function(e){return i.getValue(this.$id(e))},afterRender:function(){this.formData=this.serializeQueryToForm(),t(this.el,this.formData)},serializeQueryToForm:function(){var t=this.model.rqlQuery,r=e.extend({},e.result(this,"defaultFormData"),{limit:t.limit<5?5:t.limit>100?100:t.limit});return t.selector.args.forEach(function(e){n[e.name]||this.serializeTermToForm(e,r)},this),r},serializeTermToForm:function(e,t){var n="string"==typeof e.args[0]?e.args[0]:null,r=this.termToForm[n];r&&("string"==typeof r&&(r=this.termToForm[r]),"function"==typeof r&&r.call(this,n,e,t))},changeFilter:function(){var e=this.model.rqlQuery,t=[];this.copyPopulateTerms(t),this.serializeFormToQuery(t,e),e.selector={name:"and",args:t},e.skip=0,e.limit=Math.min(Math.max(parseInt(this.$id("limit").val(),10)||15,this.minLimit),this.maxLimit),this.trigger("filterChanged",e)},copyPopulateTerms:function(e){this.model.rqlQuery.selector.args.forEach(function(t){"populate"===t.name&&e.push(t)})},serializeFormToQuery:function(){},serializeRegexTerm:function(e,t,n,r){var i=this.$id(t.replace(/\./g,"-")),o=i.val().trim();"-"!==o&&null!==r&&(o=o.replace(void 0===r?/[^0-9]/g:r,"")),i.val(o),"-"===o&&(o=null),null===o||o.length===n?e.push({name:"eq",args:[t,o]}):o.length>0&&e.push({name:"regex",args:[t,o]})}})}),define("app/core/util/fixTimeRange",["underscore","moment","app/time"],function(e,t,n){function r(e,r,i){var o;if(e.hasClass("form-group-datetime")){var a=e.find("input[type=date]"),s=e.find("input[type=time]"),u=a.val().trim(),c=s.val().trim();0===c.length&&(c=r),o=(i?t.utc:n.getMoment)(u+" "+c,"YYYY-MM-DD HH:mm:ss")}else o=(i?t.utc:n.getMoment)(e.val(),"YYYY-MM-DD HH:mm:ss");var l=o.isValid();if(e.hasClass("form-group-datetime"))e.find("input[type=date]").val(l?o.format("YYYY-MM-DD"):""),e.find("input[type=time]").val(l?o.format("HH:mm"):"");else if(l){var d="";switch(e.attr("type")){case"datetime-local":case"datetime":d=o.toISOString();break;case"date":d=o.format("YYYY-MM-DD");break;case"time":d=o.format("HH:mm");break;default:d=o.format("YYYY-MM-DD HH:mm")}e.val(d)}else e.val("");return o}var i=document.createElement("input");i.setAttribute("type","datetime-local"),i="text"!==i.type;var o={};return o.fromView=function(t,n){n=e.defaults(n||{},{fromId:"from",toId:"to",defaultTime:"00:00",utc:!1});var i={from:null,to:null},o=r(t.$id(n.fromId),n.defaultTime,n.utc),a=r(t.$id(n.toId),n.defaultTime,n.utc);return o.isValid()&&(i.from=o.valueOf()),a.isValid()&&(i.to=a.valueOf()),i},o.toFormData=function(r,o,a,s){if("select"!==o.name&&"sort"!==o.name){s=e.defaults(s||{},{utc:!1});var u="ge"===o.name?"from":"to",c=(s.utc?t.utc:n.getMoment)(o.args[1]);"date+time"===a?(r[u+"-date"]=c.format("YYYY-MM-DD"),r[u+"-time"]=c.format("HH:mm")):r[u]="datetime"===a?i?c.toISOString():c.format("YYYY-MM-DD HH:mm:ss"):c.format("time"===a?"HH:mm:ss":"YYYY-MM-DD")}},o}),define("app/emptyOrders/templates/filter",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="well">\n  <form id="',idPrefix,'-form" class="filter-form">\n    <div class="form-group">\n      <label for="',idPrefix,'-_id">',t("emptyOrders","PROPERTY:_id"),'</label>\n      <input id="',idPrefix,'-_id" class="form-control orders-filter-_id" name="_id" type="text" minlength="4" maxlength="10" placeholder="',t("emptyOrders","filter:placeholder:_id"),'">\n    </div><div class="form-group form-group-dateRange">\n      <div>\n        <label class="radio-inline">\n          <input name="date" type="radio" value="startDate">\n          ',t("emptyOrders","PROPERTY:startDate"),'\n        </label><label class="radio-inline">\n          <input name="date" type="radio" value="finishDate">\n          ',t("emptyOrders","PROPERTY:finishDate"),'\n        </label>\n      </div>\n      <div>\n        <label for="',idPrefix,'-from">',t("core","filter:date:from"),'</label>\n        <input id="',idPrefix,'-from" class="form-control" name="from" type="date" placeholder="YYYY-MM-DD">\n        <label for="',idPrefix,'-to" class="control-label">',t("core","filter:date:to"),'</label>\n        <input id="',idPrefix,'-to" class="form-control" name="to" type="date" placeholder="YYYY-MM-DD">\n      </div>\n    </div><div\n      class="form-group">\n      <label for="',idPrefix,'-limit">',t("core","filter:limit"),'</label>\n      <input id="',idPrefix,'-limit" class="form-control" name="limit" type="number" value="25" min="5" max="100" step="1">\n    </div><div\n      class="form-group filter-actions">\n      <button type="submit" class="btn btn-default"><i class="fa fa-filter"></i><span>',t("emptyOrders","filter:submit"),"</span></button>\n    </div>\n  </form>\n</div>\n")}();return buf.join("")}}),define("app/emptyOrders/views/EmptyOrderFilterView",["underscore","app/core/views/FilterView","app/core/util/fixTimeRange","app/emptyOrders/templates/filter"],function(e,t,n,r){return t.extend({template:r,events:e.extend({},t.prototype.events,{"change #-from":function(e){var t=this.$id("to");"true"!==t.attr("data-changed")&&t.val(e.target.value)},"change #-to":function(e){e.target.setAttribute("data-changed","true")}}),defaultFormData:{_id:"",date:"startDate",from:"",to:""},termToForm:{startDate:function(e,t,r){r.date=e,n.toFormData(r,t,"date")},_id:function(e,t,n){var r=t.args[1];n[e]="string"==typeof r?r.replace(/[^0-9]/g,""):"-"},finishDate:"startDate"},serializeFormToQuery:function(e){var t=n.fromView(this),r=this.$("[name=date]:checked").val();this.serializeRegexTerm(e,"_id",9),t.from&&e.push({name:"ge",args:[r,t.from]}),t.to&&e.push({name:"le",args:[r,t.to]})}})}),define("app/core/templates/listPage",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div>\n  <div class="filter-container"></div>\n  <div class="list-container"></div>\n</div>\n')}();return buf.join("")}}),define("app/emptyOrders/pages/EmptyOrderListPage",["app/i18n","app/core/util/bindLoadingMessage","app/core/View","../EmptyOrderCollection","../views/EmptyOrderListView","../views/EmptyOrderFilterView","app/core/templates/listPage"],function(e,t,n,r,i,o,a){return n.extend({template:a,layoutName:"page",pageId:"emptyOrderList",breadcrumbs:[e.bound("emptyOrders","BREADCRUMBS:browse")],actions:[{className:"emptyOrders-pageAction-print",label:e.bound("emptyOrders","PAGE_ACTION:print"),icon:"print",href:"#emptyOrders;print",privileges:"ORDERS:VIEW"}],initialize:function(){this.defineModels(),this.defineViews(),this.setView(".filter-container",this.filterView),this.setView(".list-container",this.listView)},destroy:function(){this.layout=null},setUpLayout:function(e){this.layout=e},defineModels:function(){this.collection=t(new r(null,{rqlQuery:this.options.rql}),this)},defineViews:function(){this.filterView=new o({model:{rqlQuery:this.collection.rqlQuery}}),this.listView=new i({collection:this.collection}),this.listenTo(this.filterView,"filterChanged",this.refreshList)},load:function(e){return e(this.collection.fetch({reset:!0}))},refreshList:function(e){this.collection.rqlQuery=e,this.listView.refreshCollectionNow();var t=e.toString();this.broker.publish("router.navigate",{url:this.collection.genClientUrl()+"?"+t,trigger:!1,replace:!0}),this.layout&&(this.actions[0].href="#emptyOrders;print?"+t,this.layout.setActions(this.actions,this))}})}),define("app/core/templates/printableList",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<table class="table table-bordered table-condensed ',className,'">\n  <thead>\n    <tr>\n      '),columns.forEach(function(e){buf.push("\n      <th>",e.label,"</th>\n      ")}),buf.push("\n    </tr>\n  </thead>\n  <tbody>\n    "),rows.length||buf.push('\n    <tr>\n      <td colspan="',columns.length+1,'">',t("core","LIST:NO_DATA"),"</td>\n    </tr>\n    "),buf.push("\n    "),rows.forEach(function(e){buf.push('\n    <tr class="list-item ',e.className?e.className:"",'">\n      '),columns.forEach(function(n){buf.push("\n      <td>\n        "),null==e[n.id]?buf.push("\n        <em>",t("core","LIST:NO_DATA:cell"),"</em>\n        "):buf.push("\n        ",e[n.id],"\n        "),buf.push("\n      </td>\n      ")}),buf.push("\n    </tr>\n    ")}),buf.push("\n  </tbody>\n</table>\n")}();return buf.join("")}}),define("app/core/views/PrintableListView",["app/i18n","app/user","../View","./ActionFormView","./PaginationView","app/core/templates/printableList"],function(e,t,n,r,i,o){return n.extend({template:o,serialize:function(){return{className:this.className||"",columns:this.serializeColumns(),rows:this.serializeRows()}},serializeColumns:function(){var t,n=this.collection.getNlsDomain();return t=Array.isArray(this.options.columns)?this.options.columns:Array.isArray(this.columns)?this.columns:[],t.map(function(t){return{id:t,label:e(n,"PROPERTY:"+t)}})},serializeRows:function(){return this.collection.toJSON()},afterRender:function(){this.listenToOnce(this.collection,"reset",this.render)},fitToPrintablePage:function(e){var t=this.$("table"),n=t.find("thead").outerHeight(),r=[[]],i=n,o=this;this.$("tbody > tr").each(function(){var t=o.$(this),a=t.height();i+a>e&&(i=n,r[r.length-1].forEach(function(e){e.detach()}),r.push([])),i+=a,r[r.length-1].push(t)}),t.find("tbody").empty();var a=r.map(function(e){var n=t.clone(),r=n.find("tbody");return e.forEach(function(e){r.append(e.detach())}),n});return t.remove(),a}})}),define("app/emptyOrders/views/EmptyOrderPrintableListView",["app/i18n","app/core/views/PrintableListView"],function(e,t){return t.extend({serializeColumns:function(){return[{id:"_id",label:e("emptyOrders","PROPERTY:_id")},{id:"nc12",label:e("emptyOrders","PROPERTY:nc12")},{id:"mrp",label:e("emptyOrders","PROPERTY:mrp")},{id:"startDateText",label:e("emptyOrders","PROPERTY:startDate")},{id:"finishDateText",label:e("emptyOrders","PROPERTY:finishDate")}]},serializeRows:function(){return this.collection.toJSON({startFinishDateFormat:"YYYY-MM-DD"})}})}),define("app/emptyOrders/pages/EmptyOrderPrintableListPage",["underscore","app/time","app/i18n","app/core/util/bindLoadingMessage","app/core/View","../EmptyOrderCollection","../views/EmptyOrderPrintableListView"],function(e,t,n,r,i,o,a){return i.extend({layoutName:"print",pageId:"emptyOrderPrintableList",hdLeft:function(){var r=e.find(this.collection.rqlQuery.selector.args,function(e){return"eq"===e.name&&("startDate"===e.args[0]||"finishDate"===e.args[0])});return r?n("emptyOrders","PRINT_PAGE:HD:LEFT:"+r.args[0],{date:t.format(r.args[1],"LL")}):n("emptyOrders","PRINT_PAGE:HD:LEFT:all")},breadcrumbs:[n.bound("emptyOrders","BREADCRUMBS:browse")],initialize:function(){this.collection=r(new o(null,{rqlQuery:this.options.rql}),this),this.collection.rqlQuery.limit=-1,this.view=new a({collection:this.collection})},load:function(e){return e(this.collection.fetch({reset:!0}))}})}),define("app/nls/emptyOrders",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Empty orders"},"MSG:LOADING_FAILURE":function(){return"Failed to load the empty orders :("},"PAGE_ACTION:print":function(){return"Show printable version"},"PRINT_PAGE:HD:LEFT:all":function(){return"All orders without any operations"},"PRINT_PAGE:HD:LEFT:startDate":function(e){return"Orders without any operations starting at "+t.v(e,"date")},"PRINT_PAGE:HD:LEFT:finishDate":function(e){return"Orders without any operations finishing at "+t.v(e,"date")},"PRINT_PAGE:FT:PAGE_NO":function(){return"Page <span class=print-page-no>?</span> of <span class=print-page-count>?</span>"},"PRINT_PAGE:FT:INFO":function(){return"Printout generated at <span class=print-page-date>?</span> by <span class=print-page-user>?</span>."},"PROPERTY:_id":function(){return"Order no"},"PROPERTY:createdAt":function(){return"Created at"},"PROPERTY:nc12":function(){return"12NC"},"PROPERTY:mrp":function(){return"MRP"},"PROPERTY:startDate":function(){return"Start date"},"PROPERTY:finishDate":function(){return"Finish date"},"PROPERTY:statuses":function(){return"Status"},"filter:placeholder:_id":function(){return"Any order"},"filter:submit":function(){return"Filter empty orders"}},pl:!0}}),define("app/nls/pl/emptyOrders",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Puste zlecenia"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie pustych zlece≈Ñ nie powiod≈Ço siƒô :("},"PAGE_ACTION:print":function(){return"Poka≈º wersjƒô do druku"},"PRINT_PAGE:HD:LEFT:all":function(){return"Wszystkie zlecenia bez ≈ºadnych operacji"},"PRINT_PAGE:HD:LEFT:startDate":function(e){return"Zlecenia bez ≈ºadnych operacji rozpoczynajƒÖce siƒô "+t.v(e,"date")},"PRINT_PAGE:HD:LEFT:finishDate":function(e){return"Zlecenia bez ≈ºadnych operacji ko≈ÑczƒÖce siƒô "+t.v(e,"date")},"PRINT_PAGE:FT:PAGE_NO":function(){return"Strona <span class=print-page-no>?</span> z <span class=print-page-count>?</span>"},"PRINT_PAGE:FT:INFO":function(){return"Wydruk wygenerowany <span class=print-page-date>?</span> przez u≈ºytkownika <span class=print-page-user>?</span>."},"PROPERTY:_id":function(){return"Nr zlecenia"},"PROPERTY:createdAt":function(){return"Czas stworzenia"},"PROPERTY:nc12":function(){return"12NC"},"PROPERTY:mrp":function(){return"MRP"},"PROPERTY:startDate":function(){return"Data startu"},"PROPERTY:finishDate":function(){return"Data uko≈Ñczenia"},"PROPERTY:statuses":function(){return"Status"},"filter:placeholder:_id":function(){return"Dowolny nr"},"filter:submit":function(){return"Filtruj puste zlecenia"}}}),define("app/emptyOrders/routes",["../router","../viewport","../user","./pages/EmptyOrderListPage","./pages/EmptyOrderPrintableListPage","i18n!app/nls/emptyOrders"],function(e,t,n,r,i){var o=n.auth("ORDERS:VIEW");e.map("/emptyOrders",o,function(e){t.showPage(new r({rql:e.rql}))}),e.map("/emptyOrders;print",o,function(e){t.showPage(new i({rql:e.rql}))})}),define("app/prodFunctions/ProdFunction",["../i18n","../data/companies","../core/Model","app/core/templates/colorLabel"],function(e,t,n,r){return n.extend({urlRoot:"/prodFunctions",clientUrlRoot:"#prodFunctions",topicPrefix:"prodFunctions",privilegePrefix:"DICTIONARIES",nlsDomain:"prodFunctions",labelAttribute:"label",defaults:function(){return{label:"",fteMasterPosition:-1,fteLeaderPosition:-1,direct:!1,dirIndirRatio:100,companies:[],color:"#000000"}},serialize:function(){var n=this.toJSON();return n.label||(n.label=n._id),n.dirIndirRatio=n.direct?n.dirIndirRatio.toLocaleString()+" / "+(100-n.dirIndirRatio).toLocaleString():"-",n.direct=e("prodFunctions","direct:"+n.direct),n.companies=(n.companies||[]).map(function(e){var n=t.get(e);return n?n.getLabel():null}).filter(function(e){return!!e}).join("; "),n.companies.length||(n.companies="-"),n.color=r({color:n.color}),-1===n.fteMasterPosition&&(n.fteMasterPosition="-"),-1===n.fteLeaderPosition&&(n.fteLeaderPosition="-"),n}})}),define("app/prodFunctions/ProdFunctionCollection",["../core/Collection","./ProdFunction"],function(e,t){return e.extend({model:t,rqlQuery:"sort(label)",comparator:"label"})}),define("app/data/prodFunctions",["app/prodFunctions/ProdFunctionCollection","./createStorage"],function(e,t){return t("PROD_FUNCTIONS","prodFunctions",e)}),define("app/mrpControllers/MrpController",["../core/Model","app/data/subdivisions"],function(e,t){return e.extend({urlRoot:"/mrpControllers",clientUrlRoot:"#mrpControllers",topicPrefix:"mrpControllers",privilegePrefix:"DICTIONARIES",nlsDomain:"mrpControllers",labelAttribute:"_id",defaults:{subdivision:null,description:null,deactivatedAt:null,replacedBy:null},getSubdivision:function(){return t.get(this.get("subdivision"))||null}})}),define("app/mrpControllers/MrpControllerCollection",["../core/Collection","./MrpController"],function(e,t){return e.extend({model:t,rqlQuery:"select(subdivision,description,deactivatedAt)&sort(_id)",comparator:"_id"})}),define("app/data/mrpControllers",["app/mrpControllers/MrpControllerCollection","./createStorage"],function(e,t){return t("MRP_CONTROLLERS","mrpControllers",e)}),define("app/prodFlows/ProdFlow",["../core/Model","app/data/mrpControllers"],function(e,t){return e.extend({urlRoot:"/prodFlows",clientUrlRoot:"#prodFlows",topicPrefix:"prodFlows",privilegePrefix:"DICTIONARIES",nlsDomain:"prodFlows",labelAttribute:"name",defaults:{mrpController:null,name:null,deactivatedAt:null},parse:function(e){return"string"==typeof e.mrpController?e.mrpController=[e.mrpController]:Array.isArray(e.mrpController)||(e.mrpController=[]),e},getSubdivision:function(){var e=this.get("mrpController");if(!Array.isArray(e)||!e.length)return null;var n=t.get(e[0]);return n?n.getSubdivision():null}})}),define("app/prodFlows/ProdFlowCollection",["../core/Collection","./ProdFlow"],function(e,t){return e.extend({model:t,rqlQuery:"select(mrpController,name,deactivatedAt)&sort(name)",comparator:"name"})}),define("app/data/prodFlows",["app/prodFlows/ProdFlowCollection","./createStorage"],function(e,t){return t("PROD_FLOWS","prodFlows",e)}),define("app/workCenters/WorkCenter",["../core/Model","app/data/mrpControllers","app/data/prodFlows"],function(e,t,n){return e.extend({urlRoot:"/workCenters",clientUrlRoot:"#workCenters",topicPrefix:"workCenters",privilegePrefix:"DICTIONARIES",nlsDomain:"workCenters",labelAttribute:"_id",defaults:{mrpController:null,prodFlow:null,description:null,deactivatedAt:null},getSubdivision:function(){var e;if(this.get("mrpController"))e=t.get(this.get("mrpController"));else{var r=n.get(this.get("prodFlow"));r&&(e=t.get((r.get("mrpController")||[])[0]))}return e?e.getSubdivision():null}})}),define("app/workCenters/WorkCenterCollection",["../core/Collection","./WorkCenter"],function(e,t){return e.extend({model:t,rqlQuery:"select(mrpController,prodFlow,description,deactivatedAt)&sort(_id)",comparator:"_id"})}),define("app/data/workCenters",["app/workCenters/WorkCenterCollection","./createStorage"],function(e,t){return t("WORK_CENTERS","workCenters",e)}),define("app/prodLines/ProdLine",["../core/Model","../data/workCenters"],function(e,t){return e.extend({urlRoot:"/prodLines",clientUrlRoot:"#prodLines",topicPrefix:"prodLines",privilegePrefix:"DICTIONARIES",nlsDomain:"prodLines",labelAttribute:"_id",defaults:{workCenter:null,description:null,inventoryNo:null,deactivatedAt:null},getSubdivision:function(){var e=t.get(this.get("workCenter"));return e?e.getSubdivision():null}})}),define("app/prodLines/ProdLineCollection",["../user","../core/Collection","./ProdLine"],function(e,t,n){return t.extend({model:n,rqlQuery:"select(workCenter,description,inventoryNo,deactivatedAt)&sort(workCenter,_id)",comparator:"_id",getForCurrentUser:function(){var t=e.getDivision(),n=e.getSubdivision();return this.filter(function(r){if(e.data.super||!t)return!0;var i=r.getSubdivision();if(!i)return!0;if(n)return i.id===n.id;var o=i.get("division");return o?o===t.id:!0})}})}),define("app/data/prodLines",["app/prodLines/ProdLineCollection","./createStorage"],function(e,t){return t("PROD_LINES","prodLines",e)}),define("app/data/views/renderOrgUnitPath",["underscore","../divisions","../subdivisions","../mrpControllers","../workCenters","../prodFlows","../prodLines"],function(e,t,n,r,i,o,a){return function(s,u,c){if(!s)return null;var l=[];return(s.constructor!==a.model||(l.unshift(s),s=i.get(s.get("workCenter"))))&&(s.constructor!==i.model||(l.unshift(s),s=s.get("prodFlow")?o.get(s.get("prodFlow")):r.get(s.get("mrpController"))))&&(s.constructor!==o.model||(l.unshift(s),s=r.get((s.get("mrpController")||[])[0])))&&(s.constructor!==r.model||(l.unshift(s),s=n.get(s.get("subdivision"))))&&(s.constructor!==n.model||(l.unshift(s),s=t.get(s.get("division"))))?(s.constructor===t.model&&l.unshift(s),c!==!1&&l.pop(),0===l.length?null:l.map(function(t){var n=e.escape(t.getLabel());return u?'<a href="'+t.genClientUrl()+'">'+n+"</a>":n}).join(" \\ ")):null}}),define("app/fte/util/isEditable",["app/data/subdivisions"],function(e){return function(t,n){if(n.isAllowedTo("PROD_DATA:MANAGE"))return!0;if(!n.isAllowedTo(t.getPrivilegePrefix()+":MANAGE"))return!1;var r=Date.parse(t.get("createdAt"));if(Date.now()>=r+288e5)return!1;var i=n.getDivision();if(!i||n.isAllowedTo(t.getPrivilegePrefix()+":ALL"))return!0;var o=e.get(t.get("subdivision"));if(!o)return!1;
var a=o.get("division");if(!a||i.id!==a)return!1;var s=n.getSubdivision();return s?s.id===o.id:!0}}),define("app/fte/FteMasterEntry",["underscore","../i18n","../time","../data/subdivisions","../data/prodFunctions","../data/views/renderOrgUnitPath","../core/Model","./util/isEditable"],function(e,t,n,r,i,o,a,s){return a.extend({urlRoot:"/fte/master",clientUrlRoot:"#fte/master",topicPrefix:"fte.master",privilegePrefix:"FTE:MASTER",nlsDomain:"fte",defaults:{subdivision:null,date:null,shift:null,flows:null,tasks:null,createdAt:null,creator:null,updatedAt:null,updater:null,absentUsers:null},getLabel:function(){return t(this.nlsDomain,"label",{subdivision:this.getSubdivisionPath(),date:n.format(this.get("date"),"LL"),shift:t("core","SHIFT:"+this.get("shift"))})},getSubdivisionPath:function(){var e=r.get(this.get("subdivision"));return e?o(e,!1,!1):"?"},serializeWithTotals:function(){var e={},r={};this.get("tasks").length&&this.get("tasks")[0].functions.forEach(function(t){var n=i.get(t.id);r[t.id]={prodFunction:n?n.getLabel():t.id,total:0,companies:{}},t.companies.forEach(function(n){r[t.id].companies[n.id]=0,e[n.id]={name:n.name,total:0}})});var o=this.serializeTasks(e,r),a=0;return Object.keys(e).forEach(function(t){a+=e[t].total}),{subdivision:this.getSubdivisionPath(),date:n.format(this.get("date"),"LL"),shift:t("core","SHIFT:"+this.get("shift")),companyCount:Object.keys(e).length,totalByCompany:e,totalByProdFunction:r,total:a,tasks:o,absentUsers:(this.get("absentUsers")||[]).filter(function(e){return!!e})}},serializeTasks:function(e,t){return this.get("tasks").map(function(n){return n.totalByCompany={},n.functions.forEach(function(r){r.companies.forEach(function(i){"number"!=typeof n.totalByCompany[i.id]&&(n.totalByCompany[i.id]=0),n.totalByCompany[i.id]+=i.count,e&&(e[i.id].total+=i.count),t&&(t[r.id].total+=i.count,t[r.id].companies[i.id]+=i.count)})}),n})},isEditable:function(e){return s(this,e)},handleUpdateMessage:function(e,t){"count"===e.type?this.handleCountMessage(e,t):"plan"===e.type?this.handlePlanMessage(e,t):"addAbsentUser"===e.type?this.handleAddAbsentUserMessage(e,t):"removeAbsentUser"===e.type&&this.handleRemoveAbsentUserMessage(e,t)},handleCountMessage:function(e,t){var n=this.get("tasks");if(n){var r=n[e.taskIndex];if(r){var i=r.functions[e.functionIndex];if(i){var o=i.companies[e.companyIndex];o&&(o.count=e.newCount,t||(this.trigger("change:tasks"),this.trigger("change")))}}}},handlePlanMessage:function(t,n){var r=e.find(this.get("tasks"),function(e){return e.id===t.taskId});r&&(r.noPlan=t.newValue,r.noPlan&&r.functions.forEach(function(e){e.companies.forEach(function(e){e.count=0})}),n||(this.trigger("change:tasks"),this.trigger("change")))},handleAddAbsentUserMessage:function(e,t){var n=this.get("absentUsers")||[];n.push(e.user),t||(this.trigger("change:absentUsers"),this.trigger("change"))},handleRemoveAbsentUserMessage:function(e,t){for(var n=this.get("absentUsers")||[],r=-1,i=0,o=n.length;o>i;++i)if(n[i].id===e.userId){r=i;break}-1!==r&&(n.splice(r,1),t||(this.trigger("change:absentUsers"),this.trigger("change")))}})}),define("app/fte/FteLeaderEntry",["underscore","../i18n","../time","../data/subdivisions","../data/prodFunctions","../data/views/renderOrgUnitPath","../core/Model","./util/isEditable"],function(e,t,n,r,i,o,a,s){return a.extend({urlRoot:"/fte/leader",clientUrlRoot:"#fte/leader",topicPrefix:"fte.leader",privilegePrefix:"FTE:LEADER",nlsDomain:"fte",defaults:{subdivision:null,date:null,shift:null,fteDiv:null,tasks:null,createdAt:null,creator:null,updatedAt:null,updater:null},getLabel:function(){return t(this.nlsDomain,"label",{subdivision:this.getSubdivisionPath(),date:n.format(this.get("date"),"LL"),shift:t("core","SHIFT:"+this.get("shift"))})},getSubdivisionPath:function(){var e=r.get(this.get("subdivision"));return e?o(e,!1,!1):"?"},isWithFunctions:function(){var e=this.get("tasks"),t=e[0];return Array.isArray(t.functions)&&t.functions.length>0},isWithDivisions:function(){var e=this.get("fteDiv");return Array.isArray(e)&&e.length>0},serializeWithTotals:function(){return this.isWithFunctions()?this.serializeWithFunctions():this.serializeWithoutFunctions()},serializeWithFunctions:function(){var r={},i={};this.prepareTotalsWithFunctions(r,i);var o=this.serializeTasksWithFunctions(r,i),a=0;return e.forEach(r,function(e){a+=e.total}),{subdivision:this.getSubdivisionPath(),date:n.format(this.get("date"),"LL"),shift:t("core","SHIFT:"+this.get("shift")),divisions:this.get("fteDiv")||[],companyCount:Object.keys(r).length,total:a,totalByCompany:r,totalByProdFunction:i,tasks:o}},prepareTotalsWithFunctions:function(t,n){var r=this.get("tasks");if(this.get("tasks").length){var o={},a=this.get("fteDiv")||[];e.forEach(r[0].functions,function(t){e.forEach(t.companies,function(e){void 0===o[e.id]&&(o[e.id]=Object.keys(o).length)})}),e.forEach(r[0].functions,function(r){var s=i.get(r.id);n[r.id]={prodFunction:s?s.getLabel():r.id,total:0,companies:{}},e.forEach(r.companies,function(i){var s=o[i.id];n[r.id].companies[i.id]={index:s,total:0,divisions:{}},t[i.id]={index:s,name:i.name,total:0,divisions:{}},e.forEach(a,function(e){n[r.id].companies[i.id].divisions[e]=0,t[i.id].divisions[e]=0})})})}},serializeTasksWithFunctions:function(t,n){var r=Object.keys(t),i=this.get("fteDiv")||[],o={};e.forEach(this.get("tasks"),function(a,s){a.index=s,a.fteDiv=!1,a.totalByCompany={};var u=0===a.childCount;e.forEach(a.functions,function(o){e.forEach(o.companies,function(s){s.index=r.indexOf(s.id),void 0===a.totalByCompany[s.id]&&(a.totalByCompany[s.id]={index:s.index,total:0,divisions:{}});var c=0;if(Array.isArray(s.count))a.fteDiv=!0,e.forEach(s.count,function(e){c+=e.value,a.totalByCompany[s.id].divisions[e.division]=e.value,u&&(t[s.id].divisions[e.division]+=e.value,n[o.id].companies[s.id].divisions[e.division]+=e.value)});else{c=s.count;var l=s.count/i.length;e.forEach(i,function(e){a.totalByCompany[s.id].divisions[e]=l,u&&(t[s.id].divisions[e]+=l,n[o.id].companies[s.id].divisions[e]+=l)})}a.totalByCompany[s.id].total+=c,u&&(t[s.id].total+=c,n[o.id].total+=c,n[o.id].companies[s.id].total+=c)})}),a.parent?(o[a.parent]||(o[a.parent]={parent:null,children:[]}),o[a.parent].children.push(a)):o[a.id]?o[a.id].parent||(o[a.id].parent=a):o[a.id]={parent:a,children:[]}});var a=[];return Object.keys(o).forEach(function(e){var t=o[e];t.parent.hasChildren=t.children.length>0,a.push(t.parent),a.push.apply(a,t.children),t.parent.hasChildren&&(t.children[t.children.length-1].lastChild=!0)}),a},serializeWithoutFunctions:function(){var e=this.serializeCompanies();return{subdivision:this.getSubdivisionPath(),date:n.format(this.get("date"),"LL"),shift:t("core","SHIFT:"+this.get("shift")),total:e.reduce(function(e,t){return e+t.total},0),totalByCompany:null,totalByProdFunction:null,companies:e,divisions:this.get("fteDiv")||[],tasks:this.serializeTasksWithoutFunctions()}},serializeCompanies:function(){var t=this.get("tasks");return t.length?e.map(t[0].companies,function(e,n){return e.total=t.reduce(function(e,t){return Array.isArray(t.companies[n].count)?t.companies[n].count.forEach(function(t){e+=t.value}):e+=t.companies[n].count,e},0),e}):[]},serializeTasksWithoutFunctions:function(){return e.map(this.get("tasks"),function(e){return e.total=e.companies.reduce(function(e,t){return Array.isArray(t.count)?t.count.forEach(function(t){e+=t.value}):e+=t.count,e},0),e})},isEditable:function(e){return s(this,e)},handleUpdateMessage:function(e,t){var n=this.get("tasks");if(n){var r=n[e.taskIndex];if(r){if(void 0===e.comment){var i;if(this.isWithFunctions()){var o=r.functions[e.functionIndex];if(!o)return;i=o.companies[e.companyIndex]}else i=r.companies[e.companyIndex];if(!i)return;if("number"==typeof e.divisionIndex){var a=i.count[e.divisionIndex];if(!a)return;a.value=e.newCount}else i.count=e.newCount}else r.comment=e.comment;t||(this.trigger("change:tasks"),this.trigger("change"))}}}})}),define("app/fte/FteMasterEntryCollection",["app/user","../core/Collection","./FteMasterEntry"],function(e,t,n){return t.extend({model:n,rqlQuery:function(t){var n,r=e.getDivision();return r&&"prod"===r.get("type")&&(n={name:"and",args:[{name:"eq",args:[e.data.orgUnitType,e.data.orgUnitId]}]}),t.Query.fromObject({fields:{subdivision:1,date:1,shift:1,createdAt:1,creator:1},sort:{date:-1},limit:15,selector:n})}})}),define("app/fte/views/FteLeaderEntryListView",["app/time","app/i18n","app/user","app/data/subdivisions","app/data/views/renderOrgUnitPath","app/core/views/ListView"],function(e,t,n,r,i,o){return o.extend({remoteTopics:{"fte.leader.created":"refreshCollection","fte.leader.deleted":"onModelDeleted"},serializeColumns:function(){return[{id:"subdivision",label:t("core","ORG_UNIT:subdivision")},{id:"date",label:t(this.collection.getNlsDomain(),"property:date")},{id:"shift",label:t(this.collection.getNlsDomain(),"property:shift")}]},serializeActions:function(){var e=this.collection;return function(r){var i=e.get(r._id),a=[o.actions.viewDetails(i),{icon:"print",label:t("core","LIST:ACTION:print"),href:i.genClientUrl("print")}];return i.isEditable(n)&&a.push(o.actions.edit(i),o.actions.delete(i)),a}},serializeRows:function(){return this.collection.map(function(n){var r=n.toJSON();return r.subdivision=n.getSubdivisionPath(),r.date=e.format(r.date,"LL"),r.shift=t("core","SHIFT:"+r.shift),r})}})}),define("app/fte/views/FteMasterEntryListView",["./FteLeaderEntryListView"],function(e){return e.extend({remoteTopics:{"fte.master.created":"refreshCollection","fte.master.deleted":"onModelDeleted"}})}),define("app/data/views/OrgUnitDropdownsView",["underscore","jquery","app/i18n","app/core/View","../divisions","../subdivisions","../mrpControllers","../prodFlows","../workCenters","../prodLines"],function(e,t,n,r,i,o,a,s,u,c){function l(e){return{id:e.id,text:e.getLabel()}}var d={DIVISION:1,SUBDIVISION:2,MRP_CONTROLLER:3,PROD_FLOW:4,WORK_CENTER:5,PROD_LINE:6},p={1:"division",2:"subdivision",3:"mrpController",4:"prodFlow",5:"workCenter",6:"prodLine"},f=function(){return!0};return r.extend({tagName:"div",className:"orgUnitDropdowns",afterRender:function(){0!==this.$el.children().length&&this.$el.empty(),this.options.noGrid!==!0&&this.$el.addClass("row");var e=this.options.orgUnit||d.DIVISION;e>=d.DIVISION&&this.renderDivisionDropdown(),e>=d.SUBDIVISION&&this.renderSubdivisionDropdown(),e>=d.MRP_CONTROLLER&&this.renderMrpControllerDropdown(),e>=d.PROD_FLOW&&this.renderProdFlowDropdown(),e>=d.WORK_CENTER&&this.renderWorkCenterDropdown(),e>=d.PROD_LINE&&this.renderProdLineDropdown()},focus:function(){return this.$id("division").select2("focus"),this},selectValue:function(e,t){var n=!t;switch(t||this.options.orgUnit){case d.DIVISION:this.selectDivision(e,n);break;case d.SUBDIVISION:this.selectSubdivision(e,n);break;case d.MRP_CONTROLLER:this.selectMrpController(e,n);break;case d.PROD_FLOW:this.selectProdFlow(e,n);break;case d.WORK_CENTER:this.selectWorkCenter(e,n);break;case d.PROD_LINE:this.selectProdLine(e,n)}return this},selectDivision:function(e,t){return this.selectModel(e,null,i,"division",t)},selectSubdivision:function(e,t){return this.selectModel(e,"selectDivision",o,"subdivision",t)},selectMrpController:function(e,t){return this.selectModel(e,"selectSubdivision",a,"mrpController",t)},selectProdFlow:function(e,t){return e?e.get("prodFlow")?this.selectModel(e,"selectMrpController",s,"prodFlow",t):e.get("mrpController")?(e=this.selectMrpController(e,t),e&&this.$id("prodFlow").select2("val",null),e):null:null},selectWorkCenter:function(e,t){return this.selectModel(e,"selectProdFlow",u,"workCenter",t)},selectProdLine:function(){throw new Error("TODO")},selectModel:function(e,t,n,r,i){if(!e)return null;var o=e.get(r),a=n.get(Array.isArray(o)?o[0]:o);return null!==t&&(a=this[t](a,i)),a?(this.$id(r).select2("val",o).trigger({type:"change",val:o,selectFirst:i}),e):null},createDropdownElement:function(e,r){var i=this.idPrefix+"-"+e,o=t('<div class="form-group"><label for="'+i+'">'+n("core","ORG_UNIT:"+e)+'</label><input id="'+i+'" name="'+e+'"></div>');return this.options.noGrid!==!0&&o.addClass("col-lg-"+Math.floor(12/this.options.orgUnit)),o.appendTo(this.el).find("input").select2({data:r||[],placeholder:" ",allowClear:this.options.allowClear||this.options.orgUnit===d.PROD_FLOW,multiple:this.options.multiple&&e===p[this.options.orgUnit]})},onChange:function(t,n,r,i){var o=[];null!==i.val&&(o=n.filter(function(t){var n=t.get(r);return Array.isArray(n)?Array.isArray(i.val)?e.intersection(n,i.val).length>0:-1!==n.indexOf(i.val):Array.isArray(i.val)?-1!==i.val.indexOf(n):n===i.val}).map(l));var a={data:o,placeholder:" ",allowClear:!!this.options.allowClear||"mrpController"===r&&this.options.orgUnit===d.PROD_FLOW,multiple:this.options.multiple&&t.attr("name")===p[this.options.orgUnit]};t.select2("val",null),t.select2(a),o.length&&i.selectFirst!==!1&&t.select2("val",o[0].id),t.trigger({type:"change",val:o.length?o[0].id:null})},renderDivisionDropdown:function(){this.createDropdownElement("division",i.filter(this.options.divisionFilter||f).map(l))},renderSubdivisionDropdown:function(){var e=this.createDropdownElement("subdivision");this.$id("division").on("change",this.onChange.bind(this,e,o,"division"))},renderMrpControllerDropdown:function(){var e=this.createDropdownElement("mrpController");this.$id("subdivision").on("change",this.onChange.bind(this,e,a,"subdivision"))},renderProdFlowDropdown:function(){var e=this.createDropdownElement("prodFlow");this.$id("mrpController").on("change",this.onChange.bind(this,e,s,"mrpController"))},renderWorkCenterDropdown:function(){var e=this.createDropdownElement("workCenter");this.$id("prodFlow").on("change",this.onChange.bind(this,e,u,"prodFlow"))},renderProdLineDropdown:function(){var e=this.createDropdownElement("prodLine");this.$id("workCenter").on("change",this.onChange.bind(this,e,c,"prodLine"))}},{ORG_UNIT:d})}),define("app/fte/templates/filter",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<form class="well filter-form">\n  <div class="orgUnitDropdowns-container"></div>\n  <div class="form-group">\n    <label for="',idPrefix,'-date">',t("fte","filter:date"),'</label>\n    <input id="',idPrefix,'-date" class="form-control" name="date" type="date">\n  </div>\n  <div class="form-group">\n    <label for="',idPrefix,'-shift-0">',t("fte","filter:shift"),'</label>\n    <div class="filter-radio-group">\n      '),[0,1,2,3].forEach(function(e){buf.push('\n      <label class="radio-inline">\n        <input id="',idPrefix,"-shift-",e,'" name="shift" type="radio" value="',e,'">\n        ',t("core","SHIFT:"+e),"\n      </label>\n      ")}),buf.push("\n    </div>\n  </div>\n  ",renderLimit(),'\n  <div class="form-group filter-actions">\n    <button type="submit" class="btn btn-default"><i class="fa fa-filter"></i><span>',escape(t("fte","filter:submit")),"</span></button>\n  </div>\n</form>\n")}();return buf.join("")}}),define("app/fte/views/FteEntryFilterView",["underscore","js2form","app/time","app/data/divisions","app/data/subdivisions","app/data/views/OrgUnitDropdownsView","app/core/Model","app/core/views/FilterView","app/fte/templates/filter"],function(e,t,n,r,i,o,a,s,u){var c=o.ORG_UNIT;return s.extend({template:u,defaultFormData:{division:"",subdivision:"",date:"",shift:0},termToForm:{division:function(e,t,n){n[e]=t.args[1],("division"===e?r:i).get(n[e])||(n[e]="")},date:function(e,t,r){if("in"===t.name)r.date=n.format(t.args[1][0],"YYYY-MM-DD");else{var i=n.getMoment(t.args[1]);r.date=i.format("YYYY-MM-DD"),r.shift=this.getShiftNoFromMoment(i)}},shift:function(e,t,n){n.shift=t.args[1]},subdivision:"division"},initialize:function(){this.orgUnitDropdownsView=new o({orgUnit:this.options.divisionOnly?c.DIVISION:c.SUBDIVISION,divisionFilter:this.options.divisionFilter||null,allowClear:!0,noGrid:!0}),this.setView(".orgUnitDropdowns-container",this.orgUnitDropdownsView)},afterRender:function(){s.prototype.afterRender.call(this),this.listenToOnce(this.orgUnitDropdownsView,"afterRender",function(){var e=null,t=null,n=this.formData;""!==n.subdivision?(t=c.SUBDIVISION,e=new a({subdivision:n.subdivision})):""!==n.division&&(t=c.DIVISION,e=new a({division:n.division})),this.orgUnitDropdownsView.selectValue(e,t)})},serializeFormToQuery:function(t){var r=this.orgUnitDropdownsView.$id("division").val(),i=this.orgUnitDropdownsView.$id("subdivision").val(),o=n.getMoment(this.$id("date").val()),a=parseInt(this.$("input[name=shift]:checked").val(),10);if(this.setHoursByShiftNo(o,a),e.isEmpty(i)?e.isEmpty(r)||t.push({name:"eq",args:["division",r]}):t.push({name:"eq",args:["subdivision",i]}),o.isValid())if(0===a){var s=o.valueOf();t.push({name:"in",args:["date",[s+216e5,s+504e5,s+792e5]]})}else t.push({name:"eq",args:["date",o.valueOf()]});else 0!==a&&t.push({name:"eq",args:["shift",a]})},getShiftNoFromMoment:function(e){var t=e.hours();return 6===t?1:14===t?2:22===t?3:0},setHoursByShiftNo:function(e,t){e.hours(1===t?6:2===t?14:3===t?22:0)}})}),define("app/fte/pages/FteMasterEntryListPage",["app/i18n","app/user","app/core/util/bindLoadingMessage","app/core/util/pageActions","app/core/View","../FteMasterEntryCollection","../views/FteMasterEntryListView","../views/FteEntryFilterView","app/core/templates/listPage"],function(e,t,n,r,i,o,a,s,u){return i.extend({template:u,layoutName:"page",pageId:"fteMasterEntryList",breadcrumbs:[e.bound("fte","BREADCRUMBS:master:browse")],actions:function(n){return[{label:e.bound("fte","PAGE_ACTION:add"),href:"#fte/master;add",icon:"plus",privileges:function(){return t.isAllowedTo("FTE:MASTER:MANAGE","PROD_DATA:MANAGE")}},r.export(n,this,this.collection)]},initialize:function(){this.defineModels(),this.defineViews(),this.setView(".filter-container",this.filterView),this.setView(".list-container",this.listView)},defineModels:function(){this.collection=n(new o(null,{rqlQuery:this.options.rql}),this)},defineViews:function(){this.filterView=new s({model:{rqlQuery:this.collection.rqlQuery},divisionFilter:function(e){return"prod"===e.get("type")}}),this.listView=new a({collection:this.collection}),this.listenTo(this.filterView,"filterChanged",this.refreshList)},load:function(e){return e(this.collection.fetch({reset:!0}))},refreshList:function(e){this.collection.rqlQuery=e,this.listView.refreshCollectionNow();var t=e.toString();this.broker.publish("router.navigate",{url:this.collection.genClientUrl()+"?"+t,trigger:!1,replace:!0})}})}),define("app/core/util/getShiftStartInfo",["app/time"],function(e){return function(t){var n=e.getMoment(t),r=n.hour(),i=-1;return r>=6&&14>r?(n.hours(6),i=1):r>=14&&22>r?(n.hours(14),i=2):(n.hours(22),6>r&&n.subtract(1,"days"),i=3),{moment:n.minutes(0).seconds(0).milliseconds(0),shift:i}}}),define("app/fte/templates/addForm",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<form class="panel panel-primary">\n  <div class="panel-heading">\n    ',t("fte","addForm:panel:title"),'\n  </div>\n  <div class="panel-body">\n    <div class="form-group orgUnitDropdowns-container"></div>\n    <div class="form-group">\n      <label for="',idPrefix,'-date" class="control-label">',t("fte","property:date"),'</label>\n      <input id="',idPrefix,'-date" class="form-control" type="date" value="',date,'" max="',date,'" min="2013-12-01" required>\n    </div>\n    <div class="form-group">\n      <label for="',idPrefix,'-shift-any">',t("fte","property:shift"),'</label>\n      <div class="filter-radio-group">\n        '),[1,2,3].forEach(function(e){buf.push('\n        <label class="radio-inline">\n          <input name="shift" type="radio" value="',e,'" ',shift===e?"checked":"","> ",t("core","SHIFT:"+e),"\n        </label>\n        ")}),buf.push('\n      </div>\n    </div>\n  </div>\n  <div class="panel-footer">\n    <button class="btn btn-primary">\n      <i class="fa fa-plus"></i>\n      <span>',escape(t("fte","addForm:submit")),"</span>\n    </button>\n  </div>\n</form>\n")}();return buf.join("")}}),define("app/fte/views/FteEntryAddFormView",["app/i18n","app/viewport","app/user","app/data/divisions","app/data/subdivisions","app/data/views/OrgUnitDropdownsView","app/core/Model","app/core/View","app/core/util/getShiftStartInfo","app/fte/templates/addForm"],function(e,t,n,r,i,o,a,s,u,c){var l=o.ORG_UNIT;return s.extend({template:c,events:{submit:"submitForm"},initialize:function(){this.readonlyDivision=!1,this.$submit=null,this.oudView=new o({orgUnit:l.SUBDIVISION,divisionFilter:this.options.divisionFilter,allowClear:!0,noGrid:!0}),this.setView(".orgUnitDropdowns-container",this.oudView)},destroy:function(){null!==this.$submit&&(this.$submit.remove(),this.$submit=null)},serialize:function(){var e=u(new Date);return{idPrefix:this.idPrefix,date:e.moment.format("YYYY-MM-DD"),shift:e.shift}},afterRender:function(){var e=this,t=n.getDivision(),r=n.getSubdivision();this.$submit=this.$(".btn-primary").attr("disabled",!0),this.listenToOnce(this.oudView,"afterRender",function(){e.oudView.$id("subdivision").on("change",function(t){e.$submit.attr("disabled",""===t.val||null===t.val)});var i=null,o=null;null!==r?(o=l.SUBDIVISION,i=new a({subdivision:r.id})):null!==t&&(o=l.DIVISION,i=new a({division:t.id})),e.oudView.selectValue(i,o),e.readonlyDivision=!n.isAllowedTo(e.model.getPrivilegePrefix()+":ALL")&&t,e.oudView.$id("division").select2("readonly",e.readonlyDivision),e.oudView.$id(e.readonlyDivision?"subdivision":"division").select2("focus"),e.readonlyDivision&&!e.options.divisionFilter(t)&&e.oudView.$id("subdivision").select2("readonly",!0)})},submitForm:function(n){if(n.preventDefault(),!this.socket.isConnected())return t.msg.show({type:"error",time:5e3,text:e("fte","addForm:msg:offline")});var r=this,i=this.oudView.$id("division"),o=this.oudView.$id("subdivision"),a=this.$submit.find("i").removeClass("fa-edit").addClass("fa-spinner fa-spin");i.select2("readonly",!0),o.select2("readonly",!0),this.$submit.attr("disabled",!0);var s=this.model.getTopicPrefix()+".findOrCreate",u={subdivision:o.select2("val"),date:new Date(this.$id("date").val()+" 00:00:00"),shift:parseInt(this.$("input[name=shift]:checked").val(),10)};this.socket.emit(s,u,function(n,s){return s&&r.model.set("_id",s),n?"AUTH"===n.message&&s?r.trigger("uneditable",r.model):(a.removeClass("fa-spinner fa-spin").addClass("fa-edit"),i.select2("readonly",r.readonlyDivision),o.select2("readonly",!1),r.$submit.attr("disabled",!1).focus(),t.msg.show({type:"error",time:5e3,text:e("fte","addForm:msg:failure",{error:n.message})})):void r.trigger("editable",r.model)})}})}),define("app/fte/pages/FteMasterEntryAddFormPage",["app/i18n","app/core/View","../FteMasterEntry","../views/FteEntryAddFormView"],function(e,t,n,r){return t.extend({layoutName:"page",pageId:"fteMasterEntryAddForm",breadcrumbs:[{label:e.bound("fte","BREADCRUMBS:master:browse"),href:"#fte/master"},e.bound("fte","BREADCRUMBS:addForm")],initialize:function(){this.view=new r({model:new n,divisionFilter:function(e){return e&&"prod"===e.get("type")}}),this.listenTo(this.view,"editable",function(e){this.broker.publish("router.navigate",{url:e.genClientUrl("edit"),trigger:!0})}),this.listenTo(this.view,"uneditable",function(e){this.broker.publish("router.navigate",{url:e.genClientUrl(),trigger:!0})})}})}),define("app/users/util/setUpUserSelect2",["underscore","app/i18n","app/user"],function(e,t,n){return function(r,i){return r.select2(e.extend({openOnEnter:null,allowClear:!0,minimumInputLength:3,placeholder:t("users","select2:placeholder"),ajax:{cache:!0,quietMillis:300,url:function(e){e=e.trim();var t=/^[0-9]+$/.test(e)?"personellId":"lastName";return e=encodeURIComponent("^"+e),"/users?select(personellId,lastName,firstName,login)&sort("+t+")&limit(20)&regex("+t+","+e+",i)"},results:function(e,r,o){var a=n.getRootUserData(),s=[{_id:"$SYSTEM",text:t("users","select2:users:system"),name:t("users","select2:users:system"),login:null,personellId:"-"},{_id:a._id,text:a.name||a.login,name:a.name||a.login,login:a.login,personellId:"-"}].filter(function(e){return-1!==e.text.toLowerCase().indexOf(o.term.toLowerCase())}),u=s.concat(e.collection||[]);return i&&i.userFilter&&(u=u.filter(i.userFilter)),{results:u.map(function(e){var t=e.lastName&&e.firstName?e.lastName+" "+e.firstName:e.name||"-",n=e.personellId?e.personellId:"-";return{id:e._id,text:t+" ("+n+")",name:t,login:e.login,personellId:n}}).sort(function(e,t){return e.text.localeCompare(t.text)})}}}},i))}}),define("app/fte/templates/masterEntry",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div>\n  <div class="well">\n    <div class="fte-property">\n      <span class="fte-property-name">',t("core","ORG_UNIT:subdivision"),'</span>\n      <span class="fte-property-value">',subdivision,'</span>\n    </div>\n    <div class="fte-property">\n      <span class="fte-property-name">',t("fte","property:date"),'</span>\n      <span class="fte-property-value">',date,'</span>\n    </div>\n    <div class="fte-property">\n      <span class="fte-property-name">',t("fte","property:shift"),'</span>\n      <span class="fte-property-value">',shift,'</span>\n    </div>\n  </div>\n  <div class="panel panel-primary">\n    <div class="panel-heading">',t("fte","masterEntry:tasksPanel:title"+(editable?":editable":"")),"</div>\n    "),editable&&buf.push('\n    <div class="message message-inline message-info">',t("fte","panel:info"),"</div>\n    "),buf.push('\n    <table class="table table-bordered table-condensed table-hover fte-masterEntry">\n      <thead>\n      <tr>\n        <th class="fte-masterEntry-column-task" rowspan="4">',t("fte","masterEntry:column:task"),'\n        <th class="fte-masterEntry-column-noPlan even" rowspan="4">',t("fte","masterEntry:column:noPlan"),'\n        <th colspan="',companyCount,'">',t("fte","masterEntry:column:total"),"</th>\n        "),Object.keys(totalByProdFunction).forEach(function(e,t){buf.push('\n        <th class="fte-masterEntry-column-prodFunction ',t%2?"":"even",'" colspan="',Object.keys(totalByProdFunction[e].companies).length,'" data-column="',t,'">',totalByProdFunction[e].prodFunction,"</th>\n        ")}),buf.push('\n      </tr>\n      <tr>\n        <th colspan="',companyCount,'" class="fte-masterEntry-total">',round(total),"\n        "),Object.keys(totalByProdFunction).forEach(function(e,t){buf.push('\n        <th class="fte-masterEntry-total-prodFunction ',t%2?"":"even",'" colspan="',Object.keys(totalByProdFunction[e].companies).length,'" class="fte-masterEntry-total-prodFunction" data-column="',t,'" data-functionId="',e,'">',round(totalByProdFunction[e].total),"\n        ")}),buf.push("\n      </tr>\n      <tr>\n        "),Object.keys(totalByCompany).forEach(function(e){buf.push('\n        <th class="fte-masterEntry-column-company" >',totalByCompany[e].name,"\n        ")}),buf.push("\n        "),Object.keys(totalByProdFunction).forEach(function(e,t){buf.push("\n        "),Object.keys(totalByProdFunction[e].companies).forEach(function(e,n){buf.push('\n        <th class="fte-masterEntry-column-company ',t%2?"":"even",'" data-column="',t,":",n,'">',escape(totalByCompany[e].name),"\n        ")}),buf.push("\n        ")}),buf.push("\n      </tr>\n      <tr>\n        "),Object.keys(totalByCompany).forEach(function(e){buf.push('\n        <th class="fte-masterEntry-total-company" data-companyId="',e,'">',round(totalByCompany[e].total),"\n        ")}),buf.push("\n        "),Object.keys(totalByProdFunction).forEach(function(e,t){buf.push("\n        "),Object.keys(totalByProdFunction[e].companies).forEach(function(n,r){buf.push('\n        <th class="fte-masterEntry-total-prodFunction-company ',t%2?"":"even",'" data-functionId="',e,'" data-companyId="',n,'" data-column="',t,":",r,'">',round(totalByProdFunction[e].companies[n]),"\n        ")}),buf.push("\n        ")}),buf.push("\n      </tr>\n      </thead>\n      <tbody>\n      "),tasks.forEach(function(e,t){buf.push('\n      <tr>\n        <td class="fte-masterEntry-cell-task">\n          '),"prodFlow"===e.type?buf.push("\n          ",escape(e.name),"\n          "):buf.push("\n          <em>",escape(e.name),"</em>\n          "),buf.push('\n        <td class="even '),editable&&buf.push("fte-masterEntry-noPlan-container"),buf.push('">\n          '),editable?buf.push('\n          <input class="fte-masterEntry-noPlan" type="checkbox" data-taskId="',e.id,'" data-task="',t,'" ',e.noPlan?"checked":"",">\n          "):buf.push('\n          <i class="fa fa-',e.noPlan?"check":"times",'"></i>\n          '),buf.push("\n        </td>\n        "),Object.keys(e.totalByCompany).forEach(function(t,n){buf.push('\n        <td class="fte-masterEntry-total-company-task" data-companyId="',t,'" data-companyIndex="',n,'">',round(e.totalByCompany[t]),"</td>\n        ")}),buf.push("\n        "),e.functions.forEach(function(n,r){buf.push("\n        "),n.companies.forEach(function(i,o){buf.push('\n        <td class="',r%2?"":"even",'">\n          '),editable?buf.push('\n          <input\n            class="form-control no-controls fte-masterEntry-count"\n            type="number"\n            min="0"\n            max="9999"\n            value="',i.count,'"\n            data-value="',i.count,'"\n            data-task="',t,'"\n            data-function="',r,'"\n            data-company="',o,'"\n            data-functionId="',n.id,'"\n            data-companyId="',i.id,'"\n            ',e.noPlan?"disabled":"",">\n          "):buf.push("\n          ",round(i.count),"\n          "),buf.push("\n        </td>\n        ")}),buf.push("\n        ")}),buf.push("\n      </tr>\n      ")}),buf.push('\n      </tbody>\n    </table>\n  </div>\n  <div class="panel panel-primary">\n    <div class="panel-heading">',t("fte","masterEntry:absencePanel:title"+(editable?":editable":"")),"</div>\n    "),editable&&buf.push('\n    <div class="fte-masterEntry-absence-userFinder-container">\n      <input class="fte-masterEntry-absence-userFinder" type="text">\n    </div>\n    '),buf.push('\n    <table class="table table-bordered table-condensed table-hover fte-masterEntry-absence">\n      <thead>\n      <tr>\n        <th>',t("users","PROPERTY:personellId"),"\n        <th>",t("users","PROPERTY:name"),"\n        "),editable&&buf.push('\n        <th class="actions">',t("core","LIST:COLUMN:actions"),"</th>\n        "),buf.push('\n      </tr>\n      </thead>\n      <tbody class="fte-masterEntry-absence-noEntries">\n      <tr>\n        <td colspan="3">',t("core","LIST:NO_DATA"),'\n      <tbody class="fte-masterEntry-absence-entries">\n      '),absentUsers.forEach(function(e){buf.push("\n      ",renderAbsentUserRow({absentUser:e,editable:editable}),"\n      ")}),buf.push("\n    </table>\n  </div>\n</div>\n")}();return buf.join("")}}),define("app/fte/templates/absentUserRow",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push("<tr>\n  <td>",escape(absentUser.personellId),"\n  <td>",escape(absentUser.name),"\n  "),editable&&buf.push('\n  <td>\n    <button class="btn btn-danger fte-masterEntry-absence-remove" data-userId="',absentUser.id,'">\n      <i class="fa fa-times"></i>\n    </button>\n  '),buf.push("\n")}();return buf.join("")}}),define("app/fte/util/fractions",[],function(){var e="function"==typeof Number.prototype.toLocaleString?"toLocaleString":"toString";
return{parse:function(e){var t=parseFloat(e.replace(",",".").replace(/[^0-9\.]+/g,""));return isNaN(t)||0>t?0:t},round:function(t){return(Math.round(1e4*t)/1e4)[e]()}}}),function(e,t){function n(n,a){var s=this;s.$el=e(n),s.el=n,s.id=i++,s.$el.bind("destroyed",e.proxy(s.teardown,s)),s.$clonedHeader=null,s.$originalHeader=null,s.isSticky=!1,s.hasBeenSticky=!1,s.leftOffset=null,s.topOffset=null,s.init=function(){s.options=e.extend({},o,a),s.$el.each(function(){var t=e(this);t.css("padding",0),s.$scrollableArea=e(s.options.scrollableArea),s.$originalHeader=e("thead:first",this),s.$clonedHeader=s.$originalHeader.clone(),t.trigger("clonedHeader."+r,[s.$clonedHeader]),s.$clonedHeader.addClass("tableFloatingHeader"),s.$clonedHeader.css("display","none"),s.$originalHeader.addClass("tableFloatingHeaderOriginal"),s.$originalHeader.after(s.$clonedHeader),s.$printStyle=e('<style type="text/css" media="print">.tableFloatingHeader{display:none !important;}.tableFloatingHeaderOriginal{position:static !important;}</style>'),e("head").append(s.$printStyle)}),s.updateWidth(),s.toggleHeaders(),s.bind()},s.destroy=function(){s.$el.unbind("destroyed",s.teardown),s.teardown()},s.teardown=function(){s.isSticky&&s.$originalHeader.css("position","static"),e.removeData(s.el,"plugin_"+r),s.unbind(),s.$clonedHeader.remove(),s.$originalHeader.removeClass("tableFloatingHeaderOriginal"),s.$originalHeader.css("visibility","visible"),s.$printStyle.remove(),s.el=null,s.$el=null},s.bind=function(){s.$scrollableArea.on("scroll."+r,s.toggleHeaders),s.isWindowScrolling()||(e(t).on("scroll."+r+s.id,s.setPositionValues),e(t).on("resize."+r+s.id,s.toggleHeaders)),s.$scrollableArea.on("resize."+r,s.toggleHeaders),s.$scrollableArea.on("resize."+r,s.updateWidth)},s.unbind=function(){s.$scrollableArea.off("."+r,s.toggleHeaders),s.isWindowScrolling()||(e(t).off("."+r+s.id,s.setPositionValues),e(t).off("."+r+s.id,s.toggleHeaders)),s.$scrollableArea.off("."+r,s.updateWidth),s.$el.off("."+r),s.$el.find("*").off("."+r)},s.toggleHeaders=function(){s.$el&&s.$el.each(function(){var t,n=e(this),r=s.isWindowScrolling()?isNaN(s.options.fixedOffset)?s.options.fixedOffset.outerHeight():s.options.fixedOffset:s.$scrollableArea.offset().top+(isNaN(s.options.fixedOffset)?0:s.options.fixedOffset),i=n.offset(),o=s.$scrollableArea.scrollTop()+r,a=s.$scrollableArea.scrollLeft(),u=s.isWindowScrolling()?o>i.top:r>i.top,c=(s.isWindowScrolling()?o:0)<i.top+n.height()-s.$clonedHeader.height()-(s.isWindowScrolling()?0:r);u&&c?(t=i.left-a+s.options.leftOffset,s.$originalHeader.css({position:"fixed","margin-top":0,left:t,"z-index":1}),s.isSticky=!0,s.leftOffset=t,s.topOffset=r,s.$clonedHeader.css("display",""),s.setPositionValues(),s.updateWidth()):s.isSticky&&(s.$originalHeader.css("position","static"),s.$clonedHeader.css("display","none"),s.isSticky=!1,s.resetWidth(e("td,th",s.$clonedHeader),e("td,th",s.$originalHeader)))})},s.isWindowScrolling=function(){return s.$scrollableArea[0]===t},s.setPositionValues=function(){var n=e(t).scrollTop(),r=e(t).scrollLeft();!s.isSticky||0>n||n+e(t).height()>e(document).height()||0>r||r+e(t).width()>e(document).width()||s.$originalHeader.css({top:s.topOffset-(s.isWindowScrolling()?0:n),left:s.leftOffset-(s.isWindowScrolling()?0:r)})},s.updateWidth=function(){if(s.isSticky){s.$originalHeaderCells||(s.$originalHeaderCells=e("th,td",s.$originalHeader)),s.$clonedHeaderCells||(s.$clonedHeaderCells=e("th,td",s.$clonedHeader));var t=s.getWidth(s.$clonedHeaderCells);s.setWidth(t,s.$clonedHeaderCells,s.$originalHeaderCells),s.$originalHeader.css("width",s.$clonedHeader.width())}},s.getWidth=function(t){var n=[];return t.each(function(t){var r,i=e(this);r="border-box"===i.css("box-sizing")?i.outerWidth():i.width(),n[t]=r}),n},s.setWidth=function(e,t,n){t.each(function(t){var r=e[t];n.eq(t).css({"min-width":r,"max-width":r})})},s.resetWidth=function(t,n){t.each(function(t){var r=e(this);n.eq(t).css({"min-width":r.css("min-width"),"max-width":r.css("max-width")})})},s.updateOptions=function(t){s.options=e.extend({},o,t),s.updateWidth(),s.toggleHeaders()},s.init()}var r="stickyTableHeaders",i=0,o={fixedOffset:0,leftOffset:0,scrollableArea:t};e.fn[r]=function(t){return this.each(function(){var i=e.data(this,"plugin_"+r);i?"string"==typeof t?i[t].apply(i):i.updateOptions(t):"destroy"!==t&&e.data(this,"plugin_"+r,new n(this,t))})}}(jQuery,window),define("jquery.stickytableheaders",function(){}),define("app/fte/views/FteMasterEntryEditFormView",["underscore","jquery","app/core/View","app/core/util/onModelDeleted","app/users/util/setUpUserSelect2","app/fte/templates/masterEntry","app/fte/templates/absentUserRow","../util/fractions","jquery.stickytableheaders"],function(e,t,n,r,i,o,a,s){return n.extend({template:o,events:{"change .fte-masterEntry-count":"updateCount","keyup .fte-masterEntry-count":"updateCount","change .fte-masterEntry-noPlan":"updatePlan","click .fte-masterEntry-noPlan-container":function(e){e.target.classList.contains("fte-masterEntry-noPlan-container")&&this.$(e.target).find(".fte-masterEntry-noPlan").click()},"click .fte-masterEntry-absence-remove":"removeAbsentUser","focus .fte-masterEntry-count, .fte-masterEntry-noPlan":function(e){var t=e.target,n=t.parentNode.parentNode,r=t.dataset,i=this.cachedColumns;if(this.focused=[t.parentNode,n.children[0]],t.classList.contains("fte-masterEntry-noPlan"))this.focused.push(this.el.querySelector(".fte-masterEntry-column-noPlan"));else{var o=r.function+":"+r.company;this.focused.push(i.prodFunctions[r.function],i.prodFunctionTotals[r.function],i.companies[o],i.companyTotals[o],n.querySelector('.fte-masterEntry-total-company-task[data-companyindex="'+r.company+'"]'))}this.$(this.focused).addClass("is-focused")},"blur .fte-masterEntry-count, .fte-masterEntry-noPlan":function(){this.$(this.focused).removeClass("is-focused")}},remoteTopics:function(){var e={};return e["fte.master.updated."+this.model.id]="onRemoteEdit",e["fte.master.deleted"]="onModelDeleted",e},initialize:function(){this.focused=null,this.cachedColumns={prodFunctions:null,prodFunctionTotals:null,companies:null,companyTotals:null}},destroy:function(){this.$(".fte-masterEntry").stickyTableHeaders("destroy"),this.focused=null,this.cachedColumns=null},beforeRender:function(){this.stopListening(this.model,"change",this.render)},afterRender:function(){this.listenToOnce(this.model,"change",this.render),this.setUpUserFinder(),this.setUpStickyHeaders(),this.cacheColumns(),this.focusFirstEnabledInput()},serialize:function(){return e.extend(this.model.serializeWithTotals(),{editable:!0,renderAbsentUserRow:a,round:s.round})},setUpUserFinder:function(){var e=this,t=this.$(".fte-masterEntry-absence-entries"),n=this.$(".fte-masterEntry-absence-noEntries"),r=i(this.$(".fte-masterEntry-absence-userFinder"),{userFilter:function(e){var n='.fte-masterEntry-absence-remove[data-userId="'+e._id+'"]';return 0===t.find(n).length}});t.children().length?n.hide():t.hide(),r.on("change",function(t){r.select2("val","");var n={type:"addAbsentUser",socketId:e.socket.getId(),_id:e.model.id,user:t.added};e.socket.emit("fte.master.addAbsentUser",n,function(t){t?e.trigger("remoteError",t):e.handleAddAbsentUserChange(n)})})},setUpStickyHeaders:function(){this.$(".fte-masterEntry").stickyTableHeaders({fixedOffset:t(".navbar-fixed-top")})},cacheColumns:function(){function e(e,r){n.find(".fte-masterEntry-"+e).each(function(){t[r][this.dataset.column]=this})}var t={prodFunctions:{},prodFunctionTotals:{},companies:{},companyTotals:{}},n=this.$(".tableFloatingHeaderOriginal");e("column-prodFunction","prodFunctions"),e("total-prodFunction","prodFunctionTotals"),e("column-company","companies"),e("total-prodFunction-company","companyTotals"),this.cachedColumns=t},focusNextInput:function(e){var t=e.closest("td").next("td");if(t.length)return t.find("input").select();var n=e.closest("tr").next();return n.length?void this.focusNextEnabledInput(n):this.focusFirstEnabledInput()},focusFirstEnabledInput:function(){var e=this.el.querySelector(".fte-masterEntry-noPlan:not(:checked)");e&&this.$(e).closest("tr").find(".fte-masterEntry-count").first().select()},focusNextEnabledInput:function(e){return e.length?e.find(".fte-masterEntry-noPlan:checked").length?this.focusNextEnabledInput(e.next()):void e.find(".fte-masterEntry-count").first().select():this.focusFirstEnabledInput()},toggleCountsInRow:function(e,t){var n=this.$(this.el.ownerDocument.activeElement).closest("tr"),r=this.$(".fte-masterEntry > tbody > :last-child"),i=e.closest("tr");return i.find(".fte-masterEntry-count").attr("disabled",e[0].checked),e[0].checked||t||i.find(".fte-masterEntry-count").first().select(),this.recountAll(i),t?i[0]===n[0]?i[0]===r[0]?this.focusFirstEnabledInput():this.focusNextEnabledInput(i):void 0:i[0]===r[0]?this.focusFirstEnabledInput():this.focusNextEnabledInput(i)},updatePlan:function(e){var t={type:"plan",socketId:this.socket.getId(),_id:this.model.id,taskId:e.target.getAttribute("data-taskId"),taskIndex:parseInt(e.target.getAttribute("data-task"),10),newValue:e.target.checked},n=this.$(e.target),r=this;this.toggleCountsInRow(n),this.socket.emit("fte.master.updatePlan",t,function(t){t&&(e.target.checked=!e.target.checked,r.toggleCountsInRow(n),r.trigger("remoteError",t))})},updateCount:function(e){if(13===e.which)return this.focusNextInput(this.$(e.target));var t=s.parse(e.target.getAttribute("data-value")),n=s.parse(e.target.value);if(t!==n){var r=e.target.getAttribute("data-task")+":"+e.target.getAttribute("data-function")+":"+e.target.getAttribute("data-company");this.timers[r]&&clearTimeout(this.timers[r]),this.timers[r]=setTimeout(this.doUpdateCount.bind(this),250,e.target,r,t,n)}},doUpdateCount:function(e,t,n,r){delete this.timers[t];var i=e.getAttribute("data-remote"),o={type:"count",socketId:this.socket.getId(),_id:this.model.id,newCount:r,taskIndex:parseInt(e.getAttribute("data-task"),10),functionIndex:parseInt(e.getAttribute("data-function"),10),companyIndex:parseInt(e.getAttribute("data-company"),10)};e.setAttribute("data-value",o.newCount),e.setAttribute("data-remote","false");var a=this;this.socket.emit("fte.master.updateCount",o,function(t){t&&("true"!==e.getAttribute("data-remote")&&(e.value=n,e.setAttribute("data-value",n),e.setAttribute("data-remote",i),a.recount(e)),a.trigger("remoteError",t))}),this.recount(e)},recount:function(e){var t,n,r,i=this.$(e).closest("tr"),o=this.$(".tableFloatingHeaderOriginal"),a=e.getAttribute("data-functionId"),u=e.getAttribute("data-companyId");r=0,t='.fte-masterEntry-count[data-companyId="'+u+'"]',n='.fte-masterEntry-total-company-task[data-companyId="'+u+'"]',i.find(t).each(function(){r+=s.parse(this.value)}),i.find(n).text(s.round(r)),r=0,t=".fte-masterEntry-count[data-functionId="+a+"][data-companyId="+u+"]",n=".fte-masterEntry-total-prodFunction-company[data-functionId="+a+"][data-companyId="+u+"]",this.$(t).each(function(){this.disabled||(r+=s.parse(this.value))}),o.find(n).text(s.round(r)),r=0,t='.fte-masterEntry-total-prodFunction-company[data-companyId="'+u+'"]',n='.fte-masterEntry-total-company[data-companyId="'+u+'"]',o.find(t).each(function(){r+=s.parse(this.innerHTML)}),o.find(n).text(s.round(r)),r=0,t='.fte-masterEntry-total-prodFunction-company[data-functionId="'+a+'"]',n='.fte-masterEntry-total-prodFunction[data-functionId="'+a+'"]',o.find(t).each(function(){r+=s.parse(this.innerHTML)}),o.find(n).text(s.round(r)),r=0,t=".fte-masterEntry-total-company",n=".fte-masterEntry-total",o.find(t).each(function(){r+=s.parse(this.innerHTML)}),o.find(n).text(s.round(r))},recountAll:function(e){var t=this;e.find(".fte-masterEntry-count").each(function(){this.value="0",this.setAttribute("data-value","0"),t.recount(this)})},removeAbsentUser:function(e){var t=this.$(e.target).closest("button").attr("disabled",!0),n={type:"removeAbsentUser",socketId:this.socket.getId(),_id:this.model.id,userId:t.attr("data-userId")},r=this;this.socket.emit("fte.master.removeAbsentUser",n,function(e){e?(t.attr("disabled",!1),r.trigger("remoteError",e)):r.handleRemoveAbsentUserChange(n)})},onRemoteEdit:function(e){if(e.socketId!==this.socket.getId())switch(this.model.handleUpdateMessage(e,!0),e.type){case"plan":return this.handlePlanChange(e);case"count":return this.handleCountChange(e);case"addAbsentUser":return this.handleAddAbsentUserChange(e);case"removeAbsentUser":return this.handleRemoveAbsentUserChange(e)}},handleAddAbsentUserChange:function(e){var n=e.user;this.$('.fte-masterEntry-absence-remove[data-userId="'+n.id+'"]').length||(t(a({absentUser:n,editable:!0})).hide().appendTo(this.$(".fte-masterEntry-absence-entries").show()).fadeIn("fast"),this.$(".fte-masterEntry-absence-noEntries").hide())},handleRemoveAbsentUserChange:function(e){var n=this.$('.fte-masterEntry-absence-remove[data-userId="'+e.userId+'"]');if(n.length){var r=this;n.closest("tr").fadeOut(function(){t(this).remove();var e=r.$(".fte-masterEntry-absence-entries");e.length||(e.hide(),r.$(".fte-masterEntry-absence-noEntries").show())})}},handlePlanChange:function(e){var t='.fte-masterEntry-noPlan[data-task="'+e.taskIndex+'"]',n=this.$(t);n.length&&(n.prop("checked",e.newValue),this.toggleCountsInRow(n,!0))},handleCountChange:function(e){var t=".fte-masterEntry-count[data-task="+e.taskIndex+"][data-function="+e.functionIndex+"][data-company="+e.companyIndex+"]",n=this.$(t);n.length&&(n.val(e.newCount),n.attr({"data-value":e.newCount,"data-remote":"true"}),this.recount(n[0],e.taskIndex,e.companyIndex))},onModelDeleted:function(e){r(this.broker,this.model,e)}})}),define("app/fte/pages/FteMasterEntryEditFormPage",["app/i18n","app/core/util/bindLoadingMessage","app/core/View","../FteMasterEntry","../views/FteMasterEntryEditFormView"],function(e,t,n,r,i){return n.extend({layoutName:"page",pageId:"fteMasterEntryForm",breadcrumbs:function(){return[{label:e.bound("fte","BREADCRUMBS:master:browse"),href:this.model.genClientUrl("base")},{label:e.bound("fte","BREADCRUMBS:details"),href:this.model.genClientUrl()},e.bound("fte","BREADCRUMBS:editForm")]},initialize:function(){this.model=t(new r({_id:this.options.modelId}),this),this.view=new i({model:this.model}),this.listenTo(this.view,"remoteError",function(e){"AUTH"===e.message&&this.broker.publish("router.navigate",{url:this.model.genClientUrl(),trigger:!0,replace:!0})})},load:function(e){return e(this.model.fetch())}})}),define("app/fte/views/FteMasterEntryDetailsView",["underscore","app/core/View","app/core/util/onModelDeleted","app/fte/templates/masterEntry","app/fte/templates/absentUserRow","../util/fractions"],function(e,t,n,r,i,o){return t.extend({template:r,remoteTopics:function(){var e={};return e["fte.master.updated."+this.model.id]="onModelUpdated",e["fte.master.deleted"]="onModelDeleted",e},serialize:function(){return e.extend(this.model.serializeWithTotals(),{editable:!1,renderAbsentUserRow:i,round:o.round})},beforeRender:function(){this.stopListening(this.model,"change",this.render)},afterRender:function(){this.listenToOnce(this.model,"change",this.render);var e=this.$(".fte-masterEntry-absence-entries"),t=this.$(".fte-masterEntry-absence-noEntries");e.children().length?t.hide():e.hide()},onModelUpdated:function(e){this.model.handleUpdateMessage(e)},onModelDeleted:function(e){n(this.broker,this.model,e)}})}),define("app/fte/pages/FteMasterEntryDetailsPage",["app/i18n","app/user","app/core/util/bindLoadingMessage","app/core/util/pageActions","app/core/View","../FteMasterEntry","../views/FteMasterEntryDetailsView"],function(e,t,n,r,i,o,a){return i.extend({layoutName:"page",pageId:"fteMasterEntryDetails",breadcrumbs:[{label:e.bound("fte","BREADCRUMBS:master:browse"),href:"#fte/master"},e.bound("fte","BREADCRUMBS:details")],actions:function(){var n=[{label:e.bound("fte","PAGE_ACTION:print"),icon:"print",href:this.model.genClientUrl("print")}];return this.model.isEditable(t)&&n.push(r.edit(this.model),r.delete(this.model)),n},initialize:function(){this.model=n(new o({_id:this.options.modelId}),this),this.view=new a({model:this.model})},load:function(e){return e(this.model.fetch())}})}),define("app/fte/templates/printableMasterEntryList",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<table class="table table-bordered table-condensed fte-masterEntry fte-masterEntry-print">\n  <thead>\n  <tr>\n    <th class="fte-masterEntry-column-task">',t("fte","masterEntry:column:task"),'\n    <th class="fte-masterEntry-column-noPlan">',t("fte","masterEntry:column:noPlan"),'\n    <th colspan="2">',t("fte","masterEntry:column:total"),"</th>\n    "),Object.keys(totalByProdFunction).forEach(function(e){buf.push('\n    <th colspan="',Object.keys(totalByProdFunction[e].companies).length,'">',totalByProdFunction[e].prodFunction,"</th>\n    ")}),buf.push("\n  <tr>\n    <th>\n    <th>\n    "),Object.keys(totalByCompany).forEach(function(e){buf.push("\n    <th>",totalByCompany[e].name,"\n    ")}),buf.push("\n    "),Object.keys(totalByProdFunction).forEach(function(e){buf.push("\n    "),Object.keys(totalByProdFunction[e].companies).forEach(function(e){buf.push("\n    <th>",escape(totalByCompany[e].name),"\n    ")}),buf.push("\n    ")}),buf.push('\n  </thead>\n  <tbody>\n  <tr>\n    <th>\n    <th>\n    <th colspan="',companyCount,'">',round(total),"\n    "),Object.keys(totalByProdFunction).forEach(function(e){buf.push('\n    <th colspan="',Object.keys(totalByProdFunction[e].companies).length,'">',round(totalByProdFunction[e].total),"\n    ")}),buf.push("\n  <tr>\n    <th>\n    <th>\n    "),Object.keys(totalByCompany).forEach(function(e){buf.push("\n    <th>",round(totalByCompany[e].total),"\n    ")}),buf.push("\n    "),Object.keys(totalByProdFunction).forEach(function(e){buf.push("\n    "),Object.keys(totalByProdFunction[e].companies).forEach(function(t){buf.push("\n    <th>",round(totalByProdFunction[e].companies[t]),"\n    ")}),buf.push("\n    ")}),buf.push("\n  "),tasks.forEach(function(e){buf.push('\n  <tr>\n    <td class="fte-masterEntry-cell-task">\n      '),"prodFlow"===e.type?buf.push("\n      ",escape(e.name),"\n      "):buf.push("\n      <em>",escape(e.name),"</em>\n      "),buf.push('\n    <td><i class="fa fa-',e.noPlan?"check":"times",'"></i>\n    '),Object.keys(e.totalByCompany).forEach(function(t){buf.push("\n    <td>",round(e.totalByCompany[t]),"</td>\n    ")}),buf.push("\n    "),e.functions.forEach(function(e){buf.push("\n    "),e.companies.forEach(function(e){buf.push("\n    <td>",round(e.count),"\n    ")}),buf.push("\n    ")}),buf.push("\n  ")}),buf.push('\n  <tr class="fte-masterEntry-print-absence-separator">\n    <td colspan="999">&nbsp;\n  <tr class="fte-masterEntry-print-absence-header">\n    <th colspan="999">Absencja personalna\n  <tr class="fte-masterEntry-print-absence-columns">\n    <th>',t("users","PROPERTY:personellId"),'\n    <th colspan="999">',t("users","PROPERTY:name"),"\n  "),absentUsers.forEach(function(e){buf.push('\n  <tr class="fte-masterEntry-print-absence-row">\n    <td>',e.personellId,'\n    <td colspan="999">',e.name,"\n  ")}),buf.push("\n</table>\n")}();return buf.join("")}}),define("app/fte/views/FteMasterEntryDetailsPrintableView",["underscore","app/core/views/PrintableListView","app/fte/templates/printableMasterEntryList","../util/fractions"],function(e,t,n,r){return t.extend({template:n,serialize:function(){return e.extend(this.model.serializeWithTotals(),{round:r.round})},afterRender:function(){}})}),define("app/fte/pages/FteMasterEntryDetailsPrintablePage",["app/time","app/i18n","app/data/subdivisions","app/data/views/renderOrgUnitPath","app/core/util/bindLoadingMessage","app/core/View","../FteMasterEntry","../views/FteMasterEntryDetailsPrintableView"],function(e,t,n,r,i,o,a,s){return o.extend({layoutName:"print",pageId:"fteMasterEntryDetailsPrintable",hdLeft:function(){var e=n.get(this.model.get("subdivision"));return t("fte","print:hdLeft",{subdivision:e?r(e,!1,!1):"?"})},hdRight:function(){return t("fte","print:hdRight",{date:e.format(this.model.get("date"),"YYYY-MM-DD"),shift:t("core","SHIFT:"+this.model.get("shift"))})},initialize:function(){this.model=i(new a({_id:this.options.modelId}),this),this.view=new s({model:this.model})},load:function(e){return e(this.model.fetch())}})}),define("app/fte/FteLeaderEntryCollection",["app/user","../core/Collection","./FteLeaderEntry"],function(e,t,n){return t.extend({model:n,rqlQuery:function(t){var n,r=e.getDivision();return r&&"prod"===r.get("type")&&(n={name:"and",args:[{name:"eq",args:[e.data.orgUnitType,e.data.orgUnitId]}]}),t.Query.fromObject({fields:{subdivision:1,date:1,shift:1,createdAt:1,creator:1},sort:{date:-1},limit:15,selector:n})}})}),define("app/fte/pages/FteLeaderEntryListPage",["app/i18n","app/user","app/core/util/bindLoadingMessage","app/core/util/pageActions","app/core/View","../FteLeaderEntryCollection","../views/FteLeaderEntryListView","../views/FteEntryFilterView","app/core/templates/listPage"],function(e,t,n,r,i,o,a,s,u){return i.extend({template:u,layoutName:"page",pageId:"fteLeaderEntryList",breadcrumbs:[e.bound("fte","BREADCRUMBS:leader:browse")],actions:function(n){return[{label:e.bound("fte","PAGE_ACTION:add"),href:"#fte/leader;add",icon:"plus",privileges:function(){return t.isAllowedTo("FTE:LEADER:MANAGE","PROD_DATA:MANAGE")}},r.export(n,this,this.collection)]},initialize:function(){this.defineModels(),this.defineViews(),this.setView(".filter-container",this.filterView),this.setView(".list-container",this.listView)},defineModels:function(){this.collection=n(new o(null,{rqlQuery:this.options.rql}),this)},defineViews:function(){this.filterView=new s({model:{rqlQuery:this.collection.rqlQuery},divisionFilter:function(e){return"dist"===e.get("type")}}),this.listView=new a({collection:this.collection}),this.listenTo(this.filterView,"filterChanged",this.refreshList)},load:function(e){return e(this.collection.fetch({reset:!0}))},refreshList:function(e){this.collection.rqlQuery=e,this.listView.refreshCollectionNow();var t=e.toString();this.broker.publish("router.navigate",{url:this.collection.genClientUrl()+"?"+t,trigger:!1,replace:!0})}})}),define("app/fte/pages/FteLeaderEntryAddFormPage",["app/i18n","app/core/View","../FteLeaderEntry","../views/FteEntryAddFormView"],function(e,t,n,r){return t.extend({layoutName:"page",pageId:"fteLeaderEntryAddForm",breadcrumbs:[{label:e.bound("fte","BREADCRUMBS:leader:browse"),href:"#fte/leader"},e.bound("fte","BREADCRUMBS:addForm")],initialize:function(){this.view=new r({model:new n,divisionFilter:function(e){return e&&"dist"===e.get("type")}}),this.listenTo(this.view,"editable",function(e){this.broker.publish("router.navigate",{url:e.genClientUrl("edit"),trigger:!0})}),this.listenTo(this.view,"uneditable",function(e){this.broker.publish("router.navigate",{url:e.genClientUrl(),trigger:!0})})}})}),define("app/fte/templates/leaderEntry",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div>\n  <div class="well">\n    <div class="fte-property">\n      <span class="fte-property-name">',t("core","ORG_UNIT:subdivision"),'</span>\n      <span class="fte-property-value">',subdivision,'</span>\n    </div>\n    <div class="fte-property">\n      <span class="fte-property-name">',t("fte","property:date"),'</span>\n      <span class="fte-property-value">',date,'</span>\n    </div>\n    <div class="fte-property">\n      <span class="fte-property-name">',t("fte","property:shift"),'</span>\n      <span class="fte-property-value">',shift,'</span>\n    </div>\n  </div>\n  <div class="panel panel-primary">\n    <div class="panel-heading">',t("fte","leaderEntry:panel:title"+(editable?":editable":"")),"</div>\n    "),editable&&buf.push('\n    <div class="message message-inline message-info">',t("fte","panel:info"),"</div>\n    "),buf.push("\n    "),buf.push(totalByProdFunction?"\n    "+function(){var e=[];return e.push('<div class="table-responsive">\n<table class="table table-bordered table-condensed table-hover fte-leaderEntry ',editable?"is-editable":"",'">\n  <thead>\n    <tr>\n      <th class="fte-leaderEntry-column-task" rowspan="',divisions.length?6:4,'">',t("fte","leaderEntry:column:task"),'\n      <th class="fte-leaderEntry-column-total even" colspan="',companyCount*(divisions.length||1),'">',t("fte","leaderEntry:column:taskTotal"),"</th>\n      "),Object.keys(totalByProdFunction).forEach(function(t,n){e.push('\n      <th class="fte-leaderEntry-column-prodFunction ',n%2?"even":"",'" colspan="',Object.keys(totalByProdFunction[t].companies).length*(divisions.length||1),'" data-column="',n,'">',totalByProdFunction[t].prodFunction,"</th>\n      ")}),e.push("\n      "),editable&&e.push('\n      <th rowspan="',divisions.length?6:4,'"></th>\n      '),e.push('\n    </tr>\n    <tr>\n      <th class="fte-leaderEntry-total even" colspan="',companyCount*(divisions.length||1),'">',round(total),"\n      "),Object.keys(totalByProdFunction).forEach(function(t,n){e.push('\n      <th class="fte-leaderEntry-total-prodFunction ',n%2?"even":"",'" colspan="',Object.keys(totalByProdFunction[t].companies).length*(divisions.length||1),'" data-column="',n,'">',round(totalByProdFunction[t].total),"\n      ")}),e.push("\n    </tr>\n    <tr>\n      "),Object.keys(totalByCompany).forEach(function(t){e.push('\n      <th class="fte-leaderEntry-column-company even" colspan="',divisions.length,'">',totalByCompany[t].name,"\n      ")}),e.push("\n      "),Object.keys(totalByProdFunction).forEach(function(t,n){e.push("\n      "),Object.keys(totalByProdFunction[t].companies).forEach(function(r){e.push('\n      <th class="fte-leaderEntry-column-company ',n%2?"even":"",'" colspan="',divisions.length,'" data-column="',n,":",totalByProdFunction[t].companies[r].index,'">',escape(totalByCompany[r].name),"\n      ")}),e.push("\n      ")}),e.push("\n    </tr>\n    <tr>\n      "),Object.keys(totalByCompany).forEach(function(t){e.push('\n      <th class="fte-leaderEntry-total-company even" colspan="',divisions.length,'" data-company="',totalByCompany[t].index,'">',round(totalByCompany[t].total),"\n      ")}),e.push("\n      "),Object.keys(totalByProdFunction).forEach(function(t,n){e.push("\n      "),Object.keys(totalByProdFunction[t].companies).forEach(function(r){e.push('\n      <th class="fte-leaderEntry-total-prodFunction-company ',n%2?"even":"",'" colspan="',divisions.length,'" data-function="',n,'" data-company="',totalByProdFunction[t].companies[r].index,'" data-column="',n,":",totalByProdFunction[t].companies[r].index,'">',round(totalByProdFunction[t].companies[r].total),"\n      ")}),e.push("\n      ")}),e.push("\n    </tr>\n    "),divisions.length&&(e.push("\n    <tr>\n      "),Object.keys(totalByCompany).forEach(function(){e.push("\n      "),divisions.forEach(function(t){e.push('\n      <th class="fte-leaderEntry-column-division even">',t,"\n      ")}),e.push("\n      ")}),e.push("\n      "),Object.keys(totalByProdFunction).forEach(function(t,n){e.push("\n      "),Object.keys(totalByProdFunction[t].companies).forEach(function(r){e.push("\n      "),divisions.forEach(function(i,o){e.push('\n      <th class="fte-leaderEntry-column-division ',n%2?"even":"",'" data-column="',n,":",totalByProdFunction[t].companies[r].index,":",o,'">',i,"\n      ")}),e.push("\n      ")}),e.push("\n      ")}),e.push("\n    </tr>\n    <tr>\n      "),Object.keys(totalByCompany).forEach(function(t){e.push("\n      "),divisions.forEach(function(n,r){e.push('\n      <th class="fte-leaderEntry-total-division even" data-column="',totalByCompany[t].index,":",r,'" data-company="',totalByCompany[t].index,'" data-division="',r,'">',round(totalByCompany[t].divisions[n]),"\n      ")}),e.push("\n      ")}),e.push("\n      "),Object.keys(totalByProdFunction).forEach(function(t,n){e.push("\n      "),Object.keys(totalByProdFunction[t].companies).forEach(function(r){e.push("\n      "),divisions.forEach(function(i,o){e.push('\n      <th class="fte-leaderEntry-total-prodFunction-division ',n%2?"even":"",'" data-column="',n,":",totalByProdFunction[t].companies[r].index,":",o,'" data-company="',totalByProdFunction[t].companies[r].index,'" data-division="',o,'">',round(totalByProdFunction[t].companies[r].divisions[i]),"\n      ")}),e.push("\n      ")}),e.push("\n      ")}),e.push("\n    </tr>\n    ")),e.push("\n  </thead>\n  <tbody>\n    "),tasks.forEach(function(t){e.push('\n    <tr class="',t.parent?"is-child":t.hasChildren?"is-parent":"is-single"," ",t.lastChild?"is-last-child":""," ",t.comment?"has-visible-comment":"",'">\n      <td class="fte-leaderEntry-cell-task">\n        '),t.parent&&e.push("\n        ",t.lastChild?"‚îó":"‚î£","\n        "),e.push("\n        ",escape(t.name),"\n      </td>\n      "),Object.keys(t.totalByCompany).forEach(function(n){e.push("\n      "),t.fteDiv?(e.push("\n      "),divisions.forEach(function(r,i){e.push('\n      <td class="fte-leaderEntry-total-company-task even" data-companyId="',t.totalByCompany[n].index,'" data-company="',t.totalByCompany[n].index,'" data-divisionId="',r,'" data-division="',i,'">',round(t.totalByCompany[n].divisions[r]),"</td>\n      ")}),e.push("\n      ")):e.push('\n      <td class="fte-leaderEntry-total-company-task even" colspan="',divisions.length,'" data-company="',t.totalByCompany[n].index,'">',round(t.totalByCompany[n].total),"</td>\n      "),e.push("\n      ")}),e.push("\n      "),t.functions.forEach(function(n,r){e.push("\n      "),n.companies.forEach(function(n,i){e.push("\n      "),t.fteDiv?(e.push("\n      "),n.count.forEach(function(o,a){e.push('\n      <td class="',t.hasChildren?"fte-leaderEntry-parent-count":""," ",r%2?"even":"",'" data-function="',r,'" data-company="',n.index,'" data-division="',a,'">\n        '),editable&&!t.hasChildren?e.push('\n        <input\n          class="form-control no-controls fte-leaderEntry-count"\n          type="number"\n          min="0"\n          max="9999"\n          value="',o.value,'"\n          data-value="',o.value,'"\n          data-task="',t.index,'"\n          data-function="',r,'"\n          data-company="',n.index,'"\n          data-company-server="',i,'"\n          data-division="',a,'">\n        '):e.push("\n        ",round(o.value),"\n        "),e.push("\n      </td>\n      ")}),e.push("\n      ")):(e.push('\n      <td class="',t.hasChildren?"fte-leaderEntry-parent-count":""," ",r%2?"even":"",'" colspan="',divisions.length,'" data-function="',r,'" data-company="',n.index,'">\n        '),editable&&!t.hasChildren?e.push('\n        <input\n          class="form-control no-controls fte-leaderEntry-count"\n          type="number"\n          min="0"\n          max="9999"\n          value="',n.count,'"\n          data-value="',n.count,'"\n          data-task="',t.index,'"\n          data-function="',r,'"\n          data-company="',n.index,'"\n          data-company-server="',i,'">\n        '):e.push("\n        ",round(n.count),"\n        "),e.push("\n      </td>\n      ")),e.push("\n      ")}),e.push("\n      ")}),e.push("\n      "),editable&&e.push('\n      <td class="fte-leaderEntry-actions"><button class="btn btn-default fte-leaderEntry-toggleComment" tabindex="-1"><i class="fa fa-comment"></i></button></td>\n      '),e.push('\n    </tr>\n    <tr class="fte-leaderEntry-comment ',t.comment?"":"hidden",'">\n      <td colspan="999">\n        '),editable?e.push('\n        <textarea class="form-control fte-leaderEntry-comment" rows="2" data-task="',t.index,'">',escape(t.comment||""),"</textarea>\n        "):e.push('\n        <span class="fte-leaderEntry-comment"><i class="fa fa-comment"></i> ',escape(t.comment||""),"</span>\n        "),e.push("\n      </td>\n    </tr>\n    ")}),e.push("\n  </tbody>\n</table>\n</div>\n"),e.join("")
}()+"\n    ":"\n    "+function(){var e=[];return e.push('<table class="table table-bordered table-condensed table-hover fte-leaderEntry">\n  <thead>\n    <tr>\n      <th class="fte-leaderEntry-column-task" rowspan="3">',t("fte","leaderEntry:column:task"),"\n      <th>",t("fte","leaderEntry:column:taskTotal"),"\n      "),companies.forEach(function(t,n){e.push('\n      <th class="fte-leaderEntry-column-company" colspan="',divisions.length,'" data-column="',n,'">',escape(t.name),"\n      ")}),e.push('\n    </tr>\n    <tr>\n      <th class="fte-leaderEntry-total-overall" rowspan="2">',round(total),"\n      "),companies.forEach(function(t,n){e.push('\n      <th class="fte-leaderEntry-total-company" colspan="',divisions.length,'" data-column="',escape(n),'">',round(t.total),"\n      ")}),e.push("\n    </tr>\n    "),divisions.length&&(e.push("\n    <tr>\n      "),companies.forEach(function(t,n){e.push("\n      "),divisions.forEach(function(t,r){e.push('\n      <th class="fte-leaderEntry-column-division" data-column="',n,":",r,'">',t,"\n      ")}),e.push("\n      ")}),e.push("\n    </tr>\n    ")),e.push("\n  </thead>\n  <tbody>\n    "),tasks.forEach(function(t,n){e.push('\n    <tr>\n      <td class="fte-leaderEntry-cell-task">',escape(t.name),'\n      <td class="fte-leaderEntry-total-task">',round(t.total),"\n      "),t.companies.forEach(function(t,r){e.push("\n      "),Array.isArray(t.count)?(e.push("\n      "),t.count.forEach(function(t,i){e.push("\n      <td ",editable?"":'class="fte-leaderEntry-count"',">\n        "),editable?e.push('\n        <input\n          class="form-control no-controls fte-leaderEntry-count"\n          type="number"\n          min="0"\n          max="9999"\n          value="',t.value,'"\n          data-value="',t.value,'"\n          data-task="',n,'"\n          data-company="',r,'"\n          data-division="',i,'">\n        '):e.push("\n        ",round(t.value),"\n        "),e.push("\n      </td>\n      ")}),e.push("\n      ")):(e.push("\n      <td ",editable?"":'class="fte-leaderEntry-count"',' colspan="',divisions.length,'">\n        '),editable?e.push('\n        <input\n          class="form-control no-controls fte-leaderEntry-count"\n          type="number"\n          min="0"\n          max="9999"\n          value="',t.count,'"\n          data-value="',t.count,'"\n          data-task="',n,'"\n          data-company="',r,'">\n        '):e.push("\n        ",round(t.count),"\n        "),e.push("\n      </td>\n      ")),e.push("\n      ")}),e.push("\n    </tr>\n    ")}),e.push("\n  </tbody>\n</table>\n"),e.join("")}()+"\n    "),buf.push("\n  </div>\n</div>\n")}();return buf.join("")}}),define("app/fte/templates/focusInfoBar",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="fte-focusInfoBar-prop">',escape(prodTask),'</div><div class="fte-focusInfoBar-prop">',escape(prodFunction),'</div><div class="fte-focusInfoBar-prop">',escape(company),"</div>"),division&&buf.push('<div class="fte-focusInfoBar-prop">',escape(division),"</div>"),buf.push("\n")}();return buf.join("")}}),define("app/fte/views/FteLeaderEntryEditFormView",["underscore","jquery","app/user","app/core/View","app/core/util/onModelDeleted","app/fte/templates/leaderEntry","app/fte/templates/focusInfoBar","../util/fractions","jquery.stickytableheaders"],function(e,t,n,r,i,o,a,s){return r.extend({template:o,events:{"change .fte-leaderEntry-count":"updateCount","keyup .fte-leaderEntry-count":"updateCount","keydown .fte-leaderEntry-count":function(e){return 13===e.which?(this.focusNextInput(this.$(e.target)),!1):void 0},"focus .fte-leaderEntry-count":function(e){var t=e.target,n=t.parentNode.parentNode,r=this.theadEl,i=t.dataset,o=i.function+":"+i.company;this.focused=[t.parentNode,n.children[0]],this.withFunctions?this.focused.push(r.querySelector('.fte-leaderEntry-column-prodFunction[data-column="'+i.function+'"]'),r.querySelector('.fte-leaderEntry-total-prodFunction[data-column="'+i.function+'"]'),r.querySelector('.fte-leaderEntry-column-company[data-column="'+o+'"]'),r.querySelector('.fte-leaderEntry-total-prodFunction-company[data-column="'+o+'"]')):this.focused.push(r.querySelector('.fte-leaderEntry-column-company[data-column="'+i.company+'"]'),r.querySelector('.fte-leaderEntry-total-company[data-column="'+i.company+'"]')),void 0===t.dataset.division?this.withFunctions?(this.focused.push(n.querySelector('.fte-leaderEntry-total-company-task[data-company="'+i.company+'"]')),this.focused.push.apply(this.focused,r.querySelectorAll('.fte-leaderEntry-column-division[data-column^="'+o+'"]')),this.focused.push.apply(this.focused,r.querySelectorAll('.fte-leaderEntry-total-prodFunction-division[data-column^="'+o+'"]'))):this.focused.push.apply(this.focused,r.querySelectorAll('.fte-leaderEntry-column-division[data-column^="'+i.company+'"]')):this.withFunctions?this.focused.push(n.querySelector('.fte-leaderEntry-total-company-task[data-company="'+i.company+'"][data-division="'+i.division+'"]'),r.querySelector('.fte-leaderEntry-column-division[data-column="'+o+":"+i.division+'"]'),r.querySelector('.fte-leaderEntry-total-prodFunction-division[data-column="'+o+":"+i.division+'"]')):this.focused.push(r.querySelector('.fte-leaderEntry-column-division[data-column="'+i.company+":"+i.division+'"]')),this.$(this.focused).addClass("is-focused"),this.showFocusInfoBar(e.target)},"blur .fte-leaderEntry-count":function(){this.$(this.focused).removeClass("is-focused"),this.hideFocusInfoBar()},"click .fte-leaderEntry-toggleComment":function(e){var t=this.$(e.currentTarget),n=t.closest("tr"),r=n.next();r.toggleClass("hidden"),n.toggleClass("has-visible-comment"),r.hasClass("hidden")?t.find(".fa").removeClass("fa-comment-o").addClass("fa-comment"):(t.find(".fa").removeClass("fa-comment").addClass("fa-comment-o"),r.find("textarea").focus())},"keyup textarea.fte-leaderEntry-comment":function(e){this.updateComment(e.target)},"change textarea.fte-leaderEntry-comment":function(e){this.doUpdateComment(e.target)}},remoteTopics:function(){var e={};return e["fte.leader.updated."+this.model.id]="onRemoteEdit",e["fte.leader.deleted"]="onModelDeleted",e},initialize:function(){this.focused=null,this.theadEl=null,this.withFunctions=!1},destroy:function(){this.$(".fte-leaderEntry").stickyTableHeaders("destroy"),t("body").removeClass("is-with-fte-focusInfoBar"),this.focused=null,this.theadEl=null},beforeRender:function(){this.stopListening(this.model,"change",this.render)},afterRender:function(){this.listenToOnce(this.model,"change",this.render),this.theadEl=this.el.getElementsByTagName("thead")[0],this.withFunctions=this.model.isWithFunctions(),this.withDivisions=this.model.isWithDivisions(),this.$focusInfoBar=t('<div class="fte-focusInfoBar"></div>').hide().appendTo(this.$el),this.$(".fte-leaderEntry-count").first().select()},serialize:function(){return e.extend(this.model.serializeWithTotals(),{editable:!0,round:s.round})},focusNextInput:function(e){var t=e.closest("td").next("td");if(t.length&&!t.hasClass("fte-leaderEntry-actions"))return this.scrollIntoView(t.find("input").select()[0]);for(var n=e.closest("tr").next();n.length;){if(!n.hasClass("is-parent")&&!n.hasClass("fte-leaderEntry-comment"))return this.scrollIntoView(n.find(".fte-leaderEntry-count").first().select()[0]);n=n.next()}var r=this.el.querySelector(".fte-leaderEntry-count");r.select(),this.scrollIntoView(r)},scrollIntoView:function(e){e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded():e.scrollIntoView(!0)},updateCount:function(e){var t=e.target.dataset,n=s.parse(t.value)||0,r=s.parse(e.target.value)||0;if(n!==r){var i=t.task+":"+t.function+":"+t.company+":"+t.division;this.timers[i]&&clearTimeout(this.timers[i]),this.timers[i]=setTimeout(this.doUpdateCount.bind(this),250,e.target,i,n,r)}},doUpdateCount:function(e,t,n,r){delete this.timers[t];var i=e.dataset,o=i.remote,a={socketId:this.socket.getId(),_id:this.model.id,newCount:r,taskIndex:parseInt(i.task,10),functionIndex:parseInt(i.function,10)||0,companyIndex:parseInt(i.company,10),companyIndexServer:parseInt(i.companyServer,10)},s=parseInt(i.division,10);isNaN(s)||(a.divisionIndex=s),i.value=a.newCount,i.remote="false";var u=this;this.socket.emit("fte.leader.updateCount",a,function(t){t&&("true"!==i.remote&&(e.value=n,i.value=n,i.remote=o,u.recount(e,a.taskIndex,a.functionIndex,a.companyIndex),a.newCount=n,u.model.handleUpdateMessage(a,!0)),u.trigger("remoteError",t))}),this.recount(e,a.taskIndex,a.functionIndex,a.companyIndex),this.model.handleUpdateMessage(a,!0)},recount:function(e,t,n,r){if(this.withFunctions)return this.recountWithFunctions(e,t,n,r);var i=0,o=0,a=0,u=this.$(e).closest("tr");u.find(".fte-leaderEntry-count").each(function(){i+=s.parse(this.value)}),u.find(".fte-leaderEntry-total-task").text(s.round(i)),this.$(".fte-leaderEntry-count[data-company="+r+"]").each(function(){o+=s.parse(this.value)}),this.$(".fte-leaderEntry-total-company[data-column="+r+"]").text(s.round(o)),this.$(".fte-leaderEntry-total-company").each(function(){a+=s.parse(this.innerHTML)}),this.$(".fte-leaderEntry-total-overall").text(s.round(a))},recountWithFunctions:function(e,t,n,r){var i=this.$(e).closest("tr"),o=i.hasClass("is-child"),a=null,s=[],u=parseInt(e.dataset.division,10);if(isNaN(u)&&(u=-1),o){for(a=i.prev().prev();a.length&&a.hasClass("is-child");)a=a.prev().prev();for(var c=a.next().next();c.length&&c.hasClass("is-child");)s.push(c),c=c.next().next()}var l=this.recalcTaskCompanyTotals(r,u,i);o&&this.recalcParentTotals(l,n,a,s),this.withDivisions&&this.recalcDivisionTotals(n,r),this.recalcCompanyTotals(n,r),this.recalcFunctionTotals(n)},recalcTaskCompanyTotals:function(e,t,n){var r=0,i='[data-company="'+e+'"]';return-1!==t&&(i+='[data-division="'+t+'"]'),n.find(".fte-leaderEntry-count"+i).each(function(){r+=s.parse(this.value)}),n.find(".fte-leaderEntry-total-company-task"+i).text(s.round(r)),i},recalcParentTotals:function(e,t,n,r){var i=0,o=e+'[data-function="'+t+'"]';r.forEach(function(e){i+=s.parse(e.find(".fte-leaderEntry-count"+o).val())}),n.find(".fte-leaderEntry-parent-count"+o).text(s.round(i));var a=0;n.find(".fte-leaderEntry-parent-count"+e).each(function(){a+=s.parse(this.innerText)}),n.find(".fte-leaderEntry-total-company-task"+e).text(s.round(a))},recalcDivisionTotals:function(e,n){var r=this,i=this.model.get("fteDiv"),o='[data-function="'+e+'"][data-company="'+n+'"]',a={};i.forEach(function(e){a[e]=0}),this.$(".fte-leaderEntry-parent-count"+o).each(function(){var e=s.parse(this.innerText);void 0===this.dataset.division?(e/=i.length,i.forEach(function(t){a[t]+=e})):a[i[this.dataset.division]]+=e}),this.$(".is-single .fte-leaderEntry-count"+o).each(function(){var e=s.parse(this.value);void 0===this.dataset.division?(e/=i.length,i.forEach(function(t){a[t]+=e})):a[i[this.dataset.division]]+=e}),i.forEach(function(t,i){var o=e+":"+n+":"+i,u='.fte-leaderEntry-total-prodFunction-division[data-column="'+o+'"]';r.$(u).text(s.round(a[t]))});var u={};t(this.theadEl).find(".fte-leaderEntry-total-prodFunction-division").each(function(){var e=this.dataset.company+":"+this.dataset.division;void 0===u[e]&&(u[e]=0),u[e]+=s.parse(this.innerText)}),Object.keys(u).forEach(function(e){r.$('.fte-leaderEntry-total-division[data-column="'+e+'"]').text(s.round(u[e]))})},recalcCompanyTotals:function(e,t){var n,r=0,i=e+":"+t,o=this.$(this.theadEl);this.withDivisions?(n='[data-column^="'+i+'"]',o.find(".fte-leaderEntry-total-prodFunction-division"+n).each(function(){r+=s.parse(this.innerText)})):(n='[data-function="'+e+'"][data-company="'+t+'"]',this.$(".fte-leaderEntry-count"+n).each(function(){r+=s.parse(this.value)})),this.$('.fte-leaderEntry-total-prodFunction-company[data-column="'+i+'"]').text(s.round(r));var a=0;o.find('.fte-leaderEntry-total-prodFunction-company[data-company="'+t+'"]').each(function(){a+=s.parse(this.innerText)}),this.$('.fte-leaderEntry-total-company[data-company="'+t+'"]').text(s.round(a))},recalcFunctionTotals:function(e){var t=0,n=this.$(this.theadEl);n.find('.fte-leaderEntry-total-prodFunction-company[data-function="'+e+'"]').each(function(){t+=s.parse(this.innerText)}),this.$('.fte-leaderEntry-total-prodFunction[data-column="'+e+'"]').text(s.round(t));var r=0;n.find(".fte-leaderEntry-total-prodFunction").each(function(){r+=s.parse(this.innerText)}),this.$(".fte-leaderEntry-total").text(s.round(r))},onRemoteEdit:function(e){if(e.socketId!==this.socket.getId()){if(void 0!==e.comment)return this.onRemoteCommentEdit(e);var t=".fte-leaderEntry-count[data-company="+e.companyIndex+"][data-task="+e.taskIndex+"]";this.withFunctions&&(t+='[data-function="'+e.functionIndex+'"]'),"number"==typeof e.divisionIndex&&(t+='[data-division="'+e.divisionIndex+'"]');var n=this.$(t);0!==n.length&&(n.val(e.newCount),n.attr({"data-value":e.newCount,"data-remote":"true"}),this.recount(n[0],e.taskIndex,e.functionIndex,e.companyIndex),this.model.handleUpdateMessage(e,!0))}},onRemoteCommentEdit:function(e){var t=this.$('textarea.fte-leaderEntry-comment[data-task="'+e.taskIndex+'"]');if(t.length){t.val(e.comment);var n=t.closest("tr"),r=n.prev(),i=r.find(".fte-leaderEntry-toggleComment > .fa");t.comment?(n.addClass("hidden"),r.removeClass("has-visible-comment"),i.removeClass("fa-comment-o").addClass("fa-comment")):(n.removeClass("hidden"),r.addClass("has-visible-comment"),i.removeClass("fa-comment").addClass("fa-comment-o")),this.model.handleUpdateMessage(e,!0)}},onModelDeleted:function(e){i(this.broker,this.model,e)},showFocusInfoBar:function(e){null!==this.timers.hideFocusInfoBar&&(clearTimeout(this.timers.hideFocusInfoBar),this.timers.hideFocusInfoBar=null);var n=e.parentNode.parentNode,r=n.children[0].innerText;if(n.classList.contains("is-child")){for(var i=n.previousElementSibling.previousElementSibling;i&&i.classList.contains("is-child");)i=i.previousElementSibling.previousElementSibling;r=i.children[0].innerText+" \\ "+r.substr(1)}var o=e.dataset.function,s=e.dataset.company,u=e.dataset.division,c=o+":"+s,l='.fte-leaderEntry-column-prodFunction[data-column="'+o+'"]',d='.fte-leaderEntry-column-company[data-column="'+c+'"]',p=void 0===u?null:'.fte-leaderEntry-column-division[data-column="'+c+":"+u+'"]';this.$focusInfoBar.html(a({prodTask:r,prodFunction:this.theadEl.querySelector(l).innerText,company:this.theadEl.querySelector(d).innerText,division:p?this.theadEl.querySelector(p).innerText:null})),t("body").addClass("is-with-fte-focusInfoBar"),this.$focusInfoBar.fadeIn("fast")},hideFocusInfoBar:function(){var e=this;this.timers.hideFocusInfoBar=setTimeout(function(){e.timers&&(e.timers.hideFocusInfoBar=null,e.$focusInfoBar.fadeOut("fast",function(){t("body").removeClass("is-with-fte-focusInfoBar")}))},1)},updateComment:function(e){var t=parseInt(e.dataset.task,10),n="updateComment"+t;this.timers[n]&&clearTimeout(this.timers[n]),this.timers[n]=setTimeout(this.doUpdateComment.bind(this),5e3,e)},doUpdateComment:function(e){var t=parseInt(e.dataset.task,10),n="updateComment"+t;this.timers[n]&&(clearTimeout(this.timers[n]),delete this.timers[n]),this.socket.emit("fte.leader.updateComment",{socketId:this.socket.getId(),_id:this.model.id,taskIndex:t,comment:e.value})}})}),define("app/fte/pages/FteLeaderEntryEditFormPage",["app/i18n","app/core/util/bindLoadingMessage","app/core/View","../FteLeaderEntry","../views/FteLeaderEntryEditFormView"],function(e,t,n,r,i){return n.extend({layoutName:"page",pageId:"fteLeaderEntryForm",breadcrumbs:function(){return[{label:e.bound("fte","BREADCRUMBS:leader:browse"),href:this.model.genClientUrl("base")},{label:e.bound("fte","BREADCRUMBS:details"),href:this.model.genClientUrl()},e.bound("fte","BREADCRUMBS:editForm")]},initialize:function(){this.model=t(new r({_id:this.options.modelId}),this),this.view=new i({model:this.model}),this.listenTo(this.view,"remoteError",function(e){"AUTH"===e.message&&this.broker.publish("router.navigate",{url:this.model.genClientUrl(),trigger:!0,replace:!0})})},load:function(e){return e(this.model.fetch())}})}),define("app/fte/views/FteLeaderEntryDetailsView",["underscore","app/core/View","app/core/util/onModelDeleted","app/fte/templates/leaderEntry","../util/fractions"],function(e,t,n,r,i){return t.extend({template:r,remoteTopics:function(){var e={};return e["fte.leader.updated."+this.model.id]="onModelUpdated",e["fte.leader.deleted"]="onModelDeleted",e},serialize:function(){return e.extend(this.model.serializeWithTotals(),{editable:!1,round:i.round})},beforeRender:function(){this.stopListening(this.model,"change",this.render)},afterRender:function(){this.listenToOnce(this.model,"change",this.render)},onModelUpdated:function(e){this.model.handleUpdateMessage(e)},onModelDeleted:function(e){n(this.broker,this.model,e)}})}),define("app/fte/pages/FteLeaderEntryDetailsPage",["app/i18n","app/user","app/core/util/bindLoadingMessage","app/core/util/pageActions","app/core/View","../FteLeaderEntry","../views/FteLeaderEntryDetailsView"],function(e,t,n,r,i,o,a){return i.extend({layoutName:"page",pageId:"fteLeaderEntryDetails",breadcrumbs:[{label:e.bound("fte","BREADCRUMBS:leader:browse"),href:"#fte/leader"},e.bound("fte","BREADCRUMBS:details")],actions:function(){var n=[{label:e.bound("fte","PAGE_ACTION:print"),icon:"print",href:this.model.genClientUrl("print")}];return this.model.isEditable(t)&&n.push(r.edit(this.model),r.delete(this.model)),n},initialize:function(){this.model=n(new o({_id:this.options.modelId}),this),this.view=new a({model:this.model})},load:function(e){return e(this.model.fetch())}})}),define("app/fte/templates/printableLeaderEntryListWoFunctions",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<table class="table table-bordered table-condensed fte-leaderEntry-print">\n  <thead>\n    <tr>\n      <th>',t("fte","leaderEntry:column:task"),"</th>\n      <th>",t("fte","leaderEntry:column:taskTotal"),"</th>\n      "),companies.forEach(function(e){buf.push('\n      <th colspan="',divisions.length,'">',escape(e.name),"</th>\n      ")}),buf.push('\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th class="fte-ntb fte-nbb"></th>\n      <th class="fte-nbb">',round(total),"</th>\n      "),companies.forEach(function(e){buf.push('\n      <th class="fte-nbb" colspan="',divisions.length,'">',round(e.total),"</th>\n      ")}),buf.push("\n    </tr>\n    "),divisions.length&&(buf.push('\n    <tr>\n      <th class="fte-ntb"></th>\n      <th class="fte-ntb"></th>\n      '),companies.forEach(function(){buf.push("\n      "),divisions.forEach(function(e){buf.push("\n      <th>",e,"</th>\n      ")}),buf.push("\n      ")}),buf.push("\n    </tr>\n    ")),buf.push("\n    "),tasks.forEach(function(e){buf.push("\n    <tr>\n      <td>",escape(e.name),"\n      <td>",round(e.total),"\n      "),e.companies.forEach(function(e){buf.push("\n      "),Array.isArray(e.count)?(buf.push("\n      "),e.count.forEach(function(e){buf.push("\n      <td>",round(e.value),"</td>\n      ")}),buf.push("\n      ")):buf.push('\n      <td colspan="',divisions.length,'">',round(e.count),"</td>\n      "),buf.push("\n      ")}),buf.push("\n    </tr>\n    ")}),buf.push("\n  </tbody>\n</table>\n")}();return buf.join("")}}),define("app/fte/templates/printableLeaderEntryListWFunctions",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<table class="table table-bordered table-condensed table-hover fte-leaderEntry-print">\n  <thead>\n    <tr>\n      <th class="fte-leaderEntry-column-task" rowspan="',divisions.length?6:4,'">',t("fte","leaderEntry:column:task"),'\n      <th class="fte-leaderEntry-column-total even" colspan="',companyCount*(divisions.length||1),'">',t("fte","leaderEntry:column:taskTotal"),"</th>\n      "),Object.keys(totalByProdFunction).forEach(function(e){buf.push('\n      <th class="fte-leaderEntry-column-prodFunction" colspan="',Object.keys(totalByProdFunction[e].companies).length*(divisions.length||1),'">',totalByProdFunction[e].prodFunction,"</th>\n      ")}),buf.push('\n    </tr>\n    <tr>\n      <th class="fte-leaderEntry-total even" colspan="',companyCount*(divisions.length||1),'">',round(total),"\n      "),Object.keys(totalByProdFunction).forEach(function(e){buf.push('\n      <th class="fte-leaderEntry-total-prodFunction" colspan="',Object.keys(totalByProdFunction[e].companies).length*(divisions.length||1),'">',round(totalByProdFunction[e].total),"\n      ")}),buf.push("\n    </tr>\n    <tr>\n      "),Object.keys(totalByCompany).forEach(function(e){buf.push('\n      <th class="fte-leaderEntry-column-company even" colspan="',divisions.length,'">',totalByCompany[e].name,"\n      ")}),buf.push("\n      "),Object.keys(totalByProdFunction).forEach(function(e){buf.push("\n      "),Object.keys(totalByProdFunction[e].companies).forEach(function(e){buf.push('\n      <th class="fte-leaderEntry-column-company" colspan="',divisions.length,'">',escape(totalByCompany[e].name),"\n      ")}),buf.push("\n      ")}),buf.push("\n    </tr>\n    <tr>\n      "),Object.keys(totalByCompany).forEach(function(e){buf.push('\n      <th class="fte-leaderEntry-total-company" colspan="',divisions.length,'">',round(totalByCompany[e].total),"\n      ")}),buf.push("\n      "),Object.keys(totalByProdFunction).forEach(function(e){buf.push("\n      "),Object.keys(totalByProdFunction[e].companies).forEach(function(t){buf.push('\n      <th class="fte-leaderEntry-total-prodFunction-company" colspan="',divisions.length,'">',round(totalByProdFunction[e].companies[t].total),"\n      ")}),buf.push("\n      ")}),buf.push("\n    </tr>\n    "),divisions.length&&(buf.push("\n    <tr>\n      "),Object.keys(totalByCompany).forEach(function(){buf.push("\n      "),divisions.forEach(function(e){buf.push('\n      <th class="fte-leaderEntry-column-division">',e,"\n      ")}),buf.push("\n      ")}),buf.push("\n      "),Object.keys(totalByProdFunction).forEach(function(e){buf.push("\n      "),Object.keys(totalByProdFunction[e].companies).forEach(function(){buf.push("\n      "),divisions.forEach(function(e){buf.push('\n      <th class="fte-leaderEntry-column-division">',e,"\n      ")}),buf.push("\n      ")}),buf.push("\n      ")}),buf.push("\n    </tr>\n    <tr>\n      "),Object.keys(totalByCompany).forEach(function(e){buf.push("\n      "),divisions.forEach(function(t){buf.push('\n      <th class="fte-leaderEntry-total-division">',round(totalByCompany[e].divisions[t]),"\n      ")}),buf.push("\n      ")}),buf.push("\n      "),Object.keys(totalByProdFunction).forEach(function(e){buf.push("\n      "),Object.keys(totalByProdFunction[e].companies).forEach(function(t){buf.push("\n      "),divisions.forEach(function(n){buf.push('\n      <th class="fte-leaderEntry-total-prodFunction-division">',round(totalByProdFunction[e].companies[t].divisions[n]),"\n      ")}),buf.push("\n      ")}),buf.push("\n      ")}),buf.push("\n    </tr>\n    ")),buf.push("\n  </thead>\n  <tbody>\n    "),tasks.forEach(function(e){buf.push('\n    <tr class="',e.parent?"is-child":e.hasChildren?"is-parent":"is-single"," ",e.lastChild?"is-last-child":"",'">\n      <td class="fte-leaderEntry-cell-task">\n        '),e.parent&&buf.push("\n        ",e.lastChild?"‚îó":"‚î£","\n        "),buf.push("\n        ",escape(e.name),"\n      </td>\n      "),Object.keys(e.totalByCompany).forEach(function(t){buf.push("\n      "),e.fteDiv?(buf.push("\n      "),divisions.forEach(function(n){buf.push("\n      <td>",round(e.totalByCompany[t].divisions[n]),"</td>\n      ")}),buf.push("\n      ")):buf.push('\n      <td colspan="',divisions.length,'">',round(e.totalByCompany[t].total),"</td>\n      "),buf.push("\n      ")}),buf.push("\n      "),e.functions.forEach(function(t){buf.push("\n      "),t.companies.forEach(function(t){buf.push("\n      "),e.fteDiv?(buf.push("\n      "),t.count.forEach(function(e){buf.push("\n      <td>",round(e.value),"</td>\n      ")}),buf.push("\n      ")):buf.push('\n      <td colspan="',divisions.length,'">',round(t.count),"</td>\n      "),buf.push("\n      ")}),buf.push("\n      ")}),buf.push("\n    </tr>\n    ")}),buf.push("\n  </tbody>\n</table>\n")}();return buf.join("")}}),define("app/fte/views/FteLeaderEntryDetailsPrintableView",["underscore","app/core/views/PrintableListView","app/fte/templates/printableLeaderEntryListWoFunctions","app/fte/templates/printableLeaderEntryListWFunctions","../util/fractions"],function(e,t,n,r,i){return t.extend({template:function(e){return null===e.totalByProdFunction?n(e):r(e)},serialize:function(){return e.extend(this.model.serializeWithTotals(),{round:i.round})},afterRender:function(){}})}),define("app/fte/pages/FteLeaderEntryDetailsPrintablePage",["app/time","app/i18n","app/data/subdivisions","app/data/views/renderOrgUnitPath","app/core/util/bindLoadingMessage","app/core/View","../FteLeaderEntry","../views/FteLeaderEntryDetailsPrintableView"],function(e,t,n,r,i,o,a,s){return o.extend({layoutName:"print",pageId:"fteLeaderEntryDetailsPrintable",landscape:!0,hdLeft:function(){var e=n.get(this.model.get("subdivision"));return t("fte","print:hdLeft",{subdivision:e?r(e,!1,!1):"?"})},hdRight:function(){return t("fte","print:hdRight",{date:e.format(this.model.get("date"),"YYYY-MM-DD"),shift:t("core","SHIFT:"+this.model.get("shift"))})},initialize:function(){this.model=i(new a({_id:this.options.modelId}),this),this.view=new s({model:this.model})},load:function(e){return e(this.model.fetch())}})}),define("app/nls/fte",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:leader:browse":function(){return"FTE (warehouse)"},"BREADCRUMBS:master:browse":function(){return"FTE (production)"},"BREADCRUMBS:addForm":function(){return"Choosing"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:details":function(){return"Resources"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the FTE data :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the specific FTE data :("},"MSG:DELETED":function(e){return"FTE entry <em>"+t.v(e,"label")+"</em> was deleted."},"PAGE_ACTION:print":function(){return"Show printable version"},"PAGE_ACTION:add":function(){return"Allocate resources"},"PAGE_ACTION:edit":function(){return"Edit entry"},"PAGE_ACTION:delete":function(){return"Delete entry"},"PAGE_ACTION:export":function(){return"Export entries"},"filter:date":function(){return"Date:"},"filter:shift":function(){return"Shift:"},"filter:submit":function(){return"Filter entries"},"addForm:panel:title":function(){return"FTE entry find/create form"},"addForm:submit":function(){return"Allocate resources"},"addForm:msg:offline":function(){return"Cannot allocate FTE: no connection with the server :("},"addForm:msg:failure":function(e){return"Failed to find/create the FTE entry for editing: "+t.s(e,"error",{AUTH:"no privileges!",INPUT:"invalid input data!",other:t.v(e,"error")})},"property:date":function(){return"Date"},"property:shift":function(){return"Shift"},label:function(e){return t.v(e,"subdivision")+", "+t.v(e,"date")+", "+t.v(e,"shift")+" shift"},"panel:info":function(){return"All changes are saved on-the-fly."},"leaderEntry:panel:title":function(){return"Resource allocation"},"leaderEntry:panel:title:editable":function(){return"Resource allocation form"},"leaderEntry:column:task":function(){return"Production task"},"leaderEntry:column:taskTotal":function(){return"Total"},"leaderEntry:column:companyTotal":function(){return"Total"},"masterEntry:tasksPanel:title":function(){return"Resource allocation"},"masterEntry:tasksPanel:title:editable":function(){return"Resource allocation form"},"masterEntry:absencePanel:title":function(){return"Personnel absence"},"masterEntry:absencePanel:title:editable":function(){return"Personnel absence form"},"masterEntry:column:task":function(){return"Production flow/<em>Production task</em>"},"masterEntry:column:noPlan":function(){return"No plan?"},"masterEntry:column:total":function(){return"Total"},"print:hdLeft":function(e){return"FTE allocated to "+t.v(e,"subdivision")},"print:hdRight":function(e){return t.v(e,"date")+", "+t.v(e,"shift")+" shift"},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"FTE entry deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete FTE entry"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen FTE entry?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Are you sure you want to delete the <em>"+t.v(e,"label")+"</em> FTE entry?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the FTE entry :-("}},pl:!0}}),define("app/nls/pl/fte",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"FTE"},"BREADCRUMBS:leader:browse":function(){return"FTE (magazyn)"},"BREADCRUMBS:master:browse":function(){return"FTE (produkcja)"},"BREADCRUMBS:addForm":function(){return"Wybieranie wpisu"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:details":function(){return"Zasoby"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie danych FTE nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie danych FTE nie powiod≈Ço siƒô :("},"MSG:DELETED":function(e){return"Wpis FTE <em>"+t.v(e,"label")+"</em> zosta≈Ç usuniƒôty."},"PAGE_ACTION:print":function(){return"Poka≈º wersjƒô do druku"},"PAGE_ACTION:add":function(){return"Przydzielaj zasoby"},"PAGE_ACTION:edit":function(){return"Edytuj wpis"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ wpis"},"PAGE_ACTION:export":function(){return"Eksportuj wpisy"},"filter:date":function(){return"Data:"},"filter:shift":function(){return"Zmiana:"},"filter:submit":function(){return"Filtruj wpisy"},"addForm:panel:title":function(){return"Formularz wyszukiwania/tworzenia wpisu FTE"},"addForm:submit":function(){return"Przydzielaj zasoby"},"addForm:msg:offline":function(){return"Nie mo≈ºna przydzielaƒá zasob√≥w: brak po≈ÇƒÖczenia z serwerem :("},"addForm:msg:failure":function(e){return"Nie uda≈Ço siƒô znale≈∫ƒá/utworzyƒá wpisu do edycji: "+t.s(e,"error",{AUTH:"brak uprawnie≈Ñ!",INPUT:"nieprawid≈Çowe dane wej≈õciowe!",other:t.v(e,"error")})},"property:date":function(){return"Data"},"property:shift":function(){return"Zmiana"},label:function(e){return t.v(e,"subdivision")+", "+t.v(e,"date")+", "+t.v(e,"shift")+" zmiana"},"panel:info":function(){return"Wszystkie zmiany w formularzu zapisywane sƒÖ na bie≈ºƒÖco."},"leaderEntry:panel:title":function(){return"Podzia≈Ç zasob√≥w"},"leaderEntry:panel:title:editable":function(){return"Formularz przydzielania zasob√≥w"
},"leaderEntry:column:task":function(){return"Zadanie produkcyjne"},"leaderEntry:column:taskTotal":function(){return"Suma"},"leaderEntry:column:companyTotal":function(){return"Suma"},"masterEntry:tasksPanel:title":function(){return"Podzia≈Ç zasob√≥w"},"masterEntry:tasksPanel:title:editable":function(){return"Formularz przydzielania zasob√≥w"},"masterEntry:absencePanel:title":function(){return"Absencja personalna"},"masterEntry:absencePanel:title:editable":function(){return"Formularz absencji personalnej"},"masterEntry:column:task":function(){return"Przep≈Çyw/<em>Zadanie produkcyjne</em>"},"masterEntry:column:noPlan":function(){return"Brak planu?"},"masterEntry:column:total":function(){return"Suma"},"print:hdLeft":function(e){return"Zasoby przydzielone do "+t.v(e,"subdivision")},"print:hdRight":function(e){return t.v(e,"date")+", "+t.v(e,"shift")+" zmiana"},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia wpisu FTE"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ wpis FTE"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany wpis FTE?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wpis FTE <em>"+t.v(e,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá wpisu FTE :-("}}}),define("app/fte/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","./FteMasterEntry","./FteLeaderEntry","./pages/FteMasterEntryListPage","./pages/FteMasterEntryAddFormPage","./pages/FteMasterEntryEditFormPage","./pages/FteMasterEntryDetailsPage","./pages/FteMasterEntryDetailsPrintablePage","./pages/FteLeaderEntryListPage","./pages/FteLeaderEntryAddFormPage","./pages/FteLeaderEntryEditFormPage","./pages/FteLeaderEntryDetailsPage","./pages/FteLeaderEntryDetailsPrintablePage","i18n!app/nls/fte"],function(e,t,n,r,i,o,a,s,u,c,l,d,p,f,h,m){var g=n.auth("FTE:MASTER:VIEW"),y=n.auth("FTE:MASTER:MANAGE","PROD_DATA:MANAGE"),v=n.auth("FTE:LEADER:VIEW"),w=n.auth("FTE:LEADER:MANAGE","PROD_DATA:MANAGE");e.map("/fte/master",g,function(e){t.showPage(new a({rql:e.rql}))}),e.map("/fte/master;add",y,function(){t.showPage(new s)}),e.map("/fte/master/:id",g,function(e){t.showPage(new c({modelId:e.params.id}))}),e.map("/fte/master/:id;edit",y,function(e){t.showPage(new u({modelId:e.params.id}))}),e.map("/fte/master/:id;print",g,function(e){t.showPage(new l({modelId:e.params.id}))}),e.map("/fte/master/:id;delete",y,r.bind(null,i)),e.map("/fte/leader",v,function(e){t.showPage(new d({rql:e.rql}))}),e.map("/fte/leader;add",w,function(){t.showPage(new p)}),e.map("/fte/leader/:id",v,function(e){t.showPage(new h({modelId:e.params.id}))}),e.map("/fte/leader/:id;edit",w,function(e){t.showPage(new f({modelId:e.params.id}))}),e.map("/fte/leader/:id;print",v,function(e){t.showPage(new m({modelId:e.params.id}))}),e.map("/fte/leader/:id;delete",w,r.bind(null,o))}),define("app/hourlyPlans/HourlyPlan",["../i18n","../time","../data/divisions","../data/views/renderOrgUnitPath","../core/Model"],function(e,t,n,r,i){return i.extend({urlRoot:"/hourlyPlans",clientUrlRoot:"#hourlyPlans",topicPrefix:"hourlyPlans",privilegePrefix:"HOURLY_PLANS",nlsDomain:"hourlyPlans",defaults:{division:null,date:null,shift:null,flows:null,createdAt:null,creator:null,updatedAt:null,updater:null},getLabel:function(){return this.get("division")+", "+t.format(this.get("date"),"LL")},serialize:function(){var i=n.get(this.get("division"));return{division:i?r(i,!1,!1):"?",date:t.format(this.get("date"),"LL"),shift:e("core","SHIFT:"+this.get("shift")),flows:this.get("flows")}},isEditable:function(e){if(e.isAllowedTo("PROD_DATA:MANAGE"))return!0;if(!e.isAllowedTo(this.getPrivilegePrefix()+":MANAGE"))return!1;var t=Date.parse(this.get("createdAt"));if(Date.now()>=t+288e5)return!1;var n=e.getDivision();if(!n||e.isAllowedTo(this.getPrivilegePrefix()+":ALL"))return!0;var r=this.get("division");return r===n.id},handleUpdateMessage:function(e){var t=this.get("flows");if(t){var n=t[e.flowIndex];if(n){if("plan"===e.type)n.noPlan=e.newValue,n.level=0,n.hours=n.hours.map(function(){return 0});else{if("count"!==e.type)return;"number"==typeof e.hourIndex?n.hours[e.hourIndex]=e.newValue:n.level=e.newValue}this.trigger("change:flows"),this.trigger("change")}}}})}),define("app/hourlyPlans/HourlyPlanCollection",["app/user","../core/Collection","./HourlyPlan"],function(e,t,n){return t.extend({model:n,rqlQuery:function(t){var n,r=e.getDivision();return r&&"prod"===r.get("type")&&(n={name:"and",args:[{name:"eq",args:["division",r.id]}]}),t.Query.fromObject({fields:{division:1,date:1,shift:1,createdAt:1,creator:1},sort:{date:-1},limit:15,selector:n})}})}),define("app/hourlyPlans/views/HourlyPlanListView",["app/time","app/i18n","app/user","app/data/divisions","app/data/views/renderOrgUnitPath","app/core/views/ListView"],function(e,t,n,r,i,o){return o.extend({remoteTopics:{"hourlyPlans.created":"refreshCollection","hourlyPlans.deleted":"onModelDeleted"},serializeColumns:function(){return[{id:"division",label:t("core","ORG_UNIT:division")},{id:"date",label:t("hourlyPlans","property:date")},{id:"shift",label:t("hourlyPlans","property:shift")}]},serializeActions:function(){var e=this.collection;return function(r){var i=e.get(r._id),a=[o.actions.viewDetails(i),{icon:"print",label:t("core","LIST:ACTION:print"),href:i.genClientUrl("print")}];return i.isEditable(n)&&a.push(o.actions.edit(i),o.actions.delete(i)),a}},serializeRows:function(){return this.collection.map(function(n){var o=r.get(n.get("division")),a=n.toJSON();return a.division=o?i(o,!1,!1):"?",a.date=e.format(a.date,"LL"),a.shift=t("core","SHIFT:"+a.shift),a})}})}),define("app/hourlyPlans/pages/HourlyPlanListPage",["app/i18n","app/user","app/core/util/bindLoadingMessage","app/core/util/pageActions","app/core/View","../HourlyPlanCollection","../views/HourlyPlanListView","app/fte/views/FteEntryFilterView","app/core/templates/listPage"],function(e,t,n,r,i,o,a,s,u){return i.extend({template:u,layoutName:"page",pageId:"hourlyPlanList",breadcrumbs:[e.bound("hourlyPlans","BREADCRUMBS:browse")],actions:function(n){return[{label:e.bound("hourlyPlans","PAGE_ACTION:add"),href:"#hourlyPlans;add",icon:"plus",privileges:function(){return t.isAllowedTo("HOURLY_PLANS:MANAGE","PROD_DATA:MANAGE")}},r.export(n,this,this.collection)]},initialize:function(){this.defineModels(),this.defineViews(),this.setView(".filter-container",this.filterView),this.setView(".list-container",this.listView)},defineModels:function(){this.collection=n(new o(null,{rqlQuery:this.options.rql}),this)},defineViews:function(){this.filterView=new s({model:{rqlQuery:this.collection.rqlQuery},divisionOnly:!0,divisionFilter:function(e){return"prod"===e.get("type")}}),this.listView=new a({collection:this.collection}),this.listenTo(this.filterView,"filterChanged",this.refreshList)},load:function(e){return e(this.collection.fetch({reset:!0}))},refreshList:function(e){this.collection.rqlQuery=e,this.listView.refreshCollectionNow();var t=e.toString();this.broker.publish("router.navigate",{url:this.collection.genClientUrl()+"?"+t,trigger:!1,replace:!0})}})}),define("app/hourlyPlans/templates/addForm",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<form class="panel panel-primary">\n  <div class="panel-heading">\n    ',t("hourlyPlans","addForm:panel:title"),'\n  </div>\n  <div class="panel-body">\n    <div class="form-group orgUnitDropdowns-container"></div>\n    <div class="form-group">\n      <label for="',idPrefix,'-date" class="control-label">',t("hourlyPlans","property:date"),'</label>\n      <input id="',idPrefix,'-date" class="form-control" type="date" value="',date,'" max="',date,'" min="2013-12-01" required>\n    </div>\n  </div>\n  <div class="panel-footer">\n    <button class="btn btn-primary">\n      <i class="fa fa-plus"></i>\n      <span>',t("hourlyPlans","addForm:submit"),"</span>\n    </button>\n  </div>\n</form>\n")}();return buf.join("")}}),define("app/hourlyPlans/views/HourlyPlanAddFormView",["app/i18n","app/time","app/viewport","app/user","app/data/divisions","app/data/views/OrgUnitDropdownsView","app/core/Model","app/core/View","app/core/util/getShiftStartInfo","app/hourlyPlans/templates/addForm"],function(e,t,n,r,i,o,a,s,u,c){var l=o.ORG_UNIT;return s.extend({template:c,events:{submit:"submitForm"},initialize:function(){this.readonlyDivision=!1,this.$submit=null,this.oudView=new o({orgUnit:l.DIVISION,divisionFilter:function(e){return"prod"===e.get("type")},allowClear:!0,noGrid:!0}),this.setView(".orgUnitDropdowns-container",this.oudView)},destroy:function(){null!==this.$submit&&(this.$submit.remove(),this.$submit=null)},serialize:function(){return{idPrefix:this.idPrefix,date:u(new Date).moment.format("YYYY-MM-DD")}},afterRender:function(){var e=this,t=r.getDivision();this.$submit=this.$(".btn-primary").attr("disabled",!0),this.listenToOnce(this.oudView,"afterRender",function(){e.oudView.$id("division").on("change",function(t){e.$submit.attr("disabled",""===t.val||null===t.val)});var n=null,i=null;null!==t&&(i=l.DIVISION,n=new a({division:t.id})),e.oudView.selectValue(n,i),e.readonlyDivision=!r.isAllowedTo("HOURLY_PLANS:ALL")&&t,e.oudView.$id("division").select2("readonly",e.readonlyDivision),e.readonlyDivision?e.$submit.focus():e.oudView.$id("division").select2("focus")})},submitForm:function(t){if(t.preventDefault(),!this.socket.isConnected())return n.msg.show({type:"error",time:5e3,text:e("hourlyPlans","addForm:msg:offline")});var r=this,i=this.oudView.$id("division"),o=this.$submit.find("i").removeClass("fa-edit").addClass("fa-spinner fa-spin");i.select2("readonly",!0),this.$submit.attr("disabled",!0);var a={division:i.select2("val"),date:new Date(this.$id("date").val()+" 00:00:00"),shift:1};this.socket.emit("hourlyPlans.findOrCreate",a,function(t,a){return a&&r.model.set("_id",a),t?"AUTH"===t.message&&a?r.trigger("uneditable",r.model):(o.removeClass("fa-spinner fa-spin").addClass("fa-edit"),i.select2("readonly",r.readonlyDivision),r.$submit.attr("disabled",!1).focus(),n.msg.show({type:"error",time:5e3,text:e("hourlyPlans","addForm:msg:failure",{error:t.message})})):void r.trigger("editable",r.model)})}})}),define("app/hourlyPlans/pages/HourlyPlanAddFormPage",["app/i18n","app/core/View","../HourlyPlan","../views/HourlyPlanAddFormView"],function(e,t,n,r){return t.extend({layoutName:"page",pageId:"hourlyPlanAddForm",breadcrumbs:function(){return[{label:e.bound("hourlyPlans","BREADCRUMBS:browse"),href:this.model.genClientUrl("base")},e.bound("hourlyPlans","BREADCRUMBS:addForm")]},initialize:function(){this.model=new n,this.view=new r({model:this.model}),this.listenTo(this.view,"editable",function(e){this.broker.publish("router.navigate",{url:e.genClientUrl("edit"),trigger:!0})}),this.listenTo(this.view,"uneditable",function(e){this.broker.publish("router.navigate",{url:e.genClientUrl(),trigger:!0})})}})}),define("app/hourlyPlans/templates/entry",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div>\n  <div class="well">\n    <div class="fte-property">\n      <span class="fte-property-name">',t("core","ORG_UNIT:division"),'</span>\n      <span class="fte-property-value">',division,'</span>\n    </div>\n    <div class="fte-property">\n      <span class="fte-property-name">',t("hourlyPlans","property:date"),'</span>\n      <span class="fte-property-value">',date,'</span>\n    </div>\n    <div class="fte-property">\n      <span class="fte-property-name">',t("hourlyPlans","property:shift"),'</span>\n      <span class="fte-property-value">',shift,'</span>\n    </div>\n  </div>\n  <div class="panel panel-primary">\n    <div class="panel-heading">',t("hourlyPlans","panel:title"+(editable?":editable":"")),"</div>\n    "),editable&&buf.push('\n    <div class="message message-inline message-info">',t("hourlyPlans","panel:info"),"</div>\n    "),buf.push('\n    <table class="table table-bordered table-condensed table-hover hourlyPlan">\n      <thead>\n      <tr>\n        <th>',t("hourlyPlans","column:flow"),'\n        <th class="hourlyPlan-column-noPlan even">',t("hourlyPlans","column:noPlan"),'\n        <th class="hourlyPlan-column-level">',t("hourlyPlans","column:level"),"\n        "),[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,0,1,2,3,4,5].forEach(function(e,t){buf.push('\n        <th class="hourlyPlan-column-',t," ",t%2?"":"even",'">\n          <span>',10>e?"0":"","",e,"<!--:00-",23===e?"00":(10>e+1?"0":"")+(e+1),":00//--></span>\n        ")}),buf.push("\n      <tbody>\n      "),flows.forEach(function(e,t){buf.push("\n      <tr>\n        <td>",escape(e.name),'\n        <td class="even '),editable&&buf.push("hourlyPlan-noPlan-container"),buf.push('" data-column="noPlan">\n          '),editable?buf.push('\n          <input class="hourlyPlan-noPlan" type="checkbox" data-flow="',t,'" ',e.noPlan?"checked":"",">\n          "):buf.push('\n          <i class="fa fa-',e.noPlan?"check":"times",'"></i>\n          '),buf.push('\n        <td data-column="level">\n          '),editable?buf.push('\n          <input\n            class="form-control hourlyPlan-count"\n            name="level"\n            type="text"\n            min="0"\n            max="9999"\n            value="',e.level,'"\n            data-value="',e.level,'"\n            data-flow="',t,'"\n            ',e.noPlan?"disabled":"",">\n          "):buf.push("\n          ",e.level,"\n          "),buf.push("\n        "),e.hours.forEach(function(n,r){buf.push('\n        <td class="hourlyPlan-cell-count ',r%2?"":"even",'" data-column="',r,'">\n          '),editable?buf.push('\n          <input\n            class="form-control hourlyPlan-count"\n            name="hour"\n            type="text"\n            min="0"\n            max="9999"\n            value="',n,'"\n            data-value="',n,'"\n            data-flow="',t,'"\n            data-hour="',r,'"\n            ',e.noPlan?"disabled":"",">\n          "):buf.push("\n          ",n,"\n          "),buf.push("\n        ")}),buf.push("\n      ")}),buf.push("\n    </table>\n  </div>\n</div>\n")}();return buf.join("")}}),define("app/hourlyPlans/views/HourlyPlanEditFormView",["underscore","app/user","app/core/View","app/core/util/onModelDeleted","app/hourlyPlans/templates/entry"],function(e,t,n,r,i){return n.extend({template:i,events:{"change .hourlyPlan-count":"updateCount","keyup .hourlyPlan-count":"updateCount","change .hourlyPlan-noPlan":"updatePlan","click .hourlyPlan-noPlan-container":function(e){e.target.classList.contains("hourlyPlan-noPlan-container")&&this.$(e.target).find(".hourlyPlan-noPlan").click()},"focus .hourlyPlan-count, .hourlyPlan-noPlan":function(e){this.focused=[e.target.parentNode,e.target.parentNode.parentNode.children[0],this.el.querySelector(".hourlyPlan-column-"+e.target.parentNode.dataset.column)],this.$(this.focused).addClass("is-focused")},"blur .hourlyPlan-count, .hourlyPlan-noPlan":function(){this.$(this.focused).removeClass("is-focused")}},remoteTopics:function(){var e={};return e["hourlyPlans.updated."+this.model.id]="onRemoteEdit",e["hourlyPlans.deleted"]="onModelDeleted",e},initialize:function(){this.focused=[]},destroy:function(){this.focused=null},afterRender:function(){this.listenToOnce(this.model,"change",this.render),this.focusFirstEnabledInput()},serialize:function(){return e.extend(this.model.serialize(),{editable:!0})},focusNextInput:function(e){var t=e.closest("td").next("td");if(t.length)return t.find("input").select();var n=e.closest("tr").next();return n.length?void this.focusNextEnabledInput(n):this.focusFirstEnabledInput()},focusFirstEnabledInput:function(){var e=this.el.querySelector(".hourlyPlan-noPlan:not(:checked)");e&&this.$(e).closest("tr").find(".hourlyPlan-count").first().select()},focusNextEnabledInput:function(e){return e.length?e.find(".hourlyPlan-noPlan:checked").length?this.focusNextEnabledInput(e.next()):void e.find(".hourlyPlan-count").first().select():this.focusFirstEnabledInput()},toggleCountsInRow:function(e,t){var n=this.$(this.el.ownerDocument.activeElement).closest("tr"),r=this.$(".hourlyPlan > tbody > :last-child"),i=e.closest("tr"),o=i.find(".hourlyPlan-count").attr("disabled",e[0].checked);return e[0].checked?(o.val("0").attr("data-value","0"),t?i[0]===n[0]?i[0]===r[0]?this.focusFirstEnabledInput():this.focusNextEnabledInput(i):void 0:i[0]===r[0]?this.focusFirstEnabledInput():this.focusNextEnabledInput(i)):void(t||i.find(".hourlyPlan-count").first().select())},updatePlan:function(e){var t={type:"plan",socketId:this.socket.getId(),_id:this.model.id,flowIndex:parseInt(e.target.getAttribute("data-flow"),10),newValue:e.target.checked},n=this.$(e.target),r=this;this.toggleCountsInRow(n),this.socket.emit("hourlyPlans.updatePlan",t,function(t){t&&(e.target.checked=!e.target.checked,r.toggleCountsInRow(n),r.trigger("remoteError",t))})},updateCount:function(e){if(13===e.which)return this.focusNextInput(this.$(e.target));var t=parseInt(e.target.getAttribute("data-value"),10)||0,n=parseInt(e.target.value,10)||0;if(t!==n){var r=e.target.getAttribute("data-flow")+":"+e.target.getAttribute("data-hour")+":"+e.target.getAttribute("name");this.timers[r]&&clearTimeout(this.timers[r]),this.timers[r]=setTimeout(this.doUpdateCount.bind(this),250,e.target,r,t,n)}},doUpdateCount:function(e,t,n,r){delete this.timers[t];var i=e.getAttribute("data-remote"),o={type:"count",socketId:this.socket.getId(),_id:this.model.id,newValue:r,flowIndex:parseInt(e.getAttribute("data-flow"),10)};"hour"===e.name&&(o.hourIndex=parseInt(e.getAttribute("data-hour"),10)),e.setAttribute("data-value",o.newValue),e.setAttribute("data-remote","false");var a=this;this.socket.emit("hourlyPlans.updateCount",o,function(t){t&&("true"!==e.getAttribute("data-remote")&&(e.value=n,e.setAttribute("data-value",n),e.setAttribute("data-remote",i)),a.trigger("remoteError",t))})},onRemoteEdit:function(e){if(e.socketId!==this.socket.getId())switch(e.type){case"plan":return this.handlePlanChange(e);case"count":return this.handleCountChange(e)}},handlePlanChange:function(e){var t='.hourlyPlan-noPlan[data-flow="'+e.flowIndex+'"]',n=this.$(t);n.length&&(n.prop("checked",e.newValue),this.toggleCountsInRow(n,!0))},handleCountChange:function(e){var t=".hourlyPlan-count[data-flow="+e.flowIndex+"]";t+="number"==typeof e.hourIndex?"[data-hour="+e.hourIndex+"]":"[name=level]";var n=this.$(t);n.length&&(n.val(e.newValue),n.attr({"data-value":e.newValue,"data-remote":"true"}))},onModelDeleted:function(e){r(this.broker,this.model,e)}})}),define("app/hourlyPlans/pages/HourlyPlanEditFormPage",["app/i18n","app/core/util/bindLoadingMessage","app/core/View","../HourlyPlan","../views/HourlyPlanEditFormView"],function(e,t,n,r,i){return n.extend({layoutName:"page",pageId:"hourlyPlanEditForm",breadcrumbs:function(){return[{label:e.bound("hourlyPlans","BREADCRUMBS:browse"),href:this.model.genClientUrl("base")},{label:this.model.getLabel(),href:this.model.genClientUrl()},e.bound("hourlyPlans","BREADCRUMBS:editForm")]},initialize:function(){this.model=t(new r({_id:this.options.modelId}),this),this.view=new i({model:this.model}),this.listenTo(this.view,"remoteError",function(e){"AUTH"===e.message&&this.broker.publish("router.navigate",{url:this.model.genClientUrl(),trigger:!0,replace:!0})})},load:function(e){return e(this.model.fetch())}})}),define("app/hourlyPlans/views/HourlyPlanDetailsView",["underscore","app/core/View","app/core/util/onModelDeleted","app/hourlyPlans/templates/entry"],function(e,t,n,r){return t.extend({template:r,remoteTopics:function(){var e={};return e["hourlyPlans.updated."+this.model.id]=this.model.handleUpdateMessage.bind(this.model),e["hourlyPlans.deleted"]=this.onModelDeleted.bind(this),e},serialize:function(){return e.extend(this.model.serialize(),{editable:!1})},beforeRender:function(){this.stopListening(this.model,"change",this.render)},afterRender:function(){this.listenToOnce(this.model,"change",this.render)},onModelDeleted:function(e){n(this.broker,this.model,e)}})}),define("app/hourlyPlans/pages/HourlyPlanDetailsPage",["app/i18n","app/user","app/core/util/bindLoadingMessage","app/core/util/pageActions","app/core/View","../HourlyPlan","../views/HourlyPlanDetailsView"],function(e,t,n,r,i,o,a){return i.extend({layoutName:"page",pageId:"hourlyPlanDetails",breadcrumbs:function(){return[{label:e.bound("hourlyPlans","BREADCRUMBS:browse"),href:this.model.genClientUrl("base")},this.model.getLabel()]},actions:function(){var n=[{label:e.bound("hourlyPlans","PAGE_ACTION:print"),icon:"print",href:this.model.genClientUrl("print")}];return this.model.isEditable(t)&&n.push(r.edit(this.model),r.delete(this.model)),n},initialize:function(){this.model=n(new o({_id:this.options.modelId}),this),this.view=new a({model:this.model})},load:function(e){return e(this.model.fetch())}})}),define("app/hourlyPlans/templates/printableList",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<table class="table table-bordered table-condensed table-hover hourlyPlan">\n  <thead>\n  <tr>\n    <th>',t("hourlyPlans","column:flow"),"\n    <th>",t("hourlyPlans","column:noPlan"),"\n    <th>",t("hourlyPlans","column:level"),"\n    "),[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,0,1,2,3,4,5].forEach(function(e){buf.push("\n    <th>",10>e?"0":"","",e,"\n    ")}),buf.push("\n    <tbody>\n    "),flows.forEach(function(e){buf.push("\n    <tr>\n      <td>",escape(e.name),'\n      <td><i class="fa fa-',e.noPlan?"check":"times",'"></i>\n      <td>',e.level,"\n      "),e.hours.forEach(function(e){buf.push("\n      <td>",e,"\n      ")}),buf.push("\n    ")}),buf.push("\n</table>\n")}();return buf.join("")}}),define("app/hourlyPlans/views/HourlyPlanDetailsPrintableView",["app/core/views/PrintableListView","app/hourlyPlans/templates/printableList"],function(e,t){return e.extend({template:t,serialize:function(){return this.model.serialize()},afterRender:function(){}})}),define("app/hourlyPlans/pages/HourlyPlanDetailsPrintablePage",["app/time","app/i18n","app/data/divisions","app/data/views/renderOrgUnitPath","app/core/util/bindLoadingMessage","app/core/View","../HourlyPlan","../views/HourlyPlanDetailsPrintableView"],function(e,t,n,r,i,o,a,s){return o.extend({layoutName:"print",pageId:"hourlyPlanDetailsPrintable",hdLeft:function(){var e=n.get(this.model.get("division"));return t("hourlyPlans","print:hdLeft",{division:e?r(e,!1,!1):"?"})},hdRight:function(){return t("hourlyPlans","print:hdRight",{date:e.format(this.model.get("date"),"YYYY-MM-DD"),shift:t("core","SHIFT:"+this.model.get("shift"))})},initialize:function(){this.model=i(new a({_id:this.options.modelId}),this),this.view=new s({model:this.model})},load:function(e){return e(this.model.fetch())}})}),define("app/nls/hourlyPlans",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Hourly plans"},"BREADCRUMBS:addForm":function(){return"Choosing"},"BREADCRUMBS:editForm":function(){return"Planning"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the hourly plans :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the hourly plan :("},"MSG:DELETED":function(e){return"Hourly plan <em>"+t.v(e,"label")+"</em> was deleted."},"PAGE_ACTION:print":function(){return"Show printable version"},"PAGE_ACTION:add":function(){return"Plan"},"PAGE_ACTION:edit":function(){return"Edit hourly plan"},"PAGE_ACTION:delete":function(){return"Delete hourly plan"},"PAGE_ACTION:export":function(){return"Export hourly plans"},"FILTER:DATE":function(){return"Date:"},"FILTER:LIMIT":function(){return"Limit:"},"FILTER:SHIFT":function(){return"Shift:"},"FILTER:BUTTON":function(){return"Filter hourly plans"},"panel:title":function(){return"Hourly plan"},"panel:title:editable":function(){return"Hourly plan edit form"},"panel:info":function(){return"All changes are saved on-the-fly. Planned quantities will be divided among the working Production lines one minute after the last change!"},"column:flow":function(){return"Production flow"},"column:noPlan":function(){return"No<br>plan?"},"column:level":function(){return"Level"},"property:shift":function(){return"Shift"},"property:date":function(){return"Date"},"print:hdLeft":function(e){return"Hourly plan for "+t.v(e,"division")},"print:hdRight":function(e){return t.v(e,"date")+", "+t.v(e,"shift")+" shift"},"addForm:panel:title":function(){return"Hourly plan find/create form"},"addForm:submit":function(){return"Plan"},"addForm:msg:offline":function(){return"Cannot plan: no connection to the server :("},"addForm:msg:failure":function(e){return"Failed to find/create the hourly plan for editing: "+t.s(e,"error",{AUTH:"no privileges!",INPUT:"invalid input data!",other:t.v(e,"error")})},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Hourly plan deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete hourly plan"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen hourly plan?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Are you sure you want to delete the <em>"+t.v(e,"label")+"</em> hourly plan?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the hourly plan :-("}},pl:!0}}),define("app/nls/pl/hourlyPlans",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Plany godzinowe"},"BREADCRUMBS:addForm":function(){return"Wybieranie planu"},"BREADCRUMBS:editForm":function(){return"Planowanie"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie plan√≥w godzinowych nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie planu godzinowego nie powiod≈Ço siƒô :("},"MSG:DELETED":function(e){return"Plan godzinowy <em>"+t.v(e,"label")+"</em> zosta≈Ç usuniƒôty."},"PAGE_ACTION:print":function(){return"Poka≈º wersjƒô do druku"},"PAGE_ACTION:add":function(){return"Planuj"},"PAGE_ACTION:edit":function(){return"Edytuj plan"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ plan"},"PAGE_ACTION:export":function(){return"Eksportuj plany godzinowe"},"FILTER:DATE":function(){return"Data:"},"FILTER:LIMIT":function(){return"Limit:"},"FILTER:SHIFT":function(){return"Zmiana:"},"FILTER:BUTTON":function(){return"Filtruj plany"},"panel:title":function(){return"Plan godzinowy"},"panel:title:editable":function(){return"Formularz edycji planu godzinowego"},"panel:info":function(){return"Wszystkie zmiany w formularzu zapisywane sƒÖ na bie≈ºƒÖco. Planowane ilo≈õci rozdzielone zostanƒÖ dla pracujƒÖcych Linii produkcyjnych minutƒô po ostatniej zmianie!"},"column:flow":function(){return"Przep≈Çyw"},"column:noPlan":function(){return"Brak<br>planu?"},"column:level":function(){return"Poziom"},"property:shift":function(){return"Zmiana:"},"property:date":function(){return"Data:"},"print:hdLeft":function(e){return"Plan godzinowy dla "+t.v(e,"division")},"print:hdRight":function(e){return t.v(e,"date")+", "+t.v(e,"shift")+" zmiana"},"addForm:panel:title":function(){return"Formularz wyszukiwania/tworzenia planu godzinowego"},"addForm:submit":function(){return"Planuj"},"addForm:msg:offline":function(){return"Nie mo≈ºna planowaƒá: brak po≈ÇƒÖczenia z serwerem :("},"addForm:msg:failure":function(e){return"Nie uda≈Ço siƒô znale≈∫ƒá/utworzyƒá wpisu do edycji: "+t.s(e,"error",{AUTH:"brak uprawnie≈Ñ!",INPUT:"nieprawid≈Çowe dane wej≈õciowe!",other:t.v(e,"error")})},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia planu godzinowego"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ plan godzinowy"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany plan godzinowy?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá plan godzinowy <em>"+t.v(e,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá planu godzinowego :-("}}}),define("app/hourlyPlans/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","./HourlyPlan","./pages/HourlyPlanListPage","./pages/HourlyPlanAddFormPage","./pages/HourlyPlanEditFormPage","./pages/HourlyPlanDetailsPage","./pages/HourlyPlanDetailsPrintablePage","i18n!app/nls/hourlyPlans"],function(e,t,n,r,i,o,a,s,u,c){var l=n.auth("HOURLY_PLANS:VIEW"),d=n.auth("HOURLY_PLANS:MANAGE","PROD_DATA:MANAGE");e.map("/hourlyPlans",l,function(e){t.showPage(new o({rql:e.rql}))}),e.map("/hourlyPlans;add",d,function(){t.showPage(new a)}),e.map("/hourlyPlans/:id",l,function(e){t.showPage(new u({modelId:e.params.id}))}),e.map("/hourlyPlans/:id;edit",d,function(e){t.showPage(new s({modelId:e.params.id}))}),e.map("/hourlyPlans/:id;print",l,function(e){t.showPage(new c({modelId:e.params.id}))}),e.map("/hourlyPlans/:id;delete",d,r.bind(null,i))}),define("app/orders/Operation",["../core/Model"],function(e){var t=["machineSetupTime","machineTime","laborSetupTime","laborTime"];return e.extend({defaults:{no:null,workCenter:null,name:null,qty:null,unit:null,machineSetupTime:-1,machineTime:-1,laborSetupTime:-1,laborTime:-1},toJSON:function(){var n=e.prototype.toJSON.call(this);return n.qty&&(n.qtyUnit=n.qty,n.unit&&(n.qtyUnit+=" "+n.unit)),t.forEach(function(e){-1===n[e]&&(n[e]=null)}),n}})}),define("app/orders/OperationCollection",["../core/Collection","./Operation"],function(e,t){return e.extend({model:t})}),define("app/mechOrders/MechOrder",["../time","../core/Model","app/orders/OperationCollection"],function(e,t,n){return t.extend({urlRoot:"/mechOrders",clientUrlRoot:"#mechOrders",topicPrefix:"mechOrders",privilegePrefix:"ORDERS",nlsDomain:"mechOrders",labelAttribute:"_id",defaults:{name:null,mrp:null,materialNorm:null,operations:null,importTs:null},parse:function(e,r){return e=t.prototype.parse.call(this,e,r),e.operations=new n(e.operations),e},toJSON:function(){var n=t.prototype.toJSON.call(this);return n.importTs&&(n.importTs=e.format(n.importTs,"YYYY-MM-DD HH:mm:ss")),n.operations=null===n.operations?[]:n.operations.toJSON(),n}})}),define("app/mechOrders/MechOrderCollection",["../core/Collection","./MechOrder"],function(e,t){return e.extend({model:t,rqlQuery:function(e){return e.Query.fromObject({fields:{name:1,mrp:1,materialNorm:1},limit:15,sort:{_id:1}})}})}),define("app/mechOrders/views/MechOrderListView",["jquery","app/i18n","app/user","app/viewport","app/data/mrpControllers","app/core/views/ListView"],function(e,t,n,r,i,o){return o.extend({localTopics:{"mrpControllers.synced":"render"},remoteTopics:{"mechOrders.synced":"refreshCollection","mechOrders.edited":function(e){var t=e.model,n=this.collection.get(t._id);
n&&t.mrp!==n.get("mrp")&&(n.set("mrp",t.mrp),this.$(".list-item[data-id="+n.id+"] > td[data-id=mrp]").html(this.prepareMrpCell(t.mrp)))}},events:{"click .mechOrders-editMrp":"showMrpEditor"},columns:["_id","name","mrp","materialNorm"],serializeActions:function(){var e=this.collection;return function(t){return[o.actions.viewDetails(e.get(t._id))]}},serializeRows:function(){var e=this,t=n.isAllowedTo("ORDERS:MANAGE");return this.collection.map(function(n){var r=n.toJSON();return t&&(r.mrp=e.prepareMrpCell(r.mrp)),r})},prepareMrpCell:function(e){var n="";return e&&(n+="<span>"+e+"</span>"),n+=' <button class="btn btn-link mechOrders-editMrp">'+t("mechOrders","list:mrp:"+(e?"edit":"set"))+"</button>"},showMrpEditor:function(n){var r=this.$(n.target).closest("td"),o=this.collection.get(r.parent().attr("data-id")),a=this,s=e('<input type="text">');r.empty().append(s),s.select2({allowClear:!0,placeholder:t("mechOrders","list:mrp:placeholder"),data:i.map(function(e){return{id:e.id,text:e.getLabel()}})}),s.on("change",function(e){var t=e.val.length?e.val:null;return t===o.get("mrp")?r.html(a.prepareMrpCell(t)):(r.html('<i class="fa fa-spinner fa-spin"></i><span>'+t+"</span>"),a.updateMrp(o,t,r),void r.parent().next("tr").find(".mechOrders-editMrp").focus())}),s.select2("open")},updateMrp:function(e,n,i){var o=e.get("mrp"),a=Date.now(),s=this.promised(e.save("mrp",n,{patch:!0})),u=this;s.then(function(){u.delay(500,a,function(){i.html(u.prepareMrpCell(n))})}),s.fail(function(){e.set("mrp",o),i.html(u.prepareMrpCell(o)),r.msg.show({type:"error",time:3e3,text:t("mechOrders","list:mrp:failure",{nc12:e.id})})})},delay:function(e,t,n){var r=Date.now()-t;r>e?n():this.timers[Math.random()]=setTimeout(n,e-r)}})}),define("app/mechOrders/templates/filter",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<form class="well filter-form">\n  <div class="form-group">\n    <label for="',idPrefix,'-_id">',t("mechOrders","PROPERTY:_id"),'</label>\n    <input id="',idPrefix,'-_id" class="form-control mechOrders-filter-_id" name="_id" type="text" maxlength="12" placeholder="',t("mechOrders","filter:placeholder:_id"),'">\n  </div>\n  ',renderLimit(),'\n  <div class="form-group filter-actions">\n    <button type="submit" class="btn btn-default"><i class="fa fa-filter"></i><span>',escape(t("mechOrders","filter:submit")),"</span></button>\n  </div>\n</form>\n")}();return buf.join("")}}),define("app/mechOrders/views/MechOrderFilterView",["app/core/views/FilterView","app/mechOrders/templates/filter"],function(e,t){return e.extend({template:t,defaultFormData:{_id:""},termToForm:{_id:function(e,t,n){var r=t.args[1];n[e]="string"==typeof r?r.replace(/[^0-9a-zA-Z]/g,""):""}},serializeFormToQuery:function(e){this.serializeRegexTerm(e,"_id",12)}})}),define("app/mechOrders/templates/import",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<form class="mechOrders-import">\n  <div class="form-group">\n    <label for="',idPrefix,'-file">',t("mechOrders","import:file"),'</label>\n    <input id="',idPrefix,'-file" name="mechOrders" class="form-control" type="file" autofocus>\n  </div>\n  <div class="form-actions">\n    <button type="submit" class="btn btn-primary">',t("mechOrders","import:submit"),'</button>\n    <button type="button" class="cancel btn btn-link">',t("mechOrders","import:cancel"),"</button>\n  </div>\n</form>\n")}();return buf.join("")}}),define("app/mechOrders/views/MechOrderImportView",["app/i18n","app/viewport","app/core/View","app/mechOrders/templates/import"],function(e,t,n,r){return n.extend({template:r,events:{submit:"upload"},onDialogShown:function(e){this.closeDialog=e.closeDialog.bind(e)},closeDialog:function(){},upload:function(n){n.preventDefault();var r=this.$("[type=submit]").attr("disabled",!0),i=new FormData(this.el),o=this.ajax({type:"POST",url:"/mechOrders;import",data:i,processData:!1,contentType:!1}),a=this.closeDialog;o.then(function(){t.msg.show({type:"info",time:2500,text:e("mechOrders","import:msg:success")}),a()}),o.fail(function(){t.msg.show({type:"error",time:5e3,text:e("mechOrders","import:msg:failure")})}),o.always(function(){r.attr("disabled",!1)})}})}),define("app/mechOrders/pages/MechOrderListPage",["app/i18n","app/viewport","app/core/util/bindLoadingMessage","app/core/View","../MechOrderCollection","../views/MechOrderListView","../views/MechOrderFilterView","../views/MechOrderImportView","app/core/templates/listPage"],function(e,t,n,r,i,o,a,s,u){return r.extend({template:u,layoutName:"page",pageId:"mechOrderList",breadcrumbs:[e.bound("mechOrders","BREADCRUMBS:browse")],actions:[{label:e.bound("mechOrders","PAGE_ACTION:import"),icon:"refresh",privileges:"ORDERS:MANAGE",callback:function(){return t.showDialog(new s,e("mechOrders","import:title")),!1}}],initialize:function(){this.defineModels(),this.defineViews(),this.setView(".filter-container",this.filterView),this.setView(".list-container",this.listView)},defineModels:function(){this.collection=n(new i(null,{rqlQuery:this.options.rql}),this)},defineViews:function(){this.filterView=new a({model:{rqlQuery:this.collection.rqlQuery}}),this.listView=new o({collection:this.collection}),this.listenTo(this.filterView,"filterChanged",this.refreshList)},load:function(e){return e(this.collection.fetch({reset:!0}))},refreshList:function(e){this.collection.rqlQuery=e,this.listView.refreshCollectionNow(),this.broker.publish("router.navigate",{url:this.collection.genClientUrl()+"?"+e,trigger:!1,replace:!0})}})}),define("app/orders/templates/operationList",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="panel panel-default orders-operations">\n  <div class="panel-heading">',t("orders","PANEL:TITLE:operations"),"</div>\n  "),operations.length?(buf.push('\n  <table class="table table-condensed table-hover">\n    <thead>\n      <tr>\n        <th>',t("orders","PROPERTY:operations.no"),"\n        <th>",t("orders","PROPERTY:operations.workCenter"),"\n        <th>",t("orders","PROPERTY:operations.name"),"\n        <th>",t("orders","PROPERTY:operations.qty"),"\n        <th>",t("orders","PROPERTY:operations.machineSetupTime"),"\n        <th>",t("orders","PROPERTY:operations.laborSetupTime"),"\n        <th>",t("orders","PROPERTY:operations.machineTime"),"\n        <th>",t("orders","PROPERTY:operations.laborTime"),"\n      </tr>\n    </thead>\n    <tbody>\n      "),operations.forEach(function(e){buf.push('\n      <tr class="',e.no===highlighted?"info":"",'">\n        <td>',escape(e.no||"-"),"\n        <td>",escape(e.workCenter||"-"),"\n        <td>",escape(e.name||"-"),"\n        <td>",escape(e.qtyUnit||"-"),"\n        <td>",escape(e.machineSetupTime||"-"),"\n        <td>",escape(e.laborSetupTime||"-"),"\n        <td>",escape(e.machineTime||"-"),"\n        <td>",escape(e.laborTime||"-"),"\n      </tr>\n      ")}),buf.push("\n    </tbody>\n  </table>\n  ")):buf.push('\n  <div class="panel-body">\n    ',t("orders","OPERATIONS:NO_DATA"),"\n  </div>\n  "),buf.push("\n</div>\n")}();return buf.join("")}}),define("app/orders/views/OperationListView",["app/core/View","app/orders/templates/operationList"],function(e,t){function n(e,t){e[t]&&e[t].toLocaleString&&(e[t]=e[t].toLocaleString())}return e.extend({template:t,serialize:function(){return{operations:this.model.get("operations").toJSON().map(function(e){return n(e,"machineSetupTime"),n(e,"laborSetupTime"),n(e,"machineTime"),n(e,"laborTime"),e}).sort(function(e,t){return e.no-t.no}),highlighted:this.options.highlighted}},afterRender:function(){this.listenToOnce(this.model,"change:operations",this.render)}})}),define("app/mechOrders/templates/details",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="panel panel-',panelType,' mechOrders-details">\n  <div class="panel-heading">',panelTitle,'</div>\n  <div class="panel-details">\n    <div class="props first">\n      <div class="prop">\n        <div class="prop-name">',t("mechOrders","PROPERTY:_id"),'</div>\n        <div class="prop-value">',escape(model._id||model.nc12),'</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">',t("mechOrders","PROPERTY:name"),'</div>\n        <div class="prop-value">',escape(model.name||"-"),'</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">',t("mechOrders","PROPERTY:materialNorm"),'</div>\n        <div class="prop-value">',escape(model.materialNorm||"-"),'</div>\n      </div>\n      <div class="prop">\n        <div class="prop-name">',t("mechOrders","PROPERTY:mrp"),'</div>\n        <div class="prop-value">',escape(model.mrp||"-"),"</div>\n      </div>\n      "),model.importTs&&buf.push('\n      <div class="prop">\n        <div class="prop-name">',t("mechOrders","PROPERTY:importTs"),'</div>\n        <div class="prop-value">',escape(model.importTs),"</div>\n      </div>\n      "),buf.push("\n    </div>\n  </div>\n</div>\n")}();return buf.join("")}}),define("app/mechOrders/views/MechOrderDetailsView",["app/i18n","app/core/views/DetailsView","app/mechOrders/templates/details"],function(e,t,n){return t.extend({template:n,serialize:function(){return{model:this.model.toJSON(),panelType:this.options.panelType||"primary",panelTitle:this.options.panelTitle||e("mechOrders","PANEL:TITLE:details")}}})}),define("app/mechOrders/templates/detailsPage",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div>\n  <div class="mechOrders-details-container"></div>\n  <div class="mechOrders-operations-container"></div>\n</div>\n')}();return buf.join("")}}),define("app/mechOrders/pages/MechOrderDetailsPage",["app/core/util/bindLoadingMessage","app/core/pages/DetailsPage","../MechOrder","app/orders/views/OperationListView","app/mechOrders/views/MechOrderDetailsView","app/mechOrders/templates/detailsPage"],function(e,t,n,r,i,o){return t.extend({template:o,pageId:"mechOrderDetails",actions:[],initialize:function(){this.model=e(new n({_id:this.options.modelId}),this),this.detailsView=new i({model:this.model}),this.operationsView=new r({model:this.model}),this.setView(".mechOrders-details-container",this.detailsView),this.setView(".mechOrders-operations-container",this.operationsView)},load:function(e){return e(this.model.fetch())}})}),define("app/nls/mechOrders",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Mechanical orders"},"MSG:LOADING_FAILURE":function(){return"Failed to load the orders :("},"PAGE_ACTION:import":function(){return"Import orders"},"PANEL:TITLE:details":function(){return"Order's details"},"PANEL:TITLE:operations":function(){return"Order's operations"},"PROPERTY:_id":function(){return"12NC"},"PROPERTY:name":function(){return"Product name"},"PROPERTY:importTs":function(){return"Imported at"},"PROPERTY:mrp":function(){return"MRP Controller"},"PROPERTY:materialNorm":function(){return"Material norm [kg]"},"OPERATIONS:NO_DATA":function(){return"Order does not have any operations."},"filter:placeholder:_id":function(){return"Any 12NC"},"filter:submit":function(){return"Filter orders"},"import:title":function(){return"Import orders"},"import:file":function(){return"CSV file with the orders:"},"import:submit":function(){return"Import orders"},"import:cancel":function(){return"Cancel"},"import:msg:success":function(){return"Orders were imported successfully :)"},"import:msg:failure":function(){return"Failed to import the orders :("},"list:mrp:set":function(){return"(choose MRP Controller)"},"list:mrp:edit":function(){return"(change MRP Controller)"},"list:mrp:placeholder":function(){return"Choose MRP Controller..."},"list:mrp:failure":function(e){return"Failed to change the MRP Controller for the <em>"+t.v(e,"nc12")+"</em> order :("}},pl:!0}}),define("app/nls/pl/mechOrders",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Zlecenia dzia≈Çu mechanicznego"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie zlece≈Ñ nie powiod≈Ço siƒô :("},"PAGE_ACTION:import":function(){return"Importuj zlecenia"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy zlecenia"},"PANEL:TITLE:operations":function(){return"Lista operacji zlecenia"},"PROPERTY:_id":function(){return"12NC"},"PROPERTY:name":function(){return"Nazwa wyrobu"},"PROPERTY:importTs":function(){return"Czas zaimportowania"},"PROPERTY:mrp":function(){return"Kontroler MRP"},"PROPERTY:materialNorm":function(){return"Norma materia≈Çowa [kg]"},"OPERATIONS:NO_DATA":function(){return"Zlecenie nie ma zdefiniowanych ≈ºadnych operacji."},"filter:placeholder:_id":function(){return"Dowolny 12NC"},"filter:submit":function(){return"Filtruj zlecenia"},"import:title":function(){return"Importowanie zlece≈Ñ"},"import:file":function(){return"Plik CSV ze zleceniami:"},"import:submit":function(){return"Importuj zlecenia"},"import:cancel":function(){return"Anuluj"},"import:msg:success":function(){return"Importowanie zlece≈Ñ przebieg≈Ço pomy≈õlnie :)"},"import:msg:failure":function(){return"Nie uda≈Ço siƒô zaimportowaƒá zlece≈Ñ :("},"list:mrp:set":function(){return"(wybierz kontroler MRP)"},"list:mrp:edit":function(){return"(zmie≈Ñ kontroler MRP)"},"list:mrp:placeholder":function(){return"Wybierz kontroler MRP..."},"list:mrp:failure":function(e){return"Nie uda≈Ço siƒô zmieniƒá kontrolera MRP dla zlecenia <em>"+t.v(e,"nc12")+"</em> :("}}}),define("app/mechOrders/routes",["../router","../viewport","../user","./pages/MechOrderListPage","./pages/MechOrderDetailsPage","i18n!app/nls/mechOrders"],function(e,t,n,r,i){var o=n.auth("ORDERS:VIEW");e.map("/mechOrders",o,function(e){t.showPage(new r({rql:e.rql}))}),e.map("/mechOrders/:id",o,function(e){t.showPage(new i({modelId:e.params.id}))})}),define("app/nls/mrpControllers",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"MRP Controllers"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the MRP Controllers :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the MRP Controller :("},"MSG:DELETED":function(e){return"MRP Controller <em>"+t.v(e,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add MRP Controller"},"PAGE_ACTION:edit":function(){return"Edit MRP Controller"},"PAGE_ACTION:delete":function(){return"Delete MRP Controller"},"PANEL:TITLE:details":function(){return"MRP Controller's details"},"PANEL:TITLE:addForm":function(){return"Add MRP Controller form"},"PANEL:TITLE:editForm":function(){return"Edit MRP Controller form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:description":function(){return"Label"},"PROPERTY:division":function(){return"Division"},"PROPERTY:subdivision":function(){return"Subdivision"},"PROPERTY:deactivatedAt":function(){return"Deactivated at"},"PROPERTY:replacedBy":function(){return"Replaced by"},"FORM:ACTION:add":function(){return"Add MRP Controller"},"FORM:ACTION:edit":function(){return"Edit MRP Controller"},"FORM:ERROR:addFailure":function(){return"Failed to add the new MRP Controller :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the MRP Controller :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"MRP Controller deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete MRP Controller"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen MRP Controller?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Are you sure you want to delete the <em>"+t.v(e,"label")+"</em> MRP Controller?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the MRP Controller :-("}},pl:!0}}),define("app/nls/pl/mrpControllers",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Kontrolery MRP"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie kontroler√≥w MRP nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie kontrolera MRP nie powiod≈Ço siƒô :("},"MSG:DELETED":function(e){return"Kontroler MRP <em>"+t.v(e,"label")+"</em> zosta≈Ço usuniƒôte."},"PAGE_ACTION:add":function(){return"Dodaj kontroler MRP"},"PAGE_ACTION:edit":function(){return"Edytuj kontroler MRP"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ kontroler MRP"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy kontrolera MRP"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania kontrolera MRP"},"PANEL:TITLE:editForm":function(){return"Formularz edycji kontrolera MRP"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:description":function(){return"Opis"},"PROPERTY:division":function(){return"Wydzia≈Ç"},"PROPERTY:subdivision":function(){return"Dzia≈Ç"},"PROPERTY:deactivatedAt":function(){return"Data dezaktywacji"},"PROPERTY:replacedBy":function(){return"ZastƒÖpiony przez"},"FORM:ACTION:add":function(){return"Dodaj kontroler MRP"},"FORM:ACTION:edit":function(){return"Edytuj kontroler MRP"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá kontrolera MRP :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá kontrolera MRP :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia kontrolera MRP"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ kontroler MRP"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany kontroler MRP?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá kontroler MRP <em>"+t.v(e,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá kontrolera MRP :-("}}}),define("app/mrpControllers/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","../data/mrpControllers","./MrpController","i18n!app/nls/mrpControllers"],function(e,t,n,r,i,o){var a=n.auth("DICTIONARIES:VIEW"),s=n.auth("DICTIONARIES:MANAGE");e.map("/mrpControllers",a,function(){t.loadPage(["app/core/pages/ListPage","app/mrpControllers/views/MrpControllerListView"],function(e,t){return new e({ListView:t,collection:i})})}),e.map("/mrpControllers/:id",function(e){t.loadPage(["app/mrpControllers/pages/MrpControllerDetailsPage"],function(t){return new t({model:new o({_id:e.params.id})})})}),e.map("/mrpControllers;add",s,function(){t.loadPage(["app/core/pages/AddFormPage","app/mrpControllers/views/MrpControllerFormView"],function(e,t){return new e({FormView:t,model:new o})})}),e.map("/mrpControllers/:id;edit",s,function(e){t.loadPage(["app/core/pages/EditFormPage","app/mrpControllers/views/MrpControllerFormView"],function(t,n){return new t({FormView:n,model:new o({_id:e.params.id})})})}),e.map("/mrpControllers/:id;delete",s,r.bind(null,o))}),define("app/orders/Order",["../time","../core/Model","./OperationCollection"],function(e,t,n){return t.extend({urlRoot:"/orders",clientUrlRoot:"#orders",topicPrefix:"orders",privilegePrefix:"ORDERS",nlsDomain:"orders",labelAttribute:"_id",defaults:{nc12:null,name:null,mrp:null,qty:null,unit:null,startDate:null,finishDate:null,statuses:null,operations:null,createdAt:null,updatedAt:null},parse:function(e,r){return e=t.prototype.parse.call(this,e,r),e.operations=new n(e.operations),e},toJSON:function(){var n=t.prototype.toJSON.call(this);return n.startDate&&(n.startDateText=e.format(n.startDate,"LL")),n.finishDate&&(n.finishDateText=e.format(n.finishDate,"LL")),n.qty&&n.unit&&(n.qtyUnit=n.qty+" "+n.unit),n.createdAt&&(n.createdAtText=e.format(n.createdAt,"LLLL")),n.updatedAt&&(n.updatedAtText=e.format(n.updatedAt,"LLLL")),n.operations=null===n.operations?[]:n.operations.toJSON(),n}})}),define("app/orders/OrderCollection",["../core/Collection","./Order"],function(e,t){return e.extend({model:t,rqlQuery:function(e){var t=new Date;return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),e.Query.fromObject({fields:{nc12:1,name:1,mrp:1,qty:1,unit:1,startDate:1,finishDate:1,statuses:1},limit:15,sort:{startDate:-1,finishDate:-1},selector:{name:"and",args:[{name:"ge",args:["finishDate",t.getTime()]}]}})}})}),define("app/orderStatuses/OrderStatus",["../core/Model"],function(e){return e.extend({urlRoot:"/orderStatuses",clientUrlRoot:"#orderStatuses",topicPrefix:"orderStatuses",privilegePrefix:"DICTIONARIES",nlsDomain:"orderStatuses",labelAttribute:"_id",defaults:{label:null,color:"#999999"},toJSON:function(){var t=e.prototype.toJSON.call(this);return t.label||(t.label=t._id),t}})}),define("app/orderStatuses/OrderStatusCollection",["../core/Collection","./OrderStatus"],function(e,t){return e.extend({model:t,rqlQuery:"select(label,color)&sort(_id)",findAndFill:function(e){var n=this;return e.map(function(e){var r=n.get(e);return r||(r=new t({_id:e})),r.toJSON()})}})}),define("app/data/orderStatuses",["app/orderStatuses/OrderStatusCollection","./createStorage"],function(e,t){return t("ORDER_STATUSES","orderStatuses",e)}),define("app/orderStatuses/util/renderOrderStatusLabel",["app/core/templates/colorLabel"],function(e){return function(t){return e({className:"orderStatus",label:t._id,title:t.label,color:t.color})}}),define("app/orders/views/OrderListView",["app/i18n","app/user","app/core/views/ListView","app/data/orderStatuses","app/orderStatuses/util/renderOrderStatusLabel"],function(e,t,n,r,i){return n.extend({localTopics:{"orderStatuses.synced":"render"},remoteTopics:{"orders.synced":"refreshCollection","orders.added":"refreshCollection","orders.edited":"refreshCollection","orders.deleted":"onModelDeleted"},serializeColumns:function(){return[{id:"_id",label:e("orders","PROPERTY:_id")},{id:"nc12",label:e("orders","PROPERTY:nc12")},{id:"name",label:e("orders","PROPERTY:name")},{id:"mrp",label:e("orders","PROPERTY:mrp")},{id:"qtyUnit",label:e("orders","PROPERTY:qty")},{id:"startDateText",label:e("orders","PROPERTY:startDate")},{id:"finishDateText",label:e("orders","PROPERTY:finishDate")},{id:"statusLabels",label:e("orders","PROPERTY:statuses")}]},serializeActions:function(){var e=this.collection;return function(t){return[n.actions.viewDetails(e.get(t._id))]}},serializeRows:function(){return this.collection.toJSON().map(function(e){return e.statusLabels=r.findAndFill(e.statuses).map(i).join(""),e})}})}),define("app/orders/templates/filter",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<form class="well filter-form">\n  <div class="form-group">\n    <label for="',idPrefix,'-_id">',t("orders","PROPERTY:_id"),'</label>\n    <input id="',idPrefix,'-_id" class="form-control orders-filter-_id" name="_id" type="text" minlength="4" maxlength="10" placeholder="',t("orders","filter:placeholder:_id"),'">\n  </div>\n  <div class="form-group">\n    <label for="',idPrefix,'-nc12">',t("orders","PROPERTY:nc12"),'</label>\n    <input id="',idPrefix,'-nc12" class="form-control orders-filter-nc12" name="nc12" type="text" minlength="3" maxlength="12" placeholder="',t("orders","filter:placeholder:nc12"),'">\n  </div>\n  <div class="form-group form-group-dateRange">\n    <div>\n      <label class="radio-inline">\n        <input name="date" type="radio" value="startDate">\n        ',t("orders","PROPERTY:startDate"),'\n      </label><label class="radio-inline">\n        <input name="date" type="radio" value="finishDate">\n        ',t("orders","PROPERTY:finishDate"),'\n      </label>\n    </div>\n    <div>\n      <label for="',idPrefix,'-from">',t("core","filter:date:from"),'</label>\n      <input id="',idPrefix,'-from" class="form-control" name="from" type="date" placeholder="YYYY-MM-DD">\n      <label for="',idPrefix,'-to" class="control-label">',t("core","filter:date:to"),'</label>\n      <input id="',idPrefix,'-to" class="form-control" name="to" type="date" placeholder="YYYY-MM-DD">\n    </div>\n  </div>\n  ',renderLimit(),'\n  <div class="form-group filter-actions">\n    <button type="submit" class="btn btn-default"><i class="fa fa-filter"></i><span>',escape(t("orders","filter:submit")),"</span></button>\n  </div>\n</form>\n")}();return buf.join("")}}),define("app/orders/views/OrderFilterView",["underscore","app/core/util/fixTimeRange","app/core/views/FilterView","app/orders/templates/filter"],function(e,t,n,r){return n.extend({template:r,events:e.extend({},n.prototype.events,{"change #-from":function(e){var t=this.$id("to");"true"!==t.attr("data-changed")&&t.val(e.target.value)},"change #-to":function(e){e.target.setAttribute("data-changed","true")}}),defaultFormData:{_id:"",nc12:"",date:"finishDate",from:"",to:""},termToForm:{startDate:function(e,n,r){r.date=e,t.toFormData(r,n,"date")},_id:function(e,t,n){var r=t.args[1];n[e]="string"==typeof r?r.replace(/[^0-9]/g,""):"-"},nc12:"_id",finishDate:"startDate"},serializeFormToQuery:function(e){var n=t.fromView(this),r=this.$("input[name=date]:checked").val();this.serializeRegexTerm(e,"_id",9),this.serializeRegexTerm(e,"nc12",12),n.from&&e.push({name:"ge",args:[r,n.from]}),n.to&&e.push({name:"le",args:[r,n.to]})}})}),define("app/orders/pages/OrderListPage",["app/i18n","app/core/util/bindLoadingMessage","app/core/View","../OrderCollection","../views/OrderListView","../views/OrderFilterView","app/core/templates/listPage"],function(e,t,n,r,i,o,a){return n.extend({template:a,layoutName:"page",pageId:"orderList",breadcrumbs:[e.bound("orders","BREADCRUMBS:browse")],initialize:function(){this.defineModels(),this.defineViews(),this.setView(".filter-container",this.filterView),this.setView(".list-container",this.listView)},defineModels:function(){this.collection=t(new r(null,{rqlQuery:this.options.rql}),this)},defineViews:function(){this.filterView=new o({model:{rqlQuery:this.collection.rqlQuery}}),this.listView=new i({collection:this.collection}),this.listenTo(this.filterView,"filterChanged",this.refreshList)},load:function(e){return e(this.collection.fetch({reset:!0}))},refreshList:function(e){this.collection.rqlQuery=e,this.listView.refreshCollectionNow(),this.broker.publish("router.navigate",{url:this.collection.genClientUrl()+"?"+e,trigger:!1,replace:!0})}})}),define("app/orders/templates/details",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="panel panel-',panelType,' orders-details">\n  <div class="panel-heading">',panelTitle,'</div>\n  <div class="panel-details row">\n    <div class="col-md-4">\n      <div class="props first">\n        <div class="prop">\n          <div class="prop-name">',t("orders","PROPERTY:_id"),'</div>\n          <div class="prop-value">',escape(model._id),'</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">',t("orders","PROPERTY:nc12"),'</div>\n          <div class="prop-value">',escape(model.nc12||"-"),'</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">',t("orders","PROPERTY:name"),'</div>\n          <div class="prop-value">',escape(model.name||"-"),'</div>\n        </div>\n      </div>\n    </div>\n    <div class="col-md-4">\n      <div class="props">\n        <div class="prop">\n          <div class="prop-name">',t("orders","PROPERTY:mrp"),'</div>\n          <div class="prop-value">',escape(model.mrp||"-"),'</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">',t("orders","PROPERTY:qty"),'</div>\n          <div class="prop-value">',escape(model.qtyUnit||"-"),'</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">',t("orders","PROPERTY:statuses"),'</div>\n          <div class="prop-value">',model.statusLabels,'</div>\n        </div>\n      </div>\n    </div>\n    <div class="col-md-4">\n      <div class="props">\n        <div class="prop">\n          <div class="prop-name">',t("orders","PROPERTY:startDate"),'</div>\n          <div class="prop-value">',escape(model.startDateText||"-"),'</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">',t("orders","PROPERTY:finishDate"),'</div>\n          <div class="prop-value">',escape(model.finishDateText||"-"),'</div>\n        </div>\n        <div class="prop">\n          <div class="prop-name">',t("orders","PROPERTY:createdAt"),'</div>\n          <div class="prop-value">',escape(model.createdAtText||"-"),"</div>\n        </div>\n        "),model.updatedAtText&&buf.push('\n        <div class="prop">\n          <div class="prop-name">',t("orders","PROPERTY:updatedAt"),'</div>\n          <div class="prop-value">',escape(model.updatedAtText),"</div>\n        </div>\n        "),buf.push("\n      </div>\n    </div>\n  </div>\n</div>\n")}();return buf.join("")}}),define("app/orders/views/OrderDetailsView",["app/i18n","app/core/views/DetailsView","app/data/orderStatuses","app/orders/templates/details","app/orderStatuses/util/renderOrderStatusLabel"],function(e,t,n,r,i){return t.extend({template:r,localTopics:{"orderStatuses.synced":"render"},serialize:function(){var t=this.model.toJSON();
return t.statusLabels=n.findAndFill(t.statuses).map(i).join(""),{model:t,panelType:this.options.panelType||"primary",panelTitle:this.options.panelTitle||e("orders","PANEL:TITLE:details")}}})}),define("app/orders/templates/changes",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="panel panel-default orders-changes">\n  <div class="panel-heading">\n    ',t("orders","PANEL:TITLE:changes"),"\n  </div>\n  "),changes.length?(buf.push('\n  <table class="table table-condensed">\n    <thead>\n      <tr>\n        <th>',t("orders","CHANGES:time"),"\n        <th>",t("orders","CHANGES:property"),"\n        <th>",t("orders","CHANGES:oldValue"),"\n        <th>",t("orders","CHANGES:newValue"),"\n      </tr>\n    </thead>\n    "),changes.length>5&&buf.push('\n    <tfoot>\n      <tr>\n        <td class="orders-changes-more" colspan="4">Poka≈º starsze zmiany...</td>\n      </tr>\n    </tfoot>\n    '),buf.push("\n    "),changes.forEach(function(e,n){buf.push("\n    "),n%5===0&&buf.push('\n    <tbody class="orders-changes-page ',n?"hidden":"",'">\n    '),buf.push('\n      <tr>\n        <td rowspan="',e.values.length,'">',e.timeText,'</td>\n        <td class="orders-changes-property">',escape(t("orders","PROPERTY:"+e.values[0].property)),"</td>\n        <td>",renderValueChange(e.values[0],n,"oldValue"),"</td>\n        <td>",renderValueChange(e.values[0],n,"newValue"),"</td>\n      </tr>\n      "),e.values.forEach(function(e,r){buf.push("\n      "),0!==r&&buf.push('\n      <tr>\n        <td class="orders-changes-property">',escape(t("orders","PROPERTY:"+e.property)),"</td>\n        <td>",renderValueChange(e,n,"oldValue"),"</td>\n        <td>",renderValueChange(e,n,"newValue"),"</td>\n      </tr>\n      ")}),buf.push("\n    ")}),buf.push("\n  </table>\n  ")):buf.push('\n  <div class="panel-body">\n    ',t("orders","CHANGES:NO_DATA"),"\n  </div>\n  "),buf.push("\n</div>\n")}();return buf.join("")}}),define("app/orders/views/OrderChangesView",["underscore","app/time","app/i18n","app/viewport","app/data/orderStatuses","app/core/View","./OperationListView","../Order","../OperationCollection","app/orders/templates/changes","app/orderStatuses/util/renderOrderStatusLabel"],function(e,t,n,r,i,o,a,s,u,c,l){return o.extend({template:c,events:{"click .orders-changes-more":"showMoreChanges","click .orders-changes-operations":"toggleOperations"},initialize:function(){this.$lastToggle=null,this.operationListView=null},destroy:function(){null!==this.$lastToggle&&this.$lastToggle.click()},serialize:function(){return{changes:(this.model.get("changes")||[]).reverse().map(function(e){return e.timeText=t.format(e.time,"YYYY-MM-DD HH:mm:ss"),e.values=Object.keys(e.oldValues||{}).map(function(t){return{property:t,oldValue:e.oldValues[t],newValue:e.newValues[t]}}),e}).filter(function(e){return e.values.length}),renderValueChange:this.renderValueChange}},afterRender:function(){this.listenToOnce(this.model,"change:changes",this.render)},renderValueChange:function(r,o,a){var s=r[a];if(null==s||0===s.length)return"-";switch(r.property){case"operations":return'<a class="orders-changes-operations" data-i="'+o+'" data-property="'+a+'">'+n("orders","CHANGES:operations",{count:s.length})+"</a>";case"statuses":return i.findAndFill(s).map(l).join("");case"startDate":case"finishDate":return t.format(s,"LL");default:return e.escape(String(s))}},showMoreChanges:function(){var e=this.$(".orders-changes-page.hidden");e.first().removeClass("hidden"),1===e.length&&this.$(".orders-changes-more").hide()},toggleOperations:function(e){if(null!==this.$lastToggle){if(this.$lastToggle[0]===e.target)return this.$lastToggle=null,void this.operationListView.remove();this.$lastToggle.click()}var t=this.$(e.target),n=t.attr("data-i"),r=t.attr("data-property")+"s",i=new u(this.model.get("changes")[n][r].operations),o=new a({model:new s({operations:i})}),c=t.closest("tr")[0].offsetTop+41+31;o.render(),o.$el.css("top",c),this.$el.append(o.$el),this.$lastToggle=t,this.operationListView=o}})}),define("app/orders/templates/detailsPage",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div>\n  <div class="orders-details-container"></div>\n  <div class="orders-operations-container"></div>\n  <div class="orders-changes-container"></div>\n</div>\n')}();return buf.join("")}}),define("app/orders/pages/OrderDetailsPage",["app/core/util/bindLoadingMessage","app/core/pages/DetailsPage","../Order","../views/OrderDetailsView","../views/OperationListView","../views/OrderChangesView","app/orders/templates/detailsPage"],function(e,t,n,r,i,o,a){return t.extend({template:a,pageId:"orderDetails",actions:[],initialize:function(){this.model=e(new n({_id:this.options.modelId}),this),this.detailsView=new r({model:this.model}),this.operationsView=new i({model:this.model}),this.changesView=new o({model:this.model}),this.setView(".orders-details-container",this.detailsView),this.setView(".orders-operations-container",this.operationsView),this.setView(".orders-changes-container",this.changesView)},load:function(e){return e(this.model.fetch())}})}),define("app/nls/orders",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Production orders"},"MSG:LOADING_FAILURE":function(){return"Failed to load the orders :("},"PANEL:TITLE:details":function(){return"Order's details"},"PANEL:TITLE:operations":function(){return"Order's operations"},"PANEL:TITLE:changes":function(){return"Change log"},"PROPERTY:_id":function(){return"Order no"},"PROPERTY:createdAt":function(){return"Created at"},"PROPERTY:updatedAt":function(){return"Updated at"},"PROPERTY:nc12":function(){return"12NC"},"PROPERTY:name":function(){return"Product name"},"PROPERTY:mrp":function(){return"MRP"},"PROPERTY:qty":function(){return"Quantity"},"PROPERTY:unit":function(){return"Unit"},"PROPERTY:startDate":function(){return"Start date"},"PROPERTY:finishDate":function(){return"Finish date"},"PROPERTY:statuses":function(){return"Status"},"PROPERTY:operations":function(){return"Operations"},"PROPERTY:operations.no":function(){return"Operation no"},"PROPERTY:operations.workCenter":function(){return"WorkCenter"},"PROPERTY:operations.name":function(){return"Name"},"PROPERTY:operations.qty":function(){return"Quantity"},"PROPERTY:operations.unit":function(){return"Unit"},"PROPERTY:operations.machineSetupTime":function(){return"<em>Machine Setup</em> Time"},"PROPERTY:operations.laborSetupTime":function(){return"<em>Labor Setup</em> Time"},"PROPERTY:operations.machineTime":function(){return"<em>Machine</em> Time"},"PROPERTY:operations.laborTime":function(){return"<em>Labor</em> Time"},"OPERATIONS:NO_DATA":function(){return"Order does not have any operations."},"CHANGES:NO_DATA":function(){return"Order was not modified."},"CHANGES:operations":function(e){return t.p(e,"count",0,"en",{one:"1 operation",other:t.n(e,"count")+" operations"})},"CHANGES:time":function(){return"Time"},"CHANGES:user":function(){return"User"},"CHANGES:property":function(){return"Property"},"CHANGES:oldValue":function(){return"Old value"},"CHANGES:newValue":function(){return"New value"},"filter:placeholder:_id":function(){return"Any order no"},"filter:placeholder:nc12":function(){return"Any 12NC"},"filter:submit":function(){return"Filter orders"}},pl:!0}}),define("app/nls/pl/orders",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Zlecenia reszty dzia≈Ç√≥w"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie zlece≈Ñ nie powiod≈Ço siƒô :("},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy zlecenia"},"PANEL:TITLE:operations":function(){return"Lista operacji zlecenia"},"PANEL:TITLE:changes":function(){return"Historia zmian zlecenia"},"PROPERTY:_id":function(){return"Nr zlecenia"},"PROPERTY:createdAt":function(){return"Czas stworzenia"},"PROPERTY:updatedAt":function(){return"Czas aktualizacji"},"PROPERTY:nc12":function(){return"12NC"},"PROPERTY:name":function(){return"Nazwa wyrobu"},"PROPERTY:mrp":function(){return"MRP"},"PROPERTY:qty":function(){return"Ilo≈õƒá"},"PROPERTY:unit":function(){return"Jednostka"},"PROPERTY:startDate":function(){return"Data startu"},"PROPERTY:finishDate":function(){return"Data uko≈Ñczenia"},"PROPERTY:statuses":function(){return"Status"},"PROPERTY:operations":function(){return"Operacje"},"PROPERTY:operations.no":function(){return"Nr operacji"},"PROPERTY:operations.workCenter":function(){return"WorkCenter"},"PROPERTY:operations.name":function(){return"Nazwa operacji"},"PROPERTY:operations.qty":function(){return"Ilo≈õƒá"},"PROPERTY:operations.unit":function(){return"Jednostka"},"PROPERTY:operations.machineSetupTime":function(){return"Czas <em>Machine Setup</em>"},"PROPERTY:operations.laborSetupTime":function(){return"Czas <em>Labor Setup</em>"},"PROPERTY:operations.machineTime":function(){return"Czas <em>Machine</em>"},"PROPERTY:operations.laborTime":function(){return"Czas <em>Labor</em>"},"OPERATIONS:NO_DATA":function(){return"Zlecenie nie ma zdefiniowanych ≈ºadnych operacji."},"CHANGES:NO_DATA":function(){return"Zlecenie nie by≈Ço modyfikowane."},"CHANGES:operations":function(e){return t.p(e,"count",0,"pl",{one:"1 operacja",few:t.n(e,"count")+" operacje",other:t.n(e,"count")+" operacji"})},"CHANGES:time":function(){return"Czas"},"CHANGES:user":function(){return"U≈ºytkownik"},"CHANGES:property":function(){return"Atrybut"},"CHANGES:oldValue":function(){return"Stara warto≈õƒá"},"CHANGES:newValue":function(){return"Nowa warto≈õƒá"},"filter:placeholder:_id":function(){return"Dowolny nr"},"filter:placeholder:nc12":function(){return"Dowolne 12NC"},"filter:submit":function(){return"Filtruj zlecenia"}}}),define("app/orders/routes",["../router","../viewport","../user","./pages/OrderListPage","./pages/OrderDetailsPage","i18n!app/nls/orders"],function(e,t,n,r,i){var o=n.auth("ORDERS:VIEW");e.map("/orders",o,function(e){t.showPage(new r({rql:e.rql}))}),e.map("/orders/:id",function(e){t.showPage(new i({modelId:e.params.id}))})}),define("app/nls/orderStatuses",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Order statuses"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the order statuses :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the order status :("},"MSG:DELETED":function(e){return"Order status <em>"+t.v(e,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add order status"},"PAGE_ACTION:edit":function(){return"Edit order status"},"PAGE_ACTION:delete":function(){return"Delete order status"},"PANEL:TITLE:details":function(){return"Order status' details"},"PANEL:TITLE:addForm":function(){return"Add order status form"},"PANEL:TITLE:editForm":function(){return"Edit order status form"},"PROPERTY:_id":function(){return"Label"},"PROPERTY:label":function(){return"Description"},"FORM:ACTION:add":function(){return"Add order status"},"FORM:ACTION:edit":function(){return"Edit order status"},"FORM:ERROR:addFailure":function(){return"Failed to add the new order status :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the order status :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Order status deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete order status"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen order status?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Are you sure you want to delete the <em>"+t.v(e,"label")+"</em> order status?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the order status :-("}},pl:!0}}),define("app/nls/pl/orderStatuses",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Statusy zlece≈Ñ"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie status√≥w zlece≈Ñ nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie statusu zlece≈Ñ nie powiod≈Ço siƒô :("},"MSG:DELETED":function(e){return"Status zlece≈Ñ <em>"+t.v(e,"label")+"</em> zosta≈Ç usuniƒôty."},"PAGE_ACTION:add":function(){return"Dodaj status zlece≈Ñ"},"PAGE_ACTION:edit":function(){return"Edytuj status zlece≈Ñ"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ status zlece≈Ñ"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy statusu zlece≈Ñ"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania statusu zlece≈Ñ"},"PANEL:TITLE:editForm":function(){return"Formularz edycji statusu zlece≈Ñ"},"PROPERTY:_id":function(){return"Etykieta"},"PROPERTY:label":function(){return"Opis"},"FORM:ACTION:add":function(){return"Dodaj status zlece≈Ñ"},"FORM:ACTION:edit":function(){return"Edytuj status zlece≈Ñ"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá statusu zlece≈Ñ :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá statusu zlece≈Ñ :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia statusu zlece≈Ñ"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ status zlece≈Ñ"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany status zlece≈Ñ?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá status zlece≈Ñ <em>"+t.v(e,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá statusu zlece≈Ñ :-("}}}),define("app/orderStatuses/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","../data/orderStatuses","./OrderStatus","i18n!app/nls/orderStatuses"],function(e,t,n,r,i,o){var a=n.auth("DICTIONARIES:VIEW"),s=n.auth("DICTIONARIES:MANAGE");e.map("/orderStatuses",a,function(){t.loadPage(["app/core/pages/ListPage","app/orderStatuses/views/OrderStatusListView"],function(e,t){return new e({ListView:t,collection:i})})}),e.map("/orderStatuses/:id",function(e){t.loadPage(["app/core/pages/DetailsPage","app/orderStatuses/templates/details"],function(t,n){return new t({model:new o({_id:e.params.id}),detailsTemplate:n})})}),e.map("/orderStatuses;add",s,function(){t.loadPage(["app/core/pages/AddFormPage","app/orderStatuses/views/OrderStatusFormView"],function(e,t){return new e({FormView:t,model:new o})})}),e.map("/orderStatuses/:id;edit",s,function(e){t.loadPage(["app/core/pages/EditFormPage","app/orderStatuses/views/OrderStatusFormView"],function(t,n){return new t({FormView:n,model:new o({_id:e.params.id})})})}),e.map("/orderStatuses/:id;delete",s,r.bind(null,o))}),define("app/pressWorksheets/PressWorksheet",["../i18n","../time","../core/Model","../core/util/getShiftStartInfo"],function(e,t,n,r){function i(e){return e&&e.label?e.label:null}return n.extend({urlRoot:"/pressWorksheets",clientUrlRoot:"#pressWorksheets",topicPrefix:"pressWorksheets",privilegePrefix:"PRESS_WORKSHEETS",nlsDomain:"pressWorksheets",labelAttribute:"rid",defaults:function(){var e=r(Date.now());return{rid:null,date:t.format(e.moment.valueOf(),"YYYY-MM-DD"),shift:e.shift,type:"mech",divisions:[],prodLines:[],startedAt:null,finishedAt:null,master:null,operator:null,operators:null,orders:null,createdAt:null,creator:null}},serialize:function(){var n=this.toJSON();return n.date=t.format(n.date,"YYYY-MM-DD"),n.shift=e("core","SHIFT:"+n.shift),n.master=i(n.master),n.operator=i(n.operator),n.operators=(n.operators||[]).map(i).filter(function(e){return!!e}),n.creator=i(n.creator),n.createdAt=n.createdAt?t.format(n.createdAt,"LLLL"):null,"paintShop"===n.type&&n.orders&&(n.orders=n.orders.map(function(e){return e.startedAt=t.getMoment(e.startedAt).format("HH:mm:ss"),e.finishedAt=t.getMoment(e.finishedAt).format("HH:mm:ss"),e})),Array.isArray(n.divisions)&&(n.divisions=n.divisions.join("; ")),Array.isArray(n.prodLines)&&(n.prodLines=n.prodLines.join("; ")),n.type=e("pressWorksheets","PROPERTY:type:"+n.type),n}})}),define("app/pressWorksheets/PressWorksheetCollection",["underscore","../user","../core/Collection","./PressWorksheet"],function(e,t,n,r){return n.extend({model:r,rqlQuery:function(e){var n=[],r=t.getDivision();return r&&n.push({name:"eq",args:["divisions",r.id]}),e.Query.fromObject({fields:{orders:0,operators:0},sort:{date:-1},limit:15,selector:{name:"and",args:n}})},sync:function(t,r,i){if("read"===t&&!i.data){var o=e.find(this.rqlQuery.selector.args,function(e){return"eq"===e.name&&"user"===e.args[0]});o&&(this.rqlQuery.selector.args=e.without(this.rqlQuery.selector.args,o)),i.data=this.rqlQuery.toString(),o&&this.rqlQuery.selector.args.push(o)}return n.prototype.sync.call(this,t,r,i)}})}),define("app/pressWorksheets/templates/filter",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<form class="well filter-form">\n  <div class="form-group">\n    <label for="',idPrefix,'-date">',t("pressWorksheets","PROPERTY:date"),'</label>\n    <input id="',idPrefix,'-date" class="form-control" name="date" type="date">\n  </div>\n  <div class="form-group">\n    <label>',t("pressWorksheets","filter:shift"),'</label>\n    <div id="',idPrefix,'-shift" class="btn-group filter-btn-group" data-toggle="buttons">\n      '),[0,1,2,3].forEach(function(e){buf.push('\n      <label class="btn btn-default">\n        <input type="radio" name="shift" value="',e,'"> ',t("core","SHIFT:"+e),"\n      </label>\n      ")}),buf.push('\n    </div>\n  </div>\n  <div class="form-group">\n    <label>',t("pressWorksheets","PROPERTY:type"),'</label>\n    <div id="',idPrefix,'-type" class="btn-group filter-btn-group" data-toggle="buttons">\n      '),["any","mech","paintShop","optics"].forEach(function(e){buf.push('\n      <label class="btn btn-default">\n        <input type="radio" name="type" value="',e,'"> ',t("pressWorksheets","filter:type:"+e),"\n      </label>\n      ")}),buf.push('\n    </div>\n  </div>\n  <div class="form-group">\n    <label>',t("pressWorksheets","PROPERTY:divisions"),'</label>\n    <div id="',idPrefix,'-divisions" class="btn-group filter-btn-group" data-toggle="buttons">\n      '),divisions.forEach(function(e){buf.push('\n      <label class="btn btn-default" title="',escape(e.title),'">\n        <input type="checkbox" name="divisions[]" value="',escape(e.id),'"> ',escape(e.label),"\n      </label>\n      ")}),buf.push('\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="filter-radioLabels">\n      <label>\n        <input name="userType" type="radio" value="master">\n        ',t("pressWorksheets","filter:user:master"),'\n      </label><label>\n        <input name="userType" type="radio" value="operators">\n        ',t("pressWorksheets","filter:user:operators"),'\n      </label>\n    </div>\n    <input id="',idPrefix,'-user" name="user" type="hidden">\n  </div>\n  ',renderLimit(),'\n  <div class="form-group">\n    <div id="',idPrefix,'-mine" class="btn-group filter-btn-group" data-toggle="buttons">\n      <label class="btn btn-default" title="',t("pressWorksheets","filter:mine:title"),'">\n        <input type="checkbox" name="mine" value="1"> ',t("pressWorksheets","filter:mine"),'\n      </label>\n    </div>\n  </div>\n  <div class="form-group filter-actions">\n    <button type="submit" class="btn btn-default"><i class="fa fa-filter"></i><span>',escape(t("pressWorksheets","filter:submit")),"</span></button>\n  </div>\n</form>\n")}();return buf.join("")}}),define("app/pressWorksheets/views/PressWorksheetFilterView",["app/time","app/data/divisions","app/core/views/FilterView","app/users/util/setUpUserSelect2","app/pressWorksheets/templates/filter"],function(e,t,n,r,i){return n.extend({template:i,defaultFormData:function(){return{date:"",shift:0,type:"any",divisions:t.filter(function(e){return"prod"===e.get("type")}).map(function(e){return e.id}),mine:!1,userType:"operators",user:{id:null,text:null}}},termToForm:{date:function(t,n,r){if("in"===n.name)r.date=e.format(n.args[1][0],"YYYY-MM-DD");else{var i=e.getMoment(n.args[1]);r.date=i.format("YYYY-MM-DD"),r.shift=this.getShiftNoFromMoment(i)}},shift:function(e,t,n){n[e]=t.args[1]},divisions:function(e,t,n){n.divisions="in"===t.name?t.args[1]:[t.args[1]]},"master.id":function(e,t,n){n.userType=e.split(".")[0],n.user.id=t.args[1],null===n.user.text&&(n.user.text=t.args[1])},user:function(e,t,n){n.user.text=t.args[1]},type:"shift",mine:"shift","operator.id":"master.id","operators.id":"master.id"},serialize:function(){var e=n.prototype.serialize.call(this);return e.divisions=t.filter(function(e){return"prod"===e.get("type")}).sort(function(e,t){return e.getLabel().localeCompare(t.getLabel())}).map(function(e){return{id:e.id,label:e.id,title:e.get("description")}}),e},afterRender:function(){n.prototype.afterRender.call(this),this.toggleButtonGroup("shift"),this.toggleButtonGroup("type"),this.toggleButtonGroup("divisions"),this.toggleButtonGroup("mine"),r(this.$id("user")).select2("data",null===this.formData.user.id?null:this.formData.user)},serializeFormToQuery:function(t,n){var r=e.getMoment(this.$id("date").val()),i=parseInt(this.$("input[name=shift]:checked").val(),10),o=this.$("input[name=type]:checked").val(),a=this.getButtonGroupValue("divisions"),s=this.$("input[name=mine]:checked").val(),u=this.$("input[name=userType]:checked").val(),c=this.$id("user").select2("data");if(this.setHoursByShiftNo(r,i),r.isValid())if(0===i){var l=r.valueOf();t.push({name:"in",args:["date",[l+216e5,l+504e5,l+792e5]]})}else t.push({name:"eq",args:["date",r.valueOf()]});else 0!==i&&t.push({name:"eq",args:["shift",i]});"any"!==o&&t.push({name:"eq",args:["type",o]}),1===a.length?t.push({name:"eq",args:["divisions",a[0]]}):a.length>1&&t.push({name:"in",args:["divisions",a]}),c&&(t.push({name:"eq",args:[u+".id",c.id]}),t.push({name:"eq",args:["user",c.text]})),s?(t.push({name:"eq",args:["mine",1]}),n.sort={createdAt:-1}):n.sort={date:-1}},getShiftNoFromMoment:function(e){var t=e.hours();return 6===t?1:14===t?2:22===t?3:0},setHoursByShiftNo:function(e,t){e.hours(1===t?6:2===t?14:3===t?22:0)}})}),define("app/pressWorksheets/views/PressWorksheetListView",["app/user","app/core/views/ListView"],function(e,t){return t.extend({localTopics:{"companies.synced":"render"},columns:["rid","type","divisions","date","shift","master","operator"],serializeActions:function(){function n(t){return i?!0:e.isAllowedTo("PRESS_WORKSHEETS:MANAGE")&&e.data._id===t.get("creator").id&&Date.parse(t.get("createdAt"))+o>a}var r=this.collection,i=e.isAllowedTo("PROD_DATA:MANAGE"),o=288e5,a=Date.now();return function(e){var i=r.get(e._id),o=[t.actions.viewDetails(i)];return n(i)&&(o.push(t.actions.edit(i)),o.push(t.actions.delete(i))),o}}})}),define("app/pressWorksheets/pages/PressWorksheetListPage",["app/i18n","app/core/util/bindLoadingMessage","app/core/util/pageActions","app/core/View","../PressWorksheetCollection","../views/PressWorksheetFilterView","../views/PressWorksheetListView","app/core/templates/listPage"],function(e,t,n,r,i,o,a,s){return r.extend({template:s,layoutName:"page",pageId:"pressWorksheetList",breadcrumbs:[e.bound("pressWorksheets","BREADCRUMBS:browse")],actions:function(){return[n.jump(this,this.pressWorksheetList),n.add(this.pressWorksheetList)]},initialize:function(){this.defineModels(),this.defineViews(),this.setView(".filter-container",this.filterView),this.setView(".list-container",this.listView)},defineModels:function(){this.pressWorksheetList=t(new i(null,{rqlQuery:this.options.rql}),this)},defineViews:function(){this.filterView=new o({model:{rqlQuery:this.pressWorksheetList.rqlQuery}}),this.listView=new a({collection:this.pressWorksheetList}),this.listenTo(this.filterView,"filterChanged",this.refreshList)},load:function(e){return e(this.pressWorksheetList.fetch({reset:!0}))},refreshList:function(e){this.pressWorksheetList.rqlQuery=e,this.listView.refreshCollectionNow(),this.broker.publish("router.navigate",{url:this.pressWorksheetList.genClientUrl()+"?"+e,trigger:!1,replace:!0})}})}),define("app/pressWorksheets/templates/details",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div>\n  <div class="panel panel-primary pressWorksheets-details">\n    <div class="panel-heading">\n      ',t("pressWorksheets","PANEL:TITLE:details"),'\n    </div>\n    <div class="panel-details row">\n      <div class="col-md-6">\n        <div class="props first">\n          <div class="prop">\n            <div class="prop-name">',t("pressWorksheets","PROPERTY:type"),'</div>\n            <div class="prop-value">',model.type,'</div>\n          </div>\n          <div class="prop">\n            <div class="prop-name">',t("pressWorksheets","PROPERTY:date"),'</div>\n            <div class="prop-value">',model.date,'</div>\n          </div>\n          <div class="prop">\n            <div class="prop-name">',t("pressWorksheets","PROPERTY:shift"),'</div>\n            <div class="prop-value">',model.shift,'</div>\n          </div>\n          <div class="prop">\n            <div class="prop-name">',t("pressWorksheets","PROPERTY:master"),'</div>\n            <div class="prop-value">',escape(model.master||"-"),'</div>\n          </div>\n          <div class="prop">\n            <div class="prop-name">',t("pressWorksheets","PROPERTY:operator"),'</div>\n            <div class="prop-value">',escape(model.operator||"-"),'</div>\n          </div>\n        </div>\n      </div>\n      <div class="col-md-6">\n        <div class="props">\n          <div class="prop">\n            <div class="prop-name">',t("pressWorksheets","PROPERTY:createdAt"),'</div>\n            <div class="prop-value">',escape(model.createdAt||"-"),'</div>\n          </div>\n          <div class="prop">\n            <div class="prop-name">',t("pressWorksheets","PROPERTY:creator"),'</div>\n            <div class="prop-value">',escape(model.creator||"-"),'</div>\n          </div>\n          <div class="prop">\n            <div class="prop-name">',t("pressWorksheets","PROPERTY:operators"),'</div>\n            <div class="prop-value">\n              '),model.operators.length?(buf.push("\n              <ol>\n                "),model.operators.forEach(function(e){buf.push("\n                <li>",escape(e),"</li>\n                ")}),buf.push("\n              </ol>\n              ")):buf.push("\n              -\n              "),buf.push('\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="panel panel-default pressWorksheets-details-orders">\n    <div class="panel-heading">\n      ',t("pressWorksheets","PANEL:TITLE:details:orders"),"\n    </div>\n    ",renderOrdersList({orders:model.orders,extended:extended}),"\n  </div>\n</div>\n")}();return buf.join("")}}),define("app/pressWorksheets/templates/ordersList",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<table class="table table-bordered table-condensed table-hover pressWorksheets-orders-table">\n  <thead>\n    <tr>\n      <th>',t("core","#"),"</th>\n      "),extended&&buf.push("\n      <th>",t("pressWorksheets","PROPERTY:pressWorksheet"),"</th>\n      <th>",t("pressWorksheets","PROPERTY:user"),"</th>\n      <th>",t("pressWorksheets","PROPERTY:shift"),"</th>\n      "),buf.push("\n      <th>",t("pressWorksheets","PROPERTY:order.nc12"),"</th>\n      <th>",t("pressWorksheets","PROPERTY:order.name"),"</th>\n      <th>",t("pressWorksheets","PROPERTY:order.operationName"),"</th>\n      <th>",t("pressWorksheets","PROPERTY:order.operationNo"),"</th>\n      <th>",t("pressWorksheets","PROPERTY:order.division"),"</th>\n      <th>",t("pressWorksheets","PROPERTY:order.prodLine"),"</th>\n      <th>",t("pressWorksheets","PROPERTY:order.quantityDone"),"</th>\n      <th>",t("pressWorksheets","PROPERTY:order.startedAt"),"</th>\n      <th>",t("pressWorksheets","PROPERTY:order.finishedAt"),"</th>\n      <th>",t("pressWorksheets","PROPERTY:order.losses"),"</th>\n      <th>",t("pressWorksheets","PROPERTY:order.downtimes"),"</th>\n    </tr>\n  </thead>\n  <tbody>\n    "),orders.forEach(function(e,n){buf.push('\n    <tr class="',n%2!==0?"":"is-odd",'">\n      <td rowspan="',e.notes?2:1,'">',n+1,".</td>\n      "),extended&&buf.push('\n      <td><a href="#pressWorksheets/',e.pressWorksheet._id,'">',escape(e.pressWorksheet.rid),"</a></td>\n      <td>",escape(e.pressWorksheet.user),"</td>\n      <td>",t("core","SHIFT",{date:time.format(e.pressWorksheet.date,"YYYY-MM-DD"),shift:t("core","SHIFT:"+e.pressWorksheet.shift)}),"</td>\n      "),buf.push("\n      <td>\n        "),e.prodShiftOrder&&user.isAllowedTo("PROD_DATA:VIEW")?buf.push('\n        <a href="#prodShiftOrders/',e.prodShiftOrder,'">',escape(e.nc12),"</a>\n        "):buf.push("\n        ",escape(e.nc12),"\n        "),buf.push("\n      </td>\n      <td>",escape(e.name),"</td>\n      <td>",escape(e.operationName||"-"),"</td>\n      <td>",escape(e.operationNo),"</td>\n      <td>",escape(e.division),"</td>\n      <td>",escape(e.prodLine),"</td>\n      <td>",escape(e.quantityDone),"</td>\n      <td>",escape(e.startedAt),"</td>\n      <td>",escape(e.finishedAt),'</td>\n      <td class="prodWorksheets-orders-lossesTable">\n        '),e.losses.length&&(buf.push('\n        <table class="table table-bordered table-condensed">\n          <thead>\n            <tr>\n              '),e.losses.forEach(function(e){buf.push("\n              <th>",escape(e.label),"</th>\n              ")
}),buf.push("\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              "),e.losses.forEach(function(e){buf.push("\n              <td>",escape(e.count),"</td>\n              ")}),buf.push("\n            </tr>\n          </tbody>\n        </table>\n        ")),buf.push('\n      </td>\n      <td class="prodWorksheets-orders-lossesTable">\n        '),e.downtimes.length&&(buf.push('\n        <table class="table table-bordered table-condensed">\n          <thead>\n            <tr>\n              '),e.downtimes.forEach(function(e){buf.push("\n              <th>\n                "),e.prodDowntime&&user.isAllowedTo("PROD_DOWNTIMES:VIEW")?buf.push('\n                <a href="#prodDowntimes/',e.prodDowntime,'">',escape(e.label),"</a>\n                "):buf.push("\n                ",escape(e.label),"\n                "),buf.push("\n              </th>\n              ")}),buf.push("\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              "),e.downtimes.forEach(function(e){buf.push("\n              <td>",escape(e.duration),"</td>\n              ")}),buf.push("\n            </tr>\n          </tbody>\n        </table>\n        ")),buf.push("\n      </td>\n    </tr>\n    "),e.notes&&buf.push('\n    <tr class="pressWorksheets-orders-notes ',n%2!==0?"":"is-odd",'">\n      <td colspan="',extended?14:11,'">',escape(e.notes),"</td>\n    </tr>\n    "),buf.push("\n    ")}),buf.push("\n  </tbody>\n</table>\n")}();return buf.join("")}}),define("app/pressWorksheets/views/PressWorksheetDetailsView",["underscore","app/core/views/DetailsView","app/pressWorksheets/templates/details","app/pressWorksheets/templates/ordersList"],function(e,t,n,r){return t.extend({template:n,events:{"mouseover tbody > tr":function(e){this.toggleHovered(e.currentTarget,!0)},"mouseout tbody > tr":function(e){this.toggleHovered(e.currentTarget,!1)}},serialize:function(){return e.extend(t.prototype.serialize.call(this),{renderOrdersList:r,extended:!1})},toggleHovered:function(e,t){var n=this.$(e),r=n.hasClass("pressWorksheets-orders-notes")?n.prev():n.next(".pressWorksheets-orders-notes");n.toggleClass("is-hovered",t),r.toggleClass("is-hovered",t)}})}),define("app/pressWorksheets/pages/PressWorksheetDetailsPage",["app/user","app/core/util/pageActions","app/core/pages/DetailsPage","../views/PressWorksheetDetailsView"],function(e,t,n,r){return n.extend({DetailsView:r,actions:function(){var n=288e5,r=Date.now(),i=[];return(e.isAllowedTo("PROD_DATA:MANAGE")||e.data._id===this.model.get("creator").id&&Date.parse(this.model.get("createdAt"))+n>r)&&i.push(t.edit(this.model),t.delete(this.model)),i}})}),define("app/pressWorksheets/templates/form",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<form class="pressWorksheets-form" method="post" action="',formAction,'" autocomplete="off">\n  <input type="hidden" name="_method" value="',formMethod,'">\n  <div class="panel panel-primary">\n    <div class="panel-heading">',panelTitleText,'</div>\n    <div class="panel-body">\n      <div id="',idPrefix,'-typeChangeWarning" class="message message-inline message-warning">',t("pressWorksheets","FORM:typeChangeWarning"),'</div>\n      <div class="form-group">\n        <label class="radio-inline">\n          <input id="',idPrefix,'-type" type="radio" name="type" value="mech">\n          ',t("pressWorksheets","PROPERTY:type:mech"),'\n        </label>\n        <label class="radio-inline">\n          <input type="radio" name="type" value="optics">\n          ',t("pressWorksheets","PROPERTY:type:optics"),'\n        </label>\n        <label class="radio-inline">\n          <input type="radio" name="type" value="paintShop">\n          ',t("pressWorksheets","PROPERTY:type:paintShop"),'\n        </label>\n      </div>\n      <div class="row">\n        <div class="col-md-3 form-group">\n          <label for="',idPrefix,'-operators" class="control-label">',t("pressWorksheets","PROPERTY:operators"),'</label>\n          <input id="',idPrefix,'-operators" type="text" name="operators" required>\n        </div>\n        <div class="col-md-3 pressWorksheets-form-dateAndShift">\n          <div class="row">\n            <div class="col-md-6 form-group">\n              <label for="',idPrefix,'-date" class="control-label">',t("pressWorksheets","PROPERTY:date"),'</label>\n              <input id="',idPrefix,'-date" class="form-control" type="date" name="date" required>\n            </div>\n            <div class="col-md-6 form-group pressWorksheets-form-group-shift">\n              <label for="',idPrefix,'-shift-1">',t("pressWorksheets","PROPERTY:shift"),'</label>\n              <div class="pressWorksheets-form-group-shift-checkboxes">\n                <label class="radio-inline"><input id="',idPrefix,'-shift-1" name="shift" type="radio" value="1" checked> ',t("core","SHIFT:1"),'</label>\n                <label class="radio-inline"><input name="shift" type="radio" value="2"> ',t("core","SHIFT:2"),'</label>\n                <label class="radio-inline"><input name="shift" type="radio" value="3"> ',t("core","SHIFT:3"),'</label>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class="col-md-3 form-group">\n          <label for="',idPrefix,'-operator" class="control-label">',t("pressWorksheets","PROPERTY:operator"),'</label>\n          <input id="',idPrefix,'-operator" type="text" name="operator" required>\n        </div>\n        <div class="col-md-3 form-group">\n          <label for="',idPrefix,'-master" class="control-label">',t("pressWorksheets","PROPERTY:master"),'</label>\n          <input id="',idPrefix,'-master" type="text" name="master" required>\n        </div>\n      </div>\n      <div id="',idPrefix,'-existingWarning" class="message message-inline message-warning"></div>\n      <div class="pressWorksheets-form-group-paintShop">\n        <div class="form-group">\n          <label for="',idPrefix,'-startedAt" class="control-label">',t("pressWorksheets","PROPERTY:startedAt"),'</label>\n          <input id="',idPrefix,'-startedAt" class="form-control pressWorksheets-form-time" type="time" name="startedAt">\n        </div>\n        <div class="form-group">\n          <label for="',idPrefix,'-finishedAt" class="control-label">',t("pressWorksheets","PROPERTY:finishedAt"),'</label>\n          <input id="',idPrefix,'-finishedAt" class="form-control pressWorksheets-form-time" type="time" name="finishedAt">\n        </div>\n      </div>\n      <div id="',idPrefix,'-ordersTable" class="table-responsive"></div>\n    </div>\n    <div class="panel-footer">\n      <button type="submit" class="btn btn-primary">',formActionText,'</button>\n      <button type="submit" class="btn btn-danger">',t("pressWorksheets","FROM:ACTION:saveOverlapping"),"</button>\n    </div>\n  </div>\n</form>\n")}();return buf.join("")}}),define("app/pressWorksheets/templates/ordersTable",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<table class="table table-bordered table-condensed pressWorksheets-form-orders">\n  <thead>\n    <tr>\n      <th rowspan="',rowspan,'">',t("core","#"),'</th>\n      <th rowspan="',rowspan,'" data-column="part">\n        ',t("pressWorksheets","PROPERTY:order.part"),'\n        <span class="pressWorksheets-form-focusLastPart">',t("pressWorksheets","FORM:focusLastPart"),'</span>\n      </th>\n      <th rowspan="',rowspan,'" data-column="operation">',t("pressWorksheets","PROPERTY:order.operation"),'</th>\n      <th class="pressWorksheets-form-min" rowspan="',rowspan,'" data-column="prodLine">',t("pressWorksheets","PROPERTY:order.prodLine"),'</th>\n      <th class="pressWorksheets-form-min" rowspan="',rowspan,'" data-column="quantityDone">',t("pressWorksheets","PROPERTY:order.quantityDone"),'</th>\n      <th class="pressWorksheets-form-min pressWorksheets-form-timeCell" rowspan="',rowspan,'" data-column="startedAt">',t("pressWorksheets","PROPERTY:order.startedAt"),'</th>\n      <th class="pressWorksheets-form-min pressWorksheets-form-timeCell" rowspan="',rowspan,'" data-column="finishedAt">',t("pressWorksheets","PROPERTY:order.finishedAt"),"</th>\n      "),lossReasons.length&&buf.push('\n      <th class="pressWorksheets-form-lossCell pressWorksheets-form-min pressWorksheets-form-separator" colspan="',lossReasons.length,'">',t("pressWorksheets","PROPERTY:order.losses"),"</th>\n      "),buf.push("\n      "),downtimeReasons.length&&buf.push('\n      <th class="pressWorksheets-form-downtimeCell pressWorksheets-form-min pressWorksheets-form-separator" colspan="',downtimeReasons.length,'">',t("pressWorksheets","PROPERTY:order.downtimes"),"</th>\n      "),buf.push('\n      <th class="actions" rowspan="',rowspan,'"></th>\n    </tr>\n    '),rowspan&&(buf.push('\n    <tr class="pressWorksheets-form-losses">\n      '),lossReasons.forEach(function(e,t){buf.push('\n      <th class="pressWorksheets-form-lossCell ',t?"":"pressWorksheets-form-separator",'" data-column="loss.',t,'"><span class="pressWorksheets-form-loss">',e.label,"</span></th>\n      ")}),buf.push("\n      "),downtimeReasons.forEach(function(e,t){buf.push('\n      <th class="pressWorksheets-form-downtimeCell ',t?"":"pressWorksheets-form-separator",'" data-column="downtime.',t,'" data-type="',e.type,'"><span class="pressWorksheets-form-loss">',e.label,"</span></th>\n      ")}),buf.push("\n    </tr>\n    ")),buf.push("\n  </thead>\n  <tbody></tbody>\n</table>\n")}();return buf.join("")}}),define("app/pressWorksheets/templates/ordersTableRow",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<tr class="pressWorksheets-form-order">\n  <td class="pressWorksheets-form-no">0.</td>\n  <td><input class="pressWorksheets-form-part" type="text" name="orders[',no,'].part" data-column="part" placeholder="',t("pressWorksheets","FORM:PLACEHOLDER:part"),'"></td>\n  <td><input class="form-control pressWorksheets-form-operation" type="text" name="orders[',no,'].operation" data-column="operation" placeholder="',t("pressWorksheets","FORM:PLACEHOLDER:operation"),'"></td>\n  <td><input class="pressWorksheets-form-prodLine" type="text" name="orders[',no,'].prodLine" data-column="prodLine" placeholder="',t("pressWorksheets","FORM:PLACEHOLDER:prodLine"),'"></td>\n  <td><input class="form-control no-controls pressWorksheets-form-quantityDone" type="number" name="orders[',no,'].quantityDone" data-column="quantityDone"></td>\n  <td class="pressWorksheets-form-timeCell"><input class="form-control no-controls pressWorksheets-form-time pressWorksheets-form-startedAt" type="time" name="orders[',no,'].startedAt" data-column="startedAt"></td>\n  <td class="pressWorksheets-form-timeCell"><input class="form-control no-controls pressWorksheets-form-time pressWorksheets-form-finishedAt" type="time" name="orders[',no,'].finishedAt" data-column="finishedAt"></td>\n  '),lossReasons.forEach(function(e,t){buf.push('\n  <td class="pressWorksheets-form-lossCell ',t?"":"pressWorksheets-form-separator",'"><input class="form-control no-controls pressWorksheets-form-count is-loss" type="number" name="orders[',no,"].losses.",e._id,'" data-column="loss.',t,'" data-reason="',e._id,'"></td>\n  ')}),buf.push("\n  "),downtimeReasons.forEach(function(e,t){buf.push('\n  <td class="pressWorksheets-form-downtimeCell ',t?"":"pressWorksheets-form-separator",'" data-type="',e.type,'"><input class="form-control no-controls pressWorksheets-form-count is-downtime" type="number" name="orders[',no,"].downtimes.",e._id,'" data-column="downtime.',t,'" data-reason="',e._id,'"></td>\n  ')}),buf.push('\n  <td class="actions"><button type="button" class="btn btn-default pressWorksheets-form-comment"><i class="fa fa-comment"></i></button></td>\n</tr>\n')}();return buf.join("")}}),define("app/pressWorksheets/templates/ordersTableNotesRow",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<tr class="pressWorksheets-form-notes">\n  <td colspan="',colspan,'"><textarea class="form-control" name="orders[',no,'].notes"></textarea></td>\n</tr>\n')}();return buf.join("")}}),define("app/pressWorksheets/views/PressWorksheetFormView",["underscore","jquery","app/time","app/i18n","app/viewport","app/data/downtimeReasons","app/data/prodLines","app/core/Model","app/core/views/FormView","app/users/util/setUpUserSelect2","../PressWorksheetCollection","app/pressWorksheets/templates/form","app/pressWorksheets/templates/ordersTable","app/pressWorksheets/templates/ordersTableRow","app/pressWorksheets/templates/ordersTableNotesRow"],function(e,t,n,r,i,o,a,s,u,c,l,d,p,f,h){return u.extend({template:d,events:{keydown:function(e){13===e.keyCode&&"TEXTAREA"!==e.target.tagName&&e.preventDefault()},"click button[type=submit]":function(e){this.checkOverlapping=e.target.classList.contains("btn-primary")},submit:function(e){return this.removeIsOverlapping(),this.submitForm(e)},"blur .pressWorksheets-form-time":function(e){var t=e.target.value.trim().replace(/[^0-9: \-]+/g,"");if(0!==t.length){var n=t.match(/^([0-9]+)(?::| +|\-)+([0-9]+)$/),r=0,i=0;n?(r=parseInt(n[1],10),i=parseInt(n[2],10)):4===t.length?(r=parseInt(t.substr(0,2),10),i=parseInt(t.substr(2),10)):3===t.length?(r=parseInt(t[0],10),i=parseInt(t.substr(1),10)):i=parseInt(t,10);var o=isNaN(r)||r>=24,a=isNaN(i)||i>=60;o&&(r=0),a&&(i=0),e.target.value=(10>r?"0":"")+r.toString(10)+":"+(10>i?"0":"")+i.toString(10),this.validateTimes(e.target)}},"blur .pressWorksheets-form-count":function(e){var t=parseInt(e.target.value,10);e.target.value=isNaN(t)?"":t,e.target.classList.contains("is-downtime")&&this.validateTimes(e.target)},"blur .pressWorksheets-form-quantityDone":function(e){var t=parseInt(e.target.value,10);e.target.value=isNaN(t)||0>t?"":t},"focus input":function(e){e.target.classList.contains("select2-focusser")&&e.target.parentNode.classList.contains("pressWorksheets-form-part")?this.$(".table-responsive").prop("scrollLeft",0):e.target.classList.contains("pressWorksheets-form-time")&&e.target.parentNode.classList.contains("form-group")&&(this.paintShopTimeFocused=!0)},"focus .pressWorksheets-form-order input":function(e){var t=this.$(e.target);t.closest("td").addClass("is-focused"),t.hasClass("select2-focusser")&&(t=t.parent().next("input")),t.length&&t[0].dataset.column&&this.$('th[data-column="'+t[0].dataset.column+'"]').addClass("is-focused")},"blur .pressWorksheets-form-order input":function(e){this.$(e.target).closest("td").removeClass("is-focused"),this.$("th.is-focused").removeClass("is-focused")},"change input[name=shift]":function(){this.checkShiftStartTimeValidity(),this.validateTimes(null),this.checkForExistingWorksheet()},"change input[name=date]":function(){this.checkShiftStartTimeValidity(),this.checkForExistingWorksheet()},"change input[name=operator]":function(){this.checkForExistingWorksheet()},"change input[name=type]":function(){this.togglePaintShop(),this.filling||(this.renderOrdersTable(),this.addOrderRow())},"click .pressWorksheets-form-comment":function(e){var t=this.$(e.currentTarget).closest(".pressWorksheets-form-order").next(".pressWorksheets-form-notes");t[t.is(":visible")?"fadeOut":"fadeIn"]("fast",function(){t.find("textarea").focus()})}},initialize:function(){u.prototype.initialize.apply(this,arguments),this.checkOverlapping=!0,this.filling=!1,this.lastOrderNo=-1,this.lossReasons=[],this.downtimeReasons=[],this.paintShopTimeFocused=!1,this.onKeyDown=this.onKeyDown.bind(this),this.existingWorksheets=new l(null,{rqlQuery:"select(rid)"}),this.listenTo(this.existingWorksheets,"request",function(){this.$id("existingWarning").fadeOut()}),this.listenTo(this.existingWorksheets,"reset",this.toggleExistingWarning),t("body").on("keydown",this.onKeyDown)},destroy:function(){t("body").off("keydown",this.onKeyDown)},afterRender:function(){u.prototype.afterRender.call(this),this.prodLinesData=a.filter(function(e){var t=e.getSubdivision();return t&&"press"===t.get("type")}).map(function(e){return{id:e.id,text:e.id}}),c(this.$id("master"));var e=c(this.$id("operator")),t=c(this.$id("operators"),{multiple:!0}),n=this;t.on("change",function(){e.select2("data")||(e.select2("data",t.select2("data")[0]),n.checkForExistingWorksheet())}),this.fillType(),this.renderOrdersTable(),this.fillModelData(),this.addOrderRow(),this.model.id||this.$id("type").focus()},renderOrdersTable:function(){var e="optics"===this.getType(),t=e?"opticsPosition":"pressPosition";this.lossReasons=e?[]:this.model.lossReasons.toJSON(),this.downtimeReasons=o.filter(function(e){return e.get(t)>=0}).map(function(e){return e.toJSON()}).sort(function(e,n){return e[t]-n[t]}),this.lastOrderNo=-1,this.$id("ordersTable").html(p({rowspan:this.lossReasons.length||this.downtimeReasons.length?2:0,lossReasons:this.lossReasons,downtimeReasons:this.downtimeReasons}))},serializeForm:function(e){function t(e){return{id:e.id,label:e.text}}var n=this.$(".pressWorksheets-form-order");e.orders=(e.orders||[]).filter(function(e){return e.part&&e.part.length&&e.operation&&e.operation.length}).map(this.serializeOrder.bind(this,n,this.model.lossReasons)),e.operators=this.$id("operators").select2("data").map(t),e.operator=t(this.$id("operator").select2("data")),e.master=t(this.$id("master").select2("data")),e.shift=parseInt(e.shift,10);var r={},i={};return e.orders.forEach(function(e){r[e.division]=1,i[e.prodLine]=1}),e.divisions=Object.keys(r),e.prodLines=Object.keys(i),e},serializeOrder:function(t,n,r,i){var s=t.eq(i),u=s.find(".pressWorksheets-form-part"),c=u.select2("data").data;c._id&&(c.nc12=c._id,delete c._id);var l=e.find(c.operations,function(e){return e.no===r.operation}),d=[];r.losses&&Object.keys(r.losses).forEach(function(e){e=n.get(e),r.losses[e.id]>0&&d.push({reason:e.id,label:e.get("label"),count:parseInt(r.losses[e.id],10)})});var p=[];r.downtimes&&Object.keys(r.downtimes).forEach(function(e){var t=parseInt(r.downtimes[e],10);if(t>0){e=o.get(e);var n=s.find('.is-downtime[data-reason="'+e.id+'"]');p.push({prodDowntime:n.attr("data-prodDowntime")||null,reason:e.id,label:e.get("label"),duration:t})}});var f=a.get(r.prodLine).getSubdivision();return{prodShiftOrder:u.attr("data-prodShiftOrder")||null,division:f?f.get("division"):null,prodLine:r.prodLine,nc12:c.nc12,name:c.name,operationNo:l.no,operationName:l.name,orderData:c,quantityDone:r.quantityDone,startedAt:r.startedAt||null,finishedAt:r.finishedAt||null,losses:d,downtimes:p,notes:r.notes||""}},checkShiftStartTimeValidity:function(){var e=this.$id("date"),t=this.getShiftMoment();if(e[0].setCustomValidity(t.valueOf()>Date.now()?r("pressWorksheets","FORM:ERROR:date"):""),this.isPaintShop()){var n=this.$id("startedAt"),i=this.$id("finishedAt");if(!t.isValid())return;this.paintShopTimeFocused||(n.val(t.format("HH:mm")),i.val(t.add(8,"hours").format("HH:mm")))}},getShiftMoment:function(){var e=this.$id("date"),t=parseInt(this.$("input[name=shift]:checked").val(),10);return n.getMoment(e.val()+" 06:00:00","YYYY-MM-DD HH:mm:ss").add(8*(t-1),"hours")},getType:function(){return this.$("input[name=type]:checked").val()},isPaintShop:function(){return"paintShop"===this.getType()},showFieldError:function(e,t){return e.hasClass("select2-offscreen")?e.select2("focus"):e.focus(),this.$errorMessage=i.msg.show({type:"error",time:3e3,text:r("pressWorksheets","FORM:ERROR:"+t)}),!1},setUpOrderSelect2:function(e){var t=this;e.removeClass("form-control"),e.select2({allowClear:!0,minimumInputLength:6,ajax:{cache:!0,quietMillis:300,url:function(e){return"/production/orders?nc12="+encodeURIComponent(e)},results:function(e){return{results:(e||[]).map(function(e){return{id:e._id,text:e._id+" - "+(e.name||"?"),data:e}})}}}}),e.on("change",function(n){var r=e.closest(".pressWorksheets-form-order"),i=r.next(),o=t.isLastOrderRow(r);if(!n.added&&!o){var a=r.next().next();return a.length||(a=r.prev().prev()),a.find(".pressWorksheets-form-part").select2("focus"),i.is(":visible")?i.fadeOut(function(){i.remove()}):i.remove(),r.fadeOut(function(){r.remove(),t.setUpPartValidation(),t.recalcOrderNoColumn()}),void(n.added||2!==t.$(".pressWorksheets-form-order").length||t.$id("typeChangeWarning").fadeOut())}var s=[];n.added&&Array.isArray(n.added.data.operations)&&n.added.data.operations.forEach(function(e){""!==e.workCenter&&-1!==e.laborTime&&s.push(e)});var u=r.find(".pressWorksheets-form-operation");t.setUpOperationSelect2(u,s.map(function(e){return{id:e.no,text:e.no+" - "+(e.name||"?")}})),s.length?u.select2("val",s[0].no).select2("focus"):(u.select2("destroy"),u.select2("destroy"),u.addClass("form-control").val(""),e.select2("focus")),o&&t.addOrderRow(r)})},setUpOperationSelect2:function(e,t){e.removeClass("form-control"),e.select2({openOnEnter:null,allowClear:!1,data:t||[]})},setUpProdLineSelect2:function(e,t){e.removeClass("form-control"),e.select2({width:"185px",openOnEnter:null,allowClear:!1,data:this.prodLinesData}),t&&e.select2("val",t.find(".pressWorksheets-form-prodLine").select2("val"))},isLastOrderRow:function(e){return this.$("tbody > tr:last-child").prev()[0]===e[0]},addOrderRow:function(e,n){n=n!==!1,++this.lastOrderNo;var r=t(f({no:this.lastOrderNo,lossReasons:this.lossReasons,downtimeReasons:this.downtimeReasons})),i=t(h({no:this.lastOrderNo,colspan:r.find("td").length}));i.hide(),this.lastOrderNo>0&&n&&r.hide(),this.$(".pressWorksheets-form-prodLine:last-child").attr("required",!0),this.$(".pressWorksheets-form-quantityDone:last-child").attr("required",!0),this.isPaintShop()||(this.$(".pressWorksheets-form-startedAt:last-child").attr("required",!0),this.$(".pressWorksheets-form-finishedAt:last-child").attr("required",!0)),this.$(".pressWorksheets-form-orders > tbody").append(r).append(i),this.lastOrderNo>0&&n&&r.fadeIn(),this.setUpOrderSelect2(r.find(".pressWorksheets-form-part")),this.setUpProdLineSelect2(r.find(".pressWorksheets-form-prodLine"),e);var o=this.$id("typeChangeWarning");return n?this.lastOrderNo>0?o.fadeIn():o.fadeOut():o.toggle(this.lastOrderNo>0),n&&(this.setUpPartValidation(),this.recalcOrderNoColumn()),e&&this.copyDataFromPrevRow(e),r},copyDataFromPrevRow:function(e){var t=e.prev();t.length&&(e.find(".pressWorksheets-form-prodLine").select2("val",t.find(".pressWorksheets-form-prodLine").select2("val")),e.find(".pressWorksheets-form-startedAt").val(t.find(".pressWorksheets-form-finishedAt").val()))},setUpPartValidation:function(){var e=this.$("input.pressWorksheets-form-part");e.last().attr("required",1===e.length)},recalcOrderNoColumn:function(){this.$(".pressWorksheets-form-order").each(function(e){var n=t(this),r=n.next();n.find(".pressWorksheets-form-no").text(e+1+".");var i=e%2!==0;n.toggleClass("is-even",i),r.toggleClass("is-even",i)})},togglePaintShop:function(){var e=this.isPaintShop();this.$el.toggleClass("pressWorksheets-form-paintShop",e),this.$(".pressWorksheets-form-group-paintShop input").attr("required",e)},validateTimes:function(e){if(this.isPaintShop())this.checkPaintShopValidity();else if(e)this.checkOrderTimesValidity(e);else{var t=this;this.$(".pressWorksheets-form-startedAt").each(function(){t.checkOrderTimesValidity(this)})}},checkPaintShopValidity:function(){var e=this.$id("startedAt"),t=this.$id("finishedAt");e[0].setCustomValidity(""),t[0].setCustomValidity(""),this.checkTimesValidity(null,e,t)},checkOrderTimesValidity:function(e){var t=this.$(e).closest(".pressWorksheets-form-order"),n=t.find(".pressWorksheets-form-startedAt"),r=t.find(".pressWorksheets-form-finishedAt");n[0].setCustomValidity(""),r[0].setCustomValidity(""),n.prop("required")&&""!==n.val()&&""!==r.val()&&this.checkTimesValidity(t,n,r)},checkTimesValidity:function(e,t,i){var o=this.$id("date").val();o||(o=n.format(new Date,"YYYY-MM-DD"));var a=this.getShiftMoment(),s=a.valueOf(),u=s+288e5,c=this.getTimeFromString(o,t.val(),!1),l=this.getTimeFromString(o,i.val(),!0);if(s>c||c>u)return t[0].setCustomValidity(r("pressWorksheets","FORM:ERROR:startedAt:boundries"));if(s>l||l>u)return i[0].setCustomValidity(r("pressWorksheets","FORM:ERROR:finishedAt:boundries"));if(c>=l)return i[0].setCustomValidity(r("pressWorksheets","FORM:ERROR:finishedAt:gt"));var d=(l-c)/36e5,p=this.countDowntimeDuration(this.isPaintShop()?null:e);return p>=d?i[0].setCustomValidity(r("pressWorksheets","FORM:ERROR:finishedAt:downtime")):void 0},checkValidity:function(){if(!this.checkOverlapping)return!0;for(var e=this.el.querySelectorAll(".pressWorksheets-form-order"),t=e.length-1,n=this.$id("date").val(),r={},i=0;t>i;++i){var o=e[i],a=o.querySelector("input.pressWorksheets-form-prodLine").value;r[a]||(r[a]=[]),r[a].push({orderRowEl:o,startedAt:this.getTimeFromString(n,o.querySelector(".pressWorksheets-form-startedAt").value,!1),finishedAt:this.getTimeFromString(n,o.querySelector(".pressWorksheets-form-finishedAt").value,!1)})}var s=!0,u=this;return Object.keys(r).forEach(function(e){if(s)for(var t=r[e];t.length;)for(var n=t.shift(),i=0,o=t.length;o>i;++i){var a=t[i];if(a.startedAt>=n.startedAt&&a.startedAt<n.finishedAt||a.finishedAt>n.startedAt&&a.finishedAt<=n.finishedAt)return void(s=u.showOverlappingError(n,a));if(n.startedAt>=a.startedAt&&n.startedAt<a.finishedAt||n.finishedAt>a.startedAt&&n.finishedAt<=a.finishedAt)return void(s=u.showOverlappingError(a,n))}}),s},showOverlappingError:function(e,t){return this.$errorMessage=i.msg.show({type:"error",time:5e3,text:r("pressWorksheets","FORM:ERROR:overlapping")}),e.orderRowEl.classList.add("is-overlapping"),t.orderRowEl.classList.add("is-overlapping"),this.timers.removeIsOverlapping=setTimeout(this.removeIsOverlapping.bind(this),5e3),this.$(".btn-danger").fadeIn(),!1},removeIsOverlapping:function(){this.timers.removeIsOverlapping&&(clearTimeout(this.timers.removeIsOverlapping),this.timers.removeIsOverlapping=null),this.$(".is-overlapping").removeClass("is-overlapping"),this.$(".btn-danger").fadeOut()},countDowntimeDuration:function(e){var t=0;return(e||this.$el).find(".pressWorksheets-form-count.is-downtime").each(function(){var e=parseInt(this.value,10);t+=isNaN(e)||0>=e?0:e}),t/60},getTimeFromString:function(e,t,r){var i=n.getMoment(e+" "+t+":00","YYYY-MM-DD HH:mm:ss");return r&&6===i.hours()&&0===i.minutes()&&i.hours(5).minutes(59).seconds(59).milliseconds(999),i.hours()<6&&i.add(1,"days"),i.valueOf()},serializeToForm:function(){return{}},fillModelData:function(){this.filling=!0,this.fillPersonnel(),this.fillDateAndTimes();var e=this.model.get("orders");Array.isArray(e)&&e.length&&e.forEach(this.fillOrder,this),this.filling=!1},fillType:function(){this.$("input[name=type][value="+this.model.get("type")+"]").trigger("click",!0)},fillPersonnel:function(){function e(e){return{id:e.id,text:e.label}}var t=this.model.get("operators"),n=this.model.get("operator"),r=this.model.get("master");Array.isArray(t)&&t.length&&this.$id("operators").select2("data",t.map(e)),n&&this.$id("operator").select2("data",e(n)),r&&this.$id("master").select2("data",e(r))},fillDateAndTimes:function(){this.$id("date").val(n.format(this.model.get("date"),"YYYY-MM-DD")),this.$("input[name=shift][value="+this.model.get("shift")+"]").click(),"paintShop"===this.model.get("type")&&(this.$id("startedAt").val(this.model.get("startedAt")),this.$id("finishedAt").val(this.model.get("finishedAt")))},fillOrder:function(t){var n=this.addOrderRow(null,!1),r=n.find(".pressWorksheets-form-part"),i=n.find(".pressWorksheets-form-operation");r.attr("data-prodShiftOrder",t.prodShiftOrder).select2("data",{id:t.nc12,text:t.nc12+" - "+(t.name||"?"),data:t.orderData}),this.setUpOperationSelect2(i,e.map(t.orderData.operations,function(e){return{id:e.no,text:e.no+" - "+(e.name||"?")}})),i.select2("val",t.operationNo),n.find(".pressWorksheets-form-prodLine").select2("val",t.prodLine),n.find(".pressWorksheets-form-quantityDone").val(t.quantityDone),Array.isArray(t.losses)&&t.losses.forEach(this.fillLoss.bind(this,n)),Array.isArray(t.downtimes)&&t.downtimes.forEach(this.fillDowntime.bind(this,n)),"paintShop"!==this.model.get("type")&&(n.find(".pressWorksheets-form-startedAt").val(t.startedAt),n.find(".pressWorksheets-form-finishedAt").val(t.finishedAt)),t.notes&&n.next().show().find("textarea").val(t.notes)},fillLoss:function(e,t){e.find('.is-loss[data-reason="'+t.reason+'"]').val(t.count)},fillDowntime:function(e,t){var n=e.find('.is-downtime[data-reason="'+t.reason+'"]');n.attr("data-prodDowntime",t.prodDowntime).val(t.duration)},toggleExistingWarning:function(){var e=this.$id("existingWarning");this.existingWorksheets.length?e.html(r("pressWorksheets","FORM:existingWarning",{count:this.existingWorksheets.length,links:this.existingWorksheets.map(function(e){return'<a href="'+e.genClientUrl()+'">'+e.getLabel()+"</a>"}).join(", ")})).fadeIn():e.fadeOut()},checkForExistingWorksheet:function(){var e=new Date(this.$id("date").val()+" 06:00:00"),t=parseInt(this.$("input[name=shift]:checked").val(),10),n=this.$id("operator").val(),r=this.$id("existingWarning");if(isNaN(e.getTime())||!t||!n.length)return r.fadeOut();2===t?e.setHours(14):3===t&&e.setHours(22);var i=this.existingWorksheets.rqlQuery.selector;i.args=[{name:"eq",args:["date",e.getTime()]},{name:"eq",args:["operators.id",n]}],this.model.id&&i.args.push({name:"ne",args:["_id",this.model.id]}),this.promised(this.existingWorksheets.fetch({reset:!0}))},onKeyDown:function(e){e.altKey&&13===e.keyCode&&this.$(".pressWorksheets-form-order:last-child").find(".pressWorksheets-form-part").select2("focus")}})}),define("app/pressWorksheets/pages/PressWorksheetAddFormPage",["app/core/pages/AddFormPage","app/lossReasons/LossReasonCollection","../views/PressWorksheetFormView"],function(e,t,n){return e.extend({FormView:n,load:function(e){return this.model.lossReasons=new t(null,{rqlQuery:"select(label)&sort(position)&position>=0"}),e(this.model.lossReasons.fetch({reset:!0}))}})}),define("app/pressWorksheets/pages/PressWorksheetEditFormPage",["app/core/pages/EditFormPage","app/lossReasons/LossReasonCollection","../views/PressWorksheetFormView"],function(e,t,n){return e.extend({FormView:n,load:function(e){return this.model.lossReasons=new t(null,{rqlQuery:"select(label)&sort(position)&position>=0"}),e(this.model.fetch(),this.model.lossReasons.fetch({reset:!0}))}})}),define("app/nls/pressWorksheets",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Worksheets"},"BREADCRUMBS:details":function(){return"Worksheet"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the worksheets :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the worksheet :("},"MSG:DELETED":function(e){return"Worksheet <em>"+t.v(e,"label")+"</em> was deleted."},"MSG:jump:404":function(e){return"Couldn't find a worksheet with ID <em>"+t.v(e,"rid")+"</em> :("
},"PAGE_ACTION:add":function(){return"Add worksheet"},"PAGE_ACTION:edit":function(){return"Edit worksheet"},"PAGE_ACTION:delete":function(){return"Delete worksheet"},"PAGE_ACTION:jump:title":function(){return"Jump to worksheet by ID"},"PAGE_ACTION:jump:placeholder":function(){return"Worksheet ID"},"PANEL:TITLE:details":function(){return"Worksheet's details"},"PANEL:TITLE:addForm":function(){return"Add worksheet form"},"PANEL:TITLE:editForm":function(){return"Edit worksheet form"},"PANEL:TITLE:details:orders":function(){return"Parts"},"filter:submit":function(){return"Filter worksheets"},"filter:date":function(){return"Date"},"filter:shift":function(){return"Shift"},"filter:type:any":function(){return"Any"},"filter:type:mech":function(){return"Treatment"},"filter:type:paintShop":function(){return"Paint shop"},"filter:type:optics":function(){return"Optics"},"filter:mine":function(){return"Only mine"},"filter:mine:title":function(){return"Limit the worksheet to those added by you from the newest to the oldest!"},"filter:user:master":function(){return"Master"},"filter:user:operators":function(){return"Operator"},"PROPERTY:pressWorksheet":function(){return"Worksheet"},"PROPERTY:user":function(){return"User"},"PROPERTY:rid":function(){return"ID"},"PROPERTY:operators":function(){return"Operators"},"PROPERTY:operator":function(){return"Signed operator"},"PROPERTY:master":function(){return"Signed master"},"PROPERTY:date":function(){return"Date"},"PROPERTY:shift":function(){return"Shift"},"PROPERTY:type":function(){return"Type"},"PROPERTY:type:mech":function(){return"Treatment"},"PROPERTY:type:paintShop":function(){return"Paint shop"},"PROPERTY:type:optics":function(){return"Optics"},"PROPERTY:startedAt":function(){return"Started at"},"PROPERTY:finishedAt":function(){return"Finished at"},"PROPERTY:createdAt":function(){return"Created at"},"PROPERTY:creator":function(){return"Creator"},"PROPERTY:divisions":function(){return"Divisions"},"PROPERTY:order.part":function(){return"Part"},"PROPERTY:order.operation":function(){return"Operation"},"PROPERTY:order.#":function(){return"#"},"PROPERTY:order.nc12":function(){return"12NC"},"PROPERTY:order.name":function(){return"Part name"},"PROPERTY:order.operationName":function(){return"Operation name"},"PROPERTY:order.operationNo":function(){return"Operation no"},"PROPERTY:order.division":function(){return"Division"},"PROPERTY:order.prodLine":function(){return"Machine"},"PROPERTY:order.quantityDone":function(){return"Good qty"},"PROPERTY:order.startedAt":function(){return"Started at"},"PROPERTY:order.finishedAt":function(){return"Finished at"},"PROPERTY:order.losses":function(){return"Losses [items]"},"PROPERTY:order.downtimes":function(){return"Downtimes by master's instruction [minutes]"},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Worksheet deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete worksheet"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen worksheet?<br><br>Along with the worksheet, all Orders and Downtimes defined in it will be deleted."},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Are you sure you want to delete the <em>"+t.v(e,"label")+"</em> worksheet? Along with the worksheet, all Orders and Downtimes defined in it will be deleted."},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the worksheet :-("},"FORM:ACTION:add":function(){return"Add worksheet"},"FORM:ACTION:edit":function(){return"Edit worksheet"},"FROM:ACTION:saveOverlapping":function(){return"Save worksheet with overlapping orders"},"FORM:ERROR:addFailure":function(){return"Failed to add the worksheet :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the worksheet :-("},"FORM:ERROR:startedAt:boundries":function(){return"Started at must be within the boundries of the selected shift."},"FORM:ERROR:finishedAt:boundries":function(){return"Finished at must be within the boundries of the selected shift."},"FORM:ERROR:finishedAt:gt":function(){return"Finished at must be later than Started at."},"FORM:ERROR:finishedAt:downtime":function(){return"Total downtime must be less than the order's duration."},"FORM:ERROR:overlapping":function(){return"Time of the orders on the same machines are overlapping!"},"FORM:ERROR:date":function(){return"Shift's time cannot be in the future."},"FORM:PLACEHOLDER:part":function(){return"Search parts by 12NC..."},"FORM:PLACEHOLDER:operation":function(){return"Choose an operation..."},"FORM:PLACEHOLDER:prodLine":function(){return"Choose a machine..."},"FORM:focusLastPart":function(){return"(ALT+Enter focuses the last search field)"},"FORM:typeChangeWarning":function(){return"<strong>WARNING!</strong> Changing of the type will erase all entered parts!"},"FORM:existingWarning":function(e){return"<strong>WARNING!</strong> "+t.p(e,"count",0,"en",{one:"Worksheet",other:"Worksheets"})+" for the specified Date, Shift and Signed operator already "+t.p(e,"count",0,"en",{one:"exists",other:"exist"})+": "+t.v(e,"links")+"."}},pl:!0}}),define("app/nls/pl/pressWorksheets",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Karty pracy"},"BREADCRUMBS:details":function(){return"Karta pracy"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie kart pracy nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie karty pracy nie powiod≈Ço siƒô :("},"MSG:DELETED":function(e){return"Karta pracy <em>"+t.v(e,"label")+"</em> zosta≈Ça usuniƒôta."},"MSG:jump:404":function(e){return"Nie znaleziono karty pracy o ID <em>"+t.v(e,"rid")+"</em> :("},"PAGE_ACTION:add":function(){return"Dodaj kartƒô pracy"},"PAGE_ACTION:edit":function(){return"Edytuj kartƒô pracy"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ kartƒô pracy"},"PAGE_ACTION:jump:title":function(){return"Skocz do karty pracy po ID"},"PAGE_ACTION:jump:placeholder":function(){return"ID karty pracy"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy karty pracy"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania karty pracy"},"PANEL:TITLE:editForm":function(){return"Formularz edycji karty pracy"},"PANEL:TITLE:details:orders":function(){return"Lista czƒô≈õci"},"filter:submit":function(){return"Filtruj karty pracy"},"filter:shift":function(){return"Zmiana"},"filter:type:any":function(){return"Dowolny"},"filter:type:mech":function(){return"Obr. mech."},"filter:type:paintShop":function(){return"Malarnia"},"filter:type:optics":function(){return"M. optyki"},"filter:mine":function(){return"Tylko moje"},"filter:mine:title":function(){return"Ogranicz listƒô kart pracy do dodanych przez Ciebie w kolejno≈õci od najnowszej do najstarszej!"},"filter:user:master":function(){return"Mistrz"},"filter:user:operators":function(){return"Operator"},"PROPERTY:pressWorksheet":function(){return"Karta pracy"},"PROPERTY:user":function(){return"U≈ºytkownik"},"PROPERTY:rid":function(){return"ID"},"PROPERTY:operators":function(){return"Nastawiacze/operatorzy"},"PROPERTY:operator":function(){return"Podpisany nastawiacz/operator"},"PROPERTY:master":function(){return"Podpisany mistrz"},"PROPERTY:date":function(){return"Data"},"PROPERTY:shift":function(){return"Zmiana"},"PROPERTY:type":function(){return"Typ"},"PROPERTY:type:mech":function(){return"Obr√≥bka mechaniczna"},"PROPERTY:type:paintShop":function(){return"Malarnia"},"PROPERTY:type:optics":function(){return"Monta≈º optyki"},"PROPERTY:startedAt":function(){return"Godz. rozp."},"PROPERTY:finishedAt":function(){return"Godz. zak."},"PROPERTY:createdAt":function(){return"Czas dodania"},"PROPERTY:creator":function(){return"Dodana przez"},"PROPERTY:divisions":function(){return"Wydzia≈Çy"},"PROPERTY:order.part":function(){return"Czƒô≈õƒá"},"PROPERTY:order.operation":function(){return"Operacja"},"PROPERTY:order.#":function(){return"Lp."},"PROPERTY:order.nc12":function(){return"12NC czƒô≈õci"},"PROPERTY:order.name":function(){return"Nazwa czƒô≈õci"},"PROPERTY:order.operationName":function(){return"Nazwa operacji"},"PROPERTY:order.operationNo":function(){return"Numer oper."},"PROPERTY:order.division":function(){return"Wydzia≈Ç"},"PROPERTY:order.prodLine":function(){return"Maszyna"},"PROPERTY:order.quantityDone":function(){return"Ilo≈õƒá dobrych"},"PROPERTY:order.startedAt":function(){return"Godz. rozp."},"PROPERTY:order.finishedAt":function(){return"Godz. zak."},"PROPERTY:order.losses":function(){return"Straty materia≈Çowe [sztuki]"},"PROPERTY:order.downtimes":function(){return"Straty czasu z polecenia mistrza [minuty]"},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia karty pracy"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ kartƒô pracy"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybranƒÖ kartƒô pracy?<br><br>Wraz z kartƒÖ pracy usuniƒôte zostanƒÖ zdefiniowane w niej Zlecenia i Przestoje."},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá kartƒô pracy <em>"+t.v(e,"label")+"</em>?<br><br>Wraz z kartƒÖ pracy usuniƒôte zostanƒÖ zdefiniowane w niej Zlecenia i Przestoje."},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá karty pracy :-("},"FORM:ACTION:add":function(){return"Dodaj kartƒô pracy"},"FORM:ACTION:edit":function(){return"Edytuj kartƒô pracy"},"FROM:ACTION:saveOverlapping":function(){return"Zapisz kartƒô pracy z pokrywajƒÖcymi siƒô czasami zlece≈Ñ"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá karty pracy :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá karty pracy :-("},"FORM:ERROR:startedAt:boundries":function(){return"Godz. rozp. musi mie≈õciƒá siƒô w zakresie godzinowym wybranej zmiany."},"FORM:ERROR:finishedAt:boundries":function(){return"Godz. zak. musi mie≈õciƒá siƒô w zakresie godzinowym wybranej zmiany."},"FORM:ERROR:finishedAt:gt":function(){return"Godz. zak. musi byƒá p√≥≈∫niejsza ni≈º Godz. rozp."},"FORM:ERROR:finishedAt:downtime":function(){return"Suma przestoj√≥w musi byƒá kr√≥tsza ni≈º czas trwania zlecenia."},"FORM:ERROR:overlapping":function(){return"Czasy zlece≈Ñ na tych samych maszynach pokrywajƒÖ siƒô!"},"FORM:ERROR:date":function(){return"Czas zmiany nie mo≈ºe byƒá z przysz≈Ço≈õci."},"FORM:PLACEHOLDER:part":function(){return"Szukaj czƒô≈õci po 12NC..."},"FORM:PLACEHOLDER:operation":function(){return"Wybierz operacjƒô..."},"FORM:PLACEHOLDER:prodLine":function(){return"Wybierz maszynƒô..."},"FORM:focusLastPart":function(){return"(skr√≥t ALT+Enter zaznaczy ostatnie pole)"},"FORM:typeChangeWarning":function(){return"<strong>UWAGA!</strong> Zmiana typu wyczy≈õci listƒô wykonanych czƒô≈õci!"},"FORM:existingWarning":function(e){return"<strong>UWAGA!</strong> Dla wybranej Daty, Zmiany i Podpisanego nastawiacza/operatora "+t.p(e,"count",0,"pl",{one:"istnieje ju≈º karta pracy",other:"istniejƒÖ ju≈º karty pracy"})+": "+t.v(e,"links")+"."}}}),define("app/pressWorksheets/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","./PressWorksheet","./pages/PressWorksheetListPage","./pages/PressWorksheetDetailsPage","./pages/PressWorksheetAddFormPage","./pages/PressWorksheetEditFormPage","i18n!app/nls/pressWorksheets"],function(e,t,n,r,i,o,a,s,u){var c=n.auth("LOCAL","PRESS_WORKSHEETS:VIEW"),l=n.auth("PRESS_WORKSHEETS:MANAGE");e.map("/pressWorksheets",c,function(e){t.showPage(new o({rql:e.rql}))}),e.map("/pressWorksheets;add",l,function(){t.showPage(new s({model:new i}))}),e.map("/pressWorksheets/:id",c,function(e){t.showPage(new a({model:new i({_id:e.params.id})}))}),e.map("/pressWorksheets/:id;edit",l,function(e){t.showPage(new u({model:new i({_id:e.params.id})}))}),e.map("/pressWorksheets/:id;delete",l,r.bind(null,i))}),define("app/core/util/getShiftEndDate",["app/time"],function(e){return function(t,n){var r=e.getMoment(t);return r.hours(1===n?6:2===n?14:22),r.add(8,"hours").subtract(1,"seconds"),r.toDate()}}),define("app/core/templates/userInfo",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<span class="userInfo">\n  '),userInfo?(buf.push("\n  ",escape(userInfo.label),"\n  "),(userInfo.cname||userInfo.ip)&&buf.push("\n  (",escape(userInfo.cname||userInfo.ip),")\n  "),buf.push("\n  ")):buf.push("\n  -\n  "),buf.push("\n</span>\n")}();return buf.join("")}}),define("app/prodDowntimes/util/decorateProdDowntime",["app/time","app/i18n","app/user","app/data/aors","app/data/subdivisions","app/data/mrpControllers","app/data/prodFlows","app/data/prodLines","app/data/downtimeReasons","app/data/views/renderOrgUnitPath","app/core/templates/userInfo"],function(e,t,n,r,i,o,a,s,u,c,l){return function(o){var d=o.toJSON();d.statusClassName=o.getCssClassName(),d.className=d.statusClassName,d.reasonComment&&d.reasonComment.trim().length&&(d.className+=" is-withReasonComment");var p=r.get(d.aor);d.aor=p?p.getLabel():d.aor;var f=s.get(d.prodLine);f&&(d.prodLine=f.getLabel(),d.prodLinePath=c(f,!1,!1));var h=u.get(d.reason);if(d.reason=h?h.getLabel():d.reason,d.startedAt&&d.finishedAt){var m=Date.parse(d.startedAt),g=Date.parse(d.finishedAt),y=Math.round((g-m)/1e3);d.duration=e.toString(y)}else d.duration="-";d.startedAt=e.format(d.startedAt,"YYYY-MM-DD HH:mm:ss"),d.finishedAt=d.finishedAt?e.format(d.finishedAt,"YYYY-MM-DD HH:mm:ss"):t("prodDowntimes","NO_DATA:finishedAt"),d.corroboratedAt=e.format(d.corroboratedAt,"YYYY-MM-DD HH:mm:ss")||"-",d.order=d.prodShiftOrder?d.orderId+"; "+d.operationNo:t("prodDowntimes","NO_DATA:order"),n.isAllowedTo("PROD_DATA:VIEW")&&d.prodShiftOrder&&(d.order='<a href="#prodShiftOrders/'+d.prodShiftOrder+'">'+d.order+"</a>"),d.date=d.date?e.format(d.date,"YYYY-MM-DD"):"?",d.shift=d.shift?t("core","SHIFT:"+d.shift):"?",d.prodShiftText=d.date+", "+d.shift,n.isAllowedTo("PROD_DATA:VIEW")&&d.prodShift&&(d.prodShiftText='<a href="#prodShifts/'+d.prodShift+'">'+d.prodShiftText+"</a>"),d.masterInfo=l({userInfo:d.master}),d.leaderInfo=l({userInfo:d.leader}),d.operatorInfo=l({userInfo:d.operator}),d.creatorInfo=l({userInfo:d.creator}),d.corroboratorInfo=l({userInfo:d.corroborator});var v=i.get(d.subdivision),w=a.get(d.prodFlow);return d.subdivision=v?v.getLabel():"?",d.prodFlow=w?w.getLabel():"?",d.mrpControllers=Array.isArray(d.mrpControllers)&&d.mrpControllers.length?d.mrpControllers.join("; "):"?",d}}),define("app/prodDowntimes/ProdDowntime",["../time","../core/Model","../core/util/getShiftEndDate","./util/decorateProdDowntime"],function(e,t,n,r){var i={undecided:"warning",confirmed:"success",rejected:"danger"};return t.extend({urlRoot:"/prodDowntimes",clientUrlRoot:"#prodDowntimes",topicPrefix:"prodDowntimes",privilegePrefix:"PROD_DOWNTIMES",nlsDomain:"prodDowntimes",labelAttribute:"rid",defaults:{division:null,subdivision:null,mrpControllers:null,prodFlow:null,workCenter:null,prodLine:null,prodShift:null,prodShiftOrder:null,date:null,shift:null,aor:null,reason:null,reasonComment:null,decisionComment:null,status:null,startedAt:null,finishedAt:null,corroborator:null,corroboratedAt:null,creator:null,master:null,leader:null,operator:null,operators:null,mechOrder:null,orderId:null,operationNo:null},serialize:function(){return r(this)},getCssClassName:function(){return i[this.get("status")]},finish:function(){if(null!=this.get("finishedAt"))return null;var t=e.getMoment().toDate(),r=n(this.get("date"),this.get("shift"));return t>r&&(t=r),this.set("finishedAt",t),{_id:this.id,finishedAt:t}},isEditable:function(){return null!=this.get("finishedAt")&&null===this.get("pressWorksheet")}},{STATUS:{UNDECIDED:"undecided",CONFIRMED:"confirmed",REJECTED:"rejected"},parse:function(e){return["date","startedAt","finishedAt","createdAt","corroboratedAt"].forEach(function(t){"string"==typeof e[t]&&(e[t]=new Date(e[t]))}),e}})}),define("app/nls/prodDowntimes",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Downtimes"},"BREADCRUMBS:corroborate":function(){return"Corroboration"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the downtimes :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the downtime :("},"MSG:DELETED":function(e){return"Downtime <em>"+t.v(e,"label")+"</em> was deleted."},"MSG:jump:404":function(e){return"Couldn't find a downtime with ID <em>"+t.v(e,"rid")+"</em> :("},"PAGE_ACTION:export":function(){return"Export downtimes"},"PAGE_ACTION:edit":function(){return"Edit downtime"},"PAGE_ACTION:delete":function(){return"Delete downtime"},"PAGE_ACTION:jump:title":function(){return"Jump to downtime by ID"},"PAGE_ACTION:jump:placeholder":function(){return"Downtime ID"},"PANEL:TITLE:details":function(){return"Downtime's details"},"PANEL:TITLE:details:corroboration":function(){return"Downtime corroboration"},"PANEL:TITLE:editForm":function(){return"Edit downtime form"},"PANEL:TITLE:addForm":function(){return"Add downtime form"},"filter:submit":function(){return"Filter downtimes"},"filter:tooltip:in":function(){return"Checked: all selected\nUnchecked: all but the selected"},"filter:placeholder:aor":function(){return"Any area of responsibility"},"filter:placeholder:reason":function(){return"Any downtime reason"},"filter:placeholder:orgUnit":function(){return"Any org unit"},"LIST:ACTION:corroborate":function(){return"Corroborate downtime"},"PROPERTY:rid":function(){return"ID"},"PROPERTY:mrpControllers":function(){return"MRP Controller"},"PROPERTY:prodFlow":function(){return"Production flow"},"PROPERTY:orgUnit":function(){return"Org Unit"},"PROPERTY:aor":function(){return"Area of responsibility"},"PROPERTY:prodLine":function(){return"Production line"},"PROPERTY:reason":function(){return"Downtime reason"},"PROPERTY:reasonComment":function(){return"Reason comment"},"PROPERTY:decisionComment":function(){return"Decision comment"},"PROPERTY:order":function(){return"Order"},"PROPERTY:orderId":function(){return"Order ID"},"PROPERTY:startedAt":function(){return"Started at"},"PROPERTY:finishedAt":function(){return"Finished at"},"PROPERTY:status":function(){return"Status"},"PROPERTY:status:undecided":function(){return"Undecided"},"PROPERTY:status:confirmed":function(){return"Confirmed"},"PROPERTY:status:rejected":function(){return"Rejected"},"PROPERTY:shift":function(){return"Shift"},"PROPERTY:master":function(){return"Master"},"PROPERTY:leader":function(){return"Leader"},"PROPERTY:operator":function(){return"Operator"},"PROPERTY:operators":function(){return"Operators"},"PROPERTY:creator":function(){return"Creator"},"PROPERTY:corroborator":function(){return"Corroborator"},"PROPERTY:corroboratedAt":function(){return"Corroborated at"},"PROPERTY:duration":function(){return"Duration"},"PROPERTY:pressWorksheet":function(){return"Worksheet"},"FORM:ACTION:add":function(){return"Add downtime"},"FORM:ACTION:edit":function(){return"Edit downtime"},"FORM:ERROR:addFailure":function(){return"Failed to add the downtime :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the downtime :-("},"FORM:ERROR:startedAt":function(){return"Started at must be between the shift's time boundries!"},"FORM:ERROR:finishedAt":function(){return"Finished at must be between the shift's time boundries!"},"FORM:ERROR:times":function(){return"Finished at must be after Started at!"},"FORM:ERROR:INVALID_CHANGES":function(){return"Cannot edit the downtime: no valid changes were detected :("},"FORM:ERROR:INPUT":function(){return"Invalid input data!"},"shift+date":function(e){return t.v(e,"date")+", "+t.v(e,"shift")+" shift"},"NO_DATA:order":function(){return"<em>no order</em>"},"NO_DATA:finishedAt":function(){return"<em>unfinished</em>"},"NO_DATA:corroboration":function(){return"Downtime wasn't corroborated yet."},"corroborate:title":function(){return"Downtime corroboration"},"corroborate:decisionComment":function(){return"Optional decision comment..."},"corroborate:cancel":function(){return"Cancel corroboration"},"corroborate:confirm":function(){return"Confirm downtime"},"corroborate:reject":function(){return"Reject downtime"},"corroborate:msg:failure":function(e){return"Failed to corroborate the downtime: "+t.v(e,"error")},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Downtime deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete downtime"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen downtime?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Are you sure you want to delete the <em>"+t.v(e,"label")+"</em> downtime?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the downtime :-("},"filter:message":function(){return"If after going to the downtime details page you want to go back to the downtimes list page with the previously set filters, then you should use the browser's <em><i class='fa fa-arrow-left'></i> Back</em> button or press the <kbd><i class='fa fa-long-arrow-left'></i> Backspace</kbd> key on your keyboard."}},pl:!0}}),define("app/nls/pl/prodDowntimes",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Przestoje"},"BREADCRUMBS:corroborate":function(){return"Potwierdzanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie przestoj√≥w nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie przestoju nie powiod≈Ço siƒô :("},"MSG:DELETED":function(e){return"Przest√≥j <em>"+t.v(e,"label")+"</em> zosta≈Ç usuniƒôty."},"MSG:jump:404":function(e){return"Nie znaleziono przestoju o ID <em>"+t.v(e,"rid")+"</em> :("},"PAGE_ACTION:export":function(){return"Eksportuj przestoje"},"PAGE_ACTION:edit":function(){return"Edytuj przest√≥j"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ przest√≥j"},"PAGE_ACTION:jump:title":function(){return"Skocz do przestoju po ID"},"PAGE_ACTION:jump:placeholder":function(){return"ID przestoju"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy przestoju"},"PANEL:TITLE:details:corroboration":function(){return"Potwierdzenie przestoju"},"PANEL:TITLE:editForm":function(){return"Formularz edycji danych przestoju"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania przestoju"},"filter:submit":function(){return"Filtruj przestoje"},"filter:tooltip:in":function(){return"Zaznaczony: wszystkie wybrane\nNiezaznaczony: wszystkie opr√≥cz wybranych"},"filter:placeholder:aor":function(){return"Dowolny obszar odpowiedzialno≈õci"},"filter:placeholder:reason":function(){return"Dowolny pow√≥d przestoju"},"filter:placeholder:orgUnit":function(){return"Dowolna jednostka organizacyjna"},"LIST:ACTION:corroborate":function(){return"Potwierd≈∫ przest√≥j"},"PROPERTY:rid":function(){return"ID"},"PROPERTY:mrpControllers":function(){return"Kontroler MRP"},"PROPERTY:prodFlow":function(){return"Przep≈Çyw"},"PROPERTY:orgUnit":function(){return"Jednostka organizacyjna"},"PROPERTY:aor":function(){return"Obszar odpowiedzialno≈õci"},"PROPERTY:prodLine":function(){return"Linia produkcyjna/Maszyna"},"PROPERTY:reason":function(){return"Pow√≥d przestoju"},"PROPERTY:reasonComment":function(){return"Komentarz powodu"},"PROPERTY:decisionComment":function(){return"Komentarz potwierdzenia"},"PROPERTY:order":function(){return"Wykonywane zlecenie"},"PROPERTY:orderId":function(){return"Zlecenie"},"PROPERTY:startedAt":function(){return"Czas rozpoczƒôcia"},"PROPERTY:finishedAt":function(){return"Czas zako≈Ñczenia"},"PROPERTY:status":function(){return"Status"},"PROPERTY:status:undecided":function(){return"Niepotwierdzony"},"PROPERTY:status:confirmed":function(){return"Potwierdzony"},"PROPERTY:status:rejected":function(){return"Odrzucony"},"PROPERTY:shift":function(){return"Zmiana"},"PROPERTY:master":function(){return"Mistrz"},"PROPERTY:leader":function(){return"Lider"},"PROPERTY:operator":function(){return"Operator"},"PROPERTY:operators":function(){return"Operatorzy"},"PROPERTY:creator":function(){return"U≈ºytkownik rozpoczynajƒÖcy"},"PROPERTY:corroborator":function(){return"U≈ºytkownik potwierdzajƒÖcy"},"PROPERTY:corroboratedAt":function(){return"Czas potwierdzenia"},"PROPERTY:duration":function(){return"Czas trwania"},"PROPERTY:pressWorksheet":function(){return"Karta pracy"},"FORM:ACTION:add":function(){return"Dodaj przest√≥j"},"FORM:ACTION:edit":function(){return"Edytuj przest√≥j"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá przestoju :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá przestoju :-("},"FORM:ERROR:startedAt":function(){return"Czas rozpoczƒôcia musi mie≈õciƒá siƒô w ramach Zmiany produkcyjnej!"},"FORM:ERROR:finishedAt":function(){return"Czas zako≈Ñczenia musi mie≈õciƒá siƒô w ramach Zmiany produkcyjnej!"},"FORM:ERROR:times":function(){return"Czas zako≈Ñczenia musi byƒá po Czasie rozpoczƒôcia!"},"FORM:ERROR:INVALID_CHANGES":function(){return"Nie mo≈ºna zmodyfikowaƒá przestoju: nie wykryto ≈ºadnych poprawnych zmian :("},"FORM:ERROR:INPUT":function(){return"Nieprawid≈Çowe dane wej≈õciowe!"},"shift+date":function(e){return t.v(e,"date")+", "+t.v(e,"shift")+" zmiana"},"NO_DATA:order":function(){return"<em>brak zlecenia</em>"},"NO_DATA:finishedAt":function(){return"<em>nie uko≈Ñczony</em>"},"NO_DATA:corroboration":function(){return"Przest√≥j nie zosta≈Ç jeszcze potwierdzony."},"corroborate:title":function(){return"Potwierdzenie przestoju"},"corroborate:decisionComment":function(){return"Opcjonalny komentarz do potwierdzenia..."},"corroborate:cancel":function(){return"Anuluj potwierdzenie"},"corroborate:confirm":function(){return"Zatwierd≈∫ przest√≥j"},"corroborate:reject":function(){return"Odrzuƒá przest√≥j"},"corroborate:msg:failure":function(e){return"Nie uda≈Ço siƒô potwierdziƒá przestoju: "+t.v(e,"error")},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia przestoju"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ przest√≥j"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany przest√≥j?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá przest√≥j <em>"+t.v(e,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá przestoju :-("},"filter:message":function(){return"Je≈ºeli po przej≈õciu do ekranu szczego≈Ç√≥w wybranego przestoju chcesz wr√≥ciƒá do ekranu listy przestoj√≥w zachowujƒÖc wcze≈õniej zdefiniowane filtry, to skorzystaj z przycisku <em><i class='fa fa-arrow-left'></i> Wstecz</em> przeglƒÖdarki lub wci≈õnij klawisz <kbd><i class='fa fa-long-arrow-left'></i> Backspace</kbd> na klawiaturze."}}}),define("app/prodDowntimes/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","./ProdDowntime","i18n!app/nls/prodDowntimes"],function(e,t,n,r,i){var o=n.auth("LOCAL","PROD_DOWNTIMES:VIEW"),a=n.auth("PROD_DOWNTIMES:MANAGE");e.map("/prodDowntimes",o,function(e){t.loadPage(["app/prodDowntimes/pages/ProdDowntimeListPage"],function(t){return new t({rql:e.rql})})}),e.map("/prodDowntimes/:id",function(e){t.loadPage(["app/prodDowntimes/pages/ProdDowntimeDetailsPage"],function(t){return new t({modelId:e.params.id})})}),e.map("/prodDowntimes/:id;corroborate",a,function(e,n){t.loadPage(["app/prodDowntimes/pages/CorroborateProdDowntimePage"],function(t){return new t({cancelUrl:n,modelId:e.params.id})})}),e.map("/prodDowntimes/:id;edit",n.auth("PROD_DATA:MANAGE"),function(e){t.loadPage(["app/prodDowntimes/pages/EditProdDowntimeFormPage"],function(t){return new t({model:new i({_id:e.params.id})})})}),e.map("/prodDowntimes/:id;delete",a,r.bind(null,i))}),define("app/nls/prodFlows",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Production flows"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the production flows :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the production flow :("},"MSG:DELETED":function(e){return"Production flow <em>"+t.v(e,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add production flow"},"PAGE_ACTION:edit":function(){return"Edit production flow"},"PAGE_ACTION:delete":function(){return"Delete production flow"},"PANEL:TITLE:details":function(){return"Production flow's details"},"PANEL:TITLE:addForm":function(){return"Add production flow form"},"PANEL:TITLE:editForm":function(){return"Edit production flow form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:name":function(){return"Name"},"PROPERTY:subdivision":function(){return"Subdivision"},"PROPERTY:mrpControllers":function(){return"MRP Controller"},"PROPERTY:deactivatedAt":function(){return"Deactivated at"},"FORM:ACTION:add":function(){return"Add production flow"},"FORM:ACTION:edit":function(){return"Edit production flow"},"FORM:ERROR:addFailure":function(){return"Failed to add the new production flow :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the production flow :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Production flow deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete production flow"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen production flow?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Are you sure you want to delete the <em>"+t.v(e,"label")+"</em> production flow?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the production flow :-("}},pl:!0}}),define("app/nls/pl/prodFlows",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]
},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Przep≈Çywy"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie przep≈Çyw√≥w nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie przep≈Çywu nie powiod≈Ço siƒô :("},"MSG:DELETED":function(e){return"Przep≈Çyw <em>"+t.v(e,"label")+"</em> zosta≈Ç usuniƒôty."},"PAGE_ACTION:add":function(){return"Dodaj przep≈Çyw"},"PAGE_ACTION:edit":function(){return"Edytuj przep≈Çyw"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ przep≈Çyw"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy przep≈Çywu"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania przep≈Çywu"},"PANEL:TITLE:editForm":function(){return"Formularz edycji przep≈Çywu"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:name":function(){return"Nazwa"},"PROPERTY:subdivision":function(){return"Dzia≈Ç"},"PROPERTY:mrpControllers":function(){return"Kontrolery MRP"},"PROPERTY:deactivatedAt":function(){return"Data dezaktywacji"},"FORM:ACTION:add":function(){return"Dodaj przep≈Çyw"},"FORM:ACTION:edit":function(){return"Edytuj przep≈Çyw"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá przep≈Çywu :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá przep≈Çywu :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia przep≈Çywu"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ przep≈Çyw"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany przep≈Çyw?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá przep≈Çyw <em>"+t.v(e,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá przep≈Çywu :-("}}}),define("app/prodFlows/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","../data/prodFlows","./ProdFlow","i18n!app/nls/prodFlows"],function(e,t,n,r,i,o){var a=n.auth("DICTIONARIES:VIEW"),s=n.auth("DICTIONARIES:MANAGE");e.map("/prodFlows",a,function(){t.loadPage(["app/core/pages/ListPage","app/prodFlows/views/ProdFlowListView"],function(e,t){return new e({ListView:t,collection:i})})}),e.map("/prodFlows/:id",function(e){t.loadPage(["app/prodFlows/pages/ProdFlowDetailsPage"],function(t){return new t({model:new o({_id:e.params.id})})})}),e.map("/prodFlows;add",s,function(){t.loadPage(["app/core/pages/AddFormPage","app/prodFlows/views/ProdFlowFormView"],function(e,t){return new e({FormView:t,model:new o})})}),e.map("/prodFlows/:id;edit",s,function(e){t.loadPage(["app/core/pages/EditFormPage","app/prodFlows/views/ProdFlowFormView"],function(t,n){return new t({FormView:n,model:new o({_id:e.params.id})})})}),e.map("/prodFlows/:id;delete",s,r.bind(null,o))}),define("app/nls/prodFunctions",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Production functions"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the production functions :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the production function :("},"MSG:DELETED":function(e){return"Production function <em>"+t.v(e,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add production function"},"PAGE_ACTION:edit":function(){return"Edit production function"},"PAGE_ACTION:delete":function(){return"Delete production function"},"PANEL:TITLE:details":function(){return"Production function's details"},"PANEL:TITLE:addForm":function(){return"Add production function form"},"PANEL:TITLE:editForm":function(){return"Edit production function form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:label":function(){return"Label"},"PROPERTY:fteMasterPosition":function(){return"Position in FTE (production)"},"PROPERTY:fteLeaderPosition":function(){return"Position in FTE (warehouse)"},"PROPERTY:direct":function(){return"DIRECT/INDIRECT"},"PROPERTY:dirIndirRatio":function(){return"DIR/INDIR [%]"},"PROPERTY:companies":function(){return"Companies"},"PROPERTY:color":function(){return"Color"},"direct:true":function(){return"DIRECT"},"direct:false":function(){return"INDIRECT"},"FORM:ACTION:add":function(){return"Add production function"},"FORM:ACTION:edit":function(){return"Edit production function"},"FORM:ERROR:addFailure":function(){return"Failed to add the new production function :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the production function :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Production function deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete production function"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen production function?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Are you sure you want to delete the <em>"+t.v(e,"label")+"</em> production function?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the production function :-("}},pl:!0}}),define("app/nls/pl/prodFunctions",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Funkcje na produkcji"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie funkcji na produkcji nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie funkcji na produkcji nie powiod≈Ço siƒô :("},"MSG:DELETED":function(e){return"Funkcja na produkcji <em>"+t.v(e,"label")+"</em> zosta≈Ça usuniƒôta."},"PAGE_ACTION:add":function(){return"Dodaj funkcjƒô na produkcji"},"PAGE_ACTION:edit":function(){return"Edytuj funkcjƒô na produkcji"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ funkcjƒô na produkcji"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy funkcji na produkcji"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania funkcji na produkcji"},"PANEL:TITLE:editForm":function(){return"Formularz edycji funkcji na produkcji"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:label":function(){return"Opis"},"PROPERTY:fteMasterPosition":function(){return"Pozycja w FTE (produkcja)"},"PROPERTY:fteLeaderPosition":function(){return"Pozycja w FTE (magazyn)"},"PROPERTY:direct":function(){return"DIRECT/INDIRECT"},"PROPERTY:dirIndirRatio":function(){return"DIR/INDIR [%]"},"PROPERTY:companies":function(){return"Firmy"},"PROPERTY:color":function(){return"Kolor"},"direct:true":function(){return"DIRECT"},"direct:false":function(){return"INDIRECT"},"FORM:ACTION:add":function(){return"Dodaj funkcjƒô na produkcji"},"FORM:ACTION:edit":function(){return"Edytuj funkcjƒô na produkcji"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá funkcji na produkcji :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá funkcji na produkcji :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia funkcji na produkcji"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ funkcjƒô na produkcji"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybranƒÖ funkcjƒô na produkcji?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá funkcjƒô na produkcji <em>"+t.v(e,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá funkcji na produkcji :-("}}}),define("app/prodFunctions/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","../data/prodFunctions","./ProdFunction","i18n!app/nls/prodFunctions"],function(e,t,n,r,i,o){var a=n.auth("DICTIONARIES:VIEW"),s=n.auth("DICTIONARIES:MANAGE");e.map("/prodFunctions",a,function(){t.loadPage(["app/core/pages/ListPage"],function(e){return new e({collection:i,columns:["_id","label","fteMasterPosition","fteLeaderPosition","direct","dirIndirRatio","companies","color"]})})}),e.map("/prodFunctions/:id",function(e){t.loadPage(["app/core/pages/DetailsPage","app/prodFunctions/views/ProdFunctionDetailsView"],function(t,n){return new t({DetailsView:n,model:new o({_id:e.params.id})})})}),e.map("/prodFunctions;add",s,function(){t.loadPage(["app/core/pages/AddFormPage","app/prodFunctions/views/ProdFunctionFormView"],function(e,t){return new e({FormView:t,model:new o})})}),e.map("/prodFunctions/:id;edit",s,function(e){t.loadPage(["app/core/pages/EditFormPage","app/prodFunctions/views/ProdFunctionFormView"],function(t,n){return new t({FormView:n,model:new o({_id:e.params.id})})})}),e.map("/prodFunctions/:id;delete",s,r.bind(null,o))}),define("app/nls/prodLines",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Production lines"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the production lines :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the production line :("},"MSG:DELETED":function(e){return"Production line <em>"+t.v(e,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add production line"},"PAGE_ACTION:edit":function(){return"Edit production line"},"PAGE_ACTION:delete":function(){return"Delete production line"},"PANEL:TITLE:details":function(){return"Production line's details"},"PANEL:TITLE:addForm":function(){return"Add production line form"},"PANEL:TITLE:editForm":function(){return"Edit production line form"},"LIST:ACTION:production":function(){return"Show the operator's screen"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:description":function(){return"Description"},"PROPERTY:workCenter":function(){return"WorkCenter"},"PROPERTY:inventoryNo":function(){return"Inventory no"},"PROPERTY:deactivatedAt":function(){return"Deactivated at"},"FORM:ACTION:add":function(){return"Add production line"},"FORM:ACTION:edit":function(){return"Edit production line"},"FORM:ERROR:addFailure":function(){return"Failed to add the new production line :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the production line :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Production line deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete production line"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen production line?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Are you sure you want to delete the <em>"+t.v(e,"label")+"</em> production line?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the production line :-("}},pl:!0}}),define("app/nls/pl/prodLines",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Linie produkcyjne"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie linii produkcyjnych nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie linii produkcyjnej nie powiod≈Ço siƒô :("},"MSG:DELETED":function(e){return"Linia produkcyjna <em>"+t.v(e,"label")+"</em> zosta≈Ça usuniƒôte."},"PAGE_ACTION:add":function(){return"Dodaj linii produkcyjnƒÖ"},"PAGE_ACTION:edit":function(){return"Edytuj linii produkcyjnƒÖ"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ linii produkcyjnƒÖ"},"LIST:ACTION:production":function(){return"Poka≈º formatkƒô produkcji"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy linii produkcyjnej"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania linii produkcyjnej"},"PANEL:TITLE:editForm":function(){return"Formularz edycji linii produkcyjnej"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:description":function(){return"Opis"},"PROPERTY:workCenter":function(){return"WorkCenter"},"PROPERTY:inventoryNo":function(){return"Nr inwentarzowy"},"PROPERTY:deactivatedAt":function(){return"Data dezaktywacji"},"FORM:ACTION:add":function(){return"Dodaj liniƒô produkcyjnƒÖ"},"FORM:ACTION:edit":function(){return"Edytuj liniƒô produkcyjnƒÖ"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá linii produkcyjnej :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá linii produkcyjnej :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia linii produkcyjnej"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ liniƒô produkcyjnƒÖ"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybranƒÖ liniƒô produkcyjnƒÖ?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá liniƒô produkcyjnƒÖ <em>"+t.v(e,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá linii produkcyjnej :-("}}}),define("app/prodLines/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","../data/prodLines","./ProdLine","i18n!app/nls/prodLines"],function(e,t,n,r,i,o){var a=n.auth("DICTIONARIES:VIEW"),s=n.auth("DICTIONARIES:MANAGE");e.map("/prodLines",a,function(){t.loadPage(["app/core/pages/ListPage","app/prodLines/views/ProdLineListView"],function(e,t){return new e({ListView:t,collection:i})})}),e.map("/prodLines/:id",function(e){t.loadPage(["app/prodLines/pages/ProdLineDetailsPage"],function(t){return new t({model:new o({_id:e.params.id})})})}),e.map("/prodLines;add",s,function(){t.loadPage(["app/core/pages/AddFormPage","app/prodLines/views/ProdLineFormView"],function(e,t){return new e({FormView:t,model:new o})})}),e.map("/prodLines/:id;edit",s,function(e){t.loadPage(["app/core/pages/EditFormPage","app/prodLines/views/ProdLineFormView"],function(t,n){return new t({FormView:n,model:new o({_id:e.params.id})})})}),e.map("/prodLines/:id;delete",s,r.bind(null,o))}),define("app/prodTasks/ProdTask",["../core/Model"],function(e){return e.extend({urlRoot:"/prodTasks",clientUrlRoot:"#prodTasks",topicPrefix:"prodTasks",privilegePrefix:"DICTIONARIES",nlsDomain:"prodTasks",labelAttribute:"name",defaults:{name:null,tags:null,fteDiv:!1,inProd:!0,clipColor:"#eeee00",parent:null},url:function(){var t=e.prototype.url.apply(this,arguments);return this.isNew()?t:t+"?populate(parent)"},parse:function(e){return Array.isArray(e.tags)||(e.tags=[]),e.clipColor||(e.clipColor="#eeee00"),e}})}),define("app/prodTasks/ProdTaskCollection",["../core/Collection","./ProdTask"],function(e,t){return e.extend({model:t,rqlQuery:"sort(parent,name)",sort:function(e){for(var t={},n=0;n<this.length;++n){var r=this.models[n],i=r.attributes;i.parent?(t[i.parent]||(t[i.parent]={parent:null,children:[]}),t[i.parent].children.push(r)):t[i._id]?t[i._id].parent||(t[i._id].parent=r):t[i._id]={parent:r,children:[]}}var o=[];return Object.keys(t).forEach(function(e){var n=t[e];o.push(n.parent),o.push.apply(o,n.children)}),this.models=o,e&&!e.silent&&this.trigger("sort",this,e||{}),this},serializeToSelect2:function(){var e=[],t={id:null,text:null,children:[]};return this.sort().forEach(function(n){var r=n.get("parent");r?t.children.push({id:n.id,text:n.getLabel(),lastChild:!1}):(t.children.length&&(t.children[t.children.length-1].lastChild=!0),t={id:n.id,text:n.getLabel(),children:[]},e.push(t))}),e}})}),define("app/nls/prodTasks",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Production tasks"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the production task :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the production task :("},"MSG:DELETED":function(e){return"Production task <em>"+t.v(e,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add production task"},"PAGE_ACTION:edit":function(){return"Edit production task"},"PAGE_ACTION:delete":function(){return"Delete production task"},"PANEL:TITLE:details":function(){return"Production task's details"},"PANEL:TITLE:addForm":function(){return"Add production task form"},"PANEL:TITLE:editForm":function(){return"Edit production task form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:parent":function(){return"Parent task"},"PROPERTY:name":function(){return"Name"},"PROPERTY:tags":function(){return"Tags"},"PROPERTY:fteDiv":function(){return"Divide per Division in FTE (distribution)?"},"PROPERTY:clipColor":function(){return"Color in CLIP"},"PROPERTY:inProd":function(){return"Use in Productivity?"},"FORM:ACTION:add":function(){return"Add production task"},"FORM:ACTION:edit":function(){return"Edit production task"},"FORM:ERROR:addFailure":function(){return"Failed to add the new production task :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the production task :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Production task deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete production task"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen production task?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Are you sure you want to delete the <em>"+t.v(e,"label")+"</em> production task?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the production task :-("}},pl:!0}}),define("app/nls/pl/prodTasks",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Zadania produkcyjne"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie zada≈Ñ produkcyjnych nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie zadania produkcyjnego nie powiod≈Ço siƒô :("},"MSG:DELETED":function(e){return"Zadanie produkcyjne <em>"+t.v(e,"label")+"</em> zosta≈Ço usuniƒôte."},"PAGE_ACTION:add":function(){return"Dodaj zadanie produkcyjne"},"PAGE_ACTION:edit":function(){return"Edytuj zadanie produkcyjne"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ zadanie produkcyjne"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy zadania produkcyjnego"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania zadania produkcyjnego"},"PANEL:TITLE:editForm":function(){return"Formularz edycji zadania produkcyjnego"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:parent":function(){return"Nadrzƒôdne zadanie"},"PROPERTY:name":function(){return"Nazwa"},"PROPERTY:tags":function(){return"Tagi"},"PROPERTY:fteDiv":function(){return"Podzia≈Ç na wydzia≈Çy w FTE (magazyn)?"},"PROPERTY:clipColor":function(){return"Kolor w raporcie CLIP"},"PROPERTY:inProd":function(){return"U≈ºycie w Produktywno≈õci?"},"FORM:ACTION:add":function(){return"Dodaj zadanie produkcyjne"},"FORM:ACTION:edit":function(){return"Edytuj zadanie produkcyjne"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá zadania produkcyjnego :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá zadania produkcyjnego :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia zadania produkcyjnego"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ zadanie produkcyjne"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany zadanie produkcyjne?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá zadanie produkcyjne <em>"+t.v(e,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá zadania produkcyjnego :-("}}}),define("app/prodTasks/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","./ProdTaskCollection","./ProdTask","i18n!app/nls/prodTasks"],function(e,t,n,r,i,o){var a=n.auth("DICTIONARIES:VIEW"),s=n.auth("DICTIONARIES:MANAGE");e.map("/prodTasks",a,function(e){t.loadPage(["app/core/pages/ListPage","app/prodTasks/views/ProdTaskListView"],function(t,n){return new t({ListView:n,collection:new i({rqlQuery:e.rql})})})}),e.map("/prodTasks/:id",function(e){t.loadPage(["app/core/pages/DetailsPage","app/prodTasks/templates/details"],function(t,n){return new t({model:new o({_id:e.params.id}),detailsTemplate:n})})}),e.map("/prodTasks;add",s,function(){t.loadPage("app/prodTasks/pages/AddProdTaskFormPage",function(e){return new e({model:new o})})}),e.map("/prodTasks/:id;edit",s,function(e){t.loadPage("app/prodTasks/pages/EditProdTaskFormPage",function(t){return new t({model:new o({_id:e.params.id})})})}),e.map("/prodTasks/:id;delete",s,r.bind(null,o))}),define("app/core/util/matchesOperType",["underscore"],function(e){return function(t,n){var r=e.find(t.selector.args,function(e){return"eq"===e.name&&"type"===e.args[0]});return r?-1!==n.indexOf(r.args[1]):!0}}),define("app/core/util/matchesProdLine",["underscore","app/user","app/data/prodLines"],function(e,t,n){return function(r,i){var o=e.find(r.selector.args,function(e){return"eq"===e.name&&"prodLine"===e.args[0]});if(o)return o.args[1]===i;if(t.data.super)return!0;var a=n.get(i);if(!a)return!0;var s=t.getDivision();if(!s)return!0;var u=t.getSubdivision(),c=a.getSubdivision();return u?u===c:s.id===c.get("division")}}),define("app/prodLogEntries/util/decorateProdLogEntry",["underscore","app/time","app/i18n","app/data/aors","app/data/prodLines","app/data/downtimeReasons","app/data/views/renderOrgUnitPath","app/core/templates/userInfo"],function(e,t,n,r,i,o,a,s){function u(t,r){var i=e.without(Object.keys(r),"_id");return"editOrder"===t&&(i=e.without(i,"mechOrder","orderData"),-1!==i.indexOf("orderId")&&(i=e.without(i,"operationNo"))),i.map(function(e){return n(c[t],"PROPERTY:"+e)}).join(", ")}var c={editShift:"prodShifts",editOrder:"prodShiftOrders",editDowntime:"prodDowntimes"};return function(e){var i=e.toJSON(),a={};switch(i.type){case"changeShift":a.date=t.format(i.data.startedProdShift.date,"YYYY-MM-DD"),a.shift=n("core","SHIFT:"+i.data.startedProdShift.shift);break;case"addShift":a.date=t.format(i.data.date,"YYYY-MM-DD"),a.shift=n("core","SHIFT:"+i.data.shift);break;case"changeMaster":case"changeLeader":case"changeOperator":a.name=i.data?i.data.label:"-";break;case"changeQuantitiesDone":a.hour=i.data.hour+1,a.value=i.data.newValue;break;case"changeOrder":case"correctOrder":case"addOrder":var c=i.data.orderData&&i.data.orderData.operations?i.data.orderData.operations[i.data.operationNo]:null;a.orderId=i.data.orderId,a.orderName=i.data.orderData.name||"?",a.operationNo=i.data.operationNo,a.operationName=c?c.name:"?";break;case"changeQuantityDone":case"changeWorkerCount":a.value=i.data.newValue;break;case"startDowntime":case"addDowntime":var l=o.get(i.data.reason),d=r.get(i.data.aor);a._id=i.data._id,a.reason=l?l.getLabel():i.data.reason,a.aor=d?d.getLabel():i.data.aor;break;case"editShift":case"editOrder":case"editDowntime":"editDowntime"===i.type&&(a._id=i.data._id),a.changedProperties=u(i.type,i.data);break;default:a=i.data}var p=null;return i.savedAt&&(p=(Date.parse(i.savedAt)-Date.parse(i.createdAt))/1e3),i.data=n("prodLogEntries","data:"+i.type,a),i.type=n("prodLogEntries","type:"+i.type),i.createdAt=t.format(i.createdAt,"YYYY-MM-DD HH:mm:ss"),i.creator=s({userInfo:i.creator}),p&&(i.createdAt+=" ("+(0>p?"-":"+")+t.toString(Math.abs(p),!1,!0)+")"),i.prodShift&&(i.prodShift='<a href="#prodShifts/'+i.prodShift._id+'">'+t.format(i.prodShift.date,"YYYY-MM-DD")+", "+n("core","SHIFT:"+i.prodShift.shift)+"</a>"),i.prodShiftOrder=i.prodShiftOrder?'<a href="#prodShiftOrders/'+i.prodShiftOrder._id+'">'+i.prodShiftOrder.orderId+", "+i.prodShiftOrder.operationNo+"</a>":n("prodLogEntries","noData:prodShiftOrder"),i}}),define("app/prodLogEntries/ProdLogEntry",["../core/Model","./util/decorateProdLogEntry"],function(e,t){return e.extend({urlRoot:"/prodLogEntries",clientUrlRoot:"#prodLogEntries",topicPrefix:"prodLogEntries",privilegePrefix:"PROD_DATA",nlsDomain:"prodLogEntries",defaults:{type:null},serialize:function(){return t(this)}})}),define("app/prodLogEntries/ProdLogEntryCollection",["../user","../data/prodLines","../core/Collection","../core/util/matchesOperType","../core/util/matchesProdLine","./ProdLogEntry"],function(e,t,n,r,i,o){return n.extend({model:o,rqlQuery:function(e){return e.Query.fromObject({fields:{},sort:{createdAt:-1},limit:20,selector:{name:"and",args:[]}})},matches:function(e){return r(this.rqlQuery,e.types)&&i(this.rqlQuery,e.prodLine)}})}),define("app/prodLogEntries/views/ProdLogEntryListView",["app/user","app/viewport","app/core/views/ListView","app/data/prodLines","app/data/views/renderOrgUnitPath"],function(e,t,n,r,i){return n.extend({remoteTopics:{"production.synced.**":"refreshCollection","production.edited.**":function(){this.refreshCollection()}},columns:["prodLine","type","data","prodShift","prodShiftOrder","createdAt","creator"],serializeActions:function(){return null},afterRender:function(){n.prototype.afterRender.call(this);var e=this;this.$('.list-item > td[data-id="prodLine"]').popover({container:this.el,trigger:"hover",placement:"auto right",html:!0,content:function(){var t=i(r.get(e.$(this).text().trim()),!1,!1);return t?t.split(" \\ ").join("<br>\\ "):"?"}})},refreshCollection:function(e){return!e||this.collection.matches(e)?n.prototype.refreshCollection.apply(this,arguments):void 0}})}),define("app/prodLogEntries/templates/filter",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<form id="',idPrefix,'-form" class="well filter-form">\n  <div class="form-group">\n    <label for="',idPrefix,'-from-date">',t("core","filter:date:from"),'</label>\n    <div id="',idPrefix,'-from" class="form-group-datetime">\n      <input id="',idPrefix,'-from-date" class="form-control" name="from-date" type="date" placeholder="YYYY-MM-DD">\n      <input id="',idPrefix,'-from-time" class="form-control" name="from-time" type="time" placeholder="hh:mm">\n    </div>\n  </div>\n  <div class="form-group">\n    <label for="',idPrefix,'-to-date">',t("core","filter:date:to"),'</label>\n    <div id="',idPrefix,'-to" class="form-group-datetime">\n      <input id="',idPrefix,'-to-date" class="form-control" name="to-date" type="date" placeholder="YYYY-MM-DD">\n      <input id="',idPrefix,'-to-time" class="form-control" name="to-time" type="time" placeholder="hh:mm">\n    </div>\n  </div>\n  <div class="form-group">\n    <label for="',idPrefix,'-prodLine">',t("prodLogEntries","PROPERTY:prodLine"),'</label>\n    <input id="',idPrefix,'-prodLine" name="prodLine" type="text" data-placeholder="',t("prodLogEntries","filter:placeholder:prodLine"),'">\n  </div>\n  <div class="form-group">\n    <label for="',idPrefix,'-type">',t("prodLogEntries","PROPERTY:type"),'</label>\n    <select id="',idPrefix,'-type" name="type" data-placeholder="',t("prodLogEntries","filter:placeholder:type"),'">\n      <option></option>\n      '),["changeShift","changeMaster","changeLeader","changeOperator","changeQuantitiesDone","changeOrder","correctOrder","changeQuantityDone","changeWorkerCount","finishOrder","startDowntime","finishDowntime","corroborateDowntime","endWork","addShift","addOrder","addDowntime","editShift","editOrder","editDowntime","deleteShift","deleteOrder","deleteDowntime"].forEach(function(e){buf.push('\n      <option value="',e,'">',t("prodLogEntries","type:"+e),"</option>\n      ")}),buf.push("\n    </select>\n  </div>\n  ",renderLimit(),'\n  <div class="form-group filter-actions">\n    <button type="submit" class="btn btn-default"><i class="fa fa-filter"></i><span>',escape(t("prodLogEntries","filter:submit")),"</span></button>\n  </div>\n</form>\n")}();return buf.join("")}}),define("app/prodLogEntries/views/ProdLogEntryFilterView",["app/user","app/data/prodLines","app/core/views/FilterView","app/core/util/fixTimeRange","app/prodLogEntries/templates/filter"],function(e,t,n,r,i){return n.extend({template:i,defaultFormData:{createdAt:"",prodLine:null,type:null},termToForm:{createdAt:function(e,t,n){r.toFormData(n,t,"date+time")},prodLine:function(e,t,n){n[e]=t.args[1]},type:"prodLine"},afterRender:function(){n.prototype.afterRender.call(this),this.$id("prodLine").select2({width:"275px",allowClear:!e.getDivision(),data:this.getApplicableProdLines()}),this.$id("type").select2({width:"275px",allowClear:!0})},getApplicableProdLines:function(){return t.getForCurrentUser().map(function(e){return{id:e.id,text:e.getLabel()}})},serializeFormToQuery:function(e){var t=r.fromView(this,{defaultTime:"06:00"}),n=this.$id("prodLine").val(),i=this.$id("type").val();n&&n.length&&e.push({name:"eq",args:["prodLine",n]}),i&&i.length&&e.push({name:"eq",args:["type",i]}),t.from&&e.push({name:"ge",args:["createdAt",t.from]}),t.to&&e.push({name:"le",args:["createdAt",t.to]})
}})}),define("app/prodLogEntries/pages/ProdLogEntryListPage",["app/i18n","app/viewport","app/core/util/bindLoadingMessage","app/core/View","../ProdLogEntryCollection","../views/ProdLogEntryListView","../views/ProdLogEntryFilterView","app/core/templates/listPage"],function(e,t,n,r,i,o,a,s){return r.extend({template:s,layoutName:"page",pageId:"prodLogEntryList",breadcrumbs:[e.bound("prodLogEntries","BREADCRUMBS:browse")],initialize:function(){this.defineModels(),this.defineViews(),this.setView(".filter-container",this.filterView),this.setView(".list-container",this.listView)},defineModels:function(){this.prodLogEntryList=n(new i(null,{rqlQuery:this.options.rql}),this)},defineViews:function(){this.listView=new o({collection:this.prodLogEntryList}),this.filterView=new a({model:{rqlQuery:this.prodLogEntryList.rqlQuery}}),this.listenTo(this.filterView,"filterChanged",this.refreshList)},load:function(e){return e(this.prodLogEntryList.fetch({reset:!0}))},refreshList:function(e){this.prodLogEntryList.rqlQuery=e,this.listView.refreshCollectionNow(),this.broker.publish("router.navigate",{url:this.prodLogEntryList.genClientUrl()+"?"+e,trigger:!1,replace:!0})}})}),define("app/nls/prodLogEntries",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Operation log"},"MSG:LOADING_FAILURE":function(){return"Failed to load the operation log :("},"filter:submit":function(){return"Filter operations"},"filter:placeholder:type":function(){return"Any type"},"filter:placeholder:prodLine":function(){return"Any production line"},"PROPERTY:prodLine":function(){return"Production line"},"PROPERTY:type":function(){return"Type"},"PROPERTY:createdAt":function(){return"Created at"},"PROPERTY:creator":function(){return"Creator"},"PROPERTY:data":function(){return"Additional info"},"PROPERTY:prodShift":function(){return"Shift"},"PROPERTY:prodShiftOrder":function(){return"Order"},"type:changeShift":function(){return"Shift start"},"type:changeMaster":function(){return"Master change"},"type:changeLeader":function(){return"Leader change"},"type:changeOperator":function(){return"Operator change"},"type:changeQuantitiesDone":function(){return"Quantities done in an hour change"},"type:changeOrder":function(){return"Order start"},"type:changeQuantityDone":function(){return"Order's quantity done change"},"type:changeWorkerCount":function(){return"Order's worker count change"},"type:correctOrder":function(){return"Order correction"},"type:finishOrder":function(){return"Order finish"},"type:startDowntime":function(){return"Downtime start"},"type:finishDowntime":function(){return"Downtime finish"},"type:corroborateDowntime":function(){return"Downtime corroboration"},"type:endWork":function(){return"End of work"},"type:editShift":function(){return"Shift edit"},"type:editOrder":function(){return"Order edit"},"type:editDowntime":function(){return"Downtime edit"},"type:deleteShift":function(){return"Shift deletion"},"type:deleteDowntime":function(){return"Downtime deletion"},"type:deleteOrder":function(){return"Order deletion"},"type:addShift":function(){return"Shift addition"},"type:addOrder":function(){return"Order addition"},"type:addDowntime":function(){return"Downtime addition"},"data:changeShift":function(e){return"Shift <em>"+t.v(e,"shift")+"</em> on <em>"+t.v(e,"date")+"</em>"},"data:addShift":function(e){return"Shift <em>"+t.v(e,"shift")+"</em> on <em>"+t.v(e,"date")+"</em>"},"data:changeMaster":function(e){return"New master: <em>"+t.v(e,"name")+"</em>"},"data:changeLeader":function(e){return"New leader: <em>"+t.v(e,"name")+"</em>"},"data:changeOperator":function(e){return"New operator: <em>"+t.v(e,"name")+"</em>"},"data:changeQuantitiesDone":function(e){return"Quantity done in the <em>"+t.v(e,"hour")+".</em> hour: <em>"+t.v(e,"value")+"</em>"},"data:changeOrder":function(e){return"Order: <em>"+t.v(e,"orderId")+"</em> (<em>"+t.v(e,"orderName")+"</em>); operation: <em>"+t.v(e,"operationNo")+"</em> (<em>"+t.v(e,"operationName")+"</em>)"},"data:addOrder":function(e){return"Order: <em>"+t.v(e,"orderId")+"</em> (<em>"+t.v(e,"orderName")+"</em>); operation: <em>"+t.v(e,"operationNo")+"</em> (<em>"+t.v(e,"operationName")+"</em>)"},"data:changeQuantityDone":function(e){return"Quantity done in the order: <em>"+t.v(e,"value")+"</em>"},"data:changeWorkerCount":function(e){return"Worker count in the order: <em>"+t.v(e,"value")+"</em>"},"data:correctOrder":function(e){return"Order: <em>"+t.v(e,"orderId")+"</em> (<em>"+t.v(e,"orderName")+"</em>); operation: <em>"+t.v(e,"operationNo")+"</em> (<em>"+t.v(e,"operationName")+"</em>)"},"data:finishOrder":function(){return"-"},"data:startDowntime":function(e){return"<a href='#prodDowntimes/"+t.v(e,"_id")+"'>Reason: <em>"+t.v(e,"reason")+"</em>; AOR: <em>"+t.v(e,"aor")+"</em></a>"},"data:addDowntime":function(e){return"<a href='#prodDowntimes/"+t.v(e,"_id")+"'>Reason: <em>"+t.v(e,"reason")+"</em>; AOR: <em>"+t.v(e,"aor")+"</em></a>"},"data:finishDowntime":function(e){return"Finished <a href='#prodDowntimes/"+t.v(e,"_id")+"'>downtime</a>."},"data:corroborateDowntime":function(e){return t.s(e,"status",{confirmed:"Confirmed",rejected:"Rejected",other:"Corroborated"})+" <a href='#prodDowntimes/"+t.v(e,"_id")+"'>downtime</a>."},"data:endWork":function(){return"-"},"data:editShift":function(e){return"Changed attributes: <em>"+t.v(e,"changedProperties")+"</em>"},"data:editOrder":function(e){return"Changed attributes: <em>"+t.v(e,"changedProperties")+"</em>"},"data:editDowntime":function(e){return"Changed attributes of <a href='#prodDowntimes/"+t.v(e,"_id")+"'>downtime</a>: <em>"+t.v(e,"changedProperties")+"</em>"},"data:deleteShift":function(){return"-"},"data:deleteDowntime":function(e){return"Deleted downtime <em>"+t.v(e,"rid")+"</em>"},"data:deleteOrder":function(e){return"Deleted order <em>"+t.v(e,"orderId")+"; "+t.v(e,"operationNo")+"</em>"},"noData:prodShiftOrder":function(){return"<em>no order</em>"}},pl:!0}}),define("app/nls/pl/prodLogEntries",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Historia operacji na liniach produkcyjnych"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie historii operacji nie powiod≈Ço siƒô :("},"filter:submit":function(){return"Filtruj historiƒô"},"filter:placeholder:type":function(){return"Dowolny typ"},"filter:placeholder:prodLine":function(){return"Dowolna linia produkcyjna"},"PROPERTY:prodLine":function(){return"Linia produkcyjna"},"PROPERTY:type":function(){return"Typ"},"PROPERTY:createdAt":function(){return"Czas operacji"},"PROPERTY:creator":function(){return"Wykonawca operacji"},"PROPERTY:data":function(){return"Dodatkowe informacje"},"PROPERTY:prodShift":function(){return"Zmiana"},"PROPERTY:prodShiftOrder":function(){return"Zlecenie"},"type:changeShift":function(){return"Rozpoczƒôcie zmiany"},"type:changeMaster":function(){return"Zmiana mistrza"},"type:changeLeader":function(){return"Zmiana lidera"},"type:changeOperator":function(){return"Zmiana operatora"},"type:changeQuantitiesDone":function(){return"Zmiana wykonanej ilo≈õci w godzinie"},"type:changeOrder":function(){return"Rozpoczƒôcie zlecenia"},"type:changeQuantityDone":function(){return"Zmiana wykonanej ilo≈õci w zleceniu"},"type:changeWorkerCount":function(){return"Zmiana ilo≈õci os√≥b w zleceniu"},"type:correctOrder":function(){return"Poprawa zlecenia"},"type:finishOrder":function(){return"Zako≈Ñczenie zlecenia"},"type:startDowntime":function(){return"Rozpoczƒôcie przestoju"},"type:finishDowntime":function(){return"Zako≈Ñczenie przestoju"},"type:corroborateDowntime":function(){return"Potwierdzenie przestoju"},"type:endWork":function(){return"Zako≈Ñczenie pracy"},"type:editShift":function(){return"Edycja zmiany"},"type:editOrder":function(){return"Edycja zlecenia"},"type:editDowntime":function(){return"Edycja przestoju"},"type:deleteShift":function(){return"Usuniƒôcie zmiany"},"type:deleteDowntime":function(){return"Usuniƒôcie przestoju"},"type:deleteOrder":function(){return"Usuniƒôcie zlecenia"},"type:addShift":function(){return"Dodanie zmiany"},"type:addOrder":function(){return"Dodanie zlecenia"},"type:addDowntime":function(){return"Dodanie przestoju"},"data:changeShift":function(e){return"Zmiana <em>"+t.v(e,"shift")+"</em> z dnia <em>"+t.v(e,"date")+"</em>"},"data:addShift":function(e){return"Zmiana <em>"+t.v(e,"shift")+"</em> z dnia <em>"+t.v(e,"date")+"</em>"},"data:changeMaster":function(e){return"Nowy mistrz: <em>"+t.v(e,"name")+"</em>"},"data:changeLeader":function(e){return"Nowy lider: <em>"+t.v(e,"name")+"</em>"},"data:changeOperator":function(e){return"Nowy operator: <em>"+t.v(e,"name")+"</em>"},"data:changeQuantitiesDone":function(e){return"Wykonana ilo≈õƒá w <em>"+t.v(e,"hour")+".</em> godzinie: <em>"+t.v(e,"value")+"</em>"},"data:changeOrder":function(e){return"Zlecenie: <em>"+t.v(e,"orderId")+"</em> (<em>"+t.v(e,"orderName")+"</em>); operacja: <em>"+t.v(e,"operationNo")+"</em> (<em>"+t.v(e,"operationName")+"</em>)"},"data:addOrder":function(e){return"Zlecenie: <em>"+t.v(e,"orderId")+"</em> (<em>"+t.v(e,"orderName")+"</em>); operacja: <em>"+t.v(e,"operationNo")+"</em> (<em>"+t.v(e,"operationName")+"</em>)"},"data:changeQuantityDone":function(e){return"Wykonana ilo≈õƒá w zleceniu: <em>"+t.v(e,"value")+"</em>"},"data:changeWorkerCount":function(e){return"Ilo≈õƒá os√≥b w zleceniu: <em>"+t.v(e,"value")+"</em>"},"data:correctOrder":function(e){return"Zlecenie: <em>"+t.v(e,"orderId")+"</em> (<em>"+t.v(e,"orderName")+"</em>); operacja: <em>"+t.v(e,"operationNo")+"</em> (<em>"+t.v(e,"operationName")+"</em>)"},"data:finishOrder":function(){return"-"},"data:startDowntime":function(e){return"<a href='#prodDowntimes/"+t.v(e,"_id")+"'>Pow√≥d: <em>"+t.v(e,"reason")+"</em>; obszar odpowiedzialno≈õci: <em>"+t.v(e,"aor")+"</em></a>"},"data:addDowntime":function(e){return"<a href='#prodDowntimes/"+t.v(e,"_id")+"'>Pow√≥d: <em>"+t.v(e,"reason")+"</em>; obszar odpowiedzialno≈õci: <em>"+t.v(e,"aor")+"</em></a>"},"data:finishDowntime":function(e){return"Zako≈Ñczono <a href='#prodDowntimes/"+t.v(e,"_id")+"'>przest√≥j</a>."},"data:corroborateDowntime":function(e){return t.s(e,"status",{confirmed:"Zatwierdzono",rejected:"Odrzucono",other:"Potwierdzono"})+" <a href='#prodDowntimes/"+t.v(e,"_id")+"'>przest√≥j</a>."},"data:endWork":function(){return"-"},"data:editShift":function(e){return"Zmienione atrybuty: <em>"+t.v(e,"changedProperties")+"</em>"},"data:editOrder":function(e){return"Zmienione atrybuty: <em>"+t.v(e,"changedProperties")+"</em>"},"data:editDowntime":function(e){return"Zmienione atrybuty <a href='#prodDowntimes/"+t.v(e,"_id")+"'>przestoju</a>: <em>"+t.v(e,"changedProperties")+"</em>"},"data:deleteShift":function(){return"-"},"data:deleteDowntime":function(e){return"Usuniƒôto przest√≥j <em>"+t.v(e,"rid")+"</em>."},"data:deleteOrder":function(e){return"Usuniƒôto zlecenie "+t.v(e,"orderId")+"; "+t.v(e,"operationNo")+"</em>."},"noData:prodShiftOrder":function(){return"<em>brak zlecenia</em>"}}}),define("app/prodLogEntries/routes",["../router","../viewport","../user","./pages/ProdLogEntryListPage","i18n!app/nls/prodLogEntries"],function(e,t,n,r){var i=n.auth("LOCAL","PROD_DATA:VIEW");e.map("/prodLogEntries",i,function(e){t.showPage(new r({rql:e.rql}))})}),define("app/data/prodLog",["app/i18n","app/user","app/time","app/broker","app/socket","app/updater/index"],function(e,t,n,r,i,o){function a(){if(null!==h){var e=localStorage.getItem(d);null===e?localStorage.setItem(d,h):localStorage.setItem(d,h+"\n"+e),h=null,localStorage.removeItem(p),r.publish("production.synced",{message:"DISCONNECT"})}}function s(){if(m&&i.isConnected()&&null===h&&!o.isRestarting()&&(h=localStorage.getItem(d),null!==h)){localStorage.removeItem(d);var e=localStorage.getItem(p);null!==e&&(h=e+"\n"+h),localStorage.setItem(p,h),r.publish("production.syncing"),i.emit("production.sync",h,function(e){h=null,localStorage.removeItem(p),r.publish("production.synced",e),setTimeout(s,1)})}}function u(e){for(var t=0,n=0,r=e.length;r>n;++n)t=(t<<5)-t+e.charCodeAt(n)|0;return t}function c(e,t){return e.getTime().toString(36)+u(t).toString(36)+Math.round(1e16*Math.random()).toString(36)}var l=(Date.now()+Math.random()).toString(),d="PRODUCTION:LOG",p="PRODUCTION:LOG:SYNCING",f="PRODUCTION:LOCK",h=null,m=!1,g=null,y=null;return r.subscribe("socket.connected",setTimeout.bind(null,s,1337)),r.subscribe("socket.disconnected",a),window.addEventListener("unload",a),i.isConnected()&&s(),{generateId:c,isEnabled:function(){return m},enable:function(e){function t(t){if(t.key===f){var n=JSON.parse(t.newValue);n.instanceId!==l&&e.reject()}}return m?void(e&&(g=setTimeout(function(){g=null,e.resolve()}))):e?(window.addEventListener("storage",t),y=setInterval(function(){localStorage.setItem(f,JSON.stringify({instanceId:l,time:Date.now()}))},333),void(g=setTimeout(function(){g=null,window.removeEventListener("storage",t),"pending"===e.state()&&(m=!0,e.resolve())},2e3))):void(m=!0)},disable:function(){m&&(null!==g&&(clearTimeout(g),g=null),null!==y&&(clearInterval(y),y=null),m=!1)},isSyncing:function(){return null!==h},record:function(e,r,i){if(!e.isLocked()){if(!m)throw new Error("Production log is disabled!");var o={secretKey:e.getSecretKey(),type:r,data:i||{},createdAt:n.getMoment().toDate(),creator:t.getInfo(),division:e.get("division"),subdivision:e.get("subdivision"),mrpControllers:e.get("mrpControllers"),prodFlow:e.get("prodFlow"),workCenter:e.get("workCenter"),prodLine:e.prodLine.id,prodShift:e.id,prodShiftOrder:e.prodShiftOrder.id||null};o._id=c(o.createdAt,e.id);var a,u=localStorage.getItem(d);a=null===u?JSON.stringify(o):u+"\n"+JSON.stringify(o),localStorage.setItem(d,a),e.saveLocalData(),setTimeout(s,1)}}}}),define("app/prodShiftOrders/util/decorateProdShiftOrder",["app/time","app/i18n","app/user","app/data/subdivisions","app/data/mrpControllers","app/data/prodFlows","app/data/prodLines","app/data/views/renderOrgUnitPath","app/core/util/getShiftStartInfo","app/core/templates/userInfo"],function(e,t,n,r,i,o,a,s,u,c){return function(i,a){var s=i.toJSON(),l=Date.parse(s.startedAt),d=Date.parse(s.finishedAt);if(s.date)s.date=e.format(s.date,"YYYY-MM-DD");else{var p=u(s.startedAt);s.date=p.moment.format("YYYY-MM-DD"),s.shift=p.shift}if(s.shift=t("core","SHIFT:"+s.shift),s.startedAt=e.format(s.startedAt,"HH:mm:ss"),s.finishedAt=e.format(s.finishedAt,"HH:mm:ss"),s.duration=d?e.toString((d-l)/1e3):"-",s.creator=c({userInfo:s.creator}),a.orgUnits){var f=r.get(s.subdivision),h=o.get(s.prodFlow);s.subdivision=f?f.getLabel():"?",s.prodFlow=h?h.getLabel():"?",s.mrpControllers=Array.isArray(s.mrpControllers)&&s.mrpControllers.length?s.mrpControllers.join("; "):"?"}if(s.prodShift=s.prodShift?'<a href="#prodShifts/'+s.prodShift+'">'+s.date+", "+s.shift+"</a>":s.date+", "+s.shift,s.orderData){var m=(s.orderData.operations||{})[s.operationNo]||{};s.order=s.orderId+": <em>"+(s.orderData.name||"?")+"</em>",s.operation=s.operationNo+": <em>"+(m.name||"?")+"</em>"}else s.order=s.orderId,s.operation=s.operationNo;return a.orderUrl&&n.isAllowedTo("ORDERS:VIEW")&&(s.orderUrl="#"+(s.mechOrder?"mechOrders":"orders")+"/"+encodeURIComponent(s.orderId)),s.taktTimeSap=i.getTaktTime(),s.taktTime=i.getActualTaktTime(),s.workerCountSap=i.getWorkerCountSap(),s}}),define("app/prodShiftOrders/ProdShiftOrder",["underscore","../user","../time","../data/prodLog","../data/subdivisions","../core/Model","../core/util/getShiftEndDate","./util/decorateProdShiftOrder"],function(e,t,n,r,i,o,a,s){return o.extend({urlRoot:"/prodShiftOrders",clientUrlRoot:"#prodShiftOrders",topicPrefix:"prodShiftOrders",privilegePrefix:"PROD_DATA",nlsDomain:"prodShiftOrders",defaults:{pressWorksheet:null,prodShift:null,division:null,subdivision:null,mrpControllers:null,prodFlow:null,workCenter:null,prodLine:null,date:null,shift:null,mechOrder:null,orderId:null,operationNo:null,orderData:null,workerCount:null,totalQuantity:null,quantityDone:null,quantityLost:null,creator:null,startedAt:null,finishedAt:null,master:null,leader:null,operator:null,operators:null},getLabel:function(e){var t=e===!1?"":this.get("prodLine")+": ";return t+this.get("orderId")+", "+this.get("operationNo")},serialize:function(e){return s(this,e)},onShiftChanged:function(){this.clear()},onOrderChanged:function(e,r,i){this.prepareOperations(r),this.set({prodShift:e.id,division:e.get("division"),subdivision:e.get("subdivision"),mrpControllers:e.get("mrpControllers"),prodFlow:e.get("prodFlow"),workCenter:e.get("workCenter"),prodLine:e.prodLine.id,date:e.get("date"),shift:e.get("shift"),mechOrder:null===r.no,orderId:r.no||r.nc12,operationNo:i,orderData:r,workerCount:0,totalQuantity:0,quantityDone:0,quantityLost:0,losses:null,creator:t.getInfo(),startedAt:n.getMoment().toDate(),finishedAt:null,master:e.get("master"),leader:e.get("leader"),operator:e.get("operator"),operators:e.get("operators")}),this.generateId(e)},onOrderCorrected:function(e,n,r){var i=n.no||n.nc12;if(i===this.get("orderId")&&r===this.get("operationNo"))return null;this.prepareOperations(n);var o={mechOrder:null===n.no,orderId:i,operationNo:r,orderData:n,creator:t.getInfo()};return this.set(o),this.get("workerCount")>this.getMaxWorkerCount()&&e.changeWorkerCount(0),this.get("quantityDone")>this.getMaxQuantityDone()&&e.changeQuantityDone(0),o},onOrderContinued:function(e){this.set({prodShift:e.id,division:e.get("division"),subdivision:e.get("subdivision"),mrpControllers:e.get("mrpControllers"),prodFlow:e.get("prodFlow"),workCenter:e.get("workCenter"),prodLine:e.prodLine.id,date:e.get("date"),shift:e.get("shift"),workerCount:0,totalQuantity:0,quantityDone:0,quantityLost:0,losses:null,creator:t.getInfo(),startedAt:n.getMoment().toDate(),finishedAt:null,master:e.get("master"),leader:e.get("leader"),operator:e.get("operator"),operators:e.get("operators")}),this.generateId(e)},generateId:function(e){this.set("_id",r.generateId(this.get("startedAt"),e.id+this.get("orderId")))},onWorkEnded:function(){this.clear()},isMechOrder:function(){return this.get("mechOrder")},getOrderNo:function(){var e=this.get("orderData");return e?e.no||"?":"-"},getNc12:function(){var e=this.get("orderData");return e?e.nc12||"?":"-"},getProductName:function(){var e=this.get("orderData");return e?e.name||"?":"-"},getOperationName:function(){var e=this.get("orderData"),t=this.get("operationNo");return e&&t?e.operations&&e.operations[t]?e.operations[t].name||t:t:"-"},getTaktTime:function(){var e=this.get("orderData"),t=this.get("operationNo");if(!e||!t)return"-";var n=e.operations?e.operations[t]:null;if(!n)return"?";var r=this.get("workerCount");return r||(r=this.getWorkerCountSap()),"number"!=typeof r||0===r||n.laborTime<=0?"?":Math.max(Math.round(1.053*n.laborTime/r*3600/100),1)},getActualTaktTime:function(){var e=n.getMoment(this.get("finishedAt"));if(!e.isValid())return"-";var t=e.diff(this.get("startedAt"),"seconds"),r=this.get("quantityDone");return r?Math.max(1,Math.round(t/r)):"?"},getWorkerCountSap:function(){var e=this.get("orderData"),t=this.get("operationNo");if(!e||!t)return"-";var n=e.operations?e.operations[t]:null;return!n||n.laborTime<=0||n.machineTime<=0?"?":Math.max(Math.round(n.laborTime/n.machineTime),1)},getWorkerCount:function(){return this.get("workerCount")||0},getWorkerCountForEdit:function(){var e=this.getWorkerCount();return 0!==e?e:(e=this.getWorkerCountSap(),"string"==typeof e||0===e?0:e)},getMaxWorkerCount:function(){var e=this.getWorkerCountSap();return"number"==typeof e?e+Math.max(1,Math.round(.25*e)):15},getMaxQuantityDone:function(){var e=this.get("orderData");return e&&e.qty?Math.ceil(1.25*e.qty):999},getStartedAt:function(){var e=this.get("startedAt");return e?n.format(e,"HH:mm:ss"):"?"},getQuantityDone:function(){return this.get("quantityDone")||0},getSubdivisionType:function(){var e=i.get(this.get("subdivision"));return e?e.get("type"):null},getOrderIdType:function(){return"press"===this.getSubdivisionType()?"nc12":"no"},hasOrderData:function(){return!!this.get("orderId")&&!!this.get("operationNo")&&!!this.get("orderData")},isEditable:function(){return this.hasEnded()&&!this.isFromPressWorksheet()},hasEnded:function(){return null!=this.get("finishedAt")},isFromPressWorksheet:function(){return null!=this.get("pressWorksheet")},finish:function(){if(!this.id||this.hasEnded())return null;var e=n.getMoment().toDate(),t=a(this.get("date"),this.get("shift"));return e>t&&(e=t),this.set("finishedAt",e),{_id:this.id,finishedAt:e}},prepareOperations:function(t){if(Array.isArray(t.operations)){var n={};t.operations.forEach(function(e){""!==e.workCenter&&-1!==e.laborTime&&(n[e.no]=e)}),t.operations=n}else e.isObject(t.operations)||(t.operations={});return t}},{parse:function(e){return["date","startedAt","finishedAt","createdAt"].forEach(function(t){"string"==typeof e[t]&&(e[t]=new Date(e[t]))}),e}})}),define("app/core/util/matchesEquals",["underscore"],function(e){return function(t,n,r){var i=e.find(t.selector.args,function(e){return"eq"===e.name&&e.args[0]===n});return!i||i.args[1]===r}}),define("app/prodShiftOrders/ProdShiftOrderCollection",["../data/prodLines","../core/Collection","../core/util/matchesEquals","../core/util/matchesProdLine","./ProdShiftOrder"],function(e,t,n,r,i){return t.extend({model:i,rqlQuery:function(e){return e.Query.fromObject({fields:{creator:0,losses:0},sort:{startedAt:-1},limit:15,selector:{name:"and",args:[]}})},hasOrMatches:function(e){return this.get(e._id)?!0:r(this.rqlQuery,e.prodLine)&&n(this.rqlQuery,"orderId",e.orderId)&&n(this.rqlQuery,"operationNo",e.operationNo)&&n(this.rqlQuery,"shift",e.shift)}})}),define("app/prodShiftOrders/views/ProdShiftOrderListView",["app/user","app/viewport","app/core/views/ListView","app/data/prodLines","app/data/views/renderOrgUnitPath"],function(e,t,n,r,i){return n.extend({remoteTopics:{"prodShiftOrders.created.*":"refreshIfMatches","prodShiftOrders.updated.*":"refreshIfMatches","prodShiftOrders.deleted.*":"refreshIfMatches"},columns:["mrpControllers","prodFlow","prodLine","order","operation","prodShift","startedAt","duration","quantityDone","workerCount"],serializeRow:function(e){return e.serialize({orgUnits:!0})},serializeActions:function(){var e=this.collection;return function(t){return[n.actions.viewDetails(e.get(t._id))]}},afterRender:function(){n.prototype.afterRender.call(this);var e=this;this.$('.list-item > td[data-id="prodLine"]').popover({container:this.el,trigger:"hover",placement:"auto right",html:!0,content:function(){var t=i(r.get(e.$(this).text().trim()),!1,!1);return t?t.split(" \\ ").join("<br>\\ "):"?"}})},refreshIfMatches:function(e){this.collection.hasOrMatches(e)&&this.refreshCollection()}})}),define("app/prodShiftOrders/templates/filter",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<form class="well filter-form">\n  <div class="form-group">\n    <label for="',idPrefix,'-from">',t("core","filter:date:from"),'</label>\n    <input id="',idPrefix,'-from" class="form-control" name="from" type="date" placeholder="YYYY-MM-DD">\n  </div>\n  <div class="form-group">\n    <label for="',idPrefix,'-to">',t("core","filter:date:to"),'</label>\n    <input id="',idPrefix,'-to" class="form-control" name="to" type="date" placeholder="YYYY-MM-DD">\n  </div>\n  <div class="form-group">\n    <label for="',idPrefix,'-shift-any">',t("prodShiftOrders","PROPERTY:shift"),'</label>\n    <div class="filter-radio-group">\n      '),[0,1,2,3].forEach(function(e){buf.push('\n      <label class="radio-inline">\n        <input id="',idPrefix,"-shift-",e,'" name="shift" type="radio" value="',e,'">\n        ',t("core","SHIFT:"+e),"\n      </label>\n      ")}),buf.push('\n    </div>\n  </div>\n  <div class="form-group">\n    <label for="',idPrefix,'-orderId">',t("prodShiftOrders","filter:orderId"),'</label>\n    <input id="',idPrefix,'-orderId" class="form-control prodShiftOrders-filter-orderId" name="orderId" type="text" placeholder="',t("prodShiftOrders","filter:placeholder:orderId"),'">\n  </div>\n  <div class="form-group">\n    <label for="',idPrefix,'-operationNo">',t("prodShiftOrders","filter:operationNo"),'</label>\n    <input id="',idPrefix,'-operationNo" class="form-control prodShiftOrders-filter-operationNo" name="operationNo" type="text" placeholder="',t("prodShiftOrders","filter:placeholder:operationNo"),'" maxlength="4" pattern="[0-9]+">\n  </div>\n  <div class="form-group">\n    <label for="',idPrefix,'-prodLine">',t("prodShiftOrders","PROPERTY:prodLine"),'</label>\n    <input id="',idPrefix,'-prodLine" name="prodLine" type="text" data-placeholder="',t("prodShiftOrders","filter:placeholder:prodLine"),'">\n  </div>\n  ',renderLimit(),'\n  <div class="form-group filter-actions">\n    <button type="submit" class="btn btn-default"><i class="fa fa-filter"></i><span>',escape(t("prodShiftOrders","filter:submit")),"</span></button>\n  </div>\n</form>\n")}();return buf.join("")}}),define("app/prodShiftOrders/views/ProdShiftOrderFilterView",["app/user","app/data/prodLines","app/core/views/FilterView","app/core/util/fixTimeRange","app/prodShiftOrders/templates/filter"],function(e,t,n,r,i){return n.extend({template:i,defaultFormData:{createdAt:"",prodLine:null,type:null,shift:0,orderId:"",operationNo:""},termToForm:{date:function(e,t,n){r.toFormData(n,t,"date")},prodLine:function(e,t,n){n[e]=t.args[1]},shift:"prodLine",orderId:"prodLine",operationNo:"prodLine"},afterRender:function(){n.prototype.afterRender.call(this),this.$id("prodLine").select2({width:"275px",allowClear:!e.getDivision(),data:this.getApplicableProdLines()})},getApplicableProdLines:function(){return t.getForCurrentUser().map(function(e){return{id:e.id,text:e.getLabel()}})},serializeFormToQuery:function(e){var t=r.fromView(this,{defaultTime:"06:00"}),n=this.$id("prodLine").val(),i=parseInt(this.$("input[name=shift]:checked").val(),10),o=this.$id("orderId").val(),a=this.fixOperationNo();o&&o.length&&e.push({name:"eq",args:["orderId",o]}),n&&n.length&&e.push({name:"eq",args:["prodLine",n]}),i&&e.push({name:"eq",args:["shift",i]}),a&&a.length&&e.push({name:"eq",args:["operationNo",a]}),t.from&&e.push({name:"ge",args:["date",t.from]}),t.to&&e.push({name:"le",args:["date",t.to]})},fixOperationNo:function(){var e=this.$id("operationNo"),t=e.val().trim();if(t.length>0)for(;t.length<4;)t="0"+t;return e.val(t),t}})}),define("app/prodShiftOrders/pages/ProdShiftOrderListPage",["app/i18n","app/viewport","app/core/util/bindLoadingMessage","app/core/util/pageActions","app/core/View","../ProdShiftOrderCollection","../views/ProdShiftOrderListView","../views/ProdShiftOrderFilterView","app/core/templates/listPage"],function(e,t,n,r,i,o,a,s,u){return i.extend({template:u,layoutName:"page",pageId:"prodShiftOrderList",breadcrumbs:[e.bound("prodShiftOrders","BREADCRUMBS:browse")],actions:function(e){return[r.export(e,this,this.prodShiftOrderList)]},initialize:function(){this.defineModels(),this.defineViews(),this.setView(".filter-container",this.filterView),this.setView(".list-container",this.listView)},defineModels:function(){this.prodShiftOrderList=n(new o(null,{rqlQuery:this.options.rql}),this)},defineViews:function(){this.listView=new a({collection:this.prodShiftOrderList}),this.filterView=new s({model:{rqlQuery:this.prodShiftOrderList.rqlQuery}}),this.listenTo(this.filterView,"filterChanged",this.refreshList)},load:function(e){return e(this.prodShiftOrderList.fetch({reset:!0}))},refreshList:function(e){this.prodShiftOrderList.rqlQuery=e,this.listView.refreshCollectionNow(),this.broker.publish("router.navigate",{url:this.prodShiftOrderList.genClientUrl()+"?"+e,trigger:!1,replace:!0})}})}),define("app/nls/prodShiftOrders",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Orders"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the orders :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the order :("},"MSG:DELETED":function(e){return"Order <em>"+t.v(e,"label")+"</em> was deleted."},"PAGE_ACTION:prodLogEntries":function(){return"Show operation log"},"PAGE_ACTION:prodDowntimes":function(){return"Show downtimes"},"PAGE_ACTION:export":function(){return"Export orders"},"PAGE_ACTION:edit":function(){return"Edit order"},"PAGE_ACTION:delete":function(){return"Delete order"},"PANEL:TITLE:details":function(){return"Order's production details"},"PANEL:TITLE:orderDetails":function(){return"Order's details at the moment of start"},"PANEL:TITLE:losses":function(){return"Losses"},"PANEL:TITLE:downtimes":function(){return"Downtimes"},"PANEL:TITLE:addForm":function(){return"Add order form"},"PANEL:TITLE:editForm":function(){return"Edit order form"},"FORM:ACTION:add":function(){return"Add order"},"FORM:ACTION:edit":function(){return"Edit order"},"FORM:ERROR:addFailure":function(){return"Failed to add the order :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the order :-("},"FORM:ERROR:order":function(){return"Order is required!"},"FORM:ERROR:operation":function(){return"Operation is required!"},"FORM:ERROR:startedAt":function(){return"Started at must be between the shift's time boundries!"},"FORM:ERROR:finishedAt":function(){return"Finished at must be between the shift's time boundries!"},"FORM:ERROR:times":function(){return"Finished at must be after Started at!"},"FORM:ERROR:INVALID_CHANGES":function(){return"Cannot edit the order: no valid changes were detected :("},"FORM:ERROR:INPUT":function(){return"Invalid input data!"},"filter:orderId":function(){return"Order no/12NC"},"filter:operationNo":function(){return"Oper. no"},"filter:submit":function(){return"Filter orders"},"filter:placeholder:type":function(){return"Any type"},"filter:placeholder:prodLine":function(){return"Any production line"},"filter:placeholder:orderId":function(){return"Any order"},"filter:placeholder:operationNo":function(){return"0000"},"PROPERTY:mrpControllers":function(){return"MRP Controller"},"PROPERTY:prodFlow":function(){return"Production flow"},"PROPERTY:prodLine":function(){return"Production line"},"PROPERTY:creator":function(){return"Creator"},"PROPERTY:date":function(){return"Date"},"PROPERTY:shift":function(){return"Shift"},"PROPERTY:prodShift":function(){return"Shift"},"PROPERTY:master":function(){return"Master"},"PROPERTY:leader":function(){return"Leader"},"PROPERTY:operator":function(){return"Operator"},"PROPERTY:operators":function(){return"Operators"},"PROPERTY:startedAt":function(){return"Started at"},"PROPERTY:finishedAt":function(){return"Finished at"
},"PROPERTY:duration":function(){return"Duration"},"PROPERTY:quantityDone":function(){return"Quantity done"},"PROPERTY:quantityDoneSap":function(){return"Quantity done / as per SAP"},"PROPERTY:workerCount":function(){return"Worker count"},"PROPERTY:workerCountSap":function(){return"Worker count / as per SAP"},"PROPERTY:taktTime":function(){return"Takt Time / wg SAP"},"PROPERTY:order":function(){return"Order"},"PROPERTY:orderId":function(){return"Order"},"PROPERTY:operation":function(){return"Operation"},"PROPERTY:operationNo":function(){return"Operation"},"PROPERTY:pressWorksheet":function(){return"Worksheet"},"unit:workerCount":function(){return"persons"},"unit:taktTime":function(){return"s"},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Order deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete order"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen order?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Are you sure you want to delete the <em>"+t.v(e,"label")+"</em> order?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the order :-("}},pl:!0}}),define("app/nls/pl/prodShiftOrders",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Zlecenia"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie historii zlece≈Ñ nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie danych zlecenia nie powiod≈Ço siƒô :("},"MSG:DELETED":function(e){return"Zlecenie <em>"+t.v(e,"label")+"</em> zosta≈Ço usuniƒôte."},"PAGE_ACTION:prodLogEntries":function(){return"Poka≈º historiƒô operacji"},"PAGE_ACTION:prodDowntimes":function(){return"Poka≈º przestoje"},"PAGE_ACTION:export":function(){return"Eksportuj zlecenia"},"PAGE_ACTION:edit":function(){return"Edytuj zlecenie"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ zlecenie"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy zlecenia produkcyjnego"},"PANEL:TITLE:orderDetails":function(){return"Szczeg√≥≈Çy zlecenia w momencie rozpoczƒôcia"},"PANEL:TITLE:losses":function(){return"Straty materia≈Çowe"},"PANEL:TITLE:downtimes":function(){return"Przestoje rozpoczƒôte w trakcie wykonywania zlecenia"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania zlecenia produkcyjnego"},"PANEL:TITLE:editForm":function(){return"Formularz edycji danych zlecenia produkcyjnego"},"filter:orderId":function(){return"Nr/12NC zlecenia"},"filter:operationNo":function(){return"Nr oper."},"filter:submit":function(){return"Filtruj historiƒô"},"filter:placeholder:type":function(){return"Dowolny typ"},"filter:placeholder:prodLine":function(){return"Dowolna linia produkcyjna"},"filter:placeholder:orderId":function(){return"Dowolne zlecenie"},"filter:placeholder:operationNo":function(){return"0000"},"FORM:ACTION:add":function(){return"Dodaj zlecenie"},"FORM:ACTION:edit":function(){return"Edytuj zlecenie"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá zlecenia :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá zlecenia :-("},"FORM:ERROR:order":function(){return"Zlecenie jest wymagane!"},"FORM:ERROR:operation":function(){return"Operacja jest wymagana!"},"FORM:ERROR:startedAt":function(){return"Czas rozpoczƒôcia musi mie≈õciƒá siƒô w ramach Zmiany produkcyjnej!"},"FORM:ERROR:finishedAt":function(){return"Czas zako≈Ñczenia musi mie≈õciƒá siƒô w ramach Zmiany produkcyjnej!"},"FORM:ERROR:times":function(){return"Czas zako≈Ñczenia musi byƒá po Czasie rozpoczƒôcia!"},"FORM:ERROR:INVALID_CHANGES":function(){return"Nie mo≈ºna zmodyfikowaƒá zlecenia: nie wykryto ≈ºadnych poprawnych zmian :("},"FORM:ERROR:INPUT":function(){return"Nieprawid≈Çowe dane wej≈õciowe!"},"PROPERTY:mrpControllers":function(){return"Kontroler MRP"},"PROPERTY:prodFlow":function(){return"Przep≈Çyw"},"PROPERTY:prodLine":function(){return"Linia produkcyjna"},"PROPERTY:creator":function(){return"RozpoczynajƒÖcy"},"PROPERTY:date":function(){return"Data"},"PROPERTY:shift":function(){return"Zmiana"},"PROPERTY:prodShift":function(){return"Zmiana"},"PROPERTY:master":function(){return"Mistrz"},"PROPERTY:leader":function(){return"Lider"},"PROPERTY:operator":function(){return"Operator"},"PROPERTY:operators":function(){return"Operatorzy"},"PROPERTY:startedAt":function(){return"Czas rozpoczƒôcia"},"PROPERTY:finishedAt":function(){return"Czas zako≈Ñczenia"},"PROPERTY:duration":function(){return"Czas trwania"},"PROPERTY:quantityDone":function(){return"Ilo≈õƒá wykonana"},"PROPERTY:quantityDoneSap":function(){return"Ilo≈õƒá wykonana / wg SAP"},"PROPERTY:workerCount":function(){return"Ilo≈õƒá os√≥b"},"PROPERTY:workerCountSap":function(){return"Ilo≈õƒá os√≥b / wg SAP"},"PROPERTY:taktTime":function(){return"Takt Time / wg SAP"},"PROPERTY:order":function(){return"Zlecenie"},"PROPERTY:orderId":function(){return"Zlecenie"},"PROPERTY:operation":function(){return"Operacja"},"PROPERTY:operationNo":function(){return"Operacja"},"PROPERTY:pressWorksheet":function(){return"Karta pracy"},"unit:workerCount":function(){return"osoby"},"unit:taktTime":function(){return"s"},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia zlecenia"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ zlecenie"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrane zlecenie?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá zlecenie <em>"+t.v(e,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá zlecenia :-("}}}),define("app/prodShiftOrders/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","./ProdShiftOrder","./pages/ProdShiftOrderListPage","i18n!app/nls/prodShiftOrders"],function(e,t,n,r,i,o){var a=n.auth("LOCAL","PROD_DATA:VIEW"),s=n.auth("PROD_DATA:VIEW");e.map("/prodShiftOrders",a,function(e){t.showPage(new o({rql:e.rql}))}),e.map("/prodShiftOrders/:id",a,function(e){t.loadPage("app/prodShiftOrders/pages/ProdShiftOrderDetailsPage",function(t){return new t({modelId:e.params.id})})}),e.map("/prodShiftOrders/:id;edit",s,function(e){t.loadPage(["app/prodShiftOrders/pages/EditProdShiftOrderFormPage"],function(t){return new t({model:new i({_id:e.params.id})})})}),e.map("/prodShiftOrders/:id;delete",s,r.bind(null,i))}),define("app/data/orgUnits",["./divisions","./subdivisions","./mrpControllers","./prodFlows","./workCenters","./prodLines"],function(e,t,n,r,i,o){function a(e,t,n){return e.filter(function(e){var r=e.get(t);return r?Array.isArray(r)?-1!==r.indexOf(n.id):r===n.id:!1})}var s={division:"subdivision",subdivision:"mrpController",mrpController:"prodFlow",prodFlow:"workCenter",workCenter:"prodLine",prodLine:null},u={prodLine:"workCenter",workCenter:"prodFlow",prodFlow:"mrpController",mrpController:"subdivision",subdivision:"division",division:null},c={division:e,subdivision:t,mrpController:n,prodFlow:r,workCenter:i,prodLine:o};return{getProdFlowsForSubdivision:function(e){return"string"==typeof e&&(e=t.get(e)),e?r.filter(function(t){return t.getSubdivision()===e}):[]},getAllByType:function(e){return c[e].models},getAllDivisions:function(){return e.models},getAllForProdLine:function(a){"string"==typeof a&&(a=o.get(a));var s={division:null,subdivision:null,mrpControllers:null,prodFlow:null,workCenter:null,prodLine:null};if(!a)return s;s.prodLine=a.id;var u=i.get(a.get("workCenter"));if(!u)return s;s.workCenter=u.id;var c=r.get(u.get("prodFlow"));if(!c)return s;s.prodFlow=c.id;var l=c.get("mrpController");if(!Array.isArray(l)||!l.length)return s;if(s.mrpControllers=l,l=n.get(l[0]),!l)return s;var d=t.get(l.get("subdivision"));if(!d)return s;s.subdivision=d.id;var p=e.get(d.get("division"));return p?(s.division=p.id,s):s},getType:function(a){if(null===a)return null;if(a.constructor===o.model)return"prodLine";if(a.constructor===i.model)return"workCenter";if(a.constructor===r.model)return"prodFlow";if(a.constructor===n.model)return"mrpController";if(a.constructor===t.model)return"subdivision";if(a.constructor===e.model)return"division";throw new Error("Unknown org unit type!")},getChildType:function(e){return s[e]||"division"},getChildren:function(e){var t=this.getType(e),n=this.getChildType(t),r=c[n];return r?a(r,t,e):[]},getByTypeAndId:function(e,t){var n=c[e];return n?n.get(t)||null:null},getParent:function(e){if(!e)return null;var t=this.getType(e),n=u[t],r=e.get(n);return!r||Array.isArray(r)&&!r.length?null:this.getByTypeAndId(n,Array.isArray(r)?r[0]:r)},RELATION_TYPES:{SIBLINGS:"siblings",TYPES:"types",CHILD:"child",DIFFERENT_CHILD:"differentChild",PARENT:"parent",DIFFERENT_PARENT:"differentParent",UNRELATED:"unrelated"},getRelationType:function(e,t,n,r){if(null===e&&"division"===n)return this.RELATION_TYPES.CHILD;if("division"===e&&null===n)return this.RELATION_TYPES.PARENT;var i=this.getByTypeAndId(e,t),o=this.getByTypeAndId(n,r);return e===n?this.getParent(i)===this.getParent(o)?this.RELATION_TYPES.SIBLINGS:this.RELATION_TYPES.TYPES:s[e]===n?this.getParent(o)===i?this.RELATION_TYPES.CHILD:this.RELATION_TYPES.DIFFERENT_PARENT:u[e]===n?this.getParent(i)===o?this.RELATION_TYPES.PARENT:this.RELATION_TYPES.DIFFERENT_CHILD:this.RELATION_TYPES.UNRELATED},getSubdivisionFor:function(n){return n&&n.constructor!==e.model?n.constructor===t.model?n:this.getSubdivisionFor(this.getParent(n)):null},containsProdLine:function(e,t,n){if("prodLine"===e)return Array.isArray(t)?-1!==t.indexOf(n):t===n;for(var r=this.getByTypeAndId("prodLine",n);;){var i=this.getParent(r);if(!i)return!1;if(this.getType(i)===e)return Array.isArray(t)?-1!==t.indexOf(i.id):t===i.id;r=i}}}}),define("app/prodDowntimes/ProdDowntimeCollection",["underscore","../time","../user","../data/prodLog","../core/Collection","./ProdDowntime"],function(e,t,n,r,i,o){var a={eq:!0,ne:!0,"in":!0,nin:!0};return i.extend({model:o,rqlQuery:function(e){var t=[{name:"eq",args:["status","undecided"]}];if(!n.isAllowedTo("PROD_DOWNTIMES:ALL")){var r=n.getSubdivision();if(r)t.push({name:"eq",args:["subdivision",r.id]});else{var i=n.getDivision();i&&t.push({name:"eq",args:["division",i.id]})}}return e.Query.fromObject({fields:{rid:1,aor:1,reason:1,reasonComment:1,mrpControllers:1,prodFlow:1,prodLine:1,status:1,startedAt:1,finishedAt:1,date:1,shift:1},sort:{startedAt:-1},limit:15,selector:{name:"and",args:t}})},findFirstUnfinished:function(){return this.find(function(e){return null==e.get("finishedAt")})},finish:function(){var e=this.findFirstUnfinished();return e?e.finish():null},addFromInfo:function(e,i){var a=new o({division:e.get("division"),subdivision:e.get("subdivision"),mrpControllers:e.get("mrpControllers"),prodFlow:e.get("prodFlow"),workCenter:e.get("workCenter"),prodLine:e.prodLine.id,prodShift:e.id,prodShiftOrder:e.prodShiftOrder.id||null,date:e.get("date"),shift:e.get("shift"),aor:i.aor,reason:i.reason,reasonComment:i.reasonComment,status:o.STATUS.UNDECIDED,startedAt:i.startedAt||t.getMoment().toDate(),creator:n.getInfo(),master:e.get("master"),leader:e.get("leader"),operator:e.get("operator"),operators:e.get("operators"),mechOrder:e.prodShiftOrder.get("mechOrder"),orderId:e.prodShiftOrder.get("orderId"),operationNo:e.prodShiftOrder.get("operationNo")});a.set("_id",r.generateId(a.get("startedAt"),e.id+i.aor));for(var s=this.rqlQuery.limit<1?1/0:this.rqlQuery.limit;this.length>=s;)this.pop({silent:!0});return this.unshift(a),a},hasOrMatches:function(e){if(e._id){var t=this.get(e._id);if(t)return!0}return this.matchStatus(e)&&this.matchAor(e)&&this.matchReason(e)&&this.matchOrgUnit(e)},matchStatus:function(t){var n=e.find(this.rqlQuery.selector.args,function(e){return("eq"===e.name||"in"===e.name)&&"status"===e.args[0]});return n?"eq"===n.name?t.status===n.args[1]:-1!==n.args[1].indexOf(t.status):!0},matchAor:function(t){var n=e.find(this.rqlQuery.selector.args,function(e){return"aor"===e.args[0]&&a[e.name]});return n?"eq"===n.name?t.aor===n.args[1]:"ne"===n.name?t.aor!==n.args[1]:"in"===n.name?-1!==n.args[1].indexOf(t.aor):"nin"===n.name?-1===n.args[1].indexOf(t.aor):!0:!0},matchReason:function(t){var n=e.find(this.rqlQuery.selector.args,function(e){return"reason"===e.args[0]&&a[e.name]});return n?"eq"===n.name?t.reason===n.args[1]:"ne"===n.name?t.reason!==n.args[1]:"in"===n.name?-1!==n.args[1].indexOf(t.reason):"nin"===n.name?-1===n.args[1].indexOf(t.reason):!0:!0},matchOrgUnit:function(){return!0}})}),define("app/prodShifts/ProdShift",["underscore","../i18n","../user","../time","../socket","../core/Model","../core/util/getShiftStartInfo","../data/downtimeReasons","../data/subdivisions","../data/workCenters","../data/prodFlows","../data/prodLines","../data/prodLog","../prodDowntimes/ProdDowntime","../prodDowntimes/ProdDowntimeCollection","../prodShiftOrders/ProdShiftOrder","app/core/templates/userInfo"],function(e,t,n,r,i,o,a,s,u,c,l,d,p,f,h,m,g){return o.extend({urlRoot:"/prodShifts",clientUrlRoot:"#prodShifts",topicPrefix:"prodShifts",privilegePrefix:"PROD_DATA",nlsDomain:"prodShifts",defaults:function(){return{division:null,subdivision:null,mrpControllers:null,prodFlow:null,workCenter:null,prodLine:null,date:null,shift:null,state:null,quantitiesDone:[{planned:0,actual:0},{planned:0,actual:0},{planned:0,actual:0},{planned:0,actual:0},{planned:0,actual:0},{planned:0,actual:0},{planned:0,actual:0},{planned:0,actual:0}],creator:null,createdAt:null,master:null,leader:null,operator:null,operators:null}},initialize:function(e,t){t&&t.production&&(this.shiftChangeTimer=null,this.prodLine=d.get(this.get("prodLine")),this.prodShiftOrder=new m,this.prodDowntimes=new h(null,{paginate:!1,rqlQuery:"sort(-startedAt)&limit(8)&prodLine="+encodeURIComponent(this.prodLine.id)}))},serialize:function(e){var n=this.toJSON();if(n.createdAt=r.format(n.createdAt,"YYYY-MM-DD HH:mm:ss"),n.creator=g({userInfo:n.creator}),n.date=r.format(n.date,"YYYY-MM-DD"),n.shift=n.shift?t("core","SHIFT:"+n.shift):"?",e.orgUnits){var i=u.get(n.subdivision),o=l.get(n.prodFlow);n.subdivision=i?i.getLabel():"?",n.prodFlow=o?o.getLabel():"?",n.mrpControllers=Array.isArray(n.mrpControllers)&&n.mrpControllers.length?n.mrpControllers.join("; "):"?"}return e.personnel&&(n.master=g({userInfo:n.master}),n.leader=g({userInfo:n.leader}),n.operator=g({userInfo:n.operator})),n},startShiftChangeMonitor:function(){this.stopShiftChangeMonitor(),this.shiftChangeTimer=setTimeout(function(e){e.shiftChangeTimer=null,e.changeShift(),e.startShiftChangeMonitor()},1e3,this)},stopShiftChangeMonitor:function(){null!==this.shiftChangeTimer&&(clearTimeout(this.shiftChangeTimer),this.shiftChangeTimer=null)},readLocalData:function(t){if(!this.isLocked()){var n=null;try{n=this.constructor.parse(t?t:JSON.parse(localStorage.getItem(this.getDataStorageKey()))),this.prodShiftOrder.clear(),n.prodShiftOrder&&this.prodShiftOrder.set(n.prodShiftOrder),this.prodDowntimes.reset(n.prodDowntimes||[]),delete n.prodShiftOrder,delete n.prodDowntimes}catch(r){}e.isEmpty(n)||(n.state=this.prodDowntimes.findFirstUnfinished()?"downtime":this.prodShiftOrder.id?"working":"idle",this.set(n)),this.changeShift()}},saveLocalData:function(){if(!this.isLocked()){var e=this.toJSON();delete e.division,delete e.subdivision,delete e.mrpControllers,delete e.prodFlow,delete e.workCenter,delete e.prodLine,e.prodShiftOrder=this.prodShiftOrder.toJSON(),e.prodDowntimes=this.prodDowntimes.toJSON(),localStorage.setItem(this.getDataStorageKey(),JSON.stringify(e))}},changeShift:function(){var e=this.getCurrentShiftMoment().toDate(),t=this.get("date");if(t&&e.getTime()<=t.getTime())return this.startShiftChangeMonitor();var r=this.id||null;this.finishDowntime(),this.finishOrder(),this.prodShiftOrder.onShiftChanged(),this.set({date:e,shift:this.getCurrentShift(),state:"idle",quantitiesDone:[{planned:0,actual:0},{planned:0,actual:0},{planned:0,actual:0},{planned:0,actual:0},{planned:0,actual:0},{planned:0,actual:0},{planned:0,actual:0},{planned:0,actual:0}],creator:n.getInfo(),createdAt:new Date,master:null,leader:null,operator:null,operators:null}),this.set("_id",p.generateId(this.get("createdAt"),this.prodLine.id)),p.record(this,"changeShift",{finishedProdShiftId:r,startedProdShift:this.toJSON()}),this.startShiftChangeMonitor()},changeMaster:function(e){this.set("master",e),this.onPersonnelChanged("master"),p.record(this,"changeMaster",e)},changeLeader:function(e){this.set("leader",e),this.onPersonnelChanged("leader"),p.record(this,"changeLeader",e)},changeOperator:function(e){this.set("operator",e),this.onPersonnelChanged("operator"),p.record(this,"changeOperator",e)},onPersonnelChanged:function(e){var t=this.get(e);this.prodShiftOrder.id&&this.prodShiftOrder.set(e,t);var n=this.prodDowntimes.findFirstUnfinished();n&&n.set(e,t),"operator"===e&&"assembly"===this.getSubdivisionType()&&(this.set("operators",t?[t]:null),this.onPersonnelChanged("operators"))},changeCurrentQuantitiesDone:function(e){this.changeQuantitiesDone(this.getCurrentQuantityDoneHourIndex(),e)},changeQuantitiesDone:function(e,t,n){("number"!=typeof t||isNaN(t))&&(t=0);var r=this.get("quantitiesDone");if(!r[e])throw new Error("Invalid hour: "+e);r[e].actual!==t&&(r[e].actual=t,this.trigger("change:quantitiesDone",this,r,n||{}),p.record(this,"changeQuantitiesDone",{hour:e,newValue:t}))},changeOrder:function(e,t){this.finishOrder(),this.set("state","working"),this.prodShiftOrder.onOrderChanged(this,e,t),p.record(this,"changeOrder",this.prodShiftOrder.toJSON())},correctOrder:function(e,t){if(!this.hasOrder())throw new Error("Cannot correct the order: no order is started!");var n=this.prodShiftOrder.onOrderCorrected(this,e,t);n&&p.record(this,"correctOrder",n)},continueOrder:function(){if(this.hasOrder())throw new Error("Cannot continue the order: an order is already started!");if(!this.prodShiftOrder.hasOrderData())throw new Error("Cannot continue the order: no order data!");this.set("state","working"),this.prodShiftOrder.onOrderContinued(this),p.record(this,"changeOrder",this.prodShiftOrder.toJSON())},changeQuantityDone:function(e){if(!this.hasOrder())throw new Error("Cannot change the quantity done: no prod shift order!");("number"!=typeof e||isNaN(e))&&(e=0),e!==this.prodShiftOrder.get("quantityDone")&&(this.prodShiftOrder.set("quantityDone",e),p.record(this,"changeQuantityDone",{newValue:e}))},changeWorkerCount:function(e){if(!this.hasOrder())throw new Error("Cannot change the worker count: no prod shift order!");("number"!=typeof e||isNaN(e))&&(e=0),e!==this.prodShiftOrder.get("workerCount")&&(this.prodShiftOrder.set("workerCount",e),p.record(this,"changeWorkerCount",{newValue:e}))},endDowntime:function(){this.hasOrder()?this.set("state","working"):this.set("state","idle"),this.finishDowntime()||this.saveLocalData()},endWork:function(){this.finishDowntime(),this.finishOrder(),this.set("state","idle"),this.prodShiftOrder.onWorkEnded(),p.record(this,"endWork",{})},startDowntime:function(e){var t=this.prodDowntimes.addFromInfo(this,e);this.set("state","downtime"),p.record(this,"startDowntime",t.toJSON())},finishOrder:function(){var e=this.prodShiftOrder.finish();e&&p.record(this,"finishOrder",e)},finishDowntime:function(){var e=this.prodDowntimes.finish();return e&&p.record(this,"finishDowntime",e),!!e},editDowntime:function(e,t){e.set(t),t=e.changedAttributes(),t&&(t._id=e.id,p.record(this,"editDowntime",t))},hasOrder:function(){return!!this.prodShiftOrder.id},getLabel:function(){var e=this.get("prodLine"),n=this.get("date"),i=this.get("shift");return n&&i&&(e+=": "+r.format(this.get("date"),"YYYY-MM-DD"),e+=", "+t("core","SHIFT:"+this.get("shift"))),e},getCurrentTime:function(){return r.getMoment().format("YYYY-MM-DD HH:mm:ss")},getCurrentShift:function(){var e=r.getMoment().hour();return e>=6&&14>e?1:e>=14&&22>e?2:3},getCurrentShiftMoment:function(){return a(Date.now()).moment},getTimeToNextShift:function(){return this.getCurrentShiftMoment().add(8,"hours").diff(r.getMoment())},getCurrentQuantityDoneHourIndex:function(){var e=r.getMoment().hours();return e>=6&&14>e?e-6:e>=14&&22>e?e-14:22===e?0:23===e?1:e+2},getCurrentQuantityDoneHourRange:function(){var e=r.getMoment().minutes(0).seconds(0),t=e.format("HH:mm:ss"),n=e.minutes(59).seconds(59).format("HH:mm:ss");return t+"-"+n},getQuantityDoneInCurrentHour:function(){var e=this.get("quantitiesDone");if(!Array.isArray(e))return 0;var t=this.getCurrentQuantityDoneHourIndex();return t>=e.length?0:e[t].actual},getOrderIdType:function(){return"press"===this.getSubdivisionType()?"nc12":"no"},isIdle:function(){return"idle"===this.get("state")},isDowntime:function(){return"downtime"===this.get("state")},isWorking:function(){return"working"===this.get("state")},getMaxQuantitiesDone:function(){return 150},getSubdivisionType:function(){var e=u.get(this.get("subdivision"));return e?e.get("type"):null},getDowntimeReasons:function(){return s.findBySubdivisionType(this.getSubdivisionType())},getBreakReason:function(){return s.findFirstBreakIdBySubdivisionType(this.getSubdivisionType())},getDefaultAor:function(){var e=this.prodLine.getSubdivision();return e?e.get("aor"):null},hasEnded:function(){var e=r.getMoment(this.get("date")).valueOf(),t=a(new Date).moment.valueOf();return t>e},updatePlannedQuantities:function(e){if(Array.isArray(e)&&8===e.length&&Array.isArray(this.attributes.quantitiesDone)){for(var t=0;8>t;++t)this.attributes.quantitiesDone[t].planned=e[t];this.saveLocalData(),this.trigger("change:quantitiesDone",this,this.attributes.quantitiesDone,{})}},isLocked:function(){return!p.isEnabled()||null===this.getSecretKey()},getSecretKey:function(){var e=localStorage.getItem(this.getSecretKeyStorageKey());return"string"==typeof e?e:null},setSecretKey:function(e,t){null===e?(localStorage.removeItem(this.getSecretKeyStorageKey()),localStorage.removeItem(this.getDataStorageKey()),this.prodShiftOrder.clear(),this.prodDowntimes.reset(),this.stopShiftChangeMonitor(),this.set({date:null,shift:null,state:null,quantitiesDone:null,creator:null,createdAt:null,master:null,leader:null,operator:null,operators:null}),this.trigger("locked")):(localStorage.setItem(this.getSecretKeyStorageKey(),e),this.trigger("unlocked"),this.readLocalData(t))},getSecretKeyStorageKey:function(){return"PRODUCTION:SECRET_KEY:"+this.prodLine.id},getDataStorageKey:function(){return"PRODUCTION:DATA:"+this.prodLine.id}},{STATE:{IDLE:"idle",WORKING:"working",DOWNTIME:"downtime"},parse:function(e){return"string"==typeof e.date&&(e.date=new Date(e.date)),e}})}),define("app/prodShifts/ProdShiftCollection",["../data/prodLines","../core/Collection","../core/util/matchesProdLine","../core/util/matchesEquals","./ProdShift"],function(e,t,n,r,i){return t.extend({model:i,rqlQuery:function(e){return e.Query.fromObject({fields:{mrpControllers:1,prodFlow:1,prodLine:1,date:1,shift:1,createdAt:1,creator:1},sort:{createdAt:-1},limit:15,selector:{name:"and",args:[]}})},hasOrMatches:function(e){return this.get(e._id)?!0:n(this.rqlQuery,e.prodLine)&&r(this.rqlQuery,"shift",e.shift)}})}),define("app/prodShifts/views/ProdShiftListView",["app/core/views/ListView","app/data/prodLines","app/data/views/renderOrgUnitPath"],function(e,t,n){return e.extend({remoteTopics:{"prodShifts.created.*":"refreshIfMatches","prodShifts.updated.*":"refreshIfMatches","prodShifts.deleted.*":"refreshIfMatches"},columns:["mrpControllers","prodFlow","prodLine","date","shift","createdAt","creator"],serializeRow:function(e){return e.serialize({orgUnits:!0})},serializeActions:function(){var t=this.collection;return function(n){return[e.actions.viewDetails(t.get(n._id))]}},afterRender:function(){e.prototype.afterRender.call(this);var r=this;this.$('.list-item > td[data-id="prodLine"]').popover({container:this.el,trigger:"hover",placement:"auto right",html:!0,content:function(){return n(t.get(r.$(this).text().trim()),!1,!1).split(" \\ ").join("<br>\\ ")}})},refreshIfMatches:function(e){this.collection.hasOrMatches(e)&&this.refreshCollection()}})}),define("app/prodShifts/templates/filter",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<form class="well filter-form">\n  <div class="form-group">\n    <label for="',idPrefix,'-from">',t("core","filter:date:from"),'</label>\n    <input id="',idPrefix,'-from" class="form-control" name="from" type="date" placeholder="YYYY-MM-DD">\n  </div>\n  <div class="form-group">\n    <label for="',idPrefix,'-to">',t("core","filter:date:to"),'</label>\n    <input id="',idPrefix,'-to" class="form-control" name="to" type="date" placeholder="YYYY-MM-DD">\n  </div>\n  <div class="form-group">\n    <label for="',idPrefix,'-shift-0">',t("prodShifts","PROPERTY:shift"),'</label>\n    <div class="filter-radio-group">\n      '),[0,1,2,3].forEach(function(e){buf.push('\n      <label class="radio-inline">\n        <input id="',idPrefix,"-shift-",e,'" name="shift" type="radio" value="',e,'">\n        ',t("core","SHIFT:"+e),"\n      </label>\n      ")}),buf.push('\n    </div>\n  </div>\n  <div class="form-group">\n    <label for="',idPrefix,'-prodLine">',t("prodShifts","PROPERTY:prodLine"),'</label>\n    <input id="',idPrefix,'-prodLine" name="prodLine" type="text" data-placeholder="',t("prodShifts","filter:placeholder:prodLine"),'">\n  </div>\n  ',renderLimit(),'\n  <div class="form-group filter-actions">\n    <button type="submit" class="btn btn-default"><i class="fa fa-filter"></i><span>',escape(t("prodShifts","filter:submit")),"</span></button>\n  </div>\n</form>\n")}();return buf.join("")}}),define("app/prodShifts/views/ProdShiftFilterView",["app/user","app/data/prodLines","app/core/views/FilterView","app/core/util/fixTimeRange","app/prodShifts/templates/filter"],function(e,t,n,r,i){return n.extend({template:i,defaultFormData:{createdAt:"",prodLine:null,shift:0},termToForm:{date:function(e,t,n){r.toFormData(n,t,"date")},prodLine:function(e,t,n){n[e]=t.args[1]},shift:"prodLine"},afterRender:function(){n.prototype.afterRender.call(this),this.$id("prodLine").select2({width:"275px",allowClear:!e.getDivision(),data:this.getApplicableProdLines()})},getApplicableProdLines:function(){return t.getForCurrentUser().map(function(e){return{id:e.id,text:e.getLabel()}})},serializeFormToQuery:function(e){var t=r.fromView(this),n=this.$id("prodLine").val(),i=parseInt(this.$("input[name=shift]:checked").val(),10);n&&n.length&&e.push({name:"eq",args:["prodLine",n]}),i&&e.push({name:"eq",args:["shift",i]}),t.from&&e.push({name:"ge",args:["date",t.from]}),t.to&&e.push({name:"le",args:["date",t.to]})}})}),define("app/prodShifts/pages/ProdShiftListPage",["app/i18n","app/viewport","app/core/util/bindLoadingMessage","app/core/util/pageActions","app/core/View","../ProdShiftCollection","../views/ProdShiftListView","../views/ProdShiftFilterView","app/core/templates/listPage"],function(e,t,n,r,i,o,a,s,u){return i.extend({template:u,layoutName:"page",pageId:"prodShiftList",breadcrumbs:[e.bound("prodShifts","BREADCRUMBS:browse")],actions:function(e){return[r.export(e,this,this.prodShiftList),r.add(this.prodShiftList,"PROD_DATA:MANAGE")]},initialize:function(){this.defineModels(),this.defineViews(),this.setView(".filter-container",this.filterView),this.setView(".list-container",this.listView)},defineModels:function(){this.prodShiftList=n(new o(null,{rqlQuery:this.options.rql}),this)},defineViews:function(){this.listView=new a({collection:this.prodShiftList}),this.filterView=new s({model:{rqlQuery:this.prodShiftList.rqlQuery}}),this.listenTo(this.filterView,"filterChanged",this.refreshList)},load:function(e){return e(this.prodShiftList.fetch({reset:!0}))},refreshList:function(e){this.prodShiftList.rqlQuery=e,this.listView.refreshCollectionNow(),this.broker.publish("router.navigate",{url:this.prodShiftList.genClientUrl()+"?"+e,trigger:!1,replace:!0})}})}),define("app/nls/prodShifts",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Shifts"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the shifts :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the shift :("},"MSG:DELETED":function(e){return"Shift <em>"+t.v(e,"label")+"</em> was deleted."},"PAGE_ACTION:prodLogEntries":function(){return"Show operation log"},"PAGE_ACTION:export":function(){return"Export shifts"},"PAGE_ACTION:add":function(){return"Add shift"},"PAGE_ACTION:edit":function(){return"Edit shift"},"PAGE_ACTION:delete":function(){return"Delete shift"},"PANEL:TITLE:details":function(){return"Shift's details"},"PANEL:TITLE:addForm":function(){return"Add shift form"},"PANEL:TITLE:editForm":function(){return"Edit shift form"},"filter:submit":function(){return"Filter shifts"},"filter:placeholder:prodLine":function(){return"Any production line"},"PROPERTY:mrpControllers":function(){return"MRP Controller"},"PROPERTY:prodFlow":function(){return"Production flow"},"PROPERTY:prodLine":function(){return"Production line"},"PROPERTY:type":function(){return"Type"},"PROPERTY:createdAt":function(){return"Created at"},"PROPERTY:creator":function(){return"Creator"},"PROPERTY:date":function(){return"Date"},"PROPERTY:shift":function(){return"Shift"},"PROPERTY:master":function(){return"Master"},"PROPERTY:leader":function(){return"Leader"},"PROPERTY:operator":function(){return"Operator"},"PROPERTY:operators":function(){return"Operators"},"PROPERTY:quantitiesDone":function(){return"Quantities done"},"PROPERTY:quantitiesDone:hour":function(){return"Hour"},"PROPERTY:quantitiesDone:planned":function(){return"Planned"},"PROPERTY:quantitiesDone:actual":function(){return"Actual"},"PROPERTY:totalQuantityDone":function(){return"Quantity done"},"FORM:ACTION:add":function(){return"Add shift"},"FORM:ACTION:edit":function(){return"Edit shift"},"FORM:ERROR:addFailure":function(){return"Failed to add the shift :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the shift :-("},"FORM:ERROR:INVALID_CHANGES":function(){return"Cannot edit the shift: no valid changes were detected :("},"FORM:ERROR:INPUT":function(){return"Invalid input data!"},"FORM:ERROR:SHIFT_NOT_ENDED":function(){return"The specified shift didn't end yet!"},"FORM:ERROR:EXISTING":function(){return"The specified shift already exists!"},totalQuantityDone:function(e){return t.v(e,"actual")+" of "+t.v(e,"planned")},"timeline:title":function(){return"Timeline"},"timeline:title:manage":function(){return"(hold Ctrl while hovering over an area, to enable additional actions)"},"timeline:action:addOrder":function(){return"Add order"},"timeline:action:addDowntime":function(){return"Add downtime"},"timeline:action:editOrder":function(){return"Edit order"},"timeline:action:editDowntime":function(){return"Edit downtime"},"timeline:action:deleteOrder":function(){return"Delete order"},"timeline:action:deleteDowntime":function(){return"Delete downtime"},"timeline:popover:idle":function(){return"Idle"
},"timeline:popover:working":function(){return"Order"},"timeline:popover:downtime":function(){return"Downtime"},"timeline:popover:startedAt":function(){return"Started at"},"timeline:popover:finishedAt":function(){return"Finished at"},"timeline:popover:duration":function(){return"Duration"},"timeline:popover:order":function(){return"Order"},"timeline:popover:operation":function(){return"Operation"},"timeline:popover:reason":function(){return"Reason"},"timeline:popover:aor":function(){return"AOR"},"timeline:popover:workerCount":function(){return"Worker count"},"timeline:popover:quantityDone":function(){return"Quantiy done"},"charts:quantitiesDone:title":function(){return"Quantities done in specific hours"},"charts:quantitiesDone:unit":function(){return" items"},"charts:quantitiesDone:series:planned":function(){return"Planned"},"charts:quantitiesDone:series:actual":function(){return"Actual"},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Shift deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete shift"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen shift?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Are you sure you want to delete the <em>"+t.v(e,"label")+"</em> shift?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the shift :-("}},pl:!0}}),define("app/nls/pl/prodShifts",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Zmiany"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie historii zmian nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie danych zmiany nie powiod≈Ço siƒô :("},"PAGE_ACTION:prodLogEntries":function(){return"Poka≈º historiƒô operacji"},"PAGE_ACTION:export":function(){return"Eksportuj zmiany"},"PAGE_ACTION:add":function(){return"Dodaj zmianƒô"},"PAGE_ACTION:edit":function(){return"Edytuj zmianƒô"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ zmianƒô"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy zmiany"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania zmiany produkcyjnej"},"PANEL:TITLE:editForm":function(){return"Formularz edycji danych zmiany produkcyjnej"},"filter:submit":function(){return"Filtruj historiƒô"},"filter:placeholder:prodLine":function(){return"Dowolna linia produkcyjna"},"PROPERTY:mrpControllers":function(){return"Kontroler MRP"},"PROPERTY:prodFlow":function(){return"Przep≈Çyw"},"PROPERTY:prodLine":function(){return"Linia produkcyjna"},"PROPERTY:type":function(){return"Typ"},"PROPERTY:createdAt":function(){return"Czas rozpoczƒôcia"},"PROPERTY:creator":function(){return"RozpoczynajƒÖcy"},"PROPERTY:date":function(){return"Data"},"PROPERTY:shift":function(){return"Zmiana"},"PROPERTY:master":function(){return"Mistrz"},"PROPERTY:leader":function(){return"Lider"},"PROPERTY:operator":function(){return"Operator"},"PROPERTY:operators":function(){return"Operatorzy"},"PROPERTY:quantitiesDone":function(){return"Wykonane ilo≈õci"},"PROPERTY:quantitiesDone:hour":function(){return"Godz."},"PROPERTY:quantitiesDone:planned":function(){return"Plan"},"PROPERTY:quantitiesDone:actual":function(){return"Wykonane"},"PROPERTY:totalQuantityDone":function(){return"Wykonana ilo≈õƒá"},"FORM:ACTION:add":function(){return"Dodaj zmianƒô"},"FORM:ACTION:edit":function(){return"Edytuj zmianƒô"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá zmiany :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá zmiany :-("},"FORM:ERROR:INVALID_CHANGES":function(){return"Nie mo≈ºna zmodyfikowaƒá zmiany produkcyjnej: nie wykryto ≈ºadnych poprawnych zmian :("},"FORM:ERROR:INPUT":function(){return"Nieprawid≈Çowe dane wej≈õciowe!"},"FORM:ERROR:SHIFT_NOT_ENDED":function(){return"Wybrana zmiana jeszcze siƒô nie sko≈Ñczy≈Ça!"},"FORM:ERROR:EXISTING":function(){return"Wybrana zmiana ju≈º istnieje!"},totalQuantityDone:function(e){return t.v(e,"actual")+" z "+t.v(e,"planned")},"timeline:title":function(){return"O≈õ czasu"},"timeline:title:manage":function(){return"(przytrzymaj Ctrl przy naje≈ºd≈ºaniu na obszar, aby wy≈õwietliƒá opcje zarzƒÖdzania)"},"timeline:action:addOrder":function(){return"Dodaj zlecenie"},"timeline:action:addDowntime":function(){return"Dodaj przest√≥j"},"timeline:action:editOrder":function(){return"Edytuj zlecenie"},"timeline:action:editDowntime":function(){return"Edytuj przest√≥j"},"timeline:action:deleteOrder":function(){return"Usu≈Ñ zlecenie"},"timeline:action:deleteDowntime":function(){return"Usu≈Ñ przest√≥j"},"timeline:popover:idle":function(){return"Bezczynno≈õƒá"},"timeline:popover:working":function(){return"Zlecenie"},"timeline:popover:downtime":function(){return"Przest√≥j"},"timeline:popover:startedAt":function(){return"Czas rozpoczƒôcia"},"timeline:popover:finishedAt":function(){return"Czas zako≈Ñczenia"},"timeline:popover:duration":function(){return"Czas trwania"},"timeline:popover:order":function(){return"Zlecenie"},"timeline:popover:operation":function(){return"Operacja"},"timeline:popover:reason":function(){return"Pow√≥d"},"timeline:popover:aor":function(){return"Obszar"},"timeline:popover:workerCount":function(){return"Ilo≈õƒá os√≥b"},"timeline:popover:quantityDone":function(){return"Ilo≈õƒá wykonana"},"charts:quantitiesDone:title":function(){return"Wykonane ilo≈õci w przedzia≈Çach godzinowych"},"charts:quantitiesDone:unit":function(){return" szt."},"charts:quantitiesDone:series:planned":function(){return"Plan"},"charts:quantitiesDone:series:actual":function(){return"Wykonane"},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia zmiany"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ zmianƒô"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybranƒÖ zmianƒô?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá zmianƒô <em>"+t.v(e,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá zmiany :-("}}}),define("app/prodShifts/routes",["../router","../viewport","../user","../data/orgUnits","./ProdShift","./pages/ProdShiftListPage","i18n!app/nls/prodShifts"],function(e,t,n,r,i,o){var a=n.auth("LOCAL","PROD_DATA:VIEW"),s=n.auth("PROD_DATA:MANAGE");e.map("/prodShifts",a,function(e){t.showPage(new o({rql:e.rql}))}),e.map("/prodShifts;add",s,function(){t.loadPage(["app/prodShifts/pages/AddProdShiftFormPage"],function(e){return new e({model:new i})})}),e.map("/prodShifts/:id",a,function(e){t.loadPage("app/prodShifts/pages/ProdShiftDetailsPage",function(t){return new t({latest:null!==r.getByTypeAndId("prodLine",e.params.id),modelId:e.params.id})})}),e.map("/prodShifts/:id;edit",s,function(e){t.loadPage(["app/prodShifts/pages/EditProdShiftFormPage"],function(t){return new t({model:new i({_id:e.params.id})})})})}),define("app/production/templates/controls",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="production-controls">\n  <a href="#" class="fa fa-home" title="',t("production","controls:dashboard"),'"></a>\n  <a class="fa fa-unlock production-controls-lock" title="',t("production","controls:lock"),'"></a>\n  <a class="fa fa-lock production-controls-unlock" title="',t("production","controls:unlock"),'" accesskey="a"></a>\n  <i class="fa fa-refresh production-controls-sync" title="',t("production","controls:sync"),'"></i>\n</div>\n')}();return buf.join("")}}),define("app/production/templates/unlockDialog",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<form class="production-',type,'Dialog">\n  <p class="message message-inline message-info">',t("production","unlockDialog:message:"+type,{prodLine:prodLine}),'</p>\n  <div class="form-group">\n    <label for="',idPrefix,'-login">',t("production","unlockDialog:login"),'</label>\n    <input id="',idPrefix,'-login" class="form-control" type="text" autofocus required>\n  </div>\n  <div class="form-group">\n    <label for="',idPrefix,'-password">',t("production","unlockDialog:password"),'</label>\n    <input id="',idPrefix,'-password" class="form-control" type="password" required>\n  </div>\n  <div class="form-actions">\n    <button id="',idPrefix,'-submit" class="btn btn-primary" type="submit">',t("production","unlockDialog:"+type),'</button>\n    <button class="btn btn-link cancel" type="button">',t("core","ACTION_FORM:BUTTON:cancel"),"</button>\n  </div>\n</form>\n")}();return buf.join("")}}),define("app/production/views/UnlockDialogView",["app/i18n","app/viewport","app/core/View","app/production/templates/unlockDialog"],function(e,t,n,r){return n.extend({template:r,dialogClassName:"production-modal",events:{submit:function(e){e.preventDefault();var t=this.$id("submit")[0];if(!t.disabled){t.disabled=!0;var n={prodLine:this.model.prodLine.id,login:this.$id("login").val(),password:this.$id("password").val()};this.socket.emit("production.unlock",n,this.handleUnlockResponse.bind(this))}}},serialize:function(){return{idPrefix:this.idPrefix,type:"unlock",prodLine:this.model.prodLine.id}},onDialogShown:function(e){this.closeDialog=e.closeDialog.bind(e)},closeDialog:function(){},handleUnlockResponse:function(n,r){if(n)return this.$id("password").val(""),"INVALID_PASSWORD"===n.message?this.$id("password").focus():this.$id("login").val("").focus(),t.msg.show({type:"error",time:3e3,text:e.has("production","unlockDialog:error:"+n.message)?e("production","unlockDialog:error:"+n.message):e("production","unlockDialog:error:UNLOCK_FAILURE")}),this.$id("submit").prop("disabled",!1);var i=r.prodShift;i&&(i.prodShiftOrder=r.prodShiftOrder,i.prodDowntimes=r.prodDowntimes),this.model.setSecretKey(r.secretKey,i),this.closeDialog()}})}),define("app/production/views/LockDialogView",["app/i18n","app/viewport","app/core/View","app/production/templates/unlockDialog"],function(e,t,n,r){return n.extend({template:r,dialogClassName:"production-modal",events:{submit:function(e){e.preventDefault();var t=this.$id("submit")[0];if(!t.disabled){t.disabled=!0;var n={prodLine:this.model.prodLine.id,secretKey:this.model.getSecretKey(),login:this.$id("login").val(),password:this.$id("password").val()};this.socket.emit("production.lock",n,this.handleLockResponse.bind(this))}}},serialize:function(){return{idPrefix:this.idPrefix,type:"lock",prodLine:this.model.prodLine.id}},onDialogShown:function(e){this.closeDialog=e.closeDialog.bind(e)},closeDialog:function(){},handleLockResponse:function(n){return n?(this.$id("password").val(""),"INVALID_PASSWORD"===n.message?this.$id("password").focus():this.$id("login").val("").focus(),t.msg.show({type:"error",time:3e3,text:e.has("production","unlockDialog:error:"+n.message)?e("production","unlockDialog:error:"+n.message):e("production","unlockDialog:error:LOCK_FAILURE")}),this.$id("submit").prop("disabled",!1)):(this.model.setSecretKey(null),void this.closeDialog())}})}),define("app/production/views/ProductionControlsView",["app/i18n","app/user","app/viewport","app/core/View","app/production/templates/controls","./UnlockDialogView","./LockDialogView"],function(e,t,n,r,i,o,a){var s={"socket.connected":"#5BB75B","socket.disconnected":"#DA4F49","socket.connectFailed":"#DA4F49","socket.connecting":"#F0AD4E"};return r.extend({template:i,localTopics:{"socket.*":function(e,t){var n=s[t];n&&this.$syncControl.css("color",n)},"production.syncing":function(){this.$syncControl.addClass("fa-spin")},"production.synced":function(){this.$syncControl.removeClass("fa-spin")}},events:{"click a.production-controls-lock":"lock","click a.production-controls-unlock":"unlock","mouseover a.production-controls-lock":function(e){this.$(e.target).removeClass("fa-unlock").addClass("fa-lock")},"mouseout a.production-controls-lock":function(e){this.$(e.target).removeClass("fa-lock").addClass("fa-unlock")},"mouseover a.production-controls-unlock":function(e){this.$(e.target).removeClass("fa-lock").addClass("fa-unlock")},"mouseout a.production-controls-unlock":function(e){this.$(e.target).removeClass("fa-unlock").addClass("fa-lock")}},afterRender:function(){this.$syncControl=this.$(".production-controls-sync"),this.$syncControl.css("color",s[this.socket.isConnected()?"socket.connected":"socket.disconnected"])},unlock:function(){return this.socket.isConnected()?void(this.model.isLocked()&&n.showDialog(new o({model:this.model}),e("production","unlockDialog:title:unlock"))):n.msg.show({type:"warning",time:2e3,text:e("production","controls:msg:sync:noConnection")})},lock:function(){return this.socket.isConnected()?void(this.model.isLocked()||n.showDialog(new a({model:this.model}),e("production","unlockDialog:title:lock"))):n.msg.show({type:"warning",time:2e3,text:e("production","controls:msg:sync:noConnection")})}})}),define("app/users/util/decorateUser",["app/i18n","app/data/aors","app/data/companies","app/data/prodFunctions","app/data/divisions","app/data/subdivisions","app/data/views/renderOrgUnitPath"],function(e,t,n,r,i,o,a){return function(s){var u=s.toJSON(),c=n.get(u.company);u.company=c?c.getLabel():e("users","NO_DATA:company"),u.aors=Array.isArray(u.aors)?u.aors.map(function(e){var n=t.get(e);return n?n.getLabel():null}).filter(function(e){return!!e}).join("; "):"",u.aors.length||(u.aors=e("users","NO_DATA:aors"));var l=r.get(u.prodFunction);if(u.prodFunction=l?l.getLabel():e("users","NO_DATA:prodFunction"),u.orgUnitType&&u.orgUnitId){var d;switch(u.orgUnitType){case"division":d=i.get(u.orgUnitId);break;case"subdivision":d=o.get(u.orgUnitId)}d&&(u.orgUnit=a(d,!1,!1))}return u.vendor&&(u.vendor.name?u.vendor=u.vendor.name+" ("+u.vendor._id+")":u.vendor._id&&(u.vendor=u.vendor._id)),u}}),define("app/users/User",["../core/Model","./util/decorateUser"],function(e,t){return e.extend({urlRoot:"/users",clientUrlRoot:"#users",topicPrefix:"users",privilegePrefix:"USERS",nlsDomain:"users",labelAttribute:"login",defaults:{login:null,email:null,prodFunction:"unspecified",privileges:null,aors:null,company:null,kdDivision:null,personellId:null,card:null,firstName:null,lastName:null,registerDate:null,kdPosition:null,active:!0,vendor:null},initialize:function(){Array.isArray(this.get("privileges"))||this.set("privileges",[]),Array.isArray(this.get("aors"))||this.set("aors",[])},getLabel:function(){var e=this.get("lastName")||"",t=this.get("firstName")||"";return e.length&&t.length?e+" "+t:this.get("login")},url:function(){var t=e.prototype.url.apply(this,arguments);return this.isNew()?t:t+"?populate(vendor)"},serialize:function(){return t(this)}})}),define("app/users/UserCollection",["../core/Collection","./User"],function(e,t){return e.extend({model:t,rqlQuery:"select(personellId,lastName,firstName,company,orgUnitType,orgUnitId,prodFunction)&sort(+lastName,+firstName)&limit(15)"})}),define("app/production/templates/personelPicker",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<form class="production-personelPicker">\n  '),offline&&buf.push('\n  <p class="message message-inline message-warning">',t("production","personelPicker:offline:warning"),"</p>\n  "),buf.push('\n  <div class="form-group">\n    <label for="',idPrefix,'-user">',escape(label),'</label>\n    <input id="',idPrefix,'-user" class="form-control" type="text">\n  </div>\n  <div class="form-actions">\n    <button type="submit" class="btn btn-primary">',t("production","personelPicker:submit"),'</button>\n    <button type="button" class="cancel btn btn-link">',t("production","personelPicker:cancel"),"</button>\n  </div>\n</form>\n")}();return buf.join("")}}),define("app/production/views/PersonelPickerView",["app/i18n","app/viewport","app/core/View","app/users/util/setUpUserSelect2","app/production/templates/personelPicker"],function(e,t,n,r,i){return n.extend({template:i,dialogClassName:"production-modal",localTopics:{"socket.connected":"render","socket.disconnected":"render"},events:{"keypress .select2-container":function(e){13===e.which&&(this.$el.submit(),e.preventDefault())},submit:function(e){e.preventDefault();var t=this.$(".btn-primary")[0];if(!t.disabled){t.disabled=!0;var n={id:null,label:null};if(this.socket.isConnected()){var r=this.$id("user").select2("data");r&&(n.id=r.id,n.label=r.text)}else n.label=this.$id("user").val().trim().replace(/[^0-9]+/g,"");this.trigger("userPicked",null!==n.label&&n.label.length?n:null)}}},serialize:function(){var t=!this.socket.isConnected();return{idPrefix:this.idPrefix,offline:t,label:e("production","personelPicker:"+(t?"offline":"online")+":label")}},afterRender:function(){var t=this.$id("user");this.socket.isConnected()?(r(t.removeClass("form-control"),{dropdownCssClass:"production-dropdown"}),t.select2("focus")):t.attr("placeholder",e("production","personelPicker:offline:placeholder")).focus()},onDialogShown:function(){this.$id("user").focus().select2("focus")}})}),define("app/production/templates/header",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="production-header">\n  <h1 class="production-pageHeader"></h1>\n  <div class="production-properties">\n    <div class="production-property production-property-currentTime">\n      <div class="production-property-name">',t("production","property:currentTime"),'</div>\n      <div class="production-property-value"></div>\n    </div>\n    <div class="production-property production-property-shift">\n      <div class="production-property-name">',t("production","property:shift"),'</div>\n      <div class="production-property-value"></div>\n    </div>\n    <div class="production-property production-property-orgUnit">\n      <div class="production-property-name">',t("production","property:orgUnit"),'</div>\n      <div class="production-property-value"></div>\n    </div>\n    <div class="production-property production-property-master">\n      <div class="production-property-name">',t("production","property:master"),'</div>\n      <div class="production-property-value is-editable"></div>\n    </div>\n    <div class="production-property production-property-leader">\n      <div class="production-property-name">',t("production","property:leader"),'</div>\n      <div class="production-property-value is-editable"></div>\n    </div>\n    <div class="production-property production-property-operator">\n      <div class="production-property-name">',t("production","property:operator"),'</div>\n      <div class="production-property-value is-editable"></div>\n    </div>\n  </div>\n</div>\n')}();return buf.join("")}}),define("app/production/views/ProductionHeaderView",["app/i18n","app/viewport","app/core/View","app/data/prodLog","app/data/views/renderOrgUnitPath","app/users/UserCollection","./PersonelPickerView","app/production/templates/header"],function(e,t,n,r,i,o,a,s){return n.extend({template:s,localTopics:{"visibility.visible":function(){this.updateCurrentTime()},"visibility.hidden":function(){clearTimeout(this.timers.updateCurrentTime)},"divisions.synced":"updateOrgUnit","subdivisions.synced":"updateOrgUnit","mrpControllers.synced":"updateOrgUnit","prodFlows.synced":"updateOrgUnit","workCenters.synced":"updateOrgUnit","prodLines.synced":"updateOrgUnit","socket.connected":"fillPersonnelData"},events:{"click .production-property-master .btn-link":"showMasterPickerDialog","click .production-property-leader .btn-link":"showLeaderPickerDialog","click .production-property-operator .btn-link":"showOperatorPickerDialog"},initialize:function(){this.updateCurrentTime=this.updateCurrentTime.bind(this),this.listenTo(this.model.prodLine,"change:description",this.updatePageHeader),this.listenTo(this.model,"change:shift",this.updateShift),this.listenTo(this.model,"change:master",this.updateMaster),this.listenTo(this.model,"change:leader",this.updateLeader),this.listenTo(this.model,"change:operator",this.updateOperator),this.listenTo(this.model,"locked unlocked",function(){this.updateMaster(),this.updateLeader(),this.updateOperator()})},afterRender:function(){this.$currentTime=this.$property("currentTime"),this.updatePageHeader(),this.updateCurrentTime(),this.updateShift(),this.updateOrgUnit(),this.updateMaster(),this.updateLeader(),this.updateOperator(),this.socket.isConnected()&&this.fillPersonnelData()},updatePageHeader:function(){this.$(".production-pageHeader").text(this.model.prodLine.get("description")||this.model.prodLine.id)},updateCurrentTime:function(){this.$currentTime&&this.$currentTime.text(this.model.getCurrentTime()),this.scheduleCurrentTimeUpdate()},updateShift:function(){var t=this.model.get("shift");t="number"==typeof t?e("core","SHIFT:"+t):"?",this.$property("shift").text(t)},updateOrgUnit:function(){this.$property("orgUnit").text(i(this.model.prodLine.getSubdivision(),!1,!1)||"?")},updateMaster:function(){this.updatePersonnel("master")},updateLeader:function(){this.updatePersonnel("leader")},updateOperator:function(){this.updatePersonnel("operator")},updatePersonnel:function(t){var n,r=!this.model.isLocked(),i=this.model.get(t),o=i&&i.label?i.label:null;if(o){var a=o.match(/^(.*?) \(.*?\)$/);n=null===a?o:a[1].trim(),r&&(n+=' <button class="btn btn-link">'+e("production","property:"+t+":change")+"</button>")}else n=e("production","property:"+t+":noData:"+(r?"un":"")+"locked"),r&&(n='<button class="btn btn-link">'+n+"</a>");this.$property(t).html(n)},scheduleCurrentTimeUpdate:function(){null!=this.timers.updateCurrentTime&&clearTimeout(this.timers.updateCurrentTime),this.timers.updateCurrentTime=setTimeout(function(e){e.timers.updateCurrentTime=null,e.updateCurrentTime()},999,this)},$property:function(e){return this.$(".production-property-"+e+" .production-property-value")},showMasterPickerDialog:function(e){e&&(e.preventDefault(),e.target.blur()),this.showPickerDialog("master",this.model.changeMaster.bind(this.model))},showLeaderPickerDialog:function(e){e&&(e.preventDefault(),e.target.blur()),this.showPickerDialog("leader",this.model.changeLeader.bind(this.model))},showOperatorPickerDialog:function(e){e&&(e.preventDefault(),e.target.blur()),this.showPickerDialog("operator",this.model.changeOperator.bind(this.model))},showPickerDialog:function(n,r){var i=new a;this.listenTo(i,"userPicked",function(e){t.closeDialog();var i=this.model.get(n);null===i?null!==e&&r(e):(i!==e||e&&(e.id!==i.id||e.label!==i.label))&&r(e),this.$(".production-property-"+n+" .btn-link").focus()}),t.showDialog(i,e("production","personelPicker:title:"+n))},fillPersonnelData:function(){var e=[],t=[],n=this.model;["master","leader","operator"].forEach(function(r){var i=n.get(r);i&&null===i.id&&i.label.trim().length>0&&(e.push(i.label),t.push(r))}),e.length>0&&this.fillUserInfo(e,t)},fillUserInfo:function(e,t){if(r.isSyncing())return this.broker.subscribe("production.synced",this.fillPersonnelData.bind(this)).setLimit(1);var n=new o(null,{rqlQuery:{fields:{firstName:1,lastName:1,personellId:1},selector:{name:e.length>1?"in":"eq",args:["personellId",e.length>1?e:e[0]]}}}),i=this.model;this.promised(n.fetch()).then(function(){var r=0;e.forEach(function(e,r){var o=n.findWhere({personellId:e});o&&i.set(t[r],{id:o.id,label:o.get("firstName")+" "+o.get("lastName")})}),r&&i.saveLocalData()})}})}),define("app/core/views/DialogView",["underscore","../View"],function(e,t){return t.extend({events:{"click .dialog-answer":function(t){var n=this.$(t.target).closest(".dialog-answer");if(!n.prop("disabled")){n.prop("disabled",!0);var r=n.attr("data-answer");e.isString(r)&&r.length>0&&(this.trigger("answered",r),e.isFunction(this.closeDialog)&&this.closeDialog())}}},serialize:function(){return this.model},onDialogShown:function(e){this.closeDialog=this.options.autoHide===!1?function(){}:e.closeDialog.bind(e)}})}),define("app/production/util/orderPickerHelpers",["underscore","jquery","app/viewport","app/i18n"],function(e,t,n,r){return{createGetOrdersUrl:function(e,t){return function(n){var r=e.getOrderIdType();return t.attr("data-type",r),"/production/orders?"+r+"="+encodeURIComponent(n)}},setUpOrderSelect2:function(i,o,a,s){function u(e){return-1!==e.laborTime&&""!==e.workCenter}var c=this;i.removeClass("form-control").select2(e.extend({openOnEnter:null,allowClear:!1,minimumInputLength:6,ajax:{cache:!0,quietMillis:300,url:c.createGetOrdersUrl(a,i),results:function(e){return{results:(Array.isArray(e)?e:[]).map(function(e){return e.id=e._id,e.text=e._id+" - "+(e.name||"?"),e})}},transport:function(e){return t.ajax.apply(t,arguments).fail(function(){n.msg.show({type:"error",time:2e3,text:r("production","newOrderPicker:msg:searchFailure")}),e.success({collection:[]})})}}},s)),i.on("change",function(t){var n;n=Array.isArray(t.operations)?t.operations.filter(u):t.added&&Array.isArray(t.added.operations)?t.added.operations.filter(u):[],c.setUpOperationSelect2(o,n.map(function(e){return{id:e.no,text:e.no+" - "+e.name}}),s,!0),n.length?o.select2("val",t.selectedOperationNo||n[0].no).select2("focus"):(t.selectedOperationNo&&o.val(t.selectedOperationNo),e.defer(function(){o.focus()}))})},setUpOperationSelect2:function(n,i,o,a){return n.prev(".message-warning").remove(),a&&!i.length?(n.select2("destroy").addClass("form-control").val("").attr("title",""),void t('<p class="message message-inline message-warning"></p>').html(r("production","newOrderPicker:msg:noOperations")).insertBefore(n)):void n.removeClass("form-control").select2(e.extend({width:"100%",placeholder:r("production","newOrderPicker:online:operation:placeholder"),openOnEnter:null,allowClear:!1,minimumResultsForSearch:-1,data:i||[],shouldFocusInput:function(){return!0}},o))},selectOrder:function(t,n){var r=n.get("orderId"),i=n.get("orderData");r&&i&&(t.select2("data",{id:r,text:r+" - "+(i.name||"?"),sameOrder:!0}),t.trigger({type:"change",operations:e.values(i.operations),selectedOperationNo:n.get("operationNo")}))},prepareOrderInfo:function(t,n){if(delete n.__v,delete n.id,delete n.text,n._id&&("no"===t.getOrderIdType()?n.no=n._id:(n.no=null,n.nc12=n._id),delete n._id),Array.isArray(n.operations)){var r={};n.operations.forEach(function(e){""!==e.workCenter&&-1!==e.laborTime&&(r[e.no]=e)}),n.operations=r}else e.isObject(n.operations)||(n.operations={})}}}),define("app/production/templates/newOrderPicker",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<form class="production-newOrderPicker">\n  '),replacingOrder&&buf.push('\n  <p class="message message-inline message-warning">',t("production","newOrderPicker:checkData:warning"),'</p>\n  <div class="form-group">\n    <label for="',idPrefix,'-quantityDone">',t("production","newOrderPicker:quantityDone"),'</label>\n    <input id="',idPrefix,'-quantityDone" class="form-control small" type="number" value="',quantityDone,'" autofocus min="0" max="',maxQuantityDone,'">\n  </div>\n  <div class="form-group">\n    <label for="',idPrefix,'-workerCount">',t("production","newOrderPicker:workerCount"),'</label>\n    <input id="',idPrefix,'-workerCount" class="form-control small" type="number" value="',workerCount,'" min="1" max="',maxWorkerCount,'">\n  </div>\n  <div class="modal-header">\n    <h3 class="modal-title">',t("production","newOrderPicker:title"),"</h3>\n  </div>\n  "),buf.push("\n  "),correctingOrder||(buf.push("\n  "),offline?buf.push('\n  <p class="message message-inline message-warning">',t("production","newOrderPicker:offline:warning:"+orderIdType),"</p>\n  "):buf.push('\n  <p class="message message-inline message-info">',t("production","newOrderPicker:online:info:"+orderIdType),"</p>\n  "),buf.push("\n  ")),buf.push('\n  <div class="form-group">\n    <label for="',idPrefix,'-order">',t("production","newOrderPicker:order:label"),'</label>\n    <input id="',idPrefix,'-order" class="form-control" type="text" placeholder="',t("production","newOrderPicker:order:placeholder:"+orderIdType),'">\n  </div>\n  <div class="form-group">\n    <label for="',idPrefix,'-operation">',t("production","newOrderPicker:operation:label"),'</label>\n    <input id="',idPrefix,'-operation" class="form-control" type="text" placeholder="',t("production","newOrderPicker:offline:operation:placeholder"),'" maxlength="4" pattern="^[0-9]+$">\n  </div>\n  <div class="form-actions">\n    <button type="submit" class="btn btn-',correctingOrder?"primary":"success",'">\n      ',t("production","newOrderPicker:submit"+(replacingOrder?":replacing":correctingOrder?":correcting":"")),'\n    </button>\n    <button type="button" class="cancel btn btn-link">',t("production","newOrderPicker:cancel"),"</button>\n  </div>\n</form>\n")}();return buf.join("")}}),define("app/production/views/NewOrderPickerView",["app/i18n","app/viewport","app/core/View","../util/orderPickerHelpers","app/production/templates/newOrderPicker"],function(e,t,n,r,i){return n.extend({template:i,dialogClassName:function(){var e="production-modal production-newOrderPickerDialog";return this.options.correctingOrder?e+=" is-correcting":this.model.hasOrder()&&(e+=" is-replacing"),e},localTopics:{"socket.connected":"render","socket.disconnected":"render"},events:{"keypress .select2-container":function(e){13===e.which&&(this.$el.submit(),e.preventDefault())},submit:function(e){e.preventDefault();var t=this.$("button[type=submit]")[0];t.disabled||(t.disabled=!0,this.socket.isConnected()?this.handleOnlinePick(t):this.handleOfflinePick(t))}},serialize:function(){return{idPrefix:this.idPrefix,offline:!this.socket.isConnected(),replacingOrder:!this.options.correctingOrder&&this.model.hasOrder(),correctingOrder:!!this.options.correctingOrder,quantityDone:this.model.prodShiftOrder.get("quantityDone")||0,workerCount:this.model.prodShiftOrder.getWorkerCountForEdit(),orderIdType:this.model.getOrderIdType(),maxQuantityDone:this.model.prodShiftOrder.getMaxQuantityDone(),maxWorkerCount:this.model.prodShiftOrder.getMaxWorkerCount()}},afterRender:function(){this.socket.isConnected()?(this.setUpOrderSelect2(),this.setUpOperationSelect2(),this.options.correctingOrder&&this.selectCurrentOrder()):this.options.correctingOrder&&(this.$id("order").val(this.model.prodShiftOrder.get("orderId")),this.$id("operation").val(this.model.prodShiftOrder.get("operationNo"))),this.focusFirstInput()},onDialogShown:function(e){this.closeDialog=e.closeDialog.bind(e),this.focusFirstInput()},closeDialog:function(){},focusFirstInput:function(){!this.options.correctingOrder&&this.model.hasOrder()?this.$id("quantityDone").select():this.socket.isConnected()?this.$id("order").select2("focus"):this.$id("order").select()},setUpOrderSelect2:function(){r.setUpOrderSelect2(this.$id("order"),this.$id("operation"),this.model,{dropdownCssClass:"production-dropdown"})
},setUpOperationSelect2:function(){r.setUpOperationSelect2(this.$id("operation"),[],{dropdownCssClass:"production-dropdown"})},selectCurrentOrder:function(){r.selectOrder(this.$id("order"),this.model.prodShiftOrder)},handleOnlinePick:function(n){var i=this.$id("order").select2("data"),o=this.$id("operation"),a=o.hasClass("form-control")?o.val():this.$id("operation").select2("val");return i?a?(i.sameOrder?i=this.model.prodShiftOrder.get("orderData"):r.prepareOrderInfo(this.model,i),void this.pickOrder(i,a)):(o.focus(),n.disabled=!1,t.msg.show({type:"error",time:2e3,text:e("production","newOrderPicker:msg:emptyOperation")})):(this.$id("order").select2("focus"),n.disabled=!1,t.msg.show({type:"error",time:2e3,text:e("production","newOrderPicker:msg:emptyOrder")}))},handleOfflinePick:function(n){var r=this.model.getOrderIdType(),i={no:null,nc12:null},o=this.$id("order").val().trim().replace(/[^a-zA-Z0-9]+/g,""),a=this.$id("operation").val().trim().replace(/[^0-9]+/g,"");if("no"===r&&/^[0-9]{9,}$/.test(o))i.no=o;else{if("nc12"!==r||!(12===o.length||o.length<9&&/^[a-zA-Z]+[a-zA-Z0-9]*$/.test(o)))return this.$id("order").select(),n.disabled=!1,t.msg.show({type:"error",time:2e3,text:e("production",""===o?"newOrderPicker:msg:emptyOrder":"newOrderPicker:msg:invalidOrderId:"+r)});i.nc12=o}return/^[0-9]{1,4}$/.test(a)?void this.pickOrder(i,a):(this.$id("operation").select(),n.disabled=!1,t.msg.show({type:"error",time:2e3,text:e("production",""===o?"newOrderPicker:msg:emptyOrder":"newOrderPicker:msg:invalidOperationNo")}))},pickOrder:function(e,t){for(;t.length<4;)t="0"+t;!this.options.correctingOrder&&this.model.hasOrder()&&(this.model.changeQuantityDone(this.parseInt("quantityDone")),this.model.changeWorkerCount(this.parseInt("workerCount"))),this.options.correctingOrder?this.model.correctOrder(e,t):this.model.changeOrder(e,t),this.closeDialog()},parseInt:function(e){var t=parseInt(this.$id(e).val(),10);return isNaN(t)||0>t?0:t}})}),define("app/production/templates/downtimePicker",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<form class="production-downtimePicker">\n  <div class="form-group">\n    <label for="',idPrefix,'-startedAt">',t("production","downtimePicker:startedAt"),"</label>\n    "),"start"===mode?buf.push('\n    <div class="input-group">\n      <input id="',idPrefix,'-startedAt" class="form-control" type="text" value="',time.format(startedAt,"YYYY-MM-DD, HH:mm:ss"),'" readonly data-time="',startedAt.getTime(),'">\n      <span class="input-group-btn">\n        <button class="btn btn-default production-downtimePicker-now" type="button">',t("production","downtimePicker:startedAt:now"),"</button>\n      </span>\n    </div>\n    "):buf.push('\n    <input id="',idPrefix,'-startedAt" class="form-control" type="text" value="',time.format(startedAt,"YYYY-MM-DD, HH:mm:ss"),'" readonly data-time="',startedAt.getTime(),'">\n    '),buf.push('\n  </div>\n  <div class="form-group">\n    <label for="',idPrefix,'-reason">',t("production","downtimePicker:reason:label"),'</label>\n    <input id="',idPrefix,'-reason" type="text" placeholder="',t("production","downtimePicker:reason:placeholder"),'">\n  </div>\n  <div class="form-group">\n    <label for="',idPrefix,'-aor">',t("production","downtimePicker:aor:label"),'</label>\n    <input id="',idPrefix,'-aor" type="text" placeholder="',t("production","downtimePicker:aor:placeholder"),'">\n  </div>\n  <div class="form-group">\n    <label for="',idPrefix,'-reasonComment">',t("production","downtimePicker:reasonComment:label"),'</label>\n    <textarea id="',idPrefix,'-reasonComment" class="form-control" rows="4" placeholder="',t("production","downtimePicker:reasonComment:placeholder"),'"></textarea>\n  </div>\n  <div class="form-actions">\n    <button type="submit" class="btn btn-',"start"===mode?"danger":"primary",'">',t("production","downtimePicker:submit:"+mode),'</button>\n    <button type="button" class="cancel btn btn-link">',t("production","downtimePicker:cancel"),"</button>\n  </div>\n</form>\n")}();return buf.join("")}}),define("app/production/views/DowntimePickerView",["app/i18n","app/time","app/viewport","app/data/aors","app/data/downtimeReasons","app/core/View","app/production/templates/downtimePicker"],function(e,t,n,r,i,o,a){return o.extend({template:a,dialogClassName:"production-modal",events:{"keypress .select2-container":function(e){13===e.which&&(e.preventDefault(),this.$el.submit())},"keypress textarea":function(e){13===e.which&&""===e.target.value.trim()&&(e.preventDefault(),this.$el.submit())},submit:function(e){e.preventDefault();var t=this.$('.btn[type="submit"]')[0];t.disabled||(t.disabled=!0,this.handlePick(t))},"click .production-downtimePicker-now":function(){var e=Date.now();this.$id("startedAt").val(t.format(e,"YYYY-MM-DD, HH:mm:ss")).attr("data-time",e)}},serialize:function(){return{idPrefix:this.idPrefix,startedAt:this.model.startedAt,mode:this.model.mode}},afterRender:function(){this.model.reason&&this.$id("reason").val(this.model.reason),this.model.aor&&this.$id("aor").val(this.model.aor),this.model.reasonComment&&this.$id("reasonComment").val(this.model.reasonComment),this.setUpReasonSelect2(),this.setUpAorSelect2(),this.focusControl()},onDialogShown:function(){this.focusControl()},focusControl:function(){this.model.reason?this.model.aor?"edit"===this.model.mode?this.$id("reasonComment").focus():this.$(".btn-danger").focus():this.$id("aor").select2("focus"):this.$id("reason").select2("focus")},setUpReasonSelect2:function(){var e=this,t=this.$id("reason");t.select2({dropdownCssClass:"production-dropdown",openOnEnter:null,data:this.model.prodShift.getDowntimeReasons().map(function(e){return{id:e.id,text:e.id+" - "+e.get("label")}}).sort(function(e,t){return e.id.localeCompare(t.id)})}),t.on("change",function(){t.select2("val")&&e.$id("aor").select2("focus")})},setUpAorSelect2:function(){var e=this,t=this.$id("aor");t.select2({dropdownCssClass:"production-dropdown",openOnEnter:null,data:r.map(function(e){return{id:e.id,text:e.get("name")}})}),t.on("change",function(){t.select2("val")&&e.$id("reasonComment").select()})},handlePick:function(t){var r=this.$id("reason").select2("val"),i=this.$id("aor").select2("val"),o=this.$id("reasonComment").val();return r?i?void this.trigger("downtimePicked",{reason:r,reasonComment:o,aor:i,startedAt:new Date(parseInt(this.$id("startedAt").attr("data-time"),10))}):(this.$id("aor").select2("focus"),t.disabled=!1,n.msg.show({type:"error",time:2e3,text:e("production","downtimePicker:msg:emptyAor")})):(this.$id("reason").select2("focus"),t.disabled=!1,n.msg.show({type:"error",time:2e3,text:e("production","downtimePicker:msg:emptyReason")}))}})}),define("app/production/templates/endWorkDialog",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<form class="production-endWorkDialog">\n  <p class="message message-inline message-warning">',t("production","endWorkDialog:warning",{downtime:downtime}),'</p>\n  <div class="form-group">\n    <label for="',idPrefix,'-quantitiesDone">',t("production","endWorkDialog:quantitiesDone",{hourRange:hourRange}),'</label>\n    <input id="',idPrefix,'-quantitiesDone" class="form-control small" type="number" value="',quantitiesDone,'" autofocus min="0" max="',maxQuantitiesDone,'">\n  </div>\n  <div class="form-group">\n    <label for="',idPrefix,'-quantityDone">',t("production","endWorkDialog:quantityDone"),'</label>\n    <input id="',idPrefix,'-quantityDone" class="form-control small" type="number" value="',quantityDone,'" max="',maxQuantityDone,'">\n  </div>\n  <div class="form-group">\n    <label for="',idPrefix,'-workerCount">',t("production","endWorkDialog:workerCount"),'</label>\n    <input id="',idPrefix,'-workerCount" class="form-control small" type="number" value="',workerCount,'" min="1" max="',maxWorkerCount,'">\n  </div>\n  <div class="form-actions">\n    <button class="btn btn-warning" type="submit">',t("production","endWorkDialog:yes"),'</button>\n    <button class="btn btn-link cancel" type="button">',t("production","endWorkDialog:no"),"</button>\n  </div>\n</form>\n")}();return buf.join("")}}),define("app/production/views/EndWorkDialogView",["app/core/View","app/production/templates/endWorkDialog"],function(e,t){return e.extend({template:t,dialogClassName:"production-modal",events:{submit:function(e){e.preventDefault();var t=this.$(".btn-warning")[0];if(!t.disabled){t.disabled=!0;var n=this.parseInt("quantitiesDone"),r=this.parseInt("quantityDone"),i=this.parseInt("workerCount");this.model.changeCurrentQuantitiesDone(n),r!==this.model.prodShiftOrder.get("quantityDone")&&this.model.changeQuantityDone(r),i!==this.model.prodShiftOrder.get("workerCount")&&this.model.changeWorkerCount(i),this.model.endWork(),this.closeDialog()}}},serialize:function(){return{idPrefix:this.idPrefix,downtime:this.model.isDowntime(),hourRange:this.model.getCurrentQuantityDoneHourRange(),quantitiesDone:this.model.getQuantityDoneInCurrentHour(),quantityDone:this.model.prodShiftOrder.get("quantityDone")||0,workerCount:this.model.prodShiftOrder.getWorkerCountForEdit(),maxQuantitiesDone:this.model.getMaxQuantitiesDone(),maxQuantityDone:this.model.prodShiftOrder.getMaxQuantityDone(),maxWorkerCount:this.model.prodShiftOrder.getMaxWorkerCount()}},onDialogShown:function(e){this.closeDialog=e.closeDialog.bind(e)},closeDialog:function(){},parseInt:function(e){var t=parseInt(this.$id(e).val(),10);return isNaN(t)||0>t?0:t}})}),define("app/production/templates/data",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="production-data">\n  <h2 class="production-sectionHeader">',t("production","section:data"),'</h2>\n  <div class="production-properties production-properties-orderInfo">\n    <div class="production-property production-property-orderNo">\n      <div class="production-property-name">',t("production","property:orderNo"),'</div>\n      <div class="production-property-value"></div>\n    </div>\n    <div class="production-property production-property-nc12">\n      <div class="production-property-name">',t("production","property:nc12"),'</div>\n      <div class="production-property-value"></div>\n    </div>\n    <div class="production-property production-property-productName">\n      <div class="production-property-name">',t("production","property:productName"),'</div>\n      <div class="production-property-value"></div>\n    </div>\n    <div class="production-property production-property-operationName">\n      <div class="production-property-name">',t("production","property:operationName"),'</div>\n      <div class="production-property-value"></div>\n    </div>\n  </div>\n  <div class="production-properties production-properties-orderData">\n    <div class="production-property production-property-startedAt">\n      <div class="production-property-name">',t("production","property:createdAt"),'</div>\n      <div class="production-property-value"></div>\n    </div>\n    <div class="production-property production-property-quantityDone">\n      <div class="production-property-name">',t("production","property:quantityDone"),'</div>\n      <div class="production-property-value"></div>\n    </div>\n    <div class="production-property production-property-workerCount">\n      <div class="production-property-name">',t("production","property:workerCount"),'</div>\n      <div class="production-property-value"></div>\n    </div>\n    <div class="production-property production-property-workerCountSap">\n      <div class="production-property-name">',t("production","property:workerCountSap"),'</div>\n      <div class="production-property-value"></div>\n    </div>\n    <div class="production-property production-property-taktTime">\n      <div class="production-property-name">',t("production","property:taktTime"),'</div>\n      <div class="production-property-value"></div>\n    </div>\n  </div>\n  <div class="production-actions">\n    <button class="btn btn-danger production-action production-beginDowntime">Przest√≥j</button>\n    <button class="btn btn-danger production-action production-beginBreak">Przerwa</button>\n    <button class="btn btn-success production-action production-endDowntime">Koniec przestoju</button>\n    <button class="btn btn-success production-action production-continueOrder">Kontynuuj zlecenie</button>\n    <button class="btn btn-success production-action production-pickNextOrder">Nastƒôpne zlecenie</button>\n    <button class="btn btn-warning production-action production-endWork">Koniec pracy</button>\n  </div>\n</div>\n')}();return buf.join("")}}),define("app/production/templates/endDowntimeDialog",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="production-question">\n  ',t("production","endDowntimeDialog:message"),'\n  <div class="form-actions">\n    <button class="btn btn-',yesSeverity,' dialog-answer" type="button" autofocus data-answer="yes">',t("production","endDowntimeDialog:yes"),'</button>\n    <button class="btn btn-link cancel" type="button">',t("production","endDowntimeDialog:no"),"</button>\n  </div>\n</div>\n")}();return buf.join("")}}),define("app/production/templates/continueOrderDialog",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="production-question">\n  ',t("production","continueOrderDialog:message"),'\n  <div class="form-actions">\n    <button class="btn btn-success dialog-answer" type="button" autofocus data-answer="yes">',t("production","continueOrderDialog:yes"),'</button>\n    <button class="btn btn-link cancel" type="button">',t("production","continueOrderDialog:no"),"</button>\n  </div>\n</div>\n")}();return buf.join("")}}),define("app/production/views/ProductionDataView",["underscore","jquery","app/i18n","app/time","app/viewport","app/core/View","app/core/views/DialogView","app/data/prodLog","./NewOrderPickerView","./DowntimePickerView","./EndWorkDialogView","app/production/templates/data","app/production/templates/endDowntimeDialog","app/production/templates/continueOrderDialog"],function(e,t,n,r,i,o,a,s,u,c,l,d,p,f){return o.extend({template:d,localTopics:{"socket.connected":"fillOrderData"},events:{"click .production-newOrder":"newOrder","click .production-continueOrder":"continueOrder","click .production-startDowntime":"startDowntime","click .production-startBreak":"startBreak","click .production-endDowntime":"endDowntime","click .production-endWork":"endWork","click .production-property-orderNo .btn-link":"correctOrder","click .production-property-nc12 .btn-link":"correctOrder","click .production-property-quantityDone .btn-link":"showQuantityDoneEditor","click .production-property-workerCount .btn-link":"showWorkerCountEditor"},initialize:function(){this.listenTo(this.model,"locked unlocked",function(){this.updateWorkerCount(),this.updateQuantityDone(),this.toggleActions()}),this.listenTo(this.model,"change:state",this.toggleActions);var t=this.model.prodShiftOrder;this.listenTo(t,"change:_id change:orderId change:operationNo",e.debounce(function(){this.updateOrderData(),this.updateOrderInfo(),this.updateWorkerCount(),this.updateTaktTime()},1)),this.listenTo(t,"change:quantityDone",this.updateQuantityDone),this.listenTo(t,"change:workerCount",e.debounce(function(){this.updateWorkerCount(),this.updateTaktTime()},1))},afterRender:function(){this.$actions=this.$(".production-actions"),this.updateOrderData(),this.updateOrderInfo(),this.updateQuantityDone(),this.toggleActions(),this.socket.isConnected()&&this.fillOrderData()},updateOrderInfo:function(){var e=this.model.prodShiftOrder;this.updateOrderNo(),this.updateNc12(),this.$property("productName").text(e.getProductName()),this.$property("operationName").text(e.getOperationName())},updateOrderData:function(){this.$el.toggleClass("has-order",this.model.hasOrder()),this.updateTaktTime(),this.updateWorkerCount(),this.$property("startedAt").text(this.model.prodShiftOrder.getStartedAt())},updateOrderNo:function(){var e=this.model.prodShiftOrder.getOrderNo();this.model.isLocked()||!this.model.hasOrder()||this.model.prodShiftOrder.isMechOrder()||(e+=' <button class="btn btn-link">'+n("production","property:orderNo:change")+"</button>"),this.$property("orderNo").html(e)},updateNc12:function(){var e=this.model.prodShiftOrder.getNc12();!this.model.isLocked()&&this.model.hasOrder()&&this.model.prodShiftOrder.isMechOrder()&&(e+=' <button class="btn btn-link">'+n("production","property:nc12:change")+"</button>"),this.$property("nc12").html(e)},updateWorkerCount:function(){this.$property("workerCountSap").text(this.model.prodShiftOrder.getWorkerCountSap());var e=this.model.prodShiftOrder.getWorkerCount(),t="";if(this.model.isIdle())t="-";else if(this.model.isLocked())t="number"==typeof e?e:"-";else{var r="property:workerCount:change:noData";e>0&&(r="property:workerCount:change:data",t+=e+" "),t+='<button class="btn btn-link">'+n("production",r)+"</button>"}this.$property("workerCount").html(t)},updateTaktTime:function(){this.$property("taktTime").text(this.model.prodShiftOrder.getTaktTime())},updateQuantityDone:function(){var e;this.model.isIdle()?e="-":(e=String(this.model.prodShiftOrder.getQuantityDone()),this.model.isLocked()||(e+=' <button class="btn btn-link">'+n("production","property:quantityDone:change")+"</button>")),this.$property("quantityDone").html(e)},toggleActions:function(){this.$actions.empty(),this.model.isLocked()||(this.model.isIdle()?this.toggleIdleActions():this.model.isWorking()?this.toggleWorkingActions():this.toggleDowntimeActions())},toggleIdleActions:function(){e.defer(function(e){e.appendAction("danger","startDowntime"),e.model.getDefaultAor()&&e.appendAction("danger","startBreak"),e.model.prodShiftOrder.hasOrderData()&&e.appendAction("success","continueOrder"),e.appendAction("success","newOrder")},this)},toggleWorkingActions:function(){this.appendAction("danger","startDowntime"),this.model.getDefaultAor()&&this.appendAction("danger","startBreak"),this.appendAction("success","newOrder"),this.appendAction("warning","endWork")},toggleDowntimeActions:function(){this.model.hasOrder()?(this.appendAction("success","endDowntime"),this.appendAction("warning","endWork")):this.appendAction("warning","endDowntime")},appendAction:function(e,t){var r=["btn","btn-"+e,"production-action","production-"+t],i=n("production","action:"+t);this.$actions.append('<button class="'+r.join(" ")+'">'+i+"</button>")},$property:function(e){return this.$(".production-property-"+e+" .production-property-value")},newOrder:function(e){e&&e.target.blur(),i.showDialog(new u({model:this.model}),n("production","newOrderPicker:title"+(this.model.hasOrder()?":replacing":"")))},continueOrder:function(e){e&&e.target.blur();var t=new a({dialogClassName:"production-modal",template:f});this.listenTo(t,"answered",function(e){"yes"===e&&this.model.continueOrder()}),i.showDialog(t,n("production","continueOrderDialog:title"))},correctOrder:function(e){e&&e.target.blur(),i.showDialog(new u({model:this.model,correctingOrder:!0}),n("production","newOrderPicker:title:correcting"))},startDowntime:function(t,o){var a=r.getMoment().toDate();t&&t.target.blur(),o||(o={}),o.model=e.defaults(o.model||{},{mode:"start",prodShift:this.model,startedAt:a,reason:null,aor:null,reasonComment:null});var s=new c(o);this.listenTo(s,"downtimePicked",function(e){i.closeDialog(),this.model.startDowntime(e)}),i.showDialog(s,n("production","downtimePicker:title:start"))},startBreak:function(e){this.startDowntime(e,{model:{prodShift:this.model,reason:this.model.getBreakReason(),aor:this.model.getDefaultAor()}})},endDowntime:function(e){e&&e.target.blur();var t=new a({dialogClassName:"production-modal",template:p,model:{yesSeverity:this.model.hasOrder()?"success":"warning"}});this.listenTo(t,"answered",function(e){"yes"===e&&this.model.endDowntime()}),i.showDialog(t,n("production","endDowntimeDialog:title"))},endWork:function(e){e&&e.target.blur(),i.showDialog(new l({model:this.model}),n("production","endWorkDialog:title"))},showEditor:function(n,r,i,o,a){function s(){p.remove()}function u(){var e=parseInt(p.val(),10);s(),!isNaN(e)&&e>=i&&o>=e&&l.model[a](e)}var c=n.find(".production-property-value"),l=this,d=t("<form></form>").submit(function(){return u(),!1}),p=t('<input class="form-control input-lg" type="number">').val(r).attr("min",i).attr("max",o).on("keydown",function(t){27===t.which&&e.defer(s)}).css({position:"absolute",width:c.width()+"px"}).appendTo(d);d.appendTo(c),e.defer(function(){p.select().on("blur",function(){e.defer(u)})})},showQuantityDoneEditor:function(){this.showEditor(this.$(".production-property-quantityDone"),this.model.prodShiftOrder.getQuantityDone(),0,this.model.prodShiftOrder.getMaxQuantityDone(),"changeQuantityDone")},showWorkerCountEditor:function(){this.showEditor(this.$(".production-property-workerCount"),this.model.prodShiftOrder.getWorkerCountForEdit(),1,this.model.prodShiftOrder.getMaxWorkerCount(),"changeWorkerCount")},fillOrderData:function(){var t=this.model.prodShiftOrder.get("orderId"),n=this.model.prodShiftOrder.get("orderData");if(t&&(!n||e.isEmpty(n.operations))){if(s.isSyncing())return this.broker.subscribe("production.synced",this.fillOrderData.bind(this)).setLimit(1);this.fetchOrderData()}},fetchOrderData:function(){var e=this,n=this.model,r=n.prodShiftOrder.get("mechOrder")?"nc12":"no",i=n.prodShiftOrder.get("orderId"),o=t.ajax({type:"GET",url:"/production/orders?"+r+"="+encodeURIComponent(i)});this.promised(o).then(function(t){if(Array.isArray(t)&&t.length){var i=t[0];"no"===r?i.no=i._id:(i.nc12=i._id,i.no=null),delete i._id,n.prodShiftOrder.set("orderData",n.prodShiftOrder.prepareOperations(i)),n.saveLocalData(),e.updateOrderData(),e.updateOrderInfo()}})}})}),define("app/production/views/ProdDowntimeListView",["app/i18n","app/time","app/viewport","app/data/aors","app/data/downtimeReasons","app/core/views/ListView","./DowntimePickerView"],function(e,t,n,r,i,o,a){return o.extend({className:"production-downtimes",localTopics:{"downtimeReasons.synced":"render","aors.synced":"render"},remoteTopics:function(){var e={};return this.model.prodLine&&(e["prodDowntimes.corroborated."+this.model.prodLine.id]="onCorroborated"),e},events:{"click .warning":"showEditDialog"},initialize:function(){this.collection=this.model.prodDowntimes,o.prototype.initialize.apply(this,arguments),this.listenTo(this.collection,"add",this.render),this.listenTo(this.collection,"change",this.render),this.listenTo(this.collection,"remove",this.render)},destroy:function(){this.$el.popover("destroy")},serializeColumns:function(){return[{id:"startedAt",label:e("production","prodDowntime:startedAt")},{id:"finishedAt",label:e("production","prodDowntime:finishedAt")},{id:"reason",label:e("production","prodDowntime:reason")},{id:"aor",label:e("production","prodDowntime:aor")}]},serializeRows:function(){return this.model.prodDowntimes.map(function(e){var n=e.toJSON(),o=r.get(n.aor),a=i.get(n.reason);return n.className=e.getCssClassName(),n.startedAt=t.format(n.startedAt,"YYYY-MM-DD HH:mm:ss"),n.finishedAt=n.finishedAt?t.format(n.finishedAt,"YYYY-MM-DD HH:mm:ss"):"-",o&&(n.aor=o.get("name")),a&&(n.reason=a.get("label")),n.reasonComment&&(n.className+=" has-comment",n.reason+=' <i class="fa fa-info-circle"></i>'),n})},serializeActions:function(){return[]},afterRender:function(){o.prototype.afterRender.call(this);var e=this;this.$el.popover({selector:".has-comment",trigger:"hover",placement:"top",container:this.el.ownerDocument.body,content:function(){return e.model.prodDowntimes.get(this.dataset.id).get("reasonComment")}}).on("shown.bs.popover",function(t){e.$(t.target).data("bs.popover").$tip.addClass("production-downtimes-popover")})},onCorroborated:function(e){var t=this.model.prodDowntimes.get(e._id);t&&(t.set(e),this.trigger("corroborated",e._id))},showEditDialog:function(t){var r=this.model,i=r.prodDowntimes.get(t.currentTarget.dataset.id),o=new a({model:{mode:"edit",prodShift:r,startedAt:new Date(i.get("startedAt")),reason:i.get("reason"),aor:i.get("aor"),reasonComment:i.get("reasonComment")}});this.listenTo(o,"downtimePicked",function(e){delete e.startedAt,r.editDowntime(i,e),n.closeDialog()}),n.showDialog(o,e("production","downtimePicker:title:edit"))}})}),define("app/production/templates/quantityEditor",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<form class="production-quantityEditor">\n  <div class="form-group">\n    <label for="',idPrefix,'-quantity">',escape(t("production","quantityEditor:label",{from:from,to:to})),'</label>\n    <input id="',idPrefix,'-quantity" class="form-control input-lg small" type="number" value="',escape(currentQuantity),'" min="0" max="',maxQuantity,'">\n  </div>\n  <div class="form-actions">\n    <button type="submit" class="btn btn-primary">',t("production","quantityEditor:submit"),'</button>\n    <button type="button" class="cancel btn btn-link">',t("production","quantityEditor:cancel"),"</button>\n  </div>\n</form>\n")}();return buf.join("")}}),define("app/production/views/QuantityEditorView",["app/viewport","app/core/View","app/production/templates/quantityEditor"],function(e,t,n){return t.extend({template:n,events:{submit:function(e){e.preventDefault();var t=parseInt(this.$id("quantity").val(),10);(isNaN(t)||t===this.options.currentQuantity||0>t)&&(t=null),this.trigger("quantityChanged",t)}},serialize:function(){return{idPrefix:this.idPrefix,from:this.options.from,to:this.options.to,currentQuantity:this.options.currentQuantity,maxQuantity:this.options.maxQuantity}},afterRender:function(){this.$id("quantity").select()},onDialogShown:function(){this.$id("quantity").select()}})}),define("app/production/templates/quantities",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="production-quantities">\n  <h3 class="production-subsectionHeader">',t("production","section:quantities"),'</h3>\n  <div class="table-responsive">\n    <table class="table table-bordered table-hover table-condensed">\n      <thead>\n        <tr>\n          <th>',t("production","quantities:column:time"),"</th>\n          <th>",t("production","quantities:column:planned"),"</th>\n          <th>",t("production","quantities:column:actual"),"</th>\n        </tr>\n      </thead>\n      <tbody>\n        "),quantityRows.forEach(function(e,n){buf.push("\n        <tr>\n          <td>",e.time,"</td>\n          <td>",e.planned,'</td>\n          <td class="production-quantities-actual" data-hour="',n,'">\n            <span>',e.actual,"</span>\n            "),e.editable&&buf.push('\n            <button class="btn btn-link">',t("production","quantities:change"),"</button>\n            "),buf.push("\n          </td>\n        </tr>\n        ")}),buf.push("\n      </tbody>\n    </table>\n  </div>\n</div>\n")}();return buf.join("")}}),define("app/production/views/ProductionQuantitiesView",["underscore","jquery","app/time","app/i18n","app/viewport","app/core/View","./QuantityEditorView","app/production/templates/quantities"],function(e,t,n,r,i,o,a,s){return o.extend({template:s,events:{"click .production-quantities-actual .btn-link":"showQuantityEditor","mousedown .production-quantities-actual .btn-link":"showQuantityEditor"},initialize:function(){this.onQuantitiesDoneChanged=this.onQuantitiesDoneChanged.bind(this),this.listenTo(this.model,"change:shift locked unlocked",this.render)},serialize:function(){var e=n.getMoment().valueOf(),t=this.model.getCurrentShiftMoment(),r=!this.model.isLocked();return{quantityRows:(this.model.get("quantitiesDone")||[]).map(function(n,i){var o=r,a=t.format("HH:mm:ss");return t.add(59,"minutes").add(59,"seconds"),o=7===i?o&&e>t.valueOf()-6e5:o&&e>t.valueOf(),a+="-"+t.format("HH:mm:ss"),t.add(1,"seconds"),{time:a,planned:n.planned,actual:n.actual,editable:o||n.actual>0}})}},beforeRender:function(){this.stopListening(this.model,"change:quantitiesDone",this.onQuantitiesDoneChanged)},afterRender:function(){this.listenTo(this.model,"change:quantitiesDone",this.onQuantitiesDoneChanged),this.timers.nextRender&&clearTimeout(this.timers.nextRender),this.model.isLocked()||this.scheduleNextRender()},scheduleNextRender:function(){var e=this.model.getCurrentShiftMoment().add(7,"hours").hours(),t=n.getMoment(),r=t.valueOf(),i=t.hours(),o=t.minutes(0).seconds(0).milliseconds(0).add(1,"hours").valueOf(),a=i===e?o-6e5:o,s=a+1e3-r;s>0?this.timers.nextRender=setTimeout(function(e){e.render(),e.showEditorDialog()},s,this):delete this.timers.nextRender},showQuantityEditor:function(n){function i(){p.remove(),c.show(),l.show()}function o(){var e=parseInt(f.val(),10);i();var t=a.attr("data-hour");e!==d&&e>=0&&u>=e&&(l.text(e),s.model.changeQuantitiesDone(parseInt(t,0),e,{render:!1}))}var a=this.$(n.target).closest("td");if(!a.find("input").length){var s=this,u=this.model.getMaxQuantitiesDone(),c=a.find(".btn-link").hide(),l=a.find("span").hide(),d=parseInt(l.text(),10),p=t("<form></form>").submit(function(){return o(),!1}),f=t('<input class="form-control" type="number" min="0">').attr("placeholder",r("production","quantities:newValuePlaceholder")).attr("max",u).val(d).on("keydown",function(t){27===t.which&&e.defer(i)}).appendTo(p);p.appendTo(a),e.defer(function(){f.select().on("blur",function(){e.defer(o)})})}},showEditorDialog:function(e){e||(e=this.$(".btn-link").last().closest("td"));var t=e.parent().find("td:first-child").text().trim().split("-"),n=parseInt(e.attr("data-hour"),10),o={from:t[0],to:t[1],currentQuantity:parseInt(e.find("span").text(),10),maxQuantity:this.model.getMaxQuantitiesDone()},s=new a(o);this.listenTo(s,"quantityChanged",function(e){i.closeDialog(),null!==e&&this.model.changeQuantitiesDone(n,e,{render:!0})}),i.showDialog(s,r("production","quantityEditor:title"))},onQuantitiesDoneChanged:function(e,t,n){n.render!==!1&&this.render()}})}),define("app/production/templates/productionPage",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="production is-',locked?"locked":"unlocked"," ",state?"is-"+state:""," ",mechOrder?"is-mechOrder":"",' hidden">\n  <div class="production-controls-container"></div>\n  <div class="production-header-container"></div>\n  <div class="production-data-container"></div>\n  <div class="production-ft">\n    <h2 class="production-sectionHeader">',t("production","section:history"),'</h2>\n    <div class="row">\n      <div class="col-md-8">\n        <h3 class="production-subsectionHeader">',t("production","section:downtimes"),'</h3>\n        <div class="table-responsive production-downtimes-container"></div>\n      </div>\n      <div class="col-md-4 production-quantities-container"></div>\n    </div>\n  </div>\n</div>\n')
}();return buf.join("")}}),define("app/production/templates/duplicateWarning",["app/i18n"],function(t){return function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var buf=[];with(locals||{})!function(){buf.push('<div class="production-duplicate">\n  <h1>',t("production","duplicate:title"),"</h1>\n  <p>",t("production","duplicate:message"),'</p>\n  <p><button onclick="window.location.reload()" type="button" class="btn btn-primary btn-lg">',t("production","duplicate:button"),"</button></p>\n</div>\n")}();return buf.join("")}}),define("app/production/pages/ProductionPage",["jquery","app/user","app/i18n","app/viewport","app/updater/index","app/core/View","app/data/prodLog","app/prodShifts/ProdShift","../views/ProductionControlsView","../views/ProductionHeaderView","../views/ProductionDataView","../views/ProdDowntimeListView","../views/ProductionQuantitiesView","app/production/templates/productionPage","app/production/templates/duplicateWarning"],function(e,t,n,r,i,o,a,s,u,c,l,d,p,f,h){return o.extend({template:f,layoutName:"blank",localTopics:{"socket.connected":function(){this.joinProduction(),this.refreshDowntimes(),this.refreshPlannedQuantities()},"socket.disconnected":function(){this.productionJoined=!1},"updater.frontendReloading":function(){this.model.saveLocalData()}},breadcrumbs:function(){return[n("production","breadcrumbs:productionPage"),this.model.getLabel()]},initialize:function(){this.delayProductionJoin=this.delayProductionJoin.bind(this),this.onBeforeUnload=this.onBeforeUnload.bind(this),this.layout=null,this.shiftEditedSub=null,this.productionJoined=!1,this.enableProdLog=!1,i.disableViews(),this.defineViews(),this.defineBindings(),e(window).on("beforeunload",this.onBeforeUnload)},setUpLayout:function(e){this.layout=e},destroy:function(){this.layout=null,this.shiftEditedSub=null,e(window).off("beforeunload",this.onBeforeUnload),this.model.stopShiftChangeMonitor(),i.enableViews(),a.disable(),this.leaveProduction()},serialize:function(){return{locked:this.model.isLocked(),state:this.model.get("state"),mechOrder:!!this.model.prodShiftOrder.get("mechOrder")}},load:function(t){r.msg.loading();var n=this,i=e.Deferred(),o=e.Deferred();return i.done(function(){n.timers.readLocalData=setTimeout(function(){n.timers.readLocalData=null,n.model.readLocalData()},1)}),i.fail(function(){document.body.innerHTML=h()}),i.always(function(){r.msg.loaded(),"rejected"===i.state()?(n.enableProdLog=!1,o.reject()):(n.enableProdLog=!0,o.resolve())}),a.enable(i),t(o.promise())},defineViews:function(){this.controlsView=new u({model:this.model}),this.headerView=new c({model:this.model}),this.dataView=new l({model:this.model}),this.downtimesView=new d({model:this.model}),this.quantitiesView=new p({model:this.model}),this.setView(".production-controls-container",this.controlsView),this.setView(".production-header-container",this.headerView),this.setView(".production-data-container",this.dataView),this.setView(".production-downtimes-container",this.downtimesView),this.setView(".production-quantities-container",this.quantitiesView)},defineBindings:function(){this.listenTo(this.model,"locked",function(){this.$el.removeClass("is-unlocked").addClass("is-locked"),this.leaveProduction()}),this.listenTo(this.model,"unlocked",function(){this.$el.removeClass("is-locked").addClass("is-unlocked"),this.refreshDowntimes(),this.refreshPlannedQuantities(),this.joinProduction()}),this.listenTo(this.model,"change:state",function(){null!==this.layout&&this.layout.setBreadcrumbs(this.breadcrumbs,this);var e=this.model.previous("state"),t=this.model.get("state");e&&this.$el.removeClass("is-"+e),t&&this.$el.addClass("is-"+t)}),this.listenTo(this.model,"change:shift",function(){return r.closeAllDialogs(),this.$el.hasClass("hidden")?void this.$el.removeClass("hidden"):void(this.model.get("shift")&&r.msg.show({type:"info",time:2e3,text:n("production","msg:shiftChange")}))}),this.listenTo(this.model,"change:_id",this.subscribeForShiftChanges),this.model.id&&this.subscribeForShiftChanges(),this.listenTo(this.model.prodShiftOrder,"change:mechOrder",function(){this.$el.toggleClass("is-mechOrder",this.model.prodShiftOrder.isMechOrder())}),this.listenTo(this.downtimesView,"corroborated",function(){this.model.saveLocalData()}),this.socket.on("production.locked",this.onProductionLocked.bind(this))},beforeRender:function(){this.enableProdLog&&(a.enable(),this.enableProdLog=!1)},afterRender:function(){this.socket.isConnected()&&(this.joinProduction(),this.refreshDowntimes(),this.refreshPlannedQuantities()),this.model.isLocked()&&this.$el.removeClass("hidden")},onBeforeUnload:function(){return this.model.isLocked()||(a.disable(),this.model.isIdle()||i.isFrontendReloading())?void 0:(this.timers.enableProdLog=setTimeout(a.enable.bind(a),1e3),this.model.isDowntime()?n("production","unload:downtime"):n("production","unload:order"))},onProductionLocked:function(e){e.prodLine===this.model.prodLine.id&&e.secretKey===this.model.getSecretKey()&&(this.model.setSecretKey(null),r.msg.show({type:"warning",text:n("production","msg:locked")}))},refreshDowntimes:function(){if(a.isSyncing())return this.broker.subscribe("production.synced",this.delayDowntimesRefresh.bind(this)).setLimit(1);if(this.model.isLocked())return this.listenToOnce(this.model,"unlocked",this.delayDowntimesRefresh);if(!this.model.id)return this.listenToOnce(this.model,"change:_id",this.delayDowntimesRefresh);this.timers.refreshingDowntimes&&clearTimeout(this.timers.refreshingDowntimes);var e=this;this.timers.refreshingDowntimes=setTimeout(function(){if(delete e.timers.refreshingDowntimes,e.socket.isConnected()&&!e.model.isLocked()){var t=e.model.prodDowntimes.fetch({reset:!0});e.promised(t).done(function(){e.model.saveLocalData()})}},2500)},delayDowntimesRefresh:function(){this.timers.refreshDowntimes&&clearTimeout(this.timers.refreshDowntimes),this.timers.refreshDowntimes=setTimeout(function(e){e.timers.refreshDowntimes=null,e.refreshDowntimes()},2500,this)},refreshPlannedQuantities:function(){if(a.isSyncing())return this.broker.subscribe("production.synced",this.delayPlannedQuantitiesRefresh.bind(this)).setLimit(1);if(this.model.isLocked())return this.listenToOnce(this.model,"unlocked",this.delayPlannedQuantitiesRefresh);if(!this.model.id)return this.listenToOnce(this.model,"change:_id",this.delayPlannedQuantitiesRefresh);var e=this;this.socket.emit("production.getPlannedQuantities",this.model.id,function(t,n){return e.shiftEditedSub?t?void 0:void e.model.updatePlannedQuantities(n):void 0})},delayPlannedQuantitiesRefresh:function(){this.timers.refreshPlannedQuantities&&clearTimeout(this.timers.refreshPlannedQuantities),this.timers.refreshPlannedQuantities=setTimeout(function(e){e.timers.refreshPlannedQuantities=null,e.refreshPlannedQuantities()},5e3,this)},joinProduction:function(){if(!this.productionJoined&&!this.model.isLocked()&&this.socket.isConnected()){if(a.isSyncing())return this.broker.subscribe("production.synced",this.delayProductionJoin).setLimit(1);if(!this.model.id)return this.listenToOnce(this.model,"change:_id",this.delayProductionJoin);var e=this.model.prodDowntimes.findFirstUnfinished();this.socket.emit("production.join",{prodLineId:this.model.prodLine.id,prodShiftId:this.model.id,prodShiftOrderId:this.model.prodShiftOrder.id||null,prodDowntimeId:e?e.id:null}),this.productionJoined=!0}},delayProductionJoin:function(){this.timers.joinProduction&&clearTimeout(this.timers.joinProduction),this.timers.joinProduction=setTimeout(function(e){e.timers.joinProduction=null,e.joinProduction()},2e3,this)},leaveProduction:function(){this.productionJoined&&(this.socket.isConnected()&&this.socket.emit("production.leave",this.model.prodLine.id),this.productionJoined=!1)},subscribeForShiftChanges:function(){if(this.shiftEditedSub&&this.shiftEditedSub.cancel(),this.model.id){var e=this.model;this.shiftEditedSub=this.pubsub.subscribe("production.edited.shift."+this.model.id).on("message",function(t){e.set(t)})}}})}),define("app/nls/production",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"breadcrumbs:productionPage":function(){return"Production"},"duplicate:title":function(){return"Duplicate operator form"},"duplicate:message":function(){return"Detected another operator form already running.<br>Close all other operator forms and click the button below to reload the form in the current window."},"duplicate:button":function(){return"Reload operator form"},"msg:shiftChange":function(){return"New shift!"},"msg:locked":function(){return"Production line was deactivated!"},"controls:dashboard":function(){return"Go to dashboard"},"controls:lock":function(){return"Lock the editing"},"controls:unlock":function(){return"Unlock the editing"},"controls:locked":function(){return"Editing locked"},"controls:unlocked":function(){return"Editing unlocked"},"controls:sync":function(){return"Server communication indicator"},"controls:msg:sync:noConnection":function(){return"Cannot unlock: no connection to the server :("},"controls:msg:sync:remoteError":function(){return"Cannot unlock: failed to get the key :("},"controls:msg:sync:success":function(){return"Editing unlocked successfully :)"},"unlockDialog:title:unlock":function(){return"Production line activation"},"unlockDialog:title:lock":function(){return"Production line deactivation"},"unlockDialog:message:unlock":function(e){return"To activate the <em>"+t.v(e,"prodLine")+"</em> production line, enter login and password of a user with the <em>Dictionaries: manage</em> privilege. Production line cannot be activated, if it is currently connected to the server from another computer."},"unlockDialog:message:lock":function(e){return"To deactivate the <em>"+t.v(e,"prodLine")+"</em> production line, enter login and password of a user with the <em>Dictionaries: manage</em> privilege."},"unlockDialog:login":function(){return"Login"},"unlockDialog:password":function(){return"Password"},"unlockDialog:unlock":function(){return"Activate production line"},"unlockDialog:lock":function(){return"Deactivate production line"},"unlockDialog:error:UNLOCK_FAILURE":function(){return"Production line activation failed :("},"unlockDialog:error:LOCK_FAILURE":function(){return"Production line deactivation failed :("},"unlockDialog:error:INVALID_PROD_LINE":function(){return"Invalid production line!"},"unlockDialog:error:INVALID_LOGIN":function(){return"Invalid login!"},"unlockDialog:error:INVALID_PASSWORD":function(){return"Invalid password!"},"unlockDialog:error:NO_PRIVILEGES":function(){return"Insufficient privileges!"},"unlockDialog:error:ALREADY_UNLOCKED":function(){return"Production line is currently running on a different computer!"},"section:data":function(){return"Production data"},"section:history":function(){return"History"},"section:quantities":function(){return"Quantities done"},"section:downtimes":function(){return"Downtimes"},"property:currentTime":function(){return"Current time"},"property:shift":function(){return"Shift"},"property:orgUnit":function(){return"Subdivision"},"property:master":function(){return"Master"},"property:master:change":function(){return"(change)"},"property:master:noData:locked":function(){return"none"},"property:master:noData:unlocked":function(){return"(change master)"},"property:leader":function(){return"Leader"},"property:leader:change":function(){return"(change)"},"property:leader:noData:locked":function(){return"none"},"property:leader:noData:unlocked":function(){return"(change leader)"},"property:operator":function(){return"Operator"},"property:operator:change":function(){return"(change)"},"property:operator:noData:locked":function(){return"none"},"property:operator:noData:unlocked":function(){return"(change operator)"},"property:orderNo":function(){return"Order no"},"property:orderNo:change":function(){return"(change)"},"property:nc12":function(){return"12NC"},"property:nc12:change":function(){return"(change)"},"property:productName":function(){return"Product name"},"property:operationName":function(){return"Operation name"},"property:taktTime":function(){return"Takt [s]"},"property:workerCountSap":function(){return"Worker count as per SAP"},"property:createdAt":function(){return"Started at"},"property:quantityDone":function(){return"Quantity done"},"property:quantityDone:change":function(){return"(change quantity)"},"property:workerCount":function(){return"Worker count"},"property:workerCount:change:data":function(){return"(change count)"},"property:workerCount:change:noData":function(){return"(set count)"},"action:newOrder":function(){return"New order"},"action:continueOrder":function(){return"Continue order"},"action:startDowntime":function(){return"Downtime"},"action:startBreak":function(){return"Break"},"action:endDowntime":function(){return"End downtime"},"action:endWork":function(){return"End work"},"quantities:column:time":function(){return"Time"},"quantities:column:planned":function(){return"Planned [items]"},"quantities:column:actual":function(){return"Actual [items]"},"quantities:change":function(){return"(change)"},"quantities:newValuePlaceholder":function(){return"New quantity..."},"quantityEditor:title":function(){return"Quantity done in an hour"},"quantityEditor:label":function(e){return"Quantity done from "+t.v(e,"from")+" to "+t.v(e,"to")+":"},"quantityEditor:submit":function(){return"Set quantity done"},"quantityEditor:cancel":function(){return"Cancel"},"personelPicker:title:master":function(){return"Changing master"},"personelPicker:title:leader":function(){return"Changing leader"},"personelPicker:title:operator":function(){return"Changing operator"},"personelPicker:submit":function(){return"Change user"},"personelPicker:cancel":function(){return"Cancel"},"personelPicker:online:label":function(){return"User:"},"personelPicker:online:placeholder":function(){return"Search by last name or personell ID"},"personelPicker:offline:label":function(){return"User:"},"personelPicker:offline:placeholder":function(){return"User's personell ID"},"personelPicker:offline:warning":function(){return"No connection to the server. You can only enter the user's personell ID."},"newOrderPicker:title":function(){return"Starting a new order"},"newOrderPicker:title:replacing":function(){return"Ending the current order"},"newOrderPicker:title:correcting":function(){return"Correcting the current order"},"newOrderPicker:order:label":function(){return"New order:"},"newOrderPicker:order:placeholder:no":function(){return"Enter the new order's no..."},"newOrderPicker:order:placeholder:nc12":function(){return"Order's 12NC"},"newOrderPicker:operation:label":function(){return"Operation:"},"newOrderPicker:offline:operation:placeholder":function(){return"Operation no"},"newOrderPicker:online:operation:placeholder":function(){return"Choose the new order's operation..."},"newOrderPicker:submit":function(){return"Start order"},"newOrderPicker:submit:replacing":function(){return"End the current order and start a new one"},"newOrderPicker:submit:correcting":function(){return"Correct the current order"},"newOrderPicker:cancel":function(){return"Cancel"},"newOrderPicker:msg:invalidOrderId:no":function(){return"Invalid order no :("},"newOrderPicker:msg:invalidOrderId:nc12":function(){return"Invalid 12NC :("},"newOrderPicker:msg:invalidOperationNo":function(){return"Invalid operation no :("},"newOrderPicker:msg:searchFailure":function(){return"Searching orders failed :("},"newOrderPicker:msg:emptyOrder":function(){return"Order is required."},"newOrderPicker:msg:emptyOperation":function(){return"Operation is required."},"newOrderPicker:msg:noOperations":function(){return"The selected order doesn't have any operations. You can manually enter a 4-digit operation no."},"newOrderPicker:online:info:no":function(){return"Enter the order no and choose an operation from the list to start a new order."},"newOrderPicker:online:info:nc12":function(){return"Enter the order's 12NC and choose an operation from the list to start a new order."},"newOrderPicker:offline:warning:no":function(){return"Enter the order no and operation no to start a new order."},"newOrderPicker:offline:warning:nc12":function(){return"Enter the order's 12NC and operation no to start a new order."},"newOrderPicker:checkData:warning":function(){return"Starting a new order will finish the current order. Make sure that the <em>Quantity done</em> and <em>Worker count</em> of the current order have correct values, because after starting a new order, you won't be able to change them."},"newOrderPicker:quantityDone":function(){return"Quantity done in the finished order:"},"newOrderPicker:workerCount":function(){return"Worker count in the finished order:"},"downtimePicker:title:start":function(){return"Starting a new downtime"},"downtimePicker:title:edit":function(){return"Correcting a downtime"},"downtimePicker:submit:start":function(){return"Start downtime"},"downtimePicker:submit:edit":function(){return"Correct downtime"},"downtimePicker:cancel":function(){return"Cancel"},"downtimePicker:reason:label":function(){return"Downtime reason:"},"downtimePicker:reason:placeholder":function(){return"Choose a downtime reason..."},"downtimePicker:reasonComment:label":function(){return"Comment:"},"downtimePicker:reasonComment:placeholder":function(){return"Optional, additional info..."},"downtimePicker:aor:label":function(){return"Area of responsibility:"},"downtimePicker:aor:placeholder":function(){return"Choose an area of responsibility..."},"downtimePicker:msg:emptyReason":function(){return"Downtime reason is required."},"downtimePicker:msg:emptyAor":function(){return"Area of responsibility is required."},"downtimePicker:startedAt":function(){return"Started at"},"downtimePicker:startedAt:now":function(){return"Now"},"prodDowntime:startedAt":function(){return"Started at"},"prodDowntime:finishedAt":function(){return"Finished at"},"prodDowntime:reason":function(){return"Downtime reason"},"prodDowntime:aor":function(){return"Area of responsibility"},"endDowntimeDialog:title":function(){return"Ending downtime confirmation"},"endDowntimeDialog:message":function(){return"<p>Are you sure you want to end the current downtime?</p>"},"endDowntimeDialog:yes":function(){return"End the downtime"},"endDowntimeDialog:no":function(){return"Do not end the downtime"},"continueOrderDialog:title":function(){return"Order continuation confirmation"},"continueOrderDialog:message":function(){return"<p>Are you sure you want to start the currently chosen order?</p>"},"continueOrderDialog:yes":function(){return"Continue the order"},"continueOrderDialog:no":function(){return"Do not continue the order"},"endWorkDialog:title":function(){return"Ending work confirmation"},"endWorkDialog:warning":function(e){return"Ending work will finish "+t.s(e,"downtime",{"true":"the current downtime and order",other:"the current order"})+". Make sure that the following fields have correct values, because after ending the work, you won't be able to change them."},"endWorkDialog:quantitiesDone":function(e){return"Quantity done in the "+t.v(e,"hourRange")+" hour:"},"endWorkDialog:quantityDone":function(){return"Quantity done in the current order:"},"endWorkDialog:workerCount":function(){return"Worker count in the current order:"},"endWorkDialog:yes":function(){return"End work"},"endWorkDialog:no":function(){return"Do not end work"},"unload:downtime":function(){return"Are you sure you want to close the browser leaving the production line in a state of downtime?\n\nIf you close the browser without Ending work, then the current downtime will be finished at the end of the current shift!"},"unload:order":function(){return"Are you sure you want to close the browser leaving the production line in a state of working?\n\nIf you close the browser without Ending work, then the current order will be finished at the end of the current shift!"}},pl:!0}}),define("app/nls/pl/production",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"breadcrumbs:productionPage":function(){return"Produkcja"},"duplicate:title":function(){return"Podw√≥jne uruchomienie formatki"},"duplicate:message":function(){return"Wykryto podw√≥jne uruchomienie przeglƒÖdarki z formatkƒÖ operatora.<br>Zamknij wszystkie inne formatki i wci≈õnij poni≈ºszy przycisk, aby ponownie za≈Çadowaƒá formatkƒô w tym oknie."},"duplicate:button":function(){return"Prze≈Çaduj formatkƒô"},"msg:shiftChange":function(){return"Nowa zmiana!"},"msg:locked":function(){return"Linia produkcyjna zosta≈Ça dezaktywowana!"},"controls:dashboard":function(){return"Przejd≈∫ do dashboardu"},"controls:lock":function(){return"Zablokuj edycjƒô"},"controls:unlock":function(){return"Aktywuj edycjƒô"},"controls:locked":function(){return"Edycja zablokowana"},"controls:unlocked":function(){return"Edycja aktywna"},"controls:sync":function(){return"Wska≈∫nik komunikacji z serwerem"},"controls:msg:sync:noConnection":function(){return"Nie mo≈ºna aktywowaƒá edycji: brak po≈ÇƒÖczenia z serwerem :("},"controls:msg:sync:remoteError":function(){return"Nie mo≈ºna aktywowaƒá edycji: nieudane pobranie klucza :("},"controls:msg:sync:success":function(){return"Pomy≈õlnie aktywowano edycjƒô :)"},"unlockDialog:title:unlock":function(){return"Aktywacja linii produkcyjnej"},"unlockDialog:title:lock":function(){return"Dezaktywacja linii produkcyjnej"},"unlockDialog:message:unlock":function(e){return"Aby aktywowaƒá liniƒô produkcyjnƒÖ <em>"+t.v(e,"prodLine")+"</em> na tym komputerze, podaj login i has≈Ço u≈ºytkownika z uprawnieniem <em>S≈Çowniki: zarzƒÖdzanie</em>. Linii nie bƒôdzie mo≈ºna aktywowaƒá, je≈ºeli jest w tym momencie pod≈ÇƒÖczona do serwera na innym komputerze."},"unlockDialog:message:lock":function(e){return"Aby dezaktywowaƒá liniƒô produkcyjnƒÖ <em>"+t.v(e,"prodLine")+"</em> na tym komputerze, podaj login i has≈Ço u≈ºytkownika z uprawnieniem <em>S≈Çowniki: zarzƒÖdzanie</em>."},"unlockDialog:login":function(){return"Login"},"unlockDialog:password":function(){return"Has≈Ço"},"unlockDialog:unlock":function(){return"Aktywuj liniƒô produkcyjnƒÖ"},"unlockDialog:lock":function(){return"Dezaktywuj liniƒô produkcyjnƒÖ"},"unlockDialog:error:UNLOCK_FAILURE":function(){return"Nie uda≈Ço siƒô aktywowaƒá linii produkcyjnej :("},"unlockDialog:error:LOCK_FAILURE":function(){return"Nie uda≈Ço siƒô dezaktywowaƒá linii produkcyjnej :("},"unlockDialog:error:INVALID_PROD_LINE":function(){return"Nieprawid≈Çowa linia produkcyjna!"},"unlockDialog:error:INVALID_LOGIN":function(){return"Nieprawid≈Çowy login!"},"unlockDialog:error:INVALID_PASSWORD":function(){return"Nieprawid≈Çowe has≈Ço!"},"unlockDialog:error:NO_PRIVILEGES":function(){return"Brak wymaganych uprawnie≈Ñ!"},"unlockDialog:error:ALREADY_UNLOCKED":function(){return"Linia produkcyjna jest aktualnie uruchomiona na innym komputerze!"},"section:data":function(){return"Dane produkcyjne"},"section:history":function(){return"Historia"},"section:quantities":function(){return"Wykonane ilo≈õci"},"section:downtimes":function(){return"Przestoje"},"property:currentTime":function(){return"Aktualny czas"},"property:shift":function(){return"Zmiana"},"property:orgUnit":function(){return"Dzia≈Ç"},"property:master":function(){return"Mistrz"},"property:master:change":function(){return"(zmie≈Ñ)"},"property:master:noData:locked":function(){return"nie wybrany"},"property:master:noData:unlocked":function(){return"(wybierz mistrza)"},"property:leader":function(){return"Lider"},"property:leader:change":function(){return"(zmie≈Ñ)"},"property:leader:noData:locked":function(){return"nie wybrany"},"property:leader:noData:unlocked":function(){return"(wybierz lidera)"},"property:operator":function(){return"Operator"},"property:operator:change":function(){return"(zmie≈Ñ)"},"property:operator:noData:locked":function(){return"nie wybrany"},"property:operator:noData:unlocked":function(){return"(wybierz operatora)"},"property:orderNo":function(){return"Nr zlecenia"},"property:orderNo:change":function(){return"(popraw)"},"property:nc12":function(){return"12NC"},"property:nc12:change":function(){return"(popraw)"},"property:productName":function(){return"Nazwa rodziny/detalu"},"property:operationName":function(){return"Nazwa operacji"},"property:taktTime":function(){return"Takt [s]"},"property:workerCountSap":function(){return"Osoby wg SAP"},"property:createdAt":function(){return"Czas rozpoczƒôcia"},"property:quantityDone":function(){return"Wykonana ilo≈õƒá"},"property:quantityDone:change":function(){return"(zmie≈Ñ ilo≈õƒá)"},"property:workerCount":function(){return"Osoby pracujƒÖce"},"property:workerCount:change:data":function(){return"(zmie≈Ñ ilo≈õƒá)"},"property:workerCount:change:noData":function(){return"(ustaw ilo≈õƒá)"},"action:newOrder":function(){return"Nowe zlecenie"},"action:continueOrder":function(){return"Kontynuuj zlecenie"},"action:startDowntime":function(){return"Przest√≥j"},"action:startBreak":function(){return"Przerwa"},"action:endDowntime":function(){return"Koniec przestoju"},"action:endWork":function(){return"Koniec pracy"},"quantities:column:time":function(){return"Przedzia≈Ç godzinowy"},"quantities:column:planned":function(){return"Plan [szt]"},"quantities:column:actual":function(){return"Wykonane [szt]"},"quantities:change":function(){return"(zmie≈Ñ)"},"quantities:newValuePlaceholder":function(){return"Nowa ilo≈õƒá..."},"quantityEditor:title":function(){return"Wykonana ilo≈õƒá w przedziale godzinowym"},"quantityEditor:label":function(e){return"Ilo≈õƒá wykonana od "+t.v(e,"from")+" do "+t.v(e,"to")+":"},"quantityEditor:submit":function(){return"Ustaw ilo≈õƒá"},"quantityEditor:cancel":function(){return"Anuluj ustawianie"},"personelPicker:title:master":function(){return"Wybieranie mistrza"},"personelPicker:title:leader":function(){return"Wybieranie lidera"},"personelPicker:title:operator":function(){return"Wybieranie operatora"},"personelPicker:submit":function(){return"Wybierz u≈ºytkownika"},"personelPicker:cancel":function(){return"Anuluj wybieranie"},"personelPicker:online:label":function(){return"U≈ºytkownik:"},"personelPicker:online:placeholder":function(){return"Szukaj po numerze kadrowym lub nazwisku"},"personelPicker:offline:label":function(){return"U≈ºytkownik:"},"personelPicker:offline:placeholder":function(){return"Numer kadrowy u≈ºytkownika"},"personelPicker:offline:warning":function(){return"Brak po≈ÇƒÖczenia z serwerem. Mo≈ºesz tylko wpisaƒá numer kadrowy u≈ºytkownika."},"newOrderPicker:title":function(){return"Rozpoczynanie nowego zlecenia"},"newOrderPicker:title:replacing":function(){return"Ko≈Ñczenie aktualnego zlecenia"},"newOrderPicker:title:correcting":function(){return"Poprawianie aktualnego zlecenia"},"newOrderPicker:order:label":function(){return"Nowe zlecenie:"},"newOrderPicker:order:placeholder:no":function(){return"Wpisz numer nowego zlecenia..."},"newOrderPicker:order:placeholder:nc12":function(){return"12NC zlecenia"},"newOrderPicker:operation:label":function(){return"Operacja:"},"newOrderPicker:offline:operation:placeholder":function(){return"Numer operacji"},"newOrderPicker:online:operation:placeholder":function(){return"Wybierz operacjƒô nowego zlecenia..."},"newOrderPicker:submit":function(){return"Rozpocznij nowe zlecenie"},"newOrderPicker:submit:replacing":function(){return"Zako≈Ñcz aktualne zlecenie i rozpocznij nowe"},"newOrderPicker:submit:correcting":function(){return"Popraw aktualne zlecenie"},"newOrderPicker:cancel":function(){return"Anuluj"},"newOrderPicker:msg:invalidOrderId:no":function(){return"Nieprawid≈Çowy numer zlecenia :("},"newOrderPicker:msg:invalidOrderId:nc12":function(){return"Nieprawid≈Çowe 12NC zlecenia :("},"newOrderPicker:msg:invalidOperationNo":function(){return"Nieprawid≈Çowy numer operacji :("},"newOrderPicker:msg:searchFailure":function(){return"Wyszukiwanie zlecenia nie powiod≈Ço siƒô :("},"newOrderPicker:msg:emptyOrder":function(){return"Zlecenie jest wymagane."},"newOrderPicker:msg:emptyOperation":function(){return"Operacja jest wymagana."},"newOrderPicker:msg:noOperations":function(){return"Wybrane zlecenie nie ma zdefiniowanych ≈ºadnych operacji.<br>Mo≈ºesz rƒôcznie wpisaƒá czterocyfrowy nr operacji."},"newOrderPicker:online:info:no":function(){return"Wpisz numer zlecenia i wybierz z listy operacjƒô aby rozpoczƒÖƒá nowe zlecenie."},"newOrderPicker:online:info:nc12":function(){return"Wpisz 12NC zlecenia i wybierz z listy operacjƒô aby rozpoczƒÖƒá nowe zlecenie."},"newOrderPicker:offline:warning:no":function(){return"Wpisz numer zlecenia oraz numer operacji aby rozpoczƒÖƒá nowe zlecenie."},"newOrderPicker:offline:warning:nc12":function(){return"Wpisz 12NC zlecenia oraz numer operacji aby rozpoczƒÖƒá nowe zlecenie."},"newOrderPicker:checkData:warning":function(){return"Wybranie nowego zlecenia uko≈Ñczy aktualnie wybrane zlecenie. Sprawd≈∫ czy pola <em>Ilo≈õƒá wykonana</em> i <em>Osoby pracujƒÖce</em> aktualnego zlecenia majƒÖ prawid≈Çowe warto≈õci, gdy≈º po wybraniu nowego zlecenia nie bƒôdzie mo≈ºna ich zmieniƒá."},"newOrderPicker:quantityDone":function(){return"Ilo≈õƒá wykonana w ko≈Ñczonym zleceniu:"},"newOrderPicker:workerCount":function(){return"Osoby pracujƒÖce przy ko≈Ñczonym zleceniu:"},"downtimePicker:title:start":function(){return"Rozpoczynanie przestoju"},"downtimePicker:title:edit":function(){return"Poprawianie przestoju"},"downtimePicker:submit:start":function(){return"Rozpocznij przest√≥j"},"downtimePicker:submit:edit":function(){return"Popraw przest√≥j"},"downtimePicker:cancel":function(){return"Anuluj"},"downtimePicker:reason:label":function(){return"Pow√≥d przestoju:"},"downtimePicker:reason:placeholder":function(){return"Wybierz pow√≥d przestoju..."},"downtimePicker:reasonComment:label":function(){return"Komentarz:"},"downtimePicker:reasonComment:placeholder":function(){return"Opcjonalne, dodatkowe informacje..."},"downtimePicker:aor:label":function(){return"Obszar odpowiedzialno≈õci:"},"downtimePicker:aor:placeholder":function(){return"Wybierz obszar odpowiedzialno≈õci..."},"downtimePicker:msg:emptyReason":function(){return"Pow√≥d przestoju jest wymagany."},"downtimePicker:msg:emptyAor":function(){return"Obszar odpowiedzialno≈õci jest wymagany."},"downtimePicker:startedAt":function(){return"Czas rozpoczƒôcia"},"downtimePicker:startedAt:now":function(){return"Teraz"},"prodDowntime:startedAt":function(){return"Czas zatrzymania"},"prodDowntime:finishedAt":function(){return"Czas wznowienia"},"prodDowntime:reason":function(){return"Pow√≥d przestoju"},"prodDowntime:aor":function(){return"Obszar odpowiedzialno≈õci"},"endDowntimeDialog:title":function(){return"Potwierdzenie zako≈Ñczenia przestoju"},"endDowntimeDialog:message":function(){return"<p>Czy na pewno chcesz zako≈Ñczyƒá aktualny przest√≥j?</p>"},"endDowntimeDialog:yes":function(){return"Zako≈Ñcz przest√≥j"},"endDowntimeDialog:no":function(){return"Nie ko≈Ñcz przestoju"},"continueOrderDialog:title":function(){return"Potwierdzenie kontynuacji zlecenia"},"continueOrderDialog:message":function(){return"<p>Czy na pewno chcesz rozpoczƒÖƒá aktualnie wybrane zlecenie?</p>"},"continueOrderDialog:yes":function(){return"Kontynuuj zlecenie"},"continueOrderDialog:no":function(){return"Nie kontynuuj zlecenia"},"endWorkDialog:title":function(){return"Potwierdzenie zako≈Ñczenia pracy"
},"endWorkDialog:warning":function(e){return"Zako≈Ñczenie pracy uko≈Ñczy "+t.s(e,"downtime",{"true":"aktualnie wybrany przest√≥j i zlecenie",other:"aktualnie wybrane zlecenie"})+". Sprawd≈∫ czy poni≈ºsze pola majƒÖ prawid≈Çowe warto≈õci, gdy≈º po zako≈Ñczeniu pracy nie bƒôdzie mo≈ºna ich zmieniƒá."},"endWorkDialog:quantitiesDone":function(e){return"Wykonana ilo≈õƒá w przedziale godzinowym "+t.v(e,"hourRange")+":"},"endWorkDialog:quantityDone":function(){return"Wykonana ilo≈õƒá aktualnego zlecenia:"},"endWorkDialog:workerCount":function(){return"Osoby pracujƒÖce przy aktualnym zleceniu:"},"endWorkDialog:yes":function(){return"Zako≈Ñcz pracƒô"},"endWorkDialog:no":function(){return"Anuluj"},"unload:downtime":function(){return"Czy na pewno chcesz zamknƒÖƒá przeglƒÖdarkƒô pozostawiajƒÖc liniƒô produkcyjnƒÖ w stanie przestoju?\n\nJe≈ºeli zamkniesz przeglƒÖdarkƒô nie wciskajƒÖc przycisku Koniec pracy, to czas trwania przestoju bƒôdzie siƒô nalicza≈Ç do ko≈Ñca zmiany!"},"unload:order":function(){return"Czy na pewno chcesz zamknƒÖƒá przeglƒÖdarkƒô pozostawiajƒÖc liniƒô produkcyjnƒÖ w stanie wykonywania zlecenia?\n\nJe≈ºeli zamkniesz przeglƒÖdarkƒô nie wciskajƒÖc przycisku Koniec pracy, to czas trwania zlecenia bƒôdzie siƒô nalicza≈Ç do ko≈Ñca zmiany!"}}}),define("app/production/routes",["../broker","../router","../viewport","../data/prodLines","../data/orgUnits","../prodShifts/ProdShift","./pages/ProductionPage","i18n!app/nls/production"],function(e,t,n,r,i,o,a){t.map("/production/*prodLineId",function(t){var s=r.get(t.params.prodLineId);return null==s?e.publish("router.404",t):void n.showPage(new a({model:new o(i.getAllForProdLine(s),{production:!0})}))})}),define("app/nls/reports",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:reports":function(){return"Reports"},"BREADCRUMBS:settings":function(){return"Settings"},"BREADCRUMBS:divisions":function(){return"Divisions"},"BREADCRUMBS:1":function(){return"PROD, EFF, Downtime"},"BREADCRUMBS:2":function(){return"CLIP"},"BREADCRUMBS:3":function(){return"OEE"},"BREADCRUMBS:4":function(){return"Operators"},"BREADCRUMBS:5":function(){return"HR"},"BREADCRUMBS:6":function(){return"Warehouse"},"BREADCRUMBS:6:exTransactions":function(){return"External transactions"},"BREADCRUMBS:6:absence":function(){return"Total employment"},"PAGE_ACTION:settings":function(){return"Change settings"},"PAGE_ACTION:3:exportTable":function(){return"Export table"},"PAGE_ACTION:6:export":function(){return"Export data"},"PAGE_ACTION:6:export:to":function(){return"Export TO"},"PAGE_ACTION:6:export:fte":function(){return"Export FTE"},"1:pageTitle":function(){return"PROD, EFF, Downtime"},"2:pageTitle":function(){return"CLIP"},"charts:title:overall":function(){return"ML"},"coeffs:quantityDone":function(){return"Items"},"coeffs:downtime":function(){return"Downtime"},"coeffs:scheduledDowntime":function(){return"Scheduled downtime"},"coeffs:unscheduledDowntime":function(){return"Unscheduled downtime"},"coeffs:efficiency":function(){return"Efficiency"},"coeffs:productivity":function(){return"Productivity"},"coeffs:productivityNoWh":function(){return"Prod. w/o WH"},"metrics:clip:orderCount":function(){return"Order count"},"metrics:clip:production":function(){return"CLIP Production"},"metrics:clip:endToEnd":function(){return"CLIP End2End"},"downtimesByAor:title":function(){return"Downtimes - AORs"},"downtimesByAor:seriesName":function(){return"Downtime"},"downtimesByAor:press:shortText":function(){return"PWS"},"downtimesByAor:press:longText":function(){return"Press Worksheet"},"downtimesByReason:title":function(){return"Downtimes - reasons"},"downtimesByReason:seriesName":function(){return"Downtime"},quantitySuffix:function(){return" items"},referenceValue:function(){return"Reference value"},otherSeries:function(){return"Other"},"dirIndir:title":function(){return"DIR/INDIR"},"dirIndir:seriesName":function(){return"FTE"},"effIneff:title":function(){return"Allocation of resources"},"effIneff:seriesName":function(){return"FTE"},"effIneff:category:value":function(){return"I/E"},"effIneff:category:dirIndir":function(){return"D/I"},"effIneff:category:other":function(){return"..."},"effIneff:name:value":function(){return"INEFF/EFF"},"effIneff:name:dirIndir":function(){return"DIRECT/INDIRECT"},"effIneff:name:other":function(){return"Other"},"tooltipHeaderFormat:year":function(){return"YYYY"},"tooltipHeaderFormat:quarter":function(e){return t.v(e,"quarter")+" [quarter] YYYY"},"tooltipHeaderFormat:month":function(){return"YYYY MMMM"},"tooltipHeaderFormat:week":function(){return"wo. [week] (LL)"},"tooltipHeaderFormat:day":function(){return"LL"},"tooltipHeaderFormat:shift":function(e){return"LL[, "+t.v(e,"shift")+" shift]"},"tooltipHeaderFormat:hour":function(){return"LLL"},"filter:mode":function(){return"Mode"},"filter:mode:online":function(){return"Online"},"filter:mode:date":function(){return"Time range"},"filter:from":function(){return"From: "},"filter:to":function(){return"To: "},"filter:interval":function(){return"Interval"},"filter:interval:year":function(){return"year"},"filter:interval:quarter":function(){return"quarter"},"filter:interval:month":function(){return"month"},"filter:interval:week":function(){return"week"},"filter:interval:day":function(){return"day"},"filter:interval:shift":function(){return"shift"},"filter:interval:hour":function(){return"hour"},"filter:interval:title:year":function(){return"Year"},"filter:interval:title:quarter":function(){return"Quarter"},"filter:interval:title:month":function(){return"Month"},"filter:interval:title:week":function(){return"Week"},"filter:interval:title:day":function(){return"Day"},"filter:interval:title:shift":function(){return"Shift"},"filter:interval:title:hour":function(){return"Hour"},"filter:subdivisionType":function(){return"Subdivision type"},"filter:subdivisionType:prod":function(){return"Assembly"},"filter:subdivisionType:press":function(){return"Press"},"filter:submit":function(){return"Filter report"},"filter:submit:currentShift":function(){return"Current shift"},"filter:submit:prevShift":function(){return"Previous shift"},"filter:submit:today":function(){return"Today"},"filter:submit:yesterday":function(){return"Yesterday"},"filter:submit:currentWeek":function(){return"Current week"},"filter:submit:prevWeek":function(){return"Previous week"},"filter:submit:currentMonth":function(){return"Current month"},"filter:submit:prevMonth":function(){return"Previous month"},"filter:submit:q1":function(){return"I quarter"},"filter:submit:q2":function(){return"II quarter"},"filter:submit:q3":function(){return"III quarter"},"filter:submit:q4":function(){return"IV quarter"},"filter:submit:currentYear":function(){return"Current year"},"filter:submit:prevYear":function(){return"Previous year"},"filter:divisions":function(){return"Division"},"filter:majorMalfunction":function(){return"Major malfunction [h]"},"filter:options":function(){return"Show display options"},"filter:weekends":function(){return"Weekends"},"filter:weekends:title":function(){return"Should the report should include data from Saturdays and Sundays?"},"options:filter":function(){return"Show filter options"},"options:series":function(){return"Data series"},"options:extremes":function(){return"Min./max. synchronization"},"options:extremes:none":function(){return"none"},"options:extremes:siblings":function(){return"w/o parent"},"options:extremes:parent":function(){return"w/ parent"},"options:references":function(){return"References"},"options:references:coeffs":function(){return"Metrics"},"options:references:reasons":function(){return"Downtime reasons"},"options:references:aors":function(){return"Areas of resposibility"},"options:clip":function(){return"CLIP"},"options:direct":function(){return"DIRECT"},"options:indirect":function(){return"INDIRECT"},"options:warehouse":function(){return"WAREHOUSE"},"options:dirIndir":function(){return"DIRECT/INDIRECT"},"options:effIneff":function(){return"INEFF/EFF"},"options:absence":function(){return"Absence"},"options:aors":function(){return"Areas of resposibility"},"options:reasons":function(){return"Downtime reasons"},"options:prodTasks":function(){return"Prod. tasks"},"options:prodFunctions":function(){return"Prod. functions"},"options:companies":function(){return"Companies"},"settings:tab:quantityDone":function(){return"Items"},"settings:tab:efficiency":function(){return"Efficiency"},"settings:tab:productivity":function(){return"Productivity"},"settings:tab:productivityNoWh":function(){return"Productivity w/o WH"},"settings:tab:scheduledDowntime":function(){return"Scheduled downtime"},"settings:tab:unscheduledDowntime":function(){return"Unscheduled downtime"},"settings:tab:aors":function(){return"Downtimes - AORs"},"settings:tab:reasons":function(){return"Downtimes - reasons"},"settings:tab:clip":function(){return"CLIP"},"settings:tab:dirIndir":function(){return"DIRECT/INDIRECT"},"settings:tab:effIneff":function(){return"Allocation of resources"},"settings:tab:hr":function(){return"HR"},"settings:overall":function(){return"ML"},"settings:prod":function(){return"Assembly"},"settings:press":function(){return"Press"},"settings:aors":function(){return"Colors and reference values for the areas of responsibility can be set from the <a href='#aors'>Dictionaries &gt; Areas of responsibility</a> page."},"settings:reasons":function(){return"Colors and reference values for the downtime reasons can be set from the <a href='#downtimeReasons'>Dictionaries &gt; Downtime reasons</a> page"},"settings:prodTasks":function(){return"Colors for the production tasks can be set from the <a href='#prodTasks'>Dictionaries &gt; Production tasks</a> page."},"settings:absence":function(){return"Absence task"},"settings:metricRefs":function(){return"Reference values"},"settings:color":function(){return"Color"},"settings:color:clipOrderCount":function(){return"Order count color"},"settings:color:clipProduction":function(){return"Production color"},"settings:color:clipEndToEnd":function(){return"End2End color"},"settings:color:direct":function(){return"DIRECT color"},"settings:color:indirect":function(){return"INDIRECT color"},"settings:color:warehouse":function(){return"WAREHOUSE color"},"settings:color:reference":function(){return"Reference color"},"settings:color:absence":function(){return"Absence color"},"settings:color:dirIndir":function(){return"D/I color"},"settings:color:eff":function(){return"EFF color"},"settings:color:ineff":function(){return"INEFF color"},"settings:color:hrTotal":function(){return"Total FTE color"},"settings:coeff":function(){return"Coefficient"},"settings:hr:quantityDone":function(){return"Production color can be set from the <a href='#reports;settings?tab=quantityDone' data-tab='quantityDone'>Quantity done</a> tab."},"settings:hr:directIndirect":function(){return"DIRECT and INDIRECT colors can be set from the <a href='#reports;settings?tab=dirIndir' data-tab='dirIndir'>DIRECT/INDIRECT</a> tab."},"settings:hr:dirIndir":function(){return"IND/DIR color can be set from the <a href='#reports;settings?tab=effIneff' data-tab='effIneff'>Podzia≈Ç zasob√≥w</a> tab (<em>D/I color</em>)."},"settings:hr:companies":function(){return"Colors for the companies tasks can be set from the <a href='#companies'>Dictionaries &gt; Companies</a> page."},"settings:hr:prodFunctions":function(){return"Colors for the production functions can be set from the <a href='#prodFunctions'>Dictionaries &gt; Production functions</a> page."},"settings:wh:comp":function(){return"Component warehouse"},"settings:wh:finGoods":function(){return"Finished goods warehouse"},"settings:wh:subdivision":function(){return"Subdivision"},"settings:wh:inComp":function(){return"Component input"},"settings:wh:coopComp":function(){return"Cooperation personnel"},"settings:wh:exStorage":function(){return"External warehouse personnel"},"settings:wh:fifo":function(){return"'FIFO' component delivery"},"settings:wh:staging":function(){return"'Staging' component delivery"},"settings:wh:sm":function(){return"'SM' component delivery"},"settings:wh:paint":function(){return"Paint personnel"},"settings:wh:fixBin":function(){return"FixBin supplementation"},"settings:wh:compAbsence":function(){return"Absence"},"settings:wh:finGoodsIn":function(){return"Finished goods input"},"settings:wh:finGoodsOut":function(){return"Finished goods output"},"settings:wh:finGoodsAbsence":function(){return"Absence"},"oee:table:loading":function(){return"Loading..."},"oee:table:loadingFailed":function(){return"Loading failed :("},"oee:no":function(){return"#"},"oee:division":function(){return"Division"},"oee:prodLine":function(){return"Machine name"},"oee:inventoryNo":function(){return"Inventory no"},"oee:totalAvailability":function(){return"Total avail. [h]"},"oee:operationalAvailability:h":function(){return"Oper. avail. [h]"},"oee:operationalAvailability:%":function(){return"Oper. avail. [%]"},"oee:exploitation:h":function(){return"Exploitation [h]"},"oee:exploitation:%":function(){return"Exploitation [%]"},"oee:oee":function(){return"OEE [%]"},"oee:adjusting:duration":function(){return"Adjusting time [h]"},"oee:maintenance:duration":function(){return"Maintenance time [h]"},"oee:renovation:duration":function(){return"Renovation time [h]"},"oee:malfunction:duration":function(){return"Malfunction time [h]"},"oee:malfunction:count":function(){return"Malfunction count"},"oee:majorMalfunction:count":function(){return"Major malfunction count"},"oee:mttr":function(){return"MTTR [h]"},"oee:mtbf":function(){return"MTBF [h]"},"operator:filter:mode:shift":function(){return"Shift"},"operator:filter:mode:masters":function(){return"Masters"},"operator:filter:mode:operators":function(){return"Operators"},"operator:effAndProd:title":function(){return"Efficiency/Productivity"},"operator:efficiency:byDivision":function(e){return t.v(e,"division")+"'s efficiency"},"operator:efficiency":function(){return"Operators' efficiency"},"operator:productivity":function(){return"Operators' productivity"},"operator:workTimes:title":function(){return"Time worked/Downtimes"},"operator:workTimes:total":function(){return"Total time worked"},"operator:workTimes:sap":function(){return"Time worked (SAP)"},"operator:workTimes:otherWorks":function(){return"Time of other works"},"operator:workTimes:downtime":function(){return"Downtime"},"operator:machineTimes:title":function(){return"Machines - work time/adjusting time"},"operator:machineTimes:machineMedian":function(){return"Machine's adjusting median"},"operator:machineTimes:work":function(){return"Time worked"},"operator:machineTimes:operatorMedian":function(){return"Operators' adjusting median"},"operator:quantities:title":function(){return"Quantities done/Material losses"},"operator:quantities:good":function(){return"Good"},"operator:quantities:bad":function(){return"Bad"},"operator:quantities:total":function(){return"Total"},"operator:quantities:loss":function(){return"Losses"},"operator:notes:title":function(){return"Parts with comments"},"operator:notes:load":function(e){return"Load "+t.v(e,"notes")+" "+t.p(e,"notes",0,"en",{one:"comment",other:"comments"})+" from "+t.v(e,"worksheets")+" "+t.p(e,"worksheets",0,"en",{one:"worksheet",other:"worksheets"})},"operator:notes:load:noData":function(){return"Load comments"},"operator:notes:noData":function(){return"No comments."},"hr:quantityDone":function(){return"Production"},"hr:total":function(){return"Total"},"hr:direct":function(){return"DIRECT"},"hr:indirect":function(){return"INDIRECT"},"hr:dirIndir":function(){return"IND/DIR"},"hr:title:direct":function(){return"DIRECT"},"hr:title:indirect":function(){return"INDIRECT"},"hr:title:dirIndir":function(){return"INDIRECT/DIRECT"},"hr:title:details":function(){return"Details"},"hr:total:columns":function(){return"Metric;Unit"},"hr:direct:columns":function(){return"DIRECT;Unit"},"hr:indirect:columns":function(){return"INDIRECT;Unit"},"hr:dirIndir:columns":function(){return"Metric;Unit"},"hr:details:columns":function(){return"Position;Company;Unit;Average"},"wh:eff":function(){return"Efficiency"},"wh:fte":function(){return"FTE"},"wh:qty":function(){return"Quantity"},"wh:absence":function(){return"Absence"},"wh:effAndFte:exTransactions":function(){return"External transactions"},"wh:effAndFte:inComp":function(){return"Component input"},"wh:effAndFte:coopComp":function(){return"Cooperation personnel"},"wh:effAndFte:exStorage":function(){return"External warehouse personnel"},"wh:effAndFte:fifo":function(){return"'FIFO' component delivery"},"wh:effAndFte:staging":function(){return"'Staging' component delivery"},"wh:effAndFte:sm":function(){return"'SM' component delivery"},"wh:effAndFte:paint":function(){return"Paint personnel"},"wh:effAndFte:fixBin":function(){return"FixBin supplementation"},"wh:effAndFte:finGoodsIn":function(){return"Finished goods input"},"wh:effAndFte:finGoodsOut":function(){return"Finished goods output"},"wh:category:exTransactions":function(){return"External transactions categories"},"wh:category:coopComp":function(){return"Cooperation personnel categories"},"wh:category:exStorage":function(){return"External WH personnel categories"},"wh:category:fifo":function(){return"FIFO categories"},"wh:category:totalAbsence":function(){return"Total absence categories"},"wh:category:compAbsence":function(){return"Component WH absence categories"},"wh:category:finGoodsAbsence":function(){return"Finished goods WH absence categories"},"wh:category:name:inComp":function(){return"Component input"},"wh:category:name:coopComp":function(){return"Coop. personnel"},"wh:category:name:coopComp541":function(){return"541"},"wh:category:name:coopCompProcessing":function(){return"Processing"},"wh:category:name:exStorage":function(){return"Ext. WH personnel"},"wh:category:name:exStorageIn":function(){return"Input"},"wh:category:name:exStorageOut":function(){return"Output"},"wh:totalAndAbsence:total":function(){return"Total employment"},"wh:totalAndAbsence:comp":function(){return"Component WH employment"},"wh:totalAndAbsence:finGoods":function(){return"Finished goods WH employment"},"filenames:1:coeffs":function(){return"WMES_EffProd"},"filenames:1:downtimesByAor":function(){return"WMES_Downtimes_AOR"},"filenames:1:downtimesByReason":function(){return"WMES_Downtimes_Reasons"},"filenames:2:clip":function(){return"WMES_CLIP"},"filenames:2:dirIndir":function(){return"WMES_DirIndir"},"filenames:2:effIneff":function(){return"WMES_EffIneff"},"filenames:3:table":function(){return"WMES_OEE_Machines"},"filenames:3:oee":function(){return"WMES_OEE"},"filenames:3:downtime":function(){return"WMES_OEE_Downtime"},"filenames:4:effAndProd":function(){return"WMES_Operators_EffProd"},"filenames:4:workTimes":function(){return"WMES_Operators_WorkTimes"},"filenames:4:machineTimes":function(){return"WMES_Operators_MachineTimes"},"filenames:4:quantities":function(){return"WMES_Operators_Quantities"},"filenames:5:total":function(){return"WMES_HR_Totals"},"filenames:5:direct":function(){return"WMES_HR_Direct"},"filenames:5:indir":function(){return"WMES_HR_Indirect"},"filenames:5:dirIndir":function(){return"WMES_HR_DirIndir"},"filenames:5:details":function(){return"WMES_HR_Details"},"filenames:6:effAndFte:exTransactions":function(){return"WMES_WH_ExTransactions"},"filenames:6:effAndFte:inComp":function(){return"WMES_WH_InComp"},"filenames:6:effAndFte:coopComp":function(){return"WMES_WH_CoopComp"},"filenames:6:effAndFte:exStorage":function(){return"WMES_WH_ExStorage"},"filenames:6:effAndFte:fifo":function(){return"WMES_WH_FIFO"},"filenames:6:effAndFte:staging":function(){return"WMES_WH_Staging"},"filenames:6:effAndFte:sm":function(){return"WMES_WH_SM"},"filenames:6:effAndFte:paint":function(){return"WMES_WH_Paint"},"filenames:6:effAndFte:fixBin":function(){return"WMES_WH_FixBin"},"filenames:6:effAndFte:finGoodsIn":function(){return"WMES_WH_FinGoods_In"},"filenames:6:effAndFte:finGoodsOut":function(){return"WMES_WH_FinGoods_Out"},"filenames:6:category:coopComp":function(){return"WMES_WH_CoopComp_Cat"},"filenames:6:category:exStorage":function(){return"WMES_WH_ExStorage_Cat"},"filenames:6:category:exTransactions":function(){return"WMES_WH_ExTransactions_Cat"},"filenames:6:category:fifo":function(){return"WMES_WH_FIFO_Cat"},"filenames:6:category:totalAbsence":function(){return"WMES_WH_Absence_Total"},"filenames:6:category:compAbsence":function(){return"WMES_WH_Absence_Comp"},"filenames:6:category:finGoodsAbsence":function(){return"WMES_WH_Absence_FinGoods"},"filenames:6:totalAndAbsence:total":function(){return"WMES_WH_FTE_Total"},"filenames:6:totalAndAbsence:comp":function(){return"WMES_WH_FTE_Comp"},"filenames:6:totalAndAbsence:finGoods":function(){return"WMES_WH_FTE_FinGoods"}},pl:!0}}),define("app/nls/pl/reports",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:reports":function(){return"Raporty"},"BREADCRUMBS:settings":function(){return"Ustawienia"},"BREADCRUMBS:divisions":function(){return"Wydzia≈Çy"},"BREADCRUMBS:1":function(){return"Wska≈∫niki"},"BREADCRUMBS:2":function(){return"CLIP"},"BREADCRUMBS:3":function(){return"Wykorzystanie zasob√≥w"},"BREADCRUMBS:4":function(){return"Operatorzy"},"BREADCRUMBS:5":function(){return"HR"},"BREADCRUMBS:6":function(){return"Magazyn"},"BREADCRUMBS:6:exTransactions":function(){return"Obs≈Çuga transakcji zewnƒôtrznych"},"BREADCRUMBS:6:absence":function(){return"Zatrudnienie ca≈Çkowite"},"PAGE_ACTION:settings":function(){return"Zmie≈Ñ ustawienia"},"PAGE_ACTION:3:exportTable":function(){return"Eksportuj tabelƒô"},"PAGE_ACTION:6:export":function(){return"Eksportuj dane"},"PAGE_ACTION:6:export:to":function(){return"Eksportuj TO"},"PAGE_ACTION:6:export:fte":function(){return"Eksportuj FTE"},"1:pageTitle":function(){return"Wska≈∫niki"},"2:pageTitle":function(){return"CLIP"},"5:pageTitle":function(){return"HR"},"charts:title:overall":function(){return"ML"},"coeffs:quantityDone":function(){return"Sztuki"},"coeffs:downtime":function(){return"Przestoje"},"coeffs:scheduledDowntime":function(){return"Planowane przest."},"coeffs:unscheduledDowntime":function(){return"Nieplanowane przest."},"coeffs:efficiency":function(){return"Wydajno≈õƒá"},"coeffs:productivity":function(){return"Produktywno≈õƒá"},"coeffs:productivityNoWh":function(){return"Prod. bez magazynu"},"metrics:clip:orderCount":function(){return"Ilo≈õƒá zlece≈Ñ"},"metrics:clip:production":function(){return"CLIP Produkcja"},"metrics:clip:endToEnd":function(){return"CLIP End2End"},"downtimesByAor:title":function(){return"Czas przestoj√≥w - obszary odp."},"downtimesByAor:seriesName":function(){return"Czas przestoj√≥w"},"downtimesByAor:press:shortText":function(){return"TKP"},"downtimesByAor:press:longText":function(){return"T≈Çocznia (karta pracy)"},"downtimesByReason:title":function(){return"Czas przestoj√≥w - powody"},"downtimesByReason:seriesName":function(){return"Czas przestoj√≥w"},quantitySuffix:function(){return" szt."},referenceValue:function(){return"Warto≈õƒá referencyjna"},otherSeries:function(){return"Inne"},"dirIndir:title":function(){return"DIR/INDIR"},"dirIndir:seriesName":function(){return"FTE"},"effIneff:title":function(){return"Podzia≈Ç zasob√≥w"},"effIneff:seriesName":function(){return"FTE"},"effIneff:category:value":function(){return"I/E"},"effIneff:category:dirIndir":function(){return"D/I"},"effIneff:category:other":function(){return"..."},"effIneff:name:value":function(){return"INEFF/EFF"},"effIneff:name:dirIndir":function(){return"DIRECT/INDIRECT"},"effIneff:name:other":function(){return"Inne"},"tooltipHeaderFormat:year":function(){return"YYYY"},"tooltipHeaderFormat:quarter":function(e){return"["+t.v(e,"quarter")+" kwarta≈Ç] YYYY"},"tooltipHeaderFormat:month":function(){return"YYYY MMMM"},"tooltipHeaderFormat:week":function(){return"wo [tydzie≈Ñ] (LL)"},"tooltipHeaderFormat:day":function(){return"LL"},"tooltipHeaderFormat:shift":function(e){return"LL[, "+t.v(e,"shift")+" zmiana]"},"tooltipHeaderFormat:hour":function(){return"LLL"},"filter:mode":function(){return"Tryb"},"filter:mode:online":function(){return"Online"},"filter:mode:date":function(){return"Zadany okres czasu"},"filter:from":function(){return"Od: "},"filter:to":function(){return"Do: "},"filter:interval":function(){return"Podzia≈Ç czasu"},"filter:interval:year":function(){return"rok"},"filter:interval:quarter":function(){return"kw"},"filter:interval:month":function(){return"mc"},"filter:interval:week":function(){return"tydz"},"filter:interval:day":function(){return"dzie≈Ñ"},"filter:interval:shift":function(){return"zm"},"filter:interval:hour":function(){return"godz"},"filter:interval:title:year":function(){return"Rok"},"filter:interval:title:quarter":function(){return"Kwarta≈Ç"},"filter:interval:title:month":function(){return"MiesiƒÖc"},"filter:interval:title:week":function(){return"Tydzie≈Ñ"},"filter:interval:title:day":function(){return"Dzie≈Ñ"},"filter:interval:title:shift":function(){return"Zmiana"},"filter:interval:title:hour":function(){return"Godzina"},"filter:subdivisionType":function(){return"Typ dzia≈Çu"},"filter:subdivisionType:prod":function(){return"Monta≈º"},"filter:subdivisionType:press":function(){return"T≈Çocznia"},"filter:submit":function(){return"Filtruj raport"},"filter:submit:currentShift":function(){return"Aktualna zmiana"},"filter:submit:prevShift":function(){return"Poprzednia zmiana"},"filter:submit:today":function(){return"Dzisiaj"},"filter:submit:yesterday":function(){return"Wczoraj"},"filter:submit:currentWeek":function(){return"Aktualny tydzie≈Ñ"},"filter:submit:prevWeek":function(){return"Poprzedni tydzie≈Ñ"},"filter:submit:currentMonth":function(){return"Aktualny miesiƒÖc"},"filter:submit:prevMonth":function(){return"Poprzedni miesiƒÖc"},"filter:submit:q1":function(){return"I kwarta≈Ç"},"filter:submit:q2":function(){return"II kwarta≈Ç"},"filter:submit:q3":function(){return"III kwarta≈Ç"},"filter:submit:q4":function(){return"IV kwarta≈Ç"},"filter:submit:currentYear":function(){return"Aktualny rok"},"filter:submit:prevYear":function(){return"Poprzedni rok"},"filter:divisions":function(){return"Wydzia≈Ç"},"filter:majorMalfunction":function(){return"Powa≈ºna awaria [h]"},"filter:options":function(){return"Poka≈º opcje wy≈õwietlania"},"filter:weekends":function(){return"Weekendy"},"filter:weekends:title":function(){return"Czy w raporcie majƒÖ byƒá zawarte dane z sob√≥t i niedziel?"},"options:filter":function(){return"Poka≈º opcje filtrowania"},"options:series":function(){return"Serie danych"},"options:extremes":function(){return"Synchronizacja warto≈õci min./maks."},"options:extremes:none":function(){return"brak"},"options:extremes:siblings":function(){return"bez nadrzƒôdnego"},"options:extremes:parent":function(){return"z nadrzƒôdnym"},"options:references":function(){return"Referencje"},"options:references:coeffs":function(){return"Wska≈∫niki"},"options:references:reasons":function(){return"Powody przestoj√≥w"},"options:references:aors":function(){return"Obszary odpowiedzialno≈õci"},"options:clip":function(){return"CLIP"},"options:direct":function(){return"DIRECT"},"options:indirect":function(){return"INDIRECT"},"options:warehouse":function(){return"WAREHOUSE"},"options:dirIndir":function(){return"DIRECT/INDIRECT"},"options:effIneff":function(){return"INEFF/EFF"},"options:absence":function(){return"Absencja"},"options:aors":function(){return"Obszary odpowiedzialnosci"},"options:reasons":function(){return"Powody przestoj√≥w"},"options:prodTasks":function(){return"Zadania produkcyjne"},"options:prodFunctions":function(){return"Funkcje na produkcji"},"options:companies":function(){return"Firmy"},"settings:tab:quantityDone":function(){return"Sztuki"},"settings:tab:efficiency":function(){return"Wydajno≈õƒá"},"settings:tab:productivity":function(){return"Produktywno≈õƒá"},"settings:tab:productivityNoWh":function(){return"Produktywno≈õƒá bez magazynu"},"settings:tab:scheduledDowntime":function(){return"Planowane przestoje"},"settings:tab:unscheduledDowntime":function(){return"Nieplanowane przestoje"},"settings:tab:aors":function(){return"Czas przestoj√≥w - obszary odp."},"settings:tab:reasons":function(){return"Czas przestoj√≥w - powody"},"settings:tab:clip":function(){return"CLIP"},"settings:tab:dirIndir":function(){return"DIRECT/INDIRECT"},"settings:tab:effIneff":function(){return"Podzia≈Ç zasob√≥w"},"settings:tab:hr":function(){return"HR"},"settings:tab:wh":function(){return"Magazyn"},"settings:overall":function(){return"ML"},"settings:prod":function(){return"Monta≈º"},"settings:press":function(){return"T≈Çocznia"},"settings:aors":function(){return"Kolory i warto≈õci referencyjne dla obszar√≥w odpowiedzialno≈õci mo≈ºna ustawiƒá na stronie <a href='#aors'>S≈Çowniki &gt; Obszary odpowiedzialno≈õci</a>."},"settings:reasons":function(){return"Kolory i warto≈õci referencyjne dla powod√≥w przestoj√≥w mo≈ºna ustawiƒá na stronie <a href='#downtimeReasons'>S≈Çowniki &gt; Powody przestoj√≥w.</a>"},"settings:prodTasks":function(){return"Kolory warto≈õci zada≈Ñ produkcyjnych mo≈ºna ustawiaƒá na stronie <a href='#prodTasks'>S≈Çowniki &gt; Zadania produkcyjne</a>."},"settings:absence":function(){return"Zadanie produkcyjne absencji"},"settings:metricRefs":function(){return"Warto≈õci referencyjne"},"settings:color":function(){return"Kolor"},"settings:color:clipOrderCount":function(){return"Kolor Ilo≈õƒá zlece≈Ñ"},"settings:color:clipProduction":function(){return"Kolor Produkcja"},"settings:color:clipEndToEnd":function(){return"Kolor End2End"},"settings:color:direct":function(){return"Kolor DIRECT"},"settings:color:indirect":function(){return"Kolor INDIRECT"},"settings:color:warehouse":function(){return"Kolor WAREHOUSE"},"settings:color:reference":function(){return"Kolor referencji"},"settings:color:absence":function(){return"Kolor absencji"},"settings:color:dirIndir":function(){return"Kolor D/I"},"settings:color:eff":function(){return"Kolor EFF"},"settings:color:ineff":function(){return"Kolor INEFF"},"settings:color:hrTotal":function(){return"Kolor sumy FTE"},"settings:coeff":function(){return"Wsp√≥≈Çczynnik"},"settings:hr:quantityDone":function(){return"Kolor warto≈õci Produkcja mo≈ºna ustawiƒá w zak≈Çadce <a href='#reports;settings?tab=quantityDone' data-tab='quantityDone'>Sztuki</a>."},"settings:hr:directIndirect":function(){return"Kolor warto≈õci DIRECT oraz INDIRECT mo≈ºna ustawiƒá w zak≈Çadce <a href='#reports;settings?tab=dirIndir' data-tab='dirIndir'>DIRECT/INDIRECT</a>."},"settings:hr:dirIndir":function(){return"Kolor warto≈õci IND/DIR mo≈ºna ustawiƒá w zak≈Çadce <a href='#reports;settings?tab=effIneff' data-tab='effIneff'>Podzia≈Ç zasob√≥w</a> (<em>Kolor D/I</em>)."},"settings:hr:companies":function(){return"Kolory warto≈õci firm mo≈ºna ustawiaƒá na stronie <a href='#companies'>S≈Çowniki &gt; Firmy</a>."},"settings:hr:prodFunctions":function(){return"Kolory warto≈õci funkcji na produkcji mo≈ºna ustawiaƒá na stronie <a href='#prodFunctions'>S≈Çowniki &gt; Funkcje na produkcji</a>."},"settings:wh:comp":function(){return"Magazyn komponent√≥w"},"settings:wh:finGoods":function(){return"Magazyn wyrob√≥w gotowych"},"settings:wh:subdivision":function(){return"Dzia≈Ç"},"settings:wh:inComp":function(){return"Przyjƒôcia komponent√≥w"},"settings:wh:coopComp":function(){return"Obs≈Çuga kooperacji"},"settings:wh:exStorage":function(){return"Obs≈Çuga magazyn√≥w zewnƒôtrznych"
},"settings:wh:fifo":function(){return"Dostarczanie komponent√≥w 'FIFO'"},"settings:wh:staging":function(){return"Dostarczanie komp. 'Staging' oraz wyda≈Ñ koszt."},"settings:wh:sm":function(){return"Dostarczanie komponent√≥w 'SM'"},"settings:wh:paint":function(){return"Obs≈Çuga malarni"},"settings:wh:fixBin":function(){return"Uzupe≈Çnianie FixBin√≥w"},"settings:wh:compAbsence":function(){return"Absencja"},"settings:wh:finGoodsIn":function(){return"Przyjƒôcia wyrob√≥w gotowych"},"settings:wh:finGoodsOut":function(){return"Przygotowanie wysy≈Çek i za≈Çadunek"},"settings:wh:finGoodsAbsence":function(){return"Absencja"},"oee:table:loading":function(){return"≈Åadowanie..."},"oee:table:loadingFailed":function(){return"≈Åadowanie nie powiod≈Ço siƒô :("},"oee:no":function(){return"Lp."},"oee:division":function(){return"Wydzia≈Ç"},"oee:prodLine":function(){return"Nazwa maszyny"},"oee:inventoryNo":function(){return"Nr inwent."},"oee:totalAvailability":function(){return"Dyspoz. maszyn ca≈Çkowita [h]"},"oee:operationalAvailability:h":function(){return"Dyspoz. maszyn oper. [h]"},"oee:operationalAvailability:%":function(){return"Dyspoz. maszyn oper. [%]"},"oee:exploitation:h":function(){return"Wykorz. maszyn [h]"},"oee:exploitation:%":function(){return"Wykorz. maszyn [%]"},"oee:oee":function(){return"OEE [%]"},"oee:adjusting:duration":function(){return"Czas ustaw. / przezbr. [h]"},"oee:maintenance:duration":function(){return"Czas konserw. [h]"},"oee:renovation:duration":function(){return"Czas przeglƒÖd√≥w / remont√≥w [h]"},"oee:malfunction:duration":function(){return"Czas wszystkich awarii [h]"},"oee:malfunction:count":function(){return"Ilo≈õƒá wszystkich awarii [szt]"},"oee:majorMalfunction:count":function(){return"Ilo≈õƒá powa≈ºnych awarii [szt]"},"oee:mttr":function(){return"MTTR [h]"},"oee:mtbf":function(){return"MTBF [h]"},"operator:filter:mode:shift":function(){return"Zmiana"},"operator:filter:mode:masters":function(){return"Mistrzowie"},"operator:filter:mode:operators":function(){return"Operatorzy"},"operator:effAndProd:title":function(){return"Wydajno≈õƒá/Produktywno≈õƒá"},"operator:efficiency:byDivision":function(e){return"Wydajno≈õƒá "+t.v(e,"division")},"operator:efficiency":function(){return"Wydajno≈õƒá operator√≥w"},"operator:productivity":function(){return"Produktywno≈õƒá operator√≥w"},"operator:workTimes:title":function(){return"Przepracowany czas/Przestoje"},"operator:workTimes:total":function(){return"Ca≈Çkowity przepracowany czas"},"operator:workTimes:sap":function(){return"Czas przepracowany (SAP)"},"operator:workTimes:otherWorks":function(){return"Czas innych prac"},"operator:workTimes:downtime":function(){return"Czas przestoju"},"operator:machineTimes:title":function(){return"Maszyny - czas pracy/czasy przezbroje≈Ñ"},"operator:machineTimes:machineMedian":function(){return"Mediana przezbroje≈Ñ maszyny"},"operator:machineTimes:work":function(){return"Czas przepracowany"},"operator:machineTimes:operatorMedian":function(){return"Mediana przezbroje≈Ñ operator√≥w"},"operator:quantities:title":function(){return"Ilo≈õci wykonane/Straty materia≈Çowe"},"operator:quantities:good":function(){return"Dobre"},"operator:quantities:bad":function(){return"Wadliwe"},"operator:quantities:total":function(){return"Suma"},"operator:quantities:loss":function(){return"Straty"},"operator:notes:title":function(){return"Lista wykonanych czƒô≈õci z komentarzami"},"operator:notes:load":function(e){return"Wczytaj "+t.v(e,"notes")+" "+t.p(e,"notes",0,"pl",{one:"komentarz",few:"komentarze",other:"komentarzy"})+" z "+t.v(e,"worksheets")+" "+t.p(e,"worksheets",0,"pl",{one:"karty",other:"kart"})},"operator:notes:load:noData":function(){return"Wczytaj komentarze"},"operator:notes:noData":function(){return"Brak komentarzy."},"hr:quantityDone":function(){return"Produkcja"},"hr:total":function(){return"Suma"},"hr:direct":function(){return"DIRECT"},"hr:indirect":function(){return"INDIRECT"},"hr:dirIndir":function(){return"IND/DIR"},"hr:title:direct":function(){return"DIRECT"},"hr:title:indirect":function(){return"INDIRECT"},"hr:title:dirIndir":function(){return"INDIRECT/DIRECT"},"hr:title:details":function(){return"Szczeg√≥≈Çy"},"hr:total:columns":function(){return"Wska≈∫nik;Jednostka"},"hr:direct:columns":function(){return"DIRECT;Jednostka"},"hr:indirect:columns":function(){return"INDIRECT;Jednostka"},"hr:dirIndir:columns":function(){return"Wska≈∫nik;Jednostka"},"hr:details:columns":function(){return"Stanowisko;Firma;Jednostka;≈örednia"},"wh:eff":function(){return"Wydajno≈õƒá"},"wh:fte":function(){return"FTE"},"wh:qty":function(){return"Ilo≈õƒá"},"wh:absence":function(){return"Absencja"},"wh:effAndFte:exTransactions":function(){return"Obs≈Çuga transakcji zewnƒôtrznych"},"wh:effAndFte:inComp":function(){return"Przyjƒôcia komponent√≥w"},"wh:effAndFte:coopComp":function(){return"Obs≈Çuga kooperacji"},"wh:effAndFte:exStorage":function(){return"Obs≈Çuga magazyn√≥w zewnƒôtrznych"},"wh:effAndFte:fifo":function(){return"Dostarczanie komponent√≥w 'FIFO'"},"wh:effAndFte:staging":function(){return"Dostarczanie komponent√≥w 'Staging'"},"wh:effAndFte:sm":function(){return"Dostarczanie komponent√≥w 'SM'"},"wh:effAndFte:paint":function(){return"Obs≈Çuga malarni"},"wh:effAndFte:fixBin":function(){return"Uzupe≈Çnianie FixBin√≥w"},"wh:effAndFte:finGoodsIn":function(){return"Przyjƒôcia wyrob√≥w gotowych"},"wh:effAndFte:finGoodsOut":function(){return"Wyr. got.: przyg. wysy≈Çek i za≈Çadunek"},"wh:category:exTransactions":function(){return"Kategorie transakcji zewnƒôtrznych"},"wh:category:coopComp":function(){return"Kategorie wyd. do kooperacji"},"wh:category:exStorage":function(){return"Kategorie obs≈Çugi mag. zew."},"wh:category:fifo":function(){return"Kategorie FIFO"},"wh:category:totalAbsence":function(){return"Kategorie absencji ca≈Çkowitej"},"wh:category:compAbsence":function(){return"Kategorie absencji mag. komp."},"wh:category:finGoodsAbsence":function(){return"Kategorie absencji mag. wyr. got."},"wh:category:name:inComp":function(){return"Przyj. komponent√≥w"},"wh:category:name:coopComp":function(){return"Wyd. do kooperacji"},"wh:category:name:coopComp541":function(){return"541"},"wh:category:name:coopCompProcessing":function(){return"Przer√≥bka"},"wh:category:name:exStorage":function(){return"Obs≈Çuga mag. zew."},"wh:category:name:exStorageIn":function(){return"Przyjƒôcia"},"wh:category:name:exStorageOut":function(){return"Wydania"},"wh:totalAndAbsence:total":function(){return"Zatrudnienie ca≈Çkowite"},"wh:totalAndAbsence:comp":function(){return"Zatrudnienie mag. komponent√≥w"},"wh:totalAndAbsence:finGoods":function(){return"Zatrudnienie mag. wyr. gotowych"},"filenames:1:coeffs":function(){return"WMES_Wskazniki_WydProd"},"filenames:1:downtimesByAor":function(){return"WMES_Przestoje_ObszOdp"},"filenames:1:downtimesByReason":function(){return"WMES_Przestoje_Powody"},"filenames:2:clip":function(){return"WMES_CLIP"},"filenames:2:dirIndir":function(){return"WMES_DirIndir"},"filenames:2:effIneff":function(){return"WMES_PodzialZasobow"},"filenames:3:table":function(){return"WMES_WykZas_Maszyny"},"filenames:3:oee":function(){return"WMES_WykZas_OEE"},"filenames:3:downtime":function(){return"WMES_WykZas_Przestoje"},"filenames:4:effAndProd":function(){return"WMES_Operatorzy_WydProd"},"filenames:4:workTimes":function(){return"WMES_Operatorzy_CzasPracy"},"filenames:4:machineTimes":function(){return"WMES_Operatorzy_CzasPrzezbr"},"filenames:4:quantities":function(){return"WMES_Operatorzy_WykIlosci"},"filenames:5:total":function(){return"WMES_HR_Sumy"},"filenames:5:direct":function(){return"WMES_HR_Direct"},"filenames:5:indir":function(){return"WMES_HR_Indirect"},"filenames:5:dirIndir":function(){return"WMES_HR_DirIndir"},"filenames:5:details":function(){return"WMES_HR_Szczegoly"},"filenames:6:effAndFte:exTransactions":function(){return"WMES_Magazyn_ObsTranZew"},"filenames:6:effAndFte:inComp":function(){return"WMES_Magazyn_PrzyjKomp"},"filenames:6:effAndFte:coopComp":function(){return"WMES_Magazyn_WydKoop"},"filenames:6:effAndFte:exStorage":function(){return"WMES_Magazyn_ObsMagZew"},"filenames:6:effAndFte:fifo":function(){return"WMES_Magazyn_FIFO"},"filenames:6:effAndFte:staging":function(){return"WMES_Magazyn_Staging"},"filenames:6:effAndFte:sm":function(){return"WMES_Magazyn_SM"},"filenames:6:effAndFte:paint":function(){return"WMES_Magazyn_Malarnia"},"filenames:6:effAndFte:fixBin":function(){return"WMES_Magazyn_FixBin"},"filenames:6:effAndFte:finGoodsIn":function(){return"WMES_Magazyn_WyrGot_Przyjecia"},"filenames:6:effAndFte:finGoodsOut":function(){return"WMES_Magazyn_WyrGot_PrzygWysZal"},"filenames:6:category:coopComp":function(){return"WMES_Magazyn_WydKoop_Kat"},"filenames:6:category:exStorage":function(){return"WMES_Magazyn_ObsMagZew_Kat"},"filenames:6:category:exTransactions":function(){return"WMES_Magazyn_ObsTranZew_Kat"},"filenames:6:category:fifo":function(){return"WMES_Magazyn_FIFO_Kat"},"filenames:6:category:totalAbsence":function(){return"WMES_Magazyn_Absencja_Calkowita"},"filenames:6:category:compAbsence":function(){return"WMES_Magazyn_Absencja_MagKomp"},"filenames:6:category:finGoodsAbsence":function(){return"WMES_Magazyn_Absencja_MagWyrGot"},"filenames:6:totalAndAbsence:total":function(){return"WMES_Magazyn_Zatr_Calkowite"},"filenames:6:totalAndAbsence:comp":function(){return"WMES_Magazyn_Zatr_MagKomp"},"filenames:6:totalAndAbsence:finGoods":function(){return"WMES_Magazyn_Zatr_MagWyrGot"}}}),define("app/reports/routes",["../user","../router","../viewport","i18n!app/nls/reports"],function(e,t,n){var r=e.auth("REPORTS:VIEW");t.map("/reports/1",r,function(e){return n.currentPage&&"report1"===n.currentPage.pageId?n.currentPage.query.reset(e.query):void n.loadPage("app/reports/pages/Report1Page",function(t){return new t({query:e.query,displayOptions:e.fragment})})}),t.map("/reports/2",r,function(e){return n.currentPage&&"report2"===n.currentPage.pageId?n.currentPage.query.reset(e.query):void n.loadPage("app/reports/pages/Report2Page",function(t){return new t({query:e.query,displayOptions:e.fragment})})}),t.map("/reports/3",r,function(e){n.loadPage("app/reports/pages/Report3Page",function(t){return new t({query:e.rql})})}),t.map("/reports/4",r,function(e){n.loadPage("app/reports/pages/Report4Page",function(t){return new t({query:e.query})})}),t.map("/reports/5",r,function(e){return n.currentPage&&"report5"===n.currentPage.pageId?n.currentPage.query.reset(e.query):void n.loadPage("app/reports/pages/Report5Page",function(t){return new t({query:e.query,displayOptions:e.fragment})})}),t.map("/reports/6",r,function(e){return n.currentPage&&"report6"===n.currentPage.pageId?n.currentPage.query.reset(e.query):void n.loadPage("app/reports/pages/Report6Page",function(t){return new t({query:e.query,displayOptions:e.fragment})})}),t.map("/reports;settings",e.auth("REPORTS:MANAGE"),function(e){n.loadPage("app/reports/pages/ReportSettingsPage",function(t){return new t({initialTab:e.query.tab})})})}),define("app/nls/subdivisions",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Subdivisions"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the subdivisions :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the subdivision :("},"MSG:DELETED":function(e){return"Subdivision <em>"+t.v(e,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add subdivision"},"PAGE_ACTION:edit":function(){return"Edit subdivision"},"PAGE_ACTION:delete":function(){return"Delete subdivision"},"PANEL:TITLE:details":function(){return"Subdivision's details"},"PANEL:TITLE:addForm":function(){return"Add subdivision form"},"PANEL:TITLE:editForm":function(){return"Edit subdivision form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:division":function(){return"Division"},"PROPERTY:name":function(){return"Name"},"PROPERTY:prodTaskTags":function(){return"Production task tags"},"PROPERTY:type":function(){return"Type"},"PROPERTY:aor":function(){return"Default AOR"},"TYPE:assembly":function(){return"Assembly"},"TYPE:press":function(){return"Press"},"TYPE:storage":function(){return"Warehouse"},"FORM:ACTION:add":function(){return"Add subdivision"},"FORM:ACTION:edit":function(){return"Edit subdivision"},"FORM:ERROR:addFailure":function(){return"Failed to add the new subdivision :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the subdivision :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Subdivision deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete subdivision"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen subdivision?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Are you sure you want to delete the <em>"+t.v(e,"label")+"</em> subdivision?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the subdivision :-("}},pl:!0}}),define("app/nls/pl/subdivisions",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Dzia≈Çy"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie dzia≈Ç√≥w nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie dzia≈Çu nie powiod≈Ço siƒô :("},"MSG:DELETED":function(e){return"Dzia≈Ç <em>"+t.v(e,"label")+"</em> zosta≈Ço usuniƒôte."},"PAGE_ACTION:add":function(){return"Dodaj dzia≈Ç"},"PAGE_ACTION:edit":function(){return"Edytuj dzia≈Ç"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ dzia≈Ç"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy dzia≈Çu"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania dzia≈Çu"},"PANEL:TITLE:editForm":function(){return"Formularz edycji dzia≈Çu"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:division":function(){return"Wydzia≈Ç"},"PROPERTY:name":function(){return"Nazwa"},"PROPERTY:prodTaskTags":function(){return"Tagi zada≈Ñ produkcyjnych"},"PROPERTY:type":function(){return"Typ"},"PROPERTY:aor":function(){return"Domy≈õlny obszar odp."},"TYPE:assembly":function(){return"Monta≈º"},"TYPE:press":function(){return"T≈Çocznia"},"TYPE:storage":function(){return"Magazyn"},"FORM:ACTION:add":function(){return"Dodaj dzia≈Ç"},"FORM:ACTION:edit":function(){return"Edytuj dzia≈Ç"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá dzia≈Çu :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá dzia≈Çu :-("},"FORM:PLACEHOLDER:aor":function(){return"Wybierz obszar odpowiedzialno≈õci..."},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia dzia≈Çu"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ dzia≈Ç"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany dzia≈Ç?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá dzia≈Ç <em>"+t.v(e,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá dzia≈Çu :-("}}}),define("app/subdivisions/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","../data/subdivisions","./Subdivision","i18n!app/nls/subdivisions"],function(e,t,n,r,i,o){var a=n.auth("DICTIONARIES:VIEW"),s=n.auth("DICTIONARIES:MANAGE");e.map("/subdivisions",a,function(){t.loadPage(["app/core/pages/ListPage","app/subdivisions/views/decorateSubdivision"],function(e,t){return new e({collection:i,columns:["division","type","name","prodTaskTags","aor"],serializeRow:t})})}),e.map("/subdivisions/:id",function(e){t.loadPage(["app/core/pages/DetailsPage","app/subdivisions/views/SubdivisionDetailsView"],function(t,n){return new t({DetailsView:n,model:new o({_id:e.params.id})})})}),e.map("/subdivisions;add",s,function(){t.loadPage("app/subdivisions/pages/AddSubdivisionFormPage",function(e){return new e({model:new o})})}),e.map("/subdivisions/:id;edit",s,function(e){t.loadPage("app/subdivisions/pages/EditSubdivisionFormPage",function(t){return new t({model:new o({_id:e.params.id})})})}),e.map("/subdivisions/:id;delete",s,r.bind(null,o))}),define("app/nls/users",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Users"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the users :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the user :("},"MSG:DELETED":function(e){return"User <em>"+t.v(e,"label")+"</em> was deleted."},"MSG:SYNCED":function(){return"Users were synchronized successfully :)"},"MSG:SYNC_FAILURE":function(){return"Failed to synchronize the users :("},"PAGE_ACTION:add":function(){return"Add user"},"PAGE_ACTION:edit":function(){return"Edit user"},"PAGE_ACTION:delete":function(){return"Delete user"},"PAGE_ACTION:sync":function(){return"Synchronize with the AC database"},"PANEL:TITLE:details":function(){return"User's details"},"PANEL:TITLE:addForm":function(){return"Add user form"},"PANEL:TITLE:editForm":function(){return"Edit user form"},"filter:submit":function(){return"Filter users"},"filter:placeholder:personellId":function(){return"Any personnel ID"},"filter:placeholder:lastName":function(){return"Any last name"},"PROPERTY:login":function(){return"Login"},"PROPERTY:password":function(){return"Password"},"PROPERTY:password2":function(){return"Confirm password"},"PROPERTY:email":function(){return"E-mail address"},"PROPERTY:privileges":function(){return"Privileges"},"PROPERTY:prodFunction":function(){return"Production function"},"PROPERTY:aors":function(){return"Areas of responsibility"},"PROPERTY:company":function(){return"Companies"},"PROPERTY:kdDivision":function(){return"Division (AC)"},"PROPERTY:personellId":function(){return"Personell ID"},"PROPERTY:card":function(){return"Card no"},"PROPERTY:name":function(){return"Name"},"PROPERTY:firstName":function(){return"First name"},"PROPERTY:lastName":function(){return"Last name"},"PROPERTY:registerDate":function(){return"Register date"},"PROPERTY:kdPosition":function(){return"Position (AC)"},"PROPERTY:active":function(){return"Active?"},"PROPERTY:orgUnit":function(){return"Org Unit"},"PROPERTY:vendor":function(){return"Vendor"},"ACTIVE:true":function(){return"Yes"},"ACTIVE:false":function(){return"No"},"FORM:ACTION:add":function(){return"Add user"},"FORM:ACTION:edit":function(){return"Edit user"},"FORM:ERROR:passwordMismatch":function(){return"The specified password do not match."},"FORM:ERROR:addFailure":function(){return"Failed to add the user :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the user :-("},"NO_DATA:aors":function(){return"All"},"NO_DATA:company":function(){return"Unspecified"},"NO_DATA:prodFunction":function(){return"Unspecified"},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"User deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete user"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen user?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Are you sure you want to delete the <em>"+t.v(e,"label")+"</em> user?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the user :-("},"PRIVILEGE:ORDERS:VIEW":function(){return"Orders: view"},"PRIVILEGE:ORDERS:MANAGE":function(){return"Orders: manage"},"PRIVILEGE:EVENTS:VIEW":function(){return"Events: view"},"PRIVILEGE:EVENTS:MANAGE":function(){return"Events: manage"},"PRIVILEGE:USERS:VIEW":function(){return"Users: view"},"PRIVILEGE:USERS:MANAGE":function(){return"Users: manage"},"PRIVILEGE:DICTIONARIES:VIEW":function(){return"Dictionaries: view"},"PRIVILEGE:DICTIONARIES:MANAGE":function(){return"Dictionaries: manage"},"PRIVILEGE:FTE:MASTER:VIEW":function(){return"FTE (production): view"},"PRIVILEGE:FTE:MASTER:MANAGE":function(){return"FTE (production): manage"},"PRIVILEGE:FTE:MASTER:ALL":function(){return"FTE (production): access to all divisions"},"PRIVILEGE:FTE:LEADER:VIEW":function(){return"FTE (distribution): view"},"PRIVILEGE:FTE:LEADER:MANAGE":function(){return"FTE (distribution): manage"},"PRIVILEGE:FTE:LEADER:ALL":function(){return"FTE (distribution): access to all divisions"},"PRIVILEGE:HOURLY_PLANS:VIEW":function(){return"Hourly plans: view"},"PRIVILEGE:HOURLY_PLANS:MANAGE":function(){return"Hourly plans: manage"},"PRIVILEGE:HOURLY_PLANS:ALL":function(){return"Hourly plans: access to all divisions"},"PRIVILEGE:PROD_DOWNTIMES:VIEW":function(){return"Downtimes: view"},"PRIVILEGE:PROD_DOWNTIMES:MANAGE":function(){return"Downtimes: corroboration"},"PRIVILEGE:PROD_DOWNTIMES:ALL":function(){return"Downtimes: access to all divisions"},"PRIVILEGE:PRESS_WORKSHEETS:VIEW":function(){return"Worksheets: view"},"PRIVILEGE:PRESS_WORKSHEETS:MANAGE":function(){return"Worksheets: manage"},"PRIVILEGE:PROD_DATA:VIEW":function(){return"Production data: view"},"PRIVILEGE:PROD_DATA:MANAGE":function(){return"Production data: manage"},"PRIVILEGE:REPORTS:VIEW":function(){return"Reports: view"},"PRIVILEGE:REPORTS:MANAGE":function(){return"Reports: manage"},"PRIVILEGE:XICONF:VIEW":function(){return"Xiconf: view"},"PRIVILEGE:XICONF:MANAGE":function(){return"Xiconf: manage"},"PRIVILEGE:ICPO:VIEW":function(){return"ICPO: view"},"PRIVILEGE:ICPO:MANAGE":function(){return"ICPO: manage"},"PRIVILEGE:PURCHASE_ORDERS:VIEW":function(){return"Purchase orders: view"},"PRIVILEGE:PURCHASE_ORDERS:MANAGE":function(){return"Purchase orders: manage"},"PRIVILEGE:FACTORY_LAYOUT:MANAGE":function(){return"Monitoring: manage"},"select2:placeholder":function(){return"Search by last name or personnel ID..."},"select2:users:system":function(){return"System"}},pl:!0}}),define("app/nls/pl/users",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"U≈ºytkownicy"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie u≈ºytkownik√≥w nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie u≈ºytkownika nie powiod≈Ço siƒô :("},"MSG:DELETED":function(e){return"U≈ºytkownik <em>"+t.v(e,"label")+"</em> zosta≈Ç usuniƒôty."},"MSG:SYNCED":function(){return"U≈ºytkownicy zostali zsynchronizowani :)"},"MSG:SYNC_FAILURE":function(){return"Synchronizacja u≈ºytkownik√≥w nie powiod≈Ça siƒô :("},"PAGE_ACTION:add":function(){return"Dodaj u≈ºytkownika"},"PAGE_ACTION:edit":function(){return"Edytuj u≈ºytkownika"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ u≈ºytkownika"},"PAGE_ACTION:sync":function(){return"Synchronizuj z bazƒÖ KD"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy u≈ºytkownika"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania u≈ºytkownika"},"PANEL:TITLE:editForm":function(){return"Formularz edycji u≈ºytkownika"},"filter:submit":function(){return"Filtruj u≈ºytkownik√≥w"},"filter:placeholder:personellId":function(){return"Dowolny nr"},"filter:placeholder:lastName":function(){return"Dowolne nazwisko"},"PROPERTY:login":function(){return"Login"},"PROPERTY:password":function(){return"Has≈Ço"},"PROPERTY:password2":function(){return"Potwierdzenie has≈Ça"},"PROPERTY:email":function(){return"Adres e-mail"},"PROPERTY:privileges":function(){return"Uprawnienia"},"PROPERTY:prodFunction":function(){return"Funkcja na produkcji"},"PROPERTY:aors":function(){return"Obszary odpowiedzialno≈õci"},"PROPERTY:company":function(){return"Firma"},"PROPERTY:kdDivision":function(){return"Wydzia≈Ç (KD)"},"PROPERTY:personellId":function(){return"Nr kadrowy"},"PROPERTY:card":function(){return"Nr karty"},"PROPERTY:name":function(){return"Imiƒô i nazwisko"},"PROPERTY:firstName":function(){return"Imiƒô"},"PROPERTY:lastName":function(){return"Nazwisko"},"PROPERTY:registerDate":function(){return"Data rejestracji"},"PROPERTY:kdPosition":function(){return"Stanowisko (KD)"},"PROPERTY:active":function(){return"Aktywny?"},"PROPERTY:orgUnit":function(){return"Jednostka organizacyjna"},"PROPERTY:vendor":function(){return"Dostawca"},"ACTIVE:true":function(){return"Tak"},"ACTIVE:false":function(){return"Nie"},"FORM:ACTION:add":function(){return"Dodaj u≈ºytkownika"},"FORM:ACTION:edit":function(){return"Edytuj u≈ºytkownika"},"FORM:ERROR:passwordMismatch":function(){return"Podane has≈Ça nie pasujƒÖ do siebie."},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá u≈ºytkownika :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá u≈ºytkownika :-("},"NO_DATA:aors":function(){return"Wszystkie"},"NO_DATA:company":function(){return"Nieokre≈õlona"},"NO_DATA:prodFunction":function(){return"Nieokre≈õlona"},"NO_DATA:vendor":function(){return"Wszyscy"},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia u≈ºytkownika"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ u≈ºytkownika"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybranego u≈ºytkownika?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá u≈ºytkownika <em>"+t.v(e,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá u≈ºytkownika :-("},"PRIVILEGE:ORDERS:VIEW":function(){return"Zlecenia: przeglƒÖdanie"},"PRIVILEGE:ORDERS:MANAGE":function(){return"Zlecenia: zarzƒÖdzanie"},"PRIVILEGE:EVENTS:VIEW":function(){return"Zdarzenia: przeglƒÖdanie"},"PRIVILEGE:EVENTS:MANAGE":function(){return"Zdarzenia: zarzƒÖdzanie"},"PRIVILEGE:USERS:VIEW":function(){return"U≈ºytkownicy: przeglƒÖdanie"},"PRIVILEGE:USERS:MANAGE":function(){return"U≈ºytkownicy: zarzƒÖdzanie"},"PRIVILEGE:DICTIONARIES:VIEW":function(){return"S≈Çowniki: przeglƒÖdanie"},"PRIVILEGE:DICTIONARIES:MANAGE":function(){return"S≈Çowniki: zarzƒÖdzanie"},"PRIVILEGE:FTE:MASTER:VIEW":function(){return"FTE (produkcja): przeglƒÖdanie"},"PRIVILEGE:FTE:MASTER:MANAGE":function(){return"FTE (produkcja): zarzƒÖdzanie"},"PRIVILEGE:FTE:MASTER:ALL":function(){return"FTE (produkcja): dostƒôp do wszystkich wydzia≈Ç√≥w"},"PRIVILEGE:FTE:LEADER:VIEW":function(){return"FTE (magazyn): przeglƒÖdanie"},"PRIVILEGE:FTE:LEADER:MANAGE":function(){return"FTE (magazyn): zarzƒÖdzanie"},"PRIVILEGE:FTE:LEADER:ALL":function(){return"FTE (magazyn): dostƒôp do wszystkich wydzia≈Ç√≥w"},"PRIVILEGE:HOURLY_PLANS:VIEW":function(){return"Plany godzinowe: przeglƒÖdanie"},"PRIVILEGE:HOURLY_PLANS:MANAGE":function(){return"Plany godzinowe: zarzƒÖdzanie"},"PRIVILEGE:HOURLY_PLANS:ALL":function(){return"Plany godzinowe: dostƒôp do wszystkich wydzia≈Ç√≥w"},"PRIVILEGE:PROD_DOWNTIMES:VIEW":function(){return"Przestoje: przeglƒÖdanie"},"PRIVILEGE:PROD_DOWNTIMES:MANAGE":function(){return"Przestoje: potwierdzanie"},"PRIVILEGE:PROD_DOWNTIMES:ALL":function(){return"Przestoje: dostƒôp do wszystkich wydzia≈Ç√≥w"},"PRIVILEGE:PRESS_WORKSHEETS:VIEW":function(){return"Karty pracy: przeglƒÖdanie"},"PRIVILEGE:PRESS_WORKSHEETS:MANAGE":function(){return"Karty pracy: dodawanie"},"PRIVILEGE:PROD_DATA:VIEW":function(){return"Dane produkcyjne: przeglƒÖdanie"},"PRIVILEGE:PROD_DATA:MANAGE":function(){return"Dane produkcyjne: zarzƒÖdzanie"},"PRIVILEGE:REPORTS:VIEW":function(){return"Raporty: przeglƒÖdanie"},"PRIVILEGE:REPORTS:MANAGE":function(){return"Raporty: zarzƒÖdzanie"},"PRIVILEGE:XICONF:VIEW":function(){return"Xiconf: przeglƒÖdanie"},"PRIVILEGE:XICONF:MANAGE":function(){return"Xiconf: zarzƒÖdzanie"},"PRIVILEGE:ICPO:VIEW":function(){return"ICPO: przeglƒÖdanie"},"PRIVILEGE:ICPO:MANAGE":function(){return"ICPO: zarzƒÖdzanie"},"PRIVILEGE:PURCHASE_ORDERS:VIEW":function(){return"Zam√≥wienia: przeglƒÖdanie"},"PRIVILEGE:PURCHASE_ORDERS:MANAGE":function(){return"Zam√≥wienia: zarzƒÖdzanie"},"PRIVILEGE:FACTORY_LAYOUT:MANAGE":function(){return"Monitoring: zarzƒÖdzanie"},"select2:placeholder":function(){return"Szukaj po nazwisku lub nr kadrowym..."},"select2:users:system":function(){return"System"}}}),define("app/users/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","./User","i18n!app/nls/users"],function(e,t,n,r,i){var o=n.auth("USERS:VIEW"),a=n.auth("USERS:MANAGE");e.map("/users",o,function(e){t.loadPage(["app/users/pages/UserListPage"],function(t){return new t({rql:e.rql})})}),e.map("/users/:id",function(e,t,r){e.params.id===n.data._id?r():o(e,t,r)},function(e){t.loadPage(["app/core/pages/DetailsPage","app/users/views/UserDetailsView"],function(t,n){return new t({DetailsView:n,model:new i({_id:e.params.id})})})}),e.map("/users;add",a,function(){t.loadPage(["app/core/pages/AddFormPage","app/users/views/UserFormView"],function(e,t){return new e({FormView:t,model:new i})})}),e.map("/users/:id;edit",a,function(e){t.loadPage(["app/core/pages/EditFormPage","app/users/views/UserFormView"],function(t,n){return new t({FormView:n,model:new i({_id:e.params.id})})})}),e.map("/users/:id;delete",a,r.bind(null,i))}),define("app/nls/vis",["app/nls/locale/en"],function(e){return{root:{"BREADCRUMBS:structure":function(){return"Org Unit structure"}},pl:!0}}),define("app/nls/pl/vis",["app/nls/locale/pl"],function(e){return{"BREADCRUMBS:structure":function(){return"Wizualizacja struktury organizacyjnej"}}}),define("app/vis/routes",["../router","../viewport","i18n!app/nls/vis"],function(e,t){e.map("/vis/structure",t.loadPage.bind(t,"app/vis/pages/StructureVisPage"))}),define("app/nls/workCenters",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"WorkCenters"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the WorkCenters :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the WorkCenter :("
},"MSG:DELETED":function(e){return"WorkCenter <em>"+t.v(e,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add WorkCenter"},"PAGE_ACTION:edit":function(){return"Edit WorkCenter"},"PAGE_ACTION:delete":function(){return"Delete WorkCenter"},"PANEL:TITLE:details":function(){return"WorkCenter's details"},"PANEL:TITLE:addForm":function(){return"Add WorkCenter form"},"PANEL:TITLE:editForm":function(){return"Edit WorkCenter form"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:description":function(){return"Label"},"PROPERTY:orgUnitPath":function(){return"MRP Controller/Production flow"},"PROPERTY:deactivatedAt":function(){return"Deactivated at"},"FORM:ACTION:add":function(){return"Add WorkCenter"},"FORM:ACTION:edit":function(){return"Edit WorkCenter"},"FORM:ERROR:addFailure":function(){return"Failed to add the new WorkCenter :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the WorkCenter :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"WorkCenter deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete WorkCenter"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the chosen WorkCenter?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Are you sure you want to delete the <em>"+t.v(e,"label")+"</em> WorkCenter?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the WorkCenter :-("}},pl:!0}}),define("app/nls/pl/workCenters",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"WorkCentra"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie WorkCentr√≥w nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie WorkCenter nie powiod≈Ço siƒô :("},"MSG:DELETED":function(e){return"WorkCenter <em>"+t.v(e,"label")+"</em> zosta≈Ço usuniƒôte."},"PAGE_ACTION:add":function(){return"Dodaj WorkCenter"},"PAGE_ACTION:edit":function(){return"Edytuj WorkCenter"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ WorkCenter"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy WorkCenter"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania WorkCenter"},"PANEL:TITLE:editForm":function(){return"Formularz edycji WorkCenter"},"PROPERTY:_id":function(){return"ID"},"PROPERTY:description":function(){return"Opis"},"PROPERTY:orgUnitPath":function(){return"Kontroler MRP/Przep≈Çyw"},"PROPERTY:deactivatedAt":function(){return"Data dezaktywacji"},"FORM:ACTION:add":function(){return"Dodaj WorkCenter"},"FORM:ACTION:edit":function(){return"Edytuj WorkCenter"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá WorkCenter :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá WorkCenter :-("},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia WorkCenter"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ WorkCenter"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrane WorkCenter?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá WorkCenter <em>"+t.v(e,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá WorkCenter :-("}}}),define("app/workCenters/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","../data/workCenters","./WorkCenter","i18n!app/nls/workCenters"],function(e,t,n,r,i,o){var a=n.auth("DICTIONARIES:VIEW"),s=n.auth("DICTIONARIES:MANAGE");e.map("/workCenters",a,function(){t.loadPage(["app/core/pages/ListPage","app/workCenters/views/WorkCenterListView"],function(e,t){return new e({ListView:t,collection:i})})}),e.map("/workCenters/:id",function(e){t.loadPage(["app/workCenters/pages/WorkCenterDetailsPage"],function(t){return new t({model:new o({_id:e.params.id})})})}),e.map("/workCenters;add",s,function(){t.loadPage(["app/core/pages/AddFormPage","app/workCenters/views/WorkCenterFormView"],function(e,t){return new e({FormView:t,model:new o})})}),e.map("/workCenters/:id;edit",s,function(e){t.loadPage(["app/core/pages/EditFormPage","app/workCenters/views/WorkCenterFormView"],function(t,n){return new t({FormView:n,model:new o({_id:e.params.id})})})}),e.map("/workCenters/:id;delete",s,r.bind(null,o))}),define("app/nls/xiconf",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Xiconf results"},"BREADCRUMBS:details":function(){return"Result"},"MSG:LOADING_FAILURE":function(){return"Failed to load the programming results :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the programming result :("},"PANEL:TITLE:details:order":function(){return"Order details"},"PANEL:TITLE:details:entry":function(){return"Programming details"},"PAGE_ACTION:export":function(){return"Export results"},"PAGE_ACTION:download":function(){return"Download configuration"},"PAGE_ACTION:download:workflow":function(){return"Programmer configuration"},"PAGE_ACTION:download:feature":function(){return"Driver configuration"},"PROPERTY:srcId":function(){return"Installation ID"},"PROPERTY:srcTitle":function(){return"Installation title"},"PROPERTY:srcIp":function(){return"Installation IP"},"PROPERTY:srcUuid":function(){return"Installation key"},"PROPERTY:no":function(){return"Order no"},"PROPERTY:totalCounter":function(){return"Total programming attemps"},"PROPERTY:successCounter":function(){return"Successful programming attempts"},"PROPERTY:failureCounter":function(){return"Failed programming attempts"},"PROPERTY:order":function(){return"Order"},"PROPERTY:quantity":function(){return"Quantity"},"PROPERTY:counter":function(){return"Counter"},"PROPERTY:nc12":function(){return"12NC"},"PROPERTY:startedAt":function(){return"Started at"},"PROPERTY:finishedAt":function(){return"Finished at"},"PROPERTY:duration":function(){return"Duration"},"PROPERTY:log":function(){return"Log"},"PROPERTY:result":function(){return"Result"},"PROPERTY:errorCode":function(){return"Error"},"PROPERTY:exception":function(){return"Exception"},"PROPERTY:output":function(){return"Programmer output"},"PROPERTY:featureFile":function(){return"Driver configuration file"},"PROPERTY:featureFileName":function(){return"Driver configuration file name"},"PROPERTY:feature":function(){return"Driver configuration file contents"},"PROPERTY:workflowFile":function(){return"Programmer configuration file"},"PROPERTY:workflow":function(){return"Programmer configuration file contents"},"PROPERTY:programName":function(){return"Program name"},"filter:result:success":function(){return"Success"},"filter:result:failure":function(){return"Failure"},"filter:placeholder:srcId":function(){return"Any"},"filter:submit":function(){return"Filter results"},"step:pe":function(){return"Protective earth test"},"step:sol":function(){return"Fortimo Solar programming"},"step:fn":function(){return"Functional test"},"tab:log":function(){return"Programming log"},"tab:output":function(){return"Communication log"},"tab:workflow":function(){return"Programmer configuration"},"tab:feature":function(){return"Driver configuration"},"tab:program":function(){return"Program"},"metrics:title":function(){return"Measured values"},"metrics:u":function(){return"Voltage"},"metrics:uSet":function(){return"Set voltage"},"metrics:uGet":function(){return"Measured voltage"},"metrics:i":function(){return"Current"},"metrics:r":function(){return"Resistance"},"metrics:p":function(){return"Power"},"log:ORDER_CREATED":function(e){return"Starting a new order no <code>"+t.v(e,"orderNo")+"</code> (1/"+t.v(e,"quantity")+")..."},"log:ORDER_CONTINUED":function(e){return"Continuing an existing order no <code>"+t.v(e,"orderNo")+"</code> ("+t.v(e,"counter")+"/"+t.v(e,"quantity")+")..."},"log:PROGRAMMING_STARTED":function(e){return"Starting a programming of the 12NC <code>"+t.v(e,"nc12")+"</code>..."},"log:COUNTDOWN_STARTED":function(e){return"Counting down <code>"+t.v(e,"delay")+"</code> "+t.p(e,"delay",0,"en",{one:"second",other:"seconds"})+"..."},"log:READING_WORKFLOW_FILE":function(e){return"Reading contents of the programmer configuration file: <code>"+t.v(e,"workflowFile")+"</code>"},"log:WORKFLOW_FILE_READ":function(e){return"Read <code>"+t.v(e,"length")+"B</code> of the programmer configuration file."},"log:WRITING_WORKFLOW_FILE":function(e){return"Writing contents of the programmer configuratino file: <code>"+t.v(e,"workflowFile")+"</code> (<code>"+t.v(e,"workflowOptions")+"</code>)"},"log:WORKFLOW_FILE_WRITTEN":function(e){return"Written <code>"+t.v(e,"length")+"B</code> of the programmer configuration file."},"log:SEARCHING_FEATURE_FILE":function(e){return"Searching for a driver configuration file in path: <code>"+t.v(e,"featurePath")+"</code>"},"log:SEARCHING_FEATURE_FILE_FAILURE":function(e){return"Driver configuration file searching failed: <code>"+t.v(e,"error")+"</code>"},"log:SEARCHING_FEATURE_FILE_TIMEOUT":function(){return"Driver configuration file searching timed out."},"log:MISSING_FEATURE_FILE_1":function(){return"Driver configuration file was not found in the first path."},"log:MISSING_FEATURE_FILE_2":function(){return"Driver configuration file was not found in the backup path."},"log:DUPLICATE_FEATURE_FILE_1":function(e){return"Found "+t.v(e,"fileCount")+" driver configuration "+t.p(e,"fileCount",0,"en",{one:"file",other:"files"})+" for the specified 12NC in the first path."},"log:DUPLICATE_FEATURE_FILE_2":function(e){return"Found "+t.v(e,"fileCount")+" driver configuration "+t.p(e,"fileCount",0,"en",{one:"file",other:"files"})+" for the specified 12NC in the backup path."},"log:FEATURE_FILE_FOUND":function(e){return"Found the driver configuration file: <code>"+t.v(e,"featureFile")+"</code>"},"log:SKIPPING_FEATURE_FILE_2":function(){return"Skipping searching for the driver configuration file in the backup path..."},"log:CANCELLING":function(){return"Cancelling the programming..."},"log:PROGRAMMING_SUCCESS":function(e){return"Successfully finished the programming of the 12NC <code>"+t.v(e,"nc12")+"</code> in <code>"+t.v(e,"duration")+"</code>."},"log:PROGRAMMING_FAILURE":function(e){return"Finished the programming of the 12NC <code>"+t.v(e,"nc12")+"</code> in <code>"+t.v(e,"duration")+"</code> with an error: <code>"+t.v(e,"error")+"</code>"},"log:READING_FEATURE_FILE":function(){return"Reading contents of the driver configuration file..."},"log:READING_FEATURE_FILE_FAILURE":function(e){return"Reading contents of the driver configuration file failed: <code>"+t.v(e,"error")+"</code>"},"log:READING_FEATURE_FILE_TIMEOUT":function(){return"Reading contents of the driver configuration file timed out."},"log:FEATURE_FILE_READ":function(e){return"Read <code>"+t.v(e,"length")+"B</code> of the driver configuration file."},"log:STARTING_PROGRAMMER":function(e){return"Starting the programmer using the <code>"+t.s(e,"interface",{d:"USB2DALI",s:"SimpleSet¬Æ",z:"ZigBee",i:"IP",other:t.v(e,"interface")})+"</code> interface: <code>"+t.v(e,"programmerFile")+"</code>"},"log:SOL_STARTED":function(){return"Starting a Fortimo Solar programming..."},"log:SOL_PARSE_ERROR":function(e){return"Error during a parsing of the program file in line <code>"+t.v(e,"i")+"</code>: <code>"+t.v(e,"line")+"</code>"},"log:SOL_SEARCHING_COM":function(e){return"Searching for a serial port using matching the pattern: <code>"+t.v(e,"pattern")+"</code>..."},"log:SOL_OPENING_COM":function(e){return"Opening the <code>"+t.v(e,"comPort")+"</code> serial port..."},"log:SOL_EXECUTING_SET_COMMANDS":function(e){return"Executing "+t.p(e,"count",0,"en",{one:"<code>1</code> SET parameter value command",other:"<code>"+t.v(e,"count")+"</code> SET parameter value commands"})+"..."},"log:SOL_RESETTING":function(){return"Resetting the device..."},"log:SOL_EXECUTING_GET_COMMANDS":function(){return"Comparing the programmed parameter values..."},"log:SOL_INVALID_OPTION":function(e){return"Read parameter value of option <code>"+t.v(e,"option")+"</code> differs from the programmed value (expected <code>"+t.v(e,"expected")+"</code>; got <code>"+t.v(e,"actual")+"</code>)."},"log:LPT_STARTING":function(){return"(LPT) Waiting for a signal to start the programmer..."},"log:LPT_FINISHING":function(){return"(LPT) Setting the result value..."},"log:TESTING_STARTED":function(e){return"Starting <code>"+t.v(e,"program")+"</code> program..."},"log:TESTING_SEARCHING_COM":function(e){return"Searching for a serial port using matching the pattern: <code>"+t.v(e,"pattern")+"</code>..."},"log:TESTING_OPENING_COM":function(e){return"Opening the <code>"+t.v(e,"comPort")+"</code> serial port..."},"log:TESTING_SDP_SETUP":function(){return"Setting up the SDP..."},"log:TESTING_SDP_TEARDOWN":function(){return"Tearing down the SDP..."},"log:TESTING_PLC_SETUP":function(){return"Setting up the PLC..."},"log:TESTING_PLC_TEARDOWN":function(){return"Tearing down the PLC..."},"log:TESTING_EXECUTING_STEP":function(e){return t.s(e,"type",{pe:"Executing the protective earth test",sol:"Executing the Fortimo Solar programming",fn:"Executing the functional test",other:"Executing the <em>"+t.v(e,"type")+"</em> program step"})+"..."},"error:WORKFLOW_FILE_ERROR":function(){return"Error during the reading of the programmer configuration file contents."},"error:WORKFLOW_FILE_WRITE_ERROR":function(){return"Error during the writing of the programmer configuration file contents."},"error:FEATURE_FILE_ERROR":function(){return"Error during the reading of the driver configuration file contents."},"error:UNSET_WORKFLOW_FILE":function(){return"Path to the programmer configuration file was not set."},"error:UNSET_FEATURE_PATH_1":function(){return"First path to the driver configuration files was not set."},"error:UNSET_PROGRAMMER_FILE":function(){return"Path to the programmer executable file was not set."},"error:MISSING_WORKFLOW_FILE":function(){return"Programmer configuration file was not found."},"error:MISSING_FEATURE_FILE":function(){return"Driver configuration file was not found."},"error:DUPLICATE_FEATURE_FILE":function(){return"Detected multiple driver configuration files for the specified 12NC."},"error:CANCELLED":function(){return"Programming cancelled."},"error:READING_FEATURE_FILE_TIMEOUT":function(){return"Reading of the contents of the driver configuration file timed out."},"error:MISSING_PROGRAMMER_FILE":function(){return"Programmer executable file was not found."},"error:PROGRAMMER_FILE_ERROR":function(){return"Error during running of the programmer executable file."},"error:EXIT_CODE:-1":function(){return"MultiOneWorkflow (-1): general application failure."},"error:EXIT_CODE:1":function(){return"MultiOneWorkflow (1): user software key not activated."},"error:EXIT_CODE:4":function(){return"MultiOneWorkflow (4): verification failed."},"error:EXIT_CODE:5":function(){return"MultiOneWorkflow (5): The interface provided as argument to the command line is wrong."},"error:EXIT_CODE:9":function(){return"MultiOneWorkflow (9): workflow configuration file not found."},"error:EXIT_CODE:10":function(){return"MultiOneWorkflow (10): workflow configuration file not valid."},"error:EXIT_CODE:20":function(){return"MultiOneWorkflow (20): supported devices file not found."},"error:EXIT_CODE:21":function(){return"MultiOneWorkflow (21): supported devices file not valid."},"error:EXIT_CODE:101":function(){return"MultiOneWorkflow (101): there are no features to write."},"error:EXIT_CODE:102":function(){return"MultiOneWorkflow (102): writing failed."},"error:EXIT_CODE:150":function(){return"MultiOneWorkflow (150): resetting the short address of the device failed."},"error:EXIT_CODE:200":function(){return"MultiOneWorkflow (200): feature file not present."},"error:EXIT_CODE:201":function(){return"MultiOneWorkflow (201): invalid feature configuration file."},"error:EXIT_CODE:202":function(){return"MultiOneWorkflow (202): feature configuration file is null or empty."},"error:EXIT_CODE:203":function(){return"MultiOneWorkflow (203): feature configuration file contains duplicate features."},"error:EXIT_CODE:300":function(){return"MultiOneWorkflow (300): the device does not support all features from the feature configuration file."},"error:EXIT_CODE:301":function(){return"MultiOneWorkflow (301): the device is not of the model specified in the feature file."},"error:EXIT_CODE:400":function(){return"MultiOneWorkflow (400): writing traceability information failed."},"error:EXIT_CODE:500":function(){return"MultiOneWorkflow (500): no device found."},"error:EXIT_CODE:501":function(){return"MultiOneWorkflow (501): too many devices found."},"error:EXIT_CODE:502":function(){return"MultiOneWorkflow (502): unable to execute discover."},"error:EXIT_CODE:503":function(){return"MultiOneWorkflow (503): multiple devices share the same short address."},"error:EXIT_CODE:504":function(){return"MultiOneWorkflow (504): unsupported device detected."},"error:EXIT_CODE:600":function(){return"MultiOneWorkflow (600): no features to convert."},"error:EXIT_CODE:700":function(){return"MultiOneWorkflow (700): no interface connected."},"error:EXIT_CODE:800":function(){return"MultiOneWorkflow (800): convert feature data is not possible."},"error:EXIT_CODE:900":function(){return"MultiOneWorkflow (900): the provided scheduler file is invalid and could not be loaded."},"error:SOL_PARSE_ERROR":function(){return"SOL: Error during parsing of the program file."},"error:SOL_NO_COMMANDS":function(){return"SOL: No SET commands were found in the program file."},"error:SOL_SEARCHING_COM_FAILURE":function(){return"SOL: Error while searching for a serial port."},"error:SOL_COM_NOT_FOUND":function(){return"SOL: Serial port was not found."},"error:SOL_OPENING_COM_FAILURE":function(){return"SOL: Error while opening the serial port."},"error:SOL_SERIAL_PORT_FAILURE":function(){return"SOL: Serial port error."},"error:SOL_NO_CONNECTION":function(){return"SOL: No response from the device. Check the serial port connection."},"error:SOL_INVALID_OPTION":function(){return"SOL: Read value differs from the programmed one."},"error:LPT_FILE_ERROR":function(){return"Error during LPT communication."},"error:LPT_START_TIMEOUT":function(){return"Waiting for a signal to start the programmer timed out."},"error:TESTING_DISABLED":function(){return"TEST: Testing option is disabled."},"error:TESTING_NOT_SOL":function(){return"TEST: The found driver configuration has an invalid type."},"error:TESTING_SEARCHING_COM_FAILURE":function(){return"TEST: Error while searching for a serial port."},"error:TESTING_COM_NOT_FOUND":function(){return"TEST: Serial port was not found."},"error:TESTING_OPENING_COM_FAILURE":function(){return"TEST: Error while opening the serial port."},"error:TESTING_SERIAL_PORT_FAILURE":function(){return"TEST: Serial port error."},"error:TESTING_PLC_FAILURE":function(){return"TEST: PLC error."},"error:TESTING_PLC_NO_CONNECTION":function(){return"TEST: Failed to connect to the PLC. Check the Modbus settings."},"error:TESTING_SDP_TIMEOUT":function(){return"TEST: Waiting for a response from the SDP timed out."},"error:TESTING_SDP_INVALID_RESPONSE":function(){return"TEST: Received an invalid response from the SDP."},"error:TESTING_MAX_RESISTANCE":function(){return"TEST: Exceeded the maximum resistance value."},"error:TESTING_MIN_POWER":function(){return"TEST: Exceeded the minimum power value."},"error:TESTING_MAX_POWER":function(){return"TEST: Exceeded the maximum power value."}},pl:!0}}),define("app/nls/pl/xiconf",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Wyniki Xiconf"},"BREADCRUMBS:details":function(){return"Wynik"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie wynik√≥w programowania nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie danych wyniku programowania nie powiod≈Ço siƒô :("},"PANEL:TITLE:details:order":function(){return"Szczeg√≥≈Çy zlecenia"},"PANEL:TITLE:details:entry":function(){return"Szczeg√≥≈Çy programowania"},"PAGE_ACTION:export":function(){return"Eksportuj wyniki"},"PAGE_ACTION:download":function(){return"Pobierz konfiguracjƒô"},"PAGE_ACTION:download:workflow":function(){return"Konfiguracja programatora"},"PAGE_ACTION:download:feature":function(){return"Konfiguracja drivera"},"PROPERTY:srcId":function(){return"ID instalacji"},"PROPERTY:srcTitle":function(){return"Tytu≈Ç instalacji"},"PROPERTY:srcIp":function(){return"IP instalacji"},"PROPERTY:srcUuid":function(){return"Klucz instalacji"},"PROPERTY:no":function(){return"Nr zlecenia"},"PROPERTY:totalCounter":function(){return"Ca≈Çkowita ilo≈õƒá programowa≈Ñ"},"PROPERTY:successCounter":function(){return"Ilo≈õƒá pomy≈õlnych programowa≈Ñ"},"PROPERTY:failureCounter":function(){return"Ilo≈õƒá b≈Çƒôdnych programowa≈Ñ"},"PROPERTY:order":function(){return"Zlecenie"},"PROPERTY:quantity":function(){return"Ilo≈õƒá"},"PROPERTY:counter":function(){return"Licznik"},"PROPERTY:nc12":function(){return"12NC"},"PROPERTY:startedAt":function(){return"Czas rozpoczƒôcia"},"PROPERTY:finishedAt":function(){return"Czas zako≈Ñczenia"},"PROPERTY:duration":function(){return"Czas trwania"},"PROPERTY:log":function(){return"Log"},"PROPERTY:result":function(){return"Wynik"},"PROPERTY:errorCode":function(){return"B≈ÇƒÖd"},"PROPERTY:exception":function(){return"Szczeg√≥≈Çy b≈Çƒôdu"},"PROPERTY:output":function(){return"Odpowied≈∫ programatora"},"PROPERTY:featureFile":function(){return"Plik konfiguracyjny drivera"},"PROPERTY:featureFileName":function(){return"Nazwa pliku konfiguracyjnego drivera"},"PROPERTY:feature":function(){return"Zawarto≈õƒá pliku konfiguracyjego drivera"},"PROPERTY:workflowFile":function(){return"Plik konfiguracyjny programatora"},"PROPERTY:workflow":function(){return"Zawarto≈õƒá pliku konfiguracyjnego programatora"},"PROPERTY:programName":function(){return"Nazwa programu"},"filter:result:success":function(){return"Sukces"},"filter:result:failure":function(){return"Pora≈ºka"},"filter:placeholder:srcId":function(){return"Dowolne"},"filter:submit":function(){return"Filtruj wyniki"},"step:pe":function(){return"Test obwodu ochronnego"},"step:sol":function(){return"Programowanie Fortimo Solar"},"step:fn":function(){return"Test funkcjonalny"},"tab:log":function(){return"Przebieg programowania"},"tab:output":function(){return"Przebieg komunikacji"},"tab:workflow":function(){return"Konfiguracja programatora"},"tab:feature":function(){return"Konfiguracja drivera"},"tab:program":function(){return"Program"},"metrics:title":function(){return"Zmierzone warto≈õci"},"metrics:u":function(){return"Napiƒôcie"},"metrics:uSet":function(){return"Napiƒôcie ustawione"},"metrics:uGet":function(){return"Napiƒôcie zmierzone"},"metrics:i":function(){return"Natƒô≈ºenie"},"metrics:r":function(){return"Rezystancja"},"metrics:p":function(){return"Moc"},"log:ORDER_CREATED":function(e){return"Rozpoczynanie zlecenia nr <code>"+t.v(e,"orderNo")+"</code> (1/"+t.v(e,"quantity")+")..."},"log:ORDER_CONTINUED":function(e){return"Kontynuacja zlecenia nr <code>"+t.v(e,"orderNo")+"</code> ("+t.v(e,"counter")+"/"+t.v(e,"quantity")+")..."},"log:PROGRAMMING_STARTED":function(e){return"Rozpoczynanie programowania 12NC <code>"+t.v(e,"nc12")+"</code>..."},"log:COUNTDOWN_STARTED":function(e){return"Odliczanie <code>"+t.v(e,"delay")+"</code> "+t.p(e,"delay",0,"pl",{one:"sekundy",other:"sekund"})+"..."},"log:READING_WORKFLOW_FILE":function(e){return"Odczytywanie pliku konfiguracyjnego programatora: <code>"+t.v(e,"workflowFile")+"</code>"},"log:WORKFLOW_FILE_READ":function(e){return"Odczytano <code>"+t.v(e,"length")+"B</code> pliku konfiguracyjnego programatora."},"log:WRITING_WORKFLOW_FILE":function(e){return"Zapisywanie pliku konfiguracyjnego programatora: <code>"+t.v(e,"workflowFile")+"</code> (<code>"+t.v(e,"workflowOptions")+"</code>)"},"log:WORKFLOW_FILE_WRITTEN":function(e){return"Zapisano <code>"+t.v(e,"length")+"B</code> pliku konfiguracyjnego programatora."},"log:SEARCHING_FEATURE_FILE":function(e){return"Wyszukiwanie pliku konfiguracyjnego drivera w ≈õcie≈ºce: <code>"+t.v(e,"featurePath")+"</code>"},"log:SEARCHING_FEATURE_FILE_FAILURE":function(e){return"Nieudane wyszukiwanie pliku: <code>"+t.v(e,"error")+"</code>"},"log:SEARCHING_FEATURE_FILE_TIMEOUT":function(){return"Up≈ÇynƒÖ≈Ç limit czasu wyszukiwania pliku konfiguracyjnego drivera."},"log:MISSING_FEATURE_FILE_1":function(){return"Nie znaleziono pliku konfiguracyjnego drivera w pierwszej ≈õcie≈ºce."},"log:MISSING_FEATURE_FILE_2":function(){return"Nie znaleziono pliku konfiguracyjnego drivera w ≈õcie≈ºce zapasowej."},"log:DUPLICATE_FEATURE_FILE_1":function(e){return"W pierwszej ≈õcie≈ºce wykryto "+t.v(e,"fileCount")+" "+t.p(e,"fileCount",0,"pl",{one:"plik konfiguracyjny drivera",few:"pliki konfiguracje driver√≥w",other:"plik√≥w konfiguracyjnych driver√≥w"})+" dla danego kodu 12NC."},"log:DUPLICATE_FEATURE_FILE_2":function(e){return"W ≈õcie≈ºce zapasowej wykryto "+t.v(e,"fileCount")+" "+t.p(e,"fileCount",0,"pl",{one:"plik konfiguracyjny drivera",few:"pliki konfiguracje driver√≥w",other:"plik√≥w konfiguracyjnych driver√≥w"})+" dla danego kodu 12NC."},"log:FEATURE_FILE_FOUND":function(e){return"Znaleziono plik konfiguracyjny drivera: <code>"+t.v(e,"featureFile")+"</code>"},"log:SKIPPING_FEATURE_FILE_2":function(){return"Pomijanie wyszukiwania pliku konfiguracyjnego drivera w ≈õcie≈ºce zapasowej..."},"log:CANCELLING":function(){return"Anulowanie programowania..."},"log:PROGRAMMING_SUCCESS":function(e){return"Pomy≈õlnie uko≈Ñczono programowanie 12NC <code>"+t.v(e,"nc12")+"</code> w ciƒÖgu <code>"+t.v(e,"duration")+"</code>."},"log:PROGRAMMING_FAILURE":function(e){return"Zako≈Ñczono programowanie 12NC <code>"+t.v(e,"nc12")+"</code> w ciƒÖgu <code>"+t.v(e,"duration")+"</code> z powodu b≈Çƒôdu: <code>"+t.v(e,"error")+"</code>"},"log:READING_FEATURE_FILE":function(){return"Odczytywanie pliku konfiguracyjnego drivera..."},"log:READING_FEATURE_FILE_FAILURE":function(e){return"B≈ÇƒÖd podczas odczytywania pliku: <code>"+t.v(e,"error")+"</code>"},"log:READING_FEATURE_FILE_TIMEOUT":function(){return"Up≈ÇynƒÖ≈Ç limit czasu odczytywania pliku."},"log:FEATURE_FILE_READ":function(e){return"Odczytano <code>"+t.v(e,"length")+"B</code> pliku konfiguracyjnego drivera."},"log:STARTING_PROGRAMMER":function(e){return"Uruchamianie programatora przez interfejs <code>"+t.s(e,"interface",{d:"USB2DALI",s:"SimpleSet¬Æ",z:"ZigBee",i:"IP",other:t.v(e,"interface")})+"</code>: <code>"+t.v(e,"programmerFile")+"</code>"},"log:SOL_STARTED":function(){return"Rozpoczynanie programowania Fortimo Solar..."},"log:SOL_PARSE_ERROR":function(e){return"B≈ÇƒÖd parsowania pliku programu w linii <code>"+t.v(e,"i")+"</code>: <code>"+t.v(e,"line")+"</code>"},"log:SOL_SEARCHING_COM":function(e){return"Wyszukiwanie portu szeregowego wg wzrorca <code>"+t.v(e,"pattern")+"</code>..."},"log:SOL_OPENING_COM":function(e){return"Otwieranie portu szeregowego <code>"+t.v(e,"comPort")+"</code>..."},"log:SOL_EXECUTING_SET_COMMANDS":function(e){return"Wykonywanie "+t.p(e,"count",0,"pl",{one:"<code>1</code> komendy ustawiajƒÖcej",other:"<code>"+t.v(e,"count")+"</code> komend ustawiajƒÖcych"})+" warto≈õci parametr√≥w..."},"log:SOL_RESETTING":function(){return"Resetowanie urzƒÖdzenia..."},"log:SOL_EXECUTING_GET_COMMANDS":function(){return"Por√≥wnywanie zaprogramowanych warto≈õci parametr√≥w..."},"log:SOL_INVALID_OPTION":function(e){return"Odczytana warto≈õƒá parametru <code>"+t.v(e,"option")+"</code> r√≥≈ºni siƒô od warto≈õci zaprogramowanej (oczekiwano <code>"+t.v(e,"expected")+"</code>; otrzymano <code>"+t.v(e,"actual")+"</code>)."},"log:LPT_STARTING":function(){return"(LPT) Oczekiwanie na sygna≈Ç uruchomienia programatora..."},"log:LPT_FINISHING":function(){return"(LPT) Ustawianie warto≈õci wynikowej..."},"log:TESTING_STARTED":function(e){return"Rozpoczynanie programu <code>"+t.v(e,"program")+"</code>..."},"log:TESTING_SEARCHING_COM":function(e){return"Wyszukiwanie portu szeregowego wg wzrorca <code>"+t.v(e,"pattern")+"</code>..."},"log:TESTING_OPENING_COM":function(e){return"Otwieranie portu szeregowego <code>"+t.v(e,"comPort")+"</code>..."},"log:TESTING_SDP_SETUP":function(){return"Przygotowywanie zasilacza..."},"log:TESTING_SDP_TEARDOWN":function(){return"Wy≈ÇƒÖczanie zasilacza..."},"log:TESTING_PLC_SETUP":function(){return"Przygotowywanie sterownika..."},"log:TESTING_PLC_TEARDOWN":function(){return"Wy≈ÇƒÖczanie sterownika..."},"log:TESTING_EXECUTING_STEP":function(e){return t.s(e,"type",{pe:"Wykonywanie testu obwodu ochronnego",sol:"Programowanie Fortimo Solar",fn:"Wykonywanie testu funkcjonalnego",other:"Wykonywanie kroku programu <em>"+t.v(e,"type")+"</em>"})+"..."},"error:WORKFLOW_FILE_ERROR":function(){return"B≈ÇƒÖd podczas odczytywania pliku konfiguracyjnego programatora."},"error:WORKFLOW_FILE_WRITE_ERROR":function(){return"B≈ÇƒÖd podczas zapisywania pliku konfiguracyjnego programatora."},"error:FEATURE_FILE_ERROR":function(){return"B≈ÇƒÖd podczas odczytywania pliku konfiguracyjnego drivera."},"error:UNSET_WORKFLOW_FILE":function(){return"Nie ustawiono ≈õcie≈ºki do pliku konfiguracyjnego programatora."},"error:UNSET_FEATURE_PATH_1":function(){return"Nie ustawiono pierwszej ≈õcie≈ºki do plik√≥w konfiguracyjnych driver√≥w."},"error:UNSET_PROGRAMMER_FILE":function(){return"Nie ustawiono ≈õcie≈ºki do pliku wykonywalnego programatora."},"error:MISSING_WORKFLOW_FILE":function(){return"Nie znaleziono pliku konfiguracyjnego programatora."},"error:MISSING_FEATURE_FILE":function(){return"Nie znaleziono pliku konfiguracyjnego drivera."},"error:DUPLICATE_FEATURE_FILE":function(){return"Wykryto kilka plik√≥w konfiguracyjnych driver√≥w dla danego kodu 12NC."},"error:CANCELLED":function(){return"Programowanie anulowano."},"error:READING_FEATURE_FILE_TIMEOUT":function(){return"Up≈Çyniƒôcie limitu czasu odczytywania pliku konfiguracyjnego drivera."},"error:MISSING_PROGRAMMER_FILE":function(){return"Nie znaleziono pliku wykonywalnego programatora."},"error:PROGRAMMER_FILE_ERROR":function(){return"B≈ÇƒÖd podczas uruchamiania pliku wykonywalnego programatora."},"error:EXIT_CODE:-1":function(){return"MultiOneWorkflow (-1): b≈ÇƒÖd aplikacji."},"error:EXIT_CODE:1":function(){return"MultiOneWorkflow (1): klucz oprogramowania nie aktywowany."},"error:EXIT_CODE:4":function(){return"MultiOneWorkflow (4): b≈ÇƒÖd weryfikacji."},"error:EXIT_CODE:5":function(){return"MultiOneWorkflow (5): interfejs podany jako argument do pliku wykonywalnego programatora jest nieprawid≈Çowy."},"error:EXIT_CODE:9":function(){return"MultiOneWorkflow (9): nie znaleziono pliku konfiguracyjnego programatora."},"error:EXIT_CODE:10":function(){return"MultiOneWorkflow (10): nieprawid≈Çowy plik konfiguracyjny programatora."},"error:EXIT_CODE:20":function(){return"MultiOneWorkflow (20): nie znaleziono pliku wspieranych urzƒÖdze≈Ñ."
},"error:EXIT_CODE:21":function(){return"MultiOneWorkflow (21): nieprawid≈Çowy plik wspieranych urzƒÖdze≈Ñ."},"error:EXIT_CODE:101":function(){return"MultiOneWorkflow (101): brak opcji drivera do zapisu."},"error:EXIT_CODE:102":function(){return"MultiOneWorkflow (102): zapisywanie opcji drivera nie powiod≈Ço siƒô."},"error:EXIT_CODE:150":function(){return"MultiOneWorkflow (150): resetowanie kr√≥tkiego adresu urzƒÖdzenia nie powiod≈Ço siƒô."},"error:EXIT_CODE:200":function(){return"MultiOneWorkflow (200): nie znaleziono pliku konfiguracyjnego drivera."},"error:EXIT_CODE:201":function(){return"MultiOneWorkflow (201): nieprawid≈Çowy plik konfiguracyjny drivera."},"error:EXIT_CODE:202":function(){return"MultiOneWorkflow (202): pusty plik konfiguracyjny drivera."},"error:EXIT_CODE:203":function(){return"MultiOneWorkflow (203): wykryto zduplikowane opcje drivera."},"error:EXIT_CODE:300":function(){return"MultiOneWorkflow (300): urzƒÖdzenie nie obs≈Çuguje wszystkich opcji z pliku konfiguracyjnego."},"error:EXIT_CODE:301":function(){return"MultiOneWorkflow (301): model urzƒÖdzenia r√≥≈ºni siƒô od tego w pliku konfiguracyjnym drivera."},"error:EXIT_CODE:400":function(){return"MultiOneWorkflow (400): zapisywanie informacji identyfikacyjnych nie powiod≈Ço siƒô."},"error:EXIT_CODE:500":function(){return"MultiOneWorkflow (500): nie znaleziono urzƒÖdzenia."},"error:EXIT_CODE:501":function(){return"MultiOneWorkflow (501): znaleziono za du≈ºo urzƒÖdze≈Ñ."},"error:EXIT_CODE:502":function(){return"MultiOneWorkflow (502): nie mo≈ºna wykonaƒá wyszukiwania urzƒÖdze≈Ñ."},"error:EXIT_CODE:503":function(){return"MultiOneWorkflow (503): kilka urzƒÖdze≈Ñ ma taki sam kr√≥tki adres."},"error:EXIT_CODE:504":function(){return"MultiOneWorkflow (504): wykryto niewspierane urzƒÖdzenie."},"error:EXIT_CODE:600":function(){return"MultiOneWorkflow (600): brak opcji drivera do konwersji."},"error:EXIT_CODE:700":function(){return"MultiOneWorkflow (700): nie pod≈ÇƒÖczono interfejsu."},"error:EXIT_CODE:800":function(){return"MultiOneWorkflow (800): niemo≈ºliwa konwersja danych opcji drivera."},"error:EXIT_CODE:900":function(){return"MultiOneWorkflow (900): dany plik z harmonogramem jest nieprawid≈Çowy i nie uda≈Ço siƒô go wczytaƒá."},"error:SOL_PARSE_ERROR":function(){return"SOL: B≈ÇƒÖd podczas parsowania pliku programu."},"error:SOL_NO_COMMANDS":function(){return"SOL: Brak komend ustawiajƒÖcych warto≈õci parametr√≥w."},"error:SOL_SEARCHING_COM_FAILURE":function(){return"SOL: B≈ÇƒÖd podczas wyszukiwania portu szeregowego."},"error:SOL_COM_NOT_FOUND":function(){return"SOL: Nie znaleziono portu szeregowego."},"error:SOL_OPENING_COM_FAILURE":function(){return"SOL: B≈ÇƒÖd podczas otwierania portu szeregowego."},"error:SOL_SERIAL_PORT_FAILURE":function(){return"SOL: B≈ÇƒÖd portu szeregowego."},"error:SOL_INVALID_OPTION":function(){return"SOL: Odczytana warto≈õƒá r√≥≈ºni siƒô od warto≈õci zaprogramowanej."},"error:SOL_NO_CONNECTION":function(){return"SOL: Brak odpowiedzi od urzƒÖdzenia. Sprawd≈∫ po≈ÇƒÖczenie portu szeregowego."},"error:SOL_FEATURE_DISABLED":function(){return"Ustawiona licencja nie ma opcji programowania Fortimo Solar."},"error:LPT_FILE_ERROR":function(){return"B≈ÇƒÖd podczas komunikacji LPT."},"error:LPT_START_TIMEOUT":function(){return"Up≈Çyniƒôcie limitu czasu oczekiwania na sygna≈Ç uruchomienia programatora."},"error:TESTING_DISABLED":function(){return"TEST: Opcja testowania jest wy≈ÇƒÖczona."},"error:TESTING_NOT_SOL":function(){return"TEST: Znaleziono konfiguracjƒô drivera nieprawid≈Çowego typu."},"error:TESTING_SEARCHING_COM_FAILURE":function(){return"TEST: B≈ÇƒÖd podczas wyszukiwania portu szeregowego."},"error:TESTING_COM_NOT_FOUND":function(){return"TEST: Nie znaleziono portu szeregowego."},"error:TESTING_OPENING_COM_FAILURE":function(){return"TEST: B≈ÇƒÖd podczas otwierania portu szeregowego."},"error:TESTING_SERIAL_PORT_FAILURE":function(){return"TEST: B≈ÇƒÖd portu szeregowego."},"error:TESTING_PLC_FAILURE":function(){return"TEST: B≈ÇƒÖd PLC."},"error:TESTING_PLC_NO_CONNECTION":function(){return"TEST: Nie uda≈Ço siƒô po≈ÇƒÖczyƒá ze sterownikiem. Sprawd≈∫ ustawienia Modbus."},"error:TESTING_SDP_TIMEOUT":function(){return"TEST: Up≈Çyniƒôcie limitu czasu oczekiwania na odpowied≈∫ testera."},"error:TESTING_SDP_INVALID_RESPONSE":function(){return"TEST: Otrzymano nieprawid≈ÇowƒÖ odpowied≈∫ od testera."},"error:TESTING_MAX_RESISTANCE":function(){return"TEST: Przekroczono maksymalnƒÖ warto≈õƒá rezystancji."},"error:TESTING_MIN_POWER":function(){return"TEST: Przekroczono minimalnƒÖ warto≈õƒá mocy."},"error:TESTING_MAX_POWER":function(){return"TEST: Przekroczono maksymalnƒÖ warto≈õƒá mocy."}}}),define("app/xiconf/routes",["../router","../viewport","../user","i18n!app/nls/xiconf"],function(e,t,n){var r=n.auth("XICONF:VIEW");e.map("/xiconf/results",r,function(e){t.loadPage(["app/xiconf/pages/XiconfResultListPage"],function(t){return new t({rql:e.rql})})}),e.map("/xiconf/results/:id",r,function(e){t.loadPage(["app/xiconf/pages/XiconfResultDetailsPage"],function(t){return new t({modelId:e.params.id})})})}),define("app/xiconfPrograms/XiconfProgram",["../time","../core/Model"],function(e,t){return t.extend({urlRoot:"/xiconfPrograms",clientUrlRoot:"#xiconfPrograms",topicPrefix:"xiconfPrograms",nlsDomain:"xiconfPrograms",labelAttribute:"name",defaults:function(){return{type:"t24vdc",name:"",steps:[{type:"pe",enabled:1,startTime:2,duration:3,voltage:10,resistanceMax:.1},{type:"sol",enabled:1,voltage:12},{type:"fn",enabled:1,startTime:2,duration:28,voltage:12,powerReq:100,powerRel:5,powerMin:95,powerMax:105}]}},serialize:function(){var t=this.toJSON();return t.createdAt=e.format(t.createdAt,"LLLL"),t.updatedAt=e.format(t.updatedAt,"LLLL"),t}})}),define("app/xiconfPrograms/XiconfProgramCollection",["../core/Collection","./XiconfProgram"],function(e,t){return e.extend({model:t,rqlQuery:"select(name,updatedAt)&limit(15)&sort(name)"})}),define("app/nls/xiconfPrograms",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"Programs"},"BREADCRUMBS:addForm":function(){return"Adding"},"BREADCRUMBS:editForm":function(){return"Editing"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Deleting"},"MSG:LOADING_FAILURE":function(){return"Failed to load the programs :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Filed to load the program :("},"MSG:DELETED":function(e){return"Program <em>"+t.v(e,"label")+"</em> was deleted."},"PAGE_ACTION:add":function(){return"Add program"},"PAGE_ACTION:edit":function(){return"Edit program"},"PAGE_ACTION:delete":function(){return"Delete program"},"PAGE_ACTION:sync":function(){return"Synchronize programs"},"PANEL:TITLE:details":function(){return"Program details"},"PANEL:TITLE:addForm":function(){return"Program add form"},"PANEL:TITLE:editForm":function(){return"Program edit form"},"step:pe":function(){return"Protective earth test"},"step:sol":function(){return"Fortimo Solar programming"},"step:fn":function(){return"Functional test"},"filter:submit":function(){return"Filter programs"},"PROPERTY:name":function(){return"Name"},"PROPERTY:createdAt":function(){return"Created at"},"PROPERTY:updatedAt":function(){return"Updated at"},"PROPERTY:startTime":function(){return"Start time"},"PROPERTY:duration":function(){return"Measurement time"},"PROPERTY:totalTime":function(){return"Total test time"},"PROPERTY:voltage":function(){return"Voltage [V]"},"PROPERTY:resistance:max":function(){return"Maximum resistance [Œ©]"},"PROPERTY:power":function(){return"Power [W]"},"PROPERTY:power:req":function(){return"Required power [W]"},"PROPERTY:power:rel":function(){return"Tolerance [%]"},"PROPERTY:power:min":function(){return"Minimum power [W]"},"PROPERTY:power:max":function(){return"Maximum power [W]"},"FORM:ACTION:add":function(){return"Add program"},"FORM:ACTION:edit":function(){return"Edit program"},"FORM:ERROR:addFailure":function(){return"Failed to add the program :-("},"FORM:ERROR:editFailure":function(){return"Failed to edit the program :-("},"FORM:ERROR:minDuration":function(){return"Value cannot be lower than 1s."},"FORM:ERROR:requiredStep":function(){return"Select at least one step."},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Program deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(){return"Delete program"},"ACTION_FORM:MESSAGE:delete":function(){return"Are you sure you want to delete the selected program?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Are you sure you want to delete the <em>"+t.v(e,"label")+"</em> program?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Failed to delete the program :-("}},pl:!0}}),define("app/nls/pl/xiconfPrograms",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Programy Xiconf"},"BREADCRUMBS:addForm":function(){return"Dodawanie"},"BREADCRUMBS:editForm":function(){return"Edycja"},"BREADCRUMBS:ACTION_FORM:delete":function(){return"Usuwanie"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie program√≥w nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie programu nie powiod≈Ço siƒô :("},"MSG:DELETED":function(e){return"Program <em>"+t.v(e,"label")+"</em> zosta≈Ç usuniƒôty."},"PAGE_ACTION:add":function(){return"Dodaj program"},"PAGE_ACTION:edit":function(){return"Edytuj program"},"PAGE_ACTION:delete":function(){return"Usu≈Ñ program"},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy programu"},"PANEL:TITLE:addForm":function(){return"Formularz dodawania programu"},"PANEL:TITLE:editForm":function(){return"Formularz edycji programu"},"step:pe":function(){return"Test obwodu ochronnego"},"step:sol":function(){return"Programowanie Fortimo Solar"},"step:fn":function(){return"Test funkcjonalny"},"filter:submit":function(){return"Filtruj programy"},"PROPERTY:name":function(){return"Nazwa"},"PROPERTY:createdAt":function(){return"Data i czas dodania"},"PROPERTY:updatedAt":function(){return"Data i czas modyfikacji"},"PROPERTY:startTime":function(){return"Czas rozruchu"},"PROPERTY:duration":function(){return"Czas pomiaru"},"PROPERTY:totalTime":function(){return"Ca≈Çkowity czas testu"},"PROPERTY:voltage":function(){return"Napiƒôcie [V]"},"PROPERTY:resistance:max":function(){return"Maksymalna rezystancja [Œ©]"},"PROPERTY:power":function(){return"Moc [W]"},"PROPERTY:power:req":function(){return"Wymagana moc [W]"},"PROPERTY:power:rel":function(){return"Tolerancja [%]"},"PROPERTY:power:min":function(){return"Minimalna moc [W]"},"PROPERTY:power:max":function(){return"Maksymalna moc [W]"},"FORM:ACTION:add":function(){return"Dodaj program"},"FORM:ACTION:edit":function(){return"Edytuj program"},"FORM:ERROR:addFailure":function(){return"Nie uda≈Ço siƒô dodaƒá programu :-("},"FORM:ERROR:editFailure":function(){return"Nie uda≈Ço siƒô zmodyfikowaƒá programu :-("},"FORM:ERROR:minDuration":function(){return"Warto≈õƒá nie mo≈ºe byƒá mniejsza ni≈º 1s."},"FORM:ERROR:requiredStep":function(){return"Wybierz przynajmniej jeden krok."},"ACTION_FORM:DIALOG_TITLE:delete":function(){return"Potwierdzenie usuniƒôcia programu"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ program"},"ACTION_FORM:MESSAGE:delete":function(){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá wybrany program?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Czy na pewno chcesz bezpowrotnie usunƒÖƒá program <em>"+t.v(e,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(){return"Nie uda≈Ço siƒô usunƒÖƒá programu :-("}}}),define("app/xiconfPrograms/routes",["../router","../viewport","../user","../core/util/showDeleteFormPage","./XiconfProgram","./XiconfProgramCollection","i18n!app/nls/xiconfPrograms"],function(e,t,n,r,i,o){var a=n.auth("XICONF:VIEW"),s=n.auth("XICONF:MANAGE");e.map("/xiconfPrograms",a,function(e){t.loadPage(["app/xiconfPrograms/pages/XiconfProgramListPage"],function(t){return new t({collection:new o(null,{rqlQuery:e.rql})})})}),e.map("/xiconfPrograms/:id",a,function(e){t.loadPage(["app/core/pages/DetailsPage","app/xiconfPrograms/views/XiconfProgramDetailsView"],function(t,n){return new t({DetailsView:n,model:new i({_id:e.params.id})})})}),e.map("/xiconfPrograms;add",s,function(){t.loadPage(["app/core/pages/AddFormPage","app/xiconfPrograms/views/XiconfProgramFormView"],function(e,t){return new e({FormView:t,model:new i})})}),e.map("/xiconfPrograms/:id;edit",s,function(e){t.loadPage(["app/core/pages/EditFormPage","app/xiconfPrograms/views/XiconfProgramFormView"],function(t,n){return new t({FormView:n,model:new i({_id:e.params.id})})})}),e.map("/xiconfPrograms/:id;delete",s,r.bind(null,i))}),define("app/nls/icpo",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMBS:browse":function(){return"ICPO results"},"BREADCRUMBS:details":function(){return"Result"},"MSG:LOADING_FAILURE":function(){return"Failed to load the programming results :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"Failed to load the programming result :("},"PANEL:TITLE:details":function(){return"Programming details"},"PAGE_ACTION:export":function(){return"Export results"},"PAGE_ACTION:download":function(){return"Download configuration"},"PAGE_ACTION:download:orderData":function(){return"Order configuration"},"PAGE_ACTION:download:driverData":function(){return"Driver configuration"},"PAGE_ACTION:download:gprsData":function(){return"GPRS configuration"},"PAGE_ACTION:download:inputData":function(){return"Programmer configuration"},"PAGE_ACTION:download:outputData":function(){return"Programmer result"},"PROPERTY:srcId":function(){return"Installation ID"},"PROPERTY:srcTitle":function(){return"Installation title"},"PROPERTY:srcIp":function(){return"Installation IP"},"PROPERTY:srcUuid":function(){return"Installation key"},"PROPERTY:serviceTag":function(){return"Service Tag label"},"PROPERTY:driver":function(){return"Driver label"},"PROPERTY:gprs":function(){return"GPRS label"},"PROPERTY:led":function(){return"LED board label"},"PROPERTY:startedAt":function(){return"Started at"},"PROPERTY:finishedAt":function(){return"Finished at"},"PROPERTY:duration":function(){return"Duration"},"PROPERTY:log":function(){return"Log"},"PROPERTY:result":function(){return"Result"},"PROPERTY:errorCode":function(){return"Error"},"PROPERTY:exception":function(){return"Exception"},"filter:result:success":function(){return"Success"},"filter:result:failure":function(){return"Failure"},"filter:placeholder:srcId":function(){return"Any"},"filter:submit":function(){return"Filter results"},"tab:log":function(){return"Programming log"},"tab:output":function(){return"Programmer output"},"tab:orderData":function(){return"Order"},"tab:driverData":function(){return"Driver"},"tab:gprsData":function(){return"GPRS"},"tab:inputData":function(){return"Programmer"},"tab:outputData":function(){return"Result"},"log:CANCELLING":function(){return"Cancelling..."},"log:PROGRAMMING_STARTED":function(){return"Starting a programming process..."},"log:READING_INPUT_TEMPLATE_FILE":function(e){return"Reading the programmer input template file: <code>"+t.v(e,"inputTemplateFile")+"</code>"},"log:READING_INPUT_TEMPLATE_FILE_SUCCESS":function(e){return"Read <code>"+t.v(e,"length")+"B</code> of the programmer input template file."},"log:PARSING_INPUT_TEMPLATE":function(){return"Parsing the programmer input template file..."},"log:PARSING_INPUT_TEMPLATE_SUCCESS":function(){return"Successfully parsed the programmer input template file."},"log:PREPARING_INPUT_FILE":function(){return"Preparing the programmer input file..."},"log:PREPARING_INPUT_FILE_SUCCESS":function(){return"Successfully prepared the programmer input file."},"log:PROGRAMMER_FILE_STARTED":function(e){return"Starting the programmer using the <code>"+t.v(e,"daliPort")+"</code> DALI port: <code>"+t.v(e,"programmerFile")+"</code>"},"log:PROGRAMMING_PROGRESS":function(e){return"<code>"+t.v(e,"percentage")+"%</code>"},"log:READING_OUTPUT_FILE":function(e){return"Reading the programmer output file: <code>"+t.v(e,"outputFile")+"</code>"},"log:READING_OUTPUT_FILE_SUCCESS":function(e){return"Read <code>"+t.v(e,"length")+"B</code> of the programmer input template file."},"log:COPYING_OUTPUT_FILE":function(){return"Copying the programmer output file..."},"log:COPYING_OUTPUT_FILE_SUCCESS":function(){return"Successfully copied the programmer output file."},"log:VERIFICATION_STARTED":function(){return"Starting the verification process..."},"log:VERIFICATION_SKIPPED":function(){return"Skipping the verification process..."},"log:PROGRAMMING_SUCCESS":function(e){return"Successfully finished the programming process in <code>"+t.v(e,"duration")+"</code>."},"log:PROGRAMMING_FAILURE":function(e){return"Finished the programming process in <code>"+t.v(e,"duration")+"</code> with an error: <code>"+t.v(e,"error")+"</code>"},"error:INPUT_TEMPLATE_FILE_MISSING":function(){return"Programmer input template file was not found"},"error:INPUT_TEMPLATE_FILE_FAILURE":function(){return"Error during reading of the programmer input template file."},"error:INPUT_TEMPLATE_FILE_TIMEOUT":function(){return"Reading the programmer input template file timed out."},"error:PARSING_INPUT_TEMPLATE_FAILURE":function(){return"Error during parsing of the programmer input template file."},"error:PREPARING_INPUT_FILE_FAILURE":function(){return"Error during saving of the programmer input configuration file."},"error:PROGRAMMER_FILE_UNSET":function(){return"Path to the programmer executable file was not set."},"error:PROGRAMMER_FILE_MISSING":function(){return"Programmer executable file was not found"},"error:PROGRAMMER_FILE_FAILURE":function(){return"Error during execution of the programmer executable."},"error:OUTPUT_FILE_MISSING":function(){return"Programmer output file was not found."},"error:COPYING_OUTPUT_FILE_FAILURE":function(){return"Error during copying of the programmer output file."},"error:VERIFICATION_INPUT_FAILURE":function(){return"Error during copying of the programmer output file for verification."},"error:VERIFICATION_WATCHER_FAILURE":function(){return"Error during observing of the verification directories."},"error:VERIFICATION_ERROR":function(){return"Programmer output file didn't pass the verification."},"error:VERIFICATION_TIMEOUT":function(){return"Programmer output file verification timed out."},"error:CANCELLED":function(){return"Programming cancelled."},"error:EXIT_CODE:-1":function(){return"CityTouchIPT (-1): general application failure."}},pl:!0}}),define("app/nls/pl/icpo",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMBS:browse":function(){return"Wyniki ICPO"},"BREADCRUMBS:details":function(){return"Wynik"},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie wynik√≥w programowania nie powiod≈Ço siƒô :("},"MSG:LOADING_SINGLE_FAILURE":function(){return"≈Åadowanie danych wyniku programowania nie powiod≈Ço siƒô :("},"PANEL:TITLE:details":function(){return"Szczeg√≥≈Çy programowania"},"PAGE_ACTION:export":function(){return"Eksportuj wyniki"},"PAGE_ACTION:download":function(){return"Pobierz konfiguracjƒô"},"PAGE_ACTION:download:orderData":function(){return"Konfiguracja zlecenia"},"PAGE_ACTION:download:driverData":function(){return"Konfiguracja drivera"},"PAGE_ACTION:download:gprsData":function(){return"Konfiguracja GPRS"},"PAGE_ACTION:download:inputData":function(){return"Konfiguracja programatora"},"PAGE_ACTION:download:outputData":function(){return"Wynik programatora"},"PROPERTY:srcId":function(){return"ID instalacji"},"PROPERTY:srcTitle":function(){return"Tytu≈Ç instalacji"},"PROPERTY:srcIp":function(){return"IP instalacji"},"PROPERTY:srcUuid":function(){return"Klucz instalacji"},"PROPERTY:serviceTag":function(){return"Etykieta Service Tag"},"PROPERTY:driver":function(){return"Etykieta drivera"},"PROPERTY:gprs":function(){return"Etykieta GPRS"},"PROPERTY:led":function(){return"Etykieta LED"},"PROPERTY:startedAt":function(){return"Czas rozpoczƒôcia"},"PROPERTY:finishedAt":function(){return"Czas zako≈Ñczenia"},"PROPERTY:duration":function(){return"Czas trwania"},"PROPERTY:log":function(){return"Log"},"PROPERTY:result":function(){return"Wynik"},"PROPERTY:errorCode":function(){return"B≈ÇƒÖd"},"PROPERTY:exception":function(){return"Szczeg√≥≈Çy b≈Çƒôdu"},"filter:result:success":function(){return"Sukces"},"filter:result:failure":function(){return"Pora≈ºka"},"filter:placeholder:srcId":function(){return"Dowolne"},"filter:submit":function(){return"Filtruj wyniki"},"tab:log":function(){return"Przebieg programowania"},"tab:output":function(){return"Odpowied≈∫ programatora"},"tab:orderData":function(){return"Zlecenie"},"tab:driverData":function(){return"Driver"},"tab:gprsData":function(){return"GPRS"},"tab:inputData":function(){return"Programator"},"tab:outputData":function(){return"Wynik"},"log:CANCELLING":function(){return"Anulowanie programowania..."},"log:PROGRAMMING_STARTED":function(){return"Rozpoczynanie programowania..."},"log:READING_INPUT_TEMPLATE_FILE":function(e){return"Odczytywanie pliku szablonu konfiguracji programatora: <code>"+t.v(e,"inputTemplateFile")+"</code>"},"log:READING_INPUT_TEMPLATE_FILE_SUCCESS":function(e){return"Odczytano <code>"+t.v(e,"length")+"B</code> pliku szablonu konfiguracji programatora."},"log:PARSING_INPUT_TEMPLATE":function(){return"Przetwarzanie szablonu konfiguracji programatora..."},"log:PARSING_INPUT_TEMPLATE_SUCCESS":function(){return"Pomy≈õlnie przetworzono szablon konfiguracji programatora."},"log:PREPARING_INPUT_FILE":function(){return"Przygotowywanie konfiguracji programatora..."},"log:PREPARING_INPUT_FILE_SUCCESS":function(){return"Pomy≈õlnie przygotowano konfiguracjƒô programatora."},"log:PROGRAMMER_FILE_STARTED":function(e){return"Uruchamianie programatora na porcie DALI <code>"+t.v(e,"daliPort")+"</code>: <code>"+t.v(e,"programmerFile")+"</code>"},"log:PROGRAMMING_PROGRESS":function(e){return"<code>"+t.v(e,"percentage")+"%</code>"},"log:READING_OUTPUT_FILE":function(e){return"Odczytywanie pliku wynikowego programatora: <code>"+t.v(e,"outputFile")+"</code>"},"log:READING_OUTPUT_FILE_SUCCESS":function(e){return"Odczytano <code>"+t.v(e,"length")+"B</code> pliku wynikowego programatora."},"log:COPYING_OUTPUT_FILE":function(){return"Kopiowanie pliku wynikowego programatora..."},"log:COPYING_OUTPUT_FILE_SUCCESS":function(){return"Pomy≈õlnie skopiowano plik wynikowy programatora."},"log:VERIFICATION_STARTED":function(){return"Rozpoczynanie weryfikacji..."},"log:VERIFICATION_SKIPPED":function(){return"Pomijanie weryfikacji..."},"log:PROGRAMMING_SUCCESS":function(e){return"Pomy≈õlnie uko≈Ñczono programowanie w ciƒÖgu <code>"+t.v(e,"duration")+"</code>."},"log:PROGRAMMING_FAILURE":function(e){return"Zako≈Ñczono programowanie w ciƒÖgu <code>"+t.v(e,"duration")+"</code> z powodu b≈Çƒôdu: <code>"+t.v(e,"error")+"</code>"},"error:INPUT_TEMPLATE_FILE_MISSING":function(){return"Nie znaleziono pliku szablonu konfiguracji programatora"},"error:INPUT_TEMPLATE_FILE_FAILURE":function(){return"B≈ÇƒÖd poczas odczytywania pliku szablonu konfiguracji programatora."},"error:INPUT_TEMPLATE_FILE_TIMEOUT":function(){return"Up≈ÇynƒÖ≈Ç limit czas odczytywania pliku szablonu konfiguracji programatora."},"error:PARSING_INPUT_TEMPLATE_FAILURE":function(){return"B≈ÇƒÖd poczas przetwarzania szablonu konfiguracji programatora."},"error:PREPARING_INPUT_FILE_FAILURE":function(){return"B≈ÇƒÖd podczas zapisywania konfiguracji programatora."},"error:PROGRAMMER_FILE_UNSET":function(){return"Nie ustawiono ≈õcie≈ºki do pliku wykonywalnego programatora."},"error:PROGRAMMER_FILE_MISSING":function(){return"Nie znaleziono pliku wykonywalnego programatora."},"error:PROGRAMMER_FILE_FAILURE":function(){return"B≈ÇƒÖd podczas uruchamiania pliku wykonywalnego programatora."},"error:OUTPUT_FILE_MISSING":function(){return"Nie znaleziono pliku wynikowego programatora."},"error:COPYING_OUTPUT_FILE_FAILURE":function(){return"B≈ÇƒÖd podczas zapisywania pliku wynikowego programatora."},"error:VERIFICATION_INPUT_FAILURE":function(){return"B≈ÇƒÖd poczas kopiowania pliku wynikowego programatora do weryfikacji."},"error:VERIFICATION_ERROR":function(){return"Plik wynikowy programatora nie przeszed≈Ç weryfikacji."},"error:VERIFICATION_TIMEOUT":function(){return"Up≈ÇynƒÖ≈Ç limit czasu weryfikacji pliku wynikowego programatora."},"error:CANCELLED":function(){return"Programowanie anulowano."},"error:EXIT_CODE:-1":function(){return"CityTouchIPT (-1): b≈ÇƒÖd aplikacji."}}}),define("app/icpo/routes",["../router","../viewport","../user","i18n!app/nls/icpo"],function(e,t,n){var r=n.auth("ICPO:VIEW");e.map("/icpo/results",r,function(e){t.loadPage(["app/icpo/pages/IcpoResultListPage"],function(t){return new t({rql:e.rql})})}),e.map("/icpo/results/:id",r,function(e){t.loadPage(["app/icpo/pages/IcpoResultDetailsPage"],function(t){return new t({modelId:e.params.id})})})}),define("app/nls/factoryLayout",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"bc:layout":function(){return"Monitoring"},"bc:list":function(){return"Production lines"},"bc:settings":function(){return"Settings"},"pa:settings":function(){return"Change settings"},"pa:layout:fullscreen":function(){return"Fullscreen mode"},"pa:layout:edit":function(){return"Edit layout"},"pa:layout:live":function(){return"Publish"},"prop:master":function(){return"Master"},"prop:leader":function(){return"Leader"},"prop:operator":function(){return"Operator"},"prop:shift":function(){return"Shift"},"prop:order":function(){return"Order"},"prop:downtime":function(){return"Downtime"},"prop:lastOrder":function(){return"Last order"},"prop:lastDowntime":function(){return"Last downtime"},"prop:qty":function(){return"Quantities done"},qty:function(e){return t.v(e,"actual")+" of "+t.v(e,"planned")},"statuses:online":function(){return"Online"},"statuses:online:title":function(){return"Production lines connected to the server."},"statuses:offline":function(){return"Offline"},"statuses:offline:title":function(){return"Production lines not connected to the server. Data may be inaccurate."},"states:idle":function(){return"Idle"},"states:working":function(){return"Work"},"states:downtime":function(){return"Downtime"},"options:picker":function(){return"Pick production lines"},"options:save":function(){return"Save display options"},"options:saved":function(){return"Display options were saved successfully!"},"options:blacklisted":function(){return"Ignored"},"options:loadHistory":function(){return"Show history"},"options:resetHistory":function(){return"Show current data"},noProdLines:function(){return"No matching production lines :("},loadingHistoryData:function(){return"Loading data..."},"msg:historyDataRange":function(){return"Cannot load more than seven days of data at once :("},"picker:title":function(){return"Production line picker"},"picker:submit":function(){return"Pick"},"settings:tab:blacklist":function(){return"Ignored org units"},"settings:tab:divisionColors":function(){return"Division colors"},"settings:tab:other":function(){return"Other"},"settings:extendedDowntimeDelay":function(){return"Extended downtime [min]"}},pl:!0}}),define("app/nls/pl/factoryLayout",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"bc:layout":function(){return"Monitoring"},"bc:layout:edit":function(){return"Edycja uk≈Çadu fabryki"},"bc:list":function(){return"Linie produkcyjne"},"bc:settings":function(){return"Ustawienia"},"pa:settings":function(){return"Zmie≈Ñ ustawienia"},"pa:layout:fullscreen":function(){return"Tryb pe≈Çnoekranowy"},"pa:layout:edit":function(){return"Edytuj uk≈Çad fabryki"},"pa:layout:live":function(){return"Publikuj"},"prop:master":function(){return"Mistrz"},"prop:leader":function(){return"Lider"},"prop:operator":function(){return"Operator"},"prop:shift":function(){return"Zmiana"},"prop:order":function(){return"Zlecenie"},"prop:downtime":function(){return"Przest√≥j"},"prop:lastOrder":function(){return"Ostatnie zlecenie"},"prop:lastDowntime":function(){return"Ostatni przest√≥j"},"prop:qty":function(){return"Wykonane ilo≈õci"},qty:function(e){return t.v(e,"actual")+" z "+t.v(e,"planned")},"statuses:online":function(){return"Online"},"statuses:online:title":function(){return"Linie produkcyjne z aktywnym po≈ÇƒÖczeniem do serwera."},"statuses:offline":function(){return"Offline"},"statuses:offline:title":function(){return"Linie produkcyjne niepo≈ÇƒÖczone z serwerem. Dane mogƒÖ byƒá nieaktualne."},"states:idle":function(){return"Bezczynno≈õƒá"},"states:working":function(){return"Praca"},"states:downtime":function(){return"Przest√≥j"},"options:picker":function(){return"Wybierz linie produkcyjne"},"options:save":function(){return"Zapisz opcje wy≈õwietlania"},"options:saved":function(){return"Opcje wy≈õwietlania zapisane!"},"options:blacklisted":function(){return"Ignorowane"},"options:loadHistory":function(){return"Poka≈º historiƒô"},"options:resetHistory":function(){return"Poka≈º aktualne dane"},noProdLines:function(){return"Brak pasujƒÖcych linii produkcyjnych :("},loadingHistoryData:function(){return"≈Åadowanie danych..."},"msg:historyDataRange":function(){return"Nie mo≈ºna pobraƒá danych z wiƒôcej ni≈º siedmiu dni na raz :("},"picker:title":function(){return"Wybieranie linii produkcyjnych"},"picker:submit":function(){return"Wybierz"},"settings:tab:blacklist":function(){return"Ignorowane jednostki org."},"settings:tab:divisionColors":function(){return"Kolory wydzia≈Ç√≥w"},"settings:tab:other":function(){return"Inne"},"settings:extendedDowntimeDelay":function(){return"D≈Çugi przest√≥j [min]"}}}),define("app/factoryLayout/routes",["../user","../router","../viewport","i18n!app/nls/factoryLayout"],function(e,t,n){t.map("/factoryLayout",function(){t.replace("/factoryLayout/default")
}),t.map("/factoryLayout/:id",function(){n.loadPage(["app/factoryLayout/productionState","app/factoryLayout/pages/FactoryLayoutPage"],function(e,t){return new t({model:e})})}),t.map("/factoryLayout/:id;edit",function(e){n.loadPage(["app/factoryLayout/FactoryLayout","app/factoryLayout/pages/FactoryLayoutEditPage"],function(t,n){return new n({model:new t({_id:e.params.id})})})}),t.map("/factoryLayout;list",function(e){n.loadPage(["app/factoryLayout/productionState","app/factoryLayout/ProdLineStateDisplayOptions","app/factoryLayout/pages/ProdLineStateListPage"],function(t,n,r){return new r({model:t,displayOptions:n.fromQuery(e.query)})})}),t.map("/factoryLayout;settings",e.auth("FACTORY_LAYOUT:MANAGE"),function(e){n.loadPage(["app/factoryLayout/productionState","app/factoryLayout/pages/FactoryLayoutSettingsPage"],function(t,n){return new n({initialTab:e.query.tab,model:t})})})}),define("app/wmes-routes",["./aors/routes","./companies/routes","./dashboard/routes","./divisions/routes","./downtimeReasons/routes","./lossReasons/routes","./events/routes","./emptyOrders/routes","./fte/routes","./hourlyPlans/routes","./mechOrders/routes","./mrpControllers/routes","./orders/routes","./orderStatuses/routes","./pressWorksheets/routes","./prodDowntimes/routes","./prodFlows/routes","./prodFunctions/routes","./prodLines/routes","./prodTasks/routes","./prodLogEntries/routes","./prodShiftOrders/routes","./prodShifts/routes","./production/routes","./reports/routes","./subdivisions/routes","./users/routes","./vis/routes","./workCenters/routes","./xiconf/routes","./xiconfPrograms/routes","./icpo/routes","./factoryLayout/routes"],function(){}),function(){window.visibly={q:document,p:void 0,prefixes:["webkit","ms","o","moz","khtml"],props:["VisibilityState","visibilitychange","Hidden"],m:["focus","blur"],visibleCallbacks:[],hiddenCallbacks:[],genericCallbacks:[],_callbacks:[],cachedPrefix:"",onVisible:function(e){"function"==typeof e&&this.visibleCallbacks.push(e)},onHidden:function(e){"function"==typeof e&&this.hiddenCallbacks.push(e)},getPrefix:function(){if(!this.cachedPrefix)for(var e=0;b=this.prefixes[e++];)if(b+this.props[2]in this.q)return this.cachedPrefix=b,this.cachedPrefix},visibilityState:function(){return this._getProp(0)},hidden:function(){return this._getProp(2)},visibilitychange:function(e){"function"==typeof e&&this.genericCallbacks.push(e);var t=this.genericCallbacks.length;if(t)if(this.cachedPrefix)for(;t--;)this.genericCallbacks[t].call(this,this.visibilityState());else for(;t--;)this.genericCallbacks[t].call(this,arguments[0])},isSupported:function(){return this.cachedPrefix+this.props[2]in this.q},_getProp:function(e){return this.q[this.cachedPrefix+this.props[e]]},_execute:function(e){if(e){this._callbacks=1==e?this.visibleCallbacks:this.hiddenCallbacks;for(var t=this._callbacks.length;t--;)this._callbacks[t]()}},_visible:function(){window.visibly._execute(1),window.visibly.visibilitychange.call(window.visibly,"visible")},_hidden:function(){window.visibly._execute(2),window.visibly.visibilitychange.call(window.visibly,"hidden")},_nativeSwitch:function(){this[this._getProp(2)?"_hidden":"_visible"]()},_listen:function(){try{this.isSupported()?this.q.addEventListener(this.cachedPrefix+this.props[1],function(){window.visibly._nativeSwitch.apply(window.visibly,arguments)},1):this.q.addEventListener?(window.addEventListener(this.m[0],this._visible,1),window.addEventListener(this.m[1],this._hidden,1)):this.q.attachEvent&&(this.q.attachEvent("onfocusin",this._visible),this.q.attachEvent("onfocusout",this._hidden))}catch(e){}},init:function(){this.getPrefix(),this._listen()}},this.visibly.init()}(),define("visibly",function(e){return function(){var t;return t||e.visibly}}(this)),define("app/visibility",["visibly","app/broker"],function(e,t){var n={visible:!e.hidden()};return e.onVisible(function(){n.visible=!0,t.publish("visibility.visible",n)}),e.onHidden(function(){n.visible=!1,t.publish("visibility.hidden",n)}),n}),define("app/nls/core",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{TITLE:function(){return"Wannabe MES"},"MSG:LOADING":function(){return"Loading..."},"MSG:LOADING_FAILURE":function(){return"Loading failed :("},"MSG:LOG_OUT:FAILURE":function(){return"Logging out failed :("},"MSG:LOG_OUT:SUCCESS":function(){return"You are now logged out!"},"PAGE_ACTION:filter":function(){return"Filter"},"LIST:COLUMN:actions":function(){return"Actions"},"LIST:NO_DATA":function(){return"No data."},"LIST:NO_DATA:cell":function(){return"no data"},"LIST:ACTION:viewDetails":function(){return"View details"},"LIST:ACTION:edit":function(){return"Edit"},"LIST:ACTION:delete":function(){return"Delete"},"LIST:ACTION:print":function(){return"Print"},"BREADCRUMBS:edit":function(){return"Editing"},"BREADCRUMBS:delete":function(){return"Deleting"},"BREADCRUMBS:error":function(e){return"Error "+t.v(e,"code")+": "+t.s(e,"codeStr",{e401:"unauthorized access",e404:"not found",other:"bad request"})},"ERROR:400":function(){return"The request cannot be fulfilled due to bad syntax :("},"ERROR:401":function(){return"Unfortunately, you do not have the right privileges to perform the requested action :("},"ERROR:404":function(){return"The requested resource could not be found :("},"PAGINATION:FIRST_PAGE":function(){return"First page"},"PAGINATION:PREV_PAGE":function(){return"Previous page"},"PAGINATION:NEXT_PAGE":function(){return"Next page"},"PAGINATION:LAST_PAGE":function(){return"Last page"},"LOG_IN_FORM:DIALOG_TITLE":function(){return"Log in form"},"LOG_IN_FORM:LABEL:LOGIN":function(){return"Login"},"LOG_IN_FORM:LABEL:PASSWORD":function(){return"Password"},"LOG_IN_FORM:LABEL:SUBMIT":function(){return"Log in"},"BOOL:true":function(){return"Yes"},"BOOL:false":function(){return"No"},"BOOL:null":function(){return"N/A"},"#":function(){return"No."},GUEST_USER_NAME:function(){return"Guest"},"NAVBAR:TOGGLE":function(){return"Show menu"},"NAVBAR:DASHBOARD":function(){return"Dashboard"},"NAVBAR:EVENTS":function(){return"Events"},"NAVBAR:ORDERS":function(){return"Orders"},"NAVBAR:MECH_ORDERS":function(){return"Mechanical orders"},"NAVBAR:OTHER_ORDERS":function(){return"Production orders"},"NAVBAR:EMPTY_ORDERS":function(){return"Empty orders"},"NAVBAR:LINES":function(){return"Production lines"},"NAVBAR:USERS":function(){return"Users"},"NAVBAR:MY_ACCOUNT":function(){return"My account"},"NAVBAR:UI_LOCALE":function(){return"UI locale"},"NAVBAR:LOCALE_PL":function(){return"In Polish"},"NAVBAR:LOCALE_US":function(){return"In English"},"NAVBAR:LOG_IN":function(){return"Log in"},"NAVBAR:LOG_OUT":function(){return"Log out"},"NAVBAR:DICTIONARIES":function(){return"Dictionaries"},"NAVBAR:ORDER_STATUSES":function(){return"Order statuses"},"NAVBAR:DOWNTIME_REASONS":function(){return"Downtime reasons"},"NAVBAR:LOSS_REASONS":function(){return"Loss reasons"},"NAVBAR:AORS":function(){return"Areas of responsibility"},"NAVBAR:WORK_CENTERS":function(){return"WorkCenters"},"NAVBAR:COMPANIES":function(){return"Companies"},"NAVBAR:DIVISIONS":function(){return"Divisions"},"NAVBAR:SUBDIVISIONS":function(){return"Subdivisions"},"NAVBAR:MRP_CONTROLLERS":function(){return"MRP Controllers"},"NAVBAR:PROD_FUNCTIONS":function(){return"Production functions"},"NAVBAR:PROD_FLOWS":function(){return"Production flows"},"NAVBAR:PROD_TASKS":function(){return"Production tasks"},"NAVBAR:PROD_LINES":function(){return"Production lines"},"NAVBAR:HOURLY_PLANS":function(){return"Hourly plans"},"NAVBAR:FTE":function(){return"FTE"},"NAVBAR:FTE:MASTER":function(){return"Production"},"NAVBAR:FTE:MASTER:LIST":function(){return"Entries"},"NAVBAR:FTE:MASTER:CURRENT":function(){return"Allocation"},"NAVBAR:FTE:LEADER":function(){return"Warehouse"},"NAVBAR:FTE:LEADER:LIST":function(){return"Entries"},"NAVBAR:FTE:LEADER:CURRENT":function(){return"Allocation"},"NAVBAR:VIS":function(){return"Visualization"},"NAVBAR:VIS:STRUCTURE":function(){return"Org Unit structure"},"NAVBAR:PRESS_WORKSHEETS":function(){return"Worksheets"},"NAVBAR:REPORTS":function(){return"Reports"},"NAVBAR:REPORTS:1":function(){return"PROD, EFF, Downtime"},"NAVBAR:REPORTS:2":function(){return"CLIP"},"NAVBAR:REPORTS:3":function(){return"OEE"},"NAVBAR:REPORTS:4":function(){return"Operators"},"NAVBAR:REPORTS:5":function(){return"HR"},"NAVBAR:REPORTS:6":function(){return"Warehouse"},"NAVBAR:PROD":function(){return"Production"},"NAVBAR:PROD:DATA":function(){return"Production data"},"NAVBAR:PROD:LOG_ENTRIES":function(){return"Operation log"},"NAVBAR:PROD:SHIFTS":function(){return"Shifts"},"NAVBAR:PROD:SHIFT_ORDERS":function(){return"Orders"},"NAVBAR:PROD:DOWNTIMES":function(){return"Downtimes"},"NAVBAR:PROGRAMMING":function(){return"Programming"},"NAVBAR:XICONF":function(){return"Xiconf <em>(MultiOne)</em>"},"NAVBAR:XICONF:PROGRAMS":function(){return"Programs"},"NAVBAR:XICONF:RESULTS":function(){return"Results"},"NAVBAR:ICPO":function(){return"ICPO <em>(GPRS)</em>"},"NAVBAR:ICPO:RESULTS":function(){return"Results"},"NAVBAR:VENDORS":function(){return"Vendors"},"NAVBAR:PURCHASE_ORDERS":function(){return"Purchase orders"},"NAVBAR:MONITORING":function(){return"Monitoring"},"NAVBAR:MONITORING:LAYOUT":function(){return"Factory layout"},"NAVBAR:MONITORING:LIST":function(){return"Production line list"},"ACTION_FORM:BUTTON":function(){return"Perform action"},"ACTION_FORM:BUTTON:delete":function(){return"Delete"},"ACTION_FORM:BUTTON:cancel":function(){return"Cancel"},"ACTION_FORM:MESSAGE":function(){return"Are you sure you want to perform the requested action?"},"ACTION_FORM:MESSAGE:failure":function(){return"Action failed :("},"ORG_UNIT:division":function(){return"Division"},"ORG_UNIT:subdivision":function(){return"Subdivision"},"ORG_UNIT:mrpController":function(){return"MRP Controller"},"ORG_UNIT:prodFlow":function(){return"Production flow"},"ORG_UNIT:workCenter":function(){return"WorkCenter"},"ORG_UNIT:prodLine":function(){return"Production line"},SHIFT:function(e){return t.v(e,"date")+", "+t.v(e,"shift")},"SHIFT:1":function(){return"I"},"SHIFT:2":function(){return"II"},"SHIFT:3":function(){return"III"},"SHIFT:0":function(){return"Any"},QUARTER:function(e){return t.v(e,"quarter")+" quarter "+t.v(e,"year")},"QUARTER:1":function(){return"I"},"QUARTER:2":function(){return"II"},"QUARTER:3":function(){return"III"},"QUARTER:4":function(){return"IV"},"QUARTER:0":function(){return"Any"},"highcharts:contextButtonTitle":function(){return"Chart's context menu"},"highcharts:downloadJPEG":function(){return"Save as JPEG"},"highcharts:downloadPDF":function(){return"Save as PDF"},"highcharts:downloadPNG":function(){return"Save as PNG"},"highcharts:downloadSVG":function(){return"Save as SVG"},"highcharts:downloadCSV":function(){return"Save as CSV"},"highcharts:printChart":function(){return"Print the chart"},"highcharts:decimalPoint":function(){return"."},"highcharts:thousandsSep":function(){return","},"highcharts:noData":function(){return"No data :("},"highcharts:resetZoom":function(){return"1:1"},"highcharts:resetZoomTitle":function(){return"Reset the zoom level to 1:1"},"highcharts:loading":function(){return"Loading..."},"highcharts:months":function(){return"January_February_March_April_May_June_July_August_September_October_November_December"},"highcharts:shortMonths":function(){return"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec"},"highcharts:weekdays":function(){return"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday"},"dataTables:emptyTable":function(){return"No data."},"dataTables:loadingRecords":function(){return"Loading..."},"dataTables:loadingFailed":function(){return"Loading failed :("},"feedback:button:text":function(){return"Feedback"},"feedback:button:tooltip":function(){return"Report bugs, notes, opinions or ideas!"},"colorPicker:label":function(){return"Color"},"filter:date:from":function(){return"From"},"filter:date:from:info":function(){return"Data from 06:00 of the selected day"},"filter:date:to":function(){return"To"},"filter:date:to:info":function(){return"Data to 06:00 of the selected day"},"filter:submit":function(){return"Filter"},"filter:limit":function(){return"Limit"}},pl:!0}}),define("app/nls/pl/core",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r),n in o?o[n]:o.other)},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{TITLE:function(){return"Wannabe MES"},"MSG:LOADING":function(){return"≈Åadowanie..."},"MSG:LOADING_FAILURE":function(){return"≈Åadowanie nie powiod≈Ço siƒô :("},"MSG:LOG_OUT:FAILURE":function(){return"Wylogowanie nie powiod≈Ço siƒô :("},"MSG:LOG_OUT:SUCCESS":function(){return"Zosta≈Çe≈õ wylogowany!"},"PAGE_ACTION:filter":function(){return"Filtruj"},"LIST:COLUMN:actions":function(){return"Akcje"},"LIST:NO_DATA":function(){return"Brak danych."},"LIST:NO_DATA:cell":function(){return"brak danych"},"LIST:ACTION:viewDetails":function(){return"Poka≈º szczeg√≥≈Çy"},"LIST:ACTION:edit":function(){return"Edytuj"},"LIST:ACTION:delete":function(){return"Usu≈Ñ"},"LIST:ACTION:print":function(){return"Drukuj"},"BREADCRUMBS:edit":function(){return"Edycja"},"BREADCRUMBS:delete":function(){return"Usuwanie"},"BREADCRUMBS:error":function(e){return"B≈ÇƒÖd "+t.v(e,"code")+": "+t.s(e,"codeStr",{e401:"nieautoryzowany dostƒôp",e404:"nie znaleziono",other:"nieprawid≈Çowe zapytanie"})},"ERROR:400":function(){return"≈ªƒÖdanie nie mo≈ºe byƒá obs≈Çu≈ºone z powodu b≈Çƒôdnej sk≈Çadni zapytania :("},"ERROR:401":function(){return"Niestety, ale nie masz wystarczajƒÖcych uprawnie≈Ñ do wykonania ≈ºƒÖdanej akcji :("},"ERROR:404":function(){return"Wybrana strona nie istnieje :("},"PAGINATION:FIRST_PAGE":function(){return"Pierwsza strona"},"PAGINATION:PREV_PAGE":function(){return"Poprzednia strona"},"PAGINATION:NEXT_PAGE":function(){return"Nastƒôpna strona"},"PAGINATION:LAST_PAGE":function(){return"Ostatnia strona"},"LOG_IN_FORM:DIALOG_TITLE":function(){return"Logowanie do systemu"},"LOG_IN_FORM:LABEL:LOGIN":function(){return"Login"},"LOG_IN_FORM:LABEL:PASSWORD":function(){return"Has≈Ço"},"LOG_IN_FORM:LABEL:SUBMIT":function(){return"Zaloguj siƒô"},"BOOL:true":function(){return"Tak"},"BOOL:false":function(){return"Nie"},"BOOL:null":function(){return"Nie dotyczy"},"#":function(){return"Lp."},GUEST_USER_NAME:function(){return"Go≈õƒá"},"NAVBAR:TOGGLE":function(){return"Poka≈º menu"},"NAVBAR:DASHBOARD":function(){return"Pulpit"},"NAVBAR:EVENTS":function(){return"Zdarzenia"},"NAVBAR:ORDERS":function(){return"Zlecenia"},"NAVBAR:MECH_ORDERS":function(){return"Zlecenia dzia≈Çu mechanicznego"},"NAVBAR:OTHER_ORDERS":function(){return"Zlecenia reszty dzia≈Ç√≥w"},"NAVBAR:EMPTY_ORDERS":function(){return"Puste zlecenia"},"NAVBAR:LINES":function(){return"Linie produkcyjne"},"NAVBAR:USERS":function(){return"U≈ºytkownicy"},"NAVBAR:MY_ACCOUNT":function(){return"Moje konto"},"NAVBAR:UI_LOCALE":function(){return"Lokalizacja UI"},"NAVBAR:LOCALE_PL":function(){return"Po polsku"},"NAVBAR:LOCALE_US":function(){return"Po angielsku"},"NAVBAR:LOG_IN":function(){return"Zaloguj siƒô"},"NAVBAR:LOG_OUT":function(){return"Wyloguj siƒô"},"NAVBAR:DICTIONARIES":function(){return"S≈Çowniki"},"NAVBAR:ORDER_STATUSES":function(){return"Statusy zlece≈Ñ"},"NAVBAR:DOWNTIME_REASONS":function(){return"Powody przestoj√≥w"},"NAVBAR:LOSS_REASONS":function(){return"Powody strat materia≈Çowych"},"NAVBAR:AORS":function(){return"Obszary odpowiedzialno≈õci"},"NAVBAR:WORK_CENTERS":function(){return"WorkCentra"},"NAVBAR:COMPANIES":function(){return"Firmy"},"NAVBAR:DIVISIONS":function(){return"Wydzia≈Çy"},"NAVBAR:SUBDIVISIONS":function(){return"Dzia≈Çy"},"NAVBAR:MRP_CONTROLLERS":function(){return"Kontrolery MRP"},"NAVBAR:PROD_FUNCTIONS":function(){return"Funkcje na produkcji"},"NAVBAR:PROD_FLOWS":function(){return"Przep≈Çywy"},"NAVBAR:PROD_TASKS":function(){return"Zadania produkcyjne"},"NAVBAR:PROD_LINES":function(){return"Linie produkcyjne"},"NAVBAR:HOURLY_PLANS":function(){return"Plany godzinowe"},"NAVBAR:FTE":function(){return"FTE"},"NAVBAR:FTE:MASTER":function(){return"Produkcja"},"NAVBAR:FTE:MASTER:LIST":function(){return"Lista wpis√≥w"},"NAVBAR:FTE:MASTER:CURRENT":function(){return"Przydzielanie zasob√≥w"},"NAVBAR:FTE:LEADER":function(){return"Magazyn"},"NAVBAR:FTE:LEADER:LIST":function(){return"Lista wpis√≥w"},"NAVBAR:FTE:LEADER:CURRENT":function(){return"Przydzielanie zasob√≥w"},"NAVBAR:VIS":function(){return"Wizualizacja"},"NAVBAR:VIS:STRUCTURE":function(){return"Struktura organizacyjna"},"NAVBAR:PRESS_WORKSHEETS":function(){return"Karty pracy"},"NAVBAR:REPORTS":function(){return"Raporty"},"NAVBAR:REPORTS:1":function(){return"Wska≈∫niki"},"NAVBAR:REPORTS:2":function(){return"CLIP"},"NAVBAR:REPORTS:3":function(){return"Wykorzystanie zasob√≥w"},"NAVBAR:REPORTS:4":function(){return"Operatorzy"},"NAVBAR:REPORTS:5":function(){return"HR"},"NAVBAR:REPORTS:6":function(){return"Magazyn"},"NAVBAR:PROD":function(){return"Produkcja"},"NAVBAR:PROD:DATA":function(){return"Dane produkcyjne"},"NAVBAR:PROD:LOG_ENTRIES":function(){return"Historia operacji"},"NAVBAR:PROD:SHIFTS":function(){return"Zmiany"},"NAVBAR:PROD:SHIFT_ORDERS":function(){return"Zlecenia"},"NAVBAR:PROD:DOWNTIMES":function(){return"Przestoje"},"NAVBAR:PROGRAMMING":function(){return"Programowanie"},"NAVBAR:XICONF":function(){return"Xiconf <em>(MultiOne)</em>"},"NAVBAR:XICONF:PROGRAMS":function(){return"Programy"},"NAVBAR:XICONF:RESULTS":function(){return"Historia wynik√≥w"},"NAVBAR:ICPO":function(){return"ICPO <em>(GPRS)</em>"},"NAVBAR:ICPO:RESULTS":function(){return"Historia wynik√≥w"},"NAVBAR:VENDORS":function(){return"Dostawcy"},"NAVBAR:PURCHASE_ORDERS":function(){return"Zam√≥wienia"},"NAVBAR:MONITORING":function(){return"Monitoring"},"NAVBAR:MONITORING:LAYOUT":function(){return"Uk≈Çad fabryki"},"NAVBAR:MONITORING:LIST":function(){return"Lista linii produkcyjnych"},"ACTION_FORM:BUTTON":function(){return"Wykonaj akcjƒô"},"ACTION_FORM:BUTTON:delete":function(){return"Usu≈Ñ"},"ACTION_FORM:BUTTON:cancel":function(){return"Anuluj"},"ACTION_FORM:MESSAGE":function(){return"Czy na pewno chcesz wykonaƒá ≈ºƒÖdanƒÖ akcjƒô?"},"ACTION_FORM:MESSAGE:failure":function(){return"Wykonywanie akcji nie powiod≈Ço siƒô :("},"ORG_UNIT:division":function(){return"Wydzia≈Ç"},"ORG_UNIT:subdivision":function(){return"Dzia≈Ç"},"ORG_UNIT:mrpController":function(){return"Kontroler MRP"},"ORG_UNIT:prodFlow":function(){return"Przep≈Çyw"},"ORG_UNIT:workCenter":function(){return"WorkCenter"},"ORG_UNIT:prodLine":function(){return"Linia monta≈ºowa"},SHIFT:function(e){return t.v(e,"date")+", "+t.v(e,"shift")},"SHIFT:1":function(){return"I"},"SHIFT:2":function(){return"II"},"SHIFT:3":function(){return"III"},"SHIFT:0":function(){return"Dowolna"},QUARTER:function(e){return t.v(e,"quarter")+" kwarta≈Ç "+t.v(e,"year")},"QUARTER:1":function(){return"I"},"QUARTER:2":function(){return"II"},"QUARTER:3":function(){return"III"},"QUARTER:4":function(){return"IV"},"QUARTER:0":function(){return"Dowolny"},"highcharts:contextButtonTitle":function(){return"Menu kontekstowe wykresu"},"highcharts:downloadJPEG":function(){return"Zapisz jako JPEG"},"highcharts:downloadPDF":function(){return"Zapisz jako PDF"},"highcharts:downloadPNG":function(){return"Zapisz jako PNG"},"highcharts:downloadSVG":function(){return"Zapisz jako SVG"},"highcharts:downloadCSV":function(){return"Zapisz jako CSV"},"highcharts:printChart":function(){return"Drukuj wykres"},"highcharts:decimalPoint":function(){return","},"highcharts:thousandsSep":function(){return" "},"highcharts:noData":function(){return"Brak danych :("},"highcharts:resetZoom":function(){return"1:1"},"highcharts:resetZoomTitle":function(){return"Zresetuj przybli≈ºenie"},"highcharts:loading":function(){return"≈Åadowanie..."},"highcharts:months":function(){return"Stycze≈Ñ_Luty_Marzec_Kwiecie≈Ñ_Maj_Czerwiec_Lipiec_Sierpie≈Ñ_Wrzesie≈Ñ_Pa≈∫dziernik_Listopad_Grudzie≈Ñ"},"highcharts:shortMonths":function(){return"Sty_Lut_Mar_Kwi_Maj_Cze_Lip_Sie_Wrz_Pa≈∫_Lis_Gru"},"highcharts:weekdays":function(){return"Niedziela_Poniedzia≈Çek_Wtorek_≈öroda_Czwartek_PiƒÖtek_Sobota"},"dataTables:emptyTable":function(){return"Brak danych."},"dataTables:loadingRecords":function(){return"≈Åadowanie danych..."},"dataTables:loadingFailed":function(){return"≈Åadowanie danych nie powiod≈Ço siƒô :("},"feedback:button:text":function(){return"Feedback"},"feedback:button:tooltip":function(){return"Zg≈Ço≈õ b≈Çƒôdy, uwagi, opinie lub pomys≈Çy!"},"colorPicker:label":function(){return"Kolor"},"filter:date:from":function(){return"Od"},"filter:date:from:info":function(){return"Dane od godziny 06:00 wybranego dnia"},"filter:date:to":function(){return"Do"},"filter:date:to:info":function(){return"Dane do godziny 06:00 wybranego dnia"},"filter:submit":function(){return"Filtruj"},"filter:limit":function(){return"Limit"}}}),function(){function e(){require(["domReady","jquery","backbone","backbone.layout","moment","app/monkeyPatch","app/broker","app/i18n","app/socket","app/router","app/viewport","app/updater/index","app/core/layouts/PageLayout","app/core/layouts/PrintLayout","app/core/layouts/BlankLayout","app/core/views/NavbarView","app/core/views/LogInFormView","app/time","app/wmes-routes","app/visibility","bootstrap","moment-lang/"+window.appLocale,"select2-lang/"+window.appLocale,"i18n!app/nls/core"],t)}function t(e,t,n,r,i,o,a,s,u,c,l,d,p,f,h,m,g){function y(){var e=c.getCurrentRequest(),n=new m({currentPath:null===e?"/":e.path,loadedModules:window.MODULES||[]});return n.on("logIn",function(){l.showDialog(new g,s("core","LOG_IN_FORM:DIALOG_TITLE"))}),n.on("logOut",function(){t.ajax({type:"GET",url:"/logout"}).fail(function(){l.msg.show({type:"error",text:s("core","MSG:LOG_OUT:FAILURE"),time:5e3})})}),n}function v(){null!==w&&(w.destroy(),w=null),a.subscribe("i18n.reloaded",function(e){localStorage.setItem("LOCALE",e.newLocale),l.render()}),a.subscribe("user.reloaded",function(){l.render(),c.dispatch(c.getCurrentRequest().url)}),a.subscribe("user.loggedIn",function(){var e=c.getCurrentRequest();if(e){var t=e.url;"/"===t&&"string"==typeof window.DASHBOARD_URL_AFTER_LOG_IN&&c.replace(window.DASHBOARD_URL_AFTER_LOG_IN)}}),a.subscribe("user.loggedOut",function(){l.msg.show({type:"success",text:s("core","MSG:LOG_OUT:SUCCESS"),time:2500}),a.publish("router.navigate",{url:"/",trigger:!0})}),e(function(){t("#app-loading").fadeOut(function(){t(this).remove()}),n.history.start({root:"/",hashChange:!0,pushState:!1})})}var w=null;u.connect(),i.locale(window.appLocale),t.ajaxSetup({dataType:"json",accepts:{json:"application/json",text:"text/plain"},contentType:"application/json"}),r.configure({manage:!0,el:!1,keep:!0}),l.registerLayout("page",function(){return new p({views:{".navbar":y()},version:d.getCurrentVersionString()})}),l.registerLayout("print",function(){return new f}),l.registerLayout("blank",function(){return new h}),navigator.onLine?(w=a.sandbox(),w.subscribe("socket.connected",function(){w.subscribe("user.reloaded",v)}),w.subscribe("socket.connectFailed",v),a.subscribe("page.titleChanged",function(e){e.unshift(s("core","TITLE")),document.title=e.reverse().join(" < ")})):v()}window.requireApp=e}(),define("wmes-main",function(){});