!function(){"use strict";function e(){require(["domReady","jquery","backbone","backbone.layout","moment","app/monkeyPatch","app/broker","app/i18n","app/socket","app/router","app/viewport","app/updater/index","app/data/loadedModules","app/core/layouts/PageLayout","app/core/layouts/BlankLayout","app/time","app/wmes-wh-problems-routes","bootstrap","moment-lang/"+window.appLocale,"select2-lang/"+window.appLocale,"i18n!app/nls/core"],n)}function n(e,n,o,a,t,i,r,p,c,s,u,l,d,w,b){var g=null;function f(){null!==g&&(g.destroy(),g=null),r.subscribe("i18n.reloaded",function(e){localStorage.setItem("LOCALE",e.newLocale),u.render()}),e(function(){n("#app-loading").fadeOut(function(){n(this).remove()}),window.ENV&&document.body.classList.add("is-"+window.ENV+"-env"),o.history.start({root:"/",hashChange:!0,pushState:!1})})}c.connect(),t.locale(window.appLocale),n.ajaxSetup({dataType:"json",accepts:{json:"application/json",text:"text/plain"},contentType:"application/json"}),a.configure({manage:!0,el:!1,keep:!0}),u.registerLayout("page",function(){return new w({version:l.getCurrentVersionString(),changelogUrl:"#changelog",hdHidden:!1})}),u.registerLayout("blank",function(){return new b}),r.subscribe("page.titleChanged",function(e){e.unshift(p("core","TITLE")),document.title=e.reverse().join(" < ")}),navigator.onLine?((g=r.sandbox()).subscribe("socket.connected",function(){g.subscribe("user.reloaded",f)}),g.subscribe("socket.connectFailed",f)):f()}window.WMES_APP_ID="wh-problems",window.requireApp=function(){window.parent!==window?require(["app/data/localStorage"],function(n){n.start(e)}):e()}}();