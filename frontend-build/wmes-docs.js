if(define("app/data/localStorage",[],function(){"use strict";var e=null,t=null,n=null;function r(r){var a=r.data;window.parent!==window&&window.IS_EMBEDDED&&"localStorage"===a.type&&(a.action?function(e){var t=e.data,r=e.source;switch(t.action){case"read":if(r)return r.postMessage({type:"localStorage",data:n},"*");break;case"setItem":return i(t.key,t.value);case"remoteItem":return i(t.key);case"clear":o()}}(r):a.data&&(n=a.data,0===Object.keys(n).length&&(Object.keys(localStorage).forEach(function(e){n[e]=localStorage[e]}),window.parent.postMessage({type:"localStorage",action:"write",data:n},"*")),t&&(clearTimeout(t),t=null),e&&(e(),e=null)))}function i(e,t){n[e]=t,window.parent.postMessage({type:"localStorage",action:"setItem",key:e,value:t},"*")}function o(){n={},window.parent.postMessage({type:"localStorage",action:"clear"},"*")}return window.addEventListener("message",r),{start:function(i){if(n)return i();if(e){var o=e;e=function(){o(),i()}}else e=i,t=setTimeout(function(){e(),window.removeEventListener("message",r),e=null,t=null},3333),window.parent.postMessage({type:"localStorage",action:"read"},"*")},getItem:function(e){var t=(n||localStorage)[e];return void 0===t?null:t},setItem:function(e,t){localStorage.setItem(e,t),n&&i(e,t)},removeItem:function(e){localStorage.removeItem(e),n&&function(e){delete n[e],window.parent.postMessage({type:"localStorage",action:"removeItem",key:e},"*")}(e)},clear:function(){localStorage.clear(),n&&o()}}}),define("domReady",[],function(){"use strict";var e,t,n,r="undefined"!=typeof window&&window.document,i=!r,o=r?document:null,a=[];function s(){var e=a;i&&e.length&&(a=[],function(e){var t;for(t=0;t<e.length;t+=1)e[t](o)}(e))}function u(){i||(i=!0,n&&clearInterval(n),s())}if(r){if(document.addEventListener)document.addEventListener("DOMContentLoaded",u,!1),window.addEventListener("load",u,!1);else if(window.attachEvent){window.attachEvent("onload",u),t=document.createElement("div");try{e=null===window.frameElement}catch(e){}t.doScroll&&e&&window.external&&(n=setInterval(function(){try{t.doScroll(),u()}catch(e){}},30))}"complete"===document.readyState&&u()}function c(e){return i?e(o):a.push(e),c}return c.version="2.0.1",c.load=function(e,t,n,r){r.isBuild?n(null):c(n)},c}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){var n=[],r=n.slice,i=n.concat,o=n.push,a=n.indexOf,s={},u=s.toString,c=s.hasOwnProperty,l={},d=e.document,p=function(e,t){return new p.fn.init(e,t)},f=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,h=/^-ms-/,m=/-([\da-z])/gi,g=function(e,t){return t.toUpperCase()};function y(e){var t=e.length,n=p.type(e);return"function"!==n&&!p.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e))}p.fn=p.prototype={jquery:"2.1.3",constructor:p,selector:"",length:0,toArray:function(){return r.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:r.call(this)},pushStack:function(e){var t=p.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return p.each(this,e,t)},map:function(e){return this.pushStack(p.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:o,sort:n.sort,splice:n.splice},p.extend=p.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||p.isFunction(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(c&&r&&(p.isPlainObject(r)||(i=p.isArray(r)))?(i?(i=!1,o=n&&p.isArray(n)?n:[]):o=n&&p.isPlainObject(n)?n:{},a[t]=p.extend(c,o,r)):void 0!==r&&(a[t]=r));return a},p.extend({expando:"jQuery"+("2.1.3"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===p.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!p.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"===p.type(e)&&!e.nodeType&&!p.isWindow(e)&&!(e.constructor&&!c.call(e.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?s[u.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;(e=p.trim(e))&&(1===e.indexOf("use strict")?((t=d.createElement("script")).text=e,d.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(h,"ms-").replace(m,g)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r=0,i=e.length,o=y(e);if(n){if(o)for(;r<i&&!1!==t.apply(e[r],n);r++);else for(r in e)if(!1===t.apply(e[r],n))break}else if(o)for(;r<i&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(f,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(y(Object(e))?p.merge(n,"string"==typeof e?[e]:e):o.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:a.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,o=0,a=e.length,s=[];if(y(e))for(;o<a;o++)null!=(r=t(e[o],o,n))&&s.push(r);else for(o in e)null!=(r=t(e[o],o,n))&&s.push(r);return i.apply([],s)},guid:1,proxy:function(e,t){var n,i,o;if("string"==typeof t&&(n=e[t],t=e,e=n),p.isFunction(e))return i=r.call(arguments,2),(o=function(){return e.apply(t||this,i.concat(r.call(arguments)))}).guid=e.guid=e.guid||p.guid++,o},now:Date.now,support:l}),p.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){s["[object "+t+"]"]=t.toLowerCase()});var b=function(e){var t,n,r,i,o,a,s,u,c,l,d,p,f,h,m,g,y,b,v,w="sizzle"+1*new Date,_=e.document,A=0,k=0,T=ae(),E=ae(),C=ae(),R=function(e,t){return e===t&&(d=!0),0},S=1<<31,O={}.hasOwnProperty,P=[],N=P.pop,D=P.push,z=P.push,x=P.slice,M=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",B=F.replace("w","w#"),j="\\["+I+"*("+F+")(?:"+I+"*([*^$|!~]?=)"+I+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+I+"*\\]",q=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",V=new RegExp(I+"+","g"),U=new RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g"),H=new RegExp("^"+I+"*,"+I+"*"),W=new RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),$=new RegExp("="+I+"*([^\\]'\"]*?)"+I+"*\\]","g"),G=new RegExp(q),Y=new RegExp("^"+B+"$"),K={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F.replace("w","w*")+")"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},Z=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,X=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=/'|\\/g,ne=new RegExp("\\\\([\\da-f]{1,6}"+I+"?|("+I+")|.)","ig"),re=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},ie=function(){p()};try{z.apply(P=x.call(_.childNodes),_.childNodes),P[_.childNodes.length].nodeType}catch(e){z={apply:P.length?function(e,t){D.apply(e,x.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function oe(e,t,r,i){var o,s,c,l,d,h,y,b,A,k;if((t?t.ownerDocument||t:_)!==f&&p(t),t=t||f,r=r||[],l=t.nodeType,"string"!=typeof e||!e||1!==l&&9!==l&&11!==l)return r;if(!i&&m){if(11!==l&&(o=X.exec(e)))if(c=o[1]){if(9===l){if(!(s=t.getElementById(c))||!s.parentNode)return r;if(s.id===c)return r.push(s),r}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(c))&&v(t,s)&&s.id===c)return r.push(s),r}else{if(o[2])return z.apply(r,t.getElementsByTagName(e)),r;if((c=o[3])&&n.getElementsByClassName)return z.apply(r,t.getElementsByClassName(c)),r}if(n.qsa&&(!g||!g.test(e))){if(b=y=w,A=t,k=1!==l&&e,1===l&&"object"!==t.nodeName.toLowerCase()){for(h=a(e),(y=t.getAttribute("id"))?b=y.replace(te,"\\$&"):t.setAttribute("id",b),b="[id='"+b+"'] ",d=h.length;d--;)h[d]=b+ge(h[d]);A=ee.test(e)&&he(t.parentNode)||t,k=h.join(",")}if(k)try{return z.apply(r,A.querySelectorAll(k)),r}catch(e){}finally{y||t.removeAttribute("id")}}}return u(e.replace(U,"$1"),t,r,i)}function ae(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function se(e){return e[w]=!0,e}function ue(e){var t=f.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ce(e,t){for(var n=e.split("|"),i=e.length;i--;)r.attrHandle[n[i]]=t}function le(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||S)-(~e.sourceIndex||S);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function fe(e){return se(function(t){return t=+t,se(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function he(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=oe.support={},o=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},p=oe.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:_;return a!==f&&9===a.nodeType&&a.documentElement?(f=a,h=a.documentElement,(i=a.defaultView)&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",ie,!1):i.attachEvent&&i.attachEvent("onunload",ie)),m=!o(a),n.attributes=ue(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ue(function(e){return e.appendChild(a.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=J.test(a.getElementsByClassName),n.getById=ue(function(e){return h.appendChild(e).id=w,!a.getElementsByName||!a.getElementsByName(w).length}),n.getById?(r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(e){var t=e.replace(ne,re);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(ne,re);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(m)return t.getElementsByClassName(e)},y=[],g=[],(n.qsa=J.test(a.querySelectorAll))&&(ue(function(e){h.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+I+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+I+"*(?:value|"+L+")"),e.querySelectorAll("[id~="+w+"-]").length||g.push("~="),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||g.push(".#.+[+~]")}),ue(function(e){var t=a.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+I+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(n.matchesSelector=J.test(b=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ue(function(e){n.disconnectedMatch=b.call(e,"div"),b.call(e,"[s!='']:x"),y.push("!=",q)}),g=g.length&&new RegExp(g.join("|")),y=y.length&&new RegExp(y.join("|")),t=J.test(h.compareDocumentPosition),v=t||J.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},R=t?function(e,t){if(e===t)return d=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===a||e.ownerDocument===_&&v(_,e)?-1:t===a||t.ownerDocument===_&&v(_,t)?1:l?M(l,e)-M(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return d=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,s=[e],u=[t];if(!i||!o)return e===a?-1:t===a?1:i?-1:o?1:l?M(l,e)-M(l,t):0;if(i===o)return le(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;s[r]===u[r];)r++;return r?le(s[r],u[r]):s[r]===_?-1:u[r]===_?1:0},a):f},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==f&&p(e),t=t.replace($,"='$1']"),n.matchesSelector&&m&&(!y||!y.test(t))&&(!g||!g.test(t)))try{var r=b.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return oe(t,f,null,[e]).length>0},oe.contains=function(e,t){return(e.ownerDocument||e)!==f&&p(e),v(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==f&&p(e);var i=r.attrHandle[t.toLowerCase()],o=i&&O.call(r.attrHandle,t.toLowerCase())?i(e,t,!m):void 0;return void 0!==o?o:n.attributes||!m?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,r=[],i=0,o=0;if(d=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(R),d){for(;t=e[o++];)t===e[o]&&(i=r.push(o));for(;i--;)e.splice(r[i],1)}return l=null,e},i=oe.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(r=oe.selectors={cacheLength:50,createPseudo:se,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ne,re),e[3]=(e[3]||e[4]||e[5]||"").replace(ne,re),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&G.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ne,re).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+I+")"+e+"("+I+"|$)"))&&T(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=oe.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(V," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var c,l,d,p,f,h,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,y=s&&t.nodeName.toLowerCase(),b=!u&&!s;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(s?d.nodeName.toLowerCase()===y:1===d.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?g.firstChild:g.lastChild],a&&b){for(f=(c=(l=g[w]||(g[w]={}))[e]||[])[0]===A&&c[1],p=c[0]===A&&c[2],d=f&&g.childNodes[f];d=++f&&d&&d[m]||(p=f=0)||h.pop();)if(1===d.nodeType&&++p&&d===t){l[e]=[A,f,p];break}}else if(b&&(c=(t[w]||(t[w]={}))[e])&&c[0]===A)p=c[1];else for(;(d=++f&&d&&d[m]||(p=f=0)||h.pop())&&((s?d.nodeName.toLowerCase()!==y:1!==d.nodeType)||!++p||(b&&((d[w]||(d[w]={}))[e]=[A,p]),d!==t)););return(p-=i)===r||p%r==0&&p/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,n){for(var r,o=i(e,t),a=o.length;a--;)e[r=M(e,o[a])]=!(n[r]=o[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:se(function(e){var t=[],n=[],r=s(e.replace(U,"$1"));return r[w]?se(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:se(function(e){return function(t){return oe(e,t).length>0}}),contains:se(function(e){return e=e.replace(ne,re),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:se(function(e){return Y.test(e||"")||oe.error("unsupported lang: "+e),e=e.replace(ne,re).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return Z.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:fe(function(){return[0]}),last:fe(function(e,t){return[t-1]}),eq:fe(function(e,t,n){return[n<0?n+t:n]}),even:fe(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:fe(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:fe(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:fe(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pe(t);function me(){}function ge(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ye(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=k++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,u,c=[A,o];if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if((s=(u=t[w]||(t[w]={}))[r])&&s[0]===A&&s[1]===o)return c[2]=s[2];if(u[r]=c,c[2]=e(t,n,a))return!0}}}function be(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function ve(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,c=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),c&&t.push(s)));return a}function we(e,t,n,r,i,o){return r&&!r[w]&&(r=we(r)),i&&!i[w]&&(i=we(i,o)),se(function(o,a,s,u){var c,l,d,p=[],f=[],h=a.length,m=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)oe(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),g=!e||!o&&t?m:ve(m,p,e,s,u),y=n?i||(o?e:h||r)?[]:a:g;if(n&&n(g,y,s,u),r)for(c=ve(y,f),r(c,[],s,u),l=c.length;l--;)(d=c[l])&&(y[f[l]]=!(g[f[l]]=d));if(o){if(i||e){if(i){for(c=[],l=y.length;l--;)(d=y[l])&&c.push(g[l]=d);i(null,y=[],c,u)}for(l=y.length;l--;)(d=y[l])&&(c=i?M(o,d):p[l])>-1&&(o[c]=!(a[c]=d))}}else y=ve(y===a?y.splice(h,y.length):y),i?i(null,a,y,u):z.apply(a,y)})}function _e(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],u=a?1:0,l=ye(function(e){return e===t},s,!0),d=ye(function(e){return M(t,e)>-1},s,!0),p=[function(e,n,r){var i=!a&&(r||n!==c)||((t=n).nodeType?l(e,n,r):d(e,n,r));return t=null,i}];u<o;u++)if(n=r.relative[e[u].type])p=[ye(be(p),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[w]){for(i=++u;i<o&&!r.relative[e[i].type];i++);return we(u>1&&be(p),u>1&&ge(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(U,"$1"),n,u<i&&_e(e.slice(u,i)),i<o&&_e(e=e.slice(i)),i<o&&ge(e))}p.push(n)}return be(p)}return me.prototype=r.filters=r.pseudos,r.setFilters=new me,a=oe.tokenize=function(e,t){var n,i,o,a,s,u,c,l=E[e+" "];if(l)return t?0:l.slice(0);for(s=e,u=[],c=r.preFilter;s;){for(a in n&&!(i=H.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=W.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(U," ")}),s=s.slice(n.length)),r.filter)!(i=K[a].exec(s))||c[a]&&!(i=c[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?oe.error(e):E(e,u).slice(0)},s=oe.compile=function(e,t){var n,i=[],o=[],s=C[e+" "];if(!s){for(t||(t=a(e)),n=t.length;n--;)(s=_e(t[n]))[w]?i.push(s):o.push(s);(s=C(e,function(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,u,l){var d,p,h,m=0,g="0",y=o&&[],b=[],v=c,w=o||i&&r.find.TAG("*",l),_=A+=null==v?1:Math.random()||.1,k=w.length;for(l&&(c=a!==f&&a);g!==k&&null!=(d=w[g]);g++){if(i&&d){for(p=0;h=e[p++];)if(h(d,a,s)){u.push(d);break}l&&(A=_)}n&&((d=!h&&d)&&m--,o&&y.push(d))}if(m+=g,n&&g!==m){for(p=0;h=t[p++];)h(y,b,a,s);if(o){if(m>0)for(;g--;)y[g]||b[g]||(b[g]=N.call(u));b=ve(b)}z.apply(u,b),l&&!o&&b.length>0&&m+t.length>1&&oe.uniqueSort(u)}return l&&(A=_,c=v),y};return n?se(o):o}(o,i))).selector=e}return s},u=oe.select=function(e,t,i,o){var u,c,l,d,p,f="function"==typeof e&&e,h=!o&&a(e=f.selector||e);if(i=i||[],1===h.length){if((c=h[0]=h[0].slice(0)).length>2&&"ID"===(l=c[0]).type&&n.getById&&9===t.nodeType&&m&&r.relative[c[1].type]){if(!(t=(r.find.ID(l.matches[0].replace(ne,re),t)||[])[0]))return i;f&&(t=t.parentNode),e=e.slice(c.shift().value.length)}for(u=K.needsContext.test(e)?0:c.length;u--&&(l=c[u],!r.relative[d=l.type]);)if((p=r.find[d])&&(o=p(l.matches[0].replace(ne,re),ee.test(c[0].type)&&he(t.parentNode)||t))){if(c.splice(u,1),!(e=o.length&&ge(c)))return z.apply(i,o),i;break}}return(f||s(e,h))(o,t,!m,i,ee.test(e)&&he(t.parentNode)||t),i},n.sortStable=w.split("").sort(R).join("")===w,n.detectDuplicates=!!d,p(),n.sortDetached=ue(function(e){return 1&e.compareDocumentPosition(f.createElement("div"))}),ue(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ce("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ue(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ce("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ue(function(e){return null==e.getAttribute("disabled")})||ce(L,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),oe}(e);p.find=b,p.expr=b.selectors,p.expr[":"]=p.expr.pseudos,p.unique=b.uniqueSort,p.text=b.getText,p.isXMLDoc=b.isXML,p.contains=b.contains;var v=p.expr.match.needsContext,w=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,_=/^.[^:#\[\.,]*$/;function A(e,t,n){if(p.isFunction(t))return p.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return p.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(_.test(t))return p.filter(t,e,n);t=p.filter(t,e)}return p.grep(e,function(e){return a.call(t,e)>=0!==n})}p.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?p.find.matchesSelector(r,e)?[r]:[]:p.find.matches(e,p.grep(t,function(e){return 1===e.nodeType}))},p.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if("string"!=typeof e)return this.pushStack(p(e).filter(function(){for(t=0;t<n;t++)if(p.contains(i[t],this))return!0}));for(t=0;t<n;t++)p.find(e,i[t],r);return(r=this.pushStack(n>1?p.unique(r):r)).selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(A(this,e||[],!1))},not:function(e){return this.pushStack(A(this,e||[],!0))},is:function(e){return!!A(this,"string"==typeof e&&v.test(e)?p(e):e||[],!1).length}});var k,T=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(p.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:T.exec(e))||!n[1]&&t)return!t||t.jquery?(t||k).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof p?t[0]:t,p.merge(this,p.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:d,!0)),w.test(n[1])&&p.isPlainObject(t))for(n in t)p.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(r=d.getElementById(n[2]))&&r.parentNode&&(this.length=1,this[0]=r),this.context=d,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):p.isFunction(e)?void 0!==k.ready?k.ready(e):e(p):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),p.makeArray(e,this))}).prototype=p.fn,k=p(d);var E=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};function R(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}p.extend({dir:function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&p(e).is(n))break;r.push(e)}return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),p.fn.extend({has:function(e){var t=p(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(p.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=v.test(e)||"string"!=typeof e?p(e,t||this.context):0;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&p.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?p.unique(o):o)},index:function(e){return e?"string"==typeof e?a.call(p(e),this[0]):a.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(p.unique(p.merge(this.get(),p(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),p.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return p.dir(e,"parentNode")},parentsUntil:function(e,t,n){return p.dir(e,"parentNode",n)},next:function(e){return R(e,"nextSibling")},prev:function(e){return R(e,"previousSibling")},nextAll:function(e){return p.dir(e,"nextSibling")},prevAll:function(e){return p.dir(e,"previousSibling")},nextUntil:function(e,t,n){return p.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return p.dir(e,"previousSibling",n)},siblings:function(e){return p.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return p.sibling(e.firstChild)},contents:function(e){return e.contentDocument||p.merge([],e.childNodes)}},function(e,t){p.fn[e]=function(n,r){var i=p.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=p.filter(r,i)),this.length>1&&(C[e]||p.unique(i),E.test(e)&&i.reverse()),this.pushStack(i)}});var S,O=/\S+/g,P={};function N(){d.removeEventListener("DOMContentLoaded",N,!1),e.removeEventListener("load",N,!1),p.ready()}p.Callbacks=function(e){var t,n,r,i,o,a,s=[],u=!(e="string"==typeof e?P[e]||function(e){var t=P[e]={};return p.each(e.match(O)||[],function(e,n){t[n]=!0}),t}(e):p.extend({},e)).once&&[],c=function(d){for(t=e.memory&&d,n=!0,a=i||0,i=0,o=s.length,r=!0;s&&a<o;a++)if(!1===s[a].apply(d[0],d[1])&&e.stopOnFalse){t=!1;break}r=!1,s&&(u?u.length&&c(u.shift()):t?s=[]:l.disable())},l={add:function(){if(s){var n=s.length;!function t(n){p.each(n,function(n,r){var i=p.type(r);"function"===i?e.unique&&l.has(r)||s.push(r):r&&r.length&&"string"!==i&&t(r)})}(arguments),r?o=s.length:t&&(i=n,c(t))}return this},remove:function(){return s&&p.each(arguments,function(e,t){for(var n;(n=p.inArray(t,s,n))>-1;)s.splice(n,1),r&&(n<=o&&o--,n<=a&&a--)}),this},has:function(e){return e?p.inArray(e,s)>-1:!(!s||!s.length)},empty:function(){return s=[],o=0,this},disable:function(){return s=u=t=void 0,this},disabled:function(){return!s},lock:function(){return u=void 0,t||l.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!s||n&&!u||(t=[e,(t=t||[]).slice?t.slice():t],r?u.push(t):c(t)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!n}};return l},p.extend({Deferred:function(e){var t=[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return p.Deferred(function(n){p.each(t,function(t,o){var a=p.isFunction(e[t])&&e[t];i[o[1]](function(){var e=a&&a.apply(this,arguments);e&&p.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?p.extend(e,r):r}},i={};return r.pipe=r.then,p.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,i,o=0,a=r.call(arguments),s=a.length,u=1!==s||e&&p.isFunction(e.promise)?s:0,c=1===u?e:p.Deferred(),l=function(e,n,i){return function(o){n[e]=this,i[e]=arguments.length>1?r.call(arguments):o,i===t?c.notifyWith(n,i):--u||c.resolveWith(n,i)}};if(s>1)for(t=new Array(s),n=new Array(s),i=new Array(s);o<s;o++)a[o]&&p.isFunction(a[o].promise)?a[o].promise().done(l(o,i,a)).fail(c.reject).progress(l(o,n,t)):--u;return u||c.resolveWith(i,a),c.promise()}}),p.fn.ready=function(e){return p.ready.promise().done(e),this},p.extend({isReady:!1,readyWait:1,holdReady:function(e){e?p.readyWait++:p.ready(!0)},ready:function(e){(!0===e?--p.readyWait:p.isReady)||(p.isReady=!0,!0!==e&&--p.readyWait>0||(S.resolveWith(d,[p]),p.fn.triggerHandler&&(p(d).triggerHandler("ready"),p(d).off("ready"))))}}),p.ready.promise=function(t){return S||(S=p.Deferred(),"complete"===d.readyState?setTimeout(p.ready):(d.addEventListener("DOMContentLoaded",N,!1),e.addEventListener("load",N,!1))),S.promise(t)},p.ready.promise();var D=p.access=function(e,t,n,r,i,o,a){var s=0,u=e.length,c=null==n;if("object"===p.type(n))for(s in i=!0,n)p.access(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,p.isFunction(r)||(a=!0),c&&(a?(t.call(e,r),t=null):(c=t,t=function(e,t,n){return c.call(p(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:c?t.call(e):u?t(e[0],n):o};function z(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=p.expando+z.uid++}p.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},z.uid=1,z.accepts=p.acceptData,z.prototype={key:function(e){if(!z.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=z.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,p.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),o=this.cache[i];if("string"==typeof t)o[t]=n;else if(p.isEmptyObject(o))p.extend(this.cache[i],t);else for(r in t)o[r]=t[r];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?void 0!==(r=this.get(e,t))?r:this.get(e,p.camelCase(t)):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,i,o=this.key(e),a=this.cache[o];if(void 0===t)this.cache[o]={};else{p.isArray(t)?r=t.concat(t.map(p.camelCase)):(i=p.camelCase(t),r=t in a?[t,i]:(r=i)in a?[r]:r.match(O)||[]),n=r.length;for(;n--;)delete a[r[n]]}},hasData:function(e){return!p.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var x=new z,M=new z,L=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,I=/([A-Z])/g;function F(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(I,"-$1").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:L.test(n)?p.parseJSON(n):n)}catch(e){}M.set(e,t,n)}else n=void 0;return n}p.extend({hasData:function(e){return M.hasData(e)||x.hasData(e)},data:function(e,t,n){return M.access(e,t,n)},removeData:function(e,t){M.remove(e,t)},_data:function(e,t,n){return x.access(e,t,n)},_removeData:function(e,t){x.remove(e,t)}}),p.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=M.get(o),1===o.nodeType&&!x.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=p.camelCase(r.slice(5)),F(o,r,i[r]));x.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){M.set(this,e)}):D(this,function(t){var n,r=p.camelCase(e);if(o&&void 0===t)return void 0!==(n=M.get(o,e))?n:void 0!==(n=M.get(o,r))?n:void 0!==(n=F(o,r,void 0))?n:void 0;this.each(function(){var n=M.get(this,r);M.set(this,r,t),-1!==e.indexOf("-")&&void 0!==n&&M.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){M.remove(this,e)})}}),p.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=x.get(e,t),n&&(!r||p.isArray(n)?r=x.access(e,t,p.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=p.queue(e,t),r=n.length,i=n.shift(),o=p._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){p.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return x.get(e,n)||x.access(e,n,{empty:p.Callbacks("once memory").add(function(){x.remove(e,[t+"queue",n])})})}}),p.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?p.queue(this[0],e):void 0===t?this:this.each(function(){var n=p.queue(this,e,t);p._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&p.dequeue(this,e)})},dequeue:function(e){return this.each(function(){p.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=p.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=x.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var B,j,q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,V=["Top","Right","Bottom","Left"],U=function(e,t){return e=t||e,"none"===p.css(e,"display")||!p.contains(e.ownerDocument,e)},H=/^(?:checkbox|radio)$/i;B=d.createDocumentFragment().appendChild(d.createElement("div")),(j=d.createElement("input")).setAttribute("type","radio"),j.setAttribute("checked","checked"),j.setAttribute("name","t"),B.appendChild(j),l.checkClone=B.cloneNode(!0).cloneNode(!0).lastChild.checked,B.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!B.cloneNode(!0).lastChild.defaultValue;l.focusinBubbles="onfocusin"in e;var W=/^key/,$=/^(?:mouse|pointer|contextmenu)|click/,G=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;function K(){return!0}function Z(){return!1}function Q(){try{return d.activeElement}catch(e){}}p.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,c,l,d,f,h,m,g,y=x.get(e);if(y)for(n.handler&&(n=(o=n).handler,i=o.selector),n.guid||(n.guid=p.guid++),(u=y.events)||(u=y.events={}),(a=y.handle)||(a=y.handle=function(t){return void 0!==p&&p.event.triggered!==t.type?p.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(O)||[""]).length;c--;)h=g=(s=Y.exec(t[c])||[])[1],m=(s[2]||"").split(".").sort(),h&&(d=p.event.special[h]||{},h=(i?d.delegateType:d.bindType)||h,d=p.event.special[h]||{},l=p.extend({type:h,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&p.expr.match.needsContext.test(i),namespace:m.join(".")},o),(f=u[h])||((f=u[h]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,r,m,a)||e.addEventListener&&e.addEventListener(h,a,!1)),d.add&&(d.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,l):f.push(l),p.event.global[h]=!0)},remove:function(e,t,n,r,i){var o,a,s,u,c,l,d,f,h,m,g,y=x.hasData(e)&&x.get(e);if(y&&(u=y.events)){for(c=(t=(t||"").match(O)||[""]).length;c--;)if(h=g=(s=Y.exec(t[c])||[])[1],m=(s[2]||"").split(".").sort(),h){for(d=p.event.special[h]||{},f=u[h=(r?d.delegateType:d.bindType)||h]||[],s=s[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)l=f[o],!i&&g!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(f.splice(o,1),l.selector&&f.delegateCount--,d.remove&&d.remove.call(e,l));a&&!f.length&&(d.teardown&&!1!==d.teardown.call(e,m,y.handle)||p.removeEvent(e,h,y.handle),delete u[h])}else for(h in u)p.event.remove(e,h+t[c],n,r,!0);p.isEmptyObject(u)&&(delete y.handle,x.remove(e,"events"))}},trigger:function(t,n,r,i){var o,a,s,u,l,f,h,m=[r||d],g=c.call(t,"type")?t.type:t,y=c.call(t,"namespace")?t.namespace.split("."):[];if(a=s=r=r||d,3!==r.nodeType&&8!==r.nodeType&&!G.test(g+p.event.triggered)&&(g.indexOf(".")>=0&&(g=(y=g.split(".")).shift(),y.sort()),l=g.indexOf(":")<0&&"on"+g,(t=t[p.expando]?t:new p.Event(g,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=y.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:p.makeArray(n,[t]),h=p.event.special[g]||{},i||!h.trigger||!1!==h.trigger.apply(r,n))){if(!i&&!h.noBubble&&!p.isWindow(r)){for(u=h.delegateType||g,G.test(u+g)||(a=a.parentNode);a;a=a.parentNode)m.push(a),s=a;s===(r.ownerDocument||d)&&m.push(s.defaultView||s.parentWindow||e)}for(o=0;(a=m[o++])&&!t.isPropagationStopped();)t.type=o>1?u:h.bindType||g,(f=(x.get(a,"events")||{})[t.type]&&x.get(a,"handle"))&&f.apply(a,n),(f=l&&a[l])&&f.apply&&p.acceptData(a)&&(t.result=f.apply(a,n),!1===t.result&&t.preventDefault());return t.type=g,i||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(m.pop(),n)||!p.acceptData(r)||l&&p.isFunction(r[g])&&!p.isWindow(r)&&((s=r[l])&&(r[l]=null),p.event.triggered=g,r[g](),p.event.triggered=void 0,s&&(r[l]=s)),t.result}},dispatch:function(e){e=p.event.fix(e);var t,n,i,o,a,s,u=r.call(arguments),c=(x.get(this,"events")||{})[e.type]||[],l=p.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,e)){for(s=p.event.handlers.call(this,e,c),t=0;(o=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,n=0;(a=o.handlers[n++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(a.namespace)||(e.handleObj=a,e.data=a.data,void 0!==(i=((p.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,u))&&!1===(e.result=i)&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,a=[],s=t.delegateCount,u=e.target;if(s&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!==this;u=u.parentNode||this)if(!0!==u.disabled||"click"!==e.type){for(r=[],n=0;n<s;n++)void 0===r[i=(o=t[n]).selector+" "]&&(r[i]=o.needsContext?p(i,this).index(u)>=0:p.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&a.push({elem:u,handlers:r})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(r=(n=e.target.ownerDocument||d).documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[p.expando])return e;var t,n,r,i=e.type,o=e,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=$.test(i)?this.mouseHooks:W.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new p.Event(o),t=r.length;t--;)e[n=r[t]]=o[n];return e.target||(e.target=d),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Q()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Q()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&p.nodeName(this,"input"))return this.click(),!1},_default:function(e){return p.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=p.extend(new p.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?p.event.trigger(i,null,t):p.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},p.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},p.Event=function(e,t){if(!(this instanceof p.Event))return new p.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?K:Z):this.type=e,t&&p.extend(this,t),this.timeStamp=e&&e.timeStamp||p.now(),this[p.expando]=!0},p.Event.prototype={isDefaultPrevented:Z,isPropagationStopped:Z,isImmediatePropagationStopped:Z,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=K,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=K,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=K,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){p.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===this||p.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),l.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){p.event.simulate(t,e.target,p.event.fix(e),!0)};p.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=x.access(r,t);i||r.addEventListener(e,n,!0),x.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=x.access(r,t)-1;i?x.access(r,t,i):(r.removeEventListener(e,n,!0),x.remove(r,t))}}}),p.fn.extend({on:function(e,t,n,r,i){var o,a;if("object"==typeof e){for(a in"string"!=typeof t&&(n=n||t,t=void 0),e)this.on(a,t,n,e[a],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),!1===r)r=Z;else if(!r)return this;return 1===i&&(o=r,(r=function(e){return p().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=p.guid++)),this.each(function(){p.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,p(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Z),this.each(function(){p.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){p.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return p.event.trigger(e,t,n,!0)}});var J=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,X=/<([\w:]+)/,ee=/<|&#?\w+;/,te=/<(?:script|style|link)/i,ne=/checked\s*(?:[^=]|=\s*.checked.)/i,re=/^$|\/(?:java|ecma)script/i,ie=/^true\/(.*)/,oe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ae={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function se(e,t){return p.nodeName(e,"table")&&p.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ue(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ce(e){var t=ie.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function le(e,t){for(var n=0,r=e.length;n<r;n++)x.set(e[n],"globalEval",!t||x.get(t[n],"globalEval"))}function de(e,t){var n,r,i,o,a,s,u,c;if(1===t.nodeType){if(x.hasData(e)&&(o=x.access(e),a=x.set(t,o),c=o.events))for(i in delete a.handle,a.events={},c)for(n=0,r=c[i].length;n<r;n++)p.event.add(t,i,c[i][n]);M.hasData(e)&&(s=M.access(e),u=p.extend({},s),M.set(t,u))}}function pe(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&p.nodeName(e,t)?p.merge([e],n):n}ae.optgroup=ae.option,ae.tbody=ae.tfoot=ae.colgroup=ae.caption=ae.thead,ae.th=ae.td,p.extend({clone:function(e,t,n){var r,i,o,a,s,u,c,d=e.cloneNode(!0),f=p.contains(e.ownerDocument,e);if(!(l.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||p.isXMLDoc(e)))for(a=pe(d),r=0,i=(o=pe(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(c=u.nodeName.toLowerCase())&&H.test(s.type)?u.checked=s.checked:"input"!==c&&"textarea"!==c||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||pe(e),a=a||pe(d),r=0,i=o.length;r<i;r++)de(o[r],a[r]);else de(e,d);return(a=pe(d,"script")).length>0&&le(a,!f&&pe(e,"script")),d},buildFragment:function(e,t,n,r){for(var i,o,a,s,u,c,l=t.createDocumentFragment(),d=[],f=0,h=e.length;f<h;f++)if((i=e[f])||0===i)if("object"===p.type(i))p.merge(d,i.nodeType?[i]:i);else if(ee.test(i)){for(o=o||l.appendChild(t.createElement("div")),a=(X.exec(i)||["",""])[1].toLowerCase(),s=ae[a]||ae._default,o.innerHTML=s[1]+i.replace(J,"<$1></$2>")+s[2],c=s[0];c--;)o=o.lastChild;p.merge(d,o.childNodes),(o=l.firstChild).textContent=""}else d.push(t.createTextNode(i));for(l.textContent="",f=0;i=d[f++];)if((!r||-1===p.inArray(i,r))&&(u=p.contains(i.ownerDocument,i),o=pe(l.appendChild(i),"script"),u&&le(o),n))for(c=0;i=o[c++];)re.test(i.type||"")&&n.push(i);return l},cleanData:function(e){for(var t,n,r,i,o=p.event.special,a=0;void 0!==(n=e[a]);a++){if(p.acceptData(n)&&(i=n[x.expando])&&(t=x.cache[i])){if(t.events)for(r in t.events)o[r]?p.event.remove(n,r):p.removeEvent(n,r,t.handle);x.cache[i]&&delete x.cache[i]}delete M.cache[n[M.expando]]}}}),p.fn.extend({text:function(e){return D(this,function(e){return void 0===e?p.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||se(this,e).appendChild(e)})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=se(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?p.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||p.cleanData(pe(n)),n.parentNode&&(t&&p.contains(n.ownerDocument,n)&&le(pe(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(p.cleanData(pe(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return p.clone(this,e,t)})},html:function(e){return D(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!te.test(e)&&!ae[(X.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(J,"<$1></$2>");try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(p.cleanData(pe(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,p.cleanData(pe(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=i.apply([],e);var n,r,o,a,s,u,c=0,d=this.length,f=this,h=d-1,m=e[0],g=p.isFunction(m);if(g||d>1&&"string"==typeof m&&!l.checkClone&&ne.test(m))return this.each(function(n){var r=f.eq(n);g&&(e[0]=m.call(this,n,r.html())),r.domManip(e,t)});if(d&&(r=(n=p.buildFragment(e,this[0].ownerDocument,!1,this)).firstChild,1===n.childNodes.length&&(n=r),r)){for(a=(o=p.map(pe(n,"script"),ue)).length;c<d;c++)s=n,c!==h&&(s=p.clone(s,!0,!0),a&&p.merge(o,pe(s,"script"))),t.call(this[c],s,c);if(a)for(u=o[o.length-1].ownerDocument,p.map(o,ce),c=0;c<a;c++)s=o[c],re.test(s.type||"")&&!x.access(s,"globalEval")&&p.contains(u,s)&&(s.src?p._evalUrl&&p._evalUrl(s.src):p.globalEval(s.textContent.replace(oe,"")))}return this}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){p.fn[e]=function(e){for(var n,r=[],i=p(e),a=i.length-1,s=0;s<=a;s++)n=s===a?this:this.clone(!0),p(i[s])[t](n),o.apply(r,n.get());return this.pushStack(r)}});var fe,he={};function me(t,n){var r,i=p(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(i[0]))?r.display:p.css(i[0],"display");return i.detach(),o}function ge(e){var t=d,n=he[e];return n||("none"!==(n=me(e,t))&&n||((t=(fe=(fe||p("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),n=me(e,t),fe.detach()),he[e]=n),n}var ye=/^margin/,be=new RegExp("^("+q+")(?!px)[a-z%]+$","i"),ve=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)};function we(e,t,n){var r,i,o,a,s=e.style;return(n=n||ve(e))&&(a=n.getPropertyValue(t)||n[t]),n&&(""!==a||p.contains(e.ownerDocument,e)||(a=p.style(e,t)),be.test(a)&&ye.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function _e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){var t,n,r=d.documentElement,i=d.createElement("div"),o=d.createElement("div");function a(){o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o.innerHTML="",r.appendChild(i);var a=e.getComputedStyle(o,null);t="1%"!==a.top,n="4px"===a.width,r.removeChild(i)}o.style&&(o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===o.style.backgroundClip,i.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",i.appendChild(o),e.getComputedStyle&&p.extend(l,{pixelPosition:function(){return a(),t},boxSizingReliable:function(){return null==n&&a(),n},reliableMarginRight:function(){var t,n=o.appendChild(d.createElement("div"));return n.style.cssText=o.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",o.style.width="1px",r.appendChild(i),t=!parseFloat(e.getComputedStyle(n,null).marginRight),r.removeChild(i),o.removeChild(n),t}}))}(),p.swap=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=a[o];return i};var Ae=/^(none|table(?!-c[ea]).+)/,ke=new RegExp("^("+q+")(.*)$","i"),Te=new RegExp("^([+-])=("+q+")","i"),Ee={position:"absolute",visibility:"hidden",display:"block"},Ce={letterSpacing:"0",fontWeight:"400"},Re=["Webkit","O","Moz","ms"];function Se(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),r=t,i=Re.length;i--;)if((t=Re[i]+n)in e)return t;return r}function Oe(e,t,n){var r=ke.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Pe(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;o<4;o+=2)"margin"===n&&(a+=p.css(e,n+V[o],!0,i)),r?("content"===n&&(a-=p.css(e,"padding"+V[o],!0,i)),"margin"!==n&&(a-=p.css(e,"border"+V[o]+"Width",!0,i))):(a+=p.css(e,"padding"+V[o],!0,i),"padding"!==n&&(a+=p.css(e,"border"+V[o]+"Width",!0,i)));return a}function Ne(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=ve(e),a="border-box"===p.css(e,"boxSizing",!1,o);if(i<=0||null==i){if(((i=we(e,t,o))<0||null==i)&&(i=e.style[t]),be.test(i))return i;r=a&&(l.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+Pe(e,t,n||(a?"border":"content"),r,o)+"px"}function De(e,t){for(var n,r,i,o=[],a=0,s=e.length;a<s;a++)(r=e[a]).style&&(o[a]=x.get(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&U(r)&&(o[a]=x.access(r,"olddisplay",ge(r.nodeName)))):(i=U(r),"none"===n&&i||x.set(r,"olddisplay",i?n:p.css(r,"display"))));for(a=0;a<s;a++)(r=e[a]).style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function ze(e,t,n,r,i){return new ze.prototype.init(e,t,n,r,i)}p.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=we(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=p.camelCase(t),u=e.style;if(t=p.cssProps[s]||(p.cssProps[s]=Se(u,s)),a=p.cssHooks[t]||p.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:u[t];"string"===(o=typeof n)&&(i=Te.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(p.css(e,t)),o="number"),null!=n&&n==n&&("number"!==o||p.cssNumber[s]||(n+="px"),l.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u[t]=n))}},css:function(e,t,n,r){var i,o,a,s=p.camelCase(t);return t=p.cssProps[s]||(p.cssProps[s]=Se(e.style,s)),(a=p.cssHooks[t]||p.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=we(e,t,r)),"normal"===i&&t in Ce&&(i=Ce[t]),""===n||n?(o=parseFloat(i),!0===n||p.isNumeric(o)?o||0:i):i}}),p.each(["height","width"],function(e,t){p.cssHooks[t]={get:function(e,n,r){if(n)return Ae.test(p.css(e,"display"))&&0===e.offsetWidth?p.swap(e,Ee,function(){return Ne(e,t,r)}):Ne(e,t,r)},set:function(e,n,r){var i=r&&ve(e);return Oe(0,n,r?Pe(e,t,r,"border-box"===p.css(e,"boxSizing",!1,i),i):0)}}}),p.cssHooks.marginRight=_e(l.reliableMarginRight,function(e,t){if(t)return p.swap(e,{display:"inline-block"},we,[e,"marginRight"])}),p.each({margin:"",padding:"",border:"Width"},function(e,t){p.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+V[r]+t]=o[r]||o[r-2]||o[0];return i}},ye.test(e)||(p.cssHooks[e+t].set=Oe)}),p.fn.extend({css:function(e,t){return D(this,function(e,t,n){var r,i,o={},a=0;if(p.isArray(t)){for(r=ve(e),i=t.length;a<i;a++)o[t[a]]=p.css(e,t[a],!1,r);return o}return void 0!==n?p.style(e,t,n):p.css(e,t)},e,t,arguments.length>1)},show:function(){return De(this,!0)},hide:function(){return De(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){U(this)?p(this).show():p(this).hide()})}}),p.Tween=ze,ze.prototype={constructor:ze,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(p.cssNumber[n]?"":"px")},cur:function(){var e=ze.propHooks[this.prop];return e&&e.get?e.get(this):ze.propHooks._default.get(this)},run:function(e){var t,n=ze.propHooks[this.prop];return this.options.duration?this.pos=t=p.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ze.propHooks._default.set(this),this}},ze.prototype.init.prototype=ze.prototype,ze.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=p.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){p.fx.step[e.prop]?p.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[p.cssProps[e.prop]]||p.cssHooks[e.prop])?p.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},ze.propHooks.scrollTop=ze.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},p.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},p.fx=ze.prototype.init,p.fx.step={};var xe,Me,Le=/^(?:toggle|show|hide)$/,Ie=new RegExp("^(?:([+-])=|)("+q+")([a-z%]*)$","i"),Fe=/queueHooks$/,Be=[function(e,t,n){var r,i,o,a,s,u,c,l=this,d={},f=e.style,h=e.nodeType&&U(e),m=x.get(e,"fxshow");n.queue||(null==(s=p._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,u=s.empty.fire,s.empty.fire=function(){s.unqueued||u()}),s.unqueued++,l.always(function(){l.always(function(){s.unqueued--,p.queue(e,"fx").length||s.empty.fire()})}));1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],c=p.css(e,"display"),"inline"===("none"===c?x.get(e,"olddisplay")||ge(e.nodeName):c)&&"none"===p.css(e,"float")&&(f.display="inline-block"));n.overflow&&(f.overflow="hidden",l.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],Le.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(h?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;h=!0}d[r]=m&&m[r]||p.style(e,r)}else c=void 0;if(p.isEmptyObject(d))"inline"===("none"===c?ge(e.nodeName):c)&&(f.display=c);else for(r in m?"hidden"in m&&(h=m.hidden):m=x.access(e,"fxshow",{}),o&&(m.hidden=!h),h?p(e).show():l.done(function(){p(e).hide()}),l.done(function(){var t;for(t in x.remove(e,"fxshow"),d)p.style(e,t,d[t])}),d)a=Ue(h?m[r]:0,r,l),r in m||(m[r]=a.start,h&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}],je={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Ie.exec(t),o=i&&i[3]||(p.cssNumber[e]?"":"px"),a=(p.cssNumber[e]||"px"!==o&&+r)&&Ie.exec(p.css(n.elem,e)),s=1,u=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do{a/=s=s||".5",p.style(n.elem,e,a+o)}while(s!==(s=n.cur()/r)&&1!==s&&--u)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};function qe(){return setTimeout(function(){xe=void 0}),xe=p.now()}function Ve(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=V[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function Ue(e,t,n){for(var r,i=(je[t]||[]).concat(je["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function He(e,t,n){var r,i,o=0,a=Be.length,s=p.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=xe||qe(),n=Math.max(0,c.startTime+c.duration-t),r=1-(n/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(r);return s.notifyWith(e,[c,r,n]),r<1&&a?n:(s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:p.extend({},t),opts:p.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:xe||qe(),duration:n.duration,tweens:[],createTween:function(t,n){var r=p.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return t?s.resolveWith(e,[c,t]):s.rejectWith(e,[c,t]),this}}),l=c.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=p.camelCase(n)],o=e[n],p.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=p.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(l,c.opts.specialEasing);o<a;o++)if(r=Be[o].call(c,e,l,c.opts))return r;return p.map(l,Ue,c),p.isFunction(c.opts.start)&&c.opts.start.call(e,c),p.fx.timer(p.extend(u,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}p.Animation=p.extend(He,{tweener:function(e,t){p.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;r<i;r++)n=e[r],je[n]=je[n]||[],je[n].unshift(t)},prefilter:function(e,t){t?Be.unshift(e):Be.push(e)}}),p.speed=function(e,t,n){var r=e&&"object"==typeof e?p.extend({},e):{complete:n||!n&&t||p.isFunction(e)&&e,duration:e,easing:n&&t||t&&!p.isFunction(t)&&t};return r.duration=p.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in p.fx.speeds?p.fx.speeds[r.duration]:p.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){p.isFunction(r.old)&&r.old.call(this),r.queue&&p.dequeue(this,r.queue)},r},p.fn.extend({fadeTo:function(e,t,n,r){return this.filter(U).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=p.isEmptyObject(e),o=p.speed(t,n,r),a=function(){var t=He(this,p.extend({},e),o);(i||x.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=p.timers,a=x.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&Fe.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||p.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=x.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=p.timers,a=r?r.length:0;for(n.finish=!0,p.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),p.each(["toggle","show","hide"],function(e,t){var n=p.fn[t];p.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(Ve(t,!0),e,r,i)}}),p.each({slideDown:Ve("show"),slideUp:Ve("hide"),slideToggle:Ve("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){p.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),p.timers=[],p.fx.tick=function(){var e,t=0,n=p.timers;for(xe=p.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||p.fx.stop(),xe=void 0},p.fx.timer=function(e){p.timers.push(e),e()?p.fx.start():p.timers.pop()},p.fx.interval=13,p.fx.start=function(){Me||(Me=setInterval(p.fx.tick,p.fx.interval))},p.fx.stop=function(){clearInterval(Me),Me=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(e,t){return e=p.fx&&p.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=d.createElement("input"),t=d.createElement("select"),n=t.appendChild(d.createElement("option"));e.type="checkbox",l.checkOn=""!==e.value,l.optSelected=n.selected,t.disabled=!0,l.optDisabled=!n.disabled,(e=d.createElement("input")).value="t",e.type="radio",l.radioValue="t"===e.value}();var We,$e=p.expr.attrHandle;p.fn.extend({attr:function(e,t){return D(this,p.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){p.removeAttr(this,e)})}}),p.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?p.prop(e,t,n):(1===o&&p.isXMLDoc(e)||(t=t.toLowerCase(),r=p.attrHooks[t]||(p.expr.match.bool.test(t)?We:void 0)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=p.find.attr(e,t))?void 0:i:null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void p.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(O);if(o&&1===e.nodeType)for(;n=o[i++];)r=p.propFix[n]||n,p.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!l.radioValue&&"radio"===t&&p.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),We={set:function(e,t,n){return!1===t?p.removeAttr(e,n):e.setAttribute(n,n),n}},p.each(p.expr.match.bool.source.match(/\w+/g),function(e,t){var n=$e[t]||p.find.attr;$e[t]=function(e,t,r){var i,o;return r||(o=$e[t],$e[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,$e[t]=o),i}});var Ge=/^(?:input|select|textarea|button)$/i;p.fn.extend({prop:function(e,t){return D(this,p.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[p.propFix[e]||e]})}}),p.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return(1!==o||!p.isXMLDoc(e))&&(t=p.propFix[t]||t,i=p.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||Ge.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),l.optSelected||(p.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this});var Ye=/[\t\r\n\f]/g;p.fn.extend({addClass:function(e){var t,n,r,i,o,a,s="string"==typeof e&&e,u=0,c=this.length;if(p.isFunction(e))return this.each(function(t){p(this).addClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(O)||[];u<c;u++)if(r=1===(n=this[u]).nodeType&&(n.className?(" "+n.className+" ").replace(Ye," "):" ")){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a=p.trim(r),n.className!==a&&(n.className=a)}return this},removeClass:function(e){var t,n,r,i,o,a,s=0===arguments.length||"string"==typeof e&&e,u=0,c=this.length;if(p.isFunction(e))return this.each(function(t){p(this).removeClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(O)||[];u<c;u++)if(r=1===(n=this[u]).nodeType&&(n.className?(" "+n.className+" ").replace(Ye," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");a=e?p.trim(r):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):p.isFunction(e)?this.each(function(n){p(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,r=0,i=p(this),o=e.match(O)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else"undefined"!==n&&"boolean"!==n||(this.className&&x.set(this,"__className__",this.className),this.className=this.className||!1===e?"":x.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;n<r;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Ye," ").indexOf(t)>=0)return!0;return!1}});var Ke=/\r/g;p.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=p.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,p(this).val()):e)?i="":"number"==typeof i?i+="":p.isArray(i)&&(i=p.map(i,function(e){return null==e?"":e+""})),(t=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=p.valHooks[i.type]||p.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(Ke,""):null==n?"":n:void 0}}),p.extend({valHooks:{option:{get:function(e){var t=p.find.attr(e,"value");return null!=t?t:p.trim(p.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||i<0,a=o?null:[],s=o?i+1:r.length,u=i<0?s:o?i:0;u<s;u++)if(((n=r[u]).selected||u===i)&&(l.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!p.nodeName(n.parentNode,"optgroup"))){if(t=p(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=p.makeArray(t),a=i.length;a--;)((r=i[a]).selected=p.inArray(r.value,o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(e,t){if(p.isArray(t))return e.checked=p.inArray(p(e).val(),t)>=0}},l.checkOn||(p.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){p.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),p.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Ze=p.now(),Qe=/\?/;p.parseJSON=function(e){return JSON.parse(e+"")},p.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||p.error("Invalid XML: "+e),t};var Je=/#.*$/,Xe=/([?&])_=[^&]*/,et=/^(.*?):[ \t]*([^\r\n]*)$/gm,tt=/^(?:GET|HEAD)$/,nt=/^\/\//,rt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,it={},ot={},at="*/".concat("*"),st=e.location.href,ut=rt.exec(st.toLowerCase())||[];function ct(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(O)||[];if(p.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function lt(e,t,n,r){var i={},o=e===ot;function a(s){var u;return i[s]=!0,p.each(e[s]||[],function(e,s){var c=s(t,n,r);return"string"!=typeof c||o||i[c]?o?!(u=c):void 0:(t.dataTypes.unshift(c),a(c),!1)}),u}return a(t.dataTypes[0])||!i["*"]&&a("*")}function dt(e,t){var n,r,i=p.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&p.extend(!0,e,r),e}p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:st,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ut[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":at,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?dt(dt(e,p.ajaxSettings),t):dt(p.ajaxSettings,e)},ajaxPrefilter:ct(it),ajaxTransport:ct(ot),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r,i,o,a,s,u,c,l=p.ajaxSetup({},t),d=l.context||l,f=l.context&&(d.nodeType||d.jquery)?p(d):p.event,h=p.Deferred(),m=p.Callbacks("once memory"),g=l.statusCode||{},y={},b={},v=0,w="canceled",_={readyState:0,getResponseHeader:function(e){var t;if(2===v){if(!o)for(o={};t=et.exec(i);)o[t[1].toLowerCase()]=t[2];t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===v?i:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return v||(e=b[n]=b[n]||e,y[e]=t),this},overrideMimeType:function(e){return v||(l.mimeType=e),this},statusCode:function(e){var t;if(e)if(v<2)for(t in e)g[t]=[g[t],e[t]];else _.always(e[_.status]);return this},abort:function(e){var t=e||w;return n&&n.abort(t),A(0,t),this}};if(h.promise(_).complete=m.add,_.success=_.done,_.error=_.fail,l.url=((e||l.url||st)+"").replace(Je,"").replace(nt,ut[1]+"//"),l.type=t.method||t.type||l.method||l.type,l.dataTypes=p.trim(l.dataType||"*").toLowerCase().match(O)||[""],null==l.crossDomain&&(s=rt.exec(l.url.toLowerCase()),l.crossDomain=!(!s||s[1]===ut[1]&&s[2]===ut[2]&&(s[3]||("http:"===s[1]?"80":"443"))===(ut[3]||("http:"===ut[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=p.param(l.data,l.traditional)),lt(it,l,t,_),2===v)return _;for(c in(u=p.event&&l.global)&&0==p.active++&&p.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!tt.test(l.type),r=l.url,l.hasContent||(l.data&&(r=l.url+=(Qe.test(r)?"&":"?")+l.data,delete l.data),!1===l.cache&&(l.url=Xe.test(r)?r.replace(Xe,"$1_="+Ze++):r+(Qe.test(r)?"&":"?")+"_="+Ze++)),l.ifModified&&(p.lastModified[r]&&_.setRequestHeader("If-Modified-Since",p.lastModified[r]),p.etag[r]&&_.setRequestHeader("If-None-Match",p.etag[r])),(l.data&&l.hasContent&&!1!==l.contentType||t.contentType)&&_.setRequestHeader("Content-Type",l.contentType),_.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+at+"; q=0.01":""):l.accepts["*"]),l.headers)_.setRequestHeader(c,l.headers[c]);if(l.beforeSend&&(!1===l.beforeSend.call(d,_,l)||2===v))return _.abort();for(c in w="abort",{success:1,error:1,complete:1})_[c](l[c]);if(n=lt(ot,l,t,_)){_.readyState=1,u&&f.trigger("ajaxSend",[_,l]),l.async&&l.timeout>0&&(a=setTimeout(function(){_.abort("timeout")},l.timeout));try{v=1,n.send(y,A)}catch(e){if(!(v<2))throw e;A(-1,e)}}else A(-1,"No Transport");function A(e,t,o,s){var c,y,b,w,A,k=t;2!==v&&(v=2,a&&clearTimeout(a),n=void 0,i=s||"",_.readyState=e>0?4:0,c=e>=200&&e<300||304===e,o&&(w=function(e,t,n){for(var r,i,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(l,_,o)),w=function(e,t,n,r){var i,o,a,s,u,c={},l=e.dataTypes.slice();if(l[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=l.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=c[u+" "+o]||c["* "+o]))for(i in c)if((s=i.split(" "))[1]===o&&(a=c[u+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[i]:!0!==c[i]&&(o=s[0],l.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(l,w,_,c),c?(l.ifModified&&((A=_.getResponseHeader("Last-Modified"))&&(p.lastModified[r]=A),(A=_.getResponseHeader("etag"))&&(p.etag[r]=A)),204===e||"HEAD"===l.type?k="nocontent":304===e?k="notmodified":(k=w.state,y=w.data,c=!(b=w.error))):(b=k,!e&&k||(k="error",e<0&&(e=0))),_.status=e,_.statusText=(t||k)+"",c?h.resolveWith(d,[y,k,_]):h.rejectWith(d,[_,k,b]),_.statusCode(g),g=void 0,u&&f.trigger(c?"ajaxSuccess":"ajaxError",[_,l,c?y:b]),m.fireWith(d,[_,k]),u&&(f.trigger("ajaxComplete",[_,l]),--p.active||p.event.trigger("ajaxStop")))}return _},getJSON:function(e,t,n){return p.get(e,t,n,"json")},getScript:function(e,t){return p.get(e,void 0,t,"script")}}),p.each(["get","post"],function(e,t){p[t]=function(e,n,r,i){return p.isFunction(n)&&(i=i||r,r=n,n=void 0),p.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),p._evalUrl=function(e){return p.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},p.fn.extend({wrapAll:function(e){var t;return p.isFunction(e)?this.each(function(t){p(this).wrapAll(e.call(this,t))}):(this[0]&&(t=p(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return p.isFunction(e)?this.each(function(t){p(this).wrapInner(e.call(this,t))}):this.each(function(){var t=p(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=p.isFunction(e);return this.each(function(n){p(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()}}),p.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},p.expr.filters.visible=function(e){return!p.expr.filters.hidden(e)};var pt=/%20/g,ft=/\[\]$/,ht=/\r?\n/g,mt=/^(?:submit|button|image|reset|file)$/i,gt=/^(?:input|select|textarea|keygen)/i;function yt(e,t,n,r){var i;if(p.isArray(t))p.each(t,function(t,i){n||ft.test(e)?r(e,i):yt(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==p.type(t))r(e,t);else for(i in t)yt(e+"["+i+"]",t[i],n,r)}p.param=function(e,t){var n,r=[],i=function(e,t){t=p.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=p.ajaxSettings&&p.ajaxSettings.traditional),p.isArray(e)||e.jquery&&!p.isPlainObject(e))p.each(e,function(){i(this.name,this.value)});else for(n in e)yt(n,e[n],t,i);return r.join("&").replace(pt,"+")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=p.prop(this,"elements");return e?p.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!p(this).is(":disabled")&&gt.test(this.nodeName)&&!mt.test(e)&&(this.checked||!H.test(e))}).map(function(e,t){var n=p(this).val();return null==n?null:p.isArray(n)?p.map(n,function(e){return{name:t.name,value:e.replace(ht,"\r\n")}}):{name:t.name,value:n.replace(ht,"\r\n")}}).get()}}),p.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var bt=0,vt={},wt={0:200,1223:204},_t=p.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in vt)vt[e]()}),l.cors=!!_t&&"withCredentials"in _t,l.ajax=_t=!!_t,p.ajaxTransport(function(e){var t;if(l.cors||_t&&!e.crossDomain)return{send:function(n,r){var i,o=e.xhr(),a=++bt;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];for(i in e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)o.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete vt[a],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?r(o.status,o.statusText):r(wt[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=vt[a]=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return p.globalEval(e),e}}}),p.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),p.ajaxTransport("script",function(e){var t,n;if(e.crossDomain)return{send:function(r,i){t=p("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),d.head.appendChild(t[0])},abort:function(){n&&n()}}});var At=[],kt=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=At.pop()||p.expando+"_"+Ze++;return this[e]=!0,e}}),p.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=!1!==t.jsonp&&(kt.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&kt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=p.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(kt,"$1"+i):!1!==t.jsonp&&(t.url+=(Qe.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||p.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,At.push(i)),a&&p.isFunction(o)&&o(a[0]),a=o=void 0}),"script"}),p.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||d;var r=w.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=p.buildFragment([e],t,i),i&&i.length&&p(i).remove(),p.merge([],r.childNodes))};var Tt=p.fn.load;p.fn.load=function(e,t,n){if("string"!=typeof e&&Tt)return Tt.apply(this,arguments);var r,i,o,a=this,s=e.indexOf(" ");return s>=0&&(r=p.trim(e.slice(s)),e=e.slice(0,s)),p.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&p.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?p("<div>").append(p.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){a.each(n,o||[e.responseText,t,e])}),this},p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){p.fn[t]=function(e){return this.on(t,e)}}),p.expr.filters.animated=function(e){return p.grep(p.timers,function(t){return e===t.elem}).length};var Et=e.document.documentElement;function Ct(e){return p.isWindow(e)?e:9===e.nodeType&&e.defaultView}p.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,c=p.css(e,"position"),l=p(e),d={};"static"===c&&(e.style.position="relative"),s=l.offset(),o=p.css(e,"top"),u=p.css(e,"left"),("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1?(a=(r=l.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),p.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+i),"using"in t?t.using.call(e,d):l.css(d)}},p.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){p.offset.setOffset(this,e,t)});var t,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;return o?(t=o.documentElement,p.contains(t,r)?(void 0!==r.getBoundingClientRect&&(i=r.getBoundingClientRect()),n=Ct(o),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i):void 0},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===p.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),p.nodeName(e[0],"html")||(r=e.offset()),r.top+=p.css(e[0],"borderTopWidth",!0),r.left+=p.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-p.css(n,"marginTop",!0),left:t.left-r.left-p.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Et;e&&!p.nodeName(e,"html")&&"static"===p.css(e,"position");)e=e.offsetParent;return e||Et})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var r="pageYOffset"===n;p.fn[t]=function(i){return D(this,function(t,i,o){var a=Ct(t);if(void 0===o)return a?a[n]:t[i];a?a.scrollTo(r?e.pageXOffset:o,r?o:e.pageYOffset):t[i]=o},t,i,arguments.length,null)}}),p.each(["top","left"],function(e,t){p.cssHooks[t]=_e(l.pixelPosition,function(e,n){if(n)return n=we(e,t),be.test(n)?p(e).position()[t]+"px":n})}),p.each({Height:"height",Width:"width"},function(e,t){p.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){p.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===i?"margin":"border");return D(this,function(t,n,r){var i;return p.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?p.css(t,n,a):p.style(t,n,r,a)},t,o?r:void 0,o,null)}})}),p.fn.size=function(){return this.length},p.fn.andSelf=p.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return p});var Rt=e.jQuery,St=e.$;return p.noConflict=function(t){return e.$===p&&(e.$=St),t&&e.jQuery===p&&(e.jQuery=Rt),p},void 0===t&&(e.jQuery=e.$=p),p}),function(){var e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{},t=e._,n=Array.prototype,r=Object.prototype,i="undefined"!=typeof Symbol?Symbol.prototype:null,o=n.push,a=n.slice,s=r.toString,u=r.hasOwnProperty,c=Array.isArray,l=Object.keys,d=Object.create,p=function(){},f=function(e){return e instanceof f?e:this instanceof f?void(this._wrapped=e):new f(e)};"undefined"==typeof exports||exports.nodeType?e._=f:("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=f),exports._=f),f.VERSION="1.9.2";var h,m=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}},g=function(e,t,n){return f.iteratee!==h?f.iteratee(e,t):null==e?f.identity:f.isFunction(e)?m(e,t,n):f.isObject(e)&&!f.isArray(e)?f.matcher(e):f.property(e)};f.iteratee=h=function(e,t){return g(e,t,1/0)};var y=function(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var o=Array(t+1);for(i=0;i<t;i++)o[i]=arguments[i];return o[t]=r,e.apply(this,o)}},b=function(e){if(!f.isObject(e))return{};if(d)return d(e);p.prototype=e;var t=new p;return p.prototype=null,t},v=function(e){return function(t){return null==t?void 0:t[e]}},w=function(e,t){return null!=e&&u.call(e,t)},_=function(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0},A=Math.pow(2,53)-1,k=v("length"),T=function(e){var t=k(e);return"number"==typeof t&&t>=0&&t<=A};f.each=f.forEach=function(e,t,n){var r,i;if(t=m(t,n),T(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=f.keys(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e},f.map=f.collect=function(e,t,n){t=g(t,n);for(var r=!T(e)&&f.keys(e),i=(r||e).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=t(e[s],s,e)}return o};var E=function(e){return function(t,n,r,i){var o=arguments.length>=3;return function(t,n,r,i){var o=!T(t)&&f.keys(t),a=(o||t).length,s=e>0?0:a-1;for(i||(r=t[o?o[s]:s],s+=e);s>=0&&s<a;s+=e){var u=o?o[s]:s;r=n(r,t[u],u,t)}return r}(t,m(n,i,4),r,o)}};f.reduce=f.foldl=f.inject=E(1),f.reduceRight=f.foldr=E(-1),f.find=f.detect=function(e,t,n){var r=(T(e)?f.findIndex:f.findKey)(e,t,n);if(void 0!==r&&-1!==r)return e[r]},f.filter=f.select=function(e,t,n){var r=[];return t=g(t,n),f.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},f.reject=function(e,t,n){return f.filter(e,f.negate(g(t)),n)},f.every=f.all=function(e,t,n){t=g(t,n);for(var r=!T(e)&&f.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(!t(e[a],a,e))return!1}return!0},f.some=f.any=function(e,t,n){t=g(t,n);for(var r=!T(e)&&f.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(t(e[a],a,e))return!0}return!1},f.contains=f.includes=f.include=function(e,t,n,r){return T(e)||(e=f.values(e)),("number"!=typeof n||r)&&(n=0),f.indexOf(e,t,n)>=0},f.invoke=y(function(e,t,n){var r,i;return f.isFunction(t)?i=t:f.isArray(t)&&(r=t.slice(0,-1),t=t[t.length-1]),f.map(e,function(e){var o=i;if(!o){if(r&&r.length&&(e=_(e,r)),null==e)return;o=e[t]}return null==o?o:o.apply(e,n)})}),f.pluck=function(e,t){return f.map(e,f.property(t))},f.where=function(e,t){return f.filter(e,f.matcher(t))},f.findWhere=function(e,t){return f.find(e,f.matcher(t))},f.max=function(e,t,n){var r,i,o=-1/0,a=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,u=(e=T(e)?e:f.values(e)).length;s<u;s++)null!=(r=e[s])&&r>o&&(o=r);else t=g(t,n),f.each(e,function(e,n,r){((i=t(e,n,r))>a||i===-1/0&&o===-1/0)&&(o=e,a=i)});return o},f.min=function(e,t,n){var r,i,o=1/0,a=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,u=(e=T(e)?e:f.values(e)).length;s<u;s++)null!=(r=e[s])&&r<o&&(o=r);else t=g(t,n),f.each(e,function(e,n,r){((i=t(e,n,r))<a||i===1/0&&o===1/0)&&(o=e,a=i)});return o},f.shuffle=function(e){return f.sample(e,1/0)},f.sample=function(e,t,n){if(null==t||n)return T(e)||(e=f.values(e)),e[f.random(e.length-1)];var r=T(e)?f.clone(e):f.values(e),i=k(r);t=Math.max(Math.min(t,i),0);for(var o=i-1,a=0;a<t;a++){var s=f.random(a,o),u=r[a];r[a]=r[s],r[s]=u}return r.slice(0,t)},f.sortBy=function(e,t,n){var r=0;return t=g(t,n),f.pluck(f.map(e,function(e,n,i){return{value:e,index:r++,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};var C=function(e,t){return function(n,r,i){var o=t?[[],[]]:{};return r=g(r,i),f.each(n,function(t,i){var a=r(t,i,n);e(o,t,a)}),o}};f.groupBy=C(function(e,t,n){w(e,n)?e[n].push(t):e[n]=[t]}),f.indexBy=C(function(e,t,n){e[n]=t}),f.countBy=C(function(e,t,n){w(e,n)?e[n]++:e[n]=1});var R=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;f.toArray=function(e){return e?f.isArray(e)?a.call(e):f.isString(e)?e.match(R):T(e)?f.map(e,f.identity):f.values(e):[]},f.size=function(e){return null==e?0:T(e)?e.length:f.keys(e).length},f.partition=C(function(e,t,n){e[n?0:1].push(t)},!0),f.first=f.head=f.take=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[0]:f.initial(e,e.length-t)},f.initial=function(e,t,n){return a.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},f.last=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[e.length-1]:f.rest(e,Math.max(0,e.length-t))},f.rest=f.tail=f.drop=function(e,t,n){return a.call(e,null==t||n?1:t)},f.compact=function(e){return f.filter(e,Boolean)};var S=function(e,t,n,r){for(var i=(r=r||[]).length,o=0,a=k(e);o<a;o++){var s=e[o];if(T(s)&&(f.isArray(s)||f.isArguments(s)))if(t)for(var u=0,c=s.length;u<c;)r[i++]=s[u++];else S(s,t,n,r),i=r.length;else n||(r[i++]=s)}return r};f.flatten=function(e,t){return S(e,t,!1)},f.without=y(function(e,t){return f.difference(e,t)}),f.uniq=f.unique=function(e,t,n,r){f.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=g(n,r));for(var i=[],o=[],a=0,s=k(e);a<s;a++){var u=e[a],c=n?n(u,a,e):u;t&&!n?(a&&o===c||i.push(u),o=c):n?f.contains(o,c)||(o.push(c),i.push(u)):f.contains(i,u)||i.push(u)}return i},f.union=y(function(e){return f.uniq(S(e,!0,!0))}),f.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=k(e);r<i;r++){var o=e[r];if(!f.contains(t,o)){var a;for(a=1;a<n&&f.contains(arguments[a],o);a++);a===n&&t.push(o)}}return t},f.difference=y(function(e,t){return t=S(t,!0,!0),f.filter(e,function(e){return!f.contains(t,e)})}),f.unzip=function(e){for(var t=e&&f.max(e,k).length||0,n=Array(t),r=0;r<t;r++)n[r]=f.pluck(e,r);return n},f.zip=y(f.unzip),f.object=function(e,t){for(var n={},r=0,i=k(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n};var O=function(e){return function(t,n,r){n=g(n,r);for(var i=k(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}};f.findIndex=O(1),f.findLastIndex=O(-1),f.sortedIndex=function(e,t,n,r){for(var i=(n=g(n,r,1))(t),o=0,a=k(e);o<a;){var s=Math.floor((o+a)/2);n(e[s])<i?o=s+1:a=s}return o};var P=function(e,t,n){return function(r,i,o){var s=0,u=k(r);if("number"==typeof o)e>0?s=o>=0?o:Math.max(o+u,s):u=o>=0?Math.min(o+1,u):o+u+1;else if(n&&o&&u)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=t(a.call(r,s,u),f.isNaN))>=0?o+s:-1;for(o=e>0?s:u-1;o>=0&&o<u;o+=e)if(r[o]===i)return o;return-1}};f.indexOf=P(1,f.findIndex,f.sortedIndex),f.lastIndexOf=P(-1,f.findLastIndex),f.range=function(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i},f.chunk=function(e,t){if(null==t||t<1)return[];for(var n=[],r=0,i=e.length;r<i;)n.push(a.call(e,r,r+=t));return n};var N=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=b(e.prototype),a=e.apply(o,i);return f.isObject(a)?a:o};f.bind=y(function(e,t,n){if(!f.isFunction(e))throw new TypeError("Bind must be called on a function");var r=y(function(i){return N(e,r,t,this,n.concat(i))});return r}),f.partial=y(function(e,t){var n=f.partial.placeholder,r=function(){for(var i=0,o=t.length,a=Array(o),s=0;s<o;s++)a[s]=t[s]===n?arguments[i++]:t[s];for(;i<arguments.length;)a.push(arguments[i++]);return N(e,r,this,this,a)};return r}),f.partial.placeholder=f,f.bindAll=y(function(e,t){var n=(t=S(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=f.bind(e[r],e)}}),f.memoize=function(e,t){var n=function(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return w(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},f.delay=y(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),f.defer=f.partial(f.delay,f,1),f.throttle=function(e,t,n){var r,i,o,a,s=0;n||(n={});var u=function(){s=!1===n.leading?0:f.now(),r=null,a=e.apply(i,o),r||(i=o=null)},c=function(){var c=f.now();s||!1!==n.leading||(s=c);var l=t-(c-s);return i=this,o=arguments,l<=0||l>t?(r&&(clearTimeout(r),r=null),s=c,a=e.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(u,l)),a};return c.cancel=function(){clearTimeout(r),s=0,r=i=o=null},c},f.debounce=function(e,t,n){var r,i,o=function(t,n){r=null,n&&(i=e.apply(t,n))},a=y(function(a){if(r&&clearTimeout(r),n){var s=!r;r=setTimeout(o,t),s&&(i=e.apply(this,a))}else r=f.delay(o,t,this,a);return i});return a.cancel=function(){clearTimeout(r),r=null},a},f.wrap=function(e,t){return f.partial(t,e)},f.negate=function(e){return function(){return!e.apply(this,arguments)}},f.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},f.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},f.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},f.once=f.partial(f.before,2),f.restArguments=y;var D=!{toString:null}.propertyIsEnumerable("toString"),z=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],x=function(e,t){var n=z.length,i=e.constructor,o=f.isFunction(i)&&i.prototype||r,a="constructor";for(w(e,a)&&!f.contains(t,a)&&t.push(a);n--;)(a=z[n])in e&&e[a]!==o[a]&&!f.contains(t,a)&&t.push(a)};f.keys=function(e){if(!f.isObject(e))return[];if(l)return l(e);var t=[];for(var n in e)w(e,n)&&t.push(n);return D&&x(e,t),t},f.allKeys=function(e){if(!f.isObject(e))return[];var t=[];for(var n in e)t.push(n);return D&&x(e,t),t},f.values=function(e){for(var t=f.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},f.mapObject=function(e,t,n){t=g(t,n);for(var r=f.keys(e),i=r.length,o={},a=0;a<i;a++){var s=r[a];o[s]=t(e[s],s,e)}return o},f.pairs=function(e){for(var t=f.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},f.invert=function(e){for(var t={},n=f.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},f.functions=f.methods=function(e){var t=[];for(var n in e)f.isFunction(e[n])&&t.push(n);return t.sort()};var M=function(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=e(o),s=a.length,u=0;u<s;u++){var c=a[u];t&&void 0!==n[c]||(n[c]=o[c])}return n}};f.extend=M(f.allKeys),f.extendOwn=f.assign=M(f.keys),f.findKey=function(e,t,n){t=g(t,n);for(var r,i=f.keys(e),o=0,a=i.length;o<a;o++)if(t(e[r=i[o]],r,e))return r};var L,I,F=function(e,t,n){return t in n};f.pick=y(function(e,t){var n={},r=t[0];if(null==e)return n;f.isFunction(r)?(t.length>1&&(r=m(r,t[1])),t=f.allKeys(e)):(r=F,t=S(t,!1,!1),e=Object(e));for(var i=0,o=t.length;i<o;i++){var a=t[i],s=e[a];r(s,a,e)&&(n[a]=s)}return n}),f.omit=y(function(e,t){var n,r=t[0];return f.isFunction(r)?(r=f.negate(r),t.length>1&&(n=t[1])):(t=f.map(S(t,!1,!1),String),r=function(e,n){return!f.contains(t,n)}),f.pick(e,r,n)}),f.defaults=M(f.allKeys,!0),f.create=function(e,t){var n=b(e);return t&&f.extendOwn(n,t),n},f.clone=function(e){return f.isObject(e)?f.isArray(e)?e.slice():f.extend({},e):e},f.tap=function(e,t){return t(e),e},f.isMatch=function(e,t){var n=f.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var a=n[o];if(t[a]!==i[a]||!(a in i))return!1}return!0},L=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var i=typeof e;return("function"===i||"object"===i||"object"==typeof t)&&I(e,t,n,r)},I=function(e,t,n,r){e instanceof f&&(e=e._wrapped),t instanceof f&&(t=t._wrapped);var o=s.call(e);if(o!==s.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return i.valueOf.call(e)===i.valueOf.call(t)}var a="[object Array]"===o;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var u=e.constructor,c=t.constructor;if(u!==c&&!(f.isFunction(u)&&u instanceof u&&f.isFunction(c)&&c instanceof c)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var l=n.length;l--;)if(n[l]===e)return r[l]===t;if(n.push(e),r.push(t),a){if((l=e.length)!==t.length)return!1;for(;l--;)if(!L(e[l],t[l],n,r))return!1}else{var d,p=f.keys(e);if(l=p.length,f.keys(t).length!==l)return!1;for(;l--;)if(d=p[l],!w(t,d)||!L(e[d],t[d],n,r))return!1}return n.pop(),r.pop(),!0},f.isEqual=function(e,t){return L(e,t)},f.isEmpty=function(e){return null==e||(T(e)&&(f.isArray(e)||f.isString(e)||f.isArguments(e))?0===e.length:0===f.keys(e).length)},f.isElement=function(e){return!(!e||1!==e.nodeType)},f.isArray=c||function(e){return"[object Array]"===s.call(e)},f.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},f.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(e){f["is"+e]=function(t){return s.call(t)==="[object "+e+"]"}}),f.isArguments(arguments)||(f.isArguments=function(e){return w(e,"callee")});var B=e.document&&e.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof B&&(f.isFunction=function(e){return"function"==typeof e||!1}),f.isFinite=function(e){return!f.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},f.isNaN=function(e){return f.isNumber(e)&&isNaN(e)},f.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===s.call(e)},f.isNull=function(e){return null===e},f.isUndefined=function(e){return void 0===e},f.has=function(e,t){if(!f.isArray(t))return w(e,t);for(var n=t.length,r=0;r<n;r++){var i=t[r];if(null==e||!u.call(e,i))return!1;e=e[i]}return!!n},f.noConflict=function(){return e._=t,this},f.identity=function(e){return e},f.constant=function(e){return function(){return e}},f.noop=function(){},f.property=function(e){return f.isArray(e)?function(t){return _(t,e)}:v(e)},f.propertyOf=function(e){return null==e?function(){}:function(t){return f.isArray(t)?_(e,t):e[t]}},f.matcher=f.matches=function(e){return e=f.extendOwn({},e),function(t){return f.isMatch(t,e)}},f.times=function(e,t,n){var r=Array(Math.max(0,e));t=m(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},f.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},f.now=Date.now||function(){return(new Date).getTime()};var j={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},q=f.invert(j),V=function(e){var t=function(t){return e[t]},n="(?:"+f.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};f.escape=V(j),f.unescape=V(q),f.result=function(e,t,n){f.isArray(t)||(t=[t]);var r=t.length;if(!r)return f.isFunction(n)?n.call(e):n;for(var i=0;i<r;i++){var o=null==e?void 0:e[t[i]];void 0===o&&(o=n,i=r),e=f.isFunction(o)?o.call(e):o}return e};var U=0;f.uniqueId=function(e){var t=++U+"";return e?e+t:t},f.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,W={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},$=/\\|'|\r|\n|\u2028|\u2029/g,G=function(e){return"\\"+W[e]};f.template=function(e,t,n){!t&&n&&(t=n),t=f.defaults({},t,f.templateSettings);var r,i=RegExp([(t.escape||H).source,(t.interpolate||H).source,(t.evaluate||H).source].join("|")+"|$","g"),o=0,a="__p+='";e.replace(i,function(t,n,r,i,s){return a+=e.slice(o,s).replace($,G),o=s+t.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(a+="';\n"+i+"\n__p+='"),t}),a+="';\n",t.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(t.variable||"obj","_",a)}catch(e){throw e.source=a,e}var s=function(e){return r.call(this,e,f)},u=t.variable||"obj";return s.source="function("+u+"){\n"+a+"}",s},f.chain=function(e){var t=f(e);return t._chain=!0,t};var Y=function(e,t){return e._chain?f(t).chain():t};f.mixin=function(e){return f.each(f.functions(e),function(t){var n=f[t]=e[t];f.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),Y(this,n.apply(f,e))}}),f},f.mixin(f),f.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];f.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],Y(this,n)}}),f.each(["concat","join","slice"],function(e){var t=n[e];f.prototype[e]=function(){return Y(this,t.apply(this._wrapped,arguments))}}),f.prototype.value=function(){return this._wrapped},f.prototype.valueOf=f.prototype.toJSON=f.prototype.value,f.prototype.toString=function(){return String(this._wrapped)},"function"==typeof define&&define.amd&&define("underscore",[],function(){return f})}(),function(){var e,t=this,n=t.Backbone,r=[],i=r.push,o=r.slice,a=r.splice;(e="undefined"!=typeof exports?exports:t.Backbone={}).VERSION="1.0.0";var s=t._;s||"undefined"==typeof require||(s=require("underscore")),e.$=t.jQuery||t.Zepto||t.ender||t.$,e.noConflict=function(){return t.Backbone=n,this},e.emulateHTTP=!1,e.emulateJSON=!1;var u=e.Events={on:function(e,t,n){return l(this,"on",e,[t,n])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=s.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,o,a,u,c,d,p;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(u=0,c=(a=e?[e]:s.keys(this._events)).length;u<c;u++)if(e=a[u],o=this._events[e]){if(this._events[e]=r=[],t||n)for(d=0,p=o.length;d<p;d++)i=o[d],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=o.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&d(n,t),r&&d(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;for(var o in"object"==typeof t&&(n=this),e&&((r={})[e._listenerId]=e),r)r[o].off(t,n,this),i&&delete this._listeners[o];return this}},c=/\s+/,l=function(e,t,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(c.test(n)){for(var o=n.split(c),a=0,s=o.length;a<s;a++)e[t].apply(e,[o[a]].concat(r));return!1}return!0},d=function(e,t){var n,r=-1,i=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a,s);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t)}};s.each({listenTo:"on",listenToOnce:"once"},function(e,t){u[t]=function(t,n,r){return(this._listeners||(this._listeners={}))[t._listenerId||(t._listenerId=s.uniqueId("l"))]=t,"object"==typeof n&&(r=this),t[e](n,r,this),this}}),u.bind=u.on,u.unbind=u.off,s.extend(e,u);var p=e.Model=function(e,t){var n,r=e||{};t||(t={}),this.cid=s.uniqueId("c"),this.attributes={},s.extend(this,s.pick(t,f)),t.parse&&(r=this.parse(r,t)||{}),(n=s.result(this,"defaults"))&&(r=s.defaults({},r,n)),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},f=["url","urlRoot","collection"];s.extend(p.prototype,u,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return s.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return s.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var r,i,o,a,u,c,l,d;if(null==e)return this;if("object"==typeof e?(i=e,n=t):(i={})[e]=t,n||(n={}),!this._validate(i,n))return!1;for(r in o=n.unset,u=n.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=s.clone(this.attributes),this.changed={}),d=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]),i)t=i[r],s.isEqual(d[r],t)||a.push(r),s.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,o?delete d[r]:d[r]=t;if(!u){a.length&&(this._pending=!0);for(var p=0,f=a.length;p<f;p++)this.trigger("change:"+a[p],this,d[a[p]],n)}if(c)return this;if(!u)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,s.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,s.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!s.isEmpty(this.changed):s.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&s.clone(this.changed);var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e)s.isEqual(r[i],t=e[i])||((n||(n={}))[i]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return s.clone(this._previousAttributes)},fetch:function(e){void 0===(e=e?s.clone(e):{}).parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},D(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,o,a=this.attributes;if(null==e||"object"==typeof e?(r=e,n=t):(r={})[e]=t,r&&(!n||!n.wait)&&!this.set(r,n))return!1;if(n=s.extend({validate:!0},n),!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=s.extend({},a,r)),void 0===n.parse&&(n.parse=!0);var u=this,c=n.success;return n.success=function(e){u.attributes=a;var t=u.parse(e,n);if(n.wait&&(t=s.extend(r||{},t)),s.isObject(t)&&!u.set(t,n))return!1;c&&c(u,e,n),u.trigger("sync",u,e,n)},D(this,n),"patch"===(i=this.isNew()?"create":n.patch?"patch":"update")&&(n.attrs=r),o=this.sync(i,this,n),r&&n.wait&&(this.attributes=a),o},destroy:function(e){var t=this,n=(e=e?s.clone(e):{}).success,r=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)},this.isNew())return e.success(),!1;D(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=s.result(this,"urlRoot")||s.result(this.collection,"url")||N();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},s.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=s.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return!n||(this.trigger("invalid",this,n,s.extend(t||{},{validationError:n})),!1)}});s.each(["keys","values","pairs","invert","pick","omit"],function(e){p.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.attributes),s[e].apply(s,t)}});var h=e.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,s.extend({silent:!0},t))},m={add:!0,remove:!0,merge:!0},g={add:!0,merge:!1,remove:!1};s.extend(h.prototype,u,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return e.sync.apply(this,arguments)},add:function(e,t){return this.set(e,s.defaults(t||{},g))},remove:function(e,t){var n,r,i,o;for(e=s.isArray(e)?e.slice():[e],t||(t={}),n=0,r=e.length;n<r;n++)(o=this.get(e[n]))&&(delete this._byId[o.id],delete this._byId[o.cid],i=this.indexOf(o),this.models.splice(i,1),this.length--,t.silent||(t.index=i,o.trigger("remove",o,this,t)),this._removeReference(o));return this},set:function(e,t){var n,r,o,u,c;(t=s.defaults(t||{},m)).parse&&(e=this.parse(e,t)),s.isArray(e)||(e=e?[e]:[]);var l=t.at,d=this.comparator&&null==l&&!1!==t.sort,p=s.isString(this.comparator)?this.comparator:null,f=[],h=[],g={};for(n=0,r=e.length;n<r;n++)(o=this._prepareModel(e[n],t))&&((u=this.get(o))?(t.remove&&(g[u.cid]=!0),t.merge&&(u.set(o.attributes,t),d&&!c&&u.hasChanged(p)&&(c=!0))):t.add&&(f.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,null!=o.id&&(this._byId[o.id]=o)));if(t.remove){for(n=0,r=this.length;n<r;++n)g[(o=this.models[n]).cid]||h.push(o);h.length&&this.remove(h,t)}if(f.length&&(d&&(c=!0),this.length+=f.length,null!=l?a.apply(this.models,[l,0].concat(f)):i.apply(this.models,f)),c&&this.sort({silent:!0}),t.silent)return this;for(n=0,r=f.length;n<r;n++)(o=f[n]).trigger("add",o,this,t);return c&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,s.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,s.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,s.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){if(null!=e)return this._byId[null!=e.id?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return s.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),s.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(s.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=s.isFunction(t)?t:function(e){return e.get(t)};return s.sortedIndex(this.models,e,r,n)},pluck:function(e){return s.invoke(this.models,"get",e)},fetch:function(e){void 0===(e=e?s.clone(e):{}).parse&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},D(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?s.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});s.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"],function(e){h.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),s[e].apply(s,t)}});s.each(["groupBy","countBy","sortBy"],function(e){h.prototype[e]=function(t,n){var r=s.isFunction(t)?t:function(e){return e.get(t)};return s[e](this.models,r,n)}});var y=e.View=function(e){this.cid=s.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,v=["model","collection","el","id","attributes","className","tagName","events"];s.extend(y.prototype,u,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],!1!==n&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=s.result(this,"events")))return this;for(var t in this.undelegateEvents(),e){var n=e[t];if(s.isFunction(n)||(n=this[e[t]]),n){var r=t.match(b),i=r[1],o=r[2];n=s.bind(n,this),i+=".delegateEvents"+this.cid,""===o?this.$el.on(i,n):this.$el.on(i,o,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=s.extend({},s.result(this,"options"),e)),s.extend(this,s.pick(e,v)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(s.result(this,"el"),!1);else{var t=s.extend({},s.result(this,"attributes"));this.id&&(t.id=s.result(this,"id")),this.className&&(t.class=s.result(this,"className"));var n=e.$("<"+s.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,r){var i=w[t];s.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var o={type:i,dataType:"json"};if(r.url||(o.url=s.result(n,"url")||N()),null!=r.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(r.attrs||n.toJSON(r))),r.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),r.emulateHTTP&&("PUT"===i||"DELETE"===i||"PATCH"===i)){o.type="POST",r.emulateJSON&&(o.data._method=i);var a=r.beforeSend;r.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",i),a)return a.apply(this,arguments)}}"GET"===o.type||r.emulateJSON||(o.processData=!1),"PATCH"!==o.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var u=r.xhr=e.ajax(s.extend(o,r));return n.trigger("request",n,u,r),u};var w={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var _=e.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},A=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,T=/\*\w+/g,E=/[\-{}\[\]+?.,\\\^$|#\s]/g;s.extend(_.prototype,u,{initialize:function(){},route:function(t,n,r){s.isRegExp(t)||(t=this._routeToRegExp(t)),s.isFunction(n)&&(r=n,n=""),r||(r=this[n]);var i=this;return e.history.route(t,function(o){var a=i._extractParameters(t,o);r&&r.apply(i,a),i.trigger.apply(i,["route:"+n].concat(a)),i.trigger("route",n,a),e.history.trigger("route",i,n,a)}),this},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=s.result(this,"routes");for(var e,t=s.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(E,"\\$&").replace(A,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(T,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return s.map(n,function(e){return e?decodeURIComponent(e):null})}});var C=e.History=function(){this.handlers=[],s.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},R=/^[#\/]|\s+$/g,S=/^\/+|\/+$/g,O=/msie [\w.]+/,P=/\/$/;C.started=!1,s.extend(C.prototype,u,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(R,"")},start:function(t){if(C.started)throw new Error("Backbone.history has already been started");C.started=!0,this.options=s.extend({},{root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),r=document.documentMode,i=O.exec(navigator.userAgent.toLowerCase())&&(!r||r<=7);this.root=("/"+this.root+"/").replace(S,"/"),i&&this._wantsHashChange&&(this.iframe=e.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!i?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var o=this.location,a=o.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!a?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&a&&o.hash&&(this.fragment=this.getHash().replace(R,""),this.history.replaceState({},document.title,this.root+this.fragment+o.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),C.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e);return s.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(e,t){if(!C.started)return!1;if(t&&!0!==t||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),e.history=new C;p.extend=h.extend=_.extend=y.extend=C.extend=function(e,t){var n,r=this;n=e&&s.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},s.extend(n,r,t);var i=function(){this.constructor=n};return i.prototype=r.prototype,n.prototype=new i,e&&s.extend(n.prototype,e),n.__super__=r.prototype,n};var N=function(){throw new Error('A "url" property or function must be specified')},D=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(this),define("backbone",["underscore","jquery"],function(e){return function(){return e.Backbone}}(this)),function(e,t){"use strict";var n=e.Backbone;if("function"==typeof define&&define.amd)return define("backbone.layout",["backbone","underscore","jquery"],function(){return t.apply(e,arguments)});n.Layout=t.call(e,n,e._,n.$)}("object"==typeof global?global:this,function(e,t,n){"use strict";var r=this,i=e.View,o=Array.prototype.push,a=Array.prototype.concat,s=Array.prototype.splice,u=String.prototype.trim?t.bind(String.prototype.trim.call,String.prototype.trim):n.trim,c=e.View.extend({_render:function(){var e=this,t=e.__manager__,n=e.beforeRender,r=e.deferred();return e.hasRendered&&e._removeViews(),t.callback=function(){delete t.isAsync,delete t.callback,e.trigger("beforeRender",e),e._viewRender(t).render().then(function(){r.resolve()})},n&&n.call(e,e),t.isAsync||t.callback(),r.promise()},_applyTemplate:function(e,r,i){t.isString(e)&&(r.noel?(e=n.parseHTML(e,!0),this.$el.slice(1).remove(),this.$el.replaceWith(e),this.setElement(e,!1)):this.html(this.$el,e)),i.resolveWith(this,[this])},_viewRender:function(e){var n,r,i,o=this;function a(t,r){var a;e.callback=function(t){delete e.isAsync,delete e.callback,o._applyTemplate(t,e,i)},c.cache(n,r),r&&(a=o.renderTemplate.call(o,r,t)),e.isAsync||o._applyTemplate(a,e,i)}return{render:function(){var s=o.serialize,u=o.template;return i=o.deferred(),t.isFunction(s)&&(s=s.call(o)),e.callback=function(t){delete e.isAsync,delete e.callback,a(s,t)},"string"==typeof u&&(n=o.prefix+u),(r=c.cache(n))?(a(s,r),i):("string"==typeof u?r=o.fetchTemplate.call(o,o.prefix+u):"function"==typeof u?r=u:null!=u&&(r=o.fetchTemplate.call(o,u)),e.isAsync||a(s,r),i)}}},constructor:function(n){this.manage=!0,t.extend(this,n),e.View.apply(this,arguments)},async:function(){var e=this.__manager__;return e.isAsync=!0,e.callback},promise:function(){return this.__manager__.renderDeferred.promise()},renderViews:function(){var e=this,t=e.__manager__,n=e.deferred(),r=e.getViews().map(function(e){return e.render().__manager__.renderDeferred}).value();return t.renderDeferred=n.promise(),e.when(r).then(function(){n.resolveWith(e,[e])}),e},insertView:function(t,n,r){return n instanceof e.View?this.setView(t,n,!0,r):this.setView(t,!0,n)},insertViews:function(e){return t.isArray(e)?this.setViews({"":e}):(t.each(e,function(n,r){e[r]=t.isArray(n)?n:[n]}),this.setViews(e))},getView:function(e){return null==e&&(e=arguments[1]),this.getViews(e).first().value()},getViews:function(e){var n;return"string"==typeof e?(e=this.sections[e]||e,n=this.views[e]||[],t.chain([].concat(n))):(n=t.chain(this.views).map(function(e){return t.isArray(e)?e:[e]},this).flatten(),"object"==typeof e?n.where(e):"function"==typeof e?n.filter(e):n)},removeView:function(e){return this.getViews(e).each(function(e){e.remove()})},setView:function(e,n,r,i){var o,s,u;if("string"!=typeof e&&(i=r,r=n,n=e,e=""),!(o=n.__manager__))throw new Error("The argument associated with selector '"+e+"' is defined and a View.  Set `manage` property to true for Backbone.View instances.");return o.parent=this,s=o.selector=this.sections[e]||e,u=this.views[s],r?(this.views[s]=a.call([],this.views[e]||[],n),i&&t.isNumber(i.insertAt)&&u?(u.splice(i.insertAt,0,n),this.views[s]=u,o.insertAt=i.insertAt):this.views[s]=a.call([],u||[],n),this.__manager__.insert=!0,n):(n.hasRendered&&n.partial(this.$el,n.$el,this.__manager__,o),this.removeView(e),this.views[s]=n)},setViews:function(e){return t.each(e,function(e,n){if(t.isArray(e))return t.each(e,function(e){this.insertView(n,e)},this);this.setView(n,e)},this),this},render:function(){var e=this,n=e.__manager__,i=n.parent,a=i&&i.__manager__,s=e.deferred();function u(){var o;function u(){var i=r.console,o=e.afterRender;o&&o.call(e,e),e.trigger("afterRender",e),n.noel&&e.$el.length>1&&t.isFunction(i.warn)&&!e.suppressWarnings&&(i.warn("`el: false` with multiple top level elements is not supported."),t.isFunction(i.trace)&&i.trace())}return t.each(e.views,function(n,r){t.isArray(n)&&e.htmlBatch(e,n,r)}),i&&!n.insertedViaFragment&&(e.contains(i.el,e.el)||i.partial(i.$el,e.$el,a,n)),e.delegateEvents(),e.hasRendered=!0,(o=n.queue.shift())?o():delete n.queue,a&&a.queue?i.once("afterRender",u):u(),s.resolveWith(e,[e])}function c(){e._render().done(function(){if(!t.keys(e.views).length)return u();var n=t.map(e.views,function(n){var r=t.isArray(n);return r&&n.length?e.when(t.map(n,function(e){return e.__manager__.insertedViaFragment=!0,e.render().__manager__.renderDeferred})):r?n:n.render().__manager__.renderDeferred});e.when(n).done(u)})}return n.queue?o.call(n.queue,c):(n.queue=[],c()),e.__manager__.renderDeferred=s,e},remove:function(){return this.trigger("remove",this),c._removeView(this,!0),this._remove.apply(this,arguments)}},{_cache:{},_removeViews:function(e,t){"boolean"==typeof e&&(t=e,e=this),(e=e||this).getViews().each(function(e){(e.hasRendered||t)&&c._removeView(e,t)})},_removeView:function(e,n){var r,i=e.__manager__,o=i.parent&&i.parent.__manager__;if(!("boolean"==typeof e.keep?e.keep:e.options.keep)&&o&&!0===o.insert||n){if(c.cleanViews(e),e._removeViews(!0),e.$el.remove(),!i.parent)return;if(r=i.parent.views[i.selector],t.isArray(r))return t.each(t.clone(r),function(e,t){e&&e.__manager__===i&&s.call(r,t,1)});delete i.parent.views[i.selector]}},cache:function(e,t){return e in this._cache&&null==t?this._cache[e]:null!=e&&null!=t?this._cache[e]=t:void 0},cleanViews:function(n){t.each(a.call([],n),function(n){n.unbind(),n.model instanceof e.Model&&n.model.off(null,null,n),n.collection instanceof e.Collection&&n.collection.off(null,null,n),n.stopListening(),t.isFunction(n.cleanup)&&n.cleanup()})},configure:function(n){t.extend(c.prototype,n),n.manage&&(e.View.prototype.manage=!0),!1===n.el&&(e.View.prototype.el=!1),!0===n.suppressWarnings&&(e.View.prototype.suppressWarnings=!0)},setupView:function(n,r){r=r||{},t.each(a.call([],n),function(n){if(!n.__manager__){var i,o,a=c.prototype;t.defaults(n,{views:{},sections:{},__manager__:{},_removeViews:c._removeViews,_removeView:c._removeView},c.prototype),n.options=r,t.extend(n,r),n._remove=e.View.prototype.remove,n.render=c.prototype.render,n.remove!==a.remove&&(n._remove=n.remove,n.remove=a.remove),i=r.views||n.views,t.keys(i).length&&(o=i,n.views={},t.each(o,function(e,t){"function"==typeof e&&(o[t]=e.call(n,n))}),n.setViews(o))}})}});c.VERSION="0.9.4",e.Layout=c,e.View=function(e){var t;("el"in(e=e||{})?!1===e.el:!1===this.el)&&(t=!0),(e.manage||this.manage)&&c.setupView(this,e),this.__manager__&&(this.__manager__.noel=t,this.__manager__.suppressWarnings=e.suppressWarnings),i.apply(this,arguments)},e.View.extend=i.extend,e.View.prototype=i.prototype;var l={prefix:"",deferred:function(){return n.Deferred()},fetchTemplate:function(e){return t.template(n(e).html())},renderTemplate:function(e,t){return u(e.call(this,t))},serialize:function(){return this.model?t.clone(this.model.attributes):{}},partial:function(e,t,n,r){var i;r.selector&&(e=n.noel&&(i=e.filter(r.selector)).length?i:e.find(r.selector)),n.insert?this.insert(e,t,r.insertAt,r.selector):this.html(e,t)},html:function(e,t){e.html(t)},htmlBatch:function(e,r,i){var o=e.__manager__,a={selector:i},s=t.reduce(r,function(t,r){var i=("boolean"==typeof r.keep?r.keep:r.options.keep)&&n.contains(e.el,r.el);return r.el&&!i&&t.push(r.el),t},[]);return this.partial(e.$el,n(s),o,a)},insert:function(e,n,r,i){t.isNumber(r)?this.insertAtIndex(e,n,r,i):e.append(n)},insertAtIndex:function(e,t,n,r){var i,o=e.children();i=n<0?o.eq(Math.max(0,o.length+n)):o.eq(n);var a=this.views[r];n<0?n=Math.max(0,a.length-1+n):n+=1;var s=a[n];s?s.el.parentNode?t.insertBefore(s.$el):i.length?i.before(t):e.append(t):e.append(t)},when:function(e){return n.when.apply(null,e)},contains:function(e,t){return n.contains(e,t)}};return t.extend(c.prototype,l),c}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("moment",t):e.moment=t()}(this,function(){"use strict";var e;function t(){return e.apply(null,arguments)}function n(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function r(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function i(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function o(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function a(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){for(var n in t)s(t,n)&&(e[n]=t[n]);return s(t,"toString")&&(e.toString=t.toString),s(t,"valueOf")&&(e.valueOf=t.valueOf),e}function c(e,t,n,r){return kt(e,t,n,r,!0).utc()}function l(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}),e._pf}var d=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};function p(e){if(null==e._isValid){var t=l(e),n=d.call(t.parsedDateParts,function(e){return null!=e}),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(r=r&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return r;e._isValid=r}return e._isValid}function f(e){var t=c(NaN);return null!=e?u(l(t),e):l(t).userInvalidated=!0,t}function h(e){return void 0===e}var m=t.momentProperties=[];function g(e,t){var n,r,i;if(h(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),h(t._i)||(e._i=t._i),h(t._f)||(e._f=t._f),h(t._l)||(e._l=t._l),h(t._strict)||(e._strict=t._strict),h(t._tzm)||(e._tzm=t._tzm),h(t._isUTC)||(e._isUTC=t._isUTC),h(t._offset)||(e._offset=t._offset),h(t._pf)||(e._pf=l(t)),h(t._locale)||(e._locale=t._locale),m.length>0)for(n in m)h(i=t[r=m[n]])||(e[r]=i);return e}var y=!1;function b(e){g(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===y&&(y=!0,t.updateOffset(this),y=!1)}function v(e){return e instanceof b||null!=e&&null!=e._isAMomentObject}function w(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function _(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=w(t)),n}function A(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&_(e[r])!==_(t[r]))&&a++;return a+o}function k(e){!1===t.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function T(e,n){var r=!0;return u(function(){if(null!=t.deprecationHandler&&t.deprecationHandler(null,e),r){for(var i,o=[],a=0;a<arguments.length;a++){if(i="","object"==typeof arguments[a]){for(var s in i+="\n["+a+"] ",arguments[0])i+=s+": "+arguments[0][s]+", ";i=i.slice(0,-2)}else i=arguments[a];o.push(i)}k(e+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),r=!1}return n.apply(this,arguments)},n)}var E={};function C(e,n){null!=t.deprecationHandler&&t.deprecationHandler(e,n),E[e]||(k(n),E[e]=!0)}function R(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function S(e,t){var n,i=u({},e);for(n in t)s(t,n)&&(r(e[n])&&r(t[n])?(i[n]={},u(i[n],e[n]),u(i[n],t[n])):null!=t[n]?i[n]=t[n]:delete i[n]);for(n in e)s(e,n)&&!s(t,n)&&r(e[n])&&(i[n]=u({},i[n]));return i}function O(e){null!=e&&this.set(e)}t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var P=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)s(e,t)&&n.push(t);return n};var N={};function D(e,t){var n=e.toLowerCase();N[n]=N[n+"s"]=N[t]=e}function z(e){return"string"==typeof e?N[e]||N[e.toLowerCase()]:void 0}function x(e){var t,n,r={};for(n in e)s(e,n)&&(t=z(n))&&(r[t]=e[n]);return r}var M={};function L(e,t){M[e]=t}function I(e,n){return function(r){return null!=r?(B(this,e,r),t.updateOffset(this,n),this):F(this,e)}}function F(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function B(e,t,n){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](n)}function j(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var q=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,V=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,U={},H={};function W(e,t,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),e&&(H[e]=i),t&&(H[t[0]]=function(){return j(i.apply(this,arguments),t[1],t[2])}),n&&(H[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function $(e,t){return e.isValid()?(t=G(t,e.localeData()),U[t]=U[t]||function(e){var t,n,r,i=e.match(q);for(t=0,n=i.length;t<n;t++)H[i[t]]?i[t]=H[i[t]]:i[t]=(r=i[t]).match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"");return function(t){var r,o="";for(r=0;r<n;r++)o+=i[r]instanceof Function?i[r].call(t,e):i[r];return o}}(t),U[t](e)):e.localeData().invalidDate()}function G(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(V.lastIndex=0;n>=0&&V.test(e);)e=e.replace(V,r),V.lastIndex=0,n-=1;return e}var Y=/\d/,K=/\d\d/,Z=/\d{3}/,Q=/\d{4}/,J=/[+-]?\d{6}/,X=/\d\d?/,ee=/\d\d\d\d?/,te=/\d\d\d\d\d\d?/,ne=/\d{1,3}/,re=/\d{1,4}/,ie=/[+-]?\d{1,6}/,oe=/\d+/,ae=/[+-]?\d+/,se=/Z|[+-]\d\d:?\d\d/gi,ue=/Z|[+-]\d\d(?::?\d\d)?/gi,ce=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,le={};function de(e,t,n){le[e]=R(t)?t:function(e,r){return e&&n?n:t}}function pe(e,t){return s(le,e)?le[e](t._strict,t._locale):new RegExp(fe(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i})))}function fe(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var he={};function me(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),i(t)&&(r=function(e,n){n[t]=_(e)}),n=0;n<e.length;n++)he[e[n]]=r}function ge(e,t){me(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function ye(e,t,n){null!=t&&s(he,e)&&he[e](t,n._a,n,e)}var be=0,ve=1,we=2,_e=3,Ae=4,ke=5,Te=6,Ee=7,Ce=8,Re=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function Se(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}W("M",["MM",2],"Mo",function(){return this.month()+1}),W("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),W("MMMM",0,0,function(e){return this.localeData().months(this,e)}),D("month","M"),L("month",8),de("M",X),de("MM",X,K),de("MMM",function(e,t){return t.monthsShortRegex(e)}),de("MMMM",function(e,t){return t.monthsRegex(e)}),me(["M","MM"],function(e,t){t[ve]=_(e)-1}),me(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[ve]=i:l(n).invalidMonth=e});var Oe=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Pe="January_February_March_April_May_June_July_August_September_October_November_December".split("_");var Ne="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function De(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=_(t);else if(!i(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Se(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function ze(e){return null!=e?(De(this,e),t.updateOffset(this,!0),this):F(this,"Month")}var xe=ce;var Me=ce;function Le(){function e(e,t){return t.length-e.length}var t,n,r=[],i=[],o=[];for(t=0;t<12;t++)n=c([2e3,t]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(e),i.sort(e),o.sort(e),t=0;t<12;t++)r[t]=fe(r[t]),i[t]=fe(i[t]);for(t=0;t<24;t++)o[t]=fe(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Ie(e){return Fe(e)?366:365}function Fe(e){return e%4==0&&e%100!=0||e%400==0}W("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),W(0,["YY",2],0,function(){return this.year()%100}),W(0,["YYYY",4],0,"year"),W(0,["YYYYY",5],0,"year"),W(0,["YYYYYY",6,!0],0,"year"),D("year","y"),L("year",1),de("Y",ae),de("YY",X,K),de("YYYY",re,Q),de("YYYYY",ie,J),de("YYYYYY",ie,J),me(["YYYYY","YYYYYY"],be),me("YYYY",function(e,n){n[be]=2===e.length?t.parseTwoDigitYear(e):_(e)}),me("YY",function(e,n){n[be]=t.parseTwoDigitYear(e)}),me("Y",function(e,t){t[be]=parseInt(e,10)}),t.parseTwoDigitYear=function(e){return _(e)+(_(e)>68?1900:2e3)};var Be=I("FullYear",!0);function je(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function qe(e,t,n){var r=7+t-n;return-((7+je(e,0,r).getUTCDay()-t)%7)+r-1}function Ve(e,t,n,r,i){var o,a,s=1+7*(t-1)+(7+n-r)%7+qe(e,r,i);return s<=0?a=Ie(o=e-1)+s:s>Ie(e)?(o=e+1,a=s-Ie(e)):(o=e,a=s),{year:o,dayOfYear:a}}function Ue(e,t,n){var r,i,o=qe(e.year(),t,n),a=Math.floor((e.dayOfYear()-o-1)/7)+1;return a<1?r=a+He(i=e.year()-1,t,n):a>He(e.year(),t,n)?(r=a-He(e.year(),t,n),i=e.year()+1):(i=e.year(),r=a),{week:r,year:i}}function He(e,t,n){var r=qe(e,t,n),i=qe(e+1,t,n);return(Ie(e)-r+i)/7}W("w",["ww",2],"wo","week"),W("W",["WW",2],"Wo","isoWeek"),D("week","w"),D("isoWeek","W"),L("week",5),L("isoWeek",5),de("w",X),de("ww",X,K),de("W",X),de("WW",X,K),ge(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=_(e)});W("d",0,"do","day"),W("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),W("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),W("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),W("e",0,0,"weekday"),W("E",0,0,"isoWeekday"),D("day","d"),D("weekday","e"),D("isoWeekday","E"),L("day",11),L("weekday",11),L("isoWeekday",11),de("d",X),de("e",X),de("E",X),de("dd",function(e,t){return t.weekdaysMinRegex(e)}),de("ddd",function(e,t){return t.weekdaysShortRegex(e)}),de("dddd",function(e,t){return t.weekdaysRegex(e)}),ge(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:l(n).invalidWeekday=e}),ge(["d","e","E"],function(e,t,n,r){t[r]=_(e)});var We="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");var $e="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");var Ge="Su_Mo_Tu_We_Th_Fr_Sa".split("_");var Ye=ce;var Ke=ce;var Ze=ce;function Qe(){function e(e,t){return t.length-e.length}var t,n,r,i,o,a=[],s=[],u=[],l=[];for(t=0;t<7;t++)n=c([2e3,1]).day(t),r=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),o=this.weekdays(n,""),a.push(r),s.push(i),u.push(o),l.push(r),l.push(i),l.push(o);for(a.sort(e),s.sort(e),u.sort(e),l.sort(e),t=0;t<7;t++)s[t]=fe(s[t]),u[t]=fe(u[t]),l[t]=fe(l[t]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Je(){return this.hours()%12||12}function Xe(e,t){W(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function et(e,t){return t._meridiemParse}W("H",["HH",2],0,"hour"),W("h",["hh",2],0,Je),W("k",["kk",2],0,function(){return this.hours()||24}),W("hmm",0,0,function(){return""+Je.apply(this)+j(this.minutes(),2)}),W("hmmss",0,0,function(){return""+Je.apply(this)+j(this.minutes(),2)+j(this.seconds(),2)}),W("Hmm",0,0,function(){return""+this.hours()+j(this.minutes(),2)}),W("Hmmss",0,0,function(){return""+this.hours()+j(this.minutes(),2)+j(this.seconds(),2)}),Xe("a",!0),Xe("A",!1),D("hour","h"),L("hour",13),de("a",et),de("A",et),de("H",X),de("h",X),de("HH",X,K),de("hh",X,K),de("hmm",ee),de("hmmss",te),de("Hmm",ee),de("Hmmss",te),me(["H","HH"],_e),me(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),me(["h","hh"],function(e,t,n){t[_e]=_(e),l(n).bigHour=!0}),me("hmm",function(e,t,n){var r=e.length-2;t[_e]=_(e.substr(0,r)),t[Ae]=_(e.substr(r)),l(n).bigHour=!0}),me("hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[_e]=_(e.substr(0,r)),t[Ae]=_(e.substr(r,2)),t[ke]=_(e.substr(i)),l(n).bigHour=!0}),me("Hmm",function(e,t,n){var r=e.length-2;t[_e]=_(e.substr(0,r)),t[Ae]=_(e.substr(r))}),me("Hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[_e]=_(e.substr(0,r)),t[Ae]=_(e.substr(r,2)),t[ke]=_(e.substr(i))});var tt,nt=I("Hours",!0),rt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",ordinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Pe,monthsShort:Ne,week:{dow:0,doy:6},weekdays:We,weekdaysMin:Ge,weekdaysShort:$e,meridiemParse:/[ap]\.?m?\.?/i},it={},ot={};function at(e){return e?e.toLowerCase().replace("_","-"):e}function st(e){var t=null;if(!it[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=tt._abbr,require("./locale/"+e),ut(t)}catch(e){}return it[e]}function ut(e,t){var n;return e&&(n=h(t)?lt(e):ct(e,t))&&(tt=n),tt._abbr}function ct(e,t){if(null!==t){var n=rt;if(t.abbr=e,null!=it[e])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=it[e]._config;else if(null!=t.parentLocale){if(null==it[t.parentLocale])return ot[t.parentLocale]||(ot[t.parentLocale]=[]),ot[t.parentLocale].push({name:e,config:t}),null;n=it[t.parentLocale]._config}return it[e]=new O(S(n,t)),ot[e]&&ot[e].forEach(function(e){ct(e.name,e.config)}),ut(e),it[e]}return delete it[e],null}function lt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return tt;if(!n(e)){if(t=st(e))return t;e=[e]}return function(e){for(var t,n,r,i,o=0;o<e.length;){for(t=(i=at(e[o]).split("-")).length,n=(n=at(e[o+1]))?n.split("-"):null;t>0;){if(r=st(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&A(i,n,!0)>=t-1)break;t--}o++}return null}(e)}function dt(e){var t,n=e._a;return n&&-2===l(e).overflow&&(t=n[ve]<0||n[ve]>11?ve:n[we]<1||n[we]>Se(n[be],n[ve])?we:n[_e]<0||n[_e]>24||24===n[_e]&&(0!==n[Ae]||0!==n[ke]||0!==n[Te])?_e:n[Ae]<0||n[Ae]>59?Ae:n[ke]<0||n[ke]>59?ke:n[Te]<0||n[Te]>999?Te:-1,l(e)._overflowDayOfYear&&(t<be||t>we)&&(t=we),l(e)._overflowWeeks&&-1===t&&(t=Ee),l(e)._overflowWeekday&&-1===t&&(t=Ce),l(e).overflow=t),e}var pt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ft=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ht=/Z|[+-]\d\d(?::?\d\d)?/,mt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],gt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],yt=/^\/?Date\((\-?\d+)/i;function bt(e){var t,n,r,i,o,a,s=e._i,u=pt.exec(s)||ft.exec(s);if(u){for(l(e).iso=!0,t=0,n=mt.length;t<n;t++)if(mt[t][1].exec(u[1])){i=mt[t][0],r=!1!==mt[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=gt.length;t<n;t++)if(gt[t][1].exec(u[3])){o=(u[2]||" ")+gt[t][0];break}if(null==o)return void(e._isValid=!1)}if(!r&&null!=o)return void(e._isValid=!1);if(u[4]){if(!ht.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=i+(o||"")+(a||""),_t(e)}else e._isValid=!1}function vt(e,t,n){return null!=e?e:null!=t?t:n}function wt(e){var n,r,i,o,a=[];if(!e._d){for(i=function(e){var n=new Date(t.now());return e._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}(e),e._w&&null==e._a[we]&&null==e._a[ve]&&function(e){var t,n,r,i,o,a,s,u;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)o=1,a=4,n=vt(t.GG,e._a[be],Ue(Tt(),1,4).year),r=vt(t.W,1),((i=vt(t.E,1))<1||i>7)&&(u=!0);else{o=e._locale._week.dow,a=e._locale._week.doy;var c=Ue(Tt(),o,a);n=vt(t.gg,e._a[be],c.year),r=vt(t.w,c.week),null!=t.d?((i=t.d)<0||i>6)&&(u=!0):null!=t.e?(i=t.e+o,(t.e<0||t.e>6)&&(u=!0)):i=o}r<1||r>He(n,o,a)?l(e)._overflowWeeks=!0:null!=u?l(e)._overflowWeekday=!0:(s=Ve(n,r,i,o,a),e._a[be]=s.year,e._dayOfYear=s.dayOfYear)}(e),e._dayOfYear&&(o=vt(e._a[be],i[be]),e._dayOfYear>Ie(o)&&(l(e)._overflowDayOfYear=!0),r=je(o,0,e._dayOfYear),e._a[ve]=r.getUTCMonth(),e._a[we]=r.getUTCDate()),n=0;n<3&&null==e._a[n];++n)e._a[n]=a[n]=i[n];for(;n<7;n++)e._a[n]=a[n]=null==e._a[n]?2===n?1:0:e._a[n];24===e._a[_e]&&0===e._a[Ae]&&0===e._a[ke]&&0===e._a[Te]&&(e._nextDay=!0,e._a[_e]=0),e._d=(e._useUTC?je:function(e,t,n,r,i,o,a){var s=new Date(e,t,n,r,i,o,a);return e<100&&e>=0&&isFinite(s.getFullYear())&&s.setFullYear(e),s}).apply(null,a),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[_e]=24)}}function _t(e){if(e._f!==t.ISO_8601){e._a=[],l(e).empty=!0;var n,r,i,o,a,s=""+e._i,u=s.length,c=0;for(i=G(e._f,e._locale).match(q)||[],n=0;n<i.length;n++)o=i[n],(r=(s.match(pe(o,e))||[])[0])&&((a=s.substr(0,s.indexOf(r))).length>0&&l(e).unusedInput.push(a),s=s.slice(s.indexOf(r)+r.length),c+=r.length),H[o]?(r?l(e).empty=!1:l(e).unusedTokens.push(o),ye(o,r,e)):e._strict&&!r&&l(e).unusedTokens.push(o);l(e).charsLeftOver=u-c,s.length>0&&l(e).unusedInput.push(s),e._a[_e]<=12&&!0===l(e).bigHour&&e._a[_e]>0&&(l(e).bigHour=void 0),l(e).parsedDateParts=e._a.slice(0),l(e).meridiem=e._meridiem,e._a[_e]=function(e,t,n){var r;if(null==n)return t;return null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}(e._locale,e._a[_e],e._meridiem),wt(e),dt(e)}else bt(e)}function At(e){var r=e._i,s=e._f;return e._locale=e._locale||lt(e._l),null===r||void 0===s&&""===r?f({nullInput:!0}):("string"==typeof r&&(e._i=r=e._locale.preparse(r)),v(r)?new b(dt(r)):(o(r)?e._d=r:n(s)?function(e){var t,n,r,i,o;if(0===e._f.length)return l(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)o=0,t=g({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],_t(t),p(t)&&(o+=l(t).charsLeftOver,o+=10*l(t).unusedTokens.length,l(t).score=o,(null==r||o<r)&&(r=o,n=t));u(e,n||t)}(e):s?_t(e):function(e){var r=e._i;void 0===r?e._d=new Date(t.now()):o(r)?e._d=new Date(r.valueOf()):"string"==typeof r?function(e){var n=yt.exec(e._i);null===n?(bt(e),!1===e._isValid&&(delete e._isValid,t.createFromInputFallback(e))):e._d=new Date(+n[1])}(e):n(r)?(e._a=a(r.slice(0),function(e){return parseInt(e,10)}),wt(e)):"object"==typeof r?function(e){if(!e._d){var t=x(e._i);e._a=a([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),wt(e)}}(e):i(r)?e._d=new Date(r):t.createFromInputFallback(e)}(e),p(e)||(e._d=null),e))}function kt(e,t,i,o,a){var s,u={};return!0!==i&&!1!==i||(o=i,i=void 0),(r(e)&&function(e){var t;for(t in e)return!1;return!0}(e)||n(e)&&0===e.length)&&(e=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=a,u._l=i,u._i=e,u._f=t,u._strict=o,(s=new b(dt(At(u))))._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function Tt(e,t,n,r){return kt(e,t,n,r,!1)}t.createFromInputFallback=T("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),t.ISO_8601=function(){};var Et=T("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Tt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:f()}),Ct=T("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Tt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:f()});function Rt(e,t){var r,i;if(1===t.length&&n(t[0])&&(t=t[0]),!t.length)return Tt();for(r=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](r)||(r=t[i]);return r}function St(e){var t=x(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||0,a=t.day||0,s=t.hour||0,u=t.minute||0,c=t.second||0,l=t.millisecond||0;this._milliseconds=+l+1e3*c+6e4*u+1e3*s*60*60,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=lt(),this._bubble()}function Ot(e){return e instanceof St}function Pt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Nt(e,t){W(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+j(~~(e/60),2)+t+j(~~e%60,2)})}Nt("Z",":"),Nt("ZZ",""),de("Z",ue),de("ZZ",ue),me(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=zt(ue,e)});var Dt=/([\+\-]|\d\d)/gi;function zt(e,t){var n=(t||"").match(e);if(null===n)return null;var r=((n[n.length-1]||[])+"").match(Dt)||["-",0,0],i=60*r[1]+_(r[2]);return 0===i?0:"+"===r[0]?i:-i}function xt(e,n){var r,i;return n._isUTC?(r=n.clone(),i=(v(e)||o(e)?e.valueOf():Tt(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+i),t.updateOffset(r,!1),r):Tt(e).local()}function Mt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Lt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}t.updateOffset=function(){};var It=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Ft=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;function Bt(e,t){var n,r,o,a=e,u=null;return Ot(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:i(e)?(a={},t?a[t]=e:a.milliseconds=e):(u=It.exec(e))?(n="-"===u[1]?-1:1,a={y:0,d:_(u[we])*n,h:_(u[_e])*n,m:_(u[Ae])*n,s:_(u[ke])*n,ms:_(Pt(1e3*u[Te]))*n}):(u=Ft.exec(e))?(n="-"===u[1]?-1:1,a={y:jt(u[2],n),M:jt(u[3],n),w:jt(u[4],n),d:jt(u[5],n),h:jt(u[6],n),m:jt(u[7],n),s:jt(u[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(o=function(e,t){var n;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=xt(t,e),e.isBefore(t)?n=qt(e,t):((n=qt(t,e)).milliseconds=-n.milliseconds,n.months=-n.months);return n}(Tt(a.from),Tt(a.to)),(a={}).ms=o.milliseconds,a.M=o.months),r=new St(a),Ot(e)&&s(e,"_locale")&&(r._locale=e._locale),r}function jt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function qt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Vt(e,t){return function(n,r){var i;return null===r||isNaN(+r)||(C(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),Ut(this,Bt(n="string"==typeof n?+n:n,r),e),this}}function Ut(e,n,r,i){var o=n._milliseconds,a=Pt(n._days),s=Pt(n._months);e.isValid()&&(i=null==i||i,o&&e._d.setTime(e._d.valueOf()+o*r),a&&B(e,"Date",F(e,"Date")+a*r),s&&De(e,F(e,"Month")+s*r),i&&t.updateOffset(e,a||s))}Bt.fn=St.prototype;var Ht=Vt(1,"add"),Wt=Vt(-1,"subtract");function $t(e){var t;return void 0===e?this._locale._abbr:(null!=(t=lt(e))&&(this._locale=t),this)}t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Gt=T("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function Yt(){return this._locale}function Kt(e,t){W(0,[e,e.length],0,t)}function Zt(e,t,n,r,i){var o;return null==e?Ue(this,r,i).year:(t>(o=He(e,r,i))&&(t=o),function(e,t,n,r,i){var o=Ve(e,t,n,r,i),a=je(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}.call(this,e,t,n,r,i))}W(0,["gg",2],0,function(){return this.weekYear()%100}),W(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Kt("gggg","weekYear"),Kt("ggggg","weekYear"),Kt("GGGG","isoWeekYear"),Kt("GGGGG","isoWeekYear"),D("weekYear","gg"),D("isoWeekYear","GG"),L("weekYear",1),L("isoWeekYear",1),de("G",ae),de("g",ae),de("GG",X,K),de("gg",X,K),de("GGGG",re,Q),de("gggg",re,Q),de("GGGGG",ie,J),de("ggggg",ie,J),ge(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=_(e)}),ge(["gg","GG"],function(e,n,r,i){n[i]=t.parseTwoDigitYear(e)}),W("Q",0,"Qo","quarter"),D("quarter","Q"),L("quarter",7),de("Q",Y),me("Q",function(e,t){t[ve]=3*(_(e)-1)}),W("D",["DD",2],"Do","date"),D("date","D"),L("date",9),de("D",X),de("DD",X,K),de("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),me(["D","DD"],we),me("Do",function(e,t){t[we]=_(e.match(X)[0])});var Qt=I("Date",!0);W("DDD",["DDDD",3],"DDDo","dayOfYear"),D("dayOfYear","DDD"),L("dayOfYear",4),de("DDD",ne),de("DDDD",Z),me(["DDD","DDDD"],function(e,t,n){n._dayOfYear=_(e)}),W("m",["mm",2],0,"minute"),D("minute","m"),L("minute",14),de("m",X),de("mm",X,K),me(["m","mm"],Ae);var Jt=I("Minutes",!1);W("s",["ss",2],0,"second"),D("second","s"),L("second",15),de("s",X),de("ss",X,K),me(["s","ss"],ke);var Xt,en=I("Seconds",!1);for(W("S",0,0,function(){return~~(this.millisecond()/100)}),W(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),W(0,["SSS",3],0,"millisecond"),W(0,["SSSS",4],0,function(){return 10*this.millisecond()}),W(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),W(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),W(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),W(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),W(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),D("millisecond","ms"),L("millisecond",16),de("S",ne,Y),de("SS",ne,K),de("SSS",ne,Z),Xt="SSSS";Xt.length<=9;Xt+="S")de(Xt,oe);function tn(e,t){t[Te]=_(1e3*("0."+e))}for(Xt="S";Xt.length<=9;Xt+="S")me(Xt,tn);var nn=I("Milliseconds",!1);W("z",0,0,"zoneAbbr"),W("zz",0,0,"zoneName");var rn=b.prototype;function on(e){return e}rn.add=Ht,rn.calendar=function(e,n){var r=e||Tt(),i=xt(r,this).startOf("day"),o=t.calendarFormat(this,i)||"sameElse",a=n&&(R(n[o])?n[o].call(this,r):n[o]);return this.format(a||this.localeData().calendar(o,this,Tt(r)))},rn.clone=function(){return new b(this)},rn.diff=function(e,t,n){var r,i,o,a;return this.isValid()&&(r=xt(e,this)).isValid()?(i=6e4*(r.utcOffset()-this.utcOffset()),"year"===(t=z(t))||"month"===t||"quarter"===t?(s=this,u=r,d=12*(u.year()-s.year())+(u.month()-s.month()),p=s.clone().add(d,"months"),u-p<0?(c=s.clone().add(d-1,"months"),l=(u-p)/(p-c)):(c=s.clone().add(d+1,"months"),l=(u-p)/(c-p)),a=-(d+l)||0,"quarter"===t?a/=3:"year"===t&&(a/=12)):(o=this-r,a="second"===t?o/1e3:"minute"===t?o/6e4:"hour"===t?o/36e5:"day"===t?(o-i)/864e5:"week"===t?(o-i)/6048e5:o),n?a:w(a)):NaN;var s,u,c,l,d,p},rn.endOf=function(e){return void 0===(e=z(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))},rn.format=function(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var n=$(this,e);return this.localeData().postformat(n)},rn.from=function(e,t){return this.isValid()&&(v(e)&&e.isValid()||Tt(e).isValid())?Bt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},rn.fromNow=function(e){return this.from(Tt(),e)},rn.to=function(e,t){return this.isValid()&&(v(e)&&e.isValid()||Tt(e).isValid())?Bt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},rn.toNow=function(e){return this.to(Tt(),e)},rn.get=function(e){return R(this[e=z(e)])?this[e]():this},rn.invalidAt=function(){return l(this).overflow},rn.isAfter=function(e,t){var n=v(e)?e:Tt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=z(h(t)?"millisecond":t))?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},rn.isBefore=function(e,t){var n=v(e)?e:Tt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=z(h(t)?"millisecond":t))?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},rn.isBetween=function(e,t,n,r){return("("===(r=r||"()")[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===r[1]?this.isBefore(t,n):!this.isAfter(t,n))},rn.isSame=function(e,t){var n,r=v(e)?e:Tt(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=z(t||"millisecond"))?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},rn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},rn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},rn.isValid=function(){return p(this)},rn.lang=Gt,rn.locale=$t,rn.localeData=Yt,rn.max=Ct,rn.min=Et,rn.parsingFlags=function(){return u({},l(this))},rn.set=function(e,t){if("object"==typeof e)for(var n=function(e){var t=[];for(var n in e)t.push({unit:n,priority:M[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}(e=x(e)),r=0;r<n.length;r++)this[n[r].unit](e[n[r].unit]);else if(R(this[e=z(e)]))return this[e](t);return this},rn.startOf=function(e){switch(e=z(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},rn.subtract=Wt,rn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},rn.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},rn.toDate=function(){return new Date(this.valueOf())},rn.toISOString=function(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?R(Date.prototype.toISOString)?this.toDate().toISOString():$(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):$(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},rn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',r=0<this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=t+'[")]';return this.format(n+r+"-MM-DD[T]HH:mm:ss.SSS"+i)},rn.toJSON=function(){return this.isValid()?this.toISOString():null},rn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},rn.unix=function(){return Math.floor(this.valueOf()/1e3)},rn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},rn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},rn.year=Be,rn.isLeapYear=function(){return Fe(this.year())},rn.weekYear=function(e){return Zt.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},rn.isoWeekYear=function(e){return Zt.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},rn.quarter=rn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},rn.month=ze,rn.daysInMonth=function(){return Se(this.year(),this.month())},rn.week=rn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},rn.isoWeek=rn.isoWeeks=function(e){var t=Ue(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},rn.weeksInYear=function(){var e=this.localeData()._week;return He(this.year(),e.dow,e.doy)},rn.isoWeeksInYear=function(){return He(this.year(),1,4)},rn.date=Qt,rn.day=rn.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},rn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},rn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},rn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},rn.hour=rn.hours=nt,rn.minute=rn.minutes=Jt,rn.second=rn.seconds=en,rn.millisecond=rn.milliseconds=nn,rn.utcOffset=function(e,n){var r,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=zt(ue,e)))return this}else Math.abs(e)<16&&(e*=60);return!this._isUTC&&n&&(r=Mt(this)),this._offset=e,this._isUTC=!0,null!=r&&this.add(r,"m"),i!==e&&(!n||this._changeInProgress?Ut(this,Bt(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?i:Mt(this)},rn.utc=function(e){return this.utcOffset(0,e)},rn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Mt(this),"m")),this},rn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm);else if("string"==typeof this._i){var e=zt(se,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},rn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Tt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},rn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},rn.isLocal=function(){return!!this.isValid()&&!this._isUTC},rn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},rn.isUtc=Lt,rn.isUTC=Lt,rn.zoneAbbr=function(){return this._isUTC?"UTC":""},rn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},rn.dates=T("dates accessor is deprecated. Use date instead.",Qt),rn.months=T("months accessor is deprecated. Use month instead",ze),rn.years=T("years accessor is deprecated. Use year instead",Be),rn.zone=T("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),rn.isDSTShifted=T("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!h(this._isDSTShifted))return this._isDSTShifted;var e={};if(g(e,this),(e=At(e))._a){var t=e._isUTC?c(e._a):Tt(e._a);this._isDSTShifted=this.isValid()&&A(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted});var an=O.prototype;function sn(e,t,n,r){var i=lt(),o=c().set(r,t);return i[n](o,e)}function un(e,t,n){if(i(e)&&(t=e,e=void 0),e=e||"",null!=t)return sn(e,t,n,"month");var r,o=[];for(r=0;r<12;r++)o[r]=sn(e,r,n,"month");return o}function cn(e,t,n,r){"boolean"==typeof e?(i(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,i(t)&&(n=t,t=void 0),t=t||"");var o,a=lt(),s=e?a._week.dow:0;if(null!=n)return sn(t,(n+s)%7,r,"day");var u=[];for(o=0;o<7;o++)u[o]=sn(t,(o+s)%7,r,"day");return u}an.calendar=function(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return R(r)?r.call(t,n):r},an.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},an.invalidDate=function(){return this._invalidDate},an.ordinal=function(e){return this._ordinal.replace("%d",e)},an.preparse=on,an.postformat=on,an.relativeTime=function(e,t,n,r){var i=this._relativeTime[n];return R(i)?i(e,t,n,r):i.replace(/%d/i,e)},an.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return R(n)?n(t):n.replace(/%s/i,t)},an.set=function(e){var t,n;for(n in e)R(t=e[n])?this[n]=t:this["_"+n]=t;this._config=e,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},an.months=function(e,t){return e?n(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Oe).test(t)?"format":"standalone"][e.month()]:this._months},an.monthsShort=function(e,t){return e?n(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Oe.test(t)?"format":"standalone"][e.month()]:this._monthsShort},an.monthsParse=function(e,t,n){var r,i,o;if(this._monthsParseExact)return function(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=c([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=Re.call(this._shortMonthsParse,a))?i:null:-1!==(i=Re.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=Re.call(this._shortMonthsParse,a))?i:-1!==(i=Re.call(this._longMonthsParse,a))?i:null:-1!==(i=Re.call(this._longMonthsParse,a))?i:-1!==(i=Re.call(this._shortMonthsParse,a))?i:null}.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=c([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}},an.monthsRegex=function(e){return this._monthsParseExact?(s(this,"_monthsRegex")||Le.call(this),e?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=Me),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},an.monthsShortRegex=function(e){return this._monthsParseExact?(s(this,"_monthsRegex")||Le.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=xe),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},an.week=function(e){return Ue(e,this._week.dow,this._week.doy).week},an.firstDayOfYear=function(){return this._week.doy},an.firstDayOfWeek=function(){return this._week.dow},an.weekdays=function(e,t){return e?n(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:this._weekdays},an.weekdaysMin=function(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin},an.weekdaysShort=function(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort},an.weekdaysParse=function(e,t,n){var r,i,o;if(this._weekdaysParseExact)return function(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=c([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=Re.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Re.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=Re.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=Re.call(this._weekdaysParse,a))?i:-1!==(i=Re.call(this._shortWeekdaysParse,a))?i:-1!==(i=Re.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Re.call(this._shortWeekdaysParse,a))?i:-1!==(i=Re.call(this._weekdaysParse,a))?i:-1!==(i=Re.call(this._minWeekdaysParse,a))?i:null:-1!==(i=Re.call(this._minWeekdaysParse,a))?i:-1!==(i=Re.call(this._weekdaysParse,a))?i:-1!==(i=Re.call(this._shortWeekdaysParse,a))?i:null}.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=c([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}},an.weekdaysRegex=function(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=Ye),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},an.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ke),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},an.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ze),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},an.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},an.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},ut("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===_(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),t.lang=T("moment.lang is deprecated. Use moment.locale instead.",ut),t.langData=T("moment.langData is deprecated. Use moment.localeData instead.",lt);var ln=Math.abs;function dn(e,t,n,r){var i=Bt(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function pn(e){return e<0?Math.floor(e):Math.ceil(e)}function fn(e){return 4800*e/146097}function hn(e){return 146097*e/4800}function mn(e){return function(){return this.as(e)}}var gn=mn("ms"),yn=mn("s"),bn=mn("m"),vn=mn("h"),wn=mn("d"),_n=mn("w"),An=mn("M"),kn=mn("y");function Tn(e){return function(){return this._data[e]}}var En=Tn("milliseconds"),Cn=Tn("seconds"),Rn=Tn("minutes"),Sn=Tn("hours"),On=Tn("days"),Pn=Tn("months"),Nn=Tn("years");var Dn=Math.round,zn={s:45,m:45,h:22,d:26,M:11};var xn=Math.abs;function Mn(){var e,t,n=xn(this._milliseconds)/1e3,r=xn(this._days),i=xn(this._months);t=w((e=w(n/60))/60),n%=60,e%=60;var o=w(i/12),a=i%=12,s=r,u=t,c=e,l=n,d=this.asSeconds();return d?(d<0?"-":"")+"P"+(o?o+"Y":"")+(a?a+"M":"")+(s?s+"D":"")+(u||c||l?"T":"")+(u?u+"H":"")+(c?c+"M":"")+(l?l+"S":""):"P0D"}var Ln=St.prototype;return Ln.abs=function(){var e=this._data;return this._milliseconds=ln(this._milliseconds),this._days=ln(this._days),this._months=ln(this._months),e.milliseconds=ln(e.milliseconds),e.seconds=ln(e.seconds),e.minutes=ln(e.minutes),e.hours=ln(e.hours),e.months=ln(e.months),e.years=ln(e.years),this},Ln.add=function(e,t){return dn(this,e,t,1)},Ln.subtract=function(e,t){return dn(this,e,t,-1)},Ln.as=function(e){var t,n,r=this._milliseconds;if("month"===(e=z(e))||"year"===e)return t=this._days+r/864e5,n=this._months+fn(t),"month"===e?n:n/12;switch(t=this._days+Math.round(hn(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}},Ln.asMilliseconds=gn,Ln.asSeconds=yn,Ln.asMinutes=bn,Ln.asHours=vn,Ln.asDays=wn,Ln.asWeeks=_n,Ln.asMonths=An,Ln.asYears=kn,Ln.valueOf=function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*_(this._months/12)},Ln._bubble=function(){var e,t,n,r,i,o=this._milliseconds,a=this._days,s=this._months,u=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*pn(hn(s)+a),a=0,s=0),u.milliseconds=o%1e3,e=w(o/1e3),u.seconds=e%60,t=w(e/60),u.minutes=t%60,n=w(t/60),u.hours=n%24,s+=i=w(fn(a+=w(n/24))),a-=pn(hn(i)),r=w(s/12),s%=12,u.days=a,u.months=s,u.years=r,this},Ln.get=function(e){return this[(e=z(e))+"s"]()},Ln.milliseconds=En,Ln.seconds=Cn,Ln.minutes=Rn,Ln.hours=Sn,Ln.days=On,Ln.weeks=function(){return w(this.days()/7)},Ln.months=Pn,Ln.years=Nn,Ln.humanize=function(e){var t=this.localeData(),n=function(e,t,n){var r=Bt(e).abs(),i=Dn(r.as("s")),o=Dn(r.as("m")),a=Dn(r.as("h")),s=Dn(r.as("d")),u=Dn(r.as("M")),c=Dn(r.as("y")),l=i<zn.s&&["s",i]||o<=1&&["m"]||o<zn.m&&["mm",o]||a<=1&&["h"]||a<zn.h&&["hh",a]||s<=1&&["d"]||s<zn.d&&["dd",s]||u<=1&&["M"]||u<zn.M&&["MM",u]||c<=1&&["y"]||["yy",c];return l[2]=t,l[3]=+e>0,l[4]=n,function(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}.apply(null,l)}(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)},Ln.toISOString=Mn,Ln.toString=Mn,Ln.toJSON=Mn,Ln.locale=$t,Ln.localeData=Yt,Ln.toIsoString=T("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Mn),Ln.lang=Gt,W("X",0,0,"unix"),W("x",0,0,"valueOf"),de("x",ae),de("X",/[+-]?\d+(\.\d{1,3})?/),me("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),me("x",function(e,t,n){n._d=new Date(_(e))}),t.version="2.17.0",e=Tt,t.fn=rn,t.min=function(){return Rt("isBefore",[].slice.call(arguments,0))},t.max=function(){return Rt("isAfter",[].slice.call(arguments,0))},t.now=function(){return Date.now?Date.now():+new Date},t.utc=c,t.unix=function(e){return Tt(1e3*e)},t.months=function(e,t){return un(e,t,"months")},t.isDate=o,t.locale=ut,t.invalid=f,t.duration=Bt,t.isMoment=v,t.weekdays=function(e,t,n){return cn(e,t,n,"weekdays")},t.parseZone=function(){return Tt.apply(null,arguments).parseZone()},t.localeData=lt,t.isDuration=Ot,t.monthsShort=function(e,t){return un(e,t,"monthsShort")},t.weekdaysMin=function(e,t,n){return cn(e,t,n,"weekdaysMin")},t.defineLocale=ct,t.updateLocale=function(e,t){if(null!=t){var n,r=rt;null!=it[e]&&(r=it[e]._config),(n=new O(t=S(r,t))).parentLocale=it[e],it[e]=n,ut(e)}else null!=it[e]&&(null!=it[e].parentLocale?it[e]=it[e].parentLocale:null!=it[e]&&delete it[e]);return it[e]},t.locales=function(){return P(it)},t.weekdaysShort=function(e,t,n){return cn(e,t,n,"weekdaysShort")},t.normalizeUnits=z,t.relativeTimeRounding=function(e){return void 0===e?Dn:"function"==typeof e&&(Dn=e,!0)},t.relativeTimeThreshold=function(e,t){return void 0!==zn[e]&&(void 0===t?zn[e]:(zn[e]=t,!0))},t.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},t.prototype=rn,t}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");!function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),function(e){"use strict";var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.isLoading=!1};function n(n){return this.each(function(){var r=e(this),i=r.data("bs.button"),o="object"==typeof n&&n;i||r.data("bs.button",i=new t(this,o)),"toggle"==n?i.toggle():n&&i.setState(n)})}t.VERSION="3.3.2",t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(t){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",o=r.data();t+="Text",null==o.resetText&&r.data("resetText",r[i]()),setTimeout(e.proxy(function(){r[i](null==o[t]?this.options[t]:o[t]),"loadingText"==t?(this.isLoading=!0,r.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n))},this),0)},t.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));e&&this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=n,e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var r=e(t.target);r.hasClass("btn")||(r=r.closest(".btn")),n.call(r,"toggle"),t.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),function(e){"use strict";var t=".dropdown-backdrop",n='[data-toggle="dropdown"]',r=function(t){e(t).on("click.bs.dropdown",this.toggle)};function i(r){r&&3===r.which||(e(t).remove(),e(n).each(function(){var t=e(this),n=o(t),i={relatedTarget:this};n.hasClass("open")&&(n.trigger(r=e.Event("hide.bs.dropdown",i)),r.isDefaultPrevented()||(t.attr("aria-expanded","false"),n.removeClass("open").trigger("hidden.bs.dropdown",i)))}))}function o(t){var n=t.attr("data-target");n||(n=(n=t.attr("href"))&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}r.VERSION="3.3.2",r.prototype.toggle=function(t){var n=e(this);if(!n.is(".disabled, :disabled")){var r=o(n),a=r.hasClass("open");if(i(),!a){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",i);var s={relatedTarget:this};if(r.trigger(t=e.Event("show.bs.dropdown",s)),t.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger("shown.bs.dropdown",s)}return!1}},r.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var r=e(this);if(t.preventDefault(),t.stopPropagation(),!r.is(".disabled, :disabled")){var i=o(r),a=i.hasClass("open");if(!a&&27!=t.which||a&&27==t.which)return 27==t.which&&i.find(n).trigger("focus"),r.trigger("click");var s=" li:not(.divider):visible a",u=i.find('[role="menu"]'+s+', [role="listbox"]'+s);if(u.length){var c=u.index(t.target);38==t.which&&c>0&&c--,40==t.which&&c<u.length-1&&c++,~c||(c=0),u.eq(c).trigger("focus")}}}};var a=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new r(this)),"string"==typeof t&&i[t].call(n)})},e.fn.dropdown.Constructor=r,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=a,this},e(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",n,r.prototype.toggle).on("keydown.bs.dropdown.data-api",n,r.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',r.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',r.prototype.keydown)}(jQuery),function(e){"use strict";var t=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};function n(n,r){return this.each(function(){var i=e(this),o=i.data("bs.modal"),a=e.extend({},t.DEFAULTS,i.data(),"object"==typeof n&&n);o||i.data("bs.modal",o=new t(this,a)),"string"==typeof n?o[n](r):a.show&&o.show(r)})}t.VERSION="3.3.2",t.TRANSITION_DURATION=300,t.BACKDROP_TRANSITION_DURATION=150,t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},t.prototype.show=function(n){var r=this,i=e.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var i=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.options.backdrop&&r.adjustBackdrop(),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in").attr("aria-hidden",!1),r.enforceFocus();var o=e.Event("shown.bs.modal",{relatedTarget:n});i?r.$element.find(".modal-dialog").one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(t.TRANSITION_DURATION):r.$element.trigger("focus").trigger(o)}))},t.prototype.hide=function(n){n&&n.preventDefault(),n=e.Event("hide.bs.modal"),this.$element.trigger(n),this.isShown&&!n.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal())},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},t.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(n){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=e.support.transition&&i;if(this.$backdrop=e('<div class="modal-backdrop '+i+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!n)return;o?this.$backdrop.one("bsTransitionEnd",n).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):n()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){r.removeBackdrop(),n&&n()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):a()}else n&&n()},t.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog()},t.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)},t.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},t.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},t.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},t.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},t.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=n,e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var r=e(this),i=r.attr("href"),o=e(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),a=o.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},o.data(),r.data());r.is("a")&&t.preventDefault(),o.one("show.bs.modal",function(e){e.isDefaultPrevented()||o.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),n.call(o,a,this)})}(jQuery),function(e){"use strict";var t=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};t.VERSION="3.3.2",t.TRANSITION_DURATION=150,t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},t.prototype.init=function(t,n,r){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(this.options.viewport.selector||this.options.viewport),this.children=[];for(var i=this.options.trigger.split(" "),o=i.length;o--;){var a=i[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",u="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return(t=e.extend({},this.getDefaults(),this.$element.data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(n&&n.$tip&&n.$tip.is(":visible"))n.hoverState="in";else{if(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)}},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)},t.prototype.show=function(n){this.children.forEach(function(e){e.show(n)});var r=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(r);var i=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(r.isDefaultPrevented()||!i)return;var o=this,a=this.tip(),s=this.getUID(this.type);this.setContent(),a.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&a.addClass("fade");var u="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,c=/\s?auto?\s?/i,l=c.test(u);l&&(u=u.replace(c,"")||"top"),a.detach().css({top:0,left:0,display:"block"}).addClass(u).data("bs."+this.type,this),this.options.container?a.appendTo(this.options.container):a.insertAfter(this.$element);var d=this.getPosition(),p=a[0].offsetWidth,f=a[0].offsetHeight;if(l){var h=u,m=this.options.container?e(this.options.container):this.$element.parent(),g=this.getPosition(m);u="bottom"==u&&d.bottom+f>g.bottom?"top":"top"==u&&d.top-f<g.top?"bottom":"right"==u&&d.right+p>g.width?"left":"left"==u&&d.left-p<g.left?"right":u,a.removeClass(h).addClass(u)}var y=this.getCalculatedOffset(u,d,p,f);this.applyPlacement(y,u);var b=function(){var e=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==e&&o.leave(o)};n&&!1===n.transition||!e.support.transition||!this.$tip.hasClass("fade")?b():a.one("bsTransitionEnd",b).emulateTransitionEnd(t.TRANSITION_DURATION)}},t.prototype.applyPlacement=function(t,n){var r=this.tip(),i=r[0].offsetWidth,o=r[0].offsetHeight,a=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),t.top=t.top+a,t.left=t.left+s,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var u=r[0].offsetWidth,c=r[0].offsetHeight;"top"==n&&c!=o&&(t.top=t.top+o-c);var l=this.getViewportAdjustedDelta(n,t,u,c);l.left?t.left+=l.left:t.top+=l.top;var d=/top|bottom/.test(n),p=d?2*l.left-i+u:2*l.top-o+c,f=d?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(p,r[0][f],d)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(n){var r=this;r.children.forEach(function(e){e.hide()});var i=this.tip(),o=e.Event("hide.bs."+this.type);function a(){"in"!=r.hoverState&&i.detach(),r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),n&&n()}if(this.$element.trigger(o),!o.isDefaultPrevented())return i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",a).emulateTransitionEnd(t.TRANSITION_DURATION):a(),this.hoverState=null,this},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(t){var n=(t=t||this.$element)[0],r="BODY"==n.tagName,i=n.getBoundingClientRect();null==i.width&&(i=e.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var o=r?{top:0,left:0}:t.offset(),a={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},i,a,s,o)},t.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},t.prototype.getViewportAdjustedDelta=function(e,t,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-o-a.scroll,u=t.top+o-a.scroll+r;s<a.top?i.top=a.top-s:u>a.top+a.height&&(i.top=a.top+a.height-u)}else{var c=t.left-o,l=t.left+o+n;c<a.left?i.left=a.left-c:l>a.width&&(i.left=a.left+a.width-l)}return i},t.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},t.prototype.getUID=function(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},t.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=this;t&&((n=e(t.currentTarget).data("bs."+this.type))||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n),this.children.push(n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type)}),e.children.forEach(function(e){e.destroy()}),e.children=[]};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),o="object"==typeof n&&n;(i||"destroy"!=n)&&(i||r.data("bs.tooltip",i=new t(this,o)),"string"==typeof n&&i[n]())})},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(jQuery),function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.2",t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},t.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var r=e(this),i=r.data("bs.popover"),o="object"==typeof n&&n;(i||"destroy"!=n)&&(i||r.data("bs.popover",i=new t(this,o)),"string"==typeof n&&i[n]())})},e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(jQuery),function(e){"use strict";var t=function(t){this.element=e(t)};function n(n){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new t(this)),"string"==typeof n&&i[n]()})}t.VERSION="3.3.2",t.TRANSITION_DURATION=150,t.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");if(r||(r=(r=t.attr("href"))&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=n.find(".active:last a"),o=e.Event("hide.bs.tab",{relatedTarget:t[0]}),a=e.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(o),t.trigger(a),!a.isDefaultPrevented()&&!o.isDefaultPrevented()){var s=e(r);this.activate(t.closest("li"),n),this.activate(s,s.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},t.prototype.activate=function(n,r,i){var o=r.find("> .active"),a=i&&e.support.transition&&(o.length&&o.hasClass("fade")||!!r.find("> .fade").length);function s(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),n.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(n[0].offsetWidth,n.addClass("in")):n.removeClass("fade"),n.parent(".dropdown-menu")&&n.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}o.length&&a?o.one("bsTransitionEnd",s).emulateTransitionEnd(t.TRANSITION_DURATION):s(),o.removeClass("in")};var r=e.fn.tab;e.fn.tab=n,e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=r,this};var i=function(t){t.preventDefault(),n.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),function(e){"use strict";var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.$trigger=e(this.options.trigger).filter('[href="#'+n.id+'"], [data-target="#'+n.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};function n(t){var n,r=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(r)}function r(n){return this.each(function(){var r=e(this),i=r.data("bs.collapse"),o=e.extend({},t.DEFAULTS,r.data(),"object"==typeof n&&n);!i&&o.toggle&&"show"==n&&(o.toggle=!1),i||r.data("bs.collapse",i=new t(this,o)),"string"==typeof n&&i[n]()})}t.VERSION="3.3.2",t.TRANSITION_DURATION=350,t.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},t.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},t.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var n,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(i&&i.length&&(n=i.data("bs.collapse"))&&n.transitioning)){var o=e.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){i&&i.length&&(r.call(i,"hide"),n||i.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var u=e.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(t.TRANSITION_DURATION)[a](this.$element[0][u])}}}},t.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var n=e.Event("hide.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){var r=this.dimension();this.$element[r](this.$element[r]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!e.support.transition)return i.call(this);this.$element[r](0).one("bsTransitionEnd",e.proxy(i,this)).emulateTransitionEnd(t.TRANSITION_DURATION)}}},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},t.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(t,r){var i=e(r);this.addAriaAndCollapsedClass(n(i),i)},this)).end()},t.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=e.fn.collapse;e.fn.collapse=r,e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var i=e(this);i.attr("data-target")||t.preventDefault();var o=n(i),a=o.data("bs.collapse")?"toggle":e.extend({},i.data(),{trigger:this});r.call(o,a)})}(jQuery),function(e){"use strict";e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one("bsTransitionEnd",function(){n=!0});return setTimeout(function(){n||e(r).trigger(e.support.transition.end)},t),this},e(function(){e.support.transition=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),define("bootstrap",["jquery"],function(){}),function(e){void 0===e.fn.each2&&e.extend(e.fn,{each2:function(t){for(var n=e([0]),r=-1,i=this.length;++r<i&&(n.context=n[0]=this[r])&&!1!==t.call(n[0],r,n););return this}})}(jQuery),function(e,t){"use strict";if(window.Select2===t){var n,r,i,o,a,s,u,c,l={x:0,y:0},d={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case d.LEFT:case d.RIGHT:case d.UP:case d.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case d.SHIFT:case d.CTRL:case d.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return(e=e.which?e.which:e)>=112&&e<=123}},p="<div class='select2-measure-scrollbar'></div>",f={"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};s=e(document),c=1,o=function(){return c++},r=D(n=D(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var r,i;this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&null!==n.element.data("select2")&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=e(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+o()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",n.element.attr("title")),this.body=e(document.body),k(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(P(n.containerCss,this.opts.element)),this.container.addClass(P(n.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",A),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),k(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(P(n.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",A),this.results=r=this.container.find(".select2-results"),this.search=i=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",A),this.results.on("mousemove",function(n){var r=l;r!==t&&r.x===n.pageX&&r.y===n.pageY||e(n.target).trigger("mousemove-filtered",n)}),this.dropdown.on("mousemove-filtered",".select2-results",this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",".select2-results",this.bind(function(e){this._touchEvent=!0,this.highlightUnderEvent(e)})),this.dropdown.on("touchmove",".select2-results",this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",".select2-results",this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(e){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),function(e,t){var n=_(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){g(e.target,t.get())>=0&&n(e)})}(80,this.results),this.dropdown.on("scroll-debounced",".select2-results",this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&r.mousewheel(function(e,t,n,i){var o=r.scrollTop();i>0&&o-i<=0?(r.scrollTop(0),A(e)):i<0&&r.get(0).scrollHeight-r.scrollTop()+i<=r.height()&&(r.scrollTop(r.get(0).scrollHeight-r.height()),A(e))}),w(i),i.on("keyup-change input paste",this.bind(this.updateResults)),i.on("focus",function(){i.addClass("select2-focused")}),i.on("blur",function(){i.removeClass("select2-focused")}),this.dropdown.on("mouseup",".select2-results",this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()}),this.nextSearchTerm=t,e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var a=n.element.prop("disabled");a===t&&(a=!1),this.enable(!a);var s=n.element.prop("readonly");s===t&&(s=!1),this.readonly(s),u=u||function(){var t=e(p);t.appendTo(document.body);var n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),n}(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",n.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,n=e.data("select2"),r=this;this.close(),e.length&&e[0].detachEvent&&r._sync&&e.each(function(){r._sync&&this.detachEvent("onpropertychange",r._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,n!==t&&(n.container.remove(),n.liveRegion.remove(),n.dropdown.remove(),e.show().removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.css("display","")),N.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:y(e.attr("locked"),"locked")||y(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(n){var r,i,a,s,u=this;if("select"===(r=n.element).get(0).tagName.toLowerCase()&&(this.select=i=n.element),i&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),"function"!=typeof(n=e.extend({},{populateResults:function(r,i,a){var s,c=this.opts.id,l=this.liveRegion;(s=function(r,i,d){var p,f,h,m,g,y,b,v,w,_,A=[];for(p=0,f=(r=n.sortResults(r,i,a)).length;p<f;p+=1)m=!(g=!0===(h=r[p]).disabled)&&c(h)!==t,y=h.children&&h.children.length>0,(b=e("<li></li>")).addClass("select2-results-dept-"+d),b.addClass("select2-result"),b.addClass(m?"select2-result-selectable":"select2-result-unselectable"),g&&b.addClass("select2-disabled"),y&&b.addClass("select2-result-with-children"),b.addClass(u.opts.formatResultCssClass(h)),b.attr("role","presentation"),(v=e(document.createElement("div"))).addClass("select2-result-label"),v.attr("id","select2-result-label-"+o()),v.attr("role","option"),(_=n.formatResult(h,v,a,u.opts.escapeMarkup))!==t&&(v.html(_),b.append(v)),y&&((w=e("<ul></ul>")).addClass("select2-result-sub"),s(h.children,w,d+1),b.append(w)),b.data("select2-data",h),A.push(b[0]);i.append(A),l.text(n.formatMatches(r.length))})(i,r,0)}},e.fn.select2.defaults,n)).id&&(a=n.id,n.id=function(e){return e[a]}),e.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(i?(n.query=this.bind(function(e){var n,i,o,a={results:[],more:!1},s=e.term;o=function(t,n){var r;t.is("option")?e.matcher(s,t.text(),t)&&n.push(u.optionToData(t)):t.is("optgroup")&&(r=u.optionToData(t),t.children().each2(function(e,t){o(t,r.children)}),r.children.length>0&&n.push(r))},n=r.children(),this.getPlaceholder()!==t&&n.length>0&&(i=this.getPlaceholderOption())&&(n=n.not(i)),n.each2(function(e,t){o(t,a.results)}),e.callback(a)}),n.id=function(e){return e.id}):"query"in n||("ajax"in n?((s=n.element.data("ajax-url"))&&s.length>0&&(n.ajax.url=s),n.query=C.call(n.element,n.ajax)):"data"in n?n.query=R(n.data):"tags"in n&&(n.query=S(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),n.initSelection===t&&(n.initSelection=function(t,r){var i=[];e(b(t.val(),n.separator,n.transformVal)).each(function(){var t={id:this,text:this},r=n.tags;e.isFunction(r)&&(r=r()),e(r).each(function(){if(y(this.id,t.id))return t=this,!1}),i.push(t)}),r(i)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");if("top"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof n.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return n},monitorSource:function(){var n,r=this.opts.element,i=this;r.on("change.select2",this.bind(function(e){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()})),this._sync=this.bind(function(){var e=r.prop("disabled");e===t&&(e=!1),this.enable(!e);var n=r.prop("readonly");n===t&&(n=!1),this.readonly(n),this.container&&(k(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(P(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(k(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(P(this.opts.dropdownCssClass,this.opts.element)))}),r.length&&r[0].attachEvent&&r.each(function(){this.attachEvent("onpropertychange",i._sync)}),(n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new n(function(t){e.each(t,i._sync)}),this.propertyObserver.observe(r.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var n=e.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){e===t&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,n,r,i,o,a=this.dropdown,s=this.container,c=s.offset(),l=s.outerHeight(!1),d=s.outerWidth(!1),p=a.outerHeight(!1),f=e(window),h=f.width(),m=f.height(),g=f.scrollLeft()+h,y=f.scrollTop()+m,b=c.top+l,v=c.left,w=b+p<=y,_=c.top-p>=f.scrollTop(),A=a.outerWidth(!1);a.hasClass("select2-drop-above")?(n=!0,!_&&w&&(r=!0,n=!1)):(n=!1,!w&&_&&(r=!0,n=!0)),r&&(a.hide(),c=this.container.offset(),l=this.container.outerHeight(!1),d=this.container.outerWidth(!1),p=a.outerHeight(!1),g=f.scrollLeft()+h,y=f.scrollTop()+m,b=c.top+l,v=c.left,A=a.outerWidth(!1),a.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(o=e(".select2-results",a)[0],a.addClass("select2-drop-auto-width"),a.css("width",""),(A=a.outerWidth(!1)+(o.scrollHeight===o.clientHeight?0:u.width))>d?d=A:A=d,p=a.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(b-=(t=this.body.offset()).top,v-=t.left),!(v+A<=g)&&c.left+g+s.outerWidth(!1)>A&&(v=c.left+this.container.outerWidth(!1)-A),i={left:v,width:d},n?(i.top=c.top-p,i.bottom="auto",this.container.addClass("select2-drop-above"),a.addClass("select2-drop-above")):(i.top=b,i.bottom="auto",this.container.removeClass("select2-drop-above"),a.removeClass("select2-drop-above")),i=e.extend(i,P(this.opts.dropdownCss,this.opts.element)),a.css(i)},shouldOpen:function(){var t;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),s.on("mousemove.select2Event",function(e){l.x=e.pageX,l.y=e.pageY}),!0)},opening:function(){var t,n=this.containerEventName,r="scroll."+n,i="resize."+n,o="orientationchange."+n;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0===(t=e("#select2-drop-mask")).length&&((t=e(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body),t.on("mousedown touchstart click",function(n){h(t);var r,i=e("#select2-drop");i.length>0&&((r=i.data("select2")).opts.selectOnBlur&&r.selectHighlighted({noFocus:!0}),r.close(),n.preventDefault(),n.stopPropagation())})),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var a=this;this.container.parents().add(window).each(function(){e(this).on(i+" "+r+" "+o,function(e){a.opened()&&a.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerEventName,n="scroll."+t,r="resize."+t,i="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(n).off(r).off(i)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),s.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return P(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t,n,r,i,o,a,s,u=this.results;(n=this.highlight())<0||(0!=n?(t=this.findHighlightableChoices().find(".select2-result-label"),i=(s=((r=e(t[n])).offset()||{}).top||0)+r.outerHeight(!0),n===t.length-1&&(a=u.find("li.select2-more-results")).length>0&&(i=a.offset().top+a.outerHeight(!0)),i>(o=u.offset().top+u.outerHeight(!1))&&u.scrollTop(u.scrollTop()+(i-o)),s-u.offset().top<0&&r.css("display")):u.scrollTop(0))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){for(var n=this.findHighlightableChoices(),r=this.highlight();r>-1&&r<n.length;){var i=e(n[r+=t]);if(i.hasClass("select2-result-selectable")&&!i.hasClass("select2-disabled")&&!i.hasClass("select2-selected")){this.highlight(r);break}}},highlight:function(t){var n,r,i=this.findHighlightableChoices();if(0===arguments.length)return g(i.filter(".select2-highlighted")[0],i.get());t>=i.length&&(t=i.length-1),t<0&&(t=0),this.removeHighlight(),(n=e(i[t])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",n.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(n.text()),(r=n.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(r),choice:r})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var r=this.findHighlightableChoices();this.highlight(r.index(n))}else 0==n.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e=this.results,t=e.find("li.select2-more-results"),n=this.resultsPage+1,r=this,i=this.search.val(),o=this.context;0!==t.length&&t.offset().top-e.offset().top-e.height()<=this.opts.loadMorePadding&&(t.addClass("select2-active"),this.opts.query({element:this.opts.element,term:i,page:n,context:o,matcher:this.opts.matcher,callback:this.bind(function(a){r.opened()&&(r.opts.populateResults.call(this,e,a.results,{term:i,page:n,context:o}),r.postprocessResults(a,!1,!1),!0===a.more?(t.detach().appendTo(e).html(r.opts.escapeMarkup(P(r.opts.formatLoadMore,r.opts.element,n+1))),window.setTimeout(function(){r.loadMoreIfNeeded()},10)):t.remove(),r.positionDropdown(),r.resultsPage=n,r.context=a.context,this.opts.element.trigger({type:"select2-loaded",items:a}))})}))},tokenize:function(){},updateResults:function(n){var r,i,o,a=this.search,s=this.results,u=this.opts,c=this,l=a.val(),d=e.data(this.container,"select2-last-term");if((!0===n||!d||!y(l,d))&&(e.data(this.container,"select2-last-term",l),!0===n||!1!==this.showSearchInput&&this.opened())){o=++this.queryCount;var p=this.getMaximumSelectionSize();if(!(p>=1&&(r=this.data(),e.isArray(r)&&r.length>=p&&O(u.formatSelectionTooBig,"formatSelectionTooBig"))))return a.val().length<u.minimumInputLength?(O(u.formatInputTooShort,"formatInputTooShort")?h("<li class='select2-no-results'>"+P(u.formatInputTooShort,u.element,a.val(),u.minimumInputLength)+"</li>"):h(""),void(n&&this.showSearch&&this.showSearch(!0))):void(u.maximumInputLength&&a.val().length>u.maximumInputLength?O(u.formatInputTooLong,"formatInputTooLong")?h("<li class='select2-no-results'>"+P(u.formatInputTooLong,u.element,a.val(),u.maximumInputLength)+"</li>"):h(""):(u.formatSearching&&0===this.findHighlightableChoices().length&&h("<li class='select2-searching'>"+P(u.formatSearching,u.element)+"</li>"),a.addClass("select2-active"),this.removeHighlight(),(i=this.tokenize())!=t&&null!=i&&a.val(i),this.resultsPage=1,u.query({element:u.element,term:a.val(),page:this.resultsPage,context:null,matcher:u.matcher,callback:this.bind(function(r){var i;o==this.queryCount&&(this.opened()?r.hasError!==t&&O(u.formatAjaxError,"formatAjaxError")?h("<li class='select2-ajax-error'>"+P(u.formatAjaxError,u.element,r.jqXHR,r.textStatus,r.errorThrown)+"</li>"):(this.context=r.context===t?null:r.context,this.opts.createSearchChoice&&""!==a.val()&&(i=this.opts.createSearchChoice.call(c,a.val(),r.results))!==t&&null!==i&&c.id(i)!==t&&null!==c.id(i)&&0===e(r.results).filter(function(){return y(c.id(this),c.id(i))}).length&&this.opts.createSearchChoicePosition(r.results,i),0===r.results.length&&O(u.formatNoMatches,"formatNoMatches")?h("<li class='select2-no-results'>"+P(u.formatNoMatches,u.element,a.val())+"</li>"):(s.empty(),c.opts.populateResults.call(this,s,r.results,{term:a.val(),page:this.resultsPage,context:null}),!0===r.more&&O(u.formatLoadMore,"formatLoadMore")&&(s.append("<li class='select2-more-results'>"+u.escapeMarkup(P(u.formatLoadMore,u.element,this.resultsPage))+"</li>"),window.setTimeout(function(){c.loadMoreIfNeeded()},10)),this.postprocessResults(r,n),f(),this.opts.element.trigger({type:"select2-loaded",items:r}))):this.search&&this.search.removeClass("select2-active"))})})));h("<li class='select2-selection-limit'>"+P(u.formatSelectionTooBig,u.element,p)+"</li>")}function f(){a.removeClass("select2-active"),c.positionDropdown(),s.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?c.liveRegion.text(s.text()):c.liveRegion.text(c.opts.formatMatches(s.find('.select2-result-selectable:not(".select2-selected")').length))}function h(e){s.html(e),f()}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var e;(e=this.search)[0]!==document.activeElement&&window.setTimeout(function(){var t,n=e[0],r=e.val().length;e.focus(),(n.offsetWidth>0||n.offsetHeight>0)&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(r,r):n.createTextRange&&((t=n.createTextRange()).collapse(!1),t.select()))},0)},selectHighlighted:function(e){if(this._touchMoved)this.clearTouchMoved();else{var t=this.highlight(),n=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");n?(this.highlight(t),this.onSelect(n,e)):e&&e.noFocus&&this.close()}},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var n=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&n||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.trim(n.text())&&""===n.val())return n}},initContainerWidth:function(){var n=function(){var n,r,i,o,a;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if((n=this.opts.element.attr("style"))!==t)for(o=0,a=(r=n.split(";")).length;o<a;o+=1)if(null!==(i=r[o].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&i.length>=1)return i[1];return"resolve"===this.opts.width?(n=this.opts.element.css("width")).indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==n&&this.container.css("width",n)}}),{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='new-password' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var n,r,i;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(n=this.search.get(0)).createTextRange?((r=n.createTextRange()).collapse(!1),r.select()):n.setSelectionRange&&(i=this.search.val().length,n.setSelectionRange(i,i))),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():this.focusser&&(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),N.call(this,"selection","focusser")},initContainer:function(){var t,n,r=this.container,i=this.dropdown,a=o();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=r.find(".select2-choice"),this.focusser=r.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+a),this.focusser.attr("aria-labelledby","select2-chosen-"+a),this.results.attr("id","select2-results-"+a),this.search.attr("aria-owns","select2-results-"+a),this.focusser.attr("id","s2id_autogen"+a),n=e("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.on("focus.select2",this.bind(function(){this.focus()})),this.focusser.prev().text(n.text()).attr("for",this.focusser.attr("id"));var s=this.opts.element.attr("title");this.opts.element.attr("title",s||n.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode)if(e.which!==d.PAGE_UP&&e.which!==d.PAGE_DOWN)switch(e.which){case d.UP:case d.DOWN:return this.moveHighlight(e.which===d.UP?-1:1),void A(e);case d.ENTER:return this.selectHighlighted(),void A(e);case d.TAB:return void this.selectHighlighted({noFocus:!0});case d.ESC:return this.cancel(e),void A(e)}else A(e)})),this.search.on("blur",this.bind(function(e){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==d.TAB&&!d.isControl(e)&&!d.isFunctionKey(e)&&e.which!==d.ESC){if(!1!==this.opts.openOnEnter||e.which!==d.ENTER){if(e.which==d.DOWN||e.which==d.UP||e.which==d.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void A(e)}return e.which==d.DELETE||e.which==d.BACKSPACE?(this.opts.allowClear&&this.clear(),void A(e)):void 0}A(e)}})),w(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),t.on("mousedown touchstart","abbr",this.bind(function(e){var t;this.isInterfaceEnabled()&&(this.clear(),(t=e).preventDefault(),t.stopImmediatePropagation(),this.close(),this.selection&&this.selection.focus())})),t.on("mousedown touchstart",this.bind(function(n){h(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),A(n)})),i.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),t.on("focus",this.bind(function(e){A(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(t){var n=this.selection.data("select2-data");if(n){var r=e.Event("select2-clearing");if(this.opts.element.trigger(r),r.isDefaultPrevented())return;var i=this.getPlaceholderOption();this.opts.element.val(i?i.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==t&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.setPlaceholder(),e.nextSearchTerm=e.opts.nextSearchTerm(n,e.search.val()))})}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()!==t&&((e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val())},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var r=e.find("option").filter(function(){return this.selected&&!this.disabled});t(n.optionToData(r))}:"data"in t&&(t.initSelection=t.initSelection||function(n,r){var i=n.val(),o=null;t.query({matcher:function(e,n,r){var a=y(i,t.id(r));return a&&(o=r),a},callback:e.isFunction(r)?function(){r(o)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(t,n,r){var i=0,o=this;if(this.findHighlightableChoices().each2(function(e,t){if(y(o.id(t.data("select2-data")),o.opts.element.val()))return i=e,!1}),!1!==r&&(!0===n&&i>=0?this.highlight(i):this.highlight(0)),!0===n){var a=this.opts.minimumResultsForSearch;a>=0&&this.showSearch(function t(n){var r=0;return e.each(n,function(e,n){n.children?r+=t(n.children):r++}),r}(t.results)>=a)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var n=this.opts.element.val(),r=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),y(n,this.id(e))||this.triggerChange({added:e,removed:r})}},updateSelection:function(e){var n,r,i=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),i.empty(),null!==e&&(n=this.opts.formatSelection(e,i,this.opts.escapeMarkup)),n!==t&&i.append(n),(r=this.opts.formatSelectionCssClass(e,i))!==t&&i.addClass(r),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,n=!1,r=null,i=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return r=i.optionToData(t),!1}),this.updateSelection(r),this.setPlaceholder(),n&&this.triggerChange({added:r,removed:o});else{if(!e&&0!==e)return void this.clear(n);if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){i.opts.element.val(e?i.id(e):""),i.updateSelection(e),i.setPlaceholder(),n&&i.triggerChange({added:e,removed:o})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var n,r=!1;if(0===arguments.length)return(n=this.selection.data("select2-data"))==t&&(n=null),n;arguments.length>1&&(r=arguments[1]),e?(n=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),r&&this.triggerChange({added:e,removed:n})):this.clear(r)}}),i=D(n,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='new-password' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var r=[];e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(e,t){r.push(n.optionToData(t))}),t(r)}:"data"in t&&(t.initSelection=t.initSelection||function(n,r){var i=b(n.val(),t.separator,t.transformVal),o=[];t.query({matcher:function(n,r,a){var s=e.grep(i,function(e){return y(e,t.id(a))}).length;return s&&o.push(a),s},callback:e.isFunction(r)?function(){for(var e=[],n=0;n<i.length;n++)for(var a=i[n],s=0;s<o.length;s++){var u=o[s];if(y(a,t.id(u))){e.push(u),o.splice(s,1);break}}r(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),N.call(this,"searchContainer","selection")},initContainer:function(){var t,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(n);var r=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(t){r.search[0].focus(),r.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+o()),this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.on("focus.select2",this.bind(function(){this.focus()})),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(n){if(this.isInterfaceEnabled()){++this.keydowns;var r=t.find(".select2-search-choice-focus"),i=r.prev(".select2-search-choice:not(.select2-locked)"),o=r.next(".select2-search-choice:not(.select2-locked)"),a=function(t){var n=0,r=0;if("selectionStart"in(t=e(t)[0]))n=t.selectionStart,r=t.selectionEnd-n;else if("selection"in document){t.focus();var i=document.selection.createRange();r=document.selection.createRange().text.length,i.moveStart("character",-t.value.length),n=i.text.length-r}return{offset:n,length:r}}(this.search);if(r.length&&(n.which==d.LEFT||n.which==d.RIGHT||n.which==d.BACKSPACE||n.which==d.DELETE||n.which==d.ENTER)){var s=r;return n.which==d.LEFT&&i.length?s=i:n.which==d.RIGHT?s=o.length?o:null:n.which===d.BACKSPACE?this.unselect(r.first())&&(this.search.width(10),s=i.length?i:o):n.which==d.DELETE?this.unselect(r.first())&&(this.search.width(10),s=o.length?o:null):n.which==d.ENTER&&(s=null),this.selectChoice(s),A(n),void(s&&s.length||this.open())}if((n.which===d.BACKSPACE&&1==this.keydowns||n.which==d.LEFT)&&0==a.offset&&!a.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),void A(n);if(this.selectChoice(null),this.opened())switch(n.which){case d.UP:case d.DOWN:return this.moveHighlight(n.which===d.UP?-1:1),void A(n);case d.ENTER:return this.selectHighlighted(),void A(n);case d.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case d.ESC:return this.cancel(n),void A(n)}if(n.which!==d.TAB&&!d.isControl(n)&&!d.isFunctionKey(n)&&n.which!==d.BACKSPACE&&n.which!==d.ESC){if(n.which===d.ENTER){if(!1===this.opts.openOnEnter)return;if(n.altKey||n.ctrlKey||n.shiftKey||n.metaKey)return}this.open(),n.which!==d.PAGE_UP&&n.which!==d.PAGE_DOWN||A(n),n.which===d.ENTER&&A(n)}}})),this.search.on("keyup",this.bind(function(e){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",n,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",n,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),n=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var n=[],r=[],i=this;e(t).each(function(){g(i.id(this),n)<0&&(n.push(i.id(this)),r.push(this))}),t=r,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){i.addSelectedChoice(this)}),i.postprocessResults()},tokenize:function(){var e=this.search.val();null!=(e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts))&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,n){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.clearSearch(),this.updateResults(),!this.select&&this.opts.closeOnSelect||this.postprocessResults(e,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),n&&n.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var r,i,o=!n.locked,a=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),s=e("<li class='select2-search-choice select2-locked'><div></div></li>"),u=o?a:s,c=this.id(n),l=this.getVal();(r=this.opts.formatSelection(n,u.find("div"),this.opts.escapeMarkup))!=t&&u.find("div").replaceWith(e("<div></div>").html(r)),(i=this.opts.formatSelectionCssClass(n,u.find("div")))!=t&&u.addClass(i),o&&u.find(".select2-search-choice-close").on("mousedown",A).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),A(t),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),u.data("select2-data",n),u.insertBefore(this.searchContainer),l.push(c),this.setVal(l)},unselect:function(t){var n,r,i=this.getVal();if(0===(t=t.closest(".select2-search-choice")).length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(n=t.data("select2-data")){var o=e.Event("select2-removing");if(o.val=this.id(n),o.choice=n,this.opts.element.trigger(o),o.isDefaultPrevented())return!1;for(;(r=g(this.id(n),i))>=0;)i.splice(r,1),this.setVal(i),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}),!0}},postprocessResults:function(e,t,n){var r=this.getVal(),i=this.results.find(".select2-result"),o=this.results.find(".select2-result-with-children"),a=this;i.each2(function(e,t){g(a.id(t.data("select2-data")),r)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),o.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&!1!==n&&!0===this.opts.closeOnSelect&&a.highlight(0),!this.opts.createSearchChoice&&!i.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&O(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+P(a.opts.formatNoMatches,a.opts.element,a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-v(this.search)},resizeSearch:function(){var t,n,r,i,o=v(this.search);t=function(t){if(!a){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);(a=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),e(document.body).append(a)}return a.text(t.val()),a.width()}(this.search)+10,n=this.search.offset().left,(i=(r=this.selection.width())-(n-this.selection.offset().left)-o)<t&&(i=r-o),i<40&&(i=r-o),i<=0&&(i=t),this.search.width(Math.floor(i))},getVal:function(){var e;return this.select?null===(e=this.select.val())?[]:e:b(e=this.opts.element.val(),this.opts.separator,this.opts.transformVal)},setVal:function(t){var n;this.select?this.select.val(t):(n=[],e(t).each(function(){g(this,n)<0&&n.push(this)}),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},buildChangeDetails:function(e,t){t=t.slice(0),e=e.slice(0);for(var n=0;n<t.length;n++)for(var r=0;r<e.length;r++)y(this.opts.id(t[n]),this.opts.id(e[r]))&&(t.splice(n,1),n>0&&n--,e.splice(r,1),r--);return{added:t,removed:e}},val:function(n,r){var i,o=this;if(0===arguments.length)return this.getVal();if((i=this.data()).length||(i=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(r&&this.triggerChange({added:this.data(),removed:i}));if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),r&&this.triggerChange(this.buildChangeDetails(i,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var n=e.map(t,o.id);o.setVal(n),o.updateSelection(t),o.clearSearch(),r&&o.triggerChange(o.buildChangeDetails(i,o.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(n.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,n){var r,i,o=this;if(0===arguments.length)return this.selection.children(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get();i=this.data(),t||(t=[]),r=e.map(t,function(e){return o.opts.id(e)}),this.setVal(r),this.updateSelection(t),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(i,this.data()))}}),e.fn.select2=function(){var n,r,i,o,a,s=Array.prototype.slice.call(arguments,0),u=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],c=["opened","isFocused","container","dropdown"],l=["val","data"],d={search:"externalSearch"};return this.each(function(){if(0===s.length||"object"==typeof s[0])(n=0===s.length?{}:e.extend({},s[0])).element=e(this),"select"===n.element.get(0).tagName.toLowerCase()?a=n.element.prop("multiple"):(a=n.multiple||!1,"tags"in n&&(n.multiple=a=!0)),(r=a?new window.Select2.class.multi:new window.Select2.class.single).init(n);else{if("string"!=typeof s[0])throw"Invalid arguments to select2 plugin: "+s;if(g(s[0],u)<0)throw"Unknown method: "+s[0];if(o=t,(r=e(this).data("select2"))===t)return;if("container"===(i=s[0])?o=r.container:"dropdown"===i?o=r.dropdown:(d[i]&&(i=d[i]),o=r[i].apply(r,s.slice(1))),g(s[0],c)>=0||g(s[0],l)>=0&&1==s.length)return!1}}),o===t?this:o},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,r){var i=[];return T(this.text(e),n.term,i,r),i.join("")},transformVal:function(t){return e.trim(t)},formatSelection:function(e,n,r){return e?r(this.text(e)):t},sortResults:function(e,t,n){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(e,n){return t},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==t?null:e.id},text:function(t){return t&&this.data&&this.data.text?e.isFunction(this.data.text)?this.data.text(t):t[this.data.text]:t.text},matcher:function(e,t){return m(""+t).toUpperCase().indexOf(m(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:function(e,n,r,i){var o,a,s,u,c,l=e,d=!1;if(!i.createSearchChoice||!i.tokenSeparators||i.tokenSeparators.length<1)return t;for(;;){for(a=-1,s=0,u=i.tokenSeparators.length;s<u&&(c=i.tokenSeparators[s],!((a=e.indexOf(c))>=0));s++);if(a<0)break;if(o=e.substring(0,a),e=e.substring(a+c.length),o.length>0&&(o=i.createSearchChoice.call(this,o,n))!==t&&null!==o&&i.id(o)!==t&&null!==i.id(o)){for(d=!1,s=0,u=n.length;s<u;s++)if(y(i.id(o),i.id(n[s]))){d=!0;break}d||r(o)}}return l!==e?e:void 0},escapeMarkup:E,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,n){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){return!("ontouchstart"in window||navigator.msMaxTouchPoints>0)||!(e.opts.minimumResultsForSearch<0)}},e.fn.select2.locales=[],e.fn.select2.locales.en={formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(e,t,n){return"Loading failed"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" or more character"+(1==n?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(e){return"Loading more results"},formatSearching:function(){return"Searching"}},e.extend(e.fn.select2.defaults,e.fn.select2.locales.en),e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:C,local:R,tags:S},util:{debounce:_,markMatch:T,escapeMarkup:E,stripDiacritics:m},class:{abstract:n,single:r,multi:i}}}function h(t){var n=e(document.createTextNode(""));t.before(n),n.before(t),n.remove()}function m(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return f[e]||e})}function g(e,t){for(var n=0,r=t.length;n<r;n+=1)if(y(e,t[n]))return n;return-1}function y(e,n){return e===n||e!==t&&n!==t&&(null!==e&&null!==n&&(e.constructor===String?e+""==n+"":n.constructor===String&&n+""==e+""))}function b(e,t,n){var r,i,o;if(null===e||e.length<1)return[];for(i=0,o=(r=e.split(t)).length;i<o;i+=1)r[i]=n(r[i]);return r}function v(e){return e.outerWidth(!1)-e.width()}function w(n){var r="keyup-change-value";n.on("keydown",function(){e.data(n,r)===t&&e.data(n,r,n.val())}),n.on("keyup",function(){var i=e.data(n,r);i!==t&&n.val()!==i&&(e.removeData(n,r),n.trigger("keyup-change"))})}function _(e,n,r){var i;return r=r||t,function(){var t=arguments;window.clearTimeout(i),i=window.setTimeout(function(){n.apply(r,t)},e)}}function A(e){e.preventDefault(),e.stopPropagation()}function k(t,n,r){var i,o,a=[];(i=e.trim(t.attr("class")))&&e((i=""+i).split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&a.push(this)}),(i=e.trim(n.attr("class")))&&e((i=""+i).split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(o=r(this))&&a.push(o)}),t.attr("class",a.join(" "))}function T(e,t,n,r){if(t.trim().length){var i=m(e.toUpperCase()).indexOf(m(t.toUpperCase())),o=t.length;i<0?n.push(r(e)):(n.push(r(e.substring(0,i))),n.push("<span class='select2-match'>"),n.push(r(e.substring(i,i+o))),n.push("</span>"),n.push(r(e.substring(i+o,e.length))))}else n.push(r(e))}function E(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function C(n){var r,i=null,o=n.quietMillis||100,a=n.url,s=this;return function(u){window.clearTimeout(r),r=window.setTimeout(function(){var r=n.data,o=a,c=n.transport||e.fn.select2.ajaxDefaults.transport,l={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||t,dataType:n.dataType||"json"},d=e.extend({},e.fn.select2.ajaxDefaults.params,l);r=r?r.call(s,u.term,u.page,u.context):null,o="function"==typeof o?o.call(s,u.term,u.page,u.context):o,i&&"function"==typeof i.abort&&i.abort(),n.params&&(e.isFunction(n.params)?e.extend(d,n.params.call(s)):e.extend(d,n.params)),e.extend(d,{url:o,dataType:n.dataType,data:r,success:function(e){var t=n.results(e,u.page,u);u.callback(t)},error:function(e,t,n){var r={hasError:!0,jqXHR:e,textStatus:t,errorThrown:n};u.callback(r)}}),i=c.call(s,d)},o)}}function R(t){var n,r,i=t,o=function(e){return""+e.text};e.isArray(i)&&(i={results:r=i}),!1===e.isFunction(i)&&(r=i,i=function(){return r});var a=i();return a.text&&(o=a.text,e.isFunction(o)||(n=a.text,o=function(e){return e[n]})),function(t){var n,r=t.term,a={results:[]};""!==r?(n=function(i,a){var s,u;if((i=i[0]).children){for(u in s={},i)i.hasOwnProperty(u)&&(s[u]=i[u]);s.children=[],e(i.children).each2(function(e,t){n(t,s.children)}),(s.children.length||t.matcher(r,o(s),i))&&a.push(s)}else t.matcher(r,o(i),i)&&a.push(i)},e(i().results).each2(function(e,t){n(t,a.results)}),t.callback(a)):t.callback(i())}}function S(n){var r=e.isFunction(n);return function(i){var o=i.term,a={results:[]},s=r?n(i):n;e.isArray(s)&&(e(s).each(function(){var e=this.text!==t,n=e?this.text:this;(""===o||i.matcher(o,n))&&a.results.push(e?this:{id:this,text:this})}),i.callback(a))}}function O(t,n){if(e.isFunction(t))return!0;if(!t)return!1;if("string"==typeof t)return!0;throw new Error(n+" must be a string, function, or falsy value")}function P(t,n){if(e.isFunction(t)){var r=Array.prototype.slice.call(arguments,2);return t.apply(n,r)}return t}function N(){var t=this;e.each(arguments,function(e,n){t[n].remove(),t[n]=null})}function D(t,n){var r=function(){};return(r.prototype=new t).constructor=r,r.prototype.parent=t.prototype,r.prototype=e.extend(r.prototype,n),r}}(jQuery),define("select2",["jquery"],function(e){return function(){return e.Select2}}(this)),define("app/monkeyPatch",["underscore","jquery","backbone","bootstrap","select2"],function(e,t,n){"use strict";var r=n.sync;n.sync=function(e,t,n){return n.syncMethod=e,r.call(this,e,t,n)},t.fn.modal.Constructor.prototype.enforceFocus=function(){},t.fn.modal.Constructor.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(e){27!==e.which||this.$element.hasClass("modal-no-keyboard")||this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},t.fn.modal.Constructor.prototype.backdrop=function(e){var n=this,r=n.$element.hasClass("fade")?"fade":"";if(n.isShown&&n.options.backdrop){var i=t.support.transition&&r;if(n.$backdrop=t('<div class="modal-backdrop '+r+'" />').prependTo(n.$element).on("click.dismiss.bs.modal",function(e){e.target===e.currentTarget&&("static"===n.options.backdrop||n.$element.hasClass("modal-static")?n.$element[0].focus.call(n.$element[0]):n.hide.call(n))}),i&&n.$backdrop[0].offsetWidth,n.$backdrop.addClass("in"),!e)return;i?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(t.fn.modal.Constructor.BACKDROP_TRANSITION_DURATION):e()}else if(!n.isShown&&n.$backdrop){n.$backdrop.removeClass("in");var o=function(){n.removeBackdrop(),e&&e()};t.support.transition&&n.$element.hasClass("fade")?n.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(t.fn.modal.Constructor.BACKDROP_TRANSITION_DURATION):o()}else e&&e()},t.fn.modal.Constructor.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight||"scroll"===t(document.body).css("overflow-y"),this.scrollbarWidth=this.measureScrollbar()},t.fn.popover.Constructor.prototype.hasContent=function(){return"function"==typeof this.options.hasContent?!!this.options.hasContent.call(this.$element[0]):!!this.options.hasContent||(!!this.getTitle()||!!this.getContent())},t.fn.popover.Constructor.prototype.tip=function(){if(this.$tip)return this.$tip;var e=this.options.template;return"function"==typeof e&&(e=e.call(this.$element[0],t.fn.popover.Constructor.DEFAULTS.template)),this.$tip="string"==typeof e?t(e):e,this.options.css&&this.$tip.css(this.options.css),this.options.contentCss&&this.$tip.find(".popover-content").first().css(this.options.contentCss),this.options.className&&this.$tip.addClass(this.options.className),this.$tip},t.fn.popover.Constructor.prototype.getTitle=function(){var e=this.$element,t=this.options;return t.title?"function"==typeof t.title?t.title.call(e[0]):t.title:e.attr("data-original-title")||""};var i=t(document.body);return t.fn.select2.defaults.dropdownContainer=function(e){var t=e.container.closest(".modal-body");if(0===t.length)return i;var n=t.closest(".modal-dialog");return 0===n.length?i:n},i.on("click","label[for]",function(e){var n=t("#"+e.currentTarget.htmlFor);n.data("select2")&&!n.parent().hasClass("has-required-select2")&&n.select2("focus")}),{}}),define("h5.pubsub/Subscriptions",["require","exports","module"],function(e,t,n){"use strict";n.exports=i;var r=[];function i(e){this.messageBroker=e,this.children={},this.subscriptions=[],this.subscriptionsPendingRemoval=[],this.sendingMessagesCount=0,this.removeSubscription=this.removeSubscription.bind(this)}i.TOKEN={SEPARATOR:".",ANY:"*",ALL:"**"},i.prototype.destroy=function(){for(var e=this.children,t=Object.keys(e),n=0,r=t.length;n<r;++n)e[t[n]].destroy();this.children=null,this.removeSubscriptions(),this.subscriptionsPendingRemoval=null,this.messageBroker=null},i.prototype.count=function(e,t){this.subscriptions.length&&(t[e]=this.subscriptions.length);var n=Object.keys(this.children),r=n.length;if(r){0!==e.length&&(e+=i.TOKEN.SEPARATOR);for(var o=0;o<r;++o){var a=n[o];this.children[a].count(e+a,t)}}},i.prototype.add=function(e){var t=this.splitTopic(e.getTopic());this.addSubscription(t,e)},i.prototype.remove=function(e){this.removeSubscriptions(this.splitTopic(e))},i.prototype.send=function(e,t,n){var r=this.splitTopic(e);this.sendMessage(r,e,t,n)},i.prototype.addSubscription=function(e,t){if(0===e.length)return this.subscriptions.push(t),t.on("cancel",this.removeSubscription),void(1===this.subscriptions.length&&this.messageBroker.emit("new topic",t.getTopic()));var n=this.children,r=e.shift();void 0===n[r]&&(n[r]=new i(this.messageBroker)),n[r].addSubscription(e,t)},i.prototype.removeSubscriptions=function(e){var t,n;if(void 0!==e&&0!==e.length){var r=e.shift();void 0!==this.children[r]&&this.children[r].removeSubscriptions(e)}else{var i=this.subscriptions;if(!i.length)return;this.subscriptions=[];var o=i[0].getTopic();for(t=0,n=i.length;t<n;++t)i[t].cancel();this.messageBroker.emit("empty topic",o)}},i.prototype.sendMessage=function(e,t,n,o){if(++this.sendingMessagesCount,void 0!==this.children[i.TOKEN.ALL]&&this.children[i.TOKEN.ALL].sendMessage(r,t,n,o),0===e.length)for(var a=0,s=this.subscriptions.length;a<s;++a)this.subscriptions[a].send(t,n,o);else{var u=e.shift();void 0!==this.children[i.TOKEN.ANY]&&this.children[i.TOKEN.ANY].sendMessage([].concat(e),t,n,o),void 0!==this.children[u]&&this.children[u].sendMessage(e,t,n,o)}--this.sendingMessagesCount,this.removePendingSubscriptions()},i.prototype.splitTopic=function(e){var t=e.split(i.TOKEN.SEPARATOR).filter(function(e){return 0!==e.length});if(0===t.length)throw new Error("Invalid subscription topic: "+e);return t},i.prototype.removeSubscription=function(e){if(this.messageBroker.emit("cancel",e),0!==this.subscriptions.length)return 1===this.subscriptions.length&&this.subscriptions[0]===e?(this.subscriptions.length=0,void this.messageBroker.emit("empty topic",e.getTopic())):void this.removeOrQueueRemoval(e)},i.prototype.removeOrQueueRemoval=function(e){0===this.sendingMessagesCount?this.subscriptions.splice(this.subscriptions.indexOf(e),1):this.subscriptionsPendingRemoval.push(e)},i.prototype.removePendingSubscriptions=function(){var e=this.subscriptionsPendingRemoval,t=e.length;if(t&&!this.sendingMessagesCount){var n=this.subscriptions;if(t===n.length)return e.length=0,void(n.length=0);var r,i,o=[];for(r=0;r<t;++r)o.push(n.indexOf(e[r]));for(o.sort(function(e,t){return t-e}),r=0,i=o.length;r<i;++r)n.splice(o[r],1);e.length=0}}}),define("h5.pubsub/Subscription",["require","exports","module"],function(e,t,n){"use strict";function r(e,t){this.cancelled=!1,this.id=e,this.topic=t,this.messageFilter=null,this.messageLimit=0,this.messageCount=0,this.doFilter=null,this.listeners={cancel:null,message:null}}n.exports=r,r.compileFilter=function(){throw new Error("Subscription.compileFilter() is not implemented!")},r.prototype.toJSON=function(){var e=this.getFilter();return"function"==typeof e&&(e=e.toString()),{id:this.getId(),topic:this.getTopic(),limit:this.getLimit(),filter:e}},r.prototype.getId=function(){return this.id},r.prototype.getTopic=function(){return this.topic},r.prototype.getFilter=function(){return this.messageFilter},r.prototype.setFilter=function(e){if(this.messageFilter=e,"function"==typeof e)this.doFilter=e;else if(this.doFilter=r.compileFilter(e),"function"!=typeof this.doFilter)throw new Error("Subscription.compileFilter() must return a function.");return this},r.prototype.getLimit=function(){return this.messageLimit},r.prototype.setLimit=function(e){if(e<1)throw new Error("Subscription limit must be greater than 0.");return this.messageLimit=e,this},r.prototype.getMessageCount=function(){return this.messageCount},r.prototype.on=function(e,t){if(this.cancelled)return this;var n=this.listeners[e],r=typeof n;if("undefined"===r)throw new Error("Unknown event: "+e);return"function"===r?this.listeners[e]=[n,t]:null===n?this.listeners[e]=t:this.listeners[e].push(t),this},r.prototype.off=function(e,t){if(this.cancelled)return this;var n=this.listeners[e],r=typeof n;if("undefined"===r)throw new Error("Unknown event: "+e);if("function"===r&&n===t)this.listeners[e]=null;else if("object"===r&&null!==n){for(var i=-1,o=n.length,a=0;a<o;++a)if(n[a]===t){i=a;break}-1!==i&&(n.splice(i,1),2===o&&(this.listeners[e]=n[0]))}return this},r.prototype.cancel=function(){this.cancelled||(this.cancelled=!0,this.emit("cancel",this),this.listeners=null,this.doFilter=null)},r.prototype.send=function(e,t,n){this.cancelled||null!==this.doFilter&&!this.doFilter(t,e,n,this)||(++this.messageCount,this.emit("message",t,e,n,this),this.messageCount===this.messageLimit&&this.cancel())},r.prototype.emit=function(e){var t=this.listeners[e];if(null!==t){var n=arguments.length;if("function"!=typeof t)for(var r=0,i=t.length;r<i;++r)5===n?t[r](arguments[1],arguments[2],arguments[3],arguments[4]):t[r](arguments[1]);else 5===n?t(arguments[1],arguments[2],arguments[3],arguments[4]):t(arguments[1])}}}),define("h5.pubsub/Sandbox",["require","exports","module"],function(e,t,n){"use strict";function r(e){this.broker=e,this.subscriptions={},this.removeSubscription=this.removeSubscription.bind(this)}n.exports=r,r.prototype.destroy=function(){var e=this.subscriptions;null!==e&&Object.keys(e).forEach(function(t){e[t].cancel()})},r.prototype.sandbox=function(){return new r(this)},r.prototype.publish=function(e,t,n){return this.broker.publish(e,t,n),this},r.prototype.subscribe=function(e,t){var n=this.broker.subscribe(e,t);return n.on("cancel",this.removeSubscription),this.subscriptions[n.getId()]=n,n},r.prototype.unsubscribe=function(e){var t=[],n=this.subscriptions;for(var r in n)n.hasOwnProperty(r)&&n[r].getTopic()===e&&t.push(r);for(var i=0,o=t.length;i<o;++i)n[t[i]].cancel();return this},r.prototype.removeSubscription=function(e){delete this.subscriptions[e.getId()]}}),define("h5.pubsub/MessageBroker",["require","exports","module","./Subscriptions","./Subscription","./Sandbox"],function(e,t,n){"use strict";var r=e("./Subscriptions"),i=e("./Subscription"),o=e("./Sandbox");function a(){this.subscriptions=new r(this),this.nextSubscriptionId=0,this.listeners={subscribe:[],cancel:[],"new topic":[],"empty topic":[],message:[]}}n.exports=a,a.prototype.destroy=function(){this.subscriptions.destroy(),this.listeners={}},a.prototype.sandbox=function(){return new o(this)},a.prototype.publish=function(e,t,n){return void 0===n&&(n={}),this.emit("message",e,t,n),this.subscriptions.send(e,t,n),this},a.prototype.subscribe=function(e,t){var n=new i(this.getNextSubscriptionId(),e);return"function"==typeof t&&n.on("message",t),this.subscriptions.add(n),this.emit("subscribe",n),n},a.prototype.unsubscribe=function(e){return this.subscriptions.remove(e),this},a.prototype.count=function(){var e={};if(null===this.subscriptions)return e;return this.subscriptions.count("",e),e},a.prototype.on=function(e,t){var n=this.listeners[e];if("undefined"===typeof n)throw new Error("Unknown event: "+e);return n.push(t),this},a.prototype.off=function(e,t){var n=this.listeners[e];if("undefined"===typeof n)throw new Error("Unknown event: "+e);var r=n.indexOf(t);return-1!==r&&n.splice(r,1),this},a.prototype.emit=function(e,t){var n=this.listeners[e];if("undefined"===typeof n)throw new Error("Unknown event: "+e);if(!n.length)return this;var r=arguments.length;r>4&&(t=Array.prototype.slice.call(arguments)).shift();for(var i=0,o=n.length;i<o;++i){var a=n[i];switch(r){case 4:a(arguments[1],arguments[2],arguments[3]);break;case 3:a(arguments[1],arguments[2]);break;case 2:a(arguments[1]);break;default:a.apply(null,t)}}return this},a.prototype.getNextSubscriptionId=function(){return(this.nextSubscriptionId++).toString(36)}}),define("app/broker",["h5.pubsub/MessageBroker"],function(e){"use strict";var t=new e;return t.on("message",function(e,t){void 0===t?console.log("[%s]",e):console.log("[%s]",e,t)}),window.broker=t,t}),define("app/i18n",["underscore","moment","select2","app/broker"],function(e,t,n,r){"use strict";var i={},o=[];function a(e,t,n){try{return i[e][t](n)}catch(n){if(i[e]&&i[e][t])throw n;return r.publish("i18n.missingKey",{domain:e,key:t}),t}}function s(e,t){return void 0!==i[e]&&"function"==typeof i[e][t]}function u(t){var n={};if(null==t)return n;for(var r=Object.keys(t),i=0,o=r.length;i<o;++i){var a=r[i],s=t[a];if(null!==s&&"object"==typeof s)for(var c=u(s),l=Object.keys(c),d=0,p=l.length;d<p;++d)n[a+"->"+l[d]]=String(c[l[d]]);else n[a]="_"===a.charAt(0)?String(s):e.escape(String(s))}return n}return a.config=null,a.translate=a,a.register=function(e,t,n){i[e]=t,"string"==typeof n&&o.push(n),r.publish("i18n.registered",{domain:e,keys:t,moduleId:n})},a.reload=function(i,s){var u="en";e.isObject(a.config)&&(u=a.config.locale,a.config.locale=i),o.forEach(require.undef);var c=[].concat(o);"en"!==i&&c.unshift("moment-lang/"+i),c.unshift("select2-lang/"+i),require(c,function(){t.locale(i),n.lang(i),r.publish("i18n.reloaded",{oldLocale:u,newLocale:i}),e.isFunction(s)&&s()})},a.bound=function(e,t,n){function r(){return a(e,t,n)}return r.toString=r,r},a.has=s,a.flatten=u,a.forDomain=function(e){var t=function(t,n,r){return"object"==typeof n?a(e,t,n):"string"==typeof n||r?a(t,n,r):a(e,t)};return t.translate=t,t.bound=function(e,n,r){function i(){return t(e,n,r)}return i.toString=i,i},t.has=function(t,n){return n?s(t,n):s(e,t)},t.flatten=u,t},window.i18n=a,a}),define("socket.io",[],function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=n(1),o=n(4),a=n(10),s=n(3)("socket.io-client");e.exports=t=c;var u=t.managers={};function c(e,t){"object"==(void 0===e?"undefined":r(e))&&(t=e,e=void 0),t=t||{};var n,o=i(e),c=o.source,l=o.id,d=o.path,p=u[l]&&d in u[l].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||p?(s("ignoring socket cache for %s",c),n=a(c,t)):(u[l]||(s("new io instance for %s",c),u[l]=a(c,t)),n=u[l]),n.socket(o.path)}t.protocol=o.protocol,t.connect=c,t.Manager=n(10),t.Socket=n(37)},function(e,t,n){(function(t){"use strict";var r=n(2),i=n(3)("socket.io-client:url");e.exports=function(e,n){var o=e,n=n||t.location;null==e&&(e=n.protocol+"//"+n.host);"string"==typeof e&&("/"==e.charAt(0)&&(e="/"==e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e=void 0!==n?n.protocol+"//"+e:"https://"+e),i("parse %s",e),o=r(e));o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443"));o.path=o.path||"/";var a=-1!==o.host.indexOf(":")?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+a+":"+o.port,o.href=o.protocol+"://"+a+(n&&n.port==o.port?"":":"+o.port),o}}).call(t,function(){return this}())},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,i=e.indexOf("["),o=e.indexOf("]");-1!=i&&-1!=o&&(e=e.substring(0,i)+e.substring(i,o).replace(/:/g,";")+e.substring(o,e.length));for(var a=n.exec(e||""),s={},u=14;u--;)s[r[u]]=a[u]||"";return-1!=i&&-1!=o&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},function(e,t){"use strict";e.exports=function(){return function(){}}},function(e,t,n){var r=n(3)("socket.io-parser"),i=n(5),o=(n(6),n(7)),a=n(8),s=n(9);function u(){}function c(e){var n="",o=!1;return n+=e.type,t.BINARY_EVENT!=e.type&&t.BINARY_ACK!=e.type||(n+=e.attachments,n+="-"),e.nsp&&"/"!=e.nsp&&(o=!0,n+=e.nsp),null!=e.id&&(o&&(n+=",",o=!1),n+=e.id),null!=e.data&&(o&&(n+=","),n+=i.stringify(e.data)),r("encoded %j as %s",e,n),n}function l(){this.reconstructor=null}function d(e){this.reconPack=e,this.buffers=[]}function p(e){return{type:t.ERROR,data:"parser error"}}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=u,t.Decoder=l,u.prototype.encode=function(e,n){(r("encoding packet %j",e),t.BINARY_EVENT==e.type||t.BINARY_ACK==e.type)?function(e,t){a.removeBlobs(e,function(e){var n=a.deconstructPacket(e),r=c(n.packet),i=n.buffers;i.unshift(r),t(i)})}(e,n):n([c(e)])},o(l.prototype),l.prototype.add=function(e){var n;if("string"==typeof e)n=function(e){var n={},o=0;if(n.type=Number(e.charAt(0)),null==t.types[n.type])return p();if(t.BINARY_EVENT==n.type||t.BINARY_ACK==n.type){for(var a="";"-"!=e.charAt(++o)&&(a+=e.charAt(o),o!=e.length););if(a!=Number(a)||"-"!=e.charAt(o))throw new Error("Illegal attachments");n.attachments=Number(a)}if("/"==e.charAt(o+1))for(n.nsp="";++o;){var s=e.charAt(o);if(","==s)break;if(n.nsp+=s,o==e.length)break}else n.nsp="/";var u=e.charAt(o+1);if(""!==u&&Number(u)==u){for(n.id="";++o;){var s=e.charAt(o);if(null==s||Number(s)!=s){--o;break}if(n.id+=e.charAt(o),o==e.length)break}n.id=Number(n.id)}if(e.charAt(++o))try{n.data=i.parse(e.substr(o))}catch(e){return p()}return r("decoded %s as %j",e,n),n}(e),t.BINARY_EVENT==n.type||t.BINARY_ACK==n.type?(this.reconstructor=new d(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!s(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",n))}},l.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},d.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=a.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},d.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t){"use strict";e.exports=JSON},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){var n=this;function r(){n.off(e,r),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){(function(e){var r=n(6),i=n(9);t.deconstructPacket=function(e){var t=[],n=e.data;var o=e;return o.data=function e(n){if(!n)return n;if(i(n)){var o={_placeholder:!0,num:t.length};return t.push(n),o}if(r(n)){for(var a=new Array(n.length),s=0;s<n.length;s++)a[s]=e(n[s]);return a}if("object"==typeof n&&!(n instanceof Date)){for(var u in a={},n)a[u]=e(n[u]);return a}return n}(n),o.attachments=t.length,{packet:o,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function e(n){if(n&&n._placeholder)return t[n.num];if(r(n)){for(var i=0;i<n.length;i++)n[i]=e(n[i]);return n}if(n&&"object"==typeof n){for(var o in n)n[o]=e(n[o]);return n}return n}(e.data),e.attachments=void 0,e},t.removeBlobs=function(t,n){var o=0,a=t;!function t(s,u,c){if(!s)return s;if(e.Blob&&s instanceof Blob||e.File&&s instanceof File){o++;var l=new FileReader;l.onload=function(){c?c[u]=this.result:a=this.result,--o||n(a)},l.readAsArrayBuffer(s)}else if(r(s))for(var d=0;d<s.length;d++)t(s[d],d,s);else if(s&&"object"==typeof s&&!i(s))for(var p in s)t(s[p],p,s)}(a),o||n(a)}}).call(t,function(){return this}())},function(e,t){(function(t){e.exports=function(e){return t.Buffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer}}).call(t,function(){return this}())},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=n(11),o=n(37),a=n(38),s=n(4),u=n(40),c=n(41),l=n(3)("socket.io-client:manager"),d=n(35),p=n(43),f=Object.prototype.hasOwnProperty;function h(e,t){if(!(this instanceof h))return new h(e,t);e&&"object"==(void 0===e?"undefined":r(e))&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new p({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new s.Encoder,this.decoder=new s.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}e.exports=h,h.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)f.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},h.prototype.updateSocketIds=function(){for(var e in this.nsps)f.call(this.nsps,e)&&(this.nsps[e].id=this.engine.id)},a(h.prototype),h.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},h.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},h.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},h.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},h.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},h.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},h.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},h.prototype.open=h.prototype.connect=function(e){if(l("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=i(this.uri,this.opts);var t=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var r=u(t,"open",function(){n.onopen(),e&&e()}),o=u(t,"error",function(t){if(l("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),e){var r=new Error("Connection error");r.data=t,e(r)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;l("connect attempt will timeout after %d",a);var s=setTimeout(function(){l("connect attempt timed out after %d",a),r.destroy(),t.close(),t.emit("error","timeout"),n.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(s)}})}return this.subs.push(r),this.subs.push(o),this},h.prototype.onopen=function(){l("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(u(e,"data",c(this,"ondata"))),this.subs.push(u(e,"ping",c(this,"onping"))),this.subs.push(u(e,"pong",c(this,"onpong"))),this.subs.push(u(e,"error",c(this,"onerror"))),this.subs.push(u(e,"close",c(this,"onclose"))),this.subs.push(u(this.decoder,"decoded",c(this,"ondecoded")))},h.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},h.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},h.prototype.ondata=function(e){this.decoder.add(e)},h.prototype.ondecoded=function(e){this.emit("packet",e)},h.prototype.onerror=function(e){l("error",e),this.emitAll("error",e)},h.prototype.socket=function(e){var t=this.nsps[e];if(!t){t=new o(this,e),this.nsps[e]=t;var n=this;t.on("connecting",r),t.on("connect",function(){t.id=n.engine.id}),this.autoConnect&&r()}function r(){~d(n.connecting,t)||n.connecting.push(t)}return t},h.prototype.destroy=function(e){var t=d(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},h.prototype.packet=function(e){l("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()}))},h.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},h.prototype.cleanup=function(){var e;for(l("cleanup");e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},h.prototype.close=h.prototype.disconnect=function(){l("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"==this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},h.prototype.onclose=function(e){l("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},h.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();l("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(l("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(l("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(l("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},h.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,n){e.exports=n(12)},function(e,t,n){e.exports=n(13),e.exports.parser=n(21)},function(e,t,n){(function(t){var r=n(14),i=n(30),o=n(3)("engine.io-client:socket"),a=n(35),s=n(21),u=n(2),c=n(36),l=n(31);function d(e,n){if(!(this instanceof d))return new d(e,n);n=n||{},e&&"object"==typeof e&&(n=e,e=null),e?(e=u(e),n.hostname=e.host,n.secure="https"==e.protocol||"wss"==e.protocol,n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=u(n.host).host),this.secure=null!=n.secure?n.secure:t.location&&"https:"==location.protocol,n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.agent=n.agent||!1,this.hostname=n.hostname||(t.location?location.hostname:"localhost"),this.port=n.port||(t.location&&location.port?location.port:this.secure?443:80),this.query=n.query||{},"string"==typeof this.query&&(this.query=l.decode(this.query)),this.upgrade=!1!==n.upgrade,this.path=(n.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!n.forceJSONP,this.jsonp=!1!==n.jsonp,this.forceBase64=!!n.forceBase64,this.enablesXDR=!!n.enablesXDR,this.timestampParam=n.timestampParam||"t",this.timestampRequests=n.timestampRequests,this.transports=n.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.policyPort=n.policyPort||843,this.rememberUpgrade=n.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=n.onlyBinaryUpgrades,this.perMessageDeflate=!1!==n.perMessageDeflate&&(n.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=n.pfx||null,this.key=n.key||null,this.passphrase=n.passphrase||null,this.cert=n.cert||null,this.ca=n.ca||null,this.ciphers=n.ciphers||null,this.rejectUnauthorized=void 0===n.rejectUnauthorized?null:n.rejectUnauthorized;var r="object"==typeof t&&t;r.global===r&&n.extraHeaders&&Object.keys(n.extraHeaders).length>0&&(this.extraHeaders=n.extraHeaders),this.open()}e.exports=d,d.priorWebsocketSuccess=!1,i(d.prototype),d.protocol=s.protocol,d.Socket=d,d.Transport=n(20),d.transports=n(14),d.parser=n(21),d.prototype.createTransport=function(e){o('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);return t.EIO=s.protocol,t.transport=e,this.id&&(t.sid=this.id),new r[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders})},d.prototype.open=function(){var e;if(this.rememberUpgrade&&d.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},d.prototype.setTransport=function(e){o("setting transport %s",e.name);var t=this;this.transport&&(o("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},d.prototype.probe=function(e){o('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,r=this;function i(){if(r.onlyBinaryUpgrades){var i=!this.supportsBinary&&r.transport.supportsBinary;n=n||i}n||(o('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",function(i){if(!n)if("pong"==i.type&&"probe"==i.data){if(o('probe transport "%s" pong',e),r.upgrading=!0,r.emit("upgrading",t),!t)return;d.priorWebsocketSuccess="websocket"==t.name,o('pausing current transport "%s"',r.transport.name),r.transport.pause(function(){n||"closed"!=r.readyState&&(o("changing transport and sending upgrade packet"),p(),r.setTransport(t),t.send([{type:"upgrade"}]),r.emit("upgrade",t),t=null,r.upgrading=!1,r.flush())})}else{o('probe transport "%s" failed',e);var a=new Error("probe error");a.transport=t.name,r.emit("upgradeError",a)}}))}function a(){n||(n=!0,p(),t.close(),t=null)}function s(n){var i=new Error("probe error: "+n);i.transport=t.name,a(),o('probe transport "%s" failed because of error: %s',e,n),r.emit("upgradeError",i)}function u(){s("transport closed")}function c(){s("socket closed")}function l(e){t&&e.name!=t.name&&(o('"%s" works - aborting "%s"',e.name,t.name),a())}function p(){t.removeListener("open",i),t.removeListener("error",s),t.removeListener("close",u),r.removeListener("close",c),r.removeListener("upgrading",l)}d.priorWebsocketSuccess=!1,t.once("open",i),t.once("error",s),t.once("close",u),this.once("close",c),this.once("upgrading",l),t.open()},d.prototype.onOpen=function(){if(o("socket open"),this.readyState="open",d.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){o("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},d.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(o('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(c(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else o('packet received with socket readyState "%s"',this.readyState)},d.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},d.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},d.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){o("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},d.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},d.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},d.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(o("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},d.prototype.write=d.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},d.prototype.sendPacket=function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!=this.readyState&&"closed"!=this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}},d.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():t()}):this.upgrading?r():t()}function t(){e.onClose("forced close"),o("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function r(){e.once("upgrade",n),e.once("upgradeError",n)}return this},d.prototype.onError=function(e){o("socket error %j",e),d.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},d.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){o('socket close with reason: "%s"',e);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0}},d.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~a(this.transports,e[n])&&t.push(e[n]);return t}}).call(t,function(){return this}())},function(e,t,n){(function(e){var r=n(15),i=n(17),o=n(18),a=n(19);t.polling=function(t){var n=!1,a=!1,s=!1!==t.jsonp;if(e.location){var u="https:"==location.protocol,c=location.port;c||(c=u?443:80),n=t.hostname!=location.hostname||c!=t.port,a=t.secure!=u}if(t.xdomain=n,t.xscheme=a,"open"in new r(t)&&!t.forceJSONP)return new i(t);if(!s)throw new Error("JSONP disabled");return new o(t)},t.websocket=a}).call(t,function(){return this}())},function(e,t,n){var r=n(16);e.exports=function(e){var t=e.xdomain,n=e.xscheme,i=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&i)return new XDomainRequest}catch(e){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(){}},function(e,t,n){(function(t){var r=n(20),i=n(21),o=n(31),a=n(32),s=n(33),u=n(3)("engine.io-client:websocket"),c=t.WebSocket||t.MozWebSocket,l=c;if(!l&&"undefined"==typeof window)try{l=n(34)}catch(e){}function d(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,r.call(this,e)}e.exports=d,a(d,r),d.prototype.name="websocket",d.prototype.supportsBinary=!0,d.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t={agent:this.agent,perMessageDeflate:this.perMessageDeflate};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(t.headers=this.extraHeaders),this.ws=c?new l(e):new l(e,void 0,t),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="buffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},d.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(d.prototype.onData=function(e){var t=this;setTimeout(function(){r.prototype.onData.call(t,e)},0)}),d.prototype.write=function(e){var n=this;this.writable=!1;for(var r=e.length,o=0,a=r;o<a;o++)!function(e){i.encodePacket(e,n.supportsBinary,function(i){if(!c){var o={};if(e.options&&(o.compress=e.options.compress),n.perMessageDeflate)("string"==typeof i?t.Buffer.byteLength(i):i.length)<n.perMessageDeflate.threshold&&(o.compress=!1)}try{c?n.ws.send(i):n.ws.send(i,o)}catch(e){u("websocket closed before onclose event")}--r||s()})}(e[o]);function s(){n.emit("flush"),setTimeout(function(){n.writable=!0,n.emit("drain")},0)}},d.prototype.onClose=function(){r.prototype.onClose.call(this)},d.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},d.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=s()),this.supportsBinary||(e.b64=1),(e=o.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},d.prototype.check=function(){return!(!l||"__initialize"in l&&this.name===d.prototype.name)}}).call(t,function(){return this}())},function(e,t,n){var r=n(21),i=n(30);function o(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders}e.exports=o,i(o.prototype),o.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},o.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},o.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},o.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},o.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},o.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},o.prototype.onPacket=function(e){this.emit("packet",e)},o.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t,n){(function(e){var r=n(22),i=n(23),o=n(24),a=n(25),s=n(26),u=n(27),c=navigator.userAgent.match(/Android/i),l=/PhantomJS/i.test(navigator.userAgent),d=c||l;t.protocol=3;var p=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},f=r(p),h={type:"error",data:"parser error"},m=n(29);function g(e,t,n){for(var r=new Array(e.length),i=s(e.length,n),o=function(e,n,i){t(n,function(t,n){r[e]=n,i(t,r)})},a=0;a<e.length;a++)o(a,e[a],i)}t.encodePacket=function(n,r,i,o){"function"==typeof r&&(o=r,r=!1),"function"==typeof i&&(o=i,i=null);var a=void 0===n.data?void 0:n.data.buffer||n.data;if(e.ArrayBuffer&&a instanceof ArrayBuffer)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var i=e.data,o=new Uint8Array(i),a=new Uint8Array(1+i.byteLength);a[0]=p[e.type];for(var s=0;s<o.length;s++)a[s+1]=o[s];return r(a.buffer)}(n,r,o);if(m&&a instanceof e.Blob)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);if(d)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var i=new FileReader;return i.onload=function(){e.data=i.result,t.encodePacket(e,n,!0,r)},i.readAsArrayBuffer(e.data)}(e,n,r);var i=new Uint8Array(1);i[0]=p[e.type];var o=new m([i.buffer,e.data]);return r(o)}(n,r,o);if(a&&a.base64)return function(e,n){var r="b"+t.packets[e.type]+e.data.data;return n(r)}(n,o);var s=p[n.type];return void 0!==n.data&&(s+=i?u.encode(String(n.data)):String(n.data)),o(""+s)},t.encodeBase64Packet=function(n,r){var i,o="b"+t.packets[n.type];if(m&&n.data instanceof e.Blob){var a=new FileReader;return a.onload=function(){var e=a.result.split(",")[1];r(o+e)},a.readAsDataURL(n.data)}try{i=String.fromCharCode.apply(null,new Uint8Array(n.data))}catch(e){for(var s=new Uint8Array(n.data),u=new Array(s.length),c=0;c<s.length;c++)u[c]=s[c];i=String.fromCharCode.apply(null,u)}return o+=e.btoa(i),r(o)},t.decodePacket=function(e,n,r){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(r)try{e=u.decode(e)}catch(e){return h}var i=e.charAt(0);return Number(i)==i&&f[i]?e.length>1?{type:f[i],data:e.substring(1)}:{type:f[i]}:h}i=new Uint8Array(e)[0];var a=o(e,1);return m&&"blob"===n&&(a=new m([a])),{type:f[i],data:a}},t.decodeBase64Packet=function(t,n){var r=f[t.charAt(0)];if(!e.ArrayBuffer)return{type:r,data:{base64:!0,data:t.substr(1)}};var i=a.decode(t.substr(1));return"blob"===n&&m&&(i=new m([i])),{type:r,data:i}},t.encodePayload=function(e,n,r){"function"==typeof n&&(r=n,n=null);var o=i(e);if(n&&o)return m&&!d?t.encodePayloadAsBlob(e,r):t.encodePayloadAsArrayBuffer(e,r);if(!e.length)return r("0:");g(e,function(e,r){t.encodePacket(e,!!o&&n,!0,function(e){r(null,function(e){return e.length+":"+e}(e))})},function(e,t){return r(t.join(""))})},t.decodePayload=function(e,n,r){if("string"!=typeof e)return t.decodePayloadAsBinary(e,n,r);var i;if("function"==typeof n&&(r=n,n=null),""==e)return r(h,0,1);for(var o,a,s="",u=0,c=e.length;u<c;u++){var l=e.charAt(u);if(":"!=l)s+=l;else{if(""==s||s!=(o=Number(s)))return r(h,0,1);if(s!=(a=e.substr(u+1,o)).length)return r(h,0,1);if(a.length){if(i=t.decodePacket(a,n,!0),h.type==i.type&&h.data==i.data)return r(h,0,1);if(!1===r(i,u+o,c))return}u+=o,s=""}}return""!=s?r(h,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){if(!e.length)return n(new ArrayBuffer(0));g(e,function(e,n){t.encodePacket(e,!0,!0,function(e){return n(null,e)})},function(e,t){var r=t.reduce(function(e,t){var n;return e+(n="string"==typeof t?t.length:t.byteLength).toString().length+n+2},0),i=new Uint8Array(r),o=0;return t.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),a=0;a<e.length;a++)r[a]=e.charCodeAt(a);n=r.buffer}i[o++]=t?0:1;var s=n.byteLength.toString();for(a=0;a<s.length;a++)i[o++]=parseInt(s[a]);i[o++]=255;for(r=new Uint8Array(n),a=0;a<r.length;a++)i[o++]=r[a]}),n(i.buffer)})},t.encodePayloadAsBlob=function(e,n){g(e,function(e,n){t.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);e=r.buffer,t[0]=0}var o=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),a=new Uint8Array(o.length+1);for(i=0;i<o.length;i++)a[i]=parseInt(o[i]);if(a[o.length]=255,m){var s=new m([t.buffer,a.buffer,e]);n(null,s)}})},function(e,t){return n(new m(t))})},t.decodePayloadAsBinary=function(e,n,r){"function"==typeof n&&(r=n,n=null);for(var i=e,a=[],s=!1;i.byteLength>0;){for(var u=new Uint8Array(i),c=0===u[0],l="",d=1;255!=u[d];d++){if(l.length>310){s=!0;break}l+=u[d]}if(s)return r(h,0,1);i=o(i,2+l.length),l=parseInt(l);var p=o(i,0,l);if(c)try{p=String.fromCharCode.apply(null,new Uint8Array(p))}catch(e){var f=new Uint8Array(p);p="";for(d=0;d<f.length;d++)p+=String.fromCharCode(f[d])}a.push(p),i=o(i,l)}var m=a.length;a.forEach(function(e,i){r(t.decodePacket(e,n,!0),i,m)})}}).call(t,function(){return this}())},function(e,t){e.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}},function(e,t,n){(function(t){var r=n(6);e.exports=function(e){return function e(n){if(!n)return!1;if(t.Buffer&&t.Buffer.isBuffer(n)||t.ArrayBuffer&&n instanceof ArrayBuffer||t.Blob&&n instanceof Blob||t.File&&n instanceof File)return!0;if(r(n)){for(var i=0;i<n.length;i++)if(e(n[i]))return!0}else if(n&&"object"==typeof n)for(var o in n.toJSON&&(n=n.toJSON()),n)if(Object.prototype.hasOwnProperty.call(n,o)&&e(n[o]))return!0;return!1}(e)}}).call(t,function(){return this}())},function(e,t){e.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(e),o=new Uint8Array(n-t),a=t,s=0;a<n;a++,s++)o[s]=i[a];return o.buffer}},function(e,t){!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<e.length;r++)n[e.charCodeAt(r)]=r;t.encode=function(t){var n,r=new Uint8Array(t),i=r.length,o="";for(n=0;n<i;n+=3)o+=e[r[n]>>2],o+=e[(3&r[n])<<4|r[n+1]>>4],o+=e[(15&r[n+1])<<2|r[n+2]>>6],o+=e[63&r[n+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=function(e){var t,r,i,o,a,s=.75*e.length,u=e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var l=new ArrayBuffer(s),d=new Uint8Array(l);for(t=0;t<u;t+=4)r=n[e.charCodeAt(t)],i=n[e.charCodeAt(t+1)],o=n[e.charCodeAt(t+2)],a=n[e.charCodeAt(t+3)],d[c++]=r<<2|i>>4,d[c++]=(15&i)<<4|o>>2,d[c++]=(3&o)<<6|63&a;return l}}()},function(e,t){function n(){}e.exports=function(e,t,r){var i=!1;return r=r||n,o.count=e,0===e?t():o;function o(e,n){if(o.count<=0)throw new Error("after called too many times");--o.count,e?(i=!0,t(e),t=r):0!==o.count||i||t(null,n)}}},function(e,t,n){var r;(function(e,i){!function(o){var a="object"==typeof t&&t,s=("object"==typeof e&&e&&e.exports,"object"==typeof i&&i);s.global!==s&&s.window;var u,c,l,d=String.fromCharCode;function p(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function f(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function h(e,t){return d(e>>t&63|128)}function m(e){if(0==(4294967168&e))return d(e);var t="";return 0==(4294965248&e)?t=d(e>>6&31|192):0==(4294901760&e)?(f(e),t=d(e>>12&15|224),t+=h(e,6)):0==(4292870144&e)&&(t=d(e>>18&7|240),t+=h(e,12),t+=h(e,6)),t+=d(63&e|128)}function g(){if(l>=c)throw Error("Invalid byte index");var e=255&u[l];if(l++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function y(){var e,t;if(l>c)throw Error("Invalid byte index");if(l==c)return!1;if(e=255&u[l],l++,0==(128&e))return e;if(192==(224&e)){if((t=(31&e)<<6|g())>=128)return t;throw Error("Invalid continuation byte")}if(224==(240&e)){if((t=(15&e)<<12|g()<<6|g())>=2048)return f(t),t;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=(15&e)<<18|g()<<12|g()<<6|g())>=65536&&t<=1114111)return t;throw Error("Invalid UTF-8 detected")}var b={version:"2.0.0",encode:function(e){for(var t=p(e),n=t.length,r=-1,i="";++r<n;)i+=m(t[r]);return i},decode:function(e){u=p(e),c=u.length,l=0;for(var t,n=[];!1!==(t=y());)n.push(t);return function(e){for(var t,n=e.length,r=-1,i="";++r<n;)(t=e[r])>65535&&(i+=d((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=d(t);return i}(n)}};void 0===(r=function(){return b}.call(t,n,t,e))||(e.exports=r)}()}).call(t,n(28)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){(function(t){var n=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,r=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),i=r&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),o=n&&n.prototype.append&&n.prototype.getBlob;function a(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.buffer instanceof ArrayBuffer){var r=n.buffer;if(n.byteLength!==r.byteLength){var i=new Uint8Array(n.byteLength);i.set(new Uint8Array(r,n.byteOffset,n.byteLength)),r=i.buffer}e[t]=r}}}function s(e,t){t=t||{};var r=new n;a(e);for(var i=0;i<e.length;i++)r.append(e[i]);return t.type?r.getBlob(t.type):r.getBlob()}function u(e,t){return a(e),new Blob(e,t||{})}e.exports=r?i?t.Blob:u:o?s:void 0}).call(t,function(){return this}())},function(e,t){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){var n=this;function r(){n.off(e,r),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},function(e,t){e.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){"use strict";var n,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i=64,o={},a=0,s=0;function u(e){var t="";do{t=r[e%i]+t,e=Math.floor(e/i)}while(e>0);return t}function c(){var e=u(+new Date);return e!==n?(a=0,n=e):e+"."+u(a++)}for(;s<i;s++)o[r[s]]=s;c.encode=u,c.decode=function(e){var t=0;for(s=0;s<e.length;s++)t=t*i+o[e.charAt(s)];return t},e.exports=c},function(e,t){},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},function(e,t){(function(t){var n=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,i=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,a=/^\s+/,s=/\s+$/;e.exports=function(e){return"string"==typeof e&&e?(e=e.replace(a,"").replace(s,""),t.JSON&&JSON.parse?JSON.parse(e):n.test(e.replace(r,"@").replace(i,"]").replace(o,""))?new Function("return "+e)():void 0):null}}).call(t,function(){return this}())},function(e,t,n){"use strict";var r=n(4),i=n(38),o=n(39),a=n(40),s=n(41),u=n(3)("socket.io-client:socket"),c=n(42);e.exports=p;var l={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},d=i.prototype.emit;function p(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.io.autoConnect&&this.open()}i(p.prototype),p.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[a(e,"open",s(this,"onopen")),a(e,"packet",s(this,"onpacket")),a(e,"close",s(this,"onclose"))]}},p.prototype.open=p.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this.emit("connecting"),this)},p.prototype.send=function(){var e=o(arguments);return e.unshift("message"),this.emit.apply(this,e),this},p.prototype.emit=function(e){if(l.hasOwnProperty(e))return d.apply(this,arguments),this;var t=o(arguments),n=r.EVENT;c(t)&&(n=r.BINARY_EVENT);var i={type:n,data:t,options:{}};return i.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),i.id=this.ids++),this.connected?this.packet(i):this.sendBuffer.push(i),delete this.flags,this},p.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},p.prototype.onopen=function(){u("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:r.CONNECT})},p.prototype.onclose=function(e){u("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},p.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},p.prototype.onevent=function(e){var t=e.data||[];u("emitting event %j",t),null!=e.id&&(u("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?d.apply(this,t):this.receiveBuffer.push(t)},p.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var i=o(arguments);u("sending ack %j",i);var a=c(i)?r.BINARY_ACK:r.ACK;t.packet({type:a,id:e,data:i})}}},p.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(u("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):u("bad ack %s",e.id)},p.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},p.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)d.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},p.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},p.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},p.prototype.close=p.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},p.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}},function(e,t){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){e.exports=function(e,t){for(var n=[],r=(t=t||0)||0;r<e.length;r++)n[r-t]=e[r];return n}},function(e,t){"use strict";e.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},function(e,t){var n=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return t.apply(e,r.concat(n.call(arguments)))}}},function(e,t,n){(function(t){var r=n(6);e.exports=function(e){return function e(n){if(!n)return!1;if(t.Buffer&&t.Buffer.isBuffer&&t.Buffer.isBuffer(n)||t.ArrayBuffer&&n instanceof ArrayBuffer||t.Blob&&n instanceof Blob||t.File&&n instanceof File)return!0;if(r(n)){for(var i=0;i<n.length;i++)if(e(n[i]))return!0}else if(n&&"object"==typeof n)for(var o in n.toJSON&&"function"==typeof n.toJSON&&(n=n.toJSON()),n)if(Object.prototype.hasOwnProperty.call(n,o)&&e(n[o]))return!0;return!1}(e)}}).call(t,function(){return this}())},function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}}])}),define("app/core/SocketSandbox",["underscore"],function(e){"use strict";function t(e){if(this.socket=e,this.listeners={destroy:[]},e instanceof t){var n=this;this.socket.on("destroy",function(){n.destroy()})}}return t.prototype.destroy=function(){var t=this.listeners;if(null!=t){var n=t.destroy;if(e.isArray(n))for(var r=0,i=n.length;r<i;++r)n[r].call(this);delete this.listeners.destroy;for(var o=Object.keys(t),a=0,s=o.length;a<s;++a)for(var u=o[a],c=t[u],l=0,d=c.length;l<d;++l)this.socket.off(u,c[l]);this.listeners=null,this.socket=null}},t.prototype.sandbox=function(){return new t(this)},t.prototype.getId=function(){return!!this.socket&&this.socket.getId()},t.prototype.isConnected=function(){return!!this.socket&&this.socket.isConnected()},t.prototype.on=function(t,n){var r=this.listeners[t];return e.isUndefined(r)&&(r=this.listeners[t]=[]),r.push(n),"destroy"!==t&&this.socket.on(t,n),this},t.prototype.off=function(t,n){var r=this.listeners[t];if(e.isUndefined(r))return this;if(e.isUndefined(n))delete this.listeners[t];else{var i=e.indexOf(r,n);if(-1===i)return this;r.splice(i,1),0===r.length&&delete this.listeners[t]}return"destroy"!==t&&this.socket.off(t,n),this},t.prototype.emit=function(){var e=Array.prototype.slice.call(arguments),t=e.length-1;return e[t]=this.wrapCallback(e[t]),this.socket.emit.apply(this.socket,e),this},t.prototype.send=function(e,t){return this.socket.send(e,this.wrapCallback(t)),this},t.prototype.wrapCallback=function(t){if(!e.isFunction(t))return t;var n=this;return function(){null!==n.socket&&t.apply(this,arguments)}},t}),define("app/core/Socket",["app/core/SocketSandbox"],function(e){"use strict";function t(e){this.sio=e}return t.prototype.sandbox=function(){return new e(this)},t.prototype.getId=function(){return this.sio.id||null},t.prototype.isConnected=function(){return"open"===this.sio.io.readyState},t.prototype.isConnecting=function(){return"opening"===this.sio.io.readyState},t.prototype.connect=function(){this.sio.open()},t.prototype.reconnect=function(){this.connect()},t.prototype.on=function(e,t){return this.sio.on(e,t),this},t.prototype.off=function(e,t){return void 0===t?this.sio.removeAllListeners(e):this.sio.off(e,t),this},t.prototype.emit=function(){return this.sio.json.emit.apply(this.sio.json,arguments),this},t.prototype.send=function(e,t){return this.sio.json.send(e,t),this},t}),define("app/socket",["underscore","socket.io","app/broker","app/core/Socket"],function(e,t,n,r){"use strict";var i=new r(t({path:"/sio",transports:["websocket"],timeout:1e4,reconnectionDelay:500,autoConnect:!1,query:window.WMES_GET_COMMON_HEADERS?window.WMES_GET_COMMON_HEADERS():{}})),o=!1,a=!1;return i.on("connecting",function(){n.publish("socket.connecting",!1)}),i.on("connect",function(){o||(o=!0,n.publish("socket.connected",!1))}),i.on("connect_error",function(){o||n.publish("socket.connectFailed",!1)}),i.on("message",function(e){n.publish("socket.message",e)}),i.on("disconnect",function(){n.publish("socket.disconnected")}),i.on("reconnecting",function(){a=!0,n.publish("socket.connecting",!0)}),i.on("reconnect",function(){a=!1,n.publish("socket.connected",!0)}),i.on("reconnect_error",function(){a&&(a=!1,n.publish("socket.connectFailed",!0))}),i.on("error",function(){a&&n.publish("socket.connectFailed",!0)}),window.socket=i,i}),define("h5.rql/specialOperators",["require","exports","module"],function(e,t,n){"use strict";n.exports={eq:"=",ne:"=ne=",le:"=le=",ge:"=ge=",lt:"=lt=",gt:"=gt=",in:"=in=",nin:"=nin="}}),define("app/pubsub",["underscore","h5.pubsub/MessageBroker","app/broker","app/socket"],function(e,t,n,r){"use strict";var i=new t,o={},a=[],s=null,u=null;function c(t,r,i){if(r)n.publish("pubsub.subscribeFailed",{err:r,topics:t});else{i.length>0&&n.publish("pubsub.subscribeNotAllowed",{topics:i});var o=e.difference(t,i);o.length>0&&n.publish("pubsub.subscribed",{topics:o})}}function l(){r.isConnected()&&r.emit("pubsub.subscribe",a,c.bind(null,a)),a=[],s=null}function d(){var e=Object.keys(o);r.isConnected()&&r.emit("pubsub.unsubscribe",e),o={},u=null,n.publish("pubsub.unsubscribed",{topics:e})}return i.on("new topic",function(e){void 0!==o[e]&&delete o[e],r.isConnected()&&(a.push(e),null===s&&(s=setTimeout(l,0)))}),i.on("empty topic",function(e){r.isConnected()&&(o[e]=!0,null===u&&(u=setTimeout(d,0)))}),i.on("message",function(e,t,i){!0!==i.remote&&r.emit("pubsub.publish",e,t,i,function(r){r?n.publish("pubsub.publishFailed",{err:r,topic:e,message:t,meta:i}):n.publish("pubsub.published",{topic:e,message:t,meta:i})})}),r.on("connect",function(){var e=Object.keys(i.count());e.length&&r.emit("pubsub.subscribe",e,c.bind(null,e))}),r.on("pubsub.message",function(e,t,n){n.remote=!0,n.json&&"string"==typeof t&&(t=JSON.parse(t)),i.publish(e,t,n)}),window.pubsub=i,i}),define("app/core/util",["underscore"],function(e){"use strict";var t={inherits:function(t,n){e.assign(t,n);var r=function(){this.constructor=t};return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},decodeUriComponent:function(e){return decodeURIComponent(e.replace(/\+/g," "))},defineSandboxedProperty:function(t,n,r){e.isObject(t._sandboxedProperties)||(t._sandboxedProperties={});var i=t._sandboxedProperties,o=t.options[n];if(e.isObject(o))return i[n]=o,t[n]=o,void delete t.options[n];i[n]=null,Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:function(){return null===i[n]&&(i[n]=r.sandbox()),i[n]},set:function(e){this[n]=e}})},cleanupSandboxedProperties:function(t){var n=t._sandboxedProperties;e.isObject(n)&&(Object.keys(n).forEach(function(t){var r=n[t];r&&e.isFunction(r.destroy)&&r.destroy()}),t._sandboxedProperties=null)},subscribeTopics:function(t,n,r,i){if(e.isFunction(r)&&(r=r.call(t)),e.isObject(r)&&e.size(r)){var o=t[n];e.each(r,function(n,r){e.isString(n)&&(n=t[n]),i&&(n=n.bind(t)),o.subscribe(r,n)})}},escapeRegExp:function(e,t){return e.replace(t?/([-[\]{}()*+!<=:?.\/\\^$|#\s,])/g:/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},unescapeRegExp:function(e,t){return e.replace(t?/\\([-[\]{}()*+!<=:?.\/\\^$|#\s,])/g:/\\([.*+?^=!:${}()|\[\]\/\\])/g,"$1")}};return t}),define("app/core/util/html",[],function(){"use strict";function e(e){var n="";return e?(Object.keys(e).forEach(function(r){var i=e[r];if(!1!==i){if("className"===r)r="class";else if("style"===r&&i&&"object"==typeof i){var o="";Object.keys(i).forEach(function(e){o+=e+":"+i[e]+";"}),i=o}n+=" "+r,null!=i&&("class"===r&&"string"!=typeof i&&(i=t(i)),n+='="'+i+'"')}}),n):n}function t(){for(var e=[],t=0;t<arguments.length;++t){var n=arguments[t];n&&("string"==typeof n?e.push(n):Array.isArray(n)?e=e.concat(n):n&&Object.keys(n).forEach(function(t){n[t]&&e.push(t)}))}return e.join(" ")}return{tag:function(t,n,r){var i="<"+t+e(n)+">";return"string"==typeof r&&(i+=r+"</"+t+">"),i},attrs:e,className:t}}),define("app/core/util/forms/formGroup",["app/core/util/html"],function(e){"use strict";var t={select2:!0,static:!0};return function(n,r){"string"==typeof r&&(r={name:r}),!r.name&&r.id&&(r.name=r.id);var i=n.idPrefix+"-"+(r.id||r.name.replace(/[\[\].]/g,"-")),o=Object.assign({className:e.className("form-group",r.groupClassName,r.required&&"select2"===r.type?"has-required-select2":null),style:r.groupStyle||!1},r.groupAttrs),a="",s="",u="input",c={id:i,name:r.name,type:"text",required:!0===r.required,disabled:!0===r.disabled,readonly:!0===r.readOnly,placeholder:r.placeholder||!1,style:r.inputStyle||!1},l="",d=[r.noFormControl||t[r.type]?"":"form-control"],p=r.label;if(!1!==p){/:$/.test(p)&&(p+=r.name);var f=p||r.name;n.t.has(f)&&(f=n.t(f));var h=[r.noControlLabel?"":"control-label"];r.required&&h.push("is-required");var m=Object.assign({for:i,className:e.className(h,r.labelClassName),style:r.labelStyle||!1},r.labelAttrs);a=e.tag("label",m,f)}if(r.helpBlock){var g=!0===r.helpBlock?p||r.name:r.helpBlock;n.t.has(g+":help")?g=n.t(g+":help"):n.t.has(g)&&(g=n.t(g));var y=Object.assign({className:e.className("help-block",r.helpBlockClassName),style:r.helpBlockStyle||!1},r.helpBlockAttrs);s=e.tag("span",y,g)}switch(r.type){case"number":case"date":c.type=r.type,c.min=null!=r.min&&r.min,c.max=null!=r.max&&r.max,c.step=null!=r.step&&r.step,c.value=r.value;break;case"textarea":u="textarea",c.type=!1,c.rows=null!=r.rows&&r.rows,c.cols=null!=r.cols&&r.cols,l=null==r.value?"":String(r.value);break;case"static":u="p",c.type=!1,c.name=!1,c.required=!1,c.disabled=!1,c.readonly=!1,l=null==r.value?"":String(r.value),d.push("form-control-static");break;case"text":c.pattern=r.pattern||!1,c.maxlength=r.maxLength>0&&r.maxLength}return c.className=e.className(d,r.inputClassName),Object.assign(c,r.inputAttrs),e.tag("div",o,a+s+e.tag(u,c,l))}}),define("app/core/View",["underscore","jquery","backbone","backbone.layout","app/broker","app/socket","app/pubsub","app/i18n","./util","./util/forms/formGroup"],function(e,t,n,r,i,o,a,s,u,c){"use strict";function l(t){var n=this;n.idPrefix=e.uniqueId("v"),n.options=t||{},n.timers={},n.promises=[],e.forEach(n.sections,function(e,t){n.sections[t]="string"!=typeof e||"#"===e?"#"+n.idPrefix+"-"+t:e.replace("#-","#"+n.idPrefix+"-")}),u.defineSandboxedProperty(n,"broker",i),u.defineSandboxedProperty(n,"pubsub",a),u.defineSandboxedProperty(n,"socket",o),Object.defineProperty(n,"t",{enumerable:!0,configurable:!0,get:function(){return delete n.t,n.t=s.forDomain(n.getDefaultNlsDomain()),n.t}}),r.call(n,t),u.subscribeTopics(n,"broker",n.localTopics,!0),n.remoteTopicsAfterSync?(!0===n.remoteTopicsAfterSync&&(n.remoteTopicsAfterSync="model"),"string"==typeof n.remoteTopicsAfterSync&&n[n.remoteTopicsAfterSync]&&n.listenToOnce(n[n.remoteTopicsAfterSync],"sync",u.subscribeTopics.bind(u,n,"pubsub",n.remoteTopics,!0))):u.subscribeTopics(n,"pubsub",n.remoteTopics,!0)}return u.inherits(l,r),l.prototype.delegateEvents=function(t){if(t||(t=e.result(this,"events")),!t)return this;this.undelegateEvents(),Object.keys(t).forEach(function(n){var r=t[n];if(e.isFunction(r)||(r=this[r]),e.isFunction(r)){var i=n.match(/^(\S+)\s*(.*)$/),o=i[1]+".delegateEvents"+this.cid,a=i[2];""===a?this.$el.on(o,r.bind(this)):(e.isString(this.idPrefix)&&(a=a.replace(/#-/g,"#"+this.idPrefix+"-")),this.$el.on(o,a,r.bind(this)))}},this)},l.prototype.listenTo=function(e){if(e)return r.prototype.listenTo.apply(this,arguments)},l.prototype.listenToOnce=function(e){if(e)return r.prototype.listenToOnce.apply(this,arguments)},l.prototype.getViews=function(e){return"string"==typeof e&&/^#-/.test(e)&&(e=e.replace("#-","#"+this.idPrefix+"-")),r.prototype.getViews.call(this,e)},l.prototype.setView=function(e,t,i,o){return"string"==typeof e&&/^#-/.test(e)&&(e=e.replace("#-","#"+this.idPrefix+"-")),e instanceof n.View||t instanceof n.View?r.prototype.setView.call(this,e,t,i,o):null},l.prototype.cleanup=function(){this.destroy(),this.cleanupSelect2(),this.cleanupPopovers(),u.cleanupSandboxedProperties(this),e.isObject(this.timers)&&(e.forEach(this.timers,clearTimeout),this.timers={}),this.cancelRequests()},l.prototype.destroy=function(){},l.prototype.cleanupSelect2=function(){var e=this;e.$(".select2-container").each(function(){e.$("#"+this.id.replace("s2id_","")).select2("destroy")})},l.prototype.cleanupPopovers=function(){var e=this;e.$(".popover").each(function(){e.$('[aria-describedby="'+this.id+'"]').popover("destroy")})},l.prototype.beforeRender=function(){},l.prototype.serialize=function(){return e.assign(this.getCommonTemplateData(),this.getTemplateData())},l.prototype.getCommonTemplateData=function(){var e=this.getTemplateHelpers();return{idPrefix:this.idPrefix,helpers:e,t:e.t,id:e.id}},l.prototype.getTemplateData=function(){return{}},l.prototype.getTemplateHelpers=function(){var e=this.idPrefix;return{t:this.t,id:function(){return e+"-"+Array.prototype.slice.call(arguments).join("-")},props:this.props.bind(this),formGroup:c.bind(null,this)}},l.prototype.renderPartial=function(e,n){return t(this.renderPartialHtml(e,n))},l.prototype.renderPartialHtml=function(t,n){return t(e.assign(this.getCommonTemplateData(),n))},l.prototype.afterRender=function(){},l.prototype.isRendered=function(){return!0===this.hasRendered},l.prototype.isDetached=function(){return!t.contains(document.documentElement,this.el)},l.prototype.ajax=function(e){return this.promised(t.ajax(e))},l.prototype.promised=function(t){if(!t||!e.isFunction(t.abort))return t;this.promises.push(t);var n=this;return t.always(function(){Array.isArray(n.promises)&&n.promises.splice(n.promises.indexOf(t),1)}),t},l.prototype.cancelRequests=function(){this.promises.forEach(function(e){e.abort()}),this.promises=[]},l.prototype.cancelAnimations=function(e,t){this.$el.stop(!1!==e,!1!==t),this.$(":animated").stop(!1!==e,!1!==t)},l.prototype.$id=function(n){var r="#";e.isString(this.idPrefix)&&(r+=this.idPrefix+"-"),r+=n;var i=this.$el.find(r);return i.length?i:t(r)},l.prototype.getDefaultModel=function(){return this[this.modelProperty]||this.model||this.collection},l.prototype.getDefaultNlsDomain=function(){if(this.nlsDomain)return this.nlsDomain;var e=this.getDefaultModel();if(e){if(e.getNlsDomain)return e.getNlsDomain();if(e.nlsDomain)return e.nlsDomain}return"core"},l.prototype.props=function(t,n){var r=this;n||(t=(n=t).data);var i='<div class="props '+(n.first?"first":"")+'">',o=r.getDefaultNlsDomain();return[].concat(e.isArray(n)?n:n.props).forEach(function(a){"string"==typeof a&&(a={id:a});var u=!1!==a.escape&&"!"!==a.id.charAt(0),c=u?a.id:a.id.substring(1),l=a.className||"",d=a.valueClassName||"",p=a.nlsDomain||n.nlsDomain||o,f=a.label||s(p,"PROPERTY:"+c),h=e.isFunction(a.value)?a.value(t[c],a,r):e.isUndefined(a.value)?t[c]:a.value;e.isFunction(a.visible)&&!a.visible(h,a,r)||(null==a.visible||a.visible)&&(u&&(h=e.escape(h)),i+='<div class="prop '+l+'" data-prop="'+c+'"><div class="prop-name">'+f+'</div><div class="prop-value '+d+'">'+h+"</div></div>")}),i+"</div>"},l}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("moment-timezone",["moment"],t):"object"==typeof module&&module.exports?module.exports=t(require("moment")):t(e.moment)}(this,function(e){"use strict";if(void 0!==e.tz)return S("Moment Timezone "+e.tz.version+" was already loaded "+(e.tz.dataVersion?"with data from ":"without any data")+e.tz.dataVersion),e;var t,n={},r={},i={},o={},a=e.version.split("."),s=+a[0],u=+a[1];function c(e){return e>96?e-87:e>64?e-29:e-48}function l(e){var t=0,n=e.split("."),r=n[0],i=n[1]||"",o=1,a=0,s=1;for(45===e.charCodeAt(0)&&(t=1,s=-1);t<r.length;t++)a=60*a+c(r.charCodeAt(t));for(t=0;t<i.length;t++)o/=60,a+=c(i.charCodeAt(t))*o;return a*s}function d(e){for(var t=0;t<e.length;t++)e[t]=l(e[t])}function p(e,t){var n,r=[];for(n=0;n<t.length;n++)r[n]=e[t[n]];return r}function f(e){var t=e.split("|"),n=t[2].split(" "),r=t[3].split(""),i=t[4].split(" ");return d(n),d(r),d(i),function(e,t){for(var n=0;n<t;n++)e[n]=Math.round((e[n-1]||0)+6e4*e[n]);e[t-1]=1/0}(i,r.length),{name:t[0],abbrs:p(t[1].split(" "),r),offsets:p(n,r),untils:i,population:0|t[5]}}function h(e){e&&this._set(f(e))}function m(e){var t=e.toTimeString(),n=t.match(/\([a-z ]+\)/i);"GMT"===(n=n&&n[0]?(n=n[0].match(/[A-Z]/g))?n.join(""):void 0:(n=t.match(/[A-Z]{3,5}/g))?n[0]:void 0)&&(n=void 0),this.at=+e,this.abbr=n,this.offset=e.getTimezoneOffset()}function g(e){this.zone=e,this.offsetScore=0,this.abbrScore=0}function y(e,t){for(var n,r;r=6e4*((t.at-e.at)/12e4|0);)(n=new m(new Date(e.at+r))).offset===e.offset?e=n:t=n;return e}function b(e,t){return e.offsetScore!==t.offsetScore?e.offsetScore-t.offsetScore:e.abbrScore!==t.abbrScore?e.abbrScore-t.abbrScore:t.zone.population-e.zone.population}function v(e,t){var n,r;for(d(t),n=0;n<t.length;n++)r=t[n],o[r]=o[r]||{},o[r][e]=!0}function w(e){var t,n,r,a=e.length,s={},u=[];for(t=0;t<a;t++)for(n in r=o[e[t].offset]||{})r.hasOwnProperty(n)&&(s[n]=!0);for(t in s)s.hasOwnProperty(t)&&u.push(i[t]);return u}function _(){try{var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(e){var t=i[A(e)];if(t)return t;S("Moment Timezone found "+e+" from the Intl api, but did not have that data loaded.")}}catch(e){}var n,r,o,a=function(){var e,t,n,r=(new Date).getFullYear()-2,i=new m(new Date(r,0,1)),o=[i];for(n=1;n<48;n++)(t=new m(new Date(r,n,1))).offset!==i.offset&&(e=y(i,t),o.push(e),o.push(new m(new Date(e.at+6e4)))),i=t;for(n=0;n<4;n++)o.push(new m(new Date(r+n,0,1))),o.push(new m(new Date(r+n,6,1)));return o}(),s=a.length,u=w(a),c=[];for(r=0;r<u.length;r++){for(n=new g(T(u[r]),s),o=0;o<s;o++)n.scoreOffsetAt(a[o]);c.push(n)}return c.sort(b),c.length>0?c[0].zone.name:void 0}function A(e){return(e||"").toLowerCase().replace(/\//g,"_")}function k(e){var t,r,o,a;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)a=A(r=(o=e[t].split("|"))[0]),n[a]=e[t],i[a]=r,o[5]&&v(a,o[2].split(" "))}function T(e,t){e=A(e);var o,a=n[e];return a instanceof h?a:"string"==typeof a?(a=new h(a),n[e]=a,a):r[e]&&t!==T&&(o=T(r[e],T))?((a=n[e]=new h)._set(o),a.name=i[e],a):null}function E(e){var t,n,o,a;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)o=A((n=e[t].split("|"))[0]),a=A(n[1]),r[o]=a,i[o]=n[0],r[a]=o,i[a]=n[1]}function C(e){k(e.zones),E(e.links),O.dataVersion=e.version}function R(e){return!(!e._a||void 0!==e._tzm)}function S(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}function O(t){var n=Array.prototype.slice.call(arguments,0,-1),r=arguments[arguments.length-1],i=T(r),o=e.utc.apply(null,n);return i&&!e.isMoment(t)&&R(o)&&o.add(i.parse(o),"minutes"),o.tz(r),o}(s<2||2===s&&u<6)&&S("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+e.version+". See momentjs.com"),h.prototype={_set:function(e){this.name=e.name,this.abbrs=e.abbrs,this.untils=e.untils,this.offsets=e.offsets,this.population=e.population},_index:function(e){var t,n=+e,r=this.untils;for(t=0;t<r.length;t++)if(n<r[t])return t},parse:function(e){var t,n,r,i,o=+e,a=this.offsets,s=this.untils,u=s.length-1;for(i=0;i<u;i++)if(t=a[i],n=a[i+1],r=a[i?i-1:i],t<n&&O.moveAmbiguousForward?t=n:t>r&&O.moveInvalidForward&&(t=r),o<s[i]-6e4*t)return a[i];return a[u]},abbr:function(e){return this.abbrs[this._index(e)]},offset:function(e){return this.offsets[this._index(e)]}},g.prototype.scoreOffsetAt=function(e){this.offsetScore+=Math.abs(this.zone.offset(e.at)-e.offset),this.zone.abbr(e.at).replace(/[^A-Z]/g,"")!==e.abbr&&this.abbrScore++},O.version="0.5.9",O.dataVersion="",O._zones=n,O._links=r,O._names=i,O.add=k,O.link=E,O.load=C,O.zone=T,O.zoneExists=function e(t){return e.didShowError||(e.didShowError=!0,S("moment.tz.zoneExists('"+t+"') has been deprecated in favor of !moment.tz.zone('"+t+"')")),!!T(t)},O.guess=function(e){return t&&!e||(t=_()),t},O.names=function(){var e,t=[];for(e in i)i.hasOwnProperty(e)&&(n[e]||n[r[e]])&&i[e]&&t.push(i[e]);return t.sort()},O.Zone=h,O.unpack=f,O.unpackBase60=l,O.needsOffset=R,O.moveInvalidForward=!0,O.moveAmbiguousForward=!1;var P,N=e.fn;function D(e){return function(){return this._z?this._z.abbr(this):e.call(this)}}e.tz=O,e.defaultZone=null,e.updateOffset=function(t,n){var r,i=e.defaultZone;void 0===t._z&&(i&&R(t)&&!t._isUTC&&(t._d=e.utc(t._a)._d,t.utc().add(i.parse(t),"minutes")),t._z=i),t._z&&(r=t._z.offset(t),Math.abs(r)<16&&(r/=60),void 0!==t.utcOffset?t.utcOffset(-r,n):t.zone(r,n))},N.tz=function(t){return t?(this._z=T(t),this._z?e.updateOffset(this):S("Moment Timezone has no data for "+t+". See http://momentjs.com/timezone/docs/#/data-loading/."),this):this._z?this._z.name:void 0},N.zoneName=D(N.zoneName),N.zoneAbbr=D(N.zoneAbbr),N.utc=(P=N.utc,function(){return this._z=null,P.apply(this,arguments)}),e.tz.setDefault=function(t){return(s<2||2===s&&u<9)&&S("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+e.version+"."),e.defaultZone=t?T(t):null,e};var z=e.momentProperties;return"[object Array]"===Object.prototype.toString.call(z)?(z.push("_z"),z.push("_a")):z&&(z._z=null),C({version:"2016i",zones:["Africa/Abidjan|GMT|0|0||48e5","Africa/Khartoum|EAT|-30|0||51e5","Africa/Algiers|CET|-10|0||26e5","Africa/Lagos|WAT|-10|0||17e6","Africa/Maputo|CAT|-20|0||26e5","Africa/Cairo|EET EEST|-20 -30|010101010|1Cby0 Fb0 c10 8n0 8Nd0 gL0 e10 mn0|15e6","Africa/Casablanca|WET WEST|0 -10|01010101010101010101010101010101010101010|1Cco0 Db0 1zd0 Lz0 1Nf0 wM0 co0 go0 1o00 s00 dA0 vc0 11A0 A00 e00 y00 11A0 uM0 e00 Dc0 11A0 s00 e00 IM0 WM0 mo0 gM0 LA0 WM0 jA0 e00 Rc0 11A0 e00 e00 U00 11A0 8o0 e00 11A0|32e5","Europe/Paris|CET CEST|-10 -20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|11e6","Africa/Johannesburg|SAST|-20|0||84e5","Africa/Tripoli|EET CET CEST|-20 -10 -20|0120|1IlA0 TA0 1o00|11e5","Africa/Windhoek|WAST WAT|-20 -10|01010101010101010101010|1C1c0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0|32e4","America/Adak|HST HDT|a0 90|01010101010101010101010|1BR00 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|326","America/Anchorage|AKST AKDT|90 80|01010101010101010101010|1BQX0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|30e4","America/Santo_Domingo|AST|40|0||29e5","America/Araguaina|BRT BRST|30 20|010|1IdD0 Lz0|14e4","America/Argentina/Buenos_Aires|ART|30|0|","America/Asuncion|PYST PYT|30 40|01010101010101010101010|1C430 1a10 1fz0 1a10 1fz0 1cN0 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0|28e5","America/Panama|EST|50|0||15e5","America/Bahia|BRT BRST|30 20|010|1FJf0 Rb0|27e5","America/Bahia_Banderas|MST CDT CST|70 50 60|01212121212121212121212|1C1l0 1nW0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0|84e3","America/Fortaleza|BRT|30|0||34e5","America/Managua|CST|60|0||22e5","America/Manaus|AMT|40|0||19e5","America/Bogota|COT|50|0||90e5","America/Denver|MST MDT|70 60|01010101010101010101010|1BQV0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|26e5","America/Campo_Grande|AMST AMT|30 40|01010101010101010101010|1BIr0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10|77e4","America/Cancun|CST CDT EST|60 50 50|010101010102|1C1k0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 Dd0|63e4","America/Caracas|VET VET|4u 40|01|1QMT0|29e5","America/Cayenne|GFT|30|0||58e3","America/Chicago|CST CDT|60 50|01010101010101010101010|1BQU0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|92e5","America/Chihuahua|MST MDT|70 60|01010101010101010101010|1C1l0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0|81e4","America/Phoenix|MST|70|0||42e5","America/Los_Angeles|PST PDT|80 70|01010101010101010101010|1BQW0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|15e6","America/New_York|EST EDT|50 40|01010101010101010101010|1BQT0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|21e6","America/Rio_Branco|AMT ACT|40 50|01|1KLE0|31e4","America/Fort_Nelson|PST PDT MST|80 70 70|010101010102|1BQW0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0|39e2","America/Halifax|AST ADT|40 30|01010101010101010101010|1BQS0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|39e4","America/Godthab|WGT WGST|30 20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|17e3","America/Goose_Bay|AST ADT|40 30|01010101010101010101010|1BQQ1 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|76e2","America/Grand_Turk|EST EDT AST|50 40 40|0101010101012|1BQT0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|37e2","America/Guayaquil|ECT|50|0||27e5","America/Guyana|GYT|40|0||80e4","America/Havana|CST CDT|50 40|01010101010101010101010|1BQR0 1wo0 U00 1zc0 U00 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0|21e5","America/La_Paz|BOT|40|0||19e5","America/Lima|PET|50|0||11e6","America/Mexico_City|CST CDT|60 50|01010101010101010101010|1C1k0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0|20e6","America/Metlakatla|PST AKST AKDT|80 90 80|012121212121|1PAa0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|14e2","America/Miquelon|PMST PMDT|30 20|01010101010101010101010|1BQR0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|61e2","America/Montevideo|UYST UYT|20 30|010101010101|1BQQ0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 11z0|17e5","America/Noronha|FNT|20|0||30e2","America/North_Dakota/Beulah|MST MDT CST CDT|70 60 60 50|01232323232323232323232|1BQV0 1zb0 Oo0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Paramaribo|SRT|30|0||24e4","America/Port-au-Prince|EST EDT|50 40|010101010|1GI70 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|23e5","America/Santiago|CLST CLT|30 40|010101010101010101010|1C1f0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0|62e5","America/Sao_Paulo|BRST BRT|20 30|01010101010101010101010|1BIq0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10|20e6","America/Scoresbysund|EGT EGST|10 0|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|452","America/St_Johns|NST NDT|3u 2u|01010101010101010101010|1BQPv 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|11e4","Antarctica/Casey|+11 +08|-b0 -80|01010|1BN30 40P0 KL0 blz0|10","Antarctica/Davis|+05 +07|-50 -70|0101|1BPw0 3Wn0 KN0|70","Antarctica/DumontDUrville|+10|-a0|0||80","Antarctica/Macquarie|AEDT MIST|-b0 -b0|01|1C140|1","Asia/Tashkent|+05|-50|0||23e5","Pacific/Auckland|NZDT NZST|-d0 -c0|01010101010101010101010|1C120 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00|14e5","Antarctica/Rothera|-03|30|0||130","Antarctica/Syowa|+03|-30|0||20","Antarctica/Troll|+00 +02|0 -20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|40","Asia/Almaty|+06|-60|0||15e5","Asia/Baghdad|AST|-30|0||66e5","Asia/Amman|EET EEST|-20 -30|010101010101010101010|1BVy0 1qM0 11A0 1o00 11A0 4bX0 Dd0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0|25e5","Asia/Kamchatka|+12 +11|-c0 -b0|010|1Dp30 WM0|18e4","Asia/Baku|+04 +05|-40 -50|0101010101010|1BWo0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00|27e5","Asia/Bangkok|ICT|-70|0||15e6","Asia/Barnaul|+06 +07|-60 -70|010101|1BWk0 1qM0 WM0 8Hz0 3rd0","Asia/Beirut|EET EEST|-20 -30|01010101010101010101010|1BWm0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0|22e5","Asia/Brunei|BNT|-80|0||42e4","Asia/Kolkata|IST|-5u|0||15e6","Asia/Chita|+09 +10 +08|-90 -a0 -80|010120|1BWh0 1qM0 WM0 8Hz0 3re0|33e4","Asia/Choibalsan|CHOT CHOST|-80 -90|0101010101010|1O8G0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0|38e3","Asia/Shanghai|CST|-80|0||23e6","Asia/Colombo|+0530|-5u|0||22e5","Asia/Dhaka|BDT|-60|0||16e6","Asia/Damascus|EET EEST|-20 -30|01010101010101010101010|1C0m0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0|26e5","Asia/Dili|TLT|-90|0||19e4","Asia/Dubai|GST|-40|0||39e5","Asia/Famagusta|EET EEST +03|-20 -30 -30|010101010101012|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 15U0","Asia/Gaza|EET EEST|-20 -30|01010101010101010101010|1BVW1 SKX 1xd1 MKX 1AN0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nz0 1220 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0|18e5","Asia/Hebron|EET EEST|-20 -30|0101010101010101010101010|1BVy0 Tb0 1xd1 MKX bB0 cn0 1cN0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nz0 1220 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0|25e4","Asia/Hong_Kong|HKT|-80|0||73e5","Asia/Hovd|HOVT HOVST|-70 -80|0101010101010|1O8H0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0|81e3","Asia/Irkutsk|+08 +09|-80 -90|01010|1BWi0 1qM0 WM0 8Hz0|60e4","Europe/Istanbul|EET EEST +03|-20 -30 -30|010101010101012|1BWp0 1qM0 Xc0 1qo0 WM0 1qM0 11A0 1o00 1200 1nA0 11A0 1tA0 U00 15w0|13e6","Asia/Jakarta|WIB|-70|0||31e6","Asia/Jayapura|WIT|-90|0||26e4","Asia/Jerusalem|IST IDT|-20 -30|01010101010101010101010|1BVA0 17X0 1kp0 1dz0 1c10 1aL0 1eN0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0|81e4","Asia/Kabul|AFT|-4u|0||46e5","Asia/Karachi|PKT|-50|0||24e6","Asia/Urumqi|XJT|-60|0||32e5","Asia/Kathmandu|NPT|-5J|0||12e5","Asia/Khandyga|+10 +11 +09|-a0 -b0 -90|010102|1BWg0 1qM0 WM0 17V0 7zD0|66e2","Asia/Krasnoyarsk|+07 +08|-70 -80|01010|1BWj0 1qM0 WM0 8Hz0|10e5","Asia/Kuala_Lumpur|MYT|-80|0||71e5","Asia/Magadan|+11 +12 +10|-b0 -c0 -a0|010120|1BWf0 1qM0 WM0 8Hz0 3Cq0|95e3","Asia/Makassar|WITA|-80|0||15e5","Asia/Manila|PHT|-80|0||24e6","Europe/Athens|EET EEST|-20 -30|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|35e5","Asia/Novokuznetsk|+07 +06|-70 -60|010|1Dp80 WM0|55e4","Asia/Novosibirsk|+06 +07|-60 -70|010101|1BWk0 1qM0 WM0 8Hz0 4eN0|15e5","Asia/Omsk|+06 +07|-60 -70|01010|1BWk0 1qM0 WM0 8Hz0|12e5","Asia/Pyongyang|KST KST|-90 -8u|01|1P4D0|29e5","Asia/Rangoon|MMT|-6u|0||48e5","Asia/Sakhalin|+10 +11|-a0 -b0|010101|1BWg0 1qM0 WM0 8Hz0 3rd0|58e4","Asia/Seoul|KST|-90|0||23e6","Asia/Singapore|SGT|-80|0||56e5","Asia/Srednekolymsk|+11 +12|-b0 -c0|01010|1BWf0 1qM0 WM0 8Hz0|35e2","Asia/Tbilisi|+04|-40|0||11e5","Asia/Tehran|IRST IRDT|-3u -4u|01010101010101010101010|1BTUu 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0|14e6","Asia/Thimphu|BTT|-60|0||79e3","Asia/Tokyo|JST|-90|0||38e6","Asia/Tomsk|+06 +07|-60 -70|010101|1BWk0 1qM0 WM0 8Hz0 3Qp0|10e5","Asia/Ulaanbaatar|ULAT ULAST|-80 -90|0101010101010|1O8G0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0|12e5","Asia/Ust-Nera|+11 +12 +10|-b0 -c0 -a0|010102|1BWf0 1qM0 WM0 17V0 7zD0|65e2","Asia/Vladivostok|+10 +11|-a0 -b0|01010|1BWg0 1qM0 WM0 8Hz0|60e4","Asia/Yakutsk|+09 +10|-90 -a0|01010|1BWh0 1qM0 WM0 8Hz0|28e4","Asia/Yekaterinburg|+05 +06|-50 -60|01010|1BWl0 1qM0 WM0 8Hz0|14e5","Asia/Yerevan|+04 +05|-40 -50|01010|1BWm0 1qM0 WM0 1qM0|13e5","Atlantic/Azores|AZOT AZOST|10 0|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|25e4","Europe/Lisbon|WET WEST|0 -10|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|27e5","Atlantic/Cape_Verde|CVT|10|0||50e4","Atlantic/South_Georgia|GST|20|0||30","Atlantic/Stanley|FKST FKT|30 40|010|1C6R0 U10|21e2","Australia/Sydney|AEDT AEST|-b0 -a0|01010101010101010101010|1C140 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0|40e5","Australia/Adelaide|ACDT ACST|-au -9u|01010101010101010101010|1C14u 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0|11e5","Australia/Brisbane|AEST|-a0|0||20e5","Australia/Darwin|ACST|-9u|0||12e4","Australia/Eucla|ACWST|-8J|0||368","Australia/Lord_Howe|LHDT LHST|-b0 -au|01010101010101010101010|1C130 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu|347","Australia/Perth|AWST|-80|0||18e5","Pacific/Easter|EASST EAST|50 60|010101010101010101010|1C1f0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0|30e2","Europe/Dublin|GMT IST|0 -10|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|12e5","Etc/GMT+1|-01|10|0|","Etc/GMT+10|-10|a0|0|","Etc/GMT+11|-11|b0|0|","Etc/GMT+12|-12|c0|0|","Etc/GMT+2|-02|20|0|","Etc/GMT+4|-04|40|0|","Etc/GMT+5|-05|50|0|","Etc/GMT+6|-06|60|0|","Etc/GMT+7|-07|70|0|","Etc/GMT+8|-08|80|0|","Etc/GMT+9|-09|90|0|","Etc/GMT-1|+01|-10|0|","Etc/GMT-11|+11|-b0|0|","Etc/GMT-12|+12|-c0|0|","Etc/GMT-13|+13|-d0|0|","Etc/GMT-14|+14|-e0|0|","Etc/GMT-2|+02|-20|0|","Etc/GMT-7|+07|-70|0|","Etc/GMT-8|+08|-80|0|","Etc/GMT-9|+09|-90|0|","Etc/UCT|UCT|0|0|","Etc/UTC|UTC|0|0|","Europe/Astrakhan|+03 +04|-30 -40|010101|1BWn0 1qM0 WM0 8Hz0 3rd0","Europe/London|GMT BST|0 -10|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|10e6","Europe/Chisinau|EET EEST|-20 -30|01010101010101010101010|1BWo0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|67e4","Europe/Kaliningrad|EET EEST +03|-20 -30 -30|01020|1BWo0 1qM0 WM0 8Hz0|44e4","Europe/Volgograd|+03 +04|-30 -40|01010|1BWn0 1qM0 WM0 8Hz0|10e5","Europe/Minsk|EET EEST +03|-20 -30 -30|0102|1BWo0 1qM0 WM0|19e5","Europe/Moscow|MSK MSD MSK|-30 -40 -40|01020|1BWn0 1qM0 WM0 8Hz0|16e6","Europe/Samara|+04 +03|-40 -30|010|1Dpb0 WM0|12e5","Europe/Simferopol|EET EEST MSK MSK|-20 -30 -40 -30|01010101023|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11z0 1nW0|33e4","Pacific/Honolulu|HST|a0|0||37e4","Indian/Chagos|IOT|-60|0||30e2","Indian/Christmas|CXT|-70|0||21e2","Indian/Cocos|CCT|-6u|0||596","Indian/Mahe|SCT|-40|0||79e3","Indian/Maldives|MVT|-50|0||35e4","Indian/Mauritius|MUT|-40|0||15e4","Indian/Reunion|RET|-40|0||84e4","Pacific/Majuro|MHT|-c0|0||28e3","MET|MET MEST|-10 -20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Pacific/Chatham|CHADT CHAST|-dJ -cJ|01010101010101010101010|1C120 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00|600","Pacific/Apia|SST SDT WSDT WSST|b0 a0 -e0 -d0|01012323232323232323232|1Dbn0 1ff0 1a00 CI0 AQ0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00|37e3","Pacific/Bougainville|PGT BST|-a0 -b0|01|1NwE0|18e4","Pacific/Chuuk|CHUT|-a0|0||49e3","Pacific/Efate|VUT|-b0|0||66e3","Pacific/Enderbury|PHOT|-d0|0||1","Pacific/Fakaofo|TKT TKT|b0 -d0|01|1Gfn0|483","Pacific/Fiji|FJST FJT|-d0 -c0|01010101010101010101010|1BWe0 1o00 Rc0 1wo0 Ao0 1Nc0 Ao0 1Q00 xz0 1SN0 uM0 1SM0 uM0 1VA0 s00 1VA0 uM0 1SM0 uM0 1SM0 uM0 1SM0|88e4","Pacific/Funafuti|TVT|-c0|0||45e2","Pacific/Galapagos|GALT|60|0||25e3","Pacific/Gambier|GAMT|90|0||125","Pacific/Guadalcanal|SBT|-b0|0||11e4","Pacific/Guam|ChST|-a0|0||17e4","Pacific/Kiritimati|LINT|-e0|0||51e2","Pacific/Kosrae|KOST|-b0|0||66e2","Pacific/Marquesas|MART|9u|0||86e2","Pacific/Pago_Pago|SST|b0|0||37e2","Pacific/Nauru|NRT|-c0|0||10e3","Pacific/Niue|NUT|b0|0||12e2","Pacific/Norfolk|NFT NFT|-bu -b0|01|1PoCu|25e4","Pacific/Noumea|NCT|-b0|0||98e3","Pacific/Palau|PWT|-90|0||21e3","Pacific/Pitcairn|PST|80|0||56","Pacific/Pohnpei|PONT|-b0|0||34e3","Pacific/Port_Moresby|PGT|-a0|0||25e4","Pacific/Rarotonga|CKT|a0|0||13e3","Pacific/Tahiti|TAHT|a0|0||18e4","Pacific/Tarawa|GILT|-c0|0||29e3","Pacific/Tongatapu|+13 +14|-d0 -e0|0101010101|1S4d0 s00 1VA0 uM0 1SM0 uM0 1SM0 uM0 1SM0|75e3","Pacific/Wake|WAKT|-c0|0||16e3","Pacific/Wallis|WFT|-c0|0||94"],links:["Africa/Abidjan|Africa/Accra","Africa/Abidjan|Africa/Bamako","Africa/Abidjan|Africa/Banjul","Africa/Abidjan|Africa/Bissau","Africa/Abidjan|Africa/Conakry","Africa/Abidjan|Africa/Dakar","Africa/Abidjan|Africa/Freetown","Africa/Abidjan|Africa/Lome","Africa/Abidjan|Africa/Monrovia","Africa/Abidjan|Africa/Nouakchott","Africa/Abidjan|Africa/Ouagadougou","Africa/Abidjan|Africa/Sao_Tome","Africa/Abidjan|Africa/Timbuktu","Africa/Abidjan|America/Danmarkshavn","Africa/Abidjan|Atlantic/Reykjavik","Africa/Abidjan|Atlantic/St_Helena","Africa/Abidjan|Etc/GMT","Africa/Abidjan|Etc/GMT+0","Africa/Abidjan|Etc/GMT-0","Africa/Abidjan|Etc/GMT0","Africa/Abidjan|Etc/Greenwich","Africa/Abidjan|GMT","Africa/Abidjan|GMT+0","Africa/Abidjan|GMT-0","Africa/Abidjan|GMT0","Africa/Abidjan|Greenwich","Africa/Abidjan|Iceland","Africa/Algiers|Africa/Tunis","Africa/Cairo|Egypt","Africa/Casablanca|Africa/El_Aaiun","Africa/Johannesburg|Africa/Maseru","Africa/Johannesburg|Africa/Mbabane","Africa/Khartoum|Africa/Addis_Ababa","Africa/Khartoum|Africa/Asmara","Africa/Khartoum|Africa/Asmera","Africa/Khartoum|Africa/Dar_es_Salaam","Africa/Khartoum|Africa/Djibouti","Africa/Khartoum|Africa/Juba","Africa/Khartoum|Africa/Kampala","Africa/Khartoum|Africa/Mogadishu","Africa/Khartoum|Africa/Nairobi","Africa/Khartoum|Indian/Antananarivo","Africa/Khartoum|Indian/Comoro","Africa/Khartoum|Indian/Mayotte","Africa/Lagos|Africa/Bangui","Africa/Lagos|Africa/Brazzaville","Africa/Lagos|Africa/Douala","Africa/Lagos|Africa/Kinshasa","Africa/Lagos|Africa/Libreville","Africa/Lagos|Africa/Luanda","Africa/Lagos|Africa/Malabo","Africa/Lagos|Africa/Ndjamena","Africa/Lagos|Africa/Niamey","Africa/Lagos|Africa/Porto-Novo","Africa/Maputo|Africa/Blantyre","Africa/Maputo|Africa/Bujumbura","Africa/Maputo|Africa/Gaborone","Africa/Maputo|Africa/Harare","Africa/Maputo|Africa/Kigali","Africa/Maputo|Africa/Lubumbashi","Africa/Maputo|Africa/Lusaka","Africa/Tripoli|Libya","America/Adak|America/Atka","America/Adak|US/Aleutian","America/Anchorage|America/Juneau","America/Anchorage|America/Nome","America/Anchorage|America/Sitka","America/Anchorage|America/Yakutat","America/Anchorage|US/Alaska","America/Argentina/Buenos_Aires|America/Argentina/Catamarca","America/Argentina/Buenos_Aires|America/Argentina/ComodRivadavia","America/Argentina/Buenos_Aires|America/Argentina/Cordoba","America/Argentina/Buenos_Aires|America/Argentina/Jujuy","America/Argentina/Buenos_Aires|America/Argentina/La_Rioja","America/Argentina/Buenos_Aires|America/Argentina/Mendoza","America/Argentina/Buenos_Aires|America/Argentina/Rio_Gallegos","America/Argentina/Buenos_Aires|America/Argentina/Salta","America/Argentina/Buenos_Aires|America/Argentina/San_Juan","America/Argentina/Buenos_Aires|America/Argentina/San_Luis","America/Argentina/Buenos_Aires|America/Argentina/Tucuman","America/Argentina/Buenos_Aires|America/Argentina/Ushuaia","America/Argentina/Buenos_Aires|America/Buenos_Aires","America/Argentina/Buenos_Aires|America/Catamarca","America/Argentina/Buenos_Aires|America/Cordoba","America/Argentina/Buenos_Aires|America/Jujuy","America/Argentina/Buenos_Aires|America/Mendoza","America/Argentina/Buenos_Aires|America/Rosario","America/Campo_Grande|America/Cuiaba","America/Chicago|America/Indiana/Knox","America/Chicago|America/Indiana/Tell_City","America/Chicago|America/Knox_IN","America/Chicago|America/Matamoros","America/Chicago|America/Menominee","America/Chicago|America/North_Dakota/Center","America/Chicago|America/North_Dakota/New_Salem","America/Chicago|America/Rainy_River","America/Chicago|America/Rankin_Inlet","America/Chicago|America/Resolute","America/Chicago|America/Winnipeg","America/Chicago|CST6CDT","America/Chicago|Canada/Central","America/Chicago|US/Central","America/Chicago|US/Indiana-Starke","America/Chihuahua|America/Mazatlan","America/Chihuahua|Mexico/BajaSur","America/Denver|America/Boise","America/Denver|America/Cambridge_Bay","America/Denver|America/Edmonton","America/Denver|America/Inuvik","America/Denver|America/Ojinaga","America/Denver|America/Shiprock","America/Denver|America/Yellowknife","America/Denver|Canada/Mountain","America/Denver|MST7MDT","America/Denver|Navajo","America/Denver|US/Mountain","America/Fortaleza|America/Belem","America/Fortaleza|America/Maceio","America/Fortaleza|America/Recife","America/Fortaleza|America/Santarem","America/Halifax|America/Glace_Bay","America/Halifax|America/Moncton","America/Halifax|America/Thule","America/Halifax|Atlantic/Bermuda","America/Halifax|Canada/Atlantic","America/Havana|Cuba","America/Los_Angeles|America/Dawson","America/Los_Angeles|America/Ensenada","America/Los_Angeles|America/Santa_Isabel","America/Los_Angeles|America/Tijuana","America/Los_Angeles|America/Vancouver","America/Los_Angeles|America/Whitehorse","America/Los_Angeles|Canada/Pacific","America/Los_Angeles|Canada/Yukon","America/Los_Angeles|Mexico/BajaNorte","America/Los_Angeles|PST8PDT","America/Los_Angeles|US/Pacific","America/Los_Angeles|US/Pacific-New","America/Managua|America/Belize","America/Managua|America/Costa_Rica","America/Managua|America/El_Salvador","America/Managua|America/Guatemala","America/Managua|America/Regina","America/Managua|America/Swift_Current","America/Managua|America/Tegucigalpa","America/Managua|Canada/East-Saskatchewan","America/Managua|Canada/Saskatchewan","America/Manaus|America/Boa_Vista","America/Manaus|America/Porto_Velho","America/Manaus|Brazil/West","America/Mexico_City|America/Merida","America/Mexico_City|America/Monterrey","America/Mexico_City|Mexico/General","America/New_York|America/Detroit","America/New_York|America/Fort_Wayne","America/New_York|America/Indiana/Indianapolis","America/New_York|America/Indiana/Marengo","America/New_York|America/Indiana/Petersburg","America/New_York|America/Indiana/Vevay","America/New_York|America/Indiana/Vincennes","America/New_York|America/Indiana/Winamac","America/New_York|America/Indianapolis","America/New_York|America/Iqaluit","America/New_York|America/Kentucky/Louisville","America/New_York|America/Kentucky/Monticello","America/New_York|America/Louisville","America/New_York|America/Montreal","America/New_York|America/Nassau","America/New_York|America/Nipigon","America/New_York|America/Pangnirtung","America/New_York|America/Thunder_Bay","America/New_York|America/Toronto","America/New_York|Canada/Eastern","America/New_York|EST5EDT","America/New_York|US/East-Indiana","America/New_York|US/Eastern","America/New_York|US/Michigan","America/Noronha|Brazil/DeNoronha","America/Panama|America/Atikokan","America/Panama|America/Cayman","America/Panama|America/Coral_Harbour","America/Panama|America/Jamaica","America/Panama|EST","America/Panama|Jamaica","America/Phoenix|America/Creston","America/Phoenix|America/Dawson_Creek","America/Phoenix|America/Hermosillo","America/Phoenix|MST","America/Phoenix|US/Arizona","America/Rio_Branco|America/Eirunepe","America/Rio_Branco|America/Porto_Acre","America/Rio_Branco|Brazil/Acre","America/Santiago|Antarctica/Palmer","America/Santiago|Chile/Continental","America/Santo_Domingo|America/Anguilla","America/Santo_Domingo|America/Antigua","America/Santo_Domingo|America/Aruba","America/Santo_Domingo|America/Barbados","America/Santo_Domingo|America/Blanc-Sablon","America/Santo_Domingo|America/Curacao","America/Santo_Domingo|America/Dominica","America/Santo_Domingo|America/Grenada","America/Santo_Domingo|America/Guadeloupe","America/Santo_Domingo|America/Kralendijk","America/Santo_Domingo|America/Lower_Princes","America/Santo_Domingo|America/Marigot","America/Santo_Domingo|America/Martinique","America/Santo_Domingo|America/Montserrat","America/Santo_Domingo|America/Port_of_Spain","America/Santo_Domingo|America/Puerto_Rico","America/Santo_Domingo|America/St_Barthelemy","America/Santo_Domingo|America/St_Kitts","America/Santo_Domingo|America/St_Lucia","America/Santo_Domingo|America/St_Thomas","America/Santo_Domingo|America/St_Vincent","America/Santo_Domingo|America/Tortola","America/Santo_Domingo|America/Virgin","America/Sao_Paulo|Brazil/East","America/St_Johns|Canada/Newfoundland","Antarctica/DumontDUrville|Etc/GMT-10","Antarctica/Rothera|Etc/GMT+3","Antarctica/Syowa|Etc/GMT-3","Asia/Almaty|Antarctica/Vostok","Asia/Almaty|Asia/Bishkek","Asia/Almaty|Asia/Qyzylorda","Asia/Almaty|Etc/GMT-6","Asia/Baghdad|Asia/Aden","Asia/Baghdad|Asia/Bahrain","Asia/Baghdad|Asia/Kuwait","Asia/Baghdad|Asia/Qatar","Asia/Baghdad|Asia/Riyadh","Asia/Bangkok|Asia/Ho_Chi_Minh","Asia/Bangkok|Asia/Phnom_Penh","Asia/Bangkok|Asia/Saigon","Asia/Bangkok|Asia/Vientiane","Asia/Dhaka|Asia/Dacca","Asia/Dubai|Asia/Muscat","Asia/Hong_Kong|Hongkong","Asia/Jakarta|Asia/Pontianak","Asia/Jerusalem|Asia/Tel_Aviv","Asia/Jerusalem|Israel","Asia/Kamchatka|Asia/Anadyr","Asia/Kathmandu|Asia/Katmandu","Asia/Kolkata|Asia/Calcutta","Asia/Kuala_Lumpur|Asia/Kuching","Asia/Makassar|Asia/Ujung_Pandang","Asia/Rangoon|Asia/Yangon","Asia/Seoul|ROK","Asia/Shanghai|Asia/Chongqing","Asia/Shanghai|Asia/Chungking","Asia/Shanghai|Asia/Harbin","Asia/Shanghai|Asia/Macao","Asia/Shanghai|Asia/Macau","Asia/Shanghai|Asia/Taipei","Asia/Shanghai|PRC","Asia/Shanghai|ROC","Asia/Singapore|Singapore","Asia/Tashkent|Antarctica/Mawson","Asia/Tashkent|Asia/Aqtau","Asia/Tashkent|Asia/Aqtobe","Asia/Tashkent|Asia/Ashgabat","Asia/Tashkent|Asia/Ashkhabad","Asia/Tashkent|Asia/Dushanbe","Asia/Tashkent|Asia/Oral","Asia/Tashkent|Asia/Samarkand","Asia/Tashkent|Etc/GMT-5","Asia/Tashkent|Indian/Kerguelen","Asia/Tbilisi|Etc/GMT-4","Asia/Tehran|Iran","Asia/Thimphu|Asia/Thimbu","Asia/Tokyo|Japan","Asia/Ulaanbaatar|Asia/Ulan_Bator","Asia/Urumqi|Asia/Kashgar","Australia/Adelaide|Australia/Broken_Hill","Australia/Adelaide|Australia/South","Australia/Adelaide|Australia/Yancowinna","Australia/Brisbane|Australia/Lindeman","Australia/Brisbane|Australia/Queensland","Australia/Darwin|Australia/North","Australia/Lord_Howe|Australia/LHI","Australia/Perth|Australia/West","Australia/Sydney|Australia/ACT","Australia/Sydney|Australia/Canberra","Australia/Sydney|Australia/Currie","Australia/Sydney|Australia/Hobart","Australia/Sydney|Australia/Melbourne","Australia/Sydney|Australia/NSW","Australia/Sydney|Australia/Tasmania","Australia/Sydney|Australia/Victoria","Etc/UCT|UCT","Etc/UTC|Etc/Universal","Etc/UTC|Etc/Zulu","Etc/UTC|UTC","Etc/UTC|Universal","Etc/UTC|Zulu","Europe/Astrakhan|Europe/Ulyanovsk","Europe/Athens|Asia/Nicosia","Europe/Athens|EET","Europe/Athens|Europe/Bucharest","Europe/Athens|Europe/Helsinki","Europe/Athens|Europe/Kiev","Europe/Athens|Europe/Mariehamn","Europe/Athens|Europe/Nicosia","Europe/Athens|Europe/Riga","Europe/Athens|Europe/Sofia","Europe/Athens|Europe/Tallinn","Europe/Athens|Europe/Uzhgorod","Europe/Athens|Europe/Vilnius","Europe/Athens|Europe/Zaporozhye","Europe/Chisinau|Europe/Tiraspol","Europe/Dublin|Eire","Europe/Istanbul|Asia/Istanbul","Europe/Istanbul|Turkey","Europe/Lisbon|Atlantic/Canary","Europe/Lisbon|Atlantic/Faeroe","Europe/Lisbon|Atlantic/Faroe","Europe/Lisbon|Atlantic/Madeira","Europe/Lisbon|Portugal","Europe/Lisbon|WET","Europe/London|Europe/Belfast","Europe/London|Europe/Guernsey","Europe/London|Europe/Isle_of_Man","Europe/London|Europe/Jersey","Europe/London|GB","Europe/London|GB-Eire","Europe/Moscow|W-SU","Europe/Paris|Africa/Ceuta","Europe/Paris|Arctic/Longyearbyen","Europe/Paris|Atlantic/Jan_Mayen","Europe/Paris|CET","Europe/Paris|Europe/Amsterdam","Europe/Paris|Europe/Andorra","Europe/Paris|Europe/Belgrade","Europe/Paris|Europe/Berlin","Europe/Paris|Europe/Bratislava","Europe/Paris|Europe/Brussels","Europe/Paris|Europe/Budapest","Europe/Paris|Europe/Busingen","Europe/Paris|Europe/Copenhagen","Europe/Paris|Europe/Gibraltar","Europe/Paris|Europe/Ljubljana","Europe/Paris|Europe/Luxembourg","Europe/Paris|Europe/Madrid","Europe/Paris|Europe/Malta","Europe/Paris|Europe/Monaco","Europe/Paris|Europe/Oslo","Europe/Paris|Europe/Podgorica","Europe/Paris|Europe/Prague","Europe/Paris|Europe/Rome","Europe/Paris|Europe/San_Marino","Europe/Paris|Europe/Sarajevo","Europe/Paris|Europe/Skopje","Europe/Paris|Europe/Stockholm","Europe/Paris|Europe/Tirane","Europe/Paris|Europe/Vaduz","Europe/Paris|Europe/Vatican","Europe/Paris|Europe/Vienna","Europe/Paris|Europe/Warsaw","Europe/Paris|Europe/Zagreb","Europe/Paris|Europe/Zurich","Europe/Paris|Poland","Europe/Volgograd|Europe/Kirov","Pacific/Auckland|Antarctica/McMurdo","Pacific/Auckland|Antarctica/South_Pole","Pacific/Auckland|NZ","Pacific/Chatham|NZ-CHAT","Pacific/Chuuk|Pacific/Truk","Pacific/Chuuk|Pacific/Yap","Pacific/Easter|Chile/EasterIsland","Pacific/Guam|Pacific/Saipan","Pacific/Honolulu|HST","Pacific/Honolulu|Pacific/Johnston","Pacific/Honolulu|US/Hawaii","Pacific/Majuro|Kwajalein","Pacific/Majuro|Pacific/Kwajalein","Pacific/Pago_Pago|Pacific/Midway","Pacific/Pago_Pago|Pacific/Samoa","Pacific/Pago_Pago|US/Samoa","Pacific/Pohnpei|Pacific/Ponape"]}),e}),define("app/time",["moment-timezone","app/socket","app/data/localStorage"],function(e,t,n){"use strict";var r={synced:!1,offset:parseFloat(n.getItem("TIME:OFFSET"))||0,zone:n.getItem("TIME:ZONE")||"Europe/Warsaw",appData:window.TIME||0};function i(e,t){for(e=String(e);e.length<t;)e="0"+e;return e}return delete window.TIME,r.sync=function(){var e=Date.now();t.emit("time",function(t,i){r.offset=(t-e+(t-Date.now()))/2,r.zone=i,r.synced=!0,n.setItem("TIME:OFFSET",r.offset.toString()),n.setItem("TIME:ZONE",r.zone)})},r.getServerMoment=function(){return e(Date.now()+r.offset).tz(r.zone)},r.getMoment=function(t,n){return e(t,n).tz(r.zone)},r.getMomentUtc=function(t,n){return e.utc(t,n)},r.format=function(e,t){var n=r.getMoment(e);return n.isValid()?n.format(t):null},r.utc={getMoment:function(t,n){return e.utc(t,n)},format:function(e,t){var n=r.getMomentUtc(e);return n.isValid()?n.format(t):null}},r.toTagData=function(e,t){if(!e)return{iso:"?",long:"?",human:"?",daysAgo:0};var n=r.getMoment(e),i=n.valueOf(),o=Date.now();return{iso:n.toISOString(),long:n.format("LLLL"),human:!0===t?n.from(i>o?i:o):n.fromNow(),daysAgo:-n.diff(o,"days")}},r.toSeconds=function(e){if("number"==typeof e)return e;if("string"!=typeof e)return 0;var t={g:3600,h:3600,m:60,s:1,ms:.001},n=e.trim(),r=parseInt(n,10),i=n.match(/([0-9]+):([0-9]+)(?::([0-9]+))?/);if(i)return r=3600*parseInt(i[1],10),r+=60*parseInt(i[2],10),i[3]&&(r+=parseInt(i[3],10)),r;if(!1===/^[0-9]+\.?[0-9]*$/.test(n)){var o,a=/([0-9\.]+)\s*(h|ms|m|s)[a-z]*/gi;for(r=0;null!==(o=a.exec(n));)r+=parseFloat(o[1])*t[o[2].toLowerCase()]}return r},r.toString=function(e,t,n){if("number"!=typeof e||e<=0||isNaN(e))return t?"00:00:00":"0s";e=Math.round(1e3*e)/1e3;var r="",o=Math.floor(e/3600);o>0?(r+=t?i(o,2)+":":" "+o+"h",e%=3600):t&&(r+="00:");var a=Math.floor(e/60);a>0?(r+=t?i(a,2)+":":" "+a+"min",e%=60):t&&(r+="00:");var s=e;return s>=1?(r+=t?i(Math[n?"floor":"round"](s),2):" "+Math[n?"floor":"round"](s)+"s",n&&s%1!=0&&(r+=t?"."+i(Math.round(s%1*1e3),3):" "+Math.round(s%1*1e3)+"ms")):s>0&&""===r?r+=" "+1e3*s+"ms":t&&(r+="00"),t?r:r.substr(1)},t.on("connect",function(){r.sync()}),t.isConnected()&&r.sync(),window.time=r,r}),define("h5.rql/Term",["require","exports","module"],function(e,t,n){"use strict";n.exports=function(e,t){this.name=e||null,this.args=t||[]}}),define("h5.rql/specialTerms",["require","exports","module"],function(e,t,n){"use strict";function r(e,t,n){e.fields={};for(var r="select"===t,i=0,o=n.length;i<o;++i){var a=n[i];Array.isArray(a)&&(a=a.join(".")),e.fields[a]=r}}n.exports={select:r,exclude:r,sort:function(e,t,n){e.sort={};for(var r=0,i=n.length;r<i;++r){var o=n[r];Array.isArray(o)&&(o=o.join(".")),"-"===o[0]?e.sort[o.substr(1)]=-1:"+"===o[0]?e.sort[o.substr(1)]=1:e.sort[o]=1}},limit:function(e,t,n){var r=parseInt(n[0],10),i=0;n.length>1&&(i=parseInt(n[1],10));e.limit=isNaN(r)?-1:r,e.skip=isNaN(i)||i<0?0:i}}}),define("h5.rql/autoConvertedMap",["require","exports","module"],function(e,t,n){"use strict";n.exports={true:!0,false:!1,null:null,undefined:void 0,Infinity:1/0,"-Infinity":-1/0}}),define("h5.rql/serializers/stringSerializer",["require","exports","module","../specialTerms","../specialOperators","../autoConvertedMap"],function(e,t,n){var r=e("../specialTerms"),i=e("../specialOperators"),o=e("../autoConvertedMap");function a(e,t,n,r,s){if(Array.isArray(n))!function(e,t,n){e.push("(");for(var r=0,i=n.length;r<i;++r)a(e,t,n[r],i),r<i-1&&e.push(",");e.push(")")}(e,t,n);else if(null!==n&&"object"==typeof n&&"string"==typeof n.name&&Array.isArray(n.args)){if(i.hasOwnProperty(n.name)&&n.args.length>1)return a(e,t,n.args[0],0),e.push(i[n.name]),void a(e,t,n.args[1],0);var u=",";"and"===n.name?u="&":"or"===n.name&&!0!==s&&(u="|"),function(e,t,n,r,i){var o=r.args.length;","===n?e.push(r.name,"("):1!==i&&e.push("(");for(var s=0;s<o;++s)a(e,t,r.args[s],o),s<o-1&&e.push(n);","!==n&&1===i||e.push(")")}(e,t,u,n,r)}else!function(e,t,n){switch(typeof n){case"undefined":e.push("undefined");break;case"boolean":e.push(n?"true":"false");break;case"number":e.push(n.toString(10));break;case"object":!function(e,t,n){if(null===n)e.push("null");else if(n instanceof Date)e.push("epoch:",n.getTime().toString());else if(n instanceof RegExp){var r=n.toString(),i=r.lastIndexOf("/");""===r.substr(i+1)&&(r=r.substr(1,i-1)),e.push("re:",t.encode(r))}else"function"==typeof n.convertToRqlValue?e.push(n.convertToRqlValue(t.encode)):e.push(t.encode(n.toString()))}(e,t,n);break;default:0===n.length?e.push("string:"):isNaN(+n)?o.hasOwnProperty(n)?e.push("string:",n):e.push(t.encode(n)):e.push("string:",n.toString())}}(e,t,n)}function s(e){return e=encodeURIComponent(e),/[\(\)]/.test(e)&&(e=e.replace(/\(/g,"%28").replace(/\)/g,"%29")),e}function u(e){return s(s(e))}t.fromQuery=function(e,t){var n=[],i={encode:t&&t.doubleEncode?u:s};return function(e,t){var n=Object.keys(t);0!==n.length&&e.push(t[n[0]]?"&select(":"&exclude(",n.join(","),")")}(n,e.fields),function(e,t){var n=Object.keys(t),r=n.length;if(0!==r){e.push("&sort(");for(var i=0;i<r;++i){var o=n[i];-1===t[o]&&e.push("-"),e.push(o),i<r-1&&e.push(",")}e.push(")")}}(n,e.sort),function(e,t,n){-1!==t&&(e.push("&limit(",t),0!==n&&e.push(",",n),e.push(")"))}(n,e.limit,e.skip),function(e,t,n){var i=n.args.length;if(0!==i)if("and"===n.name)for(var o=0;o<i;++o){var s=n.args[o];r.hasOwnProperty(s.name)||(e.push("&"),a(e,t,s,i,!0))}else e.push("&"),a(e,t,n,i,!0)}(n,i,e.selector),n.join("").substr(1)}}),define("h5.rql/Query",["require","exports","module","./Term","./serializers/stringSerializer"],function(e,t,n){"use strict";var r=e("./Term"),i=e("./serializers/stringSerializer");function o(){this.selector=new r("and"),this.fields={},this.skip=0,this.limit=-1,this.sort={}}n.exports=o,o.fromObject=function(e){if(e instanceof o)return e;var t=new o;return e?(e.selector&&(t.selector=e.selector),e.fields&&(t.fields=e.fields),e.skip&&(t.skip=e.skip),e.limit&&(t.limit=e.limit),e.sort&&(t.sort=e.sort),t):t},o.prototype.toString=function(e){return i.fromQuery(this,e)},o.prototype.isEmpty=function(){return 0===this.skip&&-1===this.limit&&0===Object.keys(this.fields).length&&0===Object.keys(this.sort).length&&0===this.selector.args.length}}),define("h5.rql/valueConverters",["require","exports","module","./autoConvertedMap"],function(e,t,n){"use strict";var r=e("./autoConvertedMap");function i(e,t){if(r.hasOwnProperty(e))return r[e];var n=+e;return isNaN(n)||n.toString()!==e?(e=decodeURIComponent(e),t.options.jsonQueryCompatible&&"'"===e[0]&&"'"===e[e.length-1]?JSON.parse('"'+e.substring(1,e.length-1)+'"'):e):n}function o(e){e=decodeURIComponent(e);var t,n=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(e);if(t=null!==n?new Date(Date.UTC(+n[1],+n[2]-1,+n[3],+n[4],+n[5],+n[6])):new Date(e),isNaN(t.getTime()))throw new Error("Invalid date: "+e);return t}n.exports={default:i,auto:i,number:function(e){var t=+e;if(isNaN(t))throw new Error("Invalid number: "+e);return t},epoch:function(e){var t=new Date(+e);if(isNaN(t.getTime()))throw new Error("Invalid date: "+e);return t},isodate:function(e){return e=decodeURIComponent(e),e="0000".substr(0,4-e.length)+e,o(e+="0000-01-01T00:00:00Z".substring(e.length))},date:o,boolean:function(e){return!!e},string:function(e){return decodeURIComponent(e)},re:function(e){var t=e=decodeURIComponent(e),n="";if("/"===e[0]){var r=e.lastIndexOf("/");t=e.substr(1,r-1),n=e.substr(r+1)}return new RegExp(t,n)},glob:function(e){return e=".*"===(e=".*"===(e=decodeURIComponent(e).replace(/([\\\|\(\)\[\]\{\}\^\$\*\+\?\.<>])/g,"\\$1").replace(/\\\*/g,".*").replace(/\\\?/g,".?")).substr(0,2)?e.substr(2):"^"+e).substr(e.length-2)?e.substr(0,e.length-2):e+"$",new RegExp(e,"i")}}}),define("h5.rql/Parser",["require","exports","module","./Term","./valueConverters"],function(e,t,n){"use strict";var r=e("./Term"),i=e("./valueConverters");n.exports=c;var o=/^[\+\*\$\-:\w%\._!'~]$/,a=/[\+\*\$\-:\w%\._!'~]*\/[\+\*\$\-:\w%\._!'~\/]*/g,s=new RegExp("(\\([\\+\\*\\$\\-:\\w%\\._,]+\\)|[\\+\\*\\$\\-:\\w%\\._]*|)([<>!]?=(?:[\\w]*=)?|>|<)(\\([\\+\\*\\$\\-:\\w%\\._,!'~]*\\)|[\\+\\*\\$\\-:\\w%\\._!'~]*|)","g"),u={"=":"eq","==":"eq",">":"gt",">=":"ge","<":"lt","<=":"le","!=":"ne"};function c(e){this.options=e instanceof c.Options?e:new c.Options(e)}c.Options=function(e){"object"==typeof e&&null!==e||(e={}),this.jsonQueryCompatible=!0===e.jsonQueryCompatible,this.fiqlCompatible=!e.hasOwnProperty("fiqlCompatible")||!0===e.fiqlCompatible,this.allowSlashedArrays=!0===e.allowSlashedArrays,this.allowEmptyValues=!0===e.allowEmptyValues,this.defaultValueConverter="function"==typeof e.defaultValueConverter?e.defaultValueConverter:i.default,this.specialTerms=Array.isArray(e.specialTerms)?e.specialTerms:[],this.emptyValue=e.hasOwnProperty("emptyValue")?e.emptyValue:""},c.prototype.parse=function(e,t){var n="object"==typeof t&&null!==t,i=this.options.specialTerms,a=null,s=new r,u=[],c=!0;this.options.jsonQueryCompatible&&(e=this.makeJsonQueryCompatible(e)),this.options.allowSlashedArrays&&(e=this.convertSlashedArrays(e)),this.options.fiqlCompatible&&(e=this.convertFiql(e));for(var l=0,d=e.length;l<d;++l){var p=e[l];switch(p){case"(":u.push(s),s=new r(a),n&&null!==a&&-1!==i.indexOf(a)&&(delete t[a],t[a]=s.args),a=null,c=!0;break;case",":if(!1===c){if(!this.options.allowEmptyValues)throw new Error("Empty value at position "+l+" is not allowed.");a=this.options.emptyValue}null!==a&&(s.args.push(this.convertStringToValue(a)),a=null),c=!1;break;case")":null!==a&&(s.args.push(this.convertStringToValue(a)),a=null);var f=null===s.name?s.args:s;(s=u.pop()).args.push(f),c=!0;break;case"&":case"|":var h="&"===p?"and":"or";if(null!==s.name&&s.name!==h)throw new Error("Can not mix conjunctions within a group at position "+l+", use parenthesises around each set of the same conjunctions (& and |)");s.name="&"===p?"and":"or",null!==a&&(s.args.push(this.convertStringToValue(a)),a=null);break;default:if(!o.test(p))throw new Error("Invalid character at position "+l+": '"+p+"' ("+p.charCodeAt(0)+")");null===a?a=p:a+=p,c=!0}}return null!==a&&s.args.push(this.convertStringToValue(a)),null===s.name&&(s.name="and"),"and"===s.name&&1===s.args.length&&s.args[0]instanceof r&&"and"===s.args[0].name&&(s=s.args[0]),s},c.prototype.makeJsonQueryCompatible=function(e){return this.options.jsonQueryCompatible&&(e=e.replace(/%3C=/g,"=le=").replace(/%3E=/g,"=ge=").replace(/%3C/g,"=lt=").replace(/%3E/g,"=gt=")),e},c.prototype.convertSlashedArrays=function(e){return-1!==e.indexOf("/")?e.replace(a,function(e){return"("+e.replace(/\//g,",")+")"}):e},c.prototype.convertFiql=function(e){return e.replace(s,function(e,t,n,r){return(n=n.length<3?u[n]:n.substring(1,n.length-1))+"("+t+","+r+")"})},c.prototype.convertStringToValue=function(e){var t,n=e.indexOf(":");if(-1!==n){var r=e.substr(0,n);if(void 0===(t=i[r]))throw new Error("Unknown value converter: "+r);e=e.substr(n+1)}else t=this.options.defaultValueConverter;return t(e,this)}}),define("h5.rql/index",["require","exports","module","./Term","./Query","./Parser","./specialTerms","./valueConverters"],function(e,t,n){"use strict";var r=e("./Term"),i=e("./Query"),o=e("./Parser"),a=e("./specialTerms"),s=e("./valueConverters");t.Term=r,t.Query=i,t.Parser=o,t.specialTerms=a,t.valueConverters=s,t.parser=null,t.parse=function(e){null===t.parser&&(t.parser=new o({jsonQueryCompatible:!0,fiqlCompatible:!0,allowEmptyValues:!1,allowSlashedArrays:!0,specialTerms:Object.keys(a)}));var n=new i,r={};for(var s in n.selector=t.parser.parse(e,r),r)r.hasOwnProperty(s)&&a.hasOwnProperty(s)&&a[s](n,s,r[s]);return n}}),define("app/core/PaginationData",["underscore","backbone"],function(e,t){"use strict";return t.Model.extend({defaults:{totalCount:-1,urlTemplate:"?page=${page}&limit=${limit}",page:1,skip:0,limit:10},initialize:function(){this.on("change",this.recalcAttrs,this);var e=this.attributes;e.page<1&&(e.page=1),e.skip<0&&(e.skip=0),e.limit<1&&(e.limit=1),0!==e.skip?this.recalcPage():1!==e.page?this.recalcSkip():this.adjustSkipToLimit()},sync:function(){throw new Error("Not supported!")},recalcAttrs:function(){var t=this.changedAttributes();e.has(t,"total")||e.has(t,"skip")||e.has(t,"limit")?this.recalcPage():e.has(t,"page")&&this.recalcSkip()},recalcPage:function(){this.adjustSkipToLimit();var e=this.attributes;e.page=e.skip/e.limit+1},recalcSkip:function(){var e=this.attributes;e.skip=(e.page-1)*e.limit},adjustSkipToLimit:function(){var e=this.attributes;e.skip>=e.total&&(e.skip=e.total<2?1:e.total-1);var t=e.skip%e.limit;0!==t&&(e.skip-=t)}})}),define("app/core/Model",["backbone"],function(e){"use strict";return e.Model.extend({idAttribute:"_id",urlRoot:"/",clientUrlRoot:null,topicPrefix:null,privilegePrefix:null,nlsDomain:null,labelAttribute:null,genClientUrl:function(e){if(null===this.clientUrlRoot)throw new Error("`clientUrlRoot` was not specified");var t=this.clientUrlRoot;return"base"===e?t:(t+="/",this.isNew()?t+=encodeURIComponent(this.cid):t+=encodeURIComponent(this.id),"string"==typeof e&&(t+=";"+e),t)},getTopicPrefix:function(){return this.topicPrefix},getPrivilegePrefix:function(){return this.privilegePrefix},getNlsDomain:function(){return this.nlsDomain||"core"},getLabelAttribute:function(){return this.labelAttribute||this.idAttribute},getLabel:function(){return String(this.get(this.getLabelAttribute()))},sync:function(t,n,r){var i="read"===t;i&&this.cancelCurrentReadRequest(n);var o=e.Model.prototype.sync.call(this,t,n,r);return i&&this.setUpCurrentReadRequest(n,o),o},cancelCurrentReadRequest:function(e){e.currentReadRequest&&(e.currentReadRequest.abort(),e.currentReadRequest=null)},setUpCurrentReadRequest:function(e,t){t.always(function(){e.currentReadRequest===t&&(e.currentReadRequest=null)}),e.currentReadRequest=t}})}),define("app/core/Collection",["underscore","backbone","h5.rql/index","./util","./PaginationData","./Model"],function(e,t,n,r,i,o){"use strict";function a(n,r){e.isObject(r)||(r={}),this.rqlQuery=this.createRqlQuery(r.rqlQuery||this.rqlQuery),-1337===this.rqlQuery.limit&&(this.rqlQuery.limit=this.getDefaultPageLimit()),this.paginationData=!1!==r.paginate&&!1!==this.paginate?new i:null,this.url||(this.url=this.model.prototype.urlRoot),t.Collection.call(this,n,r),this.paginationData&&this.listenTo(this.paginationData,"change:page",this.onPageChanged)}return r.inherits(a,t.Collection),a.prototype.model=o,a.prototype.parse=function(e){return e||(e={totalCount:0,collection:[]}),this.paginationData&&this.paginationData.set(this.getPaginationData(e)),Array.isArray(e.collection)?e.collection:[]},a.prototype.sync=function(e,n,r){return"read"!==e||r.data||(r.data=this.rqlQuery.toString()),t.Collection.prototype.sync.call(this,e,n,r)},a.prototype.genClientUrl=function(e){if(null===this.model.prototype.clientUrlRoot)throw new Error("Model's `clientUrlRoot` was not specified");var t=this.model.prototype.clientUrlRoot;return"string"==typeof e&&(t+=";"+e),t},a.prototype.getTopicPrefix=function(){return this.topicPrefix||this.model.prototype.topicPrefix},a.prototype.getPrivilegePrefix=function(){return this.privilegePrefix||this.model.prototype.privilegePrefix},a.prototype.getNlsDomain=function(){return this.nlsDomain||this.model.prototype.nlsDomain},a.prototype.getLabel=function(e){var t=this.get(e);return t?t.getLabel():null},a.prototype.createRqlQuery=function(t){return e.isString(t)?t=n.parse(t):e.isFunction(t)?t=t.call(this,n):e.isObject(t)&&(t=n.Query.fromObject(t)),t&&!t.isEmpty()?t:e.isString(this.rqlQuery)?n.parse(this.rqlQuery):e.isFunction(this.rqlQuery)?this.rqlQuery.call(this,n):e.isObject(this.rqlQuery)?n.Query.fromObject(this.rqlQuery):new n.Query},a.prototype.getPaginationData=function(e){return{totalCount:e.totalCount||0,urlTemplate:this.genPaginationUrlTemplate(),skip:this.rqlQuery.skip,limit:this.rqlQuery.limit}},a.prototype.genPaginationUrlTemplate=function(){var e=this.rqlQuery,t=e.skip,n=e.limit;e.skip="${skip}",e.limit="${limit}";var r=this.genClientUrl()+"?"+e.toString();return e.skip=t,e.limit=n,r},a.prototype.onPageChanged=function(e,t){this.rqlQuery.skip=(t-1)*this.rqlQuery.limit,this.fetch({reset:!0})},a.prototype.getDefaultPageLimit=function(){var e=32,t=34;e=this.theadHeight>8?this.theadHeight:32+20*((this.theadHeight||1)-1),"number"==typeof this.rowHeight?t=this.rowHeight>8?this.rowHeight:31+20*(this.rowHeight-1):!1===this.rowHeight&&(t=31);var n=window.innerHeight-99-106-54-e;return Math.max(10,Math.floor(n/t))},a.prototype.findRqlTerm=function(t,n){return e.find(this.rqlQuery.selector.args,function(e){return e.args[0]===t&&(Array.isArray(n)?-1!==n.indexOf(e.name):!n||e.name===n)})},a}),define("app/divisions/Division",["../i18n","../time","../core/Model"],function(e,t,n){"use strict";return n.extend({urlRoot:"/divisions",clientUrlRoot:"#divisions",topicPrefix:"divisions",privilegePrefix:"DICTIONARIES",nlsDomain:"divisions",labelAttribute:"_id",defaults:{type:"prod"},serialize:function(){var n=this.toJSON();return n.type=e("divisions","TYPE:"+n.type),n.deactivatedAt=n.deactivatedAt?t.format(n.deactivatedAt,"LL"):"",n},isActive:function(e){var t=this.get("deactivatedAt");return!t||(e||Date.now())<Date.parse(t)}})}),define("app/divisions/DivisionCollection",["../core/Collection","./Division"],function(e,t){"use strict";return e.extend({model:t,rqlQuery:"sort(_id)",comparator:"_id"})}),define("app/data/createStorage",["app/time","app/broker","app/pubsub","./localStorage"],function(e,t,n,r){"use strict";return n.subscribe("dictionaries.updated",function(e){var n=e.topic,r=e.message,i=e.meta;i.remote=!0,i.json&&"string"==typeof r&&(r=JSON.parse(r)),t.publish(n,r,i)}),function(n,i,o){var a={time:e.appData,data:window[n]||null},s=JSON.parse(r.getItem(n)||'{"time":0,"data":null}'),u=s&&s.time>a.time||!a.data?s:a,c=new o(u.data);function l(){c.updatedAt=Date.now(),r.setItem(n,JSON.stringify({time:c.updatedAt,data:c.models})),t.publish(i+".synced")}return c.updatedAt=u.time,u!==a&&s.data||l(),c.on("add",l),c.on("remove",l),c.on("destroy",l),c.on("change",l),c.on("sync",l),c.on("reset",l),t.subscribe(i+".added",function(e){c.add(e.model)}),t.subscribe(i+".edited",function(e){var t=c.get(e.model._id);t?t.set(e.model):c.add(e.model)}),t.subscribe(i+".deleted",function(e){c.remove(e.model._id)}),c}}),define("app/data/divisions",["app/divisions/DivisionCollection","./createStorage"],function(e,t){"use strict";return t("DIVISIONS","divisions",e)}),define("app/core/util/colorLabel",[],function(){"use strict";var e={};function t(t){if(void 0!==e[t])return e[t];var n=0,r=0,i=0,o=t.match(/^#([a-fA-F0-9]{3,6})$/);if(o){var a=o[1];3===a.length?(n=a.substr(0,1),r=a.substr(1,1),i=a.substr(2,1),n+=n,r+=r,i+=i):(n=a.substr(0,2),r=a.substr(2,2),i=a.substr(4,2)),n=parseInt(n,16),r=parseInt(r,16),i=parseInt(i,16)}else(o=t.match(/([0-9]+).*?([0-9]+).*?([0-9]+)/))&&(n=parseInt(o[1],10),r=parseInt(o[2],10),i=parseInt(o[3],10));return e[t]=1-(.299*n+.587*r+.114*i)/255<.3,e[t]}function n(e){"string"==typeof e&&(e={color:e});var n=["label","color"];e.className&&(n=n.concat(e.className));var r=e.title||"",i=e.color.toUpperCase(),o=e.label||i;return t(i)&&n.push("is-contrast"),'<span class="'+n.join(" ")+'" title="'+r+'" style="background: '+i+'">'+o+"</span>"}return n.requiresContrast=t,n}),define("app/aors/Aor",["../core/Model","app/core/util/colorLabel"],function(e,t){"use strict";return e.extend({urlRoot:"/aors",clientUrlRoot:"#aors",topicPrefix:"aors",privilegePrefix:"DICTIONARIES",nlsDomain:"aors",labelAttribute:"name",defaults:{name:null,description:null,color:"#f08f44",refColor:"#ffa85c",refValue:0},serialize:function(){var e=this.toJSON();return e.color=t(e.color),e.refColor=t(e.refColor),e.refValue=e.refValue&&e.refValue.toLocaleString?e.refValue.toLocaleString():"0",e}})}),define("app/aors/AorCollection",["../core/Collection","./Aor"],function(e,t){"use strict";return e.extend({model:t,rqlQuery:"sort(name)",comparator:"name"})}),define("app/data/aors",["app/aors/AorCollection","./createStorage"],function(e,t){"use strict";return t("AORS","aors",e)}),define("app/downtimeReasons/DowntimeReason",["../i18n","../core/Model","../data/aors","app/core/util/colorLabel"],function(e,t,n,r){"use strict";var i=["assembly","press","paintShop","wh-pickup","wh-dist"];return t.extend({urlRoot:"/downtimeReasons",clientUrlRoot:"#downtimeReasons",topicPrefix:"downtimeReasons",privilegePrefix:"DICTIONARIES",nlsDomain:"downtimeReasons",labelAttribute:"label",defaults:function(){return{label:null,type:"other",subdivisionTypes:i,opticsPosition:-1,pressPosition:-1,auto:!1,scheduled:!1,color:"#ff0000",refColor:"#aa0000",refValue:0,aors:[],defaultAor:!1}},serialize:function(){var t=this.nlsDomain,i=this.toJSON();return i.scheduled=e("core","BOOL:"+i.scheduled),i.auto=e("core","BOOL:"+i.auto),i.type=e(t,"type:"+i.type),i.color=r(i.color),i.refColor=r(i.refColor),i.refValue=i.refValue&&i.refValue.toLocaleString?i.refValue.toLocaleString():"0",i.subdivisionTypes&&i.subdivisionTypes.length?i.subdivisionTypes=i.subdivisionTypes.map(function(n){return e(t,"subdivisionType:"+n)}).join("; "):i.subdivisionTypes=e(t,"subdivisionType:none"),i.aors=i.aors.map(function(e){var t=n.get(e);return t?t.getLabel():e}),i.defaultAor=e("core","BOOL:"+i.defaultAor),i},serializeRow:function(){var t=this.serialize();return t.aors=t.aors.length?t.aors.join("; "):e(this.nlsDomain,"aors:all"),t}},{SUBDIVISION_TYPES:i})}),define("app/downtimeReasons/DowntimeReasonCollection",["underscore","../core/Collection","./DowntimeReason"],function(e,t,n){"use strict";return t.extend({model:n,rqlQuery:"sort(_id)",comparator:"_id",findBySubdivisionType:function(t){return Array.isArray(t)?this.filter(function(n){return e.some(n.get("subdivisionTypes"),function(n){return e.includes(t,n)})}):this.filter(function(e){return-1!==e.get("subdivisionTypes").indexOf(t)})},findFirstBreakIdBySubdivisionType:function(e){var t=this.find(function(t){return"break"===t.get("type")&&-1!==t.get("subdivisionTypes").indexOf(e)});return t?t.id:null}})}),define("app/data/downtimeReasons",["app/downtimeReasons/DowntimeReasonCollection","./createStorage"],function(e,t){"use strict";return t("DOWNTIME_REASONS","downtimeReasons",e)}),define("app/subdivisions/Subdivision",["underscore","app/i18n","app/time","app/data/aors","app/data/downtimeReasons","app/data/divisions","app/core/Model"],function(e,t,n,r,i,o,a){"use strict";return a.extend({urlRoot:"/subdivisions",clientUrlRoot:"#subdivisions",topicPrefix:"subdivisions",privilegePrefix:"DICTIONARIES",nlsDomain:"subdivisions",labelAttribute:"name",defaults:function(){return{division:null,type:"assembly",name:null,prodTaskTags:null,aor:null,autoDowntimes:[],deactivatedAt:null}},serialize:function(a){var s=this.toJSON(),u=o.get(s.division);u&&(s.division=a&&a.renderOrgUnitPath?a.renderOrgUnitPath(u,!0,!1):u.getLabel()),s.deactivatedAt=s.deactivatedAt?n.format(s.deactivatedAt,"LL"):"",s.type=t("subdivisions","TYPE:"+s.type),s.prodTaskTags=s.prodTaskTags&&s.prodTaskTags.length?s.prodTaskTags.join("; "):null;var c=r.get(s.aor);return s.aor=c?c.getLabel():"",s.autoDowntimes=e.map(s.autoDowntimes,function(e){var t=i.get(e.reason);return t?{reason:t.getLabel(),when:e.when,time:(e.time||[]).map(function(e){return{d:e.d,h:(e.h<10?"0":"")+e.h,m:(e.m<10?"0":"")+e.m}})}:null}).filter(function(e){return!!e}),s},serializeRow:function(e){var t=this.serialize(e);return t.autoDowntimes=0===t.autoDowntimes.length?"":t.autoDowntimes.map(function(e){return e.reason}).join("; "),t},isActive:function(e){var t=this.get("deactivatedAt");return!t||(e||Date.now())<Date.parse(t)},getSubdivision:function(){return this}})}),define("app/subdivisions/SubdivisionCollection",["../core/Collection","./Subdivision"],function(e,t){"use strict";return e.extend({model:t,rqlQuery:"sort(division,name)",comparator:"division"})}),define("app/data/subdivisions",["app/subdivisions/SubdivisionCollection","./createStorage"],function(e,t){"use strict";return t("SUBDIVISIONS","subdivisions",e)}),define("app/core/views/DialogView",["underscore","../View"],function(e,t){"use strict";return t.extend({events:{"click .dialog-answer":function(t){var n=this.$(t.target).closest(".dialog-answer").attr("data-answer");e.isString(n)&&n.length>0&&(this.disableAnswers(),this.trigger("answered",n),!1!==this.options.autoHide&&e.isFunction(this.closeDialog)&&this.closeDialog())}},serialize:function(){return e.assign(t.prototype.serialize.apply(this,arguments),this.model)},onDialogShown:function(e){this.closeDialog=e.closeDialog.bind(e)},disableAnswers:function(){this.$(".btn[data-answer]").prop("disabled",!0)},enableAnswers:function(){this.$(".btn[data-answer]").prop("disabled",!1)},closeDialog:function(){}})}),define("app/core/util/getShiftStartInfo",["app/time"],function(e){"use strict";return function(t,n){var r=n&&n.shiftLength||8,i=n&&"number"==typeof n.startHour?n.startHour:6,o=(n&&n.utc?e.utc:e).getMoment(t),a=o.valueOf(),s=1,u=24/r;for(o.hours()<i&&o.subtract(24,"hours"),o.hours(i).startOf("hours");s<=u;++s){var c=o.valueOf(),l=o.hours()+r;l>=24&&(l-=24),o.add(r,"hours");var d=o.hours();d!==l&&o.add(l-d,"hours");var p=o.valueOf();if(a>=c&&a<p)return{moment:e.getMoment(c),no:s,startTime:c,endTime:p,startHour:i,length:r,count:u}}throw new Error("Could not resolve the shift start info!")}}),define("app/core/templates/forms/dateTimeRange",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})formGroup&&(__append('\n<div class="form-group '),__append(hidden?"hidden":""),__append('" data-filter="'),__append(property),__append('">\n')),__append('\n<div id="'),__append(idPrefix),__append("-dateTimeRange-"),__append(property),__append('" class="dateTimeRange" data-property="'),__append(property),__append('" data-utc="'),__append(utc),__append('" data-set-time="'),__append(setTime),__append('" data-type="'),__append(type),__append('" data-start-hour="'),__append(startHour),__append('" data-shift-length="'),__append(shiftLength),__append('">\n  <div class="dateTimeRange-labels">\n    '),labels.forEach(function(e){__append('\n    <div class="dateTimeRange-label '),__append(e.dropdown||e.ranges?"dropdown":""),__append(" "),__append(e.input?"dateTimeRange-is-input":""),__append('">\n      <label\n        class="control-label '),__append(e.dropdown||e.ranges?"dropdown-toggle":""),__append('"\n        '),__append(e.dropdown||e.ranges?'data-toggle="dropdown"':""),__append("\n        "),e.input&&(__append('for="'),__append(idPrefix),__append("-"),__append(e.input.name),__append("-"),__append(e.input.value),__append('"')),__append("\n      >\n        "),e.input&&(__append('\n        <input id="'),__append(idPrefix),__append("-"),__append(e.input.name),__append("-"),__append(e.input.value),__append('" class="dateTimeRange-label-input" type="'),__append(e.input.type),__append('" name="'),__append(e.input.name),__append('" value="'),__append(e.input.value),__append('">\n        ')),__append("\n        "),__append(e.text),__append("\n        "),(e.dropdown||e.ranges)&&__append('<span class="caret"></span>'),__append("\n      </label>\n      "),e.ranges?(__append('\n      <table class="dropdown-menu dateTimeRange-ranges">\n        '),Object.keys(e.ranges).forEach(function(n){__append("\n        <tr>\n          <th>"),__append(t("core","dateTimeRange:"+n)),__append("</th>\n          "),e.ranges[n].forEach(function(e){__append("\n          <td>\n            "),e&&(__append('\n            <a href="javascript:void(0)" data-date-time-group="'),__append(n),__append('" data-date-time-range="'),__append(e),__append('">\n              '),t.has("core","dateTimeRange:"+n+":"+e)?(__append("\n              "),__append(t("core","dateTimeRange:"+n+":"+e)),__append("\n              ")):t.has("core","dateTimeRange:"+e)?(__append("\n              "),__append(t("core","dateTimeRange:"+e)),__append("\n              ")):(__append("\n              "),__append(e),__append("\n              ")),__append("\n            </a>\n            ")),__append("\n          </td>\n          ")}),__append("\n        </tr>\n        ")}),__append('\n        <tr>\n          <td colspan="999" class="dateTimeRange-help">'),__append(t("core","dateTimeRange:help")),__append("</td>\n        </tr>\n      </table>\n      ")):e.dropdown&&(__append('\n      <ul class="dropdown-menu">\n        '),e.dropdown.forEach(function(e){__append("\n        <li><a "),__append(e.attrs),__append(">"),__append(e.text),__append("</a></li>\n        ")}),__append("\n      </ul>\n      ")),__append("\n    </div>\n    ")}),__append('\n  </div>\n  <div class="dateTimeRange-fields">\n    <div class="dateTimeRange-field dateTimeRange-from">\n      '),/date|month/.test(type)&&(__append('\n        <input id="'),__append(idPrefix),__append('-from-date" name="from-date" class="form-control" type="'),__append(/month/.test(type)?"month":"date"),__append('" placeholder="'),__append(t("core","dateTimeRange:placeholder:date")),__append('" min="'),__append(minDate),__append('" max="'),__append(maxDate),__append('" '),__append(required.date[0]?"required":""),__append(">\n      ")),__append("\n      "),/time/.test(type)&&(__append('\n      <input id="'),__append(idPrefix),__append('-from-time" name="from-time" class="form-control" type="time" placeholder="'),__append(t("core","dateTimeRange:placeholder:time")),__append('" '),__append(required.time[0]?"required":""),__append(">\n      ")),__append('\n    </div>\n    <div class="dateTimeRange-separator">'),__append(separator),__append('</div>\n    <div class="dateTimeRange-field dateTimeRange-to">\n      '),/date|month/.test(type)&&(__append('\n      <input id="'),__append(idPrefix),__append('-to-date" name="to-date" class="form-control" type="'),__append(/month/.test(type)?"month":"date"),__append('" placeholder="'),__append(t("core","dateTimeRange:placeholder:date")),__append('" min="'),__append(minDate),__append('" max="'),__append(maxDate),__append('" '),__append(required.date[1]?"required":""),__append(">\n      ")),__append("\n      "),/time/.test(type)&&(__append('\n      <input id="'),__append(idPrefix),__append('-to-time" name="to-time" class="form-control" type="time" placeholder="'),__append(t("core","dateTimeRange:placeholder:time")),__append('" '),__append(required.time[1]?"required":""),__append(">\n      ")),__append("\n    </div>\n  </div>\n</div>\n"),formGroup&&__append("\n</div>\n"),__append("\n");return __output}}),define("app/core/util/forms/dateTimeRange",["underscore","jquery","app/i18n","app/time","app/core/util/getShiftStartInfo","app/core/templates/forms/dateTimeRange"],function(e,t,n,r,i,o){"use strict";var a={date:"YYYY-MM-DD",month:"YYYY-MM","date+time":"YYYY-MM-DD",time:"HH:mm:ss"},s={shifts:["+0+1","-1+0","1","2","3"],days:["+0+1","-1+0","-7+0","-14+0","-28+0"],weeks:["+0+1","-1+0","-2+0","-3+0","-4+0"],months:["+0+1","-1+0","-2+0","-3+0","-6+0"],quarters:["+0+1","1","2","3","4",null],years:["+0+1","-1+0",null,null,null]},u=!1;function c(e){var n=e.currentTarget,r=document.getElementById(n.htmlFor);r&&requestAnimationFrame(function(){r.disabled||t(r).prop("checked",!0).trigger("change")})}function l(i){u||(t(document).on("click",".dateTimeRange-is-input > .dropdown-toggle",c),u=!0);var l=i.type||"date",d={idPrefix:i.idPrefix||"v",property:i.property||"date",formGroup:!1!==i.formGroup,hidden:!0===i.hidden,utc:i.utc?1:0,setTime:!1!==i.setTime?1:0,type:l,startHour:i.startHour||0,shiftLength:i.shiftLength||8,minDate:i.minDate||window.PRODUCTION_DATA_START_DATE||"",maxDate:""===i.maxDate?"":i.maxDate||r.getMoment().add(1,"years").format(a[l]),labels:[],separator:i.separator||"",required:{date:[!1,!1],time:[!1,!1]}};if(i.required){var p=d.required;"boolean"==typeof i.required?(p.date=[i.required,i.required],p.time=[i.required,i.required]):Array.isArray(i.required)?(p.date=[!!i.required[0],!!i.required[1]],p.time=[!!i.required[0],!!i.required[1]]):(Array.isArray(i.required.date)?p.date=[!!i.required.date[0],!!i.required.date[1]]:p.date=[!!i.required.date,!!i.required.date],Array.isArray(i.required.time)?p.time=[!!i.required.time[0],!!i.required.time[1]]:p.time=[!!i.required.time,!!i.required.time])}return i.labels?Array.isArray(i.labels)?d.labels=[].concat(i.labels):d.labels.push(i.labels):d.labels.push({ranges:!0}),d.labels=d.labels.map(function(t){return{text:t.text||n("core","dateTimeRange:label:"+d.type),dropdown:function(e){return Array.isArray(e.dropdown)?e.dropdown.map(function(e){return"object"==typeof e.attrs&&(e.attrs=Object.keys(e.attrs).map(function(t){return t+'="'+e.attrs[t]+'"'}).join(" ")),e}):null}(t),input:t.input||null,ranges:function(t){if(!0===t.ranges&&(t.ranges=""),"string"!=typeof t.ranges)return null;var n={shifts:!1,days:!0,weeks:!0,months:!0,quarters:!0,years:!0};t.ranges.split(" ").some(function(e){return/^[^+\-]/.test(e)})&&Object.keys(n).forEach(function(e){n[e]=!1});var r=e.assign({},s);return t.ranges.split(" ").forEach(function(e){var t="-"===e.charAt(0)?"-":"+",i=e.replace(/^[^a-z]+/,"").split(":"),o=i.shift(),a=i.length?i[0].split("_"):[];n[o]="+"===t,a.length&&(r[o]=a)}),Object.keys(n).forEach(function(e){r[e]&&n[e]?n[e]=r[e]:delete n[e]}),n}(t)}}),o(d)}return l.handleRangeEvent=function(e){var t=this.$(e.target).closest("a[data-date-time-range]"),n=t.closest(".dateTimeRange"),r=n[0].dataset.type,o="1"===n[0].dataset.utc,s=+n[0].dataset.startHour,u=+n[0].dataset.shiftLength,c=t[0].dataset.dateTimeGroup,l=t[0].dataset.dateTimeRange,d=c,p=1,f=i(Date.now(),{utc:o,startHour:s,shiftLength:u}),h=f.moment,m=null;if(h.hours()<s&&h.subtract(24,"hours"),"shifts"===c?(d="hours",p=u):h.startOf("day"),/^[0-9]+$/.test(l))"shifts"===c?(h.subtract((f.no-1)*f.length,"hours").add((+l-1)*f.length,"hours"),m=h.clone().add(f.length,"hours")):("0"===l?h.startOf(d):h.startOf("year").add(l-1,d),m=h.clone().add(1,d));else{var g=l.match(/^([+-])([0-9]+)([+-])([0-9]+)$/)||[0,"+","0","+","1"];m=h.startOf(d).clone()["+"===g[3]?"add":"subtract"](+g[4]*p,d),h=h["+"===g[1]?"add":"subtract"](+g[2]*p,d)}"shifts"!==c&&(h.hours(s),m.hours(s));var y=a[r];n.find('input[name="from-date"]').val(h.format(y)).trigger("change"),n.find('input[name="from-time"]').val(h.format("HH:mm:ss")).trigger("change"),n.find('input[name="to-date"]').val(m.format(y)).trigger("change"),n.find('input[name="to-time"]').val(m.format("HH:mm:ss")).trigger("change");var b=this.$('[name="interval"]');if(b.length){var v={},w=[];b.each(function(){this.disabled||this.parentNode.classList.contains("disabled")||(v[this.value]=this,w.push(this.value))});var _=function(e,t){var n=36e5;if(e<=8*n)return"hour";var r=24*n;if(e<=9e7)return"shift";if("weeks"===t&&e>11988e5&&e<=243e7)return"week";var i=31*r;return e<=26892e5?"day":e<2.5*i?"week":e>12*i?"year":"month"}(m.valueOf()-h.valueOf(),c);v[_]||(_=w[w.length-1]),_&&b.filter('[value="'+_+'"]').parent().click()}e.altKey&&this.$('[type="submit"]').click()},l.serialize=function(e){var t=e.$(".dateTimeRange"),n=t[0].dataset.type,i=a[n],o="1"===t[0].dataset.utc,s="1"===t[0].dataset.setTime,u=t[0].dataset.startHour,c=t.find('input[name="from-date"]'),l=t.find('input[name="from-time"]'),d=t.find('input[name="to-date"]'),p=t.find('input[name="to-time"]'),f=c.val(),h=l.val(),m=d.val(),g=p.val();(!c.length||f.length<7)&&(f="1970-01-01"),(!d.length||m.length<7)&&(m="1970-01-01"),7===f.length&&(f+="-01"),7===m.length&&(m+="-01");var y=s?(1===u.length?"0":"")+u+":00":"00:00:00";(!l.length||h.length<5)&&(h=y),(!p.length||g.length<5)&&(g=y),5===h.length&&(h+=":00"),5===g.length&&(g+=":00");var b=(o?r.utc:r).getMoment(f+" "+h,"YYYY-MM-DD HH:mm:ss"),v=(o?r.utc:r).getMoment(m+" "+g,"YYYY-MM-DD HH:mm:ss");return w(b)?(c.val(""),l.val(""),b=null):(c.val(b.format(i)),l.val(b.format("HH:mm:ss"))),w(v)?(d.val(""),p.val(""),v=null):(d.val(v.format(i)),p.val(v.format("HH:mm:ss"))),{property:t[0].dataset.property,from:b,to:v};function w(e){return!e.isValid()||"time"!==n&&1970===e.year()}},l.formToRql=function(e,t){var n=l.serialize(e);n.from&&t.push({name:"ge",args:[n.property,n.from.valueOf()]}),n.to&&t.push({name:"lt",args:[n.property,n.to.valueOf()]})},l.rqlToForm=function(e,t,n){var i,o=this.$(".dateTimeRange")[0].dataset,s=a[o.type],u=("1"===o.utc?r.utc:r).getMoment(t.args[1]);"ge"===t.name||"gt"===t.name?i="from":"le"!==t.name&&"lt"!==t.name||(i="to"),i&&u.isValid()&&(n[i+"-date"]=u.format(s),n[i+"-time"]=u.format("HH:mm:ss"))},l}),define("app/core/util/forms",["./forms/dateTimeRange","./forms/formGroup"],function(e,t){"use strict";return{dateTimeRange:e,formGroup:t}}),define("app/core/templates/embedded/appsDialog",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="embedded-appsDialog-apps" style="margin-top: -'),__append(71*apps.length/2),__append('px">\n  '),apps.forEach(function(e){__append('\n  <button data-app="'),__append(e),__append('" class="btn btn-default btn-block">'),__append(t("core","embedded:apps:"+e)),__append("</button>\n  ")}),__append("\n</div>\n");return __output}}),define("app/core/templates/embedded/confirmDialog",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append("<div>\n  "),__append(t("core","embedded:"+action+":message")),__append('\n  <div class="form-actions">\n    <button class="btn btn-lg btn-danger dialog-answer" type="button" autofocus data-answer="yes">'),__append(t("core","embedded:"+action+":yes")),__append('</button>\n    <button class="btn btn-lg btn-link cancel" type="button">'),__append(t("core","embedded:"+action+":no")),__append("</button>\n  </div>\n</div>\n");return __output}}),define("app/core/templates/embedded/actions",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="dropup embedded-actions '),__append(left?"embedded-left":"embedded-right"),__append('" data-app="'),__append(app),__append('">\n  <button data-action="switch" class="btn btn-default btn-lg" type="button" title="'),__append(t("core","embedded:actions:switch")),__append('">\n    <i class="fa fa-window-restore"></i>\n  </button>\n  <button class="btn btn-default btn-lg dropdown-toggle" type="button" data-toggle="dropdown">\n    <i class="fa fa-cogs"></i>\n  </button>\n  <ul class="dropdown-menu '),__append(left?"":"dropdown-menu-right"),__append('">\n    <li><a data-action="switch"><i class="fa fa-window-restore"></i><span>'),__append(t("core","embedded:actions:switch")),__append('</span></a></li>\n    <li><a data-action="refresh"><i class="fa fa-refresh"></i><span>'),__append(t("core","embedded:actions:refresh")),__append('</span></a></li>\n    <li><a data-action="config"><i class="fa fa-wrench"></i><span>'),__append(t("core","embedded:actions:config")),__append('</span></a></li>\n    <li><a data-action="reboot"><i class="fa fa-undo"></i><span>'),__append(t("core","embedded:actions:reboot")),__append('</span></a></li>\n    <li><a data-action="shutdown"><i class="fa fa-power-off"></i><span>'),__append(t("core","embedded:actions:shutdown")),__append('</span></a></li>\n    <li class="dev hidden"><a data-action="restartBrowser"><i class="fa"></i><span>'),__append(t("core","embedded:actions:restartBrowser")),__append('</span></a></li>\n    <li class="dev hidden"><a data-action="resetBrowser"><i class="fa"></i><span>'),__append(t("core","embedded:actions:resetBrowser")),__append('</span></a></li>\n    <li class="dev hidden"><a data-action="noKiosk"><i class="fa"></i><span>'),__append(t("core","embedded:actions:noKiosk")),__append("</span></a></li>\n  </ul>\n</div>\n");return __output}}),define("app/core/util/embedded",["require","jquery","app/i18n","app/viewport","app/core/View","app/core/views/DialogView","app/core/templates/embedded/appsDialog","app/core/templates/embedded/confirmDialog","app/core/templates/embedded/actions"],function(e,t,n,r,i,o,a,s,u){"use strict";var c=window.IS_EMBEDDED||window.parent!==window||-1!==window.location.href.indexOf("_embedded=1"),l=null;return window.addEventListener("message",function(t){var n=t.data||{data:{}};switch(n.type){case"apps":r=n.data,clearTimeout(l),r&&Array.isArray(r.apps)&&0!==r.apps.length&&(1===r.apps.length?window.parent.postMessage({type:"switch",app:window.WMES_APP_ID},"*"):(o=r.apps,(s=e("app/viewport")).showDialog(new i({events:{"click [data-app]":function(e){s.closeAllDialogs(),window.parent.postMessage({type:"switch",app:window.WMES_APP_ID,newApp:e.currentTarget.dataset.app},"*")}},dialogClassName:"embedded-appsDialog",template:a,getTemplateData:function(){return{apps:o}}}))))}var r,o,s}),{actions:{switch:function(){window.parent.postMessage({type:"apps"},"*"),l&&clearTimeout(l),l=setTimeout(function(){window.parent.postMessage({type:"switch",app:window.WMES_APP_ID},"*")},250)},config:function(){window.parent.postMessage({type:"config"},"*")},refresh:function(){window.parent.postMessage({type:"refresh"},"*")},resetBrowser:function(){window.parent.postMessage({type:"resetBrowser"},"*")},restartBrowser:function(){window.parent.postMessage({type:"restartBrowser"},"*")},noKiosk:function(){window.parent.postMessage({type:"noKiosk"},"*")},reboot:function(){var t=new o({dialogClassName:"embedded-confirmDialog",template:s,model:{action:"reboot"}});t.once("answered",function(e){"yes"===e&&window.parent.postMessage({type:"reboot"},"*")}),e("app/viewport").showDialog(t,n("core","embedded:reboot:title"))},shutdown:function(){var t=new o({dialogClassName:"embedded-confirmDialog",template:s,model:{action:"shutdown"}});t.once("answered",function(e){"yes"===e&&window.parent.postMessage({type:"shutdown"},"*")}),e("app/viewport").showDialog(t,n("core","embedded:shutdown:title"))}},isEnabled:function(){return c},ready:function(e){c&&window.parent.postMessage({type:"ready",app:e||window.WMES_APP_ID},"*")},render:function(e,n){if(c){var r=0,i=null,o=this.actions,a=t(u({app:window.WMES_APP_ID,left:n&&!0===n.left}));a.on("click","[data-action]",function(e){var t=o[e.currentTarget.dataset.action];t&&t(),e.preventDefault()}),a.on("show.bs.dropdown",function(){r+=1,clearTimeout(i),i=setTimeout(function(){r=0},2e3),s(r<3)}),a.on("hidden.bs.dropdown",function(){s(!0)}),t(".embedded-actions").remove(),(n&&n.container||e.$el).append(a)}function s(e){a.find(".dev").toggleClass("hidden",e)}}}}),define("app/user",["underscore","app/i18n","app/broker","app/socket","app/data/divisions","app/data/subdivisions","app/core/util/embedded"],function(e,t,n,r,i,o,a){"use strict";var s=[],u=0,c={};r.on("user.reload",function(e){c.reload(e)}),r.on("user.deleted",function(){window.location.reload()});var l=e.assign(window.GUEST_USER||{},{name:t.bound("core","GUEST_USER_NAME")});return delete window.GUEST_USER,c.idProperty="id",c.data=l,c.lang=window.APP_LOCALE||window.appLocale||"pl",c.noReload=!1,c.isReloadLocked=function(){return s.length>0},c.lockReload=function(){return s.push(++u)},c.unlockReload=function(e){s=s.filter(function(t){return t!==e})},c.reload=function(r){r||(r={}),!1===r.loggedIn&&(r.name=t("core","GUEST_USER_NAME")),"unspecified"===r.orgUnitType&&(r.orgUnitType=null,r.orgUnitId=null);var i=e.omit(r,["privilegesMap","privilegesString"]),o=e.omit(c.data,["privilegesMap","privilegesString"]);if(!e.isEqual(i,o)){var a=c.isLoggedIn();Object.keys(r).length>0&&(c.data=r),c.data.privilegesMap=null,c.noReload?c.noReload=!1:n.publish("user.reloaded"),a&&!c.isLoggedIn()?n.publish("user.loggedOut"):!a&&c.isLoggedIn()&&n.publish("user.loggedIn")}},c.isLoggedIn=function(){return!0===c.data.loggedIn},c.getLabel=function(e){return c.data.name?String(c.data.name):c.data.lastName&&c.data.firstName?c.data.lastName===c.data.firstName?c.data.lastName:e?c.data.firstName+" "+c.data.lastName:c.data.lastName+" "+c.data.firstName:c.data.login},c.getInfo=function(){var e={};return e[c.idProperty]=c.data._id,e.ip=c.data.ip||c.data.ipAddress||"0.0.0.0",e.cname=window.COMPUTERNAME,e.label=c.getLabel(),e},c.isAllowedTo=function(e){if(!1===c.data.active)return!1;if(c.data.super)return!0;if(!c.data.privileges)return!1;var t=Array.prototype.slice.call(arguments),n=(1===t.length?[e]:t).map(function(e){return Array.isArray(e)?e:[e]}),r=c.isLoggedIn();if(!n.length)return r;for(var i=0,o=n.length;i<o;++i){for(var s=n[i],u=0,l=s.length,d=0;d<l;++d){var p=s[d],f=typeof p;if("function"===f)u+=p()?1:0;else if("string"!==f)l-=1;else if("USER"===p)u+=r?1:0;else if("LOCAL"===p)u+=c.data.local?1:0;else if("EMBEDDED"===p)u+=a.isEnabled()?1:0;else if(/^FN:/.test(p)){var h=p.substring(3);if(-1!==h.indexOf("*"))u+=new RegExp("^"+h.replace(/\*/g,".*?")+"$").test(c.data.prodFunction)?1:0;else u+=c.data.prodFunction===h?1:0}else u+=c.hasPrivilege(s[d])?1:0}if(u===l)return!0}return!1},c.hasAccessToAor=function(e){return!e||c.data.super||!c.data.aors||!c.data.aors.length||-1!==c.data.aors.indexOf(e)},c.hasAccessToSubdivision=function(e){if(!e)return!0;if("division"===c.data.orgUnitType){var t=o.get(e);return t&&c.data.orgUnitId===t.get("division")}return"subdivision"!==c.data.orgUnitType||c.data.orgUnitId===e},c.auth=function(){var e=Array.prototype.slice.call(arguments);return function(t,n,r){c.isAllowedTo.apply(c,e)?r():c.isLoggedIn()?require(["app/viewport","app/core/pages/ErrorPage"],function(e,r){e.showPage(new r({model:{code:403,req:t,previousUrl:n}}))}):require(["app/viewport","app/users/pages/LogInFormPage"],function(e,t){e.showPage(new t)})}},c.getDivision=function(){var e=null;switch(c.data.orgUnitType){case"division":e=c.data.orgUnitId;break;case"subdivision":var t=o.get(c.data.orgUnitId);t&&(e=t.get("division"))}return i.get(e)||null},c.getSubdivision=function(){return"subdivision"!==c.data.orgUnitType?null:o.get(c.data.orgUnitId)||null},c.hasPrivilege=function(t){return c.data.privilegesMap||(Array.isArray(c.data.privileges)||(c.data.privileges=[]),c.data.privilegesString="|"+c.data.privileges.join("|"),c.data.privilegesMap={},e.forEach(c.data.privileges,function(e){c.data.privilegesMap[e]=!0})),"*"===t.charAt(t.length-1)?-1!==c.data.privilegesString.indexOf("|"+t.substr(0,t.length-1)):!0===c.data.privilegesMap[t]},c.getGuestUserData=function(){return window.GUEST_USER||{id:null,login:"guest",name:t.bound("core","GUEST_USER_NAME"),loggedIn:!1,super:!1,privileges:[]}},c.getRootUserData=function(){return window.ROOT_USER||{id:null,login:"root",name:"root",loggedIn:!0,super:!0,privileges:[]}},c.can={viewOrders:function(){return c.isAllowedTo("LOCAL","ORDERS:VIEW")},commentOrders:function(){return c.isAllowedTo("ORDERS:MANAGE","ORDERS:COMMENT","PLANNING:PLANNER","PLANNING:WHMAN","PAINT_SHOP:PAINTER","WH:VIEW","FN:master","FN:leader")}},window.user=c,c}),define("app/core/templates/messages",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<ol class="messages"></ol>\n');return __output}}),define("app/core/templates/message",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="message message-'),__append(type),__append(" "),__append(sticky?"message-sticky":""),__append(" "),__append(className),__append('">'),__append(text),__append("</div>\n");return __output}}),define("app/core/views/MessagesView",["underscore","jquery","app/i18n","../View","app/core/templates/messages","app/core/templates/message"],function(e,t,n,r,i,o){"use strict";var a=r.extend({template:i,events:{"click .message":function(e){e.currentTarget.parentNode===this.el&&e.currentTarget.getAttribute("data-view")===this.idPrefix&&this.hide(t(e.currentTarget))}},localTopics:{"router.executing":function(){this.hide()}}});return a.prototype.initialize=function(){this.$loadingMessage=null,this.$savingMessage=null,this.loadingTimer=null,this.loadingCounter=0,this.savingTimer=null,this.savingCounter=0,this.hideTimers=[],this.loading=this.loading.bind(this),this.loaded=this.loaded.bind(this),this.saving=this.saving.bind(this),this.saved=this.saved.bind(this)},a.prototype.destroy=function(){this.$loadingMessage=null,null!==this.loadingTimer&&(clearTimeout(this.loadingTimer),this.loadingTimer=null),this.$savingMessage=null,null!==this.savingTimer&&(clearTimeout(this.savingTimer),this.savingTimer=null),this.hideTimers.length>0&&(this.hideTimers.forEach(clearTimeout),this.hideTimers=null),this.$('.message[data-view="'+this.idPrefix+'"]').remove()},a.prototype.show=function(e){var n=t(o({className:e.className||"",type:e.type||"info",text:e.text,sticky:!!e.sticky}));return this.$el.append(n.attr("data-view",this.idPrefix)),this.moveDown(n),n.attr("data-top",n.position().top).css("margin-left",-n.width()/2+"px"),e.immediate?n.css("opacity",1):n.animate({opacity:1}),this.scheduleHiding(n,e.time),n},a.prototype.hide=function(e,t){if(e){if(e.hasClass("message-hiding"))return;e.addClass("message-hiding")}else e=this.$('.message[data-view="'+this.idPrefix+'"]:not(.message-sticky)'),this.$loadingMessage=null;1===e.length&&(this.moveUp(e),this.removeHideTimer(e)),t?e.remove():e.animate({opacity:0},function(){e.remove()})},a.prototype.loading=function(){this.loadingCounter+=1,null===this.loadingTimer&&(this.loadingTimer=setTimeout(this.showLoadingMessage.bind(this),0))},a.prototype.loaded=function(){this.hideLoadingMessage()},a.prototype.loadingFailed=function(t){this.hideLoadingMessage(),this.show({type:"error",time:1e4,text:e.isString(t)?t:n("core","MSG:LOADING_FAILURE")})},a.prototype.showLoadingMessage=function(){this.loadingTimer=null,null===this.$loadingMessage&&(this.$loadingMessage=this.show({type:"warning",text:n("core","MSG:LOADING"),immediate:!0}))},a.prototype.hideLoadingMessage=function(){this.loadingCounter>0&&--this.loadingCounter,0===this.loadingCounter&&(null!==this.loadingTimer&&(clearTimeout(this.loadingTimer),this.loadingTimer=null),null!==this.$loadingMessage&&(this.hide(this.$loadingMessage),this.$loadingMessage=null))},a.prototype.saving=function(){this.savingCounter+=1,null===this.savingTimer&&(this.savingTimer=setTimeout(this.showSavingMessage.bind(this),0))},a.prototype.saved=function(){this.hideSavingMessage()},a.prototype.savingFailed=function(t){this.hideSavingMessage(),this.show({type:"error",time:5e3,text:e.isString(t)?t:n("core","MSG:SAVING_FAILURE")})},a.prototype.showSavingMessage=function(){this.savingTimer=null,null===this.$savingMessage&&(this.$savingMessage=this.show({type:"warning",text:n("core","MSG:SAVING"),immediate:!0}))},a.prototype.hideSavingMessage=function(){this.savingCounter>0&&--this.savingCounter,0===this.savingCounter&&(null!==this.savingTimer&&(clearTimeout(this.savingTimer),this.savingTimer=null),null!==this.$savingMessage&&(this.hide(this.$savingMessage),this.$savingMessage=null))},a.prototype.moveDown=function(e){this.moveTopBy(this.$('.message[data-view="'+this.idPrefix+'"]'),e,this.getMoveOffset(e))},a.prototype.moveUp=function(e){this.moveTopBy(e.prevAll(".message"),e,-this.getMoveOffset(e))},a.prototype.moveTopBy=function(e,n,r){e.each(function(){if(this!==n[0]){var e=t(this),i=parseInt(e.attr("data-top"),10)+r;e.attr("data-top",i),e.animate({top:i+"px"})}})},a.prototype.getMoveOffset=function(e){return e.outerHeight()+8},a.prototype.scheduleHiding=function(t,n){if(e.isNumber(n)){n<1e3&&(n=1e3);var r=setTimeout(this.hide.bind(this,t),n);t.data("hideTimer",r),this.hideTimers.push(r)}},a.prototype.removeHideTimer=function(t){var n=t.data("hideTimer");e.isUndefined(n)||(clearTimeout(n),t.data("hideTimer",void 0),this.hideTimers.splice(this.hideTimers.indexOf(n),1))},a}),define("app/core/templates/dialogContainer",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="modal fade viewport-dialog" tabindex="-1">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close cancel"></button>\n        <h3 class="modal-title"></h3>\n      </div>\n      <div class="modal-body"></div>\n    </div>\n  </div>\n</div>\n');return __output}}),define("app/core/Viewport",["require","underscore","jquery","./View","./util","./views/MessagesView","app/core/templates/dialogContainer"],function(e,t,n,r,i,o,a){"use strict";var s=function(e){return new e};function u(e){r.call(this,e),this.msg=e.messagesView?e.messagesView:new o({el:this.el}),this.document=e.document||window.document,this.layouts={},this.currentLayout=null,this.currentLayoutName=null,this.defaultLayoutName=null,this.currentPage=null,this.$dialog=null,this.dialogQueue=[],this.currentDialog=null,this.pageCounter=0,this.closeDialog=this.closeDialog.bind(this),this.$el.on("click",".viewport-dialog .cancel",this.closeDialog)}return i.inherits(u,r),u.prototype.cleanup=function(){this.broker.destroy(),this.msg.remove(),this.$dialog.remove(),this.currentPage&&this.currentPage.remove(),this.currentLayout&&this.currentLayout.remove(),this.currentDialog&&this.currentDialog.remove(),t.invoke(this.dialogQueue.filter(t.isObject),"remove"),this.$el.off("click",".viewport-dialog .cancel",this.closeDialog),this.broker=null,this.msg=null,this.$dialog=null,this.currentLayout=null,this.currentDialog=null,this.dialogQueue=null,this.layouts=null},u.prototype.afterRender=function(){if(null!==this.$dialog)return this.closeDialog();this.$dialog=n(a()).appendTo(this.el).modal({show:!1,backdrop:!0}),this.$dialog.on("shown.bs.modal",this.onDialogShown.bind(this)),this.$dialog.on("hidden.bs.modal",this.onDialogHidden.bind(this))},u.prototype.setDefaultLayout=function(e){return this.defaultLayoutName=e,this},u.prototype.registerLayout=function(e,t){return this.defaultLayoutName||(this.defaultLayoutName=e),this.layouts[e]=t,this},u.prototype.loadPage=function(n,r){this.msg.loading(),t.isFunction(r)||(r=s);var i=this,o=++this.pageCounter;e(t.flatten([].concat(n),!0),function(){o===i.pageCounter&&i.showPage(r.apply(null,arguments)),i.msg.loaded()},function(e){o===i.pageCounter&&(i.msg.loadingFailed(),i.broker.publish("viewport.page.loadingFailed",{page:null,xhr:{status:0,responseText:e.stack||e.message}}))})},u.prototype.showPage=function(e){var r=this,i=r.defaultLayoutName;if("string"==typeof e.layoutName?i=e.layoutName:"function"==typeof e.layoutName&&(i=e.layoutName(r)),!t.isObject(r.layouts[i]))throw new Error("Unknown layout: "+i);function o(){for(var r=[],i=0;i<arguments.length;++i){var o=arguments[i];Array.isArray(o)?r.push.apply(r,o):r.push(o)}return e.trigger("beforeLoad",e,r),n.when.apply(n,t.map(r,e.promised,e))}function a(){r.broker.publish("viewport.page.loaded",{page:e}),e.trigger("afterLoad",e),null!==r.currentPage&&r.currentPage.remove(),r.currentPage=e;var n=r.setLayout(i);t.isFunction(n.setUpPage)&&n.setUpPage(e),t.isFunction(e.setUpLayout)&&e.setUpLayout(n),t.isObject(e.view)&&e.setView(e.view),n.setView(n.pageContainerSelector,e),r.isRendered()?n.isRendered()?e.render():n.render():r.render(),r.broker.publish("viewport.page.shown",e)}function s(t){e.remove(),r.broker.publish("viewport.page.loadingFailed",{page:e,xhr:t})}++r.pageCounter,r.broker.publish("viewport.page.loading",{page:e}),t.isFunction(e.load)?e.load(o).then(a,s):o().then(a,s)},u.prototype.showDialog=function(e,n){if(null!==this.currentDialog)return this.dialogQueue.push(e,n),this;var r=!0,i=e.afterRender,o=this;e.afterRender=function(){var n=o.$dialog.find(".modal-body");n.children()[0]!==e.el&&n.empty().append(e.el),r&&(r=!1,o.$dialog.modal("show")),t.isFunction(i)&&i.apply(e,arguments)},this.currentDialog=e;var a=this.$dialog.find(".modal-header");return n?(a.find(".modal-title").html(n),a.show()):a.hide(),e.dialogClassName&&this.$dialog.addClass(t.result(e,"dialogClassName")),e.render(),this},u.prototype.closeDialog=function(e){return null===this.currentDialog?this:(this.$dialog.modal("hide"),e&&e.preventDefault&&e.preventDefault(),this)},u.prototype.closeDialogs=function(e,t){this.dialogQueue=this.dialogQueue.filter(t||e),"function"==typeof e&&this.currentDialog&&e(this.currentDialog)&&this.closeDialog()},u.prototype.closeAllDialogs=function(){this.dialogQueue=[],this.closeDialog()},u.prototype.setLayout=function(e){if(e===this.currentLayoutName)return t.isFunction(this.currentLayout.reset)&&this.currentLayout.reset(),this.currentLayout;var n=this.layouts[e],r=this.options.selector||"";return t.isObject(this.currentLayout)&&this.removeView(r),this.currentLayoutName=e,this.currentLayout=n(),this.setView(r,this.currentLayout),this.trigger("layout:change",this.currentLayoutName,this.currentLayout),this.currentLayout},u.prototype.onDialogShown=function(){this.currentDialog&&(this.currentDialog.$("[autofocus]").focus(),t.isFunction(this.currentDialog.onDialogShown)&&this.currentDialog.onDialogShown(this),this.broker.publish("viewport.dialog.shown",this.currentDialog),this.currentDialog.trigger("dialog:shown"))},u.prototype.onDialogHidden=function(){var e=this.currentDialog;e&&(this.currentDialog=null,e.dialogClassName&&this.$dialog.removeClass(t.result(e,"dialogClassName")),t.isFunction(e.remove)&&(e.trigger("dialog:hidden"),e.remove(),this.broker.publish("viewport.dialog.hidden",e)),this.dialogQueue.length&&this.showDialog(this.dialogQueue.shift(),this.dialogQueue.shift()))},u}),define("app/viewport",["app/broker","app/core/Viewport"],function(e,t){"use strict";var n=new t({el:document.body,selector:"#app-viewport"});return e.subscribe("router.executing",function(){window.scrollTo(0,0)}),e.subscribe("viewport.page.loaded",function(){window.parent!==window&&window.parent.postMessage({type:"viewport.page.embeddedLoaded",app:window.WMES_APP_ID,loaded:!0},"*")}),e.subscribe("viewport.page.loadingFailed",function(){window.parent!==window&&window.parent.postMessage({type:"viewport.page.embeddedLoaded",app:window.WMES_APP_ID,loaded:!1},"*")}),window.addEventListener("message",function(t){var n=t.data;switch(n.type){case"viewport.page.embeddedLoaded":e.publish("viewport.page.embeddedLoaded",{app:n.app,loaded:n.loaded})}}),window.viewport=n,Object.defineProperty(window,"page",{get:function(){return n.currentPage}}),Object.defineProperty(window,"dialog",{get:function(){return n.currentDialog}}),Object.defineProperty(window,"model",{get:function(){var e=n.currentDialog||n.currentPage;return e&&e.model||e.collection}}),n}),define("app/core/Request",["h5.rql/index","./util"],function(e,t){"use strict";var n=/^\/(.*?)(?:\?(.*?))?(?:#(.*?))?$/;function r(e){"/"!==e[0]&&(e="/"+e);var t=e.match(n);this.url=e,this.path=("/"===t[1][0]?"":"/")+t[1],this.queryString=t[2]||"",this.fragment=t[3]||"",this.params={},this.query={},this.rql={},this.defineGetters()}return r.prototype.defineGetters=function(){Object.defineProperty(this,"query",{enumerable:!0,configurable:!0,get:function(){return this.parseQueryString()},set:function(e){this.query=e}}),Object.defineProperty(this,"rql",{enumerable:!0,configurable:!0,get:function(){return this.parseRqlString()},set:function(e){this.rql=e}})},r.prototype.parseQueryString=function(){delete this.query;for(var e=this.queryString.split("&"),n={},r=0,i=e.length;r<i;++r){var o=e[r],a=o.indexOf("=");if(-1!==a){var s=t.decodeUriComponent(o.substr(0,a)),u=t.decodeUriComponent(o.substr(a+1));n[s]=u}}return this.query=n,n},r.prototype.parseRqlString=function(){return delete this.rql,this.rql=e.parse(this.queryString),this.rql},r}),define("app/core/Router",["underscore","./util","./Request"],function(e,t,n){"use strict";var r=/([:*])([\w\-]+)?/g,i=/[\-\[\]{}()+?.,\\\^$|#\s]/g;function o(e){this.broker=e,this.routes=[],this.dispatching=!1,this.dispatchQueue=[],this.currentRequest=null,this.previousUrl=null}function a(n,r){return function(i){var o=n.exec(i.path);if(null===o)return!1;var a=o.length;if(1===a)return!0;var s,u=e.isArray(r)?r.length:0;if(a===u+1)for(s=0;s<u;++s)i.params[r[s]]=t.decodeUriComponent(o[s+1]);else for(s=0;s<a;++s)i.params[s]=t.decodeUriComponent(o[s]);return!0}}return o.prototype.getCurrentRequest=function(){return this.currentRequest},o.prototype.setCurrentRequest=function(e){this.currentRequest=new n(e)},o.prototype.map=function(e){var t=Array.prototype.slice.call(arguments);t.shift(),this.routes.unshift(this.createMatcher(e),t)},o.prototype.navigate=function(t,n){this.broker.publish("router.navigate",e.assign({url:t},n))},o.prototype.replace=function(e){this.broker.publish("router.navigate",{url:e,trigger:!0,replace:!0})},o.prototype.update=function(e){this.broker.publish("router.navigate",{url:e,trigger:!1,replace:!0})},o.prototype.dispatch=function(t){if(!e.isUndefined(t))if(null===t&&(t="/"),this.dispatching)this.dispatchQueue.push(t);else{this.dispatching=!0;var r=new n(t);this.broker.publish("router.dispatching",r);var i=this.match(r);if(null===i){this.dispatching=!1;var o=this.dispatchQueue.shift();e.isUndefined(o)?this.broker.publish("router.404",{req:r}):this.dispatch(o)}else this.broker.publish("router.matched",{handlers:i,req:r}),e.defer(this.execute.bind(this,i,r))}},o.prototype.match=function(e){for(var t=this.routes,n=0,r=t.length;n<r;n+=2){if((0,t[n])(e))return t[n+1]}return null},o.prototype.execute=function(e,t){this.currentRequest=t,this.broker.publish("router.executing",{handlers:e,req:t});var n=this.previousUrl;!function r(i){i+1<e.length?e[i](t,n,r.bind(null,i+1)):e[i](t,n)}(0),this.previousUrl=t.url,this.dispatching=!1,this.dispatch(this.dispatchQueue.shift())},o.prototype.createMatcher=function(t){if(t instanceof RegExp)return a(t);if(""===(t=t.trim())||"/"===t)return function(e){return""===e.path||"/"===e.path};var n=[],o=!1,s=t.replace(i,"\\$&");return s=s.replace(r,function(t,r,i){return o=!0,e.isUndefined(i)?"*"===r?".*":t:(n.push(i),"*"===r?"(.*?)":"([^/#?;]*)")}),o?a(new RegExp("^"+s+"$"),n):function(e){return e.path===t}},o}),define("app/core/templates/error",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="well">\n  <p>'),__append(message),__append("</p>\n  "),notify&&(__append('\n  <hr style="margin: 0 0 10px 0">\n  <p id="'),__append(idPrefix),__append('-notify"><a href="#">'),__append(t("core","ERROR:notify:message")),__append("</a></p>\n  ")),__append("\n</div>\n");return __output}}),define("app/core/pages/ErrorPage",["underscore","app/i18n","../View","app/core/templates/error","app/data/localStorage"],function(e,t,n,r,i){"use strict";return n.extend({pageId:"error",events:{"click #-notify > a":function(){var e=this,t=e.buildMail();return e.$id("notify").html('<i class="fa fa-spinner fa-spin"></i>'),e.trySendMail("/mail;send",t,function(n){n?e.trySendMail(e.senderUrl,t,e.handleMailSent.bind(e)):e.handleMailSent()}),!1},"click a[data-reload]":function(){return window.location.reload(),!1}},breadcrumbs:function(){return[t.bound("core","ERROR:"+this.resolveCode()+":title")]},initialize:function(){var e=this,i=e.resolveCode();try{e.adminEmail=atob(window.ADMIN_EMAIL),e.senderUrl=atob(window.REMOTE_MAIL_SENDER_URL),e.secretKey=atob(window.REMOTE_MAIL_SECRET_KEY),e.notify=0!==i}catch(t){e.notify=!1}e.view=new n({template:function(){var n=require("app/user");return 403!==i||n.isLoggedIn()||(i+=":guest"),r({idPrefix:e.idPrefix,message:t("core","ERROR:"+i+":message"),notify:e.notify})},afterRender:function(){403===i&&e.checkUser()}})},resolveCode:function(){var e=this.model.code;return t.has("core","ERROR:"+e+":title")?e:e>=400&&e<500?400:e>=500?500:0},trySendMail:function(e,n,r){var i=require("app/user");this.ajax({method:"POST",url:e,data:JSON.stringify({secretKey:this.secretKey,to:this.adminEmail,subject:t("core","ERROR:notify:subject",{APP_NAME:t("core","APP_NAME"),code:this.model.code,user:i.getLabel()}),html:n}),success:function(){r()},error:function(){r(!0)}})},handleMailSent:function(e){this.$id("notify").html(t("core","ERROR:notify:"+(e?"failure":"success")))},buildMail:function(){var t=require("app/user"),n=[],r=function(e){return JSON.stringify(e,null,2)},o=function(e,t){n.push("<b>"+e+"=</b><br>",'<pre style="margin-top: 0; margin-bottom: 10px">'+String(t).trim()+"</pre>")};return o("date",(new Date).toLocaleString()),o("user",'<a href="'+window.location.origin+"/#users/"+t.data._id+'">'+t.getLabel()+"</a><br>"+r(e.assign({cname:window.COMPUTERNAME},e.omit(t.data,"privilegesMap")))),o("router.currentRequest",this.model.req?this.model.req.url:"?"),o("router.referrer",this.model.previousUrl||"?"),o("router.recent",r(JSON.parse(i.getItem("WMES_RECENT_LOCATIONS")||"[]"))),o("response.code",this.model.code),o("response.body",this.model.xhr?this.model.xhr.responseText:""),o("window.location.href",window.location.href),o("window.navigator",r(e.pick(window.navigator,["language","languages","cookieEnabled","onLine","platform","userAgent"]))),o("window.screen",r(e.assign(e.pick(window.screen,["availHeight","availWidth","width","height"])),(window.innerWidth,window.innerHeight))),n.join("")},checkUser:function(){var e=require("app/user");this.ajax({url:"/users/self"}).done(function(t){t._id!==e.data._id&&window.location.reload()})}})}),define("app/router",["backbone","h5.rql/specialOperators","app/broker","app/viewport","app/time","app/core/Router","app/core/pages/ErrorPage","app/data/localStorage"],function(e,t,n,r,i,o,a,s){"use strict";e.Router.prototype._extractParameters=function(e,t){return e.exec(t).slice(1)};var u=new o(n),c=new e.Router;c.route("*catchall","catchall",function(e){u.dispatch(e)}),n.subscribe("router.navigate",function(e){var t=e.url,n=t.charAt(0);"#"!==n&&"/"!==n||(t=t.substr(1));var r=!0===e.trigger,i=!0===e.replace;c.navigate(t,{trigger:r,replace:i}),!r&&i&&u.setCurrentRequest(t)});function l(){var e=JSON.parse(s.getItem("WMES_RECENT_LOCATIONS")||"[]");e.unshift({date:new Date,href:window.location.href}),e.length>10&&e.pop(),s.setItem("WMES_RECENT_LOCATIONS",JSON.stringify(e))}return n.subscribe("router.404",function(e){var t=e.req;"/404"===t.path?r.showPage(new a({model:{code:404,req:t,previousUrl:u.previousUrl}})):u.dispatch("/404")}),n.subscribe("viewport.page.loadingFailed",function(e){r.showPage(new a({model:{code:e.xhr?e.xhr.status:0,req:u.currentRequest,previousUrl:u.previousUrl,xhr:e.xhr}}))}),l(),window.addEventListener("hashchange",l),window.router=u,u}),define("app/updater/views/RestartMessageView",["app/core/View"],function(e){"use strict";return e.extend({destroy:function(){this.el.ownerDocument.body.style.marginBottom=""},afterRender:function(){this.el.ownerDocument.body.style.marginBottom=this.$el.outerHeight()+15+"px",this.rendered?this.el.style.display="block":this.rendered=!0}})}),define("app/updater/templates/browserUpdate",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="updater-browserUpdate">\n  <p>'),__append(t("updater","browserUpdate:message")),__append("</p>\n  <p>"),__append(t("updater","browserUpdate:"+platform+":message")),__append("</p>\n  "),"windows"===platform&&(__append('\n  <p style="text-align: center">\n    <a id="'),__append(idPrefix),__append('-downloadUrl" class="btn btn-primary btn-block btn-lg" href="/files/ChromeStandaloneSetup64.exe">\n      '),__append(t("updater","browserUpdate:windows:download")),__append("\n    </a>\n  </p>\n  ")),__append("\n  "),"android"===platform&&(__append('\n  <p style="text-align: center">\n    <a class="btn btn-primary btn-block btn-lg" href="https://play.google.com/store/apps/details?id=com.android.chrome&hl=pl">\n      '),__append(t("updater","browserUpdate:android:download")),__append("\n    </a>\n  </p>\n  ")),__append("\n  <h3>"),__append(t("updater","browserUpdate:failure:header")),__append("</h3>\n  "),__append(t("updater","browserUpdate:failure:message")),__append("\n</div>\n");return __output}}),define("app/updater/views/BrowserUpdateDialogView",["app/viewport","app/core/View","app/updater/templates/browserUpdate"],function(e,t,n){"use strict";return t.extend({template:n,dialogClassName:"updater-browserUpdate-dialog",events:{"click a":function(){e.closeDialog()}},getTemplateData:function(){var e=window.navigator.userAgent;return{platform:-1!==e.indexOf("Android")?"android":-1!==e.indexOf("Mac OS")?"mac":-1!==e.indexOf("Linux")?"linux":"windows"}},afterRender:function(){var e=this,t=e.ajax({method:"HEAD",url:"https://test.wmes.pl/ping"});t.done(function(){200===t.statusCode&&e.$id("downloadUrl").prop("href","https://dl.google.com/tag/s/appguid%3D%7B8A69D345-D564-463C-AFF1-A69D9E530F96%7D%26iid%3D%7BB7F24988-6715-F843-972C-481E05CBA4B5%7D%26lang%3Dpl%26browser%3D4%26usagestats%3D0%26appname%3DGoogle%2520Chrome%26needsadmin%3Dprefers%26ap%3Dx64-stable-statsdef_1%26installdataindex%3Dempty/update2/installers/ChromeSetup.exe")}),window.sessionStorage.setItem("WMES_BROWSER_UPDATE","1")}})}),define("app/updater/templates/addressUpdate",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="updater-addressUpdate">\n  '),__append(t("updater","addressUpdate:message",{network:network})),__append("\n  <p>"),__append(t("updater","addressUpdate:old",{oldAddress:oldAddress})),__append("</p>\n  <p>"),__append(t("updater","addressUpdate:new",{newAddress:newAddress})),__append('</p>\n  <p style="text-align: center">\n    <button id="'),__append(idPrefix),__append('-go" class="btn btn-primary btn-block btn-lg" type="button">\n      '),__append(t("updater","addressUpdate:go")),__append("\n    </button>\n  </p>\n</div>\n");return __output}}),define("app/updater/views/AddressUpdateDialogView",["app/user","app/viewport","app/core/View","app/updater/templates/addressUpdate"],function(e,t,n,r){"use strict";return n.extend({template:r,dialogClassName:"updater-addressUpdate-dialog",events:{"click #-go":function(){e.isLoggedIn()?window.location.href="/addressUpdate/redirect?hash="+encodeURIComponent(window.location.hash||"#"):window.location.href="https://ket.wmes.pl/"+window.location.hash}},getTemplateData:function(){var t="domain";return 0===(e.data.ipAddress||window.location.hostname).indexOf("192.168")&&(t="factory"),{network:t,oldAddress:window.location.origin,newAddress:"https://ket.wmes.pl"}},afterRender:function(){window.sessionStorage.setItem("WMES_ADDRESS_UPDATE","1")}})}),define("app/updater/templates/backendRestart",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="updater-restart updater-restart-backend">\n  <i class="fa fa-exclamation-triangle updater-restart-icon"></i><span class="updater-restart-message">'),__append(t("updater","restart:backend")),__append("</span>\n</div>\n");return __output}}),define("app/updater/templates/frontendRestart",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="updater-restart updater-restart-frontend">\n  <i class="fa fa-exclamation-circle updater-restart-icon"></i><span class="updater-restart-message">'),__append(t("updater","restart:frontend")),__append("</span>\n</div>\n");return __output}}),function(){"use strict";var e=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;function t(e,t,n,r,i,o){t[e]&&(n.push(e),!0!==t[e]&&1!==t[e]||r.push(i+e+"/"+o))}function n(e,t,n,r,i){var o=r+t+"/"+i;require._fileExists(e.toUrl(o+".js"))&&n.push(o)}function r(e,t,n){var i;for(i in t)!t.hasOwnProperty(i)||e.hasOwnProperty(i)&&!n?"object"==typeof t[i]&&(!e[i]&&t[i]&&(e[i]={}),r(e[i],t[i],n)):e[i]=t[i]}define("i18n",["module"],function(i){var o=i.config?i.config():{};return{version:"2.0.4",load:function(i,a,s,u){(u=u||{}).locale&&(o.locale=u.locale);var c,l,d,p=e.exec(i),f=p[1],h=p[4],m=p[5],g=h.split("-"),y=[],b={},v="";if(p[5]?c=(f=p[1])+m:(c=i,m=p[4],(h=o.locale)||(h=o.locale="undefined"==typeof navigator?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),g=h.split("-")),u.isBuild){for(y.push(c),n(a,"root",y,f,m),l=0;l<g.length;l++)d=g[l],n(a,v+=(v?"-":"")+d,y,f,m);a(y,function(){s()})}else a([c],function(e){var n,i=[];for(t("root",e,i,y,f,m),l=0;l<g.length;l++)n=g[l],t(v+=(v?"-":"")+n,e,i,y,f,m);a(y,function(){var t,n,o;for(t=i.length-1;t>-1&&i[t];t--)!0!==(n=e[o=i[t]])&&1!==n||(n=a(f+o+"/"+m)),r(b,n);s(b)})})}}})}(),define("app/nls/locale/en",[],function(){return{}.en=function(e){return 1===e?"one":"other"}}),define("app/nls/updater",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r))in o?o[n]:o.other},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"restart:backend":function(e){return"Application server is being restarted! Communication with the server might not work for a short while..."},"restart:frontend":function(e){return"A new version of the application is available! <a href='javascript:window.location.reload()'>Click here to reload the browser</a>..."},"browserUpdate:title":function(e){return"Browser out of date"},"browserUpdate:failure:header":function(e){return"I can't update my browser"},"browserUpdate:failure:message":function(e){return"<ul><li>If you can't change your browser because of compatibility issues, think about installing a second browser for browsing and keep the old one for compatibility.<li>Ask your admin to update your browser if you cannot install updates yourself.</ul>"},"browserUpdate:message":function(e){return"Your web browser is out of date. In the future, the version you are using will not be supported. Update your browser for more security, speed and the best experience on this site."},"browserUpdate:windows:message":function(e){return"Click the following button to download the installation file for the latest version of your browser:"},"browserUpdate:windows:download":function(e){return"DOWNLOAD THE INSTALLATION FILE"},"browserUpdate:android:message":function(e){return"Click the following button to go to the Google Chrome app in the Google Play store:"},"browserUpdate:android:download":function(e){return"GO TO GOOGLE PLAY"},"addressUpdate:title":function(e){return"Address out of date"},"addressUpdate:message":function(e){return"<p>You are currently in the "+t.s(e,"network",{factory:"factory",other:"domain"})+" network and you are using an out of date address to the WMES.</p><p>Consider using the new, easier to remember address and update all of your shortcuts and bookmarks!</p>"},"addressUpdate:old":function(e){return"Old address: "+t.v(e,"oldAddress")},"addressUpdate:new":function(e){return"New address: <a href='"+t.v(e,"newAddress")+"'>"+t.v(e,"newAddress")+"</a>"},"addressUpdate:go":function(e){return"GO TO THE NEW ADDRESS"}},pl:!0}}),define("app/nls/locale/pl",[],function(){return{}.pl=function(e){return 1==e?"one":e%10>=2&&e%10<=4&&(e%100<12||e%100>14)&&e==Math.floor(e)?"few":e%10==0||1!=e&&e%10==1||(e%10>=5&&e%10<=9||e%100>=12&&e%100<=14)&&e==Math.floor(e)?"many":"other"}}),define("app/nls/pl/updater",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r))in o?o[n]:o.other},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"restart:backend":function(e){return"Serwer aplikacji jest restartowany! Komunikacja z serwerem moe przez chwil nie dziaa..."},"restart:frontend":function(e){return"Dostpna jest nowa wersja aplikacji! <a href='javascript:window.location.reload()'>Kliknij tutaj aby przeadowa przegldark</a>..."},"browserUpdate:title":function(e){return"Nieaktualna przegldarka"},"browserUpdate:failure:header":function(e){return"Nie mog zaktualizowa przegldarki"},"browserUpdate:failure:message":function(e){return"<ul><li>Jeli nie moesz sobie pozwoli na zmian przegldarki ze wzgldu na problemy ze zgodnoci, rozwa zainstalowanie drugiej przegldarki do codziennego uytku i zachowanie starej ze wzgldu na zgodno.<li>Popro administratora o zaktualizowanie twojej przegldarki, jeli nie moesz zrobi tego samodzielnie.</ul>"},"browserUpdate:message":function(e){return"Twoja przegldarka jest nieaktualna. W przyszoci Twoja wersja przegldarki przestanie by wspierana. Zaktualizuj przegldark, by korzysta z tej strony bezpieczniej, szybciej i po prostu sprawniej."},"browserUpdate:windows:message":function(e){return"Kliknij poniszy przycisk, aby pobra instalator najnowszej wersji przegldarki:"},"browserUpdate:windows:download":function(e){return"POBIERZ INSTALATOR NA DYSK"},"browserUpdate:android:message":function(e){return"Kliknij poniszy przycisk, aby przej do aplikacji Google Chrome w sklepie Google Play:"},"browserUpdate:android:download":function(e){return"PRZEJD DO GOOGLE PLAY"},"addressUpdate:title":function(e){return"Nieaktualny adres"},"addressUpdate:message":function(e){return"<p>Jeste w sieci "+t.s(e,"network",{factory:"fabrycznej",other:"domenowej"})+" i uywasz nieaktualnego adresu do systemu WMES.</p><p>Rozwa korzystanie z nowego, atwiejszego adresu i zaktualizuj wszystkie skrty i zakadki!</p>"},"addressUpdate:old":function(e){return"Stary adres: "+t.v(e,"oldAddress")},"addressUpdate:new":function(e){return"Nowy adres: <a href='"+t.v(e,"newAddress")+"'>"+t.v(e,"newAddress")+"</a>"},"addressUpdate:go":function(e){return"PRZEJD DO NOWEGO ADRESU"}}}),define("app/updater/index",["underscore","jquery","../broker","../pubsub","../socket","../viewport","../time","../i18n","../data/localStorage","./views/RestartMessageView","./views/BrowserUpdateDialogView","./views/AddressUpdateDialogView","app/updater/templates/backendRestart","app/updater/templates/frontendRestart","i18n!app/nls/updater"],function(e,t,n,r,i,o,a,s,u,c,l,d,p,f){"use strict";var h=70,m="VERSIONS",g={},y=null,b=null,v=!1,w=!1,_=!1,A=!0,k=window.BACKEND_SERVICE||"backend",T=window.FRONTEND_SERVICE||"frontend",E=window[m],C=JSON.parse(u.getItem(m)||"null");function R(){g.versions.time=Date.now(),u.setItem(m,JSON.stringify(g.versions))}function S(){w||v||(w=!0,window.addEventListener("mousemove",O),window.addEventListener("keypress",O),A&&(b&&b.cancelAnimations(!0,!0),b&&b.remove(),b=new c({template:f,type:"frontend"}),o.insertView(b).render(),b.$el.slideDown()),n.publish("updater.frontendRestarting"),window.navigator.serviceWorker&&window.navigator.serviceWorker.getRegistrations&&window.navigator.serviceWorker.getRegistrations().then(function(t){t.forEach(function(t){t.unregister().catch(e.noop)})}).catch(e.noop),O())}function O(){clearTimeout(y),y=setTimeout(P,e.random(6e4,12e4))}function P(){i.isConnected()&&(_=!0,n.publish("updater.frontendReloading"),window.location.reload())}return delete window[m],delete window.FRONTEND_SERVICE,delete window.BACKEND_SERVICE,g.versions=C&&C.time>a.appData?C:E,g.isRestarting=function(){return v||w},g.isBackendRestarting=function(){return v},g.isFrontendRestarting=function(){return w},g.isFrontendReloading=function(){return _},g.enableViews=function(){A=!0},g.disableViews=function(){A=!1},g.pull=function(e){i.emit("updater.pull",e)},g.getCurrentVersionString=function(){return g.versions.package},R(),i.on("updater.versions",function(t){var n=g.versions;g.versions=t,e.isEqual(e.omit(t,"time"),e.omit(n,"time"))||R(),t.frontend!==n.frontend&&S()}),r.subscribe("updater.newVersion",function(e){n.publish("updater.newVersion",e),e.service===k?function(){if(v)return;v=!0,A&&(null!==b&&b.remove(),b=new c({template:p,type:"backend"}),o.insertView(b).render(),b.$el.slideDown());n.subscribe("socket.connected").setLimit(1).on("message",function(){if(v=!1,b){var e=b;e.$el.slideUp(function(){b===e&&(b.remove(),b=null)}),n.publish("updater.backendRestarted")}}),n.publish("updater.backendRestarting")}():e.service===T&&S()}),n.subscribe("viewport.page.shown",function(e){!function(e){if("dashboard"!==e.pageId||-1===window.navigator.vendor.toLowerCase().indexOf("google")||"1"===window.sessionStorage.getItem("WMES_BROWSER_UPDATE"))return;var t=window.navigator.userAgent.match(/Chrome\/([0-9]+)/);if(!t)return;if(+t[1]>=h)return;o.showDialog(new l,s("updater","browserUpdate:title"))}(e),function(){if(/\.wmes\.pl$/.test(window.location.hostname)||"localhost"===window.location.hostname||"1"===window.sessionStorage.getItem("WMES_ADDRESS_UPDATE")||window.document.body.classList.contains("is-embedded"))return;t.ajax({method:"GET",url:"https://ket.wmes.pl/ping",dataType:"text"}).done(function(e){"pong"===e&&o.showDialog(new d,s("updater","addressUpdate:title"))})}()}),window.updater=g,g}),define("app/data/loadedModules",[],function(){"use strict";for(var e=window.MODULES||[],t={},n=0;n<e.length;++n)t[e[n]]=!0;return{list:e,map:t,isLoaded:function(e){return!0===t[e]}}}),define("app/core/templates/blankLayout",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="blankLayout">\n  <div class="blank-page-bd"></div>\n</div>\n');return __output}}),define("app/core/layouts/BlankLayout",["underscore","jquery","app/user","../View","app/core/templates/blankLayout"],function(e,t,n,r,i){"use strict";var o=r.extend({pageContainerSelector:".blank-page-bd",template:i});return o.prototype.initialize=function(){this.model={title:null,breadcrumbs:[]}},o.prototype.afterRender=function(){this.changeTitle()},o.prototype.reset=function(){this.removeView(this.pageContainerSelector)},o.prototype.setUpPage=function(e){e.title&&this.setTitle(e.title,e),e.breadcrumbs&&this.setBreadcrumbs(e.breadcrumbs,e),e.breadcrumbs||e.title||this.changeTitle()},o.prototype.setTitle=function(e,t){return null==e?this:("function"==typeof e&&(e=e.call(t,this)),Array.isArray(e)||(e=[e]),this.model.title=e,this.changeTitle(),this)},o.prototype.setBreadcrumbs=function(e,t){return null==e?this:("function"==typeof e&&(e=e.call(t)),Array.isArray(e)||(e=[e]),this.model.breadcrumbs=e.map(function(e){var t=typeof e;return"string"!==t&&"function"!==t||(e={label:e}),e}),this.model.title||this.changeTitle(),this)},o.prototype.changeTitle=function(){if(this.isRendered()){var t=Array.isArray(this.model.title)?[].concat(this.model.title):e.pluck(this.model.breadcrumbs,"label");this.broker.publish("page.titleChanged",t)}},o}),define("app/core/templates/pageLayout",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="page">\n  <div class="hd '),__append(hdHidden?"hidden":""),__append('">\n    <nav class="navbar navbar-default"></nav>\n    <div class="page-alerts"></div>\n    <div class="page-header">\n      <ul class="page-actions"></ul>\n      <ul class="page-breadcrumbs"></ul>\n    </div>\n  </div>\n  <div class="bd"></div>\n  <div class="ft">\n    <p>\n      '),__append(t("core","APP_NAME")),__append("\n      "),changelogUrl?(__append('\n      <a href="'),__append(changelogUrl),__append('">v'),__append(version),__append("</a>\n      ")):(__append("\n      v"),__append(version),__append("\n      ")),__append('\n      <br>\n      <a href="https://miracle.systems/">miracle.systems</a>\n    </p>\n  </div>\n</div>\n');return __output}}),define("app/core/layouts/PageLayout",["underscore","jquery","app/user","app/i18n","../View","app/core/templates/pageLayout"],function(e,t,n,r,i,o){"use strict";var a=i.extend({pageContainerSelector:".bd",template:o});return a.prototype.initialize=function(){this.model={id:null,className:null,actions:[],breadcrumbs:[],title:null},this.$header=null,this.$breadcrumbs=null,this.$actions=null,this.onWindowResize=e.debounce(this.onWindowResize.bind(this),1e3/15),t(window).on("resize",this.onWindowResize)},a.prototype.destroy=function(){t(window).off("resize",this.onWindowResize),this.el.ownerDocument&&this.el.ownerDocument.body.classList.remove("page"),this.$breadcrumbs=null,this.$actions=null},a.prototype.serialize=function(){return e.assign(i.prototype.serialize.call(this),{hdHidden:!!this.options.hdHidden,version:this.options.version,changelogUrl:this.options.changelogUrl})},a.prototype.afterRender=function(){this.el.ownerDocument&&this.el.ownerDocument.body.classList.add("page"),this.$header=this.$(".page-header").first(),this.$breadcrumbs=this.$(".page-breadcrumbs").first(),this.$actions=this.$(".page-actions").first(),this.changeTitle(),this.renderBreadcrumbs(),this.renderActions(),null!==this.model.id&&this.setId(this.model.id),null!==this.model.className&&this.setClassName(this.model.className)},a.prototype.reset=function(){this.setId(null),this.setClassName(null),this.model.title=null,this.$header&&(this.$header[0].style.display="none"),this.$breadcrumbs&&(this.model.breadcrumbs=[],this.$breadcrumbs.empty()),this.$actions&&(this.model.actions=[],this.$actions.empty()),this.removeView(this.pageContainerSelector)},a.prototype.setUpPage=function(e){e.pageId&&this.setId(e.pageId),e.pageClassName&&this.setClassName(e.pageClassName),e.title&&this.setTitle(e.title,e),e.breadcrumbs&&this.setBreadcrumbs(e.breadcrumbs,e),e.breadcrumbs||e.title||this.changeTitle(),e.actions&&this.setActions(e.actions,e)},a.prototype.setId=function(e){return this.isRendered()&&this.$el.attr("data-id",e),this.model.id=e,this},a.prototype.setClassName=function(e){return document.body&&(this.model.className&&document.body.classList.remove(this.model.className),this.isRendered()&&e&&document.body.classList.add(e)),this.model.className=e,this},a.prototype.setBreadcrumbs=function(e,t){return null==e?this:("function"==typeof e&&(e=e.call(t,this)),Array.isArray(e)||(e=[e]),this.model.breadcrumbs=e.map(function(e){var t=typeof e;return"string"!==t&&"function"!==t||(e={label:e,href:null}),"string"==typeof e.href&&"#"!==e.href[0]&&(e.href="#"+e.href),e}),this.$breadcrumbs&&this.renderBreadcrumbs(),this.model.page||this.changeTitle(),this)},a.prototype.setTitle=function(e,t){return null==e?this:("function"==typeof e&&(e=e.call(t,this)),Array.isArray(e)||(e=[e]),this.model.title=e,this.changeTitle(),this)},a.prototype.setActions=function(t,n){return null==t?this:("function"==typeof t&&(t=t.call(n,this)),t?(Array.isArray(t)||(t=[t]),this.model.actions=t.filter(e.isObject).map(this.prepareAction.bind(this,n)),this.$actions&&this.renderActions(),this):this)},a.prototype.onWindowResize=function(){this.adjustBreadcrumbsPosition()},a.prototype.prepareAction=function(e,t){if(t.prepared)return t;if(t.id||(t.id=""),t.idPrefix=e&&e.idPrefix||"","string"==typeof t.href){var n=t.href.charAt(0);"#"!==n&&"/"!==n&&(t.href="#"+t.href)}else t.href=null;return"string"==typeof t.icon&&(t.icon="fa-"+t.icon.split(" ").join(" fa-")),t.className||(t.className=""),t.prepared=!0,t},a.prototype.renderBreadcrumbs=function(){for(var e=this.model.breadcrumbs,t="",n=0,r=e.length;n<r;++n){var i=e[n];t+="<li>","function"==typeof i.template?t+=i.template(i,this):i.href?t+='<a href="'+i.href+'">'+i.label+"</a>":t+=i.label}this.$breadcrumbs.html(t),this.$header[0].style.display="",this.adjustBreadcrumbsPosition(),this.trigger("afterRender:breadcrumbs")},a.prototype.adjustBreadcrumbsPosition=function(){if(window.innerWidth<768){var e=(this.$(".navbar-header").outerHeight()-this.$breadcrumbs.outerHeight())/2;this.$breadcrumbs.css("top",e+"px")}},a.prototype.renderActions=function(){for(var t=this.model.actions,r={},i={},o="",a=0,s=t.length;a<s;++a){var u=t[a];if(!1!==u.visible){var c=u.privileges;if(c)if(e.isFunction(c)){if(!c(n))continue}else if(Array.isArray(c)){if(!n.isAllowedTo.apply(n,c))continue}else if(!n.isAllowedTo(c))continue;if("function"==typeof u.callback&&(r[a]=u.callback.bind(this)),"function"==typeof u.afterRender&&(i[a]=u.afterRender.bind(this)),o+='<li data-index="'+a+'">',"function"==typeof u.template)o+=u.template(u,this);else{var l="btn btn-"+(u.type||"default")+" "+e.result(u,"className");u.disabled&&(l+=" disabled");var d=e.result(u,"id");d&&"-"===d.charAt(0)&&(d=u.idPrefix+d),null===u.href?o+='<button id="'+d+'" class="'+l+'">':o+='<a id="'+d+'" class="'+l+'" href="'+u.href+'" target="'+(u.target||"_self")+'">',"string"==typeof u.icon&&(o+='<i class="fa '+u.icon+'"></i>'),u.label&&(o+="<span>"+u.label+"</span>"),o+=u.href?"</a>":"</button>"}}}this.$actions.html(o);var p=this.$actions.find("li");Object.keys(r).forEach(function(e){p.filter('li[data-index="'+e+'"]').click(t[e].callback)}),Object.keys(i).forEach(function(e){i[e](p.filter('li[data-index="'+e+'"]'),t[e])}),this.$header[0].style.display="",this.trigger("afterRender:actions")},a.prototype.changeTitle=function(){if(this.isRendered()){var t=Array.isArray(this.model.title)?[].concat(this.model.title):e.pluck(this.model.breadcrumbs,"label");this.broker.publish("page.titleChanged",t)}},a}),define("app/orderDocuments/DocumentViewerState",["underscore","../i18n","../core/Model","../data/localStorage"],function(e,t,n,r){"use strict";return n.extend({nlsDomain:"orderDocuments",defaults:function(){return{prodLine:{_id:null,name:""},station:0,prefixFilterMode:"exclusive",prefixFilter:"161 165 198",spigotCheck:!1,localOrder:{no:null,nc12:"",name:"",documents:{},confirmations:{},nc15:null,notes:[],compRels:[]},remoteOrder:{no:null,nc12:"",name:"",documents:{},confirmations:{},nc15:null,notes:[],compRels:[]},localFile:null,fileSource:null,bom:null}},initialize:function(){this.on("change:prefixFilterMode change:prefixFilter",function(){var e,t,n;this.filterNc15=(e=this.get("prefixFilterMode"),t=this.get("prefixFilter"),n=new RegExp("^("+t.replace(/ /g,"|")+")"),function(r){if(""===t)return!0;var i=n.test(r);return"inclusive"===e&&i||"exclusive"===e&&!i})}),this.on("change:prodLine",function(){window.WMES_LINE_ID=(this.get("prodLine")||{_id:null})._id}),this.on("change:station",function(){window.WMES_STATION=this.get("station")})},load:function(){var t=e.assign(this.defaults(),JSON.parse(r.getItem("WMES:DOCS")||"{}"));t.remoteOrder.confirmations||(t.remoteOrder.confirmations={}),t.localOrder.confirmations||(t.localOrder.confirmations={});var n=window.WMES_CLIENT;n&&(t.prodLine._id=n.config.line,t.prodLine.name=n.config.line.replace(/[_\s]+/g," ").replace(/~.*?$/,"").trim(),t.station=n.config.station),this.set(t)},save:function(){var e={prodLine:this.get("prodLine"),station:this.get("station"),localOrder:this.get("localOrder"),remoteOrder:this.get("remoteOrder"),prefixFilterMode:this.get("prefixFilterMode"),prefixFilter:this.get("prefixFilter"),spigotCheck:this.get("spigotCheck")};r.setItem("WMES:DOCS",JSON.stringify(e)),this.trigger("save")},filterNc15:function(){return!0},selectDocument:function(t,n){var r=this.get("localOrder"),i=this.get("remoteOrder"),o=r.no?"localOrder":"remoteOrder",a=r.no?r:i,s={localFile:null};a.documents[t]||e.isEmpty(n)||(a.documents[t]=n+"$__EXTERNAL__"),s[o]=e.defaults({nc15:t},a),this.set(s),this.save()},removeDocument:function(t){var n=this.get("localOrder"),r=this.get("remoteOrder"),i=n.no?"localOrder":"remoteOrder",o=e.defaults({},n.no?n:r),a={};o.nc15===t&&(o.nc15=null),delete o.documents[t],a[i]=o,this.set(a),this.save()},getSettings:function(){var e=this.get("prodLine");return{prodLineId:e._id,prodLineName:e.name,station:this.get("station"),prefixFilterMode:this.get("prefixFilterMode"),prefixFilter:this.get("prefixFilter"),spigotCheck:this.get("spigotCheck")}},isExternalDocument:function(){var e=this.getCurrentOrder();return!!e.nc15&&void 0===e.documents[e.nc15]},getCurrentOrder:function(){var e=this.get("localOrder");return e.no?e:this.get("remoteOrder")},getCurrentOrderInfo:function(){var e={fileSource:this.get("fileSource"),orderNo:null,orderNc12:null,orderName:null,documentNc15:null,documentName:null},n=this.getCurrentOrder(),r=this.get("localFile");if(n.no?(e.orderNo=n.no,e.orderNc12=n.nc12,e.orderName=n.name):(e.orderNo=t(this.nlsDomain,"controls:emptyOrderNo"),e.orderName=t(this.nlsDomain,"controls:emptyOrderName")),r){var i=r.name.replace(/_/g," ").replace(/\s+/g," ").trim().match(/^([0-9]+)?(.*?)?\.pdf$/i),o=(i[1]||"").trim(),a=(i[2]||"").trim();e.documentNc15=o||t(this.nlsDomain,"controls:localDocumentNc15"),e.documentName=a||t(this.nlsDomain,"controls:localDocumentName")}else{var s=n.documents[n.nc15];"ORDER"===n.nc15||"COMP_REL"===n.nc15?(e.documentNc15=s,e.documentName=""):s?(e.documentNc15=n.nc15,e.documentName=s):n.nc15?(e.documentNc15=n.nc15,e.documentName=t(this.nlsDomain,"controls:externalDocumentName")):(e.documentNc15=t(this.nlsDomain,"controls:emptyDocumentNc15"),e.documentName=t(this.nlsDomain,"controls:emptyDocumentName"))}return e},getRemoteFileUrl:function(e){return window.location.origin+"/orderDocuments/"+e},setRemoteOrder:function(e){this.setOrder("remoteOrder",e)},setLocalOrder:function(e){this.setOrder("localOrder",e)},resetLocalOrder:function(){this.set("localOrder",{no:null,nc12:"",name:"",documents:{},confirmations:{},nc15:null,notes:[],compRels:[]}),this.save()},resetExternalDocument:function(){this.isExternalDocument()&&this.selectDocument(null)},setLocalFile:function(e,t){this.set({nc15:null,localFile:{name:e,file:t}}),this.save()},resetLocalFile:function(){this.set("localFile",null),this.save()},setFileSource:function(e){this.set("fileSource",e),this.save()},setOrder:function(n,r){var i=this.get(n),o={no:r.no,nc12:r.nc12,name:r.name,documents:{},confirmations:{},nc15:null,notes:r.notes||[],compRels:r.compRels||[]};o.documents.ORDER=t(this.nlsDomain,"order"),r.hasBom&&(o.documents.BOM=t(this.nlsDomain,"bom")),r.compRels&&r.compRels.length&&(o.documents.COMP_REL=t(this.nlsDomain,"compRel")),r.hasEto&&(o.documents.ETO=t(this.nlsDomain,"eto")),delete r.documents.ETO,delete r.documents.COMP_REL,delete r.documents.BOM,delete r.documents.ORDER,e.assign(o.documents,r.documents),e.forEach(i.documents,function(e,t){/\$__.*?__$/.test(e)&&!o.documents[t]&&(o.documents[t]=e)});var a=this.get("station");if(e.forEach(r.confirmations,function(e,t){var n=e[a];o.confirmations[t]=void 0===n?"unknown":n}),o.no===i.no&&o.documents[i.nc15])o.nc15=i.nc15;else{var s=Object.keys(o.documents).filter(this.filterNc15);s.length&&(o.nc15=s[0])}this.set(n,o),i.no!==o.no&&this.trigger("change:"+n+":no",i.no,o.no)},checkEtoExistence:function(e){var t=!!this.get("localOrder").no,n=this.checkEtoInOrder(e,this.get("localOrder")),r=this.checkEtoInOrder(e,this.get("remoteOrder"));(n||r&&!t)&&this.trigger("change:documents")},checkEtoInOrder:function(n,r){if(r.nc12!==n)return!1;if(r.documents.ETO)return!1;var i=Object.keys(r.documents),o={};return r.documents.ORDER&&(o.ORDER=r.documents.ORDER,i.shift()),r.documents.BOM&&(o.BOM=r.documents.BOM,i.shift()),r.documents.COMP_REL&&(o.COMP_REL=r.documents.COMP_REL,i.shift()),o.ETO=t(this.nlsDomain,"eto"),e.forEach(i,function(e){o[e]=r.documents[e]}),r.documents=o,!0},isBomActive:function(){var e=this.get("bom");if(!e||!e.active)return!1;var t=this.getCurrentOrder();return!!t.no&&t.no===e.orderNo},isBomAvailable:function(){var e=this.get("bom");if(!e)return!1;var t=this.getCurrentOrder();return!!t.no&&t.no===e.orderNo},getOverallConfirmationStatus:function(){var e=this.getCurrentOrder().confirmations,t=Object.keys(e);if(!t.length)return"confirmed";for(var n=0;n<t.length;++n){var r=e[t[n]];if("unknown"===r||"unconfirmed"===r)return r}return"confirmed"},isConfirmableDocumentSelected:function(){return this.isConfirmableDocument(this.getCurrentOrder().nc15)},isConfirmedDocumentSelected:function(){var e=this.getCurrentOrder();return"confirmed"===e.confirmations[e.nc15]},isConfirmableDocument:function(e){var t=this.getCurrentOrder().confirmations[e];return void 0!==t&&"ignored"!==t},isDocumentConfirmed:function(e){return"confirmed"===this.getCurrentOrder().confirmations[e]},getFirstUnconfirmedDocument:function(){for(var e=this.getCurrentOrder().confirmations,t=Object.keys(e),n=0;n<t.length;++n){var r=t[n],i=e[r];if("unknown"===i||"unconfirmed"===i)return r}return null},setDocumentConfirmations:function(t,n){var r=!1;[this.get("localOrder"),this.get("remoteOrder")].forEach(function(i){i.no!==t||e.isEqual(i.confirmations,n)||(i.confirmations=n,r=!0)}),r&&(this.trigger("change:confirmations"),this.save())},handleConfirmation:function(t){var n=!1;[this.get("localOrder"),this.get("remoteOrder")].forEach(function(r){if(r.no===t.orderNo){var i=r.confirmations;if(void 0!==i[t.nc15]){var o=e.clone(i);o[t.nc15]="confirmed",e.isEqual(i,o)||(r.confirmations=o,n=!0)}}}),n&&(this.trigger("change:confirmations"),this.save())},isIgnored:function(e){return"ignored"===this.getCurrentOrder().confirmations[e]}})}),define("app/data/prodLog",["underscore","jquery","app/i18n","app/user","app/time","app/broker","app/socket","app/data/localStorage","app/updater/index"],function(e,t,n,r,i,o,a,s,u){"use strict";var c=window.INSTANCE_ID,l="PRODUCTION:LOG",d="PRODUCTION:LOG:SYNCING",p="PRODUCTION:LOCK",f=null,h=!1,m=null,g=null,y=e.debounce(b,33);function b(e){if(h&&null===f&&!u.isRestarting()&&null!==(f=s.getItem(l)||null)){var n=s.getItem(d)||null;null!==n&&(f=n+"\n"+f),s.setItem(d,f),s.setItem(l,""),s.removeItem(l),o.publish("production.syncing");var r=t.ajax({method:"POST",url:"/prodLogEntries",contentType:"text/plain; charset=UTF-8",data:f,timeout:1e4});r.fail(function(t){var n=s.getItem(l)||null;n=null===n?f:f+"\n"+n,s.setItem(l,n),s.setItem(d,""),s.removeItem(d),f=null,o.publish("production.synced",{message:t.responseText}),e=e?e+1:1,setTimeout(b,Math.min(1e3*e,2e4),e)}),r.done(function(e){s.setItem(d,""),s.removeItem(d),f=null,o.publish("production.synced",null),e&&e.lock&&o.publish("production.locked",e.lock),setTimeout(b,100)})}}function v(e,t){return e.getTime().toString(36)+function(e){for(var t=0,n=0,r=e.length;n<r;++n)t=(t<<5)-t+e.charCodeAt(n)|0;return t}(t||"").toString(36)+Math.round(1e16*Math.random()).toString(36)}function w(e,t,n,o){return o||(o=i.getMoment().toDate()),{_id:v(o,e.id),instanceId:c,secretKey:e.getSecretKey(),type:t,data:n||{},createdAt:o,creator:r.getInfo(),division:e.get("division"),subdivision:e.get("subdivision"),mrpControllers:e.get("mrpControllers"),prodFlow:e.get("prodFlow"),workCenter:e.get("workCenter"),prodLine:e.prodLine.id,station:e.prodLine.station,prodShift:e.id,prodShiftOrder:e.prodShiftOrder.id||null}}return o.subscribe("socket.connected",setTimeout.bind(null,b,1337)),window.addEventListener("unload",function(){if(null===f)return;var e=s.getItem(l);null===e?s.setItem(l,f):s.setItem(l,f+"\n"+e);f=null,s.setItem(d,""),s.removeItem(d),o.publish("production.synced",{message:"DISCONNECT"})}),{generateId:v,isEnabled:function(){return h},enable:function(e){if(h)e&&(m=setTimeout(function(){m=null,e.resolve()},1));else if(e){g&&clearInterval(g),m&&clearTimeout(m),window.removeEventListener("storage",n),window.addEventListener("storage",n);var t=window.parent!==window||"development"===window.ENV;g=setInterval(function(){s.setItem(p,JSON.stringify({instanceId:c,time:Date.now()}))},t?333333:333),m=setTimeout(function(){m=null,e&&"pending"===e.state()&&(h=!0,setTimeout(b,1e3),e.resolve())},t?1:2e3)}else h=!0;function n(t){if(t.key===p){var n=JSON.parse(t.newValue);n.instanceId!==c&&(e?(e.reject(),e=null):o.publish("production.duplicateDetected",{thisInstanceId:c,thatInstanceId:n.instanceId}))}}},disable:function(){h&&(m&&(clearTimeout(m),m=null),g&&(clearInterval(g),g=null),h=!1)},isSyncing:function(){return null!==f},create:w,record:function(e,t,n,r){if(!e.isLocked()){if(!h)throw new Error("Production log is disabled!");var i,o="object"==typeof t?t:w(e,t,n,r),a=s.getItem(l);i=null===a?JSON.stringify(o):a+"\n"+JSON.stringify(o),s.setItem(l,i),e.saveLocalData(),y()}}}}),define("app/production/templates/bomChecker",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<table class="production-bomChecker">\n  <tbody id="'),__append(idPrefix),__append('-components"></tbody>\n</table>\n');return __output}}),define("app/production/templates/bomCheckerRow",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<tr class="production-bomChecker-component" data-id="'),__append(component._id),__append('" data-status="'),__append(component.status),__append('">\n  <td class="production-bomChecker-icon"><i class="fa '),__append(component.icon),__append('"></i></td>\n  <td>\n    '),"000000000000"!==component.nc12&&(__append('\n    <span class="production-bomChecker-nc12">'),__append(component.nc12),__append("</span>\n    ")),__append('\n    <span class="production-bomChecker-description">'),__append(escapeFn(component.description)),__append('</span>\n  </td>\n  <td>\n    <span class="production-bomChecker-scanBuffer">'),__append(escapeFn(component.scanInfo.raw)),__append('</span>\n    <span class="production-bomChecker-message">'),__append(component.message),__append('</span>\n    <a class="production-bomChecker-reset" href="#"></a>\n  </td>\n</tr>\n');return __output}}),define("app/production/views/BomCheckerDialogView",["jquery","app/i18n","app/viewport","app/core/View","app/production/templates/bomChecker","app/production/templates/bomCheckerRow"],function(e,t,n,r,i,o){"use strict";return r.extend({snManagerMode:"bom",template:i,dialogClassName:"production-modal production-bomChecker-modal",events:{"click .production-bomChecker-reset":function(e){return this.updateComponent(this.components[this.$(e.target).closest("tr").attr("data-id")],"todo"),!1}},initialize:function(){var e=this.model.orderData,n=this.model.logEntry.data;this.components=[{_id:0,status:n.serialNo?"success":"todo",nc12:e.no,description:e.description,single:!0,unique:!0,patternInfo:{pattern:function(e){var t=e.match(/([A-Z0-9]{4}\.([0-9]{9})\.([0-9]{4}))$/);return t&&/^[A-Z0-9]+\.[0-9]+\.[0-9]+\.[A-Z0-9]+$/.test(e)&&(t=null),t},nc12:[2],sn:[3]},scanInfo:{raw:n.serialNo?n._id:"?",nc12:e.no,sn:n.serialNo},icon:n.serialNo?"fa-thumbs-up":"fa-question",message:t("production","bomChecker:message:"+(n.serialNo?"success":"todo")+":sn")}].concat(this.model.components.map(function(e,n){return{_id:n+1,status:"todo",nc12:e.nc12,description:e.description,single:e.single,unique:e.unique,patternInfo:{pattern:new RegExp(e.labelPattern),nc12:e.nc12Index,sn:e.snIndex},scanInfo:{raw:"?",nc12:"",sn:""},icon:"fa-question",message:t("production","bomChecker:message:todo")}}))},afterRender:function(){var e=this,t=[];e.components.forEach(function(n){t.push(e.renderPartial(o,{component:n}))}),e.$id("components").append(t)},onSnScanned:function(e){for(var t=e._id,n=0;n<this.components.length;++n){var r=this.components[n],i="function"==typeof r.patternInfo.pattern?r.patternInfo.pattern(t):t.match(r.patternInfo.pattern);if(i){if(r.unique&&r.scanInfo.raw===t)return this.updateComponent(r,"todo");if(r.single||"success"!==r.status&&"checking"!==r.status)return r.scanInfo.raw=t,0===r._id?(r.scanInfo.nc12=e.orderNo,r.scanInfo.sn=e.serialNo):(r.scanInfo.nc12=r.nc12,r.scanInfo.sn="",r.patternInfo.nc12.forEach(function(e){i[e]&&(r.scanInfo.nc12=i[e])}),r.patternInfo.sn.forEach(function(e){i[e]&&(r.scanInfo.sn=i[e])})),this.handleComponent(r)}}this.snMessage.show(e,"error","BOM_CHECKER:NO_MATCH")},handleComponent:function(e){var n=this;if(e.scanInfo.nc12!==e.nc12)return n.updateComponent(e,"failure",t("production","bomChecker:message:nc12",{nc12:e.nc12}));if(e.unique){n.updateComponent(e,"checking");var r=n.ajax({method:"POST",url:"/production/checkAnySerialNumber",data:JSON.stringify({sn:0===e._id?e.scanInfo.raw:e.scanInfo.nc12+":"+e.scanInfo.sn}),timeout:2e4});r.fail(function(){n.updateComponent(e,"failure")}),r.done(function(r){r?n.updateComponent(e,"failure",t("production","bomChecker:message:used"+(0===e._id?":sn":""),{psn:r})):i()})}else i();function i(){n.updateComponent(e,"success"),n.timers&&(clearTimeout(n.timers.checkAll),n.timers.checkAll=setTimeout(n.checkAll.bind(n),333))}},checkAll:function(){if(!this.components.filter(function(e){return"success"!==e.status}).length){var e=this.model.logEntry.data;e.scannedAt=new Date,e.bom=[],this.components.forEach(function(t){0===t._id?(e.orderNo=t.scanInfo.nc12,e.serialNo=t.scanInfo.sn):e.bom.push(t.scanInfo.nc12+":"+t.scanInfo.sn)}),this.trigger("checked",this.model.logEntry)}},updateComponent:function(e,n,r){switch(n&&(e.status=n),e.status){case"checking":e.icon="fa-spinner fa-spin";break;case"failure":e.icon="fa-thumbs-down";break;case"success":e.icon="fa-thumbs-up";break;case"todo":e.icon="fa-question",e.scanInfo.raw="?"}e.message=r||t("production","bomChecker:message:"+e.status+(0===e._id?":sn":"")),0===e._id&&(this.model.logEntry.data._id=e.scanInfo.raw,this.model.logEntry.data.serialNo=e.scanInfo.sn),this.$('tr[data-id="'+e._id+'"]').replaceWith(this.renderPartial(o,{component:e}))}})}),define("app/production/templates/snMessage",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div id="snMessage" class="production-snMessage hidden">\n  <p id="snMessage-text" class="production-snMessage-text">Lorem ipsum dolor sit amet...</p>\n  <div class="production-snMessage-props">\n    '),["scannedValue","orderNo","serialNo"].forEach(function(e){__append('\n      <p class="production-snMessage-prop">\n        <span class="production-snMessage-prop-name">'),__append(t("production","snMessage:"+e)),__append('</span>\n        <span id="snMessage-'),__append(e),__append('" class="production-snMessage-prop-value">?</span>\n      </p>\n    ')}),__append("\n  </div>\n</div>\n");return __output}}),define("app/nls/production",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r))in o?o[n]:o.other},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"breadcrumbs:base":function(e){return"Operator"},"breadcrumbs:settings":function(e){return"Settings"},"duplicate:title":function(e){return"Duplicate operator form"},"duplicate:message":function(e){return"Detected another operator form already running.<br>Close all other operator forms and click the button below to reload the form in the current window."},"duplicate:button":function(e){return"Reload operator form"},"msg:shiftChange":function(e){return"New shift!"},"msg:locked":function(e){return"Production line was deactivated!"},"controls:dashboard":function(e){return"Go to dashboard"},"controls:lock":function(e){return"Lock the line"},"controls:unlock":function(e){return"Unlock the line"},"controls:locked":function(e){return"Line locked"},"controls:unlocked":function(e){return"Line unlocked"},"controls:sync":function(e){return"Server communication indicator"},"controls:addNearMiss":function(e){return"Add near miss"},"controls:addSuggestion":function(e){return"Add suggestion"},"controls:addObservation":function(e){return"Add observation"},"controls:msg:sync:noConnection":function(e){return"Cannot unlock: no connection to the server."},"controls:msg:sync:remoteError":function(e){return"Cannot unlock: failed to get the key."},"controls:msg:sync:success":function(e){return"Line unlocked successfully."},"controls:msg:popup":function(e){return"The popup window has been blocked."},"controls:mor":function(e){return"Matrix of responsibility"},"controls:componentLabels":function(e){return"Component label printing"},"unlockDialog:title:unlock":function(e){return"Production line activation"},"unlockDialog:title:lock":function(e){return"Production line deactivation"},"unlockDialog:message:unlock":function(e){return"To activate the <em>"+t.v(e,"prodLine")+"</em> production line, enter login and password of a user with the <em>WMES Operator client activation</em> privilege. Production line cannot be activated, if it is currently connected to the server from another computer."},"unlockDialog:message:lock":function(e){return"To deactivate the <em>"+t.v(e,"prodLine")+"</em> production line, enter login and password of a user with the <em>WMES Operator client activation</em> privilege."},"unlockDialog:login":function(e){return"Login"},"unlockDialog:password":function(e){return"Password"},"unlockDialog:prodLine":function(e){return"Production line"},"unlockDialog:station":function(e){return"Workstation number"},"unlockDialog:unlock":function(e){return"Activate production line"},"unlockDialog:lock":function(e){return"Deactivate production line"},"unlockDialog:error:UNLOCK_FAILURE":function(e){return"Production line activation failed."},"unlockDialog:error:LOCK_FAILURE":function(e){return"Production line deactivation failed."},"unlockDialog:error:INVALID_PROD_LINE":function(e){return"Invalid production line."},"unlockDialog:error:NO_PRIVILEGES":function(e){return"Insufficient privileges."},"unlockDialog:error:INPUT":function(e){return"Invalid credentials."},"unlockDialog:error:MANY_MATCHES":function(e){return"Found many users with the same login."},"unlockDialog:error:UNSAFE_PASSWORD":function(e){return"Password cannot be equal to the login. Change your password."},"unlockDialog:error:ALREADY_UNLOCKED":function(e){return"Production line is currently running on a different computer."},"unlockDialog:error:DEACTIVATED":function(e){return"Production line is deactivated."},"section:data":function(e){return"Production data"},"section:history":function(e){return"History"},"section:quantities":function(e){return"Quantities done"},"section:downtimes":function(e){return"Downtimes"},"section:isa":function(e){return"Storage area"},"section:taktTime":function(e){return"Cycle time"},"property:currentTime":function(e){return"Current time"},"property:shift":function(e){return"Shift"},"property:orgUnit":function(e){return"Subdivision"},"property:master":function(e){return"Master"},"property:master:change":function(e){return"(change)"},"property:master:noData:locked":function(e){return"none"},"property:master:noData:unlocked":function(e){return"(change master)"},"property:leader":function(e){return"Leader"},"property:leader:change":function(e){return"(change)"},"property:leader:noData:locked":function(e){return"none"},"property:leader:noData:unlocked":function(e){return"(change leader)"},"property:operator":function(e){return"Operator"},"property:operator:change":function(e){return"(change)"},"property:operator:noData:locked":function(e){return"none"},"property:operator:noData:unlocked":function(e){return"(change operator)"},"property:orderNo":function(e){return"Order no"},"property:orderNo:change":function(e){return"(change)"},"property:nc12":function(e){return"12NC"},"property:nc12:change":function(e){return"(change)"},"property:productName":function(e){return"Product name"},"property:operationName":function(e){return"Operation name"},"property:taktTime":function(e){return"Takt [s]"},"property:taktTime:checkSn":function(e){return"(check SN)"},"property:lastTaktTime":function(e){return"Cycle [s]"},"property:avgTaktTime":function(e){return"Avg. Cycle [s]"},"property:workerCountSap":function(e){return"Worker count as per SAP"},"property:createdAt":function(e){return"Started at"},"property:totalQuantityDone":function(e){return"Qty done in order"},"property:quantityDone":function(e){return"Quantity done"},"property:quantityDone:change":function(e){return"(change quantity)"},"property:workerCount":function(e){return"Worker count"},"property:workerCount:change:data":function(e){return"(change count)"},"property:workerCount:change:noData":function(e){return"(set count)"},"action:newOrder":function(e){return"New order"},"action:nextOrder":function(e){return"<i class='fa fa-forward' title='Order queue'></i>"},"action:continueOrder":function(e){return"Continue order"},"action:startDowntime":function(e){return"Downtime"},"action:startBreak":function(e){return"Break"},"action:endDowntime":function(e){return"End downtime"},"action:endWork":function(e){return"End work"},"action:emptyPallet":function(e){return"Empty pallet"},"action:fullPallet":function(e){return"Pallet"},"quantities:column:time":function(e){return"Time"},"quantities:column:planned":function(e){return"Planned"},"quantities:column:actual":function(e){return"Actual"},"quantities:unit":function(e){return"PCE"},"quantities:change":function(e){return"(change)"},"quantities:newValuePlaceholder":function(e){return"New quantity..."},"quantityEditor:title":function(e){return"Quantity done in an hour"},"quantityEditor:label:hour":function(e){return"Time:"},"quantityEditor:label:value":function(e){return"Quantity done:"},"quantityEditor:submit":function(e){return"Set quantity done"},"quantityEditor:cancel":function(e){return"Cancel"},"quantityEditor:maxQuantity":function(e){return"Value cannot be greater than "+t.v(e,"max")+"."},"personnelPicker:title:master":function(e){return"Changing master"},"personnelPicker:title:leader":function(e){return"Changing leader"},"personnelPicker:title:operator":function(e){return"Changing operator"},"personnelPicker:submit":function(e){return"Set employee"},"personnelPicker:cancel":function(e){return"Cancel"},"personnelPicker:recent":function(e){return"Employees working on this shift recently:"},"personnelPicker:matching":function(e){return"Matching employees:"},"personnelPicker:tooShort":function(e){return"Enter at least three initial letters of the employee's last name."},"personnelPicker:notFound":function(e){return"No matching employees were found."},"personnelPicker:online:label":function(e){return"Employee:"},"personnelPicker:offline:label":function(e){return"Employee:"},"personnelPicker:offline:warning":function(e){return"No connection to the server. You can only enter the employee's personnel ID."},"personnelPicker:embedded:label":function(e){return"Search employees by last name:"},"multiPersonnelPicker:title:operator":function(e){return"Changing operators"},"multiPersonnelPicker:submit":function(e){return"Set employees"},"multiPersonnelPicker:cancel":function(e){return"Cancel"},"multiPersonnelPicker:pick":function(e){return"Add employee"},"multiPersonnelPicker:back":function(e){return"Back to list"},"multiPersonnelPicker:recent":function(e){return"Employees working on this shift recently:"},"multiPersonnelPicker:matches":function(e){return"Matching employees:"},"multiPersonnelPicker:tooShort":function(e){return"Enter at least three initial letters of the employee's last name."},"multiPersonnelPicker:notFound":function(e){return"No matching employees were found."},"multiPersonnelPicker:empty":function(e){return"No employees were set for the current shift yet."},"multiPersonnelPicker:picked":function(e){return"Selected employees:"},"multiPersonnelPicker:online:label":function(e){return"New employee:"},"multiPersonnelPicker:offline:label":function(e){return"New employee's personnel ID:"},"multiPersonnelPicker:offline:warning":function(e){return"No connection to the server. You can only enter the employee's personnel ID."},"multiPersonnelPicker:embedded:label":function(e){return"Search employees by last name:"},"orderQueue:title":function(e){return"Setting orders queue"},"orderQueue:message:order":function(e){return"Enter an order number and select an operation to enqueue a next order."},"orderQueue:message:queue":function(e){return"Below is the current orders queue."},"orderQueue:message:empty":function(e){return"The orders queue is empty."},"orderQueue:submit":function(e){return"Set orders queue"},"orderQueue:enqueue":function(e){return"Add to queue"},"orderQueue:clear":function(e){return"Clear queue"},"orderQueue:cancel":function(e){return"Cancel"},"orderQueue:order:label":function(e){return"Order"},"orderQueue:order:placeholder":function(e){return"Search the order by its number..."},"orderQueue:operation:label":function(e){return"Operation"},"orderQueue:operation:placeholder":function(e){return"Choose the operation..."},"newOrderPicker:title":function(e){return"Starting a new order"},"newOrderPicker:title:replacing":function(e){return"Ending the current order"},"newOrderPicker:title:correcting":function(e){return"Correcting the current order"},"newOrderPicker:order:label:no":function(e){return"New order's number:"},"newOrderPicker:order:label:nc12":function(e){return"New order's 12NC:"},"newOrderPicker:order:placeholder:no":function(e){return"Enter the new order's no..."},"newOrderPicker:order:placeholder:nc12":function(e){return"Enter the new order's 12NC..."},"newOrderPicker:order:tooShort":function(e){return"Enter a full, 9-digit order number."},"newOrderPicker:order:notFound":function(e){return"The specified order doesn't exist."},"newOrderPicker:operation:label:online":function(e){return"Operation:"},"newOrderPicker:operation:label:offline":function(e){return"Operation number:"},"newOrderPicker:operation:placeholder":function(e){return"Choose the new order's operation..."},"newOrderPicker:submit":function(e){return"Start order"},"newOrderPicker:submit:replacing":function(e){return"Start order"},"newOrderPicker:submit:correcting":function(e){return"Correct order"},"newOrderPicker:cancel":function(e){return"Cancel"},"newOrderPicker:msg:invalidOrderId:no":function(e){return"Invalid order no."},"newOrderPicker:msg:invalidOrderId:nc12":function(e){return"Invalid 12NC."},"newOrderPicker:msg:invalidOperationNo":function(e){return"Invalid operation no."},"newOrderPicker:msg:searchFailure":function(e){return"Searching orders failed."},"newOrderPicker:msg:emptyOrder":function(e){return"Order is required."},"newOrderPicker:msg:emptyOperation":function(e){return"Operation is required."},"newOrderPicker:msg:noOperations":function(e){return"The selected order doesn't have any operations. You can manually enter a 4-digit operation no."},"newOrderPicker:msg:orderDeleted":function(e){return"Order deleted."},"newOrderPicker:msg:orderCompleted":function(e){return"Order completed."},"newOrderPicker:online:info:no":function(e){return"Enter the order no and choose an operation from the list to start a new order."},"newOrderPicker:online:info:nc12":function(e){return"Enter the order's 12NC and choose an operation from the list to start a new order."},"newOrderPicker:offline:warning:no":function(e){return"Enter the order no and operation no to start a new order."},"newOrderPicker:offline:warning:nc12":function(e){return"Enter the order's 12NC and operation no to start a new order."},"newOrderPicker:checkData:warning":function(e){return"Starting a new order will finish the current order. Make sure that the <em>Quantity done</em> and <em>Worker count</em> of the current order have correct values, because after starting a new order, you won't be able to change them."},"newOrderPicker:quantityDone":function(e){return"Quantity done in the finished order:"},"newOrderPicker:workerCount":function(e){return"Worker count in the finished order:"},"newOrderPicker:newWorkerCount":function(e){return"Worker count:"},"newOrderPicker:spigot:nc12":function(e){return"Spigot component 12NC"},"newOrderPicker:spigot:placeholder":function(e){return"Scan the component's bar code..."},"newOrderPicker:spigot:invalid":function(e){return"Invalid component 12NC!"},"error:min":function(e){return"Value cannot be less than "+t.v(e,"min")+"."},"error:max":function(e){return"Value cannot be greater than "+t.v(e,"max")+"."},"downtimePicker:title:start":function(e){return"Starting a new downtime"},"downtimePicker:title:edit":function(e){return"Correcting a downtime"},"downtimePicker:submit:start":function(e){return"Start downtime"},"downtimePicker:submit:edit":function(e){return"Correct downtime"},"downtimePicker:cancel":function(e){return"Cancel"},"downtimePicker:reason:label":function(e){return"Downtime reason:"},"downtimePicker:reason:placeholder":function(e){return"Choose a downtime reason..."},"downtimePicker:reasonFilter:placeholder":function(e){return"Downtime reason..."},"downtimePicker:reasonComment:label":function(e){return"Comment:"},"downtimePicker:reasonComment:placeholder":function(e){return"Optional, additional info..."},"downtimePicker:aor:label":function(e){return"Area of responsibility:"},"downtimePicker:aor:placeholder":function(e){return"Choose an area of responsibility..."},"downtimePicker:aorFilter:placeholder":function(e){return"Area of responsibility..."},"downtimePicker:msg:emptyReason":function(e){return"Downtime reason is required."},"downtimePicker:msg:emptyAor":function(e){return"Area of responsibility is required."},"downtimePicker:startedAt":function(e){return"Started at"},"downtimePicker:startedAt:now":function(e){return"Now"},"prodDowntime:time":function(e){return"Time"},"prodDowntime:reason":function(e){return"Downtime reason"},"prodDowntime:aor":function(e){return"Area of responsibility"},"endDowntimeDialog:title":function(e){return"Ending downtime confirmation"},"endDowntimeDialog:message":function(e){return"<p>Are you sure you want to end the current downtime?</p>"},"endDowntimeDialog:yes":function(e){return"End the downtime"},"endDowntimeDialog:no":function(e){return"Do not end the downtime"},"continueOrderDialog:title":function(e){return"Order continuation confirmation"},"continueOrderDialog:message":function(e){return"<p>Are you sure you want to start the currently chosen order?</p>"},"continueOrderDialog:yes":function(e){return"Continue the order"},"continueOrderDialog:no":function(e){return"Do not continue the order"},"endWorkDialog:title":function(e){return"Ending work confirmation"},"endWorkDialog:warning":function(e){return"Ending work will finish "+t.s(e,"downtime",{true:"the current downtime and order",other:"the current order"})+". Make sure that the following fields have correct values, because after ending the work, you won't be able to change them."},"endWorkDialog:quantitiesDone":function(e){return"Quantity done in the "+t.v(e,"hourRange")+" hour:"},"endWorkDialog:quantityDone":function(e){return"Quantity done in the current order:"},"endWorkDialog:workerCount":function(e){return"Worker count in the current order:"},"endWorkDialog:yes":function(e){return"End work"},"endWorkDialog:no":function(e){return"Do not end work"},"endWorkDialog:spigot:nc12":function(e){return"Spigot component 12NC"},"endWorkDialog:spigot:placeholder":function(e){return"Scan the component's bar code..."},"endWorkDialog:spigot:invalid":function(e){return"Invalid component 12NC!"},"propertyEditorDialog:title:quantityDone":function(e){return"Changing quantity done"},"propertyEditorDialog:label:quantityDone":function(e){return"Quantity done in the current order"},"propertyEditorDialog:title:workerCount":function(e){return"Changing worker count"},"propertyEditorDialog:label:workerCount":function(e){return"Worker count in the current order"},"propertyEditorDialog:yes":function(e){return"Set value"},"propertyEditorDialog:no":function(e){return"Cancel"},"unload:downtime":function(e){return"Are you sure you want to close the browser leaving the production line in a state of downtime?\n\nIf you close the browser without Ending work, then the current downtime will be finished at the end of the current shift!"},"unload:order":function(e){return"Are you sure you want to close the browser leaving the production line in a state of working?\n\nIf you close the browser without Ending work, then the current order will be finished at the end of the current shift!"},"isa:header":function(e){return"ISA"},"isa:pickup":function(e){return"Pallet<br>pickup"},"isa:deliver":function(e){return"Pallet<br>delivery"},"isa:deliver:specific":function(e){return"Delivery <span class='production-isa-selectedQty'>"+t.v(e,"qty")+"x</span><span class='production-isa-selectedPalletKind'>"+t.v(e,"palletKind")+"</span>"},"isa:deliver:title":function(e){return"Pallet delivery"},"isa:deliver:qty":function(e){return"Pallet quantity"},"isa:deliver:palletKind":function(e){return"Pallet kind"},"isa:deliver:submit":function(e){return"Request delivery"},"isa:deliver:cancel":function(e){return"Cancel"},"isa:cancel:title":function(e){return"Request cancel confirmation"},"isa:cancel:message":function(e){return"<p>Are you sure you want to cancel the chosen pallet "+t.v(e,"requestType")+" request?</p>"},"isa:cancel:yes":function(e){return"Cancel request"},"isa:cancel:no":function(e){return"Leave active"},"isa:status:idle":function(e){return"No request"},"isa:status:new":function(e){return"Waiting for acceptance"},"isa:status:accepted":function(e){return"In progress"},"spigotChecker:title":function(e){return"Checking the Spigot component"},"spigotChecker:name:label":function(e){return"Component name:"},"spigotChecker:nc12:label":function(e){return"Component 12NC:"},"spigotChecker:nc12:placeholder":function(e){return"Scan the component's bar code..."},"spigotChecker:nc12:invalid":function(e){return"Invalid component 12NC!"},"spigotChecker:submit":function(e){return"Check component"},"spigotChecker:endWork":function(e){return"Close order"},"spigotChecker:success":function(e){return"The scanned component is valid."},"autoDowntimes:remainingTime":function(e){return"starts in "+t.v(e,"time")},"snMessage:scannedValue":function(e){return"Scanned value"},"snMessage:orderNo":function(e){return"Order no"},"snMessage:serialNo":function(e){return"Serial no"},"snMessage:UNKNOWN_CODE":function(e){return"The scanned code does not contain a serial number."},"snMessage:INVALID_LINE":function(e){return"Invalid production line."},"snMessage:INVALID_LINE_STATE":function(e){return"Invalid production shift or order."},"snMessage:INVALID_STATE:null":function(e){return"Invalid production shift."},"snMessage:INVALID_STATE:idle":function(e){return"Begin an order to enable the SN scanning."},"snMessage:INVALID_STATE:downtime":function(e){return"Finish the downtime to enable SN scanningthe ."},"snMessage:INVALID_ORDER":function(e){return"Scanned SN from a wrong order."},"snMessage:ALREADY_USED":function(e){return"Scanned SN is already registered."},"snMessage:CHECKING":function(e){return"<span class='fa fa-spinner fa-spin'></span><br>Checking the serial number..."},"snMessage:SERVER_FAILURE":function(e){return"Remote server error while checking the serial number."},"snMessage:OFFLINE":function(e){return"Failed to connect to the server."},"snMessage:SHIFT_NOT_FOUND":function(e){return"Line shift not found."},"snMessage:ORDER_NOT_FOUND":function(e){return"Line order not found."},"snMessage:STANDARD_LABEL":function(e){return"The virtual SN cannot be used in this order."},"snMessage:SUCCESS":function(e){return"Serial number successfully registered."},"snMessage:MAX_TOTAL":function(e){return"Order completed."},"snMessage:MAX_LINE":function(e){return"Line order completed."},"bomChecker:title":function(e){return"Checking components"},"bomChecker:message:todo":function(e){return"Scan the component label."},"bomChecker:message:checking":function(e){return"Checking the component..."},"bomChecker:message:success":function(e){return"Correct component!"},"bomChecker:message:failure":function(e){return"Failed to check the component."},"bomChecker:message:todo:sn":function(e){return"Scan the product label."},"bomChecker:message:checking:sn":function(e){return"Checking the serial number..."},"bomChecker:message:success:sn":function(e){return"Correct serial number!"},"bomChecker:message:failure:sn":function(e){return"Failed to check the serial number."},"bomChecker:message:nc12":function(e){return"12NC mismatch: "+t.v(e,"nc12")},"bomChecker:message:used":function(e){return"Code already used in: "+t.v(e,"psn")},"bomChecker:message:used:sn":function(e){return"Serial number already used."},"snMessage:BOM_CHECKER:NO_MATCH":function(e){return"Code does not match any component."},"taktTime:check:button":function(e){return"Check<br>serial number"},"taktTime:check:title":function(e){return"Serial number checking"},"taktTime:check:orderNo":function(e){return"Order no"},"taktTime:check:serialNo":function(e){return"Item no"},"taktTime:check:submit":function(e){return"Check serial number"},"taktTime:check:list":function(e){return"Show serial number list"},"taktTime:check:help":function(e){return"Specify an order no and an item no of the serial number you would like to check. The serial number to check may also be scanned."},"taktTime:check:checking":function(e){return"<i class='fa fa-spinner fa-spin'></i> Checking the serial number..."},"taktTime:check:local":function(e){return"The specified serial number was already scanned on this production line."},"taktTime:check:remote":function(e){return"The specified serial number was already scanned on line: "+t.v(e,"prodLine")},"taktTime:check:notFound":function(e){return"The specified serial number was not scanned yet."},"taktTime:list:title":function(e){return"List of scanned serial numbers"},"execution:todo":function(e){return"Plan"},"execution:done":function(e){return"Done"},"execution:order:label":function(e){return t.v(e,"orderId")+", "+t.v(e,"quantityDone")+" PCE"},"execution:order:orderNo":function(e){return"Order"},"execution:order:operationNo":function(e){return"Operation"},"execution:order:startedAt":function(e){return"Started at"},"execution:order:finishedAt":function(e){return"Finished at"},"execution:order:quantityDone":function(e){return"Quantity"},"execution:order:workerCount":function(e){return"Worker count"},"execution:downtime:label":function(e){return t.v(e,"reason")},"execution:downtime:reason":function(e){return"Reason"},"execution:downtime:aor":function(e){return"AOR"},"execution:downtime:startedAt":function(e){return"Started at"},"execution:downtime:finishedAt":function(e){return"Finished at"},"ft:warning":function(e){return"Order can be finished only by an authorized person, because all frame tests have not been performed. Inform your supervisor."},"ft:login":function(e){return"Login"},"ft:password":function(e){return"Password"},"ft:invalidCredentials":function(e){return"Invalid credentials."},"ft:noPrivileges":function(e){return"User doesn't have the required privileges."},"ft:requestFailure":function(e){return"Failed to check the authorization."},"componentLabels:title":function(e){return"Component label printing"},"componentLabels:orderNo":function(e){return"Order number"},"componentLabels:operationNo":function(e){return"Operation number"},"componentLabels:labelQty":function(e){return"Label quantity"},"componentLabels:shiftX":function(e){return"X shift"},"componentLabels:shiftY":function(e){return"Y shift"},"componentLabels:componentCode":function(e){return"Component"},"componentLabels:noComponents":function(e){return"No matching components."},"componentLabels:submit":function(e){return"Print labels"},"componentLabels:test":function(e){return"Print test label"},"componentLabels:cancel":function(e){return"Cancel"},"componentLabels:error":function(e){return"Printing failed."},"componentLabels:error:PRINTER_NOT_FOUND":function(e){return"Printer not found."},"componentLabels:error:INVALID_PRINTER":function(e){return"Invalid printer."},"settings:tab:operator":function(e){return"Operator"},"settings:tab:downtimes":function(e){return"Downtimes"},"settings:tab:spigot":function(e){return"Spigot check"},"settings:tab:bomChecker":function(e){return"Component checking"},"settings:tab:componentLabels":function(e){return"Component labels"},"settings:tab:taktTime":function(e){return"Takt Time"},"settings:initialDowntimeWindow":function(e){return"Time to start the initial downtime on a shift [min]"},"settings:rearmDowntimeReason":function(e){return"Downtime reason with Spigot check"},"settings:spigotLines":function(e){return"Production lines with Spigot check"},"settings:spigotPatterns":function(e){return"Select Spigot component matching one of the following patterns"},"settings:spigotNotPatterns":function(e){return"Ignore the selected component, if it also matches any of the following patterns"},"settings:spigotFinish":function(e){return"Force checking of the Spigot during order finish"},"settings:spigotGroups":function(e){return"12NC groups of Spigots"},"settings:spigotGroups:help":function(e){return"Assignment of Spigot component 12NCs to 12NCs scanned by the Operators. Required format: <code>$scanned_12NC: $spigot_12NC_1, $spigot_12NC_2, ...</code> (each scanned 12NC must be on a separate line)."},"settings:spigotInsertGroups":function(e){return"12NC groups of Inserts"},"settings:spigotInsertGroups:help":function(e){return"Assignment of product 12NCs to 12NCs scanned by the Operators. Required format: <code>$scanned_12NC: $product_NC12_1, $product_NC12_2, ...</code> (each scanned 12NC must be on a separate line)."},"settings:taktTime:enabled":function(e){return"Serial number scanning"},"settings:taktTime:ignoredLines":function(e){return"Ignore scanning on the following lines:"},"settings:taktTime:ignoredDowntimes":function(e){return"Ignore the following downtime reasons:"},"settings:taktTime:last":function(e){return"Show Cycle Time of the last PCE"},"settings:taktTime:avg":function(e){return"Show average Cycle Time for the current order"},"settings:taktTime:sap":function(e){return"Show Takt Time for the current order"},"settings:taktTime:smiley":function(e){return"Show smiley"},"settings:taktTime:coeffs":function(e){return"Operation coefficients"},"settings:taktTime:coeffs:help":function(e){return"Each line should contain order's MRP for which the Takt Time coefficients should be adjusted, followed by names of the operation WorkCenters, operation numbers and values of the coefficients. For example:<br><code class=multiline>*: *=1.053 */0010=1.1 PIVATIC5=0.9<br>KE6: *=1 OUTDOOR5=1.1 OUTDOOR5/0025=0.9</code>"},"settings:lineAutoDowntimes":function(e){return"Automatic downtimes"},"settings:lineAutoDowntimes:groups:placeholder":function(e){return"Choose an existing production line group to change its auto downtimes."},"settings:lineAutoDowntimes:groups:label":function(e){return"Auto downtime groups"},"settings:lineAutoDowntimes:group:label":function(e){return"Group name"},"settings:lineAutoDowntimes:reasons:placeholder":function(e){return"Choose a new auto downtime reason"},"settings:lineAutoDowntimes:lines:label":function(e){return"Production lines in the group"},"settings:lineAutoDowntimes:reason":function(e){return"Auto downtime reason"},"settings:lineAutoDowntimes:init":function(e){return"Initialization"},"settings:lineAutoDowntimes:when:initial":function(e){return"only shift start"},"settings:lineAutoDowntimes:when:always":function(e){return"always"},"settings:lineAutoDowntimes:when:time":function(e){return"at:"}},pl:!0}}),define("app/nls/pl/production",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r))in o?o[n]:o.other},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"breadcrumbs:base":function(e){return"Operator"},"breadcrumbs:settings":function(e){return"Ustawienia"},"duplicate:title":function(e){return"Podwjne uruchomienie formatki"},"duplicate:message":function(e){return"Wykryto podwjne uruchomienie przegldarki z formatk operatora.<br>Zamknij wszystkie inne formatki i wcinij poniszy przycisk, aby ponownie zaadowa formatk w tym oknie."},"duplicate:button":function(e){return"Przeaduj formatk"},"msg:shiftChange":function(e){return"Nowa zmiana!"},"msg:locked":function(e){return"Linia produkcyjna zostaa dezaktywowana!"},"controls:dashboard":function(e){return"Przejd do pulpitu"},"controls:lock":function(e){return"Dezaktywuj lini"},"controls:unlock":function(e){return"Aktywuj lini"},"controls:locked":function(e){return"Linia dezaktywowana"},"controls:unlocked":function(e){return"Linia aktywna"},"controls:sync":function(e){return"Wskanik komunikacji z serwerem"},"controls:addNearMiss":function(e){return"Dodaj ZPW"},"controls:addSuggestion":function(e){return"Dodaj sugesti"},"controls:addObservation":function(e){return"Dodaj obserwacj"},"controls:msg:sync:noConnection":function(e){return"Nie mona aktywowa edycji: brak poczenia z serwerem."},"controls:msg:sync:remoteError":function(e){return"Nie mona aktywowa edycji: nieudane pobranie klucza."},"controls:msg:sync:success":function(e){return"Pomylnie aktywowano lini."},"controls:msg:popup":function(e){return"Wyskakujce okienko zostao zablokowane."},"controls:mor":function(e){return"Matryca odpowiedzialnoci"},"controls:componentLabels":function(e){return"Drukowanie etykiet komponentw"},"unlockDialog:title:unlock":function(e){return"Aktywacja Formatki operatora"},"unlockDialog:title:lock":function(e){return"Dezaktywacja Formatki operatora"},"unlockDialog:login":function(e){return"Login"},"unlockDialog:password":function(e){return"Haso"},"unlockDialog:prodLine":function(e){return"Linia produkcyjna"},"unlockDialog:station":function(e){return"Numer stanowiska pracy"},"unlockDialog:unlock":function(e){return"Aktywuj Formatk operatora"},"unlockDialog:lock":function(e){return"Dezaktywuj Formatk operatora"},"unlockDialog:error:UNLOCK_FAILURE":function(e){return"Nie udao si aktywowa linii produkcyjnej."},"unlockDialog:error:LOCK_FAILURE":function(e){return"Nie udao si dezaktywowa linii produkcyjnej."},"unlockDialog:error:INVALID_PROD_LINE":function(e){return"Nieprawidowa linia produkcyjna."},"unlockDialog:error:NO_PRIVILEGES":function(e){return"Brak wymaganych uprawnie."},"unlockDialog:error:INPUT":function(e){return"Nieprawidowy login i/lub haso."},"unlockDialog:error:MANY_MATCHES":function(e){return"Kilku uytkownikw z podanym loginem."},"unlockDialog:error:UNSAFE_PASSWORD":function(e){return"Haso nie moe by takie jak login. Zmie haso."},"unlockDialog:error:ALREADY_UNLOCKED":function(e){return"Linia produkcyjna jest aktualnie uruchomiona na innym komputerze."},"unlockDialog:error:DEACTIVATED":function(e){return"Linia produkcyjna jest ju nieaktywna."},"section:data":function(e){return"Dane produkcyjne"},"section:history":function(e){return"Historia"},"section:quantities":function(e){return"Wykonane iloci"},"section:downtimes":function(e){return"Przestoje"},"section:isa":function(e){return"Pole odkadcze"},"section:taktTime":function(e){return"Czas cyklu"},"property:currentTime":function(e){return"Aktualny czas"},"property:shift":function(e){return"Zmiana"},"property:orgUnit":function(e){return"Dzia"},"property:master":function(e){return"Mistrz"},"property:master:change":function(e){return"(zmie)"},"property:master:noData:locked":function(e){return"nie wybrany"},"property:master:noData:unlocked":function(e){return"(wybierz mistrza)"},"property:leader":function(e){return"Lider"},"property:leader:change":function(e){return"(zmie)"},"property:leader:noData:locked":function(e){return"nie wybrany"},"property:leader:noData:unlocked":function(e){return"(wybierz lidera)"},"property:operator":function(e){return"Operator"},"property:operator:change":function(e){return"(zmie)"},"property:operator:noData:locked":function(e){return"nie wybrany"},"property:operator:noData:unlocked":function(e){return"(wybierz operatora)"},"property:orderNo":function(e){return"Nr zlecenia"},"property:orderNo:change":function(e){return"(popraw)"},"property:nc12":function(e){return"12NC"},"property:nc12:change":function(e){return"(popraw)"},"property:productName":function(e){return"Nazwa rodziny/detalu"},"property:operationName":function(e){return"Nazwa operacji"},"property:taktTime":function(e){return"Takt [s]"},"property:taktTime:checkSn":function(e){return"(sprawd)"},"property:lastTaktTime":function(e){return"Cykl [s]"},"property:avgTaktTime":function(e){return"r. cykl [s]"},"property:workerCountSap":function(e){return"Osoby wg SAP"},"property:createdAt":function(e){return"Czas rozpoczcia"},"property:totalQuantityDone":function(e){return"Ilo w zleceniu"},"property:quantityDone":function(e){return"Wykonana ilo"},"property:quantityDone:change":function(e){return"(zmie ilo)"},"property:workerCount":function(e){return"Osoby pracujce"},"property:workerCount:change:data":function(e){return"(zmie ilo)"},"property:workerCount:change:noData":function(e){return"(ustaw ilo)"},"action:newOrder":function(e){return"Nowe zlecenie"},"action:nextOrder":function(e){return"<i class='fa fa-forward' title='Kolejka zlece'></i>"},"action:continueOrder":function(e){return"Kontynuuj zlecenie"},"action:startDowntime":function(e){return"Przestj"},"action:startBreak":function(e){return"Przerwa"},"action:endDowntime":function(e){return"Koniec przestoju"},"action:endWork":function(e){return"Koniec pracy"},"action:emptyPallet":function(e){return"Pusta paleta"},"action:fullPallet":function(e){return"Paleta"},"quantities:column:time":function(e){return"Godzina"},"quantities:column:planned":function(e){return"Plan"},"quantities:column:actual":function(e){return"Wykonane"},"quantities:unit":function(e){return"szt."},"quantities:change":function(e){return"(zmie)"},"quantities:newValuePlaceholder":function(e){return"Nowa ilo..."},"quantityEditor:title":function(e){return"Wykonana ilo w przedziale godzinowym"},"quantityEditor:label:hour":function(e){return"Przedzia godzinowy:"},"quantityEditor:label:value":function(e){return"Ilo wykonana:"},"quantityEditor:submit":function(e){return"Ustaw ilo"},"quantityEditor:cancel":function(e){return"Anuluj ustawianie"},"quantityEditor:maxQuantity":function(e){return"Warto nie moe by wiksza ni "+t.v(e,"max")+"."},"personnelPicker:title:master":function(e){return"Wybieranie mistrza"},"personnelPicker:title:leader":function(e){return"Wybieranie lidera"},"personnelPicker:title:operator":function(e){return"Wybieranie operatora"},"personnelPicker:submit":function(e){return"Zapisz pracownika"},"personnelPicker:cancel":function(e){return"Anuluj wybieranie"},"personnelPicker:recent":function(e){return"Pracownicy ostatnio pracujcy na tej zmianie:"},"personnelPicker:matches":function(e){return"Znalezieni pracownicy:"},"personnelPicker:tooShort":function(e){return"Podaj przynajmniej trzy pocztkowe znaki nazwiska."},"personnelPicker:notFound":function(e){return"Nie znaleziono adnych pasujcych pracownikw."},"personnelPicker:online:label":function(e){return"Wybrany pracownik:"},"personnelPicker:offline:label":function(e){return"Nr kadrowy pracownika:"},"personnelPicker:offline:warning":function(e){return"Brak poczenia z serwerem. Moesz wpisa tylko numer kadrowy pracownika."},"personnelPicker:embedded:label":function(e){return"Szukaj pracownikw po nazwisku:"},"multiPersonnelPicker:title:operator":function(e){return"Wybieranie operatorw"},"multiPersonnelPicker:submit":function(e){return"Zapisz pracownikw"},"multiPersonnelPicker:cancel":function(e){return"Anuluj wybieranie"},"multiPersonnelPicker:pick":function(e){return"Dodaj pracownika"},"multiPersonnelPicker:back":function(e){return"Wr do listy"},"multiPersonnelPicker:recent":function(e){return"Pracownicy ostatnio pracujcy na tej zmianie:"},"multiPersonnelPicker:matches":function(e){return"Znalezieni pracownicy:"},"multiPersonnelPicker:tooShort":function(e){return"Podaj przynajmniej trzy pocztkowe znaki nazwiska."},"multiPersonnelPicker:notFound":function(e){return"Nie znaleziono adnych pasujcych pracownikw."},"multiPersonnelPicker:empty":function(e){return"Nie wybrano jeszcze pracownikw aktualnej zmiany."},"multiPersonnelPicker:picked":function(e){return"Wybrani pracownicy:"},"multiPersonnelPicker:online:label":function(e){return"Nowy pracownik:"},"multiPersonnelPicker:offline:label":function(e){return"Nr kadrowy nowego pracownika:"},"multiPersonnelPicker:offline:warning":function(e){return"Brak poczenia z serwerem. Moesz wpisa tylko numer kadrowy pracownika."},"multiPersonnelPicker:embedded:label":function(e){return"Szukaj pracownikw po nazwisku:"},"orderQueue:title":function(e){return"Ustawianie kolejki zlece"},"orderQueue:message:order":function(e){return"Wpisz numer zlecenia i wybierz z listy operacj, aby doda nastpne zlecenie do kolejki."},"orderQueue:message:queue":function(e){return"Poniej znajduje si aktualna kolejka zlece."},"orderQueue:message:empty":function(e){return"Kolejka zlece jest pusta."},"orderQueue:submit":function(e){return"Ustaw kolejk zlece"},"orderQueue:enqueue":function(e){return"Dodaj do kolejki"},"orderQueue:clear":function(e){return"Wyczy kolejk"},"orderQueue:cancel":function(e){return"Anuluj"},"orderQueue:order:label":function(e){return"Zlecenie"},"orderQueue:order:placeholder":function(e){return"Szukaj zlecenia po numerze..."},"orderQueue:operation:label":function(e){return"Operacja"},"orderQueue:operation:placeholder":function(e){return"Wybierz operacj..."},"newOrderPicker:title":function(e){return"Rozpoczynanie nowego zlecenia"},"newOrderPicker:title:replacing":function(e){return"Koczenie aktualnego zlecenia"},"newOrderPicker:title:correcting":function(e){return"Poprawianie aktualnego zlecenia"},"newOrderPicker:order:label:no":function(e){return"Nr nowego zlecenia:"},"newOrderPicker:order:label:nc12":function(e){return"12NC nowego zlecenia:"},"newOrderPicker:order:placeholder:no":function(e){return"Wpisz numer nowego zlecenia..."},"newOrderPicker:order:placeholder:nc12":function(e){return"Wpisz 12NC nowego zlecenia..."},"newOrderPicker:order:tooShort":function(e){return"Podaj peny, 9-cyfrowy numer zlecenia."},"newOrderPicker:order:notFound":function(e){return"Podane zlecenie nie istnieje."},"newOrderPicker:operation:label:online":function(e){return"Operacja:"},"newOrderPicker:operation:label:offline":function(e){return"Numer operacji:"},"newOrderPicker:operation:placeholder":function(e){return"Wybierz operacj nowego zlecenia..."},"newOrderPicker:submit":function(e){return"Rozpocznij nowe zlecenie"},"newOrderPicker:submit:replacing":function(e){return"Zakocz aktualne zlecenie i rozpocznij nowe"},"newOrderPicker:submit:correcting":function(e){return"Popraw aktualne zlecenie"},"newOrderPicker:cancel":function(e){return"Anuluj"},"newOrderPicker:msg:invalidOrderId:no":function(e){return"Nieprawidowy numer zlecenia."},"newOrderPicker:msg:invalidOrderId:nc12":function(e){return"Nieprawidowe 12NC zlecenia."},"newOrderPicker:msg:invalidOperationNo":function(e){return"Nieprawidowy numer operacji."},"newOrderPicker:msg:searchFailure":function(e){return"Wyszukiwanie zlecenia nie powiodo si."},"newOrderPicker:msg:emptyOrder":function(e){return"Prawidowe zlecenie jest wymagane."},"newOrderPicker:msg:emptyOperation":function(e){return"Operacja jest wymagana."},"newOrderPicker:msg:noOperations":function(e){return"Wybrane zlecenie nie ma zdefiniowanych adnych operacji.<br>Moesz rcznie wpisa czterocyfrowy nr operacji."},"newOrderPicker:msg:orderDeleted":function(e){return"Zlecenie zostao skasowane."},"newOrderPicker:msg:orderCompleted":function(e){return"Zlecenie zostao zrobione."},"newOrderPicker:online:info:no":function(e){return"Wpisz numer zlecenia i wybierz z listy operacj, aby rozpocz nowe zlecenie."},"newOrderPicker:online:info:nc12":function(e){return"Wpisz 12NC zlecenia i wybierz z listy operacj, aby rozpocz nowe zlecenie."},"newOrderPicker:offline:warning:no":function(e){return"Wpisz numer zlecenia oraz numer operacji aby rozpocz nowe zlecenie."},"newOrderPicker:offline:warning:nc12":function(e){return"Wpisz 12NC zlecenia oraz numer operacji aby rozpocz nowe zlecenie."},"newOrderPicker:checkData:warning":function(e){return"Wybranie nowego zlecenia ukoczy aktualnie wybrane zlecenie. Sprawd czy pola <em>Ilo wykonana</em> i <em>Osoby pracujce</em> aktualnego zlecenia maj prawidowe wartoci, gdy po wybraniu nowego zlecenia nie bdzie mona ich zmieni."},"newOrderPicker:quantityDone":function(e){return"Ilo wykonana w koczonym zleceniu:"},"newOrderPicker:workerCount":function(e){return"Osoby pracujce przy koczonym zleceniu:"},"newOrderPicker:newWorkerCount":function(e){return"Ilo osb:"},"newOrderPicker:spigot:nc12":function(e){return"12NC komponentu Spigot"},"newOrderPicker:spigot:placeholder":function(e){return"Zeskanuj kod kreskowy komponentu..."},"newOrderPicker:spigot:invalid":function(e){return"Nieprawidowe 12NC komponentu!"},"error:min":function(e){return"Warto nie moe by mniejsza ni "+t.v(e,"min")+"."},"error:max":function(e){return"Warto nie moe by wiksza ni "+t.v(e,"max")+"."},"downtimePicker:title:start":function(e){return"Rozpoczynanie przestoju"},"downtimePicker:title:edit":function(e){return"Poprawianie przestoju"},"downtimePicker:submit:start":function(e){return"Rozpocznij przestj"},"downtimePicker:submit:edit":function(e){return"Popraw przestj"},"downtimePicker:cancel":function(e){return"Anuluj"},"downtimePicker:reason:label":function(e){return"Powd przestoju:"},"downtimePicker:reason:placeholder":function(e){return"Wybierz powd przestoju..."},"downtimePicker:reasonFilter:placeholder":function(e){return"Powd przestoju..."},"downtimePicker:reasonComment:label":function(e){return"Komentarz:"},"downtimePicker:reasonComment:placeholder":function(e){return"Opcjonalne, dodatkowe informacje..."},"downtimePicker:aor:label":function(e){return"Obszar odpowiedzialnoci:"},"downtimePicker:aor:placeholder":function(e){return"Wybierz obszar odpowiedzialnoci..."},"downtimePicker:aorFilter:placeholder":function(e){return"Obszar odpowiedzialnoci..."},"downtimePicker:msg:emptyReason":function(e){return"Powd przestoju jest wymagany."},"downtimePicker:msg:emptyAor":function(e){return"Obszar odpowiedzialnoci jest wymagany."},"downtimePicker:startedAt":function(e){return"Czas rozpoczcia"},"downtimePicker:startedAt:now":function(e){return"Teraz"},"prodDowntime:time":function(e){return"Czas"},"prodDowntime:reason":function(e){return"Powd przestoju"},"prodDowntime:aor":function(e){return"Obszar odpowiedzialnoci"},"endDowntimeDialog:title":function(e){return"Potwierdzenie zakoczenia przestoju"},"endDowntimeDialog:message":function(e){return"<p>Czy na pewno chcesz zakoczy aktualny przestj?</p>"},"endDowntimeDialog:yes":function(e){return"Zakocz przestj"},"endDowntimeDialog:no":function(e){return"Nie kocz przestoju"},"continueOrderDialog:title":function(e){return"Potwierdzenie kontynuacji zlecenia"},"continueOrderDialog:message":function(e){return"<p>Czy na pewno chcesz rozpocz aktualnie wybrane zlecenie?</p>"},"continueOrderDialog:yes":function(e){return"Kontynuuj zlecenie"},"continueOrderDialog:no":function(e){return"Nie kontynuuj zlecenia"},"endWorkDialog:title":function(e){return"Potwierdzenie zakoczenia pracy"},"endWorkDialog:warning":function(e){return"Zakoczenie pracy ukoczy "+t.s(e,"downtime",{true:"aktualnie wybrany przestj i zlecenie",other:"aktualnie wybrane zlecenie"})+". Sprawd czy ponisze pola maj prawidowe wartoci, gdy po zakoczeniu pracy nie bdzie mona ich zmieni."},"endWorkDialog:quantitiesDone":function(e){return"Wykonana ilo w przedziale godzinowym "+t.v(e,"hourRange")+":"},"endWorkDialog:quantityDone":function(e){return"Wykonana ilo aktualnego zlecenia:"},"endWorkDialog:workerCount":function(e){return"Osoby pracujce przy aktualnym zleceniu:"},"endWorkDialog:yes":function(e){return"Zakocz prac"},"endWorkDialog:no":function(e){return"Anuluj"},"endWorkDialog:spigot:nc12":function(e){return"12NC komponentu Spigot"},"endWorkDialog:spigot:placeholder":function(e){return"Zeskanuj kod kreskowy komponentu..."},"endWorkDialog:spigot:invalid":function(e){return"Nieprawidowe 12NC komponentu!"},"propertyEditorDialog:title:quantityDone":function(e){return"Ustawianie iloci wykonanej"},"propertyEditorDialog:label:quantityDone":function(e){return"Ilo wykonana w zleceniu"},"propertyEditorDialog:title:workerCount":function(e){return"Ustawianie iloci osb pracujcych"},"propertyEditorDialog:label:workerCount":function(e){return"Ilo osb pracujcych przy zleceniu"},"propertyEditorDialog:yes":function(e){return"Ustaw ilo"},"propertyEditorDialog:no":function(e){return"Anuluj"},"unload:downtime":function(e){return"Czy na pewno chcesz zamkn przegldark pozostawiajc lini produkcyjn w stanie przestoju?\n\nJeeli zamkniesz przegldark nie wciskajc przycisku Koniec pracy, to czas trwania przestoju bdzie si nalicza do koca zmiany!"},"unload:order":function(e){return"Czy na pewno chcesz zamkn przegldark pozostawiajc lini produkcyjn w stanie wykonywania zlecenia?\n\nJeeli zamkniesz przegldark nie wciskajc przycisku Koniec pracy, to czas trwania zlecenia bdzie si nalicza do koca zmiany!"},"isa:header":function(e){return"Pole odkadcze"},"isa:pickup":function(e){return"Odbir<br>palety"},"isa:deliver":function(e){return"Dostawa<br>palety"},"isa:deliver:specific":function(e){return"Dostawa <span class='production-isa-selectedQty'>"+t.v(e,"qty")+"x</span><span class='production-isa-selectedPalletKind'>"+t.v(e,"palletKind")+"</span>"},"isa:deliver:title":function(e){return"Dostawa palety"},"isa:deliver:qty":function(e){return"Ilo palet"},"isa:deliver:palletKind":function(e){return"Rodzaj palety"},"isa:deliver:submit":function(e){return"Dostawa palety"},"isa:deliver:cancel":function(e){return"Anuluj"},"isa:cancel:title":function(e){return"Potwierdzenie anulowania dania"},"isa:cancel:message":function(e){return"<p>Czy na pewno chcesz anulowa wybrane danie "+t.s(e,"requestType",{delivery:"dostawy palety",other:"odbioru palety"})+"?</p>"},"isa:cancel:yes":function(e){return"Anuluj danie"},"isa:cancel:no":function(e){return"Pozostaw aktywne"},"isa:status:idle":function(e){return"Brak dania"},"isa:status:new":function(e){return"Oczekiwanie na przyjcie dania"},"isa:status:accepted":function(e){return"danie w realizacji"},"spigotChecker:title":function(e){return"Sprawdzanie komponentu Spigot"},"spigotChecker:name:label":function(e){return"Nazwa komponentu:"},"spigotChecker:nc12:label":function(e){return"12NC komponentu:"},"spigotChecker:nc12:placeholder":function(e){return"Zeskanuj kod kreskowy komponentu..."},"spigotChecker:nc12:invalid":function(e){return"Nieprawidowe 12NC komponentu!"},"spigotChecker:submit":function(e){return"Sprawd komponent"},"spigotChecker:endWork":function(e){return"Zakocz zlecenie"},"spigotChecker:success":function(e){return"Zeskanowano prawidowy komponent."},"autoDowntimes:remainingTime":function(e){return"rozpocznie si za "+t.v(e,"time")},"snMessage:scannedValue":function(e){return"Zeskanowana warto"},"snMessage:orderNo":function(e){return"Zlecenie"},"snMessage:serialNo":function(e){return"Numer"},"snMessage:UNKNOWN_CODE":function(e){return"Zeskanowany kod nie zawiera numeru seryjnego."},"snMessage:INVALID_LINE":function(e){return"Nieprawidowa linia produkcyjna."},"snMessage:INVALID_LINE_STATE":function(e){return"Nieprawidowa zmiana produkcyjna lub zlecenie."},"snMessage:INVALID_STATE:null":function(e){return"Nieprawidowa zmiana produkcyjna."},"snMessage:INVALID_STATE:idle":function(e){return"Rozpocznij zlecenie, aby mc skanowa numery seryjne."},"snMessage:INVALID_STATE:downtime":function(e){return"Zakocz przestj, aby mc skanowa numery seryjne."},"snMessage:INVALID_ORDER":function(e){return"Zeskanowano numer seryjny z nieprawidowego zlecenia."},"snMessage:ALREADY_USED":function(e){return"Zeskanowany numer seryjny zosta ju uyty."},"snMessage:CHECKING":function(e){return"<span class='fa fa-spinner fa-spin'></span><br>Sprawdzanie numeru seryjnego..."},"snMessage:SERVER_FAILURE":function(e){return"Bd podczas sprawdzania numeru seryjnego."},"snMessage:OFFLINE":function(e){return"Bd poczenia z serwerem."},"snMessage:SHIFT_NOT_FOUND":function(e){return"Nie znaleziono zmiany z linii."},"snMessage:ORDER_NOT_FOUND":function(e){return"Nie znaleziono zlecenia z linii."},"snMessage:STANDARD_LABEL":function(e){return"Nie mona uywa wirtualnego numeru seryjnego w tym zleceniu."},"snMessage:SUCCESS":function(e){return"Numer seryjny zosta pomylnie zarejestrowany."},"snMessage:MAX_TOTAL":function(e){return"Wykonano ju wszystkie sztuki w zleceniu."},"snMessage:MAX_LINE":function(e){return"Wykonano ju wszystkie sztuki zaplanowane dla linii."},"bomChecker:title":function(e){return"Sprawdzanie komponentw"},"bomChecker:message:todo":function(e){return"Zeskanuj etykiet komponentu."},"bomChecker:message:checking":function(e){return"Sprawdzanie komponentu..."},"bomChecker:message:success":function(e){return"Prawidowy komponent!"},"bomChecker:message:failure":function(e){return"Nie udao si sprawdzi komponentu."},"bomChecker:message:todo:sn":function(e){return"Zeskanuj etykiet produktu."},"bomChecker:message:checking:sn":function(e){return"Sprawdzanie numeru seryjnego..."},"bomChecker:message:success:sn":function(e){return"Prawidowy numer seryjny!"},"bomChecker:message:failure:sn":function(e){return"Nie udao si sprawdzi numeru seryjnego."},"bomChecker:message:nc12":function(e){return"Niepasujce 12NC: "+t.v(e,"nc12")},"bomChecker:message:used":function(e){return"Kod wykorzystany w: "+t.v(e,"psn")},"bomChecker:message:used:sn":function(e){return"Numer seryjny jest ju wykorzystany."},"snMessage:BOM_CHECKER:NO_MATCH":function(e){return"Kod nie pasuje do adnego z komponentw."},"taktTime:check:button":function(e){return"Sprawd<br>numer seryjny"},"taktTime:check:title":function(e){return"Sprawdzanie nr seryjnych"},"taktTime:check:orderNo":function(e){return"Nr zlecenia"},"taktTime:check:serialNo":function(e){return"Nr sztuki"},"taktTime:check:submit":function(e){return"Sprawd nr seryjny"},"taktTime:check:list":function(e){return"Poka list nr seryjnych"},"taktTime:check:help":function(e){return"Podaj nr zlecenia oraz nr sztuki skadajce si na nr seryjny, ktry chcesz sprawdzi. Nr seryjny do sprawdzenia moesz take zeskanowa."},"taktTime:check:checking":function(e){return"<i class='fa fa-spinner fa-spin'></i> Sprawdzanie nr seryjnego..."},"taktTime:check:local":function(e){return"Dany nr seryjny zosta zeskanowany na tej linii produkcyjnej."},"taktTime:check:remote":function(e){return"Dany nr seryjny zosta ju zeskanowany na linii produkcyjnej: "+t.v(e,"prodLine")},"taktTime:check:notFound":function(e){return"Dany nr seryjny nie by jeszcze zeskanowany."},"taktTime:list:title":function(e){return"Lista zeskanowanych nr seryjnych"},"execution:todo":function(e){return"Plan"},"execution:done":function(e){return"Wykonane"},"execution:order:label":function(e){return t.v(e,"orderId")+", "+t.v(e,"quantityDone")+" szt."},"execution:order:orderNo":function(e){return"Nr zlecenia"},"execution:order:operationNo":function(e){return"Nr operacji"},"execution:order:startedAt":function(e){return"Czas rozpoczcia"},"execution:order:finishedAt":function(e){return"Czas zakoczenia"},"execution:order:quantityDone":function(e){return"Ilo sztuk"},"execution:order:workerCount":function(e){return"Ilo osb"},"execution:downtime:label":function(e){return t.v(e,"reason")},"execution:downtime:reason":function(e){return"Powd"},"execution:downtime:aor":function(e){return"Obszar"},"execution:downtime:startedAt":function(e){return"Czas rozpoczcia"},"execution:downtime:finishedAt":function(e){return"Czas zakoczenia"},"ft:warning":function(e){return"Zlecenie zakoczy moe tylko osoba uprawniona, poniewa nie wykonano wszystkich testw ramki. Poinformuj swojego przeoonego."},"ft:login":function(e){return"Login"},"ft:password":function(e){return"Haso"},"ft:invalidCredentials":function(e){return"Nieprawidowy login i/lub haso."},"ft:noPrivileges":function(e){return"Uytkownik nie ma odpowiednich uprawnie."},"ft:requestFailure":function(e){return"Sprawdzanie uprawnie nie powiodo si."},"componentLabels:title":function(e){return"Drukowanie etykiet komponentw"},"componentLabels:orderNo":function(e){return"Numer zlecenia"},"componentLabels:operationNo":function(e){return"Numer operacji"},"componentLabels:labelQty":function(e){return"Ilo etykiet"},"componentLabels:shiftX":function(e){return"Przesunicie X"},"componentLabels:shiftY":function(e){return"Przesunicie Y"},"componentLabels:componentCode":function(e){return"Komponent"},"componentLabels:noComponents":function(e){return"Brak pasujcych komponentw."},"componentLabels:submit":function(e){return"Drukuj etykiety"},"componentLabels:test":function(e){return"Drukuj etykiet testow"},"componentLabels:cancel":function(e){return"Anuluj"},"componentLabels:error":function(e){return"Drukowanie nie powiodo si."},"componentLabels:error:PRINTER_NOT_FOUND":function(e){return"Nie znaleziono drukarki."},"componentLabels:error:INVALID_PRINTER":function(e){return"Nieprawidowa drukarka."},"settings:tab:operator":function(e){return"Formatka operatora"},"settings:tab:downtimes":function(e){return"Przestoje"},"settings:tab:spigot":function(e){return"Sprawdzanie Spigota"},"settings:tab:bomChecker":function(e){return"Sprawdzanie komponentw"},"settings:tab:componentLabels":function(e){return"Etykiety komponentw"},"settings:tab:taktTime":function(e){return"Takt Time"},"settings:initialDowntimeWindow":function(e){return"Czas na rozpoczcie pocztkowego przestoju na zmianie [min]"},"settings:rearmDowntimeReason":function(e){return"Przestj ze sprawdzaniem Spigota"},"settings:spigotLines":function(e){return"Linie ze sprawdzaniem Spigota"},"settings:spigotPatterns":function(e){return"Wybierz komponent Spigot pasujcy do jednego z poniszych wzorcw"},"settings:spigotNotPatterns":function(e){return"Zignoruj wybrany komponent, jeeli pasuje do jednego z poniszych wzorcw"},"settings:spigotFinish":function(e){return"Wymu sprawdzanie Spigota na koniec zlecenia"},"settings:spigotGroups":function(e){return"Grupy 12NC Spigotw"},"settings:spigotGroups:help":function(e){return"Przypisanie 12NC komponentw Spigot do 12NC skanowanych przez Operatora. Wymagany format: <code>$12NC_skanowane: $12NC_spigota_1, $12NC_spigota_2, ...</code> (kade skanowane 12NC w oddzielnej linii)."},"settings:spigotInsertGroups":function(e){return"Grupy 12NC Insertw"},"settings:spigotInsertGroups:help":function(e){return"Przypisanie 12NC opraw do 12NC skanowanych przez Operatora. Wymagany format: <code>$12NC_skanowane: $12NC_oprawy_1, $12NC_oprawy_2, ...</code> (kade skanowane 12NC w oddzielnej linii)."},"settings:taktTime:enabled":function(e){return"Skanowanie numerw seryjnych"},"settings:taktTime:ignoredLines":function(e){return"Wycz skanowanie na nastpujcych liniach:"},"settings:taktTime:ignoredDowntimes":function(e){return"Ignoruj czas trwania nastpujcych przestojw:"},"settings:taktTime:last":function(e){return"Pokazuj czas cyklu dla ostatniej sztuki"},"settings:taktTime:avg":function(e){return"Pokazuj redni czas cyklu dla aktualnego zlecenia"},"settings:taktTime:sap":function(e){return"Pokazuj czas taktu SAP dla aktualnego zlecenia"},"settings:taktTime:smiley":function(e){return"Pokazuj buk"},"settings:taktTime:coeffs":function(e){return"Wspczynniki operacji"},"settings:taktTime:coeffs:help":function(e){return"W kadej linii naley poda MRP zlecenia, dla ktrego wspczynniki Takt Time maj by zmienione, a nastpnie WorkCenter operacji, numer operacji i wartoci wspczynnikw. W miejsce MRP i WorkCenter mona uy znaku <code>*</code> (wszystkie). Numer operacji jest opcjonalny. Na przykad:<br><code class=multiline>*: *=1.053 */0010=1.1 PIVATIC5=0.9<br>KE6: *=1 OUTDOOR5=1.1 OUTDOOR5/0025=0.9</code>"},"settings:lineAutoDowntimes":function(e){return"Automatyczne przestoje"},"settings:lineAutoDowntimes:groups:placeholder":function(e){return"Wybierz istniejc grup linii, aby zmieni automatyczne przestoje."},"settings:lineAutoDowntimes:groups:label":function(e){return"Grupy automatycznych przestojw"},"settings:lineAutoDowntimes:group:label":function(e){return"Nazwa grupy"},"settings:lineAutoDowntimes:reasons:placeholder":function(e){return"Wybierz nowy automatyczny przestj"},"settings:lineAutoDowntimes:lines:label":function(e){return"Linie produkcyjne w grupie"},"settings:lineAutoDowntimes:reason":function(e){return"Automatyczny powd przestoju"},"settings:lineAutoDowntimes:init":function(e){return"Inicjalizacja"},"settings:lineAutoDowntimes:when:initial":function(e){return"na pocztku zmiany"},"settings:lineAutoDowntimes:when:always":function(e){return"zawsze"},"settings:lineAutoDowntimes:when:time":function(e){return"o godzinie:"}}}),define("app/production/snManager",["underscore","jquery","app/broker","app/viewport","app/i18n","app/time","app/user","app/data/prodLog","app/data/localStorage","app/production/views/BomCheckerDialogView","app/production/templates/snMessage","i18n!app/nls/production"],function(e,t,n,r,i,o,a,s,u,c,l){"use strict";var d=/[A-Z0-9]{4}\.000000000\.0000/,p=null,f="",h=JSON.parse(u.getItem("PRODUCTION:SN")||"{}"),m={_id:"",count:0,time:0},g=null;function y(e){if(e&&(f=e),e=f.trim(),f="","<ESC>"===e||"1337000027"===e)return r.closeAllDialogs();var t=e.match(/P0*([0-9]{9})([0-9]{4})/);t||(t=e.match(/([A-Z0-9]{4}\.([0-9]{9})\.([0-9]{4}))$/))&&/^[A-Z0-9]+\.[0-9]+\.[0-9]+\.[A-Z0-9]+$/.test(e)&&(t=null),t?n.publish("production.taktTime.snScanned",{_id:t[1],scannedAt:new Date,orderNo:t[2],serialNo:+t[3]}):e.length>5&&n.publish("production.taktTime.snScanned",{_id:e,scannedAt:new Date,orderNo:null,serialNo:null})}return window.fakeSN=y,{handleKeyboardEvent:function(e){e.target.classList.contains("form-control")&&void 0===e.target.dataset.snAccept||e.key&&1===e.key.length&&(f+=e.key.toUpperCase(),clearTimeout(p),p=setTimeout(y,50))},contains:function(e){return!d.test(e)&&!!h[e]},add:function(e){d.test(e)||(h[e._id]=[Date.parse(e.scannedAt),e.prodShiftOrder,e.prodLine],u.setItem("PRODUCTION:SN",JSON.stringify(h)))},clear:function(){h={},u.removeItem("PRODUCTION:SN")},getLocalTaktTime:function(t,n,r){var i=1,o=1,a=t.scannedAt.getTime(),s=new Date(n.get("startedAt")).getTime(),u=(new Date).getHours(),c=n.get("prodLine");Object.keys(h).forEach(function(e){var t=h[e];t[1]===n.id&&(i+=1,s=t[0]),t[2]===c&&new Date(t[0]).getHours()===u&&(o+=1)});var l=a-s;return{result:"SUCCESS",serialNumber:e.assign({taktTime:l,prodShiftOrder:n.id,prodLine:c},t),quantityDone:i,lastTaktTime:l,avgTaktTime:0,hourlyQuantityDone:{index:r,value:o}}},showMessage:function(n,r,o,a){if(this.view){var s=t("#snMessage");s.length||(s=t(l()).appendTo("body")).on("click",this.hideMessage.bind(this));var u=n._id.length>43?n._id.substring(0,40)+"...":n._id;!a&&e.includes(["MAX_TOTAL","MAX_LINE"],o)&&(a=18e3),t("#snMessage-text").html("function"==typeof o?o():i("production","snMessage:"+o));var c=0===u.length,d=0===(n.orderNo||"").length,p=0===(n.serialNo||"").length;s.find(".production-snMessage-props").toggleClass("hidden",c&&d&&p),t("#snMessage-scannedValue").text(u).closest(".production-snMessage-prop").toggleClass("hidden",c),t("#snMessage-orderNo").text(n.orderNo||"-").closest(".production-snMessage-prop").toggleClass("hidden",d),t("#snMessage-serialNo").text(n.serialNo||"-").closest(".production-snMessage-prop").toggleClass("hidden",p),s.css({top:"50%",marginTop:"-80px"}).removeClass("hidden is-success is-error is-warning").addClass("is-"+r),this.view.timers.hideSnMessage&&clearTimeout(this.view.timers.hideSnMessage),this.view.timers.hideSnMessage=setTimeout(this.hideMessage.bind(this),a||6e3)}},hideMessage:function(){this.view&&(this.view.timers.hideSnMessage&&clearTimeout(this.view.timers.hideSnMessage),this.view.timers.hideSnMessage=null,t("#snMessage").addClass("hidden"))},createDynamicLogEntry:function(e){var t={_id:null,instanceId:window.INSTANCE_ID,type:"checkSerialNumber",data:e,createdAt:o.getMoment().toDate(),creator:a.getInfo(),prodLine:window.WMES_LINE_ID,station:window.WMES_STATION||0};return e.sapTaktTime=-1,t},bind:function(e){var n=this;if(n.view)throw new Error("snManager already bound!");n.view=e;var o=e.destroy;function a(e){var t=e.target.tagName,n="INPUT"===t&&"BUTTON"!==e.target.type||"SELECT"===t||"TEXTAREA"===t;8!==e.keyCode||n&&!e.target.readOnly&&!e.target.disabled||e.preventDefault(),e.target.classList.contains("form-control")&&void 0===e.target.dataset.snAccept||e.key&&1===e.key.length&&(f+=e.key.toUpperCase(),clearTimeout(p),p=setTimeout(y,50))}function u(e){if(e){if(r.currentDialog){if(!(r.currentDialog instanceof c))return;return void(e.orderNo?function(e){var t=r.currentDialog.model.logEntry.data;if(e._id===t._id)return void u();0===e.serialNo&&/^0+$/.test(e.orderNo)||e.orderNo!==t.orderNo?(r.closeAllDialogs(),l(e)):(r.currentDialog.onSnScanned(e),u())}(e):(r.currentDialog.onSnScanned(e),u()))}e.orderNo?l(e):l({_id:"0000.000000000.0000",orderNo:"000000000",serialNo:0,scannedAt:(t=e).scannedAt},t)}else{var t;g&&(g.length?u(g.shift()):g=null)}}function l(t,r){if(e.createCheckSn)e.createCheckSn(t,r,d);else{var i=n.contains(t._id)?"ALREADY_USED":null;i&&n.showMessage(t,"error",i),d(i,n.createDynamicLogEntry(t),r)}}function d(t,o,a){if(t)u();else{var l=e.model,p=l&&l.updateTaktTime&&l.updateTaktTimeLocally;n.showMessage(o.data,"warning","CHECKING"),m._id===o.data._id&&m.count>=2&&o.data.scannedAt-m.time<3e3&&(o.data.skipMaxCheck=!0);var f=e.ajax({method:"POST",url:"/production/checkSerialNumber?bomCheck="+(a?1:0),data:JSON.stringify(o),timeout:6e3});f.fail(function(e){if(e.status<200)return p&&l.updateTaktTimeLocally(o),n.showMessage(o.data,"success","SUCCESS"),void u();p&&(o.data.error="SERVER_FAILURE",s.record(l,o)),n.showMessage(o.data,"error","SERVER_FAILURE"),u()}),f.done(function(t){"MAX_TOTAL"===t.result||"MAX_LINE"===t.result?(m._id===o.data._id&&o.data.scannedAt-m.time<3e3?m.count+=1:(m._id=o.data._id,m.count=1),m.time=o.data.scannedAt.getTime()):m._id="","CHECK_BOM"===t.result?function(t,o){n.hideMessage(),o&&(t.logEntry.data._id="0000.000000000.0000",t.logEntry.data.serialNo=0);var a=!1,s=new c({model:t,snMessage:{show:n.showMessage.bind(n),hide:n.hideMessage.bind(n)}});e.listenToOnce(s,"dialog:hidden",function(){a||(a=!0,u())}),e.listenToOnce(s,"dialog:shown",function(){o&&s.onSnScanned(o),a||(a=!0,u())}),e.listenToOnce(s,"checked",function(e){a=!0,r.closeAllDialogs(),d(null,e)}),r.showDialog(s,i("production","bomChecker:title"))}(t,a):"SUCCESS"===t.result?(p&&l.updateTaktTime(t),n.showMessage(t.serialNumber,"success","SUCCESS"),u()):("ALREADY_USED"===t.result&&n.add(t.serialNumber),p&&(o.data.error=t.result,s.record(l,o)),n.showMessage(o.data,"error",t.result),u())})}}e.destroy=function(){t(window).off("keydown",a),o.apply(e,arguments)},e.broker.subscribe("production.taktTime.snScanned",function(e){if(n.view&&n.view.onSnScanned)return void n.view.onSnScanned(e);if(g)return void g.push(e);g=[],u(e)}),t(window).on("keydown",a)}}}),define("app/core/util/decimalSeparator",[],function(){"use strict";return 1.1.toLocaleString().substr(1,1)}),define("app/wmes-ct-balancing/BalancingPce",["app/i18n","app/time","app/user","app/core/Model"],function(e,t,n,r){"use strict";return r.extend({urlRoot:"/ct/balancing/pces",clientUrlRoot:"#ct/balancing/pces",topicPrefix:"ct.balancing.pces",privilegePrefix:"PROD_DATA",nlsDomain:"wmes-ct-balancing",getLabel:function(){return""},serialize:function(){var e=this.toJSON();return e.startedAt=t.format(e.startedAt,"L, HH:mm:ss.SSS"),e.finishedAt=t.format(e.finishedAt,"L, HH:mm:ss.SSS"),e},serializeRow:function(){var e=this.serialize();return e.order=e.order._id||"",e.order&&n.isAllowedTo("ORDERS:VIEW")&&(e.order='<a href="#orders/'+e.order+'">'+e.order+"</a>"),e.d=t.toString(e.d,!1,!1),e.stt+="%",e}})}),define("app/wmes-ct-balancing/templates/recorder",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="ct-balancing-recorder hidden" data-state="idle">\n  <div class="ct-balancing-recorder-hd">\n    <div class="ct-balancing-recorder-close"><i class="fa fa-close"></i></div>\n    <div id="'),__append(idPrefix),__append('-title" class="ct-balancing-recorder-title">'),__append(t("balancing:title:idle")),__append('</div>\n  </div>\n  <div class="ct-balancing-recorder-bd">\n    <div class="ct-balancing-recorder-duration">\n      <span id="'),__append(idPrefix),__append('-value" class="ct-balancing-recorder-duration-value"></span>\n      <span class="ct-balancing-recorder-duration-unit">s</span>\n      <div class="ct-balancing-recorder-duration-icon"><i class="fa fa-comment"></i></div>\n    </div>\n    <textarea id="'),__append(idPrefix),__append('-text" class="ct-balancing-recorder-comment form-control"></textarea>\n    <div class="ct-balancing-recorder-actions">\n      <button id="'),__append(idPrefix),__append('-start" class="btn btn-primary" data-action="start"><i class="fa fa-play"></i></button>\n      <button id="'),__append(idPrefix),__append('-stop" class="btn btn-warning" data-action="stop"><i class="fa fa-stop"></i></button>\n      <button id="'),__append(idPrefix),__append('-comment" class="btn btn-primary" data-action="comment"><i class="fa fa-comment-o"></i></button>\n      <button id="'),__append(idPrefix),__append('-record" class="btn btn-info" data-action="record"><i class="fa fa-spinner fa-spin"></i></button>\n    </div>\n  </div>\n</div>\n');return __output}}),define("require-css/normalize",[],function(){var e=/([^:])\/+/g,t=function(t){return t.replace(e,"$1/")},n=/[^\:\/]*:\/\/([^\/])*/,r=/^(\/|data:)/;function o(e){return t(e).split("/").reduce(function(e,t,n){return 0===e.length||".."!==t?e.push(t):e.pop(),e},[]).join("/")}function a(e,t,i){if(t=o(t),i=o(i),e.match(r)||e.match(n))return e;e=o(e);var a=i.match(n),c=t.match(n);return!c||a&&a[1]==c[1]&&a[2]==c[2]?u(s(e,t),i):s(e,t)}function s(e,t){if("./"==e.substr(0,2)&&(e=e.substr(2)),e.match(r)||e.match(n))return e;var i=t.split("/"),o=e.split("/");for(i.pop();curPart=o.shift();)".."==curPart?i.pop():i.push(curPart);return i.join("/")}function u(e,t){var n=t.split("/");for(n.pop(),t=n.join("/")+"/",i=0;t.substr(i,1)==e.substr(i,1);)i++;for(;"/"!=t.substr(i,1);)i--;t=t.substr(i+1),e=e.substr(i+1),n=t.split("/");var r=e.split("/");for(out="";n.shift();)out+="../";for(;curPart=r.shift();)out+=curPart+"/";return out.substr(0,out.length-1)}var c=function(e,t,n){for(var r,i,o=/@import\s*((?:"([^"]*)")|(?:'([^']*)'))|url\s*\(\s*(\s*(?:"([^"]*)")|(?:'([^']*)')|[^\)]*\s*)\s*\)/gi;r=o.exec(e);){var s;s=a(i=r[3]||r[2]||r[5]||r[6]||r[4],t,n);var u=r[5]||r[6]?1:0;e=e.substr(0,o.lastIndex-i.length-u-1)+s+e.substr(o.lastIndex-u-1),o.lastIndex=o.lastIndex+(s.length-i.length)}return e};return c.convertURIBase=a,c.absoluteURI=s,c.relativeURI=u,c}),define("css",[],function(){if("undefined"==typeof window)return{load:function(e,t,n){n()}};var e=document.getElementsByTagName("head")[0],t=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)|AndroidWebKit\/([^ ;]*)/)||0,n=!1,r=!0;t[1]||t[7]?n=parseInt(t[1])<6||parseInt(t[7])<=9:t[2]||t[8]||"WebkitAppearance"in document.documentElement.style?r=!1:t[4]&&(n=parseInt(t[4])<18);var i,o,a={};a.pluginBuilder="require-css/css-builder";var s,u=function(){i=document.createElement("style"),e.appendChild(i),o=i.styleSheet||i.sheet},c=0,l=[],d=function(e){o.addImport(e),i.onload=function(){p()},31==++c&&(u(),c=0)},p=function(){s();var e=l.shift();e?(s=e[1],d(e[0])):s=null};return a.normalize=function(e,t){return".css"==e.substr(e.length-4,4)&&(e=e.substr(0,e.length-4)),t(e)},a.load=function(t,a,c,p){(n?function(e,t){if(o&&o.addImport||u(),o&&o.addImport)s?l.push([e,t]):(d(e),s=t);else{i.textContent='@import "'+e+'";';var n=setInterval(function(){try{i.sheet.cssRules,clearInterval(n),t()}catch(e){}},10)}}:function(t,n){var i=document.createElement("link");if(i.type="text/css",i.rel="stylesheet",r)i.onload=function(){i.onload=function(){},setTimeout(n,7)};else var o=setInterval(function(){for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].href==i.href)return clearInterval(o),n()},10);i.href=t,e.appendChild(i)})(a.toUrl(t+".css"),c)},a}),define("app/nls/wmes-ct-balancing",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r))in o?o[n]:o.other},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMB:base":function(e){return"Cycle time"},"BREADCRUMB:browse":function(e){return"Balancing"},"PROPERTY:line":function(e){return"Line"},"PROPERTY:station":function(e){return"Station"},"PROPERTY:station:short":function(e){return"St."},"PROPERTY:order":function(e){return"Order"},"PROPERTY:order:_id":function(e){return"Order no"},"PROPERTY:order:nc12":function(e){return"Product 12NC"},"PROPERTY:order:name":function(e){return"Product name"},"PROPERTY:order:mrp":function(e){return"MRP"},"PROPERTY:order:qty":function(e){return"Quantity"},"PROPERTY:order:workerCount":function(e){return"Worker count"},"PROPERTY:order:sapTaktTime":function(e){return"Takt Time (SAP)"},"PROPERTY:startedAt":function(e){return"Started at"},"PROPERTY:finishedAt":function(e){return"Finished at"},"PROPERTY:d":function(e){return"Duration"},"PROPERTY:stt":function(e){return"% of TT"},"PROPERTY:comment":function(e){return"Comment"},"filter:product":function(e){return"Order/Product"},"filter:d:title":function(e){return"Absolute value, e.g. 10s\nor\nvalue relative to takt time, e.g. 10%"},"balancing:title:idle":function(e){return"Balansowanie"},"balancing:title:started":function(e){return"Measurement started..."},"balancing:title:finished":function(e){return"Measurement finished"},"pceReport:chart:filename":function(e){return"WMES_CT_BALANCING"},"pceReport:chart:title":function(e){return"Balancing"},"pceReport:station":function(e){return t.p(e,"no",0,"en",{0:"All",other:"Station "+t.v(e,"no")})},"pceReport:metric:min":function(e){return"Minimum"},"pceReport:metric:max":function(e){return"Maximum"},"pceReport:metric:avg":function(e){return"Average"},"pceReport:metric:med":function(e){return"Median"},"pceReport:metric:stt":function(e){return"Takt Time (SAP)"}},pl:!0}}),define("app/nls/pl/wmes-ct-balancing",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r))in o?o[n]:o.other},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMB:base":function(e){return"Czas cyklu"},"BREADCRUMB:browse":function(e){return"Balansowanie"},"PROPERTY:line":function(e){return"Linia"},"PROPERTY:station":function(e){return"Stanowisko"},"PROPERTY:station:short":function(e){return"St."},"PROPERTY:order":function(e){return"Zlecenie"},"PROPERTY:order:_id":function(e){return"Nr zlecenia"},"PROPERTY:order:nc12":function(e){return"12NC wyrobu"},"PROPERTY:order:name":function(e){return"Nazwa wyrobu"},"PROPERTY:order:mrp":function(e){return"MRP"},"PROPERTY:order:qty":function(e){return"Ilo do zrobienia"},"PROPERTY:order:workerCount":function(e){return"Ilo osb w zleceniu"},"PROPERTY:order:sapTaktTime":function(e){return"Takt Time (SAP)"},"PROPERTY:startedAt":function(e){return"Czas rozpoczcia"},"PROPERTY:finishedAt":function(e){return"Czas zakoczenia"},"PROPERTY:d":function(e){return"Czas trwania"},"PROPERTY:stt":function(e){return"% TT"},"PROPERTY:comment":function(e){return"Komentarz"},"filter:product":function(e){return"Zlecenie/Wyrb"},"filter:d:title":function(e){return"Warto absolutna, np. 10s\nlub\nrelatywna w stosunku do taktu, np. 10%"},"balancing:title:idle":function(e){return"Balansowanie"},"balancing:title:started":function(e){return"Rozpoczto pomiar..."},"balancing:title:finished":function(e){return"Zakoczono pomiar"},"pceReport:chart:filename":function(e){return"WMES_CT_BALANCING"},"pceReport:chart:title":function(e){return"Balansowanie"},"pceReport:station":function(e){return t.p(e,"no",0,"pl",{0:"Wszystkie",other:"Stanowisko "+t.v(e,"no")})},"pceReport:metric:min":function(e){return"Minimum"},"pceReport:metric:max":function(e){return"Maksimum"},"pceReport:metric:avg":function(e){return"rednia"},"pceReport:metric:med":function(e){return"Mediana"},"pceReport:metric:stt":function(e){return"Takt Time (SAP)"}}}),define("app/wmes-ct-balancing/views/BalancingPceRecorderView",["app/core/Model","app/core/View","app/core/util/decimalSeparator","app/wmes-ct-balancing/BalancingPce","app/wmes-ct-balancing/templates/recorder","css!app/wmes-ct-balancing/assets/recorder","i18n!app/nls/wmes-ct-balancing"],function(e,t,n,r,i){"use strict";return t.extend({template:i,events:{"click .ct-balancing-recorder-hd":function(){this.hide()},"click .ct-balancing-recorder-duration":function(){this.model.get("lastPce")&&!this.model.get("recording")&&this.model.set("commenting",!0)},"click #-start":function(){this.start()},"click #-stop":function(){this.stop()},"click #-comment":function(){this.comment()}},initialize:function(){this.model=new e,this.model.nlsDomain="wmes-ct-balancing",this.reset(),this.listenTo(this.model,"change:active",this.onActiveChange),this.listenTo(this.model,"change:state",this.onStateChange),this.listenTo(this.model,"change:recording",this.onRecordingChange),this.listenTo(this.model,"change:commenting",this.onCommentingChange)},reset:function(e){this.model.set(Object.assign({state:"idle",active:!1,recording:null,commenting:!1,lastPce:null,newOrder:null,order:null,startedAt:null,finishedAt:null},e))},updateOrder:function(e){"started"===this.model.get("state")?this.model.set("newOrder",e):this.model.set("order",e)},toggle:function(e){this.model.get("active")?this.hide():this.show(e)},show:function(e){this.reset({active:!0,order:e}),this.center(),this.updateValue()},hide:function(){clearInterval(this.timers.updateValue),this.timers.updateValue=null,this.reset()},start:function(){var e=this.model.get("newOrder");e&&this.model.set({newOrder:null,order:e}),this.model.set({state:"started",startedAt:new Date}),this.timers.updateValue=setInterval(this.updateValue.bind(this),40),this.updateValue()},stop:function(){this.model.set({state:"finished",finishedAt:new Date}),clearInterval(this.timers.updateValue),this.timers.updateValue=null,this.updateValue(),this.recordValue()},comment:function(){var e=this,t=e.model.get("lastPce"),n=e.$id("text"),r=t.get("comment")||"",i=n.val().trim();if(0===i.replace(/[^A-Za-z0-9]+/,"").length&&(i=""),i!==r){e.model.set("recording","started"),n.prop("disabled",!0);var o=t.save({comment:i},{wait:!0});o.fail(function(){e.model.set("recording","failure"),e.timers.recorded=setTimeout(function(){e.model.set("recording",null),n.prop("disabled",!1).focus()},2e3)}),o.done(function(){e.model.set("recording","success"),e.timers.recorded=setTimeout(function(){n.prop("disabled",!1),e.model.set({recording:null,commenting:!1})},2e3)})}else e.model.set({recording:null,commenting:!1})},updateValue:function(){var e=this.model.get("startedAt"),t=0;e&&(t=(Date.now()-e.getTime())/1e3);var r=t.toFixed(1).split("."),i=r[0]+'<span class="ct-balancing-recorder-duration-separator">'+n+"</span>"+r[1];this.$id("value").html(i)},recordValue:function(){var e=this;e.model.set("recording","started");var t=new r({order:e.model.get("order"),line:window.WMES_LINE_ID,station:window.WMES_STATION,startedAt:e.model.get("startedAt"),finishedAt:e.model.get("finishedAt")}),n=t.save();n.fail(function(){e.model.set("recording","failure"),e.timers.recorded=setTimeout(e.model.set.bind(e.model,"recording",null),2e3)}),n.done(function(){e.model.set({recording:"success",lastPce:t}),e.timers.recorded=setTimeout(e.model.set.bind(e.model,"recording",null),2e3)})},center:function(){var e=this.el.getBoundingClientRect();this.el.style.marginLeft=-1*Math.round(e.width/2)+"px",this.el.style.marginTop=-1*Math.round(e.height/2)+"px"},onActiveChange:function(){this.$el.toggleClass("hidden",!this.model.get("active"))},onStateChange:function(){var e=this.model.get("state");this.$el[0].dataset.state=e,this.$id("title").html(this.t("balancing:title:"+e))},onRecordingChange:function(){var e=this.$id("record").removeClass("btn-danger btn-success btn-info"),t=e.find(".fa").removeClass("fa-thumbs-up fa-thumbs-down fa-spinner fa-spin");switch(this.model.get("recording")){case"started":e.addClass("btn-info"),t.addClass("fa-spinner fa-spin"),this.$el.addClass("is-recording");break;case"failure":e.addClass("btn-danger"),t.addClass("fa-thumbs-down");break;case"success":e.addClass("btn-success"),t.addClass("fa-thumbs-up");break;default:this.$el.removeClass("is-recording")}},onCommentingChange:function(){var e=this.model.get("commenting");this.$el.toggleClass("is-commenting",e),e&&this.$id("text").val(this.model.get("lastPce").get("comment")||"").select()}})}),function(e,t){"function"==typeof define&&define.amd?define("js2form",t):e.js2form=t()}(this,function(){"use strict";var e=/^\[\d+?\]/,t=/^[a-zA-Z_][a-zA-Z_0-9]*/,n=/\[[0-9]+?\]$/,r=/(.*)(\[)([0-9]*)(\])$/,i=/\[([0-9]+)\]\[([0-9]+)\]/g,o=/INPUT|TEXTAREA/i;function a(e,t){var n,r,i;if(e instanceof Array)for(r=0;r<e.length;r++)String(e[r].value)==String(t)&&(e[r].checked=!0);else if(o.test(e.nodeName)&&"file"!==e.type)e.value=t;else if(/SELECT/i.test(e.nodeName))for(r=0,i=(n=e.getElementsByTagName("option")).length;r<i;r++)if(n[r].value==t){if(n[r].selected=!0,e.multiple)break}else e.multiple||(n[r].selected=!1)}function s(e,t,n){var o,a,s,u,c,l=[],d=e.split(t);for(e=e.replace(i,"[$1].[$2]"),c=0;c<d.length;c++)o=d[c],l.push(o),null!=o.match(r)&&(s=(a=l.join(t)).replace(r,"$3"),void 0===n[a=a.replace(r,"$1")]&&(n[a]={lastIndex:-1,indexes:{}}),""!=s&&void 0!==n[a].indexes[s]||(n[a].lastIndex++,n[a].indexes[s]=n[a].lastIndex),u=n[a].indexes[s],l[l.length-1]=o.replace(r,"$1$2"+u+"$4"));return a=(a=l.join(t)).replace("].[","][")}function u(e,t){var n,r,i=[];if(1==arguments.length&&(t=0),null==e)i=[{name:"",value:null}];else if("string"==typeof e||"number"==typeof e||"date"==typeof e||"boolean"==typeof e)i=[{name:"",value:e}];else if(e instanceof Array)for(n=0;n<e.length;n++)r="["+n+"]",i=i.concat(c(e[n],r,t+1));else for(n in e)r=n,i=i.concat(c(e[n],r,t+1));return i}function c(n,r,i){var o,a,s,c=[],l=u(n,i+1);for(a=0;a<l.length;a++)o=r,e.test(l[a].name)?o+=l[a].name:t.test(l[a].name)&&(o+="."+l[a].name),s={name:o,value:l[a].value},c.push(s);return c}return function(e,t,r,i,o,c){var l,d;arguments.length<3&&(r="."),arguments.length,arguments.length<5&&(o=!1),l=u(t),d=function e(t,r,i,o,a){arguments.length<4&&(o={});for(var u,c,l,d,p,f,h,m={},g=t.firstChild;g;){if(u="",g.name&&""!=g.name?u=g.name:r&&g.id&&""!=g.id&&(u=g.id),""==u){var y=e(g,r,i,o,a);for(l in y)if(void 0===m[l])m[l]=y[l];else for(d=0;d<y[l].length;d++)m[l].push(y[l][d])}else if(/SELECT/i.test(g.nodeName))for(p=0,h=g.getElementsByTagName("option"),f=h.length;p<f;p++)a&&(h[p].selected=!1),c=(c=s(u,i,o)).replace(n,"[]"),m[c]=g;else/INPUT/i.test(g.nodeName)&&/CHECKBOX|RADIO/i.test(g.type)?(a&&(g.checked=!1),c=(c=s(u,i,o)).replace(n,"[]"),m[c]||(m[c]=[]),m[c].push(g)):(a&&(g.value=""),c=s(u,i,o),m[c]=g);g=g.nextSibling}return m}(e,o,r,{},!1!==c);for(var p=0;p<l.length;p++){var f=l[p].name,h=l[p].value;void 0!==d[f]?a(d[f],h):void 0!==d[f.replace(n,"[]")]&&a(d[f.replace(n,"[]")],h)}}}),function(e,t){"function"==typeof define&&define.amd?define("form2js",t):e.form2js=t()}(this,function(){"use strict";function e(e,r,i){var o=n(e,r,i);return o.length>0?o:t(e,r,i)}function t(e,t,r){for(var i=[],o=e.firstChild;o;)i=i.concat(n(o,t,r)),o=o.nextSibling;return i}function n(e,n,i){var o,a,s,u=function(e,t){return e.name&&""!=e.name?e.name:t&&e.id&&""!=e.id?e.id:""}(e,i);return(o=n&&n(e))&&o.name?s=[o]:""!=u&&e.nodeName.match(/INPUT|TEXTAREA/i)?s=[{name:u,value:a=r(e)}]:""!=u&&e.nodeName.match(/SELECT/i)?(a=r(e),s=[{name:u.replace(/\[\]$/,""),value:a}]):s=t(e,n,i),s}function r(e){if(e.disabled)return null;switch(e.nodeName){case"INPUT":case"TEXTAREA":switch(e.type.toLowerCase()){case"radio":if(e.checked&&"false"===e.value)return!1;case"checkbox":if(e.checked&&"true"===e.value)return!0;if(!e.checked&&"true"===e.value)return!1;if(e.checked)return e.value;break;case"button":case"reset":case"submit":case"image":return"";default:return e.value}break;case"SELECT":return function(e){var t,n,r,i=[];if(!e.multiple)return e.value;for(t=e.getElementsByTagName("option"),n=0,r=t.length;n<r;n++)t[n].selected&&i.push(t[n].value);return i}(e)}return null}return function(t,n,r,i,o){void 0!==r&&null!=r||(r=!0),void 0!==n&&null!=n||(n="."),arguments.length<5&&(o=!1);var a,s=[],u=0;if((t="string"==typeof t?document.getElementById(t):t).constructor==Array||"undefined"!=typeof NodeList&&t.constructor==NodeList)for(;a=t[u++];)s=s.concat(e(a,i,o));else s=e(t,i,o);return function(e,t,n){var r,i,o,a,s,u,c,l,d,p,f,h,m,g={},y={};for(r=0;r<e.length;r++)if(s=e[r].value,!t||""!==s&&null!==s){for(h=e[r].name,m=h.split(n),u=[],c=g,l="",i=0;i<m.length;i++)if((f=m[i].split("][")).length>1)for(o=0;o<f.length;o++)if(0==o?f[o]=f[o]+"]":o==f.length-1?f[o]="["+f[o]:f[o]="["+f[o]+"]",p=f[o].match(/([a-z_]+)?\[([a-z_][a-z0-9_]+?)\]/i))for(a=1;a<p.length;a++)p[a]&&u.push(p[a]);else u.push(f[o]);else u=u.concat(f);for(i=0;i<u.length;i++)(f=u[i]).indexOf("[]")>-1&&i==u.length-1?(d=f.substr(0,f.indexOf("[")),l+=d,c[d]||(c[d]=[]),c[d].push(s)):f.indexOf("[")>-1?(d=f.substr(0,f.indexOf("[")),p=f.replace(/(^([a-z_]+)?\[)|(\]$)/gi,""),y[l+="_"+d+"_"+p]||(y[l]={}),""==d||c[d]||(c[d]=[]),i==u.length-1?""==d?(c.push(s),y[l][p]=c[c.length-1]):(c[d].push(s),y[l][p]=c[d][c[d].length-1]):y[l][p]||(/^[a-z_]+\[?/i.test(u[i+1])?c[d].push({}):c[d].push([]),y[l][p]=c[d][c[d].length-1]),c=y[l][p]):(l+=f,i<u.length-1?(c[f]||(c[f]={}),c=c[f]):c[f]=s)}return g}(s,r,n)}}),define("app/mrpControllers/MrpController",["require","../i18n","../time","../core/Model","app/data/subdivisions"],function(e,t,n,r,i){"use strict";return r.extend({urlRoot:"/mrpControllers",clientUrlRoot:"#mrpControllers",topicPrefix:"mrpControllers",privilegePrefix:"DICTIONARIES",nlsDomain:"mrpControllers",labelAttribute:"_id",defaults:{subdivision:null,description:null,deactivatedAt:null,replacedBy:null,inout:0},getSubdivision:function(){return i.get(this.get("subdivision"))||null},serialize:function(){var r=this.toJSON();return r.subdivision=e("app/orgUnits/util/renderOrgUnitPath")(this,!0),r.deactivatedAt=r.deactivatedAt?n.format(r.deactivatedAt,"LL"):"",r.inout=t("mrpControllers","inout:"+r.inout),r},serializeRow:function(){var e=this.serialize();return e.className=this.get("deactivatedAt")?"is-deactivated":"",e}})}),define("app/mrpControllers/MrpControllerCollection",["../user","../core/Collection","./MrpController"],function(e,t,n){"use strict";return t.extend({model:n,rqlQuery:"sort(_id)",comparator:"_id",getForCurrentUser:function(){var t=e.getDivision(),n=e.getSubdivision();return this.filter(function(r){if(e.data.super||!t||"prod"!==t.get("type"))return!0;var i=r.getSubdivision();if(!i)return!0;if(n)return i.id===n.id;var o=i.get("division");return!o||o===t.id})}})}),define("app/data/mrpControllers",["app/mrpControllers/MrpControllerCollection","./createStorage"],function(e,t){"use strict";return t("MRP_CONTROLLERS","mrpControllers",e)}),define("app/prodFlows/ProdFlow",["../core/Model","app/data/mrpControllers"],function(e,t){"use strict";return e.extend({urlRoot:"/prodFlows",clientUrlRoot:"#prodFlows",topicPrefix:"prodFlows",privilegePrefix:"DICTIONARIES",nlsDomain:"prodFlows",labelAttribute:"name",defaults:{mrpController:null,name:null,deactivatedAt:null},parse:function(e){return"string"==typeof e.mrpController?e.mrpController=[e.mrpController]:Array.isArray(e.mrpController)||(e.mrpController=[]),e},getSubdivision:function(){var e=this.get("mrpController");if(!Array.isArray(e)||!e.length)return null;var n=t.get(e[0]);return n?n.getSubdivision():null}})}),define("app/prodFlows/ProdFlowCollection",["../core/Collection","./ProdFlow"],function(e,t){"use strict";return e.extend({model:t,rqlQuery:"select(mrpController,name,deactivatedAt)&sort(name)",comparator:"name"})}),define("app/data/prodFlows",["app/prodFlows/ProdFlowCollection","./createStorage"],function(e,t){"use strict";return t("PROD_FLOWS","prodFlows",e)}),define("app/workCenters/WorkCenter",["../core/Model","app/data/mrpControllers","app/data/prodFlows"],function(e,t,n){"use strict";return e.extend({urlRoot:"/workCenters",clientUrlRoot:"#workCenters",topicPrefix:"workCenters",privilegePrefix:"DICTIONARIES",nlsDomain:"workCenters",labelAttribute:"_id",defaults:{mrpController:null,prodFlow:null,description:null,deactivatedAt:null},getSubdivision:function(){var e;if(this.get("mrpController"))e=t.get(this.get("mrpController"));else{var r=n.get(this.get("prodFlow"));r&&(e=t.get((r.get("mrpController")||[])[0]))}return e?e.getSubdivision():null}})}),define("app/workCenters/WorkCenterCollection",["../core/Collection","./WorkCenter"],function(e,t){"use strict";return e.extend({model:t,rqlQuery:"select(mrpController,prodFlow,description,deactivatedAt)&sort(_id)",comparator:"_id"})}),define("app/data/workCenters",["app/workCenters/WorkCenterCollection","./createStorage"],function(e,t){"use strict";return t("WORK_CENTERS","workCenters",e)}),define("app/prodLines/ProdLine",["../core/Model","../data/workCenters"],function(e,t){"use strict";return e.extend({urlRoot:"/prodLines",clientUrlRoot:"#prodLines",topicPrefix:"prodLines",privilegePrefix:"DICTIONARIES",nlsDomain:"prodLines",labelAttribute:"_id",defaults:{workCenter:null,description:null,inventoryNo:null,deactivatedAt:null},getSubdivision:function(){var e=t.get(this.get("workCenter"));return e?e.getSubdivision():null}})}),define("app/prodLines/ProdLineCollection",["../user","../core/Collection","./ProdLine"],function(e,t,n){"use strict";return t.extend({model:n,rqlQuery:"select(workCenter,description,inventoryNo,deactivatedAt)&sort(workCenter,_id)",getForCurrentUser:function(){var t=e.getDivision(),n=e.getSubdivision();return this.filter(function(r){if(e.data.super||!t||"prod"!==t.get("type"))return!0;var i=r.getSubdivision();if(!i)return!0;if(n)return i.id===n.id;var o=i.get("division");return!o||o===t.id})}})}),define("app/data/prodLines",["app/prodLines/ProdLineCollection","./createStorage"],function(e,t){"use strict";return t("PROD_LINES","prodLines",e)}),define("app/core/util/matchesEquals",["underscore"],function(e){"use strict";return function(t,n,r){if(void 0===r)return!0;var i=e.find(t.selector.args,function(e){return("eq"===e.name||"in"===e.name)&&e.args[0]===n});return!i||("eq"===i.name?String(i.args[1])===String(r):Array.isArray(i.args[1])&&-1!==i.args[1].indexOf(r))}}),define("app/core/util/matchesProdLine",["underscore","app/user","app/data/prodLines"],function(e,t,n){"use strict";return function(r,i){var o=e.find(r.selector.args,function(e){return"eq"===e.name&&"prodLine"===e.args[0]});if(o)return o.args[1]===i;if(t.data.super)return!0;var a=n.get(i);if(!a)return!0;var s=t.getDivision();if(!s)return!0;var u=t.getSubdivision(),c=a.getSubdivision();return u?u===c:s.id===c.get("division")}}),define("app/orgUnits/util/limitOrgUnits",["underscore","app/user"],function(e,t){"use strict";return function(n,r){r=e.assign({active:!0,division:!0,subdivision:!0,divisionType:null,subdivisionType:null},r);var i=t.getSubdivision();if(!r.subdivision||!i||r.active&&!i.isActive()||r.subdivisionType&&i.get("type")!==r.subdivisionType){var o=t.getDivision();return!r.division||!o||r.active&&!o.isActive()||r.divisionType&&o.get("type")!==r.divisionType||n.push({name:"eq",args:["division",o.id]}),n}n.push({name:"eq",args:["subdivision",i.id]})}}),define("app/core/util/getShiftEndDate",["app/time"],function(e){"use strict";return function(t,n){var r=e.getMoment(t);return 1===n?r.hours(6):2===n?r.hours(14):r.hours(22),r.add(8,"hours").subtract(1,"seconds"),r.toDate()}}),define("app/orders/util/resolveProductName",[],function(){"use strict";return function(e){return e?(e.name||e.description||"").trim():""}}),define("app/orgUnits/util/renderOrgUnitPath",["underscore","app/data/divisions","app/data/subdivisions","app/data/mrpControllers","app/data/workCenters","app/data/prodFlows","app/data/prodLines"],function(e,t,n,r,i,o,a){"use strict";return function(e,u,c){if(!e)return"?";var l=[],d="???";return(e.constructor!==a.model||(l.unshift(e),d=e.get("workCenter"),e=i.get(d)))&&(e.constructor!==i.model||(l.unshift(e),d=e.get("prodFlow")||e.get("mrpController"),e=e.get("prodFlow")?o.get(d):r.get(d)))?e.constructor!==o.model||(l.unshift(e),(e=(d=e.get("mrpController")||[]).map(function(e){return r.get(e)}).filter(function(e){return!!e})).length)?(!(e.constructor===r.model||e[0]&&e[0].constructor===r.model)||(l.unshift(e),d=(e[0]||e).get("subdivision"),e=n.get(d)))&&(e.constructor!==n.model||(l.unshift(e),d=e.get("division"),e=t.get(d)))?(e.constructor===t.model&&l.unshift(e),!1!==c&&l.pop(),0===l.length?"???":l.map(function(e){return Array.isArray(e)?e.map(function(e){return s(e,u)}).join("; "):s(e,u)}).join(" \\ ")):"???"+d+"???":"???"+d.join("; ")+"???":"???"+d+"???"};function s(t,n){var r=e.escape(t.getLabel()),i=t.get("deactivatedAt")?"text-decoration: line-through!important":"";return n?'<a href="'+t.genClientUrl()+'" style="'+i+'">'+r+"</a>":'<span style="'+i+'">'+r+"</span>"}}),define("app/core/templates/userInfo",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<span class="userInfo" data-clickable="'),__append("undefined"==typeof clickable||!0===clickable?1:0),__append('" data-user-id="'),__append(userInfo?userInfo.id:""),__append('">'),userInfo&&(__append('<span class="userInfo-label" title="'),__append(userInfo.title||""),__append('">'),__append(escapeFn(userInfo.label)),__append("</span>"),!(userInfo.cname||userInfo.ip&&"0.0.0.0"!==userInfo.ip)||"undefined"!=typeof noIp&&!1!==noIp||(__append(' <span class="userInfo-cname">('),__append(escapeFn(userInfo.cname||userInfo.ip)),__append(")</span>"))),__append("</span>\n");return __output}}),define("app/prodShiftOrders/util/decorateProdShiftOrder",["app/time","app/i18n","app/user","app/data/subdivisions","app/data/mrpControllers","app/data/prodFlows","app/data/prodLines","app/orgUnits/util/renderOrgUnitPath","app/core/util/getShiftStartInfo","app/core/templates/userInfo","app/orders/util/resolveProductName"],function(e,t,n,r,i,o,a,s,u,c,l){"use strict";return function(i,a){var s=i.toJSON(),d=Date.parse(s.startedAt),p=Date.parse(s.finishedAt);if(s.date)s.date=e.format(s.date,"L");else{var f=u(s.startedAt);s.date=f.moment.format("L"),s.shift=f.no}if(s.shift=t("core","SHIFT:"+s.shift),s.startedAt=e.format(s.startedAt,"LTS"),s.finishedAt=e.format(s.finishedAt,"LTS"),s.duration=p?e.toString((p-d)/1e3,!a.details):"",s.creator=c({userInfo:s.creator}),a.orgUnits){var h=r.get(s.subdivision),m=o.get(s.prodFlow);s.subdivision=h?h.getLabel():"?",s.prodFlow=m?m.getLabel():"?",s.mrpControllers=Array.isArray(s.mrpControllers)&&s.mrpControllers.length?s.mrpControllers.join(" "):""}if(s.prodShift=s.prodShift?'<a href="#prodShifts/'+s.prodShift+'">'+s.date+", "+s.shift+"</a>":s.date+", "+s.shift,s.orderData){var g=(s.orderData.operations||{})[s.operationNo]||{};s.productName=l(s.orderData),s.operationName=g.name||"",s.order=s.orderId,s.operation=s.operationNo,s.productName&&(s.order+=": "+s.productName),s.operationName&&(s.operation+=": "+s.operationName),s.product=s.productName,s.orderData.nc12&&s.orderData.nc12!==s.orderId&&(s.product=s.orderData.nc12+": "+s.product)}else s.productName="",s.operationName="",s.order=s.orderId,s.operation=s.operationNo;a.orderUrl&&n.isAllowedTo("ORDERS:VIEW")&&(s.orderUrl="#"+(s.mechOrder?"mechOrders":"orders")+"/"+encodeURIComponent(s.orderId)),s.taktTimeOk=i.isTaktTimeOk(),s.taktTimeSap=i.getTaktTime(),s.taktTime=i.getActualTaktTime(),s.taktTimeEff=i.getTaktTimeEfficiency(),s.workerCountSap=i.getWorkerCountSap(),s.efficiency="";var y=i.getEfficiency();return y?s.efficiency=Math.round(100*y)+"%":s.taktTimeEff&&(s.efficiency=s.taktTimeEff+"%"),s}}),define("app/prodShiftOrders/ProdShiftOrder",["underscore","../user","../time","../data/prodLog","../data/subdivisions","../core/Model","../core/util/getShiftEndDate","../orders/util/resolveProductName","./util/decorateProdShiftOrder"],function(e,t,n,r,i,o,a,s,u){"use strict";return o.extend({urlRoot:"/prodShiftOrders",clientUrlRoot:"#prodShiftOrders",topicPrefix:"prodShiftOrders",privilegePrefix:"PROD_DATA",nlsDomain:"prodShiftOrders",initialize:function(e,t){o.prototype.initialize.apply(this,arguments),this.settings=t?t.settings:null},getLabel:function(e){return(!1===e?"":this.get("prodLine")+": ")+this.get("orderId")+", "+this.get("operationNo")},serialize:function(e){return u(this,e)},serializeRow:function(e){var t=this.serialize(e);t.className=this.get("mechOrder")||!this.get("sapTaktTime")?"":t.taktTimeOk?"success":"warning";var n=this.get("mrpControllers")||[],r=this.get("orderData"),i=r&&r.mrp;return i&&-1===n.indexOf(i)?(t.mrpControllersText="+"+i+"\n-"+t.mrpControllers,t.mrpControllers=i+' <span style="text-decoration: line-through">'+t.mrpControllers+"</span>"):t.mrpControllersText=t.mrpControllers,t},serializeDetails:function(){return this.serialize({orgUnits:!0,orderUrl:!0,details:!0})},onShiftChanged:function(){this.clear()},onOrderChanged:function(e,r,i,o){this.prepareOperations(r);var a=e.get("date"),s=n.getMoment().toDate();s<a&&(s=new Date(a.getTime())),this.set({prodShift:e.id,division:e.get("division"),subdivision:e.get("subdivision"),mrpControllers:e.get("mrpControllers"),prodFlow:e.get("prodFlow"),workCenter:e.get("workCenter"),prodLine:e.prodLine.id,date:a,shift:e.get("shift"),mechOrder:null===r.no,subdivisionType:e.getSubdivisionType(),orderId:r.no||r.nc12,operationNo:i,orderData:r,workerCount:o,totalQuantity:0,quantityDone:0,quantityLost:0,losses:null,creator:t.getInfo(),startedAt:s,finishedAt:null,master:e.get("master"),leader:e.get("leader"),operator:e.get("operator"),operators:e.get("operators"),spigot:null,sapTaktTime:null,lastTaktTime:null,avgTaktTime:null,totalQuantityDone:null}),this.set("sapTaktTime",this.getSapTaktTime()),this.generateId(e)},onOrderCorrected:function(e,n,r){var i=n.no||n.nc12;if(i===this.get("orderId")&&r===this.get("operationNo"))return null;this.prepareOperations(n);var o=this.get("spigot");o&&(o.forceCheck=!0);var a={mechOrder:null===n.no,orderId:i,operationNo:r,orderData:n,creator:t.getInfo()};return this.set(a),this.set("sapTaktTime",this.getSapTaktTime()),a.sapTaktTime=this.get("sapTaktTime"),this.get("workerCount")>this.getMaxWorkerCount()&&e.changeWorkerCount(0),this.get("quantityDone")>this.getMaxQuantityDone()&&e.changeQuantityDone(0),a},onOrderContinued:function(e){this.set({prodShift:e.id,division:e.get("division"),subdivision:e.get("subdivision"),mrpControllers:e.get("mrpControllers"),prodFlow:e.get("prodFlow"),workCenter:e.get("workCenter"),prodLine:e.prodLine.id,date:e.get("date"),shift:e.get("shift"),subdivisionType:e.getSubdivisionType(),workerCount:0,totalQuantity:0,quantityDone:0,quantityLost:0,losses:null,creator:t.getInfo(),startedAt:n.getMoment().toDate(),finishedAt:null,master:e.get("master"),leader:e.get("leader"),operator:e.get("operator"),operators:e.get("operators"),spigot:null,sapTaktTime:null,lastTaktTime:null,avgTaktTime:null,totalQuantityDone:null}),this.set("sapTaktTime",this.getSapTaktTime()),this.generateId(e)},generateId:function(e){this.set("_id",r.generateId(this.get("startedAt"),e.id+this.get("orderId")))},onWorkEnded:function(){this.clear()},isMechOrder:function(){return this.get("mechOrder")},getOrderNo:function(){var e=this.get("orderData");return e?e.no||"?":"-"},getNc12:function(){var e=this.get("orderData");return e?e.nc12||"?":"-"},getProductName:function(){var e=this.get("orderData");return e?s(e)||"?":"-"},getOperation:function(){var e=this.get("orderData"),t=this.get("operationNo");return e&&t&&e.operations&&e.operations[t]?e.operations[t]:null},getOperationName:function(){var e=this.getOperation(),t=this.get("operationNo");return(e?e.name:"")||t||"-"},getDurationString:function(e,t){var r=Date.parse(this.get("startedAt")),i=Date.parse(this.get("finishedAt"))||e||Date.now();return n.toString(Math.round((i-r)/1e3),t)},getEfficiency:function(){return this.constructor.getEfficiency(this.attributes,!1)},getTaktTimeEfficiency:function(){var e=parseFloat(this.get("sapTaktTime")||this.getSapTaktTime())||0,t=parseFloat(this.getActualTaktTime())||0;return e&&t?Math.round(e/t*100):0},isTaktTimeOk:function(){return(Math.round(this.get("avgTaktTime")/1e3)||0)<=(this.get("sapTaktTime")||0)},getSapTaktTime:function(){var e=this.get("orderData"),t=this.get("operationNo");if(!e||!t)return 0;var n=e.operations?e.operations[t]:null;if(!n)return 0;var r=this.get("workerCount");if(r||(r=this.getWorkerCountSap()),"number"!=typeof r||0===r||n.laborTime<=0)return 0;var i=this.constructor.getTaktTimeCoeff(this.attributes);return Math.max(Math.round(n.laborTime*i/r*3600/100),1)},getIptTaktTime:function(){return Math.round((this.get("iptTaktTime")||0)/1e3)},getLastTaktTime:function(){return Math.round((this.get("lastTaktTime")||0)/1e3)},getAvgTaktTime:function(){return Math.round((this.get("avgTaktTime")||0)/1e3)},getTaktTime:function(){return this.get("orderData")&&this.get("operationNo")?this.getSapTaktTime()||"?":"-"},getActualTaktTime:function(){var e=this.getAvgTaktTime();if(e)return e;var t=n.getMoment(this.get("finishedAt"));if(!t.isValid())return"-";var r=t.diff(this.get("startedAt"),"seconds"),i=this.get("quantityDone");return i?Math.max(1,Math.round(r/i)):"?"},getWorkerCountSap:function(){var e=this.get("orderData"),t=this.get("operationNo");if(!e||!t)return"-";var n=e.operations?e.operations[t]:null;return!n||n.laborTime<=0||n.machineTime<=0?"?":Math.max(Math.round(n.laborTime/n.machineTime),1)},getWorkerCount:function(){return this.get("workerCount")||0},getWorkerCountForEdit:function(){var e=this.getWorkerCount();return 0!==e?e:"string"==typeof(e=this.getWorkerCountSap())||0===e?0:e},getMaxWorkerCount:function(){var e=this.getWorkerCountSap();return"number"!=typeof e||this.settings.isTaktTimeEnabled(this.get("prodLine"))?15:e+Math.max(1,Math.round(.25*e))},getMaxQuantityDone:function(){var e=this.get("orderData");return e&&e.qty&&!this.settings.isTaktTimeEnabled(this.get("prodLine"))?Math.ceil(1.25*e.qty):999},getStartedAt:function(){var e=this.get("startedAt");return e?n.format(e,"LTS"):"?"},getQuantityDone:function(){return this.get("quantityDone")||0},getSubdivisionType:function(){var e=i.get(this.get("subdivision"));return e?e.get("type"):null},getSpigotComponent:function(t,n){var r=this.get("orderData");if(e.isEmpty(t)||!r||!Array.isArray(r.bom))return null;t=t.split("\n").map(function(e){return new RegExp(e,"i")}),n=e.isEmpty(n)?[]:n.split("\n").map(function(e){return new RegExp(e,"i")});for(var i=r.bom,o=0;o<i.length;++o){var a=i[o];if(this.isValidSpigotComponent(a,t,n)){if(e.isEmpty(a.nc12)){var s=a.name.match(/([0-9]{12})/);if(!s)continue;a=e.assign({},a,{nc12:s[1]})}return a}}return null},isValidSpigotComponent:function(e,t,n){for(var r=0;r<n.length;++r)if(n[r].test(e.name))return!1;for(var i=0;i<t.length;++i)if(t[i].test(e.name))return!0;return!1},getSpigotInsertComponent:function(t){if(!t)return null;var n={};(t||"").split("\n").forEach(function(e){var t=e.split(":"),r=t[0].trim();t[1].split(", ").forEach(function(e){n[e.trim()]=r})});var r=this.getNc12(),i=n[r];return i?e.find(this.get("orderData").bom,function(e){return e.nc12===i}):null},getOrderIdType:function(){return"assembly"===this.getSubdivisionType()?"no":"nc12"},hasOrderData:function(){return!!this.get("orderId")&&!!this.get("operationNo")&&!!this.get("orderData")},isEditable:function(){return this.hasEnded()&&!this.isFromPressWorksheet()},hasEnded:function(){return null!=this.get("finishedAt")},isFromPressWorksheet:function(){return null!=this.get("pressWorksheet")},finish:function(){if(!this.id||this.hasEnded())return null;var e=n.getMoment().toDate(),t=a(this.get("date"),this.get("shift"));return e>t&&(e=t),this.set("finishedAt",e),{_id:this.id,finishedAt:e}},prepareOperations:function(t){if(Array.isArray(t.operations)){var n={};t.operations.forEach(function(e){""!==e.workCenter&&-1!==e.laborTime&&(n[e.no]=e)}),t.operations=n}else e.isObject(t.operations)||(t.operations={});return t}},{parse:function(e){return["date","startedAt","finishedAt","createdAt"].forEach(function(t){"string"==typeof e[t]&&(e[t]=new Date(e[t]))}),e},getEfficiency:function(e){var t=this.getTaktTimeCoeff(e),n=e.laborTime*t/100*e.totalQuantity/(e.workDuration*e.workerCount);return isNaN(n)||!isFinite(n)?0:n},getOperation:function(e){return e.orderData&&e.orderData.operations&&e.orderData.operations[e.operationNo]||null},getTaktTimeCoeff:function(e){return this.getWcTaktTimeCoeff(e.orderData&&e.orderData.taktTimeCoeff,this.getOperation(e))},getWcTaktTimeCoeff:function(e,t){return e&&t&&(e[t.workCenter+"/"+t.no]||e["*/"+t.no]||e[t.workCenter]||e["*"])||1}})}),define("app/prodShiftOrders/ProdShiftOrderCollection",["../time","../data/prodLines","../core/Collection","../core/util/matchesEquals","../core/util/matchesProdLine","../orgUnits/util/limitOrgUnits","./ProdShiftOrder"],function(e,t,n,r,i,o,a){"use strict";return n.extend({model:a,theadHeight:2,rqlQuery:function(t){var n=[{name:"ge",args:["startedAt",e.getMoment().subtract(1,"months").valueOf()]}];return o(n,{divisionType:"prod"}),t.Query.fromObject({fields:{creator:0,losses:0,"orderData.bom":0,"orderData.documents":0},sort:{startedAt:-1},limit:-1337,selector:{name:"and",args:n}})},hasOrMatches:function(e){return!!this.get(e._id)||i(this.rqlQuery,e.prodLine)&&r(this.rqlQuery,"orderId",e.orderId)&&r(this.rqlQuery,"orderMrp",e.orderMrp)&&r(this.rqlQuery,"shift",e.shift)}})}),define("app/orderDocuments/templates/localOrderPicker",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<form class="orderDocuments-localOrderPicker '),__append(touch?"is-touch":""),__append('" autocomplete="off">\n  <div class="form-group">\n    <label for="'),__append(idPrefix),__append('-orderNo" class="control-label is-required">'),__append(helpers.t("localOrderPicker:orderNo")),__append('</label>\n    <input id="'),__append(idPrefix),__append('-orderNo" name="orderNo" class="form-control" type="text" autocomplete="new-password" required maxlength="15" pattern="^([0-9]{9}|[0-9]{15})$" autofocus>\n  </div>\n  <div class="row">\n    <div class="col-md-6 orderDocuments-localOrderPicker-numpad">\n      '),function(){__append('<div id="'),__append(idPrefix),__append('-numpad" class="orderDocuments-numpad">\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="1">1</button>\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="2">2</button>\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="3">3</button>\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="4">4</button>\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="5">5</button>\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="6">6</button>\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="7">7</button>\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="8">8</button>\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="9">9</button>\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="LEFT">&lt;</button>\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="0">0</button>\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="RIGHT">&gt;</button>\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="BACKSPACE"><i class="fa fa-long-arrow-left"></i></button>\n  <button type="button" class="btn btn-default" tabindex="-1" disabled></button>\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="CLEAR"><i class="fa fa-eraser"></i></button>\n</div>\n')}.call(this),__append('\n    </div>\n    <div id="'),__append(idPrefix),__append('-plannedOrders" class="col-md-3 orderDocuments-localOrderPicker-plannedOrders">\n      <label class="control-label">'),__append(helpers.t("localOrderPicker:plannedOrders")),__append('</label>\n      <i class="fa fa-spinner fa-spin"></i>\n    </div>\n    <div id="'),__append(idPrefix),__append('-lastOrders" class="col-md-3 orderDocuments-localOrderPicker-lastOrders">\n      <label class="control-label">'),__append(helpers.t("localOrderPicker:lastOrders")),__append('</label>\n      <i class="fa fa-spinner fa-spin"></i>\n    </div>\n  </div>\n  <div class="form-actions">\n    <button id="'),__append(idPrefix),__append('-submit" class="btn btn-primary '),__append(touch?"btn-lg":""),__append('" type="submit"><i class="fa fa-search"></i><span>'),__append(helpers.t("localOrderPicker:submit")),__append("</span></button>\n  </div>\n</form>\n");return __output}}),define("app/orderDocuments/views/LocalOrderPickerView",["underscore","jquery","js2form","form2js","app/i18n","app/time","app/viewport","app/core/View","app/core/util/embedded","app/prodShiftOrders/ProdShiftOrderCollection","app/orderDocuments/templates/localOrderPicker"],function(e,t,n,r,i,o,a,s,u,c,l){"use strict";return s.extend({dialogClassName:"orderDocuments-localOrderPicker-dialog",template:l,events:{submit:function(){return this.submitForm(),!1},"click #-numpad > .btn":function(e){this.pressNumpadKey(e.currentTarget.dataset.key),this.toggleSubmit()},"click #-plannedOrders > .btn":function(e){this.selectOrderNo(e.currentTarget.dataset.order),this.toggleSubmit()},"click #-lastOrders > .btn":function(e){this.selectOrderNo(e.currentTarget.dataset.order),this.toggleSubmit()},"input #-orderNo":"toggleSubmit"},initialize:function(){this.plannedOrders=null,this.lastOrders=new c(null,{rqlQuery:"select(orderId)&sort(-startedAt)&limit(10)&prodLine="+this.model.get("prodLine")._id}),this.listenTo(this.lastOrders,"sync",this.renderLastOrders)},getTemplateData:function(){return{touch:u.isEnabled()}},afterRender:function(){n(this.el,{orderNo:""}),this.lastOrders.fetch({reset:!0}),this.fetchPlannedOrders()},fetchPlannedOrders:function(){var e=this,n=t.ajax({url:"/production/orderQueue/"+e.model.get("prodLine")._id});n.fail(function(){e.plannedOrders=[]}),n.done(function(t){e.plannedOrders=t.map(function(e){return e.order.no})}),n.always(e.renderPlannedOrders.bind(e))},renderLastOrders:function(){var e={},t=0,n=[];this.lastOrders.forEach(function(r){var i=r.get("orderId");e[i]||5===t||(e[i]=!0,t+=1,n.push('<button type="button" class="btn btn-default btn-block" tabindex="-1" data-order="',i,'">',i,"</button>"))}),this.$id("lastOrders").find(".fa-spinner").replaceWith(n.join(""))},renderPlannedOrders:function(){var e=[];this.plannedOrders.forEach(function(t){e.push('<button type="button" class="btn btn-default btn-block" tabindex="-1" data-order="',t,'">',t,"</button>")}),this.$id("plannedOrders").find(".fa-spinner").replaceWith(e.join(""))},submitForm:function(){var e=this,t=e.$id("submit").prop("disabled",!0);t.find(".fa").removeClass("fa-search").addClass("fa-spin fa-spinner");var n=e.$id("orderNo").val(),r=15===n.length?"document":"order",i=e["document"===r?"findDocument":"findOrder"](n);i.fail(function(t){var n=t.getResponseHeader("X-Error-Code")||"",i=e.t("localOrderPicker:error:failure:"+r),s=2500;if(n)if(e.t.has("localOrderPicker:error:"+n+":"+r)){var u={};"DATE_NOT_FOUND"===n&&(s=6e3,u.required=o.format(+t.getResponseHeader("X-Error-Required"),"L"),u.actual=t.getResponseHeader("X-Error-Actual").split(", ").map(function(e){return o.format(+e,"L")}).join(", ")),i=e.t("localOrderPicker:error:"+n+":"+r,u)}else e.t.has("localOrderPicker:error:"+n)&&(i=e.t("localOrderPicker:error:"+n));a.msg.show({type:"error",time:s,text:i,className:"text-left"})}),i.always(function(){t.prop("disabled",!1).find(".fa").removeClass("fa-spin fa-spinner").addClass("fa-search")})},findOrder:function(e){var t=this,n=t.ajax({type:"GET",url:"/orders/"+e+"/documents",data:{line:t.model.get("prodLine")._id,station:t.model.get("station")}});return n.done(function(e){t.trigger("localOrder",e)}),n},findDocument:function(e){var t=this,n=t.ajax({type:"HEAD",url:"/orderDocuments/"+e+"?name=1&order="+this.model.getCurrentOrder().no});return n.done(function(){t.trigger("document",{nc15:e,name:n.getResponseHeader("X-Document-Name"),source:n.getResponseHeader("X-Document-Source")})}),n},pressNumpadKey:function(e){var t=this.$id("orderNo")[0],n=t.value,r=t.selectionStart,i=t.selectionEnd;"CLEAR"===e?(r=0,n=""):"BACKSPACE"===e?(r-=1,n=n.substring(0,r)+n.substring(i)):"LEFT"===e?r-=1:"RIGHT"===e?r+=1:n.length<t.maxLength&&(n=n.substring(0,r)+e+n.substring(i),r+=1),t.value=n,t.focus(),t.setSelectionRange(r,r)},selectOrderNo:function(e){var t=this.$id("orderNo")[0];t.value=e,t.focus(),t.setSelectionRange(e.length,e.length)},toggleSubmit:function(){var e=this.$id("orderNo").val().replace(/[^0-9]+/,"").length,t="localOrderPicker:submit";15===e?t+=":document":9===e&&(t+=":order"),this.$id("submit").find("span").text(i("orderDocuments",t))}})}),define("app/orderDocuments/templates/settings",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<form class="orderDocuments-settings" autocomplete="off">\n  <input name="fake-login" type="text" autocomplete="new-password" style="display: none">\n  <input name="fake-password" type="password" style="display: none">\n  <div class="row">\n    <div class="col-md-8 form-group" title="'),__append(helpers.t("settings:prodLineId:help")),__append('">\n      <label for="'),__append(idPrefix),__append('-prodLineId" class="control-label is-required">'),__append(helpers.t("settings:prodLineId")),__append('</label>\n      <input id="'),__append(idPrefix),__append('-prodLineId" name="prodLineId" class="form-control" type="text" required>\n    </div>\n    <div class="col-md-4 form-group">\n      <label for="'),__append(idPrefix),__append('-station" class="control-label is-required">'),__append(helpers.t("settings:station")),__append('</label>\n      <input id="'),__append(idPrefix),__append('-station" name="station" class="form-control" type="number" required min="1" max="99">\n    </div>\n  </div>\n  <div class="form-group" title="'),__append(helpers.t("settings:prodLineName:help")),__append('">\n    <label for="'),__append(idPrefix),__append('-prodLineName" class="control-label is-required">'),__append(helpers.t("settings:prodLineName")),__append('</label>\n    <input id="'),__append(idPrefix),__append('-prodLineName" name="prodLineName" class="form-control" type="text" required>\n  </div>\n  <div class="form-group">\n    <div class="radio">\n      <label class="control-label">\n        <input name="prefixFilterMode" type="radio" value="inclusive">\n        '),__append(helpers.t("settings:prefixFilter:inclusive")),__append('\n      </label>\n    </div>\n    <div class="radio">\n      <label class="control-label">\n        <input name="prefixFilterMode" type="radio" value="exclusive">\n        '),__append(helpers.t("settings:prefixFilter:exclusive")),__append('\n      </label>\n    </div>\n    <input id="'),__append(idPrefix),__append('-prefixFilter" name="prefixFilter" class="form-control" type="text">\n  </div>\n  <div class="checkbox">\n    <label>\n      <input id="'),__append(idPrefix),__append('-spigotCheck" value="true" type="checkbox" name="spigotCheck">\n      '),__append(helpers.t("settings:spigotCheck")),__append('\n    </label>\n  </div>\n  <div class="form-group">\n    <label for="'),__append(idPrefix),__append('-login" class="control-label is-required">'),__append(helpers.t("settings:login")),__append('</label>\n    <input id="'),__append(idPrefix),__append('-login" name="login" class="form-control" type="text" autocomplete="new-password" required>\n  </div>\n  <div class="form-group">\n    <label for="'),__append(idPrefix),__append('-password" class="control-label is-required">'),__append(helpers.t("settings:password")),__append('</label>\n    <input id="'),__append(idPrefix),__append('-password" name="password" class="form-control" type="password" required>\n  </div>\n  <div class="form-actions">\n    <button id="'),__append(idPrefix),__append('-submit" class="btn btn-primary" type="submit"><i class="fa fa-save"></i><span>'),__append(helpers.t("settings:submit")),__append("</span></button>\n  </div>\n</form>\n");return __output}}),define("app/orderDocuments/views/DocumentViewerSettingsView",["underscore","jquery","js2form","form2js","app/i18n","app/viewport","app/core/View","app/prodLines/ProdLineCollection","app/orderDocuments/templates/settings"],function(e,t,n,r,i,o,a,s,u){"use strict";return a.extend({template:u,events:{submit:function(){return this.submitForm(),!1},"change #-prodLineId":function(e){this.$id("prodLineName").val(this.prepareProdLineName(e.target.value))},"change #-prefixFilter":function(e){var t={};e.target.value.split(/[^0-9]/).forEach(function(e){/^[0-9]+$/.test(e)&&(t[e]=!0)}),e.target.value=Object.keys(t).sort().join(" ")}},afterRender:function(){n(this.el,this.serializeFormData()),this.setUpProdLineSelect2()},serializeFormData:function(){var e=this.model,t=e.get("prodLine"),n={prodLineId:t._id,prodLineName:t.name,station:e.get("station"),prefixFilterMode:e.get("prefixFilterMode"),prefixFilter:e.get("prefixFilter"),spigotCheck:e.get("spigotCheck")};if(!n.prodLineId){var r=this.model.id.indexOf("-");-1!==r&&(n.prodLineId=this.model.id.substring(r+1),n.prodLineName=this.prepareProdLineName(n.prodLineId))}return n},submitForm:function(){var t=this,n=t.$id("submit").prop("disabled",!0);n.find(".fa").removeClass("fa-save").addClass("fa-spin fa-spinner");var a=e.defaults(r(t.el),{prefixFilterMode:"inclusive",prefixFilter:"",spigotCheck:!1});a.station=parseInt(a.station,10)||0,a.apiKey=this.options.apiKey;var s=t.ajax({type:"POST",url:window.location.href,data:JSON.stringify(a)});s.fail(function(e){var n=((e.responseJSON||{}).error||{}).message,r=i.has("orderDocuments","settings:error:"+n)?t.t("settings:error:"+n):t.t("settings:error:failure");o.msg.show({type:"error",time:3e3,text:r})}),s.done(function(){t.trigger("settings",{prodLine:{_id:a.prodLineId,name:a.prodLineName},station:a.station,prefixFilterMode:a.prefixFilterMode,prefixFilter:a.prefixFilter,spigotCheck:a.spigotCheck})}),s.always(function(){n.prop("disabled",!1).find(".fa").removeClass("fa-spin fa-spinner").addClass("fa-save")})},setUpProdLineSelect2:function(){var t=this;if(window.WMES_CLIENT)return this.$id("prodLineId").prop("readOnly",!0).addClass("form-control"),this.$id("prodLineName").prop("readOnly",!0),void this.$id("station").prop("readOnly",!0);var n=new s(null,{rqlQuery:"deactivatedAt=null&sort(_id)"});n.once("reset",function(){var r=t.$id("prodLineId");r.length&&(r.parent().addClass("has-required-select2"),r.removeClass("form-control").select2({data:n.map(function(e){return{id:e.id,text:e.id,description:e.get("description")}}),matcher:function(e,t,n){return e=e.toUpperCase(),-1!==t.toUpperCase().indexOf(e)||-1!==n.description.toUpperCase().indexOf(e)},formatResult:function(t){var n='<div class="kaizenOrders-select2">';return n+="<p><strong>"+e.escape(t.id)+"</strong><br>",n+=e.escape(t.description)+"</p>",n+="</div>"}}))}),this.promised(n.fetch({reset:!0}))},prepareProdLineName:function(e){return e.replace(/_/g," ").replace(/\s+/," ").replace(/~.*?$/,"").trim()}})}),define("app/orderDocuments/templates/documentListItem",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<a class="orderDocuments-document '),__append(search?"is-search":""),__append(" "),__append(locked?"is-locked":""),__append('" tabindex="'),__append(locked?-1:0),__append('" data-nc15="'),__append(nc15),__append('">\n  <span class="orderDocuments-document-name">'),__append(name),__append('</span>\n  <span class="orderDocuments-document-nc15">'),__append("ORDER"===nc15||"COMP_REL"===nc15?"&nbsp;":nc15),__append("</span>\n  "),external&&__append('\n  <button type="button" class="btn btn-link orderDocuments-document-remove" tabindex="-1"><i class="fa fa-remove"></i></button>\n  '),__append("\n  "),search&&__append('\n  <i class="fa fa-search orderDocuments-document-search"></i>\n  '),__append("\n</a>\n");return __output}}),define("app/orderDocuments/templates/controls",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="orderDocuments-controls '),__append(touch?"is-touch":""),__append('">\n  <input id="'),__append(idPrefix),__append('-localFile" class="orderDocuments-localFile" type="file" tabindex="-1" accept="application/pdf">\n  <div class="orderDocuments-controls-components">\n    <div id="'),__append(idPrefix),__append('-prodLine" class="orderDocuments-prodLine"></div>\n    <div id="'),__append(idPrefix),__append('-buttons" class="orderDocuments-buttons-container">\n      <div class="orderDocuments-buttons">\n        <button id="'),__append(idPrefix),__append('-openLocalOrderDialog" type="button" class="btn btn-default" title="'),__append(t("controls:openLocalOrderDialog")),__append('"><i class="fa fa-search"></i></button>\n        <button id="'),__append(idPrefix),__append('-reloadDocument" type="button" class="btn btn-default" title="'),__append(t("controls:reloadDocument")),__append('"><i class="fa fa-refresh"></i></button>\n        '),touch||(__append('\n        <button id="'),__append(idPrefix),__append('-openDocumentWindow" type="button" class="btn btn-default" title="'),__append(t("controls:openDocumentWindow")),__append('"><i class="fa fa-external-link"></i></button>\n        ')),__append('\n        <button id="'),__append(idPrefix),__append('-openSettingsDialog" type="button" class="btn btn-default" title="'),__append(t("controls:openSettingsDialog")),__append('"><i class="fa fa-wrench"></i></button>\n        <button id="'),__append(idPrefix),__append('-toggleAddImprovementButtons" type="button" class="btn btn-default" title="'),__append(t("controls:toggleAddImprovementButtons")),__append('"><i class="fa fa-comment"></i></button>\n        <button id="'),__append(idPrefix),__append('-toggleBalancingRecorder" type="button" class="btn btn-default orderDocuments-buttons-balancing" title="'),__append(t("controls:balancing")),__append('"><i class="fa fa-balance-scale"></i></button>\n        <button id="'),__append(idPrefix),__append('-lockUi" type="button" class="btn btn-default orderDocuments-buttons-lockUi" title="'),__append(t("controls:lockUi")),__append('"><i class="fa fa-lock"></i></button>\n      </div>\n      <div id="'),__append(idPrefix),__append('-addImprovementButtons" class="orderDocuments-buttons orderDocuments-buttons-addImprovement hidden">\n        <button id="'),__append(idPrefix),__append('-openAddNearMissWindow" type="button" class="btn btn-danger" title="'),__append(t("controls:openAddNearMissWindow")),__append('"><i class="fa fa-warning"></i></button>\n        <button id="'),__append(idPrefix),__append('-openAddSuggestionWindow" type="button" class="btn btn-warning" title="'),__append(t("controls:openAddSuggestionWindow")),__append('"><i class="fa fa-lightbulb-o"></i></button>\n        <button id="'),__append(idPrefix),__append('-openAddObservationWindow" type="button" class="btn btn-primary" title="'),__append(t("controls:openAddObservationWindow")),__append('"><i class="fa fa-eye"></i></button>\n      </div>\n    </div>\n    <div id="'),__append(idPrefix),__append('-order" class="orderDocuments-order">\n      <span class="orderDocuments-order-no" data-property="orderNo"></span>\n      <span class="orderDocuments-order-name" data-property="orderName"></span>\n      <span class="orderDocuments-order-no" data-property="documentNc15"></span>\n      <span class="orderDocuments-order-name" data-property="documentName"></span>\n    </div>\n    <form id="'),__append(idPrefix),__append('-filterForrm" class="orderDocuments-filter">\n      <input id="'),__append(idPrefix),__append('-filterPhrase" type="text" autocomplete="new-password" placeholder="&#61616; '),__append(t("controls:filter:ph")),__append('" name="filterPhrase" autocomplete="off">\n    </form>\n    <div id="'),__append(idPrefix),__append('-documents" class="orderDocuments-documents" tabindex="-1"></div>\n    <div id="'),__append(idPrefix),__append('-embedded" class="orderDocuments-embedded-actions"></div>\n    '),touch&&(__append('\n    <div class="orderDocuments-controls-numpad hidden">\n      '),function(){__append('<div id="'),__append(idPrefix),__append('-numpad" class="orderDocuments-numpad">\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="1">1</button>\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="2">2</button>\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="3">3</button>\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="4">4</button>\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="5">5</button>\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="6">6</button>\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="7">7</button>\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="8">8</button>\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="9">9</button>\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="LEFT">&lt;</button>\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="0">0</button>\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="RIGHT">&gt;</button>\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="BACKSPACE"><i class="fa fa-long-arrow-left"></i></button>\n  <button type="button" class="btn btn-default" tabindex="-1" disabled></button>\n  <button type="button" class="btn btn-default" tabindex="-1" data-key="CLEAR"><i class="fa fa-eraser"></i></button>\n</div>\n')}.call(this),__append("\n    </div>\n    ")),__append('\n    <div id="'),__append(idPrefix),__append('-confirm" class="btn btn-success orderDocuments-confirm hidden">\n      <i class="fa fa-thumbs-up"></i>\n      <p>'),__append(t("controls:confirm")),__append('</p>\n    </div>\n    <div id="'),__append(idPrefix),__append('-notes" class="orderDocuments-notes hidden">\n      <div class="orderDocuments-notes-backdrop"></div>\n      <div class="orderDocuments-notes-content">\n        <div class="orderDocuments-notes-hd">'),__append(t("notes:hd")),__append('</div>\n        <div class="orderDocuments-notes-bd"></div>\n        <div class="orderDocuments-notes-ft">'),__append(t("notes:ft")),__append('</div>\n      </div>\n      <div class="orderDocuments-compRels orderDocuments-compRels-top hidden"></div>\n      <div class="orderDocuments-compRels orderDocuments-compRels-bot hidden"></div>\n    </div>\n    <div id="'),__append(idPrefix),__append('-balancing-recorder" class="orderDocuments-balancing-recorder"></div>\n  </div>\n</div>\n');return __output}}),define("app/orderDocuments/templates/uiLock",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div id="'),__append(idPrefix),__append('-uiLock" class="orderDocuments-uiLock">\n  <div class="orderDocuments-uiLock-inner">\n    <i class="fa fa-unlock"></i>\n    <p>'),__append(t("orderDocuments","uiLocked")),__append("</p>\n  </div>\n</div>\n");return __output}}),define("app/orderDocuments/templates/compRel",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="orderDocuments-compRels-item">\n  <div class="orderDocuments-compRels-hd">'),__append(t("compRels:hd")),__append('</div>\n  <div class="orderDocuments-compRels-bd">\n    <div class="orderDocuments-compRels-old">\n      '),__append(escapeFn(compRel.oldCode)),__append("\n      <small>"),__append(escapeFn(compRel.oldName)),__append('</small>\n    </div>\n    <div class="orderDocuments-compRels-separator"></div>\n    <div class="orderDocuments-compRels-new">\n      '),__append(escapeFn(compRel.newCode)),__append("\n      <small>"),__append(escapeFn(compRel.newName)),__append("</small>\n    </div>\n  </div>\n</div>\n");return __output}}),define("app/orderDocuments/views/DocumentViewerControlsView",["underscore","jquery","app/i18n","app/viewport","app/core/View","app/core/util/embedded","app/core/util/getShiftStartInfo","app/data/localStorage","app/production/snManager","app/wmes-ct-balancing/views/BalancingPceRecorderView","./LocalOrderPickerView","./DocumentViewerSettingsView","app/orderDocuments/templates/documentListItem","app/orderDocuments/templates/controls","app/orderDocuments/templates/uiLock","app/orderDocuments/templates/compRel"],function(e,t,n,r,i,o,a,s,u,c,l,d,p,f,h,m){"use strict";return i.extend({template:f,events:{"click #-reloadDocument":function(e){this.control(e,function(){this.trigger("documentReloadRequested")})},"click #-openDocumentWindow":function(e){this.control(e,function(){this.trigger("documentWindowRequested")})},"click #-openLocalOrderDialog":function(e){this.control(e,function(){var e=this.$id("openLocalOrderDialog");e.hasClass("active")?(this.model.resetExternalDocument(),this.model.resetLocalOrder(),this.scrollIntoView()):this.openLocalOrderDialog(),e.blur()})},"click #-openSettingsDialog":function(e){this.control(e,function(){this.openSettingsDialog()})},"click #-openLocalFileDialog":function(e){this.control(e,function(){var e=this.$id("openLocalFileDialog");e.hasClass("active")?(this.model.resetLocalFile(),this.scrollIntoView()):this.$id("localFile").click(),e.blur()})},"click #-toggleAddImprovementButtons":function(){this.canUseControls()?(this.$id("addImprovementButtons").toggleClass("hidden"),this.$id("addImprovementButtons").hasClass("hidden")&&this.shrinkControls()):this.enlargeControls()},"click #-openAddNearMissWindow":function(e){this.control(e,function(){this.openAddNearMissWindow(),this.$id("addImprovementButtons").addClass("hidden")})},"click #-openAddSuggestionWindow":function(e){this.control(e,function(){this.openAddSuggestionWindow(),this.$id("addImprovementButtons").addClass("hidden")})},"click #-openAddObservationWindow":function(e){this.control(e,function(){this.openAddObservationWindow(),this.$id("addImprovementButtons").addClass("hidden")})},"change #-localFile":function(e){var t=e.target.files;t.length?this.model.setLocalFile(t[0].name,t[0]):this.model.resetLocalFile()},"click .orderDocuments-document-remove":function(e){return this.model.removeDocument(this.$(e.currentTarget).closest(".orderDocuments-document")[0].dataset.nc15),!1},"click .orderDocuments-document":function(e){var t,n=e.currentTarget;return n.classList.contains("is-search")&&(t=n.querySelector(".orderDocuments-document-name").textContent.trim(),this.clearFilter()),this.selectDocument(n.dataset.nc15,!1,t),!1},"keydown .orderDocuments-document":function(e){if(!o.isEnabled()){var t=e.keyCode,n=e.currentTarget,r=this;return 27===t?(n.blur(),!1):13===t||32===t?(r.$(n).click(),setTimeout(function(){r.focusDocument(n.dataset.nc15)},1),!1):40===t?(r.focusNextDocument(n),!1):38===t?(r.focusPrevDocument(n),!1):37===t?(r.focusFirstDocument(),!1):39===t?(r.focusLastDocument(),!1):void 0}},"wheel .is-expanded":function(e){var n=this.$id("documents"),r=n.scrollTop(),i=e.originalEvent.deltaY>0;if((i||0!==r)&&!(i&&r+n.innerHeight()>=n[0].scrollHeight)){var o=t(e.currentTarget).outerHeight()*(i?1:-1);n.scrollTop(r+o);var a=this.$(".is-expanded"),s=a[o>0?"next":"prev"]();a.remove(),this.expandDocument(s)}},"submit #-filterForm":function(){return this.$id("documents").find(".orderDocuments-document:not(.hidden)").first().click(),!1},"input #-filterPhrase":function(e){this.filter(e.currentTarget.value)},"focus #-filterPhrase":function(){this.timers.hideNumpad&&(clearTimeout(this.timers.hideNumpad),this.timers.hideNumpad=null),this.shrinkControls(),this.showNumpad()},"blur #-filterPhrase":function(){this.timers.hideNumpad=setTimeout(this.hideNumpad.bind(this),100)},"click #-prodLine":"toggleControls","click #-order":"toggleControls","click #-numpad > .btn":function(e){this.pressNumpadKey(e.currentTarget.dataset.key)},"click #-lockUi":function(e){this.control(e,this.lockUi)},"click #-confirm":"confirmDocument","click #-notes":"confirmNotes","click #-toggleBalancingRecorder":function(e){this.control(e,this.toggleBalancingRecorder)}},localTopics:{"socket.connected":"updateButtons","socket.disconnected":"updateButtons"},initialize:function(){t(window).on("keypress."+this.idPrefix,this.onKeyPress.bind(this))},destroy:function(){t(window).off("."+this.idPrefix)},getTemplateData:function(){return{touch:o.isEnabled()}},beforeRender:function(){this.stopListening(this.model)},afterRender:function(){this.listenTo(this.model,"change:prodLine",this.updateProdLine),this.listenTo(this.model,"change:localFile",this.onLocalFileChange),this.listenTo(this.model,"change:fileSource",this.onFileSourceChange),this.listenTo(this.model,"change:prefixFilterMode change:prefixFilter change:documents change:confirmations",e.debounce(this.updateDocuments.bind(this),1,!0)),this.listenTo(this.model,"change:localFile change:localOrder change:remoteOrder",e.debounce(this.onOrderChange.bind(this),1)),this.updateButtons(),this.updateProdLine(),this.updateCurrentOrderInfo(),this.updateDocuments();var t=this.$(".is-active");t.length&&t[0].scrollIntoView(),window.WMES_DOCS_LOCK_UI=this.lockUi.bind(this),"1"===s.getItem("WMES_DOCS_UI_LOCKED")&&this.lockUi(),o.render(this,{container:this.$id("embedded"),left:!0})},canUseControls:function(){return!this.$el.hasClass("is-touch")||this.$id("buttons").hasClass("is-enlarged")},enlargeControls:function(){this.$el.hasClass("is-touch")&&(this.$id("buttons").addClass("is-enlarged"),this.positionAddImprovementButtons())},shrinkControls:function(){this.$id("buttons").removeClass("is-enlarged"),this.$id("addImprovementButtons").addClass("hidden")},toggleControls:function(){this.$el.hasClass("is-touch")&&(this.$id("buttons").toggleClass("is-enlarged"),this.$id("addImprovementButtons").addClass("hidden"),this.positionAddImprovementButtons())},positionAddImprovementButtons:function(){this.$id("addImprovementButtons").css("left",this.$id("toggleAddImprovementButtons").position().left+"px")},control:function(e,t){this.canUseControls()?(t.call(this,e),this.shrinkControls()):this.enlargeControls(),e.currentTarget.blur()},resize:function(e,t){null!==e&&(this.el.style.width=e+"px"),null!==t&&(this.el.style.height=t+"px")},expandDocument:function(e){var t=this.$(".is-expanded");if(t[0]!==e[0]&&(t.remove(),!e.hasClass("is-locked"))){var n=e.position(),r=e.clone().addClass("is-expanded").attr("tabindex","").css({position:"absolute",top:n.top+"px",left:n.left+"px"});r.on("mouseleave",function(){r.remove()}),r.insertAfter(e)}},selectDocument:function(e,t,n){this.shrinkControls(),(this.model.isConfirmableDocument(e)||"confirmed"===this.model.getOverallConfirmationStatus())&&(this.$id("confirm").find(".fa-spinner").length||(this.model.selectDocument(e,n),t&&this.focusDocument(e)))},focusDocument:function(e){var t=this.$id("documents").find('[data-nc15="'+e+'"]');t.length&&t.focus()[0].scrollIntoView()},focusNextDocument:function(e){var t=this.$(e).next();t.hasClass("is-expanded")&&(t=t.next()),t.length?t.focus():this.focusFirstDocument()},focusPrevDocument:function(e){var t=this.$(e).prev();t.hasClass("is-expanded")&&(t=t.prev()),t.length?t.focus():this.focusLastDocument()},focusFirstDocument:function(){this.$id("documents").children().first().focus()},focusLastDocument:function(){this.$id("documents").children().last().focus()},scrollIntoView:function(){var e=this.$(".is-active");e.length&&(e[0].scrollIntoView(!0),this.el.ownerDocument.body.scrollTop=0)},filter:function(e){this.$id("filterPhrase").val(e),e=e.trim().toLowerCase();var t=this.$(".orderDocuments-document");if(t.filter(".is-expanded").remove(),t.filter(".is-search").remove(),""===e)t.removeClass("hidden");else{var n=!1;t.each(function(){var t=-1===this.textContent.toLowerCase().indexOf(e);t||(n=!0),this.classList.toggle("hidden",t)}),n||this.search(e)}this.updateDocumentShortcuts()},search:function(e){var t=(e.match(/([0-9]{15})/)||[])[1];if(t){var n=this;n.ajax({type:"HEAD",url:"/orderDocuments/"+t+"?name=1"}).done(function(e,r,i){n.$id("documents").append(p({name:i.getResponseHeader("X-Document-Name")||"?",nc15:t,search:!0,external:!1,locked:"confirmed"!==n.model.getOverallConfirmationStatus()&&!n.model.isConfirmableDocument(t)})),n.$id("documents").find(".is-search").on("mouseenter",n.onDocumentMouseEnter.bind(n))})}},clearFilter:function(){var e=this.$id("filterPhrase");""!==e.val()&&(e.val(""),this.filter(""))},focusFilter:function(){this.$id("filterPhrase").select()},openLocalOrderDialog:function(){var e=new l({model:this.model});this.listenToOnce(e,"localOrder",function(e){r.closeDialog(),e&&(this.model.setLocalOrder(e),this.model.save())}),this.listenToOnce(e,"document",function(e){r.closeDialog(),e&&this.selectDocument(e.nc15,!0,e.name)}),r.showDialog(e,n("orderDocuments","localOrderPicker:title"))},openSettingsDialog:function(){var e=new d({model:this.model});this.listenToOnce(e,"settings",function(e){r.closeDialog(),e&&(this.model.set(e),this.model.save())}),r.showDialog(e,n("orderDocuments","settings:title"))},openAddNearMissWindow:function(){this.openAddImprovementWindow("/#kaizenOrders;add")},openAddSuggestionWindow:function(){this.openAddImprovementWindow("/#suggestions;add")},openAddObservationWindow:function(){this.openAddImprovementWindow("/#behaviorObsCards;add")},openAddImprovementWindow:function(e){e+="?standalone=1";var t=window.screen,i=t.availWidth>1350?1300:.7*t.availWidth,o=.8*t.availHeight,a=Math.floor((t.availWidth-i)/2),s="resizable,scrollbars,location=no,top="+Math.min(100,Math.floor((t.availHeight-o)/2))+",left="+a+",width="+Math.floor(i)+",height="+Math.floor(o);window.open(e,"WMES_IMPROVEMENTS",s)||r.msg.show({type:"error",time:3e3,text:n("orderDocuments","popup:improvement")})},updateProdLine:function(){this.$id("prodLine").text(this.model.get("prodLine").name||"")},updateCurrentOrderInfo:function(){var e=this.$id("order"),t=this.model.getCurrentOrderInfo();e.find("[data-property]").each(function(){var e=t[this.dataset.property];this.style.display=e?"":"none",this.textContent=e.replace(/\$__.*?__/g,"")})},updateDocuments:function(){var t=this.model,n=t.getCurrentOrder(),r="confirmed"===t.getOverallConfirmationStatus(),i=t.get("localFile"),o=this.$id("documents"),a="";o.find(".orderDocuments-document").off("mouseenter"),e.forEach(n.documents,function(e,n){t.filterNc15(n)&&!t.isIgnored(n)&&(a+=p({name:e.replace(/\$__.*?__/g,""),nc15:n,search:!1,external:-1!==e.indexOf("$__EXTERNAL__"),locked:!r&&!t.isConfirmableDocument(n)}))}),o.html(a).find(".orderDocuments-document").on("mouseenter",this.onDocumentMouseEnter.bind(this)),this.filter(this.$id("filterPhrase").val()),this.checkConfirmations(),!i&&n.documents[n.nc15]&&o.find('.orderDocuments-document[data-nc15="'+n.nc15+'"]').addClass("is-active")},updateDocumentShortcuts:function(){if(this.$(".orderDocuments-document-shortcut").remove(),!o.isEnabled())for(var e=this.$(".orderDocuments-document"),t=1,n=0;t<=9;){var r=e.eq(n++);if(!r.length)break;r.hasClass("hidden")||(r.hasClass("is-expanded")&&--t,r.find(".orderDocuments-document-name").prepend('<span class="orderDocuments-document-shortcut">'+t+". </span>"),++t)}},updateButtons:function(){var e=!this.socket.isConnected(),t=!!this.model.get("localFile"),n=!!this.model.get("localOrder").no||this.model.isExternalDocument(),r=this.$id("openLocalOrderDialog");r.toggleClass("active",n),n||r.prop("disabled",e),this.$id("openSettingsDialog").prop("disabled",e),this.$id("openLocalFileDialog").toggleClass("active",t),this.$id("reloadDocument").prop("disabled",t),this.toggleOpenDocumentWindowButton()},toggleOpenDocumentWindowButton:function(){this.$id("openDocumentWindow").prop("disabled",null===this.model.get("fileSource"))},pressNumpadKey:function(e){var t=this.$id("filterPhrase")[0],n=t.value,r=t.selectionStart,i=t.selectionEnd;"CLEAR"===e?(r=0,n=""):"BACKSPACE"===e?(r-=1,n=n.substring(0,r)+n.substring(i)):"LEFT"===e?r-=1:"RIGHT"===e?r+=1:(-1===t.maxLength||n.length<t.maxLength)&&(n=n.substring(0,r)+e+n.substring(i),r+=1),this.filter(n),t.value=n,"CLEAR"===e?this.hideNumpad():(t.focus(),t.setSelectionRange(r,r))},showNumpad:function(){this.$(".orderDocuments-controls-numpad").removeClass("hidden")},hideNumpad:function(){this.$(".orderDocuments-controls-numpad").addClass("hidden")},lockUi:function(){var e=this.$id("uiLock");e.length||((e=t(h({idPrefix:this.idPrefix}))).find("div").on("click",function(){s.removeItem("WMES_DOCS_UI_LOCKED"),e.remove()}),e.on("touchstart",function(e){if(!t(e.target).closest(".orderDocuments-uiLock-inner").length)return!1}),e.appendTo("body"),s.setItem("WMES_DOCS_UI_LOCKED","1"))},onOrderChange:function(){this.updateButtons(),this.updateCurrentOrderInfo(),this.updateDocuments(),this.updateBalancingRecorderOrder()},onLocalFileChange:function(){null===this.model.get("localFile")&&this.$id("localFile").val("")},onFileSourceChange:function(){this.$el.removeClass("fileSource-search fileSource-remote fileSource-local");var e=this.model.get("fileSource");e&&this.$el.addClass("fileSource-"+e),this.toggleOpenDocumentWindowButton()},onDocumentMouseEnter:function(e){this.expandDocument(this.$(e.currentTarget))},onKeyPress:function(e){if(!o.isEnabled()){var t=document.activeElement;if("INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&"SELECT"!==t.tagName&&!this.model.isBomActive()&&(e.charCode>=49||e.charCode<=57)){var n=e.charCode-49,r=this.$id("documents").find(".orderDocuments-document:visible")[n];r&&this.selectDocument(r.dataset.nc15,!0)}}},checkConfirmations:function(){this.updateConfirmButton();var e=this.model.getOverallConfirmationStatus();if("confirmed"!==e){var t=this.model.getCurrentOrder(),n=t.nc15;this.model.isConfirmableDocument(t.nc15)?"unknown"===e&&this.fetchConfirmations(n):this.selectDocument(this.model.getFirstUnconfirmedDocument(),!0)}},fetchConfirmations:function(t){var n=this;clearTimeout(n.timers.fetchConfirmations);var r=n.model.getCurrentOrder(),i=n.ajax({url:"/orders/"+r.no+"/documents",data:{line:n.model.get("prodLine")._id,station:n.model.get("station")}});i.fail(function(){n.timers.fetchConfirmations=setTimeout(n.fetchConfirmations.bind(n,t),5e3)}),i.done(function(r){var i=n.model.get("station"),o={};e.forEach(r.confirmations,function(e,t){var n=e[i];o[t]=void 0===n?"unknown":n}),n.model.setDocumentConfirmations(r.no,o),"confirmed"===n.model.getOverallConfirmationStatus()&&(t&&!n.model.isConfirmableDocument(t)||(t="ORDER"),n.selectDocument(t,!0))})},confirmDocument:function(){var e=this,t=e.$id("confirm"),n=t.find(".fa");if(!n.hasClass("fa-spinner")){n.removeClass("fa-thumbs-up").addClass("fa-spinner fa-spin");var r=e.model.getCurrentOrder(),i={clientId:e.model.id,line:e.model.get("prodLine")._id,station:e.model.get("station"),orderNo:r.no,nc15:r.nc15,name:r.documents[r.nc15]};e.socket.emit("orderDocuments.confirm",i,function(n,r){if(n)return t.removeClass("btn-success").addClass("btn-danger").find(".fa-spinner").removeClass("fa-spin"),e.timers.updateConfirmButton=setTimeout(e.updateConfirmButton.bind(e),3e3),void(n.errors&&n.errors.station&&e.handleNoStationError());e.model.handleConfirmation(r),e.updateConfirmButton(),e.selectDocument(e.model.getFirstUnconfirmedDocument()||"ORDER",!0)})}},handleNoStationError:function(){this.broker.subscribe("viewport.dialog.shown").setLimit(1).on("message",function(){u.showMessage({_id:""},"error",n.bind(n,"orderDocuments","controls:confirm:noStation"),3e3),r.currentDialog.$id("submit").click()}),this.openSettingsDialog()},updateConfirmButton:function(){var e=this.model.isConfirmedDocumentSelected(),t=this.model.isConfirmableDocumentSelected();this.$id("confirm").removeClass("btn-danger").addClass("btn-success").toggleClass("hidden",e||!t).find(".fa-spinner").removeClass("fa-spinner fa-spin").addClass("fa-thumbs-up")},checkNotes:function(){if("confirmed"===this.model.getOverallConfirmationStatus()){var e=this.model.getCurrentOrder();if(e.no&&(Array.isArray(e.notes)&&e.notes.length||Array.isArray(e.compRels)&&e.compRels.length)){var t=JSON.parse(s.getItem("WMES_DOCS_NOTES")||"null")||{order:"",shift:0},n=a(Date.now()).startTime;t.order===e.no&&t.shift===n||this.showNotes()}}},showNotes:function(){this.hideNotes();var t=this.$id("notes"),n=this.model.getCurrentOrder().notes,r="<ul>";n.forEach(function(t){r+="<li> "+e.escape(t.text)}),r+="</ul>",t.find(".orderDocuments-notes-bd").html(r);var i=t.find(".orderDocuments-notes-content");i.toggleClass("hidden",!n.length),t.removeClass("hidden"),n.length&&i.css({left:"50%",marginTop:i.outerHeight()/2*-1+"px",marginLeft:i.outerWidth()/2*-1+"px"}),this.showCompRels()},hideNotes:function(){this.$id("notes").addClass("hidden"),this.hideCompRels()},showCompRels:function(){var e=this.model.getCurrentOrder().compRels||[];if(e.length){for(var t=this.$(".orderDocuments-compRels-top"),n=this.$(".orderDocuments-compRels-bot"),r=t,i=0;i<e.length;++i){var o=e[i],a=this.renderPartial(m,{compRel:o});if((4===e.length&&2===i||5===e.length&&3===i||6===e.length&&3===i||e.length>6&&4===i)&&(r=n),a.appendTo(r),7===i)break}t[0].childElementCount&&t.removeClass("hidden"),n[0].childElementCount&&n.removeClass("hidden")}},hideCompRels:function(){this.$(".orderDocuments-compRels").addClass("hidden").html("")},confirmNotes:function(){s.setItem("WMES_DOCS_NOTES",JSON.stringify({order:this.model.getCurrentOrder().no,shift:a(Date.now()).startTime})),this.hideNotes()},toggleBalancingRecorder:function(){var e=this.getView("#-balancing-recorder");e||(e=new c,this.setView("#-balancing-recorder",e),e.render()),e.toggle(this.model.getCurrentOrder().no)},updateBalancingRecorderOrder:function(){var e=this.getView("#-balancing-recorder");e&&e.updateOrder(this.model.getCurrentOrder().no)}})}),define("app/orderDocuments/templates/preview",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="orderDocuments-preview">\n  <iframe id="'),__append(idPrefix),__append('-iframe" class="orderDocuments-preview-iframe" src=""></iframe>\n  <div id="'),__append(idPrefix),__append('-loading" class="orderDocuments-preview-loading hidden">\n    <i class="fa fa-spinner fa-spin"></i>\n    <span id="'),__append(idPrefix),__append('-message"></span>\n  </div>\n</div>');return __output}}),define("app/orderDocuments/templates/documentWindow",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<!DOCTYPE html>\n<html>\n<head>\n  <meta charset="utf-8">\n  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">\n  <base href="/">\n  <title>'),__append(title),__append("</title>\n  <style>\n  body {\n    padding: 0;\n    margin: 0;\n    overflow: hidden;\n  }\n  iframe {\n    position: absolute;\n    top: 0;\n    left: 0;\n    border: 0;\n  }\n  </style>\n</head>\n<body>\n<iframe src=\"about:blank\"></iframe>\n<script>\nvar iframeEl = document.body.getElementsByTagName('iframe')[0];\n\nfunction resizeIframe()\n{\n  iframeEl.width = window.innerWidth;\n  iframeEl.height = window.innerHeight;\n}\n\nwindow.onresize = resizeIframe;\n\nwindow.onload = function()\n{\n  setTimeout(function()\n  {\n    resizeIframe();\n\n    iframeEl.src = '"),__append(src),__append("';\n  }, 1);\n};\n<\/script>\n</body>\n</html>\n");return __output}}),define("app/orderDocuments/views/DocumentViewerPreviewView",["underscore","jquery","app/i18n","app/viewport","app/core/View","app/core/util/embedded","app/orderDocuments/templates/preview","app/orderDocuments/templates/documentWindow"],function(e,t,n,r,i,o,a,s){"use strict";return i.extend({template:a,localTopics:{"viewport.page.embeddedLoaded":function(){this.onEmbeddedLoaded&&this.onEmbeddedLoaded()}},initialize:function(){this.showMarksCounter=0,this.$iframe=null,this.listenTo(this.model,"change:localFile change:localOrder change:remoteOrder",e.debounce(this.onOrderChange.bind(this),1,!0)),this.listenTo(this.model,"marksRequested",this.onMarksRequested),this.timers.blurIframe=setInterval(this.blurIframe.bind(this),333)},destroy:function(){this.$iframe.remove(),this.$iframe=null},afterRender:function(){this.$iframe=this.$id("iframe"),this.resize(null,window.innerHeight),this.loadDocument()},openDocumentWindow:function(){var e=this.model.getCurrentOrderInfo(),t=.95*window.innerWidth,i=.95*window.innerHeight,o=Math.floor((window.innerWidth-t)/2),a="resizable,scrollbars,location=no,top="+Math.floor((window.innerHeight-i)/2)+",left="+o+",width="+Math.floor(t)+",height="+Math.floor(i),u=window.open("",e.documentNc15,a);u?(u.document.write(s({title:e.documentName,src:this.$iframe.attr("src")})),u.document.close()):r.msg.show({type:"error",time:3e3,text:n("orderDocuments","popup:document")})},loadDocument:function(){if(this.$iframe){var e=this.$id("loading").removeClass("hidden is-failure");this.$iframe.css({visibility:"hidden"});var t=this.model.get("localFile");if(t)return this.model.setFileSource("local"),this.setLoadingMessage("localFile"),void this.loadFile(URL.createObjectURL(t.file));var n=this.model.getCurrentOrder();if(!n.nc15)return this.model.setFileSource(null),e.addClass("hidden"),void this.$iframe.prop("src","").css({visibility:"visible"});this.tryLoadRemoteDocument(n.nc15)}},resize:function(e,t){null!==this.$iframe&&(null!==e&&this.$iframe.prop("width",e+"px"),null!==t&&this.$iframe.prop("height",t+"px"))},blurIframe:function(){this.$iframe&&document.activeElement===this.$iframe[0]&&this.$iframe.blur()},onOrderChange:function(){this.loadDocument()},loadFile:function(t){var n=this;n.onEmbeddedLoaded=e.once(function(){n.onEmbeddedLoaded=null,n.$id("loading").addClass("hidden"),n.$iframe.css({visibility:"visible"}),n.trigger("loadDocument:success",t)}),n.$iframe.one("load",n.onEmbeddedLoaded),-1!==n.$iframe.prop("src").indexOf(t)?n.$iframe[0].contentWindow.location.reload():n.$iframe.prop("src",t)},tryLoadRemoteDocument:function(e){var t=this;if(t.model.setFileSource("remote"),t.setLoadingMessage("remoteServer"),"ORDER"===e)return t.loadFile(window.location.pathname+window.location.search+"#orders/"+t.model.getCurrentOrder().no);var n=t.model.getRemoteFileUrl(e)+"?"+t.getRemoteFileUrlQuery();t.req&&t.req.abort(),t.req=this.ajax({type:"HEAD",url:n}),t.req.fail(function(){t.req=null,t.$id("loading").addClass("is-failure"),t.$iframe.prop("src","").css({visibility:"visible"}),t.model.setFileSource(null),t.trigger("loadDocument:failure")}),t.req.done(function(e,r,i){var o=i.getResponseHeader("X-Document-Source");o&&t.model.setFileSource(o),t.req=null,t.loadFile(n)})},setLoadingMessage:function(e){this.$id("message").text(n("orderDocuments","preview:msg:loading:"+e))},getRemoteFileUrlQuery:function(){var e="order="+(this.model.getCurrentOrder().no||"")+"&w="+this.$iframe.width()+"&h="+this.$iframe.height();return o.isEnabled()||(e+="&pdf=1"),e},onMarksRequested:function(e){var t=this.model.getCurrentOrder();e.nc15!==t.nc15?(this.model.selectDocument(e.nc15),this.showMarksAfterLoad(e.page,e.marks)):this.showMarks(e.page,e.marks)},showMarks:function(e,t){if(this.$iframe){var n=this.$iframe[0].contentWindow;n.showMarks&&n.showMarks(t,e)}},showMarksAfterLoad:function(e,t){var n=this,r=++n.showMarksCounter;function i(){a(),n.showMarksCounter===r&&n.showMarks(e,t)}function o(){a()}function a(){n.off("loadDocument:success",i),n.off("loadDocument:failure",o)}n.on("loadDocument:success",i),n.on("loadDocument:failure",o)}})}),define("app/core/util/scrollbarSize",[],function(){"use strict";var e=document.createElement("div"),t=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",t.style.width="200px",t.style.height="200px",e.appendChild(t),document.body.appendChild(e);var n=e.offsetWidth-e.clientWidth,r=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),{width:n,height:r}}),define("app/production/templates/vkb",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="production-vkb hidden '),__append(mode.alpha?"is-alpha":""),__append(" "),__append(mode.numeric?"is-numeric":""),__append(" "),__append(mode.multiline?"is-multiline":""),__append(" "),__append(mode.extended?"is-extended":""),__append(" "),__append(extended?"is-vkb-extended":""),__append('">\n  '),mode.alpha?(__append("\n  "),mode.extended&&(__append('\n  <div class="production-vkb-row">\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="`" data-extended-key="~">`</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="[" data-extended-key="{">[</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="]" data-extended-key="}">]</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="\\" data-extended-key="|">\\</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key=";" data-extended-key=":">;</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="\'" data-extended-key="&quot;">\'</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="," data-extended-key="<">,</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="." data-extended-key=">">.</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="/" data-extended-key="?">/</button>\n    <button class="btn btn-default '),__append(extended?"active":""),__append('" type="button" tabindex="-1" data-key="EXTENDED">Shift</button>\n  </div>\n  ')),__append("\n  "),mode.numeric&&__append('\n  <div class="production-vkb-row">\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="1" data-extended-key="!">1</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="2" data-extended-key="@">2</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="3" data-extended-key="#">3</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="4" data-extended-key="$">4</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="5" data-extended-key="%">5</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="6" data-extended-key="^">6</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="7" data-extended-key="&">7</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="8" data-extended-key="*">8</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="9" data-extended-key="(">9</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="0" data-extended-key=")">0</button>\n  </div>\n  '),__append('\n  <div class="production-vkb-row">\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="Q" data-extended-key="q">Q</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="W" data-extended-key="w">W</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="E" data-extended-key="e">E</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="R" data-extended-key="r">R</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="T" data-extended-key="t">T</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="Y" data-extended-key="y">Y</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="U" data-extended-key="u">U</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="I" data-extended-key="i">I</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="O" data-extended-key="o">O</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="P" data-extended-key="p">P</button>\n  </div>\n  <div class="production-vkb-row">\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="A" data-extended-key="a">A</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="S" data-extended-key="s">S</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="D" data-extended-key="d">D</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="F" data-extended-key="f">F</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="G" data-extended-key="g">G</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="H" data-extended-key="h">H</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="J" data-extended-key="j">J</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="K" data-extended-key="k">K</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="L" data-extended-key="l">L</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="BACKSPACE" data-extended-key="="></button>\n  </div>\n  <div class="production-vkb-row">\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="Z" data-extended-key="z">Z</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="X" data-extended-key="x">X</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="C" data-extended-key="c">C</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="V" data-extended-key="v">V</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="B" data-extended-key="b">B</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="N" data-extended-key="n">N</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="M" data-extended-key="m">M</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="LEFT" data-extended-key="-">&lt</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="RIGHT" data-extended-key="_">&gt</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="CLEAR" data-extended-key="+"></button>\n  </div>\n  '),mode.multiline&&__append('\n  <div class="production-vkb-row">\n    <button class="btn btn-default" type="button" tabindex="-1" data-key=",">,</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key=".">.</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="?">?</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="(">(</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key=")">)</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key=":">:</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="&quot;">&quot;</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="SPACE">____</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="ENTER"><i class="fa fa-level-down fa-rotate-90"></i></button>\n  </div>\n  '),__append("\n  ")):mode.numeric&&(__append('\n  <div class="production-vkb-row">\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="1">1</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="2">2</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="3">3</button>\n  </div>\n  <div class="production-vkb-row">\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="4">4</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="5">5</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="6">6</button>\n  </div>\n  <div class="production-vkb-row">\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="7">7</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="8">8</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="9">9</button>\n  </div>\n  <div class="production-vkb-row">\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="LEFT">&lt;</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="0">0</button>\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="RIGHT">&gt;</button>\n  </div>\n  <div class="production-vkb-row">\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="BACKSPACE"><i class="fa fa-long-arrow-left"></i></button>\n    '),mode.negative?__append('\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="-">-</button>\n    '):__append('\n    <button class="btn btn-default" type="button" tabindex="-1" disabled>&nbsp;</button>\n    '),__append('\n    <button class="btn btn-default" type="button" tabindex="-1" data-key="CLEAR"><i class="fa fa-eraser"></i></button>\n  </div>\n  ')),__append("\n</div>\n");return __output}}),define("app/production/views/VkbView",["underscore","jquery","app/core/View","app/production/templates/vkb"],function(e,t,n,r){"use strict";var i={BACKSPACE:'<i class="fa fa-long-arrow-left"></i>',LEFT:"<",RIGHT:">",CLEAR:'<i class="fa fa-eraser"></i>'};return n.extend({template:r,events:{"focus .btn[data-key]":function(e){this.trigger("keyFocused",e.currentTarget.dataset.key)},"click .btn[data-key]":function(e){var t=e.currentTarget.dataset.key,n=e.currentTarget.dataset.extendedKey;this.pressKey(n&&this.extended&&this.mode.extended?n:t)}},initialize:function(){this.fieldEl=null,this.adjustOverlap=!1,this.onValueChange=null,this.onKeyPress=null,this.extended=!1,this.mode={alpha:!1,numeric:!0,negative:!1,multiline:!1,extended:!1},t(window).on("resize."+this.idPrefix,e.debounce(this.reposition.bind(this),30))},destroy:function(){t(window).off("."+this.idPrefix),this.fieldEl=null,this.onValueChange=null},getTemplateData:function(){return{mode:this.mode,extended:this.extended}},reposition:function(){if(this.fieldEl){var e={top:"",right:"",bottom:"",left:""},n={marginLeft:""},r=this.$el,i=t(".modal-dialog");r.css(e),i.css(n);var o=i.offset(),a=i.outerWidth(),s=i.outerHeight(),u=r.offset(),c=r.outerWidth(),l=this.adjustOverlap&&o.top+s+30>u.top,d=this.adjustOverlap&&o.left+a+30>u.left;l&&this.mode.numeric&&!this.mode.alpha?(e.top=this.fieldEl.getBoundingClientRect().top+"px",e.left=o.left+a+30,e.bottom="auto",e.right="auto"):l&&d&&this.mode.alpha&&window.innerWidth>800&&(n.marginLeft=Math.max(30,window.innerWidth-30-c-30-a)+"px"),r.toggleClass("is-repositioned",l).css(e),i.css(n)}},show:function(n,r){var i=this;return r?"function"==typeof r&&(r={onValueChange:r}):r={},e.defaults(r,{onValueChange:null,onKeyPress:null}),(i.fieldEl!==n||i.onValueChange!==r.onValueChange||i.onKeyPress!==r.onKeyPress)&&(Object.keys(this.mode).forEach(function(e){i.mode[e]=!1}),(n.dataset.vkb||"").split(" ").forEach(function(e){i.mode[e]=!0}),i.render(),i.$el.removeClass("is-repositioned hidden"),t(".is-vkb-focused").removeClass("is-vkb-focused"),n.classList.add("is-vkb-focused"),i.fieldEl=n,i.adjustOverlap=!1!==r.adjustOverlap,i.onValueChange=r.onValueChange,i.onKeyPress=r.onKeyPress,i.updateExtended(),i.reposition(),!0)},hide:function(){t(".modal-dialog").css("margin-left",""),this.$el.addClass("hidden"),this.fieldEl&&this.fieldEl.classList.remove("is-vkb-focused"),this.fieldEl=null,this.onValueChange=null,this.onKeyPress=null},isVisible:function(){return!this.$el.hasClass("hidden")},enableKeys:function(){console.log("enableKeys"),this.$(".btn[data-key][disabled]").each(function(){this.disabled=!1})},disableKeys:function(e,t){null==t&&(t=!1),this.$(".btn[data-key]").each(function(){var n=e[this.dataset.key];t&&void 0===n||1===this.dataset.key.length&&(this.disabled=!0!==n)})},pressKey:function(e){var t=this.fieldEl;if(t&&(!this.onKeyPress||!1!==this.onKeyPress(e,t))){if("EXTENDED"===e)return this.toggleExtended();var n=t.value,r=t.selectionStart,i=t.selectionEnd;"ENTER"===e?e="\n":"SPACE"===e&&(e=" "),"CLEAR"===e?(r=0,n=""):"BACKSPACE"===e?(r-=1,n=n.substring(0,r)+n.substring(i)):"LEFT"===e?r-=1:"RIGHT"===e?r+=1:(!t.maxLength||-1===t.maxLength||n.length<t.maxLength)&&(n=n.substring(0,r)+e+n.substring(i),r+=1);var o=t.value!==n;t.value=n,t.focus(),t.setSelectionRange(r,r),o&&this.onValueChange&&this.onValueChange(t)}},toggleExtended:function(){this.extended=!this.extended,this.updateExtended()},updateExtended:function(){var e=this.mode.extended&&this.extended;this.$el.toggleClass("is-vkb-extended",e),this.$('.btn[data-key="EXTENDED"]').toggleClass("active",e),this.$(".btn[data-extended-key]").each(function(){var t=this.dataset[e?"extendedKey":"key"];this.innerHTML=i[t]||t})}})}),define("app/orders/templates/commentPopover",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<form class="orders-commentPopover">\n  <textarea class="form-control"></textarea>\n  <button type="submit" class="btn btn-primary"><i class="fa fa-comment"></i></button>\n</form>\n');return __output}}),define("app/orders/util/commentPopover",["underscore","jquery","app/i18n","app/broker","app/viewport","app/orders/templates/commentPopover","css!app/orders/assets/commentPopover.css"],function(e,t,n,r,i,o){"use strict";return{isVisible:function(e){return!!e.$commentPopover},hide:function(e,n){var i=e.$commentPopover;if(i){t(document.body).click(),r.publish("orders.commentPopover.hiding",{$menu:i});var o=i.data("options");t(window).off(".commentPopover."+e.idPrefix),t(document.body).off(".commentPopover."+e.idPrefix),i.data("backdrop").remove(),i.removeData("backdrop"),i.removeData("options"),!1===o.animate||!1===n?i.remove():i.fadeOut("fast",function(){i.remove()}),e.$commentPopover=null,r.publish("orders.commentPopover.hidden")}},show:function(e,n,a,s,u){u||(u={});var c=this.hide.bind(this,e);c(!1);var l=t(o({className:u.className||"",top:a}));l.on("mousedown",function(e){if(1!==e.which)return!1;e.stopPropagation()}),l.on("mouseup",function(e){if(1!==e.which)return!1}),l.on("contextmenu",!1),l.on("submit",function(){var t=l.find(".form-control").val().trim();if(!t.length)return c(),!1;if(!t.replace(/[^0-9a-zA-Z]+/g,"").length)return l.find(".form-control").val("").focus(),!1;i.msg.saving();var r=l.find(".btn-primary").prop("disabled",!0),o=e.ajax({method:"POST",url:"/orders/"+n,data:JSON.stringify({comment:t,source:u.source||"other"})});return o.fail(function(){i.msg.savingFailed(),r.prop("disabled",!1)}),o.done(function(){i.msg.saved(),c()}),!1}),l.find(".btn-link").on("click",c),l.find(".form-control").on("keyup",function(e){if(e.ctrlKey&&"Enter"===e.key)return l.find(".btn-primary").click(),!1});var d=t('<div class="planning-menu-backdrop"></div>').one("mousedown",c);l.data("backdrop",d),l.data("options",u),t(window).on("keydown.commentPopover."+e.idPrefix,function(e){if("Escape"===e.key)return c(),!1}),t(document.body).one("mousedown.commentPopover."+e.idPrefix,function(e){u.hideFilter&&!u.hideFilter(e)||c()}).append(d).append(l),e.$commentPopover=l,this.position(e,a,s),!1!==u.autoFocus&&l.find("textarea").focus(),r.publish("orders.commentPopover.shown",{$menu:l})},position:function(t,n,r){if(t.$commentPopover){var i=t.$commentPopover,o=i.outerWidth(),a=i.outerHeight();r+o>=document.body.clientWidth&&(r-=r+o-document.body.clientWidth+5);var s=window.innerHeight+window.pageYOffset;n+a>=s&&(n-=n+a-s+5),i.css({top:n+"px",left:r+"px"}),e.assign(i.data("options"),{top:n,left:r})}}}}),define("app/planning/templates/contextMenu",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<ul class="dropdown-menu planning-menu '),__append(className),__append('" style="top: '),__append(top),__append('px; left: -1000px">\n  '),menu.forEach(function(e,t){__append("\n  "),"header"===e.type?(__append('\n  <li class="dropdown-header">'),__append(e.label),__append("</li>\n  ")):"divider"===e.type?__append('\n  <li class="divider"></li>\n  '):(__append('\n  <li data-action="'),__append(t),__append('">\n    '),e.template?(__append("\n    "),__append(e.template({i:t,item:e})),__append("\n    ")):(__append('\n    <a data-action="'),__append(t),__append('" class="'),__append(e.disabled?"planning-menu-disabled":""),__append('" '),__append(e.disabled?"":'tabindex="100000"'),__append(">\n      "),icons?(__append('\n      <i class="fa '),__append(e.icon||"fa-blank"),__append('"></i><span>'),__append(e.label),__append("</span>\n      ")):(__append("\n      "),__append(e.label),__append("\n      ")),__append("\n    </a>\n    ")),__append("\n  </li>\n  ")),__append("\n  ")}),__append("\n</ul>\n");return __output}}),define("app/nls/planning",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r))in o?o[n]:o.other},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMB:base":function(e){return"Daily plans"},"BREADCRUMB:wh":function(e){return"WH (old)"},"BREADCRUMB:settings":function(e){return"Settings"},"BREADCRUMB:changes":function(e){return"Change history"},"MSG:LOADING_FAILURE:plan":function(e){return"Failed to load the plan."},"MSG:LOADING_FAILURE:settings":function(e){return"Failed to load the plan settings."},"MSG:LOADING_FAILURE:sapOrders":function(e){return"Failed to load the SAP orders."},"MSG:LOADING_FAILURE:shifts":function(e){return"Failed to load the production shifts."},"MSG:LOADING_FAILURE:lateOrders":function(e){return"Failed to load the late orders."},"MSG:LOADING_FAILURE:shiftOrders":function(e){return"Failed to load the production shift orders."},"MSG:LOADING_FAILURE:delayReasons":function(e){return"Failed to load the delay reasons."},"MSG:LOADING_FAILURE:productionState":function(e){return"Failed to load the production state."},"MSG:GENERATING":function(e){return"<i class='fa fa-spinner fa-spin'></i><span>Generating the plan...</span>"},"MSG:export:started":function(e){return"Exporting..."},"MSG:export:failure":function(e){return"Exporting failed."},"PAGE_ACTION:hourlyPlans":function(e){return"Hourly plans"},"PAGE_ACTION:dailyPlan":function(e){return"Daily plan"},"PAGE_ACTION:paintShop":function(e){return"Paint shop"},"PAGE_ACTION:wh":function(e){return"WH"},"PAGE_ACTION:wh:old":function(e){return"Old module"},"PAGE_ACTION:wh:new":function(e){return"New module"},"PAGE_ACTION:wh:problems":function(e){return"Problem list"},"PAGE_ACTION:legend":function(e){return"Legend"},"PAGE_ACTION:changes":function(e){return"Change history"},"PAGE_ACTION:settings":function(e){return"Settings"},"PAGE_ACTION:settings:copy":function(e){return"Copy line settings"},"PAGE_ACTION:toggleChanges:expand":function(e){return"Expand"},"PAGE_ACTION:toggleChanges:collapse":function(e){return"Collapse"},"filter:date":function(e){return"Plan date"},"filter:mrps":function(e){return"All MRP"},"filter:mrps:1":function(e){return"Selected MRP"},"filter:mrps:0":function(e){return"Ignored MRP"},"filter:mrps:mine":function(e){return"Mine"},"filter:mrps:wh":function(e){return"WH"},"filter:mrps:placeholder":function(e){return"All"},"filter:lines":function(e){return"Production lines"},"filter:lines:placeholder":function(e){return"All lines"},"filter:whStatuses":function(e){return"Stage"},"filter:psStatuses":function(e){return"Paint-shop status"},"filter:wrapLists":function(e){return"List wrapping"},"filter:lineOrdersList":function(e){return"<u>O</u>rder list"},"filter:useLatestOrderData":function(e){return"Latest order data"},"filter:useDarkerTheme":function(e){return"High contrast"},"filter:copyOrderList":function(e){return"Copy order list"},"filter:export":function(e){return"Export..."},"filter:export:stats":function(e){return"...stats"},"filter:export:transport":function(e){return"...transport plan"},"filter:stats:quantity":function(e){return"Quantity:"},"filter:stats:manHours":function(e){return"Man-hours:"},"filter:stats:orders":function(e){return"Orders:"},"filter:stats:tooltip:todo":function(e){return"Total of all orders\nin selected MRPs"},"filter:stats:tooltip:late":function(e){return"Total of all\nlate orders\nin selected MRPs"},"filter:stats:tooltip:plan":function(e){return"Total of all\nplanned orders\nin selected MRPs"},"filter:stats:tooltip:remaining":function(e){return"Total of remaining\nin selected MRPs"},"filter:stats:todo":function(e){return"Todo"},"filter:stats:late":function(e){return"Late"},"filter:stats:plan":function(e){return"Plan"},"filter:stats:remaining":function(e){return"Remaining"},"filter:stats:execution":function(e){return"Sequence execution"},"filter:startTime":function(e){return"Start"},"toolbar:printPlan":function(e){return"Print line plan"},"toolbar:printPlan:all":function(e){return"All lines"},"toolbar:showTimes":function(e){return"Show times"},"toolbar:copyOrderList":function(e){return"Copy list of planned orders\nto clipboard"},"toolbar:copyOrderList:0":function(e){return"All shifts"},"toolbar:copyOrderList:1":function(e){return"I shift"},"toolbar:copyOrderList:2":function(e){return"II shift"},"toolbar:copyOrderList:3":function(e){return"III shift"},"toolbar:copyOrderList:success":function(e){return"List copied to clipboard."},"toolbar:toggleLock:true":function(e){return"Unlock MRP"},"toolbar:toggleLock:false":function(e){return"Lock MRP"},"toolbar:stats:quantity":function(e){return"Quantity:"},"toolbar:stats:manHours":function(e){return"Man-hours:"},"toolbar:stats:orders":function(e){return"Orders:"},"toolbar:stats:tooltip:todo":function(e){return"Total of all orders\nin MRP"},"toolbar:stats:tooltip:late":function(e){return"Total of all\nlate orders\nin MRP"},"toolbar:stats:tooltip:plan":function(e){return"Total of all\nplanned orders\nin MRP"},"toolbar:stats:tooltip:remaining":function(e){return"Total of remaining\nin MRP"},"toolbar:stats:tooltip:execution:percent":function(e){return"Percent of execution\nof the planned sequence\nin the whole day"},"toolbar:stats:tooltip:execution:percent:shift":function(e){return"Percent of execution\nof the planned sequence\non shift "+t.v(e,"shiftNo")},"print:workerCount":function(e){return t.v(e,"count")+" "+t.p(e,"count",0,"en",{one:"person",other:"people"})},"print:workerCounts":function(e){return t.v(e,"from")+"-"+t.v(e,"to")+" "+t.p(e,"to",0,"en",{one:"person",other:"people"})},"list:generate":function(e){return"Force<br>plan<br>creation"},"list:mrpCount":function(e){return t.v(e,"str")+" "+t.p(e,"num",0,"en",{one:"family",other:"families"})},"list:lineCount":function(e){return t.v(e,"str")+" "+t.p(e,"num",0,"en",{one:"line",other:"lines"})},"list:orderCount":function(e){return t.v(e,"str")+" "+t.p(e,"num",0,"en",{one:"order",other:"orders"})},"list:quantity":function(e){return t.v(e,"str")+" pce"},"list:manHours":function(e){return t.v(e,"str")+" mh"},"list:from":function(e){return"from "+t.v(e,"time")},"list:to":function(e){return"to "+t.v(e,"time")},empty:function(e){return"No plan for the specified filters."},locked:function(e){return"MRP is locked!"},"toggleLock:title:true":function(e){return"MRP unlocking"},"toggleLock:title:false":function(e){return"MRP locking"},"toggleLock:message:true":function(e){return"<p>Are you sure you want to unlock MRP <em>"+t.v(e,"mrp")+"</em>?</p><p>Unlocking will resume the plan recalculation for that MRP and might change the plan for Warehouse.</p>"},"toggleLock:message:false":function(e){return"<p>Are you sure you want to lock MRP <em>"+t.v(e,"mrp")+"</em>?</p><p>Locking will disable any changes to that MRP and will stop plan recalculation of all lines in the MRP.</p>"},"toggleLock:message:warning":function(e){return"Orders with the specified MRP were already picked up by the warehouse."},"toggleLock:yes:true":function(e){return"Unlock MRP"},"toggleLock:yes:false":function(e){return"Lock MRP"},"toggleLock:no:true":function(e){return"Leave locked"},"toggleLock:no:false":function(e){return"Leave unlocked"},"lines:hd":function(e){return"Lines"},"lines:division":function(e){return"Division"},"lines:prodFlow":function(e){return"Prod. flow"},"lines:prodLine":function(e){return"Line"},"lines:activeFrom":function(e){return"Active from"},"lines:activeTo":function(e){return"Active to"},"lines:activeTime":function(e){return"Activity time"},"lines:workerCount":function(e){return"Worker count"},"lines:orderPriority":function(e){return"Order priority"},"lines:frozenOrders":function(e){return"Frozen orders"},"lines:redirLine":function(e){return"Line redirection"},"lines:wh:pickup:started":function(e){return"Picking"},"lines:wh:pickup:finished":function(e){return"Picked"},"lines:wh:available":function(e){return"Available"},"lines:wh:sets":function(e){return"sets"},"lines:wh:qty":function(e){return"pce"},"lines:wh:time":function(e){return"time"},"lines:mrpPriority":function(e){return"MRP priority"},"lines:menu:header":function(e){return"Line "+t.v(e,"line")},"lines:menu:settings":function(e){return"Change line settings"},"lines:menu:remove":function(e){return"Remove line from MRP"},"lines:menu:remove:title":function(e){return"Removing line from MRP"},"lines:menu:remove:message":function(e){return"<p>Are you sure you want to remove line <em>"+t.v(e,"line")+"</em> from MRP<em>"+t.v(e,"mrp")+"</em>?</p><p>Change will affect only the plan for "+t.v(e,"plan")+".</p>"},"lines:menu:remove:yes":function(e){return"Remove line"},"lines:menu:remove:failure":function(e){return"Failed to remove line from MRP."},"lines:menu:settings:title":function(e){return"Changing line settings"},"lines:menu:settings:submit":function(e){return"Save settings"},"lines:menu:settings:line":function(e){return"Production line"},"lines:menu:settings:applyToAllMrps":function(e){return"Set the same <em>Worker count</em> and <em>Order priority</em> for line "+t.v(e,"line")+" in all assigned MRPs, and not only for "+t.v(e,"mrp")+"."},"lines:menu:settings:failure":function(e){return"Failed to change line settings."},"lines:menu:mrpPriority":function(e){return"Change available lines"},"lines:menu:mrpPriority:title":function(e){return"Changing available lines"},"lines:menu:mrpPriority:submit":function(e){return"Save MRP priorities"},"lines:menu:mrpPriority:failure":function(e){return"Failed to change available lines."},"lines:menu:mrpPriority:line":function(e){return"New line"},"lines:menu:mrpPriority:line:placeholder":function(e){return"Select a production line..."},"lines:menu:workerCount":function(e){return"Change worker count"},"lines:menu:workerCount:title":function(e){return"Changing worker count"},"lines:menu:workerCount:submit":function(e){return"Save worker count"},"lines:menu:workerCount:failure":function(e){return"Failed to change the worker count."},"lines:menu:orderPriority":function(e){return"Change order priority"},"lines:menu:orderPriority:title":function(e){return"Changing order priority"},"lines:menu:orderPriority:submit":function(e){return"Save order priority"},"lines:menu:orderPriority:failure":function(e){return"Failed to save the order priority."},"lines:menu:freezeOrders":function(e){return"Freeze orders"},"lines:menu:freezeOrders:title":function(e){return"Freezing orders"},"lines:menu:freezeOrders:line":function(e){return"Lines"},"lines:menu:freezeOrders:availableOrders":function(e){return"Available orders"},"lines:menu:freezeOrders:frozenOrders":function(e){return"Frozen orders"},"lines:menu:freezeOrders:no":function(e){return"#"},"lines:menu:freezeOrders:order":function(e){return"Order"},"lines:menu:freezeOrders:quantity":function(e){return"Quantity"},"lines:menu:freezeOrders:actions":function(e){return"Actions"},"lines:menu:freezeOrders:submit":function(e){return"Freeze orders"},"lines:menu:freezeOrders:failure":function(e){return"Failed to freeze orders."},"lines:menu:freezeOrders:shift:1":function(e){return"I shift"},"lines:menu:freezeOrders:shift:2":function(e){return"I and II shifts"},"lines:menu:freezeOrders:shift:3":function(e){return"all shifts"},"lines:menu:redirLine:start":function(e){return"Redirect line"},"lines:menu:redirLine:stop":function(e){return"Stop redirection"},"lines:menu:deliveredOrders":function(e){return"Open delivered orders"},"orders:hd":function(e){return"Orders"},"orders:_id":function(e){return"Order no"},"orders:date":function(e){return"Date"},"orders:delayReason":function(e){return"Reason"},"orders:kind":function(e){return"Kind"},"orders:quantityDone":function(e){return"Quantity done"},"orders:quantityTodo":function(e){return"Quantity todo"},"orders:quantityPlan":function(e){return"Quantity to plan"},"orders:incomplete":function(e){return"Incomplete quantity"},"orders:hardComponent":function(e){return"Difficult component"},"orders:nc12":function(e){return"12NC"},"orders:name":function(e){return"Name"},"orders:operation":function(e){return"Operation"},"orders:machineTime":function(e){return"Machine Time"},"orders:laborTime":function(e){return"Labor Time"},"orders:manHours":function(e){return"Man-hours"},"orders:qty":function(e){return"Quantity"},"orders:mrp":function(e){return"MRP"},"orders:statuses":function(e){return"Status"},"orders:ignored":function(e){return"Ignored"},"orders:urgent":function(e){return"Urgent"},"orders:pinned":function(e){return"Pinned"},"orders:eto":function(e){return"ETO"},"orders:priority":function(e){return t.s(e,"priority",{E:"ETO Pilot",E:"ETO Pilot continuation",other:"Order priority"})},"orders:lines":function(e){return"Line"},"orders:source":function(e){return"Source"},"orders:source:plan":function(e){return"Planned"},"orders:source:added":function(e){return"Added"},"orders:source:incomplete":function(e){return"Incomplete"},"orders:source:late":function(e){return"Late"},"orders:psStatus:unknown":function(e){return"Not painted"},"orders:psStatus:new":function(e){return"Painting pending"},"orders:psStatus:started":function(e){return"Painting started"},"orders:psStatus:startedMsp":function(e){return"Painting started (MSP)"},"orders:psStatus:partial":function(e){return"Painted partially"},"orders:psStatus:finished":function(e){return"Painting finished"},"orders:psStatus:aside":function(e){return"Painting set aside"},"orders:psStatus:cancelled":function(e){return"Painting cancelled"},"orders:drillStatus:unknown":function(e){return"Not drilled"},"orders:drillStatus:new":function(e){return"Drilling pending"},"orders:drillStatus:started":function(e){return"Drilling started"},"orders:drillStatus:partial":function(e){return"Drilled partially"},"orders:drillStatus:finished":function(e){return"Drilling finished"},"orders:drillStatus:aside":function(e){return"Drilling set aside"},"orders:drillStatus:cancelled":function(e){return"Drilling cancelled"},"orders:whStatus:unknown":function(e){return"Unspecified"},"orders:whStatus:todo":function(e){return"Todo"},"orders:whStatus:done":function(e){return"Done"},"orders:dropZone":function(e){return t.v(e,"group")+" on "+t.v(e,"time")},"orders:qty:incomplete":function(e){return"("+t.v(e,"qty")+" incomplete)"},"orders:late":function(e){return"Late"},"orders:resized":function(e){return"Changed quantity"},"orders:comment":function(e){return"Last comment"},"orders:menu:header":function(e){return"Order "+t.v(e,"order")},"orders:menu:sapOrder":function(e){return"Open SAP order details"},"orders:menu:shiftOrder":function(e){return"Open line order details"},"orders:menu:comment":function(e){return"Comment order"},"orders:menu:urgent":function(e){return"Mark order as urgent"},"orders:menu:urgent:title":function(e){return"Urgent order"},"orders:menu:urgent:message":function(e){return"<p>Are you sure you want to mark the order <em>"+t.v(e,"order")+"</em> as <strong>urgent</strong>?</p><p>Urgent orders are planned at the beginning of the plan, ignoring the order priority.</p>"},"orders:menu:urgent:yes":function(e){return"Mark as urgent"},"orders:menu:urgent:failure":function(e){return"Failed to mark the order as urgent."},"orders:menu:unurgent":function(e){return"Mark as not urgent"},"orders:menu:unurgent:message":function(e){return"<p>Are you sure you want to mark the order <em>"+t.v(e,"order")+"</em> as <strong>not urgent</strong>?</p><p>Not urgent orders are planned according to the order priority.</p>"},"orders:menu:unurgent:yes":function(e){return"Mark as not urgent"},"orders:menu:ignore":function(e){return"Ignore order"},"orders:menu:ignore:title":function(e){return"Ignoring order"},"orders:menu:ignore:message":function(e){return"<p>Are you sure you want to ignore order <em>"+t.v(e,"order")+"</em>?</p><p>Ignored orders are not taken into consideration during planning.</p>"},"orders:menu:ignore:yes":function(e){return"Ignore order"},"orders:menu:ignore:failure":function(e){return"Failed to ignore order."},"orders:menu:unignore":function(e){return"Stop ignoring order"},"orders:menu:unignore:message":function(e){return"<p>Are you sure you want to stop ignoring order <em>"+t.v(e,"order")+"</em>?</p><p>Order will return to the planning queue.</p>"},"orders:menu:unignore:yes":function(e){return"Stop ignoring order"},"orders:menu:quantity":function(e){return"Change order quantity"},"orders:menu:quantity:title":function(e){return"Changing order quantity"},"orders:menu:quantity:quantityTodo":function(e){return"Quantity todo:"},"orders:menu:quantity:quantityDone":function(e){return"Quantity done:"},"orders:menu:quantity:quantityRemaining":function(e){return"Quantity remaining:"},"orders:menu:quantity:quantityPlan":function(e){return"Quantity to plan:"},"orders:menu:quantity:help":function(e){return"Be default, <em>Quantity to plan</em> is equal to <em>Quantity todo</em> or <em>Quantity remaining</em>, if the <em>Plan according to the remaining quantity</em> setting is enabled. This value can be overwritten here."},"orders:menu:quantity:submit":function(e){return"Save quantity to plan"},"orders:menu:quantity:failure":function(e){return"Failed to change the quantity"},"orders:menu:lines":function(e){return"Change pin to line"},"orders:menu:lines:title":function(e){return"Changing pin to line"},"orders:menu:lines:submit":function(e){return"Save pin to line"},"orders:menu:lines:failure":function(e){return"Failed to pin to line."},"orders:menu:lines:urgent":function(e){return"Urgent"},"orders:menu:lines:urgent:help":function(e){return"Urgent order can be pinned to any line ignoring the Order priority."},"orders:menu:add":function(e){return"Add order"},"orders:menu:remove":function(e){return"Remove order"},"orders:menu:remove:title":function(e){return"Removing order"},"orders:menu:remove:message":function(e){return"<p>Are you sure you want to remove the order <em>"+t.v(e,"order")+"</em> from the queue of the current plan?</p>"},"orders:menu:remove:yes":function(e){return"Remove order"},"orders:menu:remove:failure":function(e){return"Failed to remove order."},"orders:menu:dropZone":function(e){return"Set drop zone"},"orders:menu:dropZone:title":function(e){return"Setting drop zone"},"orders:menu:dropZone:submit":function(e){return"Set drop zone"},"orders:menu:dropZone:failure":function(e){return"Failed to set the drop zone."},"orders:menu:dropZone:dropZone":function(e){return"Drop zone group"},"orders:menu:dropZone:time":function(e){return"Time"},"orders:menu:dropZone:status":function(e){return"Status"},"orders:menu:dropZone:orders":function(e){return"Orders to change"},"orders:menu:dropZone:comment":function(e){return"Optional WH comment"},"orders:add":function(e){return"Add order"},"orders:add:title":function(e){return"Adding order"},"orders:add:submit":function(e){return"Add order"},"orders:add:failure":function(e){return"Failed to add order."},"orders:add:invalidOrderNo":function(e){return"Enter a valid, 9-digit order number."},"orders:add:searching":function(e){return"<i class='fa fa-spinner fa-spin'></i><span>Looking for order...</span>"},"orders:add:searchFailed":function(e){return"<i class='fa fa-spinner'></i><span>Failed searching for order.</span>"},"orders:add:ORDER_NOT_FOUND":function(e){return"Order doesn't exist."},"orders:add:alreadyExists":function(e){return"Order already exists in the current plan."},"orders:add:future":function(e){return"Order is planned for the future."},"orders:add:undefinedMrp":function(e){return"Order MRP is not defined in the current plan."},"orders:add:requiredStatus":function(e){return"Order doesn't have the required statuses."},"orders:add:ignoredStatus":function(e){return"Order has ignored statuses."},"orders:add:orderNo":function(e){return"Order no"},"orders:add:urgent":function(e){return"Urgent"},"orders:add:plans":function(e){return"Planned on"},"lateOrders:hd":function(e){return"Late"},"lateOrders:action":function(e){return"Add late orders"},"lateOrders:add:title":function(e){return"Adding late orders"},"lateOrders:add:failure":function(e){return"Failed to add late orders."},"lateOrders:add:orders":function(e){return"Late orders:"},"lateOrders:add:submit":function(e){return"Add late orders"},"lineOrders:orderNo":function(e){return"Order no"},"lineOrders:unit":function(e){return"PCE"},"lineOrders:qty:planned":function(e){return"Quantity planned"},"lineOrders:qty:done":function(e){return"Quantity done"},"lineOrders:qty:remaining":function(e){return"Quantity remaining"},"lineOrders:qty:total":function(e){return"Total quantity"},"lineOrders:qty:incomplete":function(e){return"Incomplete quantity"},"lineOrders:pceTime":function(e){return"PCE time"},"lineOrders:manHours":function(e){return"Man-hours"},"lineOrders:time":function(e){return"Start-end time"},"lineOrders:duration":function(e){return"Duration"},"lineOrders:incomplete":function(e){return"("+t.v(e,"qty")+" incomplete)"},"lineOrders:downtimeReason":function(e){return"Downtime reason"},"lineOrders:comment":function(e){return"Last comment"},"lineOrders:list:group":function(e){return"Gr."},"lineOrders:list:no":function(e){return"No"},"lineOrders:list:shift":function(e){return"Sh."},"lineOrders:list:mrp":function(e){return"MRP"},"lineOrders:list:orderNo":function(e){return"Order"},"lineOrders:list:nc12":function(e){return"12NC"},"lineOrders:list:name":function(e){return"Product name"},"lineOrders:list:qtyPlan":function(e){return"Quantity planned"},"lineOrders:list:qtyTodo":function(e){return"Quantity todo"},"lineOrders:list:qty:header":function(e){return"Quantity"},"lineOrders:list:qty:value":function(e){return t.v(e,"plan")+" of "+t.v(e,"todo")},"lineOrders:list:startTime":function(e){return"Start"},"lineOrders:list:finishTime":function(e){return"Finish"},"lineOrders:list:status":function(e){return"Status"},"lineOrders:list:lines":function(e){return"Lines"},"lineOrders:list:line":function(e){return"Line"},"lineOrders:list:dropZone":function(e){return"Drop zone"},"lineOrders:list:whStatus":function(e){return"Stage"},"lineOrders:list:comment":function(e){return"Last comment"},"lineOrders:menu:copy":function(e){return"Copy order list"},"lineOrders:menu:copy:success":function(e){return"Order list copied to clipboard."},"wh:menu:copy:lineGroup":function(e){return"Copy order list <em>"+t.v(e,"group")+". "+t.v(e,"line")+"</em>"},"wh:menu:copy:lineGroupNo":function(e){return"Copy order numbers <em>"+t.v(e,"group")+". "+t.v(e,"line")+"</em>"},"wh:menu:export":function(e){return"Export orders"},"wh:status:all":function(e){return"All"},"wh:status:0":function(e){return"Unspecified"},"wh:status:1":function(e){return"List"},"wh:status:2":function(e){return"Buffer"},"wh:status:3":function(e){return t.p(e,"qtySent",0,"en",{0:"Distribution",other:"Sent "+t.v(e,"qtySent")+" szt."})},"wh:sent:comment":function(e){return"Sent "+t.v(e,"qtySent")+" PCE to line "+t.v(e,"line")+" "+t.v(e,"date")+" at "+t.v(e,"time")+"."},"wh:sent:label":function(e){return"Quantity<br>Sent:"},"wh:export:fileName":function(e){return"WMES_PLAN_WH_"+t.v(e,"date")},"wh:export:sheetName":function(e){return"WH plan "+t.v(e,"date")},"stats:export:title":function(e){return"Exporting stats"},"stats:export:mrps":function(e){return"MRP"},"stats:export:lines":function(e){return"Lines"},"stats:export:submit":function(e){return"Export stats"},"stats:export:fileName":function(e){return"WMES_Plan_Execution_"+t.v(e,"from")+"_"+t.v(e,"to")},"stats:export:sheetName":function(e){return"Plan exec. "+t.v(e,"from")+"-"+t.v(e,"to")},"stats:date":function(e){return"Date"},"stats:mrp":function(e){return"MRP"},"stats:line":function(e){return"Line"},"stats:orderCount":function(e){return"Order count"},"stats:quantity":function(e){return"Quantity"},"stats:manHours":function(e){return"Man-hours"},"stats:hourlyPlan":function(e){return"Hourly plan"},"transport:export:title":function(e){return"Exporting transport plan"},"transport:export:mrps":function(e){return"MRP"},"transport:export:lines":function(e){return"Lines"},"transport:export:submit":function(e){return"Export transport plan"},"transport:export:fileName":function(e){return"WMES_Plan_Transport"},"transport:export:sheetName":function(e){return"Plan trans. "+t.v(e,"from")+"-"+t.v(e,"to")},"transport:date":function(e){return"Date"},"transport:time":function(e){return"Time"},"transport:shiftNo":function(e){return"Shift"},"transport:line":function(e){return"Line"},"transport:mrp":function(e){return"MRP"},"transport:orderNo":function(e){return"Production order"},"transport:salesOrderNo":function(e){return"Sales order"},"transport:salesOrderItem":function(e){return"Sales order item"},"transport:quantity":function(e){return"Quantity"},"orderStatus:planned":function(e){return"Planned"},"orderStatus:unplanned":function(e){return"Not planned"},"orderStatus:incomplete":function(e){return"Incomplete"},"orderStatus:started":function(e){return"Started"},"orderStatus:completed":function(e){return"Completed"},"orderStatus:surplus":function(e){return"Surplus"},"orderPriority:unclassified":function(e){return"Unclassified"},"orderPriority:small":function(e){return"Small"},"orderPriority:easy":function(e){return"Easy"},"orderPriority:hard":function(e){return"Difficult"},"settings:title":function(e){return"Plan settings edit form"},"settings:msg:success":function(e){return"Settings saved successfully."},"settings:msg:failure":function(e){return"Failed to save the settings!"},"settings:submit":function(e){return"Save settings"},"settings:forceWorkDay":function(e){return"Force work day"},"settings:forceWorkDay:help":function(e){return"Treat this date as a working day (plan will be generated even if there are no orders for the specified date)."},"settings:freezeHour":function(e){return"Order freeze hour"},"settings:freezeHour:help":function(e){return"Hour after which the planned orders will be automatically frozen. Orders are frozen after the first SAP order import up to 30 minutes before the specified hour (if the import occurs), or after the first plan recalculation after the specified hour. For example, given a plan for 2018-01-12 with Freeze hour set to 23, the orders will be frozen 2018-01-11 at 22:45, if at 22:45 SAP orders will be imported or after the first manual plan change after hour 23:00."},"settings:lateHour":function(e){return"Late order start hour"},"settings:lateHour:help":function(e){return"Hour from which the manually added, urgent orders (late) can be planned."},"settings:etoPilotHour":function(e){return"ETO pilot start hour"},"settings:etoPilotHour:help":function(e){return"Hour from which orders with the <em>E</em> priority (ETO pilot) can be planned."},"settings:schedulingRate":function(e){return"Scheduling rate"},"settings:schedulingRate:help":function(e){return"Coefficient that changes the time required to do a single PCE: <code>OrderLaborTime / 100 / LineWorkerCount * 3600 * SchedulingRate</code>"},"settings:requiredStatuses":function(e){return"Required statuses"},"settings:requiredStatuses:help":function(e){return"List of all statuses that an order must have to be taken into consideration during planning."},"settings:ignoredStatuses":function(e){return"Ignored statuses"},"settings:ignoredStatuses:help":function(e){return"List of statuses that an order must not have to be taken into consideration during planning."},"settings:completedStatuses":function(e){return"Completed order statuses"},"settings:completedStatuses:help":function(e){return"List of ignored statuses that determine whether an order is completed. Order with these statuses will remain in the plan, but won't be planned on lines."},"settings:ignoredWorkCenters":function(e){return"Ignored WorkCenters"},"settings:ignoredWorkCenters:help":function(e){return"List of WorkCenters that the chosen order's operation must not have to be taken into consideration during planning."},"settings:ignoreCompleted":function(e){return"Ignore completed orders"},"settings:ignoreCompleted:help":function(e){return"Orders with <em>Total quantity done</em> greater or equal to <em>Total quantity todo</em> will not be taken into consideration during planning."},"settings:useRemainingQuantity":function(e){return"Plan according to the remaining quantity"},"settings:useRemainingQuantity:help":function(e){return"Use the order's <em>Remaining quantity</em> instead of <em>Total quantity todo</em>. Remaining quantity is equal to <em>Total quantity todo</em> minus <em>Total quantity done</em>."},"settings:hardComponents":function(e){return"Difficult components"},"settings:hardComponents:help":function(e){return"An order will be classified as <em>Difficult</em> if it contains one of the following components. Quantity and man-hours don't matter."},"settings:hardBigComponents:help":function(e){return"A <em>Big</em> order will be classified as <em>Difficult</em> if it contains one of the following components."},"settings:line":function(e){return"Line settings"},"settings:line:placeholder":function(e){return"Production line..."},"settings:mrpPriority":function(e){return"MRP priority"},"settings:mrpPriority:help":function(e){return"List of order MRPs that can be done on this line. Order matters."},"settings:mrpPriority:placeholder":function(e){return"MRP controllers..."},"settings:activeTime":function(e){return"Activity time"},"settings:activeTime:help":function(e){return"Time of line availability on a given day. The value applies to all assigned MRP controllers."},"settings:mrp":function(e){return"MRP controller settings"},"settings:mrp:help":function(e){return"Select an MRP controller for which you want to define settings"},"settings:mrp:placeholder":function(e){return"MRP controller..."},"settings:limitSmallOrders":function(e){return"Limit small orders"},"settings:limitSmallOrders:help":function(e){return"During the first planning pass, the number of small orders that can be placed on a single line is limited by the number of lines that accept small orders. For example, MRP has 30 small orders and 5 lines that accept small orders. If the option is disabled, the first line will be completely filled with small orders. If the option is enabled, then each line will have 30/5=6 small orders."},"settings:extraOrderSeconds":function(e){return"Extra order duration"},"settings:extraOrderSeconds:help":function(e){return"Number of seconds added to each planned order except the one stared at the beginning of the production shift."},"settings:extraShiftSeconds":function(e){return"Time to start the shift"},"settings:extraShiftSeconds:1":function(e){return"Time to start the I shift"},"settings:extraShiftSeconds:2":function(e){return"Time to start the II shift"},"settings:extraShiftSeconds:3":function(e){return"Time to start the III shift"},"settings:extraShiftSeconds:help":function(e){return"Number of seconds added to the first order at the beginning of the production shift."},"settings:bigOrderQuantity":function(e){return"Big order"},"settings:bigOrderQuantity:help":function(e){return"Minimum quantity todo, after which the order is classified as <em>Big</em>. Big orders can be <em>Easy</em> or <em>Difficult</em>."},"settings:hardOrderManHours":function(e){return"Difficult order"},"settings:hardOrderManHours:help":function(e){return"Minimum number of man-hours, after which a <em>Big</em> order is classified as <em>Difficult</em>."},"settings:splitOrderQuantity":function(e){return"Order split quantity"},"settings:splitOrderQuantity:help":function(e){return"Minimum quantity todo, after which a <em>Big</em> order is split into multiple parts."},"settings:maxSplitLineCount":function(e){return"Order parts"},"settings:maxSplitLineCount:help":function(e){return"Maximum number of lines for which a <em>Big</em> order can be split. Zero - maximum available number of lines."},"settings:mrpLine":function(e){return"Line in MRP settings"},"settings:mrpLine:help":function(e){return"Select a line for which you want to define settings in the context of the selected MRP controller."},"settings:mrpLine:placeholder":function(e){return"Production line..."},"settings:workerCount":function(e){return"Worker count"},"settings:workerCount:shift":function(e){return"shift "+t.v(e,"shiftNo")+":"},"settings:orderPriority":function(e){return"Order priority"},"settings:orderPriority:help":function(e){return"Order of production orders based on their classification: small, easy, difficult. Easy and difficult orders are also big."},"settings:groups":function(e){return"Groups"},"settings:groups:no":function(e){return"No"},"settings:groups:splitOrderQuantity":function(e){return"Split quantity"},"settings:groups:lines":function(e){return"Lines"},"settings:groups:components":function(e){return"Components"},"settings:groups:add":function(e){return"Add group"},"settings:groups:remove":function(e){return"Remove group"},"settings:locked":function(e){return"Locked"},"settings:tab:wh":function(e){return"Warehouse"},"settings:wh:groupDuration":function(e){return"Order group duration [h]"},"settings:wh:groupExtraItems":function(e){return"Minimum quantity in group"},"settings:wh:groupExtraItems:help":function(e){return"If quantity of an order in the first/last group of a given line is lower or equal to the specified value, then that group will be merged with the next/previous group."},"settings:wh:sortByLines":function(e){return"Sort orders in groups by line"},"settings:wh:ignoredMrps":function(e){return"Ignored MRP (in the old module)"},"settings:wh:newIncludedMrps":function(e){return"Disabled MRP"},"changes:hd":function(e){return"<span class='planning-change-when'>"+t.v(e,"when")+"</span> by <span class='planning-change-who'>"+t.v(e,"who")+"</span>: <span class='planning-change-what'>"+t.v(e,"what")+"</span>"},"changes:what:settings":function(e){return t.v(e,"count")+" setting "+t.p(e,"count",0,"en",{one:"change",other:"changes"})},"changes:what:addedOrders":function(e){return t.v(e,"count")+" added "+t.p(e,"count",0,"en",{one:"order",other:"orders"})},"changes:what:changedOrders":function(e){return t.v(e,"count")+" changed "+t.p(e,"count",0,"en",{one:"order",other:"orders"})},"changes:what:removedOrders":function(e){return t.v(e,"count")+" deleted "+t.p(e,"count",0,"en",{one:"order",other:"orders"})},"changes:what:changedLines":function(e){return t.v(e,"count")+" changed "+t.p(e,"count",0,"en",{one:"line plan",other:"line plans"})},"changes:removedOrders:REQUIRED_STATUS":function(e){return"No required status: "+t.v(e,"requiredStatus")+"."},"changes:removedOrders:IGNORED_STATUS":function(e){return"Ignored status: "+t.v(e,"ignoredStatus")+"."},"changes:removedOrders:MISSING_ORDER":function(e){return"Missing SAP order for the given day."},"changes:removedOrders:INCOMPLETE_DONE":function(e){return"Incomplete order from the previous day was completed."},"changes:settings:lines:remove":function(e){return"Removed line <em>"+t.v(e,"line")+"</em>"},"changes:settings:mrps:remove":function(e){return"Removed MRP <em>"+t.v(e,"mrp")+"</em>"},"changes:settings:mrpLines:remove":function(e){return"Removed line <em>"+t.v(e,"line")+"</em> from MRP <em>"+t.v(e,"mrp")+"</em>"},"changes:settings:lines:change":function(e){return"Changed line <em>"+t.v(e,"line")+"</em>: <em>"+t.v(e,"property")+"</em>: "},"changes:settings:mrps:change":function(e){return"Changed MRP <em>"+t.v(e,"mrp")+"</em>: <em>"+t.v(e,"property")+"</em>: "},"changes:settings:mrpLines:change":function(e){return"Changed line <em>"+t.v(e,"line")+"</em> in MRP <em>"+t.v(e,"mrp")+"</em>: <em>"+t.v(e,"property")+"</em>: "},"changes:settings:lines:add":function(e){return"Added line <em>"+t.v(e,"line")+"</em>"},"changes:settings:mrps:add":function(e){return"Added MRP <em>"+t.v(e,"mrp")+"</em>"},"changes:settings:mrpLines:add":function(e){return"Added line <em>"+t.v(e,"line")+"</em> to MRP <em>"+t.v(e,"mrp")+"</em>"},"copySettings:title":function(e){return"Copying line settings"},"copySettings:submit":function(e){return"Copy settings"},"copySettings:source":function(e){return"Source plan"},"copySettings:target":function(e){return"Target plans"},"copySettings:target:all":function(e){return"All"},"copySettings:target:empty":function(e){return"No target plans."},"copySettings:mrps:all":function(e){return"All"},"copySettings:mrps:in":function(e){return"All selected MRPs"},"copySettings:mrps:nin":function(e){return"All but the selected MRPs"},"copySettings:mrps:empty":function(e){return"No MRPs to copy are selected."},"copySettings:what":function(e){return"Copy"},"copySettings:what:empty":function(e){return"No settings to copy are selected."},"copySettings:what:workerCount":function(e){return"Worker counts"},"copySettings:what:activeTime":function(e){return"Activity times"},"copySettings:what:orderPriority":function(e){return"Order priorities"},"copySettings:failure:fetchSettings":function(e){return"Failed to fetch settings for "+t.v(e,"plan")+"."},"lockReason:mrp":function(e){return"MRP "+t.v(e,"mrp")+" is locked directly."},"lockReason:line":function(e){return"Line "+t.v(e,"line")+" is assigned to a locked MRP: "+t.v(e,"mrps")},"planExecution:title:all":function(e){return"Plan execution"},"planExecution:title:mrp":function(e){return"Plan execution for "+t.v(e,"mrp")}},pl:!0}}),define("app/nls/pl/planning",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r))in o?o[n]:o.other},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMB:base":function(e){return"Plany dzienne"},"BREADCRUMB:wh":function(e){return"Magazyn (stary)"},"BREADCRUMB:settings":function(e){return"Ustawienia"},"BREADCRUMB:changes":function(e){return"Historia zmian"},"MSG:LOADING_FAILURE:plan":function(e){return"Nie udao si zaadowa planu."},"MSG:LOADING_FAILURE:settings":function(e){return"Nie udao si zaadowa ustawie planu."},"MSG:LOADING_FAILURE:sapOrders":function(e){return"Nie udao si zaadowa zlece SAP."},"MSG:LOADING_FAILURE:shifts":function(e){return"Nie udao si zaadowa zmian produkcyjnych."},"MSG:LOADING_FAILURE:lateOrders":function(e){return"Nie udao si zaadowa opnionych zlece."},"MSG:LOADING_FAILURE:shiftOrders":function(e){return"Nie udao si zaadowa zlece z linii."},"MSG:LOADING_FAILURE:delayReasons":function(e){return"Nie udao si zaadowa powodw opnie."},"MSG:LOADING_FAILURE:productionState":function(e){return"Nie udao si zaadowa danych produkcyjnych."},"MSG:GENERATING":function(e){return"<i class='fa fa-spinner fa-spin'></i><span>Generowanie planu...</span>"},"MSG:export:started":function(e){return"Eksportowanie..."},"MSG:export:failure":function(e){return"Eksportowanie nie powiodo si."},"PAGE_ACTION:hourlyPlans":function(e){return"Plany godzinowe"},"PAGE_ACTION:dailyPlan":function(e){return"Plan dzienny"},"PAGE_ACTION:paintShop":function(e){return"Malarnia"},"PAGE_ACTION:wh":function(e){return"Magazyn"},"PAGE_ACTION:wh:old":function(e){return"Stary modu"},"PAGE_ACTION:wh:new":function(e){return"Nowy modu"},"PAGE_ACTION:wh:problems":function(e){return"Lista problemw"},"PAGE_ACTION:legend":function(e){return"Legenda"},"PAGE_ACTION:changes":function(e){return"Historia zmian"},"PAGE_ACTION:settings":function(e){return"Ustawienia"},"PAGE_ACTION:settings:copy":function(e){return"Kopiuj ustawienia linii"},"PAGE_ACTION:toggleChanges:expand":function(e){return"Rozwi"},"PAGE_ACTION:toggleChanges:collapse":function(e){return"Zwi"},"filter:date":function(e){return"Data planu"},"filter:mrps":function(e){return"MRP"},"filter:mrps:1":function(e){return"Wybrane MRP"},"filter:mrps:0":function(e){return"Ignorowane MRP"},"filter:mrps:mine":function(e){return"Moje"},"filter:mrps:wh":function(e){return"Magazyn"},"filter:mrps:placeholder":function(e){return"Wszystkie MRP"},"filter:lines":function(e){return"Linie produkcyjne"},"filter:lines:placeholder":function(e){return"Wszystkie linie"},"filter:whStatuses":function(e){return"Etap"},"filter:psStatuses":function(e){return"Status malarnii"},"filter:wrapLists":function(e){return"Przewijanie list"},"filter:lineOrdersList":function(e){return"Lista <u>z</u>lece"},"filter:useLatestOrderData":function(e){return"Najnowsze zlecenia"},"filter:useDarkerTheme":function(e){return"Wysoki kontrast"},"filter:copyOrderList":function(e){return"Kopiuj list zlece"},"filter:export":function(e){return"Eksportuj..."},"filter:export:stats":function(e){return"...statystyki"},"filter:export:transport":function(e){return"...plan transportu"},"filter:stats:quantity":function(e){return"Sztuki:"},"filter:stats:manHours":function(e){return"RBH:"},"filter:stats:orders":function(e){return"Zlecenia:"},"filter:stats:tooltip:todo":function(e){return"Suma wszystkich zlece\nw wybranych MRP"},"filter:stats:tooltip:late":function(e){return"Suma wszystkich\nopnionych zlece\nw wybranych MRP"},"filter:stats:tooltip:plan":function(e){return"Suma wszystkich zlece\nrozplanowanych na liniach\nw wybranych MRP"},"filter:stats:tooltip:remaining":function(e){return"Suma do zrobienia\nw wybranych MRP"},"filter:stats:todo":function(e){return"Wszystkie"},"filter:stats:late":function(e){return"Opnione"},"filter:stats:plan":function(e){return"Rozplanowane"},"filter:stats:remaining":function(e){return"Do zrobienia"},"filter:stats:execution":function(e){return"Realizacja sekwencji"},"filter:startTime":function(e){return"Pocztek"},"toolbar:printPlan":function(e){return"Drukuj plan linii"},"toolbar:printPlan:all":function(e){return"Wszystkie linie"},"toolbar:showTimes":function(e){return"Pokazuj czasy"},"toolbar:copyOrderList":function(e){return"Kopiuj list zaplanowanych\nzlece do schowka"},"toolbar:copyOrderList:0":function(e){return"Wszystkie zmiany"},"toolbar:copyOrderList:1":function(e){return"I zmiana"},"toolbar:copyOrderList:2":function(e){return"II zmiana"},"toolbar:copyOrderList:3":function(e){return"III zmiana"},"toolbar:copyOrderList:success":function(e){return"Lista skopiowana do schowka."},"toolbar:toggleLock:true":function(e){return"Wycz blokowanie MRP"},"toolbar:toggleLock:false":function(e){return"Wcz blokowanie MRP"},"toolbar:stats:quantity":function(e){return"Sztuki:"},"toolbar:stats:manHours":function(e){return"RBH:"},"toolbar:stats:orders":function(e){return"Zlecenia:"},"toolbar:stats:tooltip:todo":function(e){return"Suma wszystkich zlece\nw MRP"},"toolbar:stats:tooltip:late":function(e){return"Suma wszystkich\nopnionych zlece\nw MRP"},"toolbar:stats:tooltip:plan":function(e){return"Suma wszystkich zlece\nrozplanowanych na liniach\nw MRP"},"toolbar:stats:tooltip:remaining":function(e){return"Suma do zrobienia\nw MRP"},"toolbar:stats:tooltip:execution:percent":function(e){return"Procent realizacji\nzaplanowanej sekwencji\nw caym dniu"},"toolbar:stats:tooltip:execution:percent:shift":function(e){return"Procent realizacji\nzaplanowanej sekwencji\nna zmianie "+t.v(e,"shiftNo")},"print:workerCount":function(e){return t.v(e,"count")+" "+t.p(e,"count",0,"pl",{one:"osoba",few:"osoby",other:"osb"})},"print:workerCounts":function(e){return t.v(e,"from")+"-"+t.v(e,"to")+" "+t.p(e,"to",0,"pl",{one:"osoba",few:"osoby",other:"osb"})},"list:generate":function(e){return"Wymu<br>utworzenie<br>planu"},"list:mrpCount":function(e){return t.v(e,"str")+" "+t.p(e,"num",0,"pl",{one:"rodzina",few:"rodziny",other:"rodzin"})},"list:lineCount":function(e){return t.v(e,"str")+" "+t.p(e,"num",0,"pl",{one:"linia",few:"linie",other:"linii"})},"list:orderCount":function(e){return t.v(e,"str")+" "+t.p(e,"num",0,"pl",{one:"zlecenie",few:"zlecenia",other:"zlece"})},"list:quantity":function(e){return t.v(e,"str")+" "+t.p(e,"num",0,"pl",{one:"sztuka",few:"sztuki",other:"sztuk"})},"list:manHours":function(e){return t.v(e,"str")+" rbh"},"list:from":function(e){return"od "+t.v(e,"time")},"list:to":function(e){return"do "+t.v(e,"time")},empty:function(e){return"Brak planu dla wybranych filtrw."},locked:function(e){return"MRP jest zablokowane!"},"toggleLock:title:true":function(e){return"Odblokowywanie MRP"},"toggleLock:title:false":function(e){return"Blokowanie MRP"},"toggleLock:message:true":function(e){return"<p>Czy na pewno chcesz odblokowa MRP <em>"+t.v(e,"mrp")+"</em>?</p><p>Odblokowanie wznowi przeliczanie planu dla danego MRP i moe zmieni plan magazynu.</p>"},"toggleLock:message:false":function(e){return"<p>Czy na pewno chcesz zablokowa MRP <em>"+t.v(e,"mrp")+"</em>?</p><p>Zablokowanie uniemoliwi zmian ustawie dla danego MRP oraz sprawi, e plan linii nie bdzie przeliczany (tzn. pozostanie taki jak w momencie zablokowania, nawet bez wzgldu na zmiany statusw zlece w SAP).</p>"},"toggleLock:message:warning":function(e){return"Zlecenia z danym MRP zostay ju skompletowane na magazynie."},"toggleLock:yes:true":function(e){return"Odblokuj MRP"},"toggleLock:yes:false":function(e){return"Zablokuj MRP"},"toggleLock:no:true":function(e){return"Pozostaw zablokowane"},"toggleLock:no:false":function(e){return"Pozostaw odblokowane"},"lines:hd":function(e){return"Linie"},"lines:division":function(e){return"Wydzia"},"lines:prodFlow":function(e){return"Przepyw"},"lines:prodLine":function(e){return"Linia"},"lines:activeFrom":function(e){return"Aktywna od"},"lines:activeTo":function(e){return"Aktywna do"},"lines:activeTime":function(e){return"Aktywno"},"lines:workerCount":function(e){return"Ilo osb"},"lines:orderPriority":function(e){return"Priorytet zlece"},"lines:frozenOrders":function(e){return"Zamroone zlecenia"},"lines:redirLine":function(e){return"Przekierowanie linii"},"lines:wh:pickup:started":function(e){return"Kompletowane"},"lines:wh:pickup:finished":function(e){return"Skompletowane"},"lines:wh:available":function(e){return"Dostpne"},"lines:wh:sets":function(e){return"sety"},"lines:wh:qty":function(e){return"sztuki"},"lines:wh:time":function(e){return"czas"},"lines:mrpPriority":function(e){return"Priorytet MRP"},"lines:menu:header":function(e){return"Linia "+t.v(e,"line")},"lines:menu:settings":function(e){return"Zmie ustawienia linii"},"lines:menu:remove":function(e){return"Usu lini z MRP"},"lines:menu:remove:title":function(e){return"Usuwanie linii z MRP"},"lines:menu:remove:message":function(e){return"<p>Czy na pewno chcesz usun przypisanie MRP <em>"+t.v(e,"mrp")+"</em> do linii <em>"+t.v(e,"line")+"</em>?</p><p>Zmiana bdzie miaa wpyw tylko na plan dla dnia "+t.v(e,"plan")+".</p>"},"lines:menu:remove:yes":function(e){return"Usu przypisanie"},"lines:menu:remove:failure":function(e){return"Usunicie linii nie powiodo si."},"lines:menu:settings:title":function(e){return"Zmiana ustawie linii w MRP"},"lines:menu:settings:submit":function(e){return"Zapisz ustawienia"},"lines:menu:settings:line":function(e){return"Linia produkcyjna"},"lines:menu:settings:applyToAllMrps":function(e){return"Ustaw tak sam <em>Ilo pracownikw</em> oraz <em>Priorytet zlece</em> dla linii "+t.v(e,"line")+" we wszystkich przypisanych MRP, a nie tylko dla "+t.v(e,"mrp")+"."},"lines:menu:settings:failure":function(e){return"Zmiana ustawie nie powioda si."},"lines:menu:mrpPriority":function(e){return"Ustaw dostpne linie"},"lines:menu:mrpPriority:title":function(e){return"Ustawianie dostpnych linii"},"lines:menu:mrpPriority:submit":function(e){return"Ustaw priorytety MRP"},"lines:menu:mrpPriority:failure":function(e){return"Ustawianie linii nie powiodo si."},"lines:menu:mrpPriority:line":function(e){return"Nowa linia"},"lines:menu:mrpPriority:line:placeholder":function(e){return"Wybierz lini produkcyjn..."},"lines:menu:workerCount":function(e){return"Ustaw ilo pracownikw"},"lines:menu:workerCount:title":function(e){return"Ustawianie iloci pracownikw"},"lines:menu:workerCount:submit":function(e){return"Ustaw iloci pracownikw"},"lines:menu:workerCount:failure":function(e){return"Ustawianie iloci pracownikw nie powiodo si."},"lines:menu:orderPriority":function(e){return"Ustaw priorytety zlece"},"lines:menu:orderPriority:title":function(e){return"Ustawianie priorytetw zlece"},"lines:menu:orderPriority:submit":function(e){return"Ustaw priorytety zlece"},"lines:menu:orderPriority:failure":function(e){return"Ustawianie priorytetw zlece nie powiodo si."},"lines:menu:freezeOrders":function(e){return"Zamro zlecenia"},"lines:menu:freezeOrders:title":function(e){return"Zamraanie zlece"},"lines:menu:freezeOrders:line":function(e){return"Linia"},"lines:menu:freezeOrders:availableOrders":function(e){return"Dostpne zlecenia"},"lines:menu:freezeOrders:frozenOrders":function(e){return"Zamroone zlecenia"},"lines:menu:freezeOrders:no":function(e){return"Lp."},"lines:menu:freezeOrders:order":function(e){return"Zlecenie"},"lines:menu:freezeOrders:quantity":function(e){return"Ilo"},"lines:menu:freezeOrders:actions":function(e){return"Akcje"},"lines:menu:freezeOrders:submit":function(e){return"Zamro zlecenia"},"lines:menu:freezeOrders:failure":function(e){return"Zamraanie zlece nie powiodo si."},"lines:menu:freezeOrders:shift:1":function(e){return"I zmiana"},"lines:menu:freezeOrders:shift:2":function(e){return"I i II zmiana"},"lines:menu:freezeOrders:shift:3":function(e){return"wszystkie zmiany"},"lines:menu:redirLine:start":function(e){return"Przekieruj lini"},"lines:menu:redirLine:stop":function(e){return"Zakocz przekierowanie"},"lines:menu:deliveredOrders":function(e){return"Otwrz dostarczone zlecenia"},"orders:hd":function(e){return"Zlecenia"},"orders:_id":function(e){return"Nr zlecenia"},"orders:date":function(e){return"Data"},"orders:delayReason":function(e){return"Powd"},"orders:kind":function(e){return"Klasyfikacja"},"orders:quantityDone":function(e){return"Ilo zrobiona"},"orders:quantityTodo":function(e){return"Ilo do zrobienia"},"orders:quantityPlan":function(e){return"Ilo do rozplanowania"},"orders:incomplete":function(e){return"Ilo nierozplanowana"},"orders:hardComponent":function(e){return"Trudny komponent"},"orders:nc12":function(e){return"12NC"},"orders:name":function(e){return"Wyrb"},"orders:operation":function(e){return"Operacja"},"orders:machineTime":function(e){return"Czas Machine"},"orders:laborTime":function(e){return"Czas Labor"},"orders:manHours":function(e){return"RBH"},"orders:qty":function(e){return"Ilo"},"orders:mrp":function(e){return"MRP"},"orders:statuses":function(e){return"Status"},"orders:ignored":function(e){return"Ignorowane"},"orders:urgent":function(e){return"Pilne"},"orders:pinned":function(e){return"Przypite"},"orders:eto":function(e){return"ETO"},"orders:priority":function(e){return t.s(e,"priority",{E:"Pilot ETO",EK:"Kontynuacja pilota ETO",other:"Priorytet zlecenia"})},"orders:lines":function(e){return"Linia"},"orders:source":function(e){return"rdo"},"orders:source:plan":function(e){return"Zaplanowane"},"orders:source:added":function(e){return"Dodane"},"orders:source:incomplete":function(e){return"Niekompletne"},"orders:source:late":function(e){return"Opnione"},"orders:psStatus:unknown":function(e){return"Brak malowania"},"orders:psStatus:new":function(e){return"Oczekuje na malowanie"},"orders:psStatus:started":function(e){return"W trakcie malowania"},"orders:psStatus:startedMsp":function(e){return"W trakcie malowania (MSP)"},"orders:psStatus:partial":function(e){return"Niekompletne malowanie"},"orders:psStatus:finished":function(e){return"Malowanie zakoczone"},"orders:psStatus:aside":function(e){return"Malowanie odstawione"},"orders:psStatus:cancelled":function(e){return"Malowanie anulowane"},"orders:drillStatus:unknown":function(e){return"Brak wiercenia"},"orders:drillStatus:new":function(e){return"Oczekuje na wiercenie"},"orders:drillStatus:started":function(e){return"W trakcie wiercenia"},"orders:drillStatus:partial":function(e){return"Niekompletne wiercenie"},"orders:drillStatus:finished":function(e){return"Wiercenie zakoczone"},"orders:drillStatus:aside":function(e){return"Wiercenie odstawione"},"orders:drillStatus:cancelled":function(e){return"Wiercenie anulowane"},"orders:whStatus:unknown":function(e){return"Nieokrelony"},"orders:whStatus:todo":function(e){return"Do zrobienia"},"orders:whStatus:done":function(e){return"Zrobione"},"orders:dropZone":function(e){return t.v(e,"group")+" na "+t.v(e,"time")},"orders:qty:incomplete":function(e){return"("+t.v(e,"qty")+" "+t.p(e,"qty",0,"pl",{one:"nierozplanowana",few:"nierozplanowane",other:"nierozplanowanych"})+")"},"orders:late":function(e){return"Opnione"},"orders:resized":function(e){return"Zmieniona ilo"},"orders:comment":function(e){return"Ostatni komentarz"},"orders:menu:header":function(e){return"Zlecenie "+t.v(e,"order")},"orders:menu:sapOrder":function(e){return"Otwrz szczegy zlecenia SAP"},"orders:menu:shiftOrder":function(e){return"Otwrz szczegy zlecenia z linii"},"orders:menu:comment":function(e){return"Komentuj zlecenie"},"orders:menu:urgent":function(e){return"Oznacz zlecenie jako pilne"},"orders:menu:urgent:title":function(e){return"Pilne zlecenie"},"orders:menu:urgent:message":function(e){return"<p>Czy na pewno chcesz oznaczy zlecenie <em>"+t.v(e,"order")+"</em> jako pilne?</p><p>Pilne zlecenia planowane s na pocztku pracy linii, poza kolejnoci priorytetw zlece.</p>"},"orders:menu:urgent:yes":function(e){return"Oznacz jako pilne"},"orders:menu:urgent:failure":function(e){return"Nie udao si oznaczy zlecenia jako pilne."},"orders:menu:unurgent":function(e){return"Oznacz zlecenie jako niepilne"},"orders:menu:unurgent:message":function(e){return"<p>Czy na pewno chcesz oznaczy zlecenie  <em>"+t.v(e,"order")+"</em> jako niepilne?</p><p>Niepilne zlecenia planowane s w kolejnoci priorytetw zlece.</p>"},"orders:menu:unurgent:yes":function(e){return"Oznacz jako niepilne"},"orders:menu:ignore":function(e){return"Ignoruj zlecenie"},"orders:menu:ignore:title":function(e){return"Ignorowane zlecenie"},"orders:menu:ignore:message":function(e){return"<p>Czy na pewno chcesz zignorowa zlecenie <em>"+t.v(e,"order")+"</em>?</p><p>Ignorowane zlecenia nie s brane pod uwag podczas planowania.</p>"},"orders:menu:ignore:yes":function(e){return"Ignoruj zlecenie"},"orders:menu:ignore:failure":function(e){return"Ignorowanie zlecenia nie powiodo si."},"orders:menu:unignore":function(e){return"Przesta ignorowa zlecenie"},"orders:menu:unignore:message":function(e){return"<p>Czy na pewno chcesz przesta ignorowa zlecenie <em>"+t.v(e,"order")+"</em>?</p><p>Zlecenie ponownie bdzie brane pod uwag podczas planowania.</p>"},"orders:menu:unignore:yes":function(e){return"Przesta ignorowa zlecenie"},"orders:menu:quantity":function(e){return"Zmie ilo w zleceniu"},"orders:menu:quantity:title":function(e){return"Zmiana iloci"},"orders:menu:quantity:quantityTodo":function(e){return"Ilo do zrobienia:"},"orders:menu:quantity:quantityDone":function(e){return"Ilo zrobiona:"},"orders:menu:quantity:quantityRemaining":function(e){return"Ilo pozostaa do zrobienia:"},"orders:menu:quantity:quantityPlan":function(e){return"Ilo do rozplanowania:"},"orders:menu:quantity:help":function(e){return"Domylnie, <em>Ilo do rozplanowania</em> rwna jest <em>Iloci do zrobienia</em> lub <em>Iloci pozostaej do zrobienia</em>, jeeli wczona jest opcja <em>Planuj wg iloci pozostaej do zrobienia</em>. W tym polu mona nadpisa t warto."},"orders:menu:quantity:submit":function(e){return"Zmie ilo"},"orders:menu:quantity:failure":function(e){return"Zmiana iloci nie powioda si."},"orders:menu:lines":function(e){return"Zmie przypicie do linii"},"orders:menu:lines:title":function(e){return"Zmiana przypicia do linii"},"orders:menu:lines:submit":function(e){return"Zmie przypicie"},"orders:menu:lines:failure":function(e){return"Przypinanie nie powiodo si."},"orders:menu:lines:urgent":function(e){return"Pilne"},"orders:menu:lines:urgent:help":function(e){return"Pilne zlecenie moe by przypite do kadej linii bez wzgldu na Priorytet zlece."},"orders:menu:add":function(e){return"Dodaj zlecenie"},"orders:menu:remove":function(e){return"Usu zlecenie"},"orders:menu:remove:title":function(e){return"Usuwanie zlecenia"},"orders:menu:remove:message":function(e){return"<p>Czy na pewno chcesz usun zlecenie <em>"+t.v(e,"order")+"</em> z kolejki aktualnego planu?</p>"},"orders:menu:remove:yes":function(e){return"Usu zlecenie"},"orders:menu:remove:failure":function(e){return"Usuwanie zlecenia nie powiodo si."},"orders:menu:dropZone":function(e){return"Ustaw drop zone"},"orders:menu:dropZone:title":function(e){return"Ustawianie drop zone"},"orders:menu:dropZone:submit":function(e){return"Ustaw drop zone"},"orders:menu:dropZone:failure":function(e){return"Ustawianie drop zone nie powiodo si."},"orders:menu:dropZone:dropZone":function(e){return"Grupa drop zone"},"orders:menu:dropZone:time":function(e){return"Czas"},"orders:menu:dropZone:status":function(e){return"Status"},"orders:menu:dropZone:orders":function(e){return"Zlecenia do zmiany"},"orders:menu:dropZone:comment":function(e){return"Opcjonalny komentarz magazynu"},"orders:add":function(e){return"Dodaj zlecenie"},"orders:add:title":function(e){return"Dodawanie zlecenia"},"orders:add:submit":function(e){return"Dodaj zlecenie"},"orders:add:failure":function(e){return"Dodawanie zlecenia nie powiodo si."},"orders:add:invalidOrderNo":function(e){return"Podaj prawidowy, 9-cyfrowy nr zlecenia."},"orders:add:searching":function(e){return"<i class='fa fa-spinner fa-spin'></i><span>Wyszukiwanie zlecenia...</span>"},"orders:add:searchFailed":function(e){return"<i class='fa fa-spinner'></i><span>Wyszukiwanie zlecenia nie powiodo si.</span>"},"orders:add:ORDER_NOT_FOUND":function(e){return"Podane zlecenie nie istnieje."},"orders:add:alreadyExists":function(e){return"Zlecenie jest ju w aktualnym planie."},"orders:add:future":function(e){return"Zlecenie jest zaplanowane na przyszo."},"orders:add:undefinedMrp":function(e){return"MRP zlecenia nie jest zdefiniowane w tym planie."},"orders:add:requiredStatus":function(e){return"Zlecenie nie ma wymaganego statusu."},"orders:add:ignoredStatus":function(e){return"Zlecenie ma ignorowany status."},"orders:add:orderNo":function(e){return"Nr zlecenia"},"orders:add:urgent":function(e){return"Pilne"},"orders:add:plans":function(e){return"Zaplanowane w dniach"},"lateOrders:hd":function(e){return"Opnione"},"lateOrders:action":function(e){return"Dodaj opnione zlecenia"},"lateOrders:add:title":function(e){return"Dodawanie opnionych zlece"},"lateOrders:add:failure":function(e){return"Dodawanie zlece nie powiodo si."},"lateOrders:add:orders":function(e){return"Opnione zlecenia:"},"lateOrders:add:submit":function(e){return"Dodaj opnione zlecenia"},"lineOrders:orderNo":function(e){return"Nr zlecenia"},"lineOrders:unit":function(e){return"szt."},"lineOrders:qty:planned":function(e){return"Ilo zaplanowana"},"lineOrders:qty:done":function(e){return"Ilo zrobiona"},"lineOrders:qty:remaining":function(e){return"Ilo pozostaa"},"lineOrders:qty:total":function(e){return"Ilo cakowita"},"lineOrders:qty:incomplete":function(e){return"Ilo brakujca"},"lineOrders:pceTime":function(e){return"Czas 1 szt."},"lineOrders:manHours":function(e){return"RBH"},"lineOrders:time":function(e){return"Czas rozp.-zak."},"lineOrders:duration":function(e){return"Czas trwania"},"lineOrders:incomplete":function(e){return"("+t.v(e,"qty")+" "+t.p(e,"qty",0,"pl",{one:"brakujca",few:"brakujce",other:"brakujcych"})+")"},"lineOrders:downtimeReason":function(e){return"Powd przestoju"},"lineOrders:comment":function(e){return"Ostatni komentarz"},"lineOrders:list:group":function(e){return"Gr."},"lineOrders:list:no":function(e){return"Lp."},"lineOrders:list:shift":function(e){return"Zm."},"lineOrders:list:mrp":function(e){return"MRP"},"lineOrders:list:orderNo":function(e){return"Zlecenie"},"lineOrders:list:nc12":function(e){return"12NC"},"lineOrders:list:name":function(e){return"Nazwa wyrobu"},"lineOrders:list:qtyPlan":function(e){return"Ilo zaplanowana"},"lineOrders:list:qtyTodo":function(e){return"Ilo do zrobienia"},"lineOrders:list:qty:header":function(e){return"Ilo"},"lineOrders:list:qty:value":function(e){return t.v(e,"plan")+" z "+t.v(e,"todo")},"lineOrders:list:startTime":function(e){return"Pocztek"},"lineOrders:list:finishTime":function(e){return"Koniec"},"lineOrders:list:status":function(e){return"Status"},"lineOrders:list:lines":function(e){return"Linie"},"lineOrders:list:line":function(e){return"Linia"},"lineOrders:list:dropZone":function(e){return"Drop zone"},"lineOrders:list:whStatus":function(e){return"Etap"},"lineOrders:list:comment":function(e){return"Ostatni komentarz"},"lineOrders:menu:copy":function(e){return"Kopiuj list zlece"},"lineOrders:menu:copy:success":function(e){return"Lista zlece zostaa skopiowana do schowka."},"wh:menu:copy:lineGroup":function(e){return"Kopiuj list zlece <em>"+t.v(e,"group")+". "+t.v(e,"line")+"</em>"},"wh:menu:copy:lineGroupNo":function(e){return"Kopiuj nry zlece <em>"+t.v(e,"group")+". "+t.v(e,"line")+"</em>"},"wh:menu:export":function(e){return"Eksportuj zlecenia"},"wh:status:all":function(e){return"Wszystkie"},"wh:status:0":function(e){return"Nieokrelony"},"wh:status:1":function(e){return"Lista"},"wh:status:2":function(e){return"Buffor"},"wh:status:3":function(e){return t.p(e,"qtySent",0,"pl",{0:"Wysyka",other:"Wysano "+t.v(e,"qtySent")+" szt."})},"wh:sent:comment":function(e){return"Wysano "+t.p(e,"qtySent",0,"pl",{one:"1 sztuk",few:t.v(e,"qtySent")+" sztuki",other:t.v(e,"qtySent")+" sztuk"})+" na lini "+t.v(e,"line")+" "+t.v(e,"date")+" o "+t.v(e,"time")+"."},"wh:sent:label":function(e){return"Wysyana<br>ilo:"},"wh:export:fileName":function(e){return"WMES_PLAN_MAGAZYN_"+t.v(e,"date")},"wh:export:sheetName":function(e){return"Plan magazynu "+t.v(e,"date")},"stats:export:title":function(e){return"Eksportowanie statystyk"},"stats:export:mrps":function(e){return"MRP"},"stats:export:lines":function(e){return"Linie"},"stats:export:submit":function(e){return"Eksportuj statystyki"},"stats:export:fileName":function(e){return"WMES_Plan_Wykonanie_"+t.v(e,"from")+"_"+t.v(e,"to")},"stats:export:sheetName":function(e){return"Wyk. planu "+t.v(e,"from")+"-"+t.v(e,"to")},"stats:date":function(e){return"Data"},"stats:mrp":function(e){return"MRP"},"stats:line":function(e){return"Linia"},"stats:orderCount":function(e){return"Ilo zlece"},"stats:quantity":function(e){return"Ilo sztuk"},"stats:manHours":function(e){return"RBH"},"stats:hourlyPlan":function(e){return"Plan godzinowy"},"transport:export:title":function(e){return"Eksportowanie planu transportu"},"transport:export:mrps":function(e){return"MRP"},"transport:export:lines":function(e){return"Linie"},"transport:export:submit":function(e){return"Eksportuj plan transportu"},"transport:export:fileName":function(e){return"WMES_Plan_Transportu"},"transport:export:sheetName":function(e){return"Plan trans. "+t.v(e,"from")+"-"+t.v(e,"to")},"transport:date":function(e){return"Data"},"transport:time":function(e){return"Czas"},"transport:shiftNo":function(e){return"Zmiana"},"transport:line":function(e){return"Linia"},"transport:mrp":function(e){return"MRP"},"transport:orderNo":function(e){return"Zlecenie produkcyjne"},"transport:salesOrderNo":function(e){return"Zlecenie sprzeday"},"transport:salesOrderItem":function(e){return"Poz. zlecenia sprzeday"},"transport:quantity":function(e){return"Ilo sztuk"},"orderStatus:planned":function(e){return"Zaplanowane"},"orderStatus:unplanned":function(e){return"Niezaplanowane"},"orderStatus:incomplete":function(e){return"Niekompletne"},"orderStatus:started":function(e){return"Rozpoczte"},"orderStatus:completed":function(e){return"Zakoczone"},"orderStatus:surplus":function(e){return"Nadwyka"},"orderPriority:unclassified":function(e){return"Niesklasyfikowane"},"orderPriority:small":function(e){return"Mae"},"orderPriority:easy":function(e){return"atwe"},"orderPriority:hard":function(e){return"Trudne"},"settings:title":function(e){return"Formularz edycji ustawie planu"},"settings:msg:success":function(e){return"Ustawienia zostay zapisane."},"settings:msg:failure":function(e){return"Nie udao si zapisa ustawie!"},"settings:submit":function(e){return"Zapisz ustawienia"},"settings:forceWorkDay":function(e){return"Wymu pracujcy dzie"},"settings:forceWorkDay:help":function(e){return"Dzie zostanie potraktowany jako pracujcy nawet gdy nie ma adnych zlece z dan dat. Dziki temu niekompletne zlecenia z poprzedniego dnia zostan rozplanowane w tym dniu (np. zlecenia, ktre nie zmieciy si w pitku trafi do soboty a nie do poniedziaku)."},"settings:freezeHour":function(e){return"Godzina zamroenia kolejki zlece"},"settings:freezeHour:help":function(e){return"Godzina, po ktrej rozplanowane zlecenia zostan automatycznie zamroone. Zlecenia s zamraane po pierwszym imporcie zlece do 30 minut przed podan godzin (jeeli wystpi), lub po pierwszym przeliczeniu planu po podanej godzinie. Np. W planie na 12.01.2018 z godzin zamroenia rwn 23, zlecenia zostan zamroone 11.01.2018 o 22:45, jeeli o 22:45 zostan zaimportowane zlecenia z SAP lub po pierwszej rcznej zmianie w planie po 23:00."},"settings:lateHour":function(e){return"Godzina rozpoczcia opnionych zlece"},"settings:lateHour:help":function(e){return"Godzina, od ktrej rozplanowywane s rcznie dodane pilne zlecenia (opnione)."},"settings:etoPilotHour":function(e){return"Godzina rozpoczcia ETO pilotw"},"settings:etoPilotHour:help":function(e){return"Godzina, od ktrej rozplanowywane s zlecenia z priorytetem <em>E</em> - ETO pilot."},"settings:schedulingRate":function(e){return"Szybko planowania"},"settings:schedulingRate:help":function(e){return"Wspczynnik zmieniajcy czas wykonania jednej sztuki danego zlecenia: <code>OrderLaborTime / 100 / LineWorkerCount * 3600 * SchedulingRate</code>"},"settings:requiredStatuses":function(e){return"Wymagane statusy"},"settings:requiredStatuses:help":function(e){return"Lista wszystkich statusw jakie zlecenie musi mie, aby byo brane pod uwag podczas generowania planu."},"settings:ignoredStatuses":function(e){return"Ignorowane statusy"},"settings:ignoredStatuses:help":function(e){return"Lista statusw jakie zlecenie nie moe mie, aby byo brane pod uwag podczas generowania planu."},"settings:completedStatuses":function(e){return"Statusy zrobionego zlecenia"},"settings:completedStatuses:help":function(e){return"Lista ignorowanych statusw okrelajcych zakoczenie wykonywania zlecenia. Zlecenia z tymi statusami pozostan w planie, ale nie bd rozplanowywane na liniach produkcyjnych."},"settings:ignoredWorkCenters":function(e){return"Ignorowane WorkCentra"},"settings:ignoredWorkCenters:help":function(e){return"Lista WorkCenterw jakie wybrana operacja zlecenia nie moe mie, aby dane zlecenie byo brane pod uwag podczas generowania planu."},"settings:ignoreCompleted":function(e){return"Ignoruj ukoczone zlecenia"},"settings:ignoreCompleted:help":function(e){return"Podczas planowania pod uwag nie bd brane zlecenie, ktrych <em>Cakowita ilo zrobiona</em> jest wiksza lub rwna <em>Cakowitej iloci do zrobienia</em>."},"settings:useRemainingQuantity":function(e){return"Planuj wg iloci pozostaej do zrobienia"},"settings:useRemainingQuantity:help":function(e){return"Podczas planowania pod uwag brana bdzie <em>Ilo pozostaa do zrobienia</em>, a nie <em>Cakowita ilo do zrobienia</em>. Pozostaa ilo to <em>Cakowita ilo do zrobienia</em> pomniejszona o <em>Cakowit zrobion ilo</em>."},"settings:hardComponents":function(e){return"Trudne komponenty"},"settings:hardComponents:help":function(e){return"Jeeli zlecenie bdzie zawierao jeden z komponentw na tej licie, to zostanie zaklasyfikowane jako <em>Trudne</em>. Bez wzgldu na ilo sztuk oraz roboczogodzin."},"settings:hardBigComponents:help":function(e){return"Jeeli <em>Due</em> zlecenie bdzie zawierao jeden z komponentw na tej licie, to zostanie zaklasyfikowane jako <em>Trudne</em>."},"settings:line":function(e){return"Ustawienia linii"},"settings:line:placeholder":function(e){return"Linia produkcyjna..."},"settings:mrpPriority":function(e){return"Priorytet MRP"},"settings:mrpPriority:help":function(e){return"Lista MRP zlece, ktre mog by robione na danej linii. Kolejno ma znaczenie."},"settings:mrpPriority:placeholder":function(e){return"Lista kontrolerw MRP..."},"settings:activeTime":function(e){return"Czas aktywnoci"},"settings:activeTime:help":function(e){return"Czas dostpnoci linii w danym dniu. Warto dotyczy wszystkich przypisanych kontrolerw MRP."},"settings:mrp":function(e){return"Ustawienia kontrolera MRP"},"settings:mrp:help":function(e){return"Wybierz kontroler MRP, dla ktrego chcesz zdefiniowa ustawienia."},"settings:mrp:placeholder":function(e){return"Kontroler MRP..."},"settings:limitSmallOrders":function(e){return"Ogranicz mae zlecenia"},"settings:limitSmallOrders:help":function(e){return"W pierwszym przejciu planowania, ilo maych zlece rozplanowywanych na jednej linii zostanie ograniczona do iloci dostpnych linii. Na przykad, MRP ma 30 maych zlece i 5 linii akceptujcych mae zlecenia. Jeeli opcja nie bdzie wczona, to pierwsza linia zostanie zapeniona maymi zleceniami. Jeeli opcja zostanie wczona, to na kad lini trafi po 30/5=6 maych zlece."},"settings:extraOrderSeconds":function(e){return"Dodatkowy czas zlecenia"},"settings:extraOrderSeconds:help":function(e){return"Ilo sekund dodawana do kadego zlecenia oprcz zlecenia rozpocztego na pocztku zmiany produkcyjnej."},"settings:extraShiftSeconds":function(e){return"Czas na rozpoczcie zmian"},"settings:extraShiftSeconds:1":function(e){return"Czas na rozpoczcie I zmiany"},"settings:extraShiftSeconds:2":function(e){return"Czas na rozpoczcie II zmiany"},"settings:extraShiftSeconds:3":function(e){return"Czas na rozpoczcie III zmiany"},"settings:extraShiftSeconds:help":function(e){return"Ilo sekund dodawana do pierwszego zlecenia na pocztku zmiany produkcyjnej."},"settings:bigOrderQuantity":function(e){return"Due zlecenie"},"settings:bigOrderQuantity:help":function(e){return"Minimalna ilo sztuk do zrobienia, po przekroczeniu ktrej zlecenie klasyfikowane jest jako <em>Due</em>. Due zlecenia dziel si na <em>atwe</em> i <em>Trudne</em>."},"settings:hardOrderManHours":function(e){return"Trudne zlecenie"},"settings:hardOrderManHours:help":function(e){return"Minimalna ilo roboczogodzin, po przekroczeniu ktrej <em>Due</em> zlecenie klasyfikowane jest jako <em>Trudne</em>."},"settings:splitOrderQuantity":function(e){return"Dzielenie zlecenia"},"settings:splitOrderQuantity:help":function(e){return"Minimalna ilo sztuk do zrobienia, po przekroczeniu ktrej <em>Due</em> zlecenie jest dzielone na czci."},"settings:maxSplitLineCount":function(e){return"Ilo czci zlecenia"},"settings:maxSplitLineCount:help":function(e){return"Maksymalna ilo linii na jak <em>Due</em> zlecenie moe by podzielone. Zero - maksymalna dostpna ilo linii."},"settings:mrpLine":function(e){return"Ustawienia linii w MRP"},"settings:mrpLine:help":function(e){return"Wybierz lini produkcyjn, dla ktrej chcesz zdefiniowa ustawienia w zakresie wybranego kontrolera MRP."},"settings:mrpLine:placeholder":function(e){return"Linia produkcyjna..."},"settings:workerCount":function(e){return"Ilo pracownikw"},"settings:workerCount:shift":function(e){return"zm. "+t.v(e,"shiftNo")+":"},"settings:orderPriority":function(e){return"Priorytet zlece"},"settings:orderPriority:help":function(e){return"Kolejno wykonywania zlece na danej linii wg klasyfikacji: mae, atwe, trudne. atwe i trudne zlecenia s jednoczenie due."},"settings:groups":function(e){return"Grupy"},"settings:groups:no":function(e){return"Nr"},"settings:groups:splitOrderQuantity":function(e){return"Dzielenie zlecenia"},"settings:groups:lines":function(e){return"Linie"},"settings:groups:components":function(e){return"Komponenty"},"settings:groups:add":function(e){return"Dodaj grup"},"settings:groups:remove":function(e){return"Usu grup"},"settings:locked":function(e){return"Zablokowane"},"settings:tab:wh":function(e){return"Magazyn"},"settings:wh:groupDuration":function(e){return"Czas trwania grupy zlece [h]"},"settings:wh:groupExtraItems":function(e){return"Minimalna ilo sztuk w grupie"},"settings:wh:groupExtraItems:help":function(e){return"Jeeli ilo sztuk zlecenia w pierwszej/ostatniej grupie danej linii bdzie mniejsza lub rwna podanej wartoci, to grupa ta zostanie scalona z nastpn/poprzedni grup."},"settings:wh:sortByLines":function(e){return"Sortuj zlecenia w grupach wg linii"},"settings:wh:ignoredMrps":function(e){return"Ignorowane MRP (w starym module)"},"settings:wh:newIncludedMrps":function(e){return"Zablokowane MRP"},"changes:hd":function(e){return"<span class='planning-change-when'>"+t.v(e,"when")+"</span> przez <span class='planning-change-who'>"+t.v(e,"who")+"</span>: <span class='planning-change-what'>"+t.v(e,"what")+"</span>"},"changes:what:settings":function(e){return t.v(e,"count")+" "+t.p(e,"count",0,"pl",{one:"zmiana",few:"zmiany",other:"zmian"})+" ustawie"},"changes:what:addedOrders":function(e){return t.v(e,"count")+" "+t.p(e,"count",0,"pl",{one:"dodane zlecenie",few:"dodane zlecenia",other:"dodanych zlece"})},"changes:what:changedOrders":function(e){return t.v(e,"count")+" "+t.p(e,"count",0,"pl",{one:"zmienione zlecenie",few:"zmienione zlecenia",other:"zmienionych zlece"})},"changes:what:removedOrders":function(e){return t.v(e,"count")+" "+t.p(e,"count",0,"pl",{one:"usunite zlecenie",few:"usunite zlecenia",other:"usunitych zlece"})},"changes:what:changedLines":function(e){return t.v(e,"count")+" "+t.p(e,"count",0,"pl",{one:"zmieniony plan linii",few:"zmienione plany linii",other:"zmienionych planw linii"})},"changes:removedOrders:REQUIRED_STATUS":function(e){return"Brak wymaganego statusu: "+t.v(e,"requiredStatus")+"."},"changes:removedOrders:IGNORED_STATUS":function(e){return"Ignorowany status: "+t.v(e,"ignoredStatus")+"."},"changes:removedOrders:MISSING_ORDER":function(e){return"Brak zlecenia SAP dla danego dnia."},"changes:removedOrders:INCOMPLETE_DONE":function(e){return"Zlecenie niekompletne z poprzedniego dnia zostao zrobione."},"changes:settings:lines:remove":function(e){return"Usunito lini <em>"+t.v(e,"line")+"</em>"},"changes:settings:mrps:remove":function(e){return"Usunito MRP <em>"+t.v(e,"mrp")+"</em>"},"changes:settings:mrpLines:remove":function(e){return"Usunito lini <em>"+t.v(e,"line")+"</em> z MRP <em>"+t.v(e,"mrp")+"</em>"},"changes:settings:lines:change":function(e){return"Zmieniono lini <em>"+t.v(e,"line")+"</em>: <em>"+t.v(e,"property")+"</em>: "},"changes:settings:mrps:change":function(e){return"Zmieniono MRP <em>"+t.v(e,"mrp")+"</em>: <em>"+t.v(e,"property")+"</em>: "},"changes:settings:mrpLines:change":function(e){return"Zmieniono lini <em>"+t.v(e,"line")+"</em> w MRP <em>"+t.v(e,"mrp")+"</em>: <em>"+t.v(e,"property")+"</em>: "},"changes:settings:lines:add":function(e){return"Dodano lini <em>"+t.v(e,"line")+"</em>"},"changes:settings:mrps:add":function(e){return"Dodano MRP <em>"+t.v(e,"mrp")+"</em>"},"changes:settings:mrpLines:add":function(e){return"Dodano lini <em>"+t.v(e,"line")+"</em> do MRP <em>"+t.v(e,"mrp")+"</em>"},"copySettings:title":function(e){return"Kopiowanie ustawie linii"},"copySettings:submit":function(e){return"Kopiuj ustawienia"},"copySettings:source":function(e){return"Plan rdowy"},"copySettings:target":function(e){return"Plany docelowe"},"copySettings:target:all":function(e){return"Wszystkie"},"copySettings:target:empty":function(e){return"Brak docelowych planw."},"copySettings:mrps:all":function(e){return"Wszystkie"},"copySettings:mrps:in":function(e){return"Wszystkie wybrane MRP"},"copySettings:mrps:nin":function(e){return"Wszystkie oprcz wybranych MRP"},"copySettings:mrps:empty":function(e){return"Nie wybrano MRP do skopiowania."},"copySettings:what":function(e){return"Kopiuj"},"copySettings:what:empty":function(e){return"Nie wybrano ustawie do skopiowania."},"copySettings:what:workerCount":function(e){return"Iloci pracownikw"},"copySettings:what:activeTime":function(e){return"Czasy dostpnoci"},"copySettings:what:orderPriority":function(e){return"Priorytety zlece"},"copySettings:failure:fetchSettings":function(e){return"Nie udao si pobra ustawie dla planu "+t.v(e,"plan")+"."},"lockReason:mrp":function(e){return"MRP "+t.v(e,"mrp")+" zablokowane bezporednio."},"lockReason:line":function(e){return"Linia "+t.v(e,"line")+" znajduje si w zablokowanym MRP: "+t.v(e,"mrps")},"planExecution:title:all":function(e){return"Realizacja sekwencji"},"planExecution:title:mrp":function(e){return"Realizacja sekwencji dla "+t.v(e,"mrp")}}}),define("app/planning/util/contextMenu",["underscore","jquery","app/i18n","app/broker","app/orders/util/commentPopover","app/planning/templates/contextMenu","i18n!app/nls/planning"],function(e,t,n,r,i,o){"use strict";function a(e){var n=t(e.currentTarget).closest(".planning-menu").find("[tabindex]:not(.planning-menu-disabled)").toArray(),r=n.indexOf(e.currentTarget)-1;return-1===r&&(r=n.length-1),n[r].focus(),!1}function s(e){var n=t(e.currentTarget).closest(".planning-menu").find("[tabindex]:not(.planning-menu-disabled)").toArray(),r=n.indexOf(e.currentTarget)+1;return r>=n.length&&(r=0),n[r].focus(),!1}return{isVisible:function(e){return!!e.$contextMenu},hide:function(e,n){var i=e.$contextMenu;if(i){t(document.body).click(),r.publish("planning.contextMenu.hiding",{$menu:i});var o=i.data("options");t(window).off(".contextMenu."+e.idPrefix),t(document.body).off(".contextMenu."+e.idPrefix),i.data("backdrop").remove(),i.removeData("backdrop"),i.removeData("options"),!1===o.animate||!1===n?i.remove():i.fadeOut("fast",function(){i.remove()}),e.$contextMenu=null,r.publish("planning.contextMenu.hidden")}},show:function(n,i,u,c){var l,d=this.hide.bind(this,n),p=this.show.bind(this,n,i,u,c);l=c.menu?c.menu:(c={menu:c}).menu,d(!1),l=(l=l.map(function(e){return"-"===e?{type:"divider"}:"string"==typeof e?{type:"header",label:e}:(e.type||(e.type="item"),e)}).filter(function(e){return!1!==e.visible})).filter(function(e,t){var n=l[t+1];return"header"!==e.type||"header"===e.type&&n&&"item"===n.type});var f=t(o({className:c.className||"",top:i,icons:e.some(l,function(e){return!!e.icon}),menu:l}));f.on("mousedown",function(e){if(1!==e.which)return!1;e.stopPropagation()}),f.on("mouseup",function(e){if(1!==e.which)return!1}),f.on("contextmenu",!1),f.on("click","a[data-action]",function(e){var t=e.currentTarget;if(!t.classList.contains("planning-menu-disabled")&&!t.classList.contains("planning-menu-loading")){var r=t.dataset.action,i=l[r];f.find("a").addClass("planning-menu-loading"),e.contextMenu={hide:!0,action:r,item:i,view:n,top:c.top,left:c.left,menu:l,restore:p},i&&i.handler&&i.handler(e),e.contextMenu.hide?d():f.find(t).find(".fa").attr("class","fa fa-spinner fa-spin")}}),f.on("keydown","[tabindex]",function(e){var n=e.currentTarget.tagName,r="SELECT"===n||"TEXTAREA"===n||"INPUT"===n,i="SELECT"!==n&&"TEXTAREA"!==n,o=i&&"INPUT"!==n;switch(e.originalEvent.key){case"ArrowUp":return i?a(e):void 0;case"ArrowDown":return i?s(e):void 0;case"Tab":return e.shiftKey?a(e):s(e);case" ":case"Enter":if(o){var u=new t.Event("click");return u.pageY=c.top,u.pageX=c.left,t(e.currentTarget).trigger(u),!1}break;case"Delete":case"Backspace":if(!r)return d(),!1;break;case"Escape":return d(),!1}});var h=t('<div class="planning-menu-backdrop"></div>').one("mousedown",d);f.data("backdrop",h),f.data("options",c),t(window).one("scroll.contextMenu."+n.idPrefix,d).one("resize.contextMenu."+n.idPrefix,d),t(document.body).one("mousedown.contextMenu."+n.idPrefix,function(e){c.hideFilter&&!c.hideFilter(e)||d()}).append(h).append(f),n.$contextMenu=f,this.position(n,i,u),l.forEach(function(e,t){e.template&&e.handler&&e.handler(f.find('li[data-action="'+t+'"]'))}),!1!==c.autoFocus&&(f.find("[autofocus]").length?f.find("[autofocus]").first().focus().select():f.find("[tabindex]:not(.planning-menu-disabled)").first().focus()),r.publish("planning.contextMenu.shown",{$menu:f})},position:function(t,n,r){if(t.$contextMenu){var i=t.$contextMenu,o=i.outerWidth(),a=i.outerHeight();r+o>=document.body.clientWidth&&(r-=r+o-document.body.clientWidth+5);var s=window.innerHeight+window.pageYOffset;n+a>=s&&(n-=n+a-s+5),i.css({top:n+"px",left:r+"px"}),e.assign(i.data("options"),{top:n,left:r})}},actions:{sapOrder:function(e){return{icon:"fa-file-o",label:n.bound("planning","orders:menu:sapOrder"),handler:function(){window.open("/#orders/"+e)}}},comment:function(e){return{icon:"fa-comment-o",label:n("planning","orders:menu:comment"),handler:function(){var t=Math.min(window.screen.availWidth-200,1400),n=Math.min(window.screen.availHeight-160,800),r=window.screen.availWidth-t-80,i=window.open("/#orders/"+e,"WMES_ORDER_DETAILS","top=80,left="+r+",width="+t+",height="+n);i&&(i.onPageShown=function(){if(i){i.focus();var e=i.document.querySelector('textarea[name="comment"]');e&&e.focus(),setTimeout(function(){i.scrollTo(0,i.document.body.scrollHeight)},1)}})}}},commentPopover:function(e,t){return{icon:"fa-comment-o",label:n("planning","orders:menu:comment"),handler:function(n){i.show(n.contextMenu.view,e,n.contextMenu.top,n.contextMenu.left,{source:t||"other"})}}}}}}),define("app/orderDocuments/templates/bom",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="orderDocuments-bom '),__append(touch?"is-touch":""),__append('">\n  <div class="orderDocuments-bom-hd">\n    <input id="'),__append(idPrefix),__append('-filter" class="orderDocuments-bom-filter" type="text" value="'),__append(escapeFn(filterPhrase)),__append('" placeholder="&#61616; '),__append(helpers.t("bom:filter:ps")),__append('" data-vkb="numeric">\n    <div id="'),__append(idPrefix),__append('-documents" class="orderDocuments-bom-documents">\n      '),documents.forEach(function(e){__append('\n      <div class="orderDocuments-bom-document" data-nc15="'),__append(e.nc15),__append('">\n        <div class="orderDocuments-bom-document-name">'),__append(escapeFn(e.name)),__append('</div>\n        <div class="orderDocuments-bom-document-code">'),__append(escapeFn(e.nc15)),__append("</div>\n      </div>\n      ")}),__append('\n      <div class="orderDocuments-bom-filler" style="width: '),__append(scrollbarSize.width),__append('px">&nbsp;</div>\n    </div>\n  </div>\n  <div class="orderDocuments-bom-bd">\n    <div id="'),__append(idPrefix),__append('-components" class="orderDocuments-bom-components">\n      '),components.forEach(function(e,t){__append('\n      <div class="orderDocuments-bom-component '),__append(e.visible?"":"hidden"),__append('" data-component-index="'),__append(t),__append('">\n        <div class="orderDocuments-bom-component-label">\n          <div class="orderDocuments-bom-component-name">'),__append(escapeFn(e.name)),__append('</div>\n          <div class="orderDocuments-bom-component-code">\n            <span class="orderDocuments-bom-component-item">'),__append(escapeFn(e.item)),__append('</span>\n            <span class="orderDocuments-bom-component-nc12">'),__append(escapeFn(e.nc12)),__append('</span>\n          </div>\n        </div>\n        <div class="orderDocuments-bom-component-qty">\n          <div class="orderDocuments-bom-component-qty-value">'),__append(escapeFn(e.nc12?e.qty.toLocaleString():"")),__append('</div>\n          <div class="orderDocuments-bom-component-qty-unit">'),__append(escapeFn(e.nc12?e.unit:"")),__append("</div>\n        </div>\n      </div>\n      ")}),__append('\n      <div class="orderDocuments-bom-filler" style="height: '),__append(scrollbarSize.height),__append('px">&nbsp;</div>\n    </div>\n    <div id="'),__append(idPrefix),__append('-documentPages" class="orderDocuments-bom-documentPages">\n      '),components.forEach(function(e,t){__append('\n      <div class="orderDocuments-bom-documentPages-component '),__append(e.hasAnyMarks?"":"orderDocuments-bom-documentPages-component-empty"),__append(" "),__append(e.visible?"":"hidden"),__append('" data-component-index="'),__append(t),__append('">\n        '),e.documentPages.forEach(function(e){__append('\n        <div class="orderDocuments-bom-documentPages-document">\n          ');for(var t=0;t<4;++t)__append("\n          "),3===t&&e.length>4?(__append('\n          <div class="orderDocuments-bom-documentPages-page orderDocuments-bom-documentPages-more" data-document="'),__append(e[t].document),__append('">\n            ...\n          </div>\n          ')):e[t]?(__append('\n          <div class="orderDocuments-bom-documentPages-page" data-document="'),__append(e[t].document),__append('" data-page="'),__append(e[t].page),__append('">\n            '),__append(e[t].page),__append("\n          </div>\n          ")):__append('\n          <div class="orderDocuments-bom-documentPages-page orderDocuments-bom-documentPages-empty">\n            &nbsp;\n          </div>\n          '),__append("\n          ");__append("\n        </div>\n        ")}),__append("\n      </div>\n      ")}),__append('\n    </div>\n  </div>\n  <div class="orderDocuments-bom-ft">\n    <button id="'),__append(idPrefix),__append('-close" class="btn btn-default"><i class="fa fa-close"></i></button>\n    <button id="'),__append(idPrefix),__append('-prev" class="btn btn-default"><i class="fa fa-backward"></i></button>\n    <button id="'),__append(idPrefix),__append('-next" class="btn btn-default"><i class="fa fa-forward"></i></button>\n    <button id="'),__append(idPrefix),__append('-collapse" class="btn btn-default"><i class="fa fa-compress"></i></button>\n    <button id="'),__append(idPrefix),__append('-expand" class="btn btn-default"><i class="fa fa-expand"></i></button>\n  </div>\n  <div id="'),__append(idPrefix),__append('-vkb"></div>\n</div>\n');return __output}}),define("app/orderDocuments/views/BomView",["underscore","app/core/View","app/core/util","app/core/util/embedded","app/core/util/scrollbarSize","app/production/views/VkbView","app/planning/util/contextMenu","app/orderDocuments/templates/bom"],function(e,t,n,r,i,o,a,s){"use strict";return t.extend({template:s,events:{"click #-close":function(){this.model.set("bom",e.defaults({active:!1},this.model.get("bom")))},"click #-next":function(){var e=this.els.documentPages.scrollLeft,t=Math.floor(e/300);this.els.documentPages.scrollLeft=300*t+301},"click #-prev":function(){var e=this.els.documentPages.scrollLeft,t=Math.floor(e/300);this.els.documentPages.scrollLeft=1===t?0:300*t-299},"click #-expand":function(){var e=this.el.parentNode.dataset;e.expand=Math.min(4,parseInt(e.expand,10)+1).toString()},"click #-collapse":function(){var e=this.el.parentNode.dataset;e.expand=Math.max(0,parseInt(e.expand,10)-1).toString()},"input #-filter":function(e){this.filterPhrase=e.target.value,this.filter()},"focus #-filter":function(e){clearTimeout(this.timers.hideVkb);var t=this.$id("filter");this.vkbView.show(e.currentTarget,function(){t.trigger("input")})},"blur #-filter":function(){clearTimeout(this.timers.hideVkb),this.timers.hideVkb=setTimeout(this.vkbView.hide.bind(this.vkbView),100)},"mouseenter .orderDocuments-bom-documentPages-page":function(e){this.highlight(e.currentTarget,!0)},"mouseleave .orderDocuments-bom-documentPages-page":function(e){this.highlight(e.currentTarget,!1)},"click .orderDocuments-bom-documentPages-page":function(e){var t=this.$(e.currentTarget),n=t[0].dataset.document;if(n){var r=+t[0].dataset.page;if(r){var i=+t.closest(".orderDocuments-bom-documentPages-component")[0].dataset.componentIndex,o=this.model.get("bom").components[i].marks[n]||[];o.length&&this.model.trigger("marksRequested",{nc15:n,page:r,marks:o})}else this.showMoreMenu(e)}},"click .orderDocuments-bom-component":function(e){if("0"===this.el.parentNode.dataset.expand){var t=+e.currentTarget.dataset.componentIndex,n=this.els.documentPages.children[t],r=this.model.getCurrentOrder(),i=n.querySelector('.orderDocuments-bom-documentPages-page[data-document="'+r.nc15+'"]');i&&i.click()}}},initialize:function(){var e=this;e.filterPhrase="",e.vkbView=new o({reposition:function(){if(this.fieldEl){var t=e.$id("filter")[0].getBoundingClientRect();this.$el.css({top:t.top-1+"px",left:t.left+t.width-1+"px",right:"auto",bottom:"auto",marginLeft:"0"})}}}),e.listenTo(e.model,"change:bom",function(){this.model.isBomActive()||e.vkbView.hide()}),e.setView("#-vkb",e.vkbView)},destroy:function(){this.els={}},getTemplateData:function(){var t=this,n=t.model.getCurrentOrder(),o=t.model.get("bom")||{documents:{},components:[]},a=[];void 0!==o.documents[n.nc15]&&a.push({nc15:n.nc15,name:o.documents[n.nc15]}),Object.keys(o.documents).forEach(function(e){e!==n.nc15&&a.push({nc15:e,name:o.documents[e]})});var s=t.filterPhrase.toUpperCase().replace(/[^0-9A-Z]+/g,"");return o.components.forEach(function(n,r){n.nameFilter||(n.nameFilter=n.name.toUpperCase().replace(/[^0-9A-Z]+/g,"")),n.visible=t.isVisible(n,r,s),n.documentPages||(n.hasAnyMarks=!1,n.documentPages=[],a.forEach(function(t){var r={};(n.marks[t.nc15]||[]).forEach(function(e){n.hasAnyMarks=!0,r[e.p]={page:e.p,document:t.nc15}}),n.documentPages.push(e.values(r).sort(function(e,t){return e.page-t.page}))}))}),{touch:r.isEnabled(),filterPhrase:t.filterPhrase,documents:a,components:o.components,scrollbarSize:i}},afterRender:function(){this.els={components:this.$id("components")[0],documents:this.$id("documents")[0],documentPages:this.$id("documentPages")[0]},this.els.components.addEventListener("scroll",this.onComponentsScroll.bind(this)),this.els.documents.addEventListener("scroll",this.onDocumentsScroll.bind(this)),this.els.documentPages.addEventListener("scroll",this.onDocumentPagesScroll.bind(this))},filter:function(){var e=this,t=this.model.get("bom"),n=e.filterPhrase.toUpperCase().replace(/[^0-9A-Z]+/g,"");e.$(e.els.components).children().each(function(r){var i=t.components[r];if(i){var o=!e.isVisible(i,r,n);e.els.components.children[r].classList.toggle("hidden",o),e.els.documentPages.children[r].classList.toggle("hidden",o)}})},isVisible:function(e,t,n){return!(0!==n.length&&-1===e.item.indexOf(n)&&-1===e.nc12.indexOf(n)&&-1===e.nameFilter.indexOf(n))},highlight:function(e,t){var n=e.dataset.document,r=this.els.documents.querySelector('[data-nc15="'+n+'"]'),i=+this.$(e).closest(".orderDocuments-bom-documentPages-component")[0].dataset.componentIndex;this.els.components.children[i].classList.toggle("is-highlighted",t),r&&r.classList.toggle("is-highlighted",t)},showMoreMenu:function(t){for(var n=this,r=n.$(t.currentTarget),i=r[0].dataset.document,o=+r.closest(".orderDocuments-bom-documentPages-component")[0].dataset.componentIndex,s=n.model.get("bom").components[o].marks[i],u={},c=0;c<s.length;++c)u[s[c].p]=s[c].p;var l=[];e.values(u).sort(function(e,t){return e-t}).forEach(function(e,t){t<3||l.push({label:e.toString(),handler:function(e){n.model.trigger("marksRequested",{nc15:i,page:e,marks:s})}.bind(null,e)})});if(l.length>4){var d=4-l.length%4;if(d<4)for(var p=0;p<d;++p)l.push({label:"&nbsp;",disabled:!0})}a.show(n,t.pageY,t.pageX,{className:"orderDocuments-bom-documentPages-more-menu",menu:l})},onComponentsScroll:function(){this.els.documentPages.scrollTop=this.els.components.scrollTop},onDocumentsScroll:function(){this.els.documentPages.scrollLeft=this.els.documents.scrollLeft},onDocumentPagesScroll:function(){this.els.components.scrollTop=this.els.documentPages.scrollTop,this.els.documents.scrollLeft=this.els.documentPages.scrollLeft}})}),define("app/orderDocuments/templates/page",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="orderDocuments-page">\n  <div id="'),__append(idPrefix),__append('-controls" class="orderDocuments-page-controls"></div>\n  <div id="'),__append(idPrefix),__append('-preview" class="orderDocuments-page-preview"></div>\n  <div id="'),__append(idPrefix),__append('-bom" class="orderDocuments-page-bom hidden" data-expand="1"></div>\n</div>\n');return __output}}),define("app/orderDocuments/pages/DocumentViewerPage",["underscore","jquery","app/i18n","app/user","app/core/View","app/core/util/embedded","app/production/snManager","../views/DocumentViewerControlsView","../views/DocumentViewerPreviewView","../views/BomView","app/orderDocuments/templates/page"],function(e,t,n,r,i,o,a,s,u,c,l){"use strict";var d=window.navigator.userAgent.match(/(Chrome)\/([0-9]+)/)||["Unknown/0","Unknown",0];return i.extend({template:l,layoutName:"blank",localTopics:{"socket.connected":"onConnectionStatusChange","socket.disconnected":"onConnectionStatusChange"},remoteTopics:{"orderDocuments.remoteChecked.*":"onRemoteDocumentChecked","orderDocuments.eto.synced":"onEtoSynced","compRel.orders.updated.*":"onCompRelOrderUpdated"},initialize:function(){this.loadedFilesCount=0,this.$els={controls:null,viewer:null},this.defineViews(),this.defineBindings(),a.bind(this),this.setView("#-controls",this.controlsView),this.setView("#-preview",this.previewView),this.setView("#-bom",this.bomView)},defineViews:function(){this.controlsView=new s({model:this.model}),this.previewView=new u({model:this.model}),this.bomView=new c({model:this.model})},defineBindings:function(){var n=this,r=e.debounce(n.updateClientState.bind(n),1e3),i=e.debounce(n.joinProdLine.bind(n),1);n.listenTo(n.model,"change:prodLine change:station",i),n.listenTo(n.model,"change:prodLine",n.onProdLineChanged),n.listenTo(n.model,"change:spigotCheck",n.defineSpigotBindings),n.listenTo(n.model,"change:bom",n.onBomChanged),n.listenTo(n.model,"save",function(){r(),n.model.isBomActive()&&!n.model.isConfirmableDocumentSelected()||n.model.set("bom",null)}),n.listenTo(n.controlsView,"documentReloadRequested",n.previewView.loadDocument.bind(n.previewView)),n.listenTo(n.controlsView,"documentWindowRequested",setTimeout.bind(window,n.previewView.openDocumentWindow.bind(n.previewView),1)),n.listenTo(n.previewView,"loadDocument:success",n.onFileLoaded),n.socket.on("orderDocuments.remoteOrderUpdated",n.onRemoteOrderUpdated.bind(n)),n.defineSpigotBindings(),t(window).on("resize."+n.idPrefix,e.debounce(n.resize.bind(n),1)),t(window).on("keydown."+n.idPrefix,n.onKeyDown.bind(n)),o.isEnabled()&&(t(window).on("contextmenu."+n.idPrefix,function(e){e.preventDefault()}),n.cancelPinchZoom=function(e){e.touches&&e.touches.length>1&&e.preventDefault()},window.addEventListener("touchstart",n.cancelPinchZoom,{passive:!1}))},defineSpigotBindings:function(){var e=this.model.get("prodLine")._id;if(e&&this.model.get("spigotCheck")){if(this.spigotCheckSub){if(this.spigotCheckSub.prodLineId===e)return;this.spigotCheckSub.cancel()}this.spigotCheckSub=this.pubsub.subscribe("production.spigotCheck.*."+e,this.onSpigotMessage.bind(this)),this.spigotCheckSub.prodLineId=e}else this.spigotCheckSub&&(this.spigotCheckSub.cancel(),this.spigotCheckSub=null)},destroy:function(){t("body").removeClass("no-overflow orderDocuments"),t(window).off("."+this.idPrefix),this.cancelPinchZoom&&window.removeEventListener("touchstart",this.cancelPinchZoom)},load:function(e){return e(this.model.load())},afterRender:function(){this.$els.controls=this.$id("controls"),this.$els.viewport=this.$id("viewport"),t("body").addClass("no-overflow orderDocuments"),this.toggleConnectionStatus(),this.resize(),this.checkInitialConfig(),o.isEnabled()&&(window.WMES_DOCS_BOM_TOGGLE=this.toggleBom.bind(this),window.WMES_DOCS_BOM_ACTIVE=this.model.isBomActive.bind(this.model),this.onBomChanged(),window.parent.postMessage({type:"ready",app:"documents"},"*"))},resize:function(){this.controlsView.resize(null,window.innerHeight),this.previewView.resize(null,window.innerHeight),this.resizeBom()},resizeBom:function(){var e=this.controlsView.$id("filterForm")[0],t=e?e.offsetTop:0;this.$id("bom").css("height",window.innerHeight-t+1+"px")},toggleConnectionStatus:function(){this.$el.removeClass("is-connected is-disconnected").addClass(this.socket.isConnected()?"is-connected":"is-disconnected")},joinProdLine:function(){if(this.socket.isConnected()){var e=this.model,t=e.get("prodLine");t._id&&(this.socket.emit("orderDocuments.join",{clientId:e.id,prodLineId:t._id,station:e.get("station"),settings:e.getSettings(),orderInfo:e.getCurrentOrderInfo()}),this.defineSpigotBindings())}},updateClientState:function(){this.socket.isConnected()&&this.socket.emit("orderDocuments.update",{clientId:this.model.id,settings:this.model.getSettings(),orderInfo:this.model.getCurrentOrderInfo()})},checkInitialConfig:function(){this.model.get("prodLine")._id||this.controlsView.openSettingsDialog()},onSpigotMessage:function(e,t){switch(t.split(".")[2]){case"requested":this.onSpigotRequested(e);break;case"failure":this.onSpigotFailure(e);break;case"success":this.onSpigotSuccess(e);break;case"aborted":this.onSpigotAborted()}},scheduleSpigotMessageHideTimer:function(){var e=this;clearTimeout(e.timers.hideSpigotMessage),e.timers.hideSpigotMessage=setTimeout(function(){e.skipNextSpigotRequest=!1,e.onSnScanned=null,a.hideMessage()},7500)},onSpigotAborted:function(){clearTimeout(this.timers.hideSpigotMessage),this.skipNextSpigotRequest=!1,this.onSnScanned=null,a.hideMessage()},onSpigotRequested:function(e){this.onSnScanned=this.onSpigotScanned.bind(this),this.skipNextSpigotRequest?this.skipNextSpigotRequest=!1:a.showMessage({_id:"",orderNo:e.orderNo},"warning",function(){return n("orderDocuments","spigot:request",{component:e.component?e.component.name:"?"})},15e3),this.scheduleSpigotMessageHideTimer()},onSpigotFailure:function(e){this.skipNextSpigotRequest=!0,a.showMessage({_id:e.input,orderNo:e.orderNo},"error",function(){return n("orderDocuments","spigot:failure")},15e3),this.scheduleSpigotMessageHideTimer()},onSpigotSuccess:function(e){this.skipNextSpigotRequest=!0,a.showMessage({_id:e.input,orderNo:e.orderNo},"success",function(){return n("orderDocuments","spigot:success")},"spigotChecker"===e.source?3e3:15e3),this.scheduleSpigotMessageHideTimer()},onSpigotScanned:function(e){this.skipNextSpigotRequest=!0,a.showMessage({_id:e._id},"warning",function(){return n("orderDocuments","spigot:checking")},15e3),this.pubsub.publish("production.spigotCheck.scanned."+this.model.get("prodLine")._id,{nc12:e._id}),this.scheduleSpigotMessageHideTimer()},onKeyDown:function(e){if(!o.isEnabled())return e.ctrlKey&&70===e.keyCode?(this.controlsView.focusFilter(),!1):void(27===e.keyCode&&(this.controlsView.clearFilter(),this.controlsView.scrollIntoView()))},onConnectionStatusChange:function(){this.toggleConnectionStatus(),this.joinProdLine()},onRemoteOrderUpdated:function(e){null!==e.no&&(this.model.setRemoteOrder(e),this.model.save())},onRemoteDocumentChecked:function(e){null===this.model.get("localFile")&&(this.model.getCurrentOrder().nc15===e.nc15&&this.previewView.loadDocument())},onEtoSynced:function(e){var t=this.model.getCurrentOrder();"ETO"!==t.nc15||t.nc12!==e.nc12?this.model.checkEtoExistence(e.nc12):this.previewView.loadDocument()},onFileLoaded:function(){this.controlsView.checkNotes(),"Chrome"!==d[1]||d[2]>=49||(this.loadedFilesCount+=1,6===this.loadedFilesCount&&this.listenTo(this.model,"change:localFile change:localOrder change:remoteOrder",function(){var e=this.model.get("fileSource");if("remote"===e||"local"===e)return setTimeout(window.location.reload.bind(window.location),10)}))},toggleBom:function(e,t){if(!this.model.getCurrentOrder().no)return t(!0);this.model.isConfirmableDocumentSelected()?e=!1:null===e&&(e=!this.model.isBomActive()),e?this.showBom(t):this.hideBom(t)},hideBom:function(t){var n=this.model.get("bom");n&&n.active&&(n=e.defaults({active:!1},n),this.model.set("bom",n)),t&&t()},showBom:function(t){var n=this;if(n.model.isBomActive())t&&t();else{if(n.model.isBomAvailable()){var r=e.defaults({active:!0},this.model.get("bom"));return n.model.set("bom",r),void(t&&t())}var i=n.model.getCurrentOrder(),o=n.ajax({url:"/orders/"+i.no+"/documentContents?result=bom"});o.fail(function(){n.hideBom(function(){t&&t(!0)})}),o.done(function(e){e.active=!0,e.orderNo=i.no,n.model.set("bom",e),t&&t()})}},onBomChanged:function(){var e=this.model.isBomActive(),t=this.previewView.$iframe;t&&t.length&&t[0].contentWindow.toggleBom&&t[0].contentWindow.toggleBom(e),e&&(this.resizeBom(),this.bomView.render()),this.$id("bom").toggleClass("hidden",!e)},onProdLineChanged:function(){this.setUpConfirmedSub()},setUpConfirmedSub:function(){this.confirmedSub&&(this.confirmedSub.cancel(),this.confirmedSub=null);var e=this.model.get("prodLine")._id;e&&(this.confirmedSub=this.pubsub.subscribe("orderDocuments.confirmed."+e,this.onDocumentConfirmed.bind(this)))},onDocumentConfirmed:function(e){this.model.handleConfirmation(e)},onCompRelOrderUpdated:function(e){[this.model.get("localOrder"),this.model.get("remoteOrder")].forEach(function(t){t.no===e.orderNo&&(t.compRels=e.compRels)});var t=this.model.getCurrentOrderInfo();t.orderNo!==e.orderNo||"BOM"!==t.documentNc15&&t.documentNc15!==n(this.nlsDomain,"compRel")||this.previewView.loadDocument()}})}),define("app/core/util/bindLoadingMessage",["app/i18n","app/viewport"],function(e,t){"use strict";return function(n,r,i,o){return r.listenTo(n,"request",function(n,r,a){"read"===a.syncMethod&&(!1!==a.showLoadingMessage&&t.msg.loading(),r.done(function(e){!1!==e.showLoadingMessage&&t.msg.loaded()}.bind(null,a)),r.fail(function(n,r){var a=r.statusText;if("abort"===a)return void(!1!==n.showLoadingMessage&&t.msg.loaded());var s=r.responseJSON;s&&s.error&&(s.error.code?a=s.error.code:s.error.message&&(a=s.error.message));!1!==n.showLoadingMessage&&t.msg.loadingFailed(e(o||"core",i||"MSG:LOADING_FAILURE",{code:a}))}.bind(null,a)))}),n}}),define("app/core/templates/actionForm",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<form class="action-form" method="post" action="'),__append(formAction),__append('">\n  <input type="hidden" name="_method" value="'),__append(formMethod),__append('">\n  <p>'),__append("function"==typeof messageText?messageText():messageText),__append('</p>\n  <div class="form-actions">\n    <button type="submit" class="btn btn-'),__append(formActionSeverity),__append('">'),__append("function"==typeof formActionText?formActionText():formActionText),__append("</button>\n    "),"#"===cancelUrl?(__append('\n    <button type="button" class="cancel btn btn-link">'),__append(t("core","ACTION_FORM:BUTTON:cancel")),__append("</button>\n    ")):(__append('\n    <a class="cancel" href="'),__append(cancelUrl),__append('">'),__append(t("core","ACTION_FORM:BUTTON:cancel")),__append("</a>\n    ")),__append("\n  </div>\n</form>\n");return __output}}),define("app/core/views/ActionFormView",["underscore","app/i18n","app/viewport","app/router","../View","app/core/templates/actionForm"],function(e,t,n,r,i,o){"use strict";function a(e,n,r){return t.bound(t.has(e.nlsDomain,n)?e.nlsDomain:"core",n,r||{})}var s={formMethod:"POST",formAction:"/",formActionText:t.bound("core","ACTION_FORM:BUTTON"),formActionSeverity:"primary",messageText:t.bound("core","ACTION_FORM:MESSAGE"),successUrl:null,cancelUrl:"#",failureText:t.bound("core","ACTION_FORM:MESSAGE_FAILURE"),requestData:null},u=i.extend({template:o,events:{submit:"submitForm"},$errorMessage:null,initialize:function(){e.defaults(this.options,s),this.$errorMessage=null},destroy:function(){this.hideErrorMessage()},serialize:function(){return{formMethod:this.options.formMethod,formAction:this.options.formAction,formActionText:this.options.formActionText,formActionSeverity:this.options.formActionSeverity,messageText:this.options.messageText,cancelUrl:this.options.cancelUrl,model:this.model}},afterRender:function(){this.model&&this.listenToOnce(this.model,"change",this.render)},submitForm:function(){this.hideErrorMessage();var r=this.$('[type="submit"]').attr("disabled",!0),i=this.options,o=i.requestData;o=null==o?void 0:e.isFunction(o)?o.call(this):JSON.stringify(o);var a=this.ajax({type:i.formMethod,url:i.formAction,data:o}),s=this;return a.done(function(t){s.trigger("success",t),e.isString(i.successUrl)&&s.broker.publish("router.navigate",{url:i.successUrl,trigger:!0,replace:!0})}),a.fail(function(e){s.trigger("failure",e);var r=e.responseJSON&&e.responseJSON.error&&e.responseJSON.error.code||"?",o="ACTION_FORM:"+i.actionKey+":"+r,a=t.has(s.options.nlsDomain,o)?t(s.options.nlsDomain,o):i.failureText;a&&(s.$errorMessage=n.msg.show({type:"error",time:3e3,text:a}))}),a.always(function(){r.attr("disabled",!1)}),!1},hideErrorMessage:function(){null!==this.$errorMessage&&(n.msg.hide(this.$errorMessage),this.$errorMessage=null)}},{showDialog:function(t){var r=null;if(t.nlsDomain||(t.nlsDomain=t.model.getNlsDomain()),t.nlsDomain){r=a(t,"ACTION_FORM:DIALOG_TITLE:"+t.actionKey);var i=t.labelAttribute?t.model.get(t.labelAttribute):t.model.getLabel();t.messageText||(t.messageText=i?a(t,"ACTION_FORM:MESSAGE_SPECIFIC:"+t.actionKey,{label:i}):a(t,"ACTION_FORM:MESSAGE:"+t.actionKey)),t.formActionText||(t.formActionText=a(t,"ACTION_FORM:BUTTON:"+t.actionKey)),t.failureText||(t.failureText=a(t,"ACTION_FORM:MESSAGE_FAILURE:"+t.actionKey))}!t.formAction&&e.isFunction(t.model.url)&&(t.formAction=t.model.url()),e.isObject(t.requestData)||(t.requestData={}),e.isString(t.requestData.action)||(t.requestData.action=t.actionKey);var o=new u(t);return o.on("success",function(){n.closeDialog()}),n.showDialog(o,r),o},showDeleteDialog:function(e){return e.actionKey="delete",e.formMethod="DELETE",e.formActionSeverity="danger",u.showDialog(e)}});return u}),define("app/core/templates/jumpAction",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<form class="page-actions-jump" title="'),__append(title),__append('" style="width: '),__append(width),__append('px">\n  <div class="input-group">\n    <input name="phrase" type="text" autocomplete="new-password" class="form-control" placeholder="'),__append(placeholder),__append('" required '),__append(autoFocus?"autofocus":""),__append(' pattern="'),__append(pattern),__append('">\n    <span class="input-group-btn">\n      <button class="btn btn-default" type="submit"><i class="fa fa-search"></i></button>\n    </span>\n  </div>\n</form>\n');return __output}}),define("app/core/templates/exportAction",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})1===formats.length?(__append('\n<a class="page-actions-export btn btn-'),__append(type),__append(" "),__append(disabled?"disabled":""),__append('" href="'),__append(escapeFn(formats[0].href)),__append('"><i class="fa fa-download"></i><span>'),__append(label),__append("</span></a>\n")):(__append('\n<div class="page-actions-export btn-group">\n  <button type="button" class="btn btn-'),__append(type),__append(' dropdown-toggle" data-toggle="dropdown" '),__append(disabled?"disabled":""),__append('>\n    <i class="fa fa-download"></i><span>'),__append(label),__append('</span> <span class="caret"></span>\n  </button>\n  <ul class="dropdown-menu dropdown-menu-right">\n    '),_.forEach(formats,function(e){__append('\n    <li><a data-export-type="'),__append(e.type),__append('" href="'),__append(escapeFn(e.href)),__append('">'),__append(t("core","PAGE_ACTION:export:"+e.type)),__append("</a></li>\n    ")}),__append("\n  </ul>\n</div>\n")),__append("\n");return __output}}),define("app/core/util/pageActions",["underscore","jquery","app/i18n","app/viewport","../views/ActionFormView","app/core/templates/jumpAction","app/core/templates/exportAction"],function(e,t,n,r,i,o,a){"use strict";function s(e,t,n,r){if(!1===n)return null;var i=t.model||t.constructor,o=i.can&&(i.can[e]||i.can.manage);return o?o.bind(i,t,e):n||t.getPrivilegePrefix()+":"+(r||"MANAGE")}function u(e){var i=r.msg.show({type:"warning",text:n("core","MSG:EXPORTING"),sticky:!0}),o=t.ajax({url:e});return o.fail(function(){r.msg.hide(i,!0),r.msg.show({type:"error",time:2500,text:n("core","MSG:EXPORTING_FAILURE")})}),o.done(function(e){r.msg.hide(i),window.open("/express/exports/"+e)}),o}function c(e,t,r){var i=e.getNlsDomain();return n.bound(n.has(i,t)?i:"core",t,r)}return{add:function(e,t){return{label:c(e,"PAGE_ACTION:add"),icon:"plus",href:e.genClientUrl("add"),privileges:s("add",e,t)}},edit:function(e,t){return{label:c(e,"PAGE_ACTION:edit"),icon:"edit",href:e.genClientUrl("edit"),privileges:s("edit",e,t)}},delete:function(t,n,r){return r||(r={}),{label:c(t,"PAGE_ACTION:delete"),icon:"times",href:t.genClientUrl("delete"),privileges:s("delete",t,n),callback:function(n){n&&0!==n.button||(n&&n.preventDefault(),i.showDeleteDialog(e.defaults({model:t},r)))}}},export:function(t,n,r,i){var o={layout:t,page:n,collection:r,privilege:i,maxCount:6e4};1===arguments.length&&e.assign(o,t);var l=function(){var t,n=(t=o.collection).paginationData?t.paginationData.get("totalCount"):t.length,r=e.result(o.collection,"url")+";export.${format}?"+o.collection.rqlQuery,i=[{type:"csv",href:r.replace("${format}","csv")}];return window.XLSX_EXPORT&&n<o.maxCount/2&&i.push({type:"xlsx",href:r.replace("${format}","xlsx")}),a({type:n>=o.maxCount/2?"danger":n>=o.maxCount/4?"warning":"default",formats:i,disabled:n>=o.maxCount||0===n,label:o.label||c(o.collection,"PAGE_ACTION:export")})};return o.page.listenTo(o.collection,"sync",function(){o.layout.$(".page-actions-export").replaceWith(l()),d(o.layout.$(".page-actions-export"))}),{template:l,privileges:s("view",o.collection,o.privilege,"VIEW"),callback:o.callback,afterRender:d};function d(e){!function(e){var t=e.find(".page-actions-export");t.hasClass("btn-group")&&(t=t.find('a[data-export-type="csv"]'));if(!t.length)return;var n=t.prop("href");t.prop("href","javascript:void(0)"),t.on("click",function(e){e.preventDefault(),window.open(n)})}(e),function(e){var t=e.find('a[data-export-type="xlsx"]');if(!t.length)return;var n=t.prop("href");t.prop("href","javascript:void(0)"),t.on("click",function(e){e.preventDefault(),u(n)})}(e)}},exportXlsx:u,jump:function(t,n,i){return i=e.assign({mode:"rid",pattern:"^ *[0-9]+ *$",autoFocus:!window.IS_MOBILE,width:150},i),{template:function(){return o({title:i.title||c(n,"PAGE_ACTION:jump:title"),placeholder:i.placeholder||c(n,"PAGE_ACTION:jump:placeholder"),autoFocus:i.autoFocus,pattern:i.pattern,width:i.width})},afterRender:function(o){var a=o.find("form");a.submit(function(t,n,i,o){var a=i[0].phrase;if(a.readOnly)return!1;var s=a.value;a.readOnly=!0;var u=i.find(".fa").removeClass("fa-search").addClass("fa-spinner fa-spin"),l=t.ajax("rid"===o.mode?{url:e.result(n,"url")+";rid",data:{rid:s}}:{method:"HEAD",url:e.result(n,"url")+"/"+s});return l.done(function(e){t.broker.publish("router.navigate",{url:n.genClientUrl()+"/"+(e||s),trigger:!0})}),l.fail(function(){r.msg.show({type:"error",time:2e3,text:c(n,"MSG:jump:404",{rid:s})}),u.removeClass("fa-spinner fa-spin").addClass("fa-search"),a.readOnly=!1,a.select()}),!1}.bind(null,t,n,a,i))}}}}}),define("app/core/util/onModelDeleted",["app/i18n","app/viewport"],function(e,t){"use strict";return function(n,r,i,o){var a=i?i.model:null;(o||a&&a._id===r.id)&&(n.subscribe("router.executing").setLimit(1).on("message",function(){var n=r.getNlsDomain();t.msg.show({type:"warning",time:5e3,text:e(e.has(n,"MSG:DELETED")?n:"core","MSG:DELETED",{label:r.getLabel()})})}),n.publish("router.navigate",{url:r.genClientUrl("base"),trigger:!0,replace:!0}))}}),define("app/core/views/DetailsView",["underscore","app/i18n","../View","../util/onModelDeleted"],function(e,t,n,r){"use strict";return n.extend({remoteTopics:function(){var e={},t=this.model.getTopicPrefix();return e[t+".edited"]="onModelEdited",e[t+".deleted"]="onModelDeleted",e},initialize:function(){n.prototype.initialize.apply(this,arguments),this.once("afterRender",function(){this.listenTo(this.model,"change",this.onModelChanged)})},serialize:function(){var r=this.model.getNlsDomain();return e.assign(n.prototype.serialize.apply(this,arguments),{panelTitle:t(t.has(r,"PANEL:TITLE:details")?r:"core","PANEL:TITLE:details"),model:this.serializeDetails(this.model)})},serializeDetails:function(e){return"function"==typeof e.serializeDetails?e.serializeDetails():"function"==typeof e.serialize?e.serialize():e.toJSON()},onModelEdited:function(e){var t=e.model;t&&t._id===this.model.id&&this.model.set(t)},onModelDeleted:function(e){r(this.broker,this.model,e)},onModelChanged:function(){this.render()}})}),define("app/core/pages/createPageBreadcrumbs",["underscore","app/i18n","app/data/localStorage"],function(e,t,n){"use strict";function r(e,n){return t.bound(t.has(e,n)?e:"core",n)}return function(t,i){var o=t.modelProperty?t[t.modelProperty]:t.model||t.collection,a=o.getNlsDomain();if(i=Array.isArray(i)?i.map(function(e){return"string"==typeof e?{label:":"===e[0]?r(a,"BREADCRUMB"+e):e}:("string"==typeof e.label&&":"===e.label[0]&&(e.label=r(a,"BREADCRUMB"+e.label)),e)}):[],!1!==t.browseBreadcrumb){var s=i.length?o.genClientUrl("base"):null;if(s){var u=window.location.origin+window.location.pathname+s,c=e.find(JSON.parse(n.getItem("WMES_RECENT_LOCATIONS")||"[]"),function(e){if(0!==e.href.indexOf(u))return!1;var t=e.href.charAt(u.length);return""===t||"?"===t});if(c){var l=c.href.split("?")[1];l&&(-1===s.indexOf("?")?s+="?"+l:s+="&"+l)}}i.unshift({label:r(a,e.result(t,"browseBreadcrumb")||"BREADCRUMB:browse"),href:s})}if(!0===t.baseBreadcrumb)i.unshift(r(a,"BREADCRUMB:base"));else if(t.baseBreadcrumb){var d=e.result(t,"baseBreadcrumb");Array.isArray(d)?i.unshift.apply(i,d):i.unshift({label:r(a,"BREADCRUMB:base"),href:String(d)})}return i}}),define("app/core/pages/DetailsPage",["app/i18n","../util/bindLoadingMessage","../util/pageActions","../View","../views/DetailsView","./createPageBreadcrumbs"],function(e,t,n,r,i,o){"use strict";return r.extend({layoutName:"page",pageId:"details",modelProperty:"model",baseBreadcrumb:!1,breadcrumbs:function(){var t=this[this.modelProperty];return o(this,[t.getLabel()||e.bound(t.getNlsDomain(),"BREADCRUMB:details")])},actions:function(){var e=this[this.modelProperty];return[n.edit(e,e.privilegePrefix+":MANAGE"),n.delete(e,e.privilegePrefix+":MANAGE")]},initialize:function(){this.defineModels(),this.defineViews()},defineModels:function(){this[this.modelProperty]=t(this.options.model,this)},defineViews:function(){this.view=new(this.getViewClass())(this.getViewOptions())},load:function(e){return e(this[this.modelProperty].fetch(this.fetchOptions))},getViewClass:function(){return this.DetailsView||i},getViewOptions:function(){var e={model:this[this.modelProperty]};return"function"==typeof this.detailsTemplate&&(e.template=this.detailsTemplate),"function"==typeof this.serializeDetails&&(e.serializeDetails=this.serializeDetails),e}})}),define("app/data/createOnDemandStorage",["app/time","app/broker","app/pubsub"],function(e,t,n){"use strict";return function(e){var t=null,r=null,i=null;function o(){i=null,null!==r&&(t.destroy(),t=null,r=null)}return{acquire:function(){return null!==i&&(clearTimeout(i),i=null),null===r&&(t=n.sandbox(),r=e(t),function(e,t){var n=t.getTopicPrefix();e.subscribe(n+".added",function(e){t.add(e.model)}),e.subscribe(n+".edited",function(e){var n=t.get(e.model._id);n?n.set(e.model):t.add(e.model)}),e.subscribe(n+".deleted",function(e){t.remove(e.model._id)})}(t,r)),r},release:function(){null!==i&&clearTimeout(i),i=setTimeout(o,3e4)}}}}),define("app/delayReasons/DelayReason",["../i18n","../core/Model"],function(e,t){"use strict";return t.extend({urlRoot:"/delayReasons",clientUrlRoot:"#delayReasons",topicPrefix:"delayReasons",privilegePrefix:"DICTIONARIES",nlsDomain:"delayReasons",labelAttribute:"name",defaults:{active:!0},serialize:function(){var t=this.toJSON();return t.active=e("core","BOOL:"+t.active),t.requireComponent=e("core","BOOL:"+!!t.requireComponent),t}})}),define("app/delayReasons/DelayReasonCollection",["../core/Collection","./DelayReason"],function(e,t){"use strict";return e.extend({model:t,rqlQuery:"sort(name)",comparator:"name"})}),define("app/delayReasons/storage",["../data/createOnDemandStorage","./DelayReasonCollection"],function(e,t){"use strict";return e(function(){return new t(null,{paginate:!1})})}),define("app/printers/templates/pageAction",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="page-actions-printers btn-group">\n    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">\n        <i class="fa fa-print"></i><span>'),__append(label),__append('</span> <span class="caret"></span>\n    </button>\n    <ul class="dropdown-menu dropdown-menu-right">\n        <li><a href="javascript:void(0)" data-printer-id="">'),__append(t("printers","menu:browser")),__append("</a></li>\n        "),_.forEach(printers,function(e){__append('\n        <li><a href="javascript:void(0)" data-printer-id="'),__append(e._id),__append('">'),__append(escapeFn(e.label)),__append("</a></li>\n        ")}),__append("\n    </ul>\n</div>\n");return __output}}),define("app/printers/views/PrinterPickerView",["underscore","jquery","app/i18n","app/broker","app/pubsub","app/viewport","app/core/View","app/planning/util/contextMenu","app/printers/templates/pageAction"],function(e,t,n,r,i,o,a,s,u){"use strict";var c=null;function l(n,r){null===c?function(n,r){var o=t.ajax({url:"/printing/printers"});i.subscribe("printing.printers.**",function(t,n){if(null!==c)switch(n){case"printing.printers.added":c.push(t.model),p();break;case"printing.printers.deleted":c=c.filter(function(e){return e._id!==t.model._id});break;case"printing.printers.edited":var r=e.find(c,function(e){return e._id===t.model._id});r?e.assign(r,t.model):c.push(t.model),p()}}),o.fail(function(){r([])}),o.done(function(e){c=e.collection||[],r(d(n))})}(n,r):setTimeout(r,1,d(n))}function d(t){return t&&c?c.filter(function(n){return e.isEmpty(n.tags)||e.includes(n.tags,t)}):c||[]}function p(){c.sort(function(e,t){return e.label.localeCompare(t.label)})}return a.extend({},{contextMenu:function(e,t){e.contextMenu.hide=!1;var i=r.sandbox();i.subscribe("planning.contextMenu.hidden",function(){i.destroy(),i=null,e.contextMenu.onCancel&&e.contextMenu.onCancel()}),l(e.contextMenu.tag,function(r){if(i){if(!r.length)return t(null);var o=[n("printers","menu:header"),{label:n("printers","menu:browser"),handler:t.bind(null,null)}].concat(r.map(function(e){return{label:e.label,handler:t.bind(null,e._id)}}));s.show(e.contextMenu.view,e.pageY-40,e.pageX-15,o)}})},listAction:function(e,n){var r=t(e.currentTarget).addClass("disabled").prop("disabled",!0);e.contextMenu=e.listAction,e.contextMenu.onCancel=function(){r.removeClass("disabled").prop("disabled",!1)},this.contextMenu(e,function(t){e.contextMenu.onCancel(),n(t)})},pageAction:function(e,r){var i=e.view.model||e.view.collection,a=i.getNlsDomain?i.getNlsDomain():i.nlsDomain||"core",s="PAGE_ACTION:print",p=e.label||(n.has(a,s)?n(a,s):n("core",s)),f=d(e.tag);return 0===f.length?{label:p,icon:"print",privileges:"USER",callback:function(n){if(c&&0===d(e.tag).length)return r(null);var i=t(n.currentTarget).find(".btn").addClass("disabled").prop("disabled",!0),a=i.find(".fa").removeClass("fa-print").addClass("fa-spinner fa-spin"),s=e.view.broker.sandbox();s.subscribe("html2pdf.completed",function(){s.destroy(),s=null,a.removeClass("fa-spinner fa-spin").addClass("fa-print"),i.prop("disabled",!1).removeClass("disabled")}),l(e.tag,function(t){if(s){if(!t.length)return r(null);o.currentLayout.setActions(e.view.actions,e.view),o.currentLayout.$(".page-actions-printers").find(".btn").click()}})}}:{template:function(){return u({label:p,printers:f})},callback:function(e){var n=t(e.currentTarget);n.data("printers-bound")||(n.data("printers-bound",!0),n.find(".dropdown-menu").on("click","a",function(e){r(e.currentTarget.dataset.printerId||null)}))}}},selectField:function(r,i){i=e.assign({id:"printer",label:n("printers","select:label")},i);var o=r.$id(i.id||"printer");if(!o.length){var a=r.$(".form-actions");if(!a.length)return;o=t("<div></div>").insertBefore(a)}o.prop("id","").addClass("form-group"),o.append('<label for="'+r.idPrefix+"-"+i.id+'">'+i.label+"</label>"),o.append('<input class="form-control" value="" readonly id="'+r.idPrefix+"-"+i.id+'" placeholder="'+n("printers","select:browser")+'">');var s=d(i.tag);function u(e){o.addClass("has-required-select2"),r.$id(i.id).removeClass("form-control").prop("placeholder",n("printers","select:placeholder")).prop("readonly",!1).prop("required",!0).select2({width:"100%",data:[{id:"browser",text:n("printers","select:browser")}].concat(e.map(function(e){return{id:e._id,text:e.label}}))})}c&&0===s.length?o.remove():null===c?l(i.tag,function(e){0!==r.$id(i.id).length&&(0!==e.length?u(e):o.remove())}):u(s)}})}),define("app/data/orgUnits",["./divisions","./subdivisions","./mrpControllers","./prodFlows","./workCenters","./prodLines"],function(e,t,n,r,i,o){"use strict";var a={division:"subdivision",subdivision:"mrpController",mrpController:"prodFlow",mrpControllers:"prodFlow",prodFlow:"workCenter",workCenter:"prodLine",prodLine:null},s={prodLine:"workCenter",workCenter:"prodFlow",prodFlow:"mrpController",mrpController:"subdivision",mrpControllers:"subdivision",subdivision:"division",division:null},u={division:e,subdivision:t,mrpController:n,mrpControllers:n,prodFlow:r,workCenter:i,prodLine:o};return{TYPES:{division:!0,subdivision:!0,mrpController:!0,mrpControllers:!0,prodFlow:!0,workCenter:!0,prodLine:!0},getCollection:function(e){return u[e]||null},getProdFlowsForSubdivision:function(e){return"string"==typeof e&&(e=t.get(e)),e?r.filter(function(t){return t.getSubdivision()===e}):[]},getAllByType:function(e){return u[e].models},getActiveByType:function(e,t){return t||(t=function(){return!0}),u[e].models.filter(function(e){return!e.get("deactivatedAt")&&t(e)})},getAllDivisions:function(){return e.models},getAllForProdLine:function(a){"string"==typeof a&&(a=o.get(a));var s={division:null,subdivision:null,mrpControllers:null,prodFlow:null,workCenter:null,prodLine:null};if(!a)return s;s.prodLine=a.id;var u=i.get(a.get("workCenter"));if(!u)return s;s.workCenter=u.id;var c=r.get(u.get("prodFlow"));if(!c)return s;s.prodFlow=c.id;var l=c.get("mrpController");if(!Array.isArray(l)||!l.length)return s;if(s.mrpControllers=l,!(l=n.get(l[0])))return s;var d=t.get(l.get("subdivision"));if(!d)return s;s.subdivision=d.id;var p=e.get(d.get("division"));return p?(s.division=p.id,s):s},getType:function(a){if(null===a)return null;if(a.constructor===o.model)return"prodLine";if(a.constructor===i.model)return"workCenter";if(a.constructor===r.model)return"prodFlow";if(a.constructor===n.model)return"mrpController";if(a.constructor===t.model)return"subdivision";if(a.constructor===e.model)return"division";throw new Error("Unknown org unit type!")},getChildType:function(e){return a[e]||"division"},getChildren:function(e){var t=this.getType(e),n=this.getChildType(t),r=u[n];return r?function(e,t,n){return e.filter(function(e){var r=e.get(t);return!!r&&(Array.isArray(r)?-1!==r.indexOf(n.id):r===n.id)})}(r,t,e):[]},getByTypeAndId:function(e,t){var n=u[e];return n&&n.get(t)||null},getParent:function(e){if(!e)return null;var t=this.getType(e),n=s[t],r=e.get(n);return!r||Array.isArray(r)&&!r.length?null:this.getByTypeAndId(n,Array.isArray(r)?r[0]:r)},RELATION_TYPES:{SIBLINGS:"siblings",TYPES:"types",CHILD:"child",DIFFERENT_CHILD:"differentChild",PARENT:"parent",DIFFERENT_PARENT:"differentParent",UNRELATED:"unrelated"},getRelationType:function(e,t,n,r){if(null===e&&"division"===n)return this.RELATION_TYPES.CHILD;if("division"===e&&null===n)return this.RELATION_TYPES.PARENT;var i=this.getByTypeAndId(e,t),o=this.getByTypeAndId(n,r);return e===n?this.getParent(i)===this.getParent(o)?this.RELATION_TYPES.SIBLINGS:this.RELATION_TYPES.TYPES:a[e]===n?this.getParent(o)===i?this.RELATION_TYPES.CHILD:this.RELATION_TYPES.DIFFERENT_PARENT:s[e]===n?this.getParent(i)===o?this.RELATION_TYPES.PARENT:this.RELATION_TYPES.DIFFERENT_CHILD:this.RELATION_TYPES.UNRELATED},getDivisionFor:function(n){return n?n.constructor===e.model?n:(n.constructor!==t.model&&(n=this.getSubdivisionFor(n)),this.getParent(n)):null},getSubdivisionFor:function(n){return n&&n.constructor!==e.model?n.constructor===t.model?n:this.getSubdivisionFor(this.getParent(n)):null},containsProdLine:function(e,t,n){if("prodLine"===e)return Array.isArray(t)?-1!==t.indexOf(n):t===n;for(var r=this.getByTypeAndId("prodLine",n);;){var i=this.getParent(r);if(!i)return!1;if(this.getType(i)===e)return Array.isArray(t)?-1!==t.indexOf(i.id):t===i.id;r=i}}}}),define("app/companies/Company",["../core/Model","app/core/util/colorLabel"],function(e,t){"use strict";return e.extend({urlRoot:"/companies",clientUrlRoot:"#companies",topicPrefix:"companies",privilegePrefix:"DICTIONARIES",nlsDomain:"companies",labelAttribute:"name",defaults:{name:"",shortName:"",color:"#000000"},serialize:function(){var e=this.toJSON();return e.name||(e.name=e._id),e.color=t(e.color),e}})}),define("app/companies/CompanyCollection",["../core/Collection","./Company"],function(e,t){"use strict";return e.extend({model:t,rqlQuery:"sort(_id)"})}),define("app/data/companies",["app/companies/CompanyCollection","./createStorage"],function(e,t){"use strict";return t("COMPANIES","companies",e)}),define("app/prodFunctions/ProdFunction",["../i18n","../data/companies","../core/Model","app/core/util/colorLabel"],function(e,t,n,r){"use strict";return n.extend({urlRoot:"/prodFunctions",clientUrlRoot:"#prodFunctions",topicPrefix:"prodFunctions",privilegePrefix:"DICTIONARIES",nlsDomain:"prodFunctions",labelAttribute:"label",defaults:function(){return{label:"",direct:!1,dirIndirRatio:100,color:"#000000"}},serialize:function(){var t=this.toJSON();return t.label||(t.label=t._id),t.dirIndirRatio=t.direct?t.dirIndirRatio.toLocaleString()+" / "+(100-t.dirIndirRatio).toLocaleString():"-",t.direct=e("prodFunctions","direct:"+t.direct),t.color=r(t.color),t}})}),define("app/prodFunctions/ProdFunctionCollection",["../core/Collection","./ProdFunction"],function(e,t){"use strict";return e.extend({model:t,rqlQuery:"sort(label)",comparator:"label"})}),define("app/data/prodFunctions",["app/prodFunctions/ProdFunctionCollection","./createStorage"],function(e,t){"use strict";return t("PROD_FUNCTIONS","prodFunctions",e)}),define("app/wmes-fap-categories/Category",["require","../i18n","../core/Model","../data/orgUnits","../data/prodFunctions","app/core/templates/userInfo"],function(e,t,n,r,i,o){"use strict";return n.extend({urlRoot:"/fap/categories",clientUrlRoot:"#fap/categories",topicPrefix:"fap.categories",privilegePrefix:"FAP",nlsDomain:"wmes-fap-categories",labelAttribute:"name",defaults:{active:!0,planners:!1},serialize:function(){var n=this.toJSON(),a=e("app/wmes-fap-entries/dictionaries"),s=a&&a.categories.get(n.etoCategory);return n.active=t("core","BOOL:"+n.active),n.planners=t("core","BOOL:"+n.planners),n.etoCategory=s?s.getLabel():""===n.etoCategory?t("core","BOOL:true"):null===n.etoCategory?t("core","BOOL:false"):n.etoCategory,n.users=(n.users||[]).map(function(e){return o({userInfo:e})}),n.notifications=(n.notifications||[]).map(function(e){return{subdivisions:e.subdivisions.map(function(e){var t=r.getByTypeAndId("subdivision",e);if(!t)return e;var n=r.getParent(t);return(n?n.getLabel():"?")+" \\ "+t.getLabel()}),prodFunctions:e.prodFunctions.map(function(e){var t=i.get(e);return t?t.getLabel():e})}}),n}})}),define("app/wmes-fap-categories/CategoryCollection",["../core/Collection","./Category"],function(e,t){"use strict";return e.extend({model:t,rqlQuery:"sort(name)",comparator:"name"})}),define("app/wmes-fap-subCategories/SubCategory",["require","../i18n","../core/Model","../data/orgUnits","../data/prodFunctions","app/core/templates/userInfo"],function(e,t,n,r,i,o){"use strict";return n.extend({urlRoot:"/fap/subCategories",clientUrlRoot:"#fap/subCategories",topicPrefix:"fap.subCategories",privilegePrefix:"FAP",nlsDomain:"wmes-fap-subCategories",labelAttribute:"name",defaults:{active:!0,planners:!1},serialize:function(){var n=this.toJSON(),a=e("app/wmes-fap-entries/dictionaries"),s=a&&a.subCategories.get(n.etoCategory),u=a&&a.categories.get(n.parent);return n.active=t("core","BOOL:"+n.active),n.planners=t("core","BOOL:"+n.planners),u&&(n.parent=u.getLabel(),n.reqFields&&n.reqFields.enabled||(n.reqFields=u.get("reqFields")||{})),n.etoCategory=s?s.getLabel():""===n.etoCategory?t("core","BOOL:true"):null===n.etoCategory?t("core","BOOL:false"):n.etoCategory,n.users=(n.users||[]).map(function(e){return o({userInfo:e})}),n.notifications=(n.notifications||[]).map(function(e){return{subdivisions:e.subdivisions.map(function(e){var t=r.getByTypeAndId("subdivision",e);if(!t)return e;var n=r.getParent(t);return(n?n.getLabel():"?")+" \\ "+t.getLabel()}),prodFunctions:e.prodFunctions.map(function(e){var t=i.get(e);return t?t.getLabel():e})}}),n}})}),define("app/wmes-fap-subCategories/SubCategoryCollection",["require","../core/Collection","./SubCategory"],function(e,t,n){"use strict";return t.extend({model:n,rqlQuery:"sort(parent,name)",comparator:function(t,n){var r=t.attributes.parent,i=n.attributes.parent;if(r===i)return t.attributes.name.localeCompare(n.attributes.name,void 0,{numeric:!0,ignorePunctuation:!0});var o=e("app/wmes-fap-entries/dictionaries");if(o){var a=o.categories.get(r),s=o.categories.get(i);a&&(r=a.getLabel()),s&&(i=s.getLabel())}return r.localeCompare(i,void 0,{numeric:!0,ignorePunctuation:!0})}})}),define("app/settings/Setting",["../core/Model"],function(e){"use strict";return e.extend({urlRoot:"/settings",clientUrlRoot:"#settings",topicPrefix:"settings",privilegePrefix:"SETTINGS",nlsDomain:"core",defaults:{value:null},getValue:function(){return this.get("value")}})}),define("app/settings/SettingCollection",["underscore","jquery","app/core/Collection","./Setting"],function(e,t,n,r){"use strict";return n.extend({model:r,rqlQuery:"select(value)",matchSettingId:null,topicSuffix:"**",initialize:function(e,t){t.pubsub&&this.setUpPubsub(t.pubsub)},setUpPubsub:function(t){var n=this,r=Array.isArray(n.topicSuffix)?n.topicSuffix:[n.topicSuffix];e.forEach(r,function(e){t.subscribe("settings.updated."+e,function(e){var t=n.get(e._id);t?t.set(e):n.add(e)})})},fetchIfEmpty:function(e,n){if(!this.isEmpty())return e?e.call(n):null;var r=t.Deferred(),i=this.fetch({reset:!0});return e?(i.done(function(){var i=[].concat(e.call(n));t.when.apply(t,i).then(function(){r.resolve()},function(){r.reject()})}),r.promise()):i},update:function(n,r){if(void 0===(r=this.prepareValue(n,"string"==typeof r?r.trim():r)))return t.Deferred().reject().promise();var i=this.get(n);if(i){if(e.isEqual(i.getValue(),r))return t.Deferred().resolve().promise()}else this.add({_id:n,value:null}),i=this.get(n);return i.save({value:r})},prepareValue:function(e,t){return t},prepareObjectIdValue:function(e){if(null===e||""===e)return null;var t=String(e).toLowerCase();return/^[a-f0-9]{24}$/.test(t)?t:void 0},prepareMultiObjectIdValue:function(e){return String(e).toLowerCase().split(",").filter(function(e){return/^[a-f0-9]{24}$/.test(e)})},prepareMultiSelect2Value:function(e){return String(e||"").split(",").filter(function(e){return e.length>0})},prepareNumericValue:function(e,t,n,r){var i=parseInt(e,10);return isNaN(i)?r:null!=t&&i<t?t:null!=n&&i>n?n:i},prepareFloatValue:function(e,t,n,r){var i=parseFloat(e);return isNaN(i)?r:null!=t&&i<t?t:null!=n&&i>n?n:i},prepareFormValue:function(e,t){return t||""},getValue:function(e,t){var n=this.get((this.idPrefix||"")+e);return n?n.getValue():null==t?null:t}})}),define("app/wmes-fap-entries/Setting",["../settings/Setting"],function(e){"use strict";return e.extend({urlRoot:"/fap/settings",nlsDomain:"wmes-fap-entries"})}),define("app/wmes-fap-entries/SettingCollection",["underscore","app/user","app/settings/SettingCollection","./Setting"],function(e,t,n,r){"use strict";return n.extend({model:r,idPrefix:"fap.",topicSuffix:"fap.**",prepareValue:function(e,t){if(/Functions$/.test(e))return Array.isArray(t)?t:"string"==typeof t?t.split(","):[]},prepareFormValue:function(e,t){return t},canChangeCategory:function(){return e.includes(this.getValue("categoryFunctions"),t.data.prodFunction)}})}),define("app/wmes-fap-entries/dictionaries",["jquery","../broker","../pubsub","../user","../wmes-fap-categories/CategoryCollection","../wmes-fap-subCategories/SubCategoryCollection","./SettingCollection"],function(e,t,n,r,i,o,a){"use strict";var s={category:"categories",subCategory:"subCategories"},u=null,c=null,l=null,d={statuses:["pending","started","finished"],subdivisionTypes:["assembly","press","wh"],reqFields:["orderNo","lines","componentCode"],categories:new i,subCategories:new o,settings:new a,loaded:!1,load:function(){return null!==c&&(clearTimeout(c),c=null),d.loaded?null:null!==u?u:((u=e.ajax({url:"/fap/dictionaries"})).done(function(e){d.loaded=!0,p(e)}),u.fail(f),u.always(function(){u=null}),l=n.sandbox(),Object.keys(s).forEach(function(e){l.subscribe("fap."+s[e]+".**",h)}),d.settings.setUpPubsub(l),u)},unload:function(){null!==c&&clearTimeout(c),c=setTimeout(f,3e4)},getLabel:function(e,t){if("string"==typeof e&&(e=this.forProperty(e)||d[e]),!e||Array.isArray(e))return t;var n=e.get(t);return n?n.getLabel():t},forProperty:function(e){return this[s[e]]||null},bind:function(e){var t=this;return e.on("beforeLoad",function(e,n){n.push(t.load())}),e.on("afterRender",t.load.bind(t)),e.once("remove",t.unload.bind(t)),e}};function p(e){Object.keys(s).forEach(function(t){var n=s[t];d[n].reset(e?e[n]:[])}),d.settings.reset(e?e.settings:[])}function f(){c=null,null!==l&&(l.destroy(),l=null),d.loaded=!1,p()}function h(e,n){var r=n.split("."),i=d[r[1]];if(i){switch(r[2]){case"added":i.add(e.model);break;case"edited":var o=i.get(e.model._id);o&&o.set(e.model);break;case"deleted":i.remove(i.get(e.model._id))}t.publish(n,e)}}return d}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("autolinker",t):(e=e||self).Autolinker=t()}(this,function(){"use strict";function e(e,t){if(Array.prototype.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function t(e,t){for(var n=e.length-1;n>=0;n--)!0===t(e[n])&&e.splice(n,1)}var n=function(){function t(e){void 0===e&&(e={}),this.tagName="",this.attrs={},this.innerHTML="",this.whitespaceRegex=/\s+/,this.tagName=e.tagName||"",this.attrs=e.attrs||{},this.innerHTML=e.innerHtml||e.innerHTML||""}return t.prototype.setTagName=function(e){return this.tagName=e,this},t.prototype.getTagName=function(){return this.tagName||""},t.prototype.setAttr=function(e,t){return this.getAttrs()[e]=t,this},t.prototype.getAttr=function(e){return this.getAttrs()[e]},t.prototype.setAttrs=function(e){return Object.assign(this.getAttrs(),e),this},t.prototype.getAttrs=function(){return this.attrs||(this.attrs={})},t.prototype.setClass=function(e){return this.setAttr("class",e)},t.prototype.addClass=function(t){for(var n,r=this.getClass(),i=this.whitespaceRegex,o=r?r.split(i):[],a=t.split(i);n=a.shift();)-1===e(o,n)&&o.push(n);return this.getAttrs().class=o.join(" "),this},t.prototype.removeClass=function(t){for(var n,r=this.getClass(),i=this.whitespaceRegex,o=r?r.split(i):[],a=t.split(i);o.length&&(n=a.shift());){var s=e(o,n);-1!==s&&o.splice(s,1)}return this.getAttrs().class=o.join(" "),this},t.prototype.getClass=function(){return this.getAttrs().class||""},t.prototype.hasClass=function(e){return-1!==(" "+this.getClass()+" ").indexOf(" "+e+" ")},t.prototype.setInnerHTML=function(e){return this.innerHTML=e,this},t.prototype.setInnerHtml=function(e){return this.setInnerHTML(e)},t.prototype.getInnerHTML=function(){return this.innerHTML||""},t.prototype.getInnerHtml=function(){return this.getInnerHTML()},t.prototype.toAnchorString=function(){var e=this.getTagName(),t=this.buildAttrsStr();return["<",e,t=t?" "+t:"",">",this.getInnerHtml(),"</",e,">"].join("")},t.prototype.buildAttrsStr=function(){if(!this.attrs)return"";var e=this.getAttrs(),t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+'="'+e[n]+'"');return t.join(" ")},t}();var r,i,o,a,s,u,c=function(){function e(e){void 0===e&&(e={}),this.newWindow=!1,this.truncate={},this.className="",this.newWindow=e.newWindow||!1,this.truncate=e.truncate||{},this.className=e.className||""}return e.prototype.build=function(e){return new n({tagName:"a",attrs:this.createAttrs(e),innerHtml:this.processAnchorText(e.getAnchorText())})},e.prototype.createAttrs=function(e){var t={href:e.getAnchorHref()},n=this.createCssClass(e);return n&&(t.class=n),this.newWindow&&(t.target="_blank",t.rel="noopener noreferrer"),this.truncate&&this.truncate.length&&this.truncate.length<e.getAnchorText().length&&(t.title=e.getAnchorHref()),t},e.prototype.createCssClass=function(e){var t=this.className;if(t){for(var n=[t],r=e.getCssClassSuffixes(),i=0,o=r.length;i<o;i++)n.push(t+"-"+r[i]);return n.join(" ")}return""},e.prototype.processAnchorText=function(e){return e=this.doTruncate(e)},e.prototype.doTruncate=function(e){var t=this.truncate;if(!t||!t.length)return e;var n=t.length,r=t.location;return"smart"===r?function(e,t,n){var r,i;null==n?(n="&hellip;",i=3,r=8):(i=n.length,r=n.length);var o=function(e){var t="";return e.scheme&&e.host&&(t+=e.scheme+"://"),e.host&&(t+=e.host),e.path&&(t+="/"+e.path),e.query&&(t+="?"+e.query),e.fragment&&(t+="#"+e.fragment),t},a=function(e,t){var r=t/2,i=Math.ceil(r),o=-1*Math.floor(r),a="";return o<0&&(a=e.substr(o)),e.substr(0,i)+n+a};if(e.length<=t)return e;var s=t-i,u=function(e){var t={},n=e,r=n.match(/^([a-z]+):\/\//i);return r&&(t.scheme=r[1],n=n.substr(r[0].length)),(r=n.match(/^(.*?)(?=(\?|#|\/|$))/i))&&(t.host=r[1],n=n.substr(r[0].length)),(r=n.match(/^\/(.*?)(?=(\?|#|$))/i))&&(t.path=r[1],n=n.substr(r[0].length)),(r=n.match(/^\?(.*?)(?=(#|$))/i))&&(t.query=r[1],n=n.substr(r[0].length)),(r=n.match(/^#(.*?)$/i))&&(t.fragment=r[1]),t}(e);if(u.query){var c=u.query.match(/^(.*?)(?=(\?|\#))(.*?)$/i);c&&(u.query=u.query.substr(0,c[1].length),e=o(u))}if(e.length<=t)return e;if(u.host&&(u.host=u.host.replace(/^www\./,""),e=o(u)),e.length<=t)return e;var l="";if(u.host&&(l+=u.host),l.length>=s)return u.host.length==t?(u.host.substr(0,t-i)+n).substr(0,s+r):a(l,s).substr(0,s+r);var d="";if(u.path&&(d+="/"+u.path),u.query&&(d+="?"+u.query),d){if((l+d).length>=s)return(l+d).length==t?(l+d).substr(0,t):(l+a(d,s-l.length)).substr(0,s+r);l+=d}if(u.fragment){var p="#"+u.fragment;if((l+p).length>=s)return(l+p).length==t?(l+p).substr(0,t):(l+a(p,s-l.length)).substr(0,s+r);l+=p}if(u.scheme&&u.host){var f=u.scheme+"://";if((l+f).length<s)return(f+l).substr(0,t)}if(l.length<=t)return l;var h="";return s>0&&(h=l.substr(-1*Math.floor(s/2))),(l.substr(0,Math.ceil(s/2))+n+h).substr(0,s+r)}(e,n):"middle"===r?function(e,t,n){if(e.length<=t)return e;var r,i;null==n?(n="&hellip;",r=8,i=3):(r=n.length,i=n.length);var o=t-i,a="";return o>0&&(a=e.substr(-1*Math.floor(o/2))),(e.substr(0,Math.ceil(o/2))+n+a).substr(0,o+r)}(e,n):function(e,t,n){return function(e,t,n){var r;return e.length>t&&(null==n?(n="&hellip;",r=3):r=n.length,e=e.substring(0,t-r)+n),e}(e,t,n)}(e,n)},e}(),l=function(){function e(e){this.offset=0,this.text="",this.offset=e.offset,this.text=e.text}return e.prototype.getOffset=function(){return this.offset},e.prototype.getText=function(){return this.text},e}(),d=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p=function(e){function t(t){var n=e.call(this,t)||this;return n.comment="",n.comment=t.comment,n}return d(t,e),t.prototype.getType=function(){return"comment"},t.prototype.getComment=function(){return this.comment},t}(l),f=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=function(e){function t(t){var n=e.call(this,t)||this;return n.tagName="",n.closing=!1,n.tagName=t.tagName,n.closing=t.closing,n}return f(t,e),t.prototype.getType=function(){return"element"},t.prototype.getTagName=function(){return this.tagName},t.prototype.isClosing=function(){return this.closing},t}(l),m=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return m(t,e),t.prototype.getType=function(){return"entity"},t}(l),y=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y(t,e),t.prototype.getType=function(){return"text"},t}(l),v=(i=/[0-9a-zA-Z][0-9a-zA-Z:]*/,o=/[^\s"'>\/=\x00-\x1F\x7F]+/,s="(?:\\s*?=\\s*?"+(a=/(?:"[^"]*?"|'[^']*?'|[^'"=<>`\s]+)/).source+")?",u=function(e){return"(?=("+o.source+"))\\"+e+s},new RegExp(["(?:","<(!DOCTYPE)","(?:","\\s+","(?:",u(2),"|",a.source+")",")*",">",")","|","(?:","<(/)?","(?:",/!--([\s\S]+?)--/.source,"|","(?:","("+i.source+")","\\s*/?",")","|","(?:","("+i.source+")","\\s+","(?:","(?:\\s+|\\b)",u(7),")*","\\s*/?",")",")",">",")"].join(""),"gi")),w=/(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi,_=function(){function e(){}return e.prototype.parse=function(e){for(var t,n,r=0,i=[];null!==(t=v.exec(e));){var o=t[0],a=t[4],s=t[1]||t[5]||t[6],u=!!t[3],c=t.index,l=e.substring(r,c);l&&(n=this.parseTextAndEntityNodes(r,l),i.push.apply(i,n)),a?i.push(this.createCommentNode(c,o,a)):i.push(this.createElementNode(c,o,s,u)),r=c+o.length}if(r<e.length){var d=e.substring(r);d&&(n=this.parseTextAndEntityNodes(r,d)).forEach(function(e){return i.push(e)})}return i},e.prototype.parseTextAndEntityNodes=function(e,t){for(var n=[],r=function(e,t){if(!t.global)throw new Error("`splitRegex` must have the 'g' flag set");for(var n,r=[],i=0;n=t.exec(e);)r.push(e.substring(i,n.index)),r.push(n[0]),i=n.index+n[0].length;return r.push(e.substring(i)),r}(t,w),i=0,o=r.length;i<o;i+=2){var a=r[i],s=r[i+1];a&&(n.push(this.createTextNode(e,a)),e+=a.length),s&&(n.push(this.createEntityNode(e,s)),e+=s.length)}return n},e.prototype.createCommentNode=function(e,t,n){return new p({offset:e,text:t,comment:n.trim()})},e.prototype.createElementNode=function(e,t,n,r){return new h({offset:e,text:t,tagName:n.toLowerCase(),closing:r})},e.prototype.createEntityNode=function(e,t){return new g({offset:e,text:t})},e.prototype.createTextNode=function(e,t){return new b({offset:e,text:t})},e}(),A=function(){function e(e){this.__jsduckDummyDocProp=null,this.matchedText="",this.offset=0,this.tagBuilder=e.tagBuilder,this.matchedText=e.matchedText,this.offset=e.offset}return e.prototype.getMatchedText=function(){return this.matchedText},e.prototype.setOffset=function(e){this.offset=e},e.prototype.getOffset=function(){return this.offset},e.prototype.getCssClassSuffixes=function(){return[this.getType()]},e.prototype.buildTag=function(){return this.tagBuilder.build(this)},e}(),k=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),T=function(e){function t(t){var n=e.call(this,t)||this;return n.email="",n.email=t.email,n}return k(t,e),t.prototype.getType=function(){return"email"},t.prototype.getEmail=function(){return this.email},t.prototype.getAnchorHref=function(){return"mailto:"+this.email},t.prototype.getAnchorText=function(){return this.email},t}(A),E=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),C=function(e){function t(t){var n=e.call(this,t)||this;return n.serviceName="",n.hashtag="",n.serviceName=t.serviceName,n.hashtag=t.hashtag,n}return E(t,e),t.prototype.getType=function(){return"hashtag"},t.prototype.getServiceName=function(){return this.serviceName},t.prototype.getHashtag=function(){return this.hashtag},t.prototype.getAnchorHref=function(){var e=this.serviceName,t=this.hashtag;switch(e){case"twitter":return"https://twitter.com/hashtag/"+t;case"facebook":return"https://www.facebook.com/hashtag/"+t;case"instagram":return"https://instagram.com/explore/tags/"+t;default:throw new Error("Unknown service name to point hashtag to: "+e)}},t.prototype.getAnchorText=function(){return"#"+this.hashtag},t}(A),R=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),S=function(e){function t(t){var n=e.call(this,t)||this;return n.serviceName="twitter",n.mention="",n.mention=t.mention,n.serviceName=t.serviceName,n}return R(t,e),t.prototype.getType=function(){return"mention"},t.prototype.getMention=function(){return this.mention},t.prototype.getServiceName=function(){return this.serviceName},t.prototype.getAnchorHref=function(){switch(this.serviceName){case"twitter":return"https://twitter.com/"+this.mention;case"instagram":return"https://instagram.com/"+this.mention;case"soundcloud":return"https://soundcloud.com/"+this.mention;default:throw new Error("Unknown service name to point mention to: "+this.serviceName)}},t.prototype.getAnchorText=function(){return"@"+this.mention},t.prototype.getCssClassSuffixes=function(){var t=e.prototype.getCssClassSuffixes.call(this),n=this.getServiceName();return n&&t.push(n),t},t}(A),O=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),P=function(e){function t(t){var n=e.call(this,t)||this;return n.number="",n.plusSign=!1,n.number=t.number,n.plusSign=t.plusSign,n}return O(t,e),t.prototype.getType=function(){return"phone"},t.prototype.getPhoneNumber=function(){return this.number},t.prototype.getNumber=function(){return this.getPhoneNumber()},t.prototype.getAnchorHref=function(){return"tel:"+(this.plusSign?"+":"")+this.number},t.prototype.getAnchorText=function(){return this.matchedText},t}(A),N=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),D=function(e){function t(t){var n=e.call(this,t)||this;return n.url="",n.urlMatchType="scheme",n.protocolUrlMatch=!1,n.protocolRelativeMatch=!1,n.stripPrefix={scheme:!0,www:!0},n.stripTrailingSlash=!0,n.decodePercentEncoding=!0,n.schemePrefixRegex=/^(https?:\/\/)?/i,n.wwwPrefixRegex=/^(https?:\/\/)?(www\.)?/i,n.protocolRelativeRegex=/^\/\//,n.protocolPrepended=!1,n.urlMatchType=t.urlMatchType,n.url=t.url,n.protocolUrlMatch=t.protocolUrlMatch,n.protocolRelativeMatch=t.protocolRelativeMatch,n.stripPrefix=t.stripPrefix,n.stripTrailingSlash=t.stripTrailingSlash,n.decodePercentEncoding=t.decodePercentEncoding,n}return N(t,e),t.prototype.getType=function(){return"url"},t.prototype.getUrlMatchType=function(){return this.urlMatchType},t.prototype.getUrl=function(){var e=this.url;return this.protocolRelativeMatch||this.protocolUrlMatch||this.protocolPrepended||(e=this.url="http://"+e,this.protocolPrepended=!0),e},t.prototype.getAnchorHref=function(){return this.getUrl().replace(/&amp;/g,"&")},t.prototype.getAnchorText=function(){var e=this.getMatchedText();return this.protocolRelativeMatch&&(e=this.stripProtocolRelativePrefix(e)),this.stripPrefix.scheme&&(e=this.stripSchemePrefix(e)),this.stripPrefix.www&&(e=this.stripWwwPrefix(e)),this.stripTrailingSlash&&(e=this.removeTrailingSlash(e)),this.decodePercentEncoding&&(e=this.removePercentEncoding(e)),e},t.prototype.stripSchemePrefix=function(e){return e.replace(this.schemePrefixRegex,"")},t.prototype.stripWwwPrefix=function(e){return e.replace(this.wwwPrefixRegex,"$1")},t.prototype.stripProtocolRelativePrefix=function(e){return e.replace(this.protocolRelativeRegex,"")},t.prototype.removeTrailingSlash=function(e){return"/"===e.charAt(e.length-1)&&(e=e.slice(0,-1)),e},t.prototype.removePercentEncoding=function(e){var t=e.replace(/%22/gi,"&quot;").replace(/%26/gi,"&amp;").replace(/%27/gi,"&#39;").replace(/%3C/gi,"&lt;").replace(/%3E/gi,"&gt;");try{return decodeURIComponent(t)}catch(e){return t}},t}(A),z=function(){return function(e){this.__jsduckDummyDocProp=null,this.tagBuilder=e.tagBuilder}}(),x=/A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC/.source,M=x+/\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D4-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F/.source,L=/0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19/.source,I=M+L,F=M+L,B="(?:["+L+"]{1,3}\\.){3}["+L+"]{1,3}",j="["+F+"](?:["+F+"\\-]{0,61}["+F+"])?",q=function(e){return"(?=("+j+"))\\"+e},V=function(e){return"(?:"+q(e)+"(?:\\."+q(e+1)+"){0,126}|"+B+")"},U=/(?:xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--clchc0ea0b2g2a9gcd|xn--w4r85el8fhu5dnra|northwesternmutual|travelersinsurance|vermgensberatung|xn--3oq18vl8pn36a|xn--5su34j936bgsg|xn--bck1b9a5dre4c|xn--mgbai9azgqp6j|xn--mgberp4a5d4ar|xn--xkc2dl3a5ee0h|vermgensberater|xn--fzys8d69uvgm|xn--mgba7c0bbn0a|xn--xkc2al3hye2a|americanexpress|kerryproperties|sandvikcoromant|xn--i1b6b1a6a2e|xn--kcrx77d1x4a|xn--lgbbat1ad8j|xn--mgba3a4f16a|xn--mgbaakc7dvf|xn--mgbc0a9azcg|xn--nqv7fs00ema|afamilycompany|americanfamily|bananarepublic|cancerresearch|cookingchannel|kerrylogistics|weatherchannel|xn--54b7fta0cc|xn--6qq986b3xl|xn--80aqecdr1a|xn--b4w605ferd|xn--fiq228c5hs|xn--h2breg3eve|xn--jlq61u9w7b|xn--mgba3a3ejt|xn--mgbaam7a8h|xn--mgbayh7gpa|xn--mgbb9fbpob|xn--mgbbh1a71e|xn--mgbca7dzdo|xn--mgbi4ecexp|xn--mgbx4cd0ab|xn--rvc1e0am3e|international|lifeinsurance|spreadbetting|travelchannel|wolterskluwer|xn--eckvdtc9d|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--h2brj9c8c|xn--tiq49xqyj|xn--yfro4i67o|xn--ygbi2ammx|construction|lplfinancial|scholarships|versicherung|xn--3e0b707e|xn--45br5cyl|xn--80adxhks|xn--80asehdb|xn--8y0a063a|xn--gckr3f0f|xn--mgb9awbf|xn--mgbab2bd|xn--mgbgu82a|xn--mgbpl2fh|xn--mgbt3dhd|xn--mk1bu44c|xn--ngbc5azd|xn--ngbe9e0a|xn--ogbpf8fl|xn--qcka1pmc|accountants|barclaycard|blackfriday|blockbuster|bridgestone|calvinklein|contractors|creditunion|engineering|enterprises|foodnetwork|investments|kerryhotels|lamborghini|motorcycles|olayangroup|photography|playstation|productions|progressive|redumbrella|rightathome|williamhill|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--3bst00m|xn--3ds443g|xn--3hcrj9c|xn--42c2d9a|xn--45brj9c|xn--55qw42g|xn--6frz82g|xn--80ao21a|xn--9krt00a|xn--cck2b3b|xn--czr694b|xn--d1acj3b|xn--efvy88h|xn--estv75g|xn--fct429k|xn--fjq720a|xn--flw351e|xn--g2xx48c|xn--gecrj9c|xn--gk3at1e|xn--h2brj9c|xn--hxt814e|xn--imr513n|xn--j6w193g|xn--jvr189m|xn--kprw13d|xn--kpry57d|xn--kpu716f|xn--mgbbh1a|xn--mgbtx2b|xn--mix891f|xn--nyqy26a|xn--otu796d|xn--pbt977c|xn--pgbs0dh|xn--q9jyb4c|xn--rhqv96g|xn--rovu88b|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--vuq861b|xn--w4rs40l|xn--xhq521b|xn--zfr164b||accountant|apartments|associates|basketball|bnpparibas|boehringer|capitalone|consulting|creditcard|cuisinella|eurovision|extraspace|foundation|healthcare|immobilien|industries|management|mitsubishi|nationwide|newholland|nextdirect|onyourside|properties|protection|prudential|realestate|republican|restaurant|schaeffler|swiftcover|tatamotors|technology|telefonica|university|vistaprint|vlaanderen|volkswagen|xn--30rr7y|xn--3pxu8k|xn--45q11c|xn--4gbrim|xn--55qx5d|xn--5tzm5g|xn--80aswg|xn--90a3ac|xn--9dbq2a|xn--9et52u|xn--c2br7g|xn--cg4bki|xn--czrs0t|xn--czru2d|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--io0a7i|xn--kput3i|xn--mxtq1m|xn--o3cw4h|xn--pssy2u|xn--unup4y|xn--wgbh1c|xn--wgbl6a|xn--y9a3aq|accenture|alfaromeo|allfinanz|amsterdam|analytics|aquarelle|barcelona|bloomberg|christmas|community|directory|education|equipment|fairwinds|financial|firestone|fresenius|frontdoor|fujixerox|furniture|goldpoint|hisamitsu|homedepot|homegoods|homesense|honeywell|institute|insurance|kuokgroup|ladbrokes|lancaster|landrover|lifestyle|marketing|marshalls|melbourne|microsoft|panasonic|passagens|pramerica|richardli|scjohnson|shangrila|solutions|statebank|statefarm|stockholm|travelers|vacations|xn--90ais|xn--c1avg|xn--d1alf|xn--e1a4c|xn--fhbei|xn--j1aef|xn--j1amh|xn--l1acc|xn--ngbrx|xn--nqv7f|xn--p1acf|xn--tckwe|xn--vhquv|yodobashi|abudhabi|airforce|allstate|attorney|barclays|barefoot|bargains|baseball|boutique|bradesco|broadway|brussels|budapest|builders|business|capetown|catering|catholic|chrysler|cipriani|cityeats|cleaning|clinique|clothing|commbank|computer|delivery|deloitte|democrat|diamonds|discount|discover|download|engineer|ericsson|esurance|etisalat|everbank|exchange|feedback|fidelity|firmdale|football|frontier|goodyear|grainger|graphics|guardian|hdfcbank|helsinki|holdings|hospital|infiniti|ipiranga|istanbul|jpmorgan|lighting|lundbeck|marriott|maserati|mckinsey|memorial|merckmsd|mortgage|movistar|observer|partners|pharmacy|pictures|plumbing|property|redstone|reliance|saarland|samsclub|security|services|shopping|showtime|softbank|software|stcgroup|supplies|symantec|training|uconnect|vanguard|ventures|verisign|woodside|xn--90ae|xn--node|xn--p1ai|xn--qxam|yokohama||abogado|academy|agakhan|alibaba|android|athleta|auction|audible|auspost|avianca|banamex|bauhaus|bentley|bestbuy|booking|brother|bugatti|capital|caravan|careers|cartier|channel|charity|chintai|citadel|clubmed|college|cologne|comcast|company|compare|contact|cooking|corsica|country|coupons|courses|cricket|cruises|dentist|digital|domains|exposed|express|farmers|fashion|ferrari|ferrero|finance|fishing|fitness|flights|florist|flowers|forsale|frogans|fujitsu|gallery|genting|godaddy|grocery|guitars|hamburg|hangout|hitachi|holiday|hosting|hoteles|hotmail|hyundai|iselect|ismaili|jewelry|juniper|kitchen|komatsu|lacaixa|lancome|lanxess|lasalle|latrobe|leclerc|liaison|limited|lincoln|markets|metlife|monster|netbank|netflix|network|neustar|okinawa|oldnavy|organic|origins|philips|pioneer|politie|realtor|recipes|rentals|reviews|rexroth|samsung|sandvik|schmidt|schwarz|science|shiksha|shriram|singles|staples|starhub|storage|support|surgery|systems|temasek|theater|theatre|tickets|tiffany|toshiba|trading|walmart|wanggou|watches|weather|website|wedding|whoswho|windows|winners|xfinity|yamaxun|youtube|zuerich|||||||||abarth|abbott|abbvie|active|africa|agency|airbus|airtel|alipay|alsace|alstom|anquan|aramco|author|bayern|beauty|berlin|bharti|blanco|bostik|boston|broker|camera|career|caseih|casino|center|chanel|chrome|church|circle|claims|clinic|coffee|comsec|condos|coupon|credit|cruise|dating|datsun|dealer|degree|dental|design|direct|doctor|dunlop|dupont|durban|emerck|energy|estate|events|expert|family|flickr|futbol|gallup|garden|george|giving|global|google|gratis|health|hermes|hiphop|hockey|hotels|hughes|imamat|insure|intuit|jaguar|joburg|juegos|kaufen|kinder|kindle|kosher|lancia|latino|lawyer|lefrak|living|locker|london|luxury|madrid|maison|makeup|market|mattel|mobile|mobily|monash|mormon|moscow|museum|mutual|nagoya|natura|nissan|nissay|norton|nowruz|office|olayan|online|oracle|orange|otsuka|pfizer|photos|physio|piaget|pictet|quebec|racing|realty|reisen|repair|report|review|rocher|rogers|ryukyu|safety|sakura|sanofi|school|schule|search|secure|select|shouji|soccer|social|stream|studio|supply|suzuki|swatch|sydney|taipei|taobao|target|tattoo|tennis|tienda|tjmaxx|tkmaxx|toyota|travel|unicom|viajes|viking|villas|virgin|vision|voting|voyage|vuelos|walter|warman|webcam|xihuan|yachts|yandex|zappos|||||||||||||actor|adult|aetna|amfam|amica|apple|archi|audio|autos|azure|baidu|beats|bible|bingo|black|boats|bosch|build|canon|cards|chase|cheap|cisco|citic|click|cloud|coach|codes|crown|cymru|dabur|dance|deals|delta|dodge|drive|dubai|earth|edeka|email|epost|epson|faith|fedex|final|forex|forum|gallo|games|gifts|gives|glade|glass|globo|gmail|green|gripe|group|gucci|guide|homes|honda|horse|house|hyatt|ikano|intel|irish|iveco|jetzt|koeln|kyoto|lamer|lease|legal|lexus|lilly|linde|lipsy|lixil|loans|locus|lotte|lotto|lupin|macys|mango|media|miami|money|mopar|movie|nadex|nexus|nikon|ninja|nokia|nowtv|omega|osaka|paris|parts|party|phone|photo|pizza|place|poker|praxi|press|prime|promo|quest|radio|rehab|reise|ricoh|rocks|rodeo|rugby|salon|sener|seven|sharp|shell|shoes|skype|sling|smart|smile|solar|space|sport|stada|store|study|style|sucks|swiss|tatar|tires|tirol|tmall|today|tokyo|tools|toray|total|tours|trade|trust|tunes|tushu|ubank|vegas|video|vodka|volvo|wales|watch|weber|weibo|works|world|xerox|yahoo|zippo|||||||||||||aarp|able|adac|aero|aigo|akdn|ally|amex|arab|army|arpa|arte|asda|asia|audi|auto|baby|band|bank|bbva|beer|best|bike|bing|blog|blue|bofa|bond|book|buzz|cafe|call|camp|care|cars|casa|case|cash|cbre|cern|chat|citi|city|club|cool|coop|cyou|data|date|dclk|deal|dell|desi|diet|dish|docs|doha|duck|duns|dvag|erni|fage|fail|fans|farm|fast|fiat|fido|film|fire|fish|flir|food|ford|free|fund|game|gbiz|gent|ggee|gift|gmbh|gold|golf|goog|guge|guru|hair|haus|hdfc|help|here|hgtv|host|hsbc|icbc|ieee|imdb|immo|info|itau|java|jeep|jobs|jprs|kddi|kiwi|kpmg|kred|land|lego|lgbt|lidl|life|like|limo|link|live|loan|loft|love|ltda|luxe|maif|meet|meme|menu|mini|mint|mobi|moda|moto|name|navy|news|next|nico|nike|ollo|open|page|pars|pccw|pics|ping|pink|play|plus|pohl|porn|post|prod|prof|qpon|raid|read|reit|rent|rest|rich|rmit|room|rsvp|ruhr|safe|sale|sarl|save|saxo|scor|scot|seat|seek|sexy|shaw|shia|shop|show|silk|sina|site|skin|sncf|sohu|song|sony|spot|star|surf|talk|taxi|team|tech|teva|tiaa|tips|town|toys|tube|vana|visa|viva|vivo|vote|voto|wang|weir|wien|wiki|wine|work|xbox|yoga|zara|zero|zone||||||||||||||||||||||||||aaa|abb|abc|aco|ads|aeg|afl|aig|anz|aol|app|art|aws|axa|bar|bbc|bbt|bcg|bcn|bet|bid|bio|biz|bms|bmw|bnl|bom|boo|bot|box|buy|bzh|cab|cal|cam|car|cat|cba|cbn|cbs|ceb|ceo|cfa|cfd|com|crs|csc|dad|day|dds|dev|dhl|diy|dnp|dog|dot|dtv|dvr|eat|eco|edu|esq|eus|fan|fit|fly|foo|fox|frl|ftr|fun|fyi|gal|gap|gdn|gea|gle|gmo|gmx|goo|gop|got|gov|hbo|hiv|hkt|hot|how|ibm|ice|icu|ifm|inc|ing|ink|int|ist|itv|jcb|jcp|jio|jll|jmp|jnj|jot|joy|kfh|kia|kim|kpn|krd|lat|law|lds|llc|lol|lpl|ltd|man|map|mba|med|men|mil|mit|mlb|mls|mma|moe|moi|mom|mov|msd|mtn|mtr|nab|nba|nec|net|new|nfl|ngo|nhk|now|nra|nrw|ntt|nyc|obi|off|one|ong|onl|ooo|org|ott|ovh|pay|pet|phd|pid|pin|pnc|pro|pru|pub|pwc|qvc|red|ren|ril|rio|rip|run|rwe|sap|sas|sbi|sbs|sca|scb|ses|sew|sex|sfr|ski|sky|soy|srl|srt|stc|tab|tax|tci|tdk|tel|thd|tjx|top|trv|tui|tvs|ubs|uno|uol|ups|vet|vig|vin|vip|wed|win|wme|wow|wtc|wtf|xin|xxx|xyz|you|yun|zip||||||||||||||||||||||||||||||ac|ad|ae|af|ag|ai|al|am|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||)/,H=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),W=function(e){function t(){var t,n,r=null!==e&&e.apply(this,arguments)||this;return r.matcherRegex=(t=F+"!#$%&'*+\\-\\/=?^_`{|}~",n=new RegExp("(?:["+t+"](?:["+t+']|\\.(?!\\.|@))*|\\"['+(t+'\\s"(),:;<>@\\[\\]')+'.]+\\")@'),new RegExp([n.source,V(1),"\\.",U.source].join(""),"gi")),r}return H(t,e),t.prototype.parseMatches=function(e){for(var t,n=this.matcherRegex,r=this.tagBuilder,i=[];null!==(t=n.exec(e));){var o=t[0];i.push(new T({tagBuilder:r,matchedText:o,offset:t.index,email:o}))}return i},t}(z),$=function(){function e(){}return e.isValid=function(e,t){return!(t&&!this.isValidUriScheme(t)||this.urlMatchDoesNotHaveProtocolOrDot(e,t)||this.urlMatchDoesNotHaveAtLeastOneWordChar(e,t)&&!this.isValidIpAddress(e)||this.containsMultipleDots(e))},e.isValidIpAddress=function(e){var t=new RegExp(this.hasFullProtocolRegex.source+this.ipRegex.source);return null!==e.match(t)},e.containsMultipleDots=function(e){var t=e;return this.hasFullProtocolRegex.test(e)&&(t=e.split("://")[1]),t.split("/")[0].indexOf("..")>-1},e.isValidUriScheme=function(e){var t=e.match(this.uriSchemeRegex),n=t&&t[0].toLowerCase();return"javascript:"!==n&&"vbscript:"!==n},e.urlMatchDoesNotHaveProtocolOrDot=function(e,t){return!(!e||t&&this.hasFullProtocolRegex.test(t)||-1!==e.indexOf("."))},e.urlMatchDoesNotHaveAtLeastOneWordChar=function(e,t){return!(!e||!t)&&!this.hasWordCharAfterProtocolRegex.test(e)},e.hasFullProtocolRegex=/^[A-Za-z][-.+A-Za-z0-9]*:\/\//,e.uriSchemeRegex=/^[A-Za-z][-.+A-Za-z0-9]*:/,e.hasWordCharAfterProtocolRegex=new RegExp(":[^\\s]*?["+x+"]"),e.ipRegex=/[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?(:[0-9]*)?\/?$/,e}(),G=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Y=function(e){function t(t){var n,r=e.call(this,t)||this;return r.stripPrefix={scheme:!0,www:!0},r.stripTrailingSlash=!0,r.decodePercentEncoding=!0,r.matcherRegex=(n=new RegExp("[/?#](?:["+F+"\\-+&@#/%=~_()|'$*\\[\\]?!:,.;]*["+F+"\\-+&@#/%=~_()|'$*\\[\\]])?"),new RegExp(["(?:","(",/(?:[A-Za-z][-.+A-Za-z0-9]{0,63}:(?![A-Za-z][-.+A-Za-z0-9]{0,63}:\/\/)(?!\d+\/?)(?:\/\/)?)/.source,V(2),")","|","(","(//)?",/(?:www\.)/.source,V(6),")","|","(","(//)?",V(10)+"\\.",U.source,"(?![-"+I+"])",")",")","(?::[0-9]+)?","(?:"+n.source+")?"].join(""),"gi")),r.wordCharRegExp=new RegExp("["+F+"]"),r.openParensRe=/\(/g,r.closeParensRe=/\)/g,r.stripPrefix=t.stripPrefix,r.stripTrailingSlash=t.stripTrailingSlash,r.decodePercentEncoding=t.decodePercentEncoding,r}return G(t,e),t.prototype.parseMatches=function(e){for(var t,n=this.matcherRegex,r=this.stripPrefix,i=this.stripTrailingSlash,o=this.decodePercentEncoding,a=this.tagBuilder,s=[];null!==(t=n.exec(e));){var u=t[0],c=t[1],l=t[4],d=t[5],p=t[9],f=t.index,h=d||p,m=e.charAt(f-1);if($.isValid(u,c)&&!(f>0&&"@"===m||f>0&&h&&this.wordCharRegExp.test(m))){if(/\?$/.test(u)&&(u=u.substr(0,u.length-1)),this.matchHasUnbalancedClosingParen(u))u=u.substr(0,u.length-1);else{var g=this.matchHasInvalidCharAfterTld(u,c);g>-1&&(u=u.substr(0,g))}var y=c?"scheme":l?"www":"tld",b=!!c;s.push(new D({tagBuilder:a,matchedText:u,offset:f,urlMatchType:y,url:u,protocolUrlMatch:b,protocolRelativeMatch:!!h,stripPrefix:r,stripTrailingSlash:i,decodePercentEncoding:o}))}}return s},t.prototype.matchHasUnbalancedClosingParen=function(e){if(")"===e.charAt(e.length-1)){var t=e.match(this.openParensRe),n=e.match(this.closeParensRe);if((t&&t.length||0)<(n&&n.length||0))return!0}return!1},t.prototype.matchHasInvalidCharAfterTld=function(e,t){if(!e)return-1;var n=0;t&&(n=e.indexOf(":"),e=e.slice(n));var r=new RegExp("^((.?//)?[-."+F+"]*[-"+F+"]\\.[-"+F+"]+)").exec(e);return null===r?-1:(n+=r[1].length,e=e.slice(r[1].length),/^[^-.A-Za-z0-9:\/?#]/.test(e)?n:-1)},t}(z),K=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Z=function(e){function t(t){var n=e.call(this,t)||this;return n.serviceName="twitter",n.matcherRegex=new RegExp("#[_"+F+"]{1,139}(?![_"+F+"])","g"),n.nonWordCharRegex=new RegExp("[^"+F+"]"),n.serviceName=t.serviceName,n}return K(t,e),t.prototype.parseMatches=function(e){for(var t,n=this.matcherRegex,r=this.nonWordCharRegex,i=this.serviceName,o=this.tagBuilder,a=[];null!==(t=n.exec(e));){var s=t.index,u=e.charAt(s-1);if(0===s||r.test(u)){var c=t[0],l=t[0].slice(1);a.push(new C({tagBuilder:o,matchedText:c,offset:s,serviceName:i,hashtag:l}))}}return a},t}(z),Q=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),J=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.matcherRegex=/(?:(?:(?:(\+)?\d{1,3}[-\040.]?)?\(?\d{3}\)?[-\040.]?\d{3}[-\040.]?\d{4})|(?:(\+)(?:9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)[-\040.]?(?:\d[-\040.]?){6,12}\d+))([,;]+[0-9]+#?)*/g,t}return Q(t,e),t.prototype.parseMatches=function(e){for(var t,n=this.matcherRegex,r=this.tagBuilder,i=[];null!==(t=n.exec(e));){var o=t[0],a=o.replace(/[^0-9,;#]/g,""),s=!(!t[1]&&!t[2]),u=0==t.index?"":e.substr(t.index-1,1),c=e.substr(t.index+o.length,1),l=!u.match(/\d/)&&!c.match(/\d/);this.testMatch(t[3])&&this.testMatch(o)&&l&&i.push(new P({tagBuilder:r,matchedText:o,offset:t.index,number:a,plusSign:s}))}return i},t.prototype.testMatch=function(e){return/\D/.test(e)},t}(z),X=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ee=function(e){function t(t){var n=e.call(this,t)||this;return n.serviceName="twitter",n.matcherRegexes={twitter:new RegExp("@[_"+F+"]{1,50}(?![_"+F+"])","g"),instagram:new RegExp("@[_."+F+"]{1,30}(?![_"+F+"])","g"),soundcloud:new RegExp("@[-_."+F+"]{1,50}(?![-_"+F+"])","g")},n.nonWordCharRegex=new RegExp("[^"+F+"]"),n.serviceName=t.serviceName,n}return X(t,e),t.prototype.parseMatches=function(e){var t,n=this.serviceName,r=this.matcherRegexes[this.serviceName],i=this.nonWordCharRegex,o=this.tagBuilder,a=[];if(!r)return a;for(;null!==(t=r.exec(e));){var s=t.index,u=e.charAt(s-1);if(0===s||i.test(u)){var c=t[0].replace(/\.+$/g,""),l=c.slice(1);a.push(new S({tagBuilder:o,matchedText:c,offset:s,serviceName:n,mention:l}))}}return a},t}(z);return function(){function e(t){void 0===t&&(t={}),this.version=e.version,this.urls={},this.email=!0,this.phone=!0,this.hashtag=!1,this.mention=!1,this.newWindow=!0,this.stripPrefix={scheme:!0,www:!0},this.stripTrailingSlash=!0,this.decodePercentEncoding=!0,this.truncate={length:0,location:"end"},this.className="",this.replaceFn=null,this.context=void 0,this.htmlParser=new _,this.matchers=null,this.tagBuilder=null,this.urls=this.normalizeUrlsCfg(t.urls),this.email="boolean"==typeof t.email?t.email:this.email,this.phone="boolean"==typeof t.phone?t.phone:this.phone,this.hashtag=t.hashtag||this.hashtag,this.mention=t.mention||this.mention,this.newWindow="boolean"==typeof t.newWindow?t.newWindow:this.newWindow,this.stripPrefix=this.normalizeStripPrefixCfg(t.stripPrefix),this.stripTrailingSlash="boolean"==typeof t.stripTrailingSlash?t.stripTrailingSlash:this.stripTrailingSlash,this.decodePercentEncoding="boolean"==typeof t.decodePercentEncoding?t.decodePercentEncoding:this.decodePercentEncoding;var n=this.mention;if(!1!==n&&"twitter"!==n&&"instagram"!==n&&"soundcloud"!==n)throw new Error("invalid `mention` cfg - see docs");var r=this.hashtag;if(!1!==r&&"twitter"!==r&&"facebook"!==r&&"instagram"!==r)throw new Error("invalid `hashtag` cfg - see docs");this.truncate=this.normalizeTruncateCfg(t.truncate),this.className=t.className||this.className,this.replaceFn=t.replaceFn||this.replaceFn,this.context=t.context||this}return e.link=function(t,n){return new e(n).link(t)},e.parse=function(t,n){return new e(n).parse(t)},e.prototype.normalizeUrlsCfg=function(e){return null==e&&(e=!0),"boolean"==typeof e?{schemeMatches:e,wwwMatches:e,tldMatches:e}:{schemeMatches:"boolean"!=typeof e.schemeMatches||e.schemeMatches,wwwMatches:"boolean"!=typeof e.wwwMatches||e.wwwMatches,tldMatches:"boolean"!=typeof e.tldMatches||e.tldMatches}},e.prototype.normalizeStripPrefixCfg=function(e){return null==e&&(e=!0),"boolean"==typeof e?{scheme:e,www:e}:{scheme:"boolean"!=typeof e.scheme||e.scheme,www:"boolean"!=typeof e.www||e.www}},e.prototype.normalizeTruncateCfg=function(e){return"number"==typeof e?{length:e,location:"end"}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&void 0===e[n]&&(e[n]=t[n]);return e}(e||{},{length:Number.POSITIVE_INFINITY,location:"end"})},e.prototype.parse=function(e){for(var t=this.htmlParser.parse(e),n=["a","style","script"],r=0,i=[],o=0,a=t.length;o<a;o++){var s=t[o],u=s.getType();if("element"===u&&-1!==n.indexOf(s.getTagName()))s.isClosing()?r=Math.max(r-1,0):r++;else if("text"===u&&0===r){var c=this.parseText(s.getText(),s.getOffset());i.push.apply(i,c)}}return i=this.compactMatches(i),i=this.removeUnwantedMatches(i)},e.prototype.compactMatches=function(e){e.sort(function(e,t){return e.getOffset()-t.getOffset()});for(var t=0;t<e.length-1;t++){var n=e[t],r=n.getOffset(),i=n.getMatchedText().length,o=r+i;if(t+1<e.length){if(e[t+1].getOffset()===r){var a=e[t+1].getMatchedText().length>i?t:t+1;e.splice(a,1);continue}e[t+1].getOffset()<o&&e.splice(t+1,1)}}return e},e.prototype.removeUnwantedMatches=function(e){return this.hashtag||t(e,function(e){return"hashtag"===e.getType()}),this.email||t(e,function(e){return"email"===e.getType()}),this.phone||t(e,function(e){return"phone"===e.getType()}),this.mention||t(e,function(e){return"mention"===e.getType()}),this.urls.schemeMatches||t(e,function(e){return"url"===e.getType()&&"scheme"===e.getUrlMatchType()}),this.urls.wwwMatches||t(e,function(e){return"url"===e.getType()&&"www"===e.getUrlMatchType()}),this.urls.tldMatches||t(e,function(e){return"url"===e.getType()&&"tld"===e.getUrlMatchType()}),e},e.prototype.parseText=function(e,t){void 0===t&&(t=0),t=t||0;for(var n=this.getMatchers(),r=[],i=0,o=n.length;i<o;i++){for(var a=n[i].parseMatches(e),s=0,u=a.length;s<u;s++)a[s].setOffset(t+a[s].getOffset());r.push.apply(r,a)}return r},e.prototype.link=function(e){if(!e)return"";for(var t=this.parse(e),n=[],r=0,i=0,o=t.length;i<o;i++){var a=t[i];n.push(e.substring(r,a.getOffset())),n.push(this.createMatchReturnVal(a)),r=a.getOffset()+a.getMatchedText().length}return n.push(e.substring(r)),n.join("")},e.prototype.createMatchReturnVal=function(e){var t;return this.replaceFn&&(t=this.replaceFn.call(this.context,e)),"string"==typeof t?t:!1===t?e.getMatchedText():t instanceof n?t.toAnchorString():e.buildTag().toAnchorString()},e.prototype.getMatchers=function(){if(this.matchers)return this.matchers;var e=this.getTagBuilder(),t=[new Z({tagBuilder:e,serviceName:this.hashtag}),new W({tagBuilder:e}),new J({tagBuilder:e}),new ee({tagBuilder:e,serviceName:this.mention}),new Y({tagBuilder:e,stripPrefix:this.stripPrefix,stripTrailingSlash:this.stripTrailingSlash,decodePercentEncoding:this.decodePercentEncoding})];return this.matchers=t},e.prototype.getTagBuilder=function(){var e=this.tagBuilder;return e||(e=this.tagBuilder=new c({newWindow:this.newWindow,truncate:this.truncate,className:this.className})),e},e.version="2.2.1",e.AnchorTagBuilder=c,e.HtmlTag=n,e.matcher={Email:W,Hashtag:Z,Matcher:z,Mention:ee,Phone:J,Url:Y},e.match={Email:T,Hashtag:C,Match:A,Mention:S,Phone:P,Url:D},e}()}),define("app/core/util/autolinker",["underscore","autolinker","app/i18n"],function(e,t,n){"use strict";var r=/(.)??(#[0-9]+|[0-9]{15}|0*[0-9]{12}|[0-9]{9}|[A-Z]{3}[0-9]{3}[A-Z]{1})(.)??/g,i=null;function o(e){return i||(i=new t({urls:{schemeMatches:!0,wwwMatches:!0,tldMatches:!0},email:!0,phone:!1,mention:!1,hashtag:!1,stripPrefix:!0,stripTrailingSlash:!0,newWindow:!0,truncate:{length:0,location:"end"},className:"",replaceFn:function(e){var t=e.buildTag();if("url"===e.getType()&&-1!==e.getUrl().indexOf(window.location.host)){var n=t.innerHTML.split("?");n.length>1&&n[1].length&&(t.innerHTML=n[0]+"?&hellip;"),delete t.attrs.rel}else t.innerHTML.length>=60&&(t.innerHTML=t.innerHTML.substring(0,50)+"&hellip;");return t}})),i.link(e)}return{autolinkText:o,autolinkMessage:function(t,i){return t=(t||"").trim().replace(/\n{3,}/,"\n\n"),t=(t=o(e.escape(t)).replace(//g,'<i class="fa fa-user"></i>')).replace(r,function(e,t,r,o){var a;if("/"===t)return e;if(void 0===t&&(t=""),void 0===o&&(o=""),r=r.replace(/^0+/,""),/^#[0-9]+$/.test(r)&&r.length<9?(a="entry",r=r.substring(1),t+="#"):a=15===r.length?"document":9===r.length?"order":"product",!a)return e;var s=i&&i.nlsDomain,u="autolink:"+a;return t+'<a class="autolink" title="'+(s&&n.has(s,u)?n(s,u):n("core",u))+'" data-type="'+a+'" data-id="'+r.toUpperCase()+'">'+r+"</a>"+o})}}}),define("app/data/colorFactory",[],function(){"use strict";var e=["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a","#aaff00","#00aaff","#ffaa00","#00ffaa","#aa00ff","#ff00aa","#4572A7","#AA4643","#89A54E","#80699B","#3D96AE","#DB843D","#92A8CD","#A47D7C","#B5CA92","#666666","#809FFF","#9F80FF","#DF80FF","#FF80DF","#FF809F","#FF9F80","#FFDF80","#DFFF80","#9FFF80","#80FF9F","#80FFDF","#80DFFF","#4271FF","#0544FF","#FFD042","#FFC105","#3366FF","#6633FF","#CC33FF","#FF33CC","#FF3366","#FF6633","#FFCC33","#CCFF33","#66FF33","#33FF66","#33FFCC","#33CCFF","#003DF5","#002EB8","#F5B800","#B88A00","#0039E6","#3900E6","#AC00E6","#E600AC","#E60039","#E63900","#E6AC00","#ACE600","#39E600","#00E639","#00E6AC","#00ACE6","#245BFF","#6188FF","#FFC824","#FFD761"],t={};return{setColors:function(n,r){void 0===t[n]&&(t[n]={free:r.concat(e),assigned:{}})},getColor:function(n,r){return void 0===t[n]&&(t[n]={free:[].concat(e),assigned:{}}),"string"==typeof(n=t[n]).assigned[r]?n.assigned[r]:(n.assigned[r]=n.free.length?n.free.shift():"#"+(16777216+16777215*Math.random()).toString(16).substr(1,6),n.assigned[r])}}}),define("app/wmes-fap-entries/templates/levelIndicator",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{}){__append('<div class="fap-levelIndicator-outer '),__append(canIncrease?"fap-levelIndicator-can-increase":""),__append(" "),__append(canManage?"fap-levelIndicator-can-manage":""),__append('">\n  ');for(var i=1;i<=4;++i){__append("\n  ");var title="";(canManage||canIncrease&&i===level+1)&&(title=t("wmes-fap-entries","levelIndicator:title",{level:i})),__append('\n  <div class="fap-levelIndicator-inner '),__append(i<=level?"is-selected":"is-unselected"),__append('" title="'),__append(title),__append('" data-level="'),__append(i),__append('">'),__append(i),__append("</div>\n  ")}__append('\n  <div class="fap-levelIndicator-label">'),__append(t("wmes-fap-entries","levelIndicator:label")),__append("</div>\n</div>\n")}return __output}}),define("app/wmes-fap-entries/Entry",["underscore","jquery","../i18n","../time","../user","../socket","../core/Model","../core/util/autolinker","../data/colorFactory","./dictionaries","app/core/templates/userInfo","app/wmes-fap-entries/templates/levelIndicator"],function(e,t,n,r,i,o,a,s,u,c,l,d){"use strict";var p={pending:"danger",started:"info",analyzing:"warning",finished:"success"},f={image:"fa-file-image-o",text:"fa-file-text-o",audio:"fa-audio-o",video:"fa-video-o","application/octet-stream":"fa-file-archive-o","application/x-zip-compressed":"fa-file-archive-o","application/x-7z-compressed":"fa-file-archive-o","application/x-rar-compressed":"fa-file-archive-o","application/pdf":"fa-file-pdf-o","application/json":"fa-file-code-o","application/msword":"fa-file-word-o","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"fa-file-word-o","application/vnd.ms-excel":"fa-file-excel-o","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"fa-file-excel-o","application/vnd.ms-powerpoint":"fa-file-powerpoint-o","application/vnd.openxmlformats-officedocument.presentationml.presentation":"fa-file-powerpoint-o"};return u.setColors("fap/users",["#0af","#5cb85c","#fa0","#a0f","#f0a","#f00","#ff0","#9ff"]),a.extend({urlRoot:"/fap/entries",clientUrlRoot:"#fap/entries",topicPrefix:"fap.entries",privilegePrefix:"FAP",nlsDomain:"wmes-fap-entries",labelAttribute:"rid",defaults:function(){return{subdivisionType:"assembly"}},initialize:function(){this.serialized=null,this.on("change",function(){this.serialized=null})},isObserver:function(){return e.some(this.get("observers"),function(e){return e.user.id===i.data._id})},serialize:function(){if(this.serialized)return this.serialized;var e=this.toJSON();e.createdAt=r.format(e.createdAt,"L HH:mm");var t=c.categories.get(e.category);t&&(e.category=t.getLabel());var i=c.subCategories.get(e.subCategory);return i&&(e.subCategory=i.getLabel()),e.subCategory||(e.subCategory="-"),e.divisions=e.divisions?e.divisions.join("; "):"",e.lines=e.lines?e.lines.join("; "):"",e.assessment=n(this.nlsDomain,"assessment:"+e.assessment),e.analyzing="pending"!==e.status&&e.analysisNeed&&!e.analysisDone,e.analysisDone=e.analysisNeed?n("core","BOOL:"+e.analysisDone):"-",e.analysisNeed=n("core","BOOL:"+e.analysisNeed),e.orderNo||(e.orderNo="-",e.nc12="-",e.productName="-",e.mrp="-",e.qtyTodo="-",e.qtyDone="-"),e.lines||(e.lines="-",e.divisions="-"),e.subdivisionType=n(this.nlsDomain,"subdivisionType:"+e.subdivisionType),e.componentCode||(e.componentCode="-"),e.componentName||(e.componentName="-"),e.observer=this.serializeObserver(),this.serialized=e},serializeRow:function(){if(this.serialized)return this.serialized;var t=this.serialize();t.className=p[t.analyzing?"analyzing":t.status],t.observer.changes.any&&(t.className+=" fap-is-unseen");var n=t.category;return"-"!==t.subCategory&&(n=t.subCategory),t.category='<span class="fap-list-category">'+e.escape(n)+"</span>",t.problem='<span class="fap-list-problem">'+e.escape(t.problem)+"</span>",t.lines='<span class="fap-list-lines">'+e.escape(t.lines)+"</span>","-"!==t.componentCode&&(t.nc12=t.componentCode,t.productName=t.componentName),t.levelIndicator=d({level:t.level,canIncrease:!1,canManage:!1}),this.serialized=t},serializeDetails:function(){if(this.serialized)return this.serialized;var e=this.serialize();switch(e.auth=this.serializeAuth(),e.problem=this.serializeText(e.problem),e.solution=this.serializeText(e.solution||"-"),e.solver=e.solver?e.solver.label:"",e.solutionSteps=this.serializeText(e.solutionSteps||"-"),e.empty={solution:"-"===e.solution},e.multiline={problem:-1!==e.problem.indexOf("\n"),solution:-1!==e.solution.indexOf("\n"),solutionSteps:-1!==e.solutionSteps.indexOf("\n")},e.mainAnalyzer=e.analyzers&&e.analyzers.length?e.analyzers[0].label:"-",e.analyzers=e.analyzers&&e.analyzers.length>1?e.analyzers.slice(1).map(function(e){return e.label}).join("; "):"-",e.chat=this.serializeChat(),e.attachments=(e.attachments||[]).map(this.serializeAttachment,this),e.observers=this.serializeObservers(),e.message={type:"",text:""},e.status){case"pending":e.message.type="error",e.message.text=n(this.nlsDomain,"message:pending");break;case"started":e.message.type=e.analyzing?"warning":"info",e.message.text=n(this.nlsDomain,"message:started:"+e.analyzing);break;case"finished":e.message.type=e.analyzing?"warning":"success",e.message.text=n(this.nlsDomain,"message:finished:"+e.analyzing)}return e.levelIndicator=d({level:e.level,canIncrease:e.auth.level,canManage:e.auth.manage}),this.serialized=e},updateAuth:function(){this.serialized&&(this.serialized.auth=this.serializeAuth())},serializeAuth:function(){var t=i.isLoggedIn(),n=i.isAllowedTo("FAP:MANAGE"),r=i.isAllowedTo("FN:manager"),o=i.isAllowedTo("FN:process-engineer","FN:process-engineer-NPI"),a=i.isAllowedTo("FN:warehouse-process-engineer"),s=i.isAllowedTo("FN:designer","FN:designer_eto"),u=i.isAllowedTo("FN:master"),l=i.isAllowedTo("FN:leader"),d=i.isAllowedTo("FN:whman","FN:prod_whman","FN:in_whman"),p=this.get("analyzers")||[],f=e.some(p,function(e){return i.data._id===e.id}),h=f&&p[0].id===i.data._id,m="wh"===this.get("subdivisionType"),g=this.get("status"),y="pending"===g,b="started"===g,v="finished"===g,w=this.get("analysisNeed"),_=this.get("analysisDone"),A=!y&&w&&!_&&(n||o||u),k=n||o||a||s||u||l||m&&d,T=c.settings.canChangeCategory();return{delete:this.canDelete(),manage:n,comment:t,attachments:t,observers:t,restart:n,status:k,level:!v&&(k||r||d),solution:k,problem:b&&(n||o||s||u||l),category:n||T,subCategory:n||T,subdivisionType:n||o||s||u||l,componentCode:b&&(n||o),orderNo:b&&(n||o),lines:b&&(n||o),assessment:!y&&(n||o||u),analysisNeed:!y&&(n||o||u),analysisDone:!y&&w&&(n||o||u),mainAnalyzer:A,analyzers:(p.length||A)&&!y&&w&&!_&&(n||o||u||h),why5:!y&&w&&!_&&(n||o||u||l||f),solutionSteps:!y&&w&&!_&&(n||o||u||l||f)}},serializeObserver:function(){var t=e.assign({user:i.getInfo(),role:"viewer",func:i.data.prodFunction||null,lastSeenAt:Date.now(),notify:!1,changes:{}},e.find(this.get("observers"),function(e){return e.user.id===i.data._id}));t.lastSeenAt=Date.parse(t.lastSeenAt||0);var n=Object.keys(t.changes).length>0;return t.changes.any=t.notify||n,t.changes.all=t.notify&&!n,t},serializeChat:function(){var e=this,t={};(e.get("attachments")||[]).forEach(function(e){t[e._id]=!0});var o=e.get("createdAt"),a=r.getMoment(o),s=e.get("owner"),c=s.id===i.data._id,d=[{user:{id:s.id,label:l({userInfo:s,noIp:!0}),self:c},color:c?"transparent":u.getColor("fap/users",s.id),lines:[{time:a.format("LLLL"),text:n(e.nlsDomain,"history:added",{day:a.day(),ddd:a.format("ddd"),date:a.format("D MMMM YYYY"),time:a.format("HH:mm:ss")})}]}];return(e.get("changes")||[]).forEach(function(n){if(n.user){var r=!!n.comment,i=!!n.data.attachments&&!n.data.attachments[0]&&!!n.data.attachments[1],o=!!n.data.status,a=!!n.data.analysisNeed||!!n.data.analysisDone,s=!!n.data.level;(r||i||o||a||s)&&e.serializeChatMessage(n,d,t)}}),d},serializeChatMessage:function(t,o,a){var s,c=this,d=o&&o[o.length-1],p="<time>"+r.format(t.date,"HH:mm:ss")+"</time>",f=r.format(t.date,"dddd, LL LTS"),h=[];if(t.comment){var m=this.serializeText(t.comment);h.push({time:f,text:p+'<span class="fap-chat-line-text">'+m+"</span>"})}if(t.data.status&&(s="?","finished"===t.data.status[1]&&(s=(s=Date.parse(t.date)-Date.parse(this.get("createdAt")))>0?r.toString(s/1e3):"?"),h.push({time:f,text:n(this.nlsDomain,"chat:status:"+t.data.status.join(":"),{duration:s})})),t.data.analysisNeed&&t.data.analysisNeed[1]&&h.push({time:f,text:n(this.nlsDomain,"chat:analysis:started")}),t.data.analysisDone&&t.data.analysisDone[1]&&(s=(s=Date.parse(t.date)-Date.parse(this.get("analysisStartedAt")))>0?r.toString(s/1e3):"?",h.push({time:f,text:n(this.nlsDomain,"chat:analysis:finished",{duration:s})})),t.data.level){var g=t.data.level[1]>t.data.level[0]?"up":"down";h.push({time:f,text:n(this.nlsDomain,"chat:level:"+g,{level:t.data.level[1]})})}var y=t.data.attachments;if(y&&!y[0]&&y[1]){var b=n(c.nlsDomain,"autolink:attachment");t.data.attachments[1].forEach(function(t){if(!a||a[t._id]){var n=c.serializeAttachment(t);h.push({time:f,text:'<span class="fap-chat-attachment" title="'+b+'" data-attachment-id="'+t._id+'"><i class="fa '+n.icon+'"></i><a>'+e.escape(n.label)+"</a></span>"})}})}if(d&&d.user.id===t.user.id)return d.lines.push.apply(d.lines,h),d;var v=t.user.id===i.data._id,w={user:{id:t.user.id,label:l({userInfo:t.user,noIp:!0}),self:v},color:v?"transparent":u.getColor("fap/users",t.user.id),lines:h};return o&&w.lines.length&&o.push(w),w},serializeText:function(e){return s.autolinkMessage(e,this)},serializeObservers:function(){var e=this,t=i.isAllowedTo("FAP:MANAGE");return e.get("observers").map(function(n){var r=n.user.id===i.data._id;return{_id:n.user.id,label:l({userInfo:n.user,noIp:!0}),color:r?"#000":u.getColor("fap/users",n.user.id),lastSeenAt:n.lastSeenAt?Date.parse(n.lastSeenAt):0,online:r||!!e.attributes.presence[n.user.id],canUnsubscribe:r||t}}).sort(function(e,t){return t.lastSeenAt-e.lastSeenAt})},serializeAttachment:function(e){var t=e.type.split("/")[0];return{_id:e._id,icon:f[e.type]||f[t]||"fa-file-o",preview:"image"===t,label:e.name,menu:i.isAllowedTo("FAP:MANAGE","FN:master","FN:leader","FN:process-engineer","FN:process-engineer-NPI")||e.user&&e.user.id===i.data._id}},canDelete:function(){return i.isAllowedTo(this.privilegePrefix+":MANAGE")},change:function(e,t,n){void 0===n&&(n=this.get(e));var r={};r[e]=[n,t],this.multiChange(r,!0)},multiChange:function(e,t){var n=this,r={date:new Date,user:i.getInfo(),data:{},comment:""},o={};Object.keys(e).forEach(function(i){var a,s;t?(a=e[i][0],s=e[i][1]):(a=n.get(i),s=e[i]),JSON.stringify(s)!==JSON.stringify(a)&&(r.data[i]=[a,s],o[i]=s)}),Object.keys(e).length&&!Object.keys(o).length||(i.isLoggedIn()&&!this.isObserver()&&(r.data.subscribers||(r.data.subscribers=[null,[]]),r.data.subscribers[0]||r.data.subscribers[1].push({id:i.data._id,label:i.getLabel()})),n.handleChange(r),n.update(o))},update:function(e){var n=this,r=t.ajax({method:"PATCH",url:"/fap/entries/"+n.id,data:JSON.stringify({socketId:o.getId(),data:e})});return r.fail(function(){n.fetch()}),r},handlePresence:function(e,t){var n=this.attributes.presence||{};void 0===n[e]&&(n[e]=!1),n[e]!==t&&(n[e]=t,this.trigger("change:presence",this,n,{userId:e,online:t}),this.serialized&&(this.serialized.observers=this.serializeObservers()))},handleChange:function(t,n){var r=this,o={};!t.comment.length&&e.isEmpty(t.data)||(o.changes=r.get("changes").concat(t)),Object.keys(t.data).forEach(function(e){var n=e.split("$")[0],i=t.data[e],a=r.propChangeHandlers[n];1===a?o[n]=i[1]:a&&a.call(r.propChangeHandlers,o,r,i,t)});var a={};(o.observers||[]).concat(r.get("observers")).forEach(function(e){e&&e.user&&(a[e.user.id]=e)}),a=e.values(a);var s=e.findIndex(a,function(e){return e.user.id===i.data._id});if(-1!==s){var u=a[s];if(t.user.id===i.data._id){if(!1===u.notify&&!Object.keys(o).length)return;a[s]=e.defaults({lastSeenAt:t.date,notify:!1,changes:{}},u),o.observers=a}else n&&n[i.data._id]&&(a[s]=e.defaults({lastSeenAt:t.date,notify:!0,changes:n[i.data._id]},u),o.observers=a)}r.set(o)},propChangeHandlers:{subscribers:function(e,t,n){var r=e.observers||t.get("observers");null===n[0]?this.addObservers(e,t,r,n[1]):null===n[1]&&this.removeObservers(e,t,r,n[0])},addObservers:function(e,t,n,r){var i={};n.forEach(function(e){i[e.user.id]=!0});var o=[].concat(n);r.forEach(function(e){i[e.id]||(o.push({lastSeenAt:new Date,notify:!1,changes:{},user:e}),i[e.id]=!0)}),e.observers=o},removeObservers:function(e,t,n,r){var i={};r.forEach(function(e){i[e.id]=!0}),e.observers=n.filter(function(e){return!i[e.user.id]})},attachments:function(e,t,n){var r=t.get("attachments");null===n[0]?this.addAttachments(e,t,r,n[1]):null===n[1]?this.removeAttachments(e,t,r,n[0]):this.editAttachments(e,t,r,n[1])},addAttachments:function(e,t,n,r){var i={};n.forEach(function(e){i[e._id]=!0});var o=[].concat(n);r.forEach(function(e){i[e._id]||(o.push(e),i[e.id]=!0)}),e.attachments=o},removeAttachments:function(e,t,n,r){var i={};r.forEach(function(e){i[e._id]=!0}),e.attachments=n.filter(function(e){return!i[e._id]})},editAttachments:function(e,t,n,r){var i={};r.forEach(function(e){i[e._id]=e}),e.attachments=n.map(function(e){return i[e._id]||e})},unsubscribed:function(t,n,r,i){var o=e.clone(n.get("unsubscribed"));r[1]?o[i.user.id]=!0:delete o[i.user.id],t.unsubscribed=o},status:1,level:1,startedAt:1,finishedAt:1,problem:1,solution:1,solver:1,category:1,subCategory:1,divisions:1,lines:1,why5:1,solutionSteps:1,assessment:1,analysisNeed:1,analysisDone:1,analysisStartedAt:1,analysisFinishedAt:1,orderNo:1,mrp:1,nc12:1,productName:1,qtyTodo:1,qtyDone:1,analyzers:1,subdivisionType:1,componentCode:1,componentName:1}},{AUTH_PROPS:{status:!0,analysisNeed:!0,analysisDone:!0,analyzers:!0}})}),define("app/wmes-fap-entries/EntryCollection",["../core/Collection","./Entry"],function(e,t){"use strict";return e.extend({model:t,rqlQuery:"exclude(changes)&limit(-1337)&sort(-createdAt)"})}),define("app/prodDowntimes/util/decorateProdDowntimeChange",["underscore","app/time","app/i18n","app/data/aors","app/data/downtimeReasons","app/core/templates/userInfo"],function(e,t,n,r,i,o){"use strict";n=n.forDomain("prodDowntimes");var a={"WMES:ALERTS:START":function(e){var t=e.alert;return n("comments:alerts:start",{alertName:t.name,recipientCount:t.recipients.length,recipientList:t.recipients.join(", ")})},"WMES:ALERTS:NOTIFY":function(e){var t=e.alert;return n("comments:alerts:notify",{alertName:t.name,recipientCount:t.recipients.length,recipientList:t.recipients.join(", ")})},"WMES:ALERTS:FINISH":function(e){return n("comments:alerts:finish",{alertName:e.alert.name})},"WMES:SPIGOT:INITIAL":function(e){return n("comments:spigot:initial",{name:e.component.name,nc12:e.component.nc12})},"WMES:SPIGOT:FINAL":function(e){return n("comments:spigot:final",{name:e.component.name,nc12:e.component.nc12})}};function s(e,a){switch(e){case"startedAt":case"finishedAt":return t.format(a,"L, LTS");case"master":case"leader":case"operator":return o({userInfo:a});case"status":return n("PROPERTY:status:"+a);case"reason":var s=i.get(a);return s?s.getLabel():a;case"aor":var u=r.get(a);return u?u.getLabel():a;default:return a||""}}return function(r){var i=/^WMES:/.test(r.comment)?a[r.comment]:null;return{time:t.toTagData(r.date),user:o({userInfo:r.user}),changes:i?[]:e.map(r.data,function(e,t){return{label:n("PROPERTY:"+t),oldValue:s(t,e[0]),newValue:s(t,e[1])}}),comment:i?i(r.data):r.comment.trim()}}}),define("app/prodDowntimes/util/decorateProdDowntime",["underscore","app/time","app/i18n","app/user","app/data/aors","app/data/subdivisions","app/data/mrpControllers","app/data/prodFlows","app/data/prodLines","app/data/downtimeReasons","app/orgUnits/util/renderOrgUnitPath","app/core/templates/userInfo","app/orders/util/resolveProductName","./decorateProdDowntimeChange"],function(e,t,n,r,i,o,a,s,u,c,l,d,p,f){"use strict";return function(a,h){var m=r.isAllowedTo("PROD_DATA:VIEW"),g=h&&h.longDate?"LLLL":"L, LTS",y=a.toJSON();y.statusClassName=a.getCssClassName(),y.statusText=n("prodDowntimes","PROPERTY:status:"+y.status),y.className=y.statusClassName,y.reasonComment&&y.reasonComment.trim().length&&(y.className+=" is-withReasonComment");var b=i.get(y.aor);y.aor=b?b.getLabel():y.aor;var v=u.get(y.prodLine);v&&(y.prodLine=v.getLabel(),y.prodLinePath=l(v,!1,!1));var w=c.get(y.reason);y.reason=w?w.getLabel():y.reason,y.duration=a.getDurationString(h&&h.currentTime),y.startedAt=t.format(y.startedAt,g),y.finishedAt=y.finishedAt?t.format(y.finishedAt,g):n("prodDowntimes","NO_DATA:finishedAt"),y.corroboratedAt=t.format(y.corroboratedAt,g)||"",y.order=y.prodShiftOrder?y.orderId+"; "+y.operationNo:n("prodDowntimes","NO_DATA:order"),m&&y.prodShiftOrder&&(y.order='<a href="#prodShiftOrders/'+(y.prodShiftOrder._id||y.prodShiftOrder)+'">'+y.order+"</a>");var _=o.get(y.subdivision),A=s.get(y.prodFlow);y.subdivision=_?_.getLabel():"",y.prodFlow=A?A.getLabel():"",y.mrpControllers=Array.isArray(y.mrpControllers)&&y.mrpControllers.length?y.mrpControllers.join("; "):"";var k=y.prodShiftOrder;if(y.orderData?(y.productName=y.orderData.name,y.productFamily=y.orderData.family,y.orderMrp='<span title="'+y.mrpControllers+'">'+(y.orderData.mrp||"")+"</span>"):y.orderMrp="<em>"+y.mrpControllers+"</em>",k&&k.orderData){var T=k.orderData;y.orderData||(y.productName=p(T),y.productFamily=y.productName.substring(0,6)),T.operations&&T.operations[y.operationNo]&&(y.operationName=T.operations[y.operationNo].name)}y.date=y.date?t.format(y.date,"L"):"?",y.shift=y.shift?n("core","SHIFT:"+y.shift):"?",y.prodShiftText=y.date+", "+y.shift,m&&y.prodShift&&(y.prodShiftText='<a href="#prodShifts/'+y.prodShift+'">'+y.prodShiftText+"</a>"),y.masterInfo=d({userInfo:y.master}),y.leaderInfo=d({userInfo:y.leader}),Array.isArray(y.operators)&&y.operators.length?y.operatorInfo=y.operators.map(function(e){return d({userInfo:e})}).join("; "):y.operatorInfo=d({userInfo:y.operator}),y.creatorInfo=d({userInfo:y.creator}),y.corroboratorInfo=d({userInfo:y.corroborator}),y.history=!Array.isArray(y.changes)||h&&!0===h.noHistory?[]:y.changes.map(f);var E=y.changesCount;return E&&h&&h.changesCount&&(E.reason&&(y.reason+=' <span title="'+n("prodDowntimes","changesCount:reason")+'" class="label label-'+(E.reason>=h.maxReasonChanges?"danger":"warning")+'">'+E.reason+"</span>"),E.aor&&(y.aor+=' <span title="'+n("prodDowntimes","changesCount:aor")+'" class="label label-'+(E.aor>=h.maxAorChanges?"danger":"warning")+'">'+E.aor+"</span>")),y.prodFlowText=y.prodFlow,h&&h.productFamily&&y.productFamily&&(y.prodFlow='<span class="label label-default" title="'+e.escape(y.productName)+'">'+e.escape(y.productFamily)+"</span> "+y.prodFlow),y}}),define("app/prodDowntimes/ProdDowntime",["../time","../user","../core/Model","../core/util/getShiftEndDate","../data/aors","../data/downtimeReasons","./util/decorateProdDowntime"],function(e,t,n,r,i,o,a){"use strict";var s={undecided:"warning",confirmed:"success",rejected:"danger",null:"primary"};return n.extend({urlRoot:"/prodDowntimes",clientUrlRoot:"#prodDowntimes",topicPrefix:"prodDowntimes",privilegePrefix:"PROD_DOWNTIMES",nlsDomain:"prodDowntimes",labelAttribute:"rid",defaults:{division:null,subdivision:null,mrpControllers:null,prodFlow:null,workCenter:null,prodLine:null,prodShift:null,prodShiftOrder:null,date:null,shift:null,aor:null,reason:null,reasonComment:null,decisionComment:null,status:null,startedAt:null,finishedAt:null,corroborator:null,corroboratedAt:null,creator:null,master:null,leader:null,operator:null,operators:null,mechOrder:null,orderId:null,operationNo:null},url:function(){var e=n.prototype.url.apply(this,arguments);return this.isNew()?e:e+"?populate(prodShiftOrder)"},serializeRow:function(e){return a(this,{changesCount:!0,currentTime:e})},serializeDetails:function(){return a(this,{longDate:!0})},getReasonLabel:function(){var e=this.get("reason"),t=o.get(e);return t?t.get("label"):e},getAorLabel:function(){var e=this.get("aor"),t=i.get(e);return t?t.get("name"):e},getCssClassName:function(e){return s[void 0===e?this.get("status"):e]},finish:function(){if(null!=this.get("finishedAt"))return null;var t=e.getMoment().toDate(),n=r(this.get("date"),this.get("shift"));return t>n&&(t=n),this.set("finishedAt",t),{_id:this.id,finishedAt:t}},isEditable:function(){return null!=this.get("finishedAt")&&null===this.get("pressWorksheet")},canCorroborate:function(){return t.isLoggedIn()&&null===this.get("pressWorksheet")},canChangeStatus:function(e){if(!this.get("finishedAt"))return 0;if(e.canManageProdData)return 2;var t=this.get("status");if(!e.canManageProdDowntimes||"confirmed"===t)return 0;var n=this.get("changesCount");return!n||n.rejected>=e.maxRejectedChanges||n.reason>=e.maxReasonChanges||n.aor>=e.maxAorChanges?0:e.hasAccessToAor(this.get("aor"))?1:0},getDurationString:function(t,n){var r=Date.parse(this.get("startedAt")),i=Date.parse(this.get("finishedAt"))||t||Date.now();return e.toString(Math.round((i-r)/1e3),n)},isBreak:function(){var e=o.get(this.get("reason"));return e&&"break"===e.get("type")}},{STATUS:{UNDECIDED:"undecided",CONFIRMED:"confirmed",REJECTED:"rejected"},parse:function(e){return["date","startedAt","finishedAt","createdAt","corroboratedAt"].forEach(function(t){"string"==typeof e[t]&&(e[t]=new Date(e[t]))}),e}})}),define("app/prodDowntimes/ProdDowntimeCollection",["underscore","../time","../user","../data/prodLog","../core/Collection","../core/util/matchesEquals","../data/orgUnits","../orgUnits/util/limitOrgUnits","./ProdDowntime"],function(e,t,n,r,i,o,a,s,u){"use strict";var c={eq:!0,ne:!0,in:!0,nin:!0};return i.extend({model:u,rqlQuery:function(e){var r=[{name:"in",args:["status",["undecided","rejected"]]},{name:"ge",args:["startedAt",t.getMoment().subtract(2,"weeks").startOf("day").hours(6).valueOf()]}];n.isAllowedTo("PROD_DOWNTIMES:ALL")||s(r,{divisionType:"prod"});var i=n.data.aors;return Array.isArray(i)&&(1===i.length?r.push({name:"eq",args:["aor",i[0]]}):i.length>1&&r.push({name:"in",args:["aor",i]})),e.Query.fromObject({fields:{rid:1,aor:1,reason:1,mrpControllers:1,prodFlow:1,prodLine:1,status:1,startedAt:1,finishedAt:1,date:1,shift:1,pressWorksheet:1,changesCount:1,orderData:1},sort:{startedAt:-1},limit:-1337,selector:{name:"and",args:r}})},findFirstUnfinished:function(){return this.find(function(e){return null==e.get("finishedAt")})},finish:function(){var e=this.findFirstUnfinished();return e?e.finish():null},addFromInfo:function(e,i){var o=e.get("date"),a=i.startedAt||t.getMoment().toDate();a<o&&(a=new Date(o.getTime()));var s=new u({division:e.get("division"),subdivision:e.get("subdivision"),subdivisionType:e.prodShiftOrder.get("subdivisionType"),mrpControllers:e.get("mrpControllers"),prodFlow:e.get("prodFlow"),workCenter:e.get("workCenter"),prodLine:e.prodLine.id,prodShift:e.id,prodShiftOrder:e.prodShiftOrder.id||null,date:o,shift:e.get("shift"),aor:i.aor,reason:i.reason,reasonComment:i.reasonComment,status:u.STATUS.UNDECIDED,startedAt:a,creator:n.getInfo(),master:e.get("master"),leader:e.get("leader"),operator:e.get("operator"),operators:e.get("operators"),mechOrder:e.prodShiftOrder.get("mechOrder"),orderId:e.prodShiftOrder.get("orderId"),operationNo:e.prodShiftOrder.get("operationNo"),auto:i.auto||null});s.set("_id",r.generateId(s.get("startedAt"),e.id+i.aor));for(var c=this.rqlQuery.limit<1?1/0:this.rqlQuery.limit;this.length>=c;)this.pop({silent:!0});return this.unshift(s),s},hasOrMatches:function(e){if(e._id&&this.get(e._id))return!0;return o(this.rqlQuery,"status",e.status)&&this.matchProp("aor",e)&&this.matchProp("reason",e)&&this.matchProp(a.TYPES,e)&&o(this.rqlQuery,"prodShift",e.prodShift)&&o(this.rqlQuery,"prodShiftOrder",e.prodShiftOrder)&&o(this.rqlQuery,"orderId",e.orderId)},matchProp:function(t,n){if("string"==typeof t){var r=t;(t={})[r]=!0}var i=e.find(this.rqlQuery.selector.args,function(e){return c[e.name]&&t[e.args[0]]});if(!i)return!0;var o=i.args[0],a=i.args[1],s=n[o];return"eq"===i.name?s===a:"ne"===i.name?s!==a:"in"===i.name?-1!==a.indexOf(s):"nin"!==i.name||-1===a.indexOf(s)},refresh:function(e){for(var t=this.toJSON(),n=(e=e.map(function(e){return u.parse(e)})).length?e[0].startedAt:Number.MAX_VALUE,r=t.length-1;r>=0;--r){var i=t[r];i.startedAt>n&&e.unshift(i)}for(;e.length>8;)e.pop();this.reset(e)}})}),define("app/orderStatuses/OrderStatus",["../core/Model","app/core/util/colorLabel"],function(e,t){"use strict";return e.extend({urlRoot:"/orderStatuses",clientUrlRoot:"#orderStatuses",topicPrefix:"orderStatuses",privilegePrefix:"DICTIONARIES",nlsDomain:"orderStatuses",labelAttribute:"_id",defaults:{label:null,color:"#999999"},toJSON:function(){var t=e.prototype.toJSON.call(this);return t.label||(t.label=t._id),t},serialize:function(){var e=this.toJSON();return e.color=t(e.color),e}})}),define("app/orderStatuses/OrderStatusCollection",["../core/Collection","./OrderStatus"],function(e,t){"use strict";return e.extend({model:t,rqlQuery:"select(label,color)&sort(_id)",findAndFill:function(e){var n=this;return Array.isArray(e)?e.map(function(e){var r=n.get(e);return r||(r=new t({_id:e})),r.toJSON()}):[]}})}),define("app/data/orderStatuses",["app/orderStatuses/OrderStatusCollection","./createStorage"],function(e,t){"use strict";return t("ORDER_STATUSES","orderStatuses",e)}),define("app/orders/Operation",["../core/Model"],function(e){"use strict";var t=["machineSetupTime","machineTime","laborSetupTime","laborTime"];return e.extend({defaults:{no:null,workCenter:null,name:null,qty:null,unit:null,machineSetupTime:-1,machineTime:-1,laborSetupTime:-1,laborTime:-1},toJSON:function(){var n=e.prototype.toJSON.call(this);return n.qty&&(n.qtyUnit=n.qty,n.unit&&(n.qtyUnit+=" "+n.unit)),t.forEach(function(e){-1===n[e]&&(n[e]=null)}),n}})}),define("app/orders/OperationCollection",["../core/Collection","./Operation"],function(e,t){"use strict";return e.extend({model:t})}),define("app/orders/Document",["../core/Model"],function(e){"use strict";return e.extend({idAttribute:"nc15",labelAttribute:"name"})}),define("app/orders/DocumentCollection",["../core/Collection","./Document"],function(e,t){"use strict";return e.extend({model:t,parse:function(e){return e.collection&&e.collection.forEach(function(e,t){e.index=t}),e}})}),define("app/orders/Component",["../core/Model"],function(e){"use strict";return e.extend({idAttribute:"index",labelAttribute:"name"})}),define("app/orders/ComponentCollection",["../core/Collection","./Component"],function(e,t){"use strict";return e.extend({model:t,parse:function(e){return e.collection&&e.collection.forEach(function(e,t){e.index=t}),e}})}),define("app/orderStatuses/util/renderOrderStatusLabel",["app/core/util/colorLabel","app/data/orderStatuses"],function(e,t){"use strict";return function(n){if("string"==typeof n){var r=t.get(n);n=r?r.attributes:{_id:n,label:n,color:"#999999"}}return e({className:"orderStatus",label:n._id,title:n.label,color:n.color})}}),define("app/orders/Order",["../time","../i18n","../core/Model","../data/orderStatuses","./util/resolveProductName","./OperationCollection","./DocumentCollection","./ComponentCollection","app/orderStatuses/util/renderOrderStatusLabel"],function(e,t,n,r,i,o,a,s,u){"use strict";var c=["startDate","finishDate","scheduledStartDate","scheduledFinishDate"],l=["sapCreatedAt","createdAt","updatedAt"];return n.extend({urlRoot:"/orders",clientUrlRoot:"#orders",topicPrefix:"orders",privilegePrefix:"ORDERS",nlsDomain:"orders",labelAttribute:"_id",parse:function(e,t){return(e=n.prototype.parse.call(this,e||{},t)).operations=new o(e.operations),e.documents=new a(e.documents),e.bom=new s(e.bom),e},toJSON:function(){var e=n.prototype.toJSON.call(this);return e.operations=e.operations?e.operations.toJSON():[],Array.isArray(e.documents)||(e.documents=e.documents&&e.documents.toJSON?e.documents.toJSON():[]),Array.isArray(e.bom)||(e.bom=e.bom&&e.bom.toJSON?e.bom.toJSON():[]),e},serialize:function(n){var o=this.toJSON();o.productName=i(o),c.forEach(function(t){o[t]&&(o[t+"Text"]=e.format(o[t],"LL"))}),l.forEach(function(t){o[t]&&(o[t+"Text"]=e.format(o[t],"LLL"))}),o.unit||(o.unit="PCE"),o.qtyMax||(o.qtyMax=o.qty),o.qty&&(o.qtyUnit=o.qty+" "+o.unit),o.qtyMax&&(o.qtyMaxUnit=o.qtyMax+" "+o.unit),o.qtyDone&&(o.qtyDoneUnit=(o.qtyDone.total||0)+" "+o.unit),o.qtys="",o.qtyDone&&o.qtyDone.total>=0&&(o.qtys+=o.qtyDone.total),o.qty&&(o.qtys.length&&(o.qtys+="/"),o.qtys+=o.qty),o.statusLabels=r.findAndFill(o.statuses).map(u).join(" ");var a=n&&n.delayReasons&&n.delayReasons.get(o.delayReason),s=o.m4;if(o.delayReason=a?a.getLabel():null,s&&(o.m4=t("orders","m4:"+s),o.delayReason)){var d=a.get("drm");d&&(o.m4+=" ("+d+")")}return o.psStatus=o.psStatus&&"unknown"!==o.psStatus?t("orders","psStatus:"+o.psStatus):null,o}})}),define("app/orders/OrderCollection",["../user","../time","../core/Collection","./Order"],function(e,t,n,r){"use strict";return n.extend({model:r,rqlQuery:function(e){var n=t.getMoment().startOf("day");return e.Query.fromObject({fields:{operations:0,bom:0,documents:0,notes:0,changes:0},limit:-1337,sort:{scheduledStartDate:-1},selector:{name:"and",args:[{name:"ge",args:["scheduledStartDate",n.valueOf()]},{name:"lt",args:["scheduledStartDate",n.add(1,"days").valueOf()]}]}})}},{can:{comment:function(){return e.can.commentOrders()},editStatusChange:function(){return e.isAllowedTo("SUPER")}}})}),define("app/core/util/html2pdf",["underscore","jquery","app/i18n","app/broker","app/viewport"],function(e,t,n,r,i){"use strict";return function(o,a,s){"string"==typeof a&&(s=a,a=null),a=e.assign({format:"A4",orientation:"portrait"},a);var u=i.msg.show({type:"info",text:'<i class="fa fa-spinner fa-spin"></i><span>'+n("core","html2pdf:progress")+"</span>"}),c=t.ajax({method:"POST",url:"/html2pdf?format="+a.format+"&orientation="+a.orientation,contentType:"text/plain",data:o});c.done(function(o){"string"==typeof s&&/^[a-f0-9]{24}$/.test(s)?function(e,o,a){i.msg.hide(e),e=i.msg.show({type:"info",text:'<i class="fa fa-spinner fa-spin"></i><span>'+n("core","html2pdf:printing")+"</span>"});var s=t.ajax({method:"POST",url:"/html2pdf;print",data:JSON.stringify({hash:a,printer:o})});s.done(function(){i.msg.hide(e,!0),i.msg.show({type:"success",time:2e3,text:n("core","html2pdf:printing:success")})}),s.fail(function(){i.msg.hide(e,!0),i.msg.show({type:"error",time:2500,text:n("core","html2pdf:printing:failure")})}),s.always(function(){r.publish("html2pdf.completed")})}(u,s,o.hash):function(t,o,a){var s=Math.min(window.screen.availWidth-200,1400),u=e.assign({top:80,width:s,height:Math.min(window.screen.availHeight-160,800),left:window.screen.availWidth-s-80},e.pick(o,["top","left","width","height"])),c=[];Object.keys(u).forEach(function(e){c.push(e+"="+u[e])});var l="/html2pdf/"+a;o.filename&&(l+="/"+o.filename);l+=".pdf";var d=window.open(l,"_blank",c.join(","));d?(i.msg.hide(t),d.focus()):(i.msg.hide(t,!0),i.msg.show({type:"error",time:3e3,text:n("core","MSG:POPUP_BLOCKED")}));r.publish("html2pdf.completed")}(u,a,o.hash)}),c.fail(function(){i.msg.hide(u,!0),i.msg.show({type:"error",time:2500,text:n("core","html2pdf:failure")})})}}),define("app/orders/util/openOrderPrint",["jquery","app/core/util/html2pdf"],function(e,t){"use strict";return function(n,r){e.ajax({url:"/orders/"+n.join("+")+".html",dataType:"html"}).done(function(e){t(e,r)})}}),define("app/orders/templates/details",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="panel panel-'),__append(panelType),__append(' orders-details">\n  <div class="panel-heading">'),__append(panelTitle),__append('</div>\n  <div class="panel-details row">\n    <div class="col-md-4">\n      '),__append(helpers.props(model,[{id:"!_id",value:function(e){return linkOrderNo&&e?'<a href="#orders/'+e+'" title="'+helpers.t("details:showMoreLink")+'">'+e+"</a>":e}},"nc12","mrp","name",{id:"description",value:model.name===model.description?"":model.description||""},{id:"!leadingOrder",value:function(e){return e&&e!==model._id?user.isAllowedTo("LOCAL","ORDERS:VIEW")?'<a href="'+window.location.origin+window.location.pathname+window.location.search+"#orders/"+e+'">'+e+"</a>":e:""}},{id:"salesOrder",value:(model.salesOrder||"-")+"/"+(model.salesOrderItem||"-")},"soldToParty"])),__append('\n    </div>\n    <div class="col-md-4">\n      '),__append(helpers.props(model,[{id:"qty",value:model.qtyUnit},{id:"qtyDone",value:model.qtyDoneUnit},"priority",{id:"!statuses",value:model.statusLabels},"psStatus","delayReason","delayComponent","m4"])),__append('\n    </div>\n    <div class="col-md-4">\n      '),__append(helpers.props(model,[{id:"sapCreatedAt",value:model.sapCreatedAtText},{id:"startDate",value:model.startDateText},{id:"finishDate",value:model.finishDateText},{id:"scheduledStartDate",value:model.scheduledStartDateText},{id:"scheduledFinishDate",value:model.scheduledFinishDateText},{id:"createdAt",value:model.createdAtText},{id:"updatedAt",value:model.updatedAtText},"changedBy"])),__append("\n    </div>\n  </div>\n</div>\n");return __output}}),define("app/orders/views/OrderDetailsView",["app/i18n","app/core/views/DetailsView","app/orders/templates/details"],function(e,t,n){"use strict";return t.extend({template:n,remoteTopics:{},localTopics:{"orderStatuses.synced":"render"},getTemplateData:function(){return{model:this.model.serialize({delayReasons:this.delayReasons}),panelType:this.options.panelType||"primary",panelTitle:this.options.panelTitle||e("core","PANEL:TITLE:details"),linkOrderNo:!!this.options.linkOrderNo}}})}),define("app/core/templates/pagination",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<ul class="pagination">\n\n  '),firstLastLinksVisible&&(__append("\n    "),firstPageLinkAvailable?(__append('\n    <li class="pagination-firstPage"><a href="'),__append(firstPageHref),__append('" title="'),__append(t("core","PAGINATION:FIRST_PAGE")),__append('" data-page="1">&laquo;</a>\n    ')):__append('\n    <li class="pagination-firstPage disabled"><span>&laquo;</span>\n    '),__append("\n  ")),__append("\n\n  "),prevNextLinksVisible&&(__append("\n    "),prevPageLinkAvailable?(__append('\n    <li class="pagination-prevPage"><a href="'),__append(prevPageHref),__append('" title="'),__append(t("core","PAGINATION:PREV_PAGE")),__append('" data-page="'),__append(page-1),__append('">&lsaquo;</a>\n    ')):__append('\n    <li class="pagination-prevPage disabled"><span>&lsaquo;</span>\n    '),__append("\n  ")),__append("\n\n  "),leftDotsVisible&&__append('\n  <li class="disabled pagination-leftDots"><span class="pagination-dots">...</span>\n  '),__append("\n\n  "),pages.forEach(function(e){__append('\n  <li class="pagination-page '),__append(e.active?"active":""),__append('"><a href="'),__append(e.href),__append('" data-page="'),__append(e.no),__append('">'),__append(e.no),__append("</a>\n  ")}),__append("\n\n  "),rightDotsVisible&&__append('\n  <li class="disabled pagination-rightDots"><span class="pagination-dots">...</span>\n  '),__append("\n\n  "),prevNextLinksVisible&&(__append("\n    "),nextPageLinkAvailable?(__append('\n    <li><a class="pagination-nextPage" href="'),__append(nextPageHref),__append('" title="'),__append(t("core","PAGINATION:NEXT_PAGE")),__append('" data-page="'),__append(page+1),__append('">&rsaquo;</a>\n    ')):__append('\n    <li class="pagination-nextPage disabled"><span>&rsaquo;</span>\n    '),__append("\n  ")),__append("\n\n  "),firstLastLinksVisible&&(__append("\n    "),lastPageLinkAvailable?(__append('\n    <li><a class="pagination-lastPage" href="'),__append(lastPageHref),__append('" title="'),__append(t("core","PAGINATION:LAST_PAGE")),__append('" data-page="'),__append(pageCount),__append('">&raquo;</a>\n    ')):__append('\n    <li class="pagination-lastPage disabled"><span>&raquo;</span>\n    '),__append("\n  ")),__append("\n\n</ul>\n");return __output}}),define("app/core/views/PaginationView",["underscore","../View","app/core/templates/pagination"],function(e,t,n){"use strict";var r={pageNumbers:3,firstLastLinksVisible:!0,prevNextLinksVisible:!0,dotsVisible:!0,replaceUrl:!1,navigate:!0},i=t.extend({template:n,events:{"click a":function(e){if(0===e.button){e.preventDefault();var t=e.currentTarget;this.changePage(+t.getAttribute("data-page"),t.getAttribute("href"))}}}});return i.prototype.initialize=function(){e.defaults(this.options,r),this.listenTo(this.model,"change:urlTemplate",this.render)},i.prototype.afterRender=function(){var e=this.model.get("limit");(e<=0||this.model.get("totalCount")<=e)&&this.$el.hide()},i.prototype.changePage=function(e,t){this.model.set({page:e}),t&&this.options.navigate&&this.broker.publish("router.navigate",{url:t,replace:this.options.replaceUrl})},i.prototype.serialize=function(){var e=this.options,t=this.model,n=t.get("page"),r=Math.ceil(t.get("totalCount")/t.get("limit")),i=(e.pageNumbers-1)/2;e.dotsVisible&&(i+=1);var o=n,a=o+i,s=!0,u=!1;o-i<1?o=1:(o-=i,u=e.dotsVisible&&1!==o),u&&(o+=1),a>r&&(a=r,s=!1),n<i+1?(a+=i+1-n)>r&&(a=r):n>r-i&&(o-=i-(r-n))<1&&(o=1);var c=e.dotsVisible&&s&&a!==r;return c&&(a-=1),1===o&&(u=!1),{pageCount:r,page:n,skip:t.get("skip"),limit:t.get("limit"),visible:r>1,firstLastLinksVisible:e.firstLastLinksVisible,prevNextLinksVisible:e.prevNextLinksVisible,leftDotsVisible:u,rightDotsVisible:c,firstPageLinkAvailable:n>1,lastPageLinkAvailable:n<r,prevPageLinkAvailable:n>1,nextPageLinkAvailable:n<r,firstPageHref:this.genPageHref(1),lastPageHref:this.genPageHref(r),prevPageHref:this.genPageHref(n-1),nextPageHref:this.genPageHref(n+1),pages:this.genPages(o,a)}},i.prototype.genPageHref=function(e){var t=this.model.get("urlTemplate"),n=this.model.get("limit");return t.replace("${page}",e).replace("${skip}",(e-1)*n).replace("${limit}",n)},i.prototype.genPages=function(e,t){for(var n=[],r=this.model.get("page"),i=e;i<=t;++i)n.push({no:i,active:i===r,href:this.genPageHref(i)});return n},i}),define("app/core/templates/list",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})panel&&(__append('\n<div class="panel panel-'),__append(panel.type||"default"),__append(" "),__append(panel.className||""),__append(" "),__append(panel.hideEmpty&&0===rows.length?"hidden":""),__append('">\n  <div class="panel-heading">'),__append(panel.title||""),__append("</div>\n")),__append('\n<div class="list '),__append("undefined"==typeof className?"":className),__append('">\n  <div class="table-responsive"><table class="table '),__append(tableClassName),__append('">\n      <thead>\n      <tr>\n        '),columns.forEach(function(e){__append('\n        <th data-column-id="'),__append(e.id),__append('" '),__append("function"==typeof e.thAttrs?e.thAttrs(e):e.thAttrs||""),__append(">"),__append(e.label),__append("</th>\n        ")}),__append("\n        "),"function"==typeof actions&&(__append('\n        <th class="actions">'),__append(t("core","LIST:COLUMN:actions")),__append("</th>\n        ")),__append("\n      </tr>\n      </thead>\n      <tbody>\n        "),rows.length||(__append('\n        <tr>\n          <td colspan="'),__append(columns.length+1),__append('">'),__append(noData),__append("</td>\n        </tr>\n        ")),__append("\n        "),rows.forEach(function(e){__append('\n        <tr class="list-item '),__append(e.className?e.className:""),__append('"\n          '),e.dataAttrs&&(__append("\n          "),Object.keys(e.dataAttrs).forEach(function(t){__append("\n          data-"),__append(t),__append('="'),__append(escapeFn(e.dataAttrs[t])),__append('"\n          ')}),__append("\n          ")),__append("\n          "),e._id&&(__append('data-id="'),__append(e._id),__append('"')),__append("\n        >\n          "),columns.forEach(function(t){__append("\n          <td\n            "),__append("function"==typeof t.tdAttrs?t.tdAttrs(e,t):t.tdAttrs||""),__append('\n            data-id="'),__append(t.id),__append('"\n            '),t.titleProperty&&e[t.titleProperty]&&(__append('title="'),__append(escapeFn(e[t.titleProperty])),__append('"')),__append("\n          >"),__append(renderValue(t,e)),__append("</td>\n          ")}),__append("\n          "),"function"==typeof actions&&(__append('\n          <td class="actions">\n            <div class="actions-group">\n              '),actions(e).forEach(function(e){__append("\n              "),e.href?(__append('\n              <a href="'),__append(e.href),__append('" class="btn btn-'),__append(e.type||"default"),__append(" "),__append(e.id?"action-"+e.id:""),__append(" "),__append(e.className||""),__append('" title="'),__append(escapeFn(e.label)),__append('"><i class="fa fa-'),__append(e.icon),__append('"></i>'),__append(e.text||""),__append("</a>\n              ")):(__append('\n              <button type="button" class="btn btn-'),__append(e.type||"default"),__append(" "),__append(e.id?"action-"+e.id:""),__append(" "),__append(e.className||""),__append('" title="'),__append(escapeFn(e.label)),__append('" data-id="'),__append(e.id||""),__append('"><i class="fa fa-'),__append(e.icon),__append('"></i>'),__append(e.text||""),__append("</button>\n              ")),__append("\n              ")}),__append("\n            </div>\n          </td>\n          ")),__append("\n        </tr>\n        ")}),__append('\n      </tbody>\n    </table></div>\n  <div class="pagination-container"></div>\n</div>\n'),panel&&__append("\n</div>\n"),__append("\n");return __output}}),define("app/core/views/ListView",["underscore","jquery","app/i18n","app/user","../View","./ActionFormView","./PaginationView","app/core/templates/list"],function(e,t,n,r,i,o,a,s){"use strict";var u=i.extend({template:s,tableClassName:"table-bordered table-hover table-condensed",paginationOptions:{},refreshDelay:5e3,remoteTopics:function(){var e={},t=this.collection.getTopicPrefix();return t&&(e[t+".added"]="refreshCollection",e[t+".edited"]="refreshCollection",e[t+".deleted"]="onModelDeleted"),e},events:{"click .list-item[data-id]":function(e){if(e.target.classList.contains("actions-group"))return!1;if(!this.isNotClickable(e)){var t=this.collection.get(e.currentTarget.dataset.id).genClientUrl();e.ctrlKey?window.open(t):e.altKey||this.broker.publish("router.navigate",{url:t,trigger:!0,replace:!1})}},"mousedown .list-item[data-id]":function(e){this.isNotClickable(e)||1!==e.button||e.preventDefault()},"mouseup .list-item[data-id]":function(e){if(!this.isNotClickable(e)&&1===e.button)return window.open(this.collection.get(e.currentTarget.dataset.id).genClientUrl()),!1},"click .action-delete":function(e){e.preventDefault(),o.showDeleteDialog({model:this.getModelFromEvent(e)})}},initialize:function(){this.refreshReq=null,this.lastRefreshAt=0,this.listenTo(this.collection,"sync",function(){this.lastRefreshAt=Date.now()}),this.once("afterRender",function(){this.listenTo(this.collection,"reset",this.onReset)}),this.collection.paginationData&&(this.paginationView=new a(e.assign({replaceUrl:!!this.options.replaceUrl},this.paginationOptions,this.options.pagination,{model:this.collection.paginationData})),this.setView(".pagination-container",this.paginationView),this.listenTo(this.collection.paginationData,"change:page",this.scrollTop))},destroy:function(){this.paginationView=null},serialize:function(){return e.assign(i.prototype.serialize.apply(this,arguments),{columns:this.decorateColumns(this.serializeColumns()),actions:this.serializeActions(),rows:this.serializeRows(),className:e.result(this,"className"),tableClassName:e.result(this,"tableClassName"),noData:this.options.noData||n("core","LIST:NO_DATA"),panel:this.options.panel,renderValue:function(e,t){return null==t[e.valueProperty]?null==e.noData?"<em>"+n("core","LIST:NO_DATA:cell")+"</em>":e.noData:"function"==typeof e.tdDecorator?e.tdDecorator(e.id,t[e.valueProperty],t,e):t[e.valueProperty]}})},serializeColumns:function(){var e=this.options.columns||this.columns;return"function"==typeof e&&(e=e.call(this)),Array.isArray(e)||(e=[]),e},decorateColumns:function(t){var r=this,i=r.collection.getNlsDomain();return t.map(function(t){if(!t)return null;if("-"===t?t={id:"filler",label:""}:"string"==typeof t&&(t={id:t}),!1===t.visible)return null;if(t.valueProperty||(t.valueProperty=t.id),!t.label&&""!==t.label){var o="LIST:COLUMN:"+t.id;n.has(i,o)||(o="PROPERTY:"+t.id),t.label=n.bound(i,o)}return["th","td"].forEach(function(n){var i=n+"Attrs",o="_"+i,a=t[o]||t[i];e.isFunction(a)||e.isObject(a)&&!e.isArray(a)||(a={}),t[o]||(t[o]=a),t[i]=r.decorateAttrs.bind(r,n,t[o])}),t}).filter(function(e){return null!==e})},decorateAttrs:function(t,n,r,i){"th"===t&&(i=r,r={}),e.isFunction(n)&&(n="th"===t?n(i):n(r,i));var o=[];e.isArray(n.className)?o=o.concat(n.className):e.isString(n.className)&&o.push(n.className),o.push(e.result(i,"className"),e.result(i,t+"ClassName"));var a=[];return(o=o.filter(function(e){return!!e}).join(" ")).length&&a.push('class="'+o+'"'),i.titleProperty||"td"!==t||-1===o.indexOf("is-overflow")||(i.titleProperty=i.id),i.titleProperty&&(n.title=r[i.titleProperty]),n.title&&(n.title=n.title.replace(/<\/?[a-z].*?>/g,"")),i.width&&(n.style||(n.style={}),n.style.width=i.width),Object.keys(n).forEach(function(t){if("className"!==t){var o=n[t];if(e.isFunction(o)&&(o=o(t,n,r,i)),e.isArray(o))o=o.join(" ");else if("style"===t&&e.isObject(o)){var s=[];Object.keys(o).forEach(function(e){s.push(e+": "+o[e])}),o=s.join("; ")}"!"===t.charAt(0)?t=t.substring(1):o=e.escape(o),a.push(t+'="'+o+'"')}}),a.join(" ")},serializeActions:function(){return void 0!==this.actions?e.result(this,"actions"):u.actions.viewEditDelete(this.collection)},serializeRows:function(){return this.collection.map(this.options.serializeRow||this.serializeRow,this)},serializeRow:function(e){return"function"==typeof e.serializeRow?e.serializeRow():"function"==typeof e.serialize?e.serialize():e.toJSON()},onModelDeleted:function(e){if(e){var t=e.model||e;t._id&&(this.$('.list-item[data-id="'+t._id+'"]').addClass("is-deleted"),this.refreshCollection(t))}},onReset:function(){this.render()},$row:function(e){return this.$('tr[data-id="'+e+'"]')},$cell:function(e,t){return this.$('tr[data-id="'+e+'"] > td[data-id="'+t+'"]')},refreshCollection:function(e){if(!e||!this.timers.refreshCollection){var t=Date.now();t-this.lastRefreshAt>this.refreshDelay?(this.lastRefreshAt=t,this.refreshCollectionNow()):this.timers.refreshCollection=setTimeout(this.refreshCollectionNow.bind(this),this.refreshDelay)}},refreshCollectionNow:function(t){if(this.timers){this.timers.refreshCollection&&clearTimeout(this.timers.refreshCollection),delete this.timers.refreshCollection,this.refreshReq&&this.refreshReq.abort();var n=this,r=this.promised(this.collection.fetch(e.isObject(t)?t:{reset:!0}));r.always(function(){n.refreshReq===r&&(n.refreshReq.abort(),n.refreshReq=null)}),this.refreshReq=r}},scrollTop:function(){var e=this.$el.offset().top-14,n=t(".navbar-fixed-top");n.length&&(e-=n.outerHeight()),window.scrollY>e&&t("html, body").stop(!0,!1).animate({scrollTop:e})},getModelFromEvent:function(e){return this.collection.get(this.$(e.target).closest(".list-item").attr("data-id"))},isNotClickable:function(e){var t=this.el.classList.contains("list")?this.el:this.el.querySelector(".list"),n=e.target,r=n.tagName;return!t.classList.contains("is-clickable")||"A"===r||"INPUT"===r||"BUTTON"===r||n.classList.contains("actions")||""!==window.getSelection().toString()||"TD"!==r&&this.$(n).closest("a, input, button").length}});function c(e,t,r){return t||(t=e.getNlsDomain()),n.has(t,r)?n(t,r):n("core",r)}return u.actions={viewDetails:function(e,t){return{id:"viewDetails",icon:"file-text-o",label:c(e,t,"LIST:ACTION:viewDetails"),href:e.genClientUrl()}},edit:function(e,t){return{id:"edit",icon:"edit",label:c(e,t,"LIST:ACTION:edit"),href:e.genClientUrl("edit")}},delete:function(e,t){return{id:"delete",icon:"times",label:c(e,t,"LIST:ACTION:delete"),href:e.genClientUrl("delete")}},viewEditDelete:function(e,t,n){var i=e.model,o=i.can&&(i.can.edit||i.can.manage),a=i.can&&(i.can.delete||i.can.manage);return function(s){var c=e.get(s._id),l=[u.actions.viewDetails(c,n)],d=r.isAllowedTo((t||c.getPrivilegePrefix())+":MANAGE");return(o&&o.call(i,c,"edit")||!o&&d)&&l.push(u.actions.edit(c,n)),(a&&a.call(i,c,"delete")||!a&&d)&&l.push(u.actions.delete(c,n)),l}}},u}),define("app/orders/views/OrderListView",["underscore","app/i18n","app/user","app/core/views/ListView","app/data/orderStatuses","app/orderStatuses/util/renderOrderStatusLabel","app/printers/views/PrinterPickerView","../util/openOrderPrint"],function(e,t,n,r,i,o,a,s){"use strict";return r.extend({className:"orders-list is-clickable",localTopics:{"orderStatuses.synced":"render"},remoteTopics:{"orders.synced":"refreshCollection","orders.updated.*":function(e){this.collection.get(e._id)&&this.refreshCollection()}},events:e.assign({"click .action-print":function(e){var t=this.$(e.currentTarget).closest("tr").attr("data-id");return e.listAction={view:this,tag:"orders"},a.listAction(e,function(e){s([t],e)}),!1}},r.prototype.events),serializeColumns:function(){return[{id:"_id",className:"is-min"},{id:"nc12",className:"is-min"},{id:"name",titleProperty:"description",className:"is-min",tdDecorator:function(t,n,r){var i=[];return r.etoCont?i.push('<span class="label label-default orders-tag">EK</span>'):"E"===r.priority&&i.push('<span class="label label-default orders-tag">E</span>'),(r.tags||[]).forEach(function(t){i.push('<span class="label label-default orders-tag" title="'+e.escape(t.label)+'">'+e.escape(t._id)+"</span>")}),r.description&&r.name!==r.description&&i.push('<i class="fa fa-question-circle"></i>'),i.push(r.name),i.join(" ")}},{id:"mrp",className:"is-min"},{id:"qtys",className:"is-min is-number"},{id:"sapCreatedAt",valueProperty:"sapCreatedAtText",className:"is-min"},{id:"scheduledStartDate",valueProperty:"scheduledStartDateText",className:"is-min"},{id:"delayReason",className:"is-min"},{id:"m4",className:"is-min"},{id:"statuses",valueProperty:"statusLabels"}]},serializeActions:function(){var e=this.collection,i=n.isAllowedTo("USER");return function(n){var o=[r.actions.viewDetails(e.get(n._id))];return i&&o.push({id:"print",icon:"print",label:t.bound("orders","LIST:ACTION:print"),href:"/orders/"+n._id+".html?print"}),o}},serializeRows:function(){var e={delayReasons:this.delayReasons};return this.collection.map(function(t){return t.serialize(e)})},onReset:function(){var e=this.$el.hasClass("hidden");this.render(),e!==this.$el.hasClass("hidden")&&this.model.trigger("panelToggle")}})}),define("app/orders/templates/operationList",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="panel panel-default orders-operations '),__append(operations.length?"":"hidden"),__append('">\n  <div class="panel-heading">'),__append(t("PANEL:TITLE:operations")),__append("</div>\n  "),operations.length?(__append('\n  <div class="list">\n    <div class="table-responsive">\n      <table class="table table-condensed table-hover table-bordered table-striped">\n        <thead>\n        <tr>\n          <th class="is-min">'),__append(t("PROPERTY:operations.no")),__append('\n          <th class="is-min">'),__append(t("PROPERTY:operations.workCenter")),__append('\n          <th class="is-min">'),__append(t("PROPERTY:operations.name")),__append("\n          "),showQty&&(__append('\n          <th class="is-min">'),__append(t("PROPERTY:operations.qty")),__append("\n          "),showQtyMax&&(__append('\n          <th class="is-min">'),__append(t("PROPERTY:operations.qtyMax")),__append("\n          ")),__append('\n          <th class="is-min">\n          ')),__append("\n          "),user.isAllowedTo("PROD_DATA:VIEW","ORDERS:VIEW")&&(__append('\n          <th class="is-min">'),__append(t("PROPERTY:operations.machineSetupTime")),__append('\n          <th class="is-min">'),__append(t("PROPERTY:operations.laborSetupTime")),__append('\n          <th class="is-min">'),__append(t("PROPERTY:operations.machineTime")),__append('\n          <th class="is-min">'),__append(t("PROPERTY:operations.laborTime")),__append("\n          ")),__append("\n          <th>\n        </tr>\n        </thead>\n        <tbody>\n        "),operations.forEach(function(e){__append('\n          <tr class="'),__append(e.no===highlighted?"info":""),__append('">\n            <td class="is-min is-number">'),__append(escapeFn(e.no||"-")),__append('\n            <td class="is-min">'),__append(escapeFn(e.workCenter||"-")),__append('\n            <td class="is-min">'),__append(escapeFn(e.name||"-")),__append("\n            "),showQty&&(__append('\n            <td class="is-min is-number">\n              '),showQtyMax?(__append("\n                "),__append(e.qtyDone.toLocaleString()),__append("/"),__append(e.qty.toLocaleString()),__append("\n              ")):(__append("\n                "),__append(e.qty.toLocaleString()),__append("\n              ")),__append("\n              "),showQtyMax&&(__append('\n            <td class="is-min is-number" data-action="changeQtyMax">\n              '),canChangeQtyMax?(__append('\n                <a href="#" data-operation-no="'),__append(e.no),__append('" data-qty="'),__append(e.qty),__append('" data-qty-max="'),__append(e.qtyMax),__append('">'),__append(escapeFn(e.qtyMax.toLocaleString())),__append("</a>\n              ")):(__append("\n                "),__append(e.qtyMax.toLocaleString()),__append("\n              ")),__append("\n            </td>\n            ")),__append('\n            <td class="is-min">'),__append(escapeFn(e.unit)),__append("</td>\n            ")),__append("\n            "),user.isAllowedTo("PROD_DATA:VIEW","ORDERS:VIEW")&&(__append("\n            "),timeProps.forEach(function(n){__append('\n            <td class="is-min is-number">\n              '),e.times.sap[n]&&e.times.sap[n]!==e.times.actual[n]?(__append('\n                <span title="'),__append(t("details:opTimes:sap")),__append('">'),__append(e.times.sap[n]),__append('</span> -> <span title="'),__append(t("details:opTimes:actual")),__append('">\n              ')):(__append('\n                <span title="'),__append(t("details:opTimes:sap")),__append('">\n              ')),__append("\n              "),__append(e.times.actual[n]||"-"),__append("</span>"),e.no===highlighted&&e.times.summed[n]&&e.times.summed[n]!==e.times.actual[n]&&(__append(' <span title="'),__append(t("details:opTimes:summed")),__append('">('),__append(e.times.summed[n]),__append(")</span>")),__append("\n            ")}),__append("\n            ")),__append("\n            <td>\n          </tr>\n        ")}),__append("\n        </tbody>\n      </table>\n    </div>\n  </div>\n  ")):(__append('\n  <div class="panel-body">\n    '),__append(t("OPERATIONS:NO_DATA")),__append("\n  </div>\n  ")),__append("\n</div>\n");return __output}}),define("app/orders/views/OperationListView",["underscore","jquery","app/user","app/viewport","app/core/View","app/core/util/decimalSeparator","app/orders/templates/operationList"],function(e,t,n,r,i,o,a){"use strict";var s={machineSetupTime:"sapMachineSetupTime",laborSetupTime:"sapLaborSetupTime",machineTime:"sapMachineTime",laborTime:"sapLaborTime"};function u(e,t){if(e[t]){e[t]=(Math.round(1e3*e[t])/1e3).toLocaleString();var n=e[t].split(o);for(n[1]||(n[1]="");n[1].length<3;)n[1]+="0";e[t]=n.join(o)}else e[t]=""}return i.extend({template:a,nlsDomain:"orders",events:{'click [data-action="changeQtyMax"]':function(n){var i=this,o=i.$(n.currentTarget).find("a").addClass("hidden");if(o.length){var a=o.closest("td").css({position:"relative"}),s=o[0].dataset.operationNo,u=+o[0].dataset.qty,c=+o[0].dataset.qtyMax,l=t('<input class="form-control" type="number" min="0" max="9999">').val(c).css({position:"absolute",top:"-1px",left:0,width:"100px",height:"36px"});return l.on("blur",d),l.on("keyup",function(t){27===t.keyCode?d():13===t.keyCode&&function(){var t=Math.min(9999,Math.max(0,parseInt(l.val(),10)))||0;t===u&&(t=0);if(t===c)return d();o.html('<i class="fa fa-spinner fa-spin"></i>'),l.remove(),r.msg.saving();var n=i.ajax({method:"POST",url:"/orders/"+i.model.id,data:JSON.stringify({operationNo:s,qtyMax:t})});n.fail(function(){r.msg.savingFailed(),o.text(c.toLocaleString()+" "+(i.model.get("unit")||"PCE")),d()}),n.done(function(){r.msg.saved(),d();var n={};n[s]=t,i.model.set("qtyMax",e.defaults(n,i.model.get("qtyMax")))})}()}),l.appendTo(a).select(),!1}function d(){l.remove(),o.removeClass("hidden")}}},initialize:function(){this.once("afterRender",function(){this.listenTo(this.model,"change:operations change:qtyMax change:qtyDone",this.onChange)})},getTemplateData:function(){return{operations:this.serializeOperations(),highlighted:this.options.highlighted,timeProps:Object.keys(s),showQty:!1!==this.options.showQty,showQtyMax:!!this.options.showQtyMax,canChangeQtyMax:!!this.options.showQtyMax&&n.isAllowedTo("ORDERS:MANAGE","FN:master")}},serializeOperations:function(){var t={};e.forEach(this.options.summedTimes,function(e,n){t[n]=(Math.round(1e3*e)/1e3).toLocaleString()});var n=this.model.get("qtyDone")||{byOperation:{}},r=this.model.get("qtyMax")||{};return this.model.get("operations").toJSON().map(function(e){return e.qty||(e.qty=0),e.unit||(e.unit="PCE"),e.qtyDone=(n.byOperation||{})[e.no]||0,e.qtyMax=r[e.no]||e.qty||0,e.qtyMaxUnit=e.qtyMax.toLocaleString()+" "+e.unit,e.times={actual:{},sap:{},summed:{}},Object.keys(s).forEach(function(n){var r=s[n];u(e,n),u(e,r),e.times.actual[n]=e[n],e.times.sap[n]=e[r],e.times.summed[n]=t[n]}),e}).sort(function(e,t){return e.no-t.no})},onChange:function(){var e=this.$el.hasClass("hidden"),t=0===this.model.get("operations").length;this.render(),e!==t&&this.model.trigger("panelToggle")}})}),define("app/orders/templates/documentList",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="panel panel-default orders-documents '),__append(documents.length?"":"hidden"),__append('">\n  <div class="panel-heading">'),__append(helpers.t("PANEL:TITLE:documents")),__append("</div>\n  "),documents.length?(__append('\n  <div class="list">\n    <div class="table-responsive">\n      <table class="table table-condensed table-hover table-bordered table-striped">\n        <thead>\n          <tr>\n            <th class="is-min">'),__append(helpers.t("PROPERTY:documents.item")),__append('\n            <th class="is-min">'),__append(helpers.t("PROPERTY:documents.nc15")),__append("\n            <th>"),__append(helpers.t("PROPERTY:documents.name")),__append("\n          </tr>\n        </thead>\n        <tbody>\n          "),documents.forEach(function(e){__append('\n          <tr data-nc15="'),__append(e.nc15),__append('">\n            <td class="is-min is-number">'),__append(escapeFn(e.item||"")),__append('\n            <td class="is-min is-number">\n              '),canView?(__append('\n              <a href="/orderDocuments/'),__append(e.nc15),__append("?order="),__append(orderNo),__append('">'),__append(escapeFn(e.nc15)),__append("</a>\n              ")):(__append("\n              "),__append(escapeFn(e.nc15)),__append("\n              ")),__append("\n            <td>"),__append(escapeFn(e.name)),__append("\n          </tr>\n          ")}),__append("\n        </tbody>\n      </table>\n    </div>\n  </div>\n  ")):(__append('\n  <div class="panel-body">\n    '),__append(helpers.t("DOCUMENTS:NO_DATA")),__append("\n  </div>\n  ")),__append("\n</div>\n");return __output}}),define("app/orders/views/DocumentListView",["app/user","app/core/View","app/data/loadedModules","app/orders/templates/documentList"],function(e,t,n,r){"use strict";var i=null,o=null;return t.extend({template:r,events:{"click a":function(e){e.preventDefault();var t=e.currentTarget;return!t.dataset.checking&&(e.currentTarget.textContent.trim()===i&&o&&!o.closed?(o.focus(),!1):t.dataset.checked?(this.openDocumentWindow(t),!1):(this.tryOpenDocument(t),!1))}},initialize:function(){this.once("afterRender",function(){this.listenTo(this.model,"change:documents",this.onChange)})},getTemplateData:function(){return{orderNo:this.model.id,documents:this.model.get("documents").toJSON(),canView:!window.IS_EMBEDDED&&n.isLoaded("orderDocuments")&&e.isAllowedTo("LOCAL","DOCUMENTS:VIEW")}},tryOpenDocument:function(e){var t=this;e.dataset.checking=1,t.ajax({method:"HEAD",url:e.href}).fail(function(){e.parentElement.textContent=e.textContent}).done(function(){t.openDocumentWindow(e)}).always(function(){e.dataset.checking="",e.dataset.checked=1})},openDocumentWindow:function(e){var t=this,n=!1,r=e.textContent.trim(),a=window.screen,s=.8*a.availWidth,u=.9*a.availHeight,c=Math.floor((a.availWidth-s)/2),l="resizable,scrollbars,location=no,top="+Math.floor((a.availHeight-u)/2)+",left="+c+",width="+Math.floor(s)+",height="+Math.floor(u),d="WMES_ORDER_DOCUMENT_PREVIEW",p=window.open(e.href,d,l);p&&(i=r,o=p,clearInterval(t.timers[d]),t.timers[d]=setInterval(function(){p.closed?(i=null,o=null,t.trigger("documentClosed",r),clearInterval(t.timers[d])):!n&&p.ready&&(n=!0,t.trigger("documentOpened",r,p),p.focus())},250))},openBestDocument:function(e,t){var n=this,r={};n.model.get("bom").forEach(function(i){var o=i.get("item");o===e&&t[o]&&Object.keys(t[o]).forEach(function(e){if(!r[e]){r[e]=0;var i=n.model.get("documents").get(e),a=(i&&i.get("name")||"").replace(/[^A-Za-z0-9]+/g,"").toUpperCase();-1!==a.indexOf("ASSEMBL")?r[e]+=10:-1!==a.indexOf("ASS")&&(r[e]+=5),-1!==a.indexOf("QAP")&&(r[e]-=10),-1!==a.indexOf("PALLET")&&(r[e]-=20)}r[e]+=1,t[o][e].forEach(function(t){t.s===o&&(r[e]+=15)})})});var i=0,o=null;Object.keys(r).forEach(function(e){var t=r[e];t>i&&(i=t,o=e)}),n.$('tr[data-nc15="'+o+'"]').find("a").click()},onChange:function(){this.$el.hasClass("hidden")!==(0===this.model.get("documents").length)&&(this.render(),this.model.trigger("panelToggle"))}})}),define("app/orders/templates/componentList",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="panel panel-default orders-bom '),__append(empty?"hidden":""),__append('">\n  <div class="panel-heading">'),__append(t("PANEL:TITLE:bom"+(paint?":paint":""))),__append("</div>\n  "),_.isEmpty(bom)?(__append('\n  <div class="panel-body">\n    '),__append(t("BOM:NO_DATA")),__append("\n  </div>\n  ")):(__append('\n  <div class="list '),__append(colored?"is-colored":""),__append('">\n    <div class="table-responsive">\n      <table class="table table-condensed table-hover table-bordered table-striped">\n        <thead>\n          <tr>\n            '),bom.length&&bom[0].orderNo&&(__append('\n            <th class="is-min">'),__append(t("PROPERTY:bom.orderNo")),__append('\n            <th class="is-min">'),__append(t("PROPERTY:bom.mrp")),__append("\n            ")),__append('\n            <th class="is-min">'),__append(t("PROPERTY:bom.item")),__append('\n            <th class="is-min">'),__append(t("PROPERTY:bom.nc12")),__append('\n            <th class="is-min">'),__append(t("PROPERTY:bom.name")),__append('\n            <th class="is-min" colspan="3">'),__append(t("PROPERTY:bom.qty")),__append('\n            <th class="is-min">'),__append(t("PROPERTY:bom.distStrategy")),__append('\n            <th class="is-min">'),__append(t("PROPERTY:bom.unloadingPoint")),__append('\n            <th class="is-min">'),__append(t("PROPERTY:bom.supplyArea")),__append("\n            <th>\n          </tr>\n        </thead>\n        <tbody>\n          "),_.forEach(bom,function(e){__append('\n          <tr class="'),__append(e.rowClassName||""),__append('">\n            '),e.orderNo&&(__append('\n            <td class="is-min is-number"><a href="#orders/'),__append(e.orderNo),__append('">'),__append(e.orderNo),__append('</a>\n            <td class="is-min">'),__append(escapeFn(e.mrp)),__append("\n            ")),__append("\n            "),e.releasedAt?__append('\n            <td class="is-min text-center"><i class="fa fa-exchange"></i>\n            '):(__append('\n            <td class="is-min is-number orders-bom-item">'),__append(e.item||""),__append("\n            ")),__append('\n            <td class="is-min is-number">\n              '),e.nc12&&(__append("\n              "),linkPfep?(__append('\n              <a class="orders-bom-pfep">'),__append(e.nc12),__append("</a>\n              ")):(__append("\n              "),__append(e.nc12),__append("\n              ")),__append("\n              ")),__append('\n            <td class="is-min">'),__append(escapeFn(e.name)),__append("\n            "),e.releasedAt?(__append('\n            <td colspan="7">Dopuszczony '),__append(e.releasedAt),__append(" przez "),__append(e.releasedBy),__append("</td>\n            ")):(__append('\n            <td class="is-min is-number" style="padding-right: 0; border-right: 0">'),__append(e.qty?e.qty[0]:""),__append('\n            <td class="is-min is-number" style="text-align: left; padding-left: 0; border-left: 0; border-right: 0">'),__append(e.qty?e.qty[1]:""),__append('</td>\n            <td class="is-min" style="border-left: 0">'),__append(e.unit||""),__append('\n            <td class="is-min">'),__append(escapeFn(e.distStrategy||"")),__append('\n            <td class="is-min">'),__append(escapeFn(e.unloadingPoint||"")),__append('\n            <td class="is-min">'),__append(escapeFn(e.supplyArea||"")),__append("\n            <td>\n            ")),__append("\n          </tr>\n          ")}),__append("\n        </tbody>\n      </table>\n    </div>\n  </div>\n  ")),__append("\n</div>\n");return __output}}),define("app/orders/views/ComponentListView",["app/user","app/viewport","app/time","app/core/View","app/core/util/decimalSeparator","app/core/templates/userInfo","app/orders/templates/componentList"],function(e,t,n,r,i,o,a){"use strict";return r.extend({template:a,events:{"click .orders-bom-item":function(e){if(this.options.linkDocuments)return this.item=e.currentTarget.textContent.trim(),null===this.contents?this.loadContents():null===this.document?this.trigger("bestDocumentRequested",this.item,this.contents):this.mark(),!1},"mousedown .orders-bom-pfep":function(e){e.preventDefault()},"mouseup .orders-bom-pfep":function(e){t.msg.loading();var n=this,r=n.model.get("nc12"),i=n.ajax({url:"/pfep/entries?select(_id)&nc12=string:"+r});return i.fail(function(){t.msg.loadingFailed()}),i.done(function(i){var o;if(t.msg.loaded(),1===i.totalCount)o="#pfep/entries/"+i.collection[0]._id;else{if(!(i.totalCount>1)){var a=n.$(e.target).closest("td");return void a.html(a.text())}o="#pfep/entries?sort(-rid)&limit(15)&nc12=string:"+r}1===e.button?window.open(o):window.location.href=o}),!1}},initialize:function(){this.item=null,this.document=null,this.window=null,this.contents=null,this.once("afterRender",function(){this.listenTo(this.model,"change:bom change:compRels",this.onChange)})},getTemplateData:function(){var t=[],r={},a={},s=!1;return(this.model.get("compRels")||[]).forEach(function(e){a[e.newCode]||(a[e.newCode]=[]),e.oldComponents.forEach(function(t){r[t._id]||(r[t._id]=[]),r[t._id].push(e),a[e.newCode].push({compRel:e,oldComponent:t})})}),this.model.get("bom").forEach(function(e){if(e.get("nc12")){var u=(e=e.toJSON()).qty.toString().split(".");e.qty=[u[0].toString(),u[1]?i+u[1]:""],t.push(e);var c=r[e.nc12];if(c)return s=!0,e.rowClassName="danger",void c.forEach(function(r){t.push({rowClassName:"success",orderNo:e.orderNo,mrp:e.mrp,nc12:r.newCode,name:r.newName,releasedAt:n.format(r.releasedAt,"L HH:mm"),releasedBy:o({userInfo:r.releasedBy,noIp:!0})})});var l=a[e.nc12];l&&(s=!0,e.rowClassName="success",l.forEach(function(r){var i=r.compRel;t.push({rowClassName:"danger",orderNo:e.orderNo,mrp:e.mrp,nc12:r.oldComponent._id,name:r.oldComponent.name,releasedAt:n.format(i.releasedAt,"L HH:mm"),releasedBy:o({userInfo:i.releasedBy,noIp:!0})})}))}}),{colored:s,empty:0===t.length,paint:!!this.options.paint,linkPfep:!!this.options.linkPfep&&e.isAllowedTo("PFEP:VIEW"),bom:t}},afterRender:function(){this.updateItems()},onChange:function(){this.$el.hasClass("hidden")!==(0===this.model.get("bom").length)&&(this.render(),this.model.trigger("panelToggle"))},markDocument:function(e,t){this.document=e,this.window=t,null===this.contents?this.loadContents():this.updateItems()},unmarkDocument:function(){this.document=null,this.window=null,this.updateItems()},loadContents:function(){var e=this;e.loadContentsReq||(e.loadContentsReq=e.ajax({url:"/orders/"+e.model.id+"/documentContents"}),e.loadContentsReq.always(function(){e.loadContentsReq=null}),e.loadContentsReq.done(function(t){e.contents=t,null===e.document?e.trigger("bestDocumentRequested",e.item,t):e.updateItems()}))},updateItems:function(){var e=this;e.contents&&(e.$(".orders-bom-item").each(function(){var t=this.textContent.trim();e.contents[t]&&e.contents[t][e.document]&&this.nextElementSibling.textContent.trim().length&&(t="<a>"+t+"</a>"),this.innerHTML=t}),this.mark())},mark:function(){var e=this.window;if(e&&e.showMarks){e&&e.focus();var t=this.item,n=this.document,r=this.contents;t&&n&&r&&r[t]&&e.showMarks(r[t][n]||[])}}})}),define("app/core/views/FormView",["underscore","form2js","js2form","app/viewport","../Model","../View"],function(e,t,n,r,i,o){"use strict";return o.extend({events:{submit:"submitForm"},$errorMessage:null,updateOnChange:!0,initialize:function(){this.$errorMessage=null,this.model||(this.model=new i),this.listenTo(this.model,"change",function(){this.isRendered()&&this.updateOnChange&&n(this.el,this.serializeToForm(!0),".",null,!1,!1)})},destroy:function(){this.hideErrorMessage()},serialize:function(){var t=this.options;return e.assign(o.prototype.serialize.apply(this,arguments),{editMode:!!t.editMode,formMethod:t.formMethod,formAction:t.formAction,formActionText:t.formActionText,panelTitleText:t.panelTitleText,model:this.serializeModel()})},afterRender:function(){n(this.el,this.serializeToForm(!1))},serializeModel:function(){return this.model.toJSON()},serializeToForm:function(e){return this.model.serializeForm?this.model.serializeForm():this.model.toJSON()},serializeForm:function(e){return e},getFormData:function(){return this.serializeForm(t(this.el))},submitForm:function(){if(this.hideErrorMessage(),!this.el.checkValidity())return!1;var e=this.getFormData();if(!this.checkValidity(e))return this.handleInvalidity(e),!1;var t=this.$(".form-actions .btn:not(.cancel)").attr("disabled",!0);return this.submitRequest(t,e),!1},submitRequest:function(e,t){var n=this.request(t);n.done(this.handleSuccess.bind(this)),n.fail(this.handleFailure.bind(this)),n.always(function(){e.attr("disabled",!1)})},request:function(e){return this.promised(this.model.save(e,this.getSaveOptions()))},checkValidity:function(e){return!!e},handleInvalidity:function(){},handleSuccess:function(){"function"==typeof this.options.done?this.options.done(!0):this.broker&&this.broker.publish("router.navigate",{url:this.model.genClientUrl(),trigger:!0})},handleFailure:function(e){this.showErrorMessage(this.getFailureText(e))},getFailureText:function(){return this.options.failureText},showErrorMessage:function(e){return this.hideErrorMessage(),this.$errorMessage=r.msg.show({type:"error",time:3e3,text:e}),!1},hideErrorMessage:function(){null!==this.$errorMessage&&(r.msg.hide(this.$errorMessage),this.$errorMessage=null)},getSaveOptions:function(){return{wait:!0}}})}),define("app/core/util/idAndLabel",["underscore"],function(e){"use strict";return function(t,n){var r={id:t.id,text:t.getLabel()};return n&&e.assign(r,n),r}}),define("app/orders/templates/commentForm",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<form class="orders-commentForm">\n  <div class="form-group" style="position: relative">\n    <label for="'),__append(idPrefix),__append('-source" class="control-label">'),__append(helpers.t("commentForm:source")),__append("</label>\n    <br>\n    "),["other","ps","wh"].forEach(function(e){__append('\n    <label class="radio-inline">\n      <input type="radio" name="source" value="'),__append(e),__append('" required> '),__append(helpers.t("commentForm:source:"+e)),__append("\n    </label>\n    ")}),__append('\n  </div>\n  <div class="row">\n    <div class="col-lg-4 form-group has-required-select2">\n      <label for="'),__append(idPrefix),__append('-delayReason" class="control-label">'),__append(helpers.t("commentForm:delayReason")),__append('</label>\n      <input id="'),__append(idPrefix),__append('-delayReason" type="text" autocomplete="new-password" name="delayReason">\n    </div>\n    <div class="col-lg-2 form-group has-required-select2">\n      <label for="'),__append(idPrefix),__append('-delayComponent" class="control-label">'),__append(helpers.t("commentForm:delayComponent")),__append('</label>\n      <input id="'),__append(idPrefix),__append('-delayComponent" class="form-control" type="text" autocomplete="new-password" name="delayComponent" required maxlength="12" pattern="^([A-Za-z0-9]{7}|[0-9]{12})$">\n    </div>\n    <div class="col-lg-6 form-group">\n      <label class="control-label">'),__append(helpers.t("PROPERTY:m4")),__append("</label>\n      <br>\n      "),["man","machine","material","method"].forEach(function(e){__append('\n      <label class="radio-inline">\n        <input type="radio" name="m4" value="'),__append(e),__append('"> '),__append(helpers.t("m4:"+e)),__append("\n      </label>\n      ")}),__append('\n    </div>\n  </div>\n  <div class="form-group">\n    <label for="'),__append(idPrefix),__append('-comment" class="control-label is-required">'),__append(helpers.t("commentForm:comment")),__append('</label>\n    <textarea id="'),__append(idPrefix),__append('-comment" class="form-control" name="comment" rows="3" required></textarea>\n  </div>\n  <button id="'),__append(idPrefix),__append('-submit-comment" type="submit" class="btn btn-primary"><i class="fa fa-comment"></i><span>'),__append(helpers.t("commentForm:submit:comment")),__append('</span></button>\n  <button id="'),__append(idPrefix),__append('-submit-edit" type="submit" class="btn btn-primary hidden"><i class="fa fa-edit"></i><span>'),__append(helpers.t("commentForm:submit:edit")),__append("</span></button>\n</form>\n");return __output}}),define("app/orders/views/OrderCommentFormView",["underscore","app/user","app/core/views/FormView","app/core/util/idAndLabel","app/orders/templates/commentForm"],function(e,t,n,r,i){"use strict";return n.extend({template:i,updateOnChange:!1,events:e.assign({"change #-delayReason":"handleDelayReason",'change input[name="m4"]':"handleDelayReason"},n.prototype.events),afterRender:function(){n.prototype.afterRender.call(this),this.$id("delayReason").select2({allowClear:!0,placeholder:" ",data:this.delayReasons.filter(function(e){return e.get("active")}).map(r)});var e=t.isAllowedTo("PAINT_SHOP:PAINTER"),i=t.isAllowedTo("PLANNING:WHMAN"),o=e&&i||!e&&!i?"other":i?"wh":"ps";this.$('input[name="source"][value="'+o+'"]').prop("checked",!0),this.$id("comment").val(""),this.handleDelayReason()},request:function(e){return e.delayReason?e.delayComponent=(e.delayComponent||"").toUpperCase():(e.delayReason="",e.delayComponent="",e.m4=""),this.ajax({type:"POST",url:"/orders/"+this.model.id,data:JSON.stringify(e)})},handleSuccess:function(){this.$id("comment").val("").focus()},handleDelayReason:function(e){var t=this.$id("delayReason").val(),n=this.$id('input[name="m4"]:checked').val()||"",r=this.delayReasons.get(t),i=!!r,o=t!==(this.model.get("delayReason")||""),a=n!==(this.model.get("m4")||""),s=o||a,u=i&&!!r.get("requireComponent");if(this.$('input[name="m4"]').prop("required",i).closest(".form-group").find(".control-label").toggleClass("is-required",i),this.$id("delayComponent").prop("disabled",!u).closest(".form-group").find(".control-label").toggleClass("is-required",u),e&&"delayReason"===e.target.name)if(r){var c=r.get("drm"),l=Object.keys(c).filter(function(e){return!!c[e]}).shift()||"man";this.$('input[name="m4"][value="'+l+'"]').prop("checked",!0)}else this.$('input[name="m4"]:checked').prop("checked",!1);this.$id("submit-comment").toggleClass("hidden",s),this.$id("submit-edit").toggleClass("hidden",!s),this.$id("comment").prop("required",!s).prev().toggleClass("is-required",!s)}})}),define("app/orders/templates/notesForm",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<form class="orders-notes-form">\n  <div class="form-group">\n    <div class="btn-group">\n      '),["docs","ps"].forEach(function(e){__append('\n      <button type="button" class="btn btn-default" data-target="'),__append(e),__append('">\n        '),__append(t("notes:target:"+e)),__append('\n        (<span class="orders-notes-count">0</span>)\n      </button>\n      ')}),__append('\n    </div>\n  </div>\n  <table class="table table-bordered table-condensed">\n    <thead>\n    <tr>\n      <th class="is-min">'),__append(t("core","#")),__append("</th>\n      <th>"),__append(t("notes:edit:text")),__append('</th>\n      <th class="is-min">'),__append(t("notes:edit:priority")),__append('</th>\n      <th class="is-min">'),__append(t("core","LIST:COLUMN:actions")),__append('</th>\n    </tr>\n    </thead>\n    <tbody id="'),__append(idPrefix),__append('-notes" class="orders-notes">\n    <tr>\n      <td class="is-min"></td>\n      <td><textarea name="text" class="form-control" rows="2"></textarea></td>\n      <td class="is-min">\n        <select name="priority" class="form-control orders-notes-priority">\n          '),["default","info","warning","success","danger"].forEach(function(e){__append('\n          <option value="'),__append(e),__append('"></option>\n          ')}),__append('\n        </select>\n      </td>\n      <td class="actions">\n        <div class="actions-group">\n          <button data-action="up" class="btn btn-default" type="button"><i class="fa fa-arrow-up"></i></button>\n          <button data-action="down" class="btn btn-default" type="button"><i class="fa fa-arrow-down"></i></button>\n        </div>\n      </td>\n    </tr>\n    </tbody>\n  </table>\n  <div class="form-group" style="display: flex">\n    <button id="'),__append(idPrefix),__append('-add" class="btn btn-default" type="button">\n      <i class="fa fa-plus"></i><span>'),__append(t("notes:edit:add")),__append('</span>\n    </button>\n    <button id="'),__append(idPrefix),__append('-clear" class="btn btn-default" type="button" style="margin-left: auto">\n      <i class="fa fa-eraser"></i><span>'),__append(t("notes:edit:clear")),__append('</span>\n    </button>\n  </div>\n  <div class="form-actions">\n    <button id="'),__append(idPrefix),__append('-submit" class="btn btn-primary">'),__append(t("notes:edit:submit")),__append('</button>\n    <button class="btn btn-link cancel" type="button">'),__append(t("core","ACTION_FORM:BUTTON:cancel")),__append("</button>\n  </div>\n</form>\n");return __output}}),define("app/orders/views/NotesEditFormView",["app/viewport","app/core/views/FormView","app/orders/templates/notesForm"],function(e,t,n){"use strict";return t.extend({template:n,updateOnChange:!1,events:Object.assign({'click .btn[data-action="up"]':function(e){var t=this.$(e.currentTarget).closest("tr"),n=t.prev();n.length?t.insertBefore(n):t.appendTo(this.$id("notes")),this.recountNotes(),e.currentTarget.focus()},'click .btn[data-action="down"]':function(e){var t=this.$(e.currentTarget).closest("tr"),n=t.next();n.length?t.insertAfter(n):t.prependTo(this.$id("notes")),this.recountNotes(),e.currentTarget.focus()},"click #-add":function(){this.addNote({}),this.serializeNotes()},"click #-clear":function(){this.$id("notes").html(""),this.addNote({}),this.serializeNotes(),this.recountTargets()},"click .btn[data-target]":function(e){var t=e.currentTarget.dataset.target;t!==this.target&&(this.serializeNotes(),this.recountTargets(),this.target=t,this.updateTarget())},"change textarea":function(){this.serializeNotes(),this.recountTargets()},"change select":function(e){e.currentTarget.dataset.value=e.currentTarget.value,this.serializeNotes()}},t.prototype.events),afterRender:function(){t.prototype.afterRender.apply(this,arguments),this.$template=this.$id("notes").children().first().detach(),this.notes||this.cacheNotes(),this.recountTargets(),this.updateTarget()},updateTarget:function(){this.target||(this.target=Object.keys(this.notes)[0]||"docs"),this.$(".active[data-target]").removeClass("active"),this.$('.btn[data-target="'+this.target+'"]').addClass("active");var e=this.notes[this.target];e||(e=this.notes[this.target]=[]),this.$id("notes").html(""),e.forEach(this.addNote,this),""!==e[e.length-1]&&this.addNote({})},cacheNotes:function(){var e=this;e.notes={},(e.model.get("notes")||[]).forEach(function(t){e.notes[t.target]||(e.notes[t.target]=[]),e.notes[t.target].push(t)})},addNote:function(e){var t=this.$id("notes"),n=this.$template.clone(),r=n.find("td"),i=r[1].firstElementChild,o=r[2].firstElementChild;r[0].textContent=t[0].childElementCount+1+".",i.value=e.text||"",o.value=e.priority||"warning",o.dataset.value=o.value,t.append(n)},recountNotes:function(){this.$("tbody > tr > td:first-child").each(function(e){this.textContent=e+1+"."})},recountTargets:function(){var e=this;e.$(".btn[data-target]").each(function(){var t=e.notes[this.dataset.target]||[];this.querySelector(".orders-notes-count").textContent=t.length})},serializeNotes:function(){var e=this,t={},n=[];e.$id("notes").find("tr").each(function(){var r=this.querySelector("textarea").value.trim(),i=r.replace(/[^0-9a-zA-Z]+/,"");i&&!t[i]&&(n.push({target:e.target,priority:this.querySelector("select").value,text:r}),t[i]=!0)}),e.notes[e.target]=n},serializeForm:function(){var e=this;e.serializeNotes();var t=[];return Object.keys(e.notes).forEach(function(n){e.notes[n].forEach(function(e){t.push(e)})}),{notes:t}},request:function(e){return this.ajax({method:"POST",url:this.model.url(),data:JSON.stringify(e)})},handleSuccess:function(){e.closeDialog()}})}),define("app/orders/templates/noteList",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="panel panel-default is-with-actions orders-notes">\n  <div class="panel-heading">\n    <div class="panel-heading-title">'),__append(t("PANEL:TITLE:notes")),__append('</div>\n    <div class="panel-heading-actions">\n      '),user.isAllowedTo("ORDERS:MANAGE")&&(__append('\n      <button id="'),__append(idPrefix),__append('-edit" class="btn btn-default" type="button" title="'),__append(t("notes:edit:button")),__append('"><i class="fa fa-edit"></i></button>\n      ')),__append('\n    </div>\n  </div>\n  <div class="panel-body">\n    '),_.isEmpty(targets)?(__append("\n    "),__append(t("NOTES:NO_DATA")),__append("\n    ")):(__append("\n    "),targets.forEach(function(e){__append("\n    <h5>"),__append(t("notes:target:"+e._id)),__append('</h5>\n    <ol style="list-style: none; margin: 0; padding: 0">\n      '),e.notes.forEach(function(e){__append('\n      <li class="text-lines text-'),__append(e.priority),__append('"> '),__append(escapeFn(e.text)),__append("</li>\n      ")}),__append("\n    </ol>\n    ")}),__append("\n    ")),__append("\n  </div>\n</div>\n");return __output}}),define("app/orders/views/NoteListView",["app/viewport","app/core/View","./NotesEditFormView","app/orders/templates/noteList"],function(e,t,n,r){"use strict";return t.extend({template:r,remoteTopics:{"orders.productNodes.**":"render"},events:{"click #-edit":function(){var t=new n({model:this.model});e.showDialog(t,this.t("notes:edit:title"))}},initialize:function(){this.once("afterRender",function(){this.listenTo(this.model,"change:notes",this.render)})},getTemplateData:function(){var e=[];return(this.model.get("notes")||[]).forEach(function(t){0!==e.length&&e[e.length-1]._id===t.target||e.push({_id:t.target,notes:[]}),e[e.length-1].notes.push(t)}),{targets:e}}})}),define("app/orders/templates/change",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<tbody class="'),__append(change.user.id?"is-user-change":"is-system-change"),__append('" data-index="'),__append(i),__append('">\n  '),change.values.length&&(__append('\n  <tr>\n    <td class="is-min orders-changes-time" rowspan="'),__append(change.rowSpan),__append('">\n      '),canEditTime&&change.timeEditable?(__append('\n      <a class="link orders-changes-time-editable">'),__append(change.timeText),__append("</a>\n      ")):(__append("\n      "),__append(change.timeText),__append("\n      ")),__append('\n    </td>\n    <td class="is-min orders-changes-user" rowspan="'),__append(change.rowSpan),__append('">'),__append(change.userText),__append('</td>\n    <td class="is-min orders-changes-property">'),__append(renderPropertyLabel(change.values[0],i)),__append('</td>\n    <td class="is-min">'),__append(renderValueChange(change.values[0],i,"oldValue")),__append("</td>\n    <td>"),__append(renderValueChange(change.values[0],i,"newValue")),__append("</td>\n  </tr>\n  ")),__append("\n  "),change.values.forEach(function(e,t){__append("\n  "),0!==t&&(__append('\n  <tr class="orders-changes-noTimeAndUser">\n    <td class="is-min orders-changes-property">'),__append(renderPropertyLabel(e,i)),__append('</td>\n    <td class="is-min">'),__append(renderValueChange(e,i,"oldValue")),__append("</td>\n    <td>"),__append(renderValueChange(e,i,"newValue")),__append("</td>\n  </tr>\n  "))}),__append("\n  "),""!==change.comment&&(__append('\n  <tr class="'),__append(change.values.length?"orders-changes-noTimeAndUser":""),__append('">\n    '),change.values.length||(__append('\n    <td class="is-min orders-changes-time">'),__append(change.timeText),__append('</td>\n    <td class="is-min orders-changes-user">'),__append(change.userText),__append("</td>\n    ")),__append('\n    <td class="orders-changes-comment" colspan="3">'),__append(change.comment),__append("</td>\n  </tr>\n  ")),__append("\n</tbody>\n");return __output}}),define("app/orders/templates/changes",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="'),__append(showPanel?"panel panel-default":""),__append(" orders-changes "),__append(noSystemChanges?"orders-no-system-changes":""),__append('">\n  '),showPanel&&(__append('\n  <div class="panel-heading is-with-actions">\n    '),__append(t("PANEL:TITLE:changes")),__append('\n    <div class="panel-actions">\n      <button id="'),__append(id("toggleSystemChanges")),__append('" class="btn btn-default '),__append(noSystemChanges?"active":""),__append('" type="button">'),__append(t("changes:toggleSystemChanges")),__append("</button>\n    </div>\n  </div>\n  ")),__append('\n  <div class="list">\n    <div class="table-responsive">\n      <table id="'),__append(id("table")),__append('" class="table table-condensed table-bordered table-hover">\n        <thead>\n          <tr>\n            <th class="is-min">'),__append(t("changes:time")),__append('\n            <th class="is-min">'),__append(t("changes:user")),__append('\n            <th class="is-min">'),__append(t("changes:property")),__append('\n            <th class="is-min">'),__append(t("changes:oldValue")),__append("\n            <th>"),__append(t("changes:newValue")),__append("\n          </tr>\n        </thead>\n        "),canComment&&(__append('\n        <tfoot>\n          <tr>\n            <td id="'),__append(id("commentForm")),__append('" class="orders-commentForm-container" colspan="5"></td>\n          </tr>\n        </tfoot>\n        ')),__append("\n        "),changes.length||(__append('\n        <tbody id="'),__append(id("empty")),__append('">\n          <tr>\n            <td colspan="5">'),__append(t("changes:NO_DATA")),__append("</td>\n          </tr>\n        </tbody>\n        ")),__append("\n        "),changes.forEach(function(e,t){__append("\n        "),__append(renderChange(e,t)),__append("\n        ")}),__append("\n      </table>\n    </div>\n  </div>\n</div>\n");return __output}}),define("app/orders/views/OrderChangesView",["underscore","jquery","app/time","app/i18n","app/viewport","app/user","app/data/orderStatuses","app/data/localStorage","app/core/View","./OrderCommentFormView","./OperationListView","./DocumentListView","./ComponentListView","./NoteListView","../Order","../OrderCollection","../OperationCollection","../DocumentCollection","../ComponentCollection","app/orders/templates/change","app/orders/templates/changes","app/orderStatuses/util/renderOrderStatusLabel","app/core/templates/userInfo"],function(e,t,n,r,i,o,a,s,u,c,l,d,p,f,h,m,g,y,b,v,w,_,A){"use strict";return u.extend({template:w,events:{"click .orders-changes-operations":"toggleOperations","click .orders-changes-documents":"toggleDocuments","click .orders-changes-bom":"toggleComponents","click .orders-changes-notes":"toggleNotes","mouseover .orders-changes-noTimeAndUser":function(e){var t=this.$(e.target).closest("tbody").children().first();t.find(".orders-changes-time").addClass("is-hovered"),t.find(".orders-changes-user").addClass("is-hovered")},"mouseout .orders-changes-noTimeAndUser":function(){this.$(".is-hovered").removeClass("is-hovered")},"click #-toggleSystemChanges":function(){var e=this.$id("toggleSystemChanges").toggleClass("active").hasClass("active");s.setItem("WMES_NO_SYSTEM_CHANGES",e?"1":"0"),this.$el.toggleClass("orders-no-system-changes",e)},"click .orders-changes-time-editable":function(e){this.$(e.target).closest("form").length||(this.hideTimeEditor(),this.showTimeEditor(e.currentTarget))}},initialize:function(){this.renderChange=this.renderChange.bind(this),this.renderPropertyLabel=this.renderPropertyLabel.bind(this),this.renderValueChange=this.renderValueChange.bind(this),this.$lastToggle=null,this.toggleViews={operations:null,documents:null,bom:null,notes:null},this.setView("#-commentForm",new c({model:this.model,delayReasons:this.delayReasons})),this.once("afterRender",function(){this.listenTo(this.model,"push:change",this.onChangePush),this.listenTo(this.model,"change:changes",this.render)}),t(window).on("keydown."+this.idPrefix,this.onKeyDown.bind(this))},destroy:function(){null!==this.$lastToggle&&(this.$lastToggle.click(),this.$lastToggle=null)},getTemplateData:function(){return{showPanel:!1!==this.options.showPanel,changes:this.serializeChanges(),canComment:m.can.comment(),noSystemChanges:"1"===s.getItem("WMES_NO_SYSTEM_CHANGES"),renderChange:this.renderChange}},serializeChanges:function(){return(this.model.get("changes")||[]).map(this.serializeChange,this)},serializeChange:function(t){return(t=e.clone(t)).user||(t.user={id:null,label:"System"}),t.timeEditable=!1,t.timeText=n.format(t.time,"L<br>LTS"),t.userText=A({userInfo:t.user}),t.values=Object.keys(t.oldValues||{}).map(function(e){return t.timeEditable=t.timeEditable||"statuses"===e,{property:e,oldValue:t.oldValues[e],newValue:t.newValues[e]}}),t.comment=e.isEmpty(t.comment)?"":e.escape(t.comment.trim()),"ps"===t.source?t.comment='<i class="fa fa-paint-brush"></i> '+t.comment:"wh"===t.source&&(t.comment='<i class="fa fa-truck"></i> '+t.comment),t.rowSpan=t.values.length+(""===t.comment?0:1),t},renderChange:function(e,t){return this.renderPartialHtml(v,{canEditTime:m.can.editStatusChange(),renderPropertyLabel:this.renderPropertyLabel,renderValueChange:this.renderValueChange,change:e,i:t})},renderPropertyLabel:function(e){switch(e.property){case"qtyMax":return this.t("changes:qtyMax",{operationNo:e.newValue.operationNo});case"change":var t=e.newValue.oldIndex+1;return t!==e.newValue.newIndex+1&&(t+="->"+(e.newValue.newIndex+1)),this.t("changes:change",{no:t});default:return this.t("PROPERTY:"+e.property)}},renderValueChange:function(t,i,o){var s=t[o];if(null==s||0===s.length)return"-";switch(t.property){case"operations":return'<a class="orders-changes-operations" data-i="'+i+'" data-property="'+o+'">'+this.t("changes:operations",{count:s.length})+"</a>";case"documents":return'<a class="orders-changes-documents" data-i="'+i+'" data-property="'+o+'">'+this.t("changes:documents",{count:s.length})+"</a>";case"bom":return'<a class="orders-changes-bom" data-i="'+i+'" data-property="'+o+'">'+this.t("changes:bom",{count:s.length})+"</a>";case"notes":return'<a class="orders-changes-notes" data-i="'+i+'" data-property="'+o+'">'+this.t("changes:notes",{count:s.length})+"</a>";case"tags":return s.map(function(e){return e._id}).join(", ");case"statuses":return a.findAndFill(s).map(_).join(" ");case"delayReason":var u=this.delayReasons.get(s);return u?e.escape(u.getLabel()):s;case"startDate":case"finishDate":case"scheduledStartDate":case"scheduledFinishDate":return n.format(s,"LL");case"sapCreatedAt":return n.format(s,"LLL");case"whTime":return n.format(s,"HH:mm");case"whStatus":case"m4":case"psStatus":case"drillStatus":return this.t(t.property+":"+s);case"qtyMax":return s.value.toLocaleString();case"change":return n.format(s.time,"L LTS");case"etoCont":return r("core","BOOL:"+s);default:return e.escape(String(s))}},hideLastToggle:function(t){if(null===this.$lastToggle)return!0;if(!t||this.$lastToggle[0]!==t.target)return this.$lastToggle.click(),!0;this.$lastToggle=null;var n=this.toggleViews;return e.forEach(n,function(e,t){null!==e&&(e.remove(),n[t]=null)}),!1},toggleOperations:function(e){this.hideLastToggle(e)&&this.showLastToggle(e,g,l,"operations")},toggleDocuments:function(e){this.hideLastToggle(e)&&this.showLastToggle(e,y,d,"documents")},toggleComponents:function(e){this.hideLastToggle(e)&&this.showLastToggle(e,b,p,"bom")},toggleNotes:function(e){this.hideLastToggle(e)&&this.showLastToggle(e,null,f,"notes")},showLastToggle:function(e,t,n,r){var i=this.$(e.target),o=i.attr("data-i"),a=this.model.get("changes")[o];if(a){var s=a[i.attr("data-property")+"s"][r],u=t?new t(s):s,c={};c[r]=u;var l=new n({model:new h(c)}),d=i.closest("tr")[0].offsetTop+i.closest("td").outerHeight()+(!1!==this.options.showPanel?this.$(".panel-heading").first().outerHeight():0);l.render(),l.$el.css("top",d+"px"),this.$el.append(l.$el);var p=i.closest("td")[0].getBoundingClientRect(),f=l.$el.outerWidth(),m=Math.round(p.left-f/2);m<0&&(m=0),l.$el.css("left",m+"px"),this.$lastToggle=i,this.toggleViews[r]=l}},onChangePush:function(e){var r=this,i=r.$id("table"),o=r.model.get("changes"),a=e.newValues.change;if(r.$id("empty").remove(),a){o[a.oldIndex].time=new Date(a.time).toISOString();var s=r.$('tbody[data-index="'+a.oldIndex+'"]').find(".orders-changes-time");if(s.find("a").length&&(s=s.find("a")),s.html(n.format(a.time,"L<br>LTS")),a.oldIndex!==a.newIndex){o.sort(function(e,t){return Date.parse(e.time)-Date.parse(t.time)}),i.find("tbody").remove();var u="",c=-1;return o.forEach(function(t,n){t===e&&(c=n),u+=r.renderChange(r.serializeChange(t),n)}),void i.append(u).find("tbody").eq(c).find("td").addClass("highlight")}}t(r.renderChange(r.serializeChange(e),o.length-1)).appendTo(i).find("td").addClass("highlight")},onKeyDown:function(e){"Escape"===e.key&&(this.hideTimeEditor(),this.hideLastToggle())},hideTimeEditor:function(){this.$(".orders-changes-time-editor").remove()},showTimeEditor:function(e){for(var r=this,o="YYYY-MM-DD HH:mm:ss",a=r.$(e),s=+a.closest("tbody")[0].dataset.index,u=r.model.get("changes"),c=u[s],l=null,d=null,p=s-1;p>=0;--p)if(u[p].oldValues.statuses){l=u[p];break}for(var f=s+1;f<u.length;++f)if(u[f].oldValues.statuses){d=u[f];break}var h=n.getMoment(c.time),m=n.getMoment(l?l.time:r.model.get("importTs")),g=n.getMoment(d?d.time:r.model.get("updatedAt")),y=t('<form class="orders-changes-time-editor"></form>'),b=t('<input type="text" class="form-control" required>').val(h.format(o)),v=t('<button class="btn btn-primary"><i class="fa fa-save"></i></button>');function w(e,t){b[0].setCustomValidity(r.t("changes:timeEditor:error:"+e,t)),setTimeout(function(){v.click()})}b.on("input",function(){b[0].setCustomValidity("")}),y.on("submit",function(e){e.preventDefault();var t=n.getMoment(b.val(),o);if(t.valueOf()===h.valueOf())return r.hideTimeEditor();if(!t.isValid())return w("format");if(t.valueOf()<=m.valueOf())return w("min",{time:m.format(o)});if(t.valueOf()>=g.valueOf())return w("max",{time:g.format(o)});i.msg.saving();var a=r.ajax({method:"POST",url:"/orders/"+r.model.id,data:JSON.stringify({change:{index:s,time:t.valueOf()}})});a.fail(function(){i.msg.savingFailed()}),a.done(function(){i.msg.saved(),r.hideTimeEditor()})}),y.append(b).append(v).appendTo(a),b.focus()}})}),define("app/orders/templates/eto",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="panel panel-default orders-eto">\n  <div class="panel-heading is-with-actions">\n    '),__append(t("orders","PANEL:TITLE:eto")),__append('\n    <div class="panel-actions">\n      <button id="'),__append(idPrefix),__append('-external" class="btn btn-default" type="button" data-action="external"><i class="fa fa-external-link"></i></button>\n      <button id="'),__append(idPrefix),__append('-toggle" class="btn btn-default" type="button" data-action="toggle"><i class="fa fa-chevron-down"></i></button>\n    </div>\n  </div>\n  <div class="panel-body">\n    <p><i class="fa fa-spinner fa-spin"></i></p>\n  </div>\n</div>\n');return __output}}),define("app/orders/views/EtoView",["jquery","app/i18n","app/core/View","app/orders/templates/eto"],function(e,t,n,r){"use strict";return n.extend({template:r,remoteTopics:{"orderDocuments.eto.synced":function(e){e.nc12===this.model.get("nc12")&&this.tryLoadDocument()}},events:{"click #-external":function(){window.open(this.$("iframe").prop("src"),"ETO_"+this.model.id)},"click #-toggle":function(){var e=this.$("iframe");if(e.length){var t=!!e.data("expanded"),n=e[0].contentWindow.document.body,r=n.parentNode.getClientRects()[0].height;n.style.overflowY="scroll",t&&(r=250),e.stop(!0,!1).animate({height:r}).data("expanded",!t),this.$id("toggle").find(".fa").removeClass("fa-chevron-up fa-chevron-down").addClass("fa-chevron-"+(t?"down":"up"))}}},afterRender:function(){this.tryLoadDocument()},tryLoadDocument:function(){var e=this,t="/orderDocuments/ETO?order="+e.model.id+"&header=0";this.$el.hasClass("orders-eto-loaded")?this.$("iframe")[0].contentWindow.location.reload():e.ajax({method:"HEAD",url:t}).fail(function(t){t.status>=500?e.$el.removeClass("panel-default").addClass("panel-danger").find(".fa-spin").removeClass("fa-spin"):(e.$(".panel-body").text(e.t("ETO:NO_DATA")),e.$el.addClass("hidden"),e.model.trigger("panelToggle"))}).done(function(){e.loadDocument(t)})},loadDocument:function(t){var n=e("<iframe></iframe>").prop("src",t);this.$el.addClass("orders-eto-loaded"),this.$(".panel-body").empty().append(n),this.$el.removeClass("hidden"),this.model.trigger("panelToggle")}})}),define("app/wmes-fap-entries/views/ListView",["underscore","jquery","app/i18n","app/core/views/ListView"],function(e,t,n,r){"use strict";return r.extend({className:function(){var e=["fap-entries-list","is-clickable"];return this.options.orderDetails||e.push("is-colored"),e.join(" ")},remoteTopics:function(){var e={},t=this.collection.getTopicPrefix();return t&&!1!==this.options.autoRefresh&&(e[t+".added"]="refreshCollection",e[t+".updated.*"]="onModelUpdated",e[t+".deleted"]="onModelDeleted"),e},localTopics:{"fap.entries.seen":function(e){var t=this,n=0;e.seenEntries.forEach(function(e){n+=t.$('.fap-is-unseen[data-id="'+e+'"]').removeClass("fap-is-unseen").length}),n&&t.refreshCollection()}},events:e.assign({"click .is-filter":function(e){this.trigger("showFilter",e.currentTarget.dataset.columnId)},"click .action-seen":function(e){var t=this.$(e.currentTarget).addClass("disabled"),n=this.collection.get(t.closest("tr")[0].dataset.id);n&&n.multiChange({})}},r.prototype.events),serializeColumns:function(){var e=this.options.orderDetails?"":"is-filter",t=[{id:"rid",className:"is-min is-number",thClassName:e}];return this.options.orderDetails||t.push({id:"orderNo",className:"is-min",tdClassName:"text-mono",thClassName:e},{id:"nc12",className:"is-min",tdClassName:"text-mono",thClassName:e},{id:"productName",className:"is-min",thClassName:e,label:this.t("LIST:COLUMN:name")},{id:"mrp",className:"is-min",thClassName:e},{id:"subdivisionType",className:"is-min",thClassName:e}),t.push({id:"category",className:"is-min",thClassName:e},{id:"createdAt",className:"is-min",thClassName:e},{id:"divisions",className:"is-min",thClassName:e},{id:"lines",className:"is-min"},{id:"problem",className:"is-min",thClassName:e},{id:"level",valueProperty:"levelIndicator",className:"is-min",thClassName:e},"-"),t},serializeActions:function(){var e=this,t=e.collection;return this.options.orderDetails?null:function(n){var i=t.get(n._id),o=[];return o.push({id:"seen",icon:"eye",label:e.t("markAsSeen:listAction"),className:n.observer.changes.any?"":"disabled"}),o.push(r.actions.viewDetails(i)),i.canDelete()&&o.push(r.actions.delete(i)),o}},afterRender:function(){r.prototype.afterRender.apply(this,arguments),this.$("tbody").popover({container:this.el,placement:"auto left",selector:"td[data-id]",trigger:"hover",html:!0,content:function(){var e=this.firstElementChild;if(e&&"SPAN"===e.tagName)return e.scrollWidth>t(this).width()?this.textContent.trim():void 0},template:function(e){return t(e).addClass("fap-list-popover")}})},onModelUpdated:function(e){(e.change.comment||Object.keys(e.change.data).length)&&this.refreshCollection(e)}})}),define("app/orders/templates/fapEntryList",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="panel panel-default orders-fap '),__append(empty?"hidden":""),__append('">\n  <div class="panel-heading">'),__append(t("orders","PANEL:TITLE:fap")),__append("</div>\n</div>\n");return __output}}),define("app/orders/views/FapEntryListView",["app/core/View","app/core/util/embedded","app/wmes-fap-entries/views/ListView","app/orders/templates/fapEntryList"],function(e,t,n,r){"use strict";return e.extend({template:r,initialize:function(){this.insertView(".orders-fap",new n({collection:this.collection,orderDetails:!0,autoRefresh:!t.isEnabled()})),this.listenTo(this.collection,"sync",function(){this.$el.toggleClass("hidden",0===this.collection.length)})},getTemplateData:function(){return{empty:0===this.collection.length}}})}),define("app/prodDowntimes/views/ProdDowntimeListView",["underscore","app/i18n","app/user","app/time","app/core/views/ListView","../util/decorateProdDowntime"],function(e,t,n,r,i,o){"use strict";return i.extend({className:"is-colored is-clickable prodDowntimes-list",remoteTopics:function(){var e={};return!1!==this.options.autoRefresh&&(this.options.orderId?(e["prodDowntimes.created.*"]="onCreated",e["prodDowntimes.updated.*"]="onUpdated",e["prodDowntimes.deleted.*"]="onDeleted"):(e["prodDowntimes.created.*"]="refreshIfMatches",e["prodDowntimes.updated.*"]="refreshIfMatches",e["prodDowntimes.deleted.*"]="refreshIfMatches")),e},initialize:function(){i.prototype.initialize.apply(this,arguments),this.options.orderId&&this.once("afterRender",function(){this.listenTo(this.collection,"change",this.render)})},columns:function(){return[{id:"rid",className:"is-min"},{id:"orderMrp",tdClassName:"is-min",label:t.bound("prodDowntimes","PROPERTY:mrpControllers")},{id:"prodFlow",className:"is-overflow w275",titleProperty:"prodFlowText"},{id:"aor",className:"is-overflow w275"},{id:"prodLine",className:"is-overflow w125"},"reason",this.options.shiftColumn?{id:"shift",tdClassName:"is-min",valueProperty:"prodShiftText"}:null,{id:"startedAt",tdClassName:"is-min"},{id:"duration",tdClassName:"is-min"}]},serializeRows:function(){var e=this,t=e.options.simple?{}:{changesCount:!0,maxReasonChanges:this.settings.getValue("maxReasonChanges")||Number.MAX_VALUE,maxAorChanges:this.settings.getValue("maxAorChanges")||Number.MAX_VALUE,productFamily:!0},r=n.isAllowedTo("PROD_DATA:VIEW");return this.collection.map(function(n){var i=o(n,t);return r&&e.options.shiftColumn&&i.prodShiftOrder&&(i.startedAt='<a href="#prodShiftOrders/'+(i.prodShiftOrder._id||i.prodShiftOrder)+'">'+i.startedAt+"</a>"),i})},serializeActions:function(){if(this.options.simple)return null;var e=this.collection,n=this.settings.getCanChangeStatusOptions(),r=t("prodDowntimes","changesCount:rejected");return function(o){var a=e.get(o._id),s=[i.actions.viewDetails(a)];if(a.canCorroborate()){var u=a.canChangeStatus(n),c=t("prodDowntimes","LIST:ACTION:"+(u?"corroborate":"comment")),l=null,d=o.changesCount;d.rejected&&(l='<span title="'+r+'" class="label label-'+(d.rejected>=n.maxRejectedChanges?"danger":"warning")+'">'+d.rejected+"</span>"),s.unshift({id:"corroborate",icon:u?"gavel":"comment",label:c,href:a.genClientUrl()+"?corroborate=1",text:l})}return a.isEditable()&&n.canManageProdData&&s.push(i.actions.edit(a),i.actions.delete(a)),s}},refreshIfMatches:function(e){this.collection.hasOrMatches(e)&&this.refreshCollection(e)},afterRender:function(){i.prototype.afterRender.call(this),this.scheduleDurationsUpdate()},scheduleDurationsUpdate:function(){clearTimeout(this.timers.updateDurations),this.timers.updateDurations=setTimeout(this.updateDurations.bind(this),15e3)},updateDurations:function(){var e=this,t=Date.now();this.$('td[data-id="duration"]').each(function(){var n=e.collection.get(this.parentNode.dataset.id);n.get("finishedAt")||(this.textContent=n.getDurationString(t))}),this.scheduleDurationsUpdate()},onCreated:function(e){e.orderId===this.options.orderId&&this.refreshCollection()},onUpdated:function(e){var t=this.collection.get(e._id);t&&t.set(e)},onDeleted:function(e){this.collection.get(e._id)&&this.refreshCollection()}})}),define("app/orders/templates/downtimeList",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div class="panel panel-default is-with-actions orders-downtimes '),__append(empty?"hidden":""),__append('">\n  <div class="panel-heading">\n    <div class="panel-heading-title">'),__append(t("orders","PANEL:TITLE:downtimes")),__append('</div>\n    <div class="panel-heading-actions">\n      <div id="'),__append(idPrefix),__append('-totals" style="margin-right: 12px"></div>\n    </div>\n  </div>\n</div>\n');return __output}}),define("app/nls/prodDowntimes",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r))in o?o[n]:o.other},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMB:browse":function(e){return"Downtimes"},"BREADCRUMB:settings":function(e){return"Settings"},"PAGE_ACTION:settings":function(e){return"Settings"},"PAGE_ACTION:alerts":function(e){return"Alerts"},"PAGE_ACTION:comment":function(e){return"Comment downtime"},"PAGE_ACTION:corroborate":function(e){return"Corroborate downtime"},"PANEL:TITLE:addForm":function(e){return"Downtime add form"},"PANEL:TITLE:editForm":function(e){return"Downtime edit form"},"PANEL:TITLE:history":function(e){return"Downtime's history"},"filter:submit":function(e){return"Filter"},"filter:tooltip:in":function(e){return"Checked: all selected\nUnchecked: all but the selected"},"filter:placeholder:aor":function(e){return"Any area of responsibility"},"filter:placeholder:reason":function(e){return"Any downtime reason"},"filter:placeholder:orgUnit":function(e){return"Any org unit"},"filter:mrp":function(e){return"Order MRP"},"LIST:ACTION:comment":function(e){return"Comment downtime"},"LIST:ACTION:corroborate":function(e){return"Corroborate downtime"},"LIST:COLUMN:orderMrp":function(e){return"MRP"},"LIST:COLUMN:prodLine":function(e){return"Line/<br>Machine"},"PROPERTY:rid":function(e){return"ID"},"PROPERTY:orgUnit":function(e){return"Org Unit"},"PROPERTY:division":function(e){return"Division"},"PROPERTY:subdivision":function(e){return"Subdivision"},"PROPERTY:mrpControllers":function(e){return"MRP"},"PROPERTY:prodFlow":function(e){return"Production flow"},"PROPERTY:workCenter":function(e){return"WorkCenter"},"PROPERTY:prodLine":function(e){return"Line/Machine"},"PROPERTY:aor":function(e){return"Area of responsibility"},"PROPERTY:reason":function(e){return"Downtime reason"},"PROPERTY:reasonComment":function(e){return"Reason comment"},"PROPERTY:decisionComment":function(e){return"Decision comment"},"PROPERTY:order":function(e){return"Order"},"PROPERTY:orderId":function(e){return"Order ID"},"PROPERTY:operation":function(e){return"Operation"},"PROPERTY:startedAt":function(e){return"Started at"},"PROPERTY:finishedAt":function(e){return"Finished at"},"PROPERTY:status":function(e){return"Status"},"PROPERTY:status:alert":function(e){return"Active alert"},"PROPERTY:status:undecided":function(e){return"Undecided"},"PROPERTY:status:confirmed":function(e){return"Confirmed"},"PROPERTY:status:rejected":function(e){return"Rejected"},"PROPERTY:date":function(e){return"Date"},"PROPERTY:shift":function(e){return"Shift"},"PROPERTY:master":function(e){return"Master"},"PROPERTY:leader":function(e){return"Leader"},"PROPERTY:operator":function(e){return"Operator"},"PROPERTY:operators":function(e){return"Operators"},"PROPERTY:creator":function(e){return"Creator"},"PROPERTY:corroborator":function(e){return"Corroborator"},"PROPERTY:corroboratedAt":function(e){return"Corroborated at"},"PROPERTY:duration":function(e){return"Duration"},"PROPERTY:pressWorksheet":function(e){return"Worksheet"},"FORM:ACTION:add":function(e){return"Add downtime"},"FORM:ACTION:edit":function(e){return"Edit downtime"},"FORM:ERROR:startedAt":function(e){return"Started at must be between the shift's time boundries!"},"FORM:ERROR:finishedAt":function(e){return"Finished at must be between the shift's time boundries!"},"FORM:ERROR:times":function(e){return"Finished at must be after Started at!"},"FORM:ERROR:INVALID_CHANGES":function(e){return"Cannot edit the downtime: no valid changes were detected."},"FORM:ERROR:INPUT":function(e){return"Invalid input data!"},"FORM:ERROR:OVERLAPPING_DOWNTIMES":function(e){return"Downtime overlaps with other downtimes!"},"FORM:ERROR:NOT_EDITABLE":function(e){return"Downtime isn't finished yet!"},"shift+date":function(e){return t.v(e,"date")+", "+t.v(e,"shift")+" shift"},"NO_DATA:order":function(e){return"<em>no order</em>"},"NO_DATA:finishedAt":function(e){return"<em>unfinished</em>"},"NO_DATA:corroboration":function(e){return"Downtime wasn't corroborated yet."},"corroborate:status":function(e){return"New status"},"corroborate:reason":function(e){return"New reason"},"corroborate:aor":function(e){return"New area of responsibility"},"corroborate:comment":function(e){return"Comment"},"corroborate:submit:null":function(e){return"Comment"},"corroborate:submit:undecided":function(e){return"Assign a new AOR"},"corroborate:submit:confirmed":function(e){return"Confirm"},"corroborate:submit:rejected":function(e){return"Reject"},"corroborate:noChanges":function(e){return"No changes detected."},"corroborate:failure":function(e){return"Failed to corroborate the downtime."},"settings:tab:default":function(e){return"General"},"settings:autoConfirmHours":function(e){return"Time to automatic confirmation [h]"},"settings:maxAorChanges":function(e){return"Maximum number of Area of Responsibility changes"},"settings:maxReasonChanges":function(e){return"Maximum number of Downtime reason changes"},"settings:maxRejectedChanges":function(e){return"Maximum number of downtime rejections"},"changesCount:reason":function(e){return"Number of Downtime reason changes"},"changesCount:aor":function(e){return"Number of Area of Responsibility changes"},"changesCount:rejected":function(e){return"Number of rejections"},"changeRequest:delete:messageText":function(e){return"You're in a change request creation mode. The <em>Downtime</em> will be deleted only after it has been approved by the person responsible.<br><br>Are you sure you want to create the downtime deletion request?"},"changeRequest:delete:formActionText":function(e){return"Create deletion request"},"changeRequest:commentLabel":function(e){return"Change request comment"},"changeRequest:warning:add":function(e){return"You're in a change request creation mode. The new <em>Downtime</em> will be created only after it has been approved by the person responsible."},"changeRequest:warning:edit":function(e){return"You're in a change request creation mode. The <em>Downtime</em> will be updated only after the change has been approved by the person responsible."},"changeRequest:msg:success:add":function(e){return"Downtime creation request was created successfully."},"changeRequest:msg:success:edit":function(e){return"Downtime modification request was created successfully."},"changeRequest:msg:success:delete":function(e){return"Downtime deletion request was created successfully."},"changeRequest:msg:failure:add":function(e){return"Failed to create a new downtime creation request."},"changeRequest:msg:failure:edit":function(e){return"Failed to create a new downtime modification request."},"changeRequest:msg:failure:delete":function(e){return"Failed to create a new downtime deletion request."},"comments:alerts:start":function(e){return"Alert started: "+t.v(e,"alertName")+". Sent "+t.p(e,"recipientCount",0,"en",{one:"a notification to 1 user",other:"notifications to "+t.v(e,"recipientCount")+" users"})+": "+t.v(e,"recipientList")},"comments:alerts:start:0":function(e){return"Alert started: "+t.v(e,"alertName")+"."},"comments:alerts:notify":function(e){return"Sent "+t.p(e,"recipientCount",0,"en",{one:"a notification to 1 user",other:"notifications to "+t.v(e,"recipientCount")+" users"})+" due to an alert "+t.v(e,"alertName")+": "+t.v(e,"recipientList")},"comments:alerts:finish":function(e){return"Alert finished: "+t.v(e,"alertName")},"comments:spigot:initial":function(e){return"Scanned a valid Spigot component: "+t.v(e,"name")+" ("+t.v(e,"nc12")+")"},"comments:spigot:final":function(e){return"Confirmed a valid Spigot component: "+t.v(e,"name")+" ("+t.v(e,"nc12")+")"},"details:orderMrp":function(e){return"(in SAP: "+t.v(e,"mrp")+")"}},pl:!0}}),define("app/nls/pl/prodDowntimes",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r))in o?o[n]:o.other},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMB:browse":function(e){return"Przestoje"},"BREADCRUMB:settings":function(e){return"Ustawienia"},"PAGE_ACTION:settings":function(e){return"Ustawienia"},"PAGE_ACTION:alerts":function(e){return"Alarmy"},"PAGE_ACTION:comment":function(e){return"Komentuj przestj"},"PAGE_ACTION:corroborate":function(e){return"Potwierd przestj"},"PANEL:TITLE:addForm":function(e){return"Formularz dodawania przestoju"},"PANEL:TITLE:editForm":function(e){return"Formularz edycji przestoju"},"PANEL:TITLE:history":function(e){return"Historia przestoju"},"filter:submit":function(e){return"Filtruj"},"filter:tooltip:in":function(e){return"Zaznaczony: wszystkie wybrane\nNiezaznaczony: wszystkie oprcz wybranych"},"filter:placeholder:aor":function(e){return"Dowolny obszar odpowiedzialnoci"},"filter:placeholder:reason":function(e){return"Dowolny powd przestoju"},"filter:placeholder:orgUnit":function(e){return"Dowolna jednostka organizacyjna"},"filter:mrp":function(e){return"Kontroler MRP zlecenia"},"LIST:ACTION:comment":function(e){return"Komentuj przestj"},"LIST:ACTION:corroborate":function(e){return"Potwierd przestj"},"LIST:COLUMN:orderMrp":function(e){return"MRP"},"LIST:COLUMN:prodLine":function(e){return"Linia/<br>Maszyna"},"PROPERTY:rid":function(e){return"ID"},"PROPERTY:orgUnit":function(e){return"Jednostka organizacyjna"},"PROPERTY:division":function(e){return"Wydzia"},"PROPERTY:subdivision":function(e){return"Dzia"},"PROPERTY:mrpControllers":function(e){return"MRP"},"PROPERTY:prodFlow":function(e){return"Przepyw"},"PROPERTY:workCenter":function(e){return"WorkCenter"},"PROPERTY:prodLine":function(e){return"Linia/Maszyna"},"PROPERTY:aor":function(e){return"Obszar odpowiedzialnoci"},"PROPERTY:reason":function(e){return"Powd przestoju"},"PROPERTY:reasonComment":function(e){return"Komentarz powodu"},"PROPERTY:decisionComment":function(e){return"Komentarz potwierdzenia"},"PROPERTY:order":function(e){return"Zlecenie"},"PROPERTY:orderId":function(e){return"Zlecenie"},"PROPERTY:operation":function(e){return"Operacja"},"PROPERTY:startedAt":function(e){return"Czas rozpoczcia"},"PROPERTY:finishedAt":function(e){return"Czas zakoczenia"},"PROPERTY:status":function(e){return"Status"},"PROPERTY:status:alert":function(e){return"Aktywny alarm"},"PROPERTY:status:undecided":function(e){return"Niepotwierdzony"},"PROPERTY:status:confirmed":function(e){return"Potwierdzony"},"PROPERTY:status:rejected":function(e){return"Odrzucony"},"PROPERTY:date":function(e){return"Data"},"PROPERTY:shift":function(e){return"Zmiana"},"PROPERTY:master":function(e){return"Mistrz"},"PROPERTY:leader":function(e){return"Lider"},"PROPERTY:operator":function(e){return"Operator"},"PROPERTY:operators":function(e){return"Operatorzy"},"PROPERTY:creator":function(e){return"Uytkownik rozpoczynajcy"},"PROPERTY:corroborator":function(e){return"Uytkownik potwierdzajcy"},"PROPERTY:corroboratedAt":function(e){return"Czas potwierdzenia"},"PROPERTY:duration":function(e){return"Czas trwania"},"PROPERTY:pressWorksheet":function(e){return"Karta pracy"},"FORM:ACTION:add":function(e){return"Dodaj przestj"},"FORM:ACTION:edit":function(e){return"Edytuj przestj"},"FORM:ERROR:startedAt":function(e){return"Czas rozpoczcia musi mieci si w ramach Zmiany produkcyjnej!"},"FORM:ERROR:finishedAt":function(e){return"Czas zakoczenia musi mieci si w ramach Zmiany produkcyjnej!"},"FORM:ERROR:times":function(e){return"Czas zakoczenia musi by po Czasie rozpoczcia!"},"FORM:ERROR:INVALID_CHANGES":function(e){return"Nie mona zmodyfikowa przestoju: nie wykryto adnych poprawnych zmian."},"FORM:ERROR:INPUT":function(e){return"Nieprawidowe dane wejciowe!"},"FORM:ERROR:OVERLAPPING_DOWNTIMES":function(e){return"Przestj pokrywa si z innymi przestojami!"},"FORM:ERROR:NOT_EDITABLE":function(e){return"Przestj jeszcze si nie skoczy!"},"shift+date":function(e){return t.v(e,"date")+", "+t.v(e,"shift")+" zmiana"},"NO_DATA:order":function(e){return"<em>brak zlecenia</em>"},"NO_DATA:finishedAt":function(e){return"<em>nie ukoczony</em>"},"corroborate:status":function(e){return"Nowy status"},"corroborate:reason":function(e){return"Nowy powd przestoju"},"corroborate:aor":function(e){return"Nowy obszar odpowiedzialnoci"},"corroborate:comment":function(e){return"Komentarz"},"corroborate:submit:null":function(e){return"Komentuj"},"corroborate:submit:undecided":function(e){return"Przypisz nowy obszar"},"corroborate:submit:confirmed":function(e){return"Potwierd"},"corroborate:submit:rejected":function(e){return"Odrzu"},"corroborate:noChanges":function(e){return"Nie wykryto adnych zmian."},"corroborate:failure":function(e){return"Nie udao si potwierdzi przestoju."},"settings:tab:default":function(e){return"Podstawowe"},"settings:autoConfirmHours":function(e){return"Czas do automatycznego potwierdzenia [h]"},"settings:maxAorChanges":function(e){return"Maksymalna liczba zmian obszaru odpowiedzialnoci"},"settings:maxReasonChanges":function(e){return"Maksymalna liczba zmian powodu przestoju"},"settings:maxRejectedChanges":function(e){return"Maksymalna liczba odrzuce przestoju"},"changesCount:reason":function(e){return"Liczba zmian powodu przestoju"},"changesCount:aor":function(e){return"Liczba zmian obszaru odpowiedzialnego"},"changesCount:rejected":function(e){return"Liczba odrzuce przestoju"},"changeRequest:delete:messageText":function(e){return"Jeste w trybie tworzenia dania zmiany danych produkcyjnych. <em>Przestj</em> zostanie usunity dopiero po zaakceptowaniu operacji przez osob odpowiedzialn.<br><br>Czy na pewno chcesz utworzy danie usunicia wybranego przestoju?"},"changeRequest:delete:formActionText":function(e){return"Utwrz danie usunicia"},"changeRequest:commentLabel":function(e){return"Komentarz do dania zmiany"},"changeRequest:warning:add":function(e){return"Jeste w trybie tworzenia dania zmiany danych produkcyjnych. Nowy <em>przestj</em> zostanie utworzony dopiero po zaakceptowaniu go przez osob odpowiedzialn."},"changeRequest:warning:edit":function(e){return"Jeste w trybie tworzenia dania zmiany danych produkcyjnych. <em>Przestj</em> zostanie zaktualizowany dopiero po zaakceptowaniu dokonanych zmian przez osob odpowiedzialn."},"changeRequest:msg:success:add":function(e){return"danie dodania nowego przestoju zostao utworzone."},"changeRequest:msg:success:edit":function(e){return"danie edycji przestoju zostao utworzone."},"changeRequest:msg:success:delete":function(e){return"danie usunicia przestoju zostao utworzone."},"changeRequest:msg:failure:add":function(e){return"Nie udao si stworzy dania dodania nowego przestoju."},"changeRequest:msg:failure:edit":function(e){return"Nie udao si stworzy dania edycji przestoju."},"changeRequest:msg:failure:delete":function(e){return"Nie udao si stworzy dania usunicia przestoju."},"comments:alerts:start":function(e){return"Rozpoczto alarm: "+t.v(e,"alertName")+". Wysano "+t.p(e,"recipientCount",0,"pl",{one:"powiadomienie do 1 uytkownika",other:"powiadomienia do "+t.v(e,"recipientCount")+" uytkownikw"})+": "+t.v(e,"recipientList")},"comments:alerts:start:0":function(e){return"Rozpoczto alarm: "+t.v(e,"alertName")+"."},"comments:alerts:notify":function(e){return"Wysano "+t.p(e,"recipientCount",0,"pl",{one:"powiadomienie do 1 uytkownika",other:"powiadomienia do "+t.v(e,"recipientCount")+" uytkownikw"})+" z powodu alarmu "+t.v(e,"alertName")+": "+t.v(e,"recipientList")},"comments:alerts:finish":function(e){return"Zakoczono alarm: "+t.v(e,"alertName")},"comments:spigot:initial":function(e){return"Zeskanowano prawidowy komponent Spigot: "+t.v(e,"name")+" ("+t.v(e,"nc12")+")"},"comments:spigot:final":function(e){return"Potwierdzono prawidowy komponent Spigot: "+t.v(e,"name")+" ("+t.v(e,"nc12")+")"},"details:orderMrp":function(e){return"(w SAP: "+t.v(e,"mrp")+")"}}}),define("app/orders/views/DowntimeListView",["app/time","app/core/View","app/core/util/embedded","app/prodDowntimes/views/ProdDowntimeListView","app/orders/templates/downtimeList","i18n!app/nls/prodDowntimes"],function(e,t,n,r,i){"use strict";return t.extend({template:i,initialize:function(){this.insertView(".orders-downtimes",new r({collection:this.collection,simple:!0,shiftColumn:!0,autoRefresh:!n.isEnabled(),orderId:this.model.id})),this.once("afterRender",function(){this.listenTo(this.collection,"reset change",this.onChange)})},getTemplateData:function(){return{empty:0===this.collection.length}},afterRender:function(){this.updateTotals()},updateTotals:function(){var t=[],n={},r=Date.now();this.collection.forEach(function(e){var t=e.get("prodLine"),i=Date.parse(e.get("startedAt")),o=(Date.parse(e.get("finishedAt"))||r)-i;n[t]||(n[t]=0),n[t]+=o}),Object.keys(n).forEach(function(r){t.push(r+": "+e.toString(n[r]/1e3))}),this.$id("totals").text(t.join(" | "))},onChange:function(){this.updateTotals(),this.$el.toggleClass("hidden",0===this.collection.length),this.model.trigger("panelToggle")}})}),define("app/orders/templates/detailsJumpList",["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return void 0==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){void 0!==e&&null!==e&&(__output+=e)}with(locals||{})__append('<div id="'),__append(idPrefix),__append('-jumpList" class="list-group orders-jumpList">\n  '),sections.forEach(function(e){__append('\n  <a href="javascript:void(0)" class="list-group-item" data-section="'),__append(e.id),__append('" data-hotkey="'),__append(e.hotkey),__append('">\n    '),__append(e.label),__append("\n    "),e.hotkey&&(__append("\n    <kbd>"),__append(e.hotkey),__append("</kbd>\n    ")),__append("\n  </a>\n  ")}),__append("\n</div>\n");return __output}}),define("app/nls/wmes-fap-entries",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r))in o?o[n]:o.other},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMB:base":function(e){return"FAP"},"BREADCRUMB:browse":function(e){return"FAP"},"BREADCRUMB:settings":function(e){return"Settings"},"BREADCRUMB:history":function(e){return"Changelog"},"BREADCRUMB:reports:count":function(e){return"Count report"},"PAGE_ACTION:settings":function(e){return"Settings"},"PAGE_ACTION:jump:title":function(e){return"Jump to entry by ID"},"PAGE_ACTION:jump:placeholder":function(e){return"Entry ID"},"PAGE_ACTION:start":function(e){return"Start entry"},"PAGE_ACTION:finish":function(e){return"Finish entry"},"PAGE_ACTION:restart":function(e){return"Restart entry"},"PAGE_ACTION:markAsSeen":function(e){return"Mark as seen"},"PAGE_ACTION:subscribe":function(e){return"Turn on notifications"},"PAGE_ACTION:unsubscribe":function(e){return"Turn off notifications"},"PAGE_ACTION:history":function(e){return"Changelog"},"markAsSeen:listAction":function(e){return"Mark as seen"},"markAsSeen:noComment":function(e){return"Changes without comments"},"markAsSeen:finished":function(e){return"Finished"},"markAsSeen:dayOld":function(e){return"Older than a day"},"markAsSeen:weekOld":function(e){return"Older than a week"},"markAsSeen:all":function(e){return"All"},"PANEL:TITLE:changes":function(e){return"History"},"LIST:COLUMN:name":function(e){return"Product/component name"},"PROPERTY:rid":function(e){return"ID"},"PROPERTY:createdAt":function(e){return"Created at"},"PROPERTY:owner":function(e){return"Owner"},"PROPERTY:status":function(e){return"Status"},"PROPERTY:level":function(e){return"Level"},"PROPERTY:order":function(e){return"Order/12NC"},"PROPERTY:orderNo":function(e){return"Order no"},"PROPERTY:nc12":function(e){return"12NC"},"PROPERTY:mrp":function(e){return"MRP"},"PROPERTY:productName":function(e){return"Product name"},"PROPERTY:category":function(e){return"Category"},"PROPERTY:subCategory":function(e){return"Subcategory"},"PROPERTY:problem":function(e){return"Problem"},"PROPERTY:divisions":function(e){return"Division"},"PROPERTY:lines":function(e){return"Line"},"PROPERTY:qty":function(e){return"Quantity"},"PROPERTY:qtyTodo":function(e){return"Quantity todo"},"PROPERTY:qtyDone":function(e){return"Quantity done"},"PROPERTY:attachments":function(e){return"Attachments"},"PROPERTY:observers":function(e){return"Participants"},"PROPERTY:assessment":function(e){return"Assessment"},"PROPERTY:analysisNeed":function(e){return"Analysis needed"},"PROPERTY:analysisDone":function(e){return"Analysis done"},"PROPERTY:mainAnalyzer":function(e){return"Person responsible"},"PROPERTY:analyzers":function(e){return"People involved in the analysis"},"PROPERTY:why5":function(e){return"Problem cause"},"PROPERTY:why":function(e){return"Why?"},"PROPERTY:solution":function(e){return"Solution"},"PROPERTY:solutionSteps":function(e){return"Solution steps"},"PROPERTY:limit":function(e){return"Limit"},"PROPERTY:search":function(e){return"Text"},"PROPERTY:subdivisionType":function(e){return"Subdivision"},"PROPERTY:componentCode":function(e){return"Component"},"PROPERTY:componentName":function(e){return"Component name"},"PROPERTY:startedAt":function(e){return"Started at"},"PROPERTY:finishedAt":function(e){return"Finished at"},"PROPERTY:analysisStartedAt":function(e){return"Analysis started at"},"PROPERTY:analysisFinishedAt":function(e){return"Analysis finished at"},"levelIndicator:label":function(e){return"Entry escalation level"},"levelIndicator:title":function(e){return"Escalte entry to level "+t.v(e,"level")},"subdivisionType:unspecified":function(e){return"Unspecified"},"subdivisionType:assembly":function(e){return"Assembly"},"subdivisionType:press":function(e){return"Press"},"subdivisionType:wh":function(e){return"Warehouse"},"status:pending":function(e){return"Pending"},"status:started":function(e){return"Started"},"status:finished":function(e){return"Finished"},"assessment:header":function(e){return"Structural solution to the problem"},"assessment:unspecified":function(e){return"Unspecified"},"assessment:effective":function(e){return"Effective"},"assessment:ineffective":function(e){return"Ineffective"},"assessment:repeatable":function(e){return"Repeatable"},"message:pending":function(e){return"Entry awaits verification."},"message:started:true":function(e){return"Problem is being analyzed."},"message:started:false":function(e){return"Problem is being solved."},"message:finished:true":function(e){return"Entry is finished, but the analysis is still in progress."},"message:finished:false":function(e){return"Entry is finished."},"filter:user:mine":function(e){return"Mine"},"filter:user:mine:title":function(e){return"You are one of the participants"},"filter:user:unseen":function(e){return"Unread"},"filter:user:unseen:title":function(e){return"You are one of the participants in entries changed since your last visit"},"filter:user:others":function(e){return"User"},"filter:user:others:title":function(e){return"The specified user is one of the participants"},"filter:user:active":function(e){return"Active"},"filter:user:active:title":function(e){return"The specified user made a change in a FAP entry"},"filter:status:specific":function(e){return"Status"},"filter:status:analysis":function(e){return"Analysis"},"filter:submit":function(e){return"Filter"},"history:added":function(e){return"<i>Entry created at "+t.v(e,"time")+" on "+t.v(e,"ddd")+", "+t.v(e,"date")+".</i>"},"settings:tab:general":function(e){return"General"},"settings:general:pendingFunctions":function(e){return"Functions requiring verification"},"settings:general:pendingFunctions:help":function(e){return"Entries added by a user without assigned Function or with a Function from the following list will be added with the <em>Pending</em> status and will have to be verified by a leader."},"settings:general:categoryFunctions":function(e){return"Functions allowing category changes"},"navbar:dictionaries":function(e){return"Dictionaries"},"navbar:categories":function(e){return"Categories"},"navbar:subCategories":function(e){return"Subcategories"},"navbar:button":function(e){return"FAP"},"navbar:unseen":function(e){return"Unread"},"navbar:add":function(e){return"Add a new FAP"},"navbar:all":function(e){return"All"},"navbar:open":function(e){return"Open"},"navbar:pending":function(e){return"Pending"},"navbar:started":function(e){return"Started"},"navbar:finished":function(e){return"Finished"},"navbar:analysis":function(e){return"Analyzed"},"navbar:mine":function(e){return"Mine"},"navbar:reports:count":function(e){return"Report"},"addForm:subdivisions":function(e){return"Notified subdivisions"},"addForm:submit":function(e){return"Add entry"},"addForm:cancel":function(e){return"Cancel"},"addForm:orderNo:notFound":function(e){return"Order not found."},"addForm:componentCode:notFound":function(e){return"Component not found."},"addForm:notifications:subdivisions":function(e){return"Subdivisions"},"addForm:notifications:prodFunctions":function(e){return"Functions"},"addForm:copy:title":function(e){return"Copy category and problem from your last entry."},"addForm:copy:failure":function(e){return"Failed to copy the last entry."},"addForm:copy:notFound":function(e){return"You don't have any entries yet."},"upload:drop":function(e){return"Drop here any files you want to attach to the entry."},"upload:tooMany":function(e){return"You can attach at most "+t.v(e,"max")+" "+t.p(e,"max",0,"en",{one:"file",other:"files"})+"."},"upload:auth":function(e){return"Log in to add files."},"upload:failure":function(e){return"Failed to upload file: "+t.v(e,"file")},"chat:title":function(e){return"Chat"},"chat:submit":function(e){return"Send message"},"chat:send":function(e){return"Send message"},"chat:send:auth":function(e){return"Log in to send a message"},"chat:new":function(e){return"Click here to see new messages..."},"chat:status:pending:started":function(e){return"<i>Entry accepted.</i>"},"chat:status:started:finished":function(e){return"<i>Entry finished in "+t.v(e,"duration")+".</i>"},"chat:status:finished:started":function(e){return"<i>Entry restarted.</i>"},"chat:status:pending:finished":function(e){return"<i>Entry finished.</i>"},"chat:level:up":function(e){return"<i>Escalated the entry to level "+t.v(e,"level")+".</i>"},"chat:level:down":function(e){return"<i>De-escalated the entry to level "+t.v(e,"level")+".</i>"},"autolink:attachment":function(e){return"Attachment"},"autolink:product":function(e){return"12NC"},"autolink:document":function(e){return"15NC"},"autolink:order":function(e){return"Order no"},"autolink:entry":function(e){return"Entry"},"observers:message":function(e){return"Additional users will be automatically added after entry escalation."},"observers:placeholder":function(e){return"Add by last name or personnel ID..."},"observers:placeholder:auth":function(e){return"Log in to add a new participant..."},"attachments:upload":function(e){return"Add attachments"},"attachments:menu:rename":function(e){return"Change name"},"attachments:menu:remove":function(e){return"Remove file"},"orderNo:404":function(e){return"Order not found."},"orderNo:failure":function(e){return"Order validation failed."},"componentCode:404":function(e){return"Component not found."},"componentCode:failure":function(e){return"Component validation failed."},"notifications:added:title":function(e){return"New FAP entry: "+t.v(e,"rid")+" ("+t.v(e,"category")+")"},"notifications:changed:title":function(e){return"Changed FAP: "+t.v(e,"rid")},"notifications:changed:placeholder":function(e){return"Reply..."},"notifications:changed:reply":function(e){return"Send reply"},"report:title:count":function(e){return"Entry count"},"report:title:duration":function(e){return"Average entry duration [h]"},"report:title:owner":function(e){return"Entry count by owners"},"report:title:solver":function(e){return"Entry count by solvers"},"report:title:status":function(e){return"Entry count by statuses"},"report:title:level":function(e){return"Entry count by levels"},"report:title:category":function(e){return"Entry count by categories"},"report:title:subCategory":function(e){return"Entry count by subcategories"},"report:title:subdivisionType":function(e){return"Entry count by subdivisions"},"report:title:division":function(e){return"Entry count by divisions"},"report:title:mrp":function(e){return"Entry count by MRP"},"report:title:assessment":function(e){return"Entry count by assessment"},"report:series:entry":function(e){return"Entry"},"report:series:analysis":function(e){return"Analysis"},"report:series:total":function(e){return"Total"},"report:filenames:count":function(e){return"FAP_Count"},"report:filenames:duration":function(e){return"FAP_Duration"},"report:filenames:owner":function(e){return"FAP_CountByOwners"},"report:filenames:solver":function(e){return"FAP_CountBySolvers"},"report:filenames:status":function(e){return"FAP_CountByStatuses"},"report:filenames:level":function(e){return"FAP_CountByLevels"},"report:filenames:category":function(e){return"FAP_CountByCategories"},"report:filenames:subCategory":function(e){return"FAP_CountBySubCategories"},"report:filenames:subdivisionType":function(e){return"FAP_CountBySubdivisions"},"report:filenames:division":function(e){return"FAP_CountByDivisions"},"report:filenames:mrp":function(e){return"FAP_CountByMRP"},"report:filenames:assessment":function(e){return"FAP_CountByAssessment"}},pl:!0}}),define("app/nls/pl/wmes-fap-entries",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r))in o?o[n]:o.other},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMB:base":function(e){return"FAP"},"BREADCRUMB:browse":function(e){return"FAP"},"BREADCRUMB:settings":function(e){return"Ustawienia"},"BREADCRUMB:history":function(e){return"Historia zmian"},"BREADCRUMB:reports:count":function(e){return"Iloci"},"PAGE_ACTION:settings":function(e){return"Ustawienia"},"PAGE_ACTION:jump:title":function(e){return"Skocz do zgoszenia po ID"},"PAGE_ACTION:jump:placeholder":function(e){return"ID zgoszenia"},"PAGE_ACTION:start":function(e){return"Rozpocznij zgoszenie"},"PAGE_ACTION:finish":function(e){return"Zakocz zgoszenie"},"PAGE_ACTION:restart":function(e){return"Wznw zgoszenie"},"PAGE_ACTION:markAsSeen":function(e){return"Oznacz jako przeczytane"},"PAGE_ACTION:subscribe":function(e){return"Wcz powiadomienia"},"PAGE_ACTION:unsubscribe":function(e){return"Wycz powiadomienia"},"PAGE_ACTION:history":function(e){return"Historia zmian"},"markAsSeen:listAction":function(e){return"Oznacz jako przeczytane"},"markAsSeen:success":function(e){return t.p(e,"count",0,"pl",{0:"Wszystkie zgoszenia przeczytane!",one:"Oznaczono jedno zgoszenie.",few:"Oznaczono "+t.v(e,"count")+" zgoszenia.",other:"Oznaczono "+t.v(e,"count")+" zgosze."})},"markAsSeen:failure":function(e){return"Oznaczanie zgosze nie powiodo si."},"markAsSeen:noComment":function(e){return"Zmiany bez komentarzy"},"markAsSeen:finished":function(e){return"Zakoczone"},"markAsSeen:dayOld":function(e){return"Starsze ni dzie"},"markAsSeen:weekOld":function(e){return"Starsze ni tydzie"},"markAsSeen:all":function(e){return"Wszystkie"},"PANEL:TITLE:changes":function(e){return"Historia zmian"},"LIST:COLUMN:name":function(e){return"Nazwa wyrobu/komponentu"},"PROPERTY:rid":function(e){return"ID"},"PROPERTY:createdAt":function(e){return"Czas zgoszenia"},"PROPERTY:owner":function(e){return"Zgaszajcy"},"PROPERTY:status":function(e){return"Status"},"PROPERTY:level":function(e){return"Poziom"},"PROPERTY:order":function(e){return"Zlecenie/12NC"},"PROPERTY:orderNo":function(e){return"Nr zlecenia"},"PROPERTY:nc12":function(e){return"12NC"},"PROPERTY:mrp":function(e){return"MRP"},"PROPERTY:productName":function(e){return"Nazwa wyrobu"},"PROPERTY:category":function(e){return"Kategoria"},"PROPERTY:subCategory":function(e){return"Podkategoria"},"PROPERTY:problem":function(e){return"Opis problemu"},"PROPERTY:uploads":function(e){return"Zaczniki"},"PROPERTY:divisions":function(e){return"Wydzia"},"PROPERTY:lines":function(e){return"Linia"},"PROPERTY:qty":function(e){return"Ilo"},"PROPERTY:qtyTodo":function(e){return"Ilo do zrobienia"},"PROPERTY:qtyDone":function(e){return"Ilo zrobiona"},"PROPERTY:attachments":function(e){return"Zaczniki"},"PROPERTY:observers":function(e){return"Uczestnicy"},"PROPERTY:assessment":function(e){return"Ocena krokw gaszcych"},"PROPERTY:analysisNeed":function(e){return"Potrzebna dalsza analiza"},"PROPERTY:analysisDone":function(e){return"Analiza zakoczona"},"PROPERTY:mainAnalyzer":function(e){return"Osoba odpowiedzialna"},"PROPERTY:analyzers":function(e){return"Osoby biorce udzia w analizie"},"PROPERTY:why5":function(e){return"Przyczyna problemu"},"PROPERTY:why":function(e){return"Dlaczego?"},"PROPERTY:solution":function(e){return"Opis rozwizania problemu"},"PROPERTY:solutionSteps":function(e){return"Opis krokw rozwizujcych problem"},"PROPERTY:limit":function(e){return"Limit"},"PROPERTY:search":function(e){return"Tekst"},"PROPERTY:subdivisionType":function(e){return"Dzia"},"PROPERTY:componentCode":function(e){return"Komponent"},"PROPERTY:componentName":function(e){return"Nazwa komponentu"},"PROPERTY:startedAt":function(e){return"Czas rozpoczcia zgoszenia"},"PROPERTY:finishedAt":function(e){return"Czas zakoczenia zgoszenia"},"PROPERTY:analysisStartedAt":function(e){return"Czas rozpoczcia analizy"},"PROPERTY:analysisFinishedAt":function(e){return"Czas zakoczenia analizy"},"levelIndicator:label":function(e){return"Poziom eskalacji zgoszenia"},"levelIndicator:title":function(e){return"Eskaluj zgoszenie na poziom "+t.v(e,"level")},"subdivisionType:unspecified":function(e){return"Nieokrelony"},"subdivisionType:assembly":function(e){return"Monta"},"subdivisionType:press":function(e){return"Tocznia"},"subdivisionType:wh":function(e){return"Magazyn"},"status:pending":function(e){return"Oczekujce"},"status:started":function(e){return"Rozpoczte"},"status:finished":function(e){return"Zakoczone"},"assessment:header":function(e){return"Strukturalne rozwizanie problemu"},"assessment:unspecified":function(e){return"Nieokrelona"},"assessment:effective":function(e){return"Skuteczne"},"assessment:ineffective":function(e){return"Nieskuteczne"},"assessment:repeatable":function(e){return"Powtarzaj si"},"division:unspecified":function(e){return"Nieokrelony"},"mrp:unspecified":function(e){return"Nieokrelone"},"message:pending":function(e){return"Zgoszenie czeka na weryfikacj."},"message:started:true":function(e){return"Problem jest analizowany."},"message:started:false":function(e){return"Problem jest w trakcie rozwizywania."},"message:finished:true":function(e){return"Zgoszenie zostao zakoczone, ale analiza nadal trwa."},"message:finished:false":function(e){return"Zgoszenie zostao zakoczone."},"filter:user:mine":function(e){return"Moje"},"filter:user:mine:title":function(e){return"Znajdujesz si na licie uczestnikw zgoszenia"},"filter:user:unseen":function(e){return"Nowe"},"filter:user:unseen:title":function(e){return"Znajdujesz si na licie uczestnikw zgosze, w ktrych dokonano zmian od Twojej ostatniej wizyty"},"filter:user:others":function(e){return"Uczestnik"},"filter:user:others:title":function(e){return"Wybrany uytkownik znajduje si na licie uczestnikw zgoszenia"},"filter:user:active":function(e){return"Aktywny"},"filter:user:active:title":function(e){return"Wybrany uytkownik dokona zmian w zgoszeniu"},"filter:status:specific":function(e){return"Status"},"filter:status:analysis":function(e){return"Analiza"},"filter:submit":function(e){return"Filtruj"},"history:added":function(e){return"<i>Utworzono zgoszenie o "+t.v(e,"time")+" "+t.s(e,"day",{7:"w niedziel",6:"w sobot",3:"w rod",2:"we wtorek",other:"w "+t.v(e,"ddd")})+", "+t.v(e,"date")+".</i>"},"settings:tab:general":function(e){return"Oglne"},"settings:general:pendingFunctions":function(e){return"Funkcje wymagajce zatwierdzenia"},"settings:general:pendingFunctions:help":function(e){return"Zgoszenia dodane przez uytkownika bez przypisanej funkcji lub z przypisan jedn z poniszych funkcji zostan dodane ze statusem <em>Oczekujce</em> i bd musiay by zatwierdzone przez lidera."},"settings:general:categoryFunctions":function(e){return"Funkcje zmiany kategorii"},"navbar:dictionaries":function(e){return"Sowniki"},"navbar:categories":function(e){return"Kategorie"},"navbar:subCategories":function(e){return"Podkategorie"},"navbar:button":function(e){return"FAP"},"navbar:unseen":function(e){return"Nieprzeczytane"},"navbar:add":function(e){return"Dodaj FAP"},"navbar:all":function(e){return"Wszystkie"},"navbar:open":function(e){return"Otwarte"},"navbar:pending":function(e){return"Oczekujce"},"navbar:started":function(e){return"Rozpoczte"},"navbar:finished":function(e){return"Zakoczone"},"navbar:analysis":function(e){return"Analizowane"},"navbar:mine":function(e){return"Moje"},"navbar:reports:count":function(e){return"Raport"},"addForm:subdivisions":function(e){return"Powiadomione dziay"},"addForm:submit":function(e){return"Dodaj zgoszenie"},"addForm:cancel":function(e){return"Anuluj"},"addForm:orderNo:notFound":function(e){return"Podane zlecenie nie istnieje."},"addForm:componentCode:notFound":function(e){return"Podany komponent nie istnieje."},"addForm:notifications:subdivisions":function(e){return"Dziay"},"addForm:notifications:prodFunctions":function(e){return"Funkcje"},"addForm:copy:title":function(e){return"Kopiuj kategori i problem z Twojego ostatniego zgoszenia."},"addForm:copy:failure":function(e){return"Kopiowanie ostatniego zgoszenia nie powiodo si."},"addForm:copy:notFound":function(e){return"Nie znaleziono adnych pasujcych zgosze."},"upload:drop":function(e){return"Upu tutaj pliki jakie chcesz doda do tego zgoszenia."},"upload:tooMany":function(e){return"Moesz zaczy maksymalnie "+t.v(e,"max")+" "+t.p(e,"max",0,"pl",{few:"pliki",one:"plik",other:"plikw"})+"."},"upload:auth":function(e){return"Zaloguj si, aby dodawa pliki."},"upload:failure":function(e){return"Nie udao si zaadowa pliku: "+t.v(e,"file")},"chat:title":function(e){return"Czat"},"chat:submit":function(e){return"Wylij wiadomo"},"chat:send":function(e){return"Wylij wiadomo"},"chat:send:auth":function(e){return"Zaloguj si, aby wysa wiadomo"},"chat:new":function(e){return"Kliknij tutaj, aby zobaczy nowe wiadomoci..."},"chat:status:pending:started":function(e){return"<i>Zaakceptowano zgoszenie.</i>"},"chat:status:started:finished":function(e){return"<i>Zakoczono zgoszenie w "+t.v(e,"duration")+".</i>"},"chat:status:finished:started":function(e){return"<i>Wznowiono zgoszenie.</i>"},"chat:status:pending:finished":function(e){return"<i>Zakoczono zgoszenie.</i>"},"chat:analysis:started":function(e){return"<i>Rozpoczto analiz.</i>"},"chat:analysis:finished":function(e){return"<i>Zakoczono analiz w "+t.v(e,"duration")+".</i>"},"chat:level:up":function(e){return"<i>Wyeskalowano zgoszenie do poziomu "+t.v(e,"level")+".</i>"},"chat:level:down":function(e){return"<i>Deeskalowano zgoszenie do poziomu "+t.v(e,"level")+".</i>"},"autolink:attachment":function(e){return"Zacznik"},"autolink:product":function(e){return"12NC"},"autolink:document":function(e){return"15NC"},"autolink:order":function(e){return"Nr zlecenia"},"autolink:entry":function(e){return"Zgoszenie"},"observers:message":function(e){return"Dodatkowe osoby zostan automatycznie dodane wg kategorii po eskalacji zgoszenia."},"observers:placeholder":function(e){return"Dodaj po nazwisku lub nr kadrowym..."},"observers:placeholder:auth":function(e){return"Zaloguj si, aby doda now osob..."},"attachments:upload":function(e){return"Dodaj zaczniki"},"attachments:menu:rename":function(e){return"Zmie nazw"},"attachments:menu:remove":function(e){return"Usu plik"},"orderNo:404":function(e){return"Zlecenie nie istnieje."},"orderNo:failure":function(e){return"Sprawdzanie zlecenia nie powiodo si."},"componentCode:404":function(e){return"Komponent nie istnieje."},"componentCode:failure":function(e){return"Sprawdzanie komponentu nie powiodo si."},"notifications:added:title":function(e){return"Nowy FAP: "+t.v(e,"rid")+" ("+t.v(e,"category")+")"},"notifications:changed:title":function(e){return"Zmieniony FAP: "+t.v(e,"rid")},"notifications:changed:placeholder":function(e){return"Odpowied..."},"notifications:changed:reply":function(e){return"Wylij odpowied"},"report:title:count":function(e){return"Ilo zgosze"},"report:title:duration":function(e){return"redni czas trwania zgosze [h]"},"report:title:owner":function(e){return"Ilo zgosze wg osb zgaszajcych"},"report:title:solver":function(e){return"Ilo zgosze wg osb rozwizujcych"},"report:title:status":function(e){return"Ilo zgosze wg statusw"},"report:title:level":function(e){return"Ilo zgosze wg poziomw"},"report:title:category":function(e){return"Ilo zgosze wg kategorii"},"report:title:subCategory":function(e){return"Ilo zgosze wg podkategorii"},"report:title:subdivisionType":function(e){return"Ilo zgosze wg dziaw"},"report:title:division":function(e){return"Ilo zgosze wg wydziaw"},"report:title:mrp":function(e){return"Ilo zgosze wg MRP"},"report:title:assessment":function(e){return"Ilo zgosze wg oceny krokw gaszcych"},"report:series:entry":function(e){return"Zgoszenia"},"report:series:analysis":function(e){return"Analizy"},"report:series:total":function(e){return"Suma"},"report:series:unspecified":function(e){return"Suma"},"report:filenames:count":function(e){return"FAP_Ilosc"},"report:filenames:duration":function(e){return"FAP_CzasTrwania"},"report:filenames:owner":function(e){return"FAP_IloscWgZglaszajacych"},"report:filenames:solver":function(e){return"FAP_IloscWgRozwiazujacych"},"report:filenames:status":function(e){return"FAP_IloscWgStatusow"},"report:filenames:level":function(e){return"FAP_IloscWgPoziomow"},"report:filenames:category":function(e){return"FAP_IloscWgKategorii"},"report:filenames:subCategory":function(e){return"FAP_IloscWgPodKategorii"},"report:filenames:subdivisionType":function(e){return"FAP_IloscWgDzialow"},"report:filenames:division":function(e){return"FAP_IloscWgWydzialow"},"report:filenames:mrp":function(e){return"FAP_IloscWgMRP"},"report:filenames:assessment":function(e){return"FAP_IloscWgOceny"}}}),define("app/orders/pages/OrderDetailsPage",["underscore","jquery","app/i18n","app/user","app/viewport","app/core/util/bindLoadingMessage","app/core/util/embedded","app/core/pages/DetailsPage","app/data/loadedModules","app/data/localStorage","app/delayReasons/storage","app/printers/views/PrinterPickerView","app/wmes-fap-entries/dictionaries","app/wmes-fap-entries/EntryCollection","app/prodDowntimes/ProdDowntimeCollection","../Order","../OrderCollection","../ComponentCollection","../util/openOrderPrint","../views/OrderDetailsView","../views/OrderListView","../views/OperationListView","../views/DocumentListView","../views/ComponentListView","../views/OrderChangesView","../views/EtoView","../views/FapEntryListView","../views/DowntimeListView","../views/NoteListView","app/orders/templates/detailsJumpList","i18n!app/nls/wmes-fap-entries"],function(e,t,n,r,i,o,a,s,u,c,l,d,p,f,h,m,g,y,b,v,w,_,A,k,T,E,C,R,S,O){"use strict";return s.extend({pageId:"orderDetails",actions:function(){var e=[],t=this.model.id;return u.isLoaded("wmes-ct")&&e.push({label:this.t("PAGE_ACTION:cycleTime"),icon:"clock-o",href:"#ct/reports/pce?orders="+t,privileges:"PROD_DATA:VIEW"}),e.push(d.pageAction({view:this,tag:"orders"},function(e){b([t],e)})),e},remoteTopics:function(){var e={"orders.updated.*":"onOrderUpdated","orders.synced":"onSynced","orders.*.synced":"onSynced","orderDocuments.synced":"onSynced"};return e["orders.quantityDone."+this.model.id]="onQuantityDoneChanged",e},events:{"click #-jumpList > a":function(e){var n=e.currentTarget.dataset.section,r=this.$(".orders-"+n).offset().top-14,i=t(".navbar-fixed-top");return i.length&&(r-=i.outerHeight()),t("html, body").stop(!0,!1).animate({scrollTop:r}),!1},'click .btn[data-action="togglePanel"]':function(e){var t=this.$(e.currentTarget),n=t.closest(".panel"),r=n[0].dataset.id,i=JSON.parse(c.getItem("WMES_ORDERS_PANEL_TOGGLES")||"{}"),o=!n.hasClass("is-expanded");i[r]=o,c.setItem("WMES_ORDERS_PANEL_TOGGLES",JSON.stringify(i)),n.toggleClass("is-expanded",o),t.toggleClass("active",o)}},initialize:function(){var t=this;t.defineModels(),t.defineViews(),t.defineBindings(),e.forEach(t.views_,function(e){t.insertView(e)})},destroy:function(){l.release(),p.unload(),t(window).off("."+this.idPrefix),this.cancelPinchZoom&&window.removeEventListener("touchstart",this.cancelPinchZoom)},defineModels:function(){this.model=o(new m({_id:this.options.modelId}),this),u.isLoaded("prodDowntimes")&&r.isAllowedTo("PROD_DATA:VIEW","PROD_DOWNTIMES:VIEW")&&(this.downtimes=o(new h(null,{rqlQuery:"exclude(changes)&sort(prodLine,startedAt)&orderId=string:"+this.model.id}),this)),this.delayReasons=o(l.acquire(),this),u.isLoaded("wmes-fap")&&r.isAllowedTo("USER")&&(this.fapEntries=o(new f(null,{rqlQuery:"exclude(changes)&sort(_id)&orderNo=string:"+this.model.id}),this)),this.childOrders=o(new g(null,{paginate:!1,rqlQuery:"exclude(operations,bom,documents,changes)&sort(mrp,scheduledStartDate)&limit(0)&_id!="+this.model.id+"&leadingOrder="+this.model.id}),this),u.isLoaded("paintShop")&&(this.paintOrders=o(new g(null,{rqlQuery:"select(mrp,bom)&limit(0)&operations.workCenter=PAINT&leadingOrder="+this.model.id}),this),this.paintOrder=new m({bom:new y}))},defineViews:function(){this.views_={},this.views_.details=new v({model:this.model,delayReasons:this.delayReasons}),this.views_.downtimes=this.downtimes?new R({model:this.model,collection:this.downtimes}):null,this.views_.fapEntries=this.fapEntries?new C({model:this.model,collection:this.fapEntries}):null,this.views_.childOrders=new w({tableClassName:"table-bordered table-hover table-condensed table-striped",model:this.model,collection:this.childOrders,delayReasons:this.delayReasons,panel:{title:this.t("PANEL:TITLE:childOrders"),className:"orders-childOrders",hideEmpty:!0}}),this.views_.operations=new _({model:this.model,showQtyMax:!0}),this.views_.documents=new A({model:this.model}),this.views_.notes=new S({model:this.model}),this.views_.components=new k({model:this.model,linkDocuments:!0,linkPfep:!0}),this.views_.paintComponents=this.paintOrder?new k({model:this.paintOrder,paint:!0,linkPfep:!0}):null,this.views_.eto=new E({model:this.model}),this.views_.changes=new T({model:this.model,delayReasons:this.delayReasons})},defineBindings:function(){this.listenTo(this.paintOrders,"reset",this.onPaintOrdersReset),this.listenTo(this.views_.documents,"documentOpened",this.onDocumentOpened),this.listenTo(this.views_.documents,"documentClosed",this.onDocumentClosed),this.listenTo(this.views_.components,"bestDocumentRequested",this.onBestDocumentRequested),this.listenTo(this.model,"panelToggle",this.renderJumpList),t(window).on("keypress."+this.idPrefix,this.onKeyPress.bind(this)),a.isEnabled()&&(t(window).on("contextmenu."+this.idPrefix,function(e){e.preventDefault()}),this.cancelPinchZoom=function(e){e.touches&&e.touches.length>1&&e.preventDefault()},window.addEventListener("touchstart",this.cancelPinchZoom,{passive:!1}))},load:function(e){return e(this.model.fetch(),this.fapEntries?p.load():null,this.fapEntries?this.fapEntries.fetch({reset:!0}):null,this.downtimes?this.downtimes.fetch({reset:!0}):null,this.childOrders.fetch({reset:!0}),this.paintOrders?this.paintOrders.fetch({reset:!0}):null,this.delayReasons.isEmpty()?this.delayReasons.fetch({reset:!0}):null)},afterRender:function(){l.acquire(),this.fapEntries&&p.load(),this.renderJumpList(),this.renderPanelToggles()},onOrderUpdated:function(t){var n=this.model,r=t.change;if(n.id===t._id&&r){var i={},o=n.get("changes");Array.isArray(o)||(o=n.attributes.changes=[]),e.forEach(r.newValues,function(t,r){if("qtyMax"===r){var o={};o[t.operationNo]=t.value,t=e.defaults(o,n.get("qtyMax"))}i[r]=t}),"system"!==r.source&&o.push(r),n.set(i),"system"!==r.source&&n.trigger("push:change",r),this.renderPanelToggles()}},onQuantityDoneChanged:function(e){this.model.set("qtyDone",e)},onSynced:function(){this.promised(this.model.fetch())},renderJumpList:function(){var e=this;e.$id("jumpList").remove();var t=a.isEnabled(),n=e.renderPartial(O,{sections:["details","fap","downtimes","childOrders","operations","documents","notes","bom","eto","changes"].map(function(n){var r=e.t("jumpList:"+n).split("_");return{id:n,label:r[0],hotkey:r[1]&&!t?r[1]:""}}).filter(function(t){var n=e.$(".orders-"+t.id).first();return!!n.length&&!n.hasClass("hidden")})});e.$el.append(n)},renderPanelToggles:function(){if(!a.isEnabled()){var e=this,n=JSON.parse(c.getItem("WMES_ORDERS_PANEL_TOGGLES")||"{}");e.getViews().forEach(function(r){if(r!==e.views_.changes){var i=r.$(".table-responsive");if(i.length){var o=i.closest(".panel"),a=o.attr("class").match(/orders-([a-zA-Z]+)/)[1],s=o.find(".panel-heading"),u=i.find("tbody");if(o.attr("data-id",a),!o.hasClass("is-with-actions")){var c=s.text();s.html('<div class="panel-heading-title"></div><div class="panel-heading-actions"></div>'),s.find(".panel-heading-title").text(c),o.addClass("is-with-actions")}var l=s.find(".panel-heading-actions"),d=l.find('.btn[data-action="togglePanel"]'),p=!0===n[a];o.toggleClass("is-expanded",p),u[0].childElementCount>10?(d.length||(d=t('<button class="btn btn-default" type="button" data-action="togglePanel"><i class="fa fa-expand"></i></button>')).appendTo(l),d.toggleClass("active",p)):d.remove()}}})}},onPaintOrdersReset:function(){var t=new y,n=0;this.paintOrders.forEach(function(r){r.get("bom").forEach(function(i){t.add(e.assign({orderNo:r.id,mrp:r.get("mrp"),index:n++},i.toJSON()))})}),this.paintOrder.set("bom",t)},onDocumentOpened:function(e,t){this.views_.components.markDocument(e,t)},onDocumentClosed:function(e,t){this.views_.components.unmarkDocument(e,t)},onBestDocumentRequested:function(e,t){this.views_.documents.openBestDocument(e,t)},onKeyPress:function(e){!i.currentDialog&&"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&e.key&&/^[A-Za-z0-9]$/.test(e.key)&&this.$id("jumpList").find('a[data-hotkey="'+e.key.toUpperCase()+'"]').click()}})}),define("app/nls/orderDocuments",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r))in o?o[n]:o.other},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{TITLE:function(e){return"Documents < Wannabe MES"},"controls:emptyOrderNo":function(e){return"No order"},"controls:emptyOrderName":function(e){return"No order is selected."},"controls:emptyDocumentNc15":function(e){return"No document"},"controls:emptyDocumentName":function(e){return"No document is selected."},"controls:localDocumentNc15":function(e){return"Local document"},"controls:localDocumentName":function(e){return"Selected a local document."},"controls:externalDocumentName":function(e){return"Selected an external document."},"controls:openLocalFileDialog":function(e){return"Select a file from the local disk"},"controls:openSettingsDialog":function(e){return"Change settings"},"controls:openLocalOrderDialog":function(e){return"Find order/document"},"controls:reloadDocument":function(e){return"Reload the current document"},"controls:openDocumentWindow":function(e){return"Open the current document in a new window"},"controls:toggleAddImprovementButtons":function(e){return"Add near miss/suggestion"},"controls:openAddNearMissWindow":function(e){return"Submit a new near miss"},"controls:openAddSuggestionWindow":function(e){return"Submit a new suggestion"},"controls:openAddObservationWindow":function(e){return"Submit a new observation"},"controls:switchApps":function(e){return"Switch apps/Configure after 3s"},"controls:reboot":function(e){return"Refresh page/Restart after 3s"},"controls:shutdown":function(e){return"Shutdown after 3s"},"controls:filter:ph":function(e){return"Filter documents"},"controls:lockUi":function(e){return"Lock UI"},"controls:confirm":function(e){return"I confirm that I have<br>read the document."},"controls:confirm:noStation":function(e){return"Please set the workstation number."},"controls:balancing":function(e){return"Balancing"},uiLocked:function(e){return"UI locked.<br>Touch here to unlock."},"popup:document":function(e){return"Failed to open the document in a new window.<br>Check if the popups are allowed in the browser!"},"popup:suggestion":function(e){return"Failed to open the suggestion form in a new window.<br>Check if the popups are allowed in the browser!"},"settings:title":function(e){return"Settings"},"settings:prodLineId":function(e){return"Production line ID"},"settings:prodLineId:help":function(e){return"Production line the application should connect to in order to get the current production order."},"settings:prodLineName":function(e){return"Production line name"},"settings:prodLineName:help":function(e){return"Name displayed in an upper left corner of the application."},"settings:station":function(e){return"Workstation"},"settings:prefixFilter:inclusive":function(e){return"Only documents with 15NC starting with:"},"settings:prefixFilter:exclusive":function(e){return"Only documents with 15NC not starting with:"},"settings:spigotCheck":function(e){return"Spigot checking"},"settings:login":function(e){return"Login"},"settings:password":function(e){return"Password"},"settings:submit":function(e){return"Save settings"},"settings:error:failure":function(e){return"Failed to save the settings."},"settings:error:INVALID_PROD_LINE":function(e){return"Production line does not exist!"},"settings:error:INVALID_CREDENTIALS":function(e){return"Invalid credentials!"},"settings:error:INVALID_LOGIN":function(e){return"Invalid login!"},"settings:error:INVALID_PASSWORD":function(e){return"Invalid password!"},"settings:error:NO_PRIVILEGES":function(e){return"User doesn't have the <em>WMES Documents client activation</em> privilege!"},"settings:msg:localServer:checking":function(e){return"Checking the availability of the local HTTP server..."},"settings:msg:localServer:success":function(e){return"Local HTTP server is available :)"},"settings:msg:localServer:failure":function(e){return"Local HTTP server is not available."},"preview:msg:loading:localFile":function(e){return"Loading a document from the local disk..."},"preview:msg:loading:remoteServer":function(e){return"Loading a document from the remote server..."},"preview:msg:loading:localServer":function(e){return"Loading a document from the local server..."},"preview:msg:loading:failure":function(e){return"Failed to load the document."},"localOrderPicker:title":function(e){return"Order/document search"},"localOrderPicker:plannedOrders":function(e){return"Planned orders"},"localOrderPicker:lastOrders":function(e){return"Last orders"},"localOrderPicker:orderNo":function(e){return"Order/document number"},"localOrderPicker:submit":function(e){return"Find order/document"},"localOrderPicker:submit:order":function(e){return"Find order"},"localOrderPicker:submit:document":function(e){return"Find document"},"localOrderPicker:error:failure":function(e){return"Failed to find the order/document."},"localOrderPicker:error:failure:order":function(e){return"Failed to find the order."},"localOrderPicker:error:failure:document":function(e){return"Failed to find the document."},"localOrderPicker:error:NOT_FOUND:order":function(e){return"Order does not exist."},"localOrderPicker:error:NOT_FOUND:document":function(e){return"Document does not exist."},"localOrderPicker:error:DOCUMENT_NOT_FOUND:document":function(e){return"Document does not exist in the catalog."},"localOrderPicker:error:DOCUMENT_NO_FILES:document":function(e){return"Document does not have any files."},"localOrderPicker:error:DATE_NOT_FOUND:document":function(e){return"Document does not have any matching file.<br>Required availability date: "+t.v(e,"required")+"<br>Files available from: "+t.v(e,"actual")},order:function(e){return"Order card"},bom:function(e){return"Bill of materials"},compRel:function(e){return"Component releases"},eto:function(e){return"Engineering To Order"},"bom:filter:ps":function(e){return"Filter components"},"spigot:request":function(e){return"Scan a valid Spigot:<br>"+t.v(e,"component")},"spigot:checking":function(e){return"<i class='fa fa-spinner fa-spin'></i> Checking the Spigot..."},"spigot:failure":function(e){return"Scanned an invalid Spigot."},"spigot:success":function(e){return"Scanned a valid Spigot."},"notes:hd":function(e){return"Order notes"},"notes:ft":function(e){return"Touch anywhere to close this message."},"compRels:hd":function(e){return"Component release"}},pl:!0}}),define("app/nls/pl/orderDocuments",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r))in o?o[n]:o.other},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{TITLE:function(e){return"Dokumenty < Wannabe MES"},"controls:emptyOrderNo":function(e){return"Brak zlecenia"},"controls:emptyOrderName":function(e){return"Nie wybrano adnego zlecenia."},"controls:emptyDocumentNc15":function(e){return"Brak dokumentu"},"controls:emptyDocumentName":function(e){return"Nie wybrano adnego dokumentu."},"controls:localDocumentNc15":function(e){return"Lokalny dokument"},"controls:localDocumentName":function(e){return"Wybrano lokalny dokument."},"controls:externalDocumentName":function(e){return"Wybrano zewntrzny dokument."},"controls:openLocalFileDialog":function(e){return"Wybierz plik z dysku lokalnego"},"controls:openSettingsDialog":function(e){return"Zmie ustawienia"},"controls:openLocalOrderDialog":function(e){return"Znajd zlecenie/dokument"},"controls:reloadDocument":function(e){return"Przeaduj aktualny dokument"},"controls:openDocumentWindow":function(e){return"Otwrz zaadowany dokument w nowym oknie"},"controls:toggleAddImprovementButtons":function(e){return"Zgo ZPW/sugesti"},"controls:openAddNearMissWindow":function(e){return"Dodaj ZPW"},"controls:openAddSuggestionWindow":function(e){return"Dodaj sugesti"},"controls:openAddObservationWindow":function(e){return"Dodaj obserwacj"},"controls:switchApps":function(e){return"Zmie aplikacj/Konfiguruj po 3s"},"controls:reboot":function(e){return"Odwie stron/Restartuj komputer po 3s"},"controls:shutdown":function(e){return"Wycz komputer po 3s"},"controls:filter:ph":function(e){return"Filtruj dokumenty"},"controls:lockUi":function(e){return"Zablokuj interfejs"},"controls:confirm":function(e){return"Potwierdzam zapoznanie<br>si z dokumentem"},"controls:confirm:noStation":function(e){return"Prosz ustawi numer stanowiska pracy."},"controls:balancing":function(e){return"Balansowanie"},uiLocked:function(e){return"Interfejs zablokowany.<br>Dotknij tutaj, aby odblokowa."},"popup:document":function(e){return"Nie udao si otworzy dokumentu w nowym oknie.<br>Sprawd czy wyskakujce okienka s dozwolone w przegldarce!"},"popup:improvement":function(e){return"Nie udao si otworzy formularza ZPW/sugestii w nowym oknie.<br>Sprawd czy wyskakujce okienka s dozwolone w przegldarce!"},"settings:title":function(e){return"Ustawienia"},"settings:prodLineId":function(e){return"ID linii produkcyjnej"},"settings:prodLineId:help":function(e){return"Linia produkcyjna, do ktrej aplikacja ma si poczy w celu pobrania aktualnego zlecenia."},"settings:prodLineName":function(e){return"Nazwa linii produkcyjnej"},"settings:prodLineName:help":function(e){return"Nazwa wywietlana w lewym grnym rogu aplikacji."},"settings:station":function(e){return"Stanowisko"},"settings:prefixFilter:inclusive":function(e){return"Tylko dokumenty z 15NC zaczynajcymi si na:"},"settings:prefixFilter:exclusive":function(e){return"Tylko dokumenty z 15NC nie zaczynajcymi si na:"},"settings:spigotCheck":function(e){return"Sprawdzanie Spigota"},"settings:login":function(e){return"Login"},"settings:password":function(e){return"Haso"},"settings:submit":function(e){return"Zapisz ustawienia"},"settings:error:failure":function(e){return"Nie udao si zapisa ustawie."},"settings:error:INVALID_PROD_LINE":function(e){return"Linia produkcyjna o podanym ID nie istnieje!"},"settings:error:INVALID_CREDENTIALS":function(e){return"Nieprawidowy login/haso!"},"settings:error:INVALID_LOGIN":function(e){return"Nieprawidowy login!"},"settings:error:INVALID_PASSWORD":function(e){return"Nieprawidowe haso!"},"settings:error:NO_PRIVILEGES":function(e){return"Uytkownik nie ma uprawnienia <em>Aktywacja klienta Dokumenty WMES</em>!"},"settings:msg:localServer:checking":function(e){return"Sprawdzanie dostpnoci lokalnego serwera HTTP..."},"settings:msg:localServer:success":function(e){return"Lokalny serwer HTTP jest dostpny :)"},"settings:msg:localServer:failure":function(e){return"Lokalny serwer HTTP nie jest dostpny."},"preview:msg:loading:localFile":function(e){return"adowanie dokumentu z lokalnego dysku..."},"preview:msg:loading:remoteServer":function(e){return"adowanie dokumentu ze zdalnego serwera..."},"preview:msg:loading:localServer":function(e){return"adowanie dokumentu z lokalnego serwera..."},"preview:msg:loading:failure":function(e){return"Nie udao si zaadowa dokumentu."},"localOrderPicker:title":function(e){return"Wyszukiwanie zlecenia/dokumentu"},"localOrderPicker:plannedOrders":function(e){return"Planowane zlecenia"},"localOrderPicker:lastOrders":function(e){return"Ostatnie zlecenia"},"localOrderPicker:orderNo":function(e){return"Numer zlecenia/dokumentu"},"localOrderPicker:submit":function(e){return"Znajd zlecenie/dokument"},"localOrderPicker:submit:order":function(e){return"Znajd zlecenie"},"localOrderPicker:submit:document":function(e){return"Znajd dokument"},"localOrderPicker:error:failure":function(e){return"Nie udao si znale zlecenia/dokumentu."},"localOrderPicker:error:failure:order":function(e){return"Nie udao si znale zlecenia."},"localOrderPicker:error:failure:document":function(e){return"Nie udao si znale dokumentu."},"localOrderPicker:error:NOT_FOUND:order":function(e){return"Zlecenie o podanym numerze nie istnieje."},"localOrderPicker:error:NOT_FOUND:document":function(e){return"Dokument o podanym numerze nie istnieje."},"localOrderPicker:error:DOCUMENT_NOT_FOUND:document":function(e){return"Dokument nie istnieje w katalogu."},"localOrderPicker:error:DOCUMENT_NO_FILES:document":function(e){return"Dokument nie ma adnych plikw."},"localOrderPicker:error:DATE_NOT_FOUND:document":function(e){return"Dokument nie ma pliku pasujcego do daty dostpnoci.<br>Wymagana data dostpnoci: "+t.v(e,"required")+"<br>Dostpne pliki od: "+t.v(e,"actual")},order:function(e){return"Karta zlecenia"},bom:function(e){return"Lista komponentw"},compRel:function(e){return"Dopuszczenia"},eto:function(e){return"Konstrukcja na zamwienie"},"bom:filter:ps":function(e){return"Filtruj komponenty"},"spigot:request":function(e){return"Zeskanuj Spigot:<br>"+t.v(e,"component")},"spigot:checking":function(e){return"<i class='fa fa-spinner fa-spin'></i> Sprawdzanie Spigota..."},"spigot:failure":function(e){return"Zeskanowano nieprawidowy Spigot."},"spigot:success":function(e){return"Zeskanowano prawidowy Spigot."},"notes:hd":function(e){return"Uwagi do zlecenia"},"notes:ft":function(e){return"Dotknij w dowolnym miejscu, aby ukry ten komunikat."},"compRels:hd":function(e){return"Dopuszczenie"}}}),define("app/nls/orders",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r))in o?o[n]:o.other},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{"BREADCRUMB:browse":function(e){return"Production orders"},"BREADCRUMB:settings":function(e){return"Settings"},"PAGE_ACTION:settings":function(e){return"Change settings"},"PAGE_ACTION:print":function(e){return"Print order"},"PAGE_ACTION:openOrdersPrint":function(e){return"Print orders"},"PAGE_ACTION:jump:title":function(e){return"Jump to order by no"},"PAGE_ACTION:jump:placeholder":function(e){return"Order no"},"PAGE_ACTION:cycleTime":function(e){return"Cycle time"},"PAGE_ACTION:notes":function(e){return"Notes"},"PAGE_ACTION:tags":function(e){return"Tags"},"LIST:ACTION:print":function(e){return"Print"},"openOrdersPrint:title":function(e){return"Order printing"},"openOrdersPrint:orders":function(e){return"Enter order numbers:"},"openOrdersPrint:submit":function(e){return"Print orders"},"openOrdersPrint:msg:findFailure":function(e){return"Failed to find orders."},"openOrdersPrint:msg:notFound":function(e){return t.p(e,"count",0,"en",{one:"Order "+t.v(e,"orders")+" doesn't exist.",other:"Orders don't exist: "+t.v(e,"orders")})},"PANEL:TITLE:fap":function(e){return"FAP entries"},"PANEL:TITLE:downtimes":function(e){return"Downtimes"},"PANEL:TITLE:childOrders":function(e){return"Child orders"},"PANEL:TITLE:operations":function(e){return"Operations"},"PANEL:TITLE:documents":function(e){return"Documents"},"PANEL:TITLE:bom":function(e){return"Components"},"PANEL:TITLE:bom:paint":function(e){return"Paint-shop components"},"PANEL:TITLE:eto":function(e){return"ETO"},"PANEL:TITLE:changes":function(e){return"History"},"PANEL:TITLE:notes":function(e){return"Notes"},"PROPERTY:_id":function(e){return"Order no"},"PROPERTY:sapCreatedAt":function(e){return"Created at"},"PROPERTY:createdAt":function(e){return"Imported at"},"PROPERTY:updatedAt":function(e){return"Updated at"},"PROPERTY:nc12":function(e){return"12NC"},"PROPERTY:name":function(e){return"Product name"},"PROPERTY:mrp":function(e){return"MRP"},"PROPERTY:qtys":function(e){return"Quantity"},"PROPERTY:qty":function(e){return"Quantity todo"},"PROPERTY:qtyDone":function(e){return"Quantity done"},"PROPERTY:unit":function(e){return"Unit"},"PROPERTY:startDate":function(e){return"Start date (basic)"},"PROPERTY:finishDate":function(e){return"Finish date (basic)"},"PROPERTY:scheduledStartDate":function(e){return"Start date (scheduled)"},"PROPERTY:scheduledFinishDate":function(e){return"Finish date (scheduled)"},"PROPERTY:leadingOrder":function(e){return"Leading order"},"PROPERTY:salesOrder":function(e){return"Sales order"},"PROPERTY:salesOrderItem":function(e){return"Sales order item"},"PROPERTY:priority":function(e){return"Priority"},"PROPERTY:description":function(e){return"Description"},"PROPERTY:soldToParty":function(e){return"Sold-to party"},"PROPERTY:delayReason":function(e){return"Delay reason"},"PROPERTY:delayComponent":function(e){return"Delayed component"},"PROPERTY:statuses":function(e){return"Status"},"PROPERTY:operations":function(e){return"Operations"},"PROPERTY:operations.no":function(e){return"Operation no"},"PROPERTY:operations.workCenter":function(e){return"WorkCenter"},"PROPERTY:operations.name":function(e){return"Name"},"PROPERTY:operations.qty":function(e){return"Quantity"},"PROPERTY:operations.qtyMax":function(e){return"Max."},"PROPERTY:operations.unit":function(e){return"Unit"},"PROPERTY:operations.machineSetupTime":function(e){return"<em>Machine Setup</em> Time"},"PROPERTY:operations.laborSetupTime":function(e){return"<em>Labor Setup</em> Time"},"PROPERTY:operations.machineTime":function(e){return"<em>Machine</em> Time"},"PROPERTY:operations.laborTime":function(e){return"<em>Labor</em> Time"},"PROPERTY:documents":function(e){return"Documents"},"PROPERTY:documents.item":function(e){return"Item"},"PROPERTY:documents.nc15":function(e){return"15NC"},"PROPERTY:documents.name":function(e){return"Document name"},"PROPERTY:bom":function(e){return"Components"},"PROPERTY:bom.orderNo":function(e){return"Order"},"PROPERTY:bom.mrp":function(e){return"MRP"},"PROPERTY:bom.item":function(e){return"Item"},"PROPERTY:bom.nc12":function(e){return"12NC"},"PROPERTY:bom.name":function(e){return"Name"},"PROPERTY:bom.qty":function(e){return"Quantity"},"PROPERTY:bom.unit":function(e){return"Unit"},"PROPERTY:bom.unloadingPoint":function(e){return"Unloading point"},"PROPERTY:bom.supplyArea":function(e){return"Supply area"},"PROPERTY:bom.distStrategy":function(e){return"Dist. strategy"},"PROPERTY:whTime":function(e){return"Drop zone time"},"PROPERTY:whDropZone":function(e){return"Drop zone group"},"PROPERTY:whStatus":function(e){return"Drop zone status"},"PROPERTY:psStatus":function(e){return"Paint-shop status"},"PROPERTY:drillStatus":function(e){return"Drilling status"},"PROPERTY:enteredBy":function(e){return"Entered by"},"PROPERTY:changedBy":function(e){return"Changed by"},"PROPERTY:m4":function(e){return"4M"},"PROPERTY:etoCont":function(e){return"ETO Pilot continuation"},"PROPERTY:notes":function(e){return"Notes"},"PROPERTY:tags":function(e){return"Tags"},"m4:man":function(e){return"Man"},"m4:machine":function(e){return"Machine"},"m4:material":function(e){return"Material"},"m4:method":function(e){return"Method"},"whStatus:unknown":function(e){return"Unknown"},"whStatus:todo":function(e){return"Todo"},"whStatus:done":function(e){return"Done"},"psStatus:unknown":function(e){return"Unknown"},"psStatus:new":function(e){return"Waiting"},"psStatus:started":function(e){return"Started"},"psStatus:startedMsp":function(e){return"Started (MSP)"},"psStatus:partial":function(e){return"Partial"},"psStatus:finished":function(e){return"Finished"},"psStatus:aside":function(e){return"Set aside"},"psStatus:cancelled":function(e){return"Cancelled"},"drillStatus:unknown":function(e){return"Unknown"},"drillStatus:new":function(e){return"Waiting"},"drillStatus:started":function(e){return"Started"},"drillStatus:partial":function(e){return"Partial"},"drillStatus:finished":function(e){return"Finished"},"drillStatus:aside":function(e){return"Set aside"},"drillStatus:cancelled":function(e){return"Cancelled"},"OPERATIONS:NO_DATA":function(e){return"No operations."},"DOCUMENTS:NO_DATA":function(e){return"No documents."},"BOM:NO_DATA":function(e){return"No components."},"ETO:NO_DATA":function(e){return"No ETO."},"NOTES:NO_DATA":function(e){return"No messages."},"changes:NO_DATA":function(e){return"Order was not modified."},"changes:operations":function(e){return t.p(e,"count",0,"en",{one:"1 operation",other:t.n(e,"count")+" operations"})},"changes:documents":function(e){return t.p(e,"count",0,"en",{one:"1 document",other:t.n(e,"count")+" documents"})},"changes:bom":function(e){return t.p(e,"count",0,"en",{one:"1 component",other:t.n(e,"count")+" components"})},"changes:notes":function(e){return t.p(e,"count",0,"en",{one:"1 note",other:t.n(e,"count")+" notes"})},"changes:change":function(e){return"Change #"+t.v(e,"no")},"changes:time":function(e){return"Time"},"changes:user":function(e){return"User"},"changes:property":function(e){return"Property"},"changes:oldValue":function(e){return"Old value"},"changes:newValue":function(e){return"New value"},"changes:qtyMax":function(e){return"Max. quantity for <em>"+t.v(e,"operationNo")+"</em>"},"changes:toggleSystemChanges":function(e){return"Hide system changes"},"changes:timeEditor:error:format":function(e){return"Invalid format. Expected yyyy-mm-dd hh:mm:ss."},"changes:timeEditor:error:min":function(e){return"Value must be after: "+t.v(e,"time")},"changes:timeEditor:error:max":function(e){return"Value must be before: "+t.v(e,"time")},"filter:id:order":function(e){return"Order"},"filter:id:product":function(e){return"Product"},"filter:id:component":function(e){return"Component"},"filter:id:document":function(e){return"Document"},"filter:statuses:in":function(e){return"Required statuses"},"filter:statuses:nin":function(e){return"Ignored statuses"},"filter:submit":function(e){return"Filter orders"},"details:showMoreLink":function(e){return"Show more order details"},"details:opTimes:sap":function(e){return"SAP time"},"details:opTimes:actual":function(e){return"Time with coefficient"},"details:opTimes:summed":function(e){return"Grouped time"},"commentForm:delayReason":function(e){return"New delay reason"},"commentForm:delayComponent":function(e){return"12NC"},"commentForm:source":function(e){return"Source"},"commentForm:source:other":function(e){return"Other"},"commentForm:source:ps":function(e){return"Paint shop"},"commentForm:source:wh":function(e){return"Warehouse"},"commentForm:comment":function(e){return"Comment"},"commentForm:submit:comment":function(e){return"Comment"},"commentForm:submit:edit":function(e){return"Change delay reason"},"settings:tab:operations":function(e){return"Operations"},"settings:tab:documents":function(e){return"Documents"},"settings:tab:iptChecker":function(e){return"IPT checker"},"settings:operations:groups":function(e){return"Operation groups"},"settings:operations:groups:help":function(e){return"Each line should contain operation names which should belong to the same group, separated by the <code>|</code> character. Each operation name may be additionaly filtered to a WorkCenter by adding it after the <code>@</code> character.<br>For example: <code>punching @ PIVATIC5 | bending</code>"},"settings:operations:timeCoeffs":function(e){return"Operation time coefficients"},"settings:operations:timeCoeffs:help":function(e){return"Each line should contain order's MRP for which operation times from SAP should be adjusted, followed by names of the operation times and values of the coefficients.<br>Available time names are: <code>machineSetup</code>, <code>machine</code>, <code>laborSetup</code> and <code>labor</code>.<br>For example: <code>KE3: labor=0.8 machineSetup=1.1</code>"},"settings:documents:excludedMrps":function(e){return"MRPs excluded from the document import"},"settings:documents:extra":function(e){return"Extra documents"},"settings:iptChecker:toBusinessDays":function(e){return"Number of days to check"},"settings:iptChecker:mrps":function(e){return"MRPs to check"},"jumpList:details":function(e){return"Details_1"},"jumpList:fap":function(e){return"FAP entries_2"},"jumpList:downtimes":function(e){return"Downtimes_3"},"jumpList:childOrders":function(e){return"Child orders_4"},"jumpList:operations":function(e){return"Operations_5"},"jumpList:documents":function(e){return"Documents_Q"},"jumpList:notes":function(e){return"Notes_W"},"jumpList:bom":function(e){return"Components_E"},"jumpList:eto":function(e){return"ETO_R"},"jumpList:changes":function(e){return"Changes_T"},"changeQtyMax:link":function(e){return"change"},"notes:edit:button":function(e){return"Assign notes to order"},"notes:edit:title":function(e){return"Assigning notes to order"},"notes:edit:submit":function(e){return"Save notes"},"notes:edit:text":function(e){return"Note text"},"notes:edit:priority":function(e){return"Priority"},"notes:edit:add":function(e){return"Add note"},"notes:edit:clear":function(e){return"Clear all"},"notes:target:docs":function(e){return"Documentation"},"notes:target:ps":function(e){return"Paint-shop"}},pl:!0}}),define("app/nls/pl/orders",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r))in o?o[n]:o.other},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{"BREADCRUMB:browse":function(e){return"Zlecenia produkcyjne"},"BREADCRUMB:settings":function(e){return"Ustawienia"},"PAGE_ACTION:settings":function(e){return"Ustawienia"},"PAGE_ACTION:print":function(e){return"Drukuj zlecenie"},"PAGE_ACTION:openOrdersPrint":function(e){return"Drukuj zlecenia"},"PAGE_ACTION:jump:title":function(e){return"Skocz do zlecenia po nr"},"PAGE_ACTION:jump:placeholder":function(e){return"Nr zlecenia"},"PAGE_ACTION:cycleTime":function(e){return"Czas cyklu"},"PAGE_ACTION:notes":function(e){return"Uwagi"},"PAGE_ACTION:tags":function(e){return"Tagi"},"LIST:ACTION:print":function(e){return"Drukuj"},"openOrdersPrint:title":function(e){return"Drukowanie zlece"},"openOrdersPrint:orders":function(e){return"Podaj numery zlece:"},"openOrdersPrint:submit":function(e){return"Drukuj zlecenia"},"openOrdersPrint:msg:findFailure":function(e){return"Nie udao si wyszuka zlece."},"openOrdersPrint:msg:notFound":function(e){return t.p(e,"count",0,"pl",{one:"Zlecenie "+t.v(e,"orders")+" nie istnieje.",other:"Zlecenia nie istniej: "+t.v(e,"orders")})},"PANEL:TITLE:fap":function(e){return"Lista zgosze FAP"},"PANEL:TITLE:downtimes":function(e){return"Lista przestojw"},"PANEL:TITLE:childOrders":function(e){return"Lista podzlece"},"PANEL:TITLE:operations":function(e){return"Lista operacji"},"PANEL:TITLE:documents":function(e){return"Lista dokumentw"},"PANEL:TITLE:bom":function(e){return"Lista komponentw"},"PANEL:TITLE:bom:paint":function(e){return"Lista komponentw z malarni"},"PANEL:TITLE:eto":function(e){return"ETO"},"PANEL:TITLE:changes":function(e){return"Historia zmian"},"PANEL:TITLE:notes":function(e){return"Uwagi"},"PROPERTY:_id":function(e){return"Nr zlecenia"},"PROPERTY:sapCreatedAt":function(e){return"Czas utworzenia"},"PROPERTY:createdAt":function(e){return"Czas importu"},"PROPERTY:updatedAt":function(e){return"Czas aktualizacji"},"PROPERTY:nc12":function(e){return"12NC"},"PROPERTY:name":function(e){return"Nazwa wyrobu"},"PROPERTY:mrp":function(e){return"MRP"},"PROPERTY:qtys":function(e){return"Ilo"},"PROPERTY:qty":function(e){return"Ilo do zrobienia"},"PROPERTY:qtyDone":function(e){return"Ilo zrobiona"},"PROPERTY:unit":function(e){return"Jednostka"},"PROPERTY:startDate":function(e){return"Data startu (podst.)"},"PROPERTY:finishDate":function(e){return"Data ukoczenia (podst.)"},"PROPERTY:scheduledStartDate":function(e){return"Data startu (plan.)"},"PROPERTY:scheduledFinishDate":function(e){return"Data ukoczenia (plan.)"},"PROPERTY:leadingOrder":function(e){return"Zlecenie nadrzdne"},"PROPERTY:salesOrder":function(e){return"Zlecenie sprzeday"},"PROPERTY:salesOrderItem":function(e){return"Pozycja zlecenia sprzeday"},"PROPERTY:priority":function(e){return"Priorytet"},"PROPERTY:description":function(e){return"Opis"},"PROPERTY:soldToParty":function(e){return"Zleceniodawca"},"PROPERTY:delayReason":function(e){return"Powd opnienia"},"PROPERTY:delayComponent":function(e){return"Opniony komponent"},"PROPERTY:statuses":function(e){return"Status"},"PROPERTY:operations":function(e){return"Operacje"},"PROPERTY:operations.no":function(e){return"Nr"},"PROPERTY:operations.workCenter":function(e){return"WorkCenter"},"PROPERTY:operations.name":function(e){return"Nazwa operacji"},"PROPERTY:operations.qty":function(e){return"Ilo"},"PROPERTY:operations.qtyMax":function(e){return"Maks."},"PROPERTY:operations.unit":function(e){return"Jednostka"},"PROPERTY:operations.machineSetupTime":function(e){return"Czas <em>Machine Setup</em>"},"PROPERTY:operations.laborSetupTime":function(e){return"Czas <em>Labor Setup</em>"},"PROPERTY:operations.machineTime":function(e){return"Czas <em>Machine</em>"},"PROPERTY:operations.laborTime":function(e){return"Czas <em>Labor</em>"},"PROPERTY:documents":function(e){return"Dokumenty"},"PROPERTY:documents.item":function(e){return"Nr"},"PROPERTY:documents.nc15":function(e){return"15NC"},"PROPERTY:documents.name":function(e){return"Nazwa dokumentu"},"PROPERTY:bom":function(e){return"Komponenty"},"PROPERTY:bom.orderNo":function(e){return"Zlecenie"},"PROPERTY:bom.mrp":function(e){return"MRP"},"PROPERTY:bom.item":function(e){return"Nr"},"PROPERTY:bom.nc12":function(e){return"12NC"},"PROPERTY:bom.name":function(e){return"Nazwa"},"PROPERTY:bom.qty":function(e){return"Ilo"},"PROPERTY:bom.unit":function(e){return"Jednostka"},"PROPERTY:bom.unloadingPoint":function(e){return"Punkt rozadunku"},"PROPERTY:bom.supplyArea":function(e){return"Obszar zaopatrzenia"},"PROPERTY:bom.distStrategy":function(e){return"Strategia dostarczania"},"PROPERTY:whTime":function(e){return"Czas drop zone"},"PROPERTY:whDropZone":function(e){return"Grupa drop zone"},"PROPERTY:whStatus":function(e){return"Status drop zone"},"PROPERTY:psStatus":function(e){return"Status malarnii"},"PROPERTY:drillStatus":function(e){return"Status wiercenia"},"PROPERTY:enteredBy":function(e){return"Stworzone przez"},"PROPERTY:changedBy":function(e){return"Zmienione przez"},"PROPERTY:m4":function(e){return"4M"},"PROPERTY:etoCont":function(e){return"Kontynuacja pilota ETO"},"PROPERTY:notes":function(e){return"Uwagi"},"PROPERTY:tags":function(e){return"Tagi"},"m4:man":function(e){return"Czowiek"},"m4:machine":function(e){return"Maszyna"},"m4:material":function(e){return"Materia"},"m4:method":function(e){return"Metoda"},"whStatus:unknown":function(e){return"Nieokrelony"},"whStatus:todo":function(e){return"Do zrobienia"},"whStatus:done":function(e){return"Zrobione"},"psStatus:unknown":function(e){return"Nieokrelony"},"psStatus:new":function(e){return"Oczekiwanie"},"psStatus:started":function(e){return"W trakcie"},"psStatus:startedMsp":function(e){return"W trakcie (MSP)"},"psStatus:partial":function(e){return"Niekompletne"},"psStatus:finished":function(e){return"Zakoczone"},"psStatus:aside":function(e){return"Odstawione"},"psStatus:cancelled":function(e){return"Anulowane"},"drillStatus:unknown":function(e){return"Nieokrelony"},"drillStatus:new":function(e){return"Oczekiwanie"},"drillStatus:started":function(e){return"W trakcie"},"drillStatus:partial":function(e){return"Niekompletne"},"drillStatus:finished":function(e){return"Zakoczone"},"drillStatus:aside":function(e){return"Odstawione"},"drillStatus:cancelled":function(e){return"Anulowane"},"OPERATIONS:NO_DATA":function(e){return"Brak operacji."},"DOCUMENTS:NO_DATA":function(e){return"Brak dokumentw."},"BOM:NO_DATA":function(e){return"Brak komponentw."},"ETO:NO_DATA":function(e){return"Brak ETO."},"NOTES:NO_DATA":function(e){return"Brak uwag."},"changes:NO_DATA":function(e){return"Zlecenie nie byo modyfikowane."},"changes:operations":function(e){return t.p(e,"count",0,"pl",{one:"1 operacja",few:t.n(e,"count")+" operacje",other:t.n(e,"count")+" operacji"})},"changes:documents":function(e){return t.p(e,"count",0,"pl",{one:"1 dokument",few:t.n(e,"count")+" dokumenty",other:t.n(e,"count")+" dokumentw"})},"changes:bom":function(e){return t.p(e,"count",0,"pl",{one:"1 komponent",few:t.n(e,"count")+" komponenty",other:t.n(e,"count")+" komponentw"})},"changes:notes":function(e){return t.p(e,"count",0,"pl",{one:"1 uwaga",few:t.n(e,"count")+" uwagi",other:t.n(e,"count")+" uwag"})},"changes:change":function(e){return"Zmiana #"+t.v(e,"no")},"changes:time":function(e){return"Czas"},"changes:user":function(e){return"Uytkownik"},"changes:property":function(e){return"Atrybut"},"changes:oldValue":function(e){return"Stara warto"},"changes:newValue":function(e){return"Nowa warto"},"changes:qtyMax":function(e){return"Maks. ilo dla <em>"+t.v(e,"operationNo")+"</em>"},"changes:toggleSystemChanges":function(e){return"Ukryj zmiany systemowe"},"changes:timeEditor:error:format":function(e){return"Nieprawidowy format czasu. Oczekiwano rrrr-mm-dd gg:mm:ss."},"changes:timeEditor:error:min":function(e){return"Warto nie moe by wczeniejsza ni: "+t.v(e,"time")},"changes:timeEditor:error:max":function(e){return"Warto nie moe by pniejsza od: "+t.v(e,"time")},"filter:id:_id":function(e){return"Zlecenie"},"filter:id:nc12":function(e){return"Wyrb"},"filter:id:bom.nc12":function(e){return"Komponent"},"filter:id:documents.nc15":function(e){return"Dokument"},"filter:statuses:in":function(e){return"Wymagane statusy"},"filter:statuses:nin":function(e){return"Ignorowane statusy"},"filter:submit":function(e){return"Filtruj zlecenia"},"details:showMoreLink":function(e){return"Poka wicej szczegow zlecenia"},"details:opTimes:sap":function(e){return"Czas z SAP"},"details:opTimes:actual":function(e){return"Czas ze wspczynnikiem"},"details:opTimes:summed":function(e){return"Czas zgrupowany"},"commentForm:delayReason":function(e){return"Nowy powd opnienia"},"commentForm:delayComponent":function(e){return"12NC"},"commentForm:comment":function(e){return"Komentarz"},"commentForm:source":function(e){return"rdo"},"commentForm:source:other":function(e){return"Inne"},"commentForm:source:ps":function(e){return"Malarnia"},"commentForm:source:wh":function(e){return"Magazyn"},"commentForm:submit:comment":function(e){return"Komentuj"},"commentForm:submit:edit":function(e){return"Zmie powd opnienia"},"settings:tab:operations":function(e){return"Operacje"},"settings:tab:documents":function(e){return"Dokumenty"},"settings:tab:iptChecker":function(e){return"Sprawdzanie w IPT"},"settings:operations:groups":function(e){return"Grupy operacji"},"settings:operations:groups:help":function(e){return"W kadej linii naley poda nazwy operacji, ktre maj nalee do tej samej grupy, rozdzielone znakiem <code>|</code>. Do kadej nazwy operacji mona doda filtr WorkCenter po znaku <code>@</code>.<br>Na przykad: <code>wykrawanie @ PIVATIC5 | zaginanie</code>"},"settings:operations:timeCoeffs":function(e){return"Wspczynniki czasw operacji"},"settings:operations:timeCoeffs:help":function(e){return"W kadej linii naley poda MRP zlecenia, dla ktrego czasy operacji z SAP maj by zmienione, a nastpnie nazwy czasw i wartoci wspczynnikw.<br>Dostpne nazwy czasw to: <code>machineSetup</code>, <code>machine</code>, <code>laborSetup</code> oraz <code>labor</code>.<br>Na przykad: <code>KE3: labor=0.8 machineSetup=1.1</code>"},"settings:documents:excludedMrps":function(e){return"MRP wyczone z importu dokumentw"},"settings:documents:extra":function(e){return"Dodatkowe dokumenty"},"settings:iptChecker:toBusinessDays":function(e){return"Ilo dni do sprawdzenia"},"settings:iptChecker:mrps":function(e){return"MRP do sprawdzenia"},"jumpList:details":function(e){return"Szczegy_1"},"jumpList:fap":function(e){return"Zgoszenia FAP_2"},"jumpList:downtimes":function(e){return"Przestoje_3"},"jumpList:childOrders":function(e){return"Podzlecenia_4"},"jumpList:operations":function(e){return"Operacje_5"},"jumpList:documents":function(e){return"Dokumenty_Q"},"jumpList:notes":function(e){return"Uwagi_W"},"jumpList:bom":function(e){return"Komponenty_E"},"jumpList:eto":function(e){return"ETO_R"},"jumpList:changes":function(e){return"Zmiany_T"},"changeQtyMax:link":function(e){return"zmie"},"notes:edit:button":function(e){return"Zmie uwagi do zlecenia"},"notes:edit:title":function(e){return"Zmiana uwag do zlecenia"},"notes:edit:submit":function(e){return"Zapisz uwagi"},"notes:edit:text":function(e){return"Tre uwagi"},"notes:edit:priority":function(e){return"Priorytet"},"notes:edit:add":function(e){return"Dodaj uwag"},"notes:edit:clear":function(e){return"Usu wszystkie"},"notes:target:docs":function(e){return"Dokumentacja"},"notes:target:ps":function(e){return"Malarnia"}}}),define("app/orderDocuments/routes",["../router","../viewport","../user","../data/localStorage","./DocumentViewerState","./pages/DocumentViewerPage","../orders/pages/OrderDetailsPage","i18n!app/nls/orderDocuments","i18n!app/nls/orders"],function(e,t,n,r,i,o,a){"use strict";e.map("/",function(){var e=window.location.pathname.match(/doc(?:ument)?s\/(.*?)$/),n=window.COMPUTERNAME;e&&(n=e[1]),n||(n=r.getItem("DOCS_CLIENT_ID")||"DOCS-"+Date.now()),r.setItem("DOCS_CLIENT_ID",n),t.showPage(new o({model:new i({_id:n})}))}),e.map("/orders/:id",function(e){t.showPage(new a({modelId:e.params.id}))})}),define("app/wmes-docs-routes",["./orderDocuments/routes"],function(){"use strict"}),define("app/nls/core",["app/nls/locale/en"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r))in o?o[n]:o.other},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{root:{APP_NAME:function(e){return"WMES"},TITLE:function(e){return"Wannabe MES"},"MSG:LOADING":function(e){return"<i class='fa fa-spinner fa-spin'></i><span>Loading...</span>"},"MSG:LOADING_FAILURE":function(e){return"Loading failed."},"MSG:LOADING_SINGLE_FAILURE":function(e){return"Loading failed."},"MSG:SAVING":function(e){return"<i class='fa fa-spinner fa-spin'></i><span>Saving...</span>"},"MSG:SAVING_FAILURE":function(e){return"Saving failed."},"MSG:EXPORTING":function(e){return"<i class='fa fa-spinner fa-spin'></i><span>Exporting...</span>"},"MSG:EXPORTING_FAILURE":function(e){return"Exporting failed."},"MSG:LOG_OUT:FAILURE":function(e){return"Logging out failed."},"MSG:LOG_OUT:SUCCESS":function(e){return"You are now logged out!"},"MSG:POPUP_BLOCKED":function(e){return"Popup window was blocked."},"MSG:DELETED":function(e){return"Deleted: <em>"+t.v(e,"label")+"</em>."},"PAGE_ACTION:add":function(e){return"Add"},"PAGE_ACTION:edit":function(e){return"Edit"},"PAGE_ACTION:delete":function(e){return"Delete"},"PAGE_ACTION:filter":function(e){return"Filter"},"PAGE_ACTION:export":function(e){return"Export"},"PAGE_ACTION:export:csv":function(e){return"Export to CSV"},"PAGE_ACTION:export:xlsx":function(e){return"Export to XLSX"},"PAGE_ACTION:jump:title":function(e){return"Jump to details by ID"},"PAGE_ACTION:jump:placeholder":function(e){return"ID"},"LIST:COLUMN:actions":function(e){return"Actions"},"LIST:NO_DATA":function(e){return"No data."},"LIST:NO_DATA:cell":function(e){return""},"LIST:ACTION:viewDetails":function(e){return"View details"},"LIST:ACTION:edit":function(e){return"Edit"},"LIST:ACTION:delete":function(e){return"Delete"},"LIST:ACTION:print":function(e){return"Print"},"BREADCRUMB:addForm":function(e){return"Adding"},"BREADCRUMB:editForm":function(e){return"Editing"},"BREADCRUMB:ACTION_FORM:delete":function(e){return"Deleting"},"ERROR:notify:message":function(e){return"Click here to notify the admin about the error."},"ERROR:notify:success":function(e){return"The admin was notified!"},"ERROR:notify:failure":function(e){return"Failed to notify the admin."},"ERROR:notify:subject":function(e){return"["+t.v(e,"APP_NAME")+"] Error "+t.v(e,"code")+" from "+t.v(e,"user")},"ERROR:0:title":function(e){return"Error during loading"},"ERROR:0:message":function(e){return"Unexpected error during the execution of the request. Check whether you have a connection to the network and <a href=# data-reload>reload the page</a>."},"ERROR:400:title":function(e){return"Error 400: bad request"},"ERROR:400:message":function(e){return"The request cannot be fulfilled due to bad syntax."},"ERROR:403:title":function(e){return"Error 403: forbidden"},"ERROR:403:message":function(e){return"You do not have the right privileges to perform the requested action."},"ERROR:404:title":function(e){return"Error 404: not found"},"ERROR:404:message":function(e){return"The requested resource could not be found."},"ERROR:500:title":function(e){return"Error 500: internal server error"},"ERROR:500:message":function(e){return"Server encountered an unexpected condition that prevented it from completing the request."},"PAGINATION:FIRST_PAGE":function(e){return"First page"},"PAGINATION:PREV_PAGE":function(e){return"Previous page"},"PAGINATION:NEXT_PAGE":function(e){return"Next page"},"PAGINATION:LAST_PAGE":function(e){return"Last page"},"BOOL:true":function(e){return"Yes"},"BOOL:false":function(e){return"No"},"BOOL:null":function(e){return"N/A"},"#":function(e){return"No."},GUEST_USER_NAME:function(e){return"Guest"},"NAVBAR:TOGGLE":function(e){return"Show menu"},"NAVBAR:DASHBOARD":function(e){return"Dashboard"},"NAVBAR:EVENTS":function(e){return"Events"},"NAVBAR:ORDERS":function(e){return"Orders"},"NAVBAR:MECH_ORDERS":function(e){return"Mechanical orders"},"NAVBAR:OTHER_ORDERS":function(e){return"Production orders"},"NAVBAR:EMPTY_ORDERS":function(e){return"Empty WMES orders"},"NAVBAR:LINES":function(e){return"Production lines"},"NAVBAR:USERS":function(e){return"Users"},"NAVBAR:MY_ACCOUNT":function(e){return"My account"},"NAVBAR:UI_LOCALE":function(e){return"UI locale"},"NAVBAR:LOCALE_PL":function(e){return"In Polish"},"NAVBAR:LOCALE_US":function(e){return"In English"},"NAVBAR:LOG_IN":function(e){return"Log in"},"NAVBAR:LOG_OUT":function(e){return"Log out"},"NAVBAR:DICTIONARIES":function(e){return"Dictionaries"},"NAVBAR:TOOLS":function(e){return"Tools"},"NAVBAR:ORDER_STATUSES":function(e){return"Order statuses"},"NAVBAR:DELAY_REASONS":function(e){return"Delay reasons"},"NAVBAR:DOWNTIME_REASONS":function(e){return"Downtime reasons"},"NAVBAR:LOSS_REASONS":function(e){return"Loss reasons"},"NAVBAR:AORS":function(e){return"Areas of responsibility"},"NAVBAR:WORK_CENTERS":function(e){return"WorkCenters"},"NAVBAR:COMPANIES":function(e){return"Companies"},"NAVBAR:DIVISIONS":function(e){return"Divisions"},"NAVBAR:SUBDIVISIONS":function(e){return"Subdivisions"},"NAVBAR:MRP_CONTROLLERS":function(e){return"MRP Controllers"},"NAVBAR:PROD_FUNCTIONS":function(e){return"Functions"},"NAVBAR:PROD_FLOWS":function(e){return"Production flows"},"NAVBAR:PROD_TASKS":function(e){return"Production tasks"},"NAVBAR:PROD_LINES":function(e){return"Production lines"},"NAVBAR:PLANNING:main":function(e){return"Planning"},"NAVBAR:PLANNING:plans":function(e){return"Plans"},"NAVBAR:PLANNING:hourly":function(e){return"hourly"},"NAVBAR:PLANNING:daily":function(e){return"daily"},"NAVBAR:PLANNING:drilling":function(e){return"Drilling"},"NAVBAR:PLANNING:wiring":function(e){return"Wiring"},"NAVBAR:PLANNING:paintShop":function(e){return"Paint shop"},"NAVBAR:PLANNING:paintShop:load":function(e){return"Load"},"NAVBAR:PLANNING:wh":function(e){return"Warehouse"},"NAVBAR:PLANNING:wh:old":function(e){return"old"},"NAVBAR:PLANNING:wh:new":function(e){return"new"},"NAVBAR:PLANNING:wh:pickup":function(e){return"Pickup"},"NAVBAR:PLANNING:wh:delivery:components":function(e){return"FIFO delivery"},"NAVBAR:PLANNING:wh:delivery:packaging":function(e){return"Packaging delivery"},"NAVBAR:PLANNING:wh:delivery:ps":function(e){return"Paint-shop delivery"},"NAVBAR:PLANNING:wh:problems":function(e){return"Problems"},"NAVBAR:PLANNING:wh:deliveredOrders":function(e){return"Delivered orders"},"NAVBAR:PLANNING:wh:downtimes":function(e){return"Downtimes"},"NAVBAR:PLANNING:wh:setCarts":function(e){return"Carts"},"NAVBAR:PLANNING:wh:lines":function(e){return"Lines"},"NAVBAR:PLANNING:wh:events":function(e){return"Events"},"NAVBAR:PLANNING:wh:settings":function(e){return"Settings"},"NAVBAR:PLANNING:all":function(e){return"All"},"NAVBAR:PLANNING:-1d":function(e){return"Yesterday"},"NAVBAR:PLANNING:0d":function(e){return"Today"},"NAVBAR:PLANNING:1d":function(e){return"Tomorrow"},"NAVBAR:PLANNING:2d":function(e){return"Day after tomorrow"},"NAVBAR:PLANNING:2d:help":function(e){return"Plan available around 17:00."},"NAVBAR:FTE":function(e){return"FTE"},"NAVBAR:FTE:MASTER":function(e){return"Production"},"NAVBAR:FTE:WH":function(e){return"Warehouse"},"NAVBAR:FTE:LEADER":function(e){return"Other"},"NAVBAR:FTE:SETTINGS":function(e){return"Settings"},"NAVBAR:VIS":function(e){return"Visualization"},"NAVBAR:VIS:STRUCTURE":function(e){return"Org Unit structure"},"NAVBAR:PRESS_WORKSHEETS":function(e){return"Worksheets"},"NAVBAR:REPORTS":function(e){return"Reports"},"NAVBAR:REPORTS:1":function(e){return"PROD, EFF, Downtime"},"NAVBAR:REPORTS:clip":function(e){return"CLIP"},"NAVBAR:REPORTS:3":function(e){return"OEE"},"NAVBAR:REPORTS:4":function(e){return"Operators"},"NAVBAR:REPORTS:5":function(e){return"HR"},"NAVBAR:REPORTS:6":function(e){return"Warehouse"},"NAVBAR:REPORTS:7":function(e){return"Downtimes in AORs"},"NAVBAR:REPORTS:8":function(e){return"Lean"},"NAVBAR:REPORTS:9":function(e){return"Planned line utilization"},"NAVBAR:REPORTS:rearm":function(e){return"Retooling"},"NAVBAR:REPORTS:ct":function(e){return"Cycle Time"},"NAVBAR:REPORTS:ct:pce":function(e){return"PCEs"},"NAVBAR:REPORTS:ct:groups":function(e){return"Product groups"},"NAVBAR:REPORTS:ct:results":function(e){return"Results"},"NAVBAR:PROD":function(e){return"Production"},"NAVBAR:PROD:DATA":function(e){return"Production data"},"NAVBAR:PROD:LOG_ENTRIES":function(e){return"Operation log"},"NAVBAR:PROD:SHIFTS":function(e){return"Shifts"},"NAVBAR:PROD:SHIFT_ORDERS":function(e){return"Orders"},"NAVBAR:PROD:DOWNTIMES":function(e){return"Downtimes"},"NAVBAR:PROD:ALERTS":function(e){return"Alerts"},"NAVBAR:PROD:CHANGE_REQUESTS":function(e){return"Change requests"},"NAVBAR:PROD:SERIAL_NUMBERS":function(e){return"Serial numbers"},"NAVBAR:PROD:SETTINGS":function(e){return"Settings"},"NAVBAR:testing":function(e){return"Testing"},"NAVBAR:xiconf":function(e){return"Xiconf"},"NAVBAR:xiconf:clients":function(e){return"Clients"},"NAVBAR:xiconf:orders":function(e){return"Orders"},"NAVBAR:xiconf:results":function(e){return"Results"},"NAVBAR:xiconf:programs":function(e){return"Programs"},"NAVBAR:xiconf:hidLamps":function(e){return"HID lamps"},"NAVBAR:xiconf:componentWeights":function(e){return"Component weights"},"NAVBAR:snf":function(e){return"SNF"},"NAVBAR:snf:results":function(e){return"Results"},"NAVBAR:snf:programs":function(e){return"Programs"},"NAVBAR:trw":function(e){return"TRW"},"NAVBAR:trw:results":function(e){return"Results"},"NAVBAR:trw:testers":function(e){return"Controllers"},"NAVBAR:trw:bases":function(e){return"Bases"},"NAVBAR:trw:programs":function(e){return"Programs"},"NAVBAR:DOCUMENTS":function(e){return"Documentation"},"NAVBAR:DOCUMENTS:TREE":function(e){return"Documents"},"NAVBAR:DOCUMENTS:CLIENTS":function(e){return"Clients"},"NAVBAR:DOCUMENTS:SETTINGS":function(e){return"Settings"},"NAVBAR:DOCUMENTS:CONFIRMATIONS":function(e){return"Confirmations"},"NAVBAR:VENDORS":function(e){return"Vendors"},"NAVBAR:PURCHASE_ORDERS":function(e){return"Purchase orders"},"NAVBAR:MONITORING":function(e){return"Monitoring"},"NAVBAR:MONITORING:LAYOUT":function(e){return"Factory layout"},"NAVBAR:MONITORING:LIST":function(e){return"Production line list"},"NAVBAR:VENDOR_NC12S":function(e){return"12NC database"},"NAVBAR:LICENSES":function(e){return"Licenses"},"NAVBAR:ISA_PALLET_KINDS":function(e){return"Pallet kinds"},"NAVBAR:ISA":function(e){return"Intermediate storage areas"},"NAVBAR:INVALID_ORDERS":function(e){return"Invalid IPT orders"},"NAVBAR:IPT_CHECK":function(e){return"IPT orders checker"},"NAVBAR:SAP_LABOR_TIME_FIXER":function(e){return"Labor Time fixer"},"NAVBAR:PRINTERS":function(e){return"Printers"},"NAVBAR:PKHD_STRATEGIES":function(e){return"Component dist. strategies"},"NAVBAR:kanban":function(e){return"Component DB"},"NAVBAR:pfep":function(e){return"PFEP DB"},"NAVBAR:layout":function(e){return"Layout"},"NAVBAR:toolcal":function(e){return"Tool calibration"},"NAVBAR:luma2":function(e){return"Luma gen. 2"},"NAVBAR:luca":function(e){return"LUCA Pick by Light"},"NAVBAR:logs:browserErrors":function(e){return"Client-side errors"},"NAVBAR:ct":function(e){return"Cycle time"},"NAVBAR:fa":function(e){return"Fixed Assets"},"NAVBAR:dummyPaint":function(e){return"Dummy paint"},"NAVBAR:compRel:entries":function(e){return"Component releases"},"NAVBAR:OPINION:main":function(e){return"Opinion survey"},"NAVBAR:OPINION:current":function(e){return"Current survey"},"NAVBAR:OPINION:report":function(e){return"Report"},"NAVBAR:OPINION:actions":function(e){return"Corrective actions"},"NAVBAR:OPINION:responses":function(e){return"Responses"},"NAVBAR:OPINION:scanning":function(e){return"Scanning"},"NAVBAR:OPINION:scanTemplates":function(e){return"Templates"},"NAVBAR:OPINION:omrResults":function(e){return"Results"},"NAVBAR:OPINION:dictionaries":function(e){return"Dictionaries"},"NAVBAR:OPINION:surveys":function(e){return"Surveys"},"NAVBAR:OPINION:employers":function(e){return"Employers"},"NAVBAR:OPINION:divisions":function(e){return"Divisions"},"NAVBAR:OPINION:questions":function(e){return"Questions"},"NAVBAR:KAIZEN:main":function(e){return"Near miss"},"NAVBAR:KAIZEN:orders":function(e){return"Near misses"},"NAVBAR:KAIZEN:all":function(e){return"All"},"NAVBAR:KAIZEN:open":function(e){return"Only open"},"NAVBAR:KAIZEN:mine":function(e){return"Only mine"},"NAVBAR:KAIZEN:unseen":function(e){return"Only unread"},"NAVBAR:KAIZEN:reports":function(e){return"Reports"},"NAVBAR:KAIZEN:reports:summary":function(e){return"Summary"},"NAVBAR:KAIZEN:reports:engagement":function(e){return"Engagement"},"NAVBAR:KAIZEN:reports:metrics":function(e){return"Metrics"},"NAVBAR:KAIZEN:reports:count":function(e){return"Number of Near Misses"},"NAVBAR:KAIZEN:reports:observations":function(e){return"Number of Observations"},"NAVBAR:KAIZEN:reports:minutes":function(e){return"Number of Minutes"},"NAVBAR:KAIZEN:dictionaries":function(e){return"Dictionaries"},"NAVBAR:KAIZEN:sections":function(e){return"Sections"},"NAVBAR:KAIZEN:areas":function(e){return"Areas"},"NAVBAR:KAIZEN:categories":function(e){return"Categories"},"NAVBAR:KAIZEN:causes":function(e){return"Causes"},"NAVBAR:KAIZEN:risks":function(e){return"Risks"},"NAVBAR:KAIZEN:behaviours":function(e){return"Behaviours"},"NAVBAR:KAIZEN:help":function(e){return"Help"},"NAVBAR:KAIZEN:observations":function(e){return"Observations"},"NAVBAR:KAIZEN:minutesForSafety":function(e){return"Minutes for Safety"},"NAVBAR:SUGGESTIONS:main":function(e){return"Suggestions"},"NAVBAR:SUGGESTIONS:orders":function(e){return"Entries"},"NAVBAR:SUGGESTIONS:all":function(e){return"All"},"NAVBAR:SUGGESTIONS:open":function(e){return"Only open"},"NAVBAR:SUGGESTIONS:mine":function(e){return"Only mine"},"NAVBAR:SUGGESTIONS:unseen":function(e){return"Only unread"},"NAVBAR:SUGGESTIONS:reports":function(e){return"Reports"},"NAVBAR:SUGGESTIONS:reports:count":function(e){return"Number of entries"},"NAVBAR:SUGGESTIONS:reports:summary":function(e){return"Summary"},"NAVBAR:SUGGESTIONS:reports:engagement":function(e){return"Engagement"},"NAVBAR:SUGGESTIONS:dictionaries":function(e){return"Dictionaries"},"NAVBAR:SUGGESTIONS:sections":function(e){return"Sections"},"NAVBAR:SUGGESTIONS:categories":function(e){return"Categories"},"NAVBAR:SUGGESTIONS:productFamilies":function(e){return"Product families"},"NAVBAR:SUGGESTIONS:help":function(e){return"Help"},"NAVBAR:QI:main":function(e){return"Quality Inspection"},"NAVBAR:QI:results":function(e){return"Results"},"NAVBAR:QI:results:all":function(e){return"All"},"NAVBAR:QI:results:good":function(e){return"Compliant"},"NAVBAR:QI:results:bad":function(e){return"Non-compliant"},"NAVBAR:QI:reports":function(e){return"Reports"},"NAVBAR:QI:reports:count":function(e){return"Count"},"NAVBAR:QI:reports:okRatio":function(e){return"% of OK goods"},"NAVBAR:QI:reports:nokRatio":function(e){return"% of NOK goods"},"NAVBAR:QI:reports:outgoingQuality":function(e){return"Outgoing quality"},"NAVBAR:QI:dictionaries":function(e){return"Dictionaries"},"NAVBAR:QI:kinds":function(e){return"Kinds"},"NAVBAR:QI:errorCategories":function(e){return"Error categories"},"NAVBAR:QI:faults":function(e){return"Faults"},"NAVBAR:QI:standards":function(e){return"Standards"},"NAVBAR:QI:actionStatuses":function(e){return"Action statuses"},"NAVBAR:SEARCH:help":function(e){return"Search by order no, 12NC or date."},"NAVBAR:SEARCH:empty":function(e){return"No results."},"NAVBAR:SEARCH:fullOrderNo":function(e){return"Order no "+t.v(e,"orderNo")},"NAVBAR:SEARCH:partialOrderNo":function(e){return"Orders no "+t.v(e,"orderNo")+"..."},"NAVBAR:SEARCH:fullNc12":function(e){return"12NC "+t.v(e,"nc12")},"NAVBAR:SEARCH:partialNc12":function(e){return"12NC "+t.v(e,"nc12")+"..."},"NAVBAR:SEARCH:fullNc15":function(e){return"15NC "+t.v(e,"nc15")},"NAVBAR:SEARCH:searchName":function(e){return"Users"},"NAVBAR:SEARCH:sapDetails":function(e){return"details from SAP"},"NAVBAR:SEARCH:xiconfDetails":function(e){return"details from the tests db"},"NAVBAR:SEARCH:xiconfResults":function(e){return"test results"},"NAVBAR:SEARCH:prodShiftOrders":function(e){return"list from production lines"},"NAVBAR:SEARCH:prodShiftOrdersList":function(e){return"orders list from production lines"},"NAVBAR:SEARCH:prodDowntimes":function(e){return"list of downtimes"},"NAVBAR:SEARCH:qiResults":function(e){return"QI results"},"NAVBAR:SEARCH:mechOrders":function(e){return"list of mechanical orders"},"NAVBAR:SEARCH:sapOrders":function(e){return"list of orders from SAP"},"NAVBAR:SEARCH:sapOrdersBom":function(e){return"list of orders from SAP with the component"},"NAVBAR:SEARCH:sapOrdersDoc":function(e){return"list of orders from SAP with the document"},"NAVBAR:SEARCH:sapOrdersStart":function(e){return"list of orders from SAP by start date"},"NAVBAR:SEARCH:sapOrdersFinish":function(e){return"list of orders from SAP by finish date"},"NAVBAR:SEARCH:sapList":function(e){return"list from SAP"},"NAVBAR:SEARCH:xiconfOrders":function(e){return"orders list from the tests db"},"NAVBAR:SEARCH:xiconfList":function(e){return"list from the tests db"},"NAVBAR:SEARCH:worksheetOrders":function(e){return"orders list from worksheets"},"NAVBAR:SEARCH:fte:master":function(e){return"list of FTE (production)"},"NAVBAR:SEARCH:fte:wh":function(e){return"list of FTE (warehouse)"},"NAVBAR:SEARCH:fte:leader":function(e){return"list of FTE (other)"},"NAVBAR:SEARCH:hourlyPlans":function(e){return"list of hourly plans"},"NAVBAR:SEARCH:hourlyPlan":function(e){return"hourly plan"},"NAVBAR:SEARCH:prodShifts":function(e){return"list of production shifts"},"NAVBAR:SEARCH:document":function(e){return"document in the catalog"},"NAVBAR:SEARCH:documentFile":function(e){return"documentation file"},"NAVBAR:SEARCH:entryId":function(e){return"Entry no "+t.v(e,"entryId")},"NAVBAR:SEARCH:kaizenOrders":function(e){return"Near miss"},"NAVBAR:SEARCH:suggestions":function(e){return"Suggestion"},"NAVBAR:SEARCH:behaviorObsCards":function(e){return"Observation"},"NAVBAR:SEARCH:minutesForSafetyCards":function(e){return"Minutes"},"NAVBAR:SEARCH:d8":function(e){return"8D"},"NAVBAR:SEARCH:qi":function(e){return"Quality Inspection"},"NAVBAR:SEARCH:plan:prod":function(e){return"production plan"},"NAVBAR:SEARCH:plan:wh":function(e){return"warehouse plan"},"NAVBAR:SEARCH:plan:ps":function(e){return"paint shop plan"},"NAVBAR:SEARCH:fap":function(e){return"FAP"},"NAVBAR:SEARCH:fapEntries":function(e){return"FAP entries"},"NAVBAR:SEARCH:kanbanEntries":function(e){return"kanbans"},"NAVBAR:SEARCH:kanbanComponent":function(e){return"kanban component"},"NAVBAR:SEARCH:cycleTime":function(e){return"cycle time"},"NAVBAR:SEARCH:balancing":function(e){return"balancing"},"NAVBAR:SEARCH:deliveredOrders":function(e){return"delivered orders"},"NAVBAR:mor":function(e){return"Matrix of responsibility"},"NAVBAR:pila:osh":function(e){return"OSH"},"NAVBAR:pila:help":function(e){return"Help"},"NAVBAR:pila:reports":function(e){return"Reports"},"NAVBAR:pila:nearMiss":function(e){return"Near misses"},"NAVBAR:pila:nearMiss:entries":function(e){return"Entries"},"NAVBAR:pila:suggestions":function(e){return"Suggestions"},"NAVBAR:pila:suggestions:entries":function(e){return"Entries"},"NAVBAR:pila:observations":function(e){return"Observations"},"NAVBAR:pila:observations:entries":function(e){return"Cards"},"NAVBAR:pila:mfs":function(e){return"Minutes"},"NAVBAR:pila:mfs:entries":function(e){return"Cards"},"ACTION_FORM:BUTTON":function(e){return"Perform action"},"ACTION_FORM:BUTTON:cancel":function(e){return"Cancel"},"ACTION_FORM:MESSAGE":function(e){return"Are you sure you want to perform the requested action?"},"ACTION_FORM:MESSAGE:failure":function(e){return"Action failed."},"ACTION_FORM:DIALOG_TITLE:delete":function(e){return"Deletion confirmation"},"ACTION_FORM:BUTTON:delete":function(e){return"Delete"},"ACTION_FORM:MESSAGE:delete":function(e){return"Are you sure you want to delete the chosen item?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Are you sure you want to delete <em>"+t.v(e,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(e){return"Deleting failed."},"FORM:ACTION:add":function(e){return"Add"},"FORM:ACTION:edit":function(e){return"Edit"},"FORM:ACTION:save":function(e){return"Save"},"FORM:ERROR:addFailure":function(e){return"Adding failed."},"FORM:ERROR:editFailure":function(e){return"Editing failed."},"ORG_UNIT:division":function(e){return"Division"},"ORG_UNIT:subdivision":function(e){return"Subdivision"},"ORG_UNIT:mrpController":function(e){return"MRP Controller"},"ORG_UNIT:mrpControllers":function(e){return"MRP Controller"},"ORG_UNIT:prodFlow":function(e){return"Production flow"},"ORG_UNIT:workCenter":function(e){return"WorkCenter"},"ORG_UNIT:prodLine":function(e){return"Production line"},SHIFT:function(e){return t.v(e,"date")+", "+t.s(e,"shift",{1:"I",2:"II",3:"III",other:t.v(e,"shift")})},"SHIFT:1":function(e){return"I"},"SHIFT:2":function(e){return"II"},"SHIFT:3":function(e){return"III"},"SHIFT:0":function(e){return"Any"},QUARTER:function(e){return t.v(e,"quarter")+" quarter "+t.v(e,"year")},"QUARTER:1":function(e){return"I"},"QUARTER:2":function(e){return"II"},"QUARTER:3":function(e){return"III"},"QUARTER:4":function(e){return"IV"},"QUARTER:0":function(e){return"Any"},"highcharts:contextButtonTitle":function(e){return"Chart's context menu"},"highcharts:downloadJPEG":function(e){return"Save as JPEG"},"highcharts:downloadPDF":function(e){return"Save as PDF"},"highcharts:downloadPNG":function(e){return"Save as PNG"},"highcharts:downloadSVG":function(e){return"Save as SVG"},"highcharts:downloadCSV":function(e){return"Save as CSV"},"highcharts:printChart":function(e){return"Print the chart"},"highcharts:decimalPoint":function(e){return"."},"highcharts:thousandsSep":function(e){return","},"highcharts:noData":function(e){return"No data."},"highcharts:resetZoom":function(e){return"1:1"},"highcharts:resetZoomTitle":function(e){return"Reset the zoom level to 1:1"},"highcharts:loading":function(e){return"Loading..."},"highcharts:months":function(e){return"January_February_March_April_May_June_July_August_September_October_November_December"},"highcharts:shortMonths":function(e){return"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec"},"highcharts:weekdays":function(e){return"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday"},"dataTables:emptyTable":function(e){return"No data."},"dataTables:loadingRecords":function(e){return"Loading..."},"dataTables:loadingFailed":function(e){return"Loading failed."},"feedback:button:text":function(e){return"Feedback"},"feedback:button:tooltip":function(e){return"Report bugs, notes, opinions or ideas!"},"colorPicker:label":function(e){return"Color"},"filter:date":function(e){return"Date"},"filter:date:from":function(e){return"From"},"filter:date:from:info":function(e){return"Data from 06:00 of the selected day"},"filter:date:to":function(e){return"To"},"filter:date:to:info":function(e){return"Data to 06:00 of the selected day"},"filter:shift":function(e){return"Shift"},"filter:orgUnit":function(e){return"Organizational unit"},"filter:submit":function(e){return"Filter"},"filter:filters":function(e){return"Show additional filters"},"filter:limit":function(e){return"Limit"},"filter:show":function(e){return"Show filter"},"filter:hide":function(e){return"Hide filter"},"placeholder:date":function(e){return"yyyy-mm-dd"},"placeholder:time":function(e){return"--:--"},"placeholder:month":function(e){return"yyyy-mm"},"PRINT_PAGE:FT:PAGE_NO":function(e){return"Page <span class=print-page-no>?</span> of <span class=print-page-count>?</span>"},"PRINT_PAGE:FT:INFO":function(e){return"Printout generated at <span class=print-page-date>?</span> by <span class=print-page-user>?</span>."},"html2pdf:progress":function(e){return"Generating the printout..."},"html2pdf:failure":function(e){return"Printout generation failed."},"html2pdf:printing":function(e){return"Sending the printout to the printer..."},"html2pdf:printing:success":function(e){return"Printout was successfully sent to the printer."},"html2pdf:printing:failure":function(e){return"Sending the printout to the printer failed."},"dateTimeRange:placeholder:date":function(e){return"yyyy-mm-dd"},"dateTimeRange:placeholder:time":function(e){return"hh:mm"},"dateTimeRange:label:date":function(e){return"Date"},"dateTimeRange:label:date+time":function(e){return"Time"},"dateTimeRange:label:month":function(e){return"Date"},"dateTimeRange:+0+1":function(e){return"current"},"dateTimeRange:-1+0":function(e){return"previous"},"dateTimeRange:-2+0":function(e){return"last 2"},"dateTimeRange:-3+0":function(e){return"last 3"},"dateTimeRange:-4+0":function(e){return"last 4"},"dateTimeRange:-6+0":function(e){return"last 6"},"dateTimeRange:-7+0":function(e){return"last 7"},"dateTimeRange:+0+7":function(e){return"next 7"},"dateTimeRange:-14+0":function(e){return"last 14"},"dateTimeRange:-28+0":function(e){return"last 28"},"dateTimeRange:shifts":function(e){return"Shift"},"dateTimeRange:shifts:1":function(e){return"I"},"dateTimeRange:shifts:2":function(e){return"II"},"dateTimeRange:shifts:3":function(e){return"III"},"dateTimeRange:days":function(e){return"Day"},"dateTimeRange:days:+0+1":function(e){return"today"},"dateTimeRange:days:-1+0":function(e){return"yesterday"},"dateTimeRange:days:+1+2":function(e){return"tomorrow"},"dateTimeRange:weeks":function(e){return"Week"},"dateTimeRange:months":function(e){return"Month"},"dateTimeRange:quarters":function(e){return"Quarter"},"dateTimeRange:quarters:1":function(e){return"I"},"dateTimeRange:quarters:2":function(e){return"II"},"dateTimeRange:quarters:3":function(e){return"III"},"dateTimeRange:quarters:4":function(e){return"IV"},"dateTimeRange:years":function(e){return"Year"},"dateTimeRange:help":function(e){return"Hold <kbd>Alt</kbd> while clicking on an option to automatically submit the form."},"embedded:actions:switch":function(e){return"Switch app"},"embedded:actions:refresh":function(e){return"Refresh app"},"embedded:actions:config":function(e){return"Configure"},"embedded:actions:reboot":function(e){return"Reboot"},"embedded:actions:shutdown":function(e){return"Shutdown"},"embedded:actions:resetBrowser":function(e){return"Reset browser"},"embedded:actions:restartBrowser":function(e){return"Restart browser"},"embedded:actions:noKiosk":function(e){return"Turn off kiosk mode"},"embedded:apps:operator":function(e){return"Operator"},"embedded:apps:documents":function(e){return"Documents"},"embedded:apps:xiconf":function(e){return"LED scanning"},"embedded:apps:maxos":function(e){return"MAXOS visualization"},"embedded:apps:drilling":function(e){return"Drilling"},"embedded:apps:ps-queue":function(e){return"Paint-shop queue"},"embedded:apps:ps-load":function(e){return"Paint-shop load"},"embedded:apps:isa":function(e){return"ISA"},"embedded:apps:remote":function(e){return"Remote"},"embedded:apps:heff":function(e){return"Hourly efficiency"},"embedded:apps:trw":function(e){return"TRW"},"embedded:reboot:title":function(e){return"Rebooting"},"embedded:reboot:message":function(e){return"Are you sure you want to reboot the computer?"},"embedded:reboot:yes":function(e){return"Reboot"},"embedded:reboot:no":function(e){return"Cancel"},"embedded:shutdown:title":function(e){return"Shutting down"},"embedded:shutdown:message":function(e){return"Are you sure you want to shutdown the computer?"},"embedded:shutdown:yes":function(e){return"Shutdown"},"embedded:shutdown:no":function(e){return"Cancel"},"PANEL:TITLE:details":function(e){return"Details"},"PANEL:TITLE:addForm":function(e){return"Add form"},"PANEL:TITLE:editForm":function(e){return"Edit form"},"lang:pl":function(e){return"Polish (pl)"},"lang:en":function(e){return"English (en)"},labelCopySuffix:function(e){return t.v(e,"label")+" (copy)"}},pl:!0}}),define("app/nls/pl/core",["app/nls/locale/pl"],function(e){var t={lc:{pl:function(t){return e(t)},en:function(t){return e(t)}},c:function(e,t){if(!e)throw new Error("MessageFormat: Data required for '"+t+"'.")},n:function(e,t,n){if(isNaN(e[t]))throw new Error("MessageFormat: '"+t+"' isn't a number.");return e[t]-(n||0)},v:function(e,n){return t.c(e,n),e[n]},p:function(e,n,r,i,o){return t.c(e,n),e[n]in o?o[e[n]]:(n=t.lc[i](e[n]-r))in o?o[n]:o.other},s:function(e,n,r){return t.c(e,n),e[n]in r?r[e[n]]:r.other}};return{APP_NAME:function(e){return"WMES"},TITLE:function(e){return"Wannabe MES"},"MSG:LOADING":function(e){return"<i class='fa fa-spinner fa-spin'></i><span>adowanie...</span>"},"MSG:LOADING_FAILURE":function(e){return"adowanie nie powiodo si."},"MSG:LOADING_SINGLE_FAILURE":function(e){return"adowanie nie powiodo si."},"MSG:SAVING":function(e){return"<i class='fa fa-spinner fa-spin'></i><span>Zapisywanie...</span>"},"MSG:SAVING_FAILURE":function(e){return"Zapisywanie nie powiodo si."},"MSG:EXPORTING":function(e){return"<i class='fa fa-spinner fa-spin'></i><span>Eksportowanie...</span>"},"MSG:EXPORTING_FAILURE":function(e){return"Eksportowanie nie powiodo si."},"MSG:LOG_OUT:FAILURE":function(e){return"Wylogowanie nie powiodo si."},"MSG:LOG_OUT:SUCCESS":function(e){return"Zostae wylogowany!"},"MSG:POPUP_BLOCKED":function(e){return"Wyskakujce okienko zostao zablokowane."},"MSG:DELETED":function(e){return"Usunito: <em>"+t.v(e,"label")+"</em>."},"MSG:jump:404":function(e){return"Nie znaleziono: "+t.v(e,"rid")},"PAGE_ACTION:add":function(e){return"Dodaj"},"PAGE_ACTION:edit":function(e){return"Edytuj"},"PAGE_ACTION:delete":function(e){return"Usu"},"PAGE_ACTION:filter":function(e){return"Filtruj"},"PAGE_ACTION:export":function(e){return"Eksportuj"},"PAGE_ACTION:export:csv":function(e){return"Eksportuj do CSV"},"PAGE_ACTION:export:xlsx":function(e){return"Eksportuj do XLSX"},"PAGE_ACTION:jump:title":function(e){return"Skocz do szczegw po ID"},"PAGE_ACTION:jump:placeholder":function(e){return"ID"},"LIST:COLUMN:actions":function(e){return"Akcje"},"LIST:NO_DATA":function(e){return"Brak danych."},"LIST:NO_DATA:cell":function(e){return""},"LIST:ACTION:viewDetails":function(e){return"Poka szczegy"},"LIST:ACTION:edit":function(e){return"Edytuj"},"LIST:ACTION:delete":function(e){return"Usu"},"LIST:ACTION:print":function(e){return"Drukuj"},"BREADCRUMB:addForm":function(e){return"Dodawanie"},"BREADCRUMB:editForm":function(e){return"Edycja"},"BREADCRUMB:ACTION_FORM:delete":function(e){return"Usuwanie"},"ERROR:notify:message":function(e){return"Kliknij tutaj, aby poinformowa administratora o bdzie."},"ERROR:notify:success":function(e){return"Administrator zosta powiadomiony o bdzie!"},"ERROR:notify:failure":function(e){return"Nie udao si powiadomi administratora."},"ERROR:notify:subject":function(e){return"["+t.v(e,"APP_NAME")+"] Bd "+t.v(e,"code")+" od "+t.v(e,"user")},"ERROR:0:title":function(e){return"Bd podczas adowania"},"ERROR:0:message":function(e){return"Nieoczekiwany bd podczas wykonywania dania. Sprawd, czy masz poczenie z sieci i <a href=# data-reload>zaaduj ponownie stron</a>."},"ERROR:400:title":function(e){return"Bd 400: nieprawidowe zapytanie"},"ERROR:400:message":function(e){return"danie nie moe by obsuone przez serwer z powodu bdnej skadni zapytania."},"ERROR:401:title":function(e){return"Bd 401: nieautoryzowany dostp"},"ERROR:401:message":function(e){return"danie wymaga uwierzytelnienia. <a href='#login'>Kliknij tutaj, aby przej do formularza logowania</a>."},"ERROR:403:title":function(e){return"Bd 403: zabroniony"},"ERROR:403:message":function(e){return"Nie masz uprawnie do wykonania danej akcji."},"ERROR:403:guest:message":function(e){return"Nie masz uprawnie do wykonania danej akcji. <a href='#login'>Kliknij tutaj, aby przej do formularza logowania</a>."},"ERROR:404:title":function(e){return"Bd 404: nie znaleziono"},"ERROR:404:message":function(e){return"Wybrana strona nigdy nie istniaa lub zostaa usunita."},"ERROR:500:title":function(e){return"Bd 500: wewntrzny bd serwera"},"ERROR:500:message":function(e){return"Serwer napotka niespodziewane trudnoci, ktre uniemoliwiy zrealizowanie dania."},"ERROR:503:title":function(e){return"Bd 503: usuga niedostpna"},"ERROR:503:message":function(e){return"Serwer nie jest w stanie w danej chwili zrealizowa dania ze wzgldu na przecienie lub przerw konserwacyjn."},"ERROR:504:title":function(e){return"Bd 504: przekroczony czas bramy"},"ERROR:504:message":function(e){return"Serwer bramy nie otrzyma w ustalonym czasie odpowiedzi od nadrzdnego serwera."},"PAGINATION:FIRST_PAGE":function(e){return"Pierwsza strona"},"PAGINATION:PREV_PAGE":function(e){return"Poprzednia strona"},"PAGINATION:NEXT_PAGE":function(e){return"Nastpna strona"},"PAGINATION:LAST_PAGE":function(e){return"Ostatnia strona"},"BOOL:true":function(e){return"Tak"},"BOOL:false":function(e){return"Nie"},"BOOL:null":function(e){return"Nie dotyczy"},"#":function(e){return"Lp."},GUEST_USER_NAME:function(e){return"Go"},"NAVBAR:TOGGLE":function(e){return"Poka menu"},"NAVBAR:DASHBOARD":function(e){return"Pulpit"},"NAVBAR:EVENTS":function(e){return"Zdarzenia"},"NAVBAR:ORDERS":function(e){return"Zlecenia"},"NAVBAR:MECH_ORDERS":function(e){return"Zlecenia mechaniczne"},"NAVBAR:OTHER_ORDERS":function(e){return"Zlecenia produkcyjne"},"NAVBAR:EMPTY_ORDERS":function(e){return"Puste zlecenia WMES"},"NAVBAR:LINES":function(e){return"Linie produkcyjne"},"NAVBAR:USERS":function(e){return"Uytkownicy"},"NAVBAR:MY_ACCOUNT":function(e){return"Moje konto"},"NAVBAR:UI_LOCALE":function(e){return"Lokalizacja UI"},"NAVBAR:LOCALE_PL":function(e){return"Po polsku"},"NAVBAR:LOCALE_US":function(e){return"Po angielsku"},"NAVBAR:LOG_IN":function(e){return"Zaloguj si"},"NAVBAR:LOG_OUT":function(e){return"Wyloguj si"},"NAVBAR:DICTIONARIES":function(e){return"Sowniki"},"NAVBAR:TOOLS":function(e){return"Narzdzia"},"NAVBAR:ORDER_STATUSES":function(e){return"Statusy zlece"},"NAVBAR:DELAY_REASONS":function(e){return"Powody opnie"},"NAVBAR:DOWNTIME_REASONS":function(e){return"Powody przestojw"},"NAVBAR:LOSS_REASONS":function(e){return"Powody strat materiaowych"},"NAVBAR:AORS":function(e){return"Obszary odpowiedzialnoci"},"NAVBAR:WORK_CENTERS":function(e){return"WorkCentra"},"NAVBAR:COMPANIES":function(e){return"Firmy"},"NAVBAR:DIVISIONS":function(e){return"Wydziay"},"NAVBAR:SUBDIVISIONS":function(e){return"Dziay"},"NAVBAR:MRP_CONTROLLERS":function(e){return"Kontrolery MRP"},"NAVBAR:PROD_FUNCTIONS":function(e){return"Funkcje"},"NAVBAR:PROD_FLOWS":function(e){return"Przepywy"},"NAVBAR:PROD_TASKS":function(e){return"Zadania produkcyjne"},"NAVBAR:PROD_LINES":function(e){return"Linie produkcyjne"},"NAVBAR:PLANNING:main":function(e){return"Planowanie"},"NAVBAR:PLANNING:plans":function(e){return"Plany"},"NAVBAR:PLANNING:hourly":function(e){return"godzinowe"},"NAVBAR:PLANNING:daily":function(e){return"dzienne"},"NAVBAR:PLANNING:drilling":function(e){return"Wiercenie"},"NAVBAR:PLANNING:wiring":function(e){return"Przewody"},"NAVBAR:PLANNING:paintShop":function(e){return"Malarnia"},"NAVBAR:PLANNING:paintShop:load":function(e){return"Obcienie"},"NAVBAR:PLANNING:wh":function(e){return"Magazyn"},"NAVBAR:PLANNING:wh:old":function(e){return"stary"},"NAVBAR:PLANNING:wh:new":function(e){return"nowy"},"NAVBAR:PLANNING:wh:pickup":function(e){return"Kompletacja"},"NAVBAR:PLANNING:wh:delivery:components":function(e){return"Wysyka FIFO"},"NAVBAR:PLANNING:wh:delivery:packaging":function(e){return"Wysyka opakowa"},"NAVBAR:PLANNING:wh:delivery:ps":function(e){return"Wysyka malarnii"},"NAVBAR:PLANNING:wh:problems":function(e){return"Problemy"},"NAVBAR:PLANNING:wh:deliveredOrders":function(e){return"Dostarczone zlecenia"},"NAVBAR:PLANNING:wh:downtimes":function(e){return"Przestoje"},"NAVBAR:PLANNING:wh:setCarts":function(e){return"Wzki"},"NAVBAR:PLANNING:wh:lines":function(e){return"Linie"},"NAVBAR:PLANNING:wh:events":function(e){return"Zdarzenia"},"NAVBAR:PLANNING:wh:settings":function(e){return"Ustawienia"},"NAVBAR:PLANNING:all":function(e){return"Wszystkie"},"NAVBAR:PLANNING:0d":function(e){return"Na dzisiaj"},"NAVBAR:PLANNING:-1d":function(e){return"Na wczoraj"},"NAVBAR:PLANNING:1d":function(e){return"Na jutro"},"NAVBAR:PLANNING:2d":function(e){return"Na pojutrze"},"NAVBAR:PLANNING:2d:help":function(e){return"Plan dostpny okoo godziny 17:00."},"NAVBAR:FTE":function(e){return"FTE"},"NAVBAR:FTE:MASTER":function(e){return"Produkcja"},"NAVBAR:FTE:WH":function(e){return"Magazyn"},"NAVBAR:FTE:LEADER":function(e){return"Inne"},"NAVBAR:FTE:SETTINGS":function(e){return"Ustawienia"},"NAVBAR:VIS":function(e){return"Wizualizacja"},"NAVBAR:VIS:STRUCTURE":function(e){return"Struktura organizacyjna"},"NAVBAR:PRESS_WORKSHEETS":function(e){return"Karty pracy"},"NAVBAR:REPORTS":function(e){return"Raporty"},"NAVBAR:REPORTS:1":function(e){return"Wskaniki"},"NAVBAR:REPORTS:clip":function(e){return"CLIP"},"NAVBAR:REPORTS:3":function(e){return"Wykorzystanie zasobw"},"NAVBAR:REPORTS:4":function(e){return"Operatorzy"},"NAVBAR:REPORTS:5":function(e){return"HR"},"NAVBAR:REPORTS:6":function(e){return"Magazyn"},"NAVBAR:REPORTS:7":function(e){return"Przestoje w obszarach"},"NAVBAR:REPORTS:8":function(e){return"Lean"},"NAVBAR:REPORTS:9":function(e){return"Planowane obcienie linii"},"NAVBAR:REPORTS:rearm":function(e){return"Przezbrojenie"},"NAVBAR:REPORTS:ct":function(e){return"Czas cyklu"},"NAVBAR:REPORTS:ct:pce":function(e){return"Sztuki"},"NAVBAR:REPORTS:ct:groups":function(e){return"Grupy wyrobw"},"NAVBAR:REPORTS:ct:results":function(e){return"Wyniki"},"NAVBAR:PROD":function(e){return"Produkcja"},"NAVBAR:PROD:DATA":function(e){return"Dane produkcyjne"},"NAVBAR:PROD:LOG_ENTRIES":function(e){return"Historia operacji"},"NAVBAR:PROD:SHIFTS":function(e){return"Zmiany"},"NAVBAR:PROD:SHIFT_ORDERS":function(e){return"Zlecenia"},"NAVBAR:PROD:DOWNTIMES":function(e){return"Przestoje"},"NAVBAR:PROD:ALERTS":function(e){return"Alarmy"},"NAVBAR:PROD:CHANGE_REQUESTS":function(e){return"dania zmian"},"NAVBAR:PROD:SERIAL_NUMBERS":function(e){return"Numery seryjne"},"NAVBAR:PROD:SETTINGS":function(e){return"Ustawienia"},"NAVBAR:testing":function(e){return"Baza testw"},"NAVBAR:xiconf":function(e){return"Xiconf"},"NAVBAR:xiconf:clients":function(e){return"Klienci"},"NAVBAR:xiconf:orders":function(e){return"Zlecenia"},"NAVBAR:xiconf:results":function(e){return"Wyniki"},"NAVBAR:xiconf:programs":function(e){return"Programy"},"NAVBAR:xiconf:hidLamps":function(e){return"Oprawy HID"},"NAVBAR:xiconf:componentWeights":function(e){return"Wagi komponentw"},"NAVBAR:snf":function(e){return"SNF"},"NAVBAR:snf:results":function(e){return"Wyniki"},"NAVBAR:snf:programs":function(e){return"Programy"},"NAVBAR:trw":function(e){return"TRW"},"NAVBAR:trw:results":function(e){return"Wyniki"},"NAVBAR:trw:testers":function(e){return"Sterowniki"},"NAVBAR:trw:bases":function(e){return"Podstawki"},"NAVBAR:trw:programs":function(e){return"Programy"},"NAVBAR:DOCUMENTS":function(e){return"Dokumentacja"},"NAVBAR:DOCUMENTS:TREE":function(e){return"Dokumenty"},"NAVBAR:DOCUMENTS:CLIENTS":function(e){return"Klienci"},"NAVBAR:DOCUMENTS:SETTINGS":function(e){return"Ustawienia"},"NAVBAR:DOCUMENTS:CONFIRMATIONS":function(e){return"Potwierdzenia"},"NAVBAR:VENDORS":function(e){return"Dostawcy"},"NAVBAR:PURCHASE_ORDERS":function(e){return"Zamwienia"},"NAVBAR:MONITORING":function(e){return"Monitoring"},"NAVBAR:MONITORING:LAYOUT":function(e){return"Ukad fabryki"},"NAVBAR:MONITORING:LIST":function(e){return"Lista linii produkcyjnych"},"NAVBAR:VENDOR_NC12S":function(e){return"Baza 12NC"},"NAVBAR:LICENSES":function(e){return"Licencje"},"NAVBAR:ISA_PALLET_KINDS":function(e){return"Rodzaje palet"},"NAVBAR:ISA":function(e){return"Pola odkadcze"},"NAVBAR:INVALID_ORDERS":function(e){return"Nieprawidowe zlecenia IPT"},"NAVBAR:IPT_CHECK":function(e){return"Sprawdzacz zlece IPT"},"NAVBAR:SAP_LABOR_TIME_FIXER":function(e){return"Sprawdzacz Labor Time"},"NAVBAR:PRINTERS":function(e){return"Drukarki"},"NAVBAR:PKHD_STRATEGIES":function(e){return"Strategie dost. komponentw"},"NAVBAR:kanban":function(e){return"Baza komponentw"},"NAVBAR:pfep":function(e){return"Baza PFEP"},"NAVBAR:layout":function(e){return"Layout"},"NAVBAR:toolcal":function(e){return"Narzdzia pomiarowe"},"NAVBAR:luma2":function(e){return"Luma gen. 2"},"NAVBAR:luca":function(e){return"LUCA Pick by Light"},"NAVBAR:logs:browserErrors":function(e){return"Bdy klientw"},"NAVBAR:ct":function(e){return"Czas cyklu"},"NAVBAR:fa":function(e){return"rodki Trwae"},"NAVBAR:dummyPaint":function(e){return"Dummy paint"},"NAVBAR:compRel:entries":function(e){return"Dopuszczenia"},"NAVBAR:OPINION:main":function(e){return"Badanie Opinia"},"NAVBAR:OPINION:current":function(e){return"Aktualne badanie"},"NAVBAR:OPINION:report":function(e){return"Raport"},"NAVBAR:OPINION:actions":function(e){return"Akcje naprawcze"},"NAVBAR:OPINION:responses":function(e){return"Odpowiedzi"},"NAVBAR:OPINION:scanning":function(e){return"Skanowanie"},"NAVBAR:OPINION:scanTemplates":function(e){return"Szablony"},"NAVBAR:OPINION:omrResults":function(e){return"Wyniki"},"NAVBAR:OPINION:dictionaries":function(e){return"Sowniki"},"NAVBAR:OPINION:surveys":function(e){return"Badania"},"NAVBAR:OPINION:employers":function(e){return"Pracodawcy"},"NAVBAR:OPINION:divisions":function(e){return"Wydziay"},"NAVBAR:OPINION:questions":function(e){return"Pytania"},"NAVBAR:KAIZEN:main":function(e){return"ZPW"},"NAVBAR:KAIZEN:orders":function(e){return"Zgoszenia"},"NAVBAR:KAIZEN:all":function(e){return"Wszystkie"},"NAVBAR:KAIZEN:open":function(e){return"Tylko otwarte"},"NAVBAR:KAIZEN:mine":function(e){return"Tylko moje"},"NAVBAR:KAIZEN:unseen":function(e){return"Tylko nieprzeczytane"},"NAVBAR:KAIZEN:reports":function(e){return"Raporty"},"NAVBAR:KAIZEN:reports:summary":function(e){return"Zestawienie informacji"},"NAVBAR:KAIZEN:reports:engagement":function(e){return"Zaangaowanie"},"NAVBAR:KAIZEN:reports:metrics":function(e){return"Wskaniki"},"NAVBAR:KAIZEN:reports:count":function(e){return"Ilo ZPW"},"NAVBAR:KAIZEN:reports:observations":function(e){return"Ilo obserwacji"},"NAVBAR:KAIZEN:reports:minutes":function(e){return"Ilo minutek"},"NAVBAR:KAIZEN:dictionaries":function(e){return"Sowniki"},"NAVBAR:KAIZEN:sections":function(e){return"Dziay"},"NAVBAR:KAIZEN:areas":function(e){return"Miejsca zdarze"},"NAVBAR:KAIZEN:categories":function(e){return"Kategorie"},"NAVBAR:KAIZEN:causes":function(e){return"Przyczyny"},"NAVBAR:KAIZEN:risks":function(e){return"Rodzaje ryzyka"},"NAVBAR:KAIZEN:behaviours":function(e){return"Zachowania"},"NAVBAR:KAIZEN:help":function(e){return"Pomoc"},"NAVBAR:KAIZEN:observations":function(e){return"Obserwacje"},"NAVBAR:KAIZEN:printableCard:label":function(e){return"Karta obserwacji"},"NAVBAR:KAIZEN:printableCard:file":function(e){return"/files/karta-obserwacji.pdf"},"NAVBAR:KAIZEN:minutesForSafety":function(e){return"Minuty dla Bezpieczestwa"},"NAVBAR:SUGGESTIONS:main":function(e){return"Usprawnienia"},"NAVBAR:SUGGESTIONS:orders":function(e){return"Zgoszenia"},"NAVBAR:SUGGESTIONS:all":function(e){return"Wszystkie"},"NAVBAR:SUGGESTIONS:open":function(e){return"Tylko otwarte"},"NAVBAR:SUGGESTIONS:mine":function(e){return"Tylko moje"},"NAVBAR:SUGGESTIONS:unseen":function(e){return"Tylko nieprzeczytane"},"NAVBAR:SUGGESTIONS:reports":function(e){return"Raporty"},"NAVBAR:SUGGESTIONS:reports:count":function(e){return"Ilo zgosze"},"NAVBAR:SUGGESTIONS:reports:summary":function(e){return"Zestawienie informacji"},"NAVBAR:SUGGESTIONS:reports:engagement":function(e){return"Zaangaowanie"},"NAVBAR:SUGGESTIONS:dictionaries":function(e){return"Sowniki"},"NAVBAR:SUGGESTIONS:sections":function(e){return"Dziay"},"NAVBAR:SUGGESTIONS:categories":function(e){return"Kategorie"},"NAVBAR:SUGGESTIONS:productFamilies":function(e){return"Rodziny produktw"},"NAVBAR:SUGGESTIONS:help":function(e){return"Pomoc"},"NAVBAR:QI:main":function(e){return"Inspekcja Jakoci"},"NAVBAR:QI:results":function(e){return"Wyniki"},"NAVBAR:QI:results:all":function(e){return"Wszystkie"},"NAVBAR:QI:results:good":function(e){return"Zgodne"},"NAVBAR:QI:results:bad":function(e){return"Niezgodne"},"NAVBAR:QI:reports":function(e){return"Raporty"},"NAVBAR:QI:reports:count":function(e){return"Iloci"},"NAVBAR:QI:reports:okRatio":function(e){return"% wyrobw zgodnych"},"NAVBAR:QI:reports:nokRatio":function(e){return"Jako wyrobu gotowego"},"NAVBAR:QI:reports:outgoingQuality":function(e){return"Outgoing quality"},"NAVBAR:QI:dictionaries":function(e){return"Sowniki"},"NAVBAR:QI:kinds":function(e){return"Rodzaje inspekcji"},"NAVBAR:QI:errorCategories":function(e){return"Kategorie bdw"},"NAVBAR:QI:faults":function(e){return"Wady"},"NAVBAR:QI:standards":function(e){return"Standardy"},"NAVBAR:QI:actionStatuses":function(e){return"Statusy akcji"},"NAVBAR:SEARCH:help":function(e){return"Szukaj wg nr zlecenia, 12NC, zgoszenia lub daty."},"NAVBAR:SEARCH:empty":function(e){return"Brak wynikw."},"NAVBAR:SEARCH:fullOrderNo":function(e){return"Zlecenie nr "+t.v(e,"orderNo")},"NAVBAR:SEARCH:partialOrderNo":function(e){return"Zlecenia nr "+t.v(e,"orderNo")+"..."},"NAVBAR:SEARCH:fullNc12":function(e){return"12NC "+t.v(e,"nc12")},"NAVBAR:SEARCH:partialNc12":function(e){return"12NC "+t.v(e,"nc12")+"..."},"NAVBAR:SEARCH:fullNc15":function(e){return"15NC "+t.v(e,"nc15")},"NAVBAR:SEARCH:searchName":function(e){return"Uytkownicy"},"NAVBAR:SEARCH:sapDetails":function(e){return"szczegy z SAP"},"NAVBAR:SEARCH:xiconfDetails":function(e){return"szczegy z bazy testw"},"NAVBAR:SEARCH:xiconfResults":function(e){return"wyniki testw"},"NAVBAR:SEARCH:prodShiftOrders":function(e){return"lista z linii produkcyjnych"},"NAVBAR:SEARCH:prodShiftOrdersList":function(e){return"lista zlece z linii produkcyjnych"},"NAVBAR:SEARCH:prodDowntimes":function(e){return"lista przestojw"},"NAVBAR:SEARCH:qiResults":function(e){return"wyniki inspekcji"},"NAVBAR:SEARCH:mechOrders":function(e){return"lista zlece mechanicznych"},"NAVBAR:SEARCH:sapOrders":function(e){return"lista zlece z SAP"},"NAVBAR:SEARCH:sapOrdersBom":function(e){return"lista zlece z SAP z komponentem"},"NAVBAR:SEARCH:sapOrdersDoc":function(e){return"lista zlece z SAP z dokumentem"},"NAVBAR:SEARCH:sapOrdersStart":function(e){return"lista zlece z SAP wg daty startu"},"NAVBAR:SEARCH:sapOrdersFinish":function(e){return"lista zlece z SAP wg daty ukoczenia"},"NAVBAR:SEARCH:sapList":function(e){return"lista z SAP"},"NAVBAR:SEARCH:xiconfOrders":function(e){return"lista zlece z bazy testw"},"NAVBAR:SEARCH:xiconfList":function(e){return"lista z bazy testw"},"NAVBAR:SEARCH:worksheetOrders":function(e){return"lista zlece z kart pracy"},"NAVBAR:SEARCH:fte:master":function(e){return"lista FTE (produkcja)"},"NAVBAR:SEARCH:fte:wh":function(e){return"lista FTE (magazyn)"},"NAVBAR:SEARCH:fte:leader":function(e){return"lista FTE (inne)"},"NAVBAR:SEARCH:hourlyPlans":function(e){return"lista planw godzinowych"},"NAVBAR:SEARCH:hourlyPlan":function(e){return"plan godzinowy"},"NAVBAR:SEARCH:prodShifts":function(e){return"lista zmian produkcyjnych"},"NAVBAR:SEARCH:document":function(e){return"dokument w katalogu"},"NAVBAR:SEARCH:documentFile":function(e){return"plik dokumentacji"},"NAVBAR:SEARCH:entryId":function(e){return"Zgoszenie nr "+t.v(e,"entryId")},"NAVBAR:SEARCH:kaizenOrders":function(e){return"ZPW"},"NAVBAR:SEARCH:suggestions":function(e){return"Usprawnienie"},"NAVBAR:SEARCH:behaviorObsCards":function(e){return"Obserwacje"},"NAVBAR:SEARCH:minutesForSafetyCards":function(e){return"Minutki"},"NAVBAR:SEARCH:d8":function(e){return"8D"},"NAVBAR:SEARCH:qi":function(e){return"Inspekcja Jakoci"},"NAVBAR:SEARCH:plan:prod":function(e){return"plan produkcji"},"NAVBAR:SEARCH:plan:wh":function(e){return"plan magazynu"},"NAVBAR:SEARCH:plan:ps":function(e){return"plan malarnii"},"NAVBAR:SEARCH:fap":function(e){return"FAP"},"NAVBAR:SEARCH:fapEntries":function(e){return"zgoszenia FAP"},"NAVBAR:SEARCH:kanbanEntries":function(e){return"kanbany"},"NAVBAR:SEARCH:kanbanComponent":function(e){return"komponent kanban"},"NAVBAR:SEARCH:cycleTime":function(e){return"czas cyklu"},"NAVBAR:SEARCH:balancing":function(e){return"balansowanie"},"NAVBAR:SEARCH:deliveredOrders":function(e){return"dostarczone zlecenia"},"NAVBAR:mor":function(e){return"Matryca odpowiedzialnoci"},"NAVBAR:pila:osh":function(e){return"BHP"},"NAVBAR:pila:help":function(e){return"Pomoc"},"NAVBAR:pila:reports":function(e){return"Raporty"},"NAVBAR:pila:nearMiss":function(e){return"ZPW"},"NAVBAR:pila:nearMiss:entries":function(e){return"Zgoszenia"},"NAVBAR:pila:suggestions":function(e){return"Usprawnienia"},"NAVBAR:pila:suggestions:entries":function(e){return"Zgoszenia"},"NAVBAR:pila:observations":function(e){return"Obserwacje"},"NAVBAR:pila:observations:entries":function(e){return"Karty"},"NAVBAR:pila:mfs":function(e){return"Minutki"},"NAVBAR:pila:mfs:entries":function(e){return"Karty"},"ACTION_FORM:BUTTON":function(e){return"Wykonaj akcj"},"ACTION_FORM:BUTTON:cancel":function(e){return"Anuluj"},"ACTION_FORM:MESSAGE":function(e){return"Czy na pewno chcesz wykona dan akcj?"},"ACTION_FORM:MESSAGE:failure":function(e){return"Wykonywanie akcji nie powiodo si."},"ACTION_FORM:DIALOG_TITLE:delete":function(e){return"Potwierdzenie usunicia"},"ACTION_FORM:BUTTON:delete":function(e){return"Usu"},"ACTION_FORM:MESSAGE:delete":function(e){return"Czy na pewno chcesz bezpowrotnie usun wybran pozycj?"},"ACTION_FORM:MESSAGE_SPECIFIC:delete":function(e){return"Czy na pewno chcesz bezpowrotnie usun <em>"+t.v(e,"label")+"</em>?"},"ACTION_FORM:MESSAGE_FAILURE:delete":function(e){return"Usuwanie nie powiodo si."},"FORM:ACTION:add":function(e){return"Dodaj"},"FORM:ACTION:edit":function(e){return"Edytuj"},"FORM:ACTION:save":function(e){return"Zapisz"},"FORM:ERROR:addFailure":function(e){return"Dodawanie nie powiodo si."},"FORM:ERROR:editFailure":function(e){return"Edycja nie powioda si."},"ORG_UNIT:division":function(e){return"Wydzia"},"ORG_UNIT:subdivision":function(e){return"Dzia"},"ORG_UNIT:mrpController":function(e){return"Kontroler MRP"},"ORG_UNIT:mrpControllers":function(e){return"Kontroler MRP"},"ORG_UNIT:prodFlow":function(e){return"Przepyw"},"ORG_UNIT:workCenter":function(e){return"WorkCenter"},"ORG_UNIT:prodLine":function(e){return"Linia montaowa"},SHIFT:function(e){return t.v(e,"date")+", "+t.s(e,"shift",{1:"I",2:"II",3:"III",other:t.v(e,"shift")})},"SHIFT:1":function(e){return"I"},"SHIFT:2":function(e){return"II"},"SHIFT:3":function(e){return"III"},"SHIFT:0":function(e){return"Dowolna"},QUARTER:function(e){return t.v(e,"quarter")+" kwarta "+t.v(e,"year")},"QUARTER:1":function(e){return"I"},"QUARTER:2":function(e){return"II"},"QUARTER:3":function(e){return"III"},"QUARTER:4":function(e){return"IV"},"QUARTER:0":function(e){return"Dowolny"},"highcharts:contextButtonTitle":function(e){return"Menu kontekstowe wykresu"},"highcharts:downloadJPEG":function(e){return"Zapisz jako JPEG"},"highcharts:downloadPDF":function(e){return"Zapisz jako PDF"},"highcharts:downloadPNG":function(e){return"Zapisz jako PNG"},"highcharts:downloadSVG":function(e){return"Zapisz jako SVG"},"highcharts:downloadCSV":function(e){return"Zapisz jako CSV"},"highcharts:printChart":function(e){return"Drukuj wykres"},"highcharts:decimalPoint":function(e){return","},"highcharts:thousandsSep":function(e){return" "},"highcharts:noData":function(e){return"Brak danych."},"highcharts:resetZoom":function(e){return"1:1"},"highcharts:resetZoomTitle":function(e){return"Zresetuj przyblienie"},"highcharts:loading":function(e){return"adowanie..."},"highcharts:months":function(e){return"Stycze_Luty_Marzec_Kwiecie_Maj_Czerwiec_Lipiec_Sierpie_Wrzesie_Padziernik_Listopad_Grudzie"},"highcharts:shortMonths":function(e){return"Sty_Lut_Mar_Kwi_Maj_Cze_Lip_Sie_Wrz_Pa_Lis_Gru"},"highcharts:weekdays":function(e){return"Niedziela_Poniedziaek_Wtorek_roda_Czwartek_Pitek_Sobota"},"dataTables:emptyTable":function(e){return"Brak danych."},"dataTables:loadingRecords":function(e){return"adowanie danych..."},"dataTables:loadingFailed":function(e){return"adowanie danych nie powiodo si."},"colorPicker:label":function(e){return"Kolor"},"filter:date":function(e){return"Data"},"filter:date:from":function(e){return"Od"},"filter:date:from:info":function(e){return"Dane od godziny 06:00 wybranego dnia"},"filter:date:to":function(e){return"Do"},"filter:date:to:info":function(e){return"Dane do godziny 06:00 wybranego dnia"},"filter:shift":function(e){return"Zmiana"},"filter:orgUnit":function(e){return"Jednostka organizacyjna"},"filter:submit":function(e){return"Filtruj"},"filter:filters":function(e){return"Poka dodatkowe filtry"},"filter:limit":function(e){return"Limit"},"filter:show":function(e){return"Poka filtr"},"filter:hide":function(e){return"Ukryj filtr"},"placeholder:date":function(e){return"rrrr-mm-dd"},"placeholder:time":function(e){return"--:--"},"placeholder:month":function(e){return"rrrr-mm"},"PRINT_PAGE:FT:PAGE_NO":function(e){return"Strona <span class=print-page-no>?</span> z <span class=print-page-count>?</span>"},"PRINT_PAGE:FT:INFO":function(e){return"Wydruk wygenerowany <span class=print-page-date>?</span> przez uytkownika <span class=print-page-user>?</span>."},"html2pdf:progress":function(e){return"Generowanie wydruku..."},"html2pdf:failure":function(e){return"Generowanie wydruku nie powiodo si."},"html2pdf:printing":function(e){return"Wysyanie wydruku na drukark..."},"html2pdf:printing:success":function(e){return"Wydruk zosta wysany na wybran drukark."},"html2pdf:printing:failure":function(e){return"Wysyanie wydruku na wybran drukark nie powiodo si."},"dateTimeRange:placeholder:date":function(e){return"rrrr-mm-dd"},"dateTimeRange:placeholder:time":function(e){return"gg:mm"},"dateTimeRange:label:date":function(e){return"Data"},"dateTimeRange:label:date+time":function(e){return"Czas"},"dateTimeRange:label:month":function(e){return"Data"},"dateTimeRange:+0+1":function(e){return"aktualny"},"dateTimeRange:-1+0":function(e){return"poprzedni"},"dateTimeRange:-2+0":function(e){return"ostatnie 2"},"dateTimeRange:-3+0":function(e){return"ostatnie 3"},"dateTimeRange:-4+0":function(e){return"ostatnie 4"},"dateTimeRange:-6+0":function(e){return"ostatnie 6"},"dateTimeRange:-7+0":function(e){return"ostatnie 7"},"dateTimeRange:+0+7":function(e){return"nastpne 7"},"dateTimeRange:-14+0":function(e){return"ostatnie 14"},"dateTimeRange:-28+0":function(e){return"ostatnie 28"},"dateTimeRange:shifts":function(e){return"Zmiana"},"dateTimeRange:shifts:+0+1":function(e){return"aktualna"},"dateTimeRange:shifts:-1+0":function(e){return"poprzednia"},"dateTimeRange:shifts:1":function(e){return"I"},"dateTimeRange:shifts:2":function(e){return"II"},"dateTimeRange:shifts:3":function(e){return"III"},"dateTimeRange:days":function(e){return"Dzie"},"dateTimeRange:days:+0+1":function(e){return"dzisiaj"},"dateTimeRange:days:-1+0":function(e){return"wczoraj"},"dateTimeRange:days:+1+2":function(e){return"jutro"},"dateTimeRange:weeks":function(e){return"Tydzie"},"dateTimeRange:months":function(e){return"Miesic"},"dateTimeRange:quarters":function(e){return"Kwarta"},"dateTimeRange:quarters:1":function(e){return"I"},"dateTimeRange:quarters:2":function(e){return"II"},"dateTimeRange:quarters:3":function(e){return"III"},"dateTimeRange:quarters:4":function(e){return"IV"},"dateTimeRange:years":function(e){return"Rok"},"dateTimeRange:help":function(e){return"Przytrzymaj <kbd>Alt</kbd> wybierajc opcj, aby jednoczenie wysa formularz."},"embedded:actions:switch":function(e){return"Zmie aplikacj"},"embedded:actions:refresh":function(e){return"Odwie aplikacj"},"embedded:actions:config":function(e){return"Konfiguruj"},"embedded:actions:reboot":function(e){return"Uruchom ponownie komputer"},"embedded:actions:shutdown":function(e){return"Wycz komputer"},"embedded:actions:resetBrowser":function(e){return"Resetuj przegldark"},"embedded:actions:restartBrowser":function(e){return"Uruchom ponownie przegldark"},"embedded:actions:noKiosk":function(e){return"Wycz tryb kiosku"},"embedded:apps:operator":function(e){return"Formatka operatora"},"embedded:apps:documents":function(e){return"Dokumentacja"},"embedded:apps:xiconf":function(e){return"Skanowanie LED"},"embedded:apps:maxos":function(e){return"Wizualizacja MAXOS"},"embedded:apps:drilling":function(e){return"Wiercenie"},"embedded:apps:ps-queue":function(e){return"Kolejka malarnii"},"embedded:apps:ps-load":function(e){return"Obcienie malarnii"},"embedded:apps:isa":function(e){return"Pola odkadcze"},"embedded:apps:remote":function(e){return"Zdalna"},"embedded:apps:heff":function(e){return"Wydajno godzinowa"},"embedded:apps:trw":function(e){return"TRW"},"embedded:reboot:title":function(e){return"Ponowne uruchamianie komputera"},"embedded:reboot:message":function(e){return"Czy na pewno chcesz ponownie uruchomi komputer?"},"embedded:reboot:yes":function(e){return"Uruchom ponownie"},"embedded:reboot:no":function(e){return"Anuluj"},"embedded:shutdown:title":function(e){return"Wyczanie komputera"},"embedded:shutdown:message":function(e){return"Czy na pewno chcesz wyczy komputer?"},"embedded:shutdown:yes":function(e){return"Wycz komputer"},"embedded:shutdown:no":function(e){return"Anuluj"},"PANEL:TITLE:details":function(e){return"Szczegy"},"PANEL:TITLE:addForm":function(e){return"Formularz dodawania"},"PANEL:TITLE:editForm":function(e){return"Formularz edycji"},"notifications:request:message":function(e){return"Kliknij tutaj, aby wczy powiadomienia w przegldarce."},"lang:pl":function(e){return"Polski (pl)"},"lang:en":function(e){return"Angielski (en)"},labelCopySuffix:function(e){return t.v(e,"label")+" (kopia)"}}}),function(){"use strict";function e(){require(["domReady","jquery","backbone","backbone.layout","moment","app/monkeyPatch","app/broker","app/i18n","app/socket","app/router","app/viewport","app/updater/index","app/data/loadedModules","app/core/layouts/BlankLayout","app/core/layouts/PageLayout","app/time","app/wmes-docs-routes","bootstrap","moment-lang/"+window.appLocale,"select2-lang/"+window.appLocale,"i18n!app/nls/core"],t)}function t(e,t,n,r,i,o,a,s,u,c,l,d,p,f,h){var m=a.sandbox();function g(){m.destroy(),m=a.sandbox(),a.subscribe("i18n.reloaded",function(e){localStorage.setItem("LOCALE",e.newLocale),window.location.reload()}),"function"==typeof window.onPageShown&&a.subscribe("viewport.page.shown",window.onPageShown).setLimit(1),e(function(){m.subscribe("viewport.page.shown",y).setLimit(1),window.ENV&&document.body.classList.add("is-"+window.ENV+"-env"),n.history.start({root:"/",hashChange:!0,pushState:!1})})}function y(){null!==m&&(m.destroy(),m=null),t("#app-loading").remove(),t("body").removeClass("is-loading")}u.connect(),i.locale(window.appLocale),t.ajaxSetup({dataType:"json",accepts:{json:"application/json",text:"text/plain"},contentType:"application/json"}),r.configure({manage:!0,el:!1,keep:!0}),l.registerLayout("blank",function(){return new f}),l.registerLayout("page",function(){return new h({version:d.getCurrentVersionString(),changelogUrl:"#changelog",hdHidden:!0})}),a.subscribe("page.titleChanged",function(e){e.unshift(s("orderDocuments","TITLE")),document.title=e.reverse().join(" < ")}),navigator.onLine?(m.subscribe("socket.connected",function(){m.subscribe("user.reloaded",g)}),m.subscribe("socket.connectFailed",g)):g()}window.WMES_APP_ID="docs",window.requireApp=function(){window.parent!==window?require(["app/data/localStorage"],function(t){t.start(e)}):e()}}(),define("wmes-docs",function(){}),function(e){"use strict";if("function"==typeof define&&define.amd)return define("select2-lang/en",["jquery","select2"],e);e(window.jQuery)}(function(e){"use strict";var t={formatNoMatches:function(){return"No matches found."},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" more character"+(1===n?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(1===n?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1===e?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."}};return e.extend(e.fn.select2.defaults,t),t}),function(e){"use strict";if("function"==typeof define&&define.amd)return define("select2-lang/pl",["jquery","select2"],e);e(window.jQuery)}(function(e){"use strict";function t(e,t){return 1===e?"":e%100>1&&e%100<5||e%100>20&&e%10>1&&e%10<5?t:"w"}var n={formatNoMatches:function(){return"Brak wynikw."},formatInputTooShort:function(e,n){var r=n-e.length;return"Wpisz jeszcze "+r+" znak"+t(r,"i")+"."},formatInputTooLong:function(e,n){var r=e.length-n;return"Wpisana fraza jest za duga o "+r+" znak"+t(r,"i")+"."},formatSelectionTooBig:function(e){return"Moesz zaznaczy najwyej "+e+" element"+t(e,"y")+"."},formatLoadMore:function(){return"adowanie kolejnych wynikw..."},formatSearching:function(){return"Szukanie..."}};return e.extend(e.fn.select2.defaults,n),n}),function(e){"function"==typeof define&&define.amd?define("moment-lang/en",["moment"],e):"object"==typeof exports?module.exports=e(require("../moment")):e(window.moment)}(function(e){return e}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?t(require("../moment")):"function"==typeof define&&define.amd?define("moment-lang/pl",["../moment"],t):t(e.moment)}(this,function(e){"use strict";var t="stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_"),n="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_");function r(e){return e%10<5&&e%10>1&&~~(e/10)%10!=1}function i(e,t,n){var i=e+" ";switch(n){case"m":return t?"minuta":"minut";case"mm":return i+(r(e)?"minuty":"minut");case"h":return t?"godzina":"godzin";case"hh":return i+(r(e)?"godziny":"godzin");case"MM":return i+(r(e)?"miesice":"miesicy");case"yy":return i+(r(e)?"lata":"lat")}}return e.defineLocale("pl",{months:function(e,r){return""===r?"("+n[e.month()]+"|"+t[e.month()]+")":/D MMMM/.test(r)?n[e.month()]:t[e.month()]},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_r_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_r_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz niedziel o] LT";case 3:return"[W zesz rod o] LT";case 6:return"[W zesz sobot o] LT";default:return"[W zeszy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:i,mm:i,h:i,hh:i,d:"1 dzie",dd:"%d dni",M:"miesic",MM:i,y:"rok",yy:i},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})});