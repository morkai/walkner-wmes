// Copyright (c) 2014, ≈Åukasz Walukiewicz <lukasz@walukiewicz.eu>. Some Rights Reserved.
// Licensed under CC BY-NC-SA 4.0 <http://creativecommons.org/licenses/by-nc-sa/4.0/>.
// Part of the walkner-wmes project <http://lukasz.walukiewicz.eu/p/walkner-wmes>

!function(){"use strict";function e(){require(["domReady","jquery","backbone","backbone.layout","moment","app/monkeyPatch","app/broker","app/i18n","app/socket","app/router","app/viewport","app/updater/index","app/data/loadedModules","app/core/layouts/BlankLayout","app/time","app/wmes-docs-routes","bootstrap","moment-lang/"+window.appLocale,"select2-lang/"+window.appLocale,"i18n!app/nls/core"],n)}function n(e,n,o,a,t,i,p,c,s,r,u,l,d,b){function w(){null!==m&&(m.destroy(),m=null),p.subscribe("i18n.reloaded",function(e){localStorage.setItem("LOCALE",e.newLocale),u.render()}),e(function(){n("#app-loading").fadeOut(function(){n(this).remove()}),window.ENV&&document.body.classList.add("is-"+window.ENV+"-env"),o.history.start({root:"/",hashChange:!0,pushState:!1})})}var m=null;s.connect(),t.locale(window.appLocale),n.ajaxSetup({dataType:"json",accepts:{json:"application/json",text:"text/plain"},contentType:"application/json"}),a.configure({manage:!0,el:!1,keep:!0}),u.registerLayout("blank",function(){return new b}),navigator.onLine?(m=p.sandbox(),m.subscribe("socket.connected",function(){m.subscribe("user.reloaded",w)}),m.subscribe("socket.connectFailed",w),p.subscribe("page.titleChanged",function(e){e.unshift(c("orderDocuments","TITLE")),document.title=e.reverse().join(" < ")})):w()}window.requireApp=e}();