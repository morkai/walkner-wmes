!function(e,t){function n(e){var t,n;return n={xAxis:0,yAxis:0,title:{style:{},text:"",x:0,y:0},shape:{params:{stroke:"#000000",fill:"transparent",strokeWidth:2}}},t={circle:{params:{x:0,y:0}}},t[e]&&(n.shape=h(n.shape,t[e])),n}function r(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(e){return"number"==typeof e}function o(e){return e!==s&&null!==e}function a(e,t,n,r,i){for(var o=e.length,a=0;o>a;)"number"==typeof e[a]&&"number"==typeof e[a+1]?(e[a]=t.toPixels(e[a])-r,e[a+1]=n.toPixels(e[a+1])-i,a+=2):a+=1;return e}var s,l,u,c=e.Chart,d=e.extend,p=e.each;u=["path","rect","circle"],l={top:0,left:0,center:.5,middle:.5,bottom:1,right:1};var f=t.inArray,h=e.merge,m=function(){this.init.apply(this,arguments)};m.prototype={init:function(e,t){var r=t.shape&&t.shape.type;this.chart=e,this.options=h({},n(r),t)},render:function(e){var t=this,n=this.chart,r=t.chart.renderer,i=t.group,o=t.title,a=t.shape,s=t.options,l=s.title,c=s.shape;i||(i=t.group=r.g()),!a&&c&&-1!==f(c.type,u)&&(a=t.shape=r[s.shape.type](c.params),a.add(i)),!o&&l&&(o=t.title=r.label(l),o.add(i)),i.add(n.annotations.group),t.linkObjects(),e!==!1&&t.redraw()},redraw:function(){var t,n,r,s,u,c,p,h=this.options,m=this.chart,g=this.group,v=this.title,y=this.shape,w=this.linkedObject,b=m.xAxis[h.xAxis],E=m.yAxis[h.yAxis],T=h.width,P=h.height,R=l[h.anchorY],k=l[h.anchorX],O=!1;if(w&&(n=w instanceof e.Point?"point":w instanceof e.Series?"series":null,"point"===n?(h.xValue=w.x,h.yValue=w.y,r=w.series):"series"===n&&(r=w),g.visibility!==r.group.visibility&&g.attr({visibility:r.group.visibility})),c=o(h.xValue)?b.toPixels(h.xValue+b.minPointOffset)-b.minPixelPadding:h.x,p=o(h.yValue)?E.toPixels(h.yValue):h.y,!isNaN(c)&&!isNaN(p)&&i(c)&&i(p)){if(v&&(v.attr(h.title),v.css(h.title.style),O=!0),y){if(t=d({},h.shape.params),"values"===h.units){for(s in t)f(s,["width","x"])>-1?t[s]=b.translate(t[s]):f(s,["height","y"])>-1&&(t[s]=E.translate(t[s]));t.width&&(t.width-=b.toPixels(0)-b.left),t.x&&(t.x+=b.minPixelPadding),"path"===h.shape.type&&a(t.d,b,E,c,p)}"circle"===h.shape.type&&(t.x+=t.r,t.y+=t.r),O=!0,y.attr(t)}g.bBox=null,i(T)||(u=g.getBBox(),T=u.width),i(P)||(u||(u=g.getBBox()),P=u.height),i(k)||(k=l.center),i(R)||(R=l.center),c-=T*k,p-=P*R,m.animation&&o(g.translateX)&&o(g.translateY)?g.animate({translateX:c,translateY:p}):g.translate(c,p)}},destroy:function(){var e=this,t=this.chart,n=t.annotations.allItems,r=n.indexOf(e);r>-1&&n.splice(r,1),p(["title","shape","group"],function(t){e[t]&&(e[t].destroy(),e[t]=null)}),e.group=e.title=e.shape=e.chart=e.options=null},update:function(e,t){d(this.options,e),this.linkObjects(),this.render(t)},linkObjects:function(){var e=this,t=e.chart,n=e.linkedObject,r=n&&(n.id||n.options.id),i=e.options,a=i.linkedTo;o(a)?o(n)&&a===r||(e.linkedObject=t.get(a)):e.linkedObject=null}},d(c.prototype,{annotations:{add:function(e,t){var n,i,o=this.allItems,a=this.chart;for(r(e)||(e=[e]),i=e.length;i--;)n=new m(a,e[i]),o.push(n),n.render(t)},redraw:function(){p(this.allItems,function(e){e.redraw()})}}}),c.prototype.callbacks.push(function(t){var n,i=t.options.annotations;n=t.renderer.g("annotations"),n.attr({zIndex:7}),n.add(),t.annotations.allItems=[],t.annotations.chart=t,t.annotations.group=n,r(i)&&i.length>0&&t.annotations.add(t.options.annotations),e.addEvent(t,"redraw",function(){t.annotations.redraw()})})}(Highcharts,HighchartsAdapter);