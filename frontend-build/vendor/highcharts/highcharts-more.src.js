!function(t){"object"==typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define(function(){return t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){var e,i,a,s,o,n,r,l,h,p,c,d,u,g,f;!function(t){var e=t.CenteredSeriesMixin,i=t.extend,a=t.merge,s=t.splat;function o(t,e){this.init(t,e)}i(o.prototype,{coll:"pane",init:function(t,e){this.chart=e,this.background=[],e.pane.push(this),this.setOptions(t)},setOptions:function(t){this.options=t=a(this.defaultOptions,this.chart.angular?{background:{}}:void 0,t)},render:function(){var t,e,i=this.options,o=this.options.background,n=this.chart.renderer;if(this.group||(this.group=n.g("pane-group").attr({zIndex:i.zIndex||0}).add()),this.updateCenter(),o)for(o=s(o),t=Math.max(o.length,this.background.length||0),e=0;e<t;e++)o[e]&&this.axis?this.renderBackground(a(this.defaultBackgroundOptions,o[e]),e):this.background[e]&&(this.background[e]=this.background[e].destroy(),this.background.splice(e,1))},renderBackground:function(t,e){var a="animate",s={class:"highcharts-pane "+(t.className||"")};this.chart.styledMode||i(s,{fill:t.backgroundColor,stroke:t.borderColor,"stroke-width":t.borderWidth}),this.background[e]||(this.background[e]=this.chart.renderer.path().add(this.group),a="attr"),this.background[e][a]({d:this.axis.getPlotBandPath(t.from,t.to,t)}).attr(s)},defaultOptions:{center:["50%","50%"],size:"85%",startAngle:0},defaultBackgroundOptions:{shape:"circle",borderWidth:1,borderColor:"#cccccc",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#ffffff"],[1,"#e6e6e6"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"},updateCenter:function(t){this.center=(t||this.axis||{}).center=e.getCenter.call(this)},update:function(t,e){a(!0,this.options,t),this.setOptions(this.options),this.render(),this.chart.axes.forEach(function(t){t.pane===this&&(t.pane=null,t.update({},e))},this)}}),t.Pane=o}(t),s=(e=t).addEvent,o=e.Axis,n=e.extend,r=e.merge,l=e.noop,h=e.pick,p=e.pInt,c=e.Tick,d=e.wrap,u=e.correctFloat,g=o.prototype,f=c.prototype,e.radialAxisExtended||(e.radialAxisExtended=!0,i={getOffset:l,redraw:function(){this.isDirty=!1},render:function(){this.isDirty=!1},setScale:l,setCategories:l,setTitle:l},a={defaultRadialGaugeOptions:{labels:{align:"center",x:0,y:null},minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,tickLength:10,tickPosition:"inside",tickWidth:2,title:{rotation:0},zIndex:2},defaultRadialXOptions:{gridLineWidth:1,labels:{align:null,distance:15,x:0,y:null,style:{textOverflow:"none"}},maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},defaultRadialYOptions:{gridLineInterpolation:"circle",labels:{align:"right",x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}},setOptions:function(t){var i=this.options=r(this.defaultOptions,this.defaultRadialOptions,t);i.plotBands||(i.plotBands=[]),e.fireEvent(this,"afterSetOptions")},getOffset:function(){g.getOffset.call(this),this.chart.axisOffset[this.side]=0},getLinePath:function(t,e){var i,a,s=this.center,o=this.chart,n=h(e,s[2]/2-this.offset);return this.isCircular||void 0!==e?((a=this.chart.renderer.symbols.arc(this.left+s[0],this.top+s[1],n,n,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0})).xBounds=[this.left+s[0]],a.yBounds=[this.top+s[1]-n]):(i=this.postTranslate(this.angleRad,n),a=["M",s[0]+o.plotLeft,s[1]+o.plotTop,"L",i.x,i.y]),a},setAxisTranslation:function(){g.setAxisTranslation.call(this),this.center&&(this.isCircular?this.transA=(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.transA=this.center[2]/2/(this.max-this.min||1),this.isXAxis?this.minPixelPadding=this.transA*this.minPointOffset:this.minPixelPadding=0)},beforeSetTickPositions:function(){this.autoConnect=this.isCircular&&void 0===h(this.userMax,this.options.max)&&u(this.endAngleRad-this.startAngleRad)===u(2*Math.PI),this.autoConnect&&(this.max+=(this.categories?1:this.pointRange)||this.closestPointRange||0)},setAxisSize:function(){g.setAxisSize.call(this),this.isRadial&&(this.pane.updateCenter(this),this.isCircular&&(this.sector=this.endAngleRad-this.startAngleRad),this.len=this.width=this.height=this.center[2]*h(this.sector,1)/2)},getPosition:function(t,e){return this.postTranslate(this.isCircular?this.translate(t):this.angleRad,h(this.isCircular?e:this.translate(t),this.center[2]/2)-this.offset)},postTranslate:function(t,e){var i=this.chart,a=this.center;return t=this.startAngleRad+t,{x:i.plotLeft+a[0]+Math.cos(t)*e,y:i.plotTop+a[1]+Math.sin(t)*e}},getPlotBandPath:function(t,e,i){var a,s,o,n,r=this.center,l=this.startAngleRad,c=r[2]/2,d=[h(i.outerRadius,"100%"),i.innerRadius,h(i.thickness,10)],u=Math.min(this.offset,0),g=/%$/,f=this.isCircular;return"polygon"===this.options.gridLineInterpolation?n=this.getPlotLinePath(t).concat(this.getPlotLinePath(e,!0)):(t=Math.max(t,this.min),e=Math.min(e,this.max),f||(d[0]=this.translate(t),d[1]=this.translate(e)),d=d.map(function(t){return g.test(t)&&(t=p(t,10)*c/100),t}),"circle"!==i.shape&&f?(a=l+this.translate(t),s=l+this.translate(e)):(a=-Math.PI/2,s=1.5*Math.PI,o=!0),d[0]-=u,d[2]-=u,n=this.chart.renderer.symbols.arc(this.left+r[0],this.top+r[1],d[0],d[0],{start:Math.min(a,s),end:Math.max(a,s),innerR:h(d[1],d[0]-d[2]),open:o})),n},getPlotLinePath:function(t,e){var i,a,s,o,n=this,r=n.center,l=n.chart,h=n.getPosition(t);return n.isCircular?o=["M",r[0]+l.plotLeft,r[1]+l.plotTop,"L",h.x,h.y]:"circle"===n.options.gridLineInterpolation?(t=n.translate(t),o=n.getLinePath(0,t)):(l.xAxis.forEach(function(t){t.pane===n.pane&&(i=t)}),o=[],t=n.translate(t),s=i.tickPositions,i.autoConnect&&(s=s.concat([s[0]])),e&&(s=[].concat(s).reverse()),s.forEach(function(e,s){a=i.getPosition(e,t),o.push(s?"L":"M",a.x,a.y)})),o},getTitlePosition:function(){var t=this.center,e=this.chart,i=this.options.title;return{x:e.plotLeft+t[0]+(i.x||0),y:e.plotTop+t[1]-{high:.5,middle:.25,low:0}[i.align]*t[2]+(i.y||0)}}},s(o,"init",function(t){var e,s=this.chart,o=s.angular,l=s.polar,h=this.isXAxis,p=o&&h,c=s.options,d=t.userOptions.pane||0,u=this.pane=s.pane&&s.pane[d];o?(n(this,p?i:a),(e=!h)&&(this.defaultRadialOptions=this.defaultRadialGaugeOptions)):l&&(n(this,a),e=h,this.defaultRadialOptions=h?this.defaultRadialXOptions:r(this.defaultYAxisOptions,this.defaultRadialYOptions)),o||l?(this.isRadial=!0,s.inverted=!1,c.chart.zoomType=null):this.isRadial=!1,u&&e&&(u.axis=this),this.isCircular=e}),s(o,"afterInit",function(){var t=this.chart,e=this.options,i=t.angular&&this.isXAxis,a=this.pane,s=a&&a.options;!i&&a&&(t.angular||t.polar)&&(this.angleRad=(e.angle||0)*Math.PI/180,this.startAngleRad=(s.startAngle-90)*Math.PI/180,this.endAngleRad=(h(s.endAngle,s.startAngle+360)-90)*Math.PI/180,this.offset=e.offset||0)}),d(g,"autoLabelAlign",function(t){if(!this.isRadial)return t.apply(this,[].slice.call(arguments,1))}),s(c,"afterGetPosition",function(t){this.axis.getPosition&&n(t.pos,this.axis.getPosition(this.pos))}),s(c,"afterGetLabelPosition",function(t){var e,i=this.axis,a=this.label,s=i.options.labels,o=s.y,n=20,r=s.align,l=(i.translate(this.pos)+i.startAngleRad+Math.PI/2)/Math.PI*180%360;i.isRadial&&(e=i.getPosition(this.pos,i.center[2]/2+h(s.distance,-25)),"auto"===s.rotation?a.attr({rotation:l}):null===o&&(o=i.chart.renderer.fontMetrics(a.styles&&a.styles.fontSize).b-a.getBBox().height/2),null===r&&(i.isCircular?(this.label.getBBox().width>i.len*i.tickInterval/(i.max-i.min)&&(n=0),r=l>n&&l<180-n?"left":l>180+n&&l<360-n?"right":"center"):r="center",a.attr({align:r})),t.pos.x=e.x+s.x,t.pos.y=e.y+o)}),d(f,"getMarkPath",function(t,e,i,a,s,o,n){var r,l=this.axis;return l.isRadial?["M",e,i,"L",(r=l.getPosition(this.pos,l.center[2]/2+a)).x,r.y]:t.call(this,e,i,a,s,o,n)})),function(t){var e=t.noop,i=t.pick,a=t.extend,s=t.isArray,o=t.defined,n=t.Series,r=t.seriesType,l=t.seriesTypes,h=n.prototype,p=t.Point.prototype;r("arearange","area",{lineWidth:1,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">●</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:null,verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0}},{pointArrayMap:["low","high"],toYData:function(t){return[t.low,t.high]},pointValKey:"low",deferTranslatePolar:!0,highToXY:function(t){var e=this.chart,i=this.xAxis.postTranslate(t.rectPlotX,this.yAxis.len-t.plotHigh);t.plotHighX=i.x-e.plotLeft,t.plotHigh=i.y-e.plotTop,t.plotLowX=t.plotX},translate:function(){var t=this,e=t.yAxis,i=!!t.modifyValue;l.area.prototype.translate.apply(t),t.points.forEach(function(a){var s=a.low,o=a.high,n=a.plotY;null===o||null===s?(a.isNull=!0,a.plotY=null):(a.plotLow=n,a.plotHigh=e.translate(i?t.modifyValue(o,a):o,0,1,0,1),i&&(a.yBottom=a.plotHigh))}),this.chart.polar&&this.points.forEach(function(e){t.highToXY(e),e.tooltipPos=[(e.plotHighX+e.plotLowX)/2,(e.plotHigh+e.plotLow)/2]})},getGraphPath:function(t){var e,a,s,o,n,r,h,p=[],c=[],d=l.area.prototype.getGraphPath,u=this.options,g=this.chart.polar&&!1!==u.connectEnds,f=u.connectNulls,b=u.step;for(e=(t=t||this.points).length,e=t.length;e--;)(a=t[e]).isNull||g||f||t[e+1]&&!t[e+1].isNull||c.push({plotX:a.plotX,plotY:a.plotY,doCurve:!1}),s={polarPlotY:a.polarPlotY,rectPlotX:a.rectPlotX,yBottom:a.yBottom,plotX:i(a.plotHighX,a.plotX),plotY:a.plotHigh,isNull:a.isNull},c.push(s),p.push(s),a.isNull||g||f||t[e-1]&&!t[e-1].isNull||c.push({plotX:a.plotX,plotY:a.plotY,doCurve:!1});return n=d.call(this,t),b&&(!0===b&&(b="left"),u.step={left:"right",center:"center",right:"left"}[b]),r=d.call(this,p),h=d.call(this,c),u.step=b,o=[].concat(n,r),this.chart.polar||"M"!==h[0]||(h[0]="L"),this.graphPath=o,this.areaPath=n.concat(h),o.isArea=!0,o.xMap=n.xMap,this.areaPath.xMap=n.xMap,o},drawDataLabels:function(){var t,e,i,o,n,r=this.points,l=r.length,p=[],c=this.options.dataLabels,d=this.chart.inverted;if(s(c)?c.length>1?(o=c[0],n=c[1]):(o=c[0],n={enabled:!1}):((o=a({},c)).x=c.xHigh,o.y=c.yHigh,(n=a({},c)).x=c.xLow,n.y=c.yLow),o.enabled||this._hasPointLabels){for(t=l;t--;)(e=r[t])&&(i=o.inside?e.plotHigh<e.plotLow:e.plotHigh>e.plotLow,e.y=e.high,e._plotY=e.plotY,e.plotY=e.plotHigh,p[t]=e.dataLabel,e.dataLabel=e.dataLabelUpper,e.below=i,d?o.align||(o.align=i?"right":"left"):o.verticalAlign||(o.verticalAlign=i?"top":"bottom"));for(this.options.dataLabels=o,h.drawDataLabels&&h.drawDataLabels.apply(this,arguments),t=l;t--;)(e=r[t])&&(e.dataLabelUpper=e.dataLabel,e.dataLabel=p[t],delete e.dataLabels,e.y=e.low,e.plotY=e._plotY)}if(n.enabled||this._hasPointLabels){for(t=l;t--;)(e=r[t])&&(i=n.inside?e.plotHigh<e.plotLow:e.plotHigh>e.plotLow,e.below=!i,d?n.align||(n.align=i?"left":"right"):n.verticalAlign||(n.verticalAlign=i?"bottom":"top"));this.options.dataLabels=n,h.drawDataLabels&&h.drawDataLabels.apply(this,arguments)}if(o.enabled)for(t=l;t--;)(e=r[t])&&(e.dataLabels=[e.dataLabel,e.dataLabelUpper].filter(function(t){return!!t}));this.options.dataLabels=c},alignDataLabel:function(){l.column.prototype.alignDataLabel.apply(this,arguments)},drawPoints:function(){var e,i,a=this.points.length;for(h.drawPoints.apply(this,arguments),i=0;i<a;)(e=this.points[i]).origProps={plotY:e.plotY,plotX:e.plotX,isInside:e.isInside,negative:e.negative,zone:e.zone,y:e.y},e.lowerGraphic=e.graphic,e.graphic=e.upperGraphic,e.plotY=e.plotHigh,o(e.plotHighX)&&(e.plotX=e.plotHighX),e.y=e.high,e.negative=e.high<(this.options.threshold||0),e.zone=this.zones.length&&e.getZone(),this.chart.polar||(e.isInside=e.isTopInside=void 0!==e.plotY&&e.plotY>=0&&e.plotY<=this.yAxis.len&&e.plotX>=0&&e.plotX<=this.xAxis.len),i++;for(h.drawPoints.apply(this,arguments),i=0;i<a;)(e=this.points[i]).upperGraphic=e.graphic,e.graphic=e.lowerGraphic,t.extend(e,e.origProps),delete e.origProps,i++},setStackedPoints:e},{setState:function(){var t=this.state,e=this.series,i=e.chart.polar;o(this.plotHigh)||(this.plotHigh=e.yAxis.toPixels(this.high,!0)),o(this.plotLow)||(this.plotLow=this.plotY=e.yAxis.toPixels(this.low,!0)),e.stateMarkerGraphic&&(e.lowerStateMarkerGraphic=e.stateMarkerGraphic,e.stateMarkerGraphic=e.upperStateMarkerGraphic),this.graphic=this.upperGraphic,this.plotY=this.plotHigh,i&&(this.plotX=this.plotHighX),p.setState.apply(this,arguments),this.state=t,this.plotY=this.plotLow,this.graphic=this.lowerGraphic,i&&(this.plotX=this.plotLowX),e.stateMarkerGraphic&&(e.upperStateMarkerGraphic=e.stateMarkerGraphic,e.stateMarkerGraphic=e.lowerStateMarkerGraphic,e.lowerStateMarkerGraphic=void 0),p.setState.apply(this,arguments)},haloPath:function(){var t=this.series.chart.polar,e=[];return this.plotY=this.plotLow,t&&(this.plotX=this.plotLowX),this.isInside&&(e=p.haloPath.apply(this,arguments)),this.plotY=this.plotHigh,t&&(this.plotX=this.plotHighX),this.isTopInside&&(e=e.concat(p.haloPath.apply(this,arguments))),e},destroyElements:function(){return["lowerGraphic","upperGraphic"].forEach(function(t){this[t]&&(this[t]=this[t].destroy())},this),this.graphic=null,p.destroyElements.apply(this,arguments)}})}(t),function(t){(0,t.seriesType)("areasplinerange","arearange",null,{getPointSpline:t.seriesTypes.spline.prototype.getPointSpline})}(t),function(t){var e=t.defaultPlotOptions,i=t.merge,a=t.noop,s=t.pick,o=t.seriesType,n=t.seriesTypes.column.prototype;o("columnrange","arearange",i(e.column,e.arearange,{pointRange:null,marker:null,states:{hover:{halo:!1}}}),{translate:function(){var t,e,i=this,a=i.yAxis,o=i.xAxis,r=o.startAngleRad,l=i.chart,h=i.xAxis.isRadial,p=Math.max(l.chartWidth,l.chartHeight)+999;function c(t){return Math.min(Math.max(-p,t),p)}n.translate.apply(i),i.points.forEach(function(n){var p,d,u,g=n.shapeArgs,f=i.options.minPointLength;n.plotHigh=e=c(a.translate(n.high,0,1,0,1)),n.plotLow=c(n.plotY),u=e,d=s(n.rectPlotY,n.plotY)-e,Math.abs(d)<f?(d+=p=f-d,u-=p/2):d<0&&(u-=d*=-1),h?(t=n.barX+r,n.shapeType="path",n.shapeArgs={d:i.polarArc(u+d,u,t,t+n.pointWidth)}):(g.height=d,g.y=u,n.tooltipPos=l.inverted?[a.len+a.pos-l.plotLeft-u-d/2,o.len+o.pos-l.plotTop-g.x-g.width/2,d]:[o.left-l.plotLeft+g.x+g.width/2,a.pos-l.plotTop+u+d/2,d])})},directTouch:!0,trackerGroups:["group","dataLabelsGroup"],drawGraph:a,getSymbol:a,crispCol:function(){return n.crispCol.apply(this,arguments)},drawPoints:function(){return n.drawPoints.apply(this,arguments)},drawTracker:function(){return n.drawTracker.apply(this,arguments)},getColumnMetrics:function(){return n.getColumnMetrics.apply(this,arguments)},pointAttribs:function(){return n.pointAttribs.apply(this,arguments)},animate:function(){return n.animate.apply(this,arguments)},polarArc:function(){return n.polarArc.apply(this,arguments)},translate3dPoints:function(){return n.translate3dPoints.apply(this,arguments)},translate3dShapes:function(){return n.translate3dShapes.apply(this,arguments)}},{setState:n.pointClass.prototype.setState})}(t),function(t){var e=t.pick,i=t.seriesType,a=t.seriesTypes.column.prototype;i("columnpyramid","column",{},{translate:function(){var t=this,i=t.chart,s=t.options,o=t.dense=t.closestPointRange*t.xAxis.transA<2,n=t.borderWidth=e(s.borderWidth,o?0:1),r=t.yAxis,l=s.threshold,h=t.translatedThreshold=r.getThreshold(l),p=e(s.minPointLength,5),c=t.getColumnMetrics(),d=c.width,u=t.barW=Math.max(d,1+2*n),g=t.pointXOffset=c.offset;i.inverted&&(h-=.5),s.pointPadding&&(u=Math.ceil(u)),a.translate.apply(t),t.points.forEach(function(a){var o,n,c,f,b,m,y,x,v,M,P,L,w=e(a.yBottom,h),A=999+Math.abs(w),k=Math.min(Math.max(-A,a.plotY),r.len+A),S=a.plotX+g,C=u/2,z=Math.min(k,w),I=Math.max(k,w)-z;a.barX=S,a.pointWidth=d,a.tooltipPos=i.inverted?[r.len+r.pos-i.plotLeft-k,t.xAxis.len-S-C,I]:[S+C,k+r.pos-i.plotTop,I],o=l+(a.total||a.y),"percent"===s.stacking&&(o=l+(a.y<0)?-100:100),y=S-(f=C*(z-(c=r.toPixels(o,!0)))/(n=i.plotHeight-c-(i.plotHeight-h)))+C,x=S+f+C,v=S+(b=C*(z+I-c)/n)+C,M=S-b+C,P=z-p,L=z+I,a.y<0&&(P=z,L=z+I+p),i.inverted&&(x=(y=S+C+(f=C*(c-(m=i.plotWidth-z))/(n=c-(i.plotWidth-h))))-2*f,v=S-(b=C*(c-(m-I))/n)+C,M=S+b+C,P=z,L=z+I-p,a.y<0&&(L=z+I+p)),a.shapeType="path",a.shapeArgs={x:y,y:P,width:x-y,height:I,d:["M",y,P,"L",x,P,v,L,M,L,"Z"]}})}})}(t),function(t){var e=t.isNumber,i=t.merge,a=t.noop,s=t.pick,o=t.pInt,n=t.Series,r=t.seriesType,l=t.TrackerMixin;r("gauge","line",{dataLabels:{enabled:!0,defer:!1,y:15,borderRadius:3,crop:!1,verticalAlign:"top",zIndex:2,borderWidth:1,borderColor:"#cccccc"},dial:{},pivot:{},tooltip:{headerFormat:""},showInLegend:!1},{angular:!0,directTouch:!0,drawGraph:a,fixedBox:!0,forceDL:!0,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],translate:function(){var t=this.yAxis,a=this.options,n=t.center;this.generatePoints(),this.points.forEach(function(r){var l=i(a.dial,r.dial),h=o(s(l.radius,80))*n[2]/200,p=o(s(l.baseLength,70))*h/100,c=o(s(l.rearLength,10))*h/100,d=l.baseWidth||3,u=l.topWidth||1,g=a.overshoot,f=t.startAngleRad+t.translate(r.y,null,null,null,!0);e(g)?(g=g/180*Math.PI,f=Math.max(t.startAngleRad-g,Math.min(t.endAngleRad+g,f))):!1===a.wrap&&(f=Math.max(t.startAngleRad,Math.min(t.endAngleRad,f))),f=180*f/Math.PI,r.shapeType="path",r.shapeArgs={d:l.path||["M",-c,-d/2,"L",p,-d/2,h,-u/2,h,u/2,p,d/2,-c,d/2,"z"],translateX:n[0],translateY:n[1],rotation:f},r.plotX=n[0],r.plotY=n[1]})},drawPoints:function(){var t=this,e=t.chart,a=t.yAxis.center,o=t.pivot,n=t.options,r=n.pivot,l=e.renderer;t.points.forEach(function(a){var s=a.graphic,o=a.shapeArgs,r=o.d,h=i(n.dial,a.dial);s?(s.animate(o),o.d=r):(a.graphic=l[a.shapeType](o).attr({rotation:o.rotation,zIndex:1}).addClass("highcharts-dial").add(t.group),e.styledMode||a.graphic.attr({stroke:h.borderColor||"none","stroke-width":h.borderWidth||0,fill:h.backgroundColor||"#000000"}))}),o?o.animate({translateX:a[0],translateY:a[1]}):(t.pivot=l.circle(0,0,s(r.radius,5)).attr({zIndex:2}).addClass("highcharts-pivot").translate(a[0],a[1]).add(t.group),e.styledMode||t.pivot.attr({"stroke-width":r.borderWidth||0,stroke:r.borderColor||"#cccccc",fill:r.backgroundColor||"#000000"}))},animate:function(t){var e=this;t||(e.points.forEach(function(t){var i=t.graphic;i&&(i.attr({rotation:180*e.yAxis.startAngleRad/Math.PI}),i.animate({rotation:t.shapeArgs.rotation},e.options.animation))}),e.animate=null)},render:function(){this.group=this.plotGroup("group","series",this.visible?"visible":"hidden",this.options.zIndex,this.chart.seriesGroup),n.prototype.render.call(this),this.group.clip(this.chart.clipRect)},setData:function(t,e){n.prototype.setData.call(this,t,!1),this.processData(),this.generatePoints(),s(e,!0)&&this.chart.redraw()},drawTracker:l&&l.drawTrackerPoint},{setState:function(t){this.state=t}})}(t),function(t){var e=t.noop,i=t.pick,a=t.seriesType,s=t.seriesTypes;a("boxplot","column",{threshold:null,tooltip:{pointFormat:'<span style="color:{point.color}">●</span> <b> {series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",fillColor:"#ffffff",lineWidth:1,medianWidth:2,whiskerWidth:2},{pointArrayMap:["low","q1","median","q3","high"],toYData:function(t){return[t.low,t.q1,t.median,t.q3,t.high]},pointValKey:"high",pointAttribs:function(){return{}},drawDataLabels:e,translate:function(){var t=this.yAxis,e=this.pointArrayMap;s.column.prototype.translate.apply(this),this.points.forEach(function(i){e.forEach(function(e){null!==i[e]&&(i[e+"Plot"]=t.translate(i[e],0,1,0,1))})})},drawPoints:function(){var t,e,a,s,o,n,r,l,h,p,c,d=this,u=d.points,g=d.options,f=d.chart,b=f.renderer,m=0,y=!1!==d.doQuartiles,x=d.options.whiskerLength;u.forEach(function(u){var v=u.graphic,M=v?"animate":"attr",P=u.shapeArgs,L={},w={},A={},k={},S=u.color||d.color;void 0!==u.plotY&&(r=P.width,l=Math.floor(P.x),h=l+r,p=Math.round(r/2),t=Math.floor(y?u.q1Plot:u.lowPlot),e=Math.floor(y?u.q3Plot:u.lowPlot),a=Math.floor(u.highPlot),s=Math.floor(u.lowPlot),v||(u.graphic=v=b.g("point").add(d.group),u.stem=b.path().addClass("highcharts-boxplot-stem").add(v),x&&(u.whiskers=b.path().addClass("highcharts-boxplot-whisker").add(v)),y&&(u.box=b.path(void 0).addClass("highcharts-boxplot-box").add(v)),u.medianShape=b.path(void 0).addClass("highcharts-boxplot-median").add(v)),f.styledMode||(w.stroke=u.stemColor||g.stemColor||S,w["stroke-width"]=i(u.stemWidth,g.stemWidth,g.lineWidth),w.dashstyle=u.stemDashStyle||g.stemDashStyle,u.stem.attr(w),x&&(A.stroke=u.whiskerColor||g.whiskerColor||S,A["stroke-width"]=i(u.whiskerWidth,g.whiskerWidth,g.lineWidth),u.whiskers.attr(A)),y&&(L.fill=u.fillColor||g.fillColor||S,L.stroke=g.lineColor||S,L["stroke-width"]=g.lineWidth||0,u.box.attr(L)),k.stroke=u.medianColor||g.medianColor||S,k["stroke-width"]=i(u.medianWidth,g.medianWidth,g.lineWidth),u.medianShape.attr(k)),n=u.stem.strokeWidth()%2/2,m=l+p+n,u.stem[M]({d:["M",m,e,"L",m,a,"M",m,t,"L",m,s]}),y&&(n=u.box.strokeWidth()%2/2,t=Math.floor(t)+n,e=Math.floor(e)+n,l+=n,h+=n,u.box[M]({d:["M",l,e,"L",l,t,"L",h,t,"L",h,e,"L",l,e,"z"]})),x&&(n=u.whiskers.strokeWidth()%2/2,a+=n,s+=n,c=/%$/.test(x)?p*parseFloat(x)/100:x/2,u.whiskers[M]({d:["M",m-c,a,"L",m+c,a,"M",m-c,s,"L",m+c,s]})),o=Math.round(u.medianPlot),n=u.medianShape.strokeWidth()%2/2,o+=n,u.medianShape[M]({d:["M",l,o,"L",h,o]}))})},setStackedPoints:e})}(t),function(t){var e=t.noop,i=t.seriesType,a=t.seriesTypes;i("errorbar","boxplot",{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null},{type:"errorbar",pointArrayMap:["low","high"],toYData:function(t){return[t.low,t.high]},pointValKey:"high",doQuartiles:!1,drawDataLabels:a.arearange?function(){var t=this.pointValKey;a.arearange.prototype.drawDataLabels.call(this),this.data.forEach(function(e){e.y=e[t]})}:e,getColumnMetrics:function(){return this.linkedParent&&this.linkedParent.columnMetrics||a.column.prototype.getColumnMetrics.call(this)}})}(t),function(t){var e=t.correctFloat,i=t.isNumber,a=t.pick,s=t.Point,o=t.Series,n=t.seriesType,r=t.seriesTypes;n("waterfall","column",{dataLabels:{inside:!0},lineWidth:1,lineColor:"#333333",dashStyle:"Dot",borderColor:"#333333",states:{hover:{lineWidthPlus:0}}},{pointValKey:"y",showLine:!0,generatePoints:function(){var t,i,a,s,o=this.options.threshold;for(r.column.prototype.generatePoints.apply(this),a=0,i=this.points.length;a<i;a++)t=this.points[a],s=this.processedYData[a],t.isSum?t.y=e(s):t.isIntermediateSum&&(t.y=e(s-o),o=s)},translate:function(){var t,e,i,s,o,n,l,h,p,c,d,u,g,f=this.options,b=this.yAxis,m=a(f.minPointLength,5),y=m/2,x=f.threshold,v=f.stacking;for(r.column.prototype.translate.apply(this),p=c=x,e=0,t=(i=this.points).length;e<t;e++)s=i[e],h=this.processedYData[e],o=s.shapeArgs,n=v&&b.stacks[(this.negStacks&&h<x?"-":"")+this.stackKey],u=this.getStackIndicator(u,s.x,this.index),d=a(n&&n[s.x].points[u.key],[0,h]),l=Math.max(p,p+s.y)+d[0],o.y=b.translate(l,0,1,0,1),s.isSum?(o.y=b.translate(d[1],0,1,0,1),o.height=Math.min(b.translate(d[0],0,1,0,1),b.len)-o.y):s.isIntermediateSum?(o.y=b.translate(d[1],0,1,0,1),o.height=Math.min(b.translate(c,0,1,0,1),b.len)-o.y,c=d[1]):(o.height=h>0?b.translate(p,0,1,0,1)-o.y:b.translate(p,0,1,0,1)-b.translate(p-h,0,1,0,1),p+=n&&n[s.x]?n[s.x].total:h,s.below=p<a(x,0)),o.height<0&&(o.y+=o.height,o.height*=-1),s.plotY=o.y=Math.round(o.y)-this.borderWidth%2/2,o.height=Math.max(Math.round(o.height),.001),s.yBottom=o.y+o.height,o.height<=m&&!s.isNull?(o.height=m,o.y-=y,s.plotY=o.y,s.y<0?s.minPointLengthOffset=-y:s.minPointLengthOffset=y):(s.isNull&&(o.width=0),s.minPointLengthOffset=0),g=s.plotY+(s.negative?o.height:0),this.chart.inverted?s.tooltipPos[0]=b.len-g:s.tooltipPos[1]=g},processData:function(t){var i,a,s,n,r,l,h,p=this.options,c=this.yData,d=this.options.data,u=c.length;for(s=a=n=r=p.threshold||0,h=0;h<u;h++)l=c[h],i=d&&d[h]?d[h]:{},"sum"===l||i.isSum?c[h]=e(s):"intermediateSum"===l||i.isIntermediateSum?c[h]=e(a):(s+=l,a+=l),n=Math.min(s,n),r=Math.max(s,r);o.prototype.processData.call(this,t),this.options.stacking||(this.dataMin=n,this.dataMax=r)},toYData:function(t){return t.isSum?0===t.x?null:"sum":t.isIntermediateSum?0===t.x?null:"intermediateSum":t.y},pointAttribs:function(t,e){var i,a=this.options.upColor;return a&&!t.options.color&&(t.color=t.y>0?a:null),delete(i=r.column.prototype.pointAttribs.call(this,t,e)).dashstyle,i},getGraphPath:function(){return["M",0,0]},getCrispPath:function(){var t,e,i,a,s=this.data,o=s.length,n=this.graph.strokeWidth()+this.borderWidth,r=Math.round(n)%2/2,l=this.xAxis.reversed,h=this.yAxis.reversed,p=[];for(i=1;i<o;i++)e=s[i].shapeArgs,a=["M",(t=s[i-1].shapeArgs).x+(l?0:t.width),t.y+s[i-1].minPointLengthOffset+r,"L",e.x+(l?t.width:0),t.y+s[i-1].minPointLengthOffset+r],(s[i-1].y<0&&!h||s[i-1].y>0&&h)&&(a[2]+=t.height,a[5]+=t.height),p=p.concat(a);return p},drawGraph:function(){o.prototype.drawGraph.call(this),this.graph.attr({d:this.getCrispPath()})},setStackedPoints:function(){var t,e,i=this.options;for(o.prototype.setStackedPoints.apply(this,arguments),t=this.stackedYData?this.stackedYData.length:0,e=1;e<t;e++)i.data[e].isSum||i.data[e].isIntermediateSum||(this.stackedYData[e]+=this.stackedYData[e-1])},getExtremes:function(){if(this.options.stacking)return o.prototype.getExtremes.apply(this,arguments)}},{getClassName:function(){var t=s.prototype.getClassName.call(this);return this.isSum?t+=" highcharts-sum":this.isIntermediateSum&&(t+=" highcharts-intermediate-sum"),t},isValid:function(){return i(this.y,!0)||this.isSum||this.isIntermediateSum}})}(t),function(t){var e=t.LegendSymbolMixin,i=t.noop,a=t.Series,s=t.seriesType,o=t.seriesTypes;s("polygon","scatter",{marker:{enabled:!1,states:{hover:{enabled:!1}}},stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:""},trackByArea:!0},{type:"polygon",getGraphPath:function(){for(var t=a.prototype.getGraphPath.call(this),e=t.length+1;e--;)(e===t.length||"M"===t[e])&&e>0&&t.splice(e,0,"z");return this.areaPath=t,t},drawGraph:function(){this.options.fillColor=this.color,o.area.prototype.drawGraph.call(this)},drawLegendSymbol:e.drawRectangle,drawTracker:a.prototype.drawTracker,setStackedPoints:i})}(t),function(t){var e=t.Series,i=t.Legend,a=t.Chart,s=t.addEvent,o=t.wrap,n=t.color,r=t.isNumber,l=t.numberFormat,h=t.objectEach,p=t.merge,c=t.noop,d=t.pick,u=t.stableSort,g=t.setOptions,f=t.arrayMin,b=t.arrayMax;g({legend:{bubbleLegend:{borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:10,color:void 0},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0}}}),t.BubbleLegend=function(t,e){this.init(t,e)},t.BubbleLegend.prototype={init:function(t,e){this.options=t,this.visible=!0,this.chart=e.chart,this.legend=e},setState:c,addToLegend:function(t){t.splice(this.options.legendIndex,0,this)},drawLegendSymbol:function(t){var e,i,a,s,o=this.chart,n=this.options,l=d(t.options.itemDistance,20),h=n.ranges,p=n.connectorDistance;this.fontMetrics=o.renderer.fontMetrics(n.labels.style.fontSize.toString()+"px"),h&&h.length&&r(h[0].value)?(u(h,function(t,e){return e.value-t.value}),this.ranges=h,this.setOptions(),this.render(),s=this.getMaxLabelSize(),e=2*(a=this.ranges[0].radius),i=(i=p-a+s.width)>0?i:0,this.maxLabel=s,this.movementX="left"===n.labels.align?i:0,this.legendItemWidth=e+i+l,this.legendItemHeight=e+this.fontMetrics.h/2):t.options.bubbleLegend.autoRanges=!0},setOptions:function(){var t=this,e=t.ranges,i=t.options,a=t.chart.series[i.seriesIndex],s=t.legend.baseline,o={"z-index":i.zIndex,"stroke-width":i.borderWidth},r={"z-index":i.zIndex,"stroke-width":i.connectorWidth},l=t.getLabelStyles(),h=a.options.marker.fillOpacity,c=t.chart.styledMode;e.forEach(function(u,g){c||(o.stroke=d(u.borderColor,i.borderColor,a.color),o.fill=d(u.color,i.color,1!==h?n(a.color).setOpacity(h).get("rgba"):a.color),r.stroke=d(u.connectorColor,i.connectorColor,a.color)),e[g].radius=t.getRangeRadius(u.value),e[g]=p(e[g],{center:e[0].radius-e[g].radius+s}),c||p(!0,e[g],{bubbleStyle:p(!1,o),connectorStyle:p(!1,r),labelStyle:l})})},getLabelStyles:function(){var t=this.options,e={},i="left"===t.labels.align,a=this.legend.options.rtl;return h(t.labels.style,function(t,i){"color"!==i&&"fontSize"!==i&&"z-index"!==i&&(e[i]=t)}),p(!1,e,{"font-size":t.labels.style.fontSize,fill:d(t.labels.style.color,"#000000"),"z-index":t.zIndex,align:a||i?"right":"left"})},getRangeRadius:function(t){var e=this.options,i=this.options.seriesIndex,a=this.chart.series[i],s=e.ranges[0].value,o=e.ranges[e.ranges.length-1].value,n=e.minSize,r=e.maxSize;return a.getRadius.call(this,o,s,n,r,t)},render:function(){var t=this,e=t.chart.renderer,i=t.options.zThreshold;t.symbols||(t.symbols={connectors:[],bubbleItems:[],labels:[]}),t.legendSymbol=e.g("bubble-legend"),t.legendItem=e.g("bubble-legend-item"),t.legendSymbol.translateX=0,t.legendSymbol.translateY=0,t.ranges.forEach(function(e){e.value>=i&&t.renderRange(e)}),t.legendSymbol.add(t.legendItem),t.legendItem.add(t.legendGroup),t.hideOverlappingLabels()},renderRange:function(t){var e,i,a,s=this.ranges[0],o=this.legend,n=this.options,r=n.labels,l=this.chart.renderer,h=this.symbols,p=h.labels,c=t.center,d=Math.abs(t.radius),u=n.connectorDistance,g=r.align,f=o.options.rtl,b=r.style.fontSize,m=f||"left"===g?-u:u,y=n.borderWidth,x=n.connectorWidth,v=s.radius,M=c-d-y/2+x/2,P=b/2-(this.fontMetrics.h-b)/2,L=(M%1?1:.5)-(x%2?0:.5),w=l.styledMode;"center"===g&&(m=0,n.connectorDistance=0,t.labelStyle.align="center"),i=M+n.labels.y,a=v+m+n.labels.x,h.bubbleItems.push(l.circle(v,c+L,d).attr(w?{}:t.bubbleStyle).addClass((w?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-symbol "+(n.className||"")).add(this.legendSymbol)),h.connectors.push(l.path(l.crispLine(["M",v,M,"L",v+m,M],n.connectorWidth)).attr(w?{}:t.connectorStyle).addClass((w?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(n.connectorClassName||"")).add(this.legendSymbol)),e=l.text(this.formatLabel(t),a,i+P).attr(w?{}:t.labelStyle).addClass("highcharts-bubble-legend-labels "+(n.labels.className||"")).add(this.legendSymbol),p.push(e),e.placed=!0,e.alignAttr={x:a,y:i+P}},getMaxLabelSize:function(){var t,e;return this.symbols.labels.forEach(function(i){e=i.getBBox(!0),t=t?e.width>t.width?e:t:e}),t},formatLabel:function(e){var i=this.options,a=i.labels.formatter,s=i.labels.format;return s?t.format(s,e):a?a.call(e):l(e.value,1)},hideOverlappingLabels:function(){var t=this.chart,e=this.options.labels.allowOverlap,i=this.symbols;!e&&i&&(t.hideOverlappingLabels(i.labels),i.labels.forEach(function(t,e){t.newOpacity?t.newOpacity!==t.oldOpacity&&i.connectors[e].show():i.connectors[e].hide()}))},getRanges:function(){var t,e,i=this.legend.bubbleLegend,a=i.chart.series,s=i.options.ranges,o=Number.MAX_VALUE,n=-Number.MAX_VALUE;return a.forEach(function(t){t.isBubble&&!t.ignoreSeries&&(e=t.zData.filter(r)).length&&(o=d(t.options.zMin,Math.min(o,Math.max(f(e),!1===t.options.displayNegative?t.options.zThreshold:-Number.MAX_VALUE))),n=d(t.options.zMax,Math.max(n,b(e))))}),t=o===n?[{value:n}]:[{value:o},{value:(o+n)/2},{value:n,autoRanges:!0}],s.length&&s[0].radius&&t.reverse(),t.forEach(function(e,i){s&&s[i]&&(t[i]=p(!1,s[i],e))}),t},predictBubbleSizes:function(){var t,e=this.chart,i=this.fontMetrics,a=e.legend.options,s=a.floating,o="horizontal"===a.layout,n=o?e.legend.lastLineHeight:0,r=e.plotSizeX,l=e.plotSizeY,h=e.series[this.options.seriesIndex],p=Math.ceil(h.minPxSize),c=Math.ceil(h.maxPxSize),d=h.options.maxSize,u=Math.min(l,r);return s||!/%$/.test(d)?t=c:(d=parseFloat(d),t=(u+n-i.h/2)*d/100/(d/100+1),(o&&l-t>=r||!o&&r-t>=l)&&(t=c)),[p,Math.ceil(t)]},updateRanges:function(t,e){var i=this.legend.options.bubbleLegend;i.minSize=t,i.maxSize=e,i.ranges=this.getRanges()},correctSizes:function(){var t=this.legend,e=this.chart.series[this.options.seriesIndex],i=e.maxPxSize,a=this.options.maxSize;Math.abs(Math.ceil(i)-a)>1&&(this.updateRanges(this.options.minSize,e.maxPxSize),t.render())}},s(t.Legend,"afterGetAllItems",function(e){var i=this.bubbleLegend,a=this.options,s=a.bubbleLegend,o=this.chart.getVisibleBubbleSeriesIndex();i&&i.ranges&&i.ranges.length&&(s.ranges.length&&(s.autoRanges=!!s.ranges[0].autoRanges),this.destroyItem(i)),o>=0&&a.enabled&&s.enabled&&(s.seriesIndex=o,this.bubbleLegend=new t.BubbleLegend(s,this),this.bubbleLegend.addToLegend(e.allItems))}),a.prototype.getVisibleBubbleSeriesIndex=function(){for(var t=this.series,e=0;e<t.length;){if(t[e]&&t[e].isBubble&&t[e].visible&&t[e].zData.length)return e;e++}return-1},i.prototype.getLinesHeights=function(){var t,e=this.allItems,i=[],a=e.length,s=0,o=0;for(s=0;s<a;s++)if(e[s].legendItemHeight&&(e[s].itemHeight=e[s].legendItemHeight),e[s]===e[a-1]||e[s+1]&&e[s]._legendItemPos[1]!==e[s+1]._legendItemPos[1]){for(i.push({height:0}),t=i[i.length-1];o<=s;o++)e[o].itemHeight>t.height&&(t.height=e[o].itemHeight);t.step=s}return i},i.prototype.retranslateItems=function(t){var e,i,a,s=this.allItems,o=this.options.rtl,n=0;s.forEach(function(s,r){e=s.legendGroup.translateX,i=s._legendItemPos[1],((a=s.movementX)||o&&s.ranges)&&(a=o?e-s.options.maxSize/2:e+a,s.legendGroup.attr({translateX:a})),r>t[n].step&&n++,s.legendGroup.attr({translateY:Math.round(i+t[n].height/2)}),s._legendItemPos[1]=i+t[n].height/2})},s(e,"legendItemClick",function(){var t,e=this.chart,i=this.visible,a=this.chart.legend;a&&a.bubbleLegend&&(this.visible=!i,this.ignoreSeries=i,t=e.getVisibleBubbleSeriesIndex()>=0,a.bubbleLegend.visible!==t&&(a.update({bubbleLegend:{enabled:t}}),a.bubbleLegend.visible=t),this.visible=i)}),o(a.prototype,"drawChartBox",function(t,e,i){var a,s,o=this.legend,n=this.getVisibleBubbleSeriesIndex()>=0;o&&o.options.enabled&&o.bubbleLegend&&o.options.bubbleLegend.autoRanges&&n?(a=o.bubbleLegend.options,s=o.bubbleLegend.predictBubbleSizes(),o.bubbleLegend.updateRanges(s[0],s[1]),a.placed||(o.group.placed=!1,o.allItems.forEach(function(t){t.legendGroup.translateY=null})),o.render(),this.getMargins(),this.axes.forEach(function(t){t.render(),a.placed||(t.setScale(),t.updateNames(),h(t.ticks,function(t){t.isNew=!0,t.isNewLabel=!0}))}),a.placed=!0,this.getMargins(),t.call(this,e,i),o.bubbleLegend.correctSizes(),o.retranslateItems(o.getLinesHeights())):(t.call(this,e,i),o&&o.options.enabled&&o.bubbleLegend&&(o.render(),o.retranslateItems(o.getLinesHeights())))})}(t),function(t){var e=t.arrayMax,i=t.arrayMin,a=t.Axis,s=t.color,o=t.isNumber,n=t.noop,r=t.pick,l=t.pInt,h=t.Point,p=t.Series,c=t.seriesType,d=t.seriesTypes;c("bubble","scatter",{dataLabels:{formatter:function(){return this.point.z},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"},{pointArrayMap:["y","z"],parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",bubblePadding:!0,zoneAxis:"z",directTouch:!0,isBubble:!0,pointAttribs:function(t,e){var i=this.options.marker.fillOpacity,a=p.prototype.pointAttribs.call(this,t,e);return 1!==i&&(a.fill=s(a.fill).setOpacity(i).get("rgba")),a},getRadii:function(t,e,i){var a,s,o,n=this.zData,r=i.minPxSize,l=i.maxPxSize,h=[];for(s=0,a=n.length;s<a;s++)o=n[s],h.push(this.getRadius(t,e,r,l,o));this.radii=h},getRadius:function(t,e,i,a,s){var n,r,l=this.options,h="width"!==l.sizeBy,p=l.zThreshold,c=e-t;return l.sizeByAbsoluteValue&&null!==s&&(s=Math.abs(s-p),e=c=Math.max(e-p,Math.abs(t-p)),t=0),o(s)?s<t?r=i/2-1:(n=c>0?(s-t)/c:.5,h&&n>=0&&(n=Math.sqrt(n)),r=Math.ceil(i+n*(a-i))/2):r=null,r},animate:function(t){!t&&this.points.length<this.options.animationLimit&&(this.points.forEach(function(t){var e,i=t.graphic;i&&i.width&&(e={x:i.x,y:i.y,width:i.width,height:i.height},i.attr({x:t.plotX,y:t.plotY,width:1,height:1}),i.animate(e,this.options.animation))},this),this.animate=null)},translate:function(){var e,i,a,s=this.data,n=this.radii;for(d.scatter.prototype.translate.call(this),e=s.length;e--;)i=s[e],a=n?n[e]:0,o(a)&&a>=this.minPxSize/2?(i.marker=t.extend(i.marker,{radius:a,width:2*a,height:2*a}),i.dlBox={x:i.plotX-a,y:i.plotY-a,width:2*a,height:2*a}):i.shapeArgs=i.plotY=i.dlBox=void 0},alignDataLabel:d.column.prototype.alignDataLabel,buildKDTree:n,applyZones:n},{haloPath:function(t){return h.prototype.haloPath.call(this,0===t?0:(this.marker&&this.marker.radius||0)+t)},ttBelow:!1}),a.prototype.beforePadding=function(){var a=this,s=this.len,n=this.chart,h=0,p=s,c=this.isXAxis,d=c?"xData":"yData",u=this.min,g={},f=Math.min(n.plotWidth,n.plotHeight),b=Number.MAX_VALUE,m=-Number.MAX_VALUE,y=this.max-u,x=s/y,v=[];this.series.forEach(function(s){var o,h=s.options;!s.bubblePadding||!s.visible&&n.options.chart.ignoreHiddenSeries||(a.allowZoomOutside=!0,v.push(s),c&&(["minSize","maxSize"].forEach(function(t){var e=h[t],i=/%$/.test(e);e=l(e),g[t]=i?f*e/100:e}),s.minPxSize=g.minSize,s.maxPxSize=Math.max(g.maxSize,g.minSize),(o=s.zData.filter(t.isNumber)).length&&(b=r(h.zMin,Math.min(b,Math.max(i(o),!1===h.displayNegative?h.zThreshold:-Number.MAX_VALUE))),m=r(h.zMax,Math.max(m,e(o))))))}),v.forEach(function(t){var e,i=t[d],s=i.length;if(c&&t.getRadii(b,m,t),y>0)for(;s--;)o(i[s])&&a.dataMin<=i[s]&&i[s]<=a.dataMax&&(e=t.radii[s],h=Math.min((i[s]-u)*x-e,h),p=Math.max((i[s]-u)*x+e,p))}),v.length&&y>0&&!this.isLog&&(p-=s,x*=(s+Math.max(0,h)-Math.min(p,s))/s,[["min","userMin",h],["max","userMax",p]].forEach(function(t){void 0===r(a.options[t[0]],a[t[1]])&&(a[t[0]]+=t[2]/x)}))}}(t),function(t){var e=t.seriesType,i=t.defined;e("packedbubble","bubble",{minSize:"10%",maxSize:"100%",sizeBy:"radius",zoneAxis:"y",tooltip:{pointFormat:"Value: {point.value}"}},{pointArrayMap:["value"],pointValKey:"value",isCartesian:!1,axisTypes:[],accumulateAllPoints:function(t){var e,i,a=t.chart,s=[];for(e=0;e<a.series.length;e++)if((t=a.series[e]).visible||!a.options.chart.ignoreHiddenSeries)for(i=0;i<t.yData.length;i++)s.push([null,null,t.yData[i],t.index,i]);return s},translate:function(){var e,a,s,o,n=this.chart,r=this.data,l=this.index;for(this.processedXData=this.xData,this.generatePoints(),i(n.allDataPoints)||(n.allDataPoints=this.accumulateAllPoints(this),this.getPointRadius()),e=this.placeBubbles(n.allDataPoints),o=0;o<e.length;o++)e[o][3]===l&&(a=r[e[o][4]],s=e[o][2],a.plotX=e[o][0]-n.plotLeft+n.diffX,a.plotY=e[o][1]-n.plotTop+n.diffY,a.marker=t.extend(a.marker,{radius:s,width:2*s,height:2*s}))},checkOverlap:function(t,e){var i=t[0]-e[0],a=t[1]-e[1],s=t[2]+e[2];return Math.sqrt(i*i+a*a)-Math.abs(s)<-.001},positionBubble:function(t,e,i){var a=Math.sqrt,s=Math.asin,o=Math.acos,n=Math.pow,r=Math.abs,l=a(n(t[0]-e[0],2)+n(t[1]-e[1],2)),h=o((n(l,2)+n(i[2]+e[2],2)-n(i[2]+t[2],2))/(2*(i[2]+e[2])*l)),p=s(r(t[0]-e[0])/l),c=(t[1]-e[1]<0?0:Math.PI)+h+p*((t[0]-e[0])*(t[1]-e[1])<0?1:-1),d=Math.cos(c),u=Math.sin(c);return[e[0]+(e[2]+i[2])*u,e[1]-(e[2]+i[2])*d,i[2],i[3],i[4]]},placeBubbles:function(t){var e,i,a,s=this.checkOverlap,o=this.positionBubble,n=[],r=1,l=0,h=0;if(!(i=t.sort(function(t,e){return e[2]-t[2]})).length)return[];if(i.length<2)return[0,0,i[0][0],i[0][1],i[0][2]];for(n.push([[0,0,i[0][2],i[0][3],i[0][4]]]),n.push([[0,0-i[1][2]-i[0][2],i[1][2],i[1][3],i[1][4]]]),a=2;a<i.length;a++)i[a][2]=i[a][2]||1,s(e=o(n[r][l],n[r-1][h],i[a]),n[r][0])?(n.push([]),h=0,n[r+1].push(o(n[r][l],n[r][0],i[a])),r++,l=0):r>1&&n[r-1][h+1]&&s(e,n[r-1][h+1])?(h++,n[r].push(o(n[r][l],n[r-1][h],i[a])),l++):(l++,n[r].push(e));return this.chart.stages=n,this.chart.rawPositions=[].concat.apply([],n),this.resizeRadius(),this.chart.rawPositions},resizeRadius:function(){var t,e,i,a,s,o,n,r,l,h=this.chart,p=h.rawPositions,c=Math.min,d=Math.max,u=h.plotLeft,g=h.plotTop,f=h.plotHeight,b=h.plotWidth;for(t=i=Number.POSITIVE_INFINITY,e=a=Number.NEGATIVE_INFINITY,l=0;l<p.length;l++)s=p[l][2],t=c(t,p[l][0]-s),e=d(e,p[l][0]+s),i=c(i,p[l][1]-s),a=d(a,p[l][1]+s);if(n=[(b-u)/(o=[e-t,a-i])[0],(f-g)/o[1]],r=c.apply([],n),Math.abs(r-1)>1e-10){for(l=0;l<p.length;l++)p[l][2]*=r;this.placeBubbles(p)}else h.diffY=f/2+g-i-(a-i)/2,h.diffX=b/2+u-t-(e-t)/2},getPointRadius:function(){var t,e,i,a,s=this,o=s.chart,n=o.plotWidth,r=o.plotHeight,l=s.options,h=Math.min(n,r),p={},c=[],d=o.allDataPoints;["minSize","maxSize"].forEach(function(t){var e=parseInt(l[t],10),i=/%$/.test(e);p[t]=i?h*e/100:e}),o.minRadius=t=p.minSize,o.maxRadius=e=p.maxSize,(d||[]).forEach(function(o,n){i=o[2],a=s.getRadius(t,e,t,e,i),0===i&&(a=null),d[n][2]=a,c.push(a)}),this.radii=c},alignDataLabel:t.Series.prototype.alignDataLabel}),t.addEvent(t.seriesTypes.packedbubble,"updatedData",function(){var t=this;this.chart.series.forEach(function(e){e.type===t.type&&(e.isDirty=!0)})}),t.addEvent(t.Chart,"beforeRedraw",function(){this.allDataPoints&&delete this.allDataPoints})}(t),function(t){var e,i=t.pick,a=t.Pointer,s=t.Series,o=t.seriesTypes,n=t.wrap,r=s.prototype,l=a.prototype;if(!t.polarExtended){t.polarExtended=!0,r.searchPointByAngle=function(t){var e=this.chart,i=this.xAxis.pane.center,a=t.chartX-i[0]-e.plotLeft,s=t.chartY-i[1]-e.plotTop;return this.searchKDTree({clientX:180+Math.atan2(a,s)*(-180/Math.PI)})},r.getConnectors=function(t,e,i,a){var s,o,n,r,l,h,p,c,d,u,g,f,b,m,y,x,v,M,P,L,w,A=a?1:0;return o=(s=e>=0&&e<=t.length-1?e:e<0?t.length-1+e:0)-1<0?t.length-(1+A):s-1,n=s+1>t.length-1?A:s+1,r=t[o],l=t[n],h=r.plotX,p=r.plotY,c=l.plotX,d=l.plotY,b=(1.5*(u=t[s].plotX)+h)/2.5,m=(1.5*(g=t[s].plotY)+p)/2.5,y=(1.5*u+c)/2.5,x=(1.5*g+d)/2.5,v=Math.sqrt(Math.pow(b-u,2)+Math.pow(m-g,2)),M=Math.sqrt(Math.pow(y-u,2)+Math.pow(x-g,2)),P=Math.atan2(m-g,b-u),L=Math.atan2(x-g,y-u),w=Math.PI/2+(P+L)/2,Math.abs(P-w)>Math.PI/2&&(w-=Math.PI),b=u+Math.cos(w)*v,m=g+Math.sin(w)*v,f={rightContX:y=u+Math.cos(Math.PI+w)*M,rightContY:x=g+Math.sin(Math.PI+w)*M,leftContX:b,leftContY:m,plotX:u,plotY:g},i&&(f.prevPointCont=this.getConnectors(t,o,!1,a)),f},n(r,"buildKDTree",function(t){this.chart.polar&&(this.kdByAngle?this.searchPoint=this.searchPointByAngle:this.options.findNearestPointBy="xy"),t.apply(this)}),r.toXY=function(t){var e,i,a=this.chart,s=t.plotX,o=t.plotY;t.rectPlotX=s,t.rectPlotY=o,e=this.xAxis.postTranslate(t.plotX,this.yAxis.len-o),t.plotX=t.polarPlotX=e.x-a.plotLeft,t.plotY=t.polarPlotY=e.y-a.plotTop,this.kdByAngle?((i=(s/Math.PI*180+this.xAxis.pane.options.startAngle)%360)<0&&(i+=360),t.clientX=i):t.clientX=t.plotX},o.spline&&(n(o.spline.prototype,"getPointSpline",function(t,e,i,a){var s;return this.chart.polar?a?["C",(s=this.getConnectors(e,a,!0,this.connectEnds)).prevPointCont.rightContX,s.prevPointCont.rightContY,s.leftContX,s.leftContY,s.plotX,s.plotY]:["M",i.plotX,i.plotY]:t.call(this,e,i,a)}),o.areasplinerange&&(o.areasplinerange.prototype.getPointSpline=o.spline.prototype.getPointSpline)),t.addEvent(s,"afterTranslate",function(){var e,i,a=this.chart;if(a.polar){if(this.kdByAngle=a.tooltip&&a.tooltip.shared,!this.preventPostTranslate)for(i=(e=this.points).length;i--;)this.toXY(e[i]);this.hasClipCircleSetter||(this.hasClipCircleSetter=Boolean(t.addEvent(this,"afterRender",function(){var e;a.polar&&(e=this.yAxis.center,this.group.clip(a.renderer.clipCircle(e[0],e[1],e[2]/2)),this.setClip=t.noop)})))}},{order:2}),n(r,"getGraphPath",function(t,e){var i,a,s,o=this;if(this.chart.polar){for(e=e||this.points,i=0;i<e.length;i++)if(!e[i].isNull){a=i;break}!1!==this.options.connectEnds&&void 0!==a&&(this.connectEnds=!0,e.splice(e.length,0,e[a]),s=!0),e.forEach(function(t){void 0===t.polarPlotY&&o.toXY(t)})}var n=t.apply(this,[].slice.call(arguments,1));return s&&e.pop(),n});var h=function(t,e){var i,a=this.chart,s=this.options.animation,o=this.group,n=this.markerGroup,r=this.xAxis.center,l=a.plotLeft,h=a.plotTop;a.polar?a.renderer.isSVG&&(!0===s&&(s={}),e?(i={translateX:r[0]+l,translateY:r[1]+h,scaleX:.001,scaleY:.001},o.attr(i),n&&n.attr(i)):(i={translateX:l,translateY:h,scaleX:1,scaleY:1},o.animate(i,s),n&&n.animate(i,s),this.animate=null)):t.call(this,e)};n(r,"animate",h),o.column&&((e=o.column.prototype).polarArc=function(t,e,a,s){var o=this.xAxis.center,n=this.yAxis.len;return this.chart.renderer.symbols.arc(o[0],o[1],n-e,null,{start:a,end:s,innerR:n-i(t,n)})},n(e,"animate",h),n(e,"translate",function(t){var e,i,a,s,o=this.xAxis,n=o.startAngleRad;if(this.preventPostTranslate=!0,t.call(this),o.isRadial)for(s=(i=this.points).length;s--;)e=(a=i[s]).barX+n,a.shapeType="path",a.shapeArgs={d:this.polarArc(a.yBottom,a.plotY,e,e+a.pointWidth)},this.toXY(a),a.tooltipPos=[a.plotX,a.plotY],a.ttBelow=a.plotY>o.center[1]}),n(e,"alignDataLabel",function(t,e,i,a,s,o){if(this.chart.polar){var n,l,h=e.rectPlotX/Math.PI*180;null===a.align&&(n=h>20&&h<160?"left":h>200&&h<340?"right":"center",a.align=n),null===a.verticalAlign&&(l=h<45||h>315?"bottom":h>135&&h<225?"top":"middle",a.verticalAlign=l),r.alignDataLabel.call(this,e,i,a,s,o)}else t.call(this,e,i,a,s,o)})),n(l,"getCoordinates",function(t,e){var i=this.chart,a={xAxis:[],yAxis:[]};return i.polar?i.axes.forEach(function(t){var s=t.isXAxis,o=t.center,n=e.chartX-o[0]-i.plotLeft,r=e.chartY-o[1]-i.plotTop;a[s?"xAxis":"yAxis"].push({axis:t,value:t.translate(s?Math.PI-Math.atan2(n,r):Math.sqrt(Math.pow(n,2)+Math.pow(r,2)),!0)})}):a=t.call(this,e),a}),t.SVGRenderer.prototype.clipCircle=function(e,i,a){var s,o=t.uniqueKey(),n=this.createElement("clipPath").attr({id:o}).add(this.defs);return(s=this.circle(e,i,a).add(n)).id=o,s.clipPath=n,s},t.addEvent(t.Chart,"getAxes",function(){this.pane||(this.pane=[]),t.splat(this.options.pane).forEach(function(e){new t.Pane(e,this)},this)}),t.addEvent(t.Chart,"afterDrawChartBox",function(){this.pane.forEach(function(t){t.render()})}),n(t.Chart.prototype,"get",function(e,i){return t.find(this.pane,function(t){return t.options.id===i})||e.call(this,i)})}}(t)});