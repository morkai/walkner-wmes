!function(e,i,t){"use strict";var l="stickyTableHeaders",o=0,a={fixedOffset:0,leftOffset:0,resizableArea:i,scrollableArea:i,scrollableAreaX:void 0,scrollableAreaY:void 0};e.fn[l]=function(t){return this.each(function(){var n=e.data(this,"plugin_"+l);n?"string"==typeof t?n[t].apply(n):n.updateOptions(t):"destroy"!==t&&e.data(this,"plugin_"+l,new function(t,n){var r=this;r.$el=e(t),r.el=t,r.id=o++,r.$el.bind("destroyed",e.proxy(r.teardown,r)),r.$clonedHeader=null,r.$originalHeader=null,r.isSticky=!1,r.hasBeenSticky=!1,r.leftOffset=null,r.topOffset=null,r.init=function(){r.options=e.extend({},a,n),r.$el.each(function(){var i=e(this);i.css("padding",0),r.$resizableArea=e(r.options.resizableArea),r.$scrollableAreaX=e(r.options.scrollableAreaX||r.options.scrollableArea),r.$scrollableAreaY=e(r.options.scrollableAreaY||r.options.scrollableArea),r.$originalHeader=e("thead:first",this),r.$clonedHeader=r.$originalHeader.clone(),i.trigger("clonedHeader."+l,[r.$clonedHeader]),r.$clonedHeader.addClass("tableFloatingHeader"),r.$clonedHeader.css("display","none"),r.$originalHeader.addClass("tableFloatingHeaderOriginal"),r.$originalHeader.after(r.$clonedHeader),r.$printStyle=e('<style type="text/css" media="print">.tableFloatingHeader{display:none !important;}.tableFloatingHeaderOriginal{position:static !important;}</style>'),e("head").append(r.$printStyle)}),r.updateWidth(),r.toggleHeaders(),r.bind()},r.destroy=function(){r.$el.unbind("destroyed",r.teardown),r.teardown()},r.teardown=function(){r.isSticky&&r.$originalHeader.css("position","static"),e.removeData(r.el,"plugin_"+l),r.unbind(),r.$clonedHeader.remove(),r.$originalHeader.removeClass("tableFloatingHeaderOriginal"),r.$originalHeader.css("visibility","visible"),r.$printStyle.remove(),r.el=null,r.$el=null},r.bind=function(){r.$scrollableAreaX.on("scroll."+l+r.id,function(){r.setPositionValues()}),r.$scrollableAreaY.on("scroll."+l+r.id,function(){r.setPositionValues(),r.toggleHeaders()}),r.$resizableArea.on("resize."+l+r.id,function(){r.toggleHeaders(),r.updateWidth()})},r.unbind=function(){r.$resizableArea.off("."+l+r.id),r.$scrollableAreaX.off("."+l+r.id),r.$scrollableAreaY.off("."+l+r.id)},r.toggleHeaders=function(){r.$el&&r.$el.each(function(){var i,t=e(this),l=isNaN(r.options.fixedOffset)?r.options.fixedOffset.outerHeight()||0:r.options.fixedOffset;r.isWindowScrollingY()||(l+=r.$scrollableAreaY.offset().top);var o=t.offset(),a=r.$scrollableAreaY.scrollTop()+l,n=r.$scrollableAreaX.scrollLeft(),s=r.isWindowScrollingY()?a>o.top:l>o.top,d=(r.isWindowScrollingY()?a:0)<o.top+t.height()-r.$clonedHeader.height()-(r.isWindowScrollingY()?0:l);s&&d?(i=o.left-n+r.options.leftOffset,r.$originalHeader.css({position:"fixed","margin-top":0,left:i,"z-index":1}),r.isSticky=!0,r.leftOffset=i,r.topOffset=l,r.$clonedHeader.css("display",""),r.setPositionValues(),r.updateWidth()):r.isSticky&&(r.$originalHeader.css("position","static"),r.$clonedHeader.css("display","none"),r.isSticky=!1,r.resetWidth(e("td,th",r.$clonedHeader),e("td,th",r.$originalHeader)))})},r.isWindowScrollingX=function(){return r.$scrollableAreaX[0]===i},r.isWindowScrollingY=function(){return r.$scrollableAreaY[0]===i},r.setPositionValues=function(){var e=r.$scrollableAreaY.scrollTop(),i=r.$scrollableAreaX.scrollLeft();r.isSticky&&r.$originalHeader.css({top:r.topOffset-(r.isWindowScrollingY()?0:e)+"px",left:r.leftOffset-(r.isWindowScrollingX()?0:i)+"px"})},r.updateWidth=function(){if(r.isSticky){r.$originalHeaderCells||(r.$originalHeaderCells=e("th,td",r.$originalHeader)),r.$clonedHeaderCells||(r.$clonedHeaderCells=e("th,td",r.$clonedHeader));var i=r.getWidth(r.$clonedHeaderCells);r.setWidth(i,r.$clonedHeaderCells,r.$originalHeaderCells),r.$originalHeader.css("width",r.$clonedHeader.width())}},r.getWidth=function(i){var t=[];return i.each(function(i){var l,o=e(this);l="border-box"===o.css("box-sizing")?o.outerWidth():o.width(),t[i]=l}),t},r.setWidth=function(e,i,t){i.each(function(i){var l=e[i];t.eq(i).css({"min-width":l,"max-width":l})})},r.resetWidth=function(i,t){i.each(function(i){var l=e(this);t.eq(i).css({"min-width":l.css("min-width"),"max-width":l.css("max-width")})})},r.updateOptions=function(i){r.options=e.extend({},a,i),r.updateWidth(),r.toggleHeaders()},r.init()}(this,t))})}}(jQuery,window);