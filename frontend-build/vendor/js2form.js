!function(e,n){"function"==typeof define&&define.amd?define(n):e.js2form=n()}(this,function(){"use strict";var e=/^\[\d+?\]/,n=/^[a-zA-Z_][a-zA-Z_0-9]*/,t=/\[[0-9]+?\]$/,l=/(.*)(\[)([0-9]*)(\])$/,a=/\[([0-9]+)\]\[([0-9]+)\]/g,i=/INPUT|TEXTAREA/i;function r(e,n){var t,l,a;if(e instanceof Array)for(l=0;l<e.length;l++)String(e[l].value)==String(n)&&(e[l].checked=!0);else if(i.test(e.nodeName)&&"file"!==e.type)e.value=n;else if(/SELECT/i.test(e.nodeName))for(l=0,a=(t=e.getElementsByTagName("option")).length;l<a;l++)if(t[l].value==n){if(t[l].selected=!0,e.multiple)break}else e.multiple||(t[l].selected=!1)}function o(e,n,t){var i,r,o,f,s,u=[],c=e.split(n);for(e=e.replace(a,"[$1].[$2]"),s=0;s<c.length;s++)i=c[s],u.push(i),null!=i.match(l)&&(o=(r=u.join(n)).replace(l,"$3"),void 0===t[r=r.replace(l,"$1")]&&(t[r]={lastIndex:-1,indexes:{}}),""!=o&&void 0!==t[r].indexes[o]||(t[r].lastIndex++,t[r].indexes[o]=t[r].lastIndex),f=t[r].indexes[o],u[u.length-1]=i.replace(l,"$1$2"+f+"$4"));return r=(r=u.join(n)).replace("].[","][")}function f(e,n){var t,l,a=[];if(1==arguments.length&&(n=0),null==e)a=[{name:"",value:null}];else if("string"==typeof e||"number"==typeof e||"date"==typeof e||"boolean"==typeof e)a=[{name:"",value:e}];else if(e instanceof Array)for(t=0;t<e.length;t++)l="["+t+"]",a=a.concat(s(e[t],l,n+1));else for(t in e)l=t,a=a.concat(s(e[t],l,n+1));return a}function s(t,l,a){var i,r,o,s=[],u=f(t,a+1);for(r=0;r<u.length;r++)i=l,e.test(u[r].name)?i+=u[r].name:n.test(u[r].name)&&(i+="."+u[r].name),o={name:i,value:u[r].value},s.push(o);return s}return function(e,n,l,a,i){var s,u;arguments.length<3&&(l="."),arguments.length,arguments.length<5&&(i=!1),s=f(n),u=function e(n,l,a,i,r){arguments.length<4&&(i={});for(var f,s,u,c,d,m,p,v={},g=n.firstChild;g;){if(f="",g.name&&""!=g.name?f=g.name:l&&g.id&&""!=g.id&&(f=g.id),""==f){var h=e(g,l,a,i,r);for(u in h)if(void 0===v[u])v[u]=h[u];else for(c=0;c<h[u].length;c++)v[u].push(h[u][c])}else if(/SELECT/i.test(g.nodeName))for(d=0,p=g.getElementsByTagName("option"),m=p.length;d<m;d++)r&&(p[d].selected=!1),s=(s=o(f,a,i)).replace(t,"[]"),v[s]=g;else/INPUT/i.test(g.nodeName)&&/CHECKBOX|RADIO/i.test(g.type)?(r&&(g.checked=!1),s=(s=o(f,a,i)).replace(t,"[]"),v[s]||(v[s]=[]),v[s].push(g)):(r&&(g.value=""),s=o(f,a,i),v[s]=g);g=g.nextSibling}return v}(e,i,l,{},!0);for(var c=0;c<s.length;c++){var d=s[c].name,m=s[c].value;void 0!==u[d]?r(u[d],m):void 0!==u[d.replace(t,"[]")]&&r(u[d.replace(t,"[]")],m)}}});