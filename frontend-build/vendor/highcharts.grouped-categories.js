/**
	 * Grouped Categories v1.1.2 (2017-02-07)
	 *
	 * (c) 2012-2016 Black Label
	 *
	 * License: Creative Commons Attribution (CC)
	 */

!function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){"use strict";function i(t){return JSON.parse(JSON.stringify(t))}function e(t,e){return this.userOptions=i(t),this.name=t.name||t,this.parent=e,this}function s(t){for(var i=t.length,e=0;i--;)e+=t[i];return e}function r(t,i,s){for(t.unshift(new e(i,s));s;)s.leaves=s.leaves?s.leaves+1:1,s=s.parent}function a(t,i,e,s,o){var n,h=t.length;for(o=o?o:0,e.depth=e.depth?e.depth:0;h--;)n=t[h],n.categories?(s&&(n.parent=s),a(n.categories,i,e,n,o+1)):r(i,n,s);e.depth=d(e.depth,o)}function o(t,i,e){i[0]===i[2]&&(i[0]=i[2]=p(i[0])-e%2/2),i[1]===i[3]&&(i[1]=i[3]=p(i[1])+e%2/2),t.push("M",i[0],i[1],"L",i[2],i[3])}function n(t,i){return t.getPosition(t.axis.horiz,i,t.axis.tickmarkOffset)}function h(t,i,e){for(var s,r=t.length;r--;)s=t[r][i],s&&h(s,i,e),e(t[r])}var l=void 0,p=Math.round,c=Math.min,d=Math.max,u=t.merge,g=t.pick,f=t.each,b=window.HighchartsAdapter&&window.HighchartsAdapter.inArray||t.inArray,x=t.Axis.prototype,y=t.Tick.prototype,v=x.init,k=x.render,G=x.setCategories,m=y.getLabelSize,z=y.addLabel,S=y.destroy,L=y.render;e.prototype.toString=function(){for(var t=[],i=this;i;)t.push(i.name),i=i.parent;return t.join(", ")},x.init=function(t,i){v.call(this,t,i),"object"==typeof i&&i.categories&&this.setupGroups(i)},x.setupGroups=function(t){var e=i(t.categories),s=[],r={},o=this.options.labels,n=o.groupedOptions,h=o.style;a(e,s,r),this.categoriesTree=e,this.categories=s,this.isGrouped=0!==r.depth,this.labelsDepth=r.depth,this.labelsSizes=[],this.labelsGridPath=[],this.tickLength=t.tickLength||this.tickLength||null,this.tickWidth=g(t.tickWidth,this.isXAxis?1:0),this.directionFactor=[-1,1,1,-1][this.side],this.options.lineWidth=g(t.lineWidth,1),this.groupFontHeights=[];for(var l=0;l<=r.depth;l++){var p=n&&n[l-1],c=p&&n[l-1].style?u(h,n[l-1].style):h;this.groupFontHeights[l]=Math.round(.3*this.chart.renderer.fontMetrics(c?c.fontSize:0).b)}},x.render=function(){if(this.isGrouped&&(this.labelsGridPath=[]),this.originalTickLength===l&&(this.originalTickLength=this.options.tickLength),this.options.tickLength=this.isGrouped?.001:this.originalTickLength,k.call(this),!this.isGrouped)return this.labelsGrid&&this.labelsGrid.attr({visibility:"hidden"}),!1;var t,i=this,e=i.options,s=i.top,r=i.left,a=r+i.width,n=s+i.height,p=i.hasVisibleSeries||i.hasData,c=i.labelsDepth,d=i.labelsGrid,u=i.horiz,g=i.labelsGridPath,f=e.drawHorizontalBorders===!1?c+1:0,b=i.opposite?u?s:a:u?n:r,x=i.tickWidth;for(i.userTickLength&&(c-=1),d||(d=i.labelsGrid=i.chart.renderer.path().attr({strokeWidth:x,"stroke-width":x,stroke:e.tickColor||""}).add(i.axisGroup),e.tickColor||d.addClass("highcharts-tick"));f<=c;)b+=i.groupSize(f),t=u?[r,b,a,b]:[b,s,b,n],o(g,t,x),f++;return d.attr({d:g,visibility:p?"visible":"hidden"}),i.labelGroup.attr({visibility:p?"visible":"hidden"}),h(i.categoriesTree,"categories",function(t){var e=t.tick;return!!e&&(e.startAt+e.leaves-1<i.min||e.startAt>i.max?(e.label.hide(),e.destroyed=0):e.label.attr({visibility:p?"visible":"hidden"}),!0)}),!0},x.setCategories=function(t,i){this.categories&&this.cleanGroups(),this.setupGroups({categories:t}),this.categories=this.userOptions.categories=t,G.call(this,this.categories,i)},x.cleanGroups=function(){var t,i=this.ticks;for(t in i)i[t].parent&&delete i[t].parent;h(this.categoriesTree,"categories",function(t){var i=t.tick;return!!i&&(i.label.destroy(),f(i,function(t,e){delete i[e]}),delete t.tick,!0)}),this.labelsGrid=null},x.groupSize=function(t,i){var e=this.labelsSizes,r=this.directionFactor,a=!!this.options.labels.groupedOptions&&this.options.labels.groupedOptions[t-1],o=0;return a&&(o=r===-1?a.x?a.x:0:a.y?a.y:0),i!==l&&(e[t]=d(e[t]||0,i+10+Math.abs(o))),t===!0?s(e)*r:e[t]?e[t]*r:0},y.addLabel=function(){var t;return z.call(this),!(!this.axis.categories||!(t=this.axis.categories[this.pos]))&&(this.label&&this.label.attr("text",this.axis.labelFormatter.call({axis:this.axis,chart:this.axis.chart,isFirst:this.isFirst,isLast:this.isLast,value:t.name})),this.axis.isGrouped&&this.axis.options.labels.enabled&&this.addGroupedLabels(t),!0)},y.addGroupedLabels=function(t){for(var i,e=this,s=this.axis,r=s.chart,a=s.options.labels,o=a.useHTML,n=a.style,h=a.groupedOptions,l={align:"center",rotation:a.rotation,x:0,y:0},p=s.horiz?"height":"width",c=0;e;){if(c>0&&!t.tick){this.value=t.name;var d=a.formatter?a.formatter.call(this,t):t.name,g=h&&h[c-1],f=g?u(l,h[c-1]):l,b=g&&h[c-1].style?u(n,h[c-1].style):n;delete f.style,i=r.renderer.text(d,0,0,o).attr(f).css(b).add(s.labelGroup),e.startAt=this.pos,e.childCount=t.categories.length,e.leaves=t.leaves,e.visible=this.childCount,e.label=i,e.labelOffsets={x:f.x,y:f.y},t.tick=e}e&&s.groupSize(c,e.label.getBBox()[p]),t=t.parent,e=t?e.parent=t.tick||{}:null,c++}},y.render=function(t,i,e){function s(t){var i=0;return k?(i=b(t.name,t.parent.categories),i=i<0?0:i):i}L.call(this,t,i,e);var r=this.axis.categories[this.pos];if(this.axis.isGrouped&&r&&!(this.pos>this.axis.max)){var a,h,l,p,u,g,f=this,x=f,y=f.axis,v=f.pos,k=f.isFirst,G=y.max,m=y.min,z=y.horiz,S=y.labelsGridPath,A=y.groupSize(0),O=y.tickWidth,w=n(f,v),F=z?w.y:w.x,M=y.chart.renderer.fontMetrics(y.options.labels.style?y.options.labels.style.fontSize:0).b,T=1,H=z&&w.x===y.pos+y.len||!z&&w.y===y.pos?-1:0;for(k&&(a=z?[y.left,w.y,y.left,w.y+y.groupSize(!0)]:y.isXAxis?[w.x,y.top,w.x+y.groupSize(!0),y.top]:[w.x,y.top+y.len,w.x+y.groupSize(!0),y.top+y.len],o(S,a,O)),z&&y.left<w.x?o(S,[w.x-H,w.y,w.x-H,w.y+A],O):!z&&y.top<=w.y&&o(S,[w.x,w.y+H,w.x+A,w.y+H],O),A=F+A;x.parent;){x=x.parent;var C=s(r),W=x.labelOffsets.x,N=x.labelOffsets.y;l=n(f,d(x.startAt-1,m-1)),p=n(f,c(x.startAt+x.leaves-1-C,G)),g=x.label.getBBox(!0),h=y.groupSize(T),H=z&&p.x===y.pos+y.len||!z&&p.y===y.pos?-1:0,u=z?{x:(l.x+p.x)/2+W,y:A+y.groupFontHeights[T]+h/2+N/2}:{x:A+h/2+W,y:(l.y+p.y-g.height)/2+M+N},isNaN(u.x)||isNaN(u.y)||(x.label.attr(u),S&&(z&&y.left<p.x?o(S,[p.x-H,A,p.x-H,A+h],O):!z&&y.top<=p.y&&o(S,[A,p.y+H,A+h,p.y+H],O))),A+=h,T++}}},y.destroy=function(){for(var t=this.parent;t;)t.destroyed=t.destroyed?t.destroyed+1:1,t=t.parent;S.call(this)},y.getLabelSize=function(){if(this.axis.isGrouped===!0){var t=m.call(this)+10,i=this.axis.labelsSizes[0];return i<t&&(this.axis.labelsSizes[0]=t),s(this.axis.labelsSizes)}return m.call(this)}});