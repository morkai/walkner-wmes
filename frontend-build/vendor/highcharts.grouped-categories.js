/**
	 * Grouped Categories v1.1.2 (2017-02-07)
	 *
	 * (c) 2012-2016 Black Label
	 *
	 * License: Creative Commons Attribution (CC)
	 */

!function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){"use strict";function i(t){return JSON.parse(JSON.stringify(t))}function e(t,e){return this.userOptions=i(t),this.name=t.name||t,this.parent=e,this}function s(t){for(var i=t.length,e=0;i--;)e+=t[i];return e}function r(t,i,s){for(t.unshift(new e(i,s));s;)s.leaves=s.leaves?s.leaves+1:1,s=s.parent}function a(t,i,e,s,o){var n,h=t.length;for(o=o||0,e.depth=e.depth?e.depth:0;h--;)n=t[h],n.categories?(s&&(n.parent=s),a(n.categories,i,e,n,o+1)):r(i,n,s);e.depth=c(e.depth,o)}function o(t,i,e){i[0]===i[2]&&(i[0]=i[2]=l(i[0])-e%2/2),i[1]===i[3]&&(i[1]=i[3]=l(i[1])+e%2/2),t.push("M",i[0],i[1],"L",i[2],i[3])}function n(t,i){return t.getPosition(t.axis.horiz,i,t.axis.tickmarkOffset)}function h(t,i,e){for(var s,r=t.length;r--;)s=t[r][i],s&&h(s,i,e),e(t[r])}var l=Math.round,p=Math.min,c=Math.max,d=t.merge,u=t.pick,g=t.each,f=window.HighchartsAdapter&&window.HighchartsAdapter.inArray||t.inArray,b=t.Axis.prototype,x=t.Tick.prototype,y=b.init,v=b.render,k=b.setCategories,G=x.getLabelSize,m=x.addLabel,z=x.destroy,S=x.render;e.prototype.toString=function(){for(var t=[],i=this;i;)t.push(i.name),i=i.parent;return t.join(", ")},b.init=function(t,i){y.call(this,t,i),"object"==typeof i&&i.categories&&this.setupGroups(i)},b.setupGroups=function(t){var e=i(t.categories),s=[],r={},o=this.options.labels,n=o.groupedOptions,h=o.style;a(e,s,r),this.categoriesTree=e,this.categories=s,this.isGrouped=0!==r.depth,this.labelsDepth=r.depth,this.labelsSizes=[],this.labelsGridPath=[],this.tickLength=t.tickLength||this.tickLength||null,this.tickWidth=u(t.tickWidth,this.isXAxis?1:0),this.directionFactor=[-1,1,1,-1][this.side],this.options.lineWidth=u(t.lineWidth,1),this.groupFontHeights=[];for(var l=0;l<=r.depth;l++){var p=n&&n[l-1],c=p&&n[l-1].style?d(h,n[l-1].style):h;this.groupFontHeights[l]=Math.round(.3*this.chart.renderer.fontMetrics(c?c.fontSize:0).b)}},b.render=function(){if(this.isGrouped&&(this.labelsGridPath=[]),void 0===this.originalTickLength&&(this.originalTickLength=this.options.tickLength),this.options.tickLength=this.isGrouped?.001:this.originalTickLength,v.call(this),!this.isGrouped)return this.labelsGrid&&this.labelsGrid.attr({visibility:"hidden"}),!1;var t,i=this,e=i.options,s=i.top,r=i.left,a=r+i.width,n=s+i.height,l=i.hasVisibleSeries||i.hasData,p=i.labelsDepth,c=i.labelsGrid,d=i.horiz,u=i.labelsGridPath,g=!1===e.drawHorizontalBorders?p+1:0,f=i.opposite?d?s:a:d?n:r,b=i.tickWidth;for(i.userTickLength&&(p-=1),c||(c=i.labelsGrid=i.chart.renderer.path().attr({strokeWidth:b,"stroke-width":b,stroke:e.tickColor||""}).add(i.axisGroup),e.tickColor||c.addClass("highcharts-tick"));g<=p;)f+=i.groupSize(g),t=d?[r,f,a,f]:[f,s,f,n],o(u,t,b),g++;return c.attr({d:u,visibility:l?"visible":"hidden"}),i.labelGroup.attr({visibility:l?"visible":"hidden"}),h(i.categoriesTree,"categories",function(t){var e=t.tick;return!!e&&(e.startAt+e.leaves-1<i.min||e.startAt>i.max?(e.label.hide(),e.destroyed=0):e.label.attr({visibility:l?"visible":"hidden"}),!0)}),!0},b.setCategories=function(t,i){this.categories&&this.cleanGroups(),this.setupGroups({categories:t}),this.categories=this.userOptions.categories=t,k.call(this,this.categories,i)},b.cleanGroups=function(){var t,i=this.ticks;for(t in i)i[t].parent&&delete i[t].parent;h(this.categoriesTree,"categories",function(t){var i=t.tick;return!!i&&(i.label.destroy(),g(i,function(t,e){delete i[e]}),delete t.tick,!0)}),this.labelsGrid=null},b.groupSize=function(t,i){var e=this.labelsSizes,r=this.directionFactor,a=!!this.options.labels.groupedOptions&&this.options.labels.groupedOptions[t-1],o=0;return a&&(o=-1===r?a.x?a.x:0:a.y?a.y:0),void 0!==i&&(e[t]=c(e[t]||0,i+10+Math.abs(o))),!0===t?s(e)*r:e[t]?e[t]*r:0},x.addLabel=function(){var t;return m.call(this),!(!this.axis.categories||!(t=this.axis.categories[this.pos]))&&(this.label&&this.label.attr("text",this.axis.labelFormatter.call({axis:this.axis,chart:this.axis.chart,isFirst:this.isFirst,isLast:this.isLast,value:t.name})),this.axis.isGrouped&&this.axis.options.labels.enabled&&this.addGroupedLabels(t),!0)},x.addGroupedLabels=function(t){for(var i,e=this,s=this.axis,r=s.chart,a=s.options.labels,o=a.useHTML,n=a.style,h=a.groupedOptions,l={align:"center",rotation:a.rotation,x:0,y:0},p=s.horiz?"height":"width",c=0;e;){if(c>0&&!t.tick){this.value=t.name;var u=a.formatter?a.formatter.call(this,t):t.name,g=h&&h[c-1],f=g?d(l,h[c-1]):l,b=g&&h[c-1].style?d(n,h[c-1].style):n;delete f.style,i=r.renderer.text(u,0,0,o).attr(f).css(b).add(s.labelGroup),e.startAt=this.pos,e.childCount=t.categories.length,e.leaves=t.leaves,e.visible=this.childCount,e.label=i,e.labelOffsets={x:f.x,y:f.y},t.tick=e}e&&s.groupSize(c,e.label.getBBox()[p]),t=t.parent,e=t?e.parent=t.tick||{}:null,c++}},x.render=function(t,i,e){S.call(this,t,i,e);var s=this.axis.categories[this.pos];if(this.axis.isGrouped&&s&&!(this.pos>this.axis.max)){var r,a,h,l,d,u,g=this,b=g,x=g.axis,y=g.pos,v=g.isFirst,k=x.max,G=x.min,m=x.horiz,z=x.labelsGridPath,L=x.groupSize(0),A=x.tickWidth,O=n(g,y),w=m?O.y:O.x,F=x.chart.renderer.fontMetrics(x.options.labels.style?x.options.labels.style.fontSize:0).b,M=1,T=m&&O.x===x.pos+x.len||!m&&O.y===x.pos?-1:0;for(v&&(r=m?[x.left,O.y,x.left,O.y+x.groupSize(!0)]:x.isXAxis?[O.x,x.top,O.x+x.groupSize(!0),x.top]:[O.x,x.top+x.len,O.x+x.groupSize(!0),x.top+x.len],o(z,r,A)),m&&x.left<O.x?o(z,[O.x-T,O.y,O.x-T,O.y+L],A):!m&&x.top<=O.y&&o(z,[O.x,O.y+T,O.x+L,O.y+T],A),L=w+L;b.parent;){b=b.parent;var H=function(t){var i=0;return v?(i=f(t.name,t.parent.categories),i=i<0?0:i):i}(s),C=b.labelOffsets.x,W=b.labelOffsets.y;h=n(g,c(b.startAt-1,G-1)),l=n(g,p(b.startAt+b.leaves-1-H,k)),u=b.label.getBBox(!0),a=x.groupSize(M),T=m&&l.x===x.pos+x.len||!m&&l.y===x.pos?-1:0,d=m?{x:(h.x+l.x)/2+C,y:L+x.groupFontHeights[M]+a/2+W/2}:{x:L+a/2+C,y:(h.y+l.y-u.height)/2+F+W},isNaN(d.x)||isNaN(d.y)||(b.label.attr(d),z&&(m&&x.left<l.x?o(z,[l.x-T,L,l.x-T,L+a],A):!m&&x.top<=l.y&&o(z,[L,l.y+T,L+a,l.y+T],A))),L+=a,M++}}},x.destroy=function(){for(var t=this.parent;t;)t.destroyed=t.destroyed?t.destroyed+1:1,t=t.parent;z.call(this)},x.getLabelSize=function(){if(!0===this.axis.isGrouped){var t=G.call(this)+10;return this.axis.labelsSizes[0]<t&&(this.axis.labelsSizes[0]=t),s(this.axis.labelsSizes)}return G.call(this)}});