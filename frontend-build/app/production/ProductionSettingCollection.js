// Part of <http://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["underscore","jquery","../settings/SettingCollection","./ProductionSetting"],function(t,e,i,a){"use strict";return i.extend({model:a,topicSuffix:"production.**",initialize:function(t,e){i.prototype.initialize.apply(this,arguments),e.localStorage&&this.setUpLocalStorage()},getValue:function(t){var e=this.get("production."+t);return e?e.getValue():null},prepareValue:function(t,e){return this.prepareNumericValue(e,0,60)},setUpLocalStorage:function(){this.length||this.readLocalData(),this.on("reset change",this.saveLocalData.bind(this))},readLocalData:function(){try{this.reset(JSON.parse(localStorage["PRODUCTION:SETTINGS"]))}catch(t){}},saveLocalData:function(){localStorage["PRODUCTION:SETTINGS"]=JSON.stringify(this.models)}})});