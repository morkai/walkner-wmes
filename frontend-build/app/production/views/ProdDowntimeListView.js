define(["app/i18n","app/time","app/data/aors","app/data/downtimeReasons","app/core/views/ListView","i18n!app/nls/production"],function(e,t,n,r,i){return i.extend({localTopics:{"downtimeReasons.synced":"render","aors.synced":"render"},remoteTopics:function(){var e={};return this.options.prodLine&&(e["prodDowntimes.corroborated."+this.options.prodLine]="onCorroborated"),e},initialize:function(){i.prototype.initialize.apply(this,arguments),this.listenTo(this.collection,"add",this.render),this.listenTo(this.collection,"change",this.render),this.listenTo(this.collection,"remove",this.render)},serializeColumns:function(){return[{id:"startedAt",label:e("production","prodDowntime:startedAt")},{id:"finishedAt",label:e("production","prodDowntime:finishedAt")},{id:"reason",label:e("production","prodDowntime:reason")},{id:"aor",label:e("production","prodDowntime:aor")}]},serializeRows:function(){return this.collection.map(function(e){var i=e.toJSON(),o=n.get(i.aor),a=r.get(i.reason);return i.className=e.getCssClassName(),i.startedAt=t.format(i.startedAt,"YYYY-MM-DD HH:mm:ss"),i.finishedAt=i.finishedAt?t.format(i.finishedAt,"YYYY-MM-DD HH:mm:ss"):"-",o&&(i.aor=o.get("name")),a&&(i.reason=a.get("label")),i})},serializeActions:function(){return[]},onCorroborated:function(e){var t=this.collection.get(e._id);t&&(t.set(e),this.trigger("corroborated",e._id))}})});