// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["app/i18n","app/time","app/core/Model","app/planning/util/shift","app/planning/templates/orderStatusIcons"],function(t,e,s,n,a){"use strict";var i={pending:"default",started:"info",finished:"success",problem:"danger",cancelled:"warning"},r={pending:"fa-question",picklist:"fa-file-text-o",pickup:"fa-shopping-cart",problem:"fa-thumbs-down",finished:"fa-thumbs-up"};return s.extend({urlRoot:"/wh/orders",topicPrefix:"wh.orders",privilegePrefix:"WH",nlsDomain:"wh",serialize:function(t,s){var o=this.toJSON(),p=t.orders.get(o.order),m=t.sapOrders.get(o.order),u=Date.parse(o.startTime),c=Date.parse(o.finishTime);return o.no=s+1,o.shift=n.getShiftNo(u),o.mrp=p.get("mrp"),o.nc12=p.get("nc12"),o.name=p.get("name"),o.qtyTodo=p.get("quantityTodo"),o.startTime=e.utc.format(u,"HH:mm:ss"),o.finishTime=e.utc.format(c,"HH:mm:ss"),o.comment=m?m.getCommentWithIcon():"",o.comments=m?m.get("comments"):[],o.planStatus=p.getStatus(),o.planStatusIcons=a(t,p.id),o.rowClassName=i[o.status],o.funcIcons={fmx:r[o.funcs[0].status],kitter:r[o.funcs[1].status],packer:r[o.funcs[2].status]},o},update:function(t){this.set(t)}})});