define(["app/core/View","app/core/util/transliterate","app/data/downtimeReasons","app/wh/templates/downtimePicker"],function(t,e,i,a){"use strict";return t.extend({template:a,nlsDomain:"wh",events:{submit:function(){var t=this.$(".active[data-reason]");return!(!t.length||t.hasClass("hidden"))&&(this.trigger("picked",{downtimeReason:t[0].dataset.reason,downtimeComment:this.$id("comment").val().trim()}),!1)},"click .btn[data-reason]":function(t){this.$(".active[data-reason]").removeClass("active"),t.currentTarget.classList.add("active")},"input #-filter":function(){var t=this.transliterate(this.$id("filter").val().trim());this.$(".btn[data-reason]").each(function(){this.classList.toggle("hidden",-1===this.dataset.filter.indexOf(t))})}},getTemplateData:function(){var t=this;return{reasons:i.findBySubdivisionType("wh-pickup").map(function(e){return{id:e.id,label:e.get("label"),filter:t.transliterate(e.id+e.get("label"))}})}},afterRender:function(){this.$(".btn[data-filter]").first().click()},onDialogShown:function(){this.$id("filter").focus()},transliterate:function(t){return e(t).toUpperCase().replace(/[^A-Z0-9]+/g,"")}})});