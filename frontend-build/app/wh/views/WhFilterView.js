define(["underscore","jquery","app/i18n","app/time","app/core/View","app/mrpControllers/util/setUpMrpSelect2","app/wh/templates/planFilter"],function(e,t,a,i,n,s,o){"use strict";return n.extend({template:o,events:{"input #-date":"changeFilter","change #-date":"changeFilter","change #-from":"changeFilter","change #-to":"changeFilter","click #-useDarkerTheme":function(){this.plan.displayOptions.toggleDarkerThemeUse()}},initialize:function(){var e=this.plan,t=e.displayOptions;this.listenTo(e,"change:loading",this.onLoadingChanged),this.listenTo(e,"change:_id",this.onDateChanged),this.listenTo(t,"change:minDate change:maxDate",this.onMinMaxDateChanged),this.listenTo(t,"change:useDarkerTheme",this.updateToggles)},getTemplateData:function(){var e=this.plan,t=e.displayOptions;return{date:e.id,minDate:t.get("minDate"),maxDate:t.get("maxDate"),from:t.get("from"),to:t.get("to"),useDarkerTheme:t.isDarkerThemeUsed()}},updateToggles:function(){this.$id("useDarkerTheme").toggleClass("active",this.plan.displayOptions.isDarkerThemeUsed())},changeFilter:function(){var t=this,a=t.$id("date").val(),i={from:t.$id("from").val()||"06:00",to:t.$id("to").val()||"06:00"},n={};["from","to"].forEach(function(a){e.isEqual(i[a],t.plan.displayOptions.get(a))||(n[a]=i[a])}),e.isEmpty(n)||t.plan.displayOptions.set(n),/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/.test(a)&&a!==t.plan.id&&t.plan.set("_id",a)},onLoadingChanged:function(){var e=this.plan.get("loading");this.$id("date").prop("disabled",e)},onDateChanged:function(){this.$id("date").val(this.plan.id)},onMinMaxDateChanged:function(){this.$id("date").prop("min",this.plan.displayOptions.get("minDate")).prop("max",this.plan.displayOptions.get("maxDate"))}})});