define(["app/i18n","app/time","app/core/View","app/core/util/getShiftStartInfo","app/wmes-drilling/templates/datePicker"],function(t,i,a,e,n){"use strict";return a.extend({template:n,nlsDomain:"wmes-drilling",dialogClassName:"drilling-datePicker-dialog",events:{"focus [data-vkb]":function(t){this.options.vkb&&this.options.vkb.show(t.target,this.onVkbValueChange)},"click .btn[data-days]":function(t){var i=e(Date.now()).moment.add(+t.currentTarget.dataset.days,"days");this.$id("day").val(i.format("DD")),this.$id("month").val(i.format("MM")),this.$id("year").val(i.format("YYYY")),this.options.vkb&&this.options.vkb.hide()},submit:function(){var t=this.getMoment();return this.trigger("picked",t.isValid()?t.format("YYYY-MM-DD"):this.model.date),!1}},initialize:function(){this.onVkbValueChange=this.onVkbValueChange.bind(this)},destroy:function(){this.options.vkb&&this.options.vkb.hide()},getTemplateData:function(){var t=i.getMoment(this.model.date,"YYYY-MM-DD");return{day:t.format("DD"),month:t.format("MM"),year:t.format("YYYY")}},getMoment:function(){var t=this.$id("day").val(),a=this.$id("month").val(),e=this.$id("year").val()+"-"+a+"-"+t;return i.getMoment(e,"YYYY-MM-DD")},onVkbValueChange:function(){var t=this.getMoment();this.$id("day")[0].setCustomValidity(t.isValid()?"":this.t("datePicker:invalid"))}})});