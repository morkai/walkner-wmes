define(["jquery","underscore","app/i18n","app/viewport","app/core/View","app/mechOrders/templates/import","i18n!app/nls/mechOrders"],function(e,t,n,i,r,s){return r.extend({template:s,events:{submit:"upload"},initialize:function(){this.idPrefix=t.uniqueId("mechOrderImport")},serialize:function(){return{idPrefix:this.idPrefix}},onDialogShown:function(e){this.closeDialog=e.closeDialog.bind(e)},closeDialog:function(){},upload:function(t){t.preventDefault();var r=this.$("[type=submit]").attr("disabled",!0),s=new FormData(this.el),o=e.ajax({type:"POST",url:"/mechOrders;import",data:s,processData:!1,contentType:!1}),a=this.closeDialog;o.then(function(){i.msg.show({type:"info",time:2500,text:n("mechOrders","import:msg:success")}),a()}),o.fail(function(){i.msg.show({type:"error",time:5e3,text:n("mechOrders","import:msg:failure")})}),o.always(function(){r.attr("disabled",!1)})}})});