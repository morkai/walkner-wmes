define(["require","app/time","app/core/Model"],function(e,t,o){"use strict";return o.extend({urlRoot:"/osh/employments",clientUrlRoot:"#osh/employments",topicPrefix:"osh.employments",privilegePrefix:"OSH:HR",nlsDomain:"wmes-osh-employments",getLabel:function(){return t.utc.format(this.id,"MMMM YYYY")},parse:function(e){return e._id=t.utc.format(e._id,"YYYY-MM-DD"),e},serialize:function(){const e=this.toJSON();return e.month=t.utc.format(e._id,"MMMM YYYY"),e},serializeRow:function(){const e=this.serialize();return e.count=0,e.departments.forEach(({count:t})=>e.count+=t),e},serializeDetails:function(){const t=e("app/wmes-osh-common/dictionaries"),o=this.serialize(),r=new Map;return o.departments.forEach(e=>{r.has(e.workplace)||r.set(e.workplace,{label:t.getLabel("workplaces",e.workplace),departments:[]}),r.get(e.workplace).departments.push({label:t.getLabel("departments",e.department),count:e.count})}),o.workplaces=Array.from(r.values()),o.workplaces.sort((e,t)=>e.label.localeCompare(t.label)),o.workplaces.forEach(e=>{e.departments.sort((e,t)=>e.label.localeCompare(t.label))}),o}})});