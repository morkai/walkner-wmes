define(["app/time","app/orgUnits/views/OrgUnitDropdownsView","app/core/views/FormView","app/workCenters/templates/form"],function(e,t,i,o){"use strict";return i.extend({template:o,initialize:function(){i.prototype.initialize.call(this),this.orgUnitDropdownsView=new t({orgUnit:t.ORG_UNIT.PROD_FLOW,required:!0}),this.setView(".orgUnitDropdowns-container",this.orgUnitDropdownsView)},afterRender:function(){i.prototype.afterRender.call(this);var e=this.options.editMode;e&&this.$id("_id").attr("readonly",!0);var t=this.orgUnitDropdownsView;this.listenToOnce(t,"afterRender",function(){t.selectValue(this.model).focus(),t.$id("division").select2("enable",!e),t.$id("subdivision").select2("enable",!e)})},serializeToForm:function(){var t=i.prototype.serializeToForm.call(this);return t.deactivatedAt&&(t.deactivatedAt=e.format(t.deactivatedAt,"YYYY-MM-DD")),t},serializeForm:function(t){var i=e.getMoment(t.deactivatedAt||null);return t.deactivatedAt=i.isValid()?i.toISOString():null,t.prodFlow?t.mrpController=null:t.prodFlow=null,t}})});