define(["app/core/views/FormView","app/core/util/idAndLabel","app/data/orgUnits","app/users/util/setUpUserSelect2","app/kaizenOrders/dictionaries","app/kaizenSections/templates/form"],function(i,t,s,o,e,r){"use strict";return i.extend({template:r,serializeToForm:function(){var i=this.model.toJSON();return i.subdivisions=Array.isArray(i.subdivisions)?i.subdivisions.join(","):"",i.controlLists=Array.isArray(i.controlLists)?i.controlLists.join(","):"",i.confirmers="",i.coordinators="",i.auditors="",i},serializeForm:function(i){return i.subdivisions=i.subdivisions?i.subdivisions.split(","):[],i.controlLists=i.controlLists?i.controlLists.split(","):[],i.confirmers=o.getUserInfo(this.$id("confirmers"))||[],i.coordinators=o.getUserInfo(this.$id("coordinators"))||[],i.auditors=o.getUserInfo(this.$id("auditors"))||[],i.entryTypes=i.entryTypes||[],i},afterRender:function(){var r=this;i.prototype.afterRender.call(r),r.options.editMode&&r.$id("id").prop("readonly",!0),r.$id("subdivisions").select2({allowClear:!0,multiple:!0,data:s.getAllByType("subdivision").map(function(i){return{id:i.id,text:i.get("division")+" \\ "+i.get("name")}})}),["confirmers","coordinators","auditors"].forEach(function(i){o(r.$id(i),{multiple:!0,noPersonnelId:!0}).select2("data",(r.model.get(i)||[]).map(function(i){return{id:i.id,text:i.label}}))}),this.$id("controlLists").select2({width:"100%",multiple:!0,data:e.controlLists.map(t)})}})});