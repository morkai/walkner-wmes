define(["app/core/views/FormView","app/core/util/idAndLabel","app/data/orgUnits","app/users/util/setUpUserSelect2","app/kaizenSections/templates/form"],function(i,e,t,s,o){"use strict";return i.extend({template:o,serializeToForm:function(){var i=this.model.toJSON();return i.subdivisions=Array.isArray(i.subdivisions)?i.subdivisions.join(","):"",i.coordinators="",i},serializeForm:function(i){return i.subdivisions=i.subdivisions?i.subdivisions.split(","):[],i.coordinators=s.getUserInfo(this.$id("coordinators"))||[],i},afterRender:function(){i.prototype.afterRender.call(this),this.options.editMode&&(this.$id("id").prop("readonly",!0),this.$id("name").focus()),this.$id("subdivisions").select2({allowClear:!0,multiple:!0,data:t.getAllByType("subdivision").map(function(i){return{id:i.id,text:i.get("division")+" \\ "+i.get("name")}})}),s(this.$id("coordinators"),{multiple:!0,noPersonnelId:!0}).select2("data",(this.model.get("coordinators")||[]).map(function(i){return{id:i.id,text:i.label}}))}})});