define(["$","app/i18n","app/time","app/highcharts","app/core/View"],function(t,e,i,a,r){"use strict";return r.extend({initialize:function(){this.chart=null},destroy:function(){null!==this.chart&&(this.chart.destroy(),this.chart=null)},afterRender:function(){this.chart?this.updateChart():this.createChart()},createChart:function(){var e=this.model.get("tags");this.chart=new a.Chart({chart:{renderTo:this.el,zoomType:"x",height:350},title:!1,noData:{},exporting:{enabled:!1},xAxis:{type:"linear",tickInterval:1},yAxis:[{title:{text:this.t("charts:current")}},{title:{text:this.t("charts:voltage")}},{title:{text:this.t("charts:temperature")},opposite:!0},{title:{text:this.t("charts:light")},opposite:!0}],tooltip:{shared:!0,useHTML:!0,formatter:function(){var e="<b>"+i.toString(this.x,!0)+"</b><table>";return t.each(this.points,function(t,i){e+='<tr><td style="color: '+i.series.color+'">'+i.series.name+":</td><td>"+i.y+(i.series.tooltipOptions.valueSuffix||"")+"</td></tr>"}),e+="</table>"}},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"},plotOptions:{line:{lineWidth:1.5,pointInterval:1,pointStart:0,marker:{radius:0,symbol:"circle",lineWidth:0,states:{hover:{radius:4}}}}},series:[{name:this.t("charts:current"),type:"line",yAxis:0,data:e.current,tooltip:{valueSuffix:this.t("charts:current:suffix")}},{name:this.t("charts:voltage"),type:"line",yAxis:1,data:e.voltage,tooltip:{valueSuffix:this.t("charts:voltage:suffix")}},{name:this.t("charts:temperature"),type:"line",yAxis:2,data:e.temperature,tooltip:{valueSuffix:this.t("charts:temperature:suffix")}},{name:this.t("charts:light1"),type:"line",yAxis:3,data:e.light1},{name:this.t("charts:light2"),type:"line",yAxis:3,data:e.light2}]})},updateChart:function(){var t=this.model.get("tags");this.chart.series[0].setData(t.current,!1),this.chart.series[1].setData(t.voltage,!1),this.chart.series[2].setData(t.temperature,!1),this.chart.series[3].setData(t.light1,!1),this.chart.series[4].setData(t.light2,!0)}})});