define(["app/core/views/FormView","app/core/util/idAndLabel","app/data/prodFunctions","app/kaizenOrders/dictionaries","app/kaizenCategories/templates/form","app/kaizenCategories/templates/formCoordSection"],function(t,i,e,o,n,r){"use strict";return t.extend({template:n,events:Object.assign({'click [data-action="addCoordSection"]':function(){this.addCoordSection({section:null,funcs:[],mor:"none"})},'click [data-action="removeCoordSection"]':function(t){var i=this.$(t.target).closest("tr");i.find('input[tabindex="-1"]').select2("destroy"),i.remove()}},t.prototype.events),initialize:function(){t.prototype.initialize.call(this),this.coordSectionI=0},afterRender:function(){t.prototype.afterRender.call(this),this.options.editMode&&(this.$id("_id").prop("readonly",!0),this.$id("name").focus()),(this.model.get("coordSections")||[]).forEach(this.addCoordSection,this)},serializeForm:function(t){return t.description||(t.description=""),t.inNearMiss=!!t.inNearMiss,t.inSuggestion=!!t.inSuggestion,t.coordSections=(t.coordSections||[]).filter(function(t){return!!t.section}).map(function(t){var i=(t.funcs||"").split(",").filter(function(t){return!!t});return{section:t.section,funcs:i,mor:i.length?t.mor:"none"}}),t},addCoordSection:function(t){var n=this.renderPartial(r,{i:this.coordSectionI++,coordSection:t});this.$id("coordSections").append(n),n.find('input[name$=".section"]').select2({width:"300px",data:o.sections.map(i)}),n.find('input[name$=".funcs"]').select2({width:"525px",multiple:!0,data:e.map(i)})}})});