define(["app/viewport","app/i18n","../View"],function(e,t,n){return n.extend({remoteTopics:function(){var e={},t=this.model.getTopicPrefix();return e[t+".edited"]="onModelEdited",e[t+".deleted"]="onModelDeleted",e},serialize:function(){return{model:this.model.toJSON()}},afterRender:function(){this.listenToOnce(this.model,"change",this.render)},onModelEdited:function(e){var t=e.model;t&&t._id===this.model.id&&this.model.set(t)},onModelDeleted:function(n){var i=n.model;if(i&&i._id===this.model.id){var r=this.model;this.broker.subscribe("router.executing").setLimit(1).on("message",function(){e.msg.show({type:"warning",time:5e3,text:t(r.getNlsDomain()||"core","MSG:DELETED",{label:r.getLabel()})})}),this.broker.publish("router.navigate",{url:r.genClientUrl("base"),trigger:!0})}}})});