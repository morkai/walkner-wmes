// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["../View","../util/onModelDeleted"],function(e,t){"use strict";return e.extend({remoteTopics:function(){var e={},t=this.model.getTopicPrefix();return e[t+".edited"]="onModelEdited",e[t+".deleted"]="onModelDeleted",e},getTemplateData:function(){return{model:this.serializeDetails(this.model)}},serializeDetails:function(e){return"function"==typeof e.serializeDetails?e.serializeDetails():"function"==typeof e.serialize?e.serialize():e.toJSON()},beforeRender:function(){this.stopListening(this.model,"change",this.render)},afterRender:function(){this.listenToOnce(this.model,"change",this.render)},onModelEdited:function(e){var t=e.model;t&&t._id===this.model.id&&this.model.set(t)},onModelDeleted:function(e){t(this.broker,this.model,e)}})});