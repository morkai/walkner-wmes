define(["app/viewport","app/i18n","../View"],function(e,t,i){return i.extend({remoteTopics:function(){var e={},t=this.model.getTopicPrefix();return e[t+".edited"]="onModelEdited",e[t+".deleted"]="onModelDeleted",e},serialize:function(){return{model:this.model.toJSON()}},afterRender:function(){this.listenToOnce(this.model,"change",this.render)},onModelEdited:function(e){var t=e.model;t&&t._id===this.model.id&&this.model.set(t)},onModelDeleted:function(i){var o=i.model;if(o&&o._id===this.model.id){var n=this.model;this.broker.subscribe("router.executing").setLimit(1).on("message",function(){e.msg.show({type:"warning",time:5e3,text:t(n.getNlsDomain()||"core","MSG:DELETED",{label:n.getLabel()})})}),this.broker.publish("router.navigate",{url:n.genClientUrl("base"),trigger:!0})}}})});