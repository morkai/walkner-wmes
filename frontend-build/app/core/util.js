define(["underscore"],function(e){var t={};return t.inherits=function(t,n){e.extend(t,n);var i=function(){this.constructor=t};return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},t.decodeUriComponent=function(e){return decodeURIComponent(e.replace(/\+/g," "))},t.defineSandboxedProperty=function(t,n,i){e.isObject(t._sandboxedProperties)||(t._sandboxedProperties={});var r=t._sandboxedProperties,a=t.options[n];return e.isObject(a)?(r[n]=a,t[n]=a,delete t.options[n],void 0):(r[n]=null,Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:function(){return null===r[n]&&(r[n]=i.sandbox()),r[n]},set:function(e){this[n]=e}}),void 0)},t.cleanupSandboxedProperties=function(t){var n=t._sandboxedProperties;if(e.isObject(n)){var i=Object.keys(n);i.forEach(function(t){var i=n[t];i&&e.isFunction(i.destroy)&&i.destroy()}),t._sandboxedProperties=null}},t.subscribeTopics=function(t,n,i,r){if(e.isFunction(i)&&(i=i.call(t)),e.isObject(i)&&e.size(i)){var a=t[n];e.each(i,function(n,i){e.isString(n)&&(n=t[n]),r&&(n=n.bind(t)),a.subscribe(i,n)})}},t.escapeRegExp=function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},t});