define(["underscore"],function(e){var n={};return n.inherits=function(n,o){e.extend(n,o);var t=function(){this.constructor=n};return t.prototype=o.prototype,n.prototype=new t,n.__super__=o.prototype,n},n.decodeUriComponent=function(e){return decodeURIComponent(e.replace(/\+/g," "))},n.defineSandboxedProperty=function(n,o,t){e.isObject(n._sandboxedProperties)||(n._sandboxedProperties={});var r=n._sandboxedProperties,i=n.options[o];return e.isObject(i)?(r[o]=i,n[o]=i,void delete n.options[o]):(r[o]=null,void Object.defineProperty(n,o,{enumerable:!0,configurable:!0,get:function(){return null===r[o]&&(r[o]=t.sandbox()),r[o]},set:function(e){this[o]=e}}))},n.cleanupSandboxedProperties=function(n){var o=n._sandboxedProperties;if(e.isObject(o)){var t=Object.keys(o);t.forEach(function(n){var t=o[n];t&&e.isFunction(t.destroy)&&t.destroy()}),n._sandboxedProperties=null}},n.subscribeTopics=function(n,o,t,r){if(e.isFunction(t)&&(t=t.call(n)),e.isObject(t)&&e.size(t)){var i=n[o];e.each(t,function(o,t){e.isString(o)&&(o=n[o]),r&&(o=o.bind(n)),i.subscribe(t,o)})}},n.escapeRegExp=function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},n});