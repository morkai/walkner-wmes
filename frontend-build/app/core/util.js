// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["underscore"],function(e){"use strict";var n={};return n.inherits=function(n,t){e.extend(n,t);var r=function(){this.constructor=n};return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},n.decodeUriComponent=function(e){return decodeURIComponent(e.replace(/\+/g," "))},n.defineSandboxedProperty=function(n,t,r){e.isObject(n._sandboxedProperties)||(n._sandboxedProperties={});var o=n._sandboxedProperties,i=n.options[t];if(e.isObject(i))return o[t]=i,n[t]=i,void delete n.options[t];o[t]=null,Object.defineProperty(n,t,{enumerable:!0,configurable:!0,get:function(){return null===o[t]&&(o[t]=r.sandbox()),o[t]},set:function(e){this[t]=e}})},n.cleanupSandboxedProperties=function(n){var t=n._sandboxedProperties;if(e.isObject(t)){Object.keys(t).forEach(function(n){var r=t[n];r&&e.isFunction(r.destroy)&&r.destroy()}),n._sandboxedProperties=null}},n.subscribeTopics=function(n,t,r,o){if(e.isFunction(r)&&(r=r.call(n)),e.isObject(r)&&e.size(r)){var i=n[t];e.each(r,function(t,r){e.isString(t)&&(t=n[t]),o&&(t=t.bind(n)),i.subscribe(r,t)})}},n.escapeRegExp=function(e,n){return e.replace(n?/([-[\]{}()*+!<=:?.\/\\^$|#\s,])/g:/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},n.unescapeRegExp=function(e,n){return e.replace(n?/\\([-[\]{}()*+!<=:?.\/\\^$|#\s,])/g:/\\([.*+?^=!:${}()|\[\]\/\\])/g,"$1")},n});