define(["app/time"],function(t){"use strict";return function(r,u){if(u)return function(r,u,o,s){var e=(u?t.utc:t).getMoment(r),n=e.valueOf(),a=1,h=24/s;for(e.hours()<o&&e.subtract(24,"hours"),e.hours(o).startOf("hours");a<=h;++a){var f=e.valueOf(),i=e.add(s,"hours").valueOf();if(n>=f&&n<i)return{moment:e.subtract(s,"hours").startOf("hour"),no:a,startTime:f,endTime:i,startHour:o,length:s,count:h}}}(r,!!u.utc,"number"==typeof u.startHour?u.startHour:6,u.shiftLength||8);var o=t.getMoment(r),s=o.hour(),e=-1;return s>=6&&s<14?(o.hours(6),e=1):s>=14&&s<22?(o.hours(14),e=2):(o.hours(22),s<6&&o.subtract(1,"days"),e=3),{moment:o.startOf("hour"),shift:e,startHour:6,shiftLength:8}}});