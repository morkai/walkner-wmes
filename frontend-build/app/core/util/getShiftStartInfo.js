define(["app/time"],function(t){"use strict";return function(r,o){var e=o&&o.shiftLength||8,u=o&&"number"==typeof o.startHour?o.startHour:6,s=(o&&o.utc?t.utc:t).getMoment(r),n=s.valueOf(),a=1,h=24/e;for(s.hours()<u&&s.subtract(24,"hours"),s.hours(u).startOf("hours");a<=h;++a){var f=s.valueOf(),i=s.hours()+e;i>=24&&(i-=24),s.add(e,"hours");var m=s.hours();m!==i&&s.add(i-m,"hours");var v=s.valueOf();if(n>=f&&n<v)return{moment:t.getMoment(f),no:a,startTime:f,endTime:v,startHour:u,length:e,count:h}}throw new Error("Could not resolve the shift start info!")}});