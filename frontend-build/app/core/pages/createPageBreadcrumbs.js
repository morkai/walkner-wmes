// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["underscore","app/i18n"],function(e,r){"use strict";return function(n,l){var a=n.modelProperty?n[n.modelProperty]:n.model||n.collection,b=a.getNlsDomain();if(l=Array.isArray(l)?l.map(function(e){return"string"==typeof e?{label:":"===e[0]?r.bound(b,"BREADCRUMBS"+e):e}:("string"==typeof e.label&&":"===e.label[0]&&(e.label=r.bound(b,"BREADCRUMBS"+e.label)),e)}):[],!1!==n.browseBreadcrumb&&l.unshift({label:r.bound(b,e.result(n,"browseBreadcrumb")||"BREADCRUMBS:browse"),href:l.length?a.genClientUrl("base"):null}),!0===n.baseBreadcrumb)l.unshift(r.bound(b,"BREADCRUMBS:base"));else if(n.baseBreadcrumb){var t=e.result(n,"baseBreadcrumb");Array.isArray(t)?l.unshift.apply(l,t):l.unshift({label:r.bound(b,"BREADCRUMBS:base"),href:String(t)})}return l}});