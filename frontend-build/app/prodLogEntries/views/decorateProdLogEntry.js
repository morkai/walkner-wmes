define(["app/time","app/i18n","app/data/aors","app/data/prodLines","app/data/downtimeReasons","app/data/views/renderOrgUnitPath","app/core/templates/userInfo"],function(a,e,r,t,d,o,n){return function(t){var o=t.toJSON(),i={};switch(o.type){case"changeShift":i.date=a.format(o.data.startedProdShift.date,"YYYY-MM-DD"),i.shift=e("core","SHIFT:"+o.data.startedProdShift.shift);break;case"changeMaster":case"changeLeader":case"changeOperator":i.name=o.data?o.data.label:"-";break;case"changeQuantitiesDone":i.hour=o.data.hour+1,i.value=o.data.newValue;break;case"changeOrder":case"correctOrder":var p=o.data.orderData&&o.data.orderData.operations?o.data.orderData.operations[o.data.operationNo]:null;i.orderId=o.data.orderId,i.orderName=o.data.orderData.name||"?",i.operationNo=o.data.operationNo,i.operationName=p?p.name:"?";break;case"changeQuantityDone":case"changeWorkerCount":i.value=o.data.newValue;break;case"startDowntime":var s=d.get(o.data.reason),h=r.get(o.data.aor);i._id=o.data._id,i.reason=s?s.getLabel():o.data.reason,i.aor=h?h.getLabel():o.data.aor;break;default:i=o.data}var c=null;return o.savedAt&&(c=(Date.parse(o.savedAt)-Date.parse(o.createdAt))/1e3),o.data=e("prodLogEntries","data:"+o.type,i),o.type=e("prodLogEntries","type:"+o.type),o.createdAt=a.format(o.createdAt,"YYYY-MM-DD HH:mm:ss"),o.creator=n({userInfo:o.creator}),c&&(o.createdAt+=" ("+(0>c?"-":"+")+a.toString(Math.abs(c),!1,!0)+")"),o.prodShift&&(o.prodShift='<a href="#prodShifts/'+o.prodShift._id+'">'+a.format(o.prodShift.date,"YYYY-MM-DD")+", "+e("core","SHIFT:"+o.prodShift.shift)+"</a>"),o.prodShiftOrder=o.prodShiftOrder?'<a href="#prodShiftOrders/'+o.prodShiftOrder._id+'">'+o.prodShiftOrder.orderId+", "+o.prodShiftOrder.operationNo+"</a>":e("prodLogEntries","noData:prodShiftOrder"),o}});