define(["app/time","app/i18n","app/data/aors","app/data/prodLines","app/data/downtimeReasons","app/data/views/renderOrgUnitPath","app/core/templates/userInfo"],function(e,t,n,r,i,o,a){return function(r){var o=r.toJSON(),s={};switch(o.type){case"changeShift":s.date=e.format(o.data.startedProdShift.date,"YYYY-MM-DD"),s.shift=t("core","SHIFT:"+o.data.startedProdShift.shift);break;case"changeMaster":case"changeLeader":case"changeOperator":s.name=o.data?o.data.label:"-";break;case"changeQuantitiesDone":s.hour=o.data.hour+1,s.value=o.data.newValue;break;case"changeOrder":var l=o.data.orderData&&o.data.orderData.operations?o.data.orderData.operations[o.data.operationNo]:null;s.orderId=o.data.orderId,s.orderName=o.data.orderData.name||"?",s.operationNo=o.data.operationNo,s.operationName=l?l.name:"?";break;case"changeQuantityDone":case"changeWorkerCount":s.value=o.data.newValue;break;case"startDowntime":var u=i.get(o.data.reason),d=n.get(o.data.aor);s.reason=u?u.getLabel():o.data.reason,s.aor=d?d.getLabel():o.data.aor}return o.data=t("prodLogEntries","data:"+o.type,s),o.type=t("prodLogEntries","type:"+o.type),o.createdAt=e.format(o.createdAt,"YYYY-MM-DD HH:mm:ss"),o.creator=a({userInfo:o.creator}),o.prodShift&&(o.prodShift='<a href="#prodShifts/'+o.prodShift._id+'">'+e.format(o.prodShift.date,"YYYY-MM-DD")+", "+t("core","SHIFT:"+o.prodShift.shift)+"</a>"),o.prodShiftOrder=o.prodShiftOrder?'<a href="#prodShiftOrders/'+o.prodShiftOrder._id+'">'+o.prodShiftOrder.orderId+", "+o.prodShiftOrder.operationNo+"</a>":t("prodLogEntries","noData:prodShiftOrder"),o}});