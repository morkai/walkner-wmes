define(["app/time","app/i18n","app/data/aors","app/data/prodLines","app/data/downtimeReasons","app/data/views/renderOrgUnitPath","app/core/templates/userInfo"],function(a,e,r,t,o,d,n){return function(t){var d=t.toJSON(),p={};switch(d.type){case"changeShift":p.date=a.format(d.data.startedProdShift.date,"YYYY-MM-DD"),p.shift=e("core","SHIFT:"+d.data.startedProdShift.shift);break;case"changeMaster":case"changeLeader":case"changeOperator":p.name=d.data?d.data.label:"-";break;case"changeQuantitiesDone":p.hour=d.data.hour+1,p.value=d.data.newValue;break;case"changeOrder":case"correctOrder":var i=d.data.orderData&&d.data.orderData.operations?d.data.orderData.operations[d.data.operationNo]:null;p.orderId=d.data.orderId,p.orderName=d.data.orderData.name||"?",p.operationNo=d.data.operationNo,p.operationName=i?i.name:"?";break;case"changeQuantityDone":case"changeWorkerCount":p.value=d.data.newValue;break;case"startDowntime":var s=o.get(d.data.reason),h=r.get(d.data.aor);p.reason=s?s.getLabel():d.data.reason,p.aor=h?h.getLabel():d.data.aor}var c=null;return d.savedAt&&(c=(Date.parse(d.savedAt)-Date.parse(d.createdAt))/1e3),d.data=e("prodLogEntries","data:"+d.type,p),d.type=e("prodLogEntries","type:"+d.type),d.createdAt=a.format(d.createdAt,"YYYY-MM-DD HH:mm:ss"),d.creator=n({userInfo:d.creator}),c&&(d.createdAt+=" ("+(0>c?"-":"+")+a.toString(Math.abs(c),!1,!0)+")"),d.prodShift&&(d.prodShift='<a href="#prodShifts/'+d.prodShift._id+'">'+a.format(d.prodShift.date,"YYYY-MM-DD")+", "+e("core","SHIFT:"+d.prodShift.shift)+"</a>"),d.prodShiftOrder=d.prodShiftOrder?'<a href="#prodShiftOrders/'+d.prodShiftOrder._id+'">'+d.prodShiftOrder.orderId+", "+d.prodShiftOrder.operationNo+"</a>":e("prodLogEntries","noData:prodShiftOrder"),d}});