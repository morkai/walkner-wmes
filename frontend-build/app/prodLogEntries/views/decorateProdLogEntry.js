define(["app/time","app/i18n","app/data/aors","app/data/prodLines","app/data/downtimeReasons","app/data/views/renderOrgUnitPath","app/core/templates/userInfo"],function(a,e,r,t,o,d,n){return function(t){var d=t.toJSON(),i={};switch(d.type){case"changeShift":i.date=a.format(d.data.startedProdShift.date,"YYYY-MM-DD"),i.shift=e("core","SHIFT:"+d.data.startedProdShift.shift);break;case"changeMaster":case"changeLeader":case"changeOperator":i.name=d.data?d.data.label:"-";break;case"changeQuantitiesDone":i.hour=d.data.hour+1,i.value=d.data.newValue;break;case"changeOrder":var p=d.data.orderData&&d.data.orderData.operations?d.data.orderData.operations[d.data.operationNo]:null;i.orderId=d.data.orderId,i.orderName=d.data.orderData.name||"?",i.operationNo=d.data.operationNo,i.operationName=p?p.name:"?";break;case"changeQuantityDone":case"changeWorkerCount":i.value=d.data.newValue;break;case"startDowntime":var s=o.get(d.data.reason),h=r.get(d.data.aor);i.reason=s?s.getLabel():d.data.reason,i.aor=h?h.getLabel():d.data.aor}return d.data=e("prodLogEntries","data:"+d.type,i),d.type=e("prodLogEntries","type:"+d.type),d.createdAt=a.format(d.createdAt,"YYYY-MM-DD HH:mm:ss"),d.creator=n({userInfo:d.creator}),d.prodShift&&(d.prodShift='<a href="#prodShifts/'+d.prodShift._id+'">'+a.format(d.prodShift.date,"YYYY-MM-DD")+", "+e("core","SHIFT:"+d.prodShift.shift)+"</a>"),d.prodShiftOrder=d.prodShiftOrder?'<a href="#prodShiftOrders/'+d.prodShiftOrder._id+'">'+d.prodShiftOrder.orderId+", "+d.prodShiftOrder.operationNo+"</a>":e("prodLogEntries","noData:prodShiftOrder"),d}});