define(["app/time","app/core/View","app/core/util/pageActions","app/core/util/forms/dateTimeRange","app/mrpControllers/util/setUpMrpSelect2","app/paintShop/templates/planExecutionExport"],function(e,t,i,p,n,a){"use strict";return t.extend({template:a,events:{"click a[data-date-time-range]":p.handleRangeEvent,submit:function(){var t=this.$id("submit").prop("disabled",!0),p=this.$id("from-date").val(),n=this.$id("to-date").val(),a=this.$id("mrp").val(),o=e.getMoment(p,"YYYY-MM-DD"),r=e.getMoment(n,"YYYY-MM-DD").diff(o,"days")>124?"csv":"xlsx",s="/paintShop/orders;export-plan-execution."+r+"?from="+p+"&to="+n+"&mrp="+encodeURIComponent(a);return"xlsx"===r?i.exportXlsx(s).always(function(){t.prop("disabled",!1)}):(window.open(s),this.timers.enableSubmit=setTimeout(function(){t.prop("disabled",!1)},2e3)),!1}},afterRender:function(){t.prototype.afterRender.apply(this,arguments),n(this.$id("mrp"),{width:"100%",view:this,own:!0})}})});