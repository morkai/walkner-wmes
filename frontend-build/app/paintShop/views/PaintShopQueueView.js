// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["jquery","app/i18n","app/viewport","app/core/View","./PaintShopOrderDetailsView","app/paintShop/templates/queue","app/paintShop/templates/queueOrder"],function(e,t,i,r,n,s,o){"use strict";return r.extend({template:s,events:{"mousedown .paintShop-order":function(e){this.lastClickEvent=e},"mouseup .paintShop-order":function(e){var t=this.lastClickEvent;t&&(0===e.button&&t.offsetY===e.offsetY&&t.offsetX===e.offsetX&&t.screenX===e.screenX&&t.screenY===e.screenY&&this.handleOrderClick(e.currentTarget.dataset.orderId),this.lastClickEvent=null)}},initialize:function(){this.lastClickEvent=null,this.listenTo(this.model,"sync",this.render)},serialize:function(){return{idPrefix:this.idPrefix,groups:this.model.serializeGroups(),renderQueueOrder:o}},afterRender:function(){},handleOrderClick:function(e){if(!i.currentDialog){var t=this.$('.paintShop-order[data-order-id="'+e+'"]')[0];this.$el.animate({scrollTop:t.offsetTop+1},200);var r=new n({model:this.model.get(e)});i.showDialog(r)}}})});