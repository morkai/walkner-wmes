define(["js2form","app/time","app/core/View","app/core/util/getShiftStartInfo","app/core/util/buttonGroup","app/core/util/forms/dateTimeRange","app/paintShop/templates/load/reportFilter"],function(t,e,a,r,o,i,n){"use strict";return a.extend({template:n,events:{"click a[data-date-time-range]":i.handleRangeEvent,submit:function(){return this.changeFilter(),!1}},afterRender:function(){t(this.el,this.serializeFormData()),o.toggle(this.$id("interval"))},serializeFormData:function(){var t=this.model,a=+t.get("from"),r=+t.get("to");return{interval:t.get("interval"),"from-date":a?e.format(a,"YYYY-MM-DD"):"","to-date":r?e.format(r,"YYYY-MM-DD"):""}},changeFilter:function(){var t=i.serialize(this),a={from:t.from?t.from.valueOf():0,to:t.to?t.to.valueOf():0,interval:o.getValue(this.$id("interval"))};"none"===a.interval&&(a.from||(a.from=r(Date.now()).moment.startOf("day").valueOf()),a.to=e.getMoment(a.from).add(1,"days").valueOf()),a.from&&a.to&&a.to<=a.from&&(a.to=e.getMoment(a.from).add(1,"none"===a.interval?"day":a.interval).valueOf()),a.from&&this.$id("from-date").val(e.format(a.from,"YYYY-MM-DD")),a.to&&this.$id("to-date").val(e.format(a.to,"YYYY-MM-DD")),this.model.set(a),this.model.trigger("filtered")}})});