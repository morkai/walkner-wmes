define(["../broker","../time","../router","../viewport","../user","../core/pages/FilteredListPage"],function(a,n,e,t,p,o){"use strict";var i=["css!app/paintShop/assets/main"],r=["i18n!app/nls/paintShop","i18n!app/nls/wh"],s=p.auth("PAINT_SHOP:VIEW"),l=p.auth("LOCAL","PAINT_SHOP:VIEW"),u=p.auth("PAINT_SHOP:MANAGE");e.map("/paintShop/:date",l,function(e){"current"===e.params.date&&(e.params.date="0d"),/^-?[0-9]+d$/.test(e.params.date)&&(e.params.date=n.getMoment().subtract(n.getMoment().hours()<6?1:0,"days").startOf("day").add(+e.params.date.replace("d",""),"days").format("YYYY-MM-DD"),a.publish("router.navigate",{url:"/paintShop/"+e.params.date,replace:!0,trigger:!1})),t.loadPage(["app/paintShop/pages/PaintShopPage"].concat(i,r),function(a){return new a({date:e.params.date,selectedMrp:e.query.mrp,selectedPaint:e.query.paint,fullscreen:void 0!==e.query.fullscreen})})}),e.map("/paintShop/paints",s,function(a){t.loadPage(["app/paintShopPaints/PaintShopPaintCollection","app/paintShopPaints/pages/PaintShopPaintListPage",r[0]],function(n,e){return new e({pageClassName:"page-max-flex",collection:new n(null,{rqlQuery:a.rql})})})}),e.map("/paintShop/ignoredComponents",s,function(a){t.loadPage(["app/ps-ignoredComponents/PsIgnoredComponentCollection","app/ps-ignoredComponents/pages/ListPage",r[0]],function(n,e){return new e({pageClassName:"page-max-flex",collection:new n(null,{rqlQuery:a.rql})})})}),e.map("/paintShop/load/monitoring",s,function(a){t.loadPage(["app/paintShop/pages/load/MonitoringPage"].concat(i,r),function(n){return new n({counter:+a.query.counter})})}),e.map("/paintShop/load/history",s,function(a){t.loadPage(["app/paintShop/PaintShopLoadCollection","app/paintShop/pages/load/HistoryPage"].concat(i,r),function(n,e){return new e({collection:new n(null,{rqlQuery:a.rql})})})}),e.map("/paintShop/load/report",s,function(a){t.loadPage(["app/paintShop/PaintShopLoadReport","app/paintShop/pages/load/ReportPage"].concat(i,r),function(n,e){return new e({model:n.fromQuery(a.query)})})}),e.map("/paintShop;settings",u,function(a){t.loadPage(["app/paintShop/pages/PaintShopSettingsPage"].concat(i,r),function(n){return new n({initialTab:a.query.tab})})})});