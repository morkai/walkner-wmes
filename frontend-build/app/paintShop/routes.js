// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["../broker","../time","../router","../viewport","../user","./pages/PaintShopPage","i18n!app/nls/paintShop"],function(a,e,t,r,p,s){"use strict";t.map("/paintShop/:date",p.auth("LOCAL","PAINT_SHOP:VIEW"),function(t){"current"===t.params.date&&(t.params.date="0d"),/^-?[0-9]+d$/.test(t.params.date)&&(t.params.date=e.getMoment().subtract(e.getMoment().hours()<6?1:0,"days").startOf("day").add(+t.params.date.replace("d",""),"days").format("YYYY-MM-DD"),a.publish("router.navigate",{url:"/paintShop/"+t.params.date,replace:!0,trigger:!1})),r.showPage(new s({date:t.params.date,selectedMrp:t.query.mrp,fullscreen:void 0!==t.query.fullscreen}))})});