// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["../broker","../time","../router","../viewport","../user","./PaintShopOrderCollection","./pages/PaintShopPage","i18n!app/nls/paintShop"],function(e,a,t,r,p,o,s){"use strict";t.map("/paintShop/:date",p.auth("LOCAL","PAINT_SHOP:VIEW"),function(t){/^-?[0-9]+d$/.test(t.params.date)&&(t.params.date=a.getMoment().subtract(a.getMoment().hours()<6?1:0,"days").startOf("day").add(+t.params.date.replace("d",""),"days").format("YYYY-MM-DD"),e.publish("router.navigate",{url:"/paintShop/"+t.params.date,replace:!0,trigger:!1})),r.showPage(new s({selectedMrp:t.query.mrp,fullscreen:void 0!==t.query.fullscreen,model:{orders:o.forDate(t.params.date)}}))})});