define(["underscore","app/core/View","app/wmes-osh-common/dictionaries","app/wmes-osh-actions/templates/details/rootCauses"],function(e,t,s,o){"use strict";return t.extend({template:o,initialize:function(){t.prototype.initialize.apply(this,arguments),this.once("afterRender",()=>{this.listenTo(this.model,"change:rootCauses",e.debounce(this.render,1)),this.listenTo(this.model,"seen",this.onSeen)})},getTemplateData:function(){const e=this.model.getObserver();return{rootCauses:this.serializeRootCauses(),unseen:e.notify&&(e.changes.all||e.changes.rootCauses)}},serializeRootCauses:function(){return this.model.get("rootCauses").map(e=>{return{category:s.getLabel("rootCauseCategories",e.category,{long:!0})||e.category,why:e.why.filter(e=>!!e)}}).filter(e=>!!e.why.length)},onSeen:function(){this.$(".osh-unseen").removeClass("osh-unseen")}})});