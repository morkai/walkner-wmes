define(["jquery","app/core/View","app/core/util/bindLoadingMessage","../HelpSettingCollection","../HelpFileCollection","../views/HelpTreeView","app/help/templates/page"],function(e,i,t,n,s,o,l){"use strict";return i.extend({layoutName:"page",template:l,breadcrumbs:function(){return[this.t("bc:base")]},actions:function(){return[{label:this.t("pa:edit"),icon:"edit",privileges:"HELP:MANAGE",callback:function(){console.log("EDIT",this,arguments)}}]},initialize:function(){this.defineModels(),this.defineViews(),this.defineBindings(),this.setView("#-tree",this.treeView)},destroy:function(){e(window).off("."+this.idPrefix)},defineModels:function(){this.settings=t(new n(null,{pubsub:this.pubsub.sandbox()}),this),this.files=this.model=t(new s(null,{settings:this.settings}),this)},defineViews:function(){this.treeView=new o({model:this.files})},defineBindings:function(){e(window).on("resize."+this.idPrefix,this.onWindowResize.bind(this)).on("scroll."+this.idPrefix,this.onWindowScroll.bind(this))},load:function(e){var i=this;return e(i.settings.fetchIfEmpty(function(){return i.model.fetch({reset:!0})}))},afterRender:function(){this.resize()},onWindowResize:function(){this.resize()},onWindowScroll:function(){this.resize()},resize:function(){var i=this.$id("tree"),t=e(".hd").outerHeight(!0)+15-window.scrollY;t<15&&(t=15),i[0].style.top=t+"px",i[0].style.height=window.innerHeight-15-t+"px"}})});