// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["underscore","jquery","app/user"],function(e,n,t){"use strict";function r(){return(u||[]).map(function(e){return{id:e,text:e}})}var u=null;return{hasAny:function(){return u&&u.length>0},getAsList:function(){return[].concat(u||[])},getAsSelect2:r,load:function(r,c){return c||null===u?r.ajax({url:"/mor/iptCheck"}).done(function(n){u=[],e.forEach(n.mrpToRecipients,function(n,r){e.includes(n,t.data._id)&&u.push(r)})}):n.Deferred().resolve().promise()},events:{"click #-ownMrps":function(e){return this.$(e.target).closest("label").next().select2("data",r()),!1}}}});