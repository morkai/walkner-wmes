// Part of <http://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["../data/loadedModules","../core/Model","./util/decorateUser"],function(e,l,i){"use strict";return l.extend({urlRoot:"/users",clientUrlRoot:"#users",topicPrefix:"users",privilegePrefix:"USERS",nlsDomain:"users",labelAttribute:"login",defaults:{login:null,email:null,prodFunction:null,privileges:null,aors:null,company:null,kdId:-1,kdDivision:null,personellId:null,card:null,firstName:null,lastName:null,registerDate:null,kdPosition:null,active:!0,vendor:null,gender:null},initialize:function(){Array.isArray(this.get("privileges"))||this.set("privileges",[]),Array.isArray(this.get("aors"))||this.set("aors",[])},getLabel:function(){var e=this.get("lastName")||"",l=this.get("firstName")||"";return e.length&&l.length?e+" "+l:this.get("login")},url:function(){var i=l.prototype.url.apply(this,arguments);return this.isNew()||!e.isLoaded("vendors")?i:i+"?populate(vendor)"},serialize:function(){return i(this)}})});