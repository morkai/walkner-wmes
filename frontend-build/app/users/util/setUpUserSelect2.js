define(["underscore"],function(e){return function(t,n){return t.select2(e.extend({openOnEnter:null,allowClear:!0,minimumInputLength:3,ajax:{cache:!0,quietMillis:300,url:function(e){e=e.trim();var t=/^[0-9]+$/.test(e)?"personellId":"lastName";return e=encodeURIComponent("^"+e),"/users?select(personellId,lastName,firstName,login)&sort("+t+")&limit(20)&regex("+t+","+e+",i)"},results:function(e){return{results:(e.collection||[]).map(function(e){var t=e.lastName&&e.firstName?e.firstName+" "+e.lastName:"-",n=e.personellId?e.personellId:"-";return{id:e._id,text:t+" ("+n+")",name:t,login:e.login}}).sort(function(e,t){return e.text.localeCompare(t.text)})}}}},n))}});