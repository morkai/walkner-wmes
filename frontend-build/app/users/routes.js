// Part of <http://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["../i18n","../router","../viewport","../user","../core/View","../core/util/showDeleteFormPage","./User","./pages/LogInFormPage","i18n!app/nls/users"],function(e,a,n,r,s,i,o,u){"use strict";var t=r.auth("USERS:VIEW"),d=r.auth("USERS:MANAGE");a.map("/login",function(){n.showPage(new u)}),a.map("/users",t,function(e){n.loadPage(["app/users/pages/UserListPage"],function(a){return new a({rql:e.rql})})}),a.map("/users/:id",function(e,a,n){e.params.id===r.data._id?n():t(e,a,n)},function(e){n.loadPage(["app/users/pages/UserDetailsPage"],function(a){return new a({model:new o({_id:e.params.id})})})}),a.map("/users;add",d,function(){n.loadPage(["app/core/pages/AddFormPage","app/users/views/UserFormView"],function(e,a){return new e({FormView:a,model:new o})})}),a.map("/users/:id;edit",function(e,a,n){e.params.id===r.data._id?n():d(e,a,n)},function(e){n.loadPage(["app/users/pages/UserEditFormPage"],function(a){return new a({model:new o({_id:e.params.id})})})}),a.map("/users/:id;delete",d,i.bind(null,o))});