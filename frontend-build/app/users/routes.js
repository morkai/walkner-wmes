define(["../i18n","../broker","../router","../viewport","../user","../core/View","../core/util/showDeleteFormPage","./User","./pages/LogInFormPage","i18n!app/nls/users"],function(e,a,n,r,s,i,u,t,o){"use strict";var p=s.auth("USERS:VIEW"),d=s.auth("USERS:MANAGE");n.map("/login",function(e){a.publish("router.navigate",{url:"/",replace:!0,trigger:!1}),r.showPage(new o({model:{unknown:e.query.unknown}}))}),n.map("/users;settings",s.auth("USERS:MANAGE"),function(e){r.loadPage(["app/users/pages/UserSettingsPage"],function(a){return new a({initialTab:e.query.tab})})}),n.map("/users",p,function(e){r.loadPage(["app/users/pages/UserListPage"],function(a){return new a({rql:e.rql})})}),n.map("/users/:id",function(e,a,n){e.params.id===s.data._id?n():p(e,a,n)},function(e){r.loadPage(["app/users/pages/UserDetailsPage"],function(a){return new a({model:new t({_id:e.params.id})})})}),n.map("/users;add",d,function(){r.loadPage(["app/core/pages/AddFormPage","app/users/views/UserFormView"],function(e,a){return new e({FormView:a,model:new t})})}),n.map("/users/:id;edit",function(e,a,n){e.params.id===s.data._id?n():d(e,a,n)},function(e){r.loadPage(["app/users/pages/UserEditFormPage"],function(a){return new a({model:new t({_id:e.params.id})})})}),n.map("/users/:id;delete",d,u.bind(null,t))});