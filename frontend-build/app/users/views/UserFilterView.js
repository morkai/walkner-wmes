define(["underscore","app/data/prodFunctions","app/core/util/idAndLabel","app/core/views/FilterView","app/users/util/setUpUserSelect2","app/users/templates/filter"],function(e,r,a,n,s,i){"use strict";return n.extend({template:i,defaultFormData:{personellId:"",login:"",searchName:""},termToForm:{personellId:function(e,r,a){"regex"===r.name&&(a[e]=r.args[1].replace("^",""))},prodFunction:function(e,r,a){a[e]=r.args[1]},login:"personellId",searchName:"personellId"},serialize:function(){return e.assign(n.prototype.serialize.apply(this,arguments),{prodFunctions:r.map(a)})},serializeFormToQuery:function(e){var r=parseInt(this.$id("personellId").val().trim(),10),a=this.$id("login").val().trim(),n=s.transliterate(this.$id("searchName").val()),i=this.$id("prodFunction").val();isNaN(r)||e.push({name:"regex",args:["personellId","^"+r,"i"]}),a.length&&e.push({name:"regex",args:["login","^"+a,"i"]}),n.length&&e.push({name:"regex",args:["searchName","^"+n]}),i.length&&e.push({name:"eq",args:["prodFunction",i]})}})});