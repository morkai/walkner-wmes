define(["underscore","app/data/loadedModules","app/data/prodFunctions","app/core/util/idAndLabel","app/core/views/FilterView","app/users/util/setUpUserSelect2","app/users/templates/filter"],function(e,r,a,n,t,s,i){"use strict";return t.extend({template:i,termToForm:{personellId:function(e,r,a){"regex"===r.name&&(a[e]=r.args[1].replace("^",""))},prodFunction:function(e,r,a){a[e]=r.args[1]},login:"personellId",searchName:"personellId"},getTemplateData:function(){return{prodFunctions:r.isLoaded("prodFunctions")?a.map(n):[]}},serializeFormToQuery:function(e){var r=parseInt(this.$id("personellId").val().trim(),10),a=this.$id("login").val().trim(),n=s.transliterate(this.$id("searchName").val());isNaN(r)||e.push({name:"regex",args:["personellId","^"+r,"i"]}),a.length&&e.push({name:"regex",args:["login","^"+a,"i"]}),n.length&&e.push({name:"regex",args:["searchName","^"+n]});var t=this.$id("prodFunction").val()||"";t.length&&e.push({name:"eq",args:["prodFunction",t]})}})});