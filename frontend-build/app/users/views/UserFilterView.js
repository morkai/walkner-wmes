define(["underscore","app/user","app/data/loadedModules","app/data/prodFunctions","app/data/privileges","app/core/util/idAndLabel","app/core/views/FilterView","app/users/util/setUpUserSelect2","app/users/templates/filter"],function(e,r,i,n,t,a,l,s,p){"use strict";return l.extend({template:p,termToForm:{personnelId:function(e,r,i){"regex"===r.name&&(i[e]=r.args[1].replace("^",""))},prodFunction:function(e,r,i){i[e]=r.args[1]},login:"personnelId",searchName:"personnelId"},getTemplateData:function(){return{prodFunctions:i.isLoaded("prodFunctions")?n.map(a):[],privileges:r.isAllowedTo("USERS:MANAGE")?t:[]}},afterRender:function(){l.prototype.afterRender.apply(this,arguments),this.$id("privileges").select2({width:"250px",allowClear:!0})},serializeFormToQuery:function(e){this.serializeRegexTerm(e,"personnelId",null,void 0,!1,!0),this.serializeRegexTerm(e,"login",null,null,!0,!0),this.serializeRegexTerm(e,"searchName",null,null,!0,!0);var r=this.$id("prodFunction").val()||"";r.length&&e.push({name:"eq",args:["prodFunction",r]});var i=this.$id("privileges").val()||"";i.length&&e.push({name:"eq",args:["privileges",i]})}})});