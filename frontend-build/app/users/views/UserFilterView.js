define(["underscore","app/user","app/data/loadedModules","app/data/prodFunctions","app/data/privileges","app/core/util/idAndLabel","app/core/views/FilterView","app/users/util/setUpUserSelect2","app/users/templates/filter"],function(e,r,i,l,t,a,n,s,p){"use strict";return n.extend({template:p,termToForm:{personellId:function(e,r,i){"regex"===r.name&&(i[e]=r.args[1].replace("^",""))},prodFunction:function(e,r,i){i[e]=r.args[1]},login:"personellId",searchName:"personellId"},getTemplateData:function(){return{prodFunctions:i.isLoaded("prodFunctions")?l.map(a):[],privileges:r.isAllowedTo("USERS:MANAGE")?t:[]}},afterRender:function(){n.prototype.afterRender.apply(this,arguments),this.$id("privileges").select2({width:"250px",allowClear:!0})},serializeFormToQuery:function(e){this.serializeRegexTerm(e,"personellId",null,void 0,!1,!0),this.serializeRegexTerm(e,"login",null,null,!0,!0),this.serializeRegexTerm(e,"searchName",null,null,!0,!0);var r=this.$id("prodFunction").val()||"";r.length&&e.push({name:"eq",args:["prodFunction",r]});var i=this.$id("privileges").val()||"";i.length&&e.push({name:"eq",args:["privileges",i]})}})});