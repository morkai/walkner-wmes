// Copyright (c) 2014, ≈Åukasz Walukiewicz <lukasz@walukiewicz.eu>. Some Rights Reserved.
// Licensed under CC BY-NC-SA 4.0 <http://creativecommons.org/licenses/by-nc-sa/4.0/>.
// Part of the walkner-wmes project <http://lukasz.walukiewicz.eu/p/walkner-wmes>

define(["underscore","../divisions","../subdivisions","../mrpControllers","../workCenters","../prodFlows","../prodLines"],function(t,e,o,r,n,i,s){return function(l,u,c){if(!l)return null;var d=[];return(l.constructor!==s.model||(d.unshift(l),l=n.get(l.get("workCenter"))))&&(l.constructor!==n.model||(d.unshift(l),l=l.get("prodFlow")?i.get(l.get("prodFlow")):r.get(l.get("mrpController"))))&&(l.constructor!==i.model||(d.unshift(l),l=r.get((l.get("mrpController")||[])[0])))&&(l.constructor!==r.model||(d.unshift(l),l=o.get(l.get("subdivision"))))&&(l.constructor!==o.model||(d.unshift(l),l=e.get(l.get("division"))))?(l.constructor===e.model&&d.unshift(l),c!==!1&&d.pop(),0===d.length?null:d.map(function(e){var o=t.escape(e.getLabel());return u?'<a href="'+e.genClientUrl()+'">'+o+"</a>":o}).join(" \\ ")):null}});