// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["underscore","../divisions","../subdivisions","../mrpControllers","../workCenters","../prodFlows","../prodLines"],function(t,r,n,e,o,i,u){"use strict";function l(r,n){var e=t.escape(r.getLabel()),o=r.get("deactivatedAt")?"text-decoration: line-through!important":"";if(!n)return'<span style="'+o+'">'+e+"</span>";var i=r.genClientUrl();return'<a href="'+i+'" style="'+o+'">'+e+"</a>"}return function(t,s,c){if(!t)return null;var d=[];return(t.constructor!==u.model||(d.unshift(t),t=o.get(t.get("workCenter"))))&&(t.constructor!==o.model||(d.unshift(t),t=t.get("prodFlow")?i.get(t.get("prodFlow")):e.get(t.get("mrpController"))))&&(t.constructor!==i.model||(d.unshift(t),t=(t.get("mrpController")||[]).map(function(t){return e.get(t)}),t.length))?(t.constructor===e.model||t[0]&&t[0].constructor===e.model)&&(d.unshift(t),t=n.get((t[0]||t).get("subdivision")),!t)?null:t.constructor!==n.model||(d.unshift(t),t=r.get(t.get("division")))?(t.constructor===r.model&&d.unshift(t),c!==!1&&d.pop(),0===d.length?null:d.map(function(t){return Array.isArray(t)?t.map(function(t){return l(t,s)}).join("; "):l(t,s)}).join(" \\ ")):null:null}});