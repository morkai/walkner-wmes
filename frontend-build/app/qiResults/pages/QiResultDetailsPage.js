// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["app/i18n","app/core/pages/DetailsPage","app/core/util/pageActions","app/core/util/html2pdf","app/printers/views/PrinterPickerView","../dictionaries","../views/QiResultDetailsView","../views/QiResultHistoryView","app/qiResults/templates/detailsPage"],function(e,t,i,s,a,n,o,l,r){"use strict";return t.extend({template:r,baseBreadcrumb:!0,actions:function(){var e=this,t=e.model,n=[];return t.get("ok")||n.push(a.pageAction({view:e,tag:"qi"},function(i){e.ajax({url:t.url()+".html",dataType:"html"}).done(function(e){s(e,{orientation:"landscape"},i)})})),t.canEdit()&&n.push(i.edit(t,!1)),t.canDelete()&&n.push(i.delete(t,!1)),n},initialize:function(){t.prototype.initialize.apply(this,arguments),this.setView("#-properties",this.detailsView),this.setView("#-history",this.historyView)},destroy:function(){t.prototype.destroy.call(this),n.unload()},defineViews:function(){this.detailsView=new o({model:this.model}),this.historyView=new l({model:this.model})},load:function(e){return e(this.model.fetch(),n.load())},afterRender:function(){t.prototype.afterRender.call(this),n.load()}})});