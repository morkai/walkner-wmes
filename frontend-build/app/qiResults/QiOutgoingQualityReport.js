define(["underscore","../i18n","../time","../core/Model"],function(e,t,n,r){"use strict";return r.extend({urlRoot:"/qi/reports/outgoingQuality",nlsDomain:"qiResults",defaults:function(){return{week:"",interval:"week"}},fetch:function(t){return e.isObject(t)||(t={}),t.data=e.assign(t.data||{},e.pick(this.attributes,["week"])),r.prototype.fetch.call(this,t)},genClientUrl:function(){return this.urlRoot+"?week="+encodeURIComponent(this.get("week"))},parse:function(t){return e.omit(t,["options"])}},{fromQuery:function(e){return new this({week:this.parseWeek(e.week)})},parseWeek:function(e){e=(e||"").trim();var t=n.getMoment(),r=e.match(/([0-9]{2,4})?.*?W([0-9]{1,2})/),i=0,o=0;return r?(i=+r[1],o=+r[2]):/[0-9]{1,2}/.test(e)&&(o=+e.match(/([0-9]{1,2})/)[1]),i?i<100&&(i+=2e3):i=t.isoWeekYear(),(!o||o<1||o>53)&&(o=t.isoWeek()),o<10&&(o="0"+o),i+"-W"+o}})});