define(["js2form","app/time","app/core/View","app/core/util/fixTimeRange","app/core/util/buttonGroup","app/core/util/idAndLabel","app/reports/util/prepareDateRange","app/qiResults/dictionaries","app/qiResults/templates/okRatioReportFilter"],function(t,e,o,i,r,a,m,n,f){"use strict";return o.extend({template:f,events:{submit:function(){return this.changeFilter(),!1},"click a[data-range]":function(t){var e=m(t.target);this.$id("from").val(e.fromMoment.format("YYYY-MM")),this.$id("to").val(e.toMoment.format("YYYY-MM")),this.$el.submit()}},afterRender:function(){t(this.el,this.serializeFormData())},serializeFormData:function(){var t=this.model,o=+t.get("from"),i=+t.get("to");return{from:o?e.format(o,"YYYY-MM"):"",to:i?e.format(i,"YYYY-MM"):""}},changeFilter:function(){var t={from:e.getMoment(this.$id("from").val(),"YYYY-MM").valueOf(),to:e.getMoment(this.$id("to").val(),"YYYY-MM").valueOf()};if((!t.from||t.from<0)&&(t.from=0),(!t.to||t.to<0)&&(t.to=0),t.from&&t.from===t.to){var o=e.getMoment(t.to).add(1,"months");this.$id("to").val(o.format("YYYY-MM")),t.to=o.valueOf()}this.model.set(t),this.model.trigger("filtered")}})});