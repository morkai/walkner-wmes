define(["underscore","app/core/View","app/reports/util/formatXAxis","app/qiResults/templates/outgoingQuality/paretoTable"],function(t,e,o,i){"use strict";return e.extend({template:i,initialize:function(){this.listenTo(this.model,"change:"+this.options.property,this.render)},getTemplateData:function(){for(var e=this,i=e.options.property,r=[],a=e.model.get(i)||[],n=e.model.get("groups")||[],s=e.options.maxRows||3,p=0;p<s;++p){var l=a[p];if(!l)break;for(var u={_id:l[0],label:l[0],title:e.options.resolveTitle?e.options.resolveTitle(l[0]):"",data:[],total:l[2]},d=0;d<n.length;++d){var f=t.find(n[d][i],function(t){return t[0]===u._id});f?u.data.push(f[2]):u.data.push(0)}r.push(u)}return{property:i,weeks:n.map(function(t){return o(e,{value:t.key})}),rows:r}}})});