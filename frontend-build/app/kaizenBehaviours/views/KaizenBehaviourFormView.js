define(["underscore","app/i18n","app/user","app/core/views/FormView","app/kaizenBehaviours/templates/form"],function(t,e,a,n,i){"use strict";return n.extend({template:i,events:t.assign({'change [name="_lang"]':function(t){this.toggleLang(t.currentTarget.value)}},n.prototype.events),afterRender:function(){n.prototype.afterRender.call(this),this.options.editMode&&(this.$id("id").prop("readonly",!0),this.$id("name").focus()),this.renderLang(),this.toggleLang(a.lang)},renderLang:function(){var t=this.$id("lang");if(!t.children().length){t.addClass("form-group btn-group").attr("data-toggle","buttons");var a={};this.$(".form-group[data-lang]").each(function(){a[this.dataset.lang]=1});var n="";Object.keys(a).forEach(function(t){n+=' <label class="btn btn-default"><input type="radio" name="_lang" value="'+t+'"> '+e("core","lang:"+t)+"</label>"}),t.html(n)}},toggleLang:function(t){var e=this.$(".form-group[data-lang]");e.addClass("hidden");var a=e.filter('[data-lang="'+t+'"]');a.length||(t=e.first().attr("data-lang"),a=e.filter('[data-lang="'+t+'"]')),a.removeClass("hidden"),this.$id("lang").find("input:checked").length||this.$id("lang").find('input[value="'+t+'"]').click()},serializeForm:function(t){return t.description||(t.description=""),t}})});