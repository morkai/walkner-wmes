define(["app/viewport","app/core/pages/FilteredListPage","app/core/util/pageActions","app/wmes-osh-common/dictionaries","app/wmes-osh-common/templates/list/markAsSeenAction"],function(t,e,i,n,s){"use strict";return e.extend({nlsDomain:"wmes-osh-common",actions:function(t){return[i.jump(this,this.collection,{mode:"id"}),{template:()=>this.renderPartialHtml(s),afterRender:t=>{t.find("a[data-filter]").on("click",this.markAsSeen.bind(this))}},i.add(this.collection,!1),i.export(t,this,this.collection,!1)]},initialize:function(){e.prototype.initialize.apply(this,arguments),n.bind(this)},markAsSeen:function(e){var i=this,n=i.ajax({method:"POST",url:this.collection.genUrl("mark-as-seen"),data:JSON.stringify({filter:e.currentTarget.dataset.filter})});n.fail(function(){t.msg.show({type:"error",time:2500,text:i.t("markAsSeen:failure")})}),n.done(function(e){t.msg.show({type:"success",time:2e3,text:i.t("markAsSeen:success",{count:e.length})})})}})});