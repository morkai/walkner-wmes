define(["app/viewport","app/core/views/FormView","app/wmes-trw-bases/templates/clusterForm"],function(e,t,o){"use strict";return t.extend({template:o,afterRender:function(){t.prototype.afterRender.apply(this,arguments),this.model.id&&this.$id("id").prop("disabled",!0)},onDialogShown:function(){this.model.id?this.$id("label-text").focus():this.$id("id").focus()},serializeToForm:function(){var e=this.model.toJSON();return e.cols=e.rows.length?e.rows[0].length:1,e.rows=e.rows.length||1,e},serializeForm:function(e){return e.label.text||(e.label.text=""),e.top=parseInt(e.top,10)||0,e.left=parseInt(e.left,10)||0,e.rows=parseInt(e.rows,10)||1,e.cols=parseInt(e.cols,10)||1,e},submitRequest:function(t,o){for(var s=this.model.get("rows"),r=[],i=0;i<o.rows;++i){for(var l=s[i]||[],n=[],a=0;a<o.cols;++a)n.push(l[a]||{label:(i+1+a*o.rows).toString(),io:[],endpoints:[]});r.push(n)}delete o.cols,o.rows=r,this.model.set(o),e.closeDialog()}})});