define(["select2","app/viewport","app/core/views/FormView","app/wmes-trw-bases/templates/clusterCellForm"],function(e,t,i,o){"use strict";return i.extend({template:o,afterRender:function(){i.prototype.afterRender.apply(this,arguments),this.$id("io").select2({allowClear:!0,multiple:!0,data:(this.options.io||[]).map(function(e){return{id:e._id,text:e._id+": "+e.name+" "+e.device+":"+e.channel,io:e}}),formatResult:function(t,i,o,n){var r=t.io,a=["<code>"];return e.util.markMatch(r._id,o.term,a,n),a.push("</code>: "),e.util.markMatch(r.name,o.term,a,n),a.push(" ["),e.util.markMatch(r.device+":"+r.channel,o.term,a,n),a.push("]"),a.join("")},formatSelection:function(e,t,i){return i(e.io.name)}})},onDialogShown:function(){this.$id("label").focus()},serializeToForm:function(){var e=this.model.toJSON();return e.io=e.io.join(","),e},serializeForm:function(e){return e.label||(e.label=""),e.io=(e.io||"").split(",").filter(function(e){return!!e}),Array.isArray(e.endpoints)||(e.endpoints=[]),e},submitRequest:function(e,i){this.model.set(i),t.closeDialog()}})});