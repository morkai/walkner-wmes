define(["jquery","app/core/pages/DetailsPage","app/wmes-trw-bases/templates/details"],function(e,t,r){"use strict";return t.extend({baseBreadcrumb:!0,pageClassName:"page-max-flex",detailsTemplate:r,actions:function(){return[{icon:"copy",label:this.t("PAGE_ACTION:copy"),href:"#trw/bases;add?copy="+this.model.id,privileges:"TRW:MANAGE"}].concat(t.prototype.actions.apply(this,arguments))},events:{"mouseenter .trw-base-cluster":function(e){this.showClusterPopover(e.currentTarget.dataset.id)},"mouseleave .trw-base-cluster":function(){this.hideClusterPopover()}},destroy:function(){this.hideClusterPopover()},showClusterPopover:function(t){var r=this;r.hideClusterPopover();var o=r.model.getCluster(t);if(o&&o.image){r.$clusterPopover=r.$('.trw-base-cluster[data-id="'+t+'"]').popover({container:document.body,placement:"top",trigger:"manual",html:!0,content:function(){return'<img src="'+o.image+'" width="'+s.naturalWidth+'" height="'+s.naturalHeight+'">'},template:function(t){return e(t).addClass("trw-base-cluster-popover")}});var s=new Image;s.onload=function(){r.$clusterPopover&&r.$clusterPopover[0].dataset.id===t&&r.$clusterPopover.popover("show")},s.src=o.image}},hideClusterPopover:function(e){this.$clusterPopover&&(e&&this.$clusterPopover[0].dataset.id!==e||(this.$clusterPopover.popover("destroy"),this.$clusterPopover=null))}})});