define(["underscore","../i18n","../broker","../router","../viewport","../user","../core/util/showDeleteFormPage"],function(e,a,s,r,t,i,p){"use strict";var n="i18n!app/nls/wmes-trw-bases",o="app/wmes-trw-bases/Base",l=i.auth("TRW:VIEW"),d=i.auth("TRW:MANAGE");r.map("/trw/bases",l,function(e){t.loadPage(["app/core/pages/FilteredListPage","app/wmes-trw-tests/dictionaries","app/wmes-trw-bases/BaseCollection","app/wmes-trw-bases/views/FilterView",n],function(a,s,r,t){return s.bind(new a({baseBreadcrumb:!0,FilterView:t,collection:new r(null,{rqlQuery:e.rql}),columns:[{id:"tester",className:"is-min"},"name"]}))})}),r.map("/trw/bases/:id",l,function(e){t.loadPage(["app/core/pages/DetailsPage",o,"app/wmes-trw-bases/templates/details",n],function(a,s,r){return new a({baseBreadcrumb:!0,pageClassName:"page-max-flex",model:new s({_id:e.params.id}),detailsTemplate:r,actions:function(){return[{icon:"copy",label:this.t("PAGE_ACTION:copy"),href:"#trw/bases;add?copy="+this.model.id,privileges:"TRW:MANAGE"}].concat(a.prototype.actions.apply(this,arguments))}})})}),r.map("/trw/bases;add",d,function(e){t.loadPage(["app/core/pages/AddFormPage","app/wmes-trw-tests/dictionaries",o,"app/wmes-trw-bases/views/FormView",n],function(r,t,i,p){var n=new i({_id:e.query.copy});return n.once("sync",function(){e.query.copy&&(n.set({_id:void 0,name:a("core","labelCopySuffix",{label:n.get("name")})}),s.publish("router.navigate",{url:"/trw/bases;add",trigger:!1,replace:!0}))}),t.bind(new r({baseBreadcrumb:!0,pageClassName:"page-max-flex",FormView:p,model:n}))})}),r.map("/trw/bases/:id;edit",d,function(e){t.loadPage(["app/core/pages/EditFormPage","app/wmes-trw-tests/dictionaries",o,"app/wmes-trw-bases/views/FormView",n],function(a,s,r,t){return s.bind(new a({baseBreadcrumb:!0,pageClassName:"page-max-flex",FormView:t,model:new r({_id:e.params.id})}))})}),r.map("/trw/bases/:id;delete",d,e.partial(p,o,e,e,{baseBreadcrumb:!0}))});