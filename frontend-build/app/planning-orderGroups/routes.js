define(["underscore","../i18n","../router","../viewport","../user","../time","../core/util/showDeleteFormPage"],function(e,r,n,a,p,o,i){"use strict";var s="i18n!app/nls/planning-orderGroups",t="app/planning-orderGroups/OrderGroup",l=p.auth("PLANNING:VIEW","FN:process-engineer"),d=p.auth("PLANNING:MANAGE","FN:process-engineer");function u(){return p.isAllowedTo("PLANNING:VIEW")?[{href:"#planning/plans",label:this.t("BREADCRUMB:base")}]:[]}n.map("/planning/orderGroups",l,function(e){a.loadPage(["app/core/pages/FilteredListPage","app/planning-orderGroups/OrderGroupCollection","app/planning-orderGroups/views/FilterView","app/planning-orderGroups/views/ListView",s],function(r,n,a,p){return new r({FilterView:a,ListView:p,pageClassName:"page-max-flex",baseBreadcrumb:u,collection:new n(null,{rqlQuery:e.rql}),actions:function(){var e=r.prototype.actions.apply(this,arguments);return e.unshift({icon:"question",href:"#planning/orderGroups;tester",label:this.t("tester:pageAction")}),e}})})}),n.map("/planning/orderGroups;tester",l,function(e){a.loadPage(["app/core/Model","app/planning-orderGroups/pages/TesterPage","css!app/planning-orderGroups/assets/tester",s],function(r,n){return new n({model:new r({date:e.query.date||o.getMoment().format("YYYY-MM-DD"),mrp:e.query.mrp||"TEST",groups:[]})})})}),n.map("/planning/orderGroups/:id",l,function(e){a.loadPage(["app/core/pages/DetailsPage",t,"app/planning-orderGroups/templates/details","css!app/planning-orderGroups/assets/details",s],function(r,n,a){return new r({pageClassName:"page-max-flex",baseBreadcrumb:u,model:new n({_id:e.params.id}),detailsTemplate:a,actions:function(){const e=r.prototype.actions.apply(this,arguments),n=e.findIndex(e=>"edit"===e.id);return-1!==n&&e.splice(n+1,0,{id:"copy",icon:"copy",label:this.t("PAGE:ACTION:copy"),href:`#planning/orderGroups;add?copy=${this.model.id}`}),e}})})}),n.map("/planning/orderGroups;add",d,function(e){a.loadPage(["app/core/pages/AddFormPage",t,"app/planning-orderGroups/views/FormView",s],function(n,a,p){const o=new a({_id:e.query.copy});return o.id&&o.once("sync",()=>{o.set({_id:void 0,name:o.get("name")+" "+r("planning-orderGroups","FORM:copySuffix")})}),new n({pageClassName:"page-max-flex",baseBreadcrumb:u,FormView:p,model:o})})}),n.map("/planning/orderGroups/:id;edit",d,function(e){a.loadPage(["app/core/pages/EditFormPage",t,"app/planning-orderGroups/views/FormView",s],function(r,n,a){return new r({pageClassName:"page-max-flex",baseBreadcrumb:u,FormView:a,model:new n({_id:e.params.id})})})}),n.map("/planning/orderGroups/:id;delete",d,e.partial(i,t,e,e,{baseBreadcrumb:u}))});