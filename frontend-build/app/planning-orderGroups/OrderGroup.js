define(["underscore","app/i18n","app/user","app/core/Model"],function(e,t,n,r){"use strict";return r.extend({urlRoot:"/planning/orderGroups",clientUrlRoot:"#planning/orderGroups",topicPrefix:"planning.orderGroups",privilegePrefix:"PLANNING",nlsDomain:"planning-orderGroups",labelAttribute:"name",defaults:function(){return{active:!0}},serialize:function(){var e=this.toJSON();return e.active=t("core","BOOL:"+e.active),e.target=e.target.map(e=>t(this.nlsDomain,`target:${e}`)),e},serializeRow:function(){var e=this.serialize();return e.mrp=(e.mrp||[]).join("; "),e.target=e.target.join("; "),e},serializeDetails:function(){var t=this.serialize();return t.mrp=(t.mrp||[]).map(function(e){return"<code>"+e+"</code>"}).join(" "),["productInclude","productExclude","bomInclude","bomExclude"].forEach(function(n){t[n]="<ul>"+t[n].map(function(n){return"<li>"+(n=n.map(function(n){var r='<code class="text-mono">'+e.escape(n)+"</code>";return/^[0-9]{12}$/.test(n)&&t.names[n]&&(r+=" <small>"+e.escape(t.names[n])+"</small>"),r})).join("<br> + ")+"</li>"}).join("")+"</ul>"}),t},isNoMatchGroup:function(){return"000000000000000000000000"===this.id},isEmptyGroup:function(){return 0===this.get("productInclude").length&&0===this.get("productExclude").length&&0===this.get("bomInclude").length&&0===this.get("bomExclude").length}},{can:{manage:function(){return n.isAllowedTo("PLANNING:MANAGE","PLANNING:PLANNER","FN:process-engineer")},edit:function(e){return!e.isNoMatchGroup()&&(this.can||this).manage()},delete:function(e){return(this.can||this).edit(e)}}})});