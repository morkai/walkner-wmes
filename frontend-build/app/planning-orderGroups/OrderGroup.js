define(["underscore","app/i18n","app/user","app/core/Model"],function(e,n,t,r){"use strict";return r.extend({urlRoot:"/planning/orderGroups",clientUrlRoot:"#planning/orderGroups",topicPrefix:"planning.orderGroups",privilegePrefix:"PLANNING",nlsDomain:"planning-orderGroups",labelAttribute:"name",defaults:function(){return{active:!0}},serialize:function(){var e=this.toJSON();return e.active=n("core","BOOL:"+e.active),e},serializeRow:function(){var e=this.serialize();return e.mrp=(e.mrp||[]).join("; "),e},serializeDetails:function(){var n=this.serialize();return n.mrp=(n.mrp||[]).map(function(e){return"<code>"+e+"</code>"}).join(" "),["productInclude","productExclude","bomInclude","bomExclude"].forEach(function(t){n[t]="<ul>"+n[t].map(function(t){return"<li>"+(t=t.map(function(t){var r='<code class="text-mono">'+e.escape(t)+"</code>";return/^[0-9]{12}$/.test(t)&&n.names[t]&&(r+=" <small>"+e.escape(n.names[t])+"</small>"),r})).join("<br> + ")+"</li>"}).join("")+"</ul>"}),n},isNoMatchGroup:function(){return"000000000000000000000000"===this.id},isEmptyGroup:function(){return 0===this.get("productInclude").length&&0===this.get("productExclude").length&&0===this.get("bomInclude").length&&0===this.get("bomExclude").length}},{can:{manage:function(){return t.isAllowedTo("PLANNING:MANAGE","PLANNING:PLANNER","FN:process-engineer")},edit:function(e){return!e.isNoMatchGroup()&&(this.can||this).manage()},delete:function(e){return(this.can||this).edit(e)}}})});