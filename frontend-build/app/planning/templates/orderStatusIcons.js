define(["underscore","app/i18n","app/orderStatuses/util/renderOrderStatusLabel"],function(t,s,r){"use strict";var n=["CNF","DLV","TECO"];function e(r,n){return'<span class="planning-mrp-list-property" title="'+t.escape(s("planning",n))+'"><i class="fa '+r+'"></i></span>'}return function(p,a,i){var l=[],o=p.orders.get(a);if(!o)return"";var u=p.getActualOrderData(a),g=o.getKindIcon(),d=o.getSourceIcon(),c=p.sapOrders.get(a),h=p.sapOrders.getPsStatus(a),S=p.sapOrders.getWhStatus(a),y=p.sapOrders.getDrillStatus(a);o.get("ignored")&&l.push(e(o.getIcon("ignored"),"orders:ignored")),g&&l.push(e(g,"orderPriority:"+o.get("kind"))),d&&l.push(e(d,"orders:source:"+o.get("source"))),o.get("urgent")&&"incomplete"!==o.get("source")&&l.push(e(o.getIcon("urgent"),"orders:urgent")),o.isPinned()&&l.push(e(o.getIcon("pinned"),"orders:pinned")),p.sapOrders.isEto(a)&&l.push(e(o.getIcon("eto"),"orders:eto"));var f=u.etoCont?"EK":u.priority;("E"!==f&&"EK"!==f||l.push('<span class="planning-mrp-list-property planning-mrp-list-property-tag" title="'+s("planning","orders:priority",{priority:f})+'" >'+f+"</span>"),c)&&(c.get("tags")||[]).forEach(function(s){l.push('<span class="planning-mrp-list-property planning-mrp-list-property-tag" title="'+t.escape(s.label)+'" >'+t.escape(s._id)+"</span>")});return l.push('<span class="planning-mrp-list-property planning-mrp-list-property-psStatus" title="'+s("planning","orders:psStatus:"+h)+'" data-ps-status="'+h+'"><i class="fa '+o.getIcon("psStatus")+'"></i></span>'),l.push('<span class="planning-mrp-list-property planning-mrp-list-property-drillStatus" title="'+s("planning","orders:drillStatus:"+y)+'" data-drill-status="'+y+'"><i class="fa '+o.getIcon("drillStatus")+'"></i></span>'),l.push('<span class="planning-mrp-list-property planning-mrp-list-property-whStatus" title="'+s("planning","orders:whStatus:"+S)+'" data-wh-status="'+S+'"><i class="fa '+o.getIcon("whStatus")+'"></i></span>'),i&&!1===i.sapStatuses||n.forEach(function(t){-1!==u.statuses.indexOf(t)&&l.push(r(t))}),l.join("")}});