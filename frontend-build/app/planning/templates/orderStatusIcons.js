define(["underscore","app/i18n","app/orderStatuses/util/renderOrderStatusLabel"],function(t,r,s){"use strict";var n=["CNF","DLV","TECO"];function e(s,n){return'<span class="planning-mrp-list-property" title="'+t.escape(r("planning",n))+'"><i class="fa '+s+'"></i></span>'}return function(t,p,a){var i=[],o=t.orders.get(p);if(!o)return"";var u=t.getActualOrderData(p),g=o.getKindIcon(),l=o.getSourceIcon(),d=t.sapOrders.getPsStatus(p),c=t.sapOrders.getWhStatus(p);o.get("ignored")&&i.push(e(o.getIcon("ignored"),"orders:ignored")),g&&i.push(e(g,"orderPriority:"+o.get("kind"))),l&&i.push(e(l,"orders:source:"+o.get("source"))),o.get("urgent")&&"incomplete"!==o.get("source")&&i.push(e(o.getIcon("urgent"),"orders:urgent")),o.isPinned()&&i.push(e(o.getIcon("pinned"),"orders:pinned")),t.sapOrders.isEto(p)&&i.push(e(o.getIcon("eto"),"orders:eto"));var h=u.etoCont?"EK":u.priority;return"E"!==h&&"EK"!==h||i.push('<span class="planning-mrp-list-property planning-mrp-list-property-priority" title="'+r("planning","orders:priority",{priority:h})+'" >'+h+"</span>"),i.push('<span class="planning-mrp-list-property planning-mrp-list-property-psStatus" title="'+r("planning","orders:psStatus:"+d)+'" data-ps-status="'+d+'"><i class="fa '+o.getIcon("psStatus")+'"></i></span>'),i.push('<span class="planning-mrp-list-property planning-mrp-list-property-whStatus" title="'+r("planning","orders:whStatus:"+c)+'" data-wh-status="'+c+'"><i class="fa '+o.getIcon("whStatus")+'"></i></span>'),a&&!1===a.sapStatuses||n.forEach(function(t){-1!==u.statuses.indexOf(t)&&i.push(s(t))}),i.join("")}});