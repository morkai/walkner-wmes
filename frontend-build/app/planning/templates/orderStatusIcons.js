define(["underscore","app/i18n","app/orderStatuses/util/renderOrderStatusLabel"],function(t,s,r){"use strict";var n=["CNF","DLV","TECO"];function e(r,n){return'<span class="planning-mrp-list-property" title="'+t.escape(s("planning",n))+'"><i class="fa '+r+'"></i></span>'}return function(p,a,i){var o=[],u=p.orders.get(a);if(!u)return"";var g=p.getActualOrderData(a),l=u.getKindIcon(),c=u.getSourceIcon(),d=p.sapOrders.get(a),h=p.sapOrders.getPsStatus(a),f=p.sapOrders.getWhStatus(a);u.get("ignored")&&o.push(e(u.getIcon("ignored"),"orders:ignored")),l&&o.push(e(l,"orderPriority:"+u.get("kind"))),c&&o.push(e(c,"orders:source:"+u.get("source"))),u.get("urgent")&&"incomplete"!==u.get("source")&&o.push(e(u.getIcon("urgent"),"orders:urgent")),u.isPinned()&&o.push(e(u.getIcon("pinned"),"orders:pinned")),p.sapOrders.isEto(a)&&o.push(e(u.getIcon("eto"),"orders:eto"));var y=g.etoCont?"EK":g.priority;("E"!==y&&"EK"!==y||o.push('<span class="planning-mrp-list-property planning-mrp-list-property-tag" title="'+s("planning","orders:priority",{priority:y})+'" >'+y+"</span>"),d)&&(d.get("tags")||[]).forEach(function(s){o.push('<span class="planning-mrp-list-property planning-mrp-list-property-tag" title="'+t.escape(s.label)+'" >'+t.escape(s._id)+"</span>")});return o.push('<span class="planning-mrp-list-property planning-mrp-list-property-psStatus" title="'+s("planning","orders:psStatus:"+h)+'" data-ps-status="'+h+'"><i class="fa '+u.getIcon("psStatus")+'"></i></span>'),o.push('<span class="planning-mrp-list-property planning-mrp-list-property-whStatus" title="'+s("planning","orders:whStatus:"+f)+'" data-wh-status="'+f+'"><i class="fa '+u.getIcon("whStatus")+'"></i></span>'),i&&!1===i.sapStatuses||n.forEach(function(t){-1!==g.statuses.indexOf(t)&&o.push(r(t))}),o.join("")}});