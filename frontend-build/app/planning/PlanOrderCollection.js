// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["../core/Collection","./PlanOrder"],function(e,t){"use strict";function r(e,t){if(e.deleted!==t.deleted)return e.deleted?1:-1;var r=e.mrp.localeCompare(t.mrp);return 0!==r?r:e.urgent&&!t.urgent?-1:!e.urgent&&t.urgent?1:e.incomplete&&!t.incomplete?-1:!e.incomplete&&t.incomplete?1:(r=n[e.kind]-n[t.kind],0===r?e._id.localeCompare(t._id):r)}var n={unclassified:0,small:1,easy:2,hard:3};return e.extend({model:t,initialize:function(e,t){this.plan=t&&t.plan},comparator:function(e,t){return r(e.attributes,t.attributes)},getGroupedByMrp:function(){var e={};return this.forEach(function(t){var r=t.get("mrp");e[r]||(e[r]=[]),e[r].push(t)}),e}},{compare:r})});