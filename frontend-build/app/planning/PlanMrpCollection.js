// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["../core/Collection","./PlanMrp"],function(e,t){"use strict";return e.extend({model:t,initialize:function(e,t){this.plan=t&&t.plan},reset:function(t,n){return t||(t=this.createModelsFromSettings()),e.prototype.reset.call(this,t,n)},createModelsFromSettings:function(){var e=this.plan,n=e.displayOptions.get("mrps");n.length||(n=e.settings.getDefinedMrpIds());var r=e.orders.getGroupedByMrp(),i=e.lines.getGroupedByMrp();return n.map(function(e){return new t({_id:e,orders:r[e]||[],lines:i[e]||[]})})}})});