// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["underscore","app/time","app/core/views/FilterView","app/planning/templates/listFilter"],function(e,t,a,n){"use strict";return a.extend({template:n,events:e.assign({"change #-date":"changeFilter"},a.prototype.events),defaultFormData:function(){return{date:""}},termToForm:{_id:function(e,a,n){"ge"===a.name?n.date=t.utc.getMoment(a.args[1]).add(3,"days").format("YYYY-MM-DD"):"le"===a.name&&(n.date=t.utc.getMoment(a.args[1]).subtract(3,"days").format("YYYY-MM-DD"))}},isValid:function(){return t.utc.getMoment(this.$id("date").val(),"YYYY-MM-DD").isValid()},serializeFormToQuery:function(e){var a=t.utc.getMoment(this.$id("date").val(),"YYYY-MM-DD"),n=a.clone().subtract(3,"days").valueOf(),i=a.clone().add(3,"days").valueOf();e.push({name:"ge",args:["_id",n]},{name:"le",args:["_id",i]})}})});