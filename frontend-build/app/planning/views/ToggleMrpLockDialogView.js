define(["app/user","app/viewport","app/core/views/DialogView","app/planning/templates/toggleLockDialog"],function(e,i,o,a){"use strict";return o.extend({template:a,nlsDomain:"planning",afterRender:function(){o.prototype.initialize.apply(this,arguments),this.model.locked&&this.checkMrpLock()},checkMrpLock:function(){var o=this;i.msg.loading();var a=o.ajax({method:"POST",url:"/old/wh;check-mrp-lock",data:JSON.stringify({date:o.model.date,mrp:o.model.mrp})});a.fail(function(){i.msg.loadingFailed()}),a.done(function(a){i.msg.loaded(),!1!==a.locked?(o.$id("warning").removeClass("hidden"),e.isAllowedTo("SUPER")&&o.$id("yes").prop("disabled",!1).focus()):o.$id("yes").prop("disabled",!1).focus()})}})});