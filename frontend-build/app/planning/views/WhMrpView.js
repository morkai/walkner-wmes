// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["app/core/View","./PlanMrpToolbarView","./PlanMrpLineOrdersListView","app/planning/templates/whMrp"],function(e,n,i,t){"use strict";return e.extend({template:t,events:{contextmenu:function(){return!1}},initialize:function(){var e=this;e.listenTo(e.plan,"change:loading",this.onLoadingChanged),e.setView("#-toolbar",new n({delayReasons:e.delayReasons,plan:e.plan,mrp:e.mrp,stats:!1})),e.setView("#-orders",new i({plan:e.plan,mrp:e.mrp,mode:"wh"}))},serialize:function(){return{idPrefix:this.idPrefix,mrp:{_id:this.mrp.id,name:this.mrp.id,description:this.mrp.get("description")}}},beforeRender:function(){clearTimeout(this.timers.render)},onLoadingChanged:function(){this.plan.isAnythingLoading()||(this.timers.render=setTimeout(this.render.bind(this),1))}})});