define(["../core/Collection","./PlanWorkingLine"],function(t,e){"use strict";return t.extend({model:e,initialize:function(t,e){this.plan=e&&e.plan},url:function(){return"/planning/workingLines/"+this.plan.id},getNextStartTime:function(t){var e=t.get("shiftData"),i=this.get(t.id);return e.map(function(t,n){if(0===n)return 0;for(var r=n+1;r<=3;++r)if(e[r].startAt)return Date.parse(e[r].startAt);return i?i.get("nextAt"):0})},getPrevFinishTime:function(t){var e=t.get("shiftData"),i=this.get(t.id);return e.map(function(t,n){if(0===n)return 0;for(var r=n-1;r>=1;--r)if(e[r].finishAt)return Date.parse(e[r].finishAt);return i?i.get("prevAt"):0})},getWorkingTimes:function(t){return{prevAt:this.getPrevFinishTime(t),nextAt:this.getNextStartTime(t)}}})});