define(["../core/Collection","./PlanWorkingLine"],function(t,n){"use strict";return t.extend({model:n,initialize:function(t,n){this.plan=n&&n.plan},url:function(){return"/planning/workingLines/"+this.plan.id},getNextStartTime:function(t){var n=t?t.get("shiftData"):null;if(!n)return[0,0,0,0];var e=this.get(t.id);return n.map(function(t,i){if(0===i)return 0;for(var r=i+1;r<=3;++r)if(n[r].startAt)return Date.parse(n[r].startAt);return e?e.get("nextAt"):0})},getPrevFinishTime:function(t){var n=t?t.get("shiftData"):null;if(!n)return[0,0,0,0];var e=this.get(t.id);return n.map(function(t,i){if(0===i)return 0;for(var r=i-1;r>=1;--r)if(n[r].finishAt)return Date.parse(n[r].finishAt);return e?e.get("prevAt"):0})},getWorkingTimes:function(t){return{prevAt:this.getPrevFinishTime(t),nextAt:this.getNextStartTime(t)}}})});