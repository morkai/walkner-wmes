// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["underscore","../i18n","../time","../core/Collection","./WhOrderStatus"],function(t,e,i,n,r){"use strict";function o(t){var e=t._id;return t.orderNo=e.orderNo,t.groupNo=e.groupNo,t.line=e.line,t._id=t.orderNo+":"+t.groupNo+":"+t.line,t}return n.extend({model:r,paginate:!1,initialize:function(t,e){this.date=e.date},url:function(){return"/planning/whOrderStatuses?_id.date="+i.utc.getMoment(this.date,"YYYY-MM-DD").valueOf()},parse:function(t){return(t.collection||[]).map(o)},update:function(t){if(i.utc.format(t._id.date,"YYYY-MM-DD")===this.date){t=o(t);var e=this.get(t._id);e?e.set(t):this.add(t)}},serialize:function(t){var i=this.get(t);return i?i.serialize():{status:0,label:e("planning","wh:status:0",{qtySent:0})}}})});