define(["jquery","../user","../settings/SettingCollection","./PlanningSetting"],function(t,e,n,r){"use strict";return n.extend({model:r,topicSuffix:"planning.**",sync:function(t,e,r){return r||(r={}),r.headers||(r.headers={}),r.headers["X-Global"]="1",n.prototype.sync.call(this,t,e,r)},parse:function(t){return t.totalCount||t.collection?t.collection||[]:t.global?Object.keys(t.global).map(function(e){return{_id:"planning."+e,value:t.global[e]}}):[]},getValue:function(t){var e=this.get("planning."+t);return e?e.getValue():null},prepareValue:function(t,e){return/group(Duration|ExtraItems)/.test(t)?(e=Math.round(parseInt(e,10)),isNaN(e)||e<0?0:e):/sortByLines/.test(t)?!!e:/edMrps/.test(t)?e.split(",").filter(function(t){return!!t.length}):void 0},getWhGroupDuration:function(){return Math.min(24,Math.max(1,this.getValue("wh.groupDuration")||4))},getWhGroupExtraItems:function(){return this.getValue("wh.groupExtraItems")||0}})});