define(["jquery","../user","../settings/SettingCollection","./PlanningSetting"],function(t,n,e,r){"use strict";return e.extend({model:r,topicSuffix:"planning.**",sync:function(t,n,r){return r||(r={}),r.headers||(r.headers={}),r.headers["X-Global"]="1",e.prototype.sync.call(this,t,n,r)},parse:function(t){return t.totalCount||t.collection?t.collection||[]:t.global?Object.keys(t.global).map(function(n){return{_id:"planning."+n,value:t.global[n]}}):[]},getValue:function(t){var n=this.get("planning."+t);return n?n.getValue():null},prepareValue:function(t,n){return/group(Duration|ExtraItems)/.test(t)?(n=Math.round(parseInt(n,10)),isNaN(n)||n<0?0:n):/sortByLines/.test(t)?!!n:/ignoredMrps/.test(t)?n.split(",").filter(function(t){return!!t.length}):void 0},getWhGroupDuration:function(){return Math.min(24,Math.max(1,this.getValue("wh.groupDuration")||4))},getWhGroupExtraItems:function(){return this.getValue("wh.groupExtraItems")||0}})});