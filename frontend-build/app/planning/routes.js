// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["../router","../viewport","../user"],function(n,a,e){"use strict";var l="i18n!app/nls/planning",p=e.auth("HOURLY_PLANS:VIEW","PROD_DATA:VIEW");n.map("/planning/settings/:id",p,function(n){a.loadPage(["app/planning/PlanSettings","app/planning/pages/PlanSettingsPage",l],function(a,e){return new e({model:new a({_id:n.params.id})})})}),n.map("/planning/changes",p,function(n){a.loadPage(["app/planning/PlanChangesCollection","app/planning/pages/PlanChangesPage",l],function(a,e){return new e({collection:new a(null,{rqlQuery:n.rql,paginate:!1})})})}),n.map("/planning/plans",p,function(n){a.loadPage(["app/planning/PlanSettingsCollection","app/planning/pages/PlanListPage",l],function(a,e){return new e({collection:new a(null,{rqlQuery:n.rql,paginate:!1})})})}),n.map("/planning/plans/:id",p,function(n){a.loadPage(["app/planning/Plan","app/planning/pages/PlanPage",l],function(a,e){return new e({date:n.params.id,mrps:void 0===n.query.mrps?null:n.query.mrps.split(/[^A-Z0-9]+/).filter(function(n){return n.length>0})})})})});