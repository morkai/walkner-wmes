// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["underscore","../time","../core/Model"],function(e,t,r){"use strict";return r.extend({defaults:function(){return{minDate:"2017-01-01",maxDate:t.utc.getMoment().startOf("day").add(1,"days").format("YYYY-MM-DD"),mrps:[],exclude:!1,printOrderTimes:!1,useLatestOrderData:!0,useDarkerTheme:!1,wrapLists:!0,lineOrdersList:!1}},initialize:function(e,t){this.storageKey=t&&t.storageKey||"PLANNING:DISPLAY_OPTIONS",this.on("change",this.saveToLocalStorage)},saveToLocalStorage:function(){localStorage.setItem(this.storageKey,JSON.stringify(this.attributes))},readFromLocalStorage:function(){this.set(JSON.parse(localStorage.getItem(this.storageKey)||"{}"))},isOrderTimePrinted:function(){return this.attributes.printOrderTimes},togglePrintOrderTime:function(){this.set("printOrderTimes",!this.attributes.printOrderTimes)},isLatestOrderDataUsed:function(){return!0},toggleLatestOrderDataUse:function(){this.set("useLatestOrderData",!this.attributes.useLatestOrderData)},isDarkerThemeUsed:function(){return this.attributes.useDarkerTheme},toggleDarkerThemeUse:function(){this.set("useDarkerTheme",!this.attributes.useDarkerTheme)},isListWrappingEnabled:function(){return!0},toggleListWrapping:function(){this.set("wrapLists",!this.attributes.wrapLists)},isLineOrdersListEnabled:function(){return this.attributes.lineOrdersList},toggleLineOrdersList:function(){this.set("lineOrdersList",!this.attributes.lineOrdersList)}},{fromLocalStorage:function(t,r){var s=new this(null,r);return s.readFromLocalStorage(),t.exclude&&e.isEmpty(s.get("mrps"))&&!s.get("exclude")&&(t.mrps="KS0,KS00,KS1,KS2,KS3,KS4,KS5,KS6,KS7,KS9,KSH,KSA,KSB,KSC,KSD".split(",")),Array.isArray(t.mrps)&&s.set("mrps",t.mrps),"boolean"==typeof t.exclude&&s.set("exclude",t.exclude),s}})});