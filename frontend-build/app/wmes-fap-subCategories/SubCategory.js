define(["require","../i18n","../core/Model","../data/orgUnits","../data/prodFunctions","app/core/templates/userInfo"],function(e,t,r,i,n,a){"use strict";return r.extend({urlRoot:"/fap/subCategories",clientUrlRoot:"#fap/subCategories",topicPrefix:"fap.subCategories",privilegePrefix:"FAP",nlsDomain:"wmes-fap-subCategories",labelAttribute:"name",defaults:{active:!0,planners:!1},serialize:function(){var r=this.toJSON(),o=e("app/wmes-fap-entries/dictionaries"),s=o&&o.subCategories.get(r.etoCategory),u=o&&o.categories.get(r.parent);return r.active=t("core","BOOL:"+r.active),r.planners=t("core","BOOL:"+r.planners),u&&(r.parent=u.getLabel(),r.reqFields&&r.reqFields.enabled||(r.reqFields=u.get("reqFields")||{})),r.etoCategory=s?s.getLabel():""===r.etoCategory?t("core","BOOL:true"):null===r.etoCategory?t("core","BOOL:false"):r.etoCategory,r.users=(r.users||[]).map(function(e){return a({userInfo:e})}),r.notifications=(r.notifications||[]).map(function(e){return{subdivisions:e.subdivisions.map(function(e){var t=i.getByTypeAndId("subdivision",e);if(!t)return e;var r=i.getParent(t);return(r?r.getLabel():"?")+" \\ "+t.getLabel()}),prodFunctions:e.prodFunctions.map(function(e){var t=n.get(e);return t?t.getLabel():e})}}),r}})});