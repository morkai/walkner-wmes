define(["underscore","app/core/pages/EditFormPage","app/core/util/bindLoadingMessage","app/opinionSurveys/dictionaries","app/opinionSurveys/OpinionSurveyCollection","app/opinionSurveyOmrResults/OpinionSurveyOmrResultCollection","../views/OpinionSurveyResponseFormView"],function(e,t,o,i,s,n,r){"use strict";return t.extend({baseBreadcrumb:!0,FormView:r,defineModels:function(){t.prototype.defineModels.apply(this,arguments),this.model.omrResults=o(new n(null,{rqlQuery:"select(pageNumber)&sort(pageNumber)&response="+this.model.id}),this),this.model.surveys=o(new s(null,{rqlQuery:"sort(-startDate)"}),this),this.listenToOnce(this.model.surveys,"reset",function(){this.model.surveys.buildCacheMaps()})},getFormViewOptions:function(){return e.extend(t.prototype.getFormViewOptions.call(this),{fixing:this.options.fixing})},load:function(e){return e(this.model.fetch(),this.model.omrResults.fetch({reset:!0}),this.model.surveys.fetch({reset:!0}),i.load())},destroy:function(){t.prototype.destroy.call(this),i.unload()},afterRender:function(){t.prototype.afterRender.call(this),i.load()}})});