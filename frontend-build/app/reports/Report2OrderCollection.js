define(["underscore","app/orders/OrderCollection"],function(r,e){"use strict";return e.extend({nlsDomain:"reports",url:"/reports/2/orders",rqlQuery:function(r){return r.Query.fromObject({fields:{name:1,mrp:1,qty:1,statusesSetAt:1,scheduledStartDate:1,delayReason:1,changes:1}})},initialize:function(r,e){if(!e.query)throw new Error("query option is required!");this.query=e.query,this.displayOptions=e.displayOptions,this.rqlQuery.limit=+this.query.get("limit"),this.rqlQuery.skip=+this.query.get("skip")},sync:function(){var r=this.rqlQuery.selector,t=this.query,i=t.get("orderNo");if(i.length>=6)return r.args=[a("orderNo",i)],e.prototype.sync.apply(this,arguments);r.args=[a("from",+t.get("from")),a("to",+t.get("to"))];var s=t.get("orgUnitType"),o=t.get("orgUnitId");s&&o&&r.args.push(a("orgUnitType",s),a("orgUnitId",o));var n=t.get("statuses");r.args.push(a("filter",t.get("filter"))),n.length&&r.args.push(a("statuses",n));var u=t.get("hour");return u&&(r.args.push(a("hourMode",t.get("hourMode"))),r.args.push(a("hour",+u))),e.prototype.sync.apply(this,arguments);function a(r,e){return{name:"eq",args:[r,e]}}},genPaginationUrlTemplate:function(){return"#reports/2?"+this.query.serializeToString().replace(/limit=[0-9]+/,"limit=${limit}").replace(/skip=[0-9]+/,"skip=${skip}")+"#"+(this.displayOptions?this.displayOptions.serializeToString():"")}})});