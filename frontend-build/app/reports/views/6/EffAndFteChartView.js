define(["app/i18n","app/highcharts","./ChartView"],function(e,t,i){"use strict";return i.extend({className:"reports-6-effAndFte",kind:"effAndFte",createChart:function(){var i=this.serializeChartData();this.chart=new t.Chart({chart:{renderTo:this.el},exporting:{filename:this.getExportFilename()},title:{text:this.getChartTitle()},noData:{},xAxis:{type:"datetime"},yAxis:[{id:"fteAxis",title:!1,min:0},{id:"effAxis",title:!1,opposite:!0,showEmpty:!0,min:0,gridLineWidth:0}],tooltip:{shared:!0,headerFormatter:this.formatTooltipHeader.bind(this),valueDecimals:1},legend:{enabled:!1},plotOptions:{line:{lineWidth:2,states:{hover:{lineWidth:2}},marker:this.getMarkerStyles(i.fte.length)}},series:[{id:"fte",name:this.getFteSeriesName(),color:this.settings&&this.settings.getColor("warehouse")||"#eeee00",borderWidth:0,type:"column",data:i.fte,yAxis:0},{id:"eff",name:e("reports","wh:eff"),color:this.settings&&this.settings.getColor("efficiency")||"#eeee00",type:"line",data:i.eff,yAxis:1,tooltip:{valueSuffix:"TO/FTE"}}]})},updateChart:function(){var e=this.serializeChartData(),t=this.getMarkerStyles(e.fte.length);this.chart.series.forEach(function(i){var a=e[i.options.id],r={marker:t,visible:a&&a.length};i.update(r,!1),i.setData(a,!1)}),this.chart.redraw(!1)},serializeChartData:function(){return this.model.getEffAndFteData(this.options.type)},getFteSeriesName:function(){var t="",i=this.model.query.get("interval");return"day"!==i&&"shift"!==i&&(t=":avg"),e("reports","wh:fte"+t)},onIntervalChange:function(){this.chart&&this.chart.series[0].update({name:this.getFteSeriesName()},!1)}})});