// Copyright (c) 2014, ≈Åukasz Walukiewicz <lukasz@walukiewicz.eu>. Some Rights Reserved.
// Licensed under CC BY-NC-SA 4.0 <http://creativecommons.org/licenses/by-nc-sa/4.0/>.
// Part of the walkner-wmes project <http://lukasz.walukiewicz.eu/p/walkner-wmes>

define(["app/i18n","app/highcharts","app/core/View","app/reports/templates/report8TimesTable"],function(e,i,r,t){"use strict";return r.extend({template:t,events:{},initialize:function(){this.listenTo(this.model,"change",this.render)},destroy:function(){},serialize:function(){return{idPrefix:this.idPrefix,props:this.serializeProps()}},serializeProp:function(e,i,r,t,n){var a={plan:"",real:"",unit:n,className:""},s=i[r];return Array.isArray(s)?(a.plan=this.formatValue(s[0],t),a.real=this.formatValue(s[1],t)):a["heijunkaTimeForLine"===r?"plan":"real"]=this.formatValue(s,t),e[r]=a,a},formatValue:function(e,r){return i.numberFormat(e,r)},serializeProps:function(){var i=this.model.query.get("unit"),r=e("reports","8:times:unit:"+i),t="h"===i?2:0,n=this.model.get("summary"),a={};return["timeAvailablePerShift","routingTimeForLine","routingTimeForLabour","heijunkaTimeForLine","breaks","fap0","startup","shutdown","meetings","sixS","tpm","trainings","coTime","downtime"].forEach(function(e){this.serializeProp(a,n,e,t,r)},this),this.serializeProp(a,n,"plan",0,e("reports","8:times:unit:pcs")),this.serializeProp(a,n,"efficiency",0,e("reports","8:times:unit:%")),a},beforeRender:function(){},afterRender:function(){}})});