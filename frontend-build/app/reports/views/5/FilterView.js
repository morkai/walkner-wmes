define(["underscore","app/time","app/core/views/FilterView","app/core/util/forms/dateTimeRange","app/reports/templates/5/filter"],function(e,t,r,n,o){"use strict";return r.extend({template:o,events:e.assign({"click a[data-date-time-range]":n.handleRangeEvent,"click #-showDisplayOptions":function(){this.trigger("showDisplayOptions")}},r.prototype.events),afterRender:function(){r.prototype.afterRender.call(this),this.toggleButtonGroup("interval"),this.toggleButtonGroup("weekends")},serializeQueryToForm:function(){var e=this.model;return{interval:e.get("interval"),weekends:e.get("weekends")?"1":"0","from-date":t.format(+e.get("from"),"YYYY-MM-DD"),"to-date":t.format(+e.get("to"),"YYYY-MM-DD")}},changeFilter:function(){var e={rnd:Math.random(),from:null,to:null,interval:this.getButtonGroupValue("interval"),weekends:this.getButtonGroupValue("weekends")},r=n.serialize(this),o=r.from||this.getFromTimeByInterval(e.interval),a=r.to||t.getMoment();e.from=o.valueOf(),e.to=a.valueOf(),this.$id("from-date").val(o.format("YYYY-MM-DD")),this.$id("to-date").val(a.format("YYYY-MM-DD")),this.model.set(e)},getFromTimeByInterval:function(e){var r=t.getMoment().minutes(0).seconds(0).milliseconds(0);switch(e){case"month":return r.date(1).hours(6).valueOf();case"week":return r.day(1).hours(6).valueOf();default:return r.hour(6).valueOf()}}})});