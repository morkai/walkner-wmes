define(["app/i18n","app/time","app/core/View","app/pressWorksheets/PressWorksheet","app/pressWorksheets/templates/ordersList","app/reports/templates/4/notesList"],function(e,s,t,r,o,i){"use strict";return t.extend({template:i,className:"reports-4-notesList",events:{"click #-load":function(){var e=this,s=this.$id("load").prop("disabled",!0),t=s.find(".fa");t.addClass("fa-spin");var o=this.model.get("notes"),i=this.ajax({type:"POST",url:"/reports/4;notes?"+this.model.query.serializeToString(),data:JSON.stringify({worksheets:o.worksheets,orders:o.orders})});i.fail(function(){t.removeClass("fa-spin"),s.prop("disabled",!1)}),i.done(function(s){e.orders=r.serializeOrders(s.collection),e.render()})},"click .panel-heading":"togglePanel","mouseover tbody > tr":function(e){this.toggleHovered(e.currentTarget,!0)},"mouseout tbody > tr":function(e){this.toggleHovered(e.currentTarget,!1)}},initialize:function(){this.orders=[],this.listenTo(this.model,"request",function(){this.orders=[]}),this.listenTo(this.model,"request error change:notes",this.render)},getTemplateData:function(){var e=this.model.get("notes");return{orders:this.orders,notes:e.count,worksheets:e.worksheets.length,renderOrderList:o}},toggleHovered:function(e,s){var t=this.$(e),r=t.hasClass("pressWorksheets-orders-notes")?t.prev():t.next(".pressWorksheets-orders-notes");t.toggleClass("is-hovered",s),r.toggleClass("is-hovered",s)},togglePanel:function(){var e=this.$id("toggle").find(".fa"),s=this.$id("table");s.stop(!0),e.hasClass("fa-chevron-up")?(e.removeClass("fa-chevron-up").addClass("fa-chevron-down"),s.slideUp("fast")):(e.removeClass("fa-chevron-down").addClass("fa-chevron-up"),s.slideDown("fast"))}})});