// Copyright (c) 2014, ≈Åukasz Walukiewicz <lukasz@walukiewicz.eu>. Some Rights Reserved.
// Licensed under CC BY-NC-SA 4.0 <http://creativecommons.org/licenses/by-nc-sa/4.0/>.
// Part of the walkner-wmes project <http://lukasz.walukiewicz.eu/p/walkner-wmes>

define(["app/time"],function(e){return function(a,r){var t,s=e.getMoment().minutes(0).seconds(0).milliseconds(0),c="day",o=s.hours();switch(r&&s.hours(6),a){case"currentYear":s.month(0).date(1),t=s.clone().add("years",1),c="year";break;case"prevYear":s.month(0).date(1).subtract("years",1),t=s.clone().add("years",1),c="year";break;case"currentMonth":s.date(1),t=s.clone().add("months",1);break;case"prevMonth":s.date(1).subtract("months",1),t=s.clone().add("months",1);break;case"currentWeek":s.weekday(0),t=s.clone().add("days",7);break;case"prevWeek":s.weekday(0).subtract("days",7),t=s.clone().add("days",7);break;case"today":t=s.clone().add("days",1),r&&(c="shift");break;case"yesterday":t=s.clone(),s.subtract("days",1),r&&(c="shift");break;case"currentShift":case"prevShift":o>=6&&14>o?s.hours(6):o>=14&&22>o?s.hours(14):(s.hours(22),6>o&&s.subtract("days",1)),t=s.clone().add("hours",8),c="hour","prevShift"===a&&(s.subtract("hours",8),t.subtract("hours",8))}return{fromMoment:s,toMoment:t,interval:c}}});