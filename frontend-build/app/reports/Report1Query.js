define(["underscore","../time","../core/Model"],function(e,t,n){return n.extend({defaults:{from:null,to:null,interval:"hour",subdivisionType:null},serializeToObject:function(e,t){var n={subdivisionType:this.get("subdivisionType")||void 0,interval:this.get("interval"),from:this.get("from"),to:this.get("to")};if(!n.from||!n.to){var r=this.getFirstShiftMoment();n.from=r.toISOString(),n.to=r.add("days",1).toISOString()}return e&&t&&(n.orgUnitType=e,n.orgUnit=t.id),n},serializeToString:function(){var e="";return this.attributes.interval&&(e+="&interval="+this.attributes.interval),this.attributes.subdivisionType&&(e+="&subdivisionType="+this.attributes.subdivisionType),this.attributes.from&&this.attributes.to&&(e+="&from="+encodeURIComponent(this.attributes.from),e+="&to="+encodeURIComponent(this.attributes.to)),e.substr(1)},getFirstShiftMoment:function(){var e=t.getServerMoment();return e.hours()>=0&&e.hours()<6&&e.subtract("days",1),e.hours(6).minutes(0).seconds(0).milliseconds(0)}})});