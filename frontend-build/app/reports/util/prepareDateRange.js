// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["app/time"],function(e){"use strict";return function(a,t){var r,s="string"==typeof a?a:a.getAttribute("data-range"),c=e.getMoment().minutes(0).seconds(0).milliseconds(0),d="day",n=c.hours();switch(t&&c.hours(6),s){case"currentYear":c.month(0).date(1),r=c.clone().add(1,"years"),d="year";break;case"prevYear":c.month(0).date(1).subtract(1,"years"),r=c.clone().add(1,"years"),d="year";break;case"currentQuarter":c.startOf("quarter"),r=c.clone().add(1,"quarter"),d="month";break;case"q1":case"q2":case"q3":case"q4":c.quarter(+s.substr(1)).startOf("quarter"),r=c.clone().add(3,"months"),d="month";break;case"currentMonth":c.date(1),r=c.clone().add(1,"months");break;case"prevMonth":c.date(1).subtract(1,"months"),r=c.clone().add(1,"months");break;case"currentWeek":c.weekday(0),r=c.clone().add(7,"days");break;case"prevWeek":c.weekday(0).subtract(7,"days"),r=c.clone().add(7,"days");break;case"lastTwoWeeks":c.weekday(0).subtract(14,"days"),r=c.clone().add(14,"days");break;case"today":r=c.clone().add(1,"days"),t&&(d="shift");break;case"yesterday":r=c.clone(),c.subtract(1,"days"),t&&(d="shift");break;case"currentShift":case"prevShift":n>=6&&n<14?c.hours(6):n>=14&&n<22?c.hours(14):(c.hours(22),n<6&&c.subtract(1,"days")),r=c.clone().add(8,"hours"),d="hour","prevShift"===s&&(c.subtract(8,"hours"),r.subtract(8,"hours"))}if(a.getAttribute){var o=a.getAttribute("data-interval");o&&(d=o)}return{fromMoment:c,toMoment:r,interval:d}}});