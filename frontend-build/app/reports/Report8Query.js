// Copyright (c) 2014, ≈Åukasz Walukiewicz <lukasz@walukiewicz.eu>. Some Rights Reserved.
// Licensed under CC BY-NC-SA 4.0 <http://creativecommons.org/licenses/by-nc-sa/4.0/>.
// Part of the walkner-wmes project <http://lukasz.walukiewicz.eu/p/walkner-wmes>

define(["underscore","../time","../user","../core/Model"],function(t,r,e,i){"use strict";var n={days:!0,shifts:!0,divisions:!0,subdivisionTypes:!0,prodLines:!0},s={fap0:6,startup:3,shutdown:4,meetings:5,sixS:6,tpm:7,trainings:8,breaks:30,coTime:9,downtime:3,unplanned:0};return i.extend({defaults:function(){var e=r.getMoment().startOf("day"),i=e.valueOf(),n={from:e.subtract(7,"days").valueOf(),to:i,interval:"day",unit:"m",days:[],shifts:[],divisions:[],subdivisionTypes:[],prodLines:[]};return t.extend(n,s)},serializeToObject:function(){var r=this.toJSON();return t.forEach(r,function(e,i){t.isArray(e)&&(r[i]=e.join(","))}),r},serializeToString:function(){var r="";return t.forEach(this.attributes,function(t,e){r+="&"+e+"="+t}),r.substr(1)}},{NUMERIC_PROPS:s,prepareAttrsFromQuery:function(r){var e={};return t.forEach(r,function(t,r){n[r]?t=t.split(","):/^[0-9]+$/.test(t)&&(t=parseInt(t,10)),e[r]=t}),e},fromQuery:function(t,r){return new this(this.prepareAttrsFromQuery(t),r)}})});