define(["underscore","../time","../core/Model","../data/orgUnits","./Report5"],function(e,t,n,r,i){"use strict";return n.extend({defaults:function(){var e=t.getMoment().hours(0).minutes(0).seconds(0).milliseconds(0);return{orgUnitType:null,orgUnitId:null,to:e.valueOf(),from:e.subtract(1,"days").valueOf(),interval:"shift",weekends:!0}},reset:function(t){this.set(e.defaults(t,this.defaults()),{reset:!0})},createReports:function(e,t,n){var o=[],s=this.get("orgUnitType"),g=r.getByTypeAndId(s,this.get("orgUnitId"));e||(e=new i({orgUnitType:this.get("orgUnitType"),orgUnit:g},n)),o.push(e);var u=r.getChildType(s);return(g?r.getChildren(g).sort(function(e,t){return e.getLabel().localeCompare(t.getLabel(),void 0,{numeric:!0,ignorePunctuation:!0})}):r.getAllDivisions().filter(function(e){return"other"!==e.get("type")}).sort(function(e,t){var n=e.get("type");return n===t.get("type")?e.id.localeCompare(t.id,void 0,{numeric:!0,ignorePunctuation:!0}):"prod"===n?-1:1})).forEach(function(e){t&&e===t.get("orgUnit")?o.push(t):o.push(new i({orgUnitType:u,orgUnit:e},n))}),o},serializeToObject:function(e,t){var n={interval:this.get("interval"),from:this.get("from"),to:this.get("to"),weekends:this.get("weekends")};return e&&t&&(n.orgUnitType=e,n.orgUnitId=t.id),n},serializeToString:function(e,t){var n="",r=this.attributes;return r.interval&&(n+="&interval="+r.interval),r.weekends&&(n+="&weekends=1"),r.from&&r.to&&(n+="&from="+r.from,n+="&to="+r.to),2===arguments.length&&void 0!==e?e&&(n+="&orgUnitType="+e,n+="&orgUnitId="+encodeURIComponent(t)):r.orgUnitType&&(n+="&orgUnitType="+r.orgUnitType,n+="&orgUnitId="+encodeURIComponent(r.orgUnitId)),n.substr(1)}})});