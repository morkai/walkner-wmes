// Part of <http://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["./DrillingReportPage","../Report1Query","../Report1DisplayOptions","../views/1/HeaderView","../views/1/FilterView","../views/1/DisplayOptionsView","../views/1/ChartsView"],function(e,t,i,s,r,n,o){"use strict";return e.extend({rootBreadcrumbKey:"BREADCRUMBS:1",pageId:"report1",createQuery:function(){return new t(this.options.query)},createDisplayOptions:function(){var e={settings:this.settings};return"string"==typeof this.options.displayOptions?i.fromString(this.options.displayOptions,e):new i(this.options.displayOptions,e)},createHeaderView:function(){return new s({model:this.query,displayOptions:this.displayOptions})},createFilterView:function(){return new r({model:this.query})},createDisplayOptionsView:function(){return new n({model:this.displayOptions})},createChartsView:function(e,t){return new o({model:e,settings:this.settings,displayOptions:this.displayOptions,skipRenderCharts:!!t})},afterRender:function(){e.prototype.afterRender.call(this),this.scheduleAutoRefresh()},refresh:function(){e.prototype.refresh.call(this),this.scheduleAutoRefresh()},scheduleAutoRefresh:function(){clearTimeout(this.timers.autoRefresh),this.query.isAutoMode()&&(this.timers.autoRefresh=setTimeout(this.refresh.bind(this),6e5))}})});