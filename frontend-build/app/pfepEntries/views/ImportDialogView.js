define(["app/viewport","app/core/View","app/pfepEntries/templates/importDialog"],function(t,e,n){"use strict";return e.extend({template:n,events:{submit:"upload"},nlsDomain:"pfepEntries",getTemplateData:function(){return{}},onDialogShown:function(t){this.closeDialog=t.closeDialog.bind(t)},closeDialog:function(){},upload:function(e){e.preventDefault();var n=this,o=n.$('[type="submit"]').attr("disabled",!0),a=t.msg.show({type:"warning",text:n.t("core","MSG:IMPORTING")}),i=n.ajax({type:"POST",url:"/pfep/entries;import",data:new FormData(n.el),processData:!1,contentType:!1});i.always(function(){t.msg.hide(a)}),i.done(function(){n.closeDialog()}),i.fail(function(){o.attr("disabled",!1),t.msg.show({type:"error",time:2500,text:n.t("core","MSG:IMPORTING_FAILURE")})})}})});