define(["underscore","app/time","app/core/views/FilterView","app/core/util/idAndLabel","app/core/util/forms/dateTimeRange","app/users/util/setUpUserSelect2","app/pfepEntries/templates/filter"],function(e,t,r,i,a,n,s){"use strict";return r.extend({filterList:["nc12","packType","vendor","creator","limit"],filterMap:{},template:s,events:e.assign({"click a[data-date-time-range]":a.handleRangeEvent,"mouseup #-result > .btn":function(e){var t=e.currentTarget,r=t.firstElementChild;r.checked&&setTimeout(function(){t.classList.remove("active"),r.checked=!1},1)}},r.prototype.events),defaultFormData:function(){return{nc12:"",packType:"",vendor:"",creator:""}},termToForm:{createdAt:a.rqlToForm,nc12:function(e,t,r){r.nc12=t.args[1].replace(/[^A-Z0-9]+/g,"")},packType:function(e,t,r){r[e]=t.args[1]},"creator.id":function(e,t,r){r[e.split(".")[0]]="in"===t.name?t.args[1].join(","):t.args[1]}},serializeFormToQuery:function(e){var t=this.$id("nc12").val().replace(/[^0-9A-Za-z]+/g,"").toUpperCase(),r=this.$id("creator").val();a.formToRql(this,e),/^([0-9]{12}|[A-Z][A-Z0-9]{6})$/.test(t)?e.push({name:"eq",args:["nc12",t]}):t.length&&e.push({name:"regex",args:["nc12","^"+t]}),r.length&&(-1===r.indexOf(",")?e.push({name:"eq",args:["creator.id",r]}):e.push({name:"in",args:["creator.id",r.split(",")]})),["packType","vendor"].forEach(function(t){var r=this.$id(t).val().trim();r&&e.push({name:"eq",args:[t,r]})},this)},afterRender:function(){r.prototype.afterRender.call(this),this.$id("limit").parent().attr("data-filter","limit"),this.$id("filters").select2({width:"175px"}),n(this.$id("creator"),{view:this,width:"275px"})},showFilter:function(e){"date"!==e?r.prototype.showFilter.apply(this,arguments):this.$id("from-date").focus()}})});