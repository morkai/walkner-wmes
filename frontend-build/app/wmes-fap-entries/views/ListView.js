define(["underscore","jquery","app/i18n","app/core/views/ListView"],function(e,t,i,s){"use strict";return s.extend({className:function(){var e=["fap-entries-list","is-clickable"];return this.options.orderDetails||e.push("is-colored"),e.join(" ")},remoteTopics:function(){var e={},t=this.collection.getTopicPrefix();return t&&(e[t+".added"]="refreshCollection",e[t+".updated.*"]="onModelUpdated",e[t+".deleted"]="onModelDeleted"),e},serializeColumns:function(){var e=[{id:"rid",className:"is-min is-number"}];return this.options.orderDetails||e.push({id:"orderNo",className:"is-min",tdClassName:"text-mono"},{id:"nc12",className:"is-min",tdClassName:"text-mono"},{id:"mrp",className:"is-min"}),e.push({id:"category",className:"is-min"},{id:"createdAt",className:"is-min"},{id:"divisions",className:"is-min"},{id:"lines",className:"is-min"},{id:"problem",className:"is-min"},"-"),e},serializeActions:function(){var e=this.collection;return this.options.orderDetails?null:function(t){var i=e.get(t._id),n=[s.actions.viewDetails(i)];return i.canDelete()&&n.push(s.actions.delete(i)),n}},afterRender:function(){s.prototype.afterRender.apply(this,arguments),this.$("tbody").popover({container:this.el,placement:"auto left",selector:"td[data-id]",trigger:"hover",html:!0,content:function(){return"category"===this.dataset.id&&this.firstElementChild.clientWidth>=275?this.textContent.trim():"problem"===this.dataset.id&&this.firstElementChild.clientWidth>=400?this.textContent.trim():void 0},template:function(e){return t(e).addClass("fap-list-popover")}})},onModelUpdated:function(e){Object.keys(e.change.data).length&&this.refreshCollection(e)}})});