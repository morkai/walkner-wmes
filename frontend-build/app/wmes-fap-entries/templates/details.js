define(["underscore","jquery","app/i18n","app/time","app/user","app/core/util/forms"],function(_,$,t,time,user,forms){return function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(p){return void 0==p?"":String(p).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(p){return _ENCODE_HTML_RULES[p]||p}var __output=[],__append=__output.push.bind(__output);with(locals||{})__append('<div class="fap-details">\n  <div class="fap-props">\n    <div class="fap-prop" data-prop="rid">\n      <div class="fap-prop-name">'),__append(helpers.t("PROPERTY:rid")),__append('</div>\n      <div class="fap-prop-value text-mono">'),__append(escapeFn(model.rid)),__append('</div>\n    </div>\n    <div class="fap-prop" data-prop="category">\n      <div class="fap-prop-name">'),__append(helpers.t("PROPERTY:category")),__append('</div>\n      <div class="fap-prop-value">'),__append(escapeFn(model.category)),__append('</div>\n    </div>\n    <div class="fap-prop '),__append(model.multilineProblem?"fap-multiline":""),__append('" data-prop="problem">\n      <div class="fap-prop-name">'),__append(helpers.t("PROPERTY:problem")),__append('</div>\n      <div class="fap-prop-value">'),__append(escapeFn(model.problem)),__append('</div>\n    </div>\n  </div>\n  <div class="fap-prop-separator"></div>\n  <div class="fap-props">\n    <div class="fap-prop" data-prop="orderNo">\n      <div class="fap-prop-name">'),__append(helpers.t("PROPERTY:orderNo")),__append('</div>\n      <div class="fap-prop-value text-mono">\n        '),user.isAllowedTo("ORDERS:VIEW")?(__append('\n        <a href="#orders/'),__append(model.orderNo),__append('">'),__append(model.orderNo),__append("</a>\n        ")):(__append("\n        "),__append(model.orderNo),__append("\n        ")),__append('\n      </div>\n    </div>\n    <div class="fap-prop" data-prop="nc12">\n      <div class="fap-prop-name">'),__append(helpers.t("PROPERTY:nc12")),__append('</div>\n      <div class="fap-prop-value text-mono">'),__append(escapeFn(model.nc12)),__append('</div>\n    </div>\n    <div class="fap-prop" data-prop="productName">\n      <div class="fap-prop-name">'),__append(helpers.t("PROPERTY:productName")),__append('</div>\n      <div class="fap-prop-value text-mono">'),__append(escapeFn(model.productName)),__append('</div>\n    </div>\n  </div>\n  <div class="fap-prop-separator"></div>\n  <div class="fap-props">\n    <div class="fap-prop" data-prop="qty">\n      <div class="fap-prop-name">'),__append(helpers.t("PROPERTY:qty")),__append('</div>\n      <div class="fap-prop-value">\n        <span class="text-mono" data-prop="qtyDone">'),__append(model.qtyDone),__append('</span>\n        /\n        <span class="text-mono" data-prop="qtyTodo">'),__append(model.qtyTodo),__append('</span>\n      </div>\n    </div>\n    <div class="fap-prop" data-prop="mrp">\n      <div class="fap-prop-name">'),__append(helpers.t("PROPERTY:mrp")),__append('</div>\n      <div class="fap-prop-value text-mono">'),__append(escapeFn(model.mrp)),__append('</div>\n    </div>\n    <div class="fap-prop" data-prop="divisions">\n      <div class="fap-prop-name">'),__append(helpers.t("PROPERTY:divisions")),__append('</div>\n      <div class="fap-prop-value">'),__append(escapeFn(model.divisions)),__append('</div>\n    </div>\n    <div class="fap-prop" data-prop="lines">\n      <div class="fap-prop-name">'),__append(helpers.t("PROPERTY:lines")),__append('</div>\n      <div class="fap-prop-value">'),__append(escapeFn(model.lines)),__append('</div>\n    </div>\n  </div>\n  <div class="fap-chatAndAttachments">\n    <div class="fap-chat">\n      <div class="fap-chat-messages">\n        '),model.chat.forEach(function(p){__append('\n          <div class="fap-chat-message" data-user-id="'),__append(p.user.id),__append('">\n            <div class="fap-chat-user">'),__append(p.user.label),__append('</div>\n            <div class="fap-chat-lines">\n              '),p.lines.forEach(function(p){__append('\n                <div class="fap-chat-line" title="'),__append(p.time),__append('">'),__append(escapeFn(p.text)),__append("</div>\n              ")}),__append("\n            </div>\n          </div>\n        ")}),__append('\n      </div>\n      <form class="fap-chat-form">\n        <textarea id="'),__append(idPrefix),__append('-message" class="form-control" rows="1"></textarea>\n      </form>\n    </div>\n    <div class="fap-attachments">\n      <div class="fap-prop">\n        <div class="fap-prop-name">'),__append(helpers.t("PROPERTY:attachments")),__append('</div>\n        <div class="fap-prop-value">\n          '),model.attachments.forEach(function(p){__append('\n          <div class="fap-attachment">\n            '),__append(escapeFn(p.name)),__append("\n          </div>\n          ")}),__append("\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n");return __output.join("")}});