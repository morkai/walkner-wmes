define(["underscore","../broker","../router","../viewport","../user","../core/util/showDeleteFormPage","./views/NavbarView","i18n!app/nls/wmes-fap-entries"],function(e,a,r,n,t,s,p){"use strict";var i="app/wmes-fap-entries/Entry",o=t.auth("USER"),u=t.auth("FAP:MANAGE");p.setUp(),r.map("/fap/entries",o,function(e){n.loadPage(["app/wmes-fap-entries/EntryCollection","app/wmes-fap-entries/pages/ListPage"],function(a,r){return e.rql.selector.args.forEach(function(e){"eq"===e.name&&"observers.user.id"===e.args[0]&&"mine"===e.args[1]&&(e.args[1]=t.data._id)}),new r({collection:new a(null,{rqlQuery:e.rql})})})}),r.map("/fap/entries/:id",o,function(e){n.loadPage([i,"app/wmes-fap-entries/pages/DetailsPage"],function(a,r){return new r({model:new a({_id:e.params.id})})})}),r.map("/fap/entries/:id;delete",o,e.partial(s,i,e,e,{baseBreadcrumb:!0})),r.map("/fap/settings",u,function(e){n.loadPage(["app/wmes-fap-entries/pages/SettingsPage"],function(a){return new a({initialTab:e.query.tab})})}),r.map("/fap/reports/count",o,function(e){n.loadPage(["app/wmes-fap-entries/CountReport","app/wmes-fap-entries/pages/CountReportPage","i18n!app/nls/reports"],function(a,r){return new r({model:a.fromQuery(e.query)})})})});