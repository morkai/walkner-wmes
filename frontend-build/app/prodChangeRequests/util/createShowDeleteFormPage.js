define(["underscore","app/broker","app/i18n","app/viewport","app/core/util/showDeleteFormPage","./isChangeRequest"],function(e,s,t,n,o,i){"use strict";return function(e){var r=e.prototype.nlsDomain;return function(u,a){var c=s.sandbox();return c.subscribe("viewport.page.loadingFailed",function(){c.destroy()}),c.subscribe("viewport.page.shown").on("message",function(e){c.destroy();var o=e.page;o.listenToOnce(o.view,"success",function(){s.subscribe("router.executing").setLimit(1).on("message",n.msg.show.bind(n.msg,{type:"success",time:3e3,text:t(r,"changeRequest:msg:success:delete")}))})}),o(e,u,a,i()?{formActionText:t.bound(r,"changeRequest:delete:formActionText"),messageText:t.bound(r,"changeRequest:delete:messageText"),failureText:t.bound(r,"changeRequest:msg:failure:delete")}:{})}}});