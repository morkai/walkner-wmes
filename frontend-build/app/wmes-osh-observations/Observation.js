define(["require","app/i18n","app/user","app/time","app/wmes-osh-common/Entry"],function(t,o,e,i,n){"use strict";const r=n.extend({urlRoot:"/osh/observations",clientUrlRoot:"#osh/observations",topicPrefix:"osh.observations",privilegePrefix:"OSH:ACTIONS",nlsDomain:"wmes-osh-observations",getModelType:function(){return"observation"},serialize:function(){const t=n.prototype.serialize.apply(this,arguments);return t.company=t.companyName,t},serializeRow:function(){const t=n.prototype.serializeRow.apply(this,arguments);return t.date=i.utc.format(t.date,"L, H"),t},serializeDetails:function(){const t=n.prototype.serializeDetails.apply(this,arguments);return t.date=i.utc.format(t.date,o(this.nlsDomain,"details:date:format")),t}},{RID_PREFIX:"O",TIME_PROPS:["createdAt"],USER_PROPS:["creator","coordinators"],DICT_PROPS:["company","observationKind","workplace","division","building","location","station"],DESC_PROPS:["observationKind"]});return r.can=Object.assign({},r.can,{manage:function(){return e.isAllowedTo("OSH:OBSERVATIONS:MANAGE")},edit:function(t){return!!(this.can||this).manage()||(!!t.isCoordinator()||"inProgress"===t.get("status")&&t.isCreator())}}),r});