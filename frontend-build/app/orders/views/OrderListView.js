define(["underscore","app/i18n","app/user","app/core/views/ListView","app/data/orderStatuses","app/orderStatuses/util/renderOrderStatusLabel","app/printers/views/PrinterPickerView","../util/openOrderPrint"],function(e,s,t,i,a,r,n,l){"use strict";return i.extend({className:"orders-list is-clickable",localTopics:{"orderStatuses.synced":"render"},remoteTopics:{"orders.synced":"refreshCollection","orders.updated.*":function(e){this.collection.get(e._id)&&this.refreshCollection()}},events:e.assign({"click .action-print":function(e){var s=this.$(e.currentTarget).closest("tr").attr("data-id");return e.listAction={view:this,tag:"orders"},n.listAction(e,function(e){l([s],e)}),!1}},i.prototype.events),serializeColumns:function(){return[{id:"_id",className:"is-min"},{id:"nc12",className:"is-min"},{id:"name",titleProperty:function(e){return/^[A-Z]/.test(e.nc12)?"name":"description"},className:"is-min",tdDecorator:function(s,t,i){var a=[];return i.etoCont?a.push('<span class="label label-default orders-tag">EK</span>'):"E"===i.priority&&a.push('<span class="label label-default orders-tag">E</span>'),(i.tags||[]).forEach(function(s){a.push('<span class="label label-default orders-tag" title="'+e.escape(s.label)+'">'+e.escape(s._id)+"</span>")}),i.description&&i.name!==i.description&&a.push('<i class="fa fa-question-circle"></i>'),a.push(/^[A-Z]/.test(i.nc12)?i.description:i.name),a.join(" ")}},{id:"mrp",className:"is-min"},{id:"qtys",className:"is-min is-number"},{id:"sapCreatedAt",valueProperty:"sapCreatedAtText",className:"is-min"},{id:"scheduledStartDate",valueProperty:"scheduledStartDateText",className:"is-min"},{id:"delayReason",className:"is-min"},{id:"m4",className:"is-min"},{id:"statuses",valueProperty:"statusLabels"}]},serializeActions:function(){var e=this.collection,a=t.isAllowedTo("USER");return function(t){var r=[i.actions.viewDetails(e.get(t._id))];return a&&r.push({id:"print",icon:"print",label:s.bound("orders","LIST:ACTION:print"),href:"/orders/"+t._id+".html?print"}),r}},serializeRows:function(){var e={delayReasons:this.delayReasons};return this.collection.map(function(s){return s.serialize(e)})},onReset:function(){var e=this.$el.hasClass("hidden");this.render(),e!==this.$el.hasClass("hidden")&&this.model.trigger("panelToggle")}})});