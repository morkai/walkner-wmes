define(["app/time","app/core/View","app/prodDowntimes/views/ProdDowntimeListView","app/orders/templates/downtimeList","i18n!app/nls/prodDowntimes"],function(t,e,i,n){"use strict";return e.extend({template:n,initialize:function(){this.insertView(".orders-downtimes",new i({collection:this.collection,simple:!0,shiftColumn:!0})),this.once("afterRender",function(){this.listenTo(this.collection,"reset change",this.onChange)})},getTemplateData:function(){return{empty:0===this.collection.length}},afterRender:function(){this.updateTotals()},updateTotals:function(){var e=[],i={},n=Date.now();this.collection.forEach(function(t){var e=t.get("prodLine"),o=Date.parse(t.get("startedAt")),s=(Date.parse(t.get("finishedAt"))||n)-o;i[e]||(i[e]=0),i[e]+=s}),Object.keys(i).forEach(function(n){e.push(n+": "+t.toString(i[n]/1e3))}),this.$id("totals").text(e.join(" | "))},onChange:function(){this.updateTotals(),this.$el.toggleClass("hidden",0===this.collection.length),this.model.trigger("panelToggle")}})});