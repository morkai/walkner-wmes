// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["underscore","app/core/util/fixTimeRange","app/core/views/FilterView","app/users/ownMrps","app/mrpControllers/util/setUpMrpSelect2","app/orders/templates/filter"],function(e,t,r,i,s,a){"use strict";return r.extend({template:a,events:e.assign({},i.events,r.prototype.events),defaultFormData:{_id:"",nc12:"",from:"",to:"",mrp:""},termToForm:{scheduledStartDate:function(e,r,i){t.toFormData(i,r,"date")},_id:function(e,t,r){var i=t.args[1];r[e]="string"==typeof i?i.replace(/[^0-9]/g,""):"-"},mrp:function(e,t,r){r[e]=t.args[1].join(",")},nc12:"_id"},serialize:function(){return e.assign(r.prototype.serialize.apply(this,arguments),{showOwnMrps:i.hasAny()})},afterRender:function(){r.prototype.afterRender.call(this),s(this.$id("mrp"))},serializeFormToQuery:function(e){var r=t.fromView(this),i=this.$id("mrp").val();this.serializeRegexTerm(e,"_id",9,null,!1,!0),this.serializeRegexTerm(e,"nc12",12,null,!1,!0),r.from&&e.push({name:"ge",args:["scheduledStartDate",r.from]}),r.to&&e.push({name:"lt",args:["scheduledStartDate",r.to]}),i.length&&e.push({name:"in",args:["mrp",i.split(",")]})}})});