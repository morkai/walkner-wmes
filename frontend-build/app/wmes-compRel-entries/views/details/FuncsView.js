define(["jquery","app/viewport","app/core/View","app/wmes-compRel-entries/Entry","./AcceptView","./AddUserView","./AddFuncView","app/wmes-compRel-entries/templates/details/funcs"],function(e,t,i,n,o,s,c,d){"use strict";return i.extend({template:d,events:{"click .compRel-details-accept":function(e){this.showAcceptDialog(this.resolveFuncId(e))},'click [data-action="addUser"]':function(e){this.showAddUserDialog(this.resolveFuncId(e))},'click [data-action="addFunc"]':function(){this.showAddFuncDialog()}},initialize:function(){this.once("afterRender",function(){this.listenTo(this.model,"change:funcs",this.render)}),e(window).on("resize."+this.idPrefix,this.onWindowResize.bind(this))},destroy:function(){e(window).off("."+this.idPrefix)},getTemplateData:function(){return{canAddUser:n.can.addUser(this.model),funcs:this.model.serializeFuncs()}},afterRender:function(){this.toggleOverflowX()},showAcceptDialog:function(e){var i=new o({model:{entry:this.model,func:this.model.getFunc(e)}});t.showDialog(i,this.t("accept:title"))},showAddUserDialog:function(e){var i=new s({model:{entry:this.model,func:this.model.getFunc(e)}});t.showDialog(i,this.t("addUser:title"))},showAddFuncDialog:function(){var e=new c({model:this.model});t.showDialog(e,this.t("addFunc:title"))},toggleOverflowX:function(){this.$(".compRel-details-funcs").css("overflow-x",this.$el.outerWidth()+50<window.innerWidth?"visible":"")},resolveFuncId:function(e){return this.$(e.target).closest(".compRel-details-func")[0].dataset.id},onWindowResize:function(){this.toggleOverflowX()}})});