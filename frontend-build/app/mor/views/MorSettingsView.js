// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["underscore","Sortable","app/core/util/idAndLabel","app/data/prodFunctions","app/settings/views/SettingsView","app/mor/templates/settings"],function(t,e,n,i,o,a){"use strict";return o.extend({clientUrl:"#mor;settings",template:a,localTopics:{"prodFunctions.synced":"render"},events:t.extend({"change input[data-setting]":function(t){this.updateSetting(t.target.name,t.target.value)}},o.prototype.events),initialize:function(){o.prototype.initialize.apply(this,arguments),this.sortable=null},destroy:function(){o.prototype.destroy.apply(this,arguments),this.sortable.destroy(),this.sortable=null},afterRender:function(){o.prototype.afterRender.apply(this,arguments);var t=this.$id("prodFunctions").select2({allowClear:!0,multiple:!0,data:i.map(n)});this.sortable=new e(t.select2("container").find(".select2-choices")[0],{draggable:".select2-search-choice",filter:".select2-search-choice-close",onStart:function(){t.select2("onSortStart")},onEnd:function(){t.select2("onSortEnd").select2("focus")}}),this.$id("globalProdFunctions").select2({allowClear:!0,multiple:!0,data:i.map(n)}),this.$id("commonProdFunctions").select2({allowClear:!0,multiple:!0,data:i.map(n)}),this.$id("orderedProdFunctions").select2({allowClear:!0,multiple:!0,data:i.map(n)})}})});