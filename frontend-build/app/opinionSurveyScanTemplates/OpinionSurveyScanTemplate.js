// Copyright (c) 2014, ≈Åukasz Walukiewicz <lukasz@walukiewicz.eu>. Some Rights Reserved.
// Licensed under CC BY-NC-SA 4.0 <http://creativecommons.org/licenses/by-nc-sa/4.0/>.
// Part of the walkner-wmes project <http://lukasz.walukiewicz.eu/p/walkner-wmes>

define(["../core/Model","../opinionSurveys/dictionaries","../opinionSurveys/OpinionSurvey"],function(e,i,r){"use strict";return e.extend({urlRoot:"/opinionSurveys/scanTemplates",clientUrlRoot:"#opinionSurveyScanTemplates",topicPrefix:"opinionSurveys.scanTemplates",privilegePrefix:"OPINION_SURVEYS",nlsDomain:"opinionSurveyScanTemplates",labelAttribute:"name",defaults:{pageNumber:1,dp:1,minimumDistance:0,cannyThreshold:200,circleAccumulatorThreshold:25,minimumRadius:0,maximumRadius:0,filledThreshold:230,markedThreshold:40},url:function(){var i=e.prototype.url.apply(this,arguments);return this.isNew()?i:i+"?populate(survey)"},getSurveyId:function(){var e=this.get("survey");return"string"!=typeof e&&(e=e?e._id||e.id:null),e},serialize:function(e){var i=this.toJSON();return e||(e=new r(i.survey._id?i.survey:{_id:i.survey})),e.cacheMaps||e.buildCacheMaps(),i.survey=e.get("label")||e.id,i}})});