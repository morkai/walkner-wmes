// Copyright (c) 2014, ≈Åukasz Walukiewicz <lukasz@walukiewicz.eu>. Some Rights Reserved.
// Licensed under CC BY-NC-SA 4.0 <http://creativecommons.org/licenses/by-nc-sa/4.0/>.
// Part of the walkner-wmes project <http://lukasz.walukiewicz.eu/p/walkner-wmes>

define(["../i18n","../core/Model","../data/aors","app/core/templates/colorLabel"],function(e,o,s,i){"use strict";return o.extend({urlRoot:"/downtimeReasons",clientUrlRoot:"#downtimeReasons",topicPrefix:"downtimeReasons",privilegePrefix:"DICTIONARIES",nlsDomain:"downtimeReasons",labelAttribute:"label",defaults:function(){return{label:null,type:"other",subdivisionTypes:["assembly","press"],opticsPosition:-1,pressPosition:-1,auto:!1,scheduled:!1,color:"#ff0000",refColor:"#aa0000",refValue:0,aors:[]}},serialize:function(){var o=this.toJSON();return o.scheduled=e("core","BOOL:"+o.scheduled),o.auto=e("core","BOOL:"+o.auto),o.type=e("downtimeReasons","type:"+o.type),o.color=i({color:o.color}),o.refColor=i({color:o.refColor}),o.refValue=o.refValue&&o.refValue.toLocaleString?o.refValue.toLocaleString():"0",o.subdivisionTypes=o.subdivisionTypes&&o.subdivisionTypes.length?o.subdivisionTypes.map(function(o){return e("downtimeReasons","subdivisionType:"+o)}).join("; "):e("downtimeReasons","subdivisionType:none"),o.aors=o.aors.map(function(e){var o=s.get(e);return o?o.getLabel():e}),o}})});