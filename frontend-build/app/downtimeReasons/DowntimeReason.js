// Part of <http://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["../i18n","../core/Model","../data/aors","app/core/util/colorLabel"],function(e,o,i,s){"use strict";return o.extend({urlRoot:"/downtimeReasons",clientUrlRoot:"#downtimeReasons",topicPrefix:"downtimeReasons",privilegePrefix:"DICTIONARIES",nlsDomain:"downtimeReasons",labelAttribute:"label",defaults:function(){return{label:null,type:"other",subdivisionTypes:["assembly","press"],opticsPosition:-1,pressPosition:-1,auto:!1,scheduled:!1,color:"#ff0000",refColor:"#aa0000",refValue:0,aors:[],defaultAor:!1}},serialize:function(){var o=this.toJSON();return o.scheduled=e("core","BOOL:"+o.scheduled),o.auto=e("core","BOOL:"+o.auto),o.type=e("downtimeReasons","type:"+o.type),o.color=s(o.color),o.refColor=s(o.refColor),o.refValue=o.refValue&&o.refValue.toLocaleString?o.refValue.toLocaleString():"0",o.subdivisionTypes&&o.subdivisionTypes.length?o.subdivisionTypes=o.subdivisionTypes.map(function(o){return e("downtimeReasons","subdivisionType:"+o)}).join("; "):o.subdivisionTypes=e("downtimeReasons","subdivisionType:none"),o.aors=o.aors.map(function(e){var o=i.get(e);return o?o.getLabel():e}),o.defaultAor=e("core","BOOL:"+o.defaultAor),o},serializeRow:function(){var o=this.serialize();return o.aors=o.aors.length?o.aors.join("; "):e("downtimeReasons","aors:all"),o}})});