// Copyright (c) 2014, ≈Åukasz Walukiewicz <lukasz@walukiewicz.eu>. Some Rights Reserved.
// Licensed under CC BY-NC-SA 4.0 <http://creativecommons.org/licenses/by-nc-sa/4.0/>.
// Part of the walkner-wmes project <http://lukasz.walukiewicz.eu/p/walkner-wmes>

define(["../router","../viewport","../user","../i18n","../data/downtimeReasons","./DowntimeReason","../core/pages/ListPage","../core/pages/DetailsPage","../core/pages/AddFormPage","../core/pages/EditFormPage","../core/pages/ActionFormPage","./views/decorateDowntimeReason","./views/DowntimeReasonFormView","app/downtimeReasons/templates/details","i18n!app/nls/downtimeReasons"],function(e,o,i,a,n,s,t,d,m,r,w,l,c,p){var g=i.auth("DICTIONARIES:VIEW"),u=i.auth("DICTIONARIES:MANAGE");e.map("/downtimeReasons",g,function(){o.showPage(new t({collection:n,columns:["_id","label","type","subdivisionTypes","opticsPosition","pressPosition","auto","scheduled"],serializeRow:l}))}),e.map("/downtimeReasons/:id",function(e){o.showPage(new d({model:new s({_id:e.params.id}),detailsTemplate:p,serializeDetails:l}))}),e.map("/downtimeReasons;add",u,function(){o.showPage(new m({FormView:c,model:new s}))}),e.map("/downtimeReasons/:id;edit",u,function(e){o.showPage(new r({FormView:c,model:new s({_id:e.params.id})}))}),e.map("/downtimeReasons/:id;delete",u,function(e,i){var a=new s({_id:e.params.id});o.showPage(new w({model:a,actionKey:"delete",successUrl:a.genClientUrl("base"),cancelUrl:i||a.genClientUrl("base"),formMethod:"DELETE",formAction:a.url(),formActionSeverity:"danger"}))})});