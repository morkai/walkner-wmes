define(["underscore","../i18n","../broker","../router","../viewport","../user","../core/util/showDeleteFormPage"],function(e,a,r,s,t,p,i){"use strict";var o=["css!app/wmes-trw-programs/assets/main","css!app/wmes-trw-bases/assets/main","css!app/wmes-trw-tests/assets/testing"],m="i18n!app/nls/wmes-trw-programs",n="app/wmes-trw-programs/Program",c=p.auth("TRW:VIEW"),w=p.auth("TRW:PROGRAM","TRW:MANAGE");s.map("/trw/programs",c,function(e){t.loadPage(["app/core/pages/FilteredListPage","app/wmes-trw-tests/dictionaries","app/wmes-trw-programs/ProgramCollection","app/wmes-trw-programs/views/FilterView",m],function(a,r,s,t){return r.bind(new a({baseBreadcrumb:!0,FilterView:t,collection:new s(null,{rqlQuery:e.rql}),columns:[{id:"base",className:"is-min"},{id:"name",className:"is-min"},"-"]}))})}),s.map("/trw/programs/:id",c,function(e){t.loadPage(["app/core/pages/DetailsPage",n,"app/wmes-trw-programs/templates/details",m].concat(o),function(a,r,s){return new a({baseBreadcrumb:!0,pageClassName:"page-max-flex",model:new r({_id:e.params.id}),detailsTemplate:s,actions:function(){return[{icon:"copy",label:this.t("PAGE_ACTION:copy"),href:"#trw/programs;add?copy="+this.model.id}].concat(a.prototype.actions.apply(this,arguments))}})})}),s.map("/trw/programs;add",w,function(e){t.loadPage(["app/core/pages/AddFormPage","app/wmes-trw-tests/dictionaries",n,"app/wmes-trw-programs/views/FormView",m].concat(o),function(s,t,p,i){var o=new p({_id:e.query.copy});return o.once("sync",function(){e.query.copy&&(o.set({_id:void 0,name:a("core","labelCopySuffix",{label:o.get("name")})}),r.publish("router.navigate",{url:"/trw/programs;add",trigger:!1,replace:!0}))}),t.bind(new s({baseBreadcrumb:!0,pageClassName:"page-max-flex",FormView:i,model:o}))})}),s.map("/trw/programs/:id;edit",w,function(e){t.loadPage(["app/core/pages/EditFormPage","app/wmes-trw-tests/dictionaries",n,"app/wmes-trw-programs/views/FormView",m].concat(o),function(a,r,s,t){return r.bind(new a({baseBreadcrumb:!0,pageClassName:"page-max-flex",FormView:t,model:new s({_id:e.params.id})}))})}),s.map("/trw/programs/:id;delete",w,e.partial(i,n,e,e,{baseBreadcrumb:!0}))});