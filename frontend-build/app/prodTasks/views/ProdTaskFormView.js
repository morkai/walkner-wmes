define(["app/core/views/FormView","app/prodTasks/templates/form","bootstrap-colorpicker"],function(o,r){return o.extend({template:r,events:{submit:"submitForm","change .prodTasks-form-color-input":"updatePickerColor"},$colorPicker:null,destroy:function(){null!==this.$colorPicker&&(this.$colorPicker.colorpicker("destroy"),this.$colorPicker=null),o.prototype.destroy.call(this)},afterRender:function(){o.prototype.afterRender.call(this),this.$id("tags").select2({tags:this.model.allTags||[],tokenSeparators:[","]}),this.$colorPicker=this.$(".prodTasks-form-color-picker").colorpicker()},serializeToForm:function(){var o=this.model.toJSON();return o.tags=o.tags?o.tags.join(","):"",o},serializeForm:function(o){return o.tags="string"==typeof o.tags?o.tags.split(","):[],o},updatePickerColor:function(o){o.originalEvent&&this.$colorPicker.colorpicker("setValue",o.target.value)}})});