define(["underscore","app/time","app/user","app/viewport","app/core/views/FormView","app/users/util/setUpUserSelect2","app/kaizenOrders/dictionaries","app/suggestions/templates/complete"],function(e,t,i,s,n,a,r,o){"use strict";return n.extend({template:o,events:e.assign({"click #-accept":function(){this.status="verification",this.el.reportValidity()&&this.submitForm()},"click #-cancel":function(){this.status="cancelled",this.submitForm()}},n.prototype.events),serializeToForm:function(){return{kaizenImprovements:this.model.get("kaizenImprovements")||"",kaizenEffect:this.model.get("kaizenEffect")||""}},serializeForm:function(e){return e.status=this.status,"verification"===this.status?e.kaizenFinishDate=t.getMoment().startOf("day").toISOString():(e.kaizenFinishDate=null,e.kaizenImprovements="",e.kaizenEffect=""),e},request:function(e){return this.ajax({method:"PUT",url:this.model.url(),data:JSON.stringify(e)})},getFailureText:function(){return this.t("complete:failure")},handleSuccess:function(){s.closeDialog()}})});