define(["underscore","jquery","app/core/View","app/reports/util/formatTooltipHeader","../../EngagementReport","app/suggestions/templates/engagement/tables"],function(e,t,a,s,i,o){"use strict";return a.extend({template:o,initialize:function(){this.onResize=e.debounce(this.resize.bind(this),100),this.dataTables=[],this.listenTo(this.model,"change:groups",this.render),t(window).on("resize."+this.idPrefix,this.onResize)},destroy:function(){t(window).off("."+this.idPrefix,this.onResize),this.destroyDataTables()},getTemplateData:function(){return{formatHeader:"none"!==this.model.get("interval")?s.bind(this):()=>this.t("engagement:title:none"),groups:this.model.get("groups"),counters:i.COUNTERS}},beforeRender:function(){this.destroyDataTables()},afterRender:function(){this.createDataTables()},destroyDataTables:function(){this.dataTables.forEach(e=>{e.destroy()}),this.dataTables=[]},createDataTables:function(){const e=this.$("table");this.model.get("groups").forEach((t,a)=>{this.createDataTable(e.eq(a),t,e.length)})},createDataTable:function(e,t,a){const s=e.dataTable({autoWidth:!1,info:!1,ordering:!0,orderMulti:!0,order:[[0,"asc"]],paging:!1,processing:!1,searching:!1,scrollX:!0,scrollY:282*(1===a?2:1),scrollCollapse:!0,fixedColumns:1,columnDefs:[{targets:0,type:"locale",width:"230px"},{targets:[1,2,3,4,5,6,7,8],type:"num",width:"72px",createdCell:(e,t)=>{"0"===t&&e.classList.add("is-zero")}},{targets:9,orderable:!1}]}).DataTable();this.dataTables.push(s)},resize:function(){this.dataTables.forEach(e=>e.draw())}})});