define(["underscore","app/core/views/DetailsView","app/kaizenOrders/dictionaries","app/suggestions/templates/details"],function(t,e,i,s){"use strict";return e.extend({template:s,afterRender:function(){var t=this;e.prototype.afterRender.call(t),t.$(".prop[data-dictionary]").each(function(){var e=i[this.dataset.dictionary].get(t.model.get(this.dataset.property));if(e){var s=e.get("description");s&&(this.classList.toggle("has-description",!0),this.dataset.description=s)}}),t.$el.popover({container:this.el,selector:".has-description",className:"suggestions-details-popover",trigger:"hover",placement:function(e,i){if(window.innerWidth<=992)return"top";var s=t.$(i).closest(".panel").parent();return s[0]===s.parent().children().last()[0]?"top":"right"},content:function(){return this.dataset.description}})},editModel:function(e){var i=e;t.last(e.changes).data.resolutions&&(i=t.omit(i,"resolutions"),this.reloadResolutions()),this.model.set(i)},reloadResolutions:function(){var t=this;t.ajax({url:t.model.url()+"?select(resolutions)"}).done(function(e){t.model.set(e)})}})});