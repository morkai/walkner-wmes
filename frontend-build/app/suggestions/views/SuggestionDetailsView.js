define(["underscore","jquery","app/viewport","app/core/views/DetailsView","app/kaizenOrders/dictionaries","./CoordinateView","app/suggestions/templates/details"],function(t,e,i,o,n,s,r){"use strict";return o.extend({template:r,currentTab:null,events:t.assign({'click a[data-toggle="tab"]':function(t){this.currentTab=t.currentTarget.dataset.tab},"click .suggestions-details-coordSection-coordinate":function(t){var e=this.$(t.target).closest(".suggestions-details-coordSection"),o=new s({model:this.model,coordSection:this.model.getCoordSection(e[0].dataset.section)});i.showDialog(o,this.t("coordinate:title",{rid:this.model.get("rid")}))}},o.prototype.events),initialize:function(){o.prototype.initialize.call(this),e(window).on("resize."+this.idPrefix,this.onWindowResize.bind(this))},destroy:function(){o.prototype.destroy.call(this),e(window).off("."+this.idPrefix)},getTemplateData:function(){var t=this.model.get("status"),e="new"!==t&&"accepted"!==t;return{showKaizenPanel:e,suggestionColumnSize:e?6:12,kaizenColumnSize:e?6:0}},afterRender:function(){o.prototype.afterRender.call(this);var i=this;this.$(".prop[data-dictionary]").each(function(){var e=n[this.dataset.dictionary].get(i.model.get(this.dataset.property));if(e){var o=e.get("description");t.isEmpty(o)||(this.classList.toggle("has-description",!0),this.dataset.description=o)}}),this.$el.popover({container:this.el,selector:".has-description",placement:function(t,e){if(window.innerWidth<=992)return"top";var o=i.$(e).closest(".panel").parent();return o[0]===o.parent().children().last()[0]?"top":"right"},trigger:"hover",content:function(){return this.dataset.description},template:function(){return e(e.fn.popover.Constructor.DEFAULTS.template).addClass("suggestions-details-popover")}}),this.toggleOverflowX(),this.$('a[data-tab="'+(this.currentTab||this.options.initialTab)+'"]').click()},toggleOverflowX:function(){this.$(".suggestions-details-coordSections").css("overflow-x",this.$el.outerWidth()+50<window.innerWidth?"visible":"")},onWindowResize:function(){this.toggleOverflowX()}})});