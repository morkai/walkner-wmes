define(["app/core/View","app/kaizenOrders/dictionaries","../SuggestionCountReport","../views/SuggestionCountReportFilterView","../views/SuggestionTableAndChartView","../views/SuggestionCountPerUserChartView","app/suggestions/templates/countReportPage"],function(e,t,i,r,s,o,n){"use strict";return e.extend({layoutName:"page",template:n,breadcrumbs:function(){return[this.t("BREADCRUMB:reports:base"),this.t("BREADCRUMB:reports:count")]},initialize:function(){t.bind(this),this.setView(".filter-container",new r({model:this.model})),i.TABLE_AND_CHART_METRICS.forEach(function(e){this.setView(".suggestions-report-"+e,new s({metric:e,model:this.model}))},this),this.setView(".suggestions-report-confirmer",new o({metric:"confirmer",model:this.model})),this.setView(".suggestions-report-superior",new o({metric:"superior",model:this.model})),this.setView(".suggestions-report-owner",new o({metric:"owner",model:this.model})),this.listenTo(this.model,"filtered",this.onFiltered)},getTemplateData:function(){return{metrics:i.TABLE_AND_CHART_METRICS}},load:function(e){return e(this.model.fetch())},onFiltered:function(){this.promised(this.model.fetch()),this.broker.publish("router.navigate",{url:this.model.genClientUrl(),trigger:!1,replace:!0})}})});