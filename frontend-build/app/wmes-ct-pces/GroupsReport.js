define(["underscore","app/i18n","app/time","app/core/Model","app/core/Collection"],function(t,n,e,r,i){"use strict";return r.extend({urlRoot:"/ct/reports/groups",nlsDomain:"wmes-ct-pces",defaults:function(){return{from:0,to:0,lines:[],minQty:null,maxQty:null,minT:null,maxT:null,report:null}},initialize:function(){this.groups=new i,this.sapOrders=new i,this.shiftOrders=new i,this.on("change:report",this.onReportChange),this.set("report",{stationCount:0,groups:[],sapOrders:[],shiftOrders:[]})},onReportChange:function(){var t=this.get("report");this.shiftOrders.reset(t.shiftOrders),this.sapOrders.reset(t.sapOrders),this.groups.reset(t.groups)},getStationCount:function(){return this.get("report").stationCount},fetch:function(n){return t.isObject(n)||(n={}),n.data=t.assign(n.data||{},t.pick(this.attributes,["from","to","lines","minQty","maxQty","minT","maxT"])),Object.keys(n.data).forEach(function(t){Array.isArray(n.data[t])&&(n.data[t]=n.data[t].join(","))}),r.prototype.fetch.call(this,n)},genClientUrl:function(){return this.urlRoot+"?from="+(this.get("from")||"")+"&to="+(this.get("to")||"")+"&lines="+encodeURIComponent(this.get("lines")||"")+"&minQty="+(this.get("minQty")||"")+"&maxQty="+(this.get("maxQty")||"")+"&minT="+encodeURIComponent(this.get("minT")||"")+"&maxT="+encodeURIComponent(this.get("maxT")||"")},parse:function(t){return{report:t}}},{fromQuery:function(n){return new this({from:+n.from||0,to:+n.to||0,lines:t.isEmpty(n.lines)?[]:n.lines.split(","),minQty:+n.minQty||null,maxQty:+n.maxQty||null,minT:n.minT||null,maxT:n.maxT||null})}})});