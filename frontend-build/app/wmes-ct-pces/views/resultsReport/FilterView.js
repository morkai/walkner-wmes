define(["underscore","js2form","app/time","app/core/View","app/core/util/idAndLabel","app/core/util/forms/dateTimeRange","app/wmes-ct-pces/templates/resultsReport/filter"],function(i,t,n,e,a,r,o){"use strict";return e.extend({template:o,events:{"click a[data-date-time-range]":r.handleRangeEvent,submit:function(){return this.changeFilter(),!1}},initialize:function(){this.listenTo(this.model,"mrpConfigChanged",this.onMrpConfigChanged),this.listenTo(this.settings,"change",this.onSettingChange)},afterRender:function(){t(this.el,this.serializeFormData()),this.updatePlaceholders()},serializeFormData:function(){var i=this.model.attributes;return{"from-date":i.from?n.format(i.from,"YYYY-MM-DD"):"","to-date":i.to?n.format(i.to,"YYYY-MM-DD"):"",minLineWorkDuration:null==i.minLineWorkDuration?"":i.minLineWorkDuration,minUpphWorkDuration:null==i.minUpphWorkDuration?"":i.minUpphWorkDuration,shiftCount:null==i.shiftCount?"":i.shiftCount,availableWorkDuration:null==i.availableWorkDuration?"":i.availableWorkDuration,minMrpUnbalance:null==i.minMrpUnbalance?"":i.minMrpUnbalance,minMrpEfficiency:null==i.minMrpEfficiency?"":i.minMrpEfficiency}},changeFilter:function(){var t=r.serialize(this),n={from:t.from?t.from.valueOf():0,to:t.to?t.to.valueOf():0,minLineWorkDuration:parseFloat(this.$id("minLineWorkDuration").val()),minUpphWorkDuration:parseFloat(this.$id("minUpphWorkDuration").val()),shiftCount:parseInt(this.$id("shiftCount").val(),10),availableWorkDuration:parseFloat(this.$id("availableWorkDuration").val()),minMrpUnbalance:parseInt(this.$id("minMrpUnbalance").val(),10),minMrpEfficiency:parseInt(this.$id("minMrpEfficiency").val(),10)};i.forEach(n,function(i,t){(isNaN(i)||null==i)&&(n[t]=null)}),this.model.set(n),this.model.trigger("filtered")},updatePlaceholders:function(){var i=this;i.$("input[placeholder]").each(function(){var t=i.settings.get("ct.reports.results."+this.name);if(t){var n=t.getValue();"number"==typeof n&&(this.placeholder=n.toLocaleString())}})},onSettingChange:function(i){/^ct.reports.results/.test(i.id)&&this.updatePlaceholders()},onMrpConfigChanged:function(){this.$('.btn[type="submit"]').first().focus()}})});