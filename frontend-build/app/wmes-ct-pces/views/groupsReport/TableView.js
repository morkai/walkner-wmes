define(["app/time","app/core/View","app/wmes-ct-pces/templates/groupsReport/table"],function(t,a,e){"use strict";function n(t){return t<1||t>28800?0:t}function i(t){var a="";if(!t||t<1)return a;var e=Math.floor(t/60);return e>0?(e>99?e=99:e<10&&(a+="0"),a+=e+":",t%=60):a+="00:",t>0?(t<10&&(a+="0"),a+=t):a+="00",a}return a.extend({template:e,getTemplateData:function(){return{stationCount:this.model.getStationCount(),rows:this.serializeRows()}},serializeRows:function(){var t=this,a=[],e=this.model.getStationCount();return t.group.get("sapOrders").forEach(function(o){for(var r=t.model.sapOrders.get(o),m=r.get("target"),u=r.get("actual"),s={orderNo:r.id,nc12:r.get("nc12"),name:r.get("name"),description:r.get("description"),qtyTodo:r.get("qtyTodo"),qtyDone:r.get("qtyDone"),qtyMatched:r.get("qtyMatched"),stations:[],total:{target:i(m.avg[0]),med:i(u.med[0]),avg:i(u.avg[0]),min:i(u.min[0]),max:i(u.max[0])},minStationI:-1,minDuration:Number.MAX_SAFE_INTEGER,maxStationI:-1,maxDuration:Number.MIN_SAFE_INTEGER},g=1;g<=e;++g){var d=u.med[g];d>s.maxDuration&&(s.maxStationI=g-1,s.maxDuration=d),d<s.minDuration&&(s.minStationI=g-1,s.minDuration=d),s.stations.push({target:i(m.avg[g]),med:i(d),avg:i(u.avg[g]),min:i(u.min[g]),max:i(u.max[g])})}s.minDuration=i(n(s.minDuration)),s.maxDuration=i(n(s.maxDuration)),a.push(s)}),a}})});