define(["../i18n","../core/Model","../data/orgUnits","../data/prodFunctions","app/core/templates/userInfo"],function(e,t,r,o,n){"use strict";return t.extend({urlRoot:"/fap/categories",clientUrlRoot:"#fap/categories",topicPrefix:"fap.categories",privilegePrefix:"FAP",nlsDomain:"wmes-fap-categories",labelAttribute:"name",defaults:{active:!0},serialize:function(t){t||(t=this.collection);var i=this.toJSON(),a=t&&t.get(i.etoCategory);return i.active=e("core","BOOL:"+i.active),i.planners=e("core","BOOL:"+i.planners),i.etoCategory=a?a.getLabel():""===i.etoCategory?e("core","BOOL:true"):null===i.etoCategory?e("core","BOOL:false"):i.etoCategory,i.users=(i.users||[]).map(function(e){return n({userInfo:e})}),i.notifications=(i.notifications||[]).map(function(e){return{subdivisions:e.subdivisions.map(function(e){var t=r.getByTypeAndId("subdivision",e);if(!t)return e;var o=r.getParent(t);return(o?o.getLabel():"?")+" \\ "+t.getLabel()}),prodFunctions:e.prodFunctions.map(function(e){var t=o.get(e);return t?t.getLabel():e})}}),i}})});