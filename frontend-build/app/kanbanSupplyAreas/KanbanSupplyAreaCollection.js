// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["../i18n","../core/Collection","./KanbanSupplyArea"],function(e,t,n){"use strict";var r=["red","yellow","orange","green","violet","pink","lightblue","darkblue","brown","grey"];return t.extend({model:n,rqlQuery:"sort(_id)&limit(20)",setUpPubsub:function(e){e.subscribe("kanban.supplyAreas.*",this.handleMessage.bind(this))},getFamilies:function(){var e={};return this.forEach(function(t){e[t.get("name")]=1}),Object.keys(e).sort().map(function(e){return{id:e,text:e}})},handleMessage:function(e,t){var n=this.get(e.model._id);switch(t){case"kanban.supplyAreas.deleted":this.remove(n);break;case"kanban.supplyAreas.added":case"kanban.supplyAreas.edited":n?n.set(e.model):this.add(e.model)}}},{COLORS:r,getColor:function(e){return n.getColor(e)},getColors:function(){return r.map(this.getColor)}})});