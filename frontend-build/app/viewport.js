define(["app/broker","app/core/Viewport"],function(e,r){"use strict";var n=new r({el:document.body,selector:"#app-viewport"});return e.subscribe("router.executing",function(){window.scrollTo(0,0)}),e.subscribe("viewport.page.loaded",function(){window.parent!==window&&Array.isArray(window.parent.WMES_PAGE_LOADED)&&window.parent.WMES_PAGE_LOADED.forEach(function(e){e(!0)})}),e.subscribe("viewport.page.loadingFailed",function(){window.parent!==window&&Array.isArray(window.parent.WMES_PAGE_LOADED)&&window.parent.WMES_PAGE_LOADED.forEach(function(e){e(!1)})}),window.viewport=n,Object.defineProperty(window,"page",{get:function(){return n.currentPage}}),Object.defineProperty(window,"dialog",{get:function(){return n.currentDialog}}),Object.defineProperty(window,"model",{get:function(){var e=n.currentDialog||n.currentPage;return e&&e.model||e.collection}}),n});