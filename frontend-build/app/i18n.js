// Copyright (c) 2014, ≈Åukasz Walukiewicz <lukasz@walukiewicz.eu>. Some Rights Reserved.
// Licensed under CC BY-NC-SA 4.0 <http://creativecommons.org/licenses/by-nc-sa/4.0/>.
// Part of the walkner-wmes project <http://lukasz.walukiewicz.eu/p/walkner-wmes>

define(["underscore","moment","select2","app/broker"],function(n,e,i,o){function t(n,e,i){try{return l[n][e](i)}catch(t){if(l[n]&&l[n][e])throw t;return o.publish("i18n.missingKey",{domain:n,key:e}),e}}function r(n,e,i){l[n]=e,"string"==typeof i&&a.push(i),o.publish("i18n.registered",{domain:n,keys:e,moduleId:i})}function u(r,u){var c="en";n.isObject(t.config)&&(c=t.config.locale,t.config.locale=r),a.forEach(require.undef);var f=[].concat(a);"en"!==r&&f.unshift("moment-lang/"+r),f.unshift("select2-lang/"+r),require(f,function(){e.locale(r),i.lang(r),o.publish("i18n.reloaded",{oldLocale:c,newLocale:r}),n.isFunction(u)&&u()})}function c(n,e,i){function o(){return t(n,e,i)}return o.toString=o,o}function f(n,e){return"undefined"!=typeof l[n]&&"function"==typeof l[n][e]}var l={},a=[];return t.config=null,t.translate=t,t.register=r,t.reload=u,t.bound=c,t.has=f,window.i18n=t,t});