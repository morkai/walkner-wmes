// Copyright (c) 2014, ≈Åukasz Walukiewicz <lukasz@walukiewicz.eu>. Some Rights Reserved.
// Licensed under CC BY-NC-SA 4.0 <http://creativecommons.org/licenses/by-nc-sa/4.0/>.
// Part of the walkner-wmes project <http://lukasz.walukiewicz.eu/p/walkner-wmes>

define(["underscore","moment","select2","app/broker"],function(n,e,t,r){"use strict";function i(n,e,t){try{return a[n][e](t)}catch(i){if(a[n]&&a[n][e])throw i;return r.publish("i18n.missingKey",{domain:n,key:e}),e}}function o(n,e,t){a[n]=e,"string"==typeof t&&l.push(t),r.publish("i18n.registered",{domain:n,keys:e,moduleId:t})}function u(o,u){var c="en";n.isObject(i.config)&&(c=i.config.locale,i.config.locale=o),l.forEach(require.undef);var f=[].concat(l);"en"!==o&&f.unshift("moment-lang/"+o),f.unshift("select2-lang/"+o),require(f,function(){e.locale(o),t.lang(o),r.publish("i18n.reloaded",{oldLocale:c,newLocale:o}),n.isFunction(u)&&u()})}function c(n,e,t){function r(){return i(n,e,t)}return r.toString=r,r}function f(n,e){return"undefined"!=typeof a[n]&&"function"==typeof a[n][e]}var a={},l=[];return i.config=null,i.translate=i,i.register=o,i.reload=u,i.bound=c,i.has=f,i.forDomain=function(n){var e=function(e,t,r){return"string"==typeof t||r?i(e,t,r):i(n,e)};return e.translate=e,e.bound=function(n,t,r){function i(){return e(n,t,r)}return i.toString=i,i},e.has=function(e,t){return t?f(e,t):f(n,e)},e},window.i18n=i,i});