// Copyright (c) 2014, ≈Åukasz Walukiewicz <lukasz@walukiewicz.eu>. Some Rights Reserved.
// Licensed under CC BY-NC-SA 4.0 <http://creativecommons.org/licenses/by-nc-sa/4.0/>.
// Part of the walkner-wmes project <http://lukasz.walukiewicz.eu/p/walkner-wmes>

define(["jquery","underscore","js2form","app/i18n","app/viewport","app/core/View","app/core/util/buttonGroup","app/factoryLayout/views/OrgUnitPickerView","app/factoryLayout/templates/displayOptions"],function(t,e,s,i,o,a,n,r,u){return a.extend({template:u,events:{submit:function(t){t.preventDefault()},'change [name="statuses[]"]':function(){this.model.set("statuses",n.getValue(this.$id("statuses")))},'change [name="states[]"]':function(){this.model.set("states",n.getValue(this.$id("states")))},"click #-showPicker":function(){var t=new r({model:{orgUnitType:this.model.get("orgUnitType"),orgUnitIds:this.model.get("orgUnitIds")}});this.listenTo(t,"picked",function(t,e){o.closeDialog(),this.model.set({orgUnitType:t,orgUnitIds:e})}),o.showDialog(t,i("factoryLayout","picker:title"))},"click #-save":function(){this.model.save(),o.msg.show({type:"success",time:1e3,text:i("factoryLayout","options:saved")})}},destroy:function(){},beforeRender:function(){},afterRender:function(){s(this.el,this.serializeFormData()),n.toggle(this.$id("statuses")),n.toggle(this.$id("states"))},serializeFormData:function(){return{statuses:this.model.get("statuses"),states:this.model.get("states")}}})});