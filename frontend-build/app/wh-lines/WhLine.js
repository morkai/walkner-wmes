define(["app/i18n","app/time","app/core/Model","app/planning/util/shift"],function(t,e,i,n){"use strict";return i.extend({urlRoot:"/old/wh/lines",clientUrlRoot:"#wh/lines",topicPrefix:"old.wh.lines",privilegePrefix:"WH",nlsDomain:"wh-lines",defaults:function(){return{pickup:{sets:0,qty:0,time:0},components:{qty:0,time:0},packaging:{qty:0,time:0},redirLine:null,nextShiftAt:null,startedPlan:null,working:!1}},serialize:function(){return this.toJSON()},serializeRow:function(){var t=this.serialize();return t.nextShiftAt=this.serializeNextShiftAt(),t.startedPlan=t.startedPlan&&"1970-01-01T00:00:00.000Z"!==t.startedPlan?e.utc.format(t.startedPlan,"L"):"",t},serializeNextShiftAt:function(){var i=this.get("nextShiftAt");if(i){var r=n.getPlanDate(i,!1).format("L"),a=n.getPlanDate(Date.now(),!0).format("L"),l=e.utc.format(i,"LTS"),o=n.getShiftNoFromStartTime(l);i=o?r===a?t("core","SHIFT:"+o):t("core","SHIFT",{date:r,shift:o}):r===a?l:r+", "+l}else i="";return i}})});