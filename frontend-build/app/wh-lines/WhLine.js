define(["app/i18n","app/time","app/core/Model","app/planning/util/shift"],function(t,e,i,n){"use strict";return i.extend({urlRoot:"/old/wh/lines",clientUrlRoot:"#wh/lines",topicPrefix:"old.wh.lines",privilegePrefix:"WH",nlsDomain:"wh-lines",defaults:function(){return{pickup:{sets:0,qty:0,time:0},components:{qty:0,time:0},packaging:{qty:0,time:0},redirLine:null,nextShiftAt:null,startedPlan:null,working:!1}},serialize:function(){return this.toJSON()},serializeRow:function(){var i=this.serialize();if(i.working=t("core","BOOL:"+i.working),i.nextShiftAt){var r=n.getPlanDate(i.nextShiftAt).format("L"),a=n.getPlanDate(Date.now(),!0).format("L"),l=e.utc.format(i.nextShiftAt,"LTS"),o=n.getShiftNoFromStartTime(l);i.nextShiftAt=o?r===a?t("core","SHIFT:"+o):t("core","SHIFT",{date:r,shift:o}):r===a?l:r+", "+l}else i.nextShiftAt="";return i.startedPlan=i.startedPlan&&"1970-01-01T00:00:00.000Z"!==i.startedPlan?e.utc.format(i.startedPlan,"L"):"",i}})});