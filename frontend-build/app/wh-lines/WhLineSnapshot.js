define(["app/i18n","app/time","app/core/Model","app/planning/util/shift"],function(t,e,i,a){"use strict";return i.extend({urlRoot:"/old/wh/lineSnapshots",clientUrlRoot:"#wh/lineSnapshots",topicPrefix:"old.wh.lineSnapshots",privilegePrefix:"WH",nlsDomain:"wh-lines",serialize:function(){return this.toJSON()},serializeRow:function(){var t=this.serialize();return Object.keys(t.data).forEach(function(e){"_id"!==e&&(t[e]=t.data[e])}),t.date=e.format(t.time,"L"),t.time=e.format(t.time,"HH:mm:ss"),t.nextShiftAt=this.serializeNextShiftAt(),t.startedPlan&&(t.startedPlan=e.utc.format(t.startedPlan,"L")),t},serializeNextShiftAt:function(){var i=this.get("data").nextShiftAt;if(i){var n=a.getPlanDate(i,!1).format("L"),r=e.utc.format(i,"LTS"),o=a.getShiftNoFromStartTime(r);i=o?t("core","SHIFT",{date:n,shift:o}):n+", "+r}else i="";return i}})});