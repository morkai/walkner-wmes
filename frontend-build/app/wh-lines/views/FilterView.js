define(["app/core/View","app/mrpControllers/util/setUpMrpSelect2","app/wh-lines/templates/filter"],function(t,e,i){"use strict";return t.extend({template:i,events:{"click #-working > .btn":function(t){var e=t.currentTarget;e.classList.contains("active")?e.classList.remove("active"):(this.$id("working").find(".active").removeClass("active"),e.classList.add("active"));var i=this.$id("working").find(".active").val();this.model.setFilters({working:"1"===i||"0"!==i&&null})},"change #-mrps":function(){this.model.setFilters({mrps:this.$id("mrps").val().split(",").filter(function(t){return!!t.length})})}},initialize:function(){this.listenTo(this.model,"filtered detailed",this.updateUrl)},getTemplateData:function(){return{filters:this.model.getFilters()}},afterRender:function(){this.toggleWorking(),e(this.$id("mrps"),{view:this,own:!0,width:"500px"})},toggleWorking:function(){var t=this.model.getFilters().working;this.$id("working-1").toggleClass("active",!0===t),this.$id("working-0").toggleClass("active",!1===t)},updateUrl:function(){var t=this.model.getFilters(),e=this.model.getDetails(),i=["working="+(!1===t.working?"0":t.working?"1":""),"mrps="+t.mrps.map(function(t){return encodeURIComponent(t)}).join(",")];e.type&&e.line&&i.push("details="+e.type+"_"+encodeURIComponent(e.line)),this.broker.publish("router.navigate",{replace:!0,trigger:!1,url:"/wh/lines?"+i.join("&")})}})});