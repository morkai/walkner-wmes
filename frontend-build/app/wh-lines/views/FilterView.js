define(["app/core/View","app/mrpControllers/util/setUpMrpSelect2","app/wh-lines/templates/filter"],function(t,i,e){"use strict";return t.extend({template:e,events:{"click #-working > .btn":function(t){var i=t.currentTarget;i.classList.contains("active")?i.classList.remove("active"):(this.$id("working").find(".active").removeClass("active"),i.classList.add("active"));var e=this.$id("working").find(".active").val();this.model.setFilters({working:"1"===e||"0"!==e&&null})},"change #-mrps":function(t){this.model.setFilters({mrps:this.$id("mrps").val().split(",").filter(function(t){return!!t.length})})}},initialize:function(){this.listenTo(this.model,"filtered",this.updateUrl)},getTemplateData:function(){return{filters:this.model.getFilters()}},afterRender:function(){this.toggleWorking(),i(this.$id("mrps"),{view:this,own:!0,width:"500px"})},toggleWorking:function(){var t=this.model.getFilters().working;this.$id("working-1").toggleClass("active",!0===t),this.$id("working-0").toggleClass("active",!1===t)},updateUrl:function(){var t=this.model.getFilters(),i=["working="+(!1===t.working?"0":t.working?"1":""),"mrps="+t.mrps.map(function(t){return encodeURIComponent(t)}).join(",")];this.broker.publish("router.navigate",{replace:!0,trigger:!1,url:"/wh/lines?"+i.join("&")})}})});