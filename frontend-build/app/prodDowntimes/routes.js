define(["../broker","../router","../viewport","../user","../prodChangeRequests/util/createShowDeleteFormPage","./ProdDowntime","./ProdDowntimeCollection"],function(e,o,r,t,n,a,i){"use strict";var s="css!app/prodDowntimes/assets/main",p="i18n!app/nls/prodDowntimes",d=t.auth("PROD_DATA:VIEW","PROD_DOWNTIMES:VIEW"),m=t.auth("PROD_DATA:MANAGE","PROD_DATA:CHANGES:REQUEST");o.map("/prodDowntimes",d,function(e){r.loadPage(["app/prodDowntimes/pages/ProdDowntimeListPage",s,p],function(o){return new o({collection:new i(null,{rqlQuery:e.rql})})})}),o.map("/prodDowntimes;alerts",function(){var o=new i;o.rqlQuery.selector.args.forEach(function(e){"in"===e.name&&"status"===e.args[0]&&(e.name="eq",e.args=["alerts.active",!0])}),e.publish("router.navigate",{url:"#prodDowntimes?"+o.rqlQuery,trigger:!0,replace:!0})}),o.map("/prodDowntimes/:id",function(e){r.loadPage(["app/prodDowntimes/pages/ProdDowntimeDetailsPage",s,p],function(o){return new o({model:new a({_id:e.params.id}),corroborate:"1"===e.query.corroborate})})}),o.map("/prodDowntimes/:id;edit",m,function(e){r.loadPage(["app/prodDowntimes/pages/ProdDowntimeEditFormPage",p],function(o){return new o({model:new a({_id:e.params.id})})})}),o.map("/prodDowntimes/:id;delete",m,n(a)),o.map("/prodDowntimes;settings",m,function(e){r.loadPage(["app/prodDowntimes/pages/ProdDowntimeSettingsPage",p],function(o){return new o({initialTab:e.query.tab})})})});