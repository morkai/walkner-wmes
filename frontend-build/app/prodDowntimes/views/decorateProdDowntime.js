define(["app/time","app/i18n","app/data/aors","app/data/prodLines","app/data/downtimeReasons","app/data/views/renderOrgUnitPath","app/core/templates/userInfo","i18n!app/nls/prodDowntimes"],function(e,r,t,a,o,s,n){return function(d){var i=d.toJSON();i.statusClassName=d.getCssClassName(),i.className=i.statusClassName,i.reasonComment&&i.reasonComment.trim().length&&(i.className+=" is-withReasonComment");var m=t.get(i.aor);i.aor=m?m.getLabel():i.aor;var f=a.get(i.prodLine);f&&(i.prodLine=f.getLabel(),i.prodLinePath=s(f,!1,!1));var p=o.get(i.reason);if(i.reason=p?p.getLabel():i.reason,i.startedAt&&i.finishedAt){var A=Date.parse(i.startedAt),Y=Date.parse(i.finishedAt),h=Math.round((Y-A)/1e3);i.duration=e.toString(h)}else i.duration="-";return i.startedAt=e.format(i.startedAt,"YYYY-MM-DD HH:mm:ss"),i.finishedAt=i.finishedAt?e.format(i.finishedAt,"YYYY-MM-DD HH:mm:ss"):r("prodDowntimes","NO_DATA:finishedAt"),i.corroboratedAt=e.format(i.corroboratedAt,"YYYY-MM-DD HH:mm:ss")||"-",i.order=i.prodShiftOrder?i.orderId:r("prodDowntimes","NO_DATA:order"),i.date=i.date?e.format(i.date,"YYYY-MM-DD"):"?",i.shift=i.shift?r("core","SHIFT:"+i.shift):"?",i.masterInfo=n({userInfo:i.master}),i.leaderInfo=n({userInfo:i.leader}),i.operatorInfo=n({userInfo:i.operator}),i.creatorInfo=n({userInfo:i.creator}),i.corroboratorInfo=n({userInfo:i.corroborator}),i}});