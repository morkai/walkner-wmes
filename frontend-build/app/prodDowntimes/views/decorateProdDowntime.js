define(["app/time","app/i18n","app/data/aors","app/data/prodLines","app/data/downtimeReasons","app/data/views/renderOrgUnitPath","app/core/templates/userInfo","i18n!app/nls/prodDowntimes"],function(e,t,n,r,i,o,a){return function(s){var l=s.toJSON();l.statusClassName=s.getCssClassName(),l.className=l.statusClassName,l.reasonComment&&l.reasonComment.trim().length&&(l.className+=" is-withReasonComment");var u=n.get(l.aor);l.aor=u?u.getLabel():l.aor;var d=r.get(l.prodLine);d&&(l.prodLine=d.getLabel(),l.prodLinePath=o(d,!1,!1));var c=i.get(l.reason);if(l.reason=c?c.getLabel():l.reason,l.startedAt&&l.finishedAt){var p=Date.parse(l.startedAt),f=Date.parse(l.finishedAt),h=Math.round((f-p)/1e3);l.duration=e.toString(h)}else l.duration="-";return l.startedAt=e.format(l.startedAt,"YYYY-MM-DD HH:mm:ss"),l.finishedAt=l.finishedAt?e.format(l.finishedAt,"YYYY-MM-DD HH:mm:ss"):t("prodDowntimes","NO_DATA:finishedAt"),l.corroboratedAt=e.format(l.corroboratedAt,"YYYY-MM-DD HH:mm:ss")||"-",l.order=l.prodShiftOrder?l.orderId:t("prodDowntimes","NO_DATA:order"),l.date=l.date?e.format(l.date,"YYYY-MM-DD"):"?",l.shift=l.shift?t("core","SHIFT:"+l.shift):"?",l.masterInfo=a({userInfo:l.master}),l.leaderInfo=a({userInfo:l.leader}),l.operatorInfo=a({userInfo:l.operator}),l.creatorInfo=a({userInfo:l.creator}),l.corroboratorInfo=a({userInfo:l.corroborator}),l}});