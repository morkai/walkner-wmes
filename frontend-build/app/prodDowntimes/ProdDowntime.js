define(["../time","../core/Model","../production/util/getShiftEndDate"],function(e,t,n){var r={undecided:"warning",confirmed:"success",rejected:"danger"};return t.extend({urlRoot:"/prodDowntimes",clientUrlRoot:"#prodDowntimes",topicPrefix:"prodDowntimes",privilegePrefix:"PROD_DOWNTIMES",nlsDomain:"prodDowntimes",defaults:{division:null,subdivision:null,mrpControllers:null,prodFlow:null,workCenter:null,prodLine:null,prodShift:null,prodShiftOrder:null,date:null,shift:null,aor:null,reason:null,reasonComment:null,decisionComment:null,status:null,startedAt:null,finishedAt:null,corroborator:null,corroboratedAt:null,creator:null,master:null,leader:null,operator:null,mechOrder:null,orderId:null,operationNo:null},sync:function(e){if("read"===e)return t.prototype.sync.apply(this,arguments);throw new Error("Method not supported: "+e)},getCssClassName:function(){return r[this.get("status")]},finish:function(){if(null!=this.get("finishedAt"))return null;var t=e.getServerMoment().toDate(),r=n(this.get("date"),this.get("shift"));return t>r&&(t=r),this.set("finishedAt",t),{_id:this.id,finishedAt:t}}},{STATUS:{UNDECIDED:"undecided",CONFIRMED:"confirmed",REJECTED:"rejected"}})});