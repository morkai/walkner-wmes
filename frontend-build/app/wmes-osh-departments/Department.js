define(["require","underscore","app/i18n","app/core/Model","app/core/templates/userInfo"],function(e,t,o,r,n){"use strict";return r.extend({urlRoot:"/osh/departments",clientUrlRoot:"#osh/departments",topicPrefix:"osh.departments",privilegePrefix:"OSH:DICTIONARIES",nlsDomain:"wmes-osh-departments",labelAttribute:"shortName",defaults:function(){return{active:!0,managers:[],coordinators:[]}},getLabel:function({long:o,path:r,link:n}={}){let a=this.get(o?"longName":"shortName");if(n&&(a=`<a href="${this.genClientUrl()}">${t.escape(a)}</a>`),r){a=`${e("app/wmes-osh-common/dictionaries").getLabel("workplace",this.get("workplace"),{long:o,path:r,link:n})} \\ ${a}`}return a},serialize:function(){const e=this.toJSON();return e.active=o("core",`BOOL:${e.active}`),e},serializeRow:function(){const t=e("app/wmes-osh-common/dictionaries"),o=this.serialize();o.workplace=t.workplaces.getLabel(o.workplace,{path:!0,link:!0});const r=o.managers;r.length?(o.managers=n(r[0]),r.length>1&&(o.managers+=` +${r.length-1}`)):o.managers="";const a=o.coordinators;return a.length?(o.coordinators=n(a[0]),a.length>1&&(o.coordinators+=` +${a.length-1}`)):o.coordinators="",o},serializeDetails:function(){const t=e("app/wmes-osh-common/dictionaries"),o=this.serialize();return o.workplace=t.workplaces.getLabel(o.workplace,{long:!0,link:!0}),o.managers=o.managers.map(e=>n({userInfo:e})),o.coordinators=o.coordinators.map(e=>n({userInfo:e})),o},hasWorkplace:function(e){return this.get("workplace")===+e}})});