// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["underscore","app/time","app/core/Model","app/core/templates/userInfo"],function(e,t,r,i){"use strict";return r.extend({urlRoot:"/sapLaborTimeFixer/xData",clientUrlRoot:"#sapLaborTimeFixer/xData",topicPrefix:"sapLaborTimeFixer.xData",privilegePrefix:"ORDERS",nlsDomain:"sapLaborTimeFixer",labelAttribute:"title",initialize:function(e,t){this.workCenter=t&&t.workCenter||null,this.deps=t&&t.deps||[]},serialize:function(){var e=this.toJSON();return e.createdAt=t.format(e.createdAt,"LLL"),e.creator=i({userInfo:e.creator,noIp:!0}),e},getSelectedWorkCenter:function(){var t=this.get("data"),r=e.find(t,{_id:this.workCenter});return r||t[0]},selectWorkCenter:function(t){var r=this.workCenter;r!==t&&(this.workCenter=t,this.deps=e.intersection(this.getSelectedWorkCenter().deps,this.deps),this.trigger("change:workCenter"))},getSelectedDeps:function(){return this.deps},toggleDeps:function(t){e.includes(this.deps,t)?this.deps=e.without(this.deps,t):this.deps.push(t),this.trigger("change:deps")},isDepSelected:function(t){return e.includes(this.deps,t)}})});