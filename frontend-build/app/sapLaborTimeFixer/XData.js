define(["underscore","app/time","app/core/Model","app/core/templates/userInfo"],function(e,t,i,r){"use strict";return i.extend({urlRoot:"/sapLaborTimeFixer/xData",clientUrlRoot:"#sapLaborTimeFixer/xData",topicPrefix:"sapLaborTimeFixer.xData",privilegePrefix:"ORDERS",nlsDomain:"sapLaborTimeFixer",labelAttribute:"title",initialize:function(e,t){this.workCenter=t&&t.workCenter||null,this.deps=t&&t.deps||[]},serialize:function(){var e=this.toJSON();return e.createdAt=t.format(e.createdAt,"LLL"),e.creator=r({userInfo:e.creator,noIp:!0}),e},getSelectedWorkCenter:function(){var t=this.get("data");return e.find(t,{_id:this.workCenter})||t[0]},selectWorkCenter:function(t){if(this.workCenter!==t){this.workCenter=t;var i=this.isDepSelected("__NULL__");this.deps=e.intersection(this.getSelectedWorkCenter().deps,this.deps),i&&this.deps.push("__NULL__"),this.trigger("change:workCenter")}},iSelectedWorkCenter:function(e){return this.getSelectedWorkCenter()._id===e},getSelectedDeps:function(){return this.deps},selectDeps:function(e){this.deps=[],"__ALL__"!==e&&this.deps.push(e),this.trigger("change:deps")},toggleDeps:function(t){"__ALL__"===t?this.deps=[]:e.includes(this.deps,t)?this.deps=e.without(this.deps,t):this.deps.push(t),this.trigger("change:deps")},isDepSelected:function(t){return"__ALL__"===t?0===this.deps.length:(null===t&&(t="__NULL__"),e.includes(this.deps,t))}})});