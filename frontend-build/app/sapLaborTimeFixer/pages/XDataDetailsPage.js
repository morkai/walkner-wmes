define(["underscore","jquery","app/viewport","app/core/View","app/core/util/pageActions","../views/XDataTabsView","../views/XDataViewerView","app/sapLaborTimeFixer/templates/details"],function(e,i,t,n,s,r,o,h){"use strict";return n.extend({layoutName:"page",template:h,breadcrumbs:function(){return[{label:this.t("BREADCRUMBS:browse"),href:this.model.genClientUrl("base")},this.model.getLabel()]},actions:function(){return[s.delete(this.model)]},initialize:function(){this.defineViews(),this.defineBindings(),this.setView("#-tabs",this.tabsView),this.insertView("#-viewer",this.currentView),this.insertView("#-viewer",this.draftView),this.insertView("#-viewer",this.diffView)},destroy:function(){},defineViews:function(){this.tabsView=new r({model:this.model});var e=this.calcHeight();this.currentView=new o({model:this.model,height:e}),this.draftView=new o({model:this.model,height:e}),this.diffView=new o({model:this.model,height:e})},defineBindings:function(){this.once("afterRender",function(){this.listenTo(this.model,"change:workCenter change:deps",this.updateUrl)}),i(window).on("resize."+this.idPrefix,e.debounce(this.resize.bind(this),30))},load:function(e){return e(this.model.fetch())},afterRender:function(){this.resize()},updateUrl:function(){this.broker.publish("router.navigate",{url:this.model.genClientUrl()+"?workCenter="+encodeURIComponent(this.model.getSelectedWorkCenter()._id)+"&deps="+encodeURIComponent(this.model.getSelectedDeps().join(",")),trigger:!1,replace:!0})},resize:function(){var e=this.calcHeight();this.currentView.resize(e),this.draftView.resize(e),this.diffView.resize(e)},calcHeight:function(){var e=window.innerHeight;return e-=this.tabsView.$el.outerHeight()||83,e-=i(".hd").outerHeight(!0)||87,e-=i(".ft").outerHeight(!0)||66,e-=15}})});