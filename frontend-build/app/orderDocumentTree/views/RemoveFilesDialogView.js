// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["underscore","app/i18n","app/viewport","app/core/View","app/orderDocumentTree/templates/removeFilesDialog"],function(e,i,s,o,r){"use strict";return o.extend({template:r,events:{submit:function(){var e=this.$id("submit").prop("disabled",!0),o=e.find(".fa-spinner").removeClass("hidden"),r=this.model,t=r.purge?r.tree.purgeFiles(r.files,r.folder):r.tree.removeFiles(r.files);return t.fail(function(){s.msg.show({type:"error",time:3e3,text:i("orderDocumentTree","removeFiles:msg:failure")})}),t.done(function(){s.msg.show({type:"success",time:2e3,text:i("orderDocumentTree","removeFiles:msg:success")})}),t.done(this.closeDialog),t.always(function(){o.addClass("hidden"),e.prop("disabled",!1)}),!1}},serialize:function(){return{idPrefix:this.idPrefix,purge:this.model.purge}},onDialogShown:function(e){this.closeDialog=e.closeDialog.bind(e)},closeDialog:function(){}})});