define(["../core/Collection","./OrderDocumentFolder"],function(e,t){"use strict";return e.extend({model:t,rqlQuery:"sort(name)",handleFolderAdded:function(e){if(!this.get(e.id)){this.add(e);var t=this.get(e.get("parent"));t&&t.addChildFolder(e)}},handleFolderPurged:function(e){var t=this.get(e);if(t){this.remove(t);var d=this.get(t.get("parent"));d&&d.removeChildFolder(t)}},handleFolderRemoved:function(e){var t=this.get(e);if(t&&"__TRASH__"!==t.get("parent")){var d=t.get("parent");t.set({parent:"__TRASH__",oldParent:d},{oldParentId:d});var r=this.get(d),n=this.get("__TRASH__");r&&r.removeChildFolder(t),n&&n.addChildFolder(t)}},handleFolderMoved:function(e,t){var d=this.get(e);if(d){var r=d.get("parent"),n=this.get(r),i=this.get(t);d.set({parent:t,oldParent:null},{oldParentId:r}),n&&n.removeChildFolder(d),i&&i.addChildFolder(d)}},handleFolderRenamed:function(e,t){var d=this.get(e);d&&d.set("name",t)},handleFolderEdited:function(e){var t=this.get(e._id);t&&t.set(e)},handleFolderRecovered:function(e){var t=this.get(e);t&&t.isInTrash()&&this.handleFolderMoved(e,this.get("oldParent"))}})});