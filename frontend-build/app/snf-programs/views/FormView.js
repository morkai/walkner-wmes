define(["underscore","app/time","app/core/views/FormView","../Program","app/snf-programs/templates/form"],function(t,e,i,r,n){"use strict";var s=["waitForStartTime","illuminationTime","hrsInterval","hrsTime"];return i.extend({template:n,idPrefix:"programForm",events:{submit:"submitForm","blur .programs-form-time":function(t){t.target.value=e.toString(e.toSeconds(t.target.value))},"change [name=kind]":"onKindChange"},destroy:function(){this.$id("kind").select2("destroy"),this.$id("lightSourceType").select2("destroy"),this.$id("bulbPower").select2("destroy"),this.$id("ballast").select2("destroy"),this.$id("ignitron").select2("destroy")},serialize:function(){return t.assign(i.prototype.serialize.call(this),r.OPTIONS)},serializeToForm:function(){var t=this.model.toJSON();return s.forEach(function(i){t[i]=e.toString(t[i])}),t},serializeForm:function(t){return s.forEach(function(i){t[i]=e.toSeconds(t[i])}),r.OPTIONS.contactors.forEach(function(e){t[e]=!!t[e]}),t},afterRender:function(){i.prototype.afterRender.call(this),this.$id("kind").select2(),this.$id("lightSourceType").select2(),this.$id("bulbPower").select2(),this.$id("ballast").select2(),this.$id("ignitron").select2(),this.onKindChange({val:this.$id("kind").val()})},onKindChange:function(t){var e="30s"===t.val,i="tester"===t.val;this.$id("illuminationTime").val(i?"0s":e?"30s":"6min").attr("readonly",e||i),this.$id("waitForStartTime").attr("disabled",i),this.$id("hrs").find("input").attr("readonly",e||i),this.$id("lightSourceType").select2("readonly",i),this.$id("bulbPower").select2("readonly",i),this.$id("ballast").select2("readonly",i),this.$id("ignitron").select2("readonly",i)}})});