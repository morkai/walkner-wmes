define(["app/i18n","app/core/View","app/kaizenOrders/dictionaries","../CountReport","../views/ReportFilterView","../views/TableAndChartView","../views/CountPerUserChartView","app/wmes-oshAudits/templates/countReportPage"],function(e,t,i,r,s,o,n,a){"use strict";return t.extend({layoutName:"page",template:a,breadcrumbs:function(){return[this.t("BREADCRUMB:browse"),this.t("BREADCRUMB:reports:count")]},initialize:function(){i.bind(this),this.setView("#-filter",new s({model:this.model})),r.TABLE_AND_CHART_METRICS.forEach(function(e){this.setView("#"+this.idPrefix+"-"+e,new o({metric:e,model:this.model}))},this),this.setView("#-auditors",new n({metric:"auditors",model:this.model})),this.listenTo(this.model,"filtered",this.onFiltered)},getTemplateData:function(){return{metrics:r.TABLE_AND_CHART_METRICS.concat("auditors")}},load:function(e){return e(this.model.fetch())},onFiltered:function(){this.promised(this.model.fetch()),this.broker.publish("router.navigate",{url:this.model.genClientUrl(),trigger:!1,replace:!0})}})});