define(["underscore","../broker","../router","../viewport","../user","../core/util/showDeleteFormPage"],function(e,s,i,a,t,r){"use strict";var o="css!app/wmes-oshAudits/assets/main",n="i18n!app/nls/wmes-oshAudits",p=t.auth("USER");i.map("/oshAuditCountReport",p,function(e){a.loadPage(["app/wmes-oshAudits/CountReport","app/wmes-oshAudits/pages/CountReportPage",o,"i18n!app/nls/reports",n],function(s,i){return new i({model:s.fromQuery(e.query)})})}),i.map("/oshAudits",p,function(e){a.loadPage(["app/core/pages/FilteredListPage","app/core/util/pageActions","app/kaizenOrders/dictionaries","app/wmes-oshAudits/OshAuditCollection","app/wmes-oshAudits/views/ListFilterView","app/wmes-oshAudits/views/ListView",o,n],function(s,i,a,t,r,o){return a.bind(new s({FilterView:r,ListView:o,collection:new t(null,{rqlQuery:e.rql}),actions:function(e){return[i.jump(this,this.collection),i.export(e,this,this.collection),i.add(this.collection,!1)]}}))})}),i.map("/oshAudits/:id",p,function(e){a.loadPage(["app/core/pages/DetailsPage","app/kaizenOrders/dictionaries","app/wmes-oshAudits/OshAudit","app/wmes-oshAudits/templates/details",o,n],function(s,i,a,t){return i.bind(new s({pageClassName:"page-max-flex",detailsTemplate:t,model:new a({_id:e.params.id})}))})}),i.map("/oshAudits;add",p,function(i){a.loadPage(["app/core/pages/AddFormPage","app/kaizenOrders/dictionaries","app/wmes-oshAudits/OshAudit","app/wmes-oshAudits/views/FormView",o,n],function(a,t,r,o){var n={};try{e.assign(n,JSON.parse(sessionStorage.getItem("AUD_LAST")))}catch(e){}finally{sessionStorage.removeItem("AUD_LAST")}return i.query.nearMiss&&(n.nearMiss=+i.query.nearMiss,s.publish("router.navigate",{url:"/oshAudits;add",trigger:!1,replace:!0})),t.bind(new a({pageClassName:"page-max-flex",FormView:o,model:new r(n)}))})}),i.map("/oshAudits/:id;edit",p,function(i){a.loadPage(["app/core/pages/EditFormPage","app/kaizenOrders/dictionaries","app/wmes-oshAudits/OshAudit","app/wmes-oshAudits/views/FormView",o,n],function(a,t,r,o){var n=new r({_id:i.params.id}),p={};try{e.assign(p,JSON.parse(sessionStorage.getItem("AUD_LAST")))}catch(e){}finally{sessionStorage.removeItem("AUD_LAST")}i.query.nearMiss&&(p.nearMiss=+i.query.nearMiss,s.publish("router.navigate",{url:"/oshAudits/"+i.params.id+";edit",trigger:!1,replace:!0}));var d=t.bind(new a({pageClassName:"page-max-flex",FormView:o,model:n}));return p._id===i.params.id&&d.listenToOnce(n,"sync",function(){e.assign(n.attributes,p)}),d})}),i.map("/oshAudits/:id;delete",p,e.partial(r,"app/wmes-oshAudits/OshAudit",e,e,{baseBreadcrumb:!0}))});