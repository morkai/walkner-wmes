// Part of <http://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["../time","../data/prodLines","../core/Collection","../core/util/matchesEquals","../core/util/matchesProdLine","./ProdShiftOrder"],function(e,r,t,o,s,i){"use strict";return t.extend({model:i,rqlQuery:function(r){return r.Query.fromObject({fields:{creator:0,losses:0},sort:{startedAt:-1},limit:15,selector:{name:"and",args:[{name:"ge",args:["startedAt",e.getMoment().subtract(1,"months").valueOf()]}]}})},hasOrMatches:function(e){return this.get(e._id)?!0:s(this.rqlQuery,e.prodLine)&&o(this.rqlQuery,"orderId",e.orderId)&&o(this.rqlQuery,"operationNo",e.operationNo)&&o(this.rqlQuery,"shift",e.shift)}})});