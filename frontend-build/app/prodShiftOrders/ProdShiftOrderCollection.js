define(["../time","../data/prodLines","../core/Collection","../core/util/matchesEquals","../core/util/matchesProdLine","../orgUnits/util/limitOrgUnits","./ProdShiftOrder"],function(r,e,t,i,o,s,d){"use strict";return t.extend({model:d,rqlQuery:function(e){var t=[{name:"ge",args:["startedAt",r.getMoment().subtract(1,"months").valueOf()]}];return s(t,{divisionType:"prod"}),e.Query.fromObject({fields:{creator:0,losses:0,"orderData.bom":0,"orderData.documents":0},sort:{startedAt:-1},limit:-1,selector:{name:"and",args:t}})},hasOrMatches:function(r){return!!this.get(r._id)||o(this.rqlQuery,r.prodLine)&&i(this.rqlQuery,"orderId",r.orderId)&&i(this.rqlQuery,"orderMrp",r.orderMrp)&&i(this.rqlQuery,"shift",r.shift)}})});