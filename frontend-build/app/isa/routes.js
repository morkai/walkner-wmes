// Part of <http://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["../router","../viewport","../user","./IsaShiftPersonnel","./IsaLineStateCollection","./IsaEventCollection","./pages/IsaLineStatePage","i18n!app/nls/isa"],function(e,n,t,a,l,s,i){"use strict";e.map("/isa",t.auth("LOCAL","ISA:VIEW"),function(e){n.showPage(new i({fullscreen:void 0!==e.query.fullscreen,model:{shiftPersonnel:new a(null,{current:!0}),lineStates:new l(null,{paginate:!1}),events:new s(null,{paginate:!1,rqlQuery:"sort(-time)&limit(50)"}),selectedResponder:null,moving:{}}}))}),e.map("/isa/events",t.auth("LOCAL","ISA:VIEW"),function(e){n.loadPage(["app/isa/pages/IsaEventListPage"],function(n){return new n({collection:new s(null,{rqlQuery:e.rql})})})}),e.map("/isa/requests",t.auth("LOCAL","ISA:VIEW"),function(e){n.loadPage(["app/isa/IsaRequestCollection","app/isa/pages/IsaRequestListPage"],function(n,t){return new t({collection:new n(null,{rqlQuery:e.rql})})})})});