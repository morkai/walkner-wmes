// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["../core/Collection","./KanbanEntry"],function(t,e){"use strict";return t.extend({model:e,paginate:!1,initialize:function(t,e){this.supplyAreas=e.supplyAreas,this.components=e.components,this.tableView=e.tableView,this.filtered=[],this.filteredMap={},this.tableView&&(this.tableView.on("change:filterMode",this.onFilterModeChange,this),this.tableView.on("change:filter",this.onFilterChange,this),this.tableView.on("change:sort",this.onSortChange,this),this.onFilterChange(),this.on("reset",this.onFilterChange))},setUpPubsub:function(t){},onFilterModeChange:function(){this.tableView.hasAnyFilter()&&this.onFilterChange()},onFilterChange:function(){var t=this.tableView.createFilter(this);this.filtered=[],this.filteredMap={};for(var e=0;e<this.length;++e){var i=this.models[e];t(i)&&(this.filtered.push(i),this.filteredMap[i.id]=i)}this.trigger("filter"),this.onSortChange()},onSortChange:function(){this.filtered.sort(this.tableView.createSort(this)),this.trigger("sort")}})});