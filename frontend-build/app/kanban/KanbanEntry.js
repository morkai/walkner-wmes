// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["../core/Model"],function(n){"use strict";return n.extend({urlRoot:"/kanban/entries",clientUrlRoot:"#kanban/entries",topicPrefix:"kanban.entries",privilegePrefix:"KANBAN",nlsDomain:"kanban",initialize:function(){this.serialized=null},serialize:function(n){if(this.serialized)return this.serialized;var i=this.toJSON(),t=n.supplyAreas.get(i.supplyArea),e=n.components.get(i.nc12);i.rowClassName=i.discontinued?"kanban-is-discontinued":"",e?(i.description=e.get("description"),i.storageBin=e.get("storageBin"),i.newStorageBin=e.get("newStorageBin"),i.minBinQty=e.get("minBinQty"),i.maxBinQty=e.get("maxBinQty"),i.replenQty=e.get("replenQty"),i.markerColor=e.get("markerColor")):(i.description="",i.storageBin="",i.newStorageBin="",i.minBinQty=0,i.maxBinQty=0,i.replenQty=0,i.markerColor=null),t?(i.family=t.get("name"),i.lineCount=t.get("lineCount"),i.lines=t.get("lines")):(i.family="",i.lineCount=0,i.lines=[]),i.workstationsTotal=0,i.invalidWorkstations=!1,i.invalidLocations=!1;for(var o=0;o<6;++o){var a=i.workstations[o],r=i.locations[o];i.workstationsTotal+=a,i.invalidWorkstations=i.invalidWorkstations||!a&&!!r,i.invalidLocations=i.invalidLocations||!r&&!!a}return i.workstationsTotal||(i.invalidWorkstations=!0,i.invalidLocations=!0),i.kanbanQtyUser=2*i.workstationsTotal,i.emptyFullCount=i.lineCount*i.kanbanQtyUser,i.stock=i.emptyFullCount*i.componentQty,i.kanbanIdCount=i.kanbanId.length,this.serialized=i}})});