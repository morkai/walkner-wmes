// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["../core/Model"],function(i){"use strict";return i.extend({urlRoot:"/kanban/entries",clientUrlRoot:"#kanban/entries",topicPrefix:"kanban.entries",privilegePrefix:"KANBAN",nlsDomain:"kanban",initialize:function(){this.serialized=null},serialize:function(i){if(this.serialized)return this.serialized;var n=this.toJSON(),t=i.supplyAreas.get(n.supplyArea),e=i.components.get(n.nc12);n.rowClassName=n.discontinued?"kanban-is-discontinued":"",e?(n.description=e.get("description"),n.storageBin=e.get("storageBin"),n.minBinQty=e.get("minBinQty"),n.maxBinQty=e.get("maxBinQty"),n.replenQty=e.get("replenQty")):(n.description="",n.storageBin="",n.minBinQty=0,n.maxBinQty=0,n.replenQty=0),t?(n.family=t.get("name"),n.lineCount=t.get("lineCount"),n.lines=t.get("lines")):(n.family="",n.lineCount=0,n.lines=[]),n.workstationsTotal=0,n.invalidWorkstations=!1,n.invalidLocations=!1;for(var o=0;o<6;++o){var a=n.workstations[o],s=n.locations[o];n.workstationsTotal+=a,n.invalidWorkstations=n.invalidWorkstations||!a&&!!s,n.invalidLocations=n.invalidLocations||!s&&!!a}return n.workstationsTotal||(n.invalidWorkstations=!0,n.invalidLocations=!0),n.kanbanQtyUser=2*n.workstationsTotal,n.emptyFullCount=n.lineCount*n.kanbanQtyUser,n.stock=n.emptyFullCount*n.componentQty,this.serialized=n}})});