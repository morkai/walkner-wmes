// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["../core/Model"],function(n){"use strict";return n.extend({urlRoot:"/kanban/entries",clientUrlRoot:"#kanban/entries",topicPrefix:"kanban.entries",privilegePrefix:"KANBAN",nlsDomain:"kanban",initialize:function(){this.serialized=null},serialize:function(n){if(this.serialized)return this.serialized;var t=this.toJSON(),e=n.supplyAreas.get(t.supplyArea),i=n.components.get(t.nc12);t.rowClassName=t.discontinued?"kanban-is-discontinued":"",i?(t.description=i.get("description"),t.storageBin=i.get("storageBin"),t.minBinQty=i.get("minBinQty"),t.maxBinQty=i.get("maxBinQty"),t.replenQty=i.get("replenQty")):(t.description="",t.storageBin="",t.minBinQty=0,t.maxBinQty=0,t.replenQty=0),e?(t.family=e.get("name"),t.lineCount=e.get("lines").length):(t.family="",t.lineCount=0),t.kanbanId?(t.kanbanIdEmpty=t.kanbanId+"2",t.kanbanIdFull=t.kanbanId+"5"):(t.kanbanIdEmpty="",t.kanbanIdFull=""),t.workstationsTotal=0;for(var a=0;a<6;++a)t.workstationsTotal+=t.workstations[a];return t.kanbanQtyUser=2*t.workstationsTotal,t.emptyFullCount=t.lineCount*t.kanbanQtyUser,t.stock=t.emptyFullCount*t.componentQty,this.serialized=t}})});