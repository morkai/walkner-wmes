// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["../core/Model"],function(n){"use strict";return n.extend({urlRoot:"/kanban/entries",clientUrlRoot:"#kanban/entries",topicPrefix:"kanban.entries",privilegePrefix:"KANBAN",nlsDomain:"kanban",initialize:function(){this.serialized=null},serialize:function(n){if(this.serialized)return this.serialized;var t=this.toJSON(),i=n.tableView.getFilter("workCenter"),e=n.supplyAreas.findByWorkCenters(t.supplyArea,i?i.data:[]),o=n.components.get(t.nc12);t.rowClassName=t.discontinued?"kanban-is-discontinued":"",o?(t.description=o.get("description"),t.storageBin=o.get("storageBin"),t.newStorageBin=o.get("newStorageBin"),t.minBinQty=o.get("minBinQty"),t.maxBinQty=o.get("maxBinQty"),t.replenQty=o.get("replenQty"),t.markerColor=o.get("markerColor")):(t.description="",t.storageBin="",t.newStorageBin="",t.minBinQty=0,t.maxBinQty=0,t.replenQty=0,t.markerColor=null),e?(t.supplyAreaId=e.id,t.workCenter=e.get("workCenter"),t.family=e.get("family"),t.lineCount=e.get("lineCount"),t.lines=e.get("lines")):(t.supplyAreaId=null,t.workCenter="",t.family="",t.lineCount=0,t.lines=[]),t.workstationsTotal=0,t.invalidWorkstations=!1,t.invalidLocations=!1;for(var a=0;a<6;++a){var r=t.workstations[a],s=t.locations[a];t.workstationsTotal+=r,t.invalidWorkstations=t.invalidWorkstations||!r&&!!s,t.invalidLocations=t.invalidLocations||!s&&!!r}return t.workstationsTotal||(t.invalidWorkstations=!0,t.invalidLocations=!0),t.kanbanQtyUser=2*t.workstationsTotal,t.emptyFullCount=t.lineCount*t.kanbanQtyUser,t.stock=t.emptyFullCount*t.componentQty,t.kanbanIdCount=t.kanbanId.length,this.serialized=t}})});