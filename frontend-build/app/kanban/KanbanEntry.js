// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["../core/Model"],function(n){"use strict";return n.extend({urlRoot:"/kanban/entries",clientUrlRoot:"#kanban/entries",topicPrefix:"kanban.entries",privilegePrefix:"KANBAN",nlsDomain:"kanban",initialize:function(){this.serialized=null},serialize:function(n){if(this.serialized)return this.serialized;var i=this.toJSON(),t=n.supplyAreas.get(i.supplyArea),a=n.components.get(i.nc12);i.rowClassName=i.discontinued?"kanban-is-discontinued":"",a?(i.description=a.get("description"),i.storageBin=a.get("storageBin"),i.minBinQty=a.get("minBinQty"),i.maxBinQty=a.get("maxBinQty"),i.replenQty=a.get("replenQty")):(i.description="",i.storageBin="",i.minBinQty=0,i.maxBinQty=0,i.replenQty=0),t?(i.family=t.get("name"),i.lineCount=t.get("lines").length):(i.family="",i.lineCount=0),i.kanbanId?(i.kanbanIdEmpty=i.kanbanId+"2",i.kanbanIdFull=i.kanbanId+"5"):(i.kanbanIdEmpty="",i.kanbanIdFull=""),i.workstationsTotal=0,i.invalidWorkstations=!1,i.invalidLocations=!1;for(var e=0;e<6;++e){var o=i.workstations[e],s=i.locations[e];i.workstationsTotal+=o,i.invalidWorkstations=i.invalidWorkstations||!o&&!!s,i.invalidLocations=i.invalidLocations||!s&&!!o}return i.workstationsTotal||(i.invalidWorkstations=!0,i.invalidLocations=!0),i.kanbanQtyUser=2*i.workstationsTotal,i.emptyFullCount=i.lineCount*i.kanbanQtyUser,i.stock=i.emptyFullCount*i.componentQty,this.serialized=i}})});