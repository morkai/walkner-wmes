define(["underscore","../time","../i18n","../core/Model","../xiconf/util/serializeXiconfLicenseFeatures","../licenses/util/compareVersions"],function(e,n,i,s,r,c){"use strict";return s.extend({urlRoot:"/xiconf/clients",clientUrlRoot:"#xiconf/clients",privilegePrefix:"XICONF",nlsDomain:"xiconfClients",serialize:function(s){var o=this.toJSON();o.className=o.connectedAt?"remote"===o.inputMode?"success":"warning":"danger",o.lastSeenAt=n.format(o.connectedAt||o.disconnectedAt,"L, LTS"),o.orderLink=o.order?'<a href="#xiconf/orders/'+o.order+'">'+o.order+"</a>":"-",e.isObject(o.license)?(o.features=r(o.license.features),o.license=o.license._id):o.features=null,o.license||(o.license="00000000-0000-0000-0000-000000000000"),!o.licenseError&&/^0000.+0000$/.test(o.license)&&(o.licenseError="NO_KEY");var t="licenses-id",l=o.license,a="#licenses/"+o.license,p=o.connectedAt?"a":"span";return o.licenseError&&(t+=" licenses-invalid",l+="\r\n"+i("licenses","error:"+o.licenseError)),o.shortLicense="<"+p+' class="'+t+'" title="'+l+'" href="'+a+'">'+o.license.substr(0,4)+"..."+o.license.substr(-4)+"</"+p+">",o.appVersionCmp=c(o.appVersion,s.appVersion),s&&s.appVersion&&o.appVersion&&-1===o.appVersionCmp&&(o.appVersion='<span class="licenses-version licenses-invalid" title="&lt; '+s.appVersion+'">'+o.appVersion+"</span>"),o.coreScannerDriver='<i class="fa '+(o.coreScannerDriver?"fa-thumbs-o-up":"fa-thumbs-down")+'" title="'+i("xiconfClients","coreScannerDriver:"+!!o.coreScannerDriver)+'"></i>',o}})});