define(["app/user","app/core/views/FilterView","app/core/util/forms/dateTimeRange","app/users/util/setUpUserSelect2","app/wmes-osh-common/dictionaries","app/wmes-osh-payouts/Payout","app/wmes-osh-payouts/templates/filter","app/core/util/ExpandableSelect"],function(e,t,i,s,a,n,p){"use strict";return t.extend({template:p,events:Object.assign({"click a[data-date-time-range]":i.handleRangeEvent,'change input[name="mode"]':function(){this.toggleMode()}},t.prototype.events),defaultFormData:function(){return{types:["kaizen","observation"]}},termToForm:{createdAt:i.rqlToForm,"recipients.id":(e,t,i)=>{i.recipient=t.args[1]},"companies.id":(e,t,i)=>{i.companies=t.args[1].join(",")},types:(e,t,i)=>{i[e]=t.args[1]}},initialize:function(){t.prototype.initialize.apply(this,arguments),this.once("afterRender",()=>{this.listenTo(this.companies,"reset",this.setUpCompaniesSelect2)})},serializeFormToQuery:function(e){i.formToRql(this,e);const t=this.$id("recipient").val();t.length&&e.push({name:"eq",args:["recipients.id",t]});const s=this.$id("types").val()||[];s.length&&s.length!==this.$id("types")[0].length&&e.push({name:"in",args:["types",s]});const a=this.$id("companies").select2("data")||[];a.length&&e.push({name:"in",args:["companies.id",a.map(e=>e.id)]})},afterRender:function(){t.prototype.afterRender.call(this),this.$(".is-expandable").expandableSelect(),s(this.$id("recipient"),{view:this,width:"300px"}),this.setUpCompaniesSelect2()},setUpCompaniesSelect2:function(){this.$id("companies").select2({width:"300px",multiple:!0,placeholder:" ",data:this.companies.map(e=>({id:e.id,text:e.get("label")}))})}})});