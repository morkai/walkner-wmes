define(["jquery","./time","./router","./viewport","./user","./core/util/getShiftStartInfo","./wmes-wiring/pages/WiringPage","i18n!app/nls/wmes-wiring"],function(e,t,n,a,r,i,o){"use strict";var l=r.auth("LOCAL","WIRING:VIEW");n.map("/",l,function(){var n=t.utc.getMoment(i(Date.now()).moment.subtract(1,"days").format("YYYY-MM-DD"),"YYYY-MM-DD"),r=e.ajax({url:"/wiring/orders?select(date)&sort(date)&limit(1)&status=in=(new,started,partial)&date=ge="+n.valueOf(),timeout:5e3});r.done(function(e){e.collection&&e.collection.length&&(n=t.utc.getMoment(e.collection[0].date))}),r.always(function(){a.showPage(new o({date:n.format("YYYY-MM-DD"),selectedMrp:null,fullscreen:!0}))})}),n.map("/wiring/:date",l,function(e){a.showPage(new o({date:e.params.date,selectedMrp:e.query.mrp,fullscreen:"1"===e.query.fullscreen}))})});