// Copyright (c) 2014, ≈Åukasz Walukiewicz <lukasz@walukiewicz.eu>. Some Rights Reserved.
// Licensed under CC BY-NC-SA 4.0 <http://creativecommons.org/licenses/by-nc-sa/4.0/>.
// Part of the walkner-wmes project <http://lukasz.walukiewicz.eu/p/walkner-wmes>

define(["../router","../viewport","../user","../core/util/showDeleteFormPage","./XiconfProgram","./XiconfProgramCollection","i18n!app/nls/xiconfPrograms"],function(o,r,e,a,i,n){var m=e.auth("XICONF:VIEW"),p=e.auth("XICONF:MANAGE");o.map("/xiconf/programs",m,function(o){r.loadPage(["app/xiconfPrograms/pages/XiconfProgramListPage"],function(r){return new r({collection:new n(null,{rqlQuery:o.rql})})})}),o.map("/xiconf/programs/:id",m,function(o){r.loadPage(["app/core/pages/DetailsPage","app/xiconfPrograms/views/XiconfProgramDetailsView"],function(r,e){return new r({DetailsView:e,model:new i({_id:o.params.id})})})}),o.map("/xiconf/programs;add",p,function(){r.loadPage(["app/core/pages/AddFormPage","app/xiconfPrograms/views/XiconfProgramFormView"],function(o,r){return new o({FormView:r,model:new i})})}),o.map("/xiconf/programs/:id;edit",p,function(o){r.loadPage(["app/core/pages/EditFormPage","app/xiconfPrograms/views/XiconfProgramFormView"],function(r,e){return new r({FormView:e,model:new i({_id:o.params.id})})})}),o.map("/xiconf/programs/:id;delete",p,a.bind(null,i))});