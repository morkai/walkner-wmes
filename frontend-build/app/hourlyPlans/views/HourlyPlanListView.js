define(["underscore","app/time","app/i18n","app/user","app/data/divisions","app/orgUnits/util/renderOrgUnitPath","app/core/views/ListView","app/core/util/html2pdf","app/printers/views/PrinterPickerView","app/hourlyPlans/templates/printableEntry"],function(i,e,t,n,r,s,a,o,l,c){"use strict";return a.extend({className:"is-clickable",remoteTopics:{"hourlyPlans.created":"refreshCollection","hourlyPlans.deleted":"onModelDeleted"},events:i.assign({"click .action-print":function(i){var e=this.collection.get(this.$(i.currentTarget).closest("tr").attr("data-id"));i.listAction={view:this,tag:"hourlyPlans"},l.listAction(i,function(i){e.fetch().done(function(){o(c(e.serializeToPrint()),i)})})}},a.prototype.events),serializeColumns:function(){return[{id:"division",className:"is-min",label:t("core","ORG_UNIT:division")},{id:"date",className:"is-min",label:t("hourlyPlans","property:date")},{id:"shift",label:t("hourlyPlans","property:shift")}]},serializeActions:function(){var i=this.collection;return function(e){var r=i.get(e._id),s=[a.actions.viewDetails(r),{id:"print",icon:"print",label:t("core","LIST:ACTION:print")}];return r.isEditable(n)&&s.push(a.actions.edit(r),a.actions.delete(r)),s}},serializeRows:function(){return this.collection.map(function(i){var n=r.get(i.get("division")),a=i.toJSON();return a.division=n?s(n,!1,!1):"?",a.date=e.format(a.date,"LL"),a.shift=t("core","SHIFT:"+a.shift),a})}})});