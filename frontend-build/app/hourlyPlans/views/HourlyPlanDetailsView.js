define(["underscore","app/core/View","app/hourlyPlans/templates/entry","i18n!app/nls/hourlyPlans"],function(e,t,n){return t.extend({template:n,idPrefix:"hourlyPlanDetails",initialize:function(){this.lastRefreshAt=0;var e=this;this.listenToOnce(this.model,"sync",function(){e.model.get("locked")||e.pubsub.subscribe("hourlyPlans.updated."+e.model.id,this.refreshModel.bind(this))})},serialize:function(){return e.extend(this.model.serialize(),{editable:!1})},afterRender:function(){this.listenToOnce(this.model,"change",this.render)},refreshModel:function(){var e=Date.now(),t=e-this.lastRefreshAt;1e3>t?this.timers.refresh||(this.timers.refresh=setTimeout(this.refreshModel.bind(this),1e3-t)):(this.lastRefreshAt=Date.now(),delete this.timers.refresh,this.promised(this.model.fetch()))}})});