define(["jquery","app/i18n","app/viewport","app/core/util/bindLoadingMessage","app/core/View","../HourlyPlan","../views/HourlyPlanFormView"],function(e,t,n,i,r,s,o){return r.extend({layoutName:"page",pageId:"hourlyPlanForm",breadcrumbs:[{label:t.bound("hourlyPlans","BREADCRUMBS:entryList"),href:"#hourlyPlans"},t.bound("hourlyPlans","BREADCRUMBS:entryForm")],actions:function(){var n=this;return[{type:"danger",label:t.bound("hourlyPlans","PAGE_ACTION:lock"),icon:"lock",callback:function(t){return n.lockEntry(e(t.target).closest(".btn")),!1}}]},initialize:function(){this.model=i(new s({_id:this.options.modelId}),this),this.view=new o({model:this.model})},load:function(e){return e(this.model.fetch())},lockEntry:function(e){e.hasClass("disabled")||(e.addClass("disabled"),this.socket.emit("hourlyPlans.lockEntry",this.model.id,function(i){return i?(console.error(i),e.removeClass("disabled"),n.msg.show({type:"error",time:5e3,text:t("hourlyPlans","msg:lockFailure")})):void 0}))}})});