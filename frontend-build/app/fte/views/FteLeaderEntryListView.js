define(["moment","app/i18n","app/user","app/data/subdivisions","app/data/views/renderOrgUnitPath","app/core/views/ListView","i18n!app/nls/fte"],function(e,t,n,i,r,s){return s.extend({remoteTopics:{"fte.leader.created":"refreshCollection","fte.leader.locked":"refreshCollection"},serializeColumns:function(){return[{id:"subdivision",label:t("core","ORG_UNIT:subdivision")},{id:"date",label:t(this.collection.getNlsDomain(),"property:date")},{id:"shift",label:t(this.collection.getNlsDomain(),"property:shift")}]},serializeActions:function(){var e=this.collection;return function(r){var o=e.get(r._id),a=[s.actions.viewDetails(o)],l=o.getPrivilegePrefix();if(r.locked)a.push({icon:"print",label:t(o.getNlsDomain(),"LIST:ACTION:print"),href:o.genClientUrl("print")});else if(n.isAllowedTo(l+":MANAGE")){if(!n.isAllowedTo(l+":ALL")){var c=n.getDivision(),u=i.get(o.get("subdivision"));if(c&&c.get("_id")!==u.get("division"))return a}a.push({icon:"edit",label:t(o.getNlsDomain(),"LIST:ACTION:edit"),href:o.genClientUrl("edit")})}return a}},serializeRows:function(){return this.collection.map(function(n){var s=i.get(n.get("subdivision")),o=n.toJSON();return o.subdivision=s?r(s,!1,!1):"?",o.date=e(o.date).format("LL"),o.shift=t("core","SHIFT:"+o.shift),o})}})});