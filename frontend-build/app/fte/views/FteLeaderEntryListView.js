define(["app/time","app/i18n","app/user","app/data/subdivisions","app/orgUnits/util/renderOrgUnitPath","app/core/views/ListView"],function(e,i,t,s,n,a){"use strict";return a.extend({className:"is-clickable",remoteTopics:{"fte.leader.created":"refreshCollection","fte.leader.deleted":"onModelDeleted"},serializeColumns:function(){return[{id:"subdivision",className:"is-min",label:i("core","ORG_UNIT:subdivision")},{id:"date",className:"is-min",label:i(this.collection.getNlsDomain(),"property:date")},{id:"shift",label:i(this.collection.getNlsDomain(),"property:shift")}]},serializeActions:function(){var e=this.collection;return function(s){var n=e.get(s._id),r=[a.actions.viewDetails(n)],o=n.isEditable(t);return"yes"===o?r.push(a.actions.edit(n),a.actions.delete(n)):"request"===o&&r.push({id:"requestChange",icon:"edit",label:i("fte","LIST:ACTION:requestChange"),href:n.genClientUrl()+"?change=1"}),r}},serializeRows:function(){return this.collection.map(function(t){var s=t.toJSON();return s.subdivision=t.getSubdivisionPath(),s.date=e.format(s.date,"LL"),s.shift=i("core","SHIFT:"+s.shift),s})}})});