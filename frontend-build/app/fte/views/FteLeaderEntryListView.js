define(["moment","app/i18n","app/user","app/data/subdivisions","app/data/views/renderOrgUnitPath","app/core/views/ListView"],function(e,t,n,i,r,o){return o.extend({remoteTopics:{"fte.leader.created":"refreshCollection","fte.leader.locked":"refreshCollection"},serializeColumns:function(){return[{id:"subdivision",label:t("core","ORG_UNIT:subdivision")},{id:"date",label:t(this.collection.getNlsDomain(),"property:date")},{id:"shift",label:t(this.collection.getNlsDomain(),"property:shift")}]},serializeActions:function(){var e=this.collection;return function(r){var s=e.get(r._id),a=[o.actions.viewDetails(s)],l=s.getPrivilegePrefix();if(r.locked)a.push({icon:"print",label:t(s.getNlsDomain(),"LIST:ACTION:print"),href:s.genClientUrl("print")});else if(n.isAllowedTo(l+":MANAGE")){if(!n.isAllowedTo(l+":ALL")){var u=n.getDivision(),c=i.get(s.get("subdivision"));if(u&&u.get("_id")!==c.get("division"))return a}a.push({icon:"edit",label:t(s.getNlsDomain(),"LIST:ACTION:edit"),href:s.genClientUrl("edit")})}return a}},serializeRows:function(){return this.collection.map(function(n){var o=i.get(n.get("subdivision")),s=n.toJSON();return s.subdivision=o?r(o,!1,!1):"?",s.date=e(s.date).format("LL"),s.shift=t("core","SHIFT:"+s.shift),s})}})});