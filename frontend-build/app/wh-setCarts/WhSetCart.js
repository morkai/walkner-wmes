define(["app/i18n","app/time","app/core/Model","app/core/templates/userInfo"],function(e,t,i,r){"use strict";var d=["date","completedAt","deliveringAt","deliveredAt"],n={completing:"warning",completed:"",delivering:"info",delivered:"success"};return i.extend({urlRoot:"/old/wh/setCarts",clientUrlRoot:"#wh/setCarts",topicPrefix:"old.wh.setCarts",privilegePrefix:"WH",nlsDomain:"wh-setCarts",serialize:function(){var i=this.toJSON();return i.className=n[i.status],i.status=e(this.nlsDomain,"status:"+i.status),i.kind=e(this.nlsDomain,"kind:"+i.kind),i.date=t.format(i.date,"L"),i.orders=i.orders.map(function(e){return e.sapOrder}).join("; "),i.completedAt=t.format(i.completedAt,"L LTS"),i.duration=i.deliveredAt&&i.deliveringAt?t.toString((Date.parse(i.deliveredAt)-Date.parse(i.deliveringAt))/1e3,!1,!1):"",i.deliveringAt=i.deliveringAt?t.format(i.deliveringAt,"L LTS"):"",i.deliveredAt=i.deliveredAt?t.format(i.deliveredAt,"L LTS"):"",i.completedBy=i.completedBy.map(function(e){return r({userInfo:e})}).join("; "),i.deliveringBy=r({userInfo:i.deliveringBy}),i.deliveredBy=r({userInfo:i.deliveredBy}),i}},{STATUSES:["completing","completed","delivering","delivered"],KINDS:["components","packaging"],parse:function(e){return d.forEach(function(t){e[t]&&(e[t]=new Date(e[t]))}),e.date&&e.set&&(e.setKey=e.date.getTime()+":"+e.set),e},isPartial:function(e){return void 0===e.status||void 0===e.date||void 0===e.kind||void 0===e.set||void 0===e.cart||void 0===e.users}})});