define(["underscore","app/i18n","app/time","app/core/Model","app/core/templates/userInfo"],function(e,t,i,r,n){"use strict";var d=["date","completedAt","deliveringAt","deliveredAt"],s={completing:"warning",completed:"",delivering:"info",delivered:"success"};return r.extend({urlRoot:"/old/wh/setCarts",clientUrlRoot:"#wh/setCarts",topicPrefix:"old.wh.setCarts",privilegePrefix:"WH",nlsDomain:"wh-setCarts",serialize:function(){var r=this.toJSON();return r.className=s[r.status],r.status=t(this.nlsDomain,"status:"+r.status),r.kind=t(this.nlsDomain,"kind:"+r.kind),r.date=i.format(r.date,"L"),r.orders=r.orders.map(function(e){return e.sapOrder}).join("; "),r.completedAt=i.format(r.completedAt,"L LTS"),r.duration=r.deliveredAt&&r.deliveringAt?i.toString((Date.parse(r.deliveredAt)-Date.parse(r.deliveringAt))/1e3,!1,!1):"",r.deliveringAt=r.deliveringAt?i.format(r.deliveringAt,"L LTS"):"",r.deliveredAt=r.deliveredAt?i.format(r.deliveredAt,"L LTS"):"",r.completedBy=r.completedBy.map(function(e){return n({userInfo:e})}).join("; "),r.deliveringBy=n({userInfo:r.deliveringBy}),r.deliveredBy=n({userInfo:r.deliveredBy}),r.redirLine&&(r.redirLine=r.redirLines.map(function(t,i){return e.escape(t)+" âžœ "+e.escape(r.lines[i])}).join("\n"),r.line='<i class="fa fa-arrow-right"></i><span>'+e.escape(r.line)+"</span>"),r}},{STATUSES:["completing","completed","delivering","delivered"],KINDS:["components","packaging"],parse:function(e){return d.forEach(function(t){e[t]&&(e[t]=new Date(e[t]))}),e.date&&e.set&&(e.setKey=e.date.getTime()+":"+e.set),e},isPartial:function(e){return void 0===e.status||void 0===e.date||void 0===e.kind||void 0===e.set||void 0===e.cart||void 0===e.users}})});