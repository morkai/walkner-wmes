define(["underscore","app/core/views/FilterView","app/core/util/idAndLabel","app/core/util/forms/dateTimeRange","app/users/util/setUpUserSelect2","../WhSetCart","app/wh-setCarts/templates/filter","app/core/util/ExpandableSelect"],function(e,t,s,a,r,i,n){"use strict";return t.extend({template:n,events:e.assign({"click a[data-date-time-range]":a.handleRangeEvent},t.prototype.events),termToForm:{date:a.rqlToForm,"orders.sapOrder":function(e,t,s){s.order=t.args[1]},status:function(e,t,s){s[e]=t.args[1]},kind:"status",users:"status"},destroy:function(){this.$(".is-expandable").expandableSelect("destroy")},getTemplateData:function(){return{STATUSES:i.STATUSES,KINDS:i.KINDS}},afterRender:function(){t.prototype.afterRender.apply(this,arguments),r(this.$id("users"),{width:"275px",view:this}),this.$(".is-expandable").expandableSelect()},serializeFormToQuery:function(e){var t=this.$id("users").val(),s=this.$id("status").val(),r=this.$id("kind").val(),n=this.$id("order").val();a.formToRql(this,e),t&&e.push({name:"eq",args:["users",t]}),s&&s.length!==i.STATUSES.length&&e.push({name:"in",args:["status",s]}),r&&e.push({name:"eq",args:["kind",r]}),/^[0-9]{9}$/.test(n)&&e.push({name:"eq",args:["orders.sapOrder",n]})}})});