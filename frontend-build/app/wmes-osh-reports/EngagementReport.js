define(["underscore","h5.rql/index","app/i18n","app/time","app/core/Model"],function(t,e,r,s,n){"use strict";return n.extend({urlRoot:"/osh/reports/engagement",nlsDomain:"wmes-osh-reports",defaults:function(){return{settings:{},userLabels:{},months:[],orgUnits:[],brigades:[],users:[]}},initialize:function(t,r){this.rqlQuery=r.rqlQuery&&!r.rqlQuery.isEmpty()?r.rqlQuery:e.parse(`date>=${s.getMoment().startOf("month").subtract(3,"months").valueOf()}`)},fetch:function(e){return t.isObject(e)||(e={}),e.data=this.rqlQuery.toString(),n.prototype.fetch.call(this,e)},genClientUrl:function(){return`${this.urlRoot}?${this.rqlQuery.toString()}`},parse:function(t){return{settings:t.settings,userLabels:t.userLabels,months:t.months,orgUnits:t.orgUnits,brigades:t.brigades,users:t.users}}})});