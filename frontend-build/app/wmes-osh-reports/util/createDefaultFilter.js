define(["h5.rql/index","app/time","app/user"],function(e,t,r){"use strict";return(a={})=>{const n=[];if("month"===a.dateProperty?n.push({name:"eq",args:["month",t.getMoment().format("YYYY-MM")]}):n.push({name:"ge",args:[a.dateProperty||"date",t.getMoment().startOf("month").valueOf()]},{name:"lt",args:[a.dateProperty||"date",t.getMoment().startOf("month").add(1,"months").valueOf()]}),a.interval&&n.push({name:"eq",args:["interval",a.interval]}),r.data.oshDepartment){let e="department";null!=a.orgUnitProperty&&(e="oshDepartment",a.orgUnitProperty.length&&(e=a.orgUnitProperty+"."+e)),n.push({name:"eq",args:[e,r.data.oshDepartment]})}else if(r.data.oshWorkplace){let e="workplace";null!=a.orgUnitProperty&&(e="oshWorkplace",a.orgUnitProperty.length&&(e=a.orgUnitProperty+"."+e)),n.push({name:"eq",args:[e,r.data.oshWorkplace]})}return e.Query.fromObject({selector:{name:"and",args:n}})}});