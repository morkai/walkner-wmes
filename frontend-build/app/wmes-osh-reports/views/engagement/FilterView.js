define(["app/core/views/FilterView","app/core/util/forms/dateTimeRange","app/users/util/setUpUserSelect2","app/wmes-osh-common/dictionaries","app/wmes-osh-common/views/OrgUnitPickerFilterView","app/wmes-osh-reports/templates/engagement/filter","app/core/util/ExpandableSelect"],function(e,t,i,r,a,n){"use strict";return e.extend({template:n,events:Object.assign({"click a[data-date-time-range]":t.handleRangeEvent},e.prototype.events),defaultFormData:function(){return{}},termToForm:{date:t.rqlToForm,leader:(e,t,i)=>{i[e]=t.args[1]}},initialize:function(){e.prototype.initialize.apply(this,arguments),this.setView("#-orgUnit",new a({filterView:this,emptyLabel:this.t("wmes-osh-reports","filter:orgUnit"),orgUnitTerms:{oshDivision:"division",oshWorkplace:"workplace",oshDepartment:"department"},orgUnitTypes:["division","workplace","department"]}))},getTemplateData:function(){return{}},serializeFormToQuery:function(e){t.formToRql(this,e),["leader"].forEach(t=>{const i=this.$id(t);let r=i.val();r&&r.length&&("string"==typeof r&&(r=r.split(",")),"SELECT"===i[0].tagName&&i[0].options.length===r.length||(1===(r=r.map(e=>/^[0-9]+$/.test(e)?parseInt(e,10):e)).length?e.push({name:"eq",args:[t,r[0]]}):e.push({name:"in",args:[t,r]})))})},afterRender:function(){e.prototype.afterRender.call(this),i(this.$id("leader"),{view:this,width:"300px"})}})});