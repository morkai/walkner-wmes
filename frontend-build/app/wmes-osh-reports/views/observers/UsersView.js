define(["jquery","app/time","app/core/View","app/core/templates/userInfo","app/wmes-osh-reports/util/formatPercent","app/wmes-osh-reports/templates/observers/users","jquery.stickytableheaders"],function(e,t,s,r,i,o){"use strict";return s.extend({template:o,initialize:function(){this.listenTo(this.model,"change:users",this.render),this.setUpTooltips(),this.setUpStickyTable()},getTemplateData:function(){const e=this.model.get("settings"),t=this.model.get("months"),s=[0,0,0,0,0,0,0,0,0,0];return{months:t,users:this.model.get("users").map(o=>({label:r(o),months:t.map(t=>{const r=o.months[t]||s,a=i(r[3]/r[1]);return{cards:r[0],cardsInvalid:r[0]<e.minObsCards,observations:r[1],safe:r[3],safePercent:a,safeInvalid:a<e.minSafeObs||a>e.maxSafeObs,risky:r[4]+r[7],easy:r[5]+r[8],hard:r[6]+r[9]}})}))}},setUpTooltips:function(){this.on("afterRender",()=>{this.$el.tooltip({container:document.body,selector:"th[title]"})}),this.on("beforeRender remove",()=>{this.$el.tooltip("destroy")})},setUpStickyTable:function(){this.on("afterRender",()=>{this.$(".table").stickyTableHeaders({fixedOffset:e(".navbar-fixed-top"),scrollableAreaX:this.$el})}),this.on("beforeRender remove",()=>{this.$(".table").stickyTableHeaders("destroy")})}})});