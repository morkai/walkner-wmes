define(["app/wmes-osh-common/dictionaries","../DataTableView","app/wmes-osh-reports/templates/observers/orgUnits"],function(e,r,t){"use strict";return r.extend({template:t,dataProperty:"orgUnits",freezeColumns:3,serializeRows:function(){const r=[],t=this.model.get("months")||[],s={employed:0,observers:0,observersPercent:0,engaged:0,engagedPercent:0,cardsPercent:0,safePercent:0,targets:{},metrics:[0,0,0,0,0,0,0,0,0,0]};return this.model.get("orgUnits").forEach(o=>{const a={orgUnit:o,type:o.department?"department":o.workplace?"workplace":o.division?"division":"overall",division:e.divisions.getLabel(o.division),workplace:e.workplaces.getLabel(o.workplace),department:e.departments.getLabel(o.department),months:t.map(e=>{const r=o.months[e];return r?{employed:r.employed,observers:r.observers,observersPercent:r.employed?Math.round(r.observers/r.employed*100):0,engaged:r.engaged,engagedPercent:r.observers?Math.round(r.engaged/r.observers*100):0,cardsPercent:r.employed?Math.round(r.metrics[0]/r.employed*100):0,safePercent:r.metrics[1]?Math.round(r.metrics[3]/r.metrics[1]*100):0,targets:r.targets,metrics:r.metrics}:s})};r.push(a)}),r.sort((e,r)=>e.division.localeCompare(r.division)||e.workplace.localeCompare(r.workplace)||e.department.localeCompare(r.department)),r}})});