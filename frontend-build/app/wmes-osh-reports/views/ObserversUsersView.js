define(["jquery","app/time","app/core/View","app/core/templates/userInfo","app/wmes-osh-reports/templates/observers/users","jquery.stickytableheaders"],function(e,t,s,r,i){"use strict";return s.extend({template:i,initialize:function(){this.listenTo(this.model,"change:users",this.render),this.setUpTooltips(),this.setUpStickyTable()},getTemplateData:function(){const e=this.model.get("settings"),t=this.model.get("months"),s=[0,0,0,0,0,0,0,0,0,0];return{months:t,users:this.model.get("users").map(i=>({label:r(i),months:t.map(t=>{const r=i.months[t]||s,o=Math.round(r[3]/r[1]*100)||0;return{cards:r[0],cardsInvalid:r[0]<e.minObsCards,observations:r[1],safe:r[3],safePercent:o,safeInvalid:o<e.minSafeObs||o>e.maxSafeObs,risky:r[4]+r[7],easy:r[5]+r[8],hard:r[6]+r[9]}})}))}},setUpTooltips:function(){this.on("afterRender",()=>{this.$el.tooltip({container:document.body,selector:"th[title]"})}),this.on("beforeRender remove",()=>{this.$el.popover("destroy")})},setUpStickyTable:function(){this.on("afterRender",()=>{this.$(".table").stickyTableHeaders({fixedOffset:e(".navbar-fixed-top"),scrollableAreaX:this.$el})}),this.on("beforeRender remove",()=>{this.$(".table").stickyTableHeaders("destroy")})}})});