define(["app/core/views/FilterView","app/core/util/forms/dateTimeRange","app/wmes-osh-common/dictionaries","app/wmes-osh-common/views/OrgUnitPickerFilterView","app/wmes-osh-reports/templates/metrics/filter","app/core/util/ExpandableSelect"],function(e,t,i,n,a){"use strict";return e.extend({template:a,events:Object.assign({"click a[data-date-time-range]":t.handleRangeEvent},e.prototype.events),defaultFormData:function(){return{}},termToForm:{date:t.rqlToForm},initialize:function(){e.prototype.initialize.apply(this,arguments),this.setView("#-orgUnit",new n({filterView:this,emptyLabel:this.t("wmes-osh-reports","filter:orgUnit"),orgUnitTerms:{oshDivision:"division",oshWorkplace:"workplace",oshDepartment:"department"},orgUnitTypes:["division","workplace","department"]}))},destroy:function(){e.prototype.destroy.call(this),this.$(".is-expandable").expandableSelect("destroy")},getTemplateData:function(){return{}},serializeFormToQuery:function(e){t.formToRql(this,e),[].forEach(t=>{const i=this.$id(t);let n=i.val();n&&n.length&&("string"==typeof n&&(n=n.split(",")),"SELECT"===i[0].tagName&&i[0].options.length===n.length||(1===(n=n.map(e=>/^[0-9]+$/.test(e)?parseInt(e,10):e)).length?e.push({name:"eq",args:[t,n[0]]}):e.push({name:"in",args:[t,n]})))})},afterRender:function(){e.prototype.afterRender.call(this),this.$(".is-expandable").expandableSelect()}})});