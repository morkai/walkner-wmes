define(["app/time","app/core/views/FilterView","app/wmes-osh-common/dictionaries","app/wmes-osh-common/views/OrgUnitPickerFilterView","app/wmes-osh-reports/templates/metrics/filter","app/core/util/ExpandableSelect"],function(e,t,i,n,o){"use strict";return t.extend({template:o,events:Object.assign({},t.prototype.events),defaultFormData:function(){return{month:e.getMoment().format("YYYY-MM")}},termToForm:{month:(e,t,i)=>{i.month=t.args[1]}},initialize:function(){t.prototype.initialize.apply(this,arguments),this.setView("#-orgUnit",new n({filterView:this,emptyLabel:this.t("wmes-osh-reports","filter:orgUnit"),orgUnitTypes:["division","workplace","department"],multiple:!1}))},destroy:function(){t.prototype.destroy.call(this),this.$(".is-expandable").expandableSelect("destroy")},getTemplateData:function(){return{}},serializeFormToQuery:function(e){["month"].forEach(t=>{const i=this.$id(t);let n=i.val();n&&n.length&&("string"==typeof n&&(n=n.split(",")),"SELECT"===i[0].tagName&&i[0].options.length===n.length||(1===(n=n.map(e=>/^[0-9]+$/.test(e)?parseInt(e,10):e)).length?e.push({name:"eq",args:[t,n[0]]}):e.push({name:"in",args:[t,n]})))})},afterRender:function(){t.prototype.afterRender.call(this),this.$(".is-expandable").expandableSelect()}})});