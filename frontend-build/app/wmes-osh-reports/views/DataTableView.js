define(["jquery","app/core/View"],function(e,t){"use strict";return t.extend({events:{"mouseenter tbody > tr":function(t){const o=t.currentTarget.parentNode.parentNode.classList.contains("DTFC_Cloned")?this.el.querySelector(".dataTables_scroll tbody"):this.el.querySelector(".DTFC_Cloned tbody");if(o){this.hoveredRows.push(o.children[e(t.currentTarget).index()]),this.hoveredRows.push(t.currentTarget);for(let e=0,t=this.hoveredRows.length;e<t;++e)this.hoveredRows[e].classList.add("is-hovered")}},"mouseleave tbody > tr":function(){for(;this.hoveredRows.length;)this.hoveredRows.shift().classList.remove("is-hovered")}},initialize:function(){this.hoveredRows=[],this.dataTable=null,this.fixedColumns=null,this.once("afterRender",()=>{this.listenTo(this.model,`change:${this.dataProperty}`,this.render)}),this.setUpTooltips(),this.setUpDataTable()},getTemplateData:function(){return{months:this.model.get("months")||[],rows:this.serializeRows(),n:e=>e>=0?(Math.round(100*e)/100).toLocaleString():""}},setUpTooltips:function(){this.on("afterRender",()=>{this.$el.tooltip({container:document.body,selector:"th[title]"})}),this.on("beforeRender remove",()=>{this.$el.tooltip("destroy")})},setUpDataTable:function(){this.on("afterRender",()=>{const t=this.$("table");t.length&&(this.dataTable=t.dataTable(this.getDataTableOptions()).DataTable(),this.fixedColumns=new e.fn.dataTable.FixedColumns(this.dataTable,{leftColumns:this.freezeColumns||0,heightMatch:"none"}))}),this.on("beforeRender remove",()=>{this.dataTable&&this.dataTable.destroy()})},serializeRows:function(){return[]},getDataTableOptions:function(){return{autoWidth:!1,info:!1,ordering:!1,orderMulti:!1,paging:!1,processing:!1,searching:!1,scrollX:!0,scrollY:Math.min(555,Math.ceil(.7*window.innerHeight)),scrollCollapse:!0,language:{emptyTable:this.getEmptyTableMessage()}}},getEmptyTableMessage:function(){const e=this;function t(){return e.model.currentReadRequest?e.t("core","dataTables:loadingRecords"):e.t("core","dataTables:emptyTable")}return t.toString=t,t}})});