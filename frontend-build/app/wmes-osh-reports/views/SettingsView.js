define(["app/users/util/setUpUserSelect2","app/settings/views/SettingsView","app/wmes-osh-reports/templates/settings"],function(e,s,t){"use strict";return s.extend({template:t,nlsDomain:"wmes-osh-reports",clientUrl:"#osh/reports;settings",events:Object.assign({"change #-rewards-ignoredUsers":function(){const s=e.getUserInfo(this.$id("rewards-ignoredUsers"));this.updateSetting("osh.rewards.ignoredUsers",s)}},s.prototype.events),afterRender:function(){s.prototype.afterRender.apply(this,arguments),this.setUpIgnoredUsers(),this.updateCompaniesRows()},setUpIgnoredUsers:function(){e(this.$id("rewards-ignoredUsers"),{view:this,multiple:!0,currentUserInfo:this.settings.getValue("rewards.ignoredUsers",[])})},shouldAutoUpdateSettingField:function(e){return!e.id.includes("rewards.ignoredUsers")},updateSettingField:function(e){e.id.includes("rewards.ignoredUsers")&&this.$id("rewards-ignoredUsers").select2("data",e.getValue().map(e=>({id:e.id,text:e.label})))},onSettingsChange:function(e){s.prototype.onSettingsChange.apply(this,arguments),e.id.includes("rewards.companies")&&this.updateCompaniesRows()},updateCompaniesRows:function(){const e=Math.max(10,this.settings.getValue("rewards.companies",[]).length+1);this.$id("rewards-companies").prop("rows",e)}})});