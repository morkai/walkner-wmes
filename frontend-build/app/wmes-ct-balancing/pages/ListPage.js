define(["underscore","app/core/pages/FilteredListPage","app/core/util/pageActions","app/core/util/bindLoadingMessage","app/wmes-ct-balancing/BalancingPceReport","app/wmes-ct-balancing/views/FilterView","app/wmes-ct-balancing/views/ListView","app/wmes-ct-balancing/views/BalancingPceChartView","app/wmes-ct-balancing/templates/listPage"],function(e,t,i,r,n,o,a,s,l){"use strict";return t.extend({template:l,pageClassName:"page-max-flex",baseBreadcrumb:"#ct",actions:function(e){return[i.export(e,this,this.collection)]},FilterView:o,ListView:a,initialize:function(){t.prototype.initialize.apply(this,arguments),this.report=r(new n,this),this.reportView=new s({model:this.report}),this.setView(".report-container",this.reportView),this.listenTo(this.listView,"reloadNeeded",e.debounce(this.reloadReport.bind(this),100))},load:function(e){return this.collection.getProductFilter()?e(this.collection.fetch({reset:!0}),this.report.fetch({rqlQuery:this.collection.rqlQuery})):e()},afterRender:function(){t.prototype.afterRender.apply(this,arguments)},onFilterChanged:function(){t.prototype.onFilterChanged.apply(this,arguments),this.reloadReport()},reloadReport:function(){this.promised(this.report.fetch({rqlQuery:this.collection.rqlQuery}))}})});