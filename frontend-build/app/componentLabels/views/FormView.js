define(["app/core/views/FormView","app/core/util/idAndLabel","app/data/orgUnits","../ComponentLabel","app/componentLabels/templates/form"],function(e,t,r,n,i){"use strict";return e.extend({template:i,getTemplateData:function(){return{TEMPLATES:n.TEMPLATES}},afterRender:function(){e.prototype.afterRender.apply(this,arguments),this.$id("lines").select2({width:"100%",allowClear:!0,multiple:!0,placeholder:" ",data:r.getActiveByType("prodLine").map(t)})},serializeToForm:function(){var e=this.model.toJSON();return e.lines=(e.lines||[]).join(","),e},serializeForm:function(e){return e.lines=(e.lines||"").split(",").filter(e=>e.length),e},handleFailure:function(t){return"DUPLICATE_KEY"===(t.responseJSON&&t.responseJSON.error&&t.responseJSON.error.code)?this.showErrorMessage(this.t("FORM:ERROR:duplicate")):e.prototype.handleFailure.apply(this,arguments)}})});