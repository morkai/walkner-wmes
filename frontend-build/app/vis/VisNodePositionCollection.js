define(["../core/Collection","./VisNodePosition"],function(t,e){"use strict";return t.extend({model:e,subscribe:function(t){t.subscribe("vis.nodePositions.updated",this.onUpdated.bind(this))},getPosition:function(t){var e=this.get(t);return e?{fixed:!0,x:e.get("x"),y:e.get("y")}:{fixed:!1,x:0,y:0}},update:function(t,i,n){var s=this.get(t)||new e({_id:t,x:null,y:null});if(s.same(i,n))return null;this.add(s);var d=s.attributes,o=s.save({x:i,y:n});return o.fail(function(){s.set(d)}),o},onUpdated:function(t){this.add(t,{merge:!0})}})});