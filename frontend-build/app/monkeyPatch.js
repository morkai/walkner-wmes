define(["underscore","jquery","backbone","bootstrap","select2"],function(t,o,s){"use strict";var n=s.sync;s.sync=function(t,o,s){return s.syncMethod=t,n.call(this,t,o,s)},o.fn.modal.Constructor.prototype.enforceFocus=function(){},o.fn.modal.Constructor.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",o.proxy(function(t){27!==t.which||this.$element.hasClass("modal-no-keyboard")||this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},o.fn.modal.Constructor.prototype.backdrop=function(t){var s=this,n=s.$element.hasClass("fade")?"fade":"";if(s.isShown&&s.options.backdrop){var e=o.support.transition&&n;if(s.$backdrop=o('<div class="modal-backdrop '+n+'" />').prependTo(s.$element).on("click.dismiss.bs.modal",function(t){t.target===t.currentTarget&&("static"===s.options.backdrop||s.$element.hasClass("modal-static")?s.$element[0].focus.call(s.$element[0]):s.hide.call(s))}),e&&s.$backdrop[0].offsetWidth,s.$backdrop.addClass("in"),!t)return;e?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(o.fn.modal.Constructor.BACKDROP_TRANSITION_DURATION):t()}else if(!s.isShown&&s.$backdrop){s.$backdrop.removeClass("in");var i=function(){s.removeBackdrop(),t&&t()};o.support.transition&&s.$element.hasClass("fade")?s.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(o.fn.modal.Constructor.BACKDROP_TRANSITION_DURATION):i()}else t&&t()},o.fn.modal.Constructor.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight||"scroll"===o(document.body).css("overflow-y"),this.scrollbarWidth=this.measureScrollbar()},o.fn.popover.Constructor.prototype.hasContent=function(){return"function"==typeof this.options.hasContent?!!this.options.hasContent.call(this.$element[0]):!!this.options.hasContent||(!!this.getTitle()||!!this.getContent())},o.fn.popover.Constructor.prototype.tip=function(){if(this.$tip)return this.$tip;var t=this.options.template;return"function"==typeof t&&(t=t.call(this.$element[0],o.fn.popover.Constructor.DEFAULTS.template)),this.$tip="string"==typeof t?o(t):t,this.options.css&&this.$tip.css(this.options.css),this.options.contentCss&&this.$tip.find(".popover-content").first().css(this.options.contentCss),this.options.className&&this.$tip.addClass(this.options.className),this.$tip},o.fn.popover.Constructor.prototype.getTitle=function(){var t=this.$element,o=this.options;return o.title?"function"==typeof o.title?o.title.call(t[0]):o.title:t.attr("data-original-title")||""};var e=o(document.body);return o.fn.select2.defaults.dropdownContainer=function(t){var o=t.container.closest(".modal-body");if(0===o.length)return e;var s=o.closest(".modal-dialog");return 0===s.length?e:s},e.on("click","label[for]",function(t){var s=o("#"+t.currentTarget.htmlFor);s.data("select2")&&!s.parent().hasClass("has-required-select2")&&s.select2("focus")}),{}});