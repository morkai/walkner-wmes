// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["underscore","../router","../viewport","../user","../core/util/showDeleteFormPage","./KaizenOrder"],function(e,r,a,n,i,o){"use strict";var p="i18n!app/nls/kaizenOrders",t=n.auth(),s=n.auth("LOCAL","USER");r.map("/kaizenReport",t,function(e){a.loadPage(["app/kaizenOrders/KaizenOrderReport","app/kaizenOrders/pages/KaizenOrderReportPage","i18n!app/nls/reports",p],function(r,a){return new a({model:r.fromQuery(e.query)})})}),r.map("/kaizenSummaryReport",t,function(e){a.loadPage(["app/kaizenOrders/KaizenOrderSummaryReport","app/kaizenOrders/pages/KaizenOrderSummaryReportPage","i18n!app/nls/reports","i18n!app/nls/suggestions",p],function(r,a){return new a({model:r.fromQuery(e.query)})})}),r.map("/kaizenEngagementReport",t,function(e){a.loadPage(["app/suggestions/SuggestionEngagementReport","app/suggestions/pages/SuggestionEngagementReportPage","i18n!app/nls/reports","i18n!app/nls/suggestions",p],function(r,a){return new a({baseBreadcrumbNls:"kaizenOrders",model:r.fromQuery(e.query)})})}),r.map("/kaizenMetricsReport",t,function(e){a.loadPage(["app/kaizenOrders/KaizenMetricsReport","app/kaizenOrders/pages/KaizenMetricsReportPage","i18n!app/nls/reports","i18n!app/nls/suggestions",p],function(r,a){return new a({model:r.fromQuery(e.query)})})}),r.map("/kaizenHelp",function(){a.loadPage(["app/core/View","app/kaizenOrders/templates/help",p],function(e,r){return new e({layoutName:"page",template:r})})}),r.map("/kaizenOrders",t,function(e){a.loadPage(["app/kaizenOrders/KaizenOrderCollection","app/kaizenOrders/pages/KaizenOrderListPage",p],function(r,a){return new a({collection:new r(null,{rqlQuery:e.rql})})})}),r.map("/kaizenOrders/:id",s,function(e){a.loadPage(["app/kaizenOrders/pages/KaizenOrderDetailsPage","app/kaizenOrders/views/KaizenOrderThankYouView",p],function(r,n){var i=new r({model:new o({_id:e.params.id}),standalone:!!e.query.standalone});return"you"===e.query.thank&&i.once("afterRender",function(){i.broker.publish("router.navigate",{url:"/kaizenOrders/"+i.model.id,trigger:!1,replace:!0}),a.showDialog(new n)}),i})}),r.map("/kaizenOrders;add",s,function(e){a.loadPage(["app/kaizenOrders/pages/KaizenOrderAddFormPage",p],function(r){var a=null;try{a=JSON.parse(decodeURIComponent(atob(e.query.operator)))}catch(e){}return new r({model:new o,standalone:!!e.query.standalone,operator:a})})}),r.map("/kaizenOrders/:id;edit",t,function(e){a.loadPage(["app/kaizenOrders/pages/KaizenOrderEditFormPage",p],function(r){return new r({model:new o({_id:e.params.id})})})}),r.map("/kaizenOrders/:id;delete",t,e.partial(i,o,e,e,{baseBreadcrumb:!0}))});