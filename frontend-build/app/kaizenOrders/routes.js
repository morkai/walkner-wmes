define(["underscore","../router","../viewport","../user","../core/util/showDeleteFormPage","./KaizenOrder"],function(e,n,a,r,i,o){"use strict";var t="css!app/kaizenOrders/assets/main",s="i18n!app/nls/kaizenOrders",p=r.auth(),d=r.auth("KAIZEN:DICTIONARIES:MANAGE"),u=r.auth("LOCAL","USER");n.map("/kaizenReport",p,function(e){a.loadPage(["app/kaizenOrders/KaizenOrderReport","app/kaizenOrders/pages/KaizenOrderReportPage","css!app/suggestions/assets/main",t,"i18n!app/nls/reports",s],function(n,a){return new a({model:n.fromQuery(e.query)})})}),n.map("/kaizenSummaryReport",p,function(e){a.loadPage(["app/kaizenOrders/KaizenOrderSummaryReport","app/kaizenOrders/pages/KaizenOrderSummaryReportPage","css!app/suggestions/assets/main",t,"i18n!app/nls/reports","i18n!app/nls/suggestions",s],function(n,a){return new a({model:n.fromQuery(e.query)})})}),n.map("/kaizenEngagementReport",p,function(e){a.loadPage(["app/suggestions/SuggestionEngagementReport","app/suggestions/pages/SuggestionEngagementReportPage",t,"i18n!app/nls/reports","i18n!app/nls/suggestions",s],function(n,a){return new a({baseBreadcrumbNls:"kaizenOrders",model:n.fromQuery(e.query)})})}),n.map("/kaizenMetricsReport",p,function(e){a.loadPage(["app/kaizenOrders/KaizenMetricsReport","app/kaizenOrders/pages/KaizenMetricsReportPage",t,"i18n!app/nls/reports","i18n!app/nls/suggestions",s],function(n,a){return new a({model:n.fromQuery(e.query)})})}),n.map("/kaizenHelp",function(){a.loadPage(["app/core/View","app/kaizenOrders/templates/help",t,s],function(e,n){return new e({layoutName:"page",template:n})})}),n.map("/kaizenOrders",u,function(e){a.loadPage(["app/kaizenOrders/KaizenOrderCollection","app/kaizenOrders/pages/KaizenOrderListPage",t,s],function(n,a){return new a({collection:new n(null,{rqlQuery:e.rql})})})}),n.map("/kaizenOrders/:id",u,function(e){a.loadPage(["app/kaizenOrders/pages/KaizenOrderDetailsPage","app/kaizenOrders/views/KaizenOrderThankYouView",t,s],function(n,r){var i=new n({model:new o({_id:e.params.id}),standalone:!!e.query.standalone});return"you"===e.query.thank&&i.once("afterRender",function(){i.broker.publish("router.navigate",{url:"/kaizenOrders/"+i.model.id,trigger:!1,replace:!0}),a.showDialog(new r({model:i.model}))}),i})}),n.map("/kaizenOrders;add",u,function(e){a.loadPage(["app/kaizenOrders/pages/KaizenOrderAddFormPage",t,s],function(n){var a=null;try{a=JSON.parse(decodeURIComponent(atob(e.query.operator)))}catch(e){}var r=!!e.query.standalone,i="WMES_STANDALONE_CLOSE_TIMER";return r&&void 0===window[i]&&(clearTimeout(window[i]),window.onblur=function(){clearTimeout(window[i]),window[i]=setTimeout(function(){window.close()},6e4)},window.onfocus=function(){clearTimeout(window[i])}),new n({model:new o,standalone:r,operator:a})})}),n.map("/kaizenOrders/:id;edit",p,function(e){a.loadPage(["app/kaizenOrders/pages/KaizenOrderEditFormPage",t,s],function(n){return new n({model:new o({_id:e.params.id})})})}),n.map("/kaizenOrders/:id;delete",p,e.partial(i,o,e,e,{baseBreadcrumb:!0})),n.map("/kaizenOrders;settings",d,function(e){a.loadPage(["app/kaizenOrders/pages/KaizenSettingsPage",s],function(n){return new n({initialTab:e.query.tab})})})});