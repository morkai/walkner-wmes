define(["app/i18n","app/highcharts","app/core/View","app/kaizenOrders/dictionaries","app/suggestions/views/SuggestionSummaryReportFilterView","app/suggestions/views/SuggestionAverageDurationChartView","app/suggestions/views/SuggestionSummaryCountChartView","app/suggestions/views/SuggestionSummaryPerUserChartView","app/kaizenOrders/templates/summaryReportPage"],function(e,t,i,r,s,a,n,o,u){"use strict";return i.extend({layoutName:"page",template:u,breadcrumbs:[e.bound("kaizenOrders","BREADCRUMBS:base"),e.bound("kaizenOrders","BREADCRUMBS:reports:summary")],initialize:function(){this.setView(".filter-container",new s({model:this.model})),this.setView(".kaizenOrders-report-summary-averageDuration",new a({model:this.model})),this.setView(".kaizenOrders-report-summary-count",new n({model:this.model})),this.setView(".kaizenOrders-report-summary-nearMissOwners",new o({metric:"nearMissOwners",model:this.model,top:15,unlimitedType:"column"})),this.listenTo(this.model,"filtered",this.onFiltered),this.listenTo(this.model,"change:total",this.updateSubtitles)},destroy:function(){r.unload()},load:function(e){return r.loaded?e(this.model.fetch()):r.load().then(this.model.fetch.bind(this.model))},afterRender:function(){r.load(),this.updateSubtitles()},onFiltered:function(){this.promised(this.model.fetch()),this.broker.publish("router.navigate",{url:this.model.genClientUrl(),trigger:!1,replace:!0})},updateSubtitles:function(){var i=this.model.get("total");this.$id("averageDuration").html(e("kaizenOrders","report:subtitle:summary:averageDuration",{averageDuration:t.numberFormat(i.averageDuration,2)})),this.$id("count").html(e("kaizenOrders","report:subtitle:summary:count",i.count))}})});