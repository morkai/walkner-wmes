define(["app/i18n","app/core/views/ListView"],function(e,s){"use strict";function t(e,s){return e.observer&&e.observer.notify&&e.observer.changes&&e.observer.changes[s.id]?{className:"is-changed"}:{}}return s.extend({className:"kaizenOrders-list is-clickable is-colored",serializeColumns:function(){var e=!!this.options.simple,s=[{id:"rid",className:"is-min is-number"}];return window.KAIZEN_MULTI&&s.push({id:"types",className:"is-min"}),s.push({id:"status",tdAttrs:e?{}:t,className:"is-min"},{id:"subject",className:e?"has-popover":"is-overflow w250 has-popover",tdAttrs:t,label:this.t("PROPERTY:subjectAndDescription")}),e?s:(s.push({id:"eventDate",className:"is-min",tdAttrs:t},{id:"area",className:"is-overflow w200",tdAttrs:t},{id:"cause",className:"is-overflow w225",tdAttrs:t},{id:"risk",className:"is-min",tdAttrs:t},{id:"nearMissCategory",className:"is-overflow w200",tdAttrs:t}),window.KAIZEN_MULTI&&s.push({id:"suggestionCategory",className:"is-overflow w200",tdAttrs:t}),s.push({id:"section",className:"is-overflow w200",tdAttrs:t},{id:"confirmer",className:"is-min",tdAttrs:t},{id:"owners",className:"is-min has-popover",label:this.t("PROPERTY:nearMissOwners")},"-"),s)},serializeActions:function(){var e=this.collection;return this.options.simple?null:function(t){var i=e.get(t._id),r=[s.actions.viewDetails(i)];return i.canEdit()&&r.push(s.actions.edit(i)),i.canDelete()&&r.push(s.actions.delete(i)),r}},afterRender:function(){s.prototype.afterRender.call(this);var e=this;this.$el.popover({selector:".has-popover",container:this.el,trigger:"hover",placement:function(e,s){return"subject"===s.dataset.id?"auto right":"auto left"},html:!0,content:function(){var s=e.collection.get(this.parentNode.dataset.id);return"subject"===this.dataset.id?s.get("description"):"owners"===this.dataset.id?e.serializeOwnersPopoverContent(s):void 0}})},serializeOwnersPopoverContent:function(e){var s=e.get("owners");if(!(s.length<=1)){for(var t='<ul class="kaizenOrders-list-owners">',i=0;i<s.length;++i)t+="<li>"+s[i].rendered;return t+="</ul>"}}})});