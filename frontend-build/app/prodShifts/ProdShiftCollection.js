define(["../time","../data/prodLines","../core/Collection","../core/util/matchesProdLine","../core/util/matchesEquals","../orgUnits/util/limitOrgUnits","./ProdShift"],function(e,t,i,r,s,n,o){"use strict";return i.extend({model:o,rqlQuery:function(t){var i=[{name:"ge",args:["date",e.getMoment().subtract(1,"week").startOf("day").valueOf()]}];return n(i,{divisionType:"prod",subdivisionType:"assembly"}),t.Query.fromObject({fields:{},sort:{date:-1},limit:-1,selector:{name:"and",args:i}})},hasOrMatches:function(e){return!!this.get(e._id)||r(this.rqlQuery,e.prodLine)&&s(this.rqlQuery,"shift",e.shift)}})});