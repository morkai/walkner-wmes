// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["app/core/views/ListView","app/data/prodLines","app/orgUnits/util/renderOrgUnitPath"],function(e,i,t){"use strict";return e.extend({className:"prodShifts-list is-clickable",remoteTopics:{"prodShifts.created.*":"refreshIfMatches","prodShifts.updated.*":"refreshIfMatches","prodShifts.deleted.*":"refreshIfMatches"},columns:[{id:"mrpControllers",className:"is-min"},{id:"prodFlow",className:"is-min"},{id:"prodLine",className:"is-min"},{id:"date",className:"is-min"},{id:"shift",className:"is-min"},{id:"totalQuantityDone",className:"is-min is-number"},{id:"efficiency",className:"is-min is-number"},{id:"fill",label:"&nbsp;"}],serializeRow:function(e){return e.serialize({orgUnits:!0,totalQuantityDone:!0})},serializeActions:function(){var i=this.collection;return function(t){return[e.actions.viewDetails(i.get(t._id))]}},afterRender:function(){e.prototype.afterRender.call(this);var s=this;this.$('.list-item > td[data-id="prodLine"]').popover({container:this.el,trigger:"hover",placement:"auto right",html:!0,content:function(){return t(i.get(s.$(this).text().trim()),!1,!1).split(" \\ ").join("<br>\\ ")}})},refreshIfMatches:function(e){this.collection.hasOrMatches(e)&&this.refreshCollection()}})});