define(["underscore","jquery","app/time","app/i18n","app/core/View","app/highcharts"],function(e,t,n,r,i,o){return i.extend({initialize:function(){this.chart=null,this.listenTo(this.model,"change:quantitiesDone",this.updateChart)},destroy:function(){null!==this.chart&&(this.chart.destroy(),this.chart=null)},afterRender:function(){this.chart||setTimeout(this.createChart.bind(this),1)},createChart:function(){var e=this.serializeChartData();this.chart=new o.Chart({chart:{renderTo:this.el},title:{text:r("prodShifts","charts:quantitiesDone:title"),style:{fontSize:"18px",color:"#333"}},noData:{},tooltip:{shared:!0},xAxis:{categories:e.categories},yAxis:{title:!1},plotOptions:{column:{tooltip:{valueSuffix:r("prodShifts","charts:quantitiesDone:unit")}}},series:[{name:r("prodShifts","charts:quantitiesDone:series:planned"),type:"column",data:e.planned},{name:r("prodShifts","charts:quantitiesDone:series:actual"),type:"column",data:e.actual}]}),this.chart.reflow()},updateChart:function(){if(this.chart){var e=this.serializeChartData();this.chart.series[0].setData(e.planned,!0),this.chart.series[1].setData(e.actual,!0)}},serializeChartData:function(){for(var e={categories:[],planned:[],actual:[]},t=Date.parse(this.model.get("date")),r=0;8>r;++r)e.categories.push(n.format(t,"HH:mm")),t+=36e5;return this.model.get("quantitiesDone").forEach(function(t){e.planned.push(t.planned),e.actual.push(t.actual)}),e}})});