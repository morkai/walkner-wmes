// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["app/i18n","app/core/util/bindLoadingMessage","app/core/View","../XiconfResult","../views/XiconfResultDetailsView","app/xiconf/templates/downloadAction"],function(e,t,i,n,l,o){"use strict";return i.extend({layoutName:"page",pageId:"xiconfResultDetails",remoteTopics:{"xiconf.results.synced":function(e){var t=this.model.get("order");Array.isArray(e.orders)&&t&&-1!==e.orders.indexOf(t._id)&&this.promised(this.model.fetch())},"xiconf.results.toggled":function(e){this.model.id===e.resultId&&this.model.set("cancelled",e.cancelled)}},breadcrumbs:function(){return[e.bound("xiconf","BREADCRUMBS:base"),{label:e.bound("xiconf","BREADCRUMBS:browse"),href:this.model.genClientUrl("base")},e.bound("xiconf","BREADCRUMBS:details")]},actions:function(){var e=this.model,t=e.get("workflow"),i=e.get("feature"),n=e.get("gprsOrderFile"),l=e.get("gprsInputFile"),r=e.get("gprsOutputFile"),s=e.url()+";";return[{template:function(){return o({files:{gprsOrderFile:n&&n.length?s+"gprsOrder":null,workflow:t&&t.length?s+"workflow":null,feature:i&&i.length?s+"feature":null,gprsInputFile:l&&l.length?s+"gprsInput":null,gprsOutputFile:r&&r.length?s+"gprsOutput":null}})}}]},initialize:function(){this.model=t(new n({_id:this.options.modelId}),this),this.view=new l({model:this.model,tab:this.options.tab})},load:function(e){return e(this.model.fetch())}})});