// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["underscore","../time","../core/Collection","./XiconfResult"],function(s,r,e,t){"use strict";return e.extend({model:t,rqlQuery:function(s){var e=r.getMoment().hours(0).minutes(0).seconds(0).milliseconds(0).subtract(7,"days").valueOf();return s.Query.fromObject({fields:{log:0,metrics:0,leds:0},sort:{startedAt:-1},limit:20,selector:{name:"and",args:[{name:"ge",args:["startedAt",e]}]}})},initialize:function(){this.srcIds=null},parse:function(r){if(Array.isArray(r.srcIds)){var t=null===this.srcIds,i=!s.isEqual(r.srcIds,this.srcIds);this.srcIds=r.srcIds,!t&&i&&this.trigger("change:srcIds")}return e.prototype.parse.call(this,r)}})});