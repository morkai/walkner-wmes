define(["app/i18n","app/time","app/user","app/core/Model","app/core/templates/userInfo","app/wmes-osh-common/dictionaries"],function(e,t,i,s,r,o){"use strict";return s.extend({urlRoot:"/osh/brigades",clientUrlRoot:"#osh/brigades",topicPrefix:"osh.brigades",privilegePrefix:"OSH:HR",nlsDomain:"wmes-osh-brigades",getLabel:function(){return t.utc.format(this.get("date"),"YYYY-MM")+", "+this.get("leader").label},serialize:function(){const i=this.toJSON();return i.date=t.utc.format(i.date,"MMMM YYYY"),i.shift=e(this.nlsDomain,`shift:${i.shift}`),i.leader=r(i.leader),i},serializeRow:function(){const e=this.serialize(),t=this.get("leader"),i=e.members;return e.members=i.length?r(e.members[0]):"",i.length>1&&(e.members+=` +${i.length-1}`),e.division=o.divisions.getLabel(t.oshDivision,{short:!0}),e.workplace=o.workplaces.getLabel(t.oshWorkplace,{short:!0}),e.department=o.departments.getLabel(t.oshDepartment,{short:!0}),e},serializeDetails:function(){const e=this.serialize(),t=this.get("leader");return e.members=e.members.map(r),e.division=o.divisions.getLabel(t.oshDivision),e.workplace=o.workplaces.getLabel(t.oshWorkplace),e.department=o.departments.getLabel(t.oshDepartment),e}},{can:{add:function(){return i.isAllowedTo("OSH:HR:MANAGE","OSH:LEADER")},edit:function(e){return!!i.isAllowedTo("OSH:HR:MANAGE")||e.get("leader").id===i.data._id}}})});