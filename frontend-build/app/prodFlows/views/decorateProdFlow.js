define(["underscore","app/time","app/data/mrpControllers","app/orgUnits/util/renderOrgUnitPath"],function(t,e,r,n){"use strict";return function(i,a){var l=i.toJSON();return l.deactivatedAt=l.deactivatedAt?e.format(l.deactivatedAt,"LL"):"",l.subdivision=n(i.getSubdivision(),!0,!1),l.orgUnitsText=n(i,!1,!1),l.mrpControllers=(l.mrpController||[]).map(function(e){var n=r.get(e);return n?a?'<a href="'+n.genClientUrl()+'">'+t.escape(n.getLabel())+"</a>":{href:n.genClientUrl(),label:n.getLabel()}:null}).filter(function(t){return!!t}),a&&(l.mrpControllers=l.mrpControllers.join("; ")),l}});