define(["app/core/views/FormView","app/core/util/idAndLabel","app/wmes-osh-common/dictionaries","app/wmes-osh-buildings/templates/form"],function(i,e,t,s){"use strict";return i.extend({template:s,serializeToForm:function(){const i=this.model.toJSON();return i.divisions=(i.divisions||[]).join(","),i},serializeForm:function(i){return i.divisions=i.divisions.split(",").map(i=>+i).filter(i=>i>0),i},afterRender:function(){i.prototype.afterRender.apply(this,arguments),this.setUpDivisionsSelect2()},setUpDivisionsSelect2:function(){this.$id("divisions").select2({multiple:!0,data:t.workplaces.map(i=>({text:i.getLabel({long:!0}),children:i.getDivisions().map(i=>({id:i.id,text:i.getLabel({long:!0}),division:i}))})),formatSelection:(i,e,t)=>t(i.division.getLabel({path:!0}))})}})});