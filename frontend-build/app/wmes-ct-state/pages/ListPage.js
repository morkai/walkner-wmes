define(["app/core/View","app/core/util/bindLoadingMessage","../views/LineStateView","app/wmes-ct-state/templates/listPage","app/wmes-ct-state/templates/reportsAction","app/wmes-ct-state/templates/dictionariesAction"],function(e,t,i,n,o,s){"use strict";return e.extend({template:n,breadcrumbs:function(){return[this.t("BREADCRUMB:base")]},actions:function(){var e=this;return[{href:"#ct/pces",label:this.t("PAGE_ACTION:pces")},{href:"#ct/balancing/pces",label:this.t("PAGE_ACTION:balancing:pces"),privileges:"production"===window.ENV?"SUPER":void 0},{template:function(){return e.renderPartialHtml(o)},privileges:"PROD_DATA:VIEW"},{template:function(){return e.renderPartialHtml(s)},privileges:"PROD_DATA:MANAGE"},{href:"#ct/diag",label:this.t("PAGE_ACTION:diag"),privileges:"PROD_DATA:MANAGE"}]},remoteTopics:{"ct.state.updated":function(e){this.collection.update(e)},"ct.lines.*":function(){this.promised(this.collection.fetch({reset:!0}))}},initialize:function(){this.collection.loading=!1,this.defineModels(),this.defineViews(),this.defineBindings()},defineModels:function(){this.collection=t(this.collection,this)},defineViews:function(){},defineBindings:function(){this.listenTo(this.collection,"request",this.onModelRequest),this.listenTo(this.collection,"error",this.onModelError),this.listenTo(this.collection,"sync",this.onModelSync),this.once("afterRender",function(){this.listenTo(this.collection,"reset",this.render)})},load:function(e){return e(this.collection.fetch({reset:!0}))},beforeRender:function(){this.removeView("#-lines")},afterRender:function(){var e=this;e.collection.forEach(function(t){var n=new i({model:t});e.insertView("#-lines",n),n.render()})},onModelRequest:function(){this.collection.loading=!0},onModelError:function(){this.collection.loading=!1},onModelSync:function(){this.collection.loading=!1}})});