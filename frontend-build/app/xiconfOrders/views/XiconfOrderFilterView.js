// Part of <https://miracle.systems/p/walkner-wmes> licensed under <CC BY-NC-SA 4.0>

define(["app/time","app/core/views/FilterView","app/xiconfOrders/templates/filter"],function(e,t,a){"use strict";return t.extend({template:a,defaultFormData:function(){return{from:"",to:"",_id:"",nc12:"",status:[-1,0,1]}},termToForm:{reqDate:function(t,a,r){r["ge"===a.name?"from":"to"]=e.format(a.args[1],"YYYY-MM-DD")},_id:function(e,t,a){a._id=t.args[1].replace(/[^0-9]/g,"")},status:function(e,t,a){a.status="eq"===t.name?[t.args[1]]:t.args[1]},nc12:function(e,t,a){a.nc12=t.args[1].replace(/[^0-9A-Za-z]/g,"")}},afterRender:function(){t.prototype.afterRender.call(this),this.toggleButtonGroup("status")},serializeFormToQuery:function(t){var a=e.getMoment(this.$id("from").val(),"YYYY-MM-DD"),r=e.getMoment(this.$id("to").val(),"YYYY-MM-DD"),s=this.getButtonGroupValue("status").map(Number);this.serializeRegexTerm(t,"_id",9,null,!1,!0),this.serializeRegexTerm(t,"nc12",12,null,!1,!0),a.isValid()&&t.push({name:"ge",args:["reqDate",a.valueOf()]}),r.isValid()&&t.push({name:"lt",args:["reqDate",r.valueOf()]}),1===s.length?t.push({name:"eq",args:["status",s[0]]}):2===s.length&&t.push({name:"in",args:["status",s]})}})});