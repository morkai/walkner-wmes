<div class="osh-entries-details-props">
  <% if (model.kom) { %>
  <div class="osh-kaizens-details-kom <%- unseen('kom', 1) %>">
    <i class="fa fa-trophy"></i>
    <span><%- t('PROPERTY:kom') %></span>
    <i class="fa fa-trophy"></i>
  </div>
  <% } %>
  <div class="row">
    <div class="col-lg-4">
      <div class="panel panel-primary">
        <div class="panel-heading"><%- t('details:general') %></div>
        <div class="panel-details">
          <%- helpers.props(details, [
            {id: 'subject', nameClassName: unseen('subject', 1)},
            {id: 'workplace', nameClassName: unseen('workplace', 1)},
            {id: 'department', nameClassName: unseen('department', 1)},
            {id: 'building', nameClassName: unseen('building', 1)},
            {id: 'location', nameClassName: unseen('location', 1)},
            {id: 'station', nameClassName: unseen('station', 1)},
            {id: '!kind', nameClassName: unseen('kind', 1), value: v =>
                `<span title="${_.escape(details.descriptions.kind)}">${_.escape(v)} `
                + (details.descriptions.kind ? '<i class="fa fa-question-circle"></i>' : '')
                + '</span>'
            },
            {id: '!kaizenCategory', nameClassName: unseen('kaizenCategory', 1), value: v =>
                `<span title="${_.escape(details.descriptions.kaizenCategory)}">${_.escape(v)} `
                + (details.descriptions.kaizenCategory ? '<i class="fa fa-question-circle"></i>' : '')
                + '</span>'
            }
          ]) %>
        </div>
      </div>
    </div>
    <div class="col-lg-4">
      <div class="panel panel-default">
        <div class="panel-heading"><%- t('details:users') %></div>
        <div class="panel-details">
          <%- helpers.props(details, [
            {id: '!creator', nameClassName: unseen('creator', 1)},
            {id: '!implementers', nameClassName: unseen('implementers', 1), value: users =>
            {
              if (!users.length)
              {
                return '';
              }

              if (users.length === 1)
              {
                return users.join(', ');
              }

              return `<ul><li>${users.join('<li>')}</ul>`;
            }},
            {id: '!coordinators', nameClassName: unseen('coordinators', 1), value: users =>
            {
              if (!users.length)
              {
                return '';
              }

              if (users.length === 1 || users.length > 11)
              {
                return users.join(', ');
              }

              return `<ul><li>${users.join('<li>')}</ul>`;
            }}
          ]) %>
        </div>
      </div>
    </div>
    <div class="col-lg-4">
      <div class="panel panel-default">
        <div class="panel-heading"><%- t('details:extra') %></div>
        <div class="panel-details">
          <%- helpers.props(details, [
            {id: '!status', nameClassName: unseen('status', 1), value: status =>
            {
              let html = status;

              if (model.statusComment)
              {
                html += `<br><span class="small text-lines"><i class="fa fa-comment-o"></i> ${_.escape(model.statusComment)}</span>`;
              }

              return html;
            }},
            {id: 'createdAt', nameClassName: unseen('createdAt', 1)},
            {id: 'startedAt', nameClassName: unseen('startedAt', 1)},
            {id: 'implementedAt', nameClassName: unseen('implementedAt', 1)},
            {id: 'plannedAt', nameClassName: unseen('plannedAt', 1)},
            {id: 'finishedAt', nameClassName: unseen('finishedAt', 1)},
            {id: 'duration', nameClassName: unseen('duration', 1)}
          ]) %>
        </div>
      </div>
    </div>
  </div>
</div>
