<div class="qzPrint-help">
  <h2>Konfiguracja wtyczki Java</h2>
  <ol>
    <li>Instalujemy <a href="http://www.oracle.com/technetwork/java/javase/downloads/jre7-downloads-1880261.html">środowisko uruchomieniowe Java</a> (jeżeli jeszcze nie mamy).</li>
    <li><a href="https://www.java.com/pl/download/help/enable_browser.xml">Włączamy obsługę technologii Java w przeglądarce.</a></li>
    <li>Ściągamy plik <a href="/vendor/qz-print/wmes-qz-print.csr">wmes-qz-print.csr</a> na dysk lokalny.</li>
    <li>Otwieramy <em>Java Control Panel</em>. <a href="https://www.java.com/pl/download/help/win_controlpanel.xml">Gdzie w systemie Windows znajduje się Java Control Panel?</a></li>
    <li>W zakładce <em>Security</em> zaznaczamy opcję <em>Enable Java content in the browser</em>.</li>
    <li>Dodajemy adres http://pos.walkner.pl/ do listy wyjątków. <a href="https://www.java.com/pl/download/help/jcp_security.xml">Jak kontrolować czas i sposób uruchamiania niezaufanych aplikacji lub apletów w przeglądarce internetowej?</a></li>
    <li>Importujemy wcześniej ściągnięty certyfikat <em>wmes-qz-print.csv</em>:
      <ol>
        <li>W zakładce <em>Security</em> klikamy przycisk <em>Manage certificates</em>.</li>
        <li>Z listy <em>Certificate type</em> wybieramy <em>Signer CA</em>.</li>
        <li>Klikamy przycisk <em>Import</em>.</li>
        <li>Wyszukujemy plik <em>wmes-qz-print.csv</em> i klikamy przycisk <em>Open</em>.</li>
        <li>Zamykamy okienko <em>Certificates</em> klikając przycisk <em>Close</em>.</li>
        <li>
          Klikamy przycisk <em>Restore Security Prompts</em> i <em>Restore All</em>
          (na wypadek, gdy w przeszłości wtyczka została przez przypadek zablokowana).
        </li>
      </ol>
    </li>
    <li>Zamykamy okienko <em>Java Control Panel</em> klikając przycisk <em>OK</em>.</li>
    <li><a href="javascript:window.location.reload()">Odświeżamy stronę.</a></li>
    <li>Zazwalamy na uruchomienie wtyczki <em>QZ Print Plugin</em> (zaznaczamy opcję zapamiętania decyzji, aby komunikat nie pojawiał się za każdym wejściem do aplikacji).</li>
  </ol>
  <p>Wtyczka działa poprawnie, jeżeli nad menu nie widać paska z komunikatem informującym o niepomyślnym uruchomieniu wtyczki.</p>
  <h2>Formularz drukowania etykiet</h2>
  <p>Jeżeli wtyczka zostanie uruchomiona, to do listy pola <em>Drukarka</em> formularza <em>Drukowanie etykiet</em> dodane zostaną wszystkie zdefiniowane na komputerze drukarki.</p>
  <p>
    Wybranie drukarki <em>Przeglądarka WWW</em> (zawsze dostępna; wymaga zezwolenia na otwieranie wyskakujących okienek
    w przeglądarce) spowoduje, że po wysłaniu formularza zostanie otwarte nowe okienko z wygenerowanym plikiem PDF zawierającym
    etykietyi uruchomiony zostanie standardowy mechanizm drukowania przeglądarki
    (tj. dostępny podgląd, możliwość wyboru drukarki i ustawienia jej parametrów).
  </p>
  <p class="message message-inline message-warning">
    UWAGA: przy drukowaniu z wykorzystaniem mechanizmu przeglądarki należy upewnić się, że wyłączona jest opcja skalowania
    (np. w Chrome jest to opcja <em>Dopasuj do strony</em>). Jeżeli skalowanie będzie włączone, to cała zawartość dokumentu
    może zmienić rozmiary, co może spowodować, że nie da się odczytać kodu kreskowego czytnikiem.
  </p>
  <p>
    Wybranie drukarki, w nazwie której znajduje się ciąg znaków <code>ZPL203</code> oraz rozmiaru papieru <em>104x42 mm</em>,
    spowoduje, że na daną drukarkę wysłane zostaną bezpośrednio etykiety w formacie <em>ZPL</em> (<em>Zebra Programming Language</em>).
    Aplikacja zakłada, że drukarka ta, to jeden z modeli drukarek termotransferowych Zebra (lub innych obsługujących format ZPL)
    o rozdzielczości 203 DPI. W sekcji <em>Konfiguracja drukarki Zebra 203 DPI</em> poniżej, opisany jest sposób odpowiedniej
    konfiguracji drukarki w systemie Windows. Tym sposobem nie ma możliwości podglądu etykiet przed drukowaniem.
  </p>
  <p>
    Wybranie innej drukarki spowoduje, że na daną drukarkę wysłany zostanie bezpośrednio taki sam plik PDF, jaki jest
    generowany dla <em>Przeglądarki WWW</em>, ale jako obraz (mapa bitowa). Tym sposobem nie ma możliwości podglądu
    etykiet przed drukowaniem.
  </p>
  <p class="message message-inline message-warning">
    UWAGA: przy drukowaniu z wykorzystaniem innej drukarki niż <em>Przeglądarka WWW</em> oraz <em>ZPL203</em>, należy
    ustawić w opcjach drukarki odpowiedni rozmiar papieru (w przeciwnym wypadku mogą wydrukować się puste strony).
  </p>
  <h2>Konfiguracja drukarki ZPL203</h2>
  <p>Aplikacja ma możliwość drukowania bezpośrednio na drukarkę termotransferową.</p>
  <p>
    Aktualnie dostępny jest jeden rozmiar etykiety (104x42 mm) oraz drukarki o rozdzielczości 203 DPI obsługujące format ZPL.
    Testy przeprowadzane były na <a href="https://www.zebra.com/us/en/support-downloads/desktop/gk420t.html">drukarce Zebra GK420t</a>.
  </p>
  <ol>
    <li>
      Instalujemy i konfigurujemy drukarkę wg instrukcji producenta.
      Po pomyślnym zainstalowaniu, drukarka powinna pojawić się w <em>Urządzeniach i drukarkach</em> systemu Windows,
      jako np. <em>ZDesigner GK420t</em> (drukarka Zebra GK420t).
    </li>
    <li>Otwieramy okienko dodawania nowe drukarki:
      <ol>
        <li>Otwieramy okienko <em>Urządzenia i drukarki</em> systemu Windows.</li>
        <li>Klikamy przycisk <em>Dodaj drukarkę</em>.</li>
      </ol>
      lub
      <ol>
        <li>
          Otwieramy okienko <em>Uruchom...</em> wciskając kombinację klawiszy <code>Win+R</code> lub wybierając
          odpowiednią pozycję w menu <em>Start</em>.
        </li>
        <li>Wykonujemy komendę <code>rundll32 printui.dll PrintUIEntry /il</code>.</li>
      </ol>
    </li>
    <li>Wybieramy opcję dodawania nowej, lokalnej drukarki z własnymi ustawieniami.</li>
    <li>Wybieramy port, do którego podłączona jest drukarka termotransferowa (np. <em>USB001</em>).</li>
    <li>Jako producenta wybieramy <em>Generic</em>, a jako drukarkę <em>Generic / Text Only</em>.</li>
    <li>Na następnym ekranie zostawiamy zalecany sterownik.</li>
    <li>
      Na następnym ekranie nadajemy drukarce nazwę, pamiętając o tym, aby w nazwie znalazł się ciąg znaków
      <code>ZPL203</code> (może to być cała nazwa).
    </li>
    <li>Zatwierdzamy dodanie drukarki.</li>
    <li>
      Jeżeli aplikacja była otwarta podczas dodawania drukarki, to aby została ona rozponana, należy
      <a href="javascript:window.location.reload()">przeładować stronę</a>.
    </li>
  </ol>
  <p class="message message-inline message-info">
    Bezpośrednie, szybkie drukowanie etykiet wykona się tylko wtedy, gdy wybierzemy rozmiar papieru
    <em>104x42 mm</em> oraz drukarkę zawierającą w nazwie ciąg znaków <em>ZPL203</em>.
  </p>
</div>
