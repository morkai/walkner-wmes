<div class="qiResults-details">
  <div class="row">
    <div class="col-lg-4">
      <div class="panel panel-primary">
        <div class="panel-heading">
          <%- helpers.t('PANEL:TITLE:details:' + model.source) %>
        </div>
        <div class="panel-details">
          <%- helpers.props(model, [
            {id: 'orderNo', visible: model.source === 'prod'},
            {id: 'serialNumbers', visible: model.source === 'prod'},
            {id: 'nc12', label: helpers.t('PROPERTY:nc12:' + model.source)},
            {id: 'productFamily', visible: model.source === 'prod'},
            {id: 'productName', label: helpers.t('PROPERTY:productName:' + model.source)},
            'division',
            {id: 'line', label: helpers.t('PROPERTY:line:' + model.source)},
            {id: 'qtyOrder', visible: model.source === 'prod'}
          ]) %>
        </div>
      </div>
    </div>
    <div class="col-lg-4">
      <div class="panel panel-<%- model.ok ? 'success' : 'danger' %>">
        <div class="panel-heading">
          <%- helpers.t('PANEL:TITLE:details:inspection') %>
        </div>
        <div class="panel-details">
          <%- helpers.props(model, [
            'kind',
            'inspectedAt',
            '!inspector',
            {id: '!leader', label: helpers.t('PROPERTY:leader:' + model.source)},
            {id: '!nokOwner', visible: !model.ok},
            'qtyInspected',
            {id: 'qtyNokInspected', visible: !model.ok},
            {id: 'qtyToFix', visible: !model.ok},
            {id: 'qtyNok', visible: !model.ok}
          ]) %>
        </div>
      </div>
    </div>
    <div class="col-lg-4">
      <div class="panel panel-default">
        <div class="panel-heading">
          <%- helpers.t('PANEL:TITLE:details:extra') %>
        </div>
        <div class="panel-details">
          <%- helpers.props(model, ['createdAt', '!creator', 'updatedAt', '!updater']) %>
        </div>
      </div>
    </div>
  </div>
  <% if (!model.ok) { %>
  <div class="row">
    <div class="col-lg-4">
      <div class="panel panel-danger">
        <div class="panel-heading">
          <%- helpers.t('PANEL:TITLE:details:inspection:nok') %>
        </div>
        <div class="panel-details">
          <%- helpers.props(model, [
            'errorCategory',
            'faultCode',
            {id: 'faultDescription', valueClassName: 'text-lines'},
            {id: 'problem', valueClassName: 'text-lines'},
            {id: 'immediateActions', valueClassName: 'text-lines'},
            {id: 'rootCause', valueClassName: 'text-lines'},
          ]) %>
        </div>
      </div>
    </div>
    <div class="col-lg-4">
      <div class="panel panel-success">
        <div class="panel-heading">
          <%- helpers.t('PANEL:TITLE:details:attachments:ok') %>
        </div>
        <div class="panel-body qiResults-details-attachment">
          <% if (model.okFile) { %>
          <a href="/qi/results/<%- model._id %>/attachments/<%- model.rid %>%20OK" data-file="ok">
            <% if (model.okFile.icon === 'file-image-o') { %>
            <img src="/qi/results/<%- model._id %>/attachments/okFile?min=<%- model.okFile._id %>">
            <% } else { %>
            <i class="fa fa-<%- model.okFile.icon %>"></i>
            <% } %>
            <span><%= model.okFile.name %></span>
          </a>
          <% } else { %>
          <i class="fa fa-ban"></i>
          <% } %>
        </div>
      </div>
    </div>
    <div class="col-lg-4">
      <div class="panel panel-danger">
        <div class="panel-heading">
          <%- helpers.t('PANEL:TITLE:details:attachments:nok') %>
        </div>
        <div class="panel-body qiResults-details-attachment">
          <% if (model.nokFile) { %>
          <a href="/qi/results/<%- model._id %>/attachments/<%- model.rid %>%20NOK" data-file="nok">
            <% if (model.nokFile.icon === 'file-image-o') { %>
            <img src="/qi/results/<%- model._id %>/attachments/nokFile?min=<%- model.nokFile._id %>">
            <% } else { %>
            <i class="fa fa-<%- model.nokFile.icon %>"></i>
            <% } %>
            <span><%= model.nokFile.name %></span>
          </a>
          <% } else { %>
          <i class="fa fa-ban"></i>
          <% } %>
        </div>
      </div>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading">
      <%- helpers.t('PANEL:TITLE:details:actions') %>
    </div>
    <% if (model.correctiveActions.length) { %>
    <%- renderCorrectiveActionsTable({
      helpers: helpers,
      bordered: true,
      correctiveActions: model.correctiveActions
    }) %>
    <% } else { %>
    <div class="panel-body">
      <p><%- helpers.t('correctiveActions:empty') %></p>
    </div>
    <% } %>
  </div>
  <% } %>
</div>
